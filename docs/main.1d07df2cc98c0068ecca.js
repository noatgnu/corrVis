(self.webpackChunkplotly_heatmap=self.webpackChunkplotly_heatmap||[]).push([[179],{255:es=>{function h(G){return Promise.resolve().then(()=>{var X=new Error("Cannot find module '"+G+"'");throw X.code="MODULE_NOT_FOUND",X})}h.keys=()=>[],h.resolve=h,h.id=255,es.exports=h},559:es=>{var h=function(){"use strict";function G(r,u,c,l){"object"==typeof u&&(c=u.depth,l=u.prototype,u=u.circular);var s=[],o=[],d="undefined"!=typeof Buffer;return void 0===u&&(u=!0),void 0===c&&(c=1/0),function g(y,v){if(null===y)return null;if(0==v)return y;var _,w;if("object"!=typeof y)return y;if(G.__isArray(y))_=[];else if(G.__isRegExp(y))_=new RegExp(y.source,p(y)),y.lastIndex&&(_.lastIndex=y.lastIndex);else if(G.__isDate(y))_=new Date(y.getTime());else{if(d&&Buffer.isBuffer(y))return _=Buffer.allocUnsafe?Buffer.allocUnsafe(y.length):new Buffer(y.length),y.copy(_),_;void 0===l?(w=Object.getPrototypeOf(y),_=Object.create(w)):(_=Object.create(l),w=l)}if(u){var x=s.indexOf(y);if(-1!=x)return o[x];s.push(y),o.push(_)}for(var E in y){var k;w&&(k=Object.getOwnPropertyDescriptor(w,E)),(!k||null!=k.set)&&(_[E]=g(y[E],v-1))}return _}(r,c)}function X(r){return Object.prototype.toString.call(r)}function p(r){var u="";return r.global&&(u+="g"),r.ignoreCase&&(u+="i"),r.multiline&&(u+="m"),u}return G.clonePrototype=function(u){if(null===u)return null;var c=function(){};return c.prototype=u,new c},G.__objToStr=X,G.__isDate=function(r){return"object"==typeof r&&"[object Date]"===X(r)},G.__isArray=function(r){return"object"==typeof r&&"[object Array]"===X(r)},G.__isRegExp=function(r){return"object"==typeof r&&"[object RegExp]"===X(r)},G.__getRegExpFlags=p,G}();es.exports&&(es.exports=h)},163:(es,h,G)=>{var X=G(559);es.exports=function(i,m){return i=i||{},Object.keys(m).forEach(function(b){void 0===i[b]&&(i[b]=X(m[b]))}),i}},577:(es,h,G)=>{var X;try{X=G(819)}catch(s){}function i(){this.rows=[],this.row={__printers:{}}}function m(s){return void 0===s?"":""+s}function b(s){var o=s.replace(/\u001b\[\d+m/g,"");return null==X?o.length:X(o)}function p(s){return function(o,d){var g=m(o),y=b(g);return(d>y?Array(d-y+1).join(s):"")+g}}es.exports=i,i.prototype.newRow=function(){return this.rows.push(this.row),this.row={__printers:{}},this},i.prototype.cell=function(s,o,d){return this.row[s]=o,this.row.__printers[s]=d||m,this},i.prototype.separator="  ",i.string=m,i.leftPadder=p;var r=i.padLeft=p(" ");function u(s){return function(d,g){var y=m(d),v=b(y);return y+(g>v?Array(g-v+1).join(s):"")}}i.rightPadder=u;var c=u(" ");function l(s,o){for(var d in s)"__printers"!=d&&o(d,s[d])}function f(s,o){return s===o?0:void 0===s?1:void 0===o?-1:null===s?1:null===o?-1:s>o?1:s<o?-1:f(String(s),String(o))}i.number=function(s){return function(o,d){if(null==o)return"";if("number"!=typeof o)throw new Error(o+" is not a number");var g=null==s?o+"":o.toFixed(s);return r(g,d)}},i.prototype.columns=function(){for(var s={},o=0;o<2;o++)this.rows.forEach(function(d){var g=0;l(d,function(y){g=Math.max(g,s[y]||0),s[y]=g,g++})});return Object.keys(s).sort(function(d,g){return s[d]-s[g]})},i.prototype.print=function(){var s=this.columns(),o=this.separator,d={},g="";return this.rows.forEach(function(y){l(y,function(v,_){var w=y.__printers[v].call(y,_);d[v]=Math.max(b(w),d[v]||0)})}),this.rows.forEach(function(y){var v="";s.forEach(function(_){var w=d[_],x=y.hasOwnProperty(_)?""+y.__printers[_].call(y,y[_],w):"";v+=c(x,w)+o}),v=v.slice(0,-o.length),g+=v+"\n"}),g},i.prototype.toString=function(){var s=this.columns(),o=new i;return o.separator=this.separator,s.forEach(function(d){o.cell(d,d)}),o.newRow(),o.pushDelimeter(s),o.rows=o.rows.concat(this.rows),this.totals&&this.rows.length&&(o.pushDelimeter(s),this.forEachTotal(o.cell.bind(o)),o.newRow()),o.print()},i.prototype.pushDelimeter=function(s){return(s=s||this.columns()).forEach(function(o){this.cell(o,void 0,p("-"))},this),this.newRow()},i.prototype.forEachTotal=function(s){for(var o in this.totals){var d=this.totals[o],g=d.init,y=this.rows.length;this.rows.forEach(function(v,_){g=d.reduce.call(v,g,v[o],_,y)}),s(o,g,d.printer)}},i.prototype.printTransposed=function(s){s=s||{};var o=new i;return o.separator=s.separator||this.separator,this.columns().forEach(function(d){o.cell(0,d,s.namePrinter),this.rows.forEach(function(g,y){o.cell(y+1,g[d],g.__printers[d])}),o.newRow()},this),o.print()},i.prototype.sort=function(s){if("function"==typeof s)return this.rows.sort(s),this;var d=(Array.isArray(s)?s:this.columns()).map(function(g){var y="asc",v=/(.*)\|\s*(asc|des)\s*$/.exec(g);return v&&(g=v[1],y=v[2]),function(_,w){return"asc"==y?f(_[g],w[g]):f(w[g],_[g])}});return this.sort(function(g,y){for(var v=0;v<d.length;v++){var _=d[v](g,y);if(0!=_)return _}return 0})},i.prototype.total=function(s,o){return o=o||{},this.totals=this.totals||{},this.totals[s]={reduce:o.reduce||i.aggr.sum,printer:o.printer||r,init:null==o.init?0:o.init},this},(i.aggr={}).printer=function(s,o){return o=o||m,function(d,g){return r(s+o(d),g)}},i.aggr.sum=function(s,o){return s+o},i.aggr.avg=function(s,o,d,g){return s+=o,d+1==g?s/g:s},i.print=function(s,o,d){var g=o||{};o="function"==typeof o?o:function(_,w){for(var x in _)if(_.hasOwnProperty(x)){var E=g[x]||{};w(E.name||x,_[x],E.printer)}};var y=new i,v=y.cell.bind(y);return Array.isArray(s)?(d=d||function(_){return _.toString()},s.forEach(function(_){o(_,v),y.newRow()})):(d=d||function(_){return _.printTransposed({separator:" : "})},o(s,v),y.newRow()),d(y)},i.log=function(s,o,d){console.log(i.print(s,o,d))},i.prototype.log=function(){console.log(this.toString())}},701:function(es){es.exports=function(){"use strict";function h(Ee,Ne){return Ee(Ne={exports:{}},Ne.exports),Ne.exports}var G=h(function(Ee){var Ne=Ee.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=Ne)}),X=h(function(Ee){var Ne=Ee.exports={version:"2.6.5"};"number"==typeof __e&&(__e=Ne)}),m=function(Ee){return"object"==typeof Ee?null!==Ee:"function"==typeof Ee},b=function(Ee){if(!m(Ee))throw TypeError(Ee+" is not an object!");return Ee},p=function(Ee){try{return!!Ee()}catch(Ne){return!0}},r=!p(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),u=G.document,c=m(u)&&m(u.createElement),f=!r&&!p(function(){return 7!=Object.defineProperty(function(Ee){return c?u.createElement(Ee):{}}("div"),"a",{get:function(){return 7}}).a}),o=Object.defineProperty,g={f:r?Object.defineProperty:function(Ne,Ve,Ke){if(b(Ne),Ve=function(Ee,Ne){if(!m(Ee))return Ee;var Ve,Ke;if(Ne&&"function"==typeof(Ve=Ee.toString)&&!m(Ke=Ve.call(Ee))||"function"==typeof(Ve=Ee.valueOf)&&!m(Ke=Ve.call(Ee))||!Ne&&"function"==typeof(Ve=Ee.toString)&&!m(Ke=Ve.call(Ee)))return Ke;throw TypeError("Can't convert object to primitive value")}(Ve,!0),b(Ke),f)try{return o(Ne,Ve,Ke)}catch(bt){}if("get"in Ke||"set"in Ke)throw TypeError("Accessors not supported!");return"value"in Ke&&(Ne[Ve]=Ke.value),Ne}},v=r?function(Ee,Ne,Ve){return g.f(Ee,Ne,function(Ee,Ne){return{enumerable:!(1&Ee),configurable:!(2&Ee),writable:!(4&Ee),value:Ne}}(1,Ve))}:function(Ee,Ne,Ve){return Ee[Ne]=Ve,Ee},_={}.hasOwnProperty,w=function(Ee,Ne){return _.call(Ee,Ne)},x=0,E=Math.random(),P=h(function(Ee){var Ne="__core-js_shared__",Ve=G[Ne]||(G[Ne]={});(Ee.exports=function(Ke,bt){return Ve[Ke]||(Ve[Ke]=void 0!==bt?bt:{})})("versions",[]).push({version:X.version,mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})})("native-function-to-string",Function.toString),A=h(function(Ee){var Ne=function(Ee){return"Symbol(".concat(void 0===Ee?"":Ee,")_",(++x+E).toString(36))}("src"),Ve="toString",Ke=(""+P).split(Ve);X.inspectSource=function(bt){return P.call(bt)},(Ee.exports=function(bt,gt,pt,St){var jt="function"==typeof pt;jt&&(w(pt,"name")||v(pt,"name",gt)),bt[gt]!==pt&&(jt&&(w(pt,Ne)||v(pt,Ne,bt[gt]?""+bt[gt]:Ke.join(String(gt)))),bt===G?bt[gt]=pt:St?bt[gt]?bt[gt]=pt:v(bt,gt,pt):(delete bt[gt],v(bt,gt,pt)))})(Function.prototype,Ve,function(){return"function"==typeof this&&this[Ne]||P.call(this)})}),D=function(Ee,Ne,Ve){if(function(Ee){if("function"!=typeof Ee)throw TypeError(Ee+" is not a function!")}(Ee),void 0===Ne)return Ee;switch(Ve){case 1:return function(Ke){return Ee.call(Ne,Ke)};case 2:return function(Ke,bt){return Ee.call(Ne,Ke,bt)};case 3:return function(Ke,bt,gt){return Ee.call(Ne,Ke,bt,gt)}}return function(){return Ee.apply(Ne,arguments)}},R="prototype",S=function(Ee,Ne,Ve){var mt,Wt,Kt,rn,Ke=Ee&S.F,bt=Ee&S.G,pt=Ee&S.P,St=Ee&S.B,jt=bt?G:Ee&S.S?G[Ne]||(G[Ne]={}):(G[Ne]||{})[R],Lt=bt?X:X[Ne]||(X[Ne]={}),Vt=Lt[R]||(Lt[R]={});for(mt in bt&&(Ve=Ne),Ve)Kt=((Wt=!Ke&&jt&&void 0!==jt[mt])?jt:Ve)[mt],rn=St&&Wt?D(Kt,G):pt&&"function"==typeof Kt?D(Function.call,Kt):Kt,jt&&A(jt,mt,Kt,Ee&S.U),Lt[mt]!=Kt&&v(Lt,mt,rn),pt&&Vt[mt]!=Kt&&(Vt[mt]=Kt)};G.core=X,S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128;var N=S,B=Math.ceil,H=Math.floor,Y=function(Ee){return isNaN(Ee=+Ee)?0:(Ee>0?H:B)(Ee)},ae=(!1,function(Ne,Ve){var pt,St,Ke=String(function(Ee){if(null==Ee)throw TypeError("Can't call method on  "+Ee);return Ee}(Ne)),bt=Y(Ve),gt=Ke.length;return bt<0||bt>=gt?void 0:(pt=Ke.charCodeAt(bt))<55296||pt>56319||bt+1===gt||(St=Ke.charCodeAt(bt+1))<56320||St>57343?pt:St-56320+(pt-55296<<10)+65536});N(N.P,"String",{codePointAt:function(Ne){return ae(this,Ne)}});var K=Math.max,q=Math.min,re=function(Ee,Ne){return(Ee=Y(Ee))<0?K(Ee+Ne,0):q(Ee,Ne)},V=String.fromCharCode,W=String.fromCodePoint;N(N.S+N.F*(!!W&&1!=W.length),"String",{fromCodePoint:function(Ne){for(var pt,Ve=arguments,Ke=[],bt=arguments.length,gt=0;bt>gt;){if(pt=+Ve[gt++],re(pt,1114111)!==pt)throw RangeError(pt+" is not a valid code point");Ke.push(pt<65536?V(pt):V(55296+((pt-=65536)>>10),pt%1024+56320))}return Ke.join("")}});var de,be,pe,Te,ye,ke,ze,je,Ie,we,Se,Oe,Be,He,fe={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},he_isSpaceSeparator=function(Ne){return"string"==typeof Ne&&fe.Space_Separator.test(Ne)},he_isIdStartChar=function(Ne){return"string"==typeof Ne&&(Ne>="a"&&Ne<="z"||Ne>="A"&&Ne<="Z"||"$"===Ne||"_"===Ne||fe.ID_Start.test(Ne))},he_isIdContinueChar=function(Ne){return"string"==typeof Ne&&(Ne>="a"&&Ne<="z"||Ne>="A"&&Ne<="Z"||Ne>="0"&&Ne<="9"||"$"===Ne||"_"===Ne||"\u200c"===Ne||"\u200d"===Ne||fe.ID_Continue.test(Ne))},he_isDigit=function(Ne){return"string"==typeof Ne&&/[0-9]/.test(Ne)},he_isHexDigit=function(Ne){return"string"==typeof Ne&&/[0-9A-Fa-f]/.test(Ne)};function _e(Ee,Ne,Ve){var Ke=Ee[Ne];if(null!=Ke&&"object"==typeof Ke)for(var bt in Ke){var gt=_e(Ke,bt,Ve);void 0===gt?delete Ke[bt]:Ke[bt]=gt}return Ve.call(Ee,Ne,Ke)}function Xe(){for(we="default",Se="",Oe=!1,Be=1;;){He=nt();var Ee=qe[we]();if(Ee)return Ee}}function nt(){if(de[Te])return String.fromCodePoint(de.codePointAt(Te))}function et(){var Ee=nt();return"\n"===Ee?(ye++,ke=0):Ee?ke+=Ee.length:ke++,Ee&&(Te+=Ee.length),Ee}var qe={default:function(){switch(He){case"\t":case"\v":case"\f":case" ":case"\xa0":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void et();case"/":return et(),void(we="comment");case void 0:return et(),Ye("eof")}if(!he_isSpaceSeparator(He))return qe[be]();et()},comment:function(){switch(He){case"*":return et(),void(we="multiLineComment");case"/":return et(),void(we="singleLineComment")}throw ht(et())},multiLineComment:function(){switch(He){case"*":return et(),void(we="multiLineCommentAsterisk");case void 0:throw ht(et())}et()},multiLineCommentAsterisk:function(){switch(He){case"*":return void et();case"/":return et(),void(we="default");case void 0:throw ht(et())}et(),we="multiLineComment"},singleLineComment:function(){switch(He){case"\n":case"\r":case"\u2028":case"\u2029":return et(),void(we="default");case void 0:return et(),Ye("eof")}et()},value:function(){switch(He){case"{":case"[":return Ye("punctuator",et());case"n":return et(),ot("ull"),Ye("null",null);case"t":return et(),ot("rue"),Ye("boolean",!0);case"f":return et(),ot("alse"),Ye("boolean",!1);case"-":case"+":return"-"===et()&&(Be=-1),void(we="sign");case".":return Se=et(),void(we="decimalPointLeading");case"0":return Se=et(),void(we="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return Se=et(),void(we="decimalInteger");case"I":return et(),ot("nfinity"),Ye("numeric",1/0);case"N":return et(),ot("aN"),Ye("numeric",NaN);case'"':case"'":return Oe='"'===et(),Se="",void(we="string")}throw ht(et())},identifierNameStartEscape:function(){if("u"!==He)throw ht(et());et();var Ne=_t();switch(Ne){case"$":case"_":break;default:if(!he_isIdStartChar(Ne))throw Bt()}Se+=Ne,we="identifierName"},identifierName:function(){switch(He){case"$":case"_":case"\u200c":case"\u200d":return void(Se+=et());case"\\":return et(),void(we="identifierNameEscape")}if(!he_isIdContinueChar(He))return Ye("identifier",Se);Se+=et()},identifierNameEscape:function(){if("u"!==He)throw ht(et());et();var Ne=_t();switch(Ne){case"$":case"_":case"\u200c":case"\u200d":break;default:if(!he_isIdContinueChar(Ne))throw Bt()}Se+=Ne,we="identifierName"},sign:function(){switch(He){case".":return Se=et(),void(we="decimalPointLeading");case"0":return Se=et(),void(we="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return Se=et(),void(we="decimalInteger");case"I":return et(),ot("nfinity"),Ye("numeric",Be*(1/0));case"N":return et(),ot("aN"),Ye("numeric",NaN)}throw ht(et())},zero:function(){switch(He){case".":return Se+=et(),void(we="decimalPoint");case"e":case"E":return Se+=et(),void(we="decimalExponent");case"x":case"X":return Se+=et(),void(we="hexadecimal")}return Ye("numeric",0*Be)},decimalInteger:function(){switch(He){case".":return Se+=et(),void(we="decimalPoint");case"e":case"E":return Se+=et(),void(we="decimalExponent")}if(!he_isDigit(He))return Ye("numeric",Be*Number(Se));Se+=et()},decimalPointLeading:function(){if(he_isDigit(He))return Se+=et(),void(we="decimalFraction");throw ht(et())},decimalPoint:function(){switch(He){case"e":case"E":return Se+=et(),void(we="decimalExponent")}return he_isDigit(He)?(Se+=et(),void(we="decimalFraction")):Ye("numeric",Be*Number(Se))},decimalFraction:function(){switch(He){case"e":case"E":return Se+=et(),void(we="decimalExponent")}if(!he_isDigit(He))return Ye("numeric",Be*Number(Se));Se+=et()},decimalExponent:function(){switch(He){case"+":case"-":return Se+=et(),void(we="decimalExponentSign")}if(he_isDigit(He))return Se+=et(),void(we="decimalExponentInteger");throw ht(et())},decimalExponentSign:function(){if(he_isDigit(He))return Se+=et(),void(we="decimalExponentInteger");throw ht(et())},decimalExponentInteger:function(){if(!he_isDigit(He))return Ye("numeric",Be*Number(Se));Se+=et()},hexadecimal:function(){if(he_isHexDigit(He))return Se+=et(),void(we="hexadecimalInteger");throw ht(et())},hexadecimalInteger:function(){if(!he_isHexDigit(He))return Ye("numeric",Be*Number(Se));Se+=et()},string:function(){switch(He){case"\\":return et(),void(Se+=function(){switch(nt()){case"b":return et(),"\b";case"f":return et(),"\f";case"n":return et(),"\n";case"r":return et(),"\r";case"t":return et(),"\t";case"v":return et(),"\v";case"0":if(et(),he_isDigit(nt()))throw ht(et());return"\0";case"x":return et(),function(){var Ee="",Ne=nt();if(!he_isHexDigit(Ne)||(Ee+=et(),Ne=nt(),!he_isHexDigit(Ne)))throw ht(et());return Ee+=et(),String.fromCodePoint(parseInt(Ee,16))}();case"u":return et(),_t();case"\n":case"\u2028":case"\u2029":return et(),"";case"\r":return et(),"\n"===nt()&&et(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw ht(et())}return et()}());case'"':return Oe?(et(),Ye("string",Se)):void(Se+=et());case"'":return Oe?void(Se+=et()):(et(),Ye("string",Se));case"\n":case"\r":throw ht(et());case"\u2028":case"\u2029":!function(Ee){console.warn("JSON5: '"+hn(Ee)+"' in strings is not valid ECMAScript; consider escaping")}(He);break;case void 0:throw ht(et())}Se+=et()},start:function(){switch(He){case"{":case"[":return Ye("punctuator",et())}we="value"},beforePropertyName:function(){switch(He){case"$":case"_":return Se=et(),void(we="identifierName");case"\\":return et(),void(we="identifierNameStartEscape");case"}":return Ye("punctuator",et());case'"':case"'":return Oe='"'===et(),void(we="string")}if(he_isIdStartChar(He))return Se+=et(),void(we="identifierName");throw ht(et())},afterPropertyName:function(){if(":"===He)return Ye("punctuator",et());throw ht(et())},beforePropertyValue:function(){we="value"},afterPropertyValue:function(){switch(He){case",":case"}":return Ye("punctuator",et())}throw ht(et())},beforeArrayValue:function(){if("]"===He)return Ye("punctuator",et());we="value"},afterArrayValue:function(){switch(He){case",":case"]":return Ye("punctuator",et())}throw ht(et())},end:function(){throw ht(et())}};function Ye(Ee,Ne){return{type:Ee,value:Ne,line:ye,column:ke}}function ot(Ee){for(var Ne=0,Ve=Ee;Ne<Ve.length;Ne+=1){var Ke=Ve[Ne];if(nt()!==Ke)throw ht(et());et()}}function _t(){for(var Ee="",Ne=4;Ne-- >0;){var Ve=nt();if(!he_isHexDigit(Ve))throw ht(et());Ee+=et()}return String.fromCodePoint(parseInt(Ee,16))}var xt={start:function(){if("eof"===ze.type)throw st();Ht()},beforePropertyName:function(){switch(ze.type){case"identifier":case"string":return je=ze.value,void(be="afterPropertyName");case"punctuator":return void At();case"eof":throw st()}},afterPropertyName:function(){if("eof"===ze.type)throw st();be="beforePropertyValue"},beforePropertyValue:function(){if("eof"===ze.type)throw st();Ht()},beforeArrayValue:function(){if("eof"===ze.type)throw st();"punctuator"!==ze.type||"]"!==ze.value?Ht():At()},afterPropertyValue:function(){if("eof"===ze.type)throw st();switch(ze.value){case",":return void(be="beforePropertyName");case"}":At()}},afterArrayValue:function(){if("eof"===ze.type)throw st();switch(ze.value){case",":return void(be="beforeArrayValue");case"]":At()}},end:function(){}};function Ht(){var Ee;switch(ze.type){case"punctuator":switch(ze.value){case"{":Ee={};break;case"[":Ee=[]}break;case"null":case"boolean":case"numeric":case"string":Ee=ze.value}if(void 0===Ie)Ie=Ee;else{var Ne=pe[pe.length-1];Array.isArray(Ne)?Ne.push(Ee):Ne[je]=Ee}if(null!==Ee&&"object"==typeof Ee)pe.push(Ee),be=Array.isArray(Ee)?"beforeArrayValue":"beforePropertyName";else{var Ve=pe[pe.length-1];be=null==Ve?"end":Array.isArray(Ve)?"afterArrayValue":"afterPropertyValue"}}function At(){pe.pop();var Ee=pe[pe.length-1];be=null==Ee?"end":Array.isArray(Ee)?"afterArrayValue":"afterPropertyValue"}function ht(Ee){return We(void 0===Ee?"JSON5: invalid end of input at "+ye+":"+ke:"JSON5: invalid character '"+hn(Ee)+"' at "+ye+":"+ke)}function st(){return We("JSON5: invalid end of input at "+ye+":"+ke)}function Bt(){return We("JSON5: invalid identifier character at "+ye+":"+(ke-=5))}function hn(Ee){var Ne={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(Ne[Ee])return Ne[Ee];if(Ee<" "){var Ve=Ee.charCodeAt(0).toString(16);return"\\x"+("00"+Ve).substring(Ve.length)}return Ee}function We(Ee){var Ne=new SyntaxError(Ee);return Ne.lineNumber=ye,Ne.columnNumber=ke,Ne}return{parse:function(Ne,Ve){de=String(Ne),be="start",pe=[],Te=0,ye=1,ke=0,ze=void 0,je=void 0,Ie=void 0;do{ze=Xe(),xt[be]()}while("eof"!==ze.type);return"function"==typeof Ve?_e({"":Ie},"",Ve):Ie},stringify:function(Ne,Ve,Ke){var pt,St,Lt,bt=[],gt="",jt="";if(null!=Ve&&"object"==typeof Ve&&!Array.isArray(Ve)&&(Ke=Ve.space,Lt=Ve.quote,Ve=Ve.replacer),"function"==typeof Ve)St=Ve;else if(Array.isArray(Ve)){pt=[];for(var Vt=0,mt=Ve;Vt<mt.length;Vt+=1){var Wt=mt[Vt],Kt=void 0;"string"==typeof Wt?Kt=Wt:("number"==typeof Wt||Wt instanceof String||Wt instanceof Number)&&(Kt=String(Wt)),void 0!==Kt&&pt.indexOf(Kt)<0&&pt.push(Kt)}}return Ke instanceof Number?Ke=Number(Ke):Ke instanceof String&&(Ke=String(Ke)),"number"==typeof Ke?Ke>0&&(Ke=Math.min(10,Math.floor(Ke)),jt="          ".substr(0,Ke)):"string"==typeof Ke&&(jt=Ke.substr(0,10)),rn("",{"":Ne});function rn(Zt,tn){var un=tn[Zt];switch(null!=un&&("function"==typeof un.toJSON5?un=un.toJSON5(Zt):"function"==typeof un.toJSON&&(un=un.toJSON(Zt))),St&&(un=St.call(tn,Zt,un)),un instanceof Number?un=Number(un):un instanceof String?un=String(un):un instanceof Boolean&&(un=un.valueOf()),un){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof un?Yt(un):"number"==typeof un?String(un):"object"==typeof un?Array.isArray(un)?function(Zt){if(bt.indexOf(Zt)>=0)throw TypeError("Converting circular structure to JSON5");bt.push(Zt);var yn,tn=gt;gt+=jt;for(var un=[],vn=0;vn<Zt.length;vn++){var Qt=rn(String(vn),Zt);un.push(void 0!==Qt?Qt:"null")}if(0===un.length)yn="[]";else if(""===jt)yn="["+un.join(",")+"]";else{var sn=un.join(",\n"+gt);yn="[\n"+gt+sn+",\n"+tn+"]"}return bt.pop(),gt=tn,yn}(un):function(Zt){if(bt.indexOf(Zt)>=0)throw TypeError("Converting circular structure to JSON5");bt.push(Zt);var In,Rn,tn=gt;gt+=jt;for(var vn=[],Qt=0,yn=pt||Object.keys(Zt);Qt<yn.length;Qt+=1){var Mn=yn[Qt],Pn=rn(Mn,Zt);if(void 0!==Pn){var sn=wt(Mn)+":";""!==jt&&(sn+=" "),vn.push(sn+=Pn)}}return 0===vn.length?In="{}":""===jt?In="{"+(Rn=vn.join(","))+"}":(Rn=vn.join(",\n"+gt),In="{\n"+gt+Rn+",\n"+tn+"}"),bt.pop(),gt=tn,In}(un):void 0}function Yt(Zt){for(var tn={"'":.1,'"':.2},un={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},vn="",Qt=0;Qt<Zt.length;Qt++){var yn=Zt[Qt];switch(yn){case"'":case'"':tn[yn]++,vn+=yn;continue;case"\0":if(he_isDigit(Zt[Qt+1])){vn+="\\x00";continue}}if(un[yn])vn+=un[yn];else if(yn<" "){var Mn=yn.charCodeAt(0).toString(16);vn+="\\x"+("00"+Mn).substring(Mn.length)}else vn+=yn}var Pn=Lt||Object.keys(tn).reduce(function(sn,In){return tn[sn]<tn[In]?sn:In});return Pn+(vn=vn.replace(new RegExp(Pn,"g"),un[Pn]))+Pn}function wt(Zt){if(0===Zt.length)return Yt(Zt);var tn=String.fromCodePoint(Zt.codePointAt(0));if(!he_isIdStartChar(tn))return Yt(Zt);for(var un=tn.length;un<Zt.length;un++)if(!he_isIdContinueChar(String.fromCodePoint(Zt.codePointAt(un))))return Yt(Zt);return Zt}}}}()},522:function(es,h,G){var X,i;void 0!==(i="function"==typeof(X=function(){var m,b,s,o,g,r={},u={},c={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},l={currentLocale:c.currentLocale,zeroFormat:c.zeroFormat,nullFormat:c.nullFormat,defaultFormat:c.defaultFormat,scalePercentBy100:c.scalePercentBy100};function f(s,o){this._input=s,this._value=o}return(m=function(s){var o,d,g,y;if(m.isNumeral(s))o=s.value();else if(0===s||void 0===s)o=0;else if(null===s||b.isNaN(s))o=null;else if("string"==typeof s)if(l.zeroFormat&&s===l.zeroFormat)o=0;else if(l.nullFormat&&s===l.nullFormat||!s.replace(/[^0-9]+/g,"").length)o=null;else{for(d in r)if((y="function"==typeof r[d].regexps.unformat?r[d].regexps.unformat():r[d].regexps.unformat)&&s.match(y)){g=r[d].unformat;break}o=(g=g||m._.stringToNumber)(s)}else o=Number(s)||null;return new f(s,o)}).version="2.0.6",m.isNumeral=function(s){return s instanceof f},m._=b={numberToFormat:function(s,o,d){var A,I,N,B,H,Y,Q,_,g=u[m.options.currentLocale],y=!1,v=!1,w="",x=1e12,E=1e9,k=1e6,L="",P=!1;if(s=s||0,I=Math.abs(s),m._.includes(o,"(")?(y=!0,o=o.replace(/[\(|\)]/g,"")):(m._.includes(o,"+")||m._.includes(o,"-"))&&(H=m._.includes(o,"+")?o.indexOf("+"):s<0?o.indexOf("-"):-1,o=o.replace(/[\+|\-]/g,"")),m._.includes(o,"a")&&(A=!!(A=o.match(/a(k|m|b|t)?/))&&A[1],m._.includes(o," a")&&(w=" "),o=o.replace(new RegExp(w+"a[kmbt]?"),""),I>=x&&!A||"t"===A?(w+=g.abbreviations.trillion,s/=x):I<x&&I>=E&&!A||"b"===A?(w+=g.abbreviations.billion,s/=E):I<E&&I>=k&&!A||"m"===A?(w+=g.abbreviations.million,s/=k):(I<k&&I>=1e3&&!A||"k"===A)&&(w+=g.abbreviations.thousand,s/=1e3)),m._.includes(o,"[.]")&&(v=!0,o=o.replace("[.]",".")),N=s.toString().split(".")[0],B=o.split(".")[1],Y=o.indexOf(","),_=(o.split(".")[0].split(",")[0].match(/0/g)||[]).length,B?(m._.includes(B,"[")?(B=(B=B.replace("]","")).split("["),L=m._.toFixed(s,B[0].length+B[1].length,d,B[1].length)):L=m._.toFixed(s,B.length,d),N=L.split(".")[0],L=m._.includes(L,".")?g.delimiters.decimal+L.split(".")[1]:"",v&&0===Number(L.slice(1))&&(L="")):N=m._.toFixed(s,0,d),w&&!A&&Number(N)>=1e3&&w!==g.abbreviations.trillion)switch(N=String(Number(N)/1e3),w){case g.abbreviations.thousand:w=g.abbreviations.million;break;case g.abbreviations.million:w=g.abbreviations.billion;break;case g.abbreviations.billion:w=g.abbreviations.trillion}if(m._.includes(N,"-")&&(N=N.slice(1),P=!0),N.length<_)for(var ne=_-N.length;ne>0;ne--)N="0"+N;return Y>-1&&(N=N.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+g.delimiters.thousands)),0===o.indexOf(".")&&(N=""),Q=N+L+(w||""),y?Q=(y&&P?"(":"")+Q+(y&&P?")":""):H>=0?Q=0===H?(P?"-":"+")+Q:Q+(P?"-":"+"):P&&(Q="-"+Q),Q},stringToNumber:function(s){var y,v,w,o=u[l.currentLocale],d=s,g={thousand:3,million:6,billion:9,trillion:12};if(l.zeroFormat&&s===l.zeroFormat)v=0;else if(l.nullFormat&&s===l.nullFormat||!s.replace(/[^0-9]+/g,"").length)v=null;else{for(y in v=1,"."!==o.delimiters.decimal&&(s=s.replace(/\./g,"").replace(o.delimiters.decimal,".")),g)if(w=new RegExp("[^a-zA-Z]"+o.abbreviations[y]+"(?:\\)|(\\"+o.currency.symbol+")?(?:\\))?)?$"),d.match(w)){v*=Math.pow(10,g[y]);break}v*=(s.split("-").length+Math.min(s.split("(").length-1,s.split(")").length-1))%2?1:-1,s=s.replace(/[^0-9\.]+/g,""),v*=Number(s)}return v},isNaN:function(s){return"number"==typeof s&&isNaN(s)},includes:function(s,o){return-1!==s.indexOf(o)},insert:function(s,o,d){return s.slice(0,d)+o+s.slice(d)},reduce:function(s,o){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof o)throw new TypeError(o+" is not a function");var v,d=Object(s),g=d.length>>>0,y=0;if(3===arguments.length)v=arguments[2];else{for(;y<g&&!(y in d);)y++;if(y>=g)throw new TypeError("Reduce of empty array with no initial value");v=d[y++]}for(;y<g;y++)y in d&&(v=o(v,d[y],y,d));return v},multiplier:function(s){var o=s.toString().split(".");return o.length<2?1:Math.pow(10,o[1].length)},correctionFactor:function(){return Array.prototype.slice.call(arguments).reduce(function(o,d){var g=b.multiplier(d);return o>g?o:g},1)},toFixed:function(s,o,d,g){var _,w,x,E,y=s.toString().split("."),v=o-(g||0);return _=2===y.length?Math.min(Math.max(y[1].length,v),o):v,x=Math.pow(10,_),E=(d(s+"e+"+_)/x).toFixed(_),g>o-_&&(w=new RegExp("\\.?0{1,"+(g-(o-_))+"}$"),E=E.replace(w,"")),E}},m.options=l,m.formats=r,m.locales=u,m.locale=function(s){return s&&(l.currentLocale=s.toLowerCase()),l.currentLocale},m.localeData=function(s){if(!s)return u[l.currentLocale];if(s=s.toLowerCase(),!u[s])throw new Error("Unknown locale : "+s);return u[s]},m.reset=function(){for(var s in c)l[s]=c[s]},m.zeroFormat=function(s){l.zeroFormat="string"==typeof s?s:null},m.nullFormat=function(s){l.nullFormat="string"==typeof s?s:null},m.defaultFormat=function(s){l.defaultFormat="string"==typeof s?s:"0.0"},m.register=function(s,o,d){if(o=o.toLowerCase(),this[s+"s"][o])throw new TypeError(o+" "+s+" already registered.");return this[s+"s"][o]=d,d},m.validate=function(s,o){var d,g,y,v,_,w,x,E;if("string"!=typeof s&&(s+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",s)),(s=s.trim()).match(/^\d+$/))return!0;if(""===s)return!1;try{x=m.localeData(o)}catch(k){x=m.localeData(m.locale())}return y=x.currency.symbol,_=x.abbreviations,d=x.delimiters.decimal,g="."===x.delimiters.thousands?"\\.":x.delimiters.thousands,!(null!==(E=s.match(/^[^\d]+/))&&(s=s.substr(1),E[0]!==y)||null!==(E=s.match(/[^\d]+$/))&&(s=s.slice(0,-1),E[0]!==_.thousand&&E[0]!==_.million&&E[0]!==_.billion&&E[0]!==_.trillion)||(w=new RegExp(g+"{2}"),s.match(/[^\d.,]/g)||(v=s.split(d)).length>2||(v.length<2?!v[0].match(/^\d+.*\d$/)||v[0].match(w):1===v[0].length?!v[0].match(/^\d+$/)||v[0].match(w)||!v[1].match(/^\d+$/):!v[0].match(/^\d+.*\d$/)||v[0].match(w)||!v[1].match(/^\d+$/))))},m.fn=f.prototype={clone:function(){return m(this)},format:function(s,o){var y,v,_,d=this._value,g=s||l.defaultFormat;if(o=o||Math.round,0===d&&null!==l.zeroFormat)v=l.zeroFormat;else if(null===d&&null!==l.nullFormat)v=l.nullFormat;else{for(y in r)if(g.match(r[y].regexps.format)){_=r[y].format;break}v=(_=_||m._.numberToFormat)(d,g,o)}return v},value:function(){return this._value},input:function(){return this._input},set:function(s){return this._value=Number(s),this},add:function(s){var o=b.correctionFactor.call(null,this._value,s);return this._value=b.reduce([this._value,s],function(g,y,v,_){return g+Math.round(o*y)},0)/o,this},subtract:function(s){var o=b.correctionFactor.call(null,this._value,s);return this._value=b.reduce([s],function(g,y,v,_){return g-Math.round(o*y)},Math.round(this._value*o))/o,this},multiply:function(s){return this._value=b.reduce([this._value,s],function(d,g,y,v){var _=b.correctionFactor(d,g);return Math.round(d*_)*Math.round(g*_)/Math.round(_*_)},1),this},divide:function(s){return this._value=b.reduce([this._value,s],function(d,g,y,v){var _=b.correctionFactor(d,g);return Math.round(d*_)/Math.round(g*_)}),this},difference:function(s){return Math.abs(m(this._value).subtract(s).value())}},m.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(s){var o=s%10;return 1==~~(s%100/10)?"th":1===o?"st":2===o?"nd":3===o?"rd":"th"},currency:{symbol:"$"}}),m.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(s,o,d){var y,g=m._.includes(o," BPS")?" ":"";return s*=1e4,o=o.replace(/\s?BPS/,""),y=m._.numberToFormat(s,o,d),m._.includes(y,")")?((y=y.split("")).splice(-1,0,g+"BPS"),y=y.join("")):y=y+g+"BPS",y},unformat:function(s){return+(1e-4*m._.stringToNumber(s)).toFixed(15)}}),g="("+(g=(s={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}).suffixes.concat((o={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]}).suffixes.filter(function(y){return s.suffixes.indexOf(y)<0})).join("|")).replace("B","B(?!PS)")+")",m.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(g)},format:function(y,v,_){var k,C,L,x=m._.includes(v,"ib")?o:s,E=m._.includes(v," b")||m._.includes(v," ib")?" ":"";for(v=v.replace(/\s?i?b/,""),k=0;k<=x.suffixes.length;k++)if(C=Math.pow(x.base,k),L=Math.pow(x.base,k+1),null===y||0===y||y>=C&&y<L){E+=x.suffixes[k],C>0&&(y/=C);break}return m._.numberToFormat(y,v,_)+E},unformat:function(y){var _,w,v=m._.stringToNumber(y);if(v){for(_=s.suffixes.length-1;_>=0;_--){if(m._.includes(y,s.suffixes[_])){w=Math.pow(s.base,_);break}if(m._.includes(y,o.suffixes[_])){w=Math.pow(o.base,_);break}}v*=w||1}return v}}),m.register("format","currency",{regexps:{format:/(\$)/},format:function(s,o,d){var v,_,w,g=m.locales[m.options.currentLocale],y={before:o.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:o.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(o=o.replace(/\s?\$\s?/,""),v=m._.numberToFormat(s,o,d),s>=0?(y.before=y.before.replace(/[\-\(]/,""),y.after=y.after.replace(/[\-\)]/,"")):s<0&&!m._.includes(y.before,"-")&&!m._.includes(y.before,"(")&&(y.before="-"+y.before),w=0;w<y.before.length;w++)switch(_=y.before[w],_){case"$":v=m._.insert(v,g.currency.symbol,w);break;case" ":v=m._.insert(v," ",w+g.currency.symbol.length-1)}for(w=y.after.length-1;w>=0;w--)switch(_=y.after[w],_){case"$":v=w===y.after.length-1?v+g.currency.symbol:m._.insert(v,g.currency.symbol,-(y.after.length-(1+w)));break;case" ":v=w===y.after.length-1?v+" ":m._.insert(v," ",-(y.after.length-(1+w)+g.currency.symbol.length-1))}return v}}),m.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(s,o,d){var v=("number"!=typeof s||m._.isNaN(s)?"0e+0":s.toExponential()).split("e");return o=o.replace(/e[\+|\-]{1}0/,""),m._.numberToFormat(Number(v[0]),o,d)+"e"+v[1]},unformat:function(s){var o=m._.includes(s,"e+")?s.split("e+"):s.split("e-"),d=Number(o[0]),g=Number(o[1]);return g=m._.includes(s,"e-")?g*=-1:g,m._.reduce([d,Math.pow(10,g)],function(v,_,w,x){var E=m._.correctionFactor(v,_);return v*E*(_*E)/(E*E)},1)}}),m.register("format","ordinal",{regexps:{format:/(o)/},format:function(s,o,d){var g=m.locales[m.options.currentLocale],v=m._.includes(o," o")?" ":"";return o=o.replace(/\s?o/,""),v+=g.ordinal(s),m._.numberToFormat(s,o,d)+v}}),m.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(s,o,d){var y,g=m._.includes(o," %")?" ":"";return m.options.scalePercentBy100&&(s*=100),o=o.replace(/\s?\%/,""),y=m._.numberToFormat(s,o,d),m._.includes(y,")")?((y=y.split("")).splice(-1,0,g+"%"),y=y.join("")):y=y+g+"%",y},unformat:function(s){var o=m._.stringToNumber(s);return m.options.scalePercentBy100?.01*o:o}}),m.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(s,o,d){var g=Math.floor(s/60/60),y=Math.floor((s-60*g*60)/60),v=Math.round(s-60*g*60-60*y);return g+":"+(y<10?"0"+y:y)+":"+(v<10?"0"+v:v)},unformat:function(s){var o=s.split(":"),d=0;return 3===o.length?(d+=60*Number(o[0])*60,d+=60*Number(o[1]),d+=Number(o[2])):2===o.length&&(d+=60*Number(o[0]),d+=Number(o[1])),Number(d)}}),m})?X.call(h,G,h,es):X)&&(es.exports=i)},593:function(es,h){var G,i;void 0!==(i="function"==typeof(G=function m(){"use strict";var b="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==b?b:{},p=!b.document&&!!b.postMessage,r=p&&/blob:/i.test((b.location||{}).protocol),u={},c=0,l={parse:function(A,I){var D=(I=I||{}).dynamicTyping||!1;if(P(D)&&(I.dynamicTypingFunction=D,D={}),I.dynamicTyping=D,I.transform=!!P(I.transform)&&I.transform,I.worker&&l.WORKERS_SUPPORTED){var R=function(){if(!l.WORKERS_SUPPORTED)return!1;var H,Y,N=(H=b.URL||b.webkitURL||null,Y=m.toString(),l.BLOB_URL||(l.BLOB_URL=H.createObjectURL(new Blob(["(",Y,")();"],{type:"text/javascript"})))),B=new b.Worker(N);return B.onmessage=x,B.id=c++,u[B.id]=B}();return R.userStep=I.step,R.userChunk=I.chunk,R.userComplete=I.complete,R.userError=I.error,I.step=P(I.step),I.chunk=P(I.chunk),I.complete=P(I.complete),I.error=P(I.error),delete I.worker,void R.postMessage({input:A,config:I,workerId:R.id})}var S=null;return"string"==typeof A?S=I.download?new o(I):new g(I):!0===A.readable&&P(A.read)&&P(A.on)?S=new y(I):(b.File&&A instanceof File||A instanceof Object)&&(S=new d(I)),S.stream(A)},unparse:function(A,I){var D=!1,R=!0,S=",",N="\r\n",B='"',H=B+B,Y=!1,Q=null;!function(){if("object"==typeof I){if("string"!=typeof I.delimiter||l.BAD_DELIMITERS.filter(function(q){return-1!==I.delimiter.indexOf(q)}).length||(S=I.delimiter),("boolean"==typeof I.quotes||"function"==typeof I.quotes||Array.isArray(I.quotes))&&(D=I.quotes),"boolean"!=typeof I.skipEmptyLines&&"string"!=typeof I.skipEmptyLines||(Y=I.skipEmptyLines),"string"==typeof I.newline&&(N=I.newline),"string"==typeof I.quoteChar&&(B=I.quoteChar),"boolean"==typeof I.header&&(R=I.header),Array.isArray(I.columns)){if(0===I.columns.length)throw new Error("Option columns is empty");Q=I.columns}void 0!==I.escapeChar&&(H=I.escapeChar+B)}}();var ne=new RegExp(_(B),"g");if("string"==typeof A&&(A=JSON.parse(A)),Array.isArray(A)){if(!A.length||Array.isArray(A[0]))return te(null,A,Y);if("object"==typeof A[0])return te(Q||ae(A[0]),A,Y)}else if("object"==typeof A)return"string"==typeof A.data&&(A.data=JSON.parse(A.data)),Array.isArray(A.data)&&(A.fields||(A.fields=A.meta&&A.meta.fields),A.fields||(A.fields=Array.isArray(A.data[0])?A.fields:ae(A.data[0])),Array.isArray(A.data[0])||"object"==typeof A.data[0]||(A.data=[A.data])),te(A.fields||[],A.data||[],Y);throw new Error("Unable to serialize unrecognized input");function ae(q){if("object"!=typeof q)return[];var re=[];for(var V in q)re.push(V);return re}function te(q,re,V){var W="";"string"==typeof q&&(q=JSON.parse(q)),"string"==typeof re&&(re=JSON.parse(re));var Z=Array.isArray(q)&&0<q.length,oe=!Array.isArray(re[0]);if(Z&&R){for(var ie=0;ie<q.length;ie++)0<ie&&(W+=S),W+=K(q[ie],ie);0<re.length&&(W+=N)}for(var ue=0;ue<re.length;ue++){var fe=Z?q.length:re[ue].length,he=!1,de=Z?0===Object.keys(re[ue]).length:0===re[ue].length;if(V&&!Z&&(he="greedy"===V?""===re[ue].join("").trim():1===re[ue].length&&0===re[ue][0].length),"greedy"===V&&Z){for(var be=[],pe=0;pe<fe;pe++)be.push(re[ue][oe?q[pe]:pe]);he=""===be.join("").trim()}if(!he){for(var ye=0;ye<fe;ye++)0<ye&&!de&&(W+=S),W+=K(re[ue][Z&&oe?q[ye]:ye],ye);ue<re.length-1&&(!V||0<fe&&!de)&&(W+=N)}}return W}function K(q,re){if(null==q)return"";if(q.constructor===Date)return JSON.stringify(q).slice(1,25);var V=q.toString().replace(ne,H);return"boolean"==typeof D&&D||"function"==typeof D&&D(q,re)||Array.isArray(D)&&D[re]||function(Z,oe){for(var ie=0;ie<oe.length;ie++)if(-1<Z.indexOf(oe[ie]))return!0;return!1}(V,l.BAD_DELIMITERS)||-1<V.indexOf(S)||" "===V.charAt(0)||" "===V.charAt(V.length-1)?B+V+B:V}}};if(l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\ufeff",l.BAD_DELIMITERS=["\r","\n",'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!p&&!!b.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=w,l.ParserHandle=v,l.NetworkStreamer=o,l.FileStreamer=d,l.StringStreamer=g,l.ReadableStreamStreamer=y,b.jQuery){var f=b.jQuery;f.fn.parse=function(A){var I=A.config||{},D=[];return this.each(function(N){if("INPUT"!==f(this).prop("tagName").toUpperCase()||"file"!==f(this).attr("type").toLowerCase()||!b.FileReader||!this.files||0===this.files.length)return!0;for(var B=0;B<this.files.length;B++)D.push({file:this.files[B],inputElem:this,instanceConfig:f.extend({},I)})}),R(),this;function R(){if(0!==D.length){var B,H,Y,Q=D[0];if(P(A.before)){var ne=A.before(Q.file,Q.inputElem);if("object"==typeof ne){if("abort"===ne.action)return"AbortError",B=Q.file,H=Q.inputElem,Y=ne.reason,void(P(A.error)&&A.error({name:"AbortError"},B,H,Y));if("skip"===ne.action)return void S();"object"==typeof ne.config&&(Q.instanceConfig=f.extend(Q.instanceConfig,ne.config))}else if("skip"===ne)return void S()}var ae=Q.instanceConfig.complete;Q.instanceConfig.complete=function(te){P(ae)&&ae(te,Q.file,Q.inputElem),S()},l.parse(Q.file,Q.instanceConfig)}else P(A.complete)&&A.complete()}function S(){D.splice(0,1),R()}}}function s(A){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(I){var D=C(I);D.chunkSize=parseInt(D.chunkSize),I.step||I.chunk||(D.chunkSize=null),this._handle=new v(D),(this._handle.streamer=this)._config=D}.call(this,A),this.parseChunk=function(I,D){if(this.isFirstChunk&&P(this._config.beforeFirstChunk)){var R=this._config.beforeFirstChunk(I);void 0!==R&&(I=R)}this.isFirstChunk=!1,this._halted=!1;var S=this._partialLine+I;this._partialLine="";var N=this._handle.parse(S,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var B=N.meta.cursor;this._finished||(this._partialLine=S.substring(B-this._baseIndex),this._baseIndex=B),N&&N.data&&(this._rowCount+=N.data.length);var H=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)b.postMessage({results:N,workerId:l.WORKER_ID,finished:H});else if(P(this._config.chunk)&&!D){if(this._config.chunk(N,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);N=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(N.data),this._completeResults.errors=this._completeResults.errors.concat(N.errors),this._completeResults.meta=N.meta),this._completed||!H||!P(this._config.complete)||N&&N.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),H||N&&N.meta.paused||this._nextChunk(),N}this._halted=!0},this._sendError=function(I){P(this._config.error)?this._config.error(I):r&&this._config.error&&b.postMessage({workerId:l.WORKER_ID,error:I,finished:!1})}}function o(A){var I;(A=A||{}).chunkSize||(A.chunkSize=l.RemoteChunkSize),s.call(this,A),this._nextChunk=p?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(D){this._input=D,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(I=new XMLHttpRequest,this._config.withCredentials&&(I.withCredentials=this._config.withCredentials),p||(I.onload=L(this._chunkLoaded,this),I.onerror=L(this._chunkError,this)),I.open(this._config.downloadRequestBody?"POST":"GET",this._input,!p),this._config.downloadRequestHeaders){var D=this._config.downloadRequestHeaders;for(var R in D)I.setRequestHeader(R,D[R])}this._config.chunkSize&&I.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{I.send(this._config.downloadRequestBody)}catch(N){this._chunkError(N.message)}p&&0===I.status&&this._chunkError()}},this._chunkLoaded=function(){var R;4===I.readyState&&(I.status<200||400<=I.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:I.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(R=I.getResponseHeader("Content-Range"))?-1:parseInt(R.substring(R.lastIndexOf("/")+1))),this.parseChunk(I.responseText)))},this._chunkError=function(D){this._sendError(new Error(I.statusText||D))}}function d(A){var I,D;(A=A||{}).chunkSize||(A.chunkSize=l.LocalChunkSize),s.call(this,A);var R="undefined"!=typeof FileReader;this.stream=function(S){this._input=S,D=S.slice||S.webkitSlice||S.mozSlice,R?((I=new FileReader).onload=L(this._chunkLoaded,this),I.onerror=L(this._chunkError,this)):I=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var S=this._input;if(this._config.chunkSize){var N=Math.min(this._start+this._config.chunkSize,this._input.size);S=D.call(S,this._start,N)}var B=I.readAsText(S,this._config.encoding);R||this._chunkLoaded({target:{result:B}})},this._chunkLoaded=function(S){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(S.target.result)},this._chunkError=function(){this._sendError(I.error)}}function g(A){var I;s.call(this,A=A||{}),this.stream=function(D){return I=D,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var D,R=this._config.chunkSize;return R?(D=I.substring(0,R),I=I.substring(R)):(D=I,I=""),this._finished=!I,this.parseChunk(D)}}}function y(A){s.call(this,A=A||{});var I=[],D=!0,R=!1;this.pause=function(){s.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){s.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(S){this._input=S,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&1===I.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),I.length?this.parseChunk(I.shift()):D=!0},this._streamData=L(function(S){try{I.push("string"==typeof S?S:S.toString(this._config.encoding)),D&&(D=!1,this._checkIsFinished(),this.parseChunk(I.shift()))}catch(N){this._streamError(N)}},this),this._streamError=L(function(S){this._streamCleanUp(),this._sendError(S)},this),this._streamEnd=L(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=L(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(A){var I,D,R,S=Math.pow(2,53),N=-S,B=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,H=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,Y=this,Q=0,ne=0,ae=!1,te=!1,K=[],q={data:[],errors:[],meta:{}};if(P(A.step)){var re=A.step;A.step=function(ue){if(q=ue,Z())W();else{if(W(),0===q.data.length)return;Q+=ue.data.length,A.preview&&Q>A.preview?D.abort():(q.data=q.data[0],re(q,Y))}}}function V(ue){return"greedy"===A.skipEmptyLines?""===ue.join("").trim():1===ue.length&&0===ue[0].length}function W(){if(q&&R&&(ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),R=!1),A.skipEmptyLines)for(var ue=0;ue<q.data.length;ue++)V(q.data[ue])&&q.data.splice(ue--,1);return Z()&&function(){if(q)if(Array.isArray(q.data[0])){for(var he=0;Z()&&he<q.data.length;he++)q.data[he].forEach(fe);q.data.splice(0,1)}else q.data.forEach(fe);function fe(de){P(A.transformHeader)&&(de=A.transformHeader(de)),K.push(de)}}(),function(){if(!q||!A.header&&!A.dynamicTyping&&!A.transform)return q;function fe(de,be){var pe,Te=A.header?{}:[];for(pe=0;pe<de.length;pe++){var ye=pe,ke=de[pe];A.header&&(ye=pe>=K.length?"__parsed_extra":K[pe]),A.transform&&(ke=A.transform(ke,ye)),ke=oe(ye,ke),"__parsed_extra"===ye?(Te[ye]=Te[ye]||[],Te[ye].push(ke)):Te[ye]=ke}return A.header&&(pe>K.length?ie("FieldMismatch","TooManyFields","Too many fields: expected "+K.length+" fields but parsed "+pe,ne+be):pe<K.length&&ie("FieldMismatch","TooFewFields","Too few fields: expected "+K.length+" fields but parsed "+pe,ne+be)),Te}var he=1;return!q.data.length||Array.isArray(q.data[0])?(q.data=q.data.map(fe),he=q.data.length):q.data=fe(q.data,0),A.header&&q.meta&&(q.meta.fields=K),ne+=he,q}()}function Z(){return A.header&&0===K.length}function oe(ue,fe){return he=ue,A.dynamicTypingFunction&&void 0===A.dynamicTyping[he]&&(A.dynamicTyping[he]=A.dynamicTypingFunction(he)),!0===(A.dynamicTyping[he]||A.dynamicTyping)?"true"===fe||"TRUE"===fe||"false"!==fe&&"FALSE"!==fe&&(function(de){if(B.test(de)){var be=parseFloat(de);if(N<be&&be<S)return!0}return!1}(fe)?parseFloat(fe):H.test(fe)?new Date(fe):""===fe?null:fe):fe;var he}function ie(ue,fe,he,de){var be={type:ue,code:fe,message:he};void 0!==de&&(be.row=de),q.errors.push(be)}this.parse=function(ue,fe,he){if(A.newline||(A.newline=function(Te,ye){Te=Te.substring(0,1048576);var ke=new RegExp(_(ye)+"([^]*?)"+_(ye),"gm"),ze=(Te=Te.replace(ke,"")).split("\r"),je=Te.split("\n");if(1===ze.length||1<je.length&&je[0].length<ze[0].length)return"\n";for(var Ce=0,_e=0;_e<ze.length;_e++)"\n"===ze[_e][0]&&Ce++;return Ce>=ze.length/2?"\r\n":"\r"}(ue,A.quoteChar||'"')),R=!1,A.delimiter)P(A.delimiter)&&(A.delimiter=A.delimiter(ue),q.meta.delimiter=A.delimiter);else{var be=function(Te,ye,ke,ze,je){var Ie,Ce,_e,we;je=je||[",","\t","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var Se=0;Se<je.length;Se++){var Oe=je[Se],Be=0,He=0,Xe=0;_e=void 0;for(var nt=new w({comments:ze,delimiter:Oe,newline:ye,preview:10}).parse(Te),et=0;et<nt.data.length;et++)if(ke&&V(nt.data[et]))Xe++;else{var qe=nt.data[et].length;He+=qe,void 0!==_e?0<qe&&(Be+=Math.abs(qe-_e),_e=qe):_e=qe}0<nt.data.length&&(He/=nt.data.length-Xe),(void 0===Ce||Be<=Ce)&&(void 0===we||we<He)&&1.99<He&&(Ce=Be,Ie=Oe,we=He)}return{successful:!!(A.delimiter=Ie),bestDelimiter:Ie}}(ue,A.newline,A.skipEmptyLines,A.comments,A.delimitersToGuess);be.successful?A.delimiter=be.bestDelimiter:(R=!0,A.delimiter=l.DefaultDelimiter),q.meta.delimiter=A.delimiter}var pe=C(A);return A.preview&&A.header&&pe.preview++,I=ue,D=new w(pe),q=D.parse(I,fe,he),W(),ae?{meta:{paused:!0}}:q||{meta:{paused:!1}}},this.paused=function(){return ae},this.pause=function(){ae=!0,D.abort(),I=P(A.chunk)?"":I.substring(D.getCharIndex())},this.resume=function(){Y.streamer._halted?(ae=!1,Y.streamer.parseChunk(I,!0)):setTimeout(Y.resume,3)},this.aborted=function(){return te},this.abort=function(){te=!0,D.abort(),q.meta.aborted=!0,P(A.complete)&&A.complete(q),I=""}}function _(A){return A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function w(A){var I,D=(A=A||{}).delimiter,R=A.newline,S=A.comments,N=A.step,B=A.preview,H=A.fastMode,Y=I=void 0===A.quoteChar?'"':A.quoteChar;if(void 0!==A.escapeChar&&(Y=A.escapeChar),("string"!=typeof D||-1<l.BAD_DELIMITERS.indexOf(D))&&(D=","),S===D)throw new Error("Comment character same as delimiter");!0===S?S="#":("string"!=typeof S||-1<l.BAD_DELIMITERS.indexOf(S))&&(S=!1),"\n"!==R&&"\r"!==R&&"\r\n"!==R&&(R="\n");var Q=0,ne=!1;this.parse=function(ae,te,K){if("string"!=typeof ae)throw new Error("Input must be a string");var q=ae.length,re=D.length,V=R.length,W=S.length,Z=P(N),oe=[],ie=[],ue=[],fe=Q=0;if(!ae)return Se();if(H||!1!==H&&-1===ae.indexOf(I)){for(var he=ae.split(R),de=0;de<he.length;de++){if(Q+=(ue=he[de]).length,de!==he.length-1)Q+=R.length;else if(K)return Se();if(!S||ue.substring(0,W)!==S){if(Z){if(oe=[],Ie(ue.split(D)),Oe(),ne)return Se()}else Ie(ue.split(D));if(B&&B<=de)return oe=oe.slice(0,B),Se(!0)}}return Se()}for(var be=ae.indexOf(D,Q),pe=ae.indexOf(R,Q),Te=new RegExp(_(Y)+_(I),"g"),ye=ae.indexOf(I,Q);;)if(ae[Q]!==I)if(S&&0===ue.length&&ae.substring(Q,Q+W)===S){if(-1===pe)return Se();pe=ae.indexOf(R,Q=pe+V),be=ae.indexOf(D,Q)}else{if(-1!==be&&(be<pe||-1===pe)){if(!(be<ye)){ue.push(ae.substring(Q,be)),be=ae.indexOf(D,Q=be+re);continue}var ke=Be(be,ye,pe);if(ke&&void 0!==ke.nextDelim){ye=ke.quoteSearch,ue.push(ae.substring(Q,be=ke.nextDelim)),be=ae.indexOf(D,Q=be+re);continue}}if(-1===pe)break;if(ue.push(ae.substring(Q,pe)),we(pe+V),Z&&(Oe(),ne))return Se();if(B&&oe.length>=B)return Se(!0)}else for(ye=Q,Q++;;){if(-1===(ye=ae.indexOf(I,ye+1)))return K||ie.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:oe.length,index:Q}),_e();if(ye===q-1)return _e(ae.substring(Q,ye).replace(Te,I));if(I!==Y||ae[ye+1]!==Y){if(I===Y||0===ye||ae[ye-1]!==Y){-1!==be&&be<ye+1&&(be=ae.indexOf(D,ye+1)),-1!==pe&&pe<ye+1&&(pe=ae.indexOf(R,ye+1));var ze=Ce(-1===pe?be:Math.min(be,pe));if(ae[ye+1+ze]===D){ue.push(ae.substring(Q,ye).replace(Te,I)),ae[Q=ye+1+ze+re]!==I&&(ye=ae.indexOf(I,Q)),be=ae.indexOf(D,Q),pe=ae.indexOf(R,Q);break}var je=Ce(pe);if(ae.substring(ye+1+je,ye+1+je+V)===R){if(ue.push(ae.substring(Q,ye).replace(Te,I)),we(ye+1+je+V),be=ae.indexOf(D,Q),ye=ae.indexOf(I,Q),Z&&(Oe(),ne))return Se();if(B&&oe.length>=B)return Se(!0);break}ie.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:oe.length,index:Q}),ye++}}else ye++}return _e();function Ie(He){oe.push(He),fe=Q}function Ce(He){var Xe=0;if(-1!==He){var nt=ae.substring(ye+1,He);nt&&""===nt.trim()&&(Xe=nt.length)}return Xe}function _e(He){return K||(void 0===He&&(He=ae.substring(Q)),ue.push(He),Q=q,Ie(ue),Z&&Oe()),Se()}function we(He){Q=He,Ie(ue),ue=[],pe=ae.indexOf(R,Q)}function Se(He){return{data:oe,errors:ie,meta:{delimiter:D,linebreak:R,aborted:ne,truncated:!!He,cursor:fe+(te||0)}}}function Oe(){N(Se()),oe=[],ie=[]}function Be(He,Xe,nt){var et={nextDelim:void 0,quoteSearch:void 0},qe=ae.indexOf(I,Xe+1);if(Xe<He&&He<qe&&(qe<nt||-1===nt)){var Ye=ae.indexOf(D,qe);if(-1===Ye)return et;qe<Ye&&(qe=ae.indexOf(I,qe+1)),et=Be(Ye,qe,nt)}else et={nextDelim:He,quoteSearch:Xe};return et}},this.abort=function(){ne=!0},this.getCharIndex=function(){return Q}}function x(A){var I=A.data,D=u[I.workerId],R=!1;if(I.error)D.userError(I.error,I.file);else if(I.results&&I.results.data){var S={abort:function(){R=!0,E(I.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:k,resume:k};if(P(D.userStep)){for(var N=0;N<I.results.data.length&&(D.userStep({data:I.results.data[N],errors:I.results.errors,meta:I.results.meta},S),!R);N++);delete I.results}else P(D.userChunk)&&(D.userChunk(I.results,S,I.file),delete I.results)}I.finished&&!R&&E(I.workerId,I.results)}function E(A,I){var D=u[A];P(D.userComplete)&&D.userComplete(I),D.terminate(),delete u[A]}function k(){throw new Error("Not implemented.")}function C(A){if("object"!=typeof A||null===A)return A;var I=Array.isArray(A)?[]:{};for(var D in A)I[D]=C(A[D]);return I}function L(A,I){return function(){A.apply(I,arguments)}}function P(A){return"function"==typeof A}return r&&(b.onmessage=function(A){var I=A.data;if(void 0===l.WORKER_ID&&I&&(l.WORKER_ID=I.workerId),"string"==typeof I.input)b.postMessage({workerId:l.WORKER_ID,results:l.parse(I.input,I.config),finished:!0});else if(b.File&&I.input instanceof File||I.input instanceof Object){var D=l.parse(I.input,I.config);D&&b.postMessage({workerId:l.WORKER_ID,results:D,finished:!0})}}),(o.prototype=Object.create(s.prototype)).constructor=o,(d.prototype=Object.create(s.prototype)).constructor=d,(g.prototype=Object.create(g.prototype)).constructor=g,(y.prototype=Object.create(s.prototype)).constructor=y,l})?G.apply(h,[]):G)&&(es.exports=i)},918:es=>{es.exports=function h(G,X,i){function m(r,u){if(!X[r]){if(!G[r]){if(b)return b(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var f=X[r]={exports:{}};G[r][0].call(f.exports,function(s){return m(G[r][1][s]||s)},f,f.exports,h,G,X,i)}return X[r].exports}for(var b=void 0,p=0;p<i.length;p++)m(i[p]);return m}({1:[function(h,G,X){"use strict";var i=h("../src/lib"),m={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var b in m){var p=b.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");i.addStyleRule(p,m[b])}},{"../src/lib":803}],2:[function(h,G,X){"use strict";G.exports=h("../src/transforms/aggregate")},{"../src/transforms/aggregate":1399}],3:[function(h,G,X){"use strict";G.exports=h("../src/traces/bar")},{"../src/traces/bar":949}],4:[function(h,G,X){"use strict";G.exports=h("../src/traces/barpolar")},{"../src/traces/barpolar":962}],5:[function(h,G,X){"use strict";G.exports=h("../src/traces/box")},{"../src/traces/box":972}],6:[function(h,G,X){"use strict";G.exports=h("../src/components/calendars")},{"../src/components/calendars":664}],7:[function(h,G,X){"use strict";G.exports=h("../src/traces/candlestick")},{"../src/traces/candlestick":981}],8:[function(h,G,X){"use strict";G.exports=h("../src/traces/carpet")},{"../src/traces/carpet":1e3}],9:[function(h,G,X){"use strict";G.exports=h("../src/traces/choropleth")},{"../src/traces/choropleth":1014}],10:[function(h,G,X){"use strict";G.exports=h("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":1021}],11:[function(h,G,X){"use strict";G.exports=h("../src/traces/cone")},{"../src/traces/cone":1027}],12:[function(h,G,X){"use strict";G.exports=h("../src/traces/contour")},{"../src/traces/contour":1042}],13:[function(h,G,X){"use strict";G.exports=h("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":1053}],14:[function(h,G,X){"use strict";G.exports=h("../src/core")},{"../src/core":781}],15:[function(h,G,X){"use strict";G.exports=h("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":1061}],16:[function(h,G,X){"use strict";G.exports=h("../src/transforms/filter")},{"../src/transforms/filter":1400}],17:[function(h,G,X){"use strict";G.exports=h("../src/traces/funnel")},{"../src/traces/funnel":1071}],18:[function(h,G,X){"use strict";G.exports=h("../src/traces/funnelarea")},{"../src/traces/funnelarea":1080}],19:[function(h,G,X){"use strict";G.exports=h("../src/transforms/groupby")},{"../src/transforms/groupby":1401}],20:[function(h,G,X){"use strict";G.exports=h("../src/traces/heatmap")},{"../src/traces/heatmap":1093}],21:[function(h,G,X){"use strict";G.exports=h("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":1103}],22:[function(h,G,X){"use strict";G.exports=h("../src/traces/histogram")},{"../src/traces/histogram":1115}],23:[function(h,G,X){"use strict";G.exports=h("../src/traces/histogram2d")},{"../src/traces/histogram2d":1121}],24:[function(h,G,X){"use strict";G.exports=h("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":1125}],25:[function(h,G,X){"use strict";G.exports=h("../src/traces/icicle")},{"../src/traces/icicle":1131}],26:[function(h,G,X){"use strict";G.exports=h("../src/traces/image")},{"../src/traces/image":1144}],27:[function(h,G,X){"use strict";var i=h("./core");i.register([h("./bar"),h("./box"),h("./heatmap"),h("./histogram"),h("./histogram2d"),h("./histogram2dcontour"),h("./contour"),h("./scatterternary"),h("./violin"),h("./funnel"),h("./waterfall"),h("./image"),h("./pie"),h("./sunburst"),h("./treemap"),h("./icicle"),h("./funnelarea"),h("./scatter3d"),h("./surface"),h("./isosurface"),h("./volume"),h("./mesh3d"),h("./cone"),h("./streamtube"),h("./scattergeo"),h("./choropleth"),h("./scattergl"),h("./splom"),h("./pointcloud"),h("./heatmapgl"),h("./parcoords"),h("./parcats"),h("./scattermapbox"),h("./choroplethmapbox"),h("./densitymapbox"),h("./sankey"),h("./indicator"),h("./table"),h("./carpet"),h("./scattercarpet"),h("./contourcarpet"),h("./ohlc"),h("./candlestick"),h("./scatterpolar"),h("./scatterpolargl"),h("./barpolar"),h("./aggregate"),h("./filter"),h("./groupby"),h("./sort"),h("./calendars")]),G.exports=i},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scatterternary":44,"./sort":45,"./splom":46,"./streamtube":47,"./sunburst":48,"./surface":49,"./table":50,"./treemap":51,"./violin":52,"./volume":53,"./waterfall":54}],28:[function(h,G,X){"use strict";G.exports=h("../src/traces/indicator")},{"../src/traces/indicator":1152}],29:[function(h,G,X){"use strict";G.exports=h("../src/traces/isosurface")},{"../src/traces/isosurface":1158}],30:[function(h,G,X){"use strict";G.exports=h("../src/traces/mesh3d")},{"../src/traces/mesh3d":1163}],31:[function(h,G,X){"use strict";G.exports=h("../src/traces/ohlc")},{"../src/traces/ohlc":1168}],32:[function(h,G,X){"use strict";G.exports=h("../src/traces/parcats")},{"../src/traces/parcats":1177}],33:[function(h,G,X){"use strict";G.exports=h("../src/traces/parcoords")},{"../src/traces/parcoords":1187}],34:[function(h,G,X){"use strict";G.exports=h("../src/traces/pie")},{"../src/traces/pie":1198}],35:[function(h,G,X){"use strict";G.exports=h("../src/traces/pointcloud")},{"../src/traces/pointcloud":1207}],36:[function(h,G,X){"use strict";G.exports=h("../src/traces/sankey")},{"../src/traces/sankey":1213}],37:[function(h,G,X){"use strict";G.exports=h("../src/traces/scatter3d")},{"../src/traces/scatter3d":1251}],38:[function(h,G,X){"use strict";G.exports=h("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1258}],39:[function(h,G,X){"use strict";G.exports=h("../src/traces/scattergeo")},{"../src/traces/scattergeo":1266}],40:[function(h,G,X){"use strict";G.exports=h("../src/traces/scattergl")},{"../src/traces/scattergl":1279}],41:[function(h,G,X){"use strict";G.exports=h("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1289}],42:[function(h,G,X){"use strict";G.exports=h("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1297}],43:[function(h,G,X){"use strict";G.exports=h("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1304}],44:[function(h,G,X){"use strict";G.exports=h("../src/traces/scatterternary")},{"../src/traces/scatterternary":1312}],45:[function(h,G,X){"use strict";G.exports=h("../src/transforms/sort")},{"../src/transforms/sort":1403}],46:[function(h,G,X){"use strict";G.exports=h("../src/traces/splom")},{"../src/traces/splom":1321}],47:[function(h,G,X){"use strict";G.exports=h("../src/traces/streamtube")},{"../src/traces/streamtube":1329}],48:[function(h,G,X){"use strict";G.exports=h("../src/traces/sunburst")},{"../src/traces/sunburst":1337}],49:[function(h,G,X){"use strict";G.exports=h("../src/traces/surface")},{"../src/traces/surface":1346}],50:[function(h,G,X){"use strict";G.exports=h("../src/traces/table")},{"../src/traces/table":1354}],51:[function(h,G,X){"use strict";G.exports=h("../src/traces/treemap")},{"../src/traces/treemap":1365}],52:[function(h,G,X){"use strict";G.exports=h("../src/traces/violin")},{"../src/traces/violin":1378}],53:[function(h,G,X){"use strict";G.exports=h("../src/traces/volume")},{"../src/traces/volume":1386}],54:[function(h,G,X){"use strict";G.exports=h("../src/traces/waterfall")},{"../src/traces/waterfall":1394}],55:[function(h,G,X){"use strict";G.exports=function(u){var c=(u=u||{}).eye||[0,0,1],l=u.center||[0,0,0],f=u.up||[0,1,0],s=u.distanceLimits||[0,1/0],o=u.mode||"turntable",d=i(),g=m(),y=b();return d.setDistanceLimits(s[0],s[1]),d.lookAt(0,c,l,f),g.setDistanceLimits(s[0],s[1]),g.lookAt(0,c,l,f),y.setDistanceLimits(s[0],s[1]),y.lookAt(0,c,l,f),new p({turntable:d,orbit:g,matrix:y},o)};var i=h("turntable-camera-controller"),m=h("orbit-camera-controller"),b=h("matrix-camera-controller");function p(u,c){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(l){return u[l]}),this._mode=c,this._active=u[c],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var r=p.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(u){for(var c=u[0],l=[],f=0;f<u[1];++f)l.push("a"+f);var s="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+u[0]+"("+l.join()+")}";r[c]=Function.apply(null,l.concat(s))}),r.recalcMatrix=function(u){this._active.recalcMatrix(u)},r.getDistance=function(u){return this._active.getDistance(u)},r.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},r.lastT=function(){return this._active.lastT()},r.setMode=function(u){if(u!==this._mode){var c=this._controllerNames.indexOf(u);if(!(c<0)){var l=this._active,f=this._controllerList[c],s=Math.max(l.lastT(),f.lastT());l.recalcMatrix(s),f.setMatrix(s,l.computedMatrix),this._active=f,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},r.getMode=function(){return this._mode}},{"matrix-camera-controller":468,"orbit-camera-controller":489,"turntable-camera-controller":603}],56:[function(h,G,X){var i,m;i=this,m=function(i,m,b,p,r){"use strict";function u(he){return he.target.depth}function c(he,de){return he.sourceLinks.length?he.depth:de-1}function l(he){return function(){return he}}r=r&&r.hasOwnProperty("default")?r.default:r;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(he){return typeof he}:function(he){return he&&"function"==typeof Symbol&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he};function s(he,de){return d(he.source,de.source)||he.index-de.index}function o(he,de){return d(he.target,de.target)||he.index-de.index}function d(he,de){return he.partOfCycle===de.partOfCycle?he.y0-de.y0:"top"===he.circularLinkType||"bottom"===de.circularLinkType?-1:1}function g(he){return he.value}function y(he){return(he.y0+he.y1)/2}function v(he){return y(he.source)}function _(he){return y(he.target)}function w(he){return he.index}function x(he){return he.nodes}function E(he){return he.links}function k(he,de){var be=he.get(de);if(!be)throw new Error("missing: "+de);return be}function C(he,de){return de(he)}function L(he,de,be){var pe=0;if(null===be){for(var Te=[],ye=0;ye<he.links.length;ye++){var ke=he.links[ye],ze=ke.source.index,je=ke.target.index;Te[ze]||(Te[ze]=[]),Te[je]||(Te[je]=[]),-1===Te[ze].indexOf(je)&&Te[ze].push(je)}var Ie=r(Te);Ie.sort(function(we,Se){return we.length-Se.length});var Ce={};for(ye=0;ye<Ie.length;ye++){var _e=Ie[ye].slice(-2);Ce[_e[0]]||(Ce[_e[0]]={}),Ce[_e[0]][_e[1]]=!0}he.links.forEach(function(we){var Se=we.target.index,Oe=we.source.index;Se===Oe||Ce[Oe]&&Ce[Oe][Se]?(we.circular=!0,we.circularLinkID=pe,pe+=1):we.circular=!1})}else he.links.forEach(function(we){we.source[be]<we.target[be]?we.circular=!1:(we.circular=!0,we.circularLinkID=pe,pe+=1)})}function P(he,de){var be=0,pe=0;he.links.forEach(function(Te){Te.circular&&(Te.circularLinkType=Te.source.circularLinkType||Te.target.circularLinkType?Te.source.circularLinkType?Te.source.circularLinkType:Te.target.circularLinkType:be<pe?"top":"bottom","top"==Te.circularLinkType?be+=1:pe+=1,he.nodes.forEach(function(ye){C(ye,de)!=C(Te.source,de)&&C(ye,de)!=C(Te.target,de)||(ye.circularLinkType=Te.circularLinkType)}))}),he.links.forEach(function(Te){Te.circular&&(Te.source.circularLinkType==Te.target.circularLinkType&&(Te.circularLinkType=Te.source.circularLinkType),ue(Te,de)&&(Te.circularLinkType=Te.source.circularLinkType))})}function A(he){var de=Math.abs(he.y1-he.y0),be=Math.abs(he.target.x0-he.source.x1);return Math.atan(be/de)}function I(he,de){var be=0;he.sourceLinks.forEach(function(Te){be=Te.circular&&!ue(Te,de)?be+1:be});var pe=0;return he.targetLinks.forEach(function(Te){pe=Te.circular&&!ue(Te,de)?pe+1:pe}),be+pe}function D(he){var be=0;he.source.sourceLinks.forEach(function(ye){be=ye.circular?be+1:be});var Te=0;return he.target.targetLinks.forEach(function(ye){Te=ye.circular?Te+1:Te}),!(be>1||Te>1)}function R(he,de,be){return he.sort(N),he.forEach(function(pe,Te){var ye,ke,ze=0;if(ue(pe,be)&&D(pe))pe.circularPathData.verticalBuffer=ze+pe.width/2;else{for(var je=0;je<Te;je++)if(!((ye=he[Te]).source.column<(ke=he[je]).target.column||ye.target.column>ke.source.column)){var Ie=he[je].circularPathData.verticalBuffer+he[je].width/2+de;ze=Ie>ze?Ie:ze}pe.circularPathData.verticalBuffer=ze+pe.width/2}}),he}function S(he,de,be,pe){var Te=m.min(he.links,function(ye){return ye.source.y0});he.links.forEach(function(ye){ye.circular&&(ye.circularPathData={})}),R(he.links.filter(function(ye){return"top"==ye.circularLinkType}),de,pe),R(he.links.filter(function(ye){return"bottom"==ye.circularLinkType}),de,pe),he.links.forEach(function(ye){if(ye.circular){if(ye.circularPathData.arcRadius=ye.width+10,ye.circularPathData.leftNodeBuffer=5,ye.circularPathData.rightNodeBuffer=5,ye.circularPathData.sourceWidth=ye.source.x1-ye.source.x0,ye.circularPathData.sourceX=ye.source.x0+ye.circularPathData.sourceWidth,ye.circularPathData.targetX=ye.target.x0,ye.circularPathData.sourceY=ye.y0,ye.circularPathData.targetY=ye.y1,ue(ye,pe)&&D(ye))ye.circularPathData.leftSmallArcRadius=10+ye.width/2,ye.circularPathData.leftLargeArcRadius=10+ye.width/2,ye.circularPathData.rightSmallArcRadius=10+ye.width/2,ye.circularPathData.rightLargeArcRadius=10+ye.width/2,"bottom"==ye.circularLinkType?(ye.circularPathData.verticalFullExtent=ye.source.y1+25+ye.circularPathData.verticalBuffer,ye.circularPathData.verticalLeftInnerExtent=ye.circularPathData.verticalFullExtent-ye.circularPathData.leftLargeArcRadius,ye.circularPathData.verticalRightInnerExtent=ye.circularPathData.verticalFullExtent-ye.circularPathData.rightLargeArcRadius):(ye.circularPathData.verticalFullExtent=ye.source.y0-25-ye.circularPathData.verticalBuffer,ye.circularPathData.verticalLeftInnerExtent=ye.circularPathData.verticalFullExtent+ye.circularPathData.leftLargeArcRadius,ye.circularPathData.verticalRightInnerExtent=ye.circularPathData.verticalFullExtent+ye.circularPathData.rightLargeArcRadius);else{var ke=ye.source.column,ze=ye.circularLinkType,je=he.links.filter(function(_e){return _e.source.column==ke&&_e.circularLinkType==ze});je.sort("bottom"==ye.circularLinkType?H:B);var Ie=0;je.forEach(function(_e,we){_e.circularLinkID==ye.circularLinkID&&(ye.circularPathData.leftSmallArcRadius=10+ye.width/2+Ie,ye.circularPathData.leftLargeArcRadius=10+ye.width/2+we*de+Ie),Ie+=_e.width}),ke=ye.target.column,(je=he.links.filter(function(_e){return _e.target.column==ke&&_e.circularLinkType==ze})).sort("bottom"==ye.circularLinkType?Q:Y),Ie=0,je.forEach(function(_e,we){_e.circularLinkID==ye.circularLinkID&&(ye.circularPathData.rightSmallArcRadius=10+ye.width/2+Ie,ye.circularPathData.rightLargeArcRadius=10+ye.width/2+we*de+Ie),Ie+=_e.width}),"bottom"==ye.circularLinkType?(ye.circularPathData.verticalFullExtent=Math.max(be,ye.source.y1,ye.target.y1)+25+ye.circularPathData.verticalBuffer,ye.circularPathData.verticalLeftInnerExtent=ye.circularPathData.verticalFullExtent-ye.circularPathData.leftLargeArcRadius,ye.circularPathData.verticalRightInnerExtent=ye.circularPathData.verticalFullExtent-ye.circularPathData.rightLargeArcRadius):(ye.circularPathData.verticalFullExtent=Te-25-ye.circularPathData.verticalBuffer,ye.circularPathData.verticalLeftInnerExtent=ye.circularPathData.verticalFullExtent+ye.circularPathData.leftLargeArcRadius,ye.circularPathData.verticalRightInnerExtent=ye.circularPathData.verticalFullExtent+ye.circularPathData.rightLargeArcRadius)}ye.circularPathData.leftInnerExtent=ye.circularPathData.sourceX+ye.circularPathData.leftNodeBuffer,ye.circularPathData.rightInnerExtent=ye.circularPathData.targetX-ye.circularPathData.rightNodeBuffer,ye.circularPathData.leftFullExtent=ye.circularPathData.sourceX+ye.circularPathData.leftLargeArcRadius+ye.circularPathData.leftNodeBuffer,ye.circularPathData.rightFullExtent=ye.circularPathData.targetX-ye.circularPathData.rightLargeArcRadius-ye.circularPathData.rightNodeBuffer}if(ye.circular)ye.path="top"==(_e=ye).circularLinkType?"M"+_e.circularPathData.sourceX+" "+_e.circularPathData.sourceY+" L"+_e.circularPathData.leftInnerExtent+" "+_e.circularPathData.sourceY+" A"+_e.circularPathData.leftLargeArcRadius+" "+_e.circularPathData.leftSmallArcRadius+" 0 0 0 "+_e.circularPathData.leftFullExtent+" "+(_e.circularPathData.sourceY-_e.circularPathData.leftSmallArcRadius)+" L"+_e.circularPathData.leftFullExtent+" "+_e.circularPathData.verticalLeftInnerExtent+" A"+_e.circularPathData.leftLargeArcRadius+" "+_e.circularPathData.leftLargeArcRadius+" 0 0 0 "+_e.circularPathData.leftInnerExtent+" "+_e.circularPathData.verticalFullExtent+" L"+_e.circularPathData.rightInnerExtent+" "+_e.circularPathData.verticalFullExtent+" A"+_e.circularPathData.rightLargeArcRadius+" "+_e.circularPathData.rightLargeArcRadius+" 0 0 0 "+_e.circularPathData.rightFullExtent+" "+_e.circularPathData.verticalRightInnerExtent+" L"+_e.circularPathData.rightFullExtent+" "+(_e.circularPathData.targetY-_e.circularPathData.rightSmallArcRadius)+" A"+_e.circularPathData.rightLargeArcRadius+" "+_e.circularPathData.rightSmallArcRadius+" 0 0 0 "+_e.circularPathData.rightInnerExtent+" "+_e.circularPathData.targetY+" L"+_e.circularPathData.targetX+" "+_e.circularPathData.targetY:"M"+_e.circularPathData.sourceX+" "+_e.circularPathData.sourceY+" L"+_e.circularPathData.leftInnerExtent+" "+_e.circularPathData.sourceY+" A"+_e.circularPathData.leftLargeArcRadius+" "+_e.circularPathData.leftSmallArcRadius+" 0 0 1 "+_e.circularPathData.leftFullExtent+" "+(_e.circularPathData.sourceY+_e.circularPathData.leftSmallArcRadius)+" L"+_e.circularPathData.leftFullExtent+" "+_e.circularPathData.verticalLeftInnerExtent+" A"+_e.circularPathData.leftLargeArcRadius+" "+_e.circularPathData.leftLargeArcRadius+" 0 0 1 "+_e.circularPathData.leftInnerExtent+" "+_e.circularPathData.verticalFullExtent+" L"+_e.circularPathData.rightInnerExtent+" "+_e.circularPathData.verticalFullExtent+" A"+_e.circularPathData.rightLargeArcRadius+" "+_e.circularPathData.rightLargeArcRadius+" 0 0 1 "+_e.circularPathData.rightFullExtent+" "+_e.circularPathData.verticalRightInnerExtent+" L"+_e.circularPathData.rightFullExtent+" "+(_e.circularPathData.targetY+_e.circularPathData.rightSmallArcRadius)+" A"+_e.circularPathData.rightLargeArcRadius+" "+_e.circularPathData.rightSmallArcRadius+" 0 0 1 "+_e.circularPathData.rightInnerExtent+" "+_e.circularPathData.targetY+" L"+_e.circularPathData.targetX+" "+_e.circularPathData.targetY;else{var Ce=p.linkHorizontal().source(function(_e){return[_e.source.x0+(_e.source.x1-_e.source.x0),_e.y0]}).target(function(_e){return[_e.target.x0,_e.y1]});ye.path=Ce(ye)}var _e})}function N(he,de){return ne(he)==ne(de)?"bottom"==he.circularLinkType?H(he,de):B(he,de):ne(de)-ne(he)}function B(he,de){return he.y0-de.y0}function H(he,de){return de.y0-he.y0}function Y(he,de){return he.y1-de.y1}function Q(he,de){return de.y1-he.y1}function ne(he){return he.target.column-he.source.column}function ae(he){return he.target.x0-he.source.x1}function te(he,de){var be=A(he),pe=ae(de)/Math.tan(be);return"up"==ie(he)?he.y1+pe:he.y1-pe}function K(he,de){var be=A(he),pe=ae(de)/Math.tan(be);return"up"==ie(he)?he.y1-pe:he.y1+pe}function q(he,de,be,pe){he.links.forEach(function(Te){if(!Te.circular&&Te.target.column-Te.source.column>1){var ye=Te.source.column+1,ke=Te.target.column-1,ze=1,je=ke-ye+1;for(ze=1;ye<=ke;ye++,ze++)he.nodes.forEach(function(Ie){if(Ie.column==ye){var Ce,_e=ze/(je+1),we=Math.pow(1-_e,3),Se=3*_e*Math.pow(1-_e,2),Oe=3*Math.pow(_e,2)*(1-_e),Be=Math.pow(_e,3),He=we*Te.y0+Se*Te.y0+Oe*Te.y1+Be*Te.y1,Xe=He-Te.width/2,nt=He+Te.width/2;Xe>Ie.y0&&Xe<Ie.y1?(Ce=Ie.y1-Xe+10,Ie=V(Ie,Ce="bottom"==Ie.circularLinkType?Ce:-Ce,de,be),he.nodes.forEach(function(et){C(et,pe)!=C(Ie,pe)&&et.column==Ie.column&&re(Ie,et)&&V(et,Ce,de,be)})):(nt>Ie.y0&&nt<Ie.y1||Xe<Ie.y0&&nt>Ie.y1)&&(Ie=V(Ie,Ce=nt-Ie.y0+10,de,be),he.nodes.forEach(function(et){C(et,pe)!=C(Ie,pe)&&et.column==Ie.column&&et.y0<Ie.y1&&et.y1>Ie.y1&&V(et,Ce,de,be)}))}})}})}function re(he,de){return he.y0>de.y0&&he.y0<de.y1||he.y1>de.y0&&he.y1<de.y1||he.y0<de.y0&&he.y1>de.y1}function V(he,de,be,pe){return he.y0+de>=be&&he.y1+de<=pe&&(he.y0=he.y0+de,he.y1=he.y1+de,he.targetLinks.forEach(function(Te){Te.y1=Te.y1+de}),he.sourceLinks.forEach(function(Te){Te.y0=Te.y0+de})),he}function W(he,de,be,pe){he.nodes.forEach(function(Te){pe&&Te.y+(Te.y1-Te.y0)>de&&(Te.y=Te.y-(Te.y+(Te.y1-Te.y0)-de));var ye=he.links.filter(function(je){return C(je.source,be)==C(Te,be)}),ke=ye.length;ke>1&&ye.sort(function(je,Ie){if(!je.circular&&!Ie.circular){if(je.target.column==Ie.target.column||!oe(je,Ie))return je.y1-Ie.y1;if(je.target.column>Ie.target.column){var Ce=K(Ie,je);return je.y1-Ce}if(Ie.target.column>je.target.column)return K(je,Ie)-Ie.y1}return je.circular&&!Ie.circular?"top"==je.circularLinkType?-1:1:Ie.circular&&!je.circular?"top"==Ie.circularLinkType?1:-1:je.circular&&Ie.circular?je.circularLinkType===Ie.circularLinkType&&"top"==je.circularLinkType?je.target.column===Ie.target.column?je.target.y1-Ie.target.y1:Ie.target.column-je.target.column:je.circularLinkType===Ie.circularLinkType&&"bottom"==je.circularLinkType?je.target.column===Ie.target.column?Ie.target.y1-je.target.y1:je.target.column-Ie.target.column:"top"==je.circularLinkType?-1:1:void 0});var ze=Te.y0;ye.forEach(function(je){je.y0=ze+je.width/2,ze+=je.width}),ye.forEach(function(je,Ie){if("bottom"==je.circularLinkType){for(var Ce=Ie+1,_e=0;Ce<ke;Ce++)_e+=ye[Ce].width;je.y0=Te.y1-_e-je.width/2}})})}function Z(he,de,be){he.nodes.forEach(function(pe){var Te=he.links.filter(function(ze){return C(ze.target,be)==C(pe,be)}),ye=Te.length;ye>1&&Te.sort(function(ze,je){if(!ze.circular&&!je.circular){if(ze.source.column==je.source.column||!oe(ze,je))return ze.y0-je.y0;if(je.source.column<ze.source.column){var Ie=te(je,ze);return ze.y0-Ie}if(ze.source.column<je.source.column)return te(ze,je)-je.y0}return ze.circular&&!je.circular?"top"==ze.circularLinkType?-1:1:je.circular&&!ze.circular?"top"==je.circularLinkType?1:-1:ze.circular&&je.circular?ze.circularLinkType===je.circularLinkType&&"top"==ze.circularLinkType?ze.source.column===je.source.column?ze.source.y1-je.source.y1:ze.source.column-je.source.column:ze.circularLinkType===je.circularLinkType&&"bottom"==ze.circularLinkType?ze.source.column===je.source.column?ze.source.y1-je.source.y1:je.source.column-ze.source.column:"top"==ze.circularLinkType?-1:1:void 0});var ke=pe.y0;Te.forEach(function(ze){ze.y1=ke+ze.width/2,ke+=ze.width}),Te.forEach(function(ze,je){if("bottom"==ze.circularLinkType){for(var Ie=je+1,Ce=0;Ie<ye;Ie++)Ce+=Te[Ie].width;ze.y1=pe.y1-Ce-ze.width/2}})})}function oe(he,de){return ie(he)==ie(de)}function ie(he){return he.y0-he.y1>0?"up":"down"}function ue(he,de){return C(he.source,de)==C(he.target,de)}function fe(he,de,be){var pe=he.nodes,Te=he.links,ye=!1,ke=!1;if(Te.forEach(function(Ie){"top"==Ie.circularLinkType?ye=!0:"bottom"==Ie.circularLinkType&&(ke=!0)}),0==ye||0==ke){var ze=m.min(pe,function(Ie){return Ie.y0}),je=(be-de)/(m.max(pe,function(Ie){return Ie.y1})-ze);pe.forEach(function(Ie){var Ce=(Ie.y1-Ie.y0)*je;Ie.y0=(Ie.y0-ze)*je,Ie.y1=Ie.y0+Ce}),Te.forEach(function(Ie){Ie.y0=(Ie.y0-ze)*je,Ie.y1=(Ie.y1-ze)*je,Ie.width=Ie.width*je})}}i.sankeyCircular=function(){var he,de,be=0,pe=0,Te=1,ye=1,ke=24,ze=w,je=c,Ie=x,Ce=E,_e=32,we=2,Se=null;function Oe(){var qe={nodes:Ie.apply(null,arguments),links:Ce.apply(null,arguments)};Be(qe),L(qe,0,Se),He(qe),Xe(qe),P(qe,ze),nt(qe,_e,ze),et(qe);for(var Ye=4,ot=0;ot<Ye;ot++)W(qe,ye,ze),Z(qe,0,ze),q(qe,pe,ye,ze),W(qe,ye,ze),Z(qe,0,ze);return fe(qe,pe,ye),S(qe,we,ye,ze),qe}function Be(qe){qe.nodes.forEach(function(ot,at){ot.index=at,ot.sourceLinks=[],ot.targetLinks=[]});var Ye=b.map(qe.nodes,ze);return qe.links.forEach(function(ot,at){ot.index=at;var ct=ot.source,_t=ot.target;"object"!==(void 0===ct?"undefined":f(ct))&&(ct=ot.source=k(Ye,ct)),"object"!==(void 0===_t?"undefined":f(_t))&&(_t=ot.target=k(Ye,_t)),ct.sourceLinks.push(ot),_t.targetLinks.push(ot)}),qe}function He(qe){qe.nodes.forEach(function(Ye){Ye.partOfCycle=!1,Ye.value=Math.max(m.sum(Ye.sourceLinks,g),m.sum(Ye.targetLinks,g)),Ye.sourceLinks.forEach(function(ot){ot.circular&&(Ye.partOfCycle=!0,Ye.circularLinkType=ot.circularLinkType)}),Ye.targetLinks.forEach(function(ot){ot.circular&&(Ye.partOfCycle=!0,Ye.circularLinkType=ot.circularLinkType)})})}function Xe(qe){var Ye,ot,at;for(Ye=qe.nodes,ot=[],at=0;Ye.length;++at,Ye=ot,ot=[])Ye.forEach(function(ct){ct.depth=at,ct.sourceLinks.forEach(function(_t){ot.indexOf(_t.target)<0&&!_t.circular&&ot.push(_t.target)})});for(Ye=qe.nodes,ot=[],at=0;Ye.length;++at,Ye=ot,ot=[])Ye.forEach(function(ct){ct.height=at,ct.targetLinks.forEach(function(_t){ot.indexOf(_t.source)<0&&!_t.circular&&ot.push(_t.source)})});qe.nodes.forEach(function(ct){ct.column=Math.floor(je.call(null,ct,at))})}function nt(qe,Ye,ot){var at=b.nest().key(function(At){return At.column}).sortKeys(m.ascending).entries(qe.nodes).map(function(At){return At.values});(function(At){if(de){var ht=1/0;at.forEach(function(hn){var We=ye*de/(hn.length+1);ht=We<ht?We:ht}),he=ht}var st=m.min(at,function(hn){return(ye-pe-(hn.length-1)*he)/m.sum(hn,g)});st*=.3,qe.links.forEach(function(hn){hn.width=hn.value*st});var hn,We,it,qt,Ge,Pe,Bt=(We=0,it=0,qt=0,Ge=0,Pe=m.max((hn=qe).nodes,function(Ee){return Ee.column}),hn.links.forEach(function(Ee){Ee.circular&&("top"==Ee.circularLinkType?We+=Ee.width:it+=Ee.width,0==Ee.target.column&&(Ge+=Ee.width),Ee.source.column==Pe&&(qt+=Ee.width))}),{top:We=We>0?We+25+10:We,bottom:it=it>0?it+25+10:it,left:Ge=Ge>0?Ge+25+10:Ge,right:qt=qt>0?qt+25+10:qt}),gn=function(hn,We){var it=m.max(hn.nodes,function(Ne){return Ne.column}),qt=Te-be,Ge=ye-pe,Pe=qt/(qt+We.right+We.left),Ee=Ge/(Ge+We.top+We.bottom);return be=be*Pe+We.left,Te=0==We.right?Te:Te*Pe,pe=pe*Ee+We.top,ye*=Ee,hn.nodes.forEach(function(Ne){Ne.x0=be+Ne.column*((Te-be-ke)/it),Ne.x1=Ne.x0+ke}),Ee}(qe,Bt);st*=gn,qe.links.forEach(function(hn){hn.width=hn.value*st}),at.forEach(function(hn){var We=hn.length;hn.forEach(function(it,qt){it.depth==at.length-1&&1==We||0==it.depth&&1==We?(it.y0=ye/2-it.value*st,it.y1=it.y0+it.value*st):it.partOfCycle?0==I(it,At)?(it.y0=ye/2+qt,it.y1=it.y0+it.value*st):"top"==it.circularLinkType?(it.y0=pe+qt,it.y1=it.y0+it.value*st):(it.y0=ye-it.value*st-qt,it.y1=it.y0+it.value*st):0==Bt.top||0==Bt.bottom?(it.y0=(ye-pe)/We*qt,it.y1=it.y0+it.value*st):(it.y0=(ye-pe)/2-We/2+qt,it.y1=it.y0+it.value*st)})})})(ot),Ht();for(var ct=1,_t=Ye;_t>0;--_t)xt(ct*=.99,ot),Ht();function xt(At,ht){var st=at.length;at.forEach(function(Bt){var gn=Bt.length,hn=Bt[0].depth;Bt.forEach(function(We){var it;if((We.sourceLinks.length||We.targetLinks.length)&&!(We.partOfCycle&&I(We,ht)>0))if(0==hn&&1==gn)We.y0=ye/2-(it=We.y1-We.y0)/2,We.y1=ye/2+it/2;else if(hn==st-1&&1==gn)We.y0=ye/2-(it=We.y1-We.y0)/2,We.y1=ye/2+it/2;else{var qt=m.mean(We.sourceLinks,_),Ge=m.mean(We.targetLinks,v),Pe=((qt&&Ge?(qt+Ge)/2:qt||Ge)-y(We))*At;We.y0+=Pe,We.y1+=Pe}})})}function Ht(){at.forEach(function(At){var ht,st,Bt,gn=pe,hn=At.length;for(At.sort(d),Bt=0;Bt<hn;++Bt)(st=gn-(ht=At[Bt]).y0)>0&&(ht.y0+=st,ht.y1+=st),gn=ht.y1+he;if((st=gn-he-ye)>0)for(gn=ht.y0-=st,ht.y1-=st,Bt=hn-2;Bt>=0;--Bt)(st=(ht=At[Bt]).y1+he-gn)>0&&(ht.y0-=st,ht.y1-=st),gn=ht.y0})}}function et(qe){qe.nodes.forEach(function(Ye){Ye.sourceLinks.sort(o),Ye.targetLinks.sort(s)}),qe.nodes.forEach(function(Ye){var ot=Ye.y0,at=ot,ct=Ye.y1,_t=ct;Ye.sourceLinks.forEach(function(xt){xt.circular?(xt.y0=ct-xt.width/2,ct-=xt.width):(xt.y0=ot+xt.width/2,ot+=xt.width)}),Ye.targetLinks.forEach(function(xt){xt.circular?(xt.y1=_t-xt.width/2,_t-=xt.width):(xt.y1=at+xt.width/2,at+=xt.width)})})}return Oe.nodeId=function(qe){return arguments.length?(ze="function"==typeof qe?qe:l(qe),Oe):ze},Oe.nodeAlign=function(qe){return arguments.length?(je="function"==typeof qe?qe:l(qe),Oe):je},Oe.nodeWidth=function(qe){return arguments.length?(ke=+qe,Oe):ke},Oe.nodePadding=function(qe){return arguments.length?(he=+qe,Oe):he},Oe.nodes=function(qe){return arguments.length?(Ie="function"==typeof qe?qe:l(qe),Oe):Ie},Oe.links=function(qe){return arguments.length?(Ce="function"==typeof qe?qe:l(qe),Oe):Ce},Oe.size=function(qe){return arguments.length?(be=pe=0,Te=+qe[0],ye=+qe[1],Oe):[Te-be,ye-pe]},Oe.extent=function(qe){return arguments.length?(be=+qe[0][0],Te=+qe[1][0],pe=+qe[0][1],ye=+qe[1][1],Oe):[[be,pe],[Te,ye]]},Oe.iterations=function(qe){return arguments.length?(_e=+qe,Oe):_e},Oe.circularLinkGap=function(qe){return arguments.length?(we=+qe,Oe):we},Oe.nodePaddingRatio=function(qe){return arguments.length?(de=+qe,Oe):de},Oe.sortNodes=function(qe){return arguments.length?(Se=qe,Oe):Se},Oe.update=function(qe){return P(qe,ze),et(qe),qe.links.forEach(function(Ye){Ye.circular&&(Ye.circularLinkType=Ye.y0+Ye.y1<ye?"top":"bottom",Ye.source.circularLinkType=Ye.circularLinkType,Ye.target.circularLinkType=Ye.circularLinkType)}),W(qe,ye,ze,!1),Z(qe,0,ze),S(qe,we,ye,ze),qe},Oe},i.sankeyCenter=function(he){return he.targetLinks.length?he.depth:he.sourceLinks.length?m.min(he.sourceLinks,u)-1:0},i.sankeyLeft=function(he){return he.depth},i.sankeyRight=function(he,de){return de-1-he.height},i.sankeyJustify=c,Object.defineProperty(i,"__esModule",{value:!0})},"object"==typeof X&&void 0!==G?m(X,h("d3-array"),h("d3-collection"),h("d3-shape"),h("elementary-circuits-directed-graph")):m(i.d3=i.d3||{},i.d3,i.d3,i.d3,null)},{"d3-array":162,"d3-collection":163,"d3-shape":174,"elementary-circuits-directed-graph":188}],57:[function(h,G,X){var i,m;i=this,m=function(i,m,b,p){"use strict";function r(C){return C.target.depth}function u(C,L){return C.sourceLinks.length?C.depth:L-1}function c(C){return function(){return C}}function l(C,L){return s(C.source,L.source)||C.index-L.index}function f(C,L){return s(C.target,L.target)||C.index-L.index}function s(C,L){return C.y0-L.y0}function o(C){return C.value}function d(C){return(C.y0+C.y1)/2}function g(C){return d(C.source)*C.value}function y(C){return d(C.target)*C.value}function v(C){return C.index}function _(C){return C.nodes}function w(C){return C.links}function x(C,L){var P=C.get(L);if(!P)throw new Error("missing: "+L);return P}function E(C){return[C.source.x1,C.y0]}function k(C){return[C.target.x0,C.y1]}i.sankey=function(){var C=0,L=0,P=1,A=1,I=24,D=8,R=v,S=u,N=_,B=w,H=32;function Y(){var q={nodes:N.apply(null,arguments),links:B.apply(null,arguments)};return Q(q),ne(q),ae(q),te(q),K(q),q}function Q(q){q.nodes.forEach(function(V,W){V.index=W,V.sourceLinks=[],V.targetLinks=[]});var re=b.map(q.nodes,R);q.links.forEach(function(V,W){V.index=W;var Z=V.source,oe=V.target;"object"!=typeof Z&&(Z=V.source=x(re,Z)),"object"!=typeof oe&&(oe=V.target=x(re,oe)),Z.sourceLinks.push(V),oe.targetLinks.push(V)})}function ne(q){q.nodes.forEach(function(re){re.value=Math.max(m.sum(re.sourceLinks,o),m.sum(re.targetLinks,o))})}function ae(q){var re,V,W;for(re=q.nodes,V=[],W=0;re.length;++W,re=V,V=[])re.forEach(function(oe){oe.depth=W,oe.sourceLinks.forEach(function(ie){V.indexOf(ie.target)<0&&V.push(ie.target)})});for(re=q.nodes,V=[],W=0;re.length;++W,re=V,V=[])re.forEach(function(oe){oe.height=W,oe.targetLinks.forEach(function(ie){V.indexOf(ie.source)<0&&V.push(ie.source)})});var Z=(P-C-I)/(W-1);q.nodes.forEach(function(oe){oe.x1=(oe.x0=C+Math.max(0,Math.min(W-1,Math.floor(S.call(null,oe,W))))*Z)+I})}function te(q){var re=b.nest().key(function(ue){return ue.x0}).sortKeys(m.ascending).entries(q.nodes).map(function(ue){return ue.values});(function(){var ue=m.max(re,function(de){return de.length}),fe=2/3*(A-L)/(ue-1);D>fe&&(D=fe);var he=m.min(re,function(de){return(A-L-(de.length-1)*D)/m.sum(de,o)});re.forEach(function(de){de.forEach(function(be,pe){be.y1=(be.y0=pe)+be.value*he})}),q.links.forEach(function(de){de.width=de.value*he})})(),ie();for(var V=1,W=H;W>0;--W)oe(V*=.99),ie(),Z(V),ie();function Z(ue){re.forEach(function(fe){fe.forEach(function(he){if(he.targetLinks.length){var de=(m.sum(he.targetLinks,g)/m.sum(he.targetLinks,o)-d(he))*ue;he.y0+=de,he.y1+=de}})})}function oe(ue){re.slice().reverse().forEach(function(fe){fe.forEach(function(he){if(he.sourceLinks.length){var de=(m.sum(he.sourceLinks,y)/m.sum(he.sourceLinks,o)-d(he))*ue;he.y0+=de,he.y1+=de}})})}function ie(){re.forEach(function(ue){var fe,he,de,be=L,pe=ue.length;for(ue.sort(s),de=0;de<pe;++de)(he=be-(fe=ue[de]).y0)>0&&(fe.y0+=he,fe.y1+=he),be=fe.y1+D;if((he=be-D-A)>0)for(be=fe.y0-=he,fe.y1-=he,de=pe-2;de>=0;--de)(he=(fe=ue[de]).y1+D-be)>0&&(fe.y0-=he,fe.y1-=he),be=fe.y0})}}function K(q){q.nodes.forEach(function(re){re.sourceLinks.sort(f),re.targetLinks.sort(l)}),q.nodes.forEach(function(re){var V=re.y0,W=V;re.sourceLinks.forEach(function(Z){Z.y0=V+Z.width/2,V+=Z.width}),re.targetLinks.forEach(function(Z){Z.y1=W+Z.width/2,W+=Z.width})})}return Y.update=function(q){return K(q),q},Y.nodeId=function(q){return arguments.length?(R="function"==typeof q?q:c(q),Y):R},Y.nodeAlign=function(q){return arguments.length?(S="function"==typeof q?q:c(q),Y):S},Y.nodeWidth=function(q){return arguments.length?(I=+q,Y):I},Y.nodePadding=function(q){return arguments.length?(D=+q,Y):D},Y.nodes=function(q){return arguments.length?(N="function"==typeof q?q:c(q),Y):N},Y.links=function(q){return arguments.length?(B="function"==typeof q?q:c(q),Y):B},Y.size=function(q){return arguments.length?(C=L=0,P=+q[0],A=+q[1],Y):[P-C,A-L]},Y.extent=function(q){return arguments.length?(C=+q[0][0],P=+q[1][0],L=+q[0][1],A=+q[1][1],Y):[[C,L],[P,A]]},Y.iterations=function(q){return arguments.length?(H=+q,Y):H},Y},i.sankeyCenter=function(C){return C.targetLinks.length?C.depth:C.sourceLinks.length?m.min(C.sourceLinks,r)-1:0},i.sankeyLeft=function(C){return C.depth},i.sankeyRight=function(C,L){return L-1-C.height},i.sankeyJustify=u,i.sankeyLinkHorizontal=function(){return p.linkHorizontal().source(E).target(k)},Object.defineProperty(i,"__esModule",{value:!0})},"object"==typeof X&&void 0!==G?m(X,h("d3-array"),h("d3-collection"),h("d3-shape")):m(i.d3=i.d3||{},i.d3,i.d3,i.d3)},{"d3-array":162,"d3-collection":163,"d3-shape":174}],58:[function(h,G,X){(function(){var i={version:"3.8.0"},m=[].slice,b=function(ge){return m.call(ge)},p=self.document;function r(ge){return ge&&(ge.ownerDocument||ge.document||ge).documentElement}function u(ge){return ge&&(ge.ownerDocument&&ge.ownerDocument.defaultView||ge.document&&ge||ge.defaultView)}if(p)try{b(p.documentElement.childNodes)}catch(ge){b=function(O){for(var j=O.length,U=new Array(j);j--;)U[j]=O[j];return U}}if(Date.now||(Date.now=function(){return+new Date}),p)try{p.createElement("DIV").style.setProperty("opacity",0,"")}catch(ge){var c=this.Element.prototype,l=c.setAttribute,f=c.setAttributeNS,s=this.CSSStyleDeclaration.prototype,o=s.setProperty;c.setAttribute=function(O,j){l.call(this,O,j+"")},c.setAttributeNS=function(O,j,U){f.call(this,O,j,U+"")},s.setProperty=function(O,j,U){o.call(this,O,j+"",U)}}function d(ge,O){return ge<O?-1:ge>O?1:ge>=O?0:NaN}function g(ge){return null===ge?NaN:+ge}function y(ge){return!isNaN(ge)}function v(ge){return{left:function(O,j,U,$){for(arguments.length<3&&(U=0),arguments.length<4&&($=O.length);U<$;){var le=U+$>>>1;ge(O[le],j)<0?U=le+1:$=le}return U},right:function(O,j,U,$){for(arguments.length<3&&(U=0),arguments.length<4&&($=O.length);U<$;){var le=U+$>>>1;ge(O[le],j)>0?$=le:U=le+1}return U}}}i.ascending=d,i.descending=function(ge,O){return O<ge?-1:O>ge?1:O>=ge?0:NaN},i.min=function(ge,O){var j,U,$=-1,le=ge.length;if(1===arguments.length){for(;++$<le;)if(null!=(U=ge[$])&&U>=U){j=U;break}for(;++$<le;)null!=(U=ge[$])&&j>U&&(j=U)}else{for(;++$<le;)if(null!=(U=O.call(ge,ge[$],$))&&U>=U){j=U;break}for(;++$<le;)null!=(U=O.call(ge,ge[$],$))&&j>U&&(j=U)}return j},i.max=function(ge,O){var j,U,$=-1,le=ge.length;if(1===arguments.length){for(;++$<le;)if(null!=(U=ge[$])&&U>=U){j=U;break}for(;++$<le;)null!=(U=ge[$])&&U>j&&(j=U)}else{for(;++$<le;)if(null!=(U=O.call(ge,ge[$],$))&&U>=U){j=U;break}for(;++$<le;)null!=(U=O.call(ge,ge[$],$))&&U>j&&(j=U)}return j},i.extent=function(ge,O){var j,U,$,le=-1,me=ge.length;if(1===arguments.length){for(;++le<me;)if(null!=(U=ge[le])&&U>=U){j=$=U;break}for(;++le<me;)null!=(U=ge[le])&&(j>U&&(j=U),$<U&&($=U))}else{for(;++le<me;)if(null!=(U=O.call(ge,ge[le],le))&&U>=U){j=$=U;break}for(;++le<me;)null!=(U=O.call(ge,ge[le],le))&&(j>U&&(j=U),$<U&&($=U))}return[j,$]},i.sum=function(ge,O){var j,U=0,$=ge.length,le=-1;if(1===arguments.length)for(;++le<$;)y(j=+ge[le])&&(U+=j);else for(;++le<$;)y(j=+O.call(ge,ge[le],le))&&(U+=j);return U},i.mean=function(ge,O){var j,U=0,$=ge.length,le=-1,me=$;if(1===arguments.length)for(;++le<$;)y(j=g(ge[le]))?U+=j:--me;else for(;++le<$;)y(j=g(O.call(ge,ge[le],le)))?U+=j:--me;if(me)return U/me},i.quantile=function(ge,O){var j=(ge.length-1)*O+1,U=Math.floor(j),$=+ge[U-1],le=j-U;return le?$+le*(ge[U]-$):$},i.median=function(ge,O){var j,U=[],$=ge.length,le=-1;if(1===arguments.length)for(;++le<$;)y(j=g(ge[le]))&&U.push(j);else for(;++le<$;)y(j=g(O.call(ge,ge[le],le)))&&U.push(j);if(U.length)return i.quantile(U.sort(d),.5)},i.variance=function(ge,O){var j,U,$=ge.length,le=0,me=0,Ae=-1,De=0;if(1===arguments.length)for(;++Ae<$;)y(j=g(ge[Ae]))&&(me+=(U=j-le)*(j-(le+=U/++De)));else for(;++Ae<$;)y(j=g(O.call(ge,ge[Ae],Ae)))&&(me+=(U=j-le)*(j-(le+=U/++De)));if(De>1)return me/(De-1)},i.deviation=function(){var ge=i.variance.apply(this,arguments);return ge&&Math.sqrt(ge)};var _=v(d);function w(ge){return ge.length}i.bisectLeft=_.left,i.bisect=i.bisectRight=_.right,i.bisector=function(ge){return v(1===ge.length?function(O,j){return d(ge(O),j)}:ge)},i.shuffle=function(ge,O,j){(le=arguments.length)<3&&(j=ge.length,le<2&&(O=0));for(var U,$,le=j-O;le;)$=Math.random()*le--|0,U=ge[le+O],ge[le+O]=ge[$+O],ge[$+O]=U;return ge},i.permute=function(ge,O){for(var j=O.length,U=new Array(j);j--;)U[j]=ge[O[j]];return U},i.pairs=function(ge){for(var O=0,j=ge.length-1,U=ge[0],$=new Array(j<0?0:j);O<j;)$[O]=[U,U=ge[++O]];return $},i.transpose=function(ge){if(!($=ge.length))return[];for(var O=-1,j=i.min(ge,w),U=new Array(j);++O<j;)for(var $,le=-1,me=U[O]=new Array($);++le<$;)me[le]=ge[le][O];return U},i.zip=function(){return i.transpose(arguments)},i.keys=function(ge){var O=[];for(var j in ge)O.push(j);return O},i.values=function(ge){var O=[];for(var j in ge)O.push(ge[j]);return O},i.entries=function(ge){var O=[];for(var j in ge)O.push({key:j,value:ge[j]});return O},i.merge=function(ge){for(var O,j,U,$=ge.length,le=-1,me=0;++le<$;)me+=ge[le].length;for(j=new Array(me);--$>=0;)for(O=(U=ge[$]).length;--O>=0;)j[--me]=U[O];return j};var x=Math.abs;function E(ge){for(var O=1;ge*O%1;)O*=10;return O}function k(ge,O){for(var j in O)Object.defineProperty(ge.prototype,j,{value:O[j],enumerable:!1})}function C(){this._=Object.create(null)}function L(ge){return"__proto__"==(ge+="")||"\0"===ge[0]?"\0"+ge:ge}function P(ge){return"\0"===(ge+="")[0]?ge.slice(1):ge}function A(ge){return L(ge)in this._}function I(ge){return(ge=L(ge))in this._&&delete this._[ge]}function D(){var ge=[];for(var O in this._)ge.push(P(O));return ge}function R(){var ge=0;for(var O in this._)++ge;return ge}function S(){for(var ge in this._)return!1;return!0}function N(){this._=Object.create(null)}function B(ge){return ge}function H(ge,O,j){return function(){var U=j.apply(O,arguments);return U===O?ge:U}}function Y(ge,O){if(O in ge)return O;O=O.charAt(0).toUpperCase()+O.slice(1);for(var j=0,U=Q.length;j<U;++j){var $=Q[j]+O;if($ in ge)return $}}i.range=function(ge,O,j){if(arguments.length<3&&(j=1,arguments.length<2&&(O=ge,ge=0)),(O-ge)/j==1/0)throw new Error("infinite range");var U,$=[],le=E(x(j)),me=-1;if(ge*=le,O*=le,(j*=le)<0)for(;(U=ge+j*++me)>O;)$.push(U/le);else for(;(U=ge+j*++me)<O;)$.push(U/le);return $},i.map=function(ge,O){var j=new C;if(ge instanceof C)ge.forEach(function(Ae,De){j.set(Ae,De)});else if(Array.isArray(ge)){var U,$=-1,le=ge.length;if(1===arguments.length)for(;++$<le;)j.set($,ge[$]);else for(;++$<le;)j.set(O.call(ge,U=ge[$],$),U)}else for(var me in ge)j.set(me,ge[me]);return j},k(C,{has:A,get:function(ge){return this._[L(ge)]},set:function(ge,O){return this._[L(ge)]=O},remove:I,keys:D,values:function(){var ge=[];for(var O in this._)ge.push(this._[O]);return ge},entries:function(){var ge=[];for(var O in this._)ge.push({key:P(O),value:this._[O]});return ge},size:R,empty:S,forEach:function(ge){for(var O in this._)ge.call(this,P(O),this._[O])}}),i.nest=function(){var ge,O,j={},U=[],$=[];function le(me,Ae,De){if(De>=U.length)return O?O.call(j,Ae):ge?Ae.sort(ge):Ae;for(var Le,Qe,rt,dt,Pt=-1,Nt=Ae.length,Rt=U[De++],Ft=new C;++Pt<Nt;)(dt=Ft.get(Le=Rt(Qe=Ae[Pt])))?dt.push(Qe):Ft.set(Le,[Qe]);return me?(Qe=me(),rt=function(It,Xt){Qe.set(It,le(me,Xt,De))}):(Qe={},rt=function(It,Xt){Qe[It]=le(me,Xt,De)}),Ft.forEach(rt),Qe}return j.map=function(me,Ae){return le(Ae,me,0)},j.entries=function(me){return function Ae(De,Le){if(Le>=U.length)return De;var Qe=[],rt=$[Le++];return De.forEach(function(dt,Pt){Qe.push({key:dt,values:Ae(Pt,Le)})}),rt?Qe.sort(function(dt,Pt){return rt(dt.key,Pt.key)}):Qe}(le(i.map,me,0),0)},j.key=function(me){return U.push(me),j},j.sortKeys=function(me){return $[U.length-1]=me,j},j.sortValues=function(me){return ge=me,j},j.rollup=function(me){return O=me,j},j},i.set=function(ge){var O=new N;if(ge)for(var j=0,U=ge.length;j<U;++j)O.add(ge[j]);return O},k(N,{has:A,add:function(ge){return this._[L(ge+="")]=!0,ge},remove:I,values:D,size:R,empty:S,forEach:function(ge){for(var O in this._)ge.call(this,P(O))}}),i.behavior={},i.rebind=function(ge,O){for(var j,U=1,$=arguments.length;++U<$;)ge[j=arguments[U]]=H(ge,O,O[j]);return ge};var Q=["webkit","ms","moz","Moz","o","O"];function ne(){}function ae(){}function te(ge){var O=[],j=new C;function U(){for(var $,le=O,me=-1,Ae=le.length;++me<Ae;)($=le[me].on)&&$.apply(this,arguments);return ge}return U.on=function($,le){var me,Ae=j.get($);return arguments.length<2?Ae&&Ae.on:(Ae&&(Ae.on=null,O=O.slice(0,me=O.indexOf(Ae)).concat(O.slice(me+1)),j.remove($)),le&&O.push(j.set($,{on:le})),ge)},U}function K(){i.event.preventDefault()}function q(){for(var ge,O=i.event;ge=O.sourceEvent;)O=ge;return O}function re(ge){for(var O=new ae,j=0,U=arguments.length;++j<U;)O[arguments[j]]=te(O);return O.of=function($,le){return function(me){try{var Ae=me.sourceEvent=i.event;me.target=ge,i.event=me,O[me.type].apply($,le)}finally{i.event=Ae}}},O}i.dispatch=function(){for(var ge=new ae,O=-1,j=arguments.length;++O<j;)ge[arguments[O]]=te(ge);return ge},ae.prototype.on=function(ge,O){var j=ge.indexOf("."),U="";if(j>=0&&(U=ge.slice(j+1),ge=ge.slice(0,j)),ge)return arguments.length<2?this[ge].on(U):this[ge].on(U,O);if(2===arguments.length){if(null==O)for(ge in this)this.hasOwnProperty(ge)&&this[ge].on(U,null);return this}},i.event=null,i.requote=function(ge){return ge.replace(V,"\\$&")};var V=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,W={}.__proto__?function(ge,O){ge.__proto__=O}:function(ge,O){for(var j in O)ge[j]=O[j]};function Z(ge){return W(ge,fe),ge}var oe=function(ge,O){return O.querySelector(ge)},ie=function(ge,O){return O.querySelectorAll(ge)},ue=function(ge,O){var j=ge.matches||ge[Y(ge,"matchesSelector")];return(ue=function(U,$){return j.call(U,$)})(ge,O)};"function"==typeof Sizzle&&(oe=function(ge,O){return Sizzle(ge,O)[0]||null},ie=Sizzle,ue=Sizzle.matchesSelector),i.selection=function(){return i.select(p.documentElement)};var fe=i.selection.prototype=[];function he(ge){return"function"==typeof ge?ge:function(){return oe(ge,this)}}function de(ge){return"function"==typeof ge?ge:function(){return ie(ge,this)}}fe.select=function(ge){var O,j,U,$,le=[];ge=he(ge);for(var me=-1,Ae=this.length;++me<Ae;){le.push(O=[]),O.parentNode=(U=this[me]).parentNode;for(var De=-1,Le=U.length;++De<Le;)($=U[De])?(O.push(j=ge.call($,$.__data__,De,me)),j&&"__data__"in $&&(j.__data__=$.__data__)):O.push(null)}return Z(le)},fe.selectAll=function(ge){var O,j,U=[];ge=de(ge);for(var $=-1,le=this.length;++$<le;)for(var me=this[$],Ae=-1,De=me.length;++Ae<De;)(j=me[Ae])&&(U.push(O=b(ge.call(j,j.__data__,Ae,$))),O.parentNode=j);return Z(U)};var be="http://www.w3.org/1999/xhtml",pe={svg:"http://www.w3.org/2000/svg",xhtml:be,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Te(ge,O){return ge=i.ns.qualify(ge),null==O?ge.local?function(){this.removeAttributeNS(ge.space,ge.local)}:function(){this.removeAttribute(ge)}:"function"==typeof O?ge.local?function(){var j=O.apply(this,arguments);null==j?this.removeAttributeNS(ge.space,ge.local):this.setAttributeNS(ge.space,ge.local,j)}:function(){var j=O.apply(this,arguments);null==j?this.removeAttribute(ge):this.setAttribute(ge,j)}:ge.local?function(){this.setAttributeNS(ge.space,ge.local,O)}:function(){this.setAttribute(ge,O)}}function ye(ge){return ge.trim().replace(/\s+/g," ")}function ke(ge){return new RegExp("(?:^|\\s+)"+i.requote(ge)+"(?:\\s+|$)","g")}function ze(ge){return(ge+"").trim().split(/^|\s+/)}function je(ge,O){var j=(ge=ze(ge).map(Ie)).length;return"function"==typeof O?function(){for(var U=-1,$=O.apply(this,arguments);++U<j;)ge[U](this,$)}:function(){for(var U=-1;++U<j;)ge[U](this,O)}}function Ie(ge){var O=ke(ge);return function(j,U){if($=j.classList)return U?$.add(ge):$.remove(ge);var $=j.getAttribute("class")||"";U?(O.lastIndex=0,O.test($)||j.setAttribute("class",ye($+" "+ge))):j.setAttribute("class",ye($.replace(O," ")))}}function Ce(ge,O,j){return null==O?function(){this.style.removeProperty(ge)}:"function"==typeof O?function(){var U=O.apply(this,arguments);null==U?this.style.removeProperty(ge):this.style.setProperty(ge,U,j)}:function(){this.style.setProperty(ge,O,j)}}function _e(ge,O){return null==O?function(){delete this[ge]}:"function"==typeof O?function(){var j=O.apply(this,arguments);null==j?delete this[ge]:this[ge]=j}:function(){this[ge]=O}}function we(ge){return"function"==typeof ge?ge:(ge=i.ns.qualify(ge)).local?function(){return this.ownerDocument.createElementNS(ge.space,ge.local)}:function(){var O=this.ownerDocument,j=this.namespaceURI;return j===be&&O.documentElement.namespaceURI===be?O.createElement(ge):O.createElementNS(j,ge)}}function Se(){var ge=this.parentNode;ge&&ge.removeChild(this)}function Oe(ge){return{__data__:ge}}function Be(ge){return function(){return ue(this,ge)}}function He(ge){return arguments.length||(ge=d),function(O,j){return O&&j?ge(O.__data__,j.__data__):!O-!j}}function Xe(ge,O){for(var j=0,U=ge.length;j<U;j++)for(var $,le=ge[j],me=0,Ae=le.length;me<Ae;me++)($=le[me])&&O($,me,j);return ge}function nt(ge){return W(ge,et),ge}i.ns={prefix:pe,qualify:function(ge){var O=ge.indexOf(":"),j=ge;return O>=0&&"xmlns"!==(j=ge.slice(0,O))&&(ge=ge.slice(O+1)),pe.hasOwnProperty(j)?{space:pe[j],local:ge}:ge}},fe.attr=function(ge,O){if(arguments.length<2){if("string"==typeof ge){var j=this.node();return(ge=i.ns.qualify(ge)).local?j.getAttributeNS(ge.space,ge.local):j.getAttribute(ge)}for(O in ge)this.each(Te(O,ge[O]));return this}return this.each(Te(ge,O))},fe.classed=function(ge,O){if(arguments.length<2){if("string"==typeof ge){var j=this.node(),U=(ge=ze(ge)).length,$=-1;if(O=j.classList){for(;++$<U;)if(!O.contains(ge[$]))return!1}else for(O=j.getAttribute("class");++$<U;)if(!ke(ge[$]).test(O))return!1;return!0}for(O in ge)this.each(je(O,ge[O]));return this}return this.each(je(ge,O))},fe.style=function(ge,O,j){var U=arguments.length;if(U<3){if("string"!=typeof ge){for(j in U<2&&(O=""),ge)this.each(Ce(j,ge[j],O));return this}if(U<2){var $=this.node();return u($).getComputedStyle($,null).getPropertyValue(ge)}j=""}return this.each(Ce(ge,O,j))},fe.property=function(ge,O){if(arguments.length<2){if("string"==typeof ge)return this.node()[ge];for(O in ge)this.each(_e(O,ge[O]));return this}return this.each(_e(ge,O))},fe.text=function(ge){return arguments.length?this.each("function"==typeof ge?function(){var O=ge.apply(this,arguments);this.textContent=null==O?"":O}:null==ge?function(){this.textContent=""}:function(){this.textContent=ge}):this.node().textContent},fe.html=function(ge){return arguments.length?this.each("function"==typeof ge?function(){var O=ge.apply(this,arguments);this.innerHTML=null==O?"":O}:null==ge?function(){this.innerHTML=""}:function(){this.innerHTML=ge}):this.node().innerHTML},fe.append=function(ge){return ge=we(ge),this.select(function(){return this.appendChild(ge.apply(this,arguments))})},fe.insert=function(ge,O){return ge=we(ge),O=he(O),this.select(function(){return this.insertBefore(ge.apply(this,arguments),O.apply(this,arguments)||null)})},fe.remove=function(){return this.each(Se)},fe.data=function(ge,O){var j,U,$=-1,le=this.length;if(!arguments.length){for(ge=new Array(le=(j=this[0]).length);++$<le;)(U=j[$])&&(ge[$]=U.__data__);return ge}function me(Qe,rt){var dt,Pt,Nt,Rt=Qe.length,Ft=rt.length,It=Math.min(Rt,Ft),Xt=new Array(Ft),$t=new Array(Ft),en=new Array(Rt);if(O){var bn,Cn=new C,$n=new Array(Rt);for(dt=-1;++dt<Rt;)(Pt=Qe[dt])&&(Cn.has(bn=O.call(Pt,Pt.__data__,dt))?en[dt]=Pt:Cn.set(bn,Pt),$n[dt]=bn);for(dt=-1;++dt<Ft;)(Pt=Cn.get(bn=O.call(rt,Nt=rt[dt],dt)))?!0!==Pt&&(Xt[dt]=Pt,Pt.__data__=Nt):$t[dt]=Oe(Nt),Cn.set(bn,!0);for(dt=-1;++dt<Rt;)dt in $n&&!0!==Cn.get($n[dt])&&(en[dt]=Qe[dt])}else{for(dt=-1;++dt<It;)Nt=rt[dt],(Pt=Qe[dt])?(Pt.__data__=Nt,Xt[dt]=Pt):$t[dt]=Oe(Nt);for(;dt<Ft;++dt)$t[dt]=Oe(rt[dt]);for(;dt<Rt;++dt)en[dt]=Qe[dt]}$t.update=Xt,$t.parentNode=Xt.parentNode=en.parentNode=Qe.parentNode,Ae.push($t),De.push(Xt),Le.push(en)}var Ae=nt([]),De=Z([]),Le=Z([]);if("function"==typeof ge)for(;++$<le;)me(j=this[$],ge.call(j,j.parentNode.__data__,$));else for(;++$<le;)me(j=this[$],ge);return De.enter=function(){return Ae},De.exit=function(){return Le},De},fe.datum=function(ge){return arguments.length?this.property("__data__",ge):this.property("__data__")},fe.filter=function(ge){var O,j,U,$=[];"function"!=typeof ge&&(ge=Be(ge));for(var le=0,me=this.length;le<me;le++){$.push(O=[]),O.parentNode=(j=this[le]).parentNode;for(var Ae=0,De=j.length;Ae<De;Ae++)(U=j[Ae])&&ge.call(U,U.__data__,Ae,le)&&O.push(U)}return Z($)},fe.order=function(){for(var ge=-1,O=this.length;++ge<O;)for(var j,U=this[ge],$=U.length-1,le=U[$];--$>=0;)(j=U[$])&&(le&&le!==j.nextSibling&&le.parentNode.insertBefore(j,le),le=j);return this},fe.sort=function(ge){ge=He.apply(this,arguments);for(var O=-1,j=this.length;++O<j;)this[O].sort(ge);return this.order()},fe.each=function(ge){return Xe(this,function(O,j,U){ge.call(O,O.__data__,j,U)})},fe.call=function(ge){var O=b(arguments);return ge.apply(O[0]=this,O),this},fe.empty=function(){return!this.node()},fe.node=function(){for(var ge=0,O=this.length;ge<O;ge++)for(var j=this[ge],U=0,$=j.length;U<$;U++){var le=j[U];if(le)return le}return null},fe.size=function(){var ge=0;return Xe(this,function(){++ge}),ge};var et=[];function qe(ge){var O,j;return function(U,$,le){var me,Ae=ge[le].update,De=Ae.length;for(le!=j&&(j=le,O=0),$>=O&&(O=$+1);!(me=Ae[O])&&++O<De;);return me}}function Ye(ge,O,j){var U="__on"+ge,$=ge.indexOf("."),le=at;$>0&&(ge=ge.slice(0,$));var me=ot.get(ge);function Ae(){var De=this[U];De&&(this.removeEventListener(ge,De,De.$),delete this[U])}return me&&(ge=me,le=ct),$?O?function(){var De=le(O,b(arguments));Ae.call(this),this.addEventListener(ge,this[U]=De,De.$=j),De._=O}:Ae:O?ne:function(){var De,Le=new RegExp("^__on([^.]+)"+i.requote(ge)+"$");for(var Qe in this)if(De=Qe.match(Le)){var rt=this[Qe];this.removeEventListener(De[1],rt,rt.$),delete this[Qe]}}}i.selection.enter=nt,i.selection.enter.prototype=et,et.append=fe.append,et.empty=fe.empty,et.node=fe.node,et.call=fe.call,et.size=fe.size,et.select=function(ge){for(var O,j,U,$,le,me=[],Ae=-1,De=this.length;++Ae<De;){U=($=this[Ae]).update,me.push(O=[]),O.parentNode=$.parentNode;for(var Le=-1,Qe=$.length;++Le<Qe;)(le=$[Le])?(O.push(U[Le]=j=ge.call($.parentNode,le.__data__,Le,Ae)),j.__data__=le.__data__):O.push(null)}return Z(me)},et.insert=function(ge,O){return arguments.length<2&&(O=qe(this)),fe.insert.call(this,ge,O)},i.select=function(ge){var O;return"string"==typeof ge?(O=[oe(ge,p)]).parentNode=p.documentElement:(O=[ge]).parentNode=r(ge),Z([O])},i.selectAll=function(ge){var O;return"string"==typeof ge?(O=b(ie(ge,p))).parentNode=p.documentElement:(O=b(ge)).parentNode=null,Z([O])},fe.on=function(ge,O,j){var U=arguments.length;if(U<3){if("string"!=typeof ge){for(j in U<2&&(O=!1),ge)this.each(Ye(j,ge[j],O));return this}if(U<2)return(U=this.node()["__on"+ge])&&U._;j=!1}return this.each(Ye(ge,O,j))};var ot=i.map({mouseenter:"mouseover",mouseleave:"mouseout"});function at(ge,O){return function(j){var U=i.event;i.event=j,O[0]=this.__data__;try{ge.apply(this,O)}finally{i.event=U}}}function ct(ge,O){var j=at(ge,O);return function(U){var $=U.relatedTarget;$&&($===this||8&$.compareDocumentPosition(this))||j.call(this,U)}}p&&ot.forEach(function(ge){"on"+ge in p&&ot.remove(ge)});var _t,xt=0;function Ht(ge){var O=".dragsuppress-"+ ++xt,j="click"+O,U=i.select(u(ge)).on("touchmove"+O,K).on("dragstart"+O,K).on("selectstart"+O,K);if(null==_t&&(_t=!("onselectstart"in ge)&&Y(ge.style,"userSelect")),_t){var $=r(ge).style,le=$[_t];$[_t]="none"}return function(me){if(U.on(O,null),_t&&($[_t]=le),me){var Ae=function(){U.on(j,null)};U.on(j,function(){K(),Ae()},!0),setTimeout(Ae,0)}}}i.mouse=function(ge){return ht(ge,q())};var At=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ht(ge,O){O.changedTouches&&(O=O.changedTouches[0]);var j=ge.ownerSVGElement||ge;if(j.createSVGPoint){var U=j.createSVGPoint();if(At<0){var $=u(ge);if($.scrollX||$.scrollY){var le=(j=i.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();At=!(le.f||le.e),j.remove()}}return At?(U.x=O.pageX,U.y=O.pageY):(U.x=O.clientX,U.y=O.clientY),[(U=U.matrixTransform(ge.getScreenCTM().inverse())).x,U.y]}var me=ge.getBoundingClientRect();return[O.clientX-me.left-ge.clientLeft,O.clientY-me.top-ge.clientTop]}function st(){return i.event.changedTouches[0].identifier}i.touch=function(ge,O,j){if(arguments.length<3&&(j=O,O=q().changedTouches),O)for(var U,$=0,le=O.length;$<le;++$)if((U=O[$]).identifier===j)return ht(ge,U)},i.behavior.drag=function(){var ge=re($,"drag","dragstart","dragend"),O=null,j=le(ne,i.mouse,u,"mousemove","mouseup"),U=le(st,i.touch,B,"touchmove","touchend");function $(){this.on("mousedown.drag",j).on("touchstart.drag",U)}function le(me,Ae,De,Le,Qe){return function(){var rt,dt=this,Pt=i.event.target.correspondingElement||i.event.target,Nt=dt.parentNode,Rt=ge.of(dt,arguments),Ft=0,It=me(),Xt=".drag"+(null==It?"":"-"+It),$t=i.select(De(Pt)).on(Le+Xt,Cn).on(Qe+Xt,$n),en=Ht(Pt),bn=Ae(Nt,It);function Cn(){var Gn,pr,dr=Ae(Nt,It);dr&&(Ft|=(Gn=dr[0]-bn[0])|(pr=dr[1]-bn[1]),bn=dr,Rt({type:"drag",x:dr[0]+rt[0],y:dr[1]+rt[1],dx:Gn,dy:pr}))}function $n(){Ae(Nt,It)&&($t.on(Le+Xt,null).on(Qe+Xt,null),en(Ft),Rt({type:"dragend"}))}rt=O?[(rt=O.apply(dt,arguments)).x-bn[0],rt.y-bn[1]]:[0,0],Rt({type:"dragstart"})}}return $.origin=function(me){return arguments.length?(O=me,$):O},i.rebind($,ge,"on")},i.touches=function(ge,O){return arguments.length<2&&(O=q().touches),O?b(O).map(function(j){var U=ht(ge,j);return U.identifier=j.identifier,U}):[]};var Bt=1e-6,gn=Math.PI,hn=2*gn,We=hn-Bt,it=gn/2,qt=gn/180,Ge=180/gn;function Pe(ge){return ge>1?it:ge<-1?-it:Math.asin(ge)}function Ee(ge){return((ge=Math.exp(ge))+1/ge)/2}var Ne=Math.SQRT2;i.interpolateZoom=function(ge,O){var j,U,$=ge[0],le=ge[1],me=ge[2],Le=O[2],Qe=O[0]-$,rt=O[1]-le,dt=Qe*Qe+rt*rt;if(dt<1e-12)U=Math.log(Le/me)/Ne,j=function(Xt){return[$+Xt*Qe,le+Xt*rt,me*Math.exp(Ne*Xt*U)]};else{var Pt=Math.sqrt(dt),Nt=(Le*Le-me*me+4*dt)/(2*me*2*Pt),Rt=(Le*Le-me*me-4*dt)/(2*Le*2*Pt),Ft=Math.log(Math.sqrt(Nt*Nt+1)-Nt),It=Math.log(Math.sqrt(Rt*Rt+1)-Rt);U=(It-Ft)/Ne,j=function(Xt){var $t,$n,en=Xt*U,bn=Ee(Ft),Cn=me/(2*Pt)*(bn*($t=Ne*en+Ft,(($t=Math.exp(2*$t))-1)/($t+1))-($n=Ft,(($n=Math.exp($n))-1/$n)/2));return[$+Cn*Qe,le+Cn*rt,me*bn/Ee(Ne*en+Ft)]}}return j.duration=1e3*U,j},i.behavior.zoom=function(){var ge,O,j,U,$,le,me,Ae,De,Le={x:0,y:0,k:1},Qe=[960,500],rt=bt,dt=250,Pt=0,Nt="mousedown.zoom",Rt="mousemove.zoom",Ft="mouseup.zoom",It="touchstart.zoom",Xt=re($t,"zoomstart","zoom","zoomend");function $t(lr){lr.on(Nt,wr).on(Ke+".zoom",Mi).on("dblclick.zoom",Wi).on(It,fi)}function en(lr){return[(lr[0]-Le.x)/Le.k,(lr[1]-Le.y)/Le.k]}function bn(lr){Le.k=Math.max(rt[0],Math.min(rt[1],lr))}function Cn(lr,Ur){var ki;Le.x+=lr[0]-(Ur=[(ki=Ur)[0]*Le.k+Le.x,ki[1]*Le.k+Le.y])[0],Le.y+=lr[1]-Ur[1]}function $n(lr,Ur,ki,vi){lr.__chart__={x:Le.x,y:Le.y,k:Le.k},bn(Math.pow(2,vi)),Cn(O=Ur,ki),lr=i.select(lr),dt>0&&(lr=lr.transition().duration(dt)),lr.call($t.event)}function Gn(){me&&me.domain(le.range().map(function(lr){return(lr-Le.x)/Le.k}).map(le.invert)),De&&De.domain(Ae.range().map(function(lr){return(lr-Le.y)/Le.k}).map(Ae.invert))}function pr(lr){Pt++||lr({type:"zoomstart"})}function dr(lr){Gn(),lr({type:"zoom",scale:Le.k,translate:[Le.x,Le.y]})}function Er(lr){--Pt||(lr({type:"zoomend"}),O=null)}function wr(){var lr=this,Ur=Xt.of(lr,arguments),ki=0,vi=i.select(u(lr)).on(Rt,da).on(Ft,Ii),Oi=en(i.mouse(lr)),$i=Ht(lr);function da(){ki=1,Cn(i.mouse(lr),Oi),dr(Ur)}function Ii(){vi.on(Rt,null).on(Ft,null),$i(ki),Er(Ur)}Ac.call(lr),pr(Ur)}function fi(){var lr,Ur=this,ki=Xt.of(Ur,arguments),vi={},Oi=0,$i=".zoom-"+i.event.changedTouches[0].identifier,da="touchmove"+$i,Ii="touchend"+$i,sa=[],ta=i.select(Ur),na=Ht(Ur);function aa(){var Oo=i.touches(Ur);return lr=Le.k,Oo.forEach(function(No){No.identifier in vi&&(vi[No.identifier]=en(No))}),Oo}function ha(){var Oo=i.event.target;i.select(Oo).on(da,Ca).on(Ii,fo),sa.push(Oo);for(var No=i.event.changedTouches,xo=0,wo=No.length;xo<wo;++xo)vi[No[xo].identifier]=null;var $o=aa(),wl=Date.now();if(1===$o.length){if(wl-$<500){var Ns=$o[0];$n(Ur,Ns,vi[Ns.identifier],Math.floor(Math.log(Le.k)/Math.LN2)+1),K()}$=wl}else if($o.length>1){var Wl=$o[1],fc=(Ns=$o[0])[0]-Wl[0],Ta=Ns[1]-Wl[1];Oi=fc*fc+Ta*Ta}}function Ca(){var Oo,No,xo,wo,$o=i.touches(Ur);Ac.call(Ur);for(var wl=0,Ns=$o.length;wl<Ns;++wl,wo=null)if(wo=vi[(xo=$o[wl]).identifier]){if(No)break;Oo=xo,No=wo}if(wo){var Wl=(Wl=xo[0]-Oo[0])*Wl+(Wl=xo[1]-Oo[1])*Wl,fc=Oi&&Math.sqrt(Wl/Oi);Oo=[(Oo[0]+xo[0])/2,(Oo[1]+xo[1])/2],No=[(No[0]+wo[0])/2,(No[1]+wo[1])/2],bn(fc*lr)}$=null,Cn(Oo,No),dr(ki)}function fo(){if(i.event.touches.length){for(var Oo=i.event.changedTouches,No=0,xo=Oo.length;No<xo;++No)delete vi[Oo[No].identifier];for(var wo in vi)return void aa()}i.selectAll(sa).on($i,null),ta.on(Nt,wr).on(It,fi),na(),Er(ki)}ha(),pr(ki),ta.on(Nt,null).on(It,ha)}function Mi(){var lr=Xt.of(this,arguments);U?clearTimeout(U):(Ac.call(this),ge=en(O=j||i.mouse(this)),pr(lr)),U=setTimeout(function(){U=null,Er(lr)},50),K(),bn(Math.pow(2,.002*Ve())*Le.k),Cn(O,ge),dr(lr)}function Wi(){var lr=i.mouse(this),Ur=Math.log(Le.k)/Math.LN2;$n(this,lr,en(lr),i.event.shiftKey?Math.ceil(Ur)-1:Math.floor(Ur)+1)}return Ke||(Ke="onwheel"in p?(Ve=function(){return-i.event.deltaY*(i.event.deltaMode?120:1)},"wheel"):"onmousewheel"in p?(Ve=function(){return i.event.wheelDelta},"mousewheel"):(Ve=function(){return-i.event.detail},"MozMousePixelScroll")),$t.event=function(lr){lr.each(function(){var Ur=Xt.of(this,arguments),ki=Le;xl?i.select(this).transition().each("start.zoom",function(){Le=this.__chart__||{x:0,y:0,k:1},pr(Ur)}).tween("zoom:zoom",function(){var vi=Qe[0],$i=O?O[0]:vi/2,da=O?O[1]:Qe[1]/2,Ii=i.interpolateZoom([($i-Le.x)/Le.k,(da-Le.y)/Le.k,vi/Le.k],[($i-ki.x)/ki.k,(da-ki.y)/ki.k,vi/ki.k]);return function(sa){var ta=Ii(sa),na=vi/ta[2];this.__chart__=Le={x:$i-ta[0]*na,y:da-ta[1]*na,k:na},dr(Ur)}}).each("interrupt.zoom",function(){Er(Ur)}).each("end.zoom",function(){Er(Ur)}):(this.__chart__=Le,pr(Ur),dr(Ur),Er(Ur))})},$t.translate=function(lr){return arguments.length?(Le={x:+lr[0],y:+lr[1],k:Le.k},Gn(),$t):[Le.x,Le.y]},$t.scale=function(lr){return arguments.length?(Le={x:Le.x,y:Le.y,k:null},bn(+lr),Gn(),$t):Le.k},$t.scaleExtent=function(lr){return arguments.length?(rt=null==lr?bt:[+lr[0],+lr[1]],$t):rt},$t.center=function(lr){return arguments.length?(j=lr&&[+lr[0],+lr[1]],$t):j},$t.size=function(lr){return arguments.length?(Qe=lr&&[+lr[0],+lr[1]],$t):Qe},$t.duration=function(lr){return arguments.length?(dt=+lr,$t):dt},$t.x=function(lr){return arguments.length?(me=lr,le=lr.copy(),Le={x:0,y:0,k:1},$t):me},$t.y=function(lr){return arguments.length?(De=lr,Ae=lr.copy(),Le={x:0,y:0,k:1},$t):De},i.rebind($t,Xt,"on")};var Ve,Ke,bt=[0,1/0];function gt(){}function pt(ge,O,j){return this instanceof pt?(this.h=+ge,this.s=+O,void(this.l=+j)):arguments.length<2?ge instanceof pt?new pt(ge.h,ge.s,ge.l):Mn(""+ge,Pn,pt):new pt(ge,O,j)}i.color=gt,gt.prototype.toString=function(){return this.rgb()+""},i.hsl=pt;var St=pt.prototype=new gt;function jt(ge,O,j){var U,$;function le(me){return Math.round(255*((Ae=me)>360?Ae-=360:Ae<0&&(Ae+=360),Ae<60?U+($-U)*Ae/60:Ae<180?$:Ae<240?U+($-U)*(240-Ae)/60:U));var Ae}return ge=isNaN(ge)?0:(ge%=360)<0?ge+360:ge,O=isNaN(O)||O<0?0:O>1?1:O,U=2*(j=j<0?0:j>1?1:j)-($=j<=.5?j*(1+O):j+O-j*O),new tn(le(ge+120),le(ge),le(ge-120))}function Lt(ge,O,j){return this instanceof Lt?(this.h=+ge,this.c=+O,void(this.l=+j)):arguments.length<2?ge instanceof Lt?new Lt(ge.h,ge.c,ge.l):Ue(ge instanceof Wt?ge.l:(ge=sn((ge=i.rgb(ge)).r,ge.g,ge.b)).l,ge.a,ge.b):new Lt(ge,O,j)}St.brighter=function(ge){return ge=Math.pow(.7,arguments.length?ge:1),new pt(this.h,this.s,this.l/ge)},St.darker=function(ge){return ge=Math.pow(.7,arguments.length?ge:1),new pt(this.h,this.s,ge*this.l)},St.rgb=function(){return jt(this.h,this.s,this.l)},i.hcl=Lt;var Vt=Lt.prototype=new gt;function mt(ge,O,j){return isNaN(ge)&&(ge=0),isNaN(O)&&(O=0),new Wt(j,Math.cos(ge*=qt)*O,Math.sin(ge)*O)}function Wt(ge,O,j){return this instanceof Wt?(this.l=+ge,this.a=+O,void(this.b=+j)):arguments.length<2?ge instanceof Wt?new Wt(ge.l,ge.a,ge.b):ge instanceof Lt?mt(ge.h,ge.c,ge.l):sn((ge=tn(ge)).r,ge.g,ge.b):new Wt(ge,O,j)}Vt.brighter=function(ge){return new Lt(this.h,this.c,Math.min(100,this.l+Kt*(arguments.length?ge:1)))},Vt.darker=function(ge){return new Lt(this.h,this.c,Math.max(0,this.l-Kt*(arguments.length?ge:1)))},Vt.rgb=function(){return mt(this.h,this.c,this.l).rgb()},i.lab=Wt;var Kt=18,rn=Wt.prototype=new gt;function Yt(ge,O,j){var U=(ge+16)/116,$=U+O/500,le=U-j/200;return new tn(Zt(3.2404542*($=.95047*wt($))-1.5371385*(U=1*wt(U))-.4985314*(le=1.08883*wt(le))),Zt(-.969266*$+1.8760108*U+.041556*le),Zt(.0556434*$-.2040259*U+1.0572252*le))}function Ue(ge,O,j){return ge>0?new Lt(Math.atan2(j,O)*Ge,Math.sqrt(O*O+j*j),ge):new Lt(NaN,NaN,ge)}function wt(ge){return ge>.206893034?ge*ge*ge:(ge-4/29)/7.787037}function Ut(ge){return ge>.008856?Math.pow(ge,1/3):7.787037*ge+4/29}function Zt(ge){return Math.round(255*(ge<=.00304?12.92*ge:1.055*Math.pow(ge,1/2.4)-.055))}function tn(ge,O,j){return this instanceof tn?(this.r=~~ge,this.g=~~O,void(this.b=~~j)):arguments.length<2?ge instanceof tn?new tn(ge.r,ge.g,ge.b):Mn(""+ge,tn,jt):new tn(ge,O,j)}function un(ge){return new tn(ge>>16,ge>>8&255,255&ge)}function vn(ge){return un(ge)+""}rn.brighter=function(ge){return new Wt(Math.min(100,this.l+Kt*(arguments.length?ge:1)),this.a,this.b)},rn.darker=function(ge){return new Wt(Math.max(0,this.l-Kt*(arguments.length?ge:1)),this.a,this.b)},rn.rgb=function(){return Yt(this.l,this.a,this.b)},i.rgb=tn;var Qt=tn.prototype=new gt;function yn(ge){return ge<16?"0"+Math.max(0,ge).toString(16):Math.min(255,ge).toString(16)}function Mn(ge,O,j){var U,$,le,me=0,Ae=0,De=0;if(U=/([a-z]+)\((.*)\)/.exec(ge=ge.toLowerCase()))switch($=U[2].split(","),U[1]){case"hsl":return j(parseFloat($[0]),parseFloat($[1])/100,parseFloat($[2])/100);case"rgb":return O(Rn($[0]),Rn($[1]),Rn($[2]))}return(le=Ln.get(ge))?O(le.r,le.g,le.b):(null==ge||"#"!==ge.charAt(0)||isNaN(le=parseInt(ge.slice(1),16))||(4===ge.length?(me=(3840&le)>>4,me|=me>>4,Ae=240&le,Ae|=Ae>>4,De=15&le,De|=De<<4):7===ge.length&&(me=(16711680&le)>>16,Ae=(65280&le)>>8,De=255&le)),O(me,Ae,De))}function Pn(ge,O,j){var U,$,le=Math.min(ge/=255,O/=255,j/=255),me=Math.max(ge,O,j),Ae=me-le,De=(me+le)/2;return Ae?($=De<.5?Ae/(me+le):Ae/(2-me-le),U=ge==me?(O-j)/Ae+(O<j?6:0):O==me?(j-ge)/Ae+2:(ge-O)/Ae+4,U*=60):(U=NaN,$=De>0&&De<1?0:U),new pt(U,$,De)}function sn(ge,O,j){var U=Ut((.4124564*(ge=In(ge))+.3575761*(O=In(O))+.1804375*(j=In(j)))/.95047),$=Ut((.2126729*ge+.7151522*O+.072175*j)/1);return Wt(116*$-16,500*(U-$),200*($-Ut((.0193339*ge+.119192*O+.9503041*j)/1.08883)))}function In(ge){return(ge/=255)<=.04045?ge/12.92:Math.pow((ge+.055)/1.055,2.4)}function Rn(ge){var O=parseFloat(ge);return"%"===ge.charAt(ge.length-1)?Math.round(2.55*O):O}Qt.brighter=function(ge){ge=Math.pow(.7,arguments.length?ge:1);var O=this.r,j=this.g,U=this.b,$=30;return O||j||U?(O&&O<$&&(O=$),j&&j<$&&(j=$),U&&U<$&&(U=$),new tn(Math.min(255,O/ge),Math.min(255,j/ge),Math.min(255,U/ge))):new tn($,$,$)},Qt.darker=function(ge){return new tn((ge=Math.pow(.7,arguments.length?ge:1))*this.r,ge*this.g,ge*this.b)},Qt.hsl=function(){return Pn(this.r,this.g,this.b)},Qt.toString=function(){return"#"+yn(this.r)+yn(this.g)+yn(this.b)};var Ln=i.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function qn(ge){return"function"==typeof ge?ge:function(){return ge}}function nr(ge){return function(O,j,U){return 2===arguments.length&&"function"==typeof j&&(U=j,j=null),rr(O,j,ge,U)}}function rr(ge,O,j,U){var Qe,$={},le=i.dispatch("beforesend","progress","load","error"),me={},Ae=new XMLHttpRequest,De=null;function Le(){var Qe,dt,Pt,rt=Ae.status;if(!rt&&((Pt=(dt=Ae).responseType)&&"text"!==Pt?dt.response:dt.responseText)||rt>=200&&rt<300||304===rt){try{Qe=j.call($,Ae)}catch(dt){return void le.error.call($,dt)}le.load.call($,Qe)}else le.error.call($,Ae)}return self.XDomainRequest&&!("withCredentials"in Ae)&&/^(http(s)?:)?\/\//.test(ge)&&(Ae=new XDomainRequest),"onload"in Ae?Ae.onload=Ae.onerror=Le:Ae.onreadystatechange=function(){Ae.readyState>3&&Le()},Ae.onprogress=function(Qe){var rt=i.event;i.event=Qe;try{le.progress.call($,Ae)}finally{i.event=rt}},$.header=function(Qe,rt){return Qe=(Qe+"").toLowerCase(),arguments.length<2?me[Qe]:(null==rt?delete me[Qe]:me[Qe]=rt+"",$)},$.mimeType=function(Qe){return arguments.length?(O=null==Qe?null:Qe+"",$):O},$.responseType=function(Qe){return arguments.length?(De=Qe,$):De},$.response=function(Qe){return j=Qe,$},["get","post"].forEach(function(Qe){$[Qe]=function(){return $.send.apply($,[Qe].concat(b(arguments)))}}),$.send=function(Qe,rt,dt){if(2===arguments.length&&"function"==typeof rt&&(dt=rt,rt=null),Ae.open(Qe,ge,!0),null==O||"accept"in me||(me.accept=O+",*/*"),Ae.setRequestHeader)for(var Pt in me)Ae.setRequestHeader(Pt,me[Pt]);return null!=O&&Ae.overrideMimeType&&Ae.overrideMimeType(O),null!=De&&(Ae.responseType=De),null!=dt&&$.on("error",dt).on("load",function(Nt){dt(null,Nt)}),le.beforesend.call($,Ae),Ae.send(null==rt?null:rt),$},$.abort=function(){return Ae.abort(),$},i.rebind($,le,"on"),null==U?$:$.get(1===(Qe=U).length?function(rt,dt){Qe(null==rt?dt:null)}:Qe)}Ln.forEach(function(ge,O){Ln.set(ge,un(O))}),i.functor=qn,i.xhr=nr(B),i.dsv=function(ge,O){var j=new RegExp('["'+ge+"\n]"),U=ge.charCodeAt(0);function $(Le,Qe,rt){arguments.length<3&&(rt=Qe,Qe=null);var dt=rr(Le,O,null==Qe?le:me(Qe),rt);return dt.row=function(Pt){return arguments.length?dt.response(null==(Qe=Pt)?le:me(Pt)):Qe},dt}function le(Le){return $.parse(Le.responseText)}function me(Le){return function(Qe){return $.parse(Qe.responseText,Le)}}function Ae(Le){return Le.map(De).join(ge)}function De(Le){return j.test(Le)?'"'+Le.replace(/\"/g,'""')+'"':Le}return $.parse=function(Le,Qe){var rt;return $.parseRows(Le,function(dt,Pt){if(rt)return rt(dt,Pt-1);var Nt=function(Rt){for(var Ft={},It=dt.length,Xt=0;Xt<It;++Xt)Ft[dt[Xt]]=Rt[Xt];return Ft};rt=Qe?function(Rt,Ft){return Qe(Nt(Rt),Ft)}:Nt})},$.parseRows=function(Le,Qe){var rt,dt,Pt={},Nt={},Rt=[],Ft=Le.length,It=0,Xt=0;function $t(){if(It>=Ft)return Nt;if(dt)return dt=!1,Pt;var bn=It;if(34===Le.charCodeAt(bn)){for(var Cn=bn;Cn++<Ft;)if(34===Le.charCodeAt(Cn)){if(34!==Le.charCodeAt(Cn+1))break;++Cn}return It=Cn+2,13===($n=Le.charCodeAt(Cn+1))?(dt=!0,10===Le.charCodeAt(Cn+2)&&++It):10===$n&&(dt=!0),Le.slice(bn+1,Cn).replace(/""/g,'"')}for(;It<Ft;){var $n,Gn=1;if(10===($n=Le.charCodeAt(It++)))dt=!0;else if(13===$n)dt=!0,10===Le.charCodeAt(It)&&(++It,++Gn);else if($n!==U)continue;return Le.slice(bn,It-Gn)}return Le.slice(bn)}for(;(rt=$t())!==Nt;){for(var en=[];rt!==Pt&&rt!==Nt;)en.push(rt),rt=$t();Qe&&null==(en=Qe(en,Xt++))||Rt.push(en)}return Rt},$.format=function(Le){if(Array.isArray(Le[0]))return $.formatRows(Le);var Qe=new N,rt=[];return Le.forEach(function(dt){for(var Pt in dt)Qe.has(Pt)||rt.push(Qe.add(Pt))}),[rt.map(De).join(ge)].concat(Le.map(function(dt){return rt.map(function(Pt){return De(dt[Pt])}).join(ge)})).join("\n")},$.formatRows=function(Le){return Le.map(Ae).join("\n")},$},i.csv=i.dsv(",","text/csv"),i.tsv=i.dsv("\t","text/tab-separated-values");var gr,jr,kr,er,Xr=this[Y(this,"requestAnimationFrame")]||function(ge){setTimeout(ge,17)};function ir(ge,O,j){var U=arguments.length;U<2&&(O=0),U<3&&(j=Date.now());var le={c:ge,t:j+O,n:null};return jr?jr.n=le:gr=le,jr=le,kr||(er=clearTimeout(er),kr=1,Xr(Bn)),le}function Bn(){var ge=mr(),O=zr()-ge;O>24?(isFinite(O)&&(clearTimeout(er),er=setTimeout(Bn,O)),kr=0):(kr=1,Xr(Bn))}function mr(){for(var ge=Date.now(),O=gr;O;)ge>=O.t&&O.c(ge-O.t)&&(O.c=null),O=O.n;return ge}function zr(){for(var ge,O=gr,j=1/0;O;)O.c?(O.t<j&&(j=O.t),O=(ge=O).n):O=ge?ge.n=O.n:gr=O.n;return jr=ge,j}function br(ge){return ge[0]}function Dr(ge){return ge[1]}function di(ge){for(var O,j,U,$=ge.length,le=[0,1],me=2,Ae=2;Ae<$;Ae++){for(;me>1&&((j=ge[le[me-1]])[0]-(O=ge[le[me-2]])[0])*((U=ge[Ae])[1]-O[1])-(j[1]-O[1])*(U[0]-O[0])<=0;)--me;le[me++]=Ae}return le.slice(0,me)}function ni(ge,O){return ge[0]-O[0]||ge[1]-O[1]}i.timer=function(){ir.apply(this,arguments)},i.timer.flush=function(){mr(),zr()},i.round=function(ge,O){return O?Math.round(ge*(O=Math.pow(10,O)))/O:Math.round(ge)},i.geom={},i.geom.hull=function(ge){var O=br,j=Dr;if(arguments.length)return U(ge);function U($){if($.length<3)return[];var le,me=qn(O),Ae=qn(j),De=$.length,Le=[],Qe=[];for(le=0;le<De;le++)Le.push([+me.call(this,$[le],le),+Ae.call(this,$[le],le),le]);for(Le.sort(ni),le=0;le<De;le++)Qe.push([Le[le][0],-Le[le][1]]);var rt=di(Le),dt=di(Qe),Pt=dt[0]===rt[0],Nt=dt[dt.length-1]===rt[rt.length-1],Rt=[];for(le=rt.length-1;le>=0;--le)Rt.push($[Le[rt[le]][2]]);for(le=+Pt;le<dt.length-Nt;++le)Rt.push($[Le[dt[le]][2]]);return Rt}return U.x=function($){return arguments.length?(O=$,U):O},U.y=function($){return arguments.length?(j=$,U):j},U},i.geom.polygon=function(ge){return W(ge,pi),ge};var pi=i.geom.polygon.prototype=[];function qi(ge,O,j){return(j[0]-O[0])*(ge[1]-O[1])<(j[1]-O[1])*(ge[0]-O[0])}function Ct(ge,O,j,U){var $=ge[0],le=j[0],me=O[0]-$,Ae=U[0]-le,De=ge[1],Le=j[1],Qe=O[1]-De,rt=U[1]-Le,dt=(Ae*(De-Le)-rt*($-le))/(rt*me-Ae*Qe);return[$+dt*me,De+dt*Qe]}function mn(ge){var O=ge[0],j=ge[ge.length-1];return!(O[0]-j[0]||O[1]-j[1])}pi.area=function(){for(var ge,O=-1,j=this.length,U=this[j-1],$=0;++O<j;)$+=(ge=U)[1]*(U=this[O])[0]-ge[0]*U[1];return.5*$},pi.centroid=function(ge){var O,j,U=-1,$=this.length,le=0,me=0,Ae=this[$-1];for(arguments.length||(ge=-1/(6*this.area()));++U<$;)le+=((O=Ae)[0]+(Ae=this[U])[0])*(j=O[0]*Ae[1]-Ae[0]*O[1]),me+=(O[1]+Ae[1])*j;return[le*ge,me*ge]},pi.clip=function(ge){for(var O,j,U,$,le,me,Ae=mn(ge),De=-1,Le=this.length-mn(this),Qe=this[Le-1];++De<Le;){for(O=ge.slice(),ge.length=0,$=this[De],le=O[(U=O.length-Ae)-1],j=-1;++j<U;)qi(me=O[j],Qe,$)?(qi(le,Qe,$)||ge.push(Ct(le,me,Qe,$)),ge.push(me)):qi(le,Qe,$)&&ge.push(Ct(le,me,Qe,$)),le=me;Ae&&ge.push(ge[0]),Qe=$}return ge};var pn,Sn,Zn,fr,Hn,Dn=[],Jn=[];function Nn(){Ha(this),this.edge=this.site=this.circle=null}function Un(ge){var O=Dn.pop()||new Nn;return O.site=ge,O}function sr(ge){Ai(ge),Zn.remove(ge),Dn.push(ge),Ha(ge)}function Wr(ge){var O=ge.circle,j=O.x,U=O.cy,$={x:j,y:U},le=ge.P,me=ge.N,Ae=[ge];sr(ge);for(var De=le;De.circle&&x(j-De.circle.x)<Bt&&x(U-De.circle.cy)<Bt;)le=De.P,Ae.unshift(De),sr(De),De=le;Ae.unshift(De),Ai(De);for(var Le=me;Le.circle&&x(j-Le.circle.x)<Bt&&x(U-Le.circle.cy)<Bt;)me=Le.N,Ae.push(Le),sr(Le),Le=me;Ae.push(Le),Ai(Le);var Qe,rt=Ae.length;for(Qe=1;Qe<rt;++Qe)Fi((Le=Ae[Qe]).edge,(De=Ae[Qe-1]).site,Le.site,$);(Le=Ae[rt-1]).edge=Lr((De=Ae[0]).site,Le.site,null,$),ci(De),ci(Le)}function Vr(ge){for(var O,j,U,$,le=ge.x,me=ge.y,Ae=Zn._;Ae;)if((U=Zr(Ae,me)-le)>Bt)Ae=Ae.L;else{if(!(($=le-Or(Ae,me))>Bt)){U>-Bt?(O=Ae.P,j=Ae):$>-Bt?(O=Ae,j=Ae.N):O=j=Ae;break}if(!Ae.R){O=Ae;break}Ae=Ae.R}var De=Un(ge);if(Zn.insert(O,De),O||j){if(O===j)return Ai(O),j=Un(O.site),Zn.insert(De,j),De.edge=j.edge=Lr(O.site,De.site),ci(O),void ci(j);if(j){Ai(O),Ai(j);var Le=O.site,Qe=Le.x,rt=Le.y,dt=ge.x-Qe,Pt=ge.y-rt,Nt=j.site,Rt=Nt.x-Qe,Ft=Nt.y-rt,It=2*(dt*Ft-Pt*Rt),Xt=dt*dt+Pt*Pt,$t=Rt*Rt+Ft*Ft,en={x:(Ft*Xt-Pt*$t)/It+Qe,y:(dt*$t-Rt*Xt)/It+rt};Fi(j.edge,Le,Nt,en),De.edge=Lr(Le,ge,null,en),j.edge=Lr(ge,Nt,null,en),ci(O),ci(j)}else De.edge=Lr(O.site,De.site)}}function Zr(ge,O){var j=ge.site,U=j.x,$=j.y,le=$-O;if(!le)return U;var me=ge.P;if(!me)return-1/0;var Ae=(j=me.site).x,De=j.y,Le=De-O;if(!Le)return Ae;var Qe=Ae-U,rt=1/le-1/Le,dt=Qe/Le;return rt?(-dt+Math.sqrt(dt*dt-2*rt*(Qe*Qe/(-2*Le)-De+Le/2+$-le/2)))/rt+U:(U+Ae)/2}function Or(ge,O){var j=ge.N;if(j)return Zr(j,O);var U=ge.site;return U.y===O?U.x:1/0}function $r(ge){this.site=ge,this.edges=[]}function Ji(ge,O){return O.angle-ge.angle}function Bi(){Ha(this),this.x=this.y=this.arc=this.site=this.cy=null}function ci(ge){var O=ge.P,j=ge.N;if(O&&j){var U=O.site,$=ge.site,le=j.site;if(U!==le){var me=$.x,Ae=$.y,De=U.x-me,Le=U.y-Ae,Qe=le.x-me,rt=2*(De*(Ft=le.y-Ae)-Le*Qe);if(!(rt>=-1e-12)){var dt=De*De+Le*Le,Pt=Qe*Qe+Ft*Ft,Nt=(Ft*dt-Le*Pt)/rt,Rt=(De*Pt-Qe*dt)/rt,Ft=Rt+Ae,It=Jn.pop()||new Bi;It.arc=ge,It.site=$,It.x=Nt+me,It.y=Ft+Math.sqrt(Nt*Nt+Rt*Rt),It.cy=Ft,ge.circle=It;for(var Xt=null,$t=Hn._;$t;)if(It.y<$t.y||It.y===$t.y&&It.x<=$t.x){if(!$t.L){Xt=$t.P;break}$t=$t.L}else{if(!$t.R){Xt=$t;break}$t=$t.R}Hn.insert(Xt,It),Xt||(fr=It)}}}}function Ai(ge){var O=ge.circle;O&&(O.P||(fr=O.N),Hn.remove(O),Jn.push(O),Ha(O),ge.circle=null)}function wi(ge,O){var j=ge.b;if(j)return!0;var U,$,le=ge.a,me=O[0][0],Ae=O[1][0],De=O[0][1],Le=O[1][1],Qe=ge.l,rt=ge.r,dt=Qe.x,Pt=Qe.y,Nt=rt.x,Rt=rt.y,Ft=(dt+Nt)/2;if(Rt===Pt){if(Ft<me||Ft>=Ae)return;if(dt>Nt){if(le){if(le.y>=Le)return}else le={x:Ft,y:De};j={x:Ft,y:Le}}else{if(le){if(le.y<De)return}else le={x:Ft,y:Le};j={x:Ft,y:De}}}else if($=(Pt+Rt)/2-(U=(dt-Nt)/(Rt-Pt))*Ft,U<-1||U>1)if(dt>Nt){if(le){if(le.y>=Le)return}else le={x:(De-$)/U,y:De};j={x:(Le-$)/U,y:Le}}else{if(le){if(le.y<De)return}else le={x:(Le-$)/U,y:Le};j={x:(De-$)/U,y:De}}else if(Pt<Rt){if(le){if(le.x>=Ae)return}else le={x:me,y:U*me+$};j={x:Ae,y:U*Ae+$}}else{if(le){if(le.x<me)return}else le={x:Ae,y:U*Ae+$};j={x:me,y:U*me+$}}return ge.a=le,ge.b=j,!0}function Ri(ge,O){this.l=ge,this.r=O,this.a=this.b=null}function Lr(ge,O,j,U){var $=new Ri(ge,O);return pn.push($),j&&Fi($,ge,O,j),U&&Fi($,O,ge,U),Sn[ge.i].edges.push(new ga($,ge,O)),Sn[O.i].edges.push(new ga($,O,ge)),$}function vr(ge,O,j){var U=new Ri(ge,null);return U.a=O,U.b=j,pn.push(U),U}function Fi(ge,O,j,U){ge.a||ge.b?ge.l===j?ge.b=U:ge.a=U:(ge.a=U,ge.l=O,ge.r=j)}function ga(ge,O,j){var U=ge.a,$=ge.b;this.edge=ge,this.site=O,this.angle=j?Math.atan2(j.y-O.y,j.x-O.x):ge.l===O?Math.atan2($.x-U.x,U.y-$.y):Math.atan2(U.x-$.x,$.y-U.y)}function Do(){this._=null}function Ha(ge){ge.U=ge.C=ge.L=ge.R=ge.P=ge.N=null}function Xa(ge,O){var j=O,U=O.R,$=j.U;$?$.L===j?$.L=U:$.R=U:ge._=U,U.U=$,j.U=U,j.R=U.L,j.R&&(j.R.U=j),U.L=j}function _a(ge,O){var j=O,U=O.L,$=j.U;$?$.L===j?$.L=U:$.R=U:ge._=U,U.U=$,j.U=U,j.L=U.R,j.L&&(j.L.U=j),U.R=j}function ya(ge){for(;ge.L;)ge=ge.L;return ge}function Ti(ge,O){var j,U,$,le=ge.sort(pa).pop();for(pn=[],Sn=new Array(ge.length),Zn=new Do,Hn=new Do;;)if($=fr,le&&(!$||le.y<$.y||le.y===$.y&&le.x<$.x))le.x===j&&le.y===U||(Sn[le.i]=new $r(le),Vr(le),j=le.x,U=le.y),le=ge.pop();else{if(!$)break;Wr($.arc)}O&&(function(Ae){for(var De,Le,Qe,rt,dt,Pt=pn,Nt=(Le=Ae[0][0],Qe=Ae[0][1],rt=Ae[1][0],dt=Ae[1][1],function(Ft){var It,Xt=Ft.a,$t=Ft.b,en=Xt.x,bn=Xt.y,Cn=0,$n=1,Gn=$t.x-en,pr=$t.y-bn;if(It=Le-en,Gn||!(It>0)){if(It/=Gn,Gn<0){if(It<Cn)return;It<$n&&($n=It)}else if(Gn>0){if(It>$n)return;It>Cn&&(Cn=It)}if(It=rt-en,Gn||!(It<0)){if(It/=Gn,Gn<0){if(It>$n)return;It>Cn&&(Cn=It)}else if(Gn>0){if(It<Cn)return;It<$n&&($n=It)}if(It=Qe-bn,pr||!(It>0)){if(It/=pr,pr<0){if(It<Cn)return;It<$n&&($n=It)}else if(pr>0){if(It>$n)return;It>Cn&&(Cn=It)}if(It=dt-bn,pr||!(It<0)){if(It/=pr,pr<0){if(It>$n)return;It>Cn&&(Cn=It)}else if(pr>0){if(It<Cn)return;It<$n&&($n=It)}return Cn>0&&(Ft.a={x:en+Cn*Gn,y:bn+Cn*pr}),$n<1&&(Ft.b={x:en+$n*Gn,y:bn+$n*pr}),Ft}}}}}),Rt=Pt.length;Rt--;)(!wi(De=Pt[Rt],Ae)||!Nt(De)||x(De.a.x-De.b.x)<Bt&&x(De.a.y-De.b.y)<Bt)&&(De.a=De.b=null,Pt.splice(Rt,1))}(O),function(Ae){for(var De,Le,Qe,rt,dt,Pt,Nt,Rt,Ft,It,Xt=Ae[0][0],$t=Ae[1][0],en=Ae[0][1],bn=Ae[1][1],Cn=Sn,$n=Cn.length;$n--;)if((dt=Cn[$n])&&dt.prepare())for(Rt=(Nt=dt.edges).length,Pt=0;Pt<Rt;)Qe=(It=Nt[Pt].end()).x,rt=It.y,De=(Ft=Nt[++Pt%Rt].start()).x,Le=Ft.y,(x(Qe-De)>Bt||x(rt-Le)>Bt)&&(Nt.splice(Pt,0,new ga(vr(dt.site,It,x(Qe-Xt)<Bt&&bn-rt>Bt?{x:Xt,y:x(De-Xt)<Bt?Le:bn}:x(rt-bn)<Bt&&$t-Qe>Bt?{x:x(Le-bn)<Bt?De:$t,y:bn}:x(Qe-$t)<Bt&&rt-en>Bt?{x:$t,y:x(De-$t)<Bt?Le:en}:x(rt-en)<Bt&&Qe-Xt>Bt?{x:x(Le-en)<Bt?De:Xt,y:en}:null),dt.site,null)),++Rt)}(O));var me={cells:Sn,edges:pn};return Zn=Hn=pn=Sn=null,me}function pa(ge,O){return O.y-ge.y||O.x-ge.x}$r.prototype.prepare=function(){for(var ge,O=this.edges,j=O.length;j--;)(ge=O[j].edge).b&&ge.a||O.splice(j,1);return O.sort(Ji),O.length},ga.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Do.prototype={insert:function(ge,O){var j,U,$;if(ge){if(O.P=ge,O.N=ge.N,ge.N&&(ge.N.P=O),ge.N=O,ge.R){for(ge=ge.R;ge.L;)ge=ge.L;ge.L=O}else ge.R=O;j=ge}else this._?(ge=ya(this._),O.P=null,O.N=ge,ge.P=ge.L=O,j=ge):(O.P=O.N=null,this._=O,j=null);for(O.L=O.R=null,O.U=j,O.C=!0,ge=O;j&&j.C;)j===(U=j.U).L?($=U.R)&&$.C?(j.C=$.C=!1,U.C=!0,ge=U):(ge===j.R&&(Xa(this,j),j=(ge=j).U),j.C=!1,U.C=!0,_a(this,U)):($=U.L)&&$.C?(j.C=$.C=!1,U.C=!0,ge=U):(ge===j.L&&(_a(this,j),j=(ge=j).U),j.C=!1,U.C=!0,Xa(this,U)),j=ge.U;this._.C=!1},remove:function(ge){ge.N&&(ge.N.P=ge.P),ge.P&&(ge.P.N=ge.N),ge.N=ge.P=null;var O,j,U,$=ge.U,le=ge.L,me=ge.R;if(j=le?me?ya(me):le:me,$?$.L===ge?$.L=j:$.R=j:this._=j,le&&me?(U=j.C,j.C=ge.C,j.L=le,le.U=j,j!==me?($=j.U,j.U=ge.U,$.L=ge=j.R,j.R=me,me.U=j):(j.U=$,$=j,ge=j.R)):(U=ge.C,ge=j),ge&&(ge.U=$),!U)if(ge&&ge.C)ge.C=!1;else{do{if(ge===this._)break;if(ge===$.L){if((O=$.R).C&&(O.C=!1,$.C=!0,Xa(this,$),O=$.R),O.L&&O.L.C||O.R&&O.R.C){O.R&&O.R.C||(O.L.C=!1,O.C=!0,_a(this,O),O=$.R),O.C=$.C,$.C=O.R.C=!1,Xa(this,$),ge=this._;break}}else if((O=$.L).C&&(O.C=!1,$.C=!0,_a(this,$),O=$.L),O.L&&O.L.C||O.R&&O.R.C){O.L&&O.L.C||(O.R.C=!1,O.C=!0,Xa(this,O),O=$.L),O.C=$.C,$.C=O.L.C=!1,_a(this,$),ge=this._;break}O.C=!0,ge=$,$=$.U}while(!ge.C);ge&&(ge.C=!1)}}},i.geom.voronoi=function(ge){var O=br,j=Dr,U=O,$=j,le=Qa;if(ge)return me(ge);function me(De){var Le=new Array(De.length),Qe=le[0][0],rt=le[0][1],dt=le[1][0],Pt=le[1][1];return Ti(Ae(De),le).cells.forEach(function(Nt,Rt){var Ft=Nt.edges,It=Nt.site;(Le[Rt]=Ft.length?Ft.map(function(Xt){var $t=Xt.start();return[$t.x,$t.y]}):It.x>=Qe&&It.x<=dt&&It.y>=rt&&It.y<=Pt?[[Qe,Pt],[dt,Pt],[dt,rt],[Qe,rt]]:[]).point=De[Rt]}),Le}function Ae(De){return De.map(function(Le,Qe){return{x:Math.round(U(Le,Qe)/Bt)*Bt,y:Math.round($(Le,Qe)/Bt)*Bt,i:Qe}})}return me.links=function(De){return Ti(Ae(De)).edges.filter(function(Le){return Le.l&&Le.r}).map(function(Le){return{source:De[Le.l.i],target:De[Le.r.i]}})},me.triangles=function(De){var Le=[];return Ti(Ae(De)).cells.forEach(function(Qe,rt){for(var dt,Pt,Nt,Rt,Ft=Qe.site,It=Qe.edges.sort(Ji),Xt=-1,$t=It.length,en=It[$t-1].edge,bn=en.l===Ft?en.r:en.l;++Xt<$t;)dt=bn,bn=(en=It[Xt].edge).l===Ft?en.r:en.l,rt<dt.i&&rt<bn.i&&((Pt=Ft).x-(Rt=bn).x)*((Nt=dt).y-Pt.y)-(Pt.x-Nt.x)*(Rt.y-Pt.y)<0&&Le.push([De[rt],De[dt.i],De[bn.i]])}),Le},me.x=function(De){return arguments.length?(U=qn(O=De),me):O},me.y=function(De){return arguments.length?($=qn(j=De),me):j},me.clipExtent=function(De){return arguments.length?(le=null==De?Qa:De,me):le===Qa?null:le},me.size=function(De){return arguments.length?me.clipExtent(De&&[[0,0],De]):le===Qa?null:le&&le[1]},me};var Qa=[[-1e6,-1e6],[1e6,1e6]];function go(ge){return ge.x}function ts(ge){return ge.y}function Eo(ge,O,j,U,$,le){if(!ge(O,j,U,$,le)){var me=.5*(j+$),Ae=.5*(U+le),De=O.nodes;De[0]&&Eo(ge,De[0],j,U,me,Ae),De[1]&&Eo(ge,De[1],me,U,$,Ae),De[2]&&Eo(ge,De[2],j,Ae,me,le),De[3]&&Eo(ge,De[3],me,Ae,$,le)}}function Pa(ge,O,j,U,$,le,me){var Ae,De=1/0;return function Le(Qe,rt,dt,Pt,Nt){if(!(rt>le||dt>me||Pt<U||Nt<$)){if(Rt=Qe.point){var Rt,Ft=O-Qe.x,It=j-Qe.y,Xt=Ft*Ft+It*It;if(Xt<De){var $t=Math.sqrt(De=Xt);U=O-$t,$=j-$t,le=O+$t,me=j+$t,Ae=Rt}}for(var en=Qe.nodes,bn=.5*(rt+Pt),Cn=.5*(dt+Nt),$n=(j>=Cn)<<1|O>=bn,Gn=$n+4;$n<Gn;++$n)if(Qe=en[3&$n])switch(3&$n){case 0:Le(Qe,rt,dt,bn,Cn);break;case 1:Le(Qe,bn,dt,Pt,Cn);break;case 2:Le(Qe,rt,Cn,bn,Nt);break;case 3:Le(Qe,bn,Cn,Pt,Nt)}}}(ge,U,$,le,me),Ae}function eo(ge,O){ge=i.rgb(ge),O=i.rgb(O);var j=ge.r,U=ge.g,$=ge.b,le=O.r-j,me=O.g-U,Ae=O.b-$;return function(De){return"#"+yn(Math.round(j+le*De))+yn(Math.round(U+me*De))+yn(Math.round($+Ae*De))}}function Ss(ge,O){var j,U={},$={};for(j in ge)j in O?U[j]=hs(ge[j],O[j]):$[j]=ge[j];for(j in O)j in ge||($[j]=O[j]);return function(le){for(j in U)$[j]=U[j](le);return $}}function Co(ge,O){return ge=+ge,O=+O,function(j){return ge*(1-j)+O*j}}function ra(ge,O){var j,U,$,le=Us.lastIndex=Is.lastIndex=0,me=-1,Ae=[],De=[];for(ge+="",O+="";(j=Us.exec(ge))&&(U=Is.exec(O));)($=U.index)>le&&($=O.slice(le,$),Ae[me]?Ae[me]+=$:Ae[++me]=$),(j=j[0])===(U=U[0])?Ae[me]?Ae[me]+=U:Ae[++me]=U:(Ae[++me]=null,De.push({i:me,x:Co(j,U)})),le=Is.lastIndex;return le<O.length&&($=O.slice(le),Ae[me]?Ae[me]+=$:Ae[++me]=$),Ae.length<2?De[0]?(O=De[0].x,function(Le){return O(Le)+""}):function(){return O}:(O=De.length,function(Le){for(var Qe,rt=0;rt<O;++rt)Ae[(Qe=De[rt]).i]=Qe.x(Le);return Ae.join("")})}i.geom.delaunay=function(ge){return i.geom.voronoi().triangles(ge)},i.geom.quadtree=function(ge,O,j,U,$){var le,me=br,Ae=Dr;if(le=arguments.length)return me=go,Ae=ts,3===le&&($=j,U=O,j=O=0),De(ge);function De(Le){var Qe,rt,dt,Pt,Nt,Rt,Ft,It,Xt,$t=qn(me),en=qn(Ae);if(null!=O)Rt=O,Ft=j,It=U,Xt=$;else if(It=Xt=-(Rt=Ft=1/0),rt=[],dt=[],Nt=Le.length,le)for(Pt=0;Pt<Nt;++Pt)(Qe=Le[Pt]).x<Rt&&(Rt=Qe.x),Qe.y<Ft&&(Ft=Qe.y),Qe.x>It&&(It=Qe.x),Qe.y>Xt&&(Xt=Qe.y),rt.push(Qe.x),dt.push(Qe.y);else for(Pt=0;Pt<Nt;++Pt){var bn=+$t(Qe=Le[Pt],Pt),Cn=+en(Qe,Pt);bn<Rt&&(Rt=bn),Cn<Ft&&(Ft=Cn),bn>It&&(It=bn),Cn>Xt&&(Xt=Cn),rt.push(bn),dt.push(Cn)}var $n=It-Rt,Gn=Xt-Ft;function pr(wr,fi,Mi,Wi,lr,Ur,ki,vi){if(!isNaN(Mi)&&!isNaN(Wi))if(wr.leaf){var Oi=wr.x,$i=wr.y;if(null!=Oi)if(x(Oi-Mi)+x($i-Wi)<.01)dr(wr,fi,Mi,Wi,lr,Ur,ki,vi);else{var da=wr.point;wr.x=wr.y=wr.point=null,dr(wr,da,Oi,$i,lr,Ur,ki,vi),dr(wr,fi,Mi,Wi,lr,Ur,ki,vi)}else wr.x=Mi,wr.y=Wi,wr.point=fi}else dr(wr,fi,Mi,Wi,lr,Ur,ki,vi)}function dr(wr,fi,Mi,Wi,lr,Ur,ki,vi){var Oi=.5*(lr+ki),$i=.5*(Ur+vi),da=Mi>=Oi,Ii=Wi>=$i,sa=Ii<<1|da;wr.leaf=!1,da?lr=Oi:ki=Oi,Ii?Ur=$i:vi=$i,pr(wr=wr.nodes[sa]||(wr.nodes[sa]={leaf:!0,nodes:[],point:null,x:null,y:null}),fi,Mi,Wi,lr,Ur,ki,vi)}$n>Gn?Xt=Ft+$n:It=Rt+Gn;var Er={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(wr){pr(Er,wr,+$t(wr,++Pt),+en(wr,Pt),Rt,Ft,It,Xt)},visit:function(wr){Eo(wr,Er,Rt,Ft,It,Xt)},find:function(wr){return Pa(Er,wr[0],wr[1],Rt,Ft,It,Xt)}};if(Pt=-1,null==O){for(;++Pt<Nt;)pr(Er,Le[Pt],rt[Pt],dt[Pt],Rt,Ft,It,Xt);--Pt}else Le.forEach(Er.add);return rt=dt=Le=Qe=null,Er}return De.x=function(Le){return arguments.length?(me=Le,De):me},De.y=function(Le){return arguments.length?(Ae=Le,De):Ae},De.extent=function(Le){return arguments.length?(null==Le?O=j=U=$=null:(O=+Le[0][0],j=+Le[0][1],U=+Le[1][0],$=+Le[1][1]),De):null==O?null:[[O,j],[U,$]]},De.size=function(Le){return arguments.length?(null==Le?O=j=U=$=null:(O=j=0,U=+Le[0],$=+Le[1]),De):null==O?null:[U-O,$-j]},De},i.interpolateRgb=eo,i.interpolateObject=Ss,i.interpolateNumber=Co,i.interpolateString=ra;var Us=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Is=new RegExp(Us.source,"g");function hs(ge,O){for(var j,U=i.interpolators.length;--U>=0&&!(j=i.interpolators[U](ge,O)););return j}function mo(ge,O){var j,U=[],$=[],le=ge.length,me=O.length,Ae=Math.min(ge.length,O.length);for(j=0;j<Ae;++j)U.push(hs(ge[j],O[j]));for(;j<le;++j)$[j]=ge[j];for(;j<me;++j)$[j]=O[j];return function(De){for(j=0;j<Ae;++j)$[j]=U[j](De);return $}}i.interpolate=hs,i.interpolators=[function(ge,O){var j=typeof O;return("string"===j?Ln.has(O.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(O)?eo:ra:O instanceof gt?eo:Array.isArray(O)?mo:"object"===j&&isNaN(O)?Ss:Co)(ge,O)}],i.interpolateArray=mo;var uo=function(){return B},nu=i.map({linear:uo,poly:function(ge){return function(O){return Math.pow(O,ge)}},quad:function(){return xc},cubic:function(){return Lu},sin:function(){return mu},exp:function(){return sl},circle:function(){return Ps},elastic:function(ge,O){var j;return arguments.length<2&&(O=.45),arguments.length?j=O/hn*Math.asin(1/ge):(ge=1,j=O/4),function(U){return 1+ge*Math.pow(2,-10*U)*Math.sin((U-j)*hn/O)}},back:function(ge){return ge||(ge=1.70158),function(O){return O*O*((ge+1)*O-ge)}},bounce:function(){return Fo}}),ru=i.map({in:B,out:ao,"in-out":gu,"out-in":function(ge){return gu(ao(ge))}});function xa(ge){return function(O){return O<=0?0:O>=1?1:ge(O)}}function ao(ge){return function(O){return 1-ge(1-O)}}function gu(ge){return function(O){return.5*(O<.5?ge(2*O):2-ge(2-2*O))}}function xc(ge){return ge*ge}function Lu(ge){return ge*ge*ge}function Ru(ge){if(ge<=0)return 0;if(ge>=1)return 1;var O=ge*ge,j=O*ge;return 4*(ge<.5?j:3*(ge-O)+j-.75)}function mu(ge){return 1-Math.cos(ge*it)}function sl(ge){return Math.pow(2,10*(ge-1))}function Ps(ge){return 1-Math.sqrt(1-ge*ge)}function Fo(ge){return ge<1/2.75?7.5625*ge*ge:ge<2/2.75?7.5625*(ge-=1.5/2.75)*ge+.75:ge<2.5/2.75?7.5625*(ge-=2.25/2.75)*ge+.9375:7.5625*(ge-=2.625/2.75)*ge+.984375}function Gl(ge,O){return O-=ge,function(j){return Math.round(ge+O*j)}}function Ds(ge){var O,j,U,$=[ge.a,ge.b],le=[ge.c,ge.d],me=Zs($),Ae=Os($,le),De=Zs(((O=le)[0]+=(U=-Ae)*(j=$)[0],O[1]+=U*j[1],O))||0;$[0]*le[1]<le[0]*$[1]&&($[0]*=-1,$[1]*=-1,me*=-1,Ae*=-1),this.rotate=(me?Math.atan2($[1],$[0]):Math.atan2(-le[0],le[1]))*Ge,this.translate=[ge.e,ge.f],this.scale=[me,De],this.skew=De?Math.atan2(Ae,De)*Ge:0}function Os(ge,O){return ge[0]*O[0]+ge[1]*O[1]}function Zs(ge){var O=Math.sqrt(Os(ge,ge));return O&&(ge[0]/=O,ge[1]/=O),O}i.ease=function(ge){var O=ge.indexOf("-"),j=O>=0?ge.slice(0,O):ge,U=O>=0?ge.slice(O+1):"in";return j=nu.get(j)||uo,xa((U=ru.get(U)||B)(j.apply(null,m.call(arguments,1))))},i.interpolateHcl=function(ge,O){ge=i.hcl(ge),O=i.hcl(O);var j=ge.h,U=ge.c,$=ge.l,le=O.h-j,me=O.c-U,Ae=O.l-$;return isNaN(me)&&(me=0,U=isNaN(U)?O.c:U),isNaN(le)?(le=0,j=isNaN(j)?O.h:j):le>180?le-=360:le<-180&&(le+=360),function(De){return mt(j+le*De,U+me*De,$+Ae*De)+""}},i.interpolateHsl=function(ge,O){ge=i.hsl(ge),O=i.hsl(O);var j=ge.h,U=ge.s,$=ge.l,le=O.h-j,me=O.s-U,Ae=O.l-$;return isNaN(me)&&(me=0,U=isNaN(U)?O.s:U),isNaN(le)?(le=0,j=isNaN(j)?O.h:j):le>180?le-=360:le<-180&&(le+=360),function(De){return jt(j+le*De,U+me*De,$+Ae*De)+""}},i.interpolateLab=function(ge,O){ge=i.lab(ge),O=i.lab(O);var j=ge.l,U=ge.a,$=ge.b,le=O.l-j,me=O.a-U,Ae=O.b-$;return function(De){return Yt(j+le*De,U+me*De,$+Ae*De)+""}},i.interpolateRound=Gl,i.transform=function(ge){var O=p.createElementNS(i.ns.prefix.svg,"g");return(i.transform=function(j){if(null!=j){O.setAttribute("transform",j);var U=O.transform.baseVal.consolidate()}return new Ds(U?U.matrix:iu)})(ge)},Ds.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var iu={a:1,b:0,c:0,d:1,e:0,f:0};function Ls(ge){return ge.length?ge.pop()+",":""}function Ts(ge,O){var $,le,me,j=[],U=[];return ge=i.transform(ge),O=i.transform(O),function($,le,me,Ae){if($[0]!==le[0]||$[1]!==le[1]){var De=me.push("translate(",null,",",null,")");Ae.push({i:De-4,x:Co($[0],le[0])},{i:De-2,x:Co($[1],le[1])})}else(le[0]||le[1])&&me.push("translate("+le+")")}(ge.translate,O.translate,j,U),me=j,($=ge.rotate)!==(le=O.rotate)?($-le>180?le+=360:le-$>180&&($+=360),U.push({i:me.push(Ls(me)+"rotate(",null,")")-2,x:Co($,le)})):le&&me.push(Ls(me)+"rotate("+le+")"),function($,le,me,Ae){$!==le?Ae.push({i:me.push(Ls(me)+"skewX(",null,")")-2,x:Co($,le)}):le&&me.push(Ls(me)+"skewX("+le+")")}(ge.skew,O.skew,j,U),function($,le,me,Ae){if($[0]!==le[0]||$[1]!==le[1]){var De=me.push(Ls(me)+"scale(",null,",",null,")");Ae.push({i:De-4,x:Co($[0],le[0])},{i:De-2,x:Co($[1],le[1])})}else 1===le[0]&&1===le[1]||me.push(Ls(me)+"scale("+le+")")}(ge.scale,O.scale,j,U),ge=O=null,function($){for(var le,me=-1,Ae=U.length;++me<Ae;)j[(le=U[me]).i]=le.x($);return j.join("")}}function Zu(ge,O){return O=(O-=ge=+ge)||1/O,function(j){return(j-ge)/O}}function Ol(ge,O){return O=(O-=ge=+ge)||1/O,function(j){return Math.max(0,Math.min(1,(j-ge)/O))}}function Wa(ge){for(var O=ge.source,j=ge.target,U=function(me,Ae){if(me===Ae)return me;for(var De=Je(me),Le=Je(Ae),Qe=De.pop(),rt=Le.pop(),dt=null;Qe===rt;)dt=Qe,Qe=De.pop(),rt=Le.pop();return dt}(O,j),$=[O];O!==U;)$.push(O=O.parent);for(var le=$.length;j!==U;)$.splice(le,0,j),j=j.parent;return $}function Je(ge){for(var O=[],j=ge.parent;null!=j;)O.push(ge),ge=j,j=j.parent;return O.push(ge),O}function tt(ge){ge.fixed|=2}function ut(ge){ge.fixed&=-7}function vt(ge){ge.fixed|=4,ge.px=ge.x,ge.py=ge.y}function Et(ge){ge.fixed&=-5}i.interpolateTransform=Ts,i.layout={},i.layout.bundle=function(){return function(ge){for(var O=[],j=-1,U=ge.length;++j<U;)O.push(Wa(ge[j]));return O}},i.layout.chord=function(){var ge,O,j,U,$,le,me,Ae={},De=0;function Le(){var rt,dt,Pt,Nt,Rt,Ft={},It=[],Xt=i.range(U),$t=[];for(ge=[],O=[],rt=0,Nt=-1;++Nt<U;){for(dt=0,Rt=-1;++Rt<U;)dt+=j[Nt][Rt];It.push(dt),$t.push(i.range(U)),rt+=dt}for($&&Xt.sort(function(Er,wr){return $(It[Er],It[wr])}),le&&$t.forEach(function(Er,wr){Er.sort(function(fi,Mi){return le(j[wr][fi],j[wr][Mi])})}),rt=(hn-De*U)/rt,dt=0,Nt=-1;++Nt<U;){for(Pt=dt,Rt=-1;++Rt<U;){var en=Xt[Nt],bn=$t[en][Rt],Cn=j[en][bn],$n=dt,Gn=dt+=Cn*rt;Ft[en+"-"+bn]={index:en,subindex:bn,startAngle:$n,endAngle:Gn,value:Cn}}O[en]={index:en,startAngle:Pt,endAngle:dt,value:It[en]},dt+=De}for(Nt=-1;++Nt<U;)for(Rt=Nt-1;++Rt<U;){var pr=Ft[Nt+"-"+Rt],dr=Ft[Rt+"-"+Nt];(pr.value||dr.value)&&ge.push(pr.value<dr.value?{source:dr,target:pr}:{source:pr,target:dr})}me&&Qe()}function Qe(){ge.sort(function(rt,dt){return me((rt.source.value+rt.target.value)/2,(dt.source.value+dt.target.value)/2)})}return Ae.matrix=function(rt){return arguments.length?(U=(j=rt)&&j.length,ge=O=null,Ae):j},Ae.padding=function(rt){return arguments.length?(De=rt,ge=O=null,Ae):De},Ae.sortGroups=function(rt){return arguments.length?($=rt,ge=O=null,Ae):$},Ae.sortSubgroups=function(rt){return arguments.length?(le=rt,ge=null,Ae):le},Ae.sortChords=function(rt){return arguments.length?(me=rt,ge&&Qe(),Ae):me},Ae.chords=function(){return ge||Le(),ge},Ae.groups=function(){return O||Le(),O},Ae},i.layout.force=function(){var ge,O,j,U,$,le,me={},Ae=i.dispatch("start","tick","end"),De=[1,1],Le=.9,Qe=kt,rt=zt,dt=-30,Pt=fn,Nt=.1,Rt=.64,Ft=[],It=[];function Xt(en){return function(bn,Cn,$n,Gn){if(bn.point!==en){var pr=bn.cx-en.x,dr=bn.cy-en.y,Er=Gn-Cn,wr=pr*pr+dr*dr;if(Er*Er/Rt<wr){if(wr<Pt){var fi=bn.charge/wr;en.px-=pr*fi,en.py-=dr*fi}return!0}bn.point&&wr&&wr<Pt&&(en.px-=pr*(fi=bn.pointCharge/wr),en.py-=dr*fi)}return!bn.charge}}function $t(en){en.px=i.event.x,en.py=i.event.y,me.resume()}return me.tick=function(){if((j*=.99)<.005)return ge=null,Ae.end({type:"end",alpha:j=0}),!0;var en,bn,Cn,$n,Gn,pr,dr,Er,wr,fi=Ft.length,Mi=It.length;for(bn=0;bn<Mi;++bn)$n=(Cn=It[bn]).source,(pr=(Er=(Gn=Cn.target).x-$n.x)*Er+(wr=Gn.y-$n.y)*wr)&&(Er*=pr=j*$[bn]*((pr=Math.sqrt(pr))-U[bn])/pr,wr*=pr,Gn.x-=Er*(dr=$n.weight+Gn.weight?$n.weight/($n.weight+Gn.weight):.5),Gn.y-=wr*dr,$n.x+=Er*(dr=1-dr),$n.y+=wr*dr);if((dr=j*Nt)&&(Er=De[0]/2,wr=De[1]/2,bn=-1,dr))for(;++bn<fi;)(Cn=Ft[bn]).x+=(Er-Cn.x)*dr,Cn.y+=(wr-Cn.y)*dr;if(dt)for(function Wi(lr,Ur,ki){var vi=0,Oi=0;if(lr.charge=0,!lr.leaf)for(var $i,da=lr.nodes,Ii=da.length,sa=-1;++sa<Ii;)null!=($i=da[sa])&&(Wi($i,Ur,ki),lr.charge+=$i.charge,vi+=$i.charge*$i.cx,Oi+=$i.charge*$i.cy);if(lr.point){lr.leaf||(lr.point.x+=Math.random()-.5,lr.point.y+=Math.random()-.5);var ta=Ur*ki[lr.point.index];lr.charge+=lr.pointCharge=ta,vi+=ta*lr.point.x,Oi+=ta*lr.point.y}lr.cx=vi/lr.charge,lr.cy=Oi/lr.charge}(en=i.geom.quadtree(Ft),j,le),bn=-1;++bn<fi;)(Cn=Ft[bn]).fixed||en.visit(Xt(Cn));for(bn=-1;++bn<fi;)(Cn=Ft[bn]).fixed?(Cn.x=Cn.px,Cn.y=Cn.py):(Cn.x-=(Cn.px-(Cn.px=Cn.x))*Le,Cn.y-=(Cn.py-(Cn.py=Cn.y))*Le);Ae.tick({type:"tick",alpha:j})},me.nodes=function(en){return arguments.length?(Ft=en,me):Ft},me.links=function(en){return arguments.length?(It=en,me):It},me.size=function(en){return arguments.length?(De=en,me):De},me.linkDistance=function(en){return arguments.length?(Qe="function"==typeof en?en:+en,me):Qe},me.distance=me.linkDistance,me.linkStrength=function(en){return arguments.length?(rt="function"==typeof en?en:+en,me):rt},me.friction=function(en){return arguments.length?(Le=+en,me):Le},me.charge=function(en){return arguments.length?(dt="function"==typeof en?en:+en,me):dt},me.chargeDistance=function(en){return arguments.length?(Pt=en*en,me):Math.sqrt(Pt)},me.gravity=function(en){return arguments.length?(Nt=+en,me):Nt},me.theta=function(en){return arguments.length?(Rt=en*en,me):Math.sqrt(Rt)},me.alpha=function(en){return arguments.length?(en=+en,j?en>0?j=en:(ge.c=null,ge.t=NaN,ge=null,Ae.end({type:"end",alpha:j=0})):en>0&&(Ae.start({type:"start",alpha:j=en}),ge=ir(me.tick)),me):j},me.start=function(){var en,bn,Cn,$n=Ft.length,Gn=It.length,pr=De[0],dr=De[1];for(en=0;en<$n;++en)(Cn=Ft[en]).index=en,Cn.weight=0;for(en=0;en<Gn;++en)"number"==typeof(Cn=It[en]).source&&(Cn.source=Ft[Cn.source]),"number"==typeof Cn.target&&(Cn.target=Ft[Cn.target]),++Cn.source.weight,++Cn.target.weight;for(en=0;en<$n;++en)Cn=Ft[en],isNaN(Cn.x)&&(Cn.x=Er("x",pr)),isNaN(Cn.y)&&(Cn.y=Er("y",dr)),isNaN(Cn.px)&&(Cn.px=Cn.x),isNaN(Cn.py)&&(Cn.py=Cn.y);if(U=[],"function"==typeof Qe)for(en=0;en<Gn;++en)U[en]=+Qe.call(this,It[en],en);else for(en=0;en<Gn;++en)U[en]=Qe;if($=[],"function"==typeof rt)for(en=0;en<Gn;++en)$[en]=+rt.call(this,It[en],en);else for(en=0;en<Gn;++en)$[en]=rt;if(le=[],"function"==typeof dt)for(en=0;en<$n;++en)le[en]=+dt.call(this,Ft[en],en);else for(en=0;en<$n;++en)le[en]=dt;function Er(wr,fi){if(!bn){for(bn=new Array($n),Ur=0;Ur<$n;++Ur)bn[Ur]=[];for(Ur=0;Ur<Gn;++Ur){var Mi=It[Ur];bn[Mi.source.index].push(Mi.target),bn[Mi.target.index].push(Mi.source)}}for(var Wi,lr=bn[en],Ur=-1,ki=lr.length;++Ur<ki;)if(!isNaN(Wi=lr[Ur][wr]))return Wi;return Math.random()*fi}return me.resume()},me.resume=function(){return me.alpha(.1)},me.stop=function(){return me.alpha(0)},me.drag=function(){if(O||(O=i.behavior.drag().origin(B).on("dragstart.force",tt).on("drag.force",$t).on("dragend.force",ut)),!arguments.length)return O;this.on("mouseover.force",vt).on("mouseout.force",Et).call(O)},i.rebind(me,Ae,"on")};var kt=20,zt=1,fn=1/0;function dn(ge,O){return i.rebind(ge,O,"sort","children","value"),ge.nodes=ge,ge.links=Qn,ge}function cn(ge,O){for(var j=[ge];null!=(ge=j.pop());)if(O(ge),($=ge.children)&&(U=$.length))for(var U,$;--U>=0;)j.push($[U])}function wn(ge,O){for(var j=[ge],U=[];null!=(ge=j.pop());)if(U.push(ge),(le=ge.children)&&($=le.length))for(var $,le,me=-1;++me<$;)j.push(le[me]);for(;null!=(ge=U.pop());)O(ge)}function En(ge){return ge.children}function Fn(ge){return ge.value}function zn(ge,O){return O.value-ge.value}function Qn(ge){return i.merge(ge.map(function(O){return(O.children||[]).map(function(j){return{source:O,target:j}})}))}i.layout.hierarchy=function(){var ge=zn,O=En,j=Fn;function U($){var le,me=[$],Ae=[];for($.depth=0;null!=(le=me.pop());)if(Ae.push(le),(Le=O.call(U,le,le.depth))&&(De=Le.length)){for(var De,Le,Qe;--De>=0;)me.push(Qe=Le[De]),Qe.parent=le,Qe.depth=le.depth+1;j&&(le.value=0),le.children=Le}else j&&(le.value=+j.call(U,le,le.depth)||0),delete le.children;return wn($,function(rt){var dt,Pt;ge&&(dt=rt.children)&&dt.sort(ge),j&&(Pt=rt.parent)&&(Pt.value+=rt.value)}),Ae}return U.sort=function($){return arguments.length?(ge=$,U):ge},U.children=function($){return arguments.length?(O=$,U):O},U.value=function($){return arguments.length?(j=$,U):j},U.revalue=function($){return j&&(cn($,function(le){le.children&&(le.value=0)}),wn($,function(le){var me;le.children||(le.value=+j.call(U,le,le.depth)||0),(me=le.parent)&&(me.value+=le.value)})),$},U},i.layout.partition=function(){var ge=i.layout.hierarchy(),O=[1,1];function j(U,$){var le=ge.call(this,U,$);return function me(Ae,De,Le,Qe){var rt=Ae.children;if(Ae.x=De,Ae.y=Ae.depth*Qe,Ae.dx=Le,Ae.dy=Qe,rt&&(dt=rt.length)){var dt,Pt,Nt,Rt=-1;for(Le=Ae.value?Le/Ae.value:0;++Rt<dt;)me(Pt=rt[Rt],De,Nt=Pt.value*Le,Qe),De+=Nt}}(le[0],0,O[0],O[1]/function me(Ae){var De=Ae.children,Le=0;if(De&&(Qe=De.length))for(var Qe,rt=-1;++rt<Qe;)Le=Math.max(Le,me(De[rt]));return 1+Le}(le[0])),le}return j.size=function(U){return arguments.length?(O=U,j):O},dn(j,ge)},i.layout.pie=function(){var ge=Number,O=_r,j=0,U=hn,$=0;function le(me){var Ae,De=me.length,Le=me.map(function(Xt,$t){return+ge.call(le,Xt,$t)}),Qe=+("function"==typeof j?j.apply(this,arguments):j),rt=("function"==typeof U?U.apply(this,arguments):U)-Qe,dt=Math.min(Math.abs(rt)/De,+("function"==typeof $?$.apply(this,arguments):$)),Pt=dt*(rt<0?-1:1),Nt=i.sum(Le),Rt=Nt?(rt-De*Pt)/Nt:0,Ft=i.range(De),It=[];return null!=O&&Ft.sort(O===_r?function(Xt,$t){return Le[$t]-Le[Xt]}:function(Xt,$t){return O(me[Xt],me[$t])}),Ft.forEach(function(Xt){It[Xt]={data:me[Xt],value:Ae=Le[Xt],startAngle:Qe,endAngle:Qe+=Ae*Rt+Pt,padAngle:dt}}),It}return le.value=function(me){return arguments.length?(ge=me,le):ge},le.sort=function(me){return arguments.length?(O=me,le):O},le.startAngle=function(me){return arguments.length?(j=me,le):j},le.endAngle=function(me){return arguments.length?(U=me,le):U},le.padAngle=function(me){return arguments.length?($=me,le):$},le};var _r={};function Cr(ge){return ge.x}function Qr(ge){return ge.y}function oi(ge,O,j){ge.y0=O,ge.y=j}i.layout.stack=function(){var ge=B,O=Qi,j=Ci,U=oi,$=Cr,le=Qr;function me(Ae,De){if(!(dt=Ae.length))return Ae;var Le=Ae.map(function(Xt,$t){return ge.call(me,Xt,$t)}),Qe=Le.map(function(Xt){return Xt.map(function($t,en){return[$.call(me,$t,en),le.call(me,$t,en)]})}),rt=O.call(me,Qe,De);Le=i.permute(Le,rt),Qe=i.permute(Qe,rt);var dt,Pt,Nt,Rt,Ft=j.call(me,Qe,De),It=Le[0].length;for(Nt=0;Nt<It;++Nt)for(U.call(me,Le[0][Nt],Rt=Ft[Nt],Qe[0][Nt][1]),Pt=1;Pt<dt;++Pt)U.call(me,Le[Pt][Nt],Rt+=Qe[Pt-1][Nt][1],Qe[Pt][Nt][1]);return Ae}return me.values=function(Ae){return arguments.length?(ge=Ae,me):ge},me.order=function(Ae){return arguments.length?(O="function"==typeof Ae?Ae:yi.get(Ae)||Qi,me):O},me.offset=function(Ae){return arguments.length?(j="function"==typeof Ae?Ae:ei.get(Ae)||Ci,me):j},me.x=function(Ae){return arguments.length?($=Ae,me):$},me.y=function(Ae){return arguments.length?(le=Ae,me):le},me.out=function(Ae){return arguments.length?(U=Ae,me):U},me};var yi=i.map({"inside-out":function(ge){var O,j,U=ge.length,$=ge.map(La),le=ge.map(Ra),me=i.range(U).sort(function(rt,dt){return $[rt]-$[dt]}),Ae=0,De=0,Le=[],Qe=[];for(O=0;O<U;++O)j=me[O],Ae<De?(Ae+=le[j],Le.push(j)):(De+=le[j],Qe.push(j));return Qe.reverse().concat(Le)},reverse:function(ge){return i.range(ge.length).reverse()},default:Qi}),ei=i.map({silhouette:function(ge){var O,j,U,$=ge.length,le=ge[0].length,me=[],Ae=0,De=[];for(j=0;j<le;++j){for(O=0,U=0;O<$;O++)U+=ge[O][j][1];U>Ae&&(Ae=U),me.push(U)}for(j=0;j<le;++j)De[j]=(Ae-me[j])/2;return De},wiggle:function(ge){var O,j,U,$,le,me,Ae,De,Le,Qe=ge.length,rt=ge[0],dt=rt.length,Pt=[];for(Pt[0]=De=Le=0,j=1;j<dt;++j){for(O=0,$=0;O<Qe;++O)$+=ge[O][j][1];for(O=0,le=0,Ae=rt[j][0]-rt[j-1][0];O<Qe;++O){for(U=0,me=(ge[O][j][1]-ge[O][j-1][1])/(2*Ae);U<O;++U)me+=(ge[U][j][1]-ge[U][j-1][1])/Ae;le+=me*ge[O][j][1]}Pt[j]=De-=$?le/$*Ae:0,De<Le&&(Le=De)}for(j=0;j<dt;++j)Pt[j]-=Le;return Pt},expand:function(ge){var O,j,U,$=ge.length,le=ge[0].length,me=1/$,Ae=[];for(j=0;j<le;++j){for(O=0,U=0;O<$;O++)U+=ge[O][j][1];if(U)for(O=0;O<$;O++)ge[O][j][1]/=U;else for(O=0;O<$;O++)ge[O][j][1]=me}for(j=0;j<le;++j)Ae[j]=0;return Ae},zero:Ci});function Qi(ge){return i.range(ge.length)}function Ci(ge){for(var O=-1,j=ge[0].length,U=[];++O<j;)U[O]=0;return U}function La(ge){for(var O,j=1,U=0,$=ge[0][1],le=ge.length;j<le;++j)(O=ge[j][1])>$&&(U=j,$=O);return U}function Ra(ge){return ge.reduce(Ba,0)}function Ba(ge,O){return ge+O[1]}function Go(ge,O){return jo(ge,Math.ceil(Math.log(O.length)/Math.LN2+1))}function jo(ge,O){for(var j=-1,U=+ge[0],$=(ge[1]-U)/O,le=[];++j<=O;)le[j]=$*j+U;return le}function yo(ge){return[i.min(ge),i.max(ge)]}function oo(ge,O){return ge.value-O.value}function qo(ge,O){var j=ge._pack_next;ge._pack_next=O,O._pack_prev=ge,O._pack_next=j,j._pack_prev=O}function co(ge,O){ge._pack_next=O,O._pack_prev=ge}function Hs(ge,O){var j=O.x-ge.x,U=O.y-ge.y,$=ge.r+O.r;return.999*$*$>j*j+U*U}function Gs(ge){if((O=ge.children)&&(De=O.length)){var O,j,U,$,le,me,Ae,De,Le=1/0,Qe=-1/0,rt=1/0,dt=-1/0;if(O.forEach(Rs),(j=O[0]).x=-j.r,j.y=0,$t(j),De>1&&((U=O[1]).x=U.r,U.y=0,$t(U),De>2))for(Ma(j,U,$=O[2]),$t($),qo(j,$),j._pack_prev=$,qo($,U),U=j._pack_next,le=3;le<De;le++){Ma(j,U,$=O[le]);var Pt=0,Nt=1,Rt=1;for(me=U._pack_next;me!==U;me=me._pack_next,Nt++)if(Hs(me,$)){Pt=1;break}if(1==Pt)for(Ae=j._pack_prev;Ae!==me._pack_prev&&!Hs(Ae,$);Ae=Ae._pack_prev,Rt++);Pt?(Nt<Rt||Nt==Rt&&U.r<j.r?co(j,U=me):co(j=Ae,U),le--):(qo(j,$),U=$,$t($))}var Ft=(Le+Qe)/2,It=(rt+dt)/2,Xt=0;for(le=0;le<De;le++)($=O[le]).x-=Ft,$.y-=It,Xt=Math.max(Xt,$.r+Math.sqrt($.x*$.x+$.y*$.y));ge.r=Xt,O.forEach(Xs)}function $t(en){Le=Math.min(en.x-en.r,Le),Qe=Math.max(en.x+en.r,Qe),rt=Math.min(en.y-en.r,rt),dt=Math.max(en.y+en.r,dt)}}function Rs(ge){ge._pack_next=ge._pack_prev=ge}function Xs(ge){delete ge._pack_next,delete ge._pack_prev}function Ma(ge,O,j){var U=ge.r+j.r,$=O.x-ge.x,le=O.y-ge.y;if(U&&($||le)){var me=O.r+j.r,Ae=$*$+le*le,De=.5+((U*=U)-(me*=me))/(2*Ae),Le=Math.sqrt(Math.max(0,2*me*(U+Ae)-(U-=Ae)*U-me*me))/(2*Ae);j.x=ge.x+De*$+Le*le,j.y=ge.y+De*le-Le*$}else j.x=ge.x+U,j.y=ge.y}function Mt(ge,O){return ge.parent==O.parent?1:2}function Gt(ge){var O=ge.children;return O.length?O[0]:ge.t}function Tn(ge){var O,j=ge.children;return(O=j.length)?j[O-1]:ge.t}function on(ge,O,j){var U=j/(O.i-ge.i);O.c-=U,O.s+=j,ge.c+=U,O.z+=j,O.m+=j}function An(ge,O,j){return ge.a.parent===O.parent?ge.a:j}function Vn(ge){return{x:ge.x,y:ge.y,dx:ge.dx,dy:ge.dy}}function tr(ge,O){var j=ge.x+O[3],U=ge.y+O[0],$=ge.dx-O[1]-O[3],le=ge.dy-O[0]-O[2];return $<0&&(j+=$/2,$=0),le<0&&(U+=le/2,le=0),{x:j,y:U,dx:$,dy:le}}function hr(ge){var O=ge[0],j=ge[ge.length-1];return O<j?[O,j]:[j,O]}function Tr(ge){return ge.rangeExtent?ge.rangeExtent():hr(ge.range())}function yr(ge,O,j,U){var $=j(ge[0],ge[1]),le=U(O[0],O[1]);return function(me){return le($(me))}}function Ir(ge,O){var j,U=0,$=ge.length-1,le=ge[U],me=ge[$];return me<le&&(j=U,U=$,$=j,j=le,le=me,me=j),ge[U]=O.floor(le),ge[$]=O.ceil(me),ge}function Br(ge){return ge?{floor:function(O){return Math.floor(O/ge)*ge},ceil:function(O){return Math.ceil(O/ge)*ge}}:xr}i.layout.histogram=function(){var ge=!0,O=Number,j=yo,U=Go;function $(le,me){for(var Ae,De,Le=[],Qe=le.map(O,this),rt=j.call(this,Qe,me),dt=U.call(this,rt,Qe,me),Pt=(me=-1,Qe.length),Nt=dt.length-1,Rt=ge?1:1/Pt;++me<Nt;)(Ae=Le[me]=[]).dx=dt[me+1]-(Ae.x=dt[me]),Ae.y=0;if(Nt>0)for(me=-1;++me<Pt;)(De=Qe[me])>=rt[0]&&De<=rt[1]&&((Ae=Le[i.bisect(dt,De,1,Nt)-1]).y+=Rt,Ae.push(le[me]));return Le}return $.value=function(le){return arguments.length?(O=le,$):O},$.range=function(le){return arguments.length?(j=qn(le),$):j},$.bins=function(le){return arguments.length?(U="number"==typeof le?function(me){return jo(me,le)}:qn(le),$):U},$.frequency=function(le){return arguments.length?(ge=!!le,$):ge},$},i.layout.pack=function(){var ge,O=i.layout.hierarchy().sort(oo),j=0,U=[1,1];function $(le,me){var Ae=O.call(this,le,me),De=Ae[0],Le=U[0],Qe=U[1],rt=null==ge?Math.sqrt:"function"==typeof ge?ge:function(){return ge};if(De.x=De.y=0,wn(De,function(Pt){Pt.r=+rt(Pt.value)}),wn(De,Gs),j){var dt=j*(ge?1:Math.max(2*De.r/Le,2*De.r/Qe))/2;wn(De,function(Pt){Pt.r+=dt}),wn(De,Gs),wn(De,function(Pt){Pt.r-=dt})}return function Pt(Nt,Rt,Ft,It){var Xt=Nt.children;if(Nt.x=Rt+=It*Nt.x,Nt.y=Ft+=It*Nt.y,Nt.r*=It,Xt)for(var $t=-1,en=Xt.length;++$t<en;)Pt(Xt[$t],Rt,Ft,It)}(De,Le/2,Qe/2,ge?1:1/Math.max(2*De.r/Le,2*De.r/Qe)),Ae}return $.size=function(le){return arguments.length?(U=le,$):U},$.radius=function(le){return arguments.length?(ge=null==le||"function"==typeof le?le:+le,$):ge},$.padding=function(le){return arguments.length?(j=+le,$):j},dn($,O)},i.layout.tree=function(){var ge=i.layout.hierarchy().sort(null).value(null),O=Mt,j=[1,1],U=null;function $(De,Le){var Qe=ge.call(this,De,Le),rt=Qe[0],dt=function($t){for(var en,bn={A:null,children:[$t]},Cn=[bn];null!=(en=Cn.pop());)for(var $n,Gn=en.children,pr=0,dr=Gn.length;pr<dr;++pr)Cn.push((Gn[pr]=$n={_:Gn[pr],parent:en,children:($n=Gn[pr].children)&&$n.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:pr}).a=$n);return bn.children[0]}(rt);if(wn(dt,le),dt.parent.m=-dt.z,cn(dt,me),U)cn(rt,Ae);else{var Pt=rt,Nt=rt,Rt=rt;cn(rt,function($t){$t.x<Pt.x&&(Pt=$t),$t.x>Nt.x&&(Nt=$t),$t.depth>Rt.depth&&(Rt=$t)});var Ft=O(Pt,Nt)/2-Pt.x,It=j[0]/(Nt.x+O(Nt,Pt)/2+Ft),Xt=j[1]/(Rt.depth||1);cn(rt,function($t){$t.x=($t.x+Ft)*It,$t.y=$t.depth*Xt})}return Qe}function le(De){var Le=De.children,Qe=De.parent.children,rt=De.i?Qe[De.i-1]:null;if(Le.length){!function(Pt){for(var Nt,Rt=0,Ft=0,It=Pt.children,Xt=It.length;--Xt>=0;)(Nt=It[Xt]).z+=Rt,Nt.m+=Rt,Rt+=Nt.s+(Ft+=Nt.c)}(De);var dt=(Le[0].z+Le[Le.length-1].z)/2;rt?(De.z=rt.z+O(De._,rt._),De.m=De.z-dt):De.z=dt}else rt&&(De.z=rt.z+O(De._,rt._));De.parent.A=function(Pt,Nt,Rt){if(Nt){for(var Ft,It=Pt,Xt=Pt,$t=Nt,en=It.parent.children[0],bn=It.m,Cn=Xt.m,$n=$t.m,Gn=en.m;$t=Tn($t),It=Gt(It),$t&&It;)en=Gt(en),(Xt=Tn(Xt)).a=Pt,(Ft=$t.z+$n-It.z-bn+O($t._,It._))>0&&(on(An($t,Pt,Rt),Pt,Ft),bn+=Ft,Cn+=Ft),$n+=$t.m,bn+=It.m,Gn+=en.m,Cn+=Xt.m;$t&&!Tn(Xt)&&(Xt.t=$t,Xt.m+=$n-Cn),It&&!Gt(en)&&(en.t=It,en.m+=bn-Gn,Rt=Pt)}return Rt}(De,rt,De.parent.A||Qe[0])}function me(De){De._.x=De.z+De.parent.m,De.m+=De.parent.m}function Ae(De){De.x*=j[0],De.y=De.depth*j[1]}return $.separation=function(De){return arguments.length?(O=De,$):O},$.size=function(De){return arguments.length?(U=null==(j=De)?Ae:null,$):U?null:j},$.nodeSize=function(De){return arguments.length?(U=null==(j=De)?null:Ae,$):U?j:null},dn($,ge)},i.layout.cluster=function(){var ge=i.layout.hierarchy().sort(null).value(null),O=Mt,j=[1,1],U=!1;function $(le,me){var Ae,De=ge.call(this,le,me),Le=De[0],Qe=0;wn(Le,function(Rt){var It,Ft=Rt.children;Ft&&Ft.length?(Rt.x=(It=Ft).reduce(function(Xt,$t){return Xt+$t.x},0)/It.length,Rt.y=function(It){return 1+i.max(It,function(Xt){return Xt.y})}(Ft)):(Rt.x=Ae?Qe+=O(Rt,Ae):0,Rt.y=0,Ae=Rt)});var rt=function Rt(Ft){var It=Ft.children;return It&&It.length?Rt(It[0]):Ft}(Le),dt=function Rt(Ft){var It,Xt=Ft.children;return Xt&&(It=Xt.length)?Rt(Xt[It-1]):Ft}(Le),Pt=rt.x-O(rt,dt)/2,Nt=dt.x+O(dt,rt)/2;return wn(Le,U?function(Rt){Rt.x=(Rt.x-Le.x)*j[0],Rt.y=(Le.y-Rt.y)*j[1]}:function(Rt){Rt.x=(Rt.x-Pt)/(Nt-Pt)*j[0],Rt.y=(1-(Le.y?Rt.y/Le.y:1))*j[1]}),De}return $.separation=function(le){return arguments.length?(O=le,$):O},$.size=function(le){return arguments.length?(U=null==(j=le),$):U?null:j},$.nodeSize=function(le){return arguments.length?(U=null!=(j=le),$):U?j:null},dn($,ge)},i.layout.treemap=function(){var ge,O=i.layout.hierarchy(),j=Math.round,U=[1,1],$=null,le=Vn,me=!1,Ae="squarify",De=.5*(1+Math.sqrt(5));function Le(Rt,Ft){for(var It,Xt,$t=-1,en=Rt.length;++$t<en;)Xt=(It=Rt[$t]).value*(Ft<0?0:Ft),It.area=isNaN(Xt)||Xt<=0?0:Xt}function Qe(Rt){var Ft=Rt.children;if(Ft&&Ft.length){var It,Xt,$t,en=le(Rt),bn=[],Cn=Ft.slice(),$n=1/0,Gn="slice"===Ae?en.dx:"dice"===Ae?en.dy:"slice-dice"===Ae?1&Rt.depth?en.dy:en.dx:Math.min(en.dx,en.dy);for(Le(Cn,en.dx*en.dy/Rt.value),bn.area=0;($t=Cn.length)>0;)bn.push(It=Cn[$t-1]),bn.area+=It.area,"squarify"!==Ae||(Xt=dt(bn,Gn))<=$n?(Cn.pop(),$n=Xt):(bn.area-=bn.pop().area,Pt(bn,Gn,en,!1),Gn=Math.min(en.dx,en.dy),bn.length=bn.area=0,$n=1/0);bn.length&&(Pt(bn,Gn,en,!0),bn.length=bn.area=0),Ft.forEach(Qe)}}function rt(Rt){var Ft=Rt.children;if(Ft&&Ft.length){var It,Xt=le(Rt),$t=Ft.slice(),en=[];for(Le($t,Xt.dx*Xt.dy/Rt.value),en.area=0;It=$t.pop();)en.push(It),en.area+=It.area,null!=It.z&&(Pt(en,It.z?Xt.dx:Xt.dy,Xt,!$t.length),en.length=en.area=0);Ft.forEach(rt)}}function dt(Rt,Ft){for(var It,Xt=Rt.area,$t=0,en=1/0,bn=-1,Cn=Rt.length;++bn<Cn;)(It=Rt[bn].area)&&(It<en&&(en=It),It>$t&&($t=It));return Ft*=Ft,(Xt*=Xt)?Math.max(Ft*$t*De/Xt,Xt/(Ft*en*De)):1/0}function Pt(Rt,Ft,It,Xt){var $t,en=-1,bn=Rt.length,Cn=It.x,$n=It.y,Gn=Ft?j(Rt.area/Ft):0;if(Ft==It.dx){for((Xt||Gn>It.dy)&&(Gn=It.dy);++en<bn;)($t=Rt[en]).x=Cn,$t.y=$n,$t.dy=Gn,Cn+=$t.dx=Math.min(It.x+It.dx-Cn,Gn?j($t.area/Gn):0);$t.z=!0,$t.dx+=It.x+It.dx-Cn,It.y+=Gn,It.dy-=Gn}else{for((Xt||Gn>It.dx)&&(Gn=It.dx);++en<bn;)($t=Rt[en]).x=Cn,$t.y=$n,$t.dx=Gn,$n+=$t.dy=Math.min(It.y+It.dy-$n,Gn?j($t.area/Gn):0);$t.z=!1,$t.dy+=It.y+It.dy-$n,It.x+=Gn,It.dx-=Gn}}function Nt(Rt){var Ft=ge||O(Rt),It=Ft[0];return It.x=It.y=0,It.value?(It.dx=U[0],It.dy=U[1]):It.dx=It.dy=0,ge&&O.revalue(It),Le([It],It.dx*It.dy/It.value),(ge?rt:Qe)(It),me&&(ge=Ft),Ft}return Nt.size=function(Rt){return arguments.length?(U=Rt,Nt):U},Nt.padding=function(Rt){if(!arguments.length)return $;function Ft($t){var en=Rt.call(Nt,$t,$t.depth);return null==en?Vn($t):tr($t,"number"==typeof en?[en,en,en,en]:en)}function It($t){return tr($t,Rt)}var Xt;return le=null==($=Rt)?Vn:"function"==(Xt=typeof Rt)?Ft:("number"===Xt&&(Rt=[Rt,Rt,Rt,Rt]),It),Nt},Nt.round=function(Rt){return arguments.length?(j=Rt?Math.round:Number,Nt):j!=Number},Nt.sticky=function(Rt){return arguments.length?(me=Rt,ge=null,Nt):me},Nt.ratio=function(Rt){return arguments.length?(De=Rt,Nt):De},Nt.mode=function(Rt){return arguments.length?(Ae=Rt+"",Nt):Ae},dn(Nt,O)},i.random={normal:function(ge,O){var j=arguments.length;return j<2&&(O=1),j<1&&(ge=0),function(){var U,$,le;do{le=(U=2*Math.random()-1)*U+($=2*Math.random()-1)*$}while(!le||le>1);return ge+O*U*Math.sqrt(-2*Math.log(le)/le)}},logNormal:function(){var ge=i.random.normal.apply(i,arguments);return function(){return Math.exp(ge())}},bates:function(ge){var O=i.random.irwinHall(ge);return function(){return O()/ge}},irwinHall:function(ge){return function(){for(var O=0,j=0;j<ge;j++)O+=Math.random();return O}}},i.scale={};var xr={floor:B,ceil:B};function Pr(ge,O,j,U){var $=[],le=[],me=0,Ae=Math.min(ge.length,O.length)-1;for(ge[Ae]<ge[0]&&(ge=ge.slice().reverse(),O=O.slice().reverse());++me<=Ae;)$.push(j(ge[me-1],ge[me])),le.push(U(O[me-1],O[me]));return function(De){var Le=i.bisect(ge,De,1,Ae)-1;return le[Le]($[Le](De))}}function ai(ge,O){return i.rebind(ge,O,"range","rangeRound","interpolate","clamp")}function gi(ge,O){return Ir(ge,Br(ji(ge,O)[2])),Ir(ge,Br(ji(ge,O)[2])),ge}function ji(ge,O){null==O&&(O=10);var j=hr(ge),U=j[1]-j[0],$=Math.pow(10,Math.floor(Math.log(U/O)/Math.LN10)),le=O/U*$;return le<=.15?$*=10:le<=.35?$*=5:le<=.75&&($*=2),j[0]=Math.ceil(j[0]/$)*$,j[1]=Math.floor(j[1]/$)*$+.5*$,j[2]=$,j}function ur(ge,O){return i.range.apply(i,ji(ge,O))}i.scale.linear=function(){return function ge(O,j,U,$){var le,me;function Ae(){var Le=Math.min(O.length,j.length)>2?Pr:yr,Qe=$?Ol:Zu;return le=Le(O,j,Qe,U),me=Le(j,O,Qe,hs),De}function De(Le){return le(Le)}return De.invert=function(Le){return me(Le)},De.domain=function(Le){return arguments.length?(O=Le.map(Number),Ae()):O},De.range=function(Le){return arguments.length?(j=Le,Ae()):j},De.rangeRound=function(Le){return De.range(Le).interpolate(Gl)},De.clamp=function(Le){return arguments.length?($=Le,Ae()):$},De.interpolate=function(Le){return arguments.length?(U=Le,Ae()):U},De.ticks=function(Le){return ur(O,Le)},De.tickFormat=function(Le,Qe){return d3_scale_linearTickFormat(O,Le,Qe)},De.nice=function(Le){return gi(O,Le),Ae()},De.copy=function(){return ge(O,j,U,$)},Ae()}([0,1],[0,1],hs,!1)},i.scale.log=function(){return function ge(O,j,U,$){function le(De){return(U?Math.log(De<0?0:De):-Math.log(De>0?0:-De))/Math.log(j)}function me(De){return U?Math.pow(j,De):-Math.pow(j,-De)}function Ae(De){return O(le(De))}return Ae.invert=function(De){return me(O.invert(De))},Ae.domain=function(De){return arguments.length?(U=De[0]>=0,O.domain(($=De.map(Number)).map(le)),Ae):$},Ae.base=function(De){return arguments.length?(j=+De,O.domain($.map(le)),Ae):j},Ae.nice=function(){var De=Ir($.map(le),U?Math:Ni);return O.domain(De),$=De.map(me),Ae},Ae.ticks=function(){var De=hr($),Le=[],Qe=De[0],rt=De[1],dt=Math.floor(le(Qe)),Pt=Math.ceil(le(rt)),Nt=j%1?2:j;if(isFinite(Pt-dt)){if(U){for(;dt<Pt;dt++)for(var Rt=1;Rt<Nt;Rt++)Le.push(me(dt)*Rt);Le.push(me(dt))}else for(Le.push(me(dt));dt++<Pt;)for(Rt=Nt-1;Rt>0;Rt--)Le.push(me(dt)*Rt);for(dt=0;Le[dt]<Qe;dt++);for(Pt=Le.length;Le[Pt-1]>rt;Pt--);Le=Le.slice(dt,Pt)}return Le},Ae.copy=function(){return ge(O.copy(),j,U,$)},ai(Ae,O)}(i.scale.linear().domain([0,1]),10,!0,[1,10])};var Ni={floor:function(ge){return-Math.ceil(-ge)},ceil:function(ge){return-Math.floor(-ge)}};function Jr(ge){return function(O){return O<0?-Math.pow(-O,ge):Math.pow(O,ge)}}i.scale.pow=function(){return function ge(O,j,U){var $=Jr(j),le=Jr(1/j);function me(Ae){return O($(Ae))}return me.invert=function(Ae){return le(O.invert(Ae))},me.domain=function(Ae){return arguments.length?(O.domain((U=Ae.map(Number)).map($)),me):U},me.ticks=function(Ae){return ur(U,Ae)},me.tickFormat=function(Ae,De){return d3_scale_linearTickFormat(U,Ae,De)},me.nice=function(Ae){return me.domain(gi(U,Ae))},me.exponent=function(Ae){return arguments.length?($=Jr(j=Ae),le=Jr(1/j),O.domain(U.map($)),me):j},me.copy=function(){return ge(O.copy(),j,U)},ai(me,O)}(i.scale.linear(),1,[0,1])},i.scale.sqrt=function(){return i.scale.pow().exponent(.5)},i.scale.ordinal=function(){return function ge(O,j){var U,$,le;function me(De){return $[((U.get(De)||("range"===j.t?U.set(De,O.push(De)):NaN))-1)%$.length]}function Ae(De,Le){return i.range(O.length).map(function(Qe){return De+Le*Qe})}return me.domain=function(De){if(!arguments.length)return O;O=[],U=new C;for(var Le,Qe=-1,rt=De.length;++Qe<rt;)U.has(Le=De[Qe])||U.set(Le,O.push(Le));return me[j.t].apply(me,j.a)},me.range=function(De){return arguments.length?($=De,le=0,j={t:"range",a:arguments},me):$},me.rangePoints=function(De,Le){arguments.length<2&&(Le=0);var Qe=De[0],rt=De[1],dt=O.length<2?(Qe=(Qe+rt)/2,0):(rt-Qe)/(O.length-1+Le);return $=Ae(Qe+dt*Le/2,dt),le=0,j={t:"rangePoints",a:arguments},me},me.rangeRoundPoints=function(De,Le){arguments.length<2&&(Le=0);var Qe=De[0],rt=De[1],dt=O.length<2?(Qe=rt=Math.round((Qe+rt)/2),0):(rt-Qe)/(O.length-1+Le)|0;return $=Ae(Qe+Math.round(dt*Le/2+(rt-Qe-(O.length-1+Le)*dt)/2),dt),le=0,j={t:"rangeRoundPoints",a:arguments},me},me.rangeBands=function(De,Le,Qe){arguments.length<2&&(Le=0),arguments.length<3&&(Qe=Le);var rt=De[1]<De[0],dt=De[rt-0],Nt=(De[1-rt]-dt)/(O.length-Le+2*Qe);return $=Ae(dt+Nt*Qe,Nt),rt&&$.reverse(),le=Nt*(1-Le),j={t:"rangeBands",a:arguments},me},me.rangeRoundBands=function(De,Le,Qe){arguments.length<2&&(Le=0),arguments.length<3&&(Qe=Le);var rt=De[1]<De[0],dt=De[rt-0],Pt=De[1-rt],Nt=Math.floor((Pt-dt)/(O.length-Le+2*Qe));return $=Ae(dt+Math.round((Pt-dt-(O.length-Le)*Nt)/2),Nt),rt&&$.reverse(),le=Math.round(Nt*(1-Le)),j={t:"rangeRoundBands",a:arguments},me},me.rangeBand=function(){return le},me.rangeExtent=function(){return hr(j.a[0])},me.copy=function(){return ge(O,j)},me.domain(O)}([],{t:"range",a:[[]]})},i.scale.category10=function(){return i.scale.ordinal().range(Mr)},i.scale.category20=function(){return i.scale.ordinal().range(zi)},i.scale.category20b=function(){return i.scale.ordinal().range(fa)},i.scale.category20c=function(){return i.scale.ordinal().range(wa)};var Mr=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(vn),zi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(vn),fa=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(vn),wa=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(vn);function Yr(){return 0}i.scale.quantile=function(){return function ge(O,j){var U;function $(){var me=0,Ae=j.length;for(U=[];++me<Ae;)U[me-1]=i.quantile(O,me/Ae);return le}function le(me){if(!isNaN(me=+me))return j[i.bisect(U,me)]}return le.domain=function(me){return arguments.length?(O=me.map(g).filter(y).sort(d),$()):O},le.range=function(me){return arguments.length?(j=me,$()):j},le.quantiles=function(){return U},le.invertExtent=function(me){return(me=j.indexOf(me))<0?[NaN,NaN]:[me>0?U[me-1]:O[0],me<U.length?U[me]:O[O.length-1]]},le.copy=function(){return ge(O,j)},$()}([],[])},i.scale.quantize=function(){return function ge(O,j,U){var $,le;function me(De){return U[Math.max(0,Math.min(le,Math.floor($*(De-O))))]}function Ae(){return $=U.length/(j-O),le=U.length-1,me}return me.domain=function(De){return arguments.length?(O=+De[0],j=+De[De.length-1],Ae()):[O,j]},me.range=function(De){return arguments.length?(U=De,Ae()):U},me.invertExtent=function(De){return[De=(De=U.indexOf(De))<0?NaN:De/$+O,De+1/$]},me.copy=function(){return ge(O,j,U)},Ae()}(0,1,[0,1])},i.scale.threshold=function(){return function ge(O,j){function U($){if($<=$)return j[i.bisect(O,$)]}return U.domain=function($){return arguments.length?(O=$,U):O},U.range=function($){return arguments.length?(j=$,U):j},U.invertExtent=function($){return $=j.indexOf($),[O[$-1],O[$]]},U.copy=function(){return ge(O,j)},U}([.5],[0,1])},i.scale.identity=function(){return function ge(O){function j(U){return+U}return j.invert=j,j.domain=j.range=function(U){return arguments.length?(O=U.map(j),j):O},j.ticks=function(U){return ur(O,U)},j.tickFormat=function(U,$){return d3_scale_linearTickFormat(O,U,$)},j.copy=function(){return ge(O)},j}([0,1])},i.svg={},i.svg.arc=function(){var ge=va,O=Ki,j=Yr,U=Ea,$=Ar,le=Di,me=ea;function Ae(){var Le=Math.max(0,+ge.apply(this,arguments)),Qe=Math.max(0,+O.apply(this,arguments)),rt=$.apply(this,arguments)-it,dt=le.apply(this,arguments)-it,Pt=Math.abs(dt-rt),Nt=rt>dt?0:1;if(Qe<Le&&(Rt=Qe,Qe=Le,Le=Rt),Pt>=We)return De(Qe,Nt)+(Le?De(Le,1-Nt):"")+"Z";var Rt,Ft,It,Xt,$t,en,bn,Cn,$n,Gn,pr,dr,Er=0,wr=0,fi=[];if((Xt=(+me.apply(this,arguments)||0)/2)&&(It=U===Ea?Math.sqrt(Le*Le+Qe*Qe):+U.apply(this,arguments),Nt||(wr*=-1),Qe&&(wr=Pe(It/Qe*Math.sin(Xt))),Le&&(Er=Pe(It/Le*Math.sin(Xt)))),Qe){$t=Qe*Math.cos(rt+wr),en=Qe*Math.sin(rt+wr),bn=Qe*Math.cos(dt-wr),Cn=Qe*Math.sin(dt-wr);var Mi=Math.abs(dt-rt-2*wr)<=gn?0:1;if(wr&&mi($t,en,bn,Cn)===Nt^Mi){var Wi=(rt+dt)/2;$t=Qe*Math.cos(Wi),en=Qe*Math.sin(Wi),bn=Cn=null}}else $t=en=0;if(Le){$n=Le*Math.cos(dt-Er),Gn=Le*Math.sin(dt-Er),pr=Le*Math.cos(rt+Er),dr=Le*Math.sin(rt+Er);var lr=Math.abs(rt-dt+2*Er)<=gn?0:1;if(Er&&mi($n,Gn,pr,dr)===1-Nt^lr){var Ur=(rt+dt)/2;$n=Le*Math.cos(Ur),Gn=Le*Math.sin(Ur),pr=dr=null}}else $n=Gn=0;if(Pt>Bt&&(Rt=Math.min(Math.abs(Qe-Le)/2,+j.apply(this,arguments)))>.001){Ft=Le<Qe^Nt?0:1;var ki=Rt,vi=Rt;if(Pt<gn){var Oi=null==pr?[$n,Gn]:null==bn?[$t,en]:Ct([$t,en],[pr,dr],[bn,Cn],[$n,Gn]),$i=$t-Oi[0],da=en-Oi[1],Ii=bn-Oi[0],sa=Cn-Oi[1],ta=1/Math.sin(Math.acos(($i*Ii+da*sa)/(Math.sqrt($i*$i+da*da)*Math.sqrt(Ii*Ii+sa*sa)))/2),na=Math.sqrt(Oi[0]*Oi[0]+Oi[1]*Oi[1]);vi=Math.min(Rt,(Le-na)/(ta-1)),ki=Math.min(Rt,(Qe-na)/(ta+1))}if(null!=bn){var aa=$a(null==pr?[$n,Gn]:[pr,dr],[$t,en],Qe,ki,Nt),ha=$a([bn,Cn],[$n,Gn],Qe,ki,Nt);Rt===ki?fi.push("M",aa[0],"A",ki,",",ki," 0 0,",Ft," ",aa[1],"A",Qe,",",Qe," 0 ",1-Nt^mi(aa[1][0],aa[1][1],ha[1][0],ha[1][1]),",",Nt," ",ha[1],"A",ki,",",ki," 0 0,",Ft," ",ha[0]):fi.push("M",aa[0],"A",ki,",",ki," 0 1,",Ft," ",ha[0])}else fi.push("M",$t,",",en);if(null!=pr){var Ca=$a([$t,en],[pr,dr],Le,-vi,Nt),fo=$a([$n,Gn],null==bn?[$t,en]:[bn,Cn],Le,-vi,Nt);Rt===vi?fi.push("L",fo[0],"A",vi,",",vi," 0 0,",Ft," ",fo[1],"A",Le,",",Le," 0 ",Nt^mi(fo[1][0],fo[1][1],Ca[1][0],Ca[1][1]),",",1-Nt," ",Ca[1],"A",vi,",",vi," 0 0,",Ft," ",Ca[0]):fi.push("L",fo[0],"A",vi,",",vi," 0 0,",Ft," ",Ca[0])}else fi.push("L",$n,",",Gn)}else fi.push("M",$t,",",en),null!=bn&&fi.push("A",Qe,",",Qe," 0 ",Mi,",",Nt," ",bn,",",Cn),fi.push("L",$n,",",Gn),null!=pr&&fi.push("A",Le,",",Le," 0 ",lr,",",1-Nt," ",pr,",",dr);return fi.push("Z"),fi.join("")}function De(Le,Qe){return"M0,"+Le+"A"+Le+","+Le+" 0 1,"+Qe+" 0,"+-Le+"A"+Le+","+Le+" 0 1,"+Qe+" 0,"+Le}return Ae.innerRadius=function(Le){return arguments.length?(ge=qn(Le),Ae):ge},Ae.outerRadius=function(Le){return arguments.length?(O=qn(Le),Ae):O},Ae.cornerRadius=function(Le){return arguments.length?(j=qn(Le),Ae):j},Ae.padRadius=function(Le){return arguments.length?(U=Le==Ea?Ea:qn(Le),Ae):U},Ae.startAngle=function(Le){return arguments.length?($=qn(Le),Ae):$},Ae.endAngle=function(Le){return arguments.length?(le=qn(Le),Ae):le},Ae.padAngle=function(Le){return arguments.length?(me=qn(Le),Ae):me},Ae.centroid=function(){var Le=(+ge.apply(this,arguments)+ +O.apply(this,arguments))/2,Qe=(+$.apply(this,arguments)+ +le.apply(this,arguments))/2-it;return[Math.cos(Qe)*Le,Math.sin(Qe)*Le]},Ae};var Ea="auto";function va(ge){return ge.innerRadius}function Ki(ge){return ge.outerRadius}function Ar(ge){return ge.startAngle}function Di(ge){return ge.endAngle}function ea(ge){return ge&&ge.padAngle}function mi(ge,O,j,U){return(ge-j)*O-(O-U)*ge>0?0:1}function $a(ge,O,j,U,$){var le=ge[0]-O[0],me=ge[1]-O[1],Ae=($?U:-U)/Math.sqrt(le*le+me*me),De=Ae*me,Le=-Ae*le,Qe=ge[0]+De,rt=ge[1]+Le,dt=O[0]+De,Pt=O[1]+Le,Nt=(Qe+dt)/2,Rt=(rt+Pt)/2,Ft=dt-Qe,It=Pt-rt,Xt=Ft*Ft+It*It,$t=j-U,en=Qe*Pt-dt*rt,bn=(It<0?-1:1)*Math.sqrt(Math.max(0,$t*$t*Xt-en*en)),Cn=(en*It-Ft*bn)/Xt,$n=(-en*Ft-It*bn)/Xt,Gn=(en*It+Ft*bn)/Xt,pr=(-en*Ft+It*bn)/Xt,dr=Cn-Nt,Er=$n-Rt,wr=Gn-Nt,fi=pr-Rt;return dr*dr+Er*Er>wr*wr+fi*fi&&(Cn=Gn,$n=pr),[[Cn-De,$n-Le],[Cn*j/$t,$n*j/$t]]}function Wo(){return!0}function Fs(ge){var O=br,j=Dr,U=Wo,$=Js,le=$.key,me=.7;function Ae(De){var Le,Qe=[],rt=[],dt=-1,Pt=De.length,Nt=qn(O),Rt=qn(j);function Ft(){Qe.push("M",$(ge(rt),me))}for(;++dt<Pt;)U.call(this,Le=De[dt],dt)?rt.push([+Nt.call(this,Le,dt),+Rt.call(this,Le,dt)]):rt.length&&(Ft(),rt=[]);return rt.length&&Ft(),Qe.length?Qe.join(""):null}return Ae.x=function(De){return arguments.length?(O=De,Ae):O},Ae.y=function(De){return arguments.length?(j=De,Ae):j},Ae.defined=function(De){return arguments.length?(U=De,Ae):U},Ae.interpolate=function(De){return arguments.length?(le="function"==typeof De?$=De:($=bl.get(De)||Js).key,Ae):le},Ae.tension=function(De){return arguments.length?(me=De,Ae):me},Ae}i.svg.line=function(){return Fs(B)};var bl=i.map({linear:Js,"linear-closed":la,step:function(ge){for(var O=0,j=ge.length,U=ge[0],$=[U[0],",",U[1]];++O<j;)$.push("H",(U[0]+(U=ge[O])[0])/2,"V",U[1]);return j>1&&$.push("H",U[0]),$.join("")},"step-before":Vo,"step-after":qs,basis:So,"basis-open":function(ge){if(ge.length<4)return Js(ge);for(var O,j=[],U=-1,$=ge.length,le=[0],me=[0];++U<3;)le.push((O=ge[U])[0]),me.push(O[1]);for(j.push(so(Ks,le)+","+so(Ks,me)),--U;++U<$;)O=ge[U],le.shift(),le.push(O[0]),me.shift(),me.push(O[1]),yu(j,le,me);return j.join("")},"basis-closed":function(ge){for(var O,j,U=-1,$=ge.length,le=$+4,me=[],Ae=[];++U<4;)me.push((j=ge[U%$])[0]),Ae.push(j[1]);for(O=[so(Ks,me),",",so(Ks,Ae)],--U;++U<le;)j=ge[U%$],me.shift(),me.push(j[0]),Ae.shift(),Ae.push(j[1]),yu(O,me,Ae);return O.join("")},bundle:function(ge,O){var j=ge.length-1;if(j)for(var U,$,le=ge[0][0],me=ge[0][1],Ae=ge[j][0]-le,De=ge[j][1]-me,Le=-1;++Le<=j;)(U=ge[Le])[0]=O*U[0]+(1-O)*(le+($=Le/j)*Ae),U[1]=O*U[1]+(1-O)*(me+$*De);return So(ge)},cardinal:function(ge,O){return ge.length<3?Js(ge):ge[0]+ja(ge,Va(ge,O))},"cardinal-open":function(ge,O){return ge.length<4?Js(ge):ge[1]+ja(ge.slice(1,-1),Va(ge,O))},"cardinal-closed":function(ge,O){return ge.length<3?la(ge):ge[0]+ja((ge.push(ge[0]),ge),Va([ge[ge.length-2]].concat(ge,[ge[1]]),O))},monotone:function(ge){return ge.length<3?Js(ge):ge[0]+ja(ge,function(O){for(var j,U,$,le,me=[],Ae=function(Qe){for(var rt=0,dt=Qe.length-1,Pt=[],Nt=Qe[0],Rt=Qe[1],Ft=Pt[0]=vu(Nt,Rt);++rt<dt;)Pt[rt]=(Ft+(Ft=vu(Nt=Rt,Rt=Qe[rt+1])))/2;return Pt[rt]=Ft,Pt}(O),De=-1,Le=O.length-1;++De<Le;)j=vu(O[De],O[De+1]),x(j)<Bt?Ae[De]=Ae[De+1]=0:(le=(U=Ae[De]/j)*U+($=Ae[De+1]/j)*$)>9&&(le=3*j/Math.sqrt(le),Ae[De]=le*U,Ae[De+1]=le*$);for(De=-1;++De<=Le;)le=(O[Math.min(Le,De+1)][0]-O[Math.max(0,De-1)][0])/(6*(1+Ae[De]*Ae[De])),me.push([le||0,Ae[De]*le||0]);return me}(ge))}});function Js(ge){return ge.length>1?ge.join("L"):ge+"Z"}function la(ge){return ge.join("L")+"Z"}function Vo(ge){for(var O=0,j=ge.length,U=ge[0],$=[U[0],",",U[1]];++O<j;)$.push("V",(U=ge[O])[1],"H",U[0]);return $.join("")}function qs(ge){for(var O=0,j=ge.length,U=ge[0],$=[U[0],",",U[1]];++O<j;)$.push("H",(U=ge[O])[0],"V",U[1]);return $.join("")}function ja(ge,O){if(O.length<1||ge.length!=O.length&&ge.length!=O.length+2)return Js(ge);var j=ge.length!=O.length,U="",$=ge[0],le=ge[1],me=O[0],Ae=me,De=1;if(j&&(U+="Q"+(le[0]-2*me[0]/3)+","+(le[1]-2*me[1]/3)+","+le[0]+","+le[1],$=ge[1],De=2),O.length>1){le=ge[De],De++,U+="C"+($[0]+me[0])+","+($[1]+me[1])+","+(le[0]-(Ae=O[1])[0])+","+(le[1]-Ae[1])+","+le[0]+","+le[1];for(var Le=2;Le<O.length;Le++,De++)U+="S"+((le=ge[De])[0]-(Ae=O[Le])[0])+","+(le[1]-Ae[1])+","+le[0]+","+le[1]}if(j){var Qe=ge[De];U+="Q"+(le[0]+2*Ae[0]/3)+","+(le[1]+2*Ae[1]/3)+","+Qe[0]+","+Qe[1]}return U}function Va(ge,O){for(var j,U=[],$=(1-O)/2,le=ge[0],me=ge[1],Ae=1,De=ge.length;++Ae<De;)j=le,le=me,U.push([$*((me=ge[Ae])[0]-j[0]),$*(me[1]-j[1])]);return U}function So(ge){if(ge.length<3)return Js(ge);var O=1,j=ge.length,U=ge[0],$=U[0],le=U[1],me=[$,$,$,(U=ge[1])[0]],Ae=[le,le,le,U[1]],De=[$,",",le,"L",so(Ks,me),",",so(Ks,Ae)];for(ge.push(ge[j-1]);++O<=j;)U=ge[O],me.shift(),me.push(U[0]),Ae.shift(),Ae.push(U[1]),yu(De,me,Ae);return ge.pop(),De.push("L",U),De.join("")}function so(ge,O){return ge[0]*O[0]+ge[1]*O[1]+ge[2]*O[2]+ge[3]*O[3]}bl.forEach(function(ge,O){O.key=ge,O.closed=/-closed$/.test(ge)});var As=[0,2/3,1/3,0],Fa=[0,1/3,2/3,0],Ks=[0,1/6,2/3,1/6];function yu(ge,O,j){ge.push("C",so(As,O),",",so(As,j),",",so(Fa,O),",",so(Fa,j),",",so(Ks,O),",",so(Ks,j))}function vu(ge,O){return(O[1]-ge[1])/(O[0]-ge[0])}function Uc(ge){for(var O,j,U,$=-1,le=ge.length;++$<le;)j=(O=ge[$])[0],U=O[1]-it,O[0]=j*Math.cos(U),O[1]=j*Math.sin(U);return ge}function ns(ge){var O=br,j=br,U=0,$=Dr,le=Wo,me=Js,Ae=me.key,De=me,Le="L",Qe=.7;function rt(dt){var Pt,Nt,Rt,Ft=[],It=[],Xt=[],$t=-1,en=dt.length,bn=qn(O),Cn=qn(U),$n=O===j?function(){return Nt}:qn(j),Gn=U===$?function(){return Rt}:qn($);function pr(){Ft.push("M",me(ge(Xt),Qe),Le,De(ge(It.reverse()),Qe),"Z")}for(;++$t<en;)le.call(this,Pt=dt[$t],$t)?(It.push([Nt=+bn.call(this,Pt,$t),Rt=+Cn.call(this,Pt,$t)]),Xt.push([+$n.call(this,Pt,$t),+Gn.call(this,Pt,$t)])):It.length&&(pr(),It=[],Xt=[]);return It.length&&pr(),Ft.length?Ft.join(""):null}return rt.x=function(dt){return arguments.length?(O=j=dt,rt):j},rt.x0=function(dt){return arguments.length?(O=dt,rt):O},rt.x1=function(dt){return arguments.length?(j=dt,rt):j},rt.y=function(dt){return arguments.length?(U=$=dt,rt):$},rt.y0=function(dt){return arguments.length?(U=dt,rt):U},rt.y1=function(dt){return arguments.length?($=dt,rt):$},rt.defined=function(dt){return arguments.length?(le=dt,rt):le},rt.interpolate=function(dt){return arguments.length?(Ae="function"==typeof dt?me=dt:(me=bl.get(dt)||Js).key,De=me.reverse||me,Le=me.closed?"M":"L",rt):Ae},rt.tension=function(dt){return arguments.length?(Qe=dt,rt):Qe},rt}function lc(ge){return ge.source}function ds(ge){return ge.target}function ql(ge){return ge.radius}function Gi(ge){return[ge.x,ge.y]}function ia(ge){return function(){var O=ge.apply(this,arguments),j=O[0],U=O[1]-it;return[j*Math.cos(U),j*Math.sin(U)]}}function Xu(){return 64}function wc(){return"circle"}function au(ge){var O=Math.sqrt(ge/gn);return"M0,"+O+"A"+O+","+O+" 0 1,1 0,"+-O+"A"+O+","+O+" 0 1,1 0,"+O+"Z"}i.svg.line.radial=function(){var ge=Fs(Uc);return ge.radius=ge.x,delete ge.x,ge.angle=ge.y,delete ge.y,ge},Vo.reverse=qs,qs.reverse=Vo,i.svg.area=function(){return ns(B)},i.svg.area.radial=function(){var ge=ns(Uc);return ge.radius=ge.x,delete ge.x,ge.innerRadius=ge.x0,delete ge.x0,ge.outerRadius=ge.x1,delete ge.x1,ge.angle=ge.y,delete ge.y,ge.startAngle=ge.y0,delete ge.y0,ge.endAngle=ge.y1,delete ge.y1,ge},i.svg.chord=function(){var ge=lc,O=ds,j=ql,U=Ar,$=Di;function le(Le,Qe){var rt,dt,Pt=me(this,ge,Le,Qe),Nt=me(this,O,Le,Qe);return"M"+Pt.p0+Ae(Pt.r,Pt.p1,Pt.a1-Pt.a0)+((rt=Pt).a0==(dt=Nt).a0&&rt.a1==dt.a1?De(0,0,0,Pt.p0):De(0,0,0,Nt.p0)+Ae(Nt.r,Nt.p1,Nt.a1-Nt.a0)+De(0,0,0,Pt.p0))+"Z"}function me(Le,Qe,rt,dt){var Pt=Qe.call(Le,rt,dt),Nt=j.call(Le,Pt,dt),Rt=U.call(Le,Pt,dt)-it,Ft=$.call(Le,Pt,dt)-it;return{r:Nt,a0:Rt,a1:Ft,p0:[Nt*Math.cos(Rt),Nt*Math.sin(Rt)],p1:[Nt*Math.cos(Ft),Nt*Math.sin(Ft)]}}function Ae(Le,Qe,rt){return"A"+Le+","+Le+" 0 "+ +(rt>gn)+",1 "+Qe}function De(Le,Qe,rt,dt){return"Q 0,0 "+dt}return le.radius=function(Le){return arguments.length?(j=qn(Le),le):j},le.source=function(Le){return arguments.length?(ge=qn(Le),le):ge},le.target=function(Le){return arguments.length?(O=qn(Le),le):O},le.startAngle=function(Le){return arguments.length?(U=qn(Le),le):U},le.endAngle=function(Le){return arguments.length?($=qn(Le),le):$},le},i.svg.diagonal=function(){var ge=lc,O=ds,j=Gi;function U($,le){var me=ge.call(this,$,le),Ae=O.call(this,$,le),De=(me.y+Ae.y)/2,Le=[me,{x:me.x,y:De},{x:Ae.x,y:De},Ae];return"M"+(Le=Le.map(j))[0]+"C"+Le[1]+" "+Le[2]+" "+Le[3]}return U.source=function($){return arguments.length?(ge=qn($),U):ge},U.target=function($){return arguments.length?(O=qn($),U):O},U.projection=function($){return arguments.length?(j=$,U):j},U},i.svg.diagonal.radial=function(){var ge=i.svg.diagonal(),O=Gi,j=ge.projection;return ge.projection=function(U){return arguments.length?j(ia(O=U)):O},ge},i.svg.symbol=function(){var ge=wc,O=Xu;function j(U,$){return(_l.get(ge.call(this,U,$))||au)(O.call(this,U,$))}return j.type=function(U){return arguments.length?(ge=qn(U),j):ge},j.size=function(U){return arguments.length?(O=qn(U),j):O},j};var _l=i.map({circle:au,cross:function(ge){var O=Math.sqrt(ge/5)/2;return"M"+-3*O+","+-O+"H"+-O+"V"+-3*O+"H"+O+"V"+-O+"H"+3*O+"V"+O+"H"+O+"V"+3*O+"H"+-O+"V"+O+"H"+-3*O+"Z"},diamond:function(ge){var O=Math.sqrt(ge/(2*Tc)),j=O*Tc;return"M0,"+-O+"L"+j+",0 0,"+O+" "+-j+",0Z"},square:function(ge){var O=Math.sqrt(ge)/2;return"M"+-O+","+-O+"L"+O+","+-O+" "+O+","+O+" "+-O+","+O+"Z"},"triangle-down":function(ge){var O=Math.sqrt(ge/Ll),j=O*Ll/2;return"M0,"+j+"L"+O+","+-j+" "+-O+","+-j+"Z"},"triangle-up":function(ge){var O=Math.sqrt(ge/Ll),j=O*Ll/2;return"M0,"+-j+"L"+O+","+j+" "+-O+","+j+"Z"}});i.svg.symbolTypes=_l.keys();var Ll=Math.sqrt(3),Tc=Math.tan(30*qt);fe.transition=function(ge){for(var O,j,U=xl||++Ju,$=kc(ge),le=[],me=_o||{time:Date.now(),ease:Ru,delay:0,duration:250},Ae=-1,De=this.length;++Ae<De;){le.push(O=[]);for(var Le=this[Ae],Qe=-1,rt=Le.length;++Qe<rt;)(j=Le[Qe])&&Fu(j,Qe,$,U,me),O.push(j)}return ba(le,$,U)},fe.interrupt=function(ge){return this.each(null==ge?Ac:Ja(kc(ge)))};var Ac=Ja(kc());function Ja(ge){return function(){var O,j,U;(O=this[ge])&&(U=O[j=O.active])&&(U.timer.c=null,U.timer.t=NaN,--O.count?delete O[j]:delete this[ge],O.active+=.5,U.event&&U.event.interrupt.call(this,this.__data__,U.index))}}function ba(ge,O,j){return W(ge,ps),ge.namespace=O,ge.id=j,ge}var xl,_o,ps=[],Ju=0;function Mc(ge,O,j,U){var $=ge.id,le=ge.namespace;return Xe(ge,"function"==typeof j?function(me,Ae,De){me[le][$].tween.set(O,U(j.call(me,me.__data__,Ae,De)))}:(j=U(j),function(me){me[le][$].tween.set(O,j)}))}function uc(ge){return null==ge&&(ge=""),function(){this.textContent=ge}}function kc(ge){return null==ge?"__transition__":"__transition_"+ge+"__"}function Fu(ge,O,j,U,$){var le,me,Ae,De,Le,Qe=ge[j]||(ge[j]={active:0,count:0}),rt=Qe[U];function dt(Nt){var Rt=Qe.active,Ft=Qe[Rt];for(var It in Ft&&(Ft.timer.c=null,Ft.timer.t=NaN,--Qe.count,delete Qe[Rt],Ft.event&&Ft.event.interrupt.call(ge,ge.__data__,Ft.index)),Qe)if(+It<U){var Xt=Qe[It];Xt.timer.c=null,Xt.timer.t=NaN,--Qe.count,delete Qe[It]}me.c=Pt,ir(function(){return me.c&&Pt(Nt||1)&&(me.c=null,me.t=NaN),1},0,le),Qe.active=U,rt.event&&rt.event.start.call(ge,ge.__data__,O),Le=[],rt.tween.forEach(function($t,en){(en=en.call(ge,ge.__data__,O))&&Le.push(en)}),De=rt.ease,Ae=rt.duration}function Pt(Nt){for(var Rt=Nt/Ae,Ft=De(Rt),It=Le.length;It>0;)Le[--It].call(ge,Ft);if(Rt>=1)return rt.event&&rt.event.end.call(ge,ge.__data__,O),--Qe.count?delete Qe[U]:delete ge[j],1}rt||(me=ir(function(Nt){var Rt=rt.delay;if(me.t=Rt+le,Rt<=Nt)return dt(Nt-Rt);me.c=dt},0,le=$.time),rt=Qe[U]={tween:new C,time:le,timer:me,delay:$.delay,duration:$.duration,ease:$.ease,index:O},$=null,++Qe.count)}ps.call=fe.call,ps.empty=fe.empty,ps.node=fe.node,ps.size=fe.size,i.transition=function(ge,O){return ge&&ge.transition?xl?ge.transition(O):ge:i.selection().transition(ge)},i.transition.prototype=ps,ps.select=function(ge){var O,j,U,$=this.id,le=this.namespace,me=[];ge=he(ge);for(var Ae=-1,De=this.length;++Ae<De;){me.push(O=[]);for(var Le=this[Ae],Qe=-1,rt=Le.length;++Qe<rt;)(U=Le[Qe])&&(j=ge.call(U,U.__data__,Qe,Ae))?("__data__"in U&&(j.__data__=U.__data__),Fu(j,Qe,le,$,U[le][$]),O.push(j)):O.push(null)}return ba(me,le,$)},ps.selectAll=function(ge){var O,j,U,$,le,me=this.id,Ae=this.namespace,De=[];ge=de(ge);for(var Le=-1,Qe=this.length;++Le<Qe;)for(var rt=this[Le],dt=-1,Pt=rt.length;++dt<Pt;)if(U=rt[dt]){le=U[Ae][me],j=ge.call(U,U.__data__,dt,Le),De.push(O=[]);for(var Nt=-1,Rt=j.length;++Nt<Rt;)($=j[Nt])&&Fu($,Nt,Ae,me,le),O.push($)}return ba(De,Ae,me)},ps.filter=function(ge){var O,j,U=[];"function"!=typeof ge&&(ge=Be(ge));for(var $=0,le=this.length;$<le;$++){U.push(O=[]);for(var me,Ae=0,De=(me=this[$]).length;Ae<De;Ae++)(j=me[Ae])&&ge.call(j,j.__data__,Ae,$)&&O.push(j)}return ba(U,this.namespace,this.id)},ps.tween=function(ge,O){var j=this.id,U=this.namespace;return arguments.length<2?this.node()[U][j].tween.get(ge):Xe(this,null==O?function($){$[U][j].tween.remove(ge)}:function($){$[U][j].tween.set(ge,O)})},ps.attr=function(ge,O){if(arguments.length<2){for(O in ge)this.attr(O,ge[O]);return this}var j="transform"==ge?Ts:hs,U=i.ns.qualify(ge);function $(){this.removeAttribute(U)}function le(){this.removeAttributeNS(U.space,U.local)}function me(De){return null==De?$:(De+="",function(){var Le,Qe=this.getAttribute(U);return Qe!==De&&(Le=j(Qe,De),function(rt){this.setAttribute(U,Le(rt))})})}function Ae(De){return null==De?le:(De+="",function(){var Le,Qe=this.getAttributeNS(U.space,U.local);return Qe!==De&&(Le=j(Qe,De),function(rt){this.setAttributeNS(U.space,U.local,Le(rt))})})}return Mc(this,"attr."+ge,O,U.local?Ae:me)},ps.attrTween=function(ge,O){var j=i.ns.qualify(ge);return this.tween("attr."+ge,j.local?function(U,$){var le=O.call(this,U,$,this.getAttributeNS(j.space,j.local));return le&&function(me){this.setAttributeNS(j.space,j.local,le(me))}}:function(U,$){var le=O.call(this,U,$,this.getAttribute(j));return le&&function(me){this.setAttribute(j,le(me))}})},ps.style=function(ge,O,j){var U=arguments.length;if(U<3){if("string"!=typeof ge){for(j in U<2&&(O=""),ge)this.style(j,ge[j],O);return this}j=""}function $(){this.style.removeProperty(ge)}function le(me){return null==me?$:(me+="",function(){var Ae,De=u(this).getComputedStyle(this,null).getPropertyValue(ge);return De!==me&&(Ae=hs(De,me),function(Le){this.style.setProperty(ge,Ae(Le),j)})})}return Mc(this,"style."+ge,O,le)},ps.styleTween=function(ge,O,j){function U($,le){var me=O.call(this,$,le,u(this).getComputedStyle(this,null).getPropertyValue(ge));return me&&function(Ae){this.style.setProperty(ge,me(Ae),j)}}return arguments.length<3&&(j=""),this.tween("style."+ge,U)},ps.text=function(ge){return Mc(this,"text",ge,uc)},ps.remove=function(){var ge=this.namespace;return this.each("end.transition",function(){var O;this[ge].count<2&&(O=this.parentNode)&&O.removeChild(this)})},ps.ease=function(ge){var O=this.id,j=this.namespace;return arguments.length<1?this.node()[j][O].ease:("function"!=typeof ge&&(ge=i.ease.apply(i,arguments)),Xe(this,function(U){U[j][O].ease=ge}))},ps.delay=function(ge){var O=this.id,j=this.namespace;return arguments.length<1?this.node()[j][O].delay:Xe(this,"function"==typeof ge?function(U,$,le){U[j][O].delay=+ge.call(U,U.__data__,$,le)}:(ge=+ge,function(U){U[j][O].delay=ge}))},ps.duration=function(ge){var O=this.id,j=this.namespace;return arguments.length<1?this.node()[j][O].duration:Xe(this,"function"==typeof ge?function(U,$,le){U[j][O].duration=Math.max(1,ge.call(U,U.__data__,$,le))}:(ge=Math.max(1,ge),function(U){U[j][O].duration=ge}))},ps.each=function(ge,O){var j=this.id,U=this.namespace;if(arguments.length<2){var $=_o,le=xl;try{xl=j,Xe(this,function(me,Ae,De){_o=me[U][j],ge.call(me,me.__data__,Ae,De)})}finally{_o=$,xl=le}}else Xe(this,function(me){var Ae=me[U][j];(Ae.event||(Ae.event=i.dispatch("start","end","interrupt"))).on(ge,O)});return this},ps.transition=function(){for(var ge,O,j,U=this.id,$=++Ju,le=this.namespace,me=[],Ae=0,De=this.length;Ae<De;Ae++){me.push(ge=[]);for(var Le,Qe=0,rt=(Le=this[Ae]).length;Qe<rt;Qe++)(O=Le[Qe])&&Fu(O,Qe,le,$,{time:(j=O[le][U]).time,ease:j.ease,delay:j.delay+j.duration,duration:j.duration}),ge.push(O)}return ba(me,le,$)},i.svg.axis=function(){var ge,O=i.scale.linear(),j=Dc,U=6,$=6,le=3,me=[10],Ae=null;function De(Le){Le.each(function(){var Qe,rt=i.select(this),dt=this.__chart__||O,Pt=this.__chart__=O.copy(),Nt=null==Ae?Pt.ticks?Pt.ticks.apply(Pt,me):Pt.domain():Ae,Rt=null==ge?Pt.tickFormat?Pt.tickFormat.apply(Pt,me):B:ge,Ft=rt.selectAll(".tick").data(Nt,Pt),It=Ft.enter().insert("g",".domain").attr("class","tick").style("opacity",Bt),Xt=i.transition(Ft.exit()).style("opacity",Bt).remove(),$t=i.transition(Ft.order()).style("opacity",1),en=Math.max(U,0)+le,bn=Tr(Pt),Cn=rt.selectAll(".domain").data([0]),$n=(Cn.enter().append("path").attr("class","domain"),i.transition(Cn));It.append("line"),It.append("text");var Gn,pr,dr,Er,wr=It.select("line"),fi=$t.select("line"),Mi=Ft.select("text").text(Rt),Wi=It.select("text"),lr=$t.select("text"),Ur="top"===j||"left"===j?-1:1;if("bottom"===j||"top"===j?(Qe=ou,Gn="x",dr="y",pr="x2",Er="y2",Mi.attr("dy",Ur<0?"0em":".71em").style("text-anchor","middle"),$n.attr("d","M"+bn[0]+","+Ur*$+"V0H"+bn[1]+"V"+Ur*$)):(Qe=Gc,Gn="y",dr="x",pr="y2",Er="x2",Mi.attr("dy",".32em").style("text-anchor",Ur<0?"end":"start"),$n.attr("d","M"+Ur*$+","+bn[0]+"H0V"+bn[1]+"H"+Ur*$)),wr.attr(Er,Ur*U),Wi.attr(dr,Ur*en),fi.attr(pr,0).attr(Er,Ur*U),lr.attr(Gn,0).attr(dr,Ur*en),Pt.rangeBand){var ki=Pt,vi=ki.rangeBand()/2;dt=Pt=function(Oi){return ki(Oi)+vi}}else dt.rangeBand?dt=Pt:Xt.call(Qe,Pt,dt);It.call(Qe,dt,Pt),$t.call(Qe,Pt,Pt)})}return De.scale=function(Le){return arguments.length?(O=Le,De):O},De.orient=function(Le){return arguments.length?(j=Le in Hc?Le+"":Dc,De):j},De.ticks=function(){return arguments.length?(me=b(arguments),De):me},De.tickValues=function(Le){return arguments.length?(Ae=Le,De):Ae},De.tickFormat=function(Le){return arguments.length?(ge=Le,De):ge},De.tickSize=function(Le){var Qe=arguments.length;return Qe?(U=+Le,$=+arguments[Qe-1],De):U},De.innerTickSize=function(Le){return arguments.length?(U=+Le,De):U},De.outerTickSize=function(Le){return arguments.length?($=+Le,De):$},De.tickPadding=function(Le){return arguments.length?(le=+Le,De):le},De.tickSubdivide=function(){return arguments.length&&De},De};var Dc="bottom",Hc={top:1,right:1,bottom:1,left:1};function ou(ge,O,j){ge.attr("transform",function(U){var $=O(U);return"translate("+(isFinite($)?$:j(U))+",0)"})}function Gc(ge,O,j){ge.attr("transform",function(U){var $=O(U);return"translate(0,"+(isFinite($)?$:j(U))+")"})}i.svg.brush=function(){var ge,O,j=re(Qe,"brushstart","brush","brushend"),U=null,$=null,le=[0,0],me=[0,0],Ae=!0,De=!0,Le=Qs[0];function Qe(Rt){Rt.each(function(){var Ft=i.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Nt).on("touchstart.brush",Nt),It=Ft.selectAll(".background").data([0]);It.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Ft.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Xt=Ft.selectAll(".resize").data(Le,B);Xt.exit().remove(),Xt.enter().append("g").attr("class",function(Cn){return"resize "+Cn}).style("cursor",function(Cn){return cc[Cn]}).append("rect").attr("x",function(Cn){return/[ew]$/.test(Cn)?-3:null}).attr("y",function(Cn){return/^[ns]/.test(Cn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Xt.style("display",Qe.empty()?"none":null);var $t,en=i.transition(Ft),bn=i.transition(It);U&&($t=Tr(U),bn.attr("x",$t[0]).attr("width",$t[1]-$t[0]),dt(en)),$&&($t=Tr($),bn.attr("y",$t[0]).attr("height",$t[1]-$t[0]),Pt(en)),rt(en)})}function rt(Rt){Rt.selectAll(".resize").attr("transform",function(Ft){return"translate("+le[+/e$/.test(Ft)]+","+me[+/^s/.test(Ft)]+")"})}function dt(Rt){Rt.select(".extent").attr("x",le[0]),Rt.selectAll(".extent,.n>rect,.s>rect").attr("width",le[1]-le[0])}function Pt(Rt){Rt.select(".extent").attr("y",me[0]),Rt.selectAll(".extent,.e>rect,.w>rect").attr("height",me[1]-me[0])}function Nt(){var Rt,Ft,It=this,Xt=i.select(i.event.target),$t=j.of(It,arguments),en=i.select(It),bn=Xt.datum(),Cn=!/^(n|s)$/.test(bn)&&U,$n=!/^(e|w)$/.test(bn)&&$,Gn=Xt.classed("extent"),pr=Ht(It),dr=i.mouse(It),Er=i.select(u(It)).on("keydown.brush",Mi).on("keyup.brush",Wi);if(i.event.changedTouches?Er.on("touchmove.brush",lr).on("touchend.brush",ki):Er.on("mousemove.brush",lr).on("mouseup.brush",ki),en.interrupt().selectAll("*").interrupt(),Gn)dr[0]=le[0]-dr[0],dr[1]=me[0]-dr[1];else if(bn){var wr=+/w$/.test(bn),fi=+/^n/.test(bn);Ft=[le[1-wr]-dr[0],me[1-fi]-dr[1]],dr[0]=le[wr],dr[1]=me[fi]}else i.event.altKey&&(Rt=dr.slice());function Mi(){32==i.event.keyCode&&(Gn||(Rt=null,dr[0]-=le[1],dr[1]-=me[1],Gn=2),K())}function Wi(){32==i.event.keyCode&&2==Gn&&(dr[0]+=le[1],dr[1]+=me[1],Gn=0,K())}function lr(){var vi=i.mouse(It),Oi=!1;Ft&&(vi[0]+=Ft[0],vi[1]+=Ft[1]),Gn||(i.event.altKey?(Rt||(Rt=[(le[0]+le[1])/2,(me[0]+me[1])/2]),dr[0]=le[+(vi[0]<Rt[0])],dr[1]=me[+(vi[1]<Rt[1])]):Rt=null),Cn&&Ur(vi,U,0)&&(dt(en),Oi=!0),$n&&Ur(vi,$,1)&&(Pt(en),Oi=!0),Oi&&(rt(en),$t({type:"brush",mode:Gn?"move":"resize"}))}function Ur(vi,Oi,$i){var da,Ii,sa=Tr(Oi),ta=sa[0],na=sa[1],aa=dr[$i],ha=$i?me:le,Ca=ha[1]-ha[0];if(Gn&&(ta-=aa,na-=Ca+aa),da=($i?De:Ae)?Math.max(ta,Math.min(na,vi[$i])):vi[$i],Gn?Ii=(da+=aa)+Ca:(Rt&&(aa=Math.max(ta,Math.min(na,2*Rt[$i]-da))),aa<da?(Ii=da,da=aa):Ii=aa),ha[0]!=da||ha[1]!=Ii)return $i?O=null:ge=null,ha[0]=da,ha[1]=Ii,!0}function ki(){lr(),en.style("pointer-events","all").selectAll(".resize").style("display",Qe.empty()?"none":null),i.select("body").style("cursor",null),Er.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),pr(),$t({type:"brushend"})}en.style("pointer-events","none").selectAll(".resize").style("display",null),i.select("body").style("cursor",Xt.style("cursor")),$t({type:"brushstart"}),lr()}return Qe.event=function(Rt){Rt.each(function(){var Ft=j.of(this,arguments),It={x:le,y:me,i:ge,j:O},Xt=this.__chart__||It;this.__chart__=It,xl?i.select(this).transition().each("start.brush",function(){ge=Xt.i,O=Xt.j,le=Xt.x,me=Xt.y,Ft({type:"brushstart"})}).tween("brush:brush",function(){var $t=mo(le,It.x),en=mo(me,It.y);return ge=O=null,function(bn){le=It.x=$t(bn),me=It.y=en(bn),Ft({type:"brush",mode:"resize"})}}).each("end.brush",function(){ge=It.i,O=It.j,Ft({type:"brush",mode:"resize"}),Ft({type:"brushend"})}):(Ft({type:"brushstart"}),Ft({type:"brush",mode:"resize"}),Ft({type:"brushend"}))})},Qe.x=function(Rt){return arguments.length?(Le=Qs[!(U=Rt)<<1|!$],Qe):U},Qe.y=function(Rt){return arguments.length?(Le=Qs[!U<<1|!($=Rt)],Qe):$},Qe.clamp=function(Rt){return arguments.length?(U&&$?(Ae=!!Rt[0],De=!!Rt[1]):U?Ae=!!Rt:$&&(De=!!Rt),Qe):U&&$?[Ae,De]:U?Ae:$?De:null},Qe.extent=function(Rt){var Ft,It,Xt,$t,en;return arguments.length?(U&&(Ft=Rt[0],It=Rt[1],$&&(Ft=Ft[0],It=It[0]),ge=[Ft,It],U.invert&&(Ft=U(Ft),It=U(It)),It<Ft&&(en=Ft,Ft=It,It=en),Ft==le[0]&&It==le[1]||(le=[Ft,It])),$&&(Xt=Rt[0],$t=Rt[1],U&&(Xt=Xt[1],$t=$t[1]),O=[Xt,$t],$.invert&&(Xt=$(Xt),$t=$($t)),$t<Xt&&(en=Xt,Xt=$t,$t=en),Xt==me[0]&&$t==me[1]||(me=[Xt,$t])),Qe):(U&&(ge?(Ft=ge[0],It=ge[1]):(Ft=le[0],It=le[1],U.invert&&(Ft=U.invert(Ft),It=U.invert(It)),It<Ft&&(en=Ft,Ft=It,It=en))),$&&(O?(Xt=O[0],$t=O[1]):(Xt=me[0],$t=me[1],$.invert&&(Xt=$.invert(Xt),$t=$.invert($t)),$t<Xt&&(en=Xt,Xt=$t,$t=en))),U&&$?[[Ft,Xt],[It,$t]]:U?[Ft,It]:$&&[Xt,$t])},Qe.clear=function(){return Qe.empty()||(le=[0,0],me=[0,0],ge=O=null),Qe},Qe.empty=function(){return!!U&&le[0]==le[1]||!!$&&me[0]==me[1]},i.rebind(Qe,j,"on")};var cc={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Qs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function Nu(ge){return JSON.parse(ge.responseText)}function Ec(ge){var O=p.createRange();return O.selectNode(p.body),O.createContextualFragment(ge.responseText)}i.text=nr(function(ge){return ge.responseText}),i.json=function(ge,O){return rr(ge,"application/json",Nu,O)},i.html=function(ge,O){return rr(ge,"text/html",Ec,O)},i.xml=nr(function(ge){return ge.responseXML}),"object"==typeof G&&G.exports?G.exports=i:this.d3=i}).apply(self)},{}],59:[function(h,G,X){"use strict";G.exports=h("./quad")},{"./quad":60}],60:[function(h,G,X){"use strict";var i=h("binary-search-bounds"),m=h("clamp"),b=h("parse-rect"),p=h("array-bounds"),r=h("pick-by-alias"),u=h("defined"),c=h("flatten-vertex-data"),l=h("is-obj"),f=h("dtype"),s=h("math-log2");function o(d,g){for(var y=g[0],v=g[1],_=1/(g[2]-y),w=1/(g[3]-v),x=new Array(d.length),E=0,k=d.length/2;E<k;E++)x[2*E]=m((d[2*E]-y)*_,0,1),x[2*E+1]=m((d[2*E+1]-v)*w,0,1);return x}G.exports=function(d,g){g||(g={}),d=c(d,"float64"),g=r(g,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var y=u(g.maxDepth,255),v=u(g.bounds,p(d,2));v[0]===v[2]&&v[2]++,v[1]===v[3]&&v[3]++;var _,w=o(d,v),x=d.length>>>1;g.dtype||(g.dtype="array"),"string"==typeof g.dtype?_=new(f(g.dtype))(x):g.dtype&&(_=g.dtype,Array.isArray(_)&&(_.length=x));for(var E=0;E<x;++E)_[E]=E;var k=[],C=[],L=[],P=[];!function Y(Q,ne,ae,te,K,q){if(!te.length)return null;var re=k[K]||(k[K]=[]),V=L[K]||(L[K]=[]),W=C[K]||(C[K]=[]),Z=re.length;if(++K>y||q>1073741824){for(var oe=0;oe<te.length;oe++)re.push(te[oe]),V.push(q),W.push(null,null,null,null);return Z}if(re.push(te[0]),V.push(q),te.length<=1)return W.push(null,null,null,null),Z;for(var ie=.5*ae,ue=Q+ie,fe=ne+ie,he=[],de=[],be=[],pe=[],Te=1,ye=te.length;Te<ye;Te++){var ke=te[Te],je=w[2*ke+1];w[2*ke]<ue?je<fe?he.push(ke):de.push(ke):je<fe?be.push(ke):pe.push(ke)}return W.push(Y(Q,ne,ie,he,K,q<<=2),Y(Q,fe,ie,de,K,q+1),Y(ue,ne,ie,be,K,q+2),Y(ue,fe,ie,pe,K,q+3)),Z}(0,0,1,_,0,1);for(var A=0,I=0;I<k.length;I++){var D=k[I];if(_.set)_.set(D,A);else for(var R=0,S=D.length;R<S;R++)_[R+A]=D[R];var N=A+k[I].length;P[I]=[A,N],A=N}return _.range=function(){for(var Y,Q=[],ne=arguments.length;ne--;)Q[ne]=arguments[ne];if(l(Q[Q.length-1])){var ae=Q.pop();Q.length||null==ae.x&&null==ae.l&&null==ae.left||(Q=[ae],Y={}),Y=r(ae,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else Y={};Q.length||(Q=v);var de,te=b.apply(void 0,Q),K=[Math.min(te.x,te.x+te.width),Math.min(te.y,te.y+te.height),Math.max(te.x,te.x+te.width),Math.max(te.y,te.y+te.height)],q=K[0],re=K[1],V=K[2],W=K[3],Z=o([q,re,V,W],v),oe=Z[0],ie=Z[1],ue=Z[2],fe=Z[3],he=u(Y.level,k.length);if(null!=Y.d&&("number"==typeof Y.d?de=[Y.d,Y.d]:Y.d.length&&(de=Y.d),he=Math.min(Math.max(Math.ceil(-s(Math.abs(de[0])/(v[2]-v[0]))),Math.ceil(-s(Math.abs(de[1])/(v[3]-v[1])))),he)),he=Math.min(he,k.length),Y.lod)return B(oe,ie,ue,fe,he);var be=[];function pe(ye,ke,ze,je,Ie,Ce){if(null!==Ie&&null!==Ce&&!(oe>ye+ze||ie>ke+ze||ue<ye||fe<ke||je>=he||Ie===Ce)){var _e=k[je];void 0===Ce&&(Ce=_e.length);for(var we=Ie;we<Ce;we++){var Se=_e[we],Oe=d[2*Se],Be=d[2*Se+1];Oe>=q&&Oe<=V&&Be>=re&&Be<=W&&be.push(Se)}var He=C[je],Xe=He[4*Ie+0],nt=He[4*Ie+1],et=He[4*Ie+2],qe=He[4*Ie+3],Ye=Te(He,Ie+1),ot=.5*ze,at=je+1;pe(ye,ke,ot,at,Xe,nt||et||qe||Ye),pe(ye,ke+ot,ot,at,nt,et||qe||Ye),pe(ye+ot,ke,ot,at,et,qe||Ye),pe(ye+ot,ke+ot,ot,at,qe,Ye)}}function Te(ye,ke){for(var ze=null,je=0;null===ze;)if(ze=ye[4*ke+je],++je>ye.length)return null;return ze}return pe(0,0,1,0,0,1),be},_;function B(Y,Q,ne,ae,te){for(var K=[],q=0;q<te;q++){var re=L[q],V=P[q][0],W=H(Y,Q,q),Z=H(ne,ae,q),oe=i.ge(re,W),ie=i.gt(re,Z,oe,re.length-1);K[q]=[oe+V,ie+V]}return K}function H(Y,Q,ne){for(var ae=1,te=.5,K=.5,q=.5,re=0;re<ne;re++)ae<<=2,ae+=Y<te?Q<K?0:1:Q<K?2:3,q*=.5,te+=Y<te?-q:q,K+=Q<K?-q:q;return ae}}},{"array-bounds":76,"binary-search-bounds":103,clamp:126,defined:179,dtype:184,"flatten-vertex-data":252,"is-obj":456,"math-log2":467,"parse-rect":492,"pick-by-alias":498}],61:[function(h,G,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0});var i=h("@turf/meta");function m(r){var u=0;if(r&&r.length>0){u+=Math.abs(b(r[0]));for(var c=1;c<r.length;c++)u-=Math.abs(b(r[c]))}return u}function b(r){var u,c,l,f,s,o,d=0,g=r.length;if(g>2){for(o=0;o<g;o++)o===g-2?(l=g-2,f=g-1,s=0):o===g-1?(l=g-1,f=0,s=1):(l=o,f=o+1,s=o+2),u=r[l],c=r[f],d+=(p(r[s][0])-p(u[0]))*Math.sin(p(c[1]));d=6378137*d*6378137/2}return d}function p(r){return r*Math.PI/180}X.default=function(r){return i.geomReduce(r,function(u,c){return u+function(l){var f,s=0;switch(l.type){case"Polygon":return m(l.coordinates);case"MultiPolygon":for(f=0;f<l.coordinates.length;f++)s+=m(l.coordinates[f]);return s;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(c)},0)}},{"@turf/meta":63}],62:[function(h,G,X){"use strict";function i(g,y,v){void 0===v&&(v={});var _={type:"Feature"};return(0===v.id||v.id)&&(_.id=v.id),v.bbox&&(_.bbox=v.bbox),_.properties=y||{},_.geometry=g,_}function m(g,y,v){if(void 0===v&&(v={}),!g)throw new Error("coordinates is required");if(!Array.isArray(g))throw new Error("coordinates must be an Array");if(g.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!d(g[0])||!d(g[1]))throw new Error("coordinates must contain numbers");return i({type:"Point",coordinates:g},y,v)}function b(g,y,v){void 0===v&&(v={});for(var _=0,w=g;_<w.length;_++){var x=w[_];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var E=0;E<x[x.length-1].length;E++)if(x[x.length-1][E]!==x[0][E])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:g},y,v)}function p(g,y,v){if(void 0===v&&(v={}),g.length<2)throw new Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:g},y,v)}function r(g,y){void 0===y&&(y={});var v={type:"FeatureCollection"};return y.id&&(v.id=y.id),y.bbox&&(v.bbox=y.bbox),v.features=g,v}function u(g,y,v){return void 0===v&&(v={}),i({type:"MultiLineString",coordinates:g},y,v)}function c(g,y,v){return void 0===v&&(v={}),i({type:"MultiPoint",coordinates:g},y,v)}function l(g,y,v){return void 0===v&&(v={}),i({type:"MultiPolygon",coordinates:g},y,v)}function f(g,y){void 0===y&&(y="kilometers");var v=X.factors[y];if(!v)throw new Error(y+" units is invalid");return g*v}function s(g,y){void 0===y&&(y="kilometers");var v=X.factors[y];if(!v)throw new Error(y+" units is invalid");return g/v}function o(g){return g%(2*Math.PI)*180/Math.PI}function d(g){return!isNaN(g)&&null!==g&&!Array.isArray(g)}Object.defineProperty(X,"__esModule",{value:!0}),X.earthRadius=6371008.8,X.factors={centimeters:100*X.earthRadius,centimetres:100*X.earthRadius,degrees:X.earthRadius/111325,feet:3.28084*X.earthRadius,inches:39.37*X.earthRadius,kilometers:X.earthRadius/1e3,kilometres:X.earthRadius/1e3,meters:X.earthRadius,metres:X.earthRadius,miles:X.earthRadius/1609.344,millimeters:1e3*X.earthRadius,millimetres:1e3*X.earthRadius,nauticalmiles:X.earthRadius/1852,radians:1,yards:1.0936*X.earthRadius},X.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/X.earthRadius,yards:1.0936133},X.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},X.feature=i,X.geometry=function(g,y,v){switch(void 0===v&&(v={}),g){case"Point":return m(y).geometry;case"LineString":return p(y).geometry;case"Polygon":return b(y).geometry;case"MultiPoint":return c(y).geometry;case"MultiLineString":return u(y).geometry;case"MultiPolygon":return l(y).geometry;default:throw new Error(g+" is invalid")}},X.point=m,X.points=function(g,y,v){return void 0===v&&(v={}),r(g.map(function(_){return m(_,y)}),v)},X.polygon=b,X.polygons=function(g,y,v){return void 0===v&&(v={}),r(g.map(function(_){return b(_,y)}),v)},X.lineString=p,X.lineStrings=function(g,y,v){return void 0===v&&(v={}),r(g.map(function(_){return p(_,y)}),v)},X.featureCollection=r,X.multiLineString=u,X.multiPoint=c,X.multiPolygon=l,X.geometryCollection=function(g,y,v){return void 0===v&&(v={}),i({type:"GeometryCollection",geometries:g},y,v)},X.round=function(g,y){if(void 0===y&&(y=0),y&&!(y>=0))throw new Error("precision must be a positive number");var v=Math.pow(10,y||0);return Math.round(g*v)/v},X.radiansToLength=f,X.lengthToRadians=s,X.lengthToDegrees=function(g,y){return o(s(g,y))},X.bearingToAzimuth=function(g){var y=g%360;return y<0&&(y+=360),y},X.radiansToDegrees=o,X.degreesToRadians=function(g){return g%360*Math.PI/180},X.convertLength=function(g,y,v){if(void 0===y&&(y="kilometers"),void 0===v&&(v="kilometers"),!(g>=0))throw new Error("length must be a positive number");return f(s(g,y),v)},X.convertArea=function(g,y,v){if(void 0===y&&(y="meters"),void 0===v&&(v="kilometers"),!(g>=0))throw new Error("area must be a positive number");var _=X.areaFactors[y];if(!_)throw new Error("invalid original units");var w=X.areaFactors[v];if(!w)throw new Error("invalid final units");return g/_*w},X.isNumber=d,X.isObject=function(g){return!!g&&g.constructor===Object},X.validateBBox=function(g){if(!g)throw new Error("bbox is required");if(!Array.isArray(g))throw new Error("bbox must be an Array");if(4!==g.length&&6!==g.length)throw new Error("bbox must be an Array of 4 or 6 numbers");g.forEach(function(y){if(!d(y))throw new Error("bbox must only contain numbers")})},X.validateId=function(g){if(!g)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof g))throw new Error("id must be a number or a string")}},{}],63:[function(h,G,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0});var i=h("@turf/helpers");function m(f,s,o){if(null!==f)for(var d,g,y,v,_,w,x,E,k=0,C=0,L=f.type,P="FeatureCollection"===L,A="Feature"===L,I=P?f.features.length:1,D=0;D<I;D++){_=(E=!!(x=P?f.features[D].geometry:A?f.geometry:f)&&"GeometryCollection"===x.type)?x.geometries.length:1;for(var R=0;R<_;R++){var S=0,N=0;if(null!==(v=E?x.geometries[R]:x)){w=v.coordinates;var B=v.type;switch(k=!o||"Polygon"!==B&&"MultiPolygon"!==B?0:1,B){case null:break;case"Point":if(!1===s(w,C,D,S,N))return!1;C++,S++;break;case"LineString":case"MultiPoint":for(d=0;d<w.length;d++){if(!1===s(w[d],C,D,S,N))return!1;C++,"MultiPoint"===B&&S++}"LineString"===B&&S++;break;case"Polygon":case"MultiLineString":for(d=0;d<w.length;d++){for(g=0;g<w[d].length-k;g++){if(!1===s(w[d][g],C,D,S,N))return!1;C++}"MultiLineString"===B&&S++,"Polygon"===B&&N++}"Polygon"===B&&S++;break;case"MultiPolygon":for(d=0;d<w.length;d++){for(N=0,g=0;g<w[d].length;g++){for(y=0;y<w[d][g].length-k;y++){if(!1===s(w[d][g][y],C,D,S,N))return!1;C++}N++}S++}break;case"GeometryCollection":for(d=0;d<v.geometries.length;d++)if(!1===m(v.geometries[d],s,o))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b(f,s){var o;switch(f.type){case"FeatureCollection":for(o=0;o<f.features.length&&!1!==s(f.features[o].properties,o);o++);break;case"Feature":s(f.properties,0)}}function p(f,s){if("Feature"===f.type)s(f,0);else if("FeatureCollection"===f.type)for(var o=0;o<f.features.length&&!1!==s(f.features[o],o);o++);}function r(f,s){var o,d,g,y,v,_,w,x,E,k,C=0,L="FeatureCollection"===f.type,P="Feature"===f.type,A=L?f.features.length:1;for(o=0;o<A;o++){for(x=L?f.features[o].properties:P?f.properties:{},E=L?f.features[o].bbox:P?f.bbox:void 0,k=L?f.features[o].id:P?f.id:void 0,v=(w=!!(_=L?f.features[o].geometry:P?f.geometry:f)&&"GeometryCollection"===_.type)?_.geometries.length:1,g=0;g<v;g++)if(null!==(y=w?_.geometries[g]:_))switch(y.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===s(y,C,x,E,k))return!1;break;case"GeometryCollection":for(d=0;d<y.geometries.length;d++)if(!1===s(y.geometries[d],C,x,E,k))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===s(null,C,x,E,k))return!1;C++}}function u(f,s){r(f,function(o,d,g,y,v){var _,w=null===o?null:o.type;switch(w){case null:case"Point":case"LineString":case"Polygon":return!1!==s(i.feature(o,g,{bbox:y,id:v}),d,0)&&void 0}switch(w){case"MultiPoint":_="Point";break;case"MultiLineString":_="LineString";break;case"MultiPolygon":_="Polygon"}for(var x=0;x<o.coordinates.length;x++)if(!1===s(i.feature({type:_,coordinates:o.coordinates[x]},g),d,x))return!1})}function c(f,s){u(f,function(o,d,g){var y=0;if(o.geometry){var v=o.geometry.type;if("Point"!==v&&"MultiPoint"!==v){var _,w=0,x=0,E=0;return!1!==m(o,function(k,C,L,P,A){if(void 0===_||d>w||P>x||A>E)return _=k,w=d,x=P,E=A,void(y=0);var I=i.lineString([_,k],o.properties);if(!1===s(I,d,g,A,y))return!1;y++,_=k})&&void 0}}})}function l(f,s){if(!f)throw new Error("geojson is required");u(f,function(o,d,g){if(null!==o.geometry){var v=o.geometry.coordinates;switch(o.geometry.type){case"LineString":if(!1===s(o,d,g,0,0))return!1;break;case"Polygon":for(var _=0;_<v.length;_++)if(!1===s(i.lineString(v[_],o.properties),d,g,_))return!1}}})}X.coordEach=m,X.coordReduce=function(f,s,o,d){var g=o;return m(f,function(y,v,_,w,x){g=0===v&&void 0===o?y:s(g,y,v,_,w,x)},d),g},X.propEach=b,X.propReduce=function(f,s,o){var d=o;return b(f,function(g,y){d=0===y&&void 0===o?g:s(d,g,y)}),d},X.featureEach=p,X.featureReduce=function(f,s,o){var d=o;return p(f,function(g,y){d=0===y&&void 0===o?g:s(d,g,y)}),d},X.coordAll=function(f){var s=[];return m(f,function(o){s.push(o)}),s},X.geomEach=r,X.geomReduce=function(f,s,o){var d=o;return r(f,function(g,y,v,_,w){d=0===y&&void 0===o?g:s(d,g,y,v,_,w)}),d},X.flattenEach=u,X.flattenReduce=function(f,s,o){var d=o;return u(f,function(g,y,v){d=0===y&&0===v&&void 0===o?g:s(d,g,y,v)}),d},X.segmentEach=c,X.segmentReduce=function(f,s,o){var d=o,g=!1;return c(f,function(y,v,_,w,x){d=!1===g&&void 0===o?y:s(d,y,v,_,w,x),g=!0}),d},X.lineEach=l,X.lineReduce=function(f,s,o){var d=o;return l(f,function(g,y,v,_){d=0===y&&void 0===o?g:s(d,g,y,v,_)}),d},X.findSegment=function(f,s){if(!i.isObject(s=s||{}))throw new Error("options is invalid");var o,d=s.featureIndex||0,g=s.multiFeatureIndex||0,y=s.geometryIndex||0,v=s.segmentIndex||0,_=s.properties;switch(f.type){case"FeatureCollection":d<0&&(d=f.features.length+d),_=_||f.features[d].properties,o=f.features[d].geometry;break;case"Feature":_=_||f.properties,o=f.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=f;break;default:throw new Error("geojson is invalid")}if(null===o)return null;var w=o.coordinates;switch(o.type){case"Point":case"MultiPoint":return null;case"LineString":return v<0&&(v=w.length+v-1),i.lineString([w[v],w[v+1]],_,s);case"Polygon":return y<0&&(y=w.length+y),v<0&&(v=w[y].length+v-1),i.lineString([w[y][v],w[y][v+1]],_,s);case"MultiLineString":return g<0&&(g=w.length+g),v<0&&(v=w[g].length+v-1),i.lineString([w[g][v],w[g][v+1]],_,s);case"MultiPolygon":return g<0&&(g=w.length+g),y<0&&(y=w[g].length+y),v<0&&(v=w[g][y].length-v-1),i.lineString([w[g][y][v],w[g][y][v+1]],_,s)}throw new Error("geojson is invalid")},X.findPoint=function(f,s){if(!i.isObject(s=s||{}))throw new Error("options is invalid");var o,d=s.featureIndex||0,g=s.multiFeatureIndex||0,y=s.geometryIndex||0,v=s.coordIndex||0,_=s.properties;switch(f.type){case"FeatureCollection":d<0&&(d=f.features.length+d),_=_||f.features[d].properties,o=f.features[d].geometry;break;case"Feature":_=_||f.properties,o=f.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=f;break;default:throw new Error("geojson is invalid")}if(null===o)return null;var w=o.coordinates;switch(o.type){case"Point":return i.point(w,_,s);case"MultiPoint":return g<0&&(g=w.length+g),i.point(w[g],_,s);case"LineString":return v<0&&(v=w.length+v),i.point(w[v],_,s);case"Polygon":return y<0&&(y=w.length+y),v<0&&(v=w[y].length+v),i.point(w[y][v],_,s);case"MultiLineString":return g<0&&(g=w.length+g),v<0&&(v=w[g].length+v),i.point(w[g][v],_,s);case"MultiPolygon":return g<0&&(g=w.length+g),y<0&&(y=w[g].length+y),v<0&&(v=w[g][y].length-v),i.point(w[g][y][v],_,s)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(h,G,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0});var i=h("@turf/meta");function m(b){var p=[1/0,1/0,-1/0,-1/0];return i.coordEach(b,function(r){p[0]>r[0]&&(p[0]=r[0]),p[1]>r[1]&&(p[1]=r[1]),p[2]<r[0]&&(p[2]=r[0]),p[3]<r[1]&&(p[3]=r[1])}),p}m.default=m,X.default=m},{"@turf/meta":66}],65:[function(h,G,X){arguments[4][62][0].apply(X,arguments)},{dup:62}],66:[function(h,G,X){arguments[4][63][0].apply(X,arguments)},{"@turf/helpers":65,dup:63}],67:[function(h,G,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0});var i=h("@turf/meta"),m=h("@turf/helpers");X.default=function(b,p){void 0===p&&(p={});var r=0,u=0,c=0;return i.coordEach(b,function(l){r+=l[0],u+=l[1],c++}),m.point([r/c,u/c],p.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(h,G,X){"use strict";function i(g,y,v){void 0===v&&(v={});var _={type:"Feature"};return(0===v.id||v.id)&&(_.id=v.id),v.bbox&&(_.bbox=v.bbox),_.properties=y||{},_.geometry=g,_}function m(g,y,v){return void 0===v&&(v={}),i({type:"Point",coordinates:g},y,v)}function b(g,y,v){void 0===v&&(v={});for(var _=0,w=g;_<w.length;_++){var x=w[_];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var E=0;E<x[x.length-1].length;E++)if(x[x.length-1][E]!==x[0][E])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:g},y,v)}function p(g,y,v){if(void 0===v&&(v={}),g.length<2)throw new Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:g},y,v)}function r(g,y){void 0===y&&(y={});var v={type:"FeatureCollection"};return y.id&&(v.id=y.id),y.bbox&&(v.bbox=y.bbox),v.features=g,v}function u(g,y,v){return void 0===v&&(v={}),i({type:"MultiLineString",coordinates:g},y,v)}function c(g,y,v){return void 0===v&&(v={}),i({type:"MultiPoint",coordinates:g},y,v)}function l(g,y,v){return void 0===v&&(v={}),i({type:"MultiPolygon",coordinates:g},y,v)}function f(g,y){void 0===y&&(y="kilometers");var v=X.factors[y];if(!v)throw new Error(y+" units is invalid");return g*v}function s(g,y){void 0===y&&(y="kilometers");var v=X.factors[y];if(!v)throw new Error(y+" units is invalid");return g/v}function o(g){return g%(2*Math.PI)*180/Math.PI}function d(g){return!isNaN(g)&&null!==g&&!Array.isArray(g)&&!/^\s*$/.test(g)}Object.defineProperty(X,"__esModule",{value:!0}),X.earthRadius=6371008.8,X.factors={centimeters:100*X.earthRadius,centimetres:100*X.earthRadius,degrees:X.earthRadius/111325,feet:3.28084*X.earthRadius,inches:39.37*X.earthRadius,kilometers:X.earthRadius/1e3,kilometres:X.earthRadius/1e3,meters:X.earthRadius,metres:X.earthRadius,miles:X.earthRadius/1609.344,millimeters:1e3*X.earthRadius,millimetres:1e3*X.earthRadius,nauticalmiles:X.earthRadius/1852,radians:1,yards:X.earthRadius/1.0936},X.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/X.earthRadius,yards:1/1.0936},X.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},X.feature=i,X.geometry=function(g,y,v){switch(void 0===v&&(v={}),g){case"Point":return m(y).geometry;case"LineString":return p(y).geometry;case"Polygon":return b(y).geometry;case"MultiPoint":return c(y).geometry;case"MultiLineString":return u(y).geometry;case"MultiPolygon":return l(y).geometry;default:throw new Error(g+" is invalid")}},X.point=m,X.points=function(g,y,v){return void 0===v&&(v={}),r(g.map(function(_){return m(_,y)}),v)},X.polygon=b,X.polygons=function(g,y,v){return void 0===v&&(v={}),r(g.map(function(_){return b(_,y)}),v)},X.lineString=p,X.lineStrings=function(g,y,v){return void 0===v&&(v={}),r(g.map(function(_){return p(_,y)}),v)},X.featureCollection=r,X.multiLineString=u,X.multiPoint=c,X.multiPolygon=l,X.geometryCollection=function(g,y,v){return void 0===v&&(v={}),i({type:"GeometryCollection",geometries:g},y,v)},X.round=function(g,y){if(void 0===y&&(y=0),y&&!(y>=0))throw new Error("precision must be a positive number");var v=Math.pow(10,y||0);return Math.round(g*v)/v},X.radiansToLength=f,X.lengthToRadians=s,X.lengthToDegrees=function(g,y){return o(s(g,y))},X.bearingToAzimuth=function(g){var y=g%360;return y<0&&(y+=360),y},X.radiansToDegrees=o,X.degreesToRadians=function(g){return g%360*Math.PI/180},X.convertLength=function(g,y,v){if(void 0===y&&(y="kilometers"),void 0===v&&(v="kilometers"),!(g>=0))throw new Error("length must be a positive number");return f(s(g,y),v)},X.convertArea=function(g,y,v){if(void 0===y&&(y="meters"),void 0===v&&(v="kilometers"),!(g>=0))throw new Error("area must be a positive number");var _=X.areaFactors[y];if(!_)throw new Error("invalid original units");var w=X.areaFactors[v];if(!w)throw new Error("invalid final units");return g/_*w},X.isNumber=d,X.isObject=function(g){return!!g&&g.constructor===Object},X.validateBBox=function(g){if(!g)throw new Error("bbox is required");if(!Array.isArray(g))throw new Error("bbox must be an Array");if(4!==g.length&&6!==g.length)throw new Error("bbox must be an Array of 4 or 6 numbers");g.forEach(function(y){if(!d(y))throw new Error("bbox must only contain numbers")})},X.validateId=function(g){if(!g)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof g))throw new Error("id must be a number or a string")},X.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},X.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},X.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},X.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},X.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},X.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},X.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(h,G,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0});var i=h("@turf/helpers");function m(f,s,o){if(null!==f)for(var d,g,y,v,_,w,x,E,k=0,C=0,L=f.type,P="FeatureCollection"===L,A="Feature"===L,I=P?f.features.length:1,D=0;D<I;D++){_=(E=!!(x=P?f.features[D].geometry:A?f.geometry:f)&&"GeometryCollection"===x.type)?x.geometries.length:1;for(var R=0;R<_;R++){var S=0,N=0;if(null!==(v=E?x.geometries[R]:x)){w=v.coordinates;var B=v.type;switch(k=!o||"Polygon"!==B&&"MultiPolygon"!==B?0:1,B){case null:break;case"Point":if(!1===s(w,C,D,S,N))return!1;C++,S++;break;case"LineString":case"MultiPoint":for(d=0;d<w.length;d++){if(!1===s(w[d],C,D,S,N))return!1;C++,"MultiPoint"===B&&S++}"LineString"===B&&S++;break;case"Polygon":case"MultiLineString":for(d=0;d<w.length;d++){for(g=0;g<w[d].length-k;g++){if(!1===s(w[d][g],C,D,S,N))return!1;C++}"MultiLineString"===B&&S++,"Polygon"===B&&N++}"Polygon"===B&&S++;break;case"MultiPolygon":for(d=0;d<w.length;d++){for(N=0,g=0;g<w[d].length;g++){for(y=0;y<w[d][g].length-k;y++){if(!1===s(w[d][g][y],C,D,S,N))return!1;C++}N++}S++}break;case"GeometryCollection":for(d=0;d<v.geometries.length;d++)if(!1===m(v.geometries[d],s,o))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b(f,s){var o;switch(f.type){case"FeatureCollection":for(o=0;o<f.features.length&&!1!==s(f.features[o].properties,o);o++);break;case"Feature":s(f.properties,0)}}function p(f,s){if("Feature"===f.type)s(f,0);else if("FeatureCollection"===f.type)for(var o=0;o<f.features.length&&!1!==s(f.features[o],o);o++);}function r(f,s){var o,d,g,y,v,_,w,x,E,k,C=0,L="FeatureCollection"===f.type,P="Feature"===f.type,A=L?f.features.length:1;for(o=0;o<A;o++){for(x=L?f.features[o].properties:P?f.properties:{},E=L?f.features[o].bbox:P?f.bbox:void 0,k=L?f.features[o].id:P?f.id:void 0,v=(w=!!(_=L?f.features[o].geometry:P?f.geometry:f)&&"GeometryCollection"===_.type)?_.geometries.length:1,g=0;g<v;g++)if(null!==(y=w?_.geometries[g]:_))switch(y.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===s(y,C,x,E,k))return!1;break;case"GeometryCollection":for(d=0;d<y.geometries.length;d++)if(!1===s(y.geometries[d],C,x,E,k))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===s(null,C,x,E,k))return!1;C++}}function u(f,s){r(f,function(o,d,g,y,v){var _,w=null===o?null:o.type;switch(w){case null:case"Point":case"LineString":case"Polygon":return!1!==s(i.feature(o,g,{bbox:y,id:v}),d,0)&&void 0}switch(w){case"MultiPoint":_="Point";break;case"MultiLineString":_="LineString";break;case"MultiPolygon":_="Polygon"}for(var x=0;x<o.coordinates.length;x++)if(!1===s(i.feature({type:_,coordinates:o.coordinates[x]},g),d,x))return!1})}function c(f,s){u(f,function(o,d,g){var y=0;if(o.geometry){var v=o.geometry.type;if("Point"!==v&&"MultiPoint"!==v){var _,w=0,x=0,E=0;return!1!==m(o,function(k,C,L,P,A){if(void 0===_||d>w||P>x||A>E)return _=k,w=d,x=P,E=A,void(y=0);var I=i.lineString([_,k],o.properties);if(!1===s(I,d,g,A,y))return!1;y++,_=k})&&void 0}}})}function l(f,s){if(!f)throw new Error("geojson is required");u(f,function(o,d,g){if(null!==o.geometry){var v=o.geometry.coordinates;switch(o.geometry.type){case"LineString":if(!1===s(o,d,g,0,0))return!1;break;case"Polygon":for(var _=0;_<v.length;_++)if(!1===s(i.lineString(v[_],o.properties),d,g,_))return!1}}})}X.coordEach=m,X.coordReduce=function(f,s,o,d){var g=o;return m(f,function(y,v,_,w,x){g=0===v&&void 0===o?y:s(g,y,v,_,w,x)},d),g},X.propEach=b,X.propReduce=function(f,s,o){var d=o;return b(f,function(g,y){d=0===y&&void 0===o?g:s(d,g,y)}),d},X.featureEach=p,X.featureReduce=function(f,s,o){var d=o;return p(f,function(g,y){d=0===y&&void 0===o?g:s(d,g,y)}),d},X.coordAll=function(f){var s=[];return m(f,function(o){s.push(o)}),s},X.geomEach=r,X.geomReduce=function(f,s,o){var d=o;return r(f,function(g,y,v,_,w){d=0===y&&void 0===o?g:s(d,g,y,v,_,w)}),d},X.flattenEach=u,X.flattenReduce=function(f,s,o){var d=o;return u(f,function(g,y,v){d=0===y&&0===v&&void 0===o?g:s(d,g,y,v)}),d},X.segmentEach=c,X.segmentReduce=function(f,s,o){var d=o,g=!1;return c(f,function(y,v,_,w,x){d=!1===g&&void 0===o?y:s(d,y,v,_,w,x),g=!0}),d},X.lineEach=l,X.lineReduce=function(f,s,o){var d=o;return l(f,function(g,y,v,_){d=0===y&&void 0===o?g:s(d,g,y,v,_)}),d},X.findSegment=function(f,s){if(!i.isObject(s=s||{}))throw new Error("options is invalid");var o,d=s.featureIndex||0,g=s.multiFeatureIndex||0,y=s.geometryIndex||0,v=s.segmentIndex||0,_=s.properties;switch(f.type){case"FeatureCollection":d<0&&(d=f.features.length+d),_=_||f.features[d].properties,o=f.features[d].geometry;break;case"Feature":_=_||f.properties,o=f.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=f;break;default:throw new Error("geojson is invalid")}if(null===o)return null;var w=o.coordinates;switch(o.type){case"Point":case"MultiPoint":return null;case"LineString":return v<0&&(v=w.length+v-1),i.lineString([w[v],w[v+1]],_,s);case"Polygon":return y<0&&(y=w.length+y),v<0&&(v=w[y].length+v-1),i.lineString([w[y][v],w[y][v+1]],_,s);case"MultiLineString":return g<0&&(g=w.length+g),v<0&&(v=w[g].length+v-1),i.lineString([w[g][v],w[g][v+1]],_,s);case"MultiPolygon":return g<0&&(g=w.length+g),y<0&&(y=w[g].length+y),v<0&&(v=w[g][y].length-v-1),i.lineString([w[g][y][v],w[g][y][v+1]],_,s)}throw new Error("geojson is invalid")},X.findPoint=function(f,s){if(!i.isObject(s=s||{}))throw new Error("options is invalid");var o,d=s.featureIndex||0,g=s.multiFeatureIndex||0,y=s.geometryIndex||0,v=s.coordIndex||0,_=s.properties;switch(f.type){case"FeatureCollection":d<0&&(d=f.features.length+d),_=_||f.features[d].properties,o=f.features[d].geometry;break;case"Feature":_=_||f.properties,o=f.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=f;break;default:throw new Error("geojson is invalid")}if(null===o)return null;var w=o.coordinates;switch(o.type){case"Point":return i.point(w,_,s);case"MultiPoint":return g<0&&(g=w.length+g),i.point(w[g],_,s);case"LineString":return v<0&&(v=w.length+v),i.point(w[v],_,s);case"Polygon":return y<0&&(y=w.length+y),v<0&&(v=w[y].length+v),i.point(w[y][v],_,s);case"MultiLineString":return g<0&&(g=w.length+g),v<0&&(v=w[g].length+v),i.point(w[g][v],_,s);case"MultiPolygon":return g<0&&(g=w.length+g),y<0&&(y=w[g].length+y),v<0&&(v=w[g][y].length-v),i.point(w[g][y][v],_,s)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(h,G,X){"use strict";var i="undefined"==typeof WeakMap?h("weak-map"):WeakMap,m=h("gl-buffer"),b=h("gl-vao"),p=new i;G.exports=function(r){var u=p.get(r),c=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!c||!r.isBuffer(c)){var l=m(r,new Float32Array([-1,-1,-1,4,4,-1]));(u=b(r,[{buffer:l,type:r.FLOAT,size:2}]))._triangleBuffer=l,p.set(r,u)}u.bind(),r.drawArrays(r.TRIANGLES,0,3),u.unbind()}},{"gl-buffer":267,"gl-vao":361,"weak-map":625}],71:[function(h,G,X){G.exports=function(i){var m=0,b=0,p=0,r=0;return i.map(function(u){var c=(u=u.slice())[0],l=c.toUpperCase();if(c!=l)switch(u[0]=l,c){case"a":u[6]+=p,u[7]+=r;break;case"v":u[1]+=r;break;case"h":u[1]+=p;break;default:for(var f=1;f<u.length;)u[f++]+=p,u[f++]+=r}switch(l){case"Z":p=m,r=b;break;case"H":p=u[1];break;case"V":r=u[1];break;case"M":p=m=u[1],r=b=u[2];break;default:p=u[u.length-2],r=u[u.length-1]}return u})}},{}],72:[function(h,G,X){var i=h("pad-left");G.exports=function(m,b,p){b="number"==typeof b?b:1,p=p||": ";var r=m.split(/\r?\n/),u=String(r.length+b-1).length;return r.map(function(c,l){var f=l+b,s=String(f).length;return i(f,u-s)+p+c}).join("\n")}},{"pad-left":490}],73:[function(h,G,X){"use strict";G.exports=function(b){var p=b.length;if(0===p)return[];if(1===p)return[0];for(var r=b[0].length,u=[b[0]],c=[0],l=1;l<p;++l)if(u.push(b[l]),m(u,r)){if(c.push(l),c.length===r+1)return c}else u.pop();return c};var i=h("robust-orientation");function m(b,p){for(var r=new Array(p+1),u=0;u<b.length;++u)r[u]=b[u];for(u=0;u<=b.length;++u){for(var c=b.length;c<=p;++c){for(var l=new Array(p),f=0;f<p;++f)l[f]=Math.pow(c+1-u,f);r[c]=l}if(i.apply(void 0,r))return!0}return!1}},{"robust-orientation":548}],74:[function(h,G,X){"use strict";G.exports=function(b,p){return i(p).filter(function(r){for(var u=new Array(r.length),c=0;c<r.length;++c)u[c]=p[r[c]];return m(u)*b<1})};var i=h("delaunay-triangulate"),m=h("circumradius")},{circumradius:125,"delaunay-triangulate":180}],75:[function(h,G,X){G.exports=function(b,p){return m(i(b,p))};var i=h("alpha-complex"),m=h("simplicial-complex-boundary")},{"alpha-complex":74,"simplicial-complex-boundary":556}],76:[function(h,G,X){"use strict";G.exports=function(i,m){if(!i||null==i.length)throw Error("Argument should be an array");m=null==m?1:Math.floor(m);for(var b=Array(2*m),p=0;p<m;p++){for(var r=-1/0,u=1/0,c=p,l=i.length;c<l;c+=m)i[c]>r&&(r=i[c]),i[c]<u&&(u=i[c]);b[p]=u,b[m+p]=r}return b}},{}],77:[function(h,G,X){"use strict";G.exports=function(i,m,b){if("function"==typeof Array.prototype.findIndex)return i.findIndex(m,b);if("function"!=typeof m)throw new TypeError("predicate must be a function");var p=Object(i),r=p.length;if(0===r)return-1;for(var u=0;u<r;u++)if(m.call(b,p[u],u,p))return u;return-1}},{}],78:[function(h,G,X){"use strict";var i=h("array-bounds");G.exports=function(m,b,p){if(!m||null==m.length)throw Error("Argument should be an array");null==b&&(b=1),null==p&&(p=i(m,b));for(var r=0;r<b;r++){var u=p[b+r],c=p[r],l=r,f=m.length;if(u===1/0&&c===-1/0)for(l=r;l<f;l+=b)m[l]=m[l]===u?1:m[l]===c?0:.5;else if(u===1/0)for(l=r;l<f;l+=b)m[l]=m[l]===u?1:0;else if(c===-1/0)for(l=r;l<f;l+=b)m[l]=m[l]===c?0:1;else{var s=u-c;for(l=r;l<f;l+=b)isNaN(m[l])||(m[l]=0===s?.5:(m[l]-c)/s)}}return m}},{"array-bounds":76}],79:[function(h,G,X){G.exports=function(i,m){var b="number"==typeof i,p="number"==typeof m;b&&!p?(m=i,i=0):b||p||(i=0,m=0);var r=(m|=0)-(i|=0);if(r<0)throw new Error("array length must be positive");for(var u=new Array(r),c=0,l=i;c<r;c++,l++)u[c]=l;return u}},{}],80:[function(h,G,X){(function(i){(function(){"use strict";var m=h("object-assign");function b(P,A){if(P===A)return 0;for(var I=P.length,D=A.length,R=0,S=Math.min(I,D);R<S;++R)if(P[R]!==A[R]){I=P[R],D=A[R];break}return I<D?-1:D<I?1:0}function p(P){return i.Buffer&&"function"==typeof i.Buffer.isBuffer?i.Buffer.isBuffer(P):!(null==P||!P._isBuffer)}var r=h("util/"),u=Object.prototype.hasOwnProperty,c=Array.prototype.slice,l="foo"===function(){}.name;function f(P){return Object.prototype.toString.call(P)}function s(P){return!p(P)&&"function"==typeof i.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(P):!!P&&(P instanceof DataView||!!(P.buffer&&P.buffer instanceof ArrayBuffer)))}var o=G.exports=w,d=/\s*function\s+([^\(\s]*)\s*/;function g(P){if(r.isFunction(P)){if(l)return P.name;var A=P.toString().match(d);return A&&A[1]}}function y(P,A){return"string"==typeof P?P.length<A?P:P.slice(0,A):P}function v(P){if(l||!r.isFunction(P))return r.inspect(P);var A=g(P);return"[Function"+(A?": "+A:"")+"]"}function _(P,A,I,D,R){throw new o.AssertionError({message:I,actual:P,expected:A,operator:D,stackStartFunction:R})}function w(P,A){P||_(P,!0,A,"==",o.ok)}function x(P,A,I,D){if(P===A)return!0;if(p(P)&&p(A))return 0===b(P,A);if(r.isDate(P)&&r.isDate(A))return P.getTime()===A.getTime();if(r.isRegExp(P)&&r.isRegExp(A))return P.source===A.source&&P.global===A.global&&P.multiline===A.multiline&&P.lastIndex===A.lastIndex&&P.ignoreCase===A.ignoreCase;if(null!==P&&"object"==typeof P||null!==A&&"object"==typeof A){if(s(P)&&s(A)&&f(P)===f(A)&&!(P instanceof Float32Array||P instanceof Float64Array))return 0===b(new Uint8Array(P.buffer),new Uint8Array(A.buffer));if(p(P)!==p(A))return!1;var R=(D=D||{actual:[],expected:[]}).actual.indexOf(P);return-1!==R&&R===D.expected.indexOf(A)||(D.actual.push(P),D.expected.push(A),function(S,N,B,H){if(null==S||null==N)return!1;if(r.isPrimitive(S)||r.isPrimitive(N))return S===N;if(B&&Object.getPrototypeOf(S)!==Object.getPrototypeOf(N))return!1;var Y=E(S),Q=E(N);if(Y&&!Q||!Y&&Q)return!1;if(Y)return x(S=c.call(S),N=c.call(N),B);var ne,ae,te=L(S),K=L(N);if(te.length!==K.length)return!1;for(te.sort(),K.sort(),ae=te.length-1;ae>=0;ae--)if(te[ae]!==K[ae])return!1;for(ae=te.length-1;ae>=0;ae--)if(!x(S[ne=te[ae]],N[ne],B,H))return!1;return!0}(P,A,I,D))}return I?P===A:P==A}function E(P){return"[object Arguments]"==Object.prototype.toString.call(P)}function k(P,A){if(!P||!A)return!1;if("[object RegExp]"==Object.prototype.toString.call(A))return A.test(P);try{if(P instanceof A)return!0}catch(I){}return!Error.isPrototypeOf(A)&&!0===A.call({},P)}function C(P,A,I,D){var R;if("function"!=typeof A)throw new TypeError('"block" argument must be a function');"string"==typeof I&&(D=I,I=null),R=function(B){var H;try{B()}catch(Y){H=Y}return H}(A),D=(I&&I.name?" ("+I.name+").":".")+(D?" "+D:"."),P&&!R&&_(R,I,"Missing expected exception"+D);var S="string"==typeof D,N=!P&&R&&!I;if((!P&&r.isError(R)&&S&&k(R,I)||N)&&_(R,I,"Got unwanted exception"+D),P&&R&&I&&!k(R,I)||!P&&R)throw R}o.AssertionError=function(P){this.name="AssertionError",this.actual=P.actual,this.expected=P.expected,this.operator=P.operator,P.message?(this.message=P.message,this.generatedMessage=!1):(this.message=y(v(this.actual),128)+" "+this.operator+" "+y(v(this.expected),128),this.generatedMessage=!0);var A=P.stackStartFunction||_;if(Error.captureStackTrace)Error.captureStackTrace(this,A);else{var I=new Error;if(I.stack){var D=I.stack,R=g(A),S=D.indexOf("\n"+R);if(S>=0){var N=D.indexOf("\n",S+1);D=D.substring(N+1)}this.stack=D}}},r.inherits(o.AssertionError,Error),o.fail=_,o.ok=w,o.equal=function(P,A,I){P!=A&&_(P,A,I,"==",o.equal)},o.notEqual=function(P,A,I){P==A&&_(P,A,I,"!=",o.notEqual)},o.deepEqual=function(P,A,I){x(P,A,!1)||_(P,A,I,"deepEqual",o.deepEqual)},o.deepStrictEqual=function(P,A,I){x(P,A,!0)||_(P,A,I,"deepStrictEqual",o.deepStrictEqual)},o.notDeepEqual=function(P,A,I){x(P,A,!1)&&_(P,A,I,"notDeepEqual",o.notDeepEqual)},o.notDeepStrictEqual=function P(A,I,D){x(A,I,!0)&&_(A,I,D,"notDeepStrictEqual",P)},o.strictEqual=function(P,A,I){P!==A&&_(P,A,I,"===",o.strictEqual)},o.notStrictEqual=function(P,A,I){P===A&&_(P,A,I,"!==",o.notStrictEqual)},o.throws=function(P,A,I){C(!0,P,A,I)},o.doesNotThrow=function(P,A,I){C(!1,P,A,I)},o.ifError=function(P){if(P)throw P},o.strict=m(function P(A,I){A||_(A,!0,I,"==",P)},o,{equal:o.strictEqual,deepEqual:o.deepStrictEqual,notEqual:o.notStrictEqual,notDeepEqual:o.notDeepStrictEqual}),o.strict.strict=o.strict;var L=Object.keys||function(P){var A=[];for(var I in P)u.call(P,I)&&A.push(I);return A}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":487,"util/":83}],81:[function(h,G,X){G.exports="function"==typeof Object.create?function(i,m){i.super_=m,i.prototype=Object.create(m.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}})}:function(i,m){i.super_=m;var b=function(){};b.prototype=m.prototype,i.prototype=new b,i.prototype.constructor=i}},{}],82:[function(h,G,X){G.exports=function(i){return i&&"object"==typeof i&&"function"==typeof i.copy&&"function"==typeof i.fill&&"function"==typeof i.readUInt8}},{}],83:[function(h,G,X){(function(i,m){(function(){var b=/%[sdj%]/g;X.format=function(S){if(!_(S)){for(var N=[],B=0;B<arguments.length;B++)N.push(u(arguments[B]));return N.join(" ")}B=1;for(var H=arguments,Y=H.length,Q=String(S).replace(b,function(ae){if("%%"===ae)return"%";if(B>=Y)return ae;switch(ae){case"%s":return String(H[B++]);case"%d":return Number(H[B++]);case"%j":try{return JSON.stringify(H[B++])}catch(te){return"[Circular]"}default:return ae}}),ne=H[B];B<Y;ne=H[++B])y(ne)||!E(ne)?Q+=" "+ne:Q+=" "+u(ne);return Q},X.deprecate=function(S,N){if(w(m.process))return function(){return X.deprecate(S,N).apply(this,arguments)};if(!0===i.noDeprecation)return S;var B=!1;return function(){if(!B){if(i.throwDeprecation)throw new Error(N);i.traceDeprecation?console.trace(N):console.error(N),B=!0}return S.apply(this,arguments)}};var p,r={};function u(S,N){var B={seen:[],stylize:l};return arguments.length>=3&&(B.depth=arguments[2]),arguments.length>=4&&(B.colors=arguments[3]),g(N)?B.showHidden=N:N&&X._extend(B,N),w(B.showHidden)&&(B.showHidden=!1),w(B.depth)&&(B.depth=2),w(B.colors)&&(B.colors=!1),w(B.customInspect)&&(B.customInspect=!0),B.colors&&(B.stylize=c),f(B,S,B.depth)}function c(S,N){var B=u.styles[N];return B?"\x1b["+u.colors[B][0]+"m"+S+"\x1b["+u.colors[B][1]+"m":S}function l(S,N){return S}function f(S,N,B){if(S.customInspect&&N&&L(N.inspect)&&N.inspect!==X.inspect&&(!N.constructor||N.constructor.prototype!==N)){var H=N.inspect(B,S);return _(H)||(H=f(S,H,B)),H}var Y=function(V,W){if(w(W))return V.stylize("undefined","undefined");if(_(W)){var Z="'"+JSON.stringify(W).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return V.stylize(Z,"string")}return v(W)?V.stylize(""+W,"number"):g(W)?V.stylize(""+W,"boolean"):y(W)?V.stylize("null","null"):void 0}(S,N);if(Y)return Y;var W,Q=Object.keys(N),ne=(W={},Q.forEach(function(Z,oe){W[Z]=!0}),W);if(S.showHidden&&(Q=Object.getOwnPropertyNames(N)),C(N)&&(Q.indexOf("message")>=0||Q.indexOf("description")>=0))return s(N);if(0===Q.length){if(L(N))return S.stylize("[Function"+(N.name?": "+N.name:"")+"]","special");if(x(N))return S.stylize(RegExp.prototype.toString.call(N),"regexp");if(k(N))return S.stylize(Date.prototype.toString.call(N),"date");if(C(N))return s(N)}var te,K="",q=!1,re=["{","}"];return d(N)&&(q=!0,re=["[","]"]),L(N)&&(K=" [Function"+(N.name?": "+N.name:"")+"]"),x(N)&&(K=" "+RegExp.prototype.toString.call(N)),k(N)&&(K=" "+Date.prototype.toUTCString.call(N)),C(N)&&(K=" "+s(N)),0!==Q.length||q&&0!=N.length?B<0?x(N)?S.stylize(RegExp.prototype.toString.call(N),"regexp"):S.stylize("[Object]","special"):(S.seen.push(N),te=q?function(V,W,Z,oe,ie){for(var ue=[],fe=0,he=W.length;fe<he;++fe)R(W,String(fe))?ue.push(o(V,W,Z,oe,String(fe),!0)):ue.push("");return ie.forEach(function(de){de.match(/^\d+$/)||ue.push(o(V,W,Z,oe,de,!0))}),ue}(S,N,B,ne,Q):Q.map(function(V){return o(S,N,B,ne,V,q)}),S.seen.pop(),function(V,W,Z){return V.reduce(function(oe,ie){return ie.indexOf("\n"),oe+ie.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Z[0]+(""===W?"":W+"\n ")+" "+V.join(",\n  ")+" "+Z[1]:Z[0]+W+" "+V.join(", ")+" "+Z[1]}(te,K,re)):re[0]+K+re[1]}function s(S){return"["+Error.prototype.toString.call(S)+"]"}function o(S,N,B,H,Y,Q){var ne,ae,te;if((te=Object.getOwnPropertyDescriptor(N,Y)||{value:N[Y]}).get?ae=S.stylize(te.set?"[Getter/Setter]":"[Getter]","special"):te.set&&(ae=S.stylize("[Setter]","special")),R(H,Y)||(ne="["+Y+"]"),ae||(S.seen.indexOf(te.value)<0?(ae=y(B)?f(S,te.value,null):f(S,te.value,B-1)).indexOf("\n")>-1&&(ae=Q?ae.split("\n").map(function(K){return"  "+K}).join("\n").substr(2):"\n"+ae.split("\n").map(function(K){return"   "+K}).join("\n")):ae=S.stylize("[Circular]","special")),w(ne)){if(Q&&Y.match(/^\d+$/))return ae;(ne=JSON.stringify(""+Y)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ne=ne.substr(1,ne.length-2),ne=S.stylize(ne,"name")):(ne=ne.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ne=S.stylize(ne,"string"))}return ne+": "+ae}function d(S){return Array.isArray(S)}function g(S){return"boolean"==typeof S}function y(S){return null===S}function v(S){return"number"==typeof S}function _(S){return"string"==typeof S}function w(S){return void 0===S}function x(S){return E(S)&&"[object RegExp]"===P(S)}function E(S){return"object"==typeof S&&null!==S}function k(S){return E(S)&&"[object Date]"===P(S)}function C(S){return E(S)&&("[object Error]"===P(S)||S instanceof Error)}function L(S){return"function"==typeof S}function P(S){return Object.prototype.toString.call(S)}function A(S){return S<10?"0"+S.toString(10):S.toString(10)}X.debuglog=function(S){if(w(p)&&(p=i.env.NODE_DEBUG||""),S=S.toUpperCase(),!r[S])if(new RegExp("\\b"+S+"\\b","i").test(p)){var N=i.pid;r[S]=function(){var B=X.format.apply(X,arguments);console.error("%s %d: %s",S,N,B)}}else r[S]=function(){};return r[S]},X.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},X.isArray=d,X.isBoolean=g,X.isNull=y,X.isNullOrUndefined=function(S){return null==S},X.isNumber=v,X.isString=_,X.isSymbol=function(S){return"symbol"==typeof S},X.isUndefined=w,X.isRegExp=x,X.isObject=E,X.isDate=k,X.isError=C,X.isFunction=L,X.isPrimitive=function(S){return null===S||"boolean"==typeof S||"number"==typeof S||"string"==typeof S||"symbol"==typeof S||void 0===S},X.isBuffer=h("./support/isBuffer");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var S=new Date,N=[A(S.getHours()),A(S.getMinutes()),A(S.getSeconds())].join(":");return[S.getDate(),I[S.getMonth()],N].join(" ")}function R(S,N){return Object.prototype.hasOwnProperty.call(S,N)}X.log=function(){console.log("%s - %s",D(),X.format.apply(X,arguments))},X.inherits=h("inherits"),X._extend=function(S,N){if(!N||!E(N))return S;for(var B=Object.keys(N),H=B.length;H--;)S[B[H]]=N[B[H]];return S}}).call(this)}).call(this,h("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":82,_process:528,inherits:81}],84:[function(h,G,X){G.exports=function(i){return atob(i)}},{}],85:[function(h,G,X){"use strict";G.exports=function(b,p){for(var r=p.length,u=new Array(r+1),c=0;c<r;++c){for(var l=new Array(r+1),f=0;f<=r;++f)l[f]=b[f][c];u[c]=l}for(u[r]=new Array(r+1),c=0;c<=r;++c)u[r][c]=1;var s=new Array(r+1);for(c=0;c<r;++c)s[c]=p[c];s[r]=1;var o=i(u,s),d=m(o[r+1]);0===d&&(d=1);var g=new Array(r+1);for(c=0;c<=r;++c)g[c]=m(o[c])/d;return g};var i=h("robust-linear-solve");function m(b){for(var p=0,r=0;r<b.length;++r)p+=b[r];return p}},{"robust-linear-solve":547}],86:[function(h,G,X){"use strict";X.byteLength=function(f){var s=c(f),d=s[1];return 3*(s[0]+d)/4-d},X.toByteArray=function(f){var s,o,k,d=c(f),g=d[0],y=d[1],v=new b(3*(g+(k=y))/4-k),_=0,w=y>0?g-4:g;for(o=0;o<w;o+=4)s=m[f.charCodeAt(o)]<<18|m[f.charCodeAt(o+1)]<<12|m[f.charCodeAt(o+2)]<<6|m[f.charCodeAt(o+3)],v[_++]=s>>16&255,v[_++]=s>>8&255,v[_++]=255&s;return 2===y&&(s=m[f.charCodeAt(o)]<<2|m[f.charCodeAt(o+1)]>>4,v[_++]=255&s),1===y&&(s=m[f.charCodeAt(o)]<<10|m[f.charCodeAt(o+1)]<<4|m[f.charCodeAt(o+2)]>>2,v[_++]=s>>8&255,v[_++]=255&s),v},X.fromByteArray=function(f){for(var s,o=f.length,d=o%3,g=[],y=0,v=o-d;y<v;y+=16383)g.push(l(f,y,y+16383>v?v:y+16383));return 1===d?g.push(i[(s=f[o-1])>>2]+i[s<<4&63]+"=="):2===d&&g.push(i[(s=(f[o-2]<<8)+f[o-1])>>10]+i[s>>4&63]+i[s<<2&63]+"="),g.join("")};for(var i=[],m=[],b="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,u=p.length;r<u;++r)i[r]=p[r],m[p.charCodeAt(r)]=r;function c(f){var s=f.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=f.indexOf("=");return-1===o&&(o=s),[o,o===s?0:4-o%4]}function l(f,s,o){for(var g,y=[],v=s;v<o;v+=3)y.push(i[(g=(f[v]<<16&16711680)+(f[v+1]<<8&65280)+(255&f[v+2]))>>18&63]+i[g>>12&63]+i[g>>6&63]+i[63&g]);return y.join("")}m["-".charCodeAt(0)]=62,m["_".charCodeAt(0)]=63},{}],87:[function(h,G,X){"use strict";var i=h("./lib/rationalize");G.exports=function(m,b){return i(m[0].mul(b[1]).add(b[0].mul(m[1])),m[1].mul(b[1]))}},{"./lib/rationalize":97}],88:[function(h,G,X){"use strict";G.exports=function(i,m){return i[0].mul(m[1]).cmp(m[0].mul(i[1]))}},{}],89:[function(h,G,X){"use strict";var i=h("./lib/rationalize");G.exports=function(m,b){return i(m[0].mul(b[1]),m[1].mul(b[0]))}},{"./lib/rationalize":97}],90:[function(h,G,X){"use strict";var i=h("./is-rat"),m=h("./lib/is-bn"),b=h("./lib/num-to-bn"),p=h("./lib/str-to-bn"),r=h("./lib/rationalize"),u=h("./div");G.exports=function c(l,f){if(i(l))return f?u(l,c(f)):[l[0].clone(),l[1].clone()];var s,o,d=0;if(m(l))s=l.clone();else if("string"==typeof l)s=p(l);else{if(0===l)return[b(0),b(1)];if(l===Math.floor(l))s=b(l);else{for(;l!==Math.floor(l);)l*=Math.pow(2,256),d-=256;s=b(l)}}if(i(f))s.mul(f[1]),o=f[0].clone();else if(m(f))o=f.clone();else if("string"==typeof f)o=p(f);else if(f)if(f===Math.floor(f))o=b(f);else{for(;f!==Math.floor(f);)f*=Math.pow(2,256),d+=256;o=b(f)}else o=b(1);return d>0?s=s.ushln(d):d<0&&(o=o.ushln(-d)),r(s,o)}},{"./div":89,"./is-rat":91,"./lib/is-bn":95,"./lib/num-to-bn":96,"./lib/rationalize":97,"./lib/str-to-bn":98}],91:[function(h,G,X){"use strict";var i=h("./lib/is-bn");G.exports=function(m){return Array.isArray(m)&&2===m.length&&i(m[0])&&i(m[1])}},{"./lib/is-bn":95}],92:[function(h,G,X){"use strict";var i=h("bn.js");G.exports=function(m){return m.cmp(new i(0))}},{"bn.js":106}],93:[function(h,G,X){"use strict";var i=h("./bn-sign");G.exports=function(m){var b=m.length,p=m.words,r=0;if(1===b)r=p[0];else if(2===b)r=p[0]+67108864*p[1];else for(var u=0;u<b;u++)r+=p[u]*Math.pow(67108864,u);return i(m)*r}},{"./bn-sign":92}],94:[function(h,G,X){"use strict";var i=h("double-bits"),m=h("bit-twiddle").countTrailingZeros;G.exports=function(b){var p=m(i.lo(b));if(p<32)return p;var r=m(i.hi(b));return r>20?52:r+32}},{"bit-twiddle":104,"double-bits":182}],95:[function(h,G,X){"use strict";h("bn.js"),G.exports=function(i){return i&&"object"==typeof i&&Boolean(i.words)}},{"bn.js":106}],96:[function(h,G,X){"use strict";var i=h("bn.js"),m=h("double-bits");G.exports=function(b){var p=m.exponent(b);return p<52?new i(b):new i(b*Math.pow(2,52-p)).ushln(p-52)}},{"bn.js":106,"double-bits":182}],97:[function(h,G,X){"use strict";var i=h("./num-to-bn"),m=h("./bn-sign");G.exports=function(b,p){var r=m(b),u=m(p);if(0===r)return[i(0),i(1)];if(0===u)return[i(0),i(0)];u<0&&(b=b.neg(),p=p.neg());var c=b.gcd(p);return c.cmpn(1)?[b.div(c),p.div(c)]:[b,p]}},{"./bn-sign":92,"./num-to-bn":96}],98:[function(h,G,X){"use strict";var i=h("bn.js");G.exports=function(m){return new i(m)}},{"bn.js":106}],99:[function(h,G,X){"use strict";var i=h("./lib/rationalize");G.exports=function(m,b){return i(m[0].mul(b[0]),m[1].mul(b[1]))}},{"./lib/rationalize":97}],100:[function(h,G,X){"use strict";var i=h("./lib/bn-sign");G.exports=function(m){return i(m[0])*i(m[1])}},{"./lib/bn-sign":92}],101:[function(h,G,X){"use strict";var i=h("./lib/rationalize");G.exports=function(m,b){return i(m[0].mul(b[1]).sub(m[1].mul(b[0])),m[1].mul(b[1]))}},{"./lib/rationalize":97}],102:[function(h,G,X){"use strict";var i=h("./lib/bn-to-num"),m=h("./lib/ctz");G.exports=function(b){var p=b[0],r=b[1];if(0===p.cmpn(0))return 0;var u=p.abs().divmod(r.abs()),l=i(u.div),f=u.mod,s=p.negative!==r.negative?-1:1;if(0===f.cmpn(0))return s*l;if(l){var o=m(l)+4,d=i(f.ushln(o).divRound(r));return s*(l+d*Math.pow(2,-o))}var g=r.bitLength()-f.bitLength()+53;return d=i(f.ushln(g).divRound(r)),g<1023?s*d*Math.pow(2,-g):s*(d*=Math.pow(2,-1023))*Math.pow(2,1023-g)}},{"./lib/bn-to-num":93,"./lib/ctz":94}],103:[function(h,G,X){"use strict";function i(c,l,f,s,o){for(var d=o+1;s<=o;){var g=s+o>>>1,y=c[g];(void 0!==f?f(y,l):y-l)>=0?(d=g,o=g-1):s=g+1}return d}function m(c,l,f,s,o){for(var d=o+1;s<=o;){var g=s+o>>>1,y=c[g];(void 0!==f?f(y,l):y-l)>0?(d=g,o=g-1):s=g+1}return d}function b(c,l,f,s,o){for(var d=s-1;s<=o;){var g=s+o>>>1,y=c[g];(void 0!==f?f(y,l):y-l)<0?(d=g,s=g+1):o=g-1}return d}function p(c,l,f,s,o){for(var d=s-1;s<=o;){var g=s+o>>>1,y=c[g];(void 0!==f?f(y,l):y-l)<=0?(d=g,s=g+1):o=g-1}return d}function r(c,l,f,s,o){for(;s<=o;){var d=s+o>>>1,g=c[d],y=void 0!==f?f(g,l):g-l;if(0===y)return d;y<=0?s=d+1:o=d-1}return-1}function u(c,l,f,s,o,d){return"function"==typeof f?d(c,l,f,void 0===s?0:0|s,void 0===o?c.length-1:0|o):d(c,l,void 0,void 0===f?0:0|f,void 0===s?c.length-1:0|s)}G.exports={ge:function(c,l,f,s,o){return u(c,l,f,s,o,i)},gt:function(c,l,f,s,o){return u(c,l,f,s,o,m)},lt:function(c,l,f,s,o){return u(c,l,f,s,o,b)},le:function(c,l,f,s,o){return u(c,l,f,s,o,p)},eq:function(c,l,f,s,o){return u(c,l,f,s,o,r)}}},{}],104:[function(h,G,X){"use strict";function i(b){var p=32;return(b&=-b)&&p--,65535&b&&(p-=16),16711935&b&&(p-=8),252645135&b&&(p-=4),858993459&b&&(p-=2),1431655765&b&&(p-=1),p}X.INT_BITS=32,X.INT_MAX=2147483647,X.INT_MIN=-1<<31,X.sign=function(b){return(b>0)-(b<0)},X.abs=function(b){var p=b>>31;return(b^p)-p},X.min=function(b,p){return p^(b^p)&-(b<p)},X.max=function(b,p){return b^(b^p)&-(b<p)},X.isPow2=function(b){return!(b&b-1||!b)},X.log2=function(b){var p,r;return p=(b>65535)<<4,p|=r=((b>>>=p)>255)<<3,p|=r=((b>>>=r)>15)<<2,(p|=r=((b>>>=r)>3)<<1)|(b>>>=r)>>1},X.log10=function(b){return b>=1e9?9:b>=1e8?8:b>=1e7?7:b>=1e6?6:b>=1e5?5:b>=1e4?4:b>=1e3?3:b>=100?2:b>=10?1:0},X.popCount=function(b){return 16843009*((b=(858993459&(b-=b>>>1&1431655765))+(b>>>2&858993459))+(b>>>4)&252645135)>>>24},X.countTrailingZeros=i,X.nextPow2=function(b){return b+=0===b,--b,b|=b>>>1,b|=b>>>2,b|=b>>>4,1+((b|=b>>>8)|b>>>16)},X.prevPow2=function(b){return b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,(b|=b>>>16)-(b>>>1)},X.parity=function(b){return b^=b>>>16,b^=b>>>8,b^=b>>>4,27030>>>(b&=15)&1};var m=new Array(256);(function(b){for(var p=0;p<256;++p){var r=p,u=p,c=7;for(r>>>=1;r;r>>>=1)u<<=1,u|=1&r,--c;b[p]=u<<c&255}})(m),X.reverse=function(b){return m[255&b]<<24|m[b>>>8&255]<<16|m[b>>>16&255]<<8|m[b>>>24&255]},X.interleave2=function(b,p){return(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b&=65535)|b<<8))|b<<4))|b<<2))|b<<1))|(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p&=65535)|p<<8))|p<<4))|p<<2))|p<<1))<<1},X.deinterleave2=function(b,p){return(b=65535&((b=16711935&((b=252645135&((b=858993459&((b=b>>>p&1431655765)|b>>>1))|b>>>2))|b>>>4))|b>>>16))<<16>>16},X.interleave3=function(b,p,r){return b=1227133513&((b=3272356035&((b=251719695&((b=4278190335&((b&=1023)|b<<16))|b<<8))|b<<4))|b<<2),(b|=(p=1227133513&((p=3272356035&((p=251719695&((p=4278190335&((p&=1023)|p<<16))|p<<8))|p<<4))|p<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},X.deinterleave3=function(b,p){return(b=1023&((b=4278190335&((b=251719695&((b=3272356035&((b=b>>>p&1227133513)|b>>>2))|b>>>4))|b>>>8))|b>>>16))<<22>>22},X.nextCombination=function(b){var p=b|b-1;return p+1|(~p&-~p)-1>>>i(b)+1}},{}],105:[function(h,G,X){"use strict";var i=h("clamp");G.exports=function(r,u){u||(u={});var c,l,f,s,o,d,y,_,w,x=null==u.cutoff?.25:u.cutoff,E=null==u.radius?8:u.radius,k=u.channel||0;if(ArrayBuffer.isView(r)||Array.isArray(r)){if(!u.width||!u.height)throw Error("For raw data width and height should be provided by options");c=u.width,l=u.height,s=r,d=u.stride?u.stride:Math.floor(r.length/c/l)}else window.HTMLCanvasElement&&r instanceof window.HTMLCanvasElement?(s=(y=r).getContext("2d").getImageData(0,0,c=y.width,l=y.height).data,d=4):window.CanvasRenderingContext2D&&r instanceof window.CanvasRenderingContext2D?(s=r.getImageData(0,0,c=(y=r.canvas).width,l=y.height).data,d=4):window.ImageData&&r instanceof window.ImageData&&(c=r.width,l=r.height,s=r.data,d=4);if(f=Math.max(c,l),window.Uint8ClampedArray&&s instanceof window.Uint8ClampedArray||window.Uint8Array&&s instanceof window.Uint8Array)for(o=s,s=Array(c*l),_=0,w=o.length;_<w;_++)s[_]=o[_*d+k]/255;else if(1!==d)throw Error("Raw data can have only 1 value per pixel");var C=Array(c*l),L=Array(c*l),P=Array(f),A=Array(f),I=Array(f+1),D=Array(f);for(_=0,w=c*l;_<w;_++){var R=s[_];C[_]=1===R?0:0===R?m:Math.pow(Math.max(0,.5-R),2),L[_]=1===R?m:0===R?0:Math.pow(Math.max(0,R-.5),2)}b(C,c,l,P,A,D,I),b(L,c,l,P,A,D,I);var S=window.Float32Array?new Float32Array(c*l):new Array(c*l);for(_=0,w=c*l;_<w;_++)S[_]=i(1-((C[_]-L[_])/E+x),0,1);return S};var m=1e20;function b(r,u,c,l,f,s,o){for(var d=0;d<u;d++){for(var g=0;g<c;g++)l[g]=r[g*u+d];for(p(l,f,s,o,c),g=0;g<c;g++)r[g*u+d]=f[g]}for(g=0;g<c;g++){for(d=0;d<u;d++)l[d]=r[g*u+d];for(p(l,f,s,o,u),d=0;d<u;d++)r[g*u+d]=Math.sqrt(f[d])}}function p(r,u,c,l,f){c[0]=0,l[0]=-m,l[1]=+m;for(var s=1,o=0;s<f;s++){for(var d=(r[s]+s*s-(r[c[o]]+c[o]*c[o]))/(2*s-2*c[o]);d<=l[o];)o--,d=(r[s]+s*s-(r[c[o]]+c[o]*c[o]))/(2*s-2*c[o]);c[++o]=s,l[o]=d,l[o+1]=+m}for(s=0,o=0;s<f;s++){for(;l[o+1]<s;)o++;u[s]=(s-c[o])*(s-c[o])+r[c[o]]}}},{clamp:126}],106:[function(h,G,X){!function(i,m){"use strict";function b(A,I){if(!A)throw new Error(I||"Assertion failed")}function p(A,I){A.super_=I;var D=function(){};D.prototype=I.prototype,A.prototype=new D,A.prototype.constructor=A}function r(A,I,D){if(r.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,null!==A&&("le"!==I&&"be"!==I||(D=I,I=10),this._init(A||0,I||10,D||"be"))}var u;"object"==typeof i?i.exports=r:m.BN=r,r.BN=r,r.wordSize=26;try{u=h("buffer").Buffer}catch(A){}function c(A,I,D){for(var R=0,S=Math.min(A.length,D),N=I;N<S;N++){var B=A.charCodeAt(N)-48;R<<=4,R|=B>=49&&B<=54?B-49+10:B>=17&&B<=22?B-17+10:15&B}return R}function l(A,I,D,R){for(var S=0,N=Math.min(A.length,D),B=I;B<N;B++){var H=A.charCodeAt(B)-48;S*=R,S+=H>=49?H-49+10:H>=17?H-17+10:H}return S}r.isBN=function(A){return A instanceof r||null!==A&&"object"==typeof A&&A.constructor.wordSize===r.wordSize&&Array.isArray(A.words)},r.max=function(A,I){return A.cmp(I)>0?A:I},r.min=function(A,I){return A.cmp(I)<0?A:I},r.prototype._init=function(A,I,D){if("number"==typeof A)return this._initNumber(A,I,D);if("object"==typeof A)return this._initArray(A,I,D);"hex"===I&&(I=16),b(I===(0|I)&&I>=2&&I<=36);var R=0;"-"===(A=A.toString().replace(/\s+/g,""))[0]&&R++,16===I?this._parseHex(A,R):this._parseBase(A,I,R),"-"===A[0]&&(this.negative=1),this.strip(),"le"===D&&this._initArray(this.toArray(),I,D)},r.prototype._initNumber=function(A,I,D){A<0&&(this.negative=1,A=-A),A<67108864?(this.words=[67108863&A],this.length=1):A<4503599627370496?(this.words=[67108863&A,A/67108864&67108863],this.length=2):(b(A<9007199254740992),this.words=[67108863&A,A/67108864&67108863,1],this.length=3),"le"===D&&this._initArray(this.toArray(),I,D)},r.prototype._initArray=function(A,I,D){if(b("number"==typeof A.length),A.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(A.length/3),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var S,N,B=0;if("be"===D)for(R=A.length-1,S=0;R>=0;R-=3)this.words[S]|=(N=A[R]|A[R-1]<<8|A[R-2]<<16)<<B&67108863,this.words[S+1]=N>>>26-B&67108863,(B+=24)>=26&&(B-=26,S++);else if("le"===D)for(R=0,S=0;R<A.length;R+=3)this.words[S]|=(N=A[R]|A[R+1]<<8|A[R+2]<<16)<<B&67108863,this.words[S+1]=N>>>26-B&67108863,(B+=24)>=26&&(B-=26,S++);return this.strip()},r.prototype._parseHex=function(A,I){this.length=Math.ceil((A.length-I)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var R,S,N=0;for(D=A.length-6,R=0;D>=I;D-=6)S=c(A,D,D+6),this.words[R]|=S<<N&67108863,this.words[R+1]|=S>>>26-N&4194303,(N+=24)>=26&&(N-=26,R++);D+6!==I&&(S=c(A,I,D+6),this.words[R]|=S<<N&67108863,this.words[R+1]|=S>>>26-N&4194303),this.strip()},r.prototype._parseBase=function(A,I,D){this.words=[0],this.length=1;for(var R=0,S=1;S<=67108863;S*=I)R++;R--,S=S/I|0;for(var N=A.length-D,B=N%R,H=Math.min(N,N-B)+D,Y=0,Q=D;Q<H;Q+=R)Y=l(A,Q,Q+R,I),this.imuln(S),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y);if(0!==B){var ne=1;for(Y=l(A,Q,A.length,I),Q=0;Q<B;Q++)ne*=I;this.imuln(ne),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y)}},r.prototype.copy=function(A){A.words=new Array(this.length);for(var I=0;I<this.length;I++)A.words[I]=this.words[I];A.length=this.length,A.negative=this.negative,A.red=this.red},r.prototype.clone=function(){var A=new r(null);return this.copy(A),A},r.prototype._expand=function(A){for(;this.length<A;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],s=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],o=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(A,I,D){D.negative=I.negative^A.negative;var R=A.length+I.length|0;D.length=R,R=R-1|0;var S=0|A.words[0],N=0|I.words[0],B=S*N,Y=B/67108864|0;D.words[0]=67108863&B;for(var Q=1;Q<R;Q++){for(var ne=Y>>>26,ae=67108863&Y,te=Math.min(Q,I.length-1),K=Math.max(0,Q-A.length+1);K<=te;K++)ne+=(B=(S=0|A.words[Q-K|0])*(N=0|I.words[K])+ae)/67108864|0,ae=67108863&B;D.words[Q]=0|ae,Y=0|ne}return 0!==Y?D.words[Q]=0|Y:D.length--,D.strip()}r.prototype.toString=function(A,I){var D;if(I=0|I||1,16===(A=A||10)||"hex"===A){D="";for(var R=0,S=0,N=0;N<this.length;N++){var B=this.words[N],H=(16777215&(B<<R|S)).toString(16);D=0!=(S=B>>>24-R&16777215)||N!==this.length-1?f[6-H.length]+H+D:H+D,(R+=2)>=26&&(R-=26,N--)}for(0!==S&&(D=S.toString(16)+D);D.length%I!=0;)D="0"+D;return 0!==this.negative&&(D="-"+D),D}if(A===(0|A)&&A>=2&&A<=36){var Y=s[A],Q=o[A];D="";var ne=this.clone();for(ne.negative=0;!ne.isZero();){var ae=ne.modn(Q).toString(A);D=(ne=ne.idivn(Q)).isZero()?ae+D:f[Y-ae.length]+ae+D}for(this.isZero()&&(D="0"+D);D.length%I!=0;)D="0"+D;return 0!==this.negative&&(D="-"+D),D}b(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var A=this.words[0];return 2===this.length?A+=67108864*this.words[1]:3===this.length&&1===this.words[2]?A+=4503599627370496+67108864*this.words[1]:this.length>2&&b(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-A:A},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(A,I){return b(void 0!==u),this.toArrayLike(u,A,I)},r.prototype.toArray=function(A,I){return this.toArrayLike(Array,A,I)},r.prototype.toArrayLike=function(A,I,D){var R=this.byteLength(),S=D||Math.max(1,R);b(R<=S,"byte array longer than desired length"),b(S>0,"Requested array length <= 0"),this.strip();var N,B,H="le"===I,Y=new A(S),Q=this.clone();if(H){for(B=0;!Q.isZero();B++)N=Q.andln(255),Q.iushrn(8),Y[B]=N;for(;B<S;B++)Y[B]=0}else{for(B=0;B<S-R;B++)Y[B]=0;for(B=0;!Q.isZero();B++)N=Q.andln(255),Q.iushrn(8),Y[S-B-1]=N}return Y},r.prototype._countBits=Math.clz32?function(A){return 32-Math.clz32(A)}:function(A){var I=A,D=0;return I>=4096&&(D+=13,I>>>=13),I>=64&&(D+=7,I>>>=7),I>=8&&(D+=4,I>>>=4),I>=2&&(D+=2,I>>>=2),D+I},r.prototype._zeroBits=function(A){if(0===A)return 26;var I=A,D=0;return 0==(8191&I)&&(D+=13,I>>>=13),0==(127&I)&&(D+=7,I>>>=7),0==(15&I)&&(D+=4,I>>>=4),0==(3&I)&&(D+=2,I>>>=2),0==(1&I)&&D++,D},r.prototype.bitLength=function(){var I=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+I},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var A=0,I=0;I<this.length;I++){var D=this._zeroBits(this.words[I]);if(A+=D,26!==D)break}return A},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(A){return 0!==this.negative?this.abs().inotn(A).iaddn(1):this.clone()},r.prototype.fromTwos=function(A){return this.testn(A-1)?this.notn(A).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(A){for(;this.length<A.length;)this.words[this.length++]=0;for(var I=0;I<A.length;I++)this.words[I]=this.words[I]|A.words[I];return this.strip()},r.prototype.ior=function(A){return b(0==(this.negative|A.negative)),this.iuor(A)},r.prototype.or=function(A){return this.length>A.length?this.clone().ior(A):A.clone().ior(this)},r.prototype.uor=function(A){return this.length>A.length?this.clone().iuor(A):A.clone().iuor(this)},r.prototype.iuand=function(A){var I;I=this.length>A.length?A:this;for(var D=0;D<I.length;D++)this.words[D]=this.words[D]&A.words[D];return this.length=I.length,this.strip()},r.prototype.iand=function(A){return b(0==(this.negative|A.negative)),this.iuand(A)},r.prototype.and=function(A){return this.length>A.length?this.clone().iand(A):A.clone().iand(this)},r.prototype.uand=function(A){return this.length>A.length?this.clone().iuand(A):A.clone().iuand(this)},r.prototype.iuxor=function(A){var I,D;this.length>A.length?(I=this,D=A):(I=A,D=this);for(var R=0;R<D.length;R++)this.words[R]=I.words[R]^D.words[R];if(this!==I)for(;R<I.length;R++)this.words[R]=I.words[R];return this.length=I.length,this.strip()},r.prototype.ixor=function(A){return b(0==(this.negative|A.negative)),this.iuxor(A)},r.prototype.xor=function(A){return this.length>A.length?this.clone().ixor(A):A.clone().ixor(this)},r.prototype.uxor=function(A){return this.length>A.length?this.clone().iuxor(A):A.clone().iuxor(this)},r.prototype.inotn=function(A){b("number"==typeof A&&A>=0);var I=0|Math.ceil(A/26),D=A%26;this._expand(I),D>0&&I--;for(var R=0;R<I;R++)this.words[R]=67108863&~this.words[R];return D>0&&(this.words[R]=~this.words[R]&67108863>>26-D),this.strip()},r.prototype.notn=function(A){return this.clone().inotn(A)},r.prototype.setn=function(A,I){b("number"==typeof A&&A>=0);var D=A/26|0,R=A%26;return this._expand(D+1),this.words[D]=I?this.words[D]|1<<R:this.words[D]&~(1<<R),this.strip()},r.prototype.iadd=function(A){var I,D,R;if(0!==this.negative&&0===A.negative)return this.negative=0,I=this.isub(A),this.negative^=1,this._normSign();if(0===this.negative&&0!==A.negative)return A.negative=0,I=this.isub(A),A.negative=1,I._normSign();this.length>A.length?(D=this,R=A):(D=A,R=this);for(var S=0,N=0;N<R.length;N++)this.words[N]=67108863&(I=(0|D.words[N])+(0|R.words[N])+S),S=I>>>26;for(;0!==S&&N<D.length;N++)this.words[N]=67108863&(I=(0|D.words[N])+S),S=I>>>26;if(this.length=D.length,0!==S)this.words[this.length]=S,this.length++;else if(D!==this)for(;N<D.length;N++)this.words[N]=D.words[N];return this},r.prototype.add=function(A){var I;return 0!==A.negative&&0===this.negative?(A.negative=0,I=this.sub(A),A.negative^=1,I):0===A.negative&&0!==this.negative?(this.negative=0,I=A.sub(this),this.negative=1,I):this.length>A.length?this.clone().iadd(A):A.clone().iadd(this)},r.prototype.isub=function(A){if(0!==A.negative){A.negative=0;var I=this.iadd(A);return A.negative=1,I._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(A),this.negative=1,this._normSign();var D,R,S=this.cmp(A);if(0===S)return this.negative=0,this.length=1,this.words[0]=0,this;S>0?(D=this,R=A):(D=A,R=this);for(var N=0,B=0;B<R.length;B++)N=(I=(0|D.words[B])-(0|R.words[B])+N)>>26,this.words[B]=67108863&I;for(;0!==N&&B<D.length;B++)N=(I=(0|D.words[B])+N)>>26,this.words[B]=67108863&I;if(0===N&&B<D.length&&D!==this)for(;B<D.length;B++)this.words[B]=D.words[B];return this.length=Math.max(this.length,B),D!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(A){return this.clone().isub(A)};var g=function(A,I,D){var R,S,N,B=A.words,H=I.words,Y=D.words,Q=0,ne=0|B[0],ae=8191&ne,te=ne>>>13,K=0|B[1],q=8191&K,re=K>>>13,V=0|B[2],W=8191&V,Z=V>>>13,oe=0|B[3],ie=8191&oe,ue=oe>>>13,fe=0|B[4],he=8191&fe,de=fe>>>13,be=0|B[5],pe=8191&be,Te=be>>>13,ye=0|B[6],ke=8191&ye,ze=ye>>>13,je=0|B[7],Ie=8191&je,Ce=je>>>13,_e=0|B[8],we=8191&_e,Se=_e>>>13,Oe=0|B[9],Be=8191&Oe,He=Oe>>>13,Xe=0|H[0],nt=8191&Xe,et=Xe>>>13,qe=0|H[1],Ye=8191&qe,ot=qe>>>13,at=0|H[2],ct=8191&at,_t=at>>>13,xt=0|H[3],Ht=8191&xt,At=xt>>>13,ht=0|H[4],st=8191&ht,Bt=ht>>>13,gn=0|H[5],hn=8191&gn,We=gn>>>13,it=0|H[6],qt=8191&it,Ge=it>>>13,Pe=0|H[7],Ee=8191&Pe,Ne=Pe>>>13,Ve=0|H[8],Ke=8191&Ve,bt=Ve>>>13,gt=0|H[9],pt=8191&gt,St=gt>>>13;D.negative=A.negative^I.negative,D.length=19;var jt=(Q+(R=Math.imul(ae,nt))|0)+((8191&(S=(S=Math.imul(ae,et))+Math.imul(te,nt)|0))<<13)|0;Q=((N=Math.imul(te,et))+(S>>>13)|0)+(jt>>>26)|0,jt&=67108863,R=Math.imul(q,nt),S=(S=Math.imul(q,et))+Math.imul(re,nt)|0,N=Math.imul(re,et);var Lt=(Q+(R=R+Math.imul(ae,Ye)|0)|0)+((8191&(S=(S=S+Math.imul(ae,ot)|0)+Math.imul(te,Ye)|0))<<13)|0;Q=((N=N+Math.imul(te,ot)|0)+(S>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,R=Math.imul(W,nt),S=(S=Math.imul(W,et))+Math.imul(Z,nt)|0,N=Math.imul(Z,et),R=R+Math.imul(q,Ye)|0,S=(S=S+Math.imul(q,ot)|0)+Math.imul(re,Ye)|0,N=N+Math.imul(re,ot)|0;var Vt=(Q+(R=R+Math.imul(ae,ct)|0)|0)+((8191&(S=(S=S+Math.imul(ae,_t)|0)+Math.imul(te,ct)|0))<<13)|0;Q=((N=N+Math.imul(te,_t)|0)+(S>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,R=Math.imul(ie,nt),S=(S=Math.imul(ie,et))+Math.imul(ue,nt)|0,N=Math.imul(ue,et),R=R+Math.imul(W,Ye)|0,S=(S=S+Math.imul(W,ot)|0)+Math.imul(Z,Ye)|0,N=N+Math.imul(Z,ot)|0,R=R+Math.imul(q,ct)|0,S=(S=S+Math.imul(q,_t)|0)+Math.imul(re,ct)|0,N=N+Math.imul(re,_t)|0;var mt=(Q+(R=R+Math.imul(ae,Ht)|0)|0)+((8191&(S=(S=S+Math.imul(ae,At)|0)+Math.imul(te,Ht)|0))<<13)|0;Q=((N=N+Math.imul(te,At)|0)+(S>>>13)|0)+(mt>>>26)|0,mt&=67108863,R=Math.imul(he,nt),S=(S=Math.imul(he,et))+Math.imul(de,nt)|0,N=Math.imul(de,et),R=R+Math.imul(ie,Ye)|0,S=(S=S+Math.imul(ie,ot)|0)+Math.imul(ue,Ye)|0,N=N+Math.imul(ue,ot)|0,R=R+Math.imul(W,ct)|0,S=(S=S+Math.imul(W,_t)|0)+Math.imul(Z,ct)|0,N=N+Math.imul(Z,_t)|0,R=R+Math.imul(q,Ht)|0,S=(S=S+Math.imul(q,At)|0)+Math.imul(re,Ht)|0,N=N+Math.imul(re,At)|0;var Wt=(Q+(R=R+Math.imul(ae,st)|0)|0)+((8191&(S=(S=S+Math.imul(ae,Bt)|0)+Math.imul(te,st)|0))<<13)|0;Q=((N=N+Math.imul(te,Bt)|0)+(S>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,R=Math.imul(pe,nt),S=(S=Math.imul(pe,et))+Math.imul(Te,nt)|0,N=Math.imul(Te,et),R=R+Math.imul(he,Ye)|0,S=(S=S+Math.imul(he,ot)|0)+Math.imul(de,Ye)|0,N=N+Math.imul(de,ot)|0,R=R+Math.imul(ie,ct)|0,S=(S=S+Math.imul(ie,_t)|0)+Math.imul(ue,ct)|0,N=N+Math.imul(ue,_t)|0,R=R+Math.imul(W,Ht)|0,S=(S=S+Math.imul(W,At)|0)+Math.imul(Z,Ht)|0,N=N+Math.imul(Z,At)|0,R=R+Math.imul(q,st)|0,S=(S=S+Math.imul(q,Bt)|0)+Math.imul(re,st)|0,N=N+Math.imul(re,Bt)|0;var Kt=(Q+(R=R+Math.imul(ae,hn)|0)|0)+((8191&(S=(S=S+Math.imul(ae,We)|0)+Math.imul(te,hn)|0))<<13)|0;Q=((N=N+Math.imul(te,We)|0)+(S>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,R=Math.imul(ke,nt),S=(S=Math.imul(ke,et))+Math.imul(ze,nt)|0,N=Math.imul(ze,et),R=R+Math.imul(pe,Ye)|0,S=(S=S+Math.imul(pe,ot)|0)+Math.imul(Te,Ye)|0,N=N+Math.imul(Te,ot)|0,R=R+Math.imul(he,ct)|0,S=(S=S+Math.imul(he,_t)|0)+Math.imul(de,ct)|0,N=N+Math.imul(de,_t)|0,R=R+Math.imul(ie,Ht)|0,S=(S=S+Math.imul(ie,At)|0)+Math.imul(ue,Ht)|0,N=N+Math.imul(ue,At)|0,R=R+Math.imul(W,st)|0,S=(S=S+Math.imul(W,Bt)|0)+Math.imul(Z,st)|0,N=N+Math.imul(Z,Bt)|0,R=R+Math.imul(q,hn)|0,S=(S=S+Math.imul(q,We)|0)+Math.imul(re,hn)|0,N=N+Math.imul(re,We)|0;var rn=(Q+(R=R+Math.imul(ae,qt)|0)|0)+((8191&(S=(S=S+Math.imul(ae,Ge)|0)+Math.imul(te,qt)|0))<<13)|0;Q=((N=N+Math.imul(te,Ge)|0)+(S>>>13)|0)+(rn>>>26)|0,rn&=67108863,R=Math.imul(Ie,nt),S=(S=Math.imul(Ie,et))+Math.imul(Ce,nt)|0,N=Math.imul(Ce,et),R=R+Math.imul(ke,Ye)|0,S=(S=S+Math.imul(ke,ot)|0)+Math.imul(ze,Ye)|0,N=N+Math.imul(ze,ot)|0,R=R+Math.imul(pe,ct)|0,S=(S=S+Math.imul(pe,_t)|0)+Math.imul(Te,ct)|0,N=N+Math.imul(Te,_t)|0,R=R+Math.imul(he,Ht)|0,S=(S=S+Math.imul(he,At)|0)+Math.imul(de,Ht)|0,N=N+Math.imul(de,At)|0,R=R+Math.imul(ie,st)|0,S=(S=S+Math.imul(ie,Bt)|0)+Math.imul(ue,st)|0,N=N+Math.imul(ue,Bt)|0,R=R+Math.imul(W,hn)|0,S=(S=S+Math.imul(W,We)|0)+Math.imul(Z,hn)|0,N=N+Math.imul(Z,We)|0,R=R+Math.imul(q,qt)|0,S=(S=S+Math.imul(q,Ge)|0)+Math.imul(re,qt)|0,N=N+Math.imul(re,Ge)|0;var Yt=(Q+(R=R+Math.imul(ae,Ee)|0)|0)+((8191&(S=(S=S+Math.imul(ae,Ne)|0)+Math.imul(te,Ee)|0))<<13)|0;Q=((N=N+Math.imul(te,Ne)|0)+(S>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,R=Math.imul(we,nt),S=(S=Math.imul(we,et))+Math.imul(Se,nt)|0,N=Math.imul(Se,et),R=R+Math.imul(Ie,Ye)|0,S=(S=S+Math.imul(Ie,ot)|0)+Math.imul(Ce,Ye)|0,N=N+Math.imul(Ce,ot)|0,R=R+Math.imul(ke,ct)|0,S=(S=S+Math.imul(ke,_t)|0)+Math.imul(ze,ct)|0,N=N+Math.imul(ze,_t)|0,R=R+Math.imul(pe,Ht)|0,S=(S=S+Math.imul(pe,At)|0)+Math.imul(Te,Ht)|0,N=N+Math.imul(Te,At)|0,R=R+Math.imul(he,st)|0,S=(S=S+Math.imul(he,Bt)|0)+Math.imul(de,st)|0,N=N+Math.imul(de,Bt)|0,R=R+Math.imul(ie,hn)|0,S=(S=S+Math.imul(ie,We)|0)+Math.imul(ue,hn)|0,N=N+Math.imul(ue,We)|0,R=R+Math.imul(W,qt)|0,S=(S=S+Math.imul(W,Ge)|0)+Math.imul(Z,qt)|0,N=N+Math.imul(Z,Ge)|0,R=R+Math.imul(q,Ee)|0,S=(S=S+Math.imul(q,Ne)|0)+Math.imul(re,Ee)|0,N=N+Math.imul(re,Ne)|0;var Ue=(Q+(R=R+Math.imul(ae,Ke)|0)|0)+((8191&(S=(S=S+Math.imul(ae,bt)|0)+Math.imul(te,Ke)|0))<<13)|0;Q=((N=N+Math.imul(te,bt)|0)+(S>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,R=Math.imul(Be,nt),S=(S=Math.imul(Be,et))+Math.imul(He,nt)|0,N=Math.imul(He,et),R=R+Math.imul(we,Ye)|0,S=(S=S+Math.imul(we,ot)|0)+Math.imul(Se,Ye)|0,N=N+Math.imul(Se,ot)|0,R=R+Math.imul(Ie,ct)|0,S=(S=S+Math.imul(Ie,_t)|0)+Math.imul(Ce,ct)|0,N=N+Math.imul(Ce,_t)|0,R=R+Math.imul(ke,Ht)|0,S=(S=S+Math.imul(ke,At)|0)+Math.imul(ze,Ht)|0,N=N+Math.imul(ze,At)|0,R=R+Math.imul(pe,st)|0,S=(S=S+Math.imul(pe,Bt)|0)+Math.imul(Te,st)|0,N=N+Math.imul(Te,Bt)|0,R=R+Math.imul(he,hn)|0,S=(S=S+Math.imul(he,We)|0)+Math.imul(de,hn)|0,N=N+Math.imul(de,We)|0,R=R+Math.imul(ie,qt)|0,S=(S=S+Math.imul(ie,Ge)|0)+Math.imul(ue,qt)|0,N=N+Math.imul(ue,Ge)|0,R=R+Math.imul(W,Ee)|0,S=(S=S+Math.imul(W,Ne)|0)+Math.imul(Z,Ee)|0,N=N+Math.imul(Z,Ne)|0,R=R+Math.imul(q,Ke)|0,S=(S=S+Math.imul(q,bt)|0)+Math.imul(re,Ke)|0,N=N+Math.imul(re,bt)|0;var wt=(Q+(R=R+Math.imul(ae,pt)|0)|0)+((8191&(S=(S=S+Math.imul(ae,St)|0)+Math.imul(te,pt)|0))<<13)|0;Q=((N=N+Math.imul(te,St)|0)+(S>>>13)|0)+(wt>>>26)|0,wt&=67108863,R=Math.imul(Be,Ye),S=(S=Math.imul(Be,ot))+Math.imul(He,Ye)|0,N=Math.imul(He,ot),R=R+Math.imul(we,ct)|0,S=(S=S+Math.imul(we,_t)|0)+Math.imul(Se,ct)|0,N=N+Math.imul(Se,_t)|0,R=R+Math.imul(Ie,Ht)|0,S=(S=S+Math.imul(Ie,At)|0)+Math.imul(Ce,Ht)|0,N=N+Math.imul(Ce,At)|0,R=R+Math.imul(ke,st)|0,S=(S=S+Math.imul(ke,Bt)|0)+Math.imul(ze,st)|0,N=N+Math.imul(ze,Bt)|0,R=R+Math.imul(pe,hn)|0,S=(S=S+Math.imul(pe,We)|0)+Math.imul(Te,hn)|0,N=N+Math.imul(Te,We)|0,R=R+Math.imul(he,qt)|0,S=(S=S+Math.imul(he,Ge)|0)+Math.imul(de,qt)|0,N=N+Math.imul(de,Ge)|0,R=R+Math.imul(ie,Ee)|0,S=(S=S+Math.imul(ie,Ne)|0)+Math.imul(ue,Ee)|0,N=N+Math.imul(ue,Ne)|0,R=R+Math.imul(W,Ke)|0,S=(S=S+Math.imul(W,bt)|0)+Math.imul(Z,Ke)|0,N=N+Math.imul(Z,bt)|0;var Ut=(Q+(R=R+Math.imul(q,pt)|0)|0)+((8191&(S=(S=S+Math.imul(q,St)|0)+Math.imul(re,pt)|0))<<13)|0;Q=((N=N+Math.imul(re,St)|0)+(S>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,R=Math.imul(Be,ct),S=(S=Math.imul(Be,_t))+Math.imul(He,ct)|0,N=Math.imul(He,_t),R=R+Math.imul(we,Ht)|0,S=(S=S+Math.imul(we,At)|0)+Math.imul(Se,Ht)|0,N=N+Math.imul(Se,At)|0,R=R+Math.imul(Ie,st)|0,S=(S=S+Math.imul(Ie,Bt)|0)+Math.imul(Ce,st)|0,N=N+Math.imul(Ce,Bt)|0,R=R+Math.imul(ke,hn)|0,S=(S=S+Math.imul(ke,We)|0)+Math.imul(ze,hn)|0,N=N+Math.imul(ze,We)|0,R=R+Math.imul(pe,qt)|0,S=(S=S+Math.imul(pe,Ge)|0)+Math.imul(Te,qt)|0,N=N+Math.imul(Te,Ge)|0,R=R+Math.imul(he,Ee)|0,S=(S=S+Math.imul(he,Ne)|0)+Math.imul(de,Ee)|0,N=N+Math.imul(de,Ne)|0,R=R+Math.imul(ie,Ke)|0,S=(S=S+Math.imul(ie,bt)|0)+Math.imul(ue,Ke)|0,N=N+Math.imul(ue,bt)|0;var Zt=(Q+(R=R+Math.imul(W,pt)|0)|0)+((8191&(S=(S=S+Math.imul(W,St)|0)+Math.imul(Z,pt)|0))<<13)|0;Q=((N=N+Math.imul(Z,St)|0)+(S>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,R=Math.imul(Be,Ht),S=(S=Math.imul(Be,At))+Math.imul(He,Ht)|0,N=Math.imul(He,At),R=R+Math.imul(we,st)|0,S=(S=S+Math.imul(we,Bt)|0)+Math.imul(Se,st)|0,N=N+Math.imul(Se,Bt)|0,R=R+Math.imul(Ie,hn)|0,S=(S=S+Math.imul(Ie,We)|0)+Math.imul(Ce,hn)|0,N=N+Math.imul(Ce,We)|0,R=R+Math.imul(ke,qt)|0,S=(S=S+Math.imul(ke,Ge)|0)+Math.imul(ze,qt)|0,N=N+Math.imul(ze,Ge)|0,R=R+Math.imul(pe,Ee)|0,S=(S=S+Math.imul(pe,Ne)|0)+Math.imul(Te,Ee)|0,N=N+Math.imul(Te,Ne)|0,R=R+Math.imul(he,Ke)|0,S=(S=S+Math.imul(he,bt)|0)+Math.imul(de,Ke)|0,N=N+Math.imul(de,bt)|0;var tn=(Q+(R=R+Math.imul(ie,pt)|0)|0)+((8191&(S=(S=S+Math.imul(ie,St)|0)+Math.imul(ue,pt)|0))<<13)|0;Q=((N=N+Math.imul(ue,St)|0)+(S>>>13)|0)+(tn>>>26)|0,tn&=67108863,R=Math.imul(Be,st),S=(S=Math.imul(Be,Bt))+Math.imul(He,st)|0,N=Math.imul(He,Bt),R=R+Math.imul(we,hn)|0,S=(S=S+Math.imul(we,We)|0)+Math.imul(Se,hn)|0,N=N+Math.imul(Se,We)|0,R=R+Math.imul(Ie,qt)|0,S=(S=S+Math.imul(Ie,Ge)|0)+Math.imul(Ce,qt)|0,N=N+Math.imul(Ce,Ge)|0,R=R+Math.imul(ke,Ee)|0,S=(S=S+Math.imul(ke,Ne)|0)+Math.imul(ze,Ee)|0,N=N+Math.imul(ze,Ne)|0,R=R+Math.imul(pe,Ke)|0,S=(S=S+Math.imul(pe,bt)|0)+Math.imul(Te,Ke)|0,N=N+Math.imul(Te,bt)|0;var un=(Q+(R=R+Math.imul(he,pt)|0)|0)+((8191&(S=(S=S+Math.imul(he,St)|0)+Math.imul(de,pt)|0))<<13)|0;Q=((N=N+Math.imul(de,St)|0)+(S>>>13)|0)+(un>>>26)|0,un&=67108863,R=Math.imul(Be,hn),S=(S=Math.imul(Be,We))+Math.imul(He,hn)|0,N=Math.imul(He,We),R=R+Math.imul(we,qt)|0,S=(S=S+Math.imul(we,Ge)|0)+Math.imul(Se,qt)|0,N=N+Math.imul(Se,Ge)|0,R=R+Math.imul(Ie,Ee)|0,S=(S=S+Math.imul(Ie,Ne)|0)+Math.imul(Ce,Ee)|0,N=N+Math.imul(Ce,Ne)|0,R=R+Math.imul(ke,Ke)|0,S=(S=S+Math.imul(ke,bt)|0)+Math.imul(ze,Ke)|0,N=N+Math.imul(ze,bt)|0;var vn=(Q+(R=R+Math.imul(pe,pt)|0)|0)+((8191&(S=(S=S+Math.imul(pe,St)|0)+Math.imul(Te,pt)|0))<<13)|0;Q=((N=N+Math.imul(Te,St)|0)+(S>>>13)|0)+(vn>>>26)|0,vn&=67108863,R=Math.imul(Be,qt),S=(S=Math.imul(Be,Ge))+Math.imul(He,qt)|0,N=Math.imul(He,Ge),R=R+Math.imul(we,Ee)|0,S=(S=S+Math.imul(we,Ne)|0)+Math.imul(Se,Ee)|0,N=N+Math.imul(Se,Ne)|0,R=R+Math.imul(Ie,Ke)|0,S=(S=S+Math.imul(Ie,bt)|0)+Math.imul(Ce,Ke)|0,N=N+Math.imul(Ce,bt)|0;var Qt=(Q+(R=R+Math.imul(ke,pt)|0)|0)+((8191&(S=(S=S+Math.imul(ke,St)|0)+Math.imul(ze,pt)|0))<<13)|0;Q=((N=N+Math.imul(ze,St)|0)+(S>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,R=Math.imul(Be,Ee),S=(S=Math.imul(Be,Ne))+Math.imul(He,Ee)|0,N=Math.imul(He,Ne),R=R+Math.imul(we,Ke)|0,S=(S=S+Math.imul(we,bt)|0)+Math.imul(Se,Ke)|0,N=N+Math.imul(Se,bt)|0;var yn=(Q+(R=R+Math.imul(Ie,pt)|0)|0)+((8191&(S=(S=S+Math.imul(Ie,St)|0)+Math.imul(Ce,pt)|0))<<13)|0;Q=((N=N+Math.imul(Ce,St)|0)+(S>>>13)|0)+(yn>>>26)|0,yn&=67108863,R=Math.imul(Be,Ke),S=(S=Math.imul(Be,bt))+Math.imul(He,Ke)|0,N=Math.imul(He,bt);var Mn=(Q+(R=R+Math.imul(we,pt)|0)|0)+((8191&(S=(S=S+Math.imul(we,St)|0)+Math.imul(Se,pt)|0))<<13)|0;Q=((N=N+Math.imul(Se,St)|0)+(S>>>13)|0)+(Mn>>>26)|0,Mn&=67108863;var Pn=(Q+(R=Math.imul(Be,pt))|0)+((8191&(S=(S=Math.imul(Be,St))+Math.imul(He,pt)|0))<<13)|0;return Q=((N=Math.imul(He,St))+(S>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,Y[0]=jt,Y[1]=Lt,Y[2]=Vt,Y[3]=mt,Y[4]=Wt,Y[5]=Kt,Y[6]=rn,Y[7]=Yt,Y[8]=Ue,Y[9]=wt,Y[10]=Ut,Y[11]=Zt,Y[12]=tn,Y[13]=un,Y[14]=vn,Y[15]=Qt,Y[16]=yn,Y[17]=Mn,Y[18]=Pn,0!==Q&&(Y[19]=Q,D.length++),D};function y(A,I,D){return(new v).mulp(A,I,D)}function v(A,I){this.x=A,this.y=I}Math.imul||(g=d),r.prototype.mulTo=function(A,I){var D=this.length+A.length;return 10===this.length&&10===A.length?g(this,A,I):D<63?d(this,A,I):D<1024?function(R,S,N){N.negative=S.negative^R.negative,N.length=R.length+S.length;for(var B=0,H=0,Y=0;Y<N.length-1;Y++){var Q=H;H=0;for(var ne=67108863&B,ae=Math.min(Y,S.length-1),te=Math.max(0,Y-R.length+1);te<=ae;te++){var q=(0|R.words[Y-te])*(0|S.words[te]),re=67108863&q;ne=67108863&(re=re+ne|0),H+=(Q=(Q=Q+(q/67108864|0)|0)+(re>>>26)|0)>>>26,Q&=67108863}N.words[Y]=ne,B=Q,Q=H}return 0!==B?N.words[Y]=B:N.length--,N.strip()}(this,A,I):y(this,A,I)},v.prototype.makeRBT=function(A){for(var I=new Array(A),D=r.prototype._countBits(A)-1,R=0;R<A;R++)I[R]=this.revBin(R,D,A);return I},v.prototype.revBin=function(A,I,D){if(0===A||A===D-1)return A;for(var R=0,S=0;S<I;S++)R|=(1&A)<<I-S-1,A>>=1;return R},v.prototype.permute=function(A,I,D,R,S,N){for(var B=0;B<N;B++)R[B]=I[A[B]],S[B]=D[A[B]]},v.prototype.transform=function(A,I,D,R,S,N){this.permute(N,A,I,D,R,S);for(var B=1;B<S;B<<=1)for(var H=B<<1,Y=Math.cos(2*Math.PI/H),Q=Math.sin(2*Math.PI/H),ne=0;ne<S;ne+=H)for(var ae=Y,te=Q,K=0;K<B;K++){var q=D[ne+K],re=R[ne+K],V=D[ne+K+B],W=R[ne+K+B],Z=ae*V-te*W;W=ae*W+te*V,D[ne+K]=q+(V=Z),R[ne+K]=re+W,D[ne+K+B]=q-V,R[ne+K+B]=re-W,K!==H&&(Z=Y*ae-Q*te,te=Y*te+Q*ae,ae=Z)}},v.prototype.guessLen13b=function(A,I){var D=1|Math.max(I,A),R=1&D,S=0;for(D=D/2|0;D;D>>>=1)S++;return 1<<S+1+R},v.prototype.conjugate=function(A,I,D){if(!(D<=1))for(var R=0;R<D/2;R++){var S=A[R];A[R]=A[D-R-1],A[D-R-1]=S,S=I[R],I[R]=-I[D-R-1],I[D-R-1]=-S}},v.prototype.normalize13b=function(A,I){for(var D=0,R=0;R<I/2;R++){var S=8192*Math.round(A[2*R+1]/I)+Math.round(A[2*R]/I)+D;A[R]=67108863&S,D=S<67108864?0:S/67108864|0}return A},v.prototype.convert13b=function(A,I,D,R){for(var S=0,N=0;N<I;N++)D[2*N]=8191&(S+=0|A[N]),D[2*N+1]=8191&(S>>>=13),S>>>=13;for(N=2*I;N<R;++N)D[N]=0;b(0===S),b(0==(-8192&S))},v.prototype.stub=function(A){for(var I=new Array(A),D=0;D<A;D++)I[D]=0;return I},v.prototype.mulp=function(A,I,D){var R=2*this.guessLen13b(A.length,I.length),S=this.makeRBT(R),N=this.stub(R),B=new Array(R),H=new Array(R),Y=new Array(R),Q=new Array(R),ne=new Array(R),ae=new Array(R),te=D.words;te.length=R,this.convert13b(A.words,A.length,B,R),this.convert13b(I.words,I.length,Q,R),this.transform(B,N,H,Y,R,S),this.transform(Q,N,ne,ae,R,S);for(var K=0;K<R;K++){var q=H[K]*ne[K]-Y[K]*ae[K];Y[K]=H[K]*ae[K]+Y[K]*ne[K],H[K]=q}return this.conjugate(H,Y,R),this.transform(H,Y,te,N,R,S),this.conjugate(te,N,R),this.normalize13b(te,R),D.negative=A.negative^I.negative,D.length=A.length+I.length,D.strip()},r.prototype.mul=function(A){var I=new r(null);return I.words=new Array(this.length+A.length),this.mulTo(A,I)},r.prototype.mulf=function(A){var I=new r(null);return I.words=new Array(this.length+A.length),y(this,A,I)},r.prototype.imul=function(A){return this.clone().mulTo(A,this)},r.prototype.imuln=function(A){b("number"==typeof A),b(A<67108864);for(var I=0,D=0;D<this.length;D++){var R=(0|this.words[D])*A,S=(67108863&R)+(67108863&I);I>>=26,I+=R/67108864|0,I+=S>>>26,this.words[D]=67108863&S}return 0!==I&&(this.words[D]=I,this.length++),this},r.prototype.muln=function(A){return this.clone().imuln(A)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(A){var I=function(N){for(var B=new Array(N.bitLength()),H=0;H<B.length;H++){var Q=H%26;B[H]=(N.words[H/26|0]&1<<Q)>>>Q}return B}(A);if(0===I.length)return new r(1);for(var D=this,R=0;R<I.length&&0===I[R];R++,D=D.sqr());if(++R<I.length)for(var S=D.sqr();R<I.length;R++,S=S.sqr())0!==I[R]&&(D=D.mul(S));return D},r.prototype.iushln=function(A){b("number"==typeof A&&A>=0);var I,D=A%26,R=(A-D)/26,S=67108863>>>26-D<<26-D;if(0!==D){var N=0;for(I=0;I<this.length;I++){var B=this.words[I]&S;this.words[I]=(0|this.words[I])-B<<D|N,N=B>>>26-D}N&&(this.words[I]=N,this.length++)}if(0!==R){for(I=this.length-1;I>=0;I--)this.words[I+R]=this.words[I];for(I=0;I<R;I++)this.words[I]=0;this.length+=R}return this.strip()},r.prototype.ishln=function(A){return b(0===this.negative),this.iushln(A)},r.prototype.iushrn=function(A,I,D){var R;b("number"==typeof A&&A>=0),R=I?(I-I%26)/26:0;var S=A%26,N=Math.min((A-S)/26,this.length),B=67108863^67108863>>>S<<S,H=D;if(R-=N,R=Math.max(0,R),H){for(var Y=0;Y<N;Y++)H.words[Y]=this.words[Y];H.length=N}if(0!==N)if(this.length>N)for(this.length-=N,Y=0;Y<this.length;Y++)this.words[Y]=this.words[Y+N];else this.words[0]=0,this.length=1;var Q=0;for(Y=this.length-1;Y>=0&&(0!==Q||Y>=R);Y--){var ne=0|this.words[Y];this.words[Y]=Q<<26-S|ne>>>S,Q=ne&B}return H&&0!==Q&&(H.words[H.length++]=Q),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(A,I,D){return b(0===this.negative),this.iushrn(A,I,D)},r.prototype.shln=function(A){return this.clone().ishln(A)},r.prototype.ushln=function(A){return this.clone().iushln(A)},r.prototype.shrn=function(A){return this.clone().ishrn(A)},r.prototype.ushrn=function(A){return this.clone().iushrn(A)},r.prototype.testn=function(A){b("number"==typeof A&&A>=0);var I=A%26,D=(A-I)/26;return!(this.length<=D||!(this.words[D]&1<<I))},r.prototype.imaskn=function(A){b("number"==typeof A&&A>=0);var I=A%26,D=(A-I)/26;return b(0===this.negative,"imaskn works only with positive numbers"),this.length<=D?this:(0!==I&&D++,this.length=Math.min(D,this.length),0!==I&&(this.words[this.length-1]&=67108863^67108863>>>I<<I),this.strip())},r.prototype.maskn=function(A){return this.clone().imaskn(A)},r.prototype.iaddn=function(A){return b("number"==typeof A),b(A<67108864),A<0?this.isubn(-A):0!==this.negative?1===this.length&&(0|this.words[0])<A?(this.words[0]=A-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(A),this.negative=1,this):this._iaddn(A)},r.prototype._iaddn=function(A){this.words[0]+=A;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},r.prototype.isubn=function(A){if(b("number"==typeof A),b(A<67108864),A<0)return this.iaddn(-A);if(0!==this.negative)return this.negative=0,this.iaddn(A),this.negative=1,this;if(this.words[0]-=A,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this.strip()},r.prototype.addn=function(A){return this.clone().iaddn(A)},r.prototype.subn=function(A){return this.clone().isubn(A)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(A,I,D){var R,S;this._expand(A.length+D);var B=0;for(R=0;R<A.length;R++){S=(0|this.words[R+D])+B;var H=(0|A.words[R])*I;B=((S-=67108863&H)>>26)-(H/67108864|0),this.words[R+D]=67108863&S}for(;R<this.length-D;R++)B=(S=(0|this.words[R+D])+B)>>26,this.words[R+D]=67108863&S;if(0===B)return this.strip();for(b(-1===B),B=0,R=0;R<this.length;R++)B=(S=-(0|this.words[R])+B)>>26,this.words[R]=67108863&S;return this.negative=1,this.strip()},r.prototype._wordDiv=function(A,I){var D,R=this.clone(),S=A,N=0|S.words[S.length-1];0!=(D=26-this._countBits(N))&&(S=S.ushln(D),R.iushln(D),N=0|S.words[S.length-1]);var B,H=R.length-S.length;if("mod"!==I){(B=new r(null)).length=H+1,B.words=new Array(B.length);for(var Y=0;Y<B.length;Y++)B.words[Y]=0}var Q=R.clone()._ishlnsubmul(S,1,H);0===Q.negative&&(R=Q,B&&(B.words[H]=1));for(var ne=H-1;ne>=0;ne--){var ae=67108864*(0|R.words[S.length+ne])+(0|R.words[S.length+ne-1]);for(ae=Math.min(ae/N|0,67108863),R._ishlnsubmul(S,ae,ne);0!==R.negative;)ae--,R.negative=0,R._ishlnsubmul(S,1,ne),R.isZero()||(R.negative^=1);B&&(B.words[ne]=ae)}return B&&B.strip(),R.strip(),"div"!==I&&0!==D&&R.iushrn(D),{div:B||null,mod:R}},r.prototype.divmod=function(A,I,D){return b(!A.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===A.negative?(N=this.neg().divmod(A,I),"mod"!==I&&(R=N.div.neg()),"div"!==I&&(S=N.mod.neg(),D&&0!==S.negative&&S.iadd(A)),{div:R,mod:S}):0===this.negative&&0!==A.negative?(N=this.divmod(A.neg(),I),"mod"!==I&&(R=N.div.neg()),{div:R,mod:N.mod}):0!=(this.negative&A.negative)?(N=this.neg().divmod(A.neg(),I),"div"!==I&&(S=N.mod.neg(),D&&0!==S.negative&&S.isub(A)),{div:N.div,mod:S}):A.length>this.length||this.cmp(A)<0?{div:new r(0),mod:this}:1===A.length?"div"===I?{div:this.divn(A.words[0]),mod:null}:"mod"===I?{div:null,mod:new r(this.modn(A.words[0]))}:{div:this.divn(A.words[0]),mod:new r(this.modn(A.words[0]))}:this._wordDiv(A,I);var R,S,N},r.prototype.div=function(A){return this.divmod(A,"div",!1).div},r.prototype.mod=function(A){return this.divmod(A,"mod",!1).mod},r.prototype.umod=function(A){return this.divmod(A,"mod",!0).mod},r.prototype.divRound=function(A){var I=this.divmod(A);if(I.mod.isZero())return I.div;var D=0!==I.div.negative?I.mod.isub(A):I.mod,R=A.ushrn(1),S=A.andln(1),N=D.cmp(R);return N<0||1===S&&0===N?I.div:0!==I.div.negative?I.div.isubn(1):I.div.iaddn(1)},r.prototype.modn=function(A){b(A<=67108863);for(var I=(1<<26)%A,D=0,R=this.length-1;R>=0;R--)D=(I*D+(0|this.words[R]))%A;return D},r.prototype.idivn=function(A){b(A<=67108863);for(var I=0,D=this.length-1;D>=0;D--){var R=(0|this.words[D])+67108864*I;this.words[D]=R/A|0,I=R%A}return this.strip()},r.prototype.divn=function(A){return this.clone().idivn(A)},r.prototype.egcd=function(A){b(0===A.negative),b(!A.isZero());var I=this,D=A.clone();I=0!==I.negative?I.umod(A):I.clone();for(var R=new r(1),S=new r(0),N=new r(0),B=new r(1),H=0;I.isEven()&&D.isEven();)I.iushrn(1),D.iushrn(1),++H;for(var Y=D.clone(),Q=I.clone();!I.isZero();){for(var ne=0,ae=1;0==(I.words[0]&ae)&&ne<26;++ne,ae<<=1);if(ne>0)for(I.iushrn(ne);ne-- >0;)(R.isOdd()||S.isOdd())&&(R.iadd(Y),S.isub(Q)),R.iushrn(1),S.iushrn(1);for(var te=0,K=1;0==(D.words[0]&K)&&te<26;++te,K<<=1);if(te>0)for(D.iushrn(te);te-- >0;)(N.isOdd()||B.isOdd())&&(N.iadd(Y),B.isub(Q)),N.iushrn(1),B.iushrn(1);I.cmp(D)>=0?(I.isub(D),R.isub(N),S.isub(B)):(D.isub(I),N.isub(R),B.isub(S))}return{a:N,b:B,gcd:D.iushln(H)}},r.prototype._invmp=function(A){b(0===A.negative),b(!A.isZero());var I=this,D=A.clone();I=0!==I.negative?I.umod(A):I.clone();for(var R,S=new r(1),N=new r(0),B=D.clone();I.cmpn(1)>0&&D.cmpn(1)>0;){for(var H=0,Y=1;0==(I.words[0]&Y)&&H<26;++H,Y<<=1);if(H>0)for(I.iushrn(H);H-- >0;)S.isOdd()&&S.iadd(B),S.iushrn(1);for(var Q=0,ne=1;0==(D.words[0]&ne)&&Q<26;++Q,ne<<=1);if(Q>0)for(D.iushrn(Q);Q-- >0;)N.isOdd()&&N.iadd(B),N.iushrn(1);I.cmp(D)>=0?(I.isub(D),S.isub(N)):(D.isub(I),N.isub(S))}return(R=0===I.cmpn(1)?S:N).cmpn(0)<0&&R.iadd(A),R},r.prototype.gcd=function(A){if(this.isZero())return A.abs();if(A.isZero())return this.abs();var I=this.clone(),D=A.clone();I.negative=0,D.negative=0;for(var R=0;I.isEven()&&D.isEven();R++)I.iushrn(1),D.iushrn(1);for(;;){for(;I.isEven();)I.iushrn(1);for(;D.isEven();)D.iushrn(1);var S=I.cmp(D);if(S<0){var N=I;I=D,D=N}else if(0===S||0===D.cmpn(1))break;I.isub(D)}return D.iushln(R)},r.prototype.invm=function(A){return this.egcd(A).a.umod(A)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(A){return this.words[0]&A},r.prototype.bincn=function(A){b("number"==typeof A);var I=A%26,D=(A-I)/26,R=1<<I;if(this.length<=D)return this._expand(D+1),this.words[D]|=R,this;for(var S=R,N=D;0!==S&&N<this.length;N++){var B=0|this.words[N];S=(B+=S)>>>26,this.words[N]=B&=67108863}return 0!==S&&(this.words[N]=S,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(A){var I,D=A<0;if(0!==this.negative&&!D)return-1;if(0===this.negative&&D)return 1;if(this.strip(),this.length>1)I=1;else{D&&(A=-A),b(A<=67108863,"Number is too big");var R=0|this.words[0];I=R===A?0:R<A?-1:1}return 0!==this.negative?0|-I:I},r.prototype.cmp=function(A){if(0!==this.negative&&0===A.negative)return-1;if(0===this.negative&&0!==A.negative)return 1;var I=this.ucmp(A);return 0!==this.negative?0|-I:I},r.prototype.ucmp=function(A){if(this.length>A.length)return 1;if(this.length<A.length)return-1;for(var I=0,D=this.length-1;D>=0;D--){var R=0|this.words[D],S=0|A.words[D];if(R!==S){R<S?I=-1:R>S&&(I=1);break}}return I},r.prototype.gtn=function(A){return 1===this.cmpn(A)},r.prototype.gt=function(A){return 1===this.cmp(A)},r.prototype.gten=function(A){return this.cmpn(A)>=0},r.prototype.gte=function(A){return this.cmp(A)>=0},r.prototype.ltn=function(A){return-1===this.cmpn(A)},r.prototype.lt=function(A){return-1===this.cmp(A)},r.prototype.lten=function(A){return this.cmpn(A)<=0},r.prototype.lte=function(A){return this.cmp(A)<=0},r.prototype.eqn=function(A){return 0===this.cmpn(A)},r.prototype.eq=function(A){return 0===this.cmp(A)},r.red=function(A){return new L(A)},r.prototype.toRed=function(A){return b(!this.red,"Already a number in reduction context"),b(0===this.negative,"red works only with positives"),A.convertTo(this)._forceRed(A)},r.prototype.fromRed=function(){return b(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(A){return this.red=A,this},r.prototype.forceRed=function(A){return b(!this.red,"Already a number in reduction context"),this._forceRed(A)},r.prototype.redAdd=function(A){return b(this.red,"redAdd works only with red numbers"),this.red.add(this,A)},r.prototype.redIAdd=function(A){return b(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,A)},r.prototype.redSub=function(A){return b(this.red,"redSub works only with red numbers"),this.red.sub(this,A)},r.prototype.redISub=function(A){return b(this.red,"redISub works only with red numbers"),this.red.isub(this,A)},r.prototype.redShl=function(A){return b(this.red,"redShl works only with red numbers"),this.red.shl(this,A)},r.prototype.redMul=function(A){return b(this.red,"redMul works only with red numbers"),this.red._verify2(this,A),this.red.mul(this,A)},r.prototype.redIMul=function(A){return b(this.red,"redMul works only with red numbers"),this.red._verify2(this,A),this.red.imul(this,A)},r.prototype.redSqr=function(){return b(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return b(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return b(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return b(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return b(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(A){return b(this.red&&!A.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,A)};var _={k256:null,p224:null,p192:null,p25519:null};function w(A,I){this.name=A,this.p=new r(I,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function C(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function L(A){if("string"==typeof A){var I=r._prime(A);this.m=I.p,this.prime=I}else b(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}function P(A){L.call(this,A),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var A=new r(null);return A.words=new Array(Math.ceil(this.n/13)),A},w.prototype.ireduce=function(A){var I,D=A;do{this.split(D,this.tmp),I=(D=(D=this.imulK(D)).iadd(this.tmp)).bitLength()}while(I>this.n);var R=I<this.n?-1:D.ucmp(this.p);return 0===R?(D.words[0]=0,D.length=1):R>0?D.isub(this.p):D.strip(),D},w.prototype.split=function(A,I){A.iushrn(this.n,0,I)},w.prototype.imulK=function(A){return A.imul(this.k)},p(x,w),x.prototype.split=function(A,I){for(var D=Math.min(A.length,9),R=0;R<D;R++)I.words[R]=A.words[R];if(I.length=D,A.length<=9)return A.words[0]=0,void(A.length=1);var S=A.words[9];for(I.words[I.length++]=4194303&S,R=10;R<A.length;R++){var N=0|A.words[R];A.words[R-10]=(4194303&N)<<4|S>>>22,S=N}A.words[R-10]=S>>>=22,A.length-=0===S&&A.length>10?10:9},x.prototype.imulK=function(A){A.words[A.length]=0,A.words[A.length+1]=0,A.length+=2;for(var I=0,D=0;D<A.length;D++){var R=0|A.words[D];A.words[D]=67108863&(I+=977*R),I=64*R+(I/67108864|0)}return 0===A.words[A.length-1]&&(A.length--,0===A.words[A.length-1]&&A.length--),A},p(E,w),p(k,w),p(C,w),C.prototype.imulK=function(A){for(var I=0,D=0;D<A.length;D++){var R=19*(0|A.words[D])+I,S=67108863&R;R>>>=26,A.words[D]=S,I=R}return 0!==I&&(A.words[A.length++]=I),A},r._prime=function(A){if(_[A])return _[A];var I;if("k256"===A)I=new x;else if("p224"===A)I=new E;else if("p192"===A)I=new k;else{if("p25519"!==A)throw new Error("Unknown prime "+A);I=new C}return _[A]=I,I},L.prototype._verify1=function(A){b(0===A.negative,"red works only with positives"),b(A.red,"red works only with red numbers")},L.prototype._verify2=function(A,I){b(0==(A.negative|I.negative),"red works only with positives"),b(A.red&&A.red===I.red,"red works only with red numbers")},L.prototype.imod=function(A){return this.prime?this.prime.ireduce(A)._forceRed(this):A.umod(this.m)._forceRed(this)},L.prototype.neg=function(A){return A.isZero()?A.clone():this.m.sub(A)._forceRed(this)},L.prototype.add=function(A,I){this._verify2(A,I);var D=A.add(I);return D.cmp(this.m)>=0&&D.isub(this.m),D._forceRed(this)},L.prototype.iadd=function(A,I){this._verify2(A,I);var D=A.iadd(I);return D.cmp(this.m)>=0&&D.isub(this.m),D},L.prototype.sub=function(A,I){this._verify2(A,I);var D=A.sub(I);return D.cmpn(0)<0&&D.iadd(this.m),D._forceRed(this)},L.prototype.isub=function(A,I){this._verify2(A,I);var D=A.isub(I);return D.cmpn(0)<0&&D.iadd(this.m),D},L.prototype.shl=function(A,I){return this._verify1(A),this.imod(A.ushln(I))},L.prototype.imul=function(A,I){return this._verify2(A,I),this.imod(A.imul(I))},L.prototype.mul=function(A,I){return this._verify2(A,I),this.imod(A.mul(I))},L.prototype.isqr=function(A){return this.imul(A,A.clone())},L.prototype.sqr=function(A){return this.mul(A,A)},L.prototype.sqrt=function(A){if(A.isZero())return A.clone();var I=this.m.andln(3);if(b(I%2==1),3===I){var D=this.m.add(new r(1)).iushrn(2);return this.pow(A,D)}for(var R=this.m.subn(1),S=0;!R.isZero()&&0===R.andln(1);)S++,R.iushrn(1);b(!R.isZero());var N=new r(1).toRed(this),B=N.redNeg(),H=this.m.subn(1).iushrn(1),Y=this.m.bitLength();for(Y=new r(2*Y*Y).toRed(this);0!==this.pow(Y,H).cmp(B);)Y.redIAdd(B);for(var Q=this.pow(Y,R),ne=this.pow(A,R.addn(1).iushrn(1)),ae=this.pow(A,R),te=S;0!==ae.cmp(N);){for(var K=ae,q=0;0!==K.cmp(N);q++)K=K.redSqr();b(q<te);var re=this.pow(Q,new r(1).iushln(te-q-1));ne=ne.redMul(re),Q=re.redSqr(),ae=ae.redMul(Q),te=q}return ne},L.prototype.invm=function(A){var I=A._invmp(this.m);return 0!==I.negative?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},L.prototype.pow=function(A,I){if(I.isZero())return new r(1).toRed(this);if(0===I.cmpn(1))return A.clone();var D=new Array(16);D[0]=new r(1).toRed(this),D[1]=A;for(var R=2;R<D.length;R++)D[R]=this.mul(D[R-1],A);var S=D[0],N=0,B=0,H=I.bitLength()%26;for(0===H&&(H=26),R=I.length-1;R>=0;R--){for(var Y=I.words[R],Q=H-1;Q>=0;Q--){var ne=Y>>Q&1;S!==D[0]&&(S=this.sqr(S)),0!==ne||0!==N?(N<<=1,N|=ne,(4==++B||0===R&&0===Q)&&(S=this.mul(S,D[N]),B=0,N=0)):B=0}H=26}return S},L.prototype.convertTo=function(A){var I=A.umod(this.m);return I===A?I.clone():I},L.prototype.convertFrom=function(A){var I=A.clone();return I.red=null,I},r.mont=function(A){return new P(A)},p(P,L),P.prototype.convertTo=function(A){return this.imod(A.ushln(this.shift))},P.prototype.convertFrom=function(A){var I=this.imod(A.mul(this.rinv));return I.red=null,I},P.prototype.imul=function(A,I){if(A.isZero()||I.isZero())return A.words[0]=0,A.length=1,A;var D=A.imul(I),R=D.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=D.isub(R).iushrn(this.shift),N=S;return S.cmp(this.m)>=0?N=S.isub(this.m):S.cmpn(0)<0&&(N=S.iadd(this.m)),N._forceRed(this)},P.prototype.mul=function(A,I){if(A.isZero()||I.isZero())return new r(0)._forceRed(this);var D=A.mul(I),R=D.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=D.isub(R).iushrn(this.shift),N=S;return S.cmp(this.m)>=0?N=S.isub(this.m):S.cmpn(0)<0&&(N=S.iadd(this.m)),N._forceRed(this)},P.prototype.invm=function(A){return this.imod(A._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===G||G,this)},{buffer:115}],107:[function(h,G,X){"use strict";G.exports=function(i){var m,b,p,r=i.length,u=0;for(m=0;m<r;++m)u+=i[m].length;var c=new Array(u),l=0;for(m=0;m<r;++m){var f=i[m],s=f.length;for(b=0;b<s;++b){var o=c[l++]=new Array(s-1),d=0;for(p=0;p<s;++p)p!==b&&(o[d++]=f[p]);if(1&b){var g=o[1];o[1]=o[0],o[0]=g}}}return c}},{}],108:[function(h,G,X){"use strict";G.exports=function(o,d,g){switch(arguments.length){case 1:return f(o);case 2:return"function"==typeof d?c(o,o,d,!0):s(o,d);case 3:return c(o,d,g,!1);default:throw new Error("box-intersect: Invalid arguments")}};var i,m=h("typedarray-pool"),b=h("./lib/sweep"),p=h("./lib/intersect");function r(o,d){for(var g=0;g<o;++g)if(!(d[g]<=d[g+o]))return!0;return!1}function u(o,d,g,y){for(var v=0,_=0,w=0,x=o.length;w<x;++w){var E=o[w];if(!r(d,E)){for(var k=0;k<2*d;++k)g[v++]=E[k];y[_++]=w}}return _}function c(o,d,g,y){var v=o.length,_=d.length;if(!(v<=0||_<=0)){var w=o[0].length>>>1;if(!(w<=0)){var x,E=m.mallocDouble(2*w*v),k=m.mallocInt32(v);if((v=u(o,w,E,k))>0){if(1===w&&y)b.init(v),x=b.sweepComplete(w,g,0,v,E,k,0,v,E,k);else{var C=m.mallocDouble(2*w*_),L=m.mallocInt32(_);(_=u(d,w,C,L))>0&&(b.init(v+_),x=1===w?b.sweepBipartite(w,g,0,v,E,k,0,_,C,L):p(w,g,y,v,E,k,_,C,L),m.free(C),m.free(L))}m.free(E),m.free(k)}return x}}}function l(o,d){i.push([o,d])}function f(o){return i=[],c(o,o,l,!0),i}function s(o,d){return i=[],c(o,d,l,!1),i}},{"./lib/intersect":110,"./lib/sweep":114,"typedarray-pool":617}],109:[function(h,G,X){"use strict";var i=["d","ax","vv","rs","re","rb","ri","bs","be","bb","bi"];function m(b){var p="bruteForce"+(b?"Full":"Partial"),r=[],u=i.slice();b||u.splice(3,0,"fp");var c=["function "+p+"("+u.join()+"){"];function l(s,o){var g,y,v,_,w,x,E,d=(w=["function ",_="bruteForce"+((g=s)?"Red":"Blue")+((y=o)?"Flip":"")+((v=b)?"Full":""),"(",i.join(),"){","var ","es","=2*","d",";"],x="for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];",E="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(v?"y1=bb[ax+bp+d],":"")+"yi=bi[j];",g?w.push(x,"Q",":",E):w.push(E,"Q",":",x),w.push(v?"if(y1<x0||x1<y0)continue;":y?"if(y0<=x0||x1<y0)continue;":"if(y0<x0||x1<y0)continue;"),w.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv("),w.push(y?"yi,xi":"xi,yi"),w.push(");if(rv!==void 0)return rv;}}}"),{name:_,code:w.join("")});r.push(d.code),c.push("return "+d.name+"("+i.join()+");")}c.push("if(re-rs>be-bs){"),b?(l(!0,!1),c.push("}else{"),l(!1,!1)):(c.push("if(fp){"),l(!0,!0),c.push("}else{"),l(!0,!1),c.push("}}else{if(fp){"),l(!1,!0),c.push("}else{"),l(!1,!1),c.push("}")),c.push("}}return "+p);var f=r.join("")+c.join("");return new Function(f)()}X.partial=m(!1),X.full=m(!0)},{}],110:[function(h,G,X){"use strict";G.exports=function(k,C,L,P,A,I,D,R,S){!function(Ie,Ce){var _e=8*m.log2(Ce+1)*(Ie+1)|0,we=m.nextPow2(6*_e);v.length<we&&(i.free(v),v=i.mallocInt32(we));var Se=m.nextPow2(2*_e);_.length<Se&&(i.free(_),_=i.mallocDouble(Se))}(k,P+D);var N,B=0,H=2*k;for(w(B++,0,0,P,0,D,L?16:0,-1/0,1/0),L||w(B++,0,0,D,0,P,1,-1/0,1/0);B>0;){var Y=6*(B-=1),Q=v[Y],ne=v[Y+1],ae=v[Y+2],te=v[Y+3],K=v[Y+4],q=v[Y+5],re=2*B,V=_[re],W=_[re+1],Z=1&q,oe=!!(16&q),ie=A,ue=I,fe=R,he=S;if(Z&&(ie=R,ue=S,fe=A,he=I),!(2&q&&(ae=o(k,Q,ne,ae,ie,ue,W),ne>=ae)||4&q&&(ne=d(k,Q,ne,ae,ie,ue,V))>=ae)){var de=ae-ne,be=K-te;if(oe){if(k*de*(de+be)<1<<22){if(void 0!==(N=u.scanComplete(k,Q,C,ne,ae,ie,ue,te,K,fe,he)))return N;continue}}else{if(k*Math.min(de,be)<128){if(void 0!==(N=p(k,Q,C,Z,ne,ae,ie,ue,te,K,fe,he)))return N;continue}if(k*de*be<1<<22){if(void 0!==(N=u.scanBipartite(k,Q,C,Z,ne,ae,ie,ue,te,K,fe,he)))return N;continue}}var pe=f(k,Q,ne,ae,ie,ue,V,W);if(ne<pe)if(k*(pe-ne)<128){if(void 0!==(N=r(k,Q+1,C,ne,pe,ie,ue,te,K,fe,he)))return N}else if(Q===k-2){if(void 0!==(N=Z?u.sweepBipartite(k,C,te,K,fe,he,ne,pe,ie,ue):u.sweepBipartite(k,C,ne,pe,ie,ue,te,K,fe,he)))return N}else w(B++,Q+1,ne,pe,te,K,Z,-1/0,1/0),w(B++,Q+1,te,K,ne,pe,1^Z,-1/0,1/0);if(pe<ae){var Te=c(k,Q,te,K,fe,he),ye=fe[H*Te+Q],ke=s(k,Q,Te,K,fe,he,ye);if(ke<K&&w(B++,Q,pe,ae,ke,K,(4|Z)+(oe?16:0),ye,W),te<Te&&w(B++,Q,pe,ae,te,Te,(2|Z)+(oe?16:0),V,ye),Te+1===ke){if(void 0!==(N=oe?E(k,Q,C,pe,ae,ie,ue,Te,fe,he[Te]):x(k,Q,C,Z,pe,ae,ie,ue,Te,fe,he[Te])))return N}else if(Te<ke){var ze;if(oe){if(pe<(ze=g(k,Q,pe,ae,ie,ue,ye))){var je=s(k,Q,pe,ze,ie,ue,ye);if(Q===k-2){if(pe<je&&void 0!==(N=u.sweepComplete(k,C,pe,je,ie,ue,Te,ke,fe,he))||je<ze&&void 0!==(N=u.sweepBipartite(k,C,je,ze,ie,ue,Te,ke,fe,he)))return N}else pe<je&&w(B++,Q+1,pe,je,Te,ke,16,-1/0,1/0),je<ze&&(w(B++,Q+1,je,ze,Te,ke,0,-1/0,1/0),w(B++,Q+1,Te,ke,je,ze,1,-1/0,1/0))}}else pe<(ze=Z?y(k,Q,pe,ae,ie,ue,ye):g(k,Q,pe,ae,ie,ue,ye))&&(Q===k-2?N=Z?u.sweepBipartite(k,C,Te,ke,fe,he,pe,ze,ie,ue):u.sweepBipartite(k,C,pe,ze,ie,ue,Te,ke,fe,he):(w(B++,Q+1,pe,ze,Te,ke,Z,-1/0,1/0),w(B++,Q+1,Te,ke,pe,ze,1^Z,-1/0,1/0)))}}}}};var i=h("typedarray-pool"),m=h("bit-twiddle"),b=h("./brute"),p=b.partial,r=b.full,u=h("./sweep"),c=h("./median"),l=h("./partition"),f=l("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),s=l("lo===p0",["p0"]),o=l("lo<p0",["p0"]),d=l("hi<=p0",["p0"]),g=l("lo<=p0&&p0<=hi",["p0"]),y=l("lo<p0&&p0<=hi",["p0"]),v=i.mallocInt32(1024),_=i.mallocDouble(1024);function w(k,C,L,P,A,I,D,R,S){var N=6*k;v[N]=C,v[N+1]=L,v[N+2]=P,v[N+3]=A,v[N+4]=I,v[N+5]=D;var B=2*k;_[B]=R,_[B+1]=S}function x(k,C,L,P,A,I,D,R,S,N,B){var H=2*k,Y=S*H,Q=N[Y+C];e:for(var ne=A,ae=A*H;ne<I;++ne,ae+=H){var te=D[ae+C],K=D[ae+C+k];if(!(Q<te||K<Q||P&&Q===te)){for(var q,re=R[ne],V=C+1;V<k;++V)if(te=D[ae+V],(K=D[ae+V+k])<N[Y+V]||N[Y+V+k]<te)continue e;if(void 0!==(q=P?L(B,re):L(re,B)))return q}}}function E(k,C,L,P,A,I,D,R,S,N){var B=2*k,H=R*B,Y=S[H+C];e:for(var Q=P,ne=P*B;Q<A;++Q,ne+=B){var ae=D[Q];if(ae!==N){var te=I[ne+C],K=I[ne+C+k];if(!(Y<te||K<Y)){for(var q=C+1;q<k;++q)if(te=I[ne+q],(K=I[ne+q+k])<S[H+q]||S[H+q+k]<te)continue e;var W=L(ae,N);if(void 0!==W)return W}}}}},{"./brute":109,"./median":111,"./partition":112,"./sweep":114,"bit-twiddle":104,"typedarray-pool":617}],111:[function(h,G,X){"use strict";G.exports=function(b,p,r,u,c,l){if(u<=r+1)return r;for(var f=r,s=u,o=u+r>>>1,d=2*b,g=o,y=c[d*o+p];f<s;){if(s-f<8){m(b,p,f,s,c,l),y=c[d*o+p];break}var v=s-f,_=Math.random()*v+f|0,w=c[d*_+p],x=Math.random()*v+f|0,E=c[d*x+p],k=Math.random()*v+f|0,C=c[d*k+p];w<=E?C>=E?(g=x,y=E):w>=C?(g=_,y=w):(g=k,y=C):E>=C?(g=x,y=E):C>=w?(g=_,y=w):(g=k,y=C);for(var L=d*(s-1),P=d*g,A=0;A<d;++A,++L,++P){var I=c[L];c[L]=c[P],c[P]=I}var D=l[s-1];for(l[s-1]=l[g],l[g]=D,L=d*(s-1),P=d*(g=i(b,p,f,s-1,c,l,y)),A=0;A<d;++A,++L,++P)I=c[L],c[L]=c[P],c[P]=I;if(D=l[s-1],l[s-1]=l[g],l[g]=D,o<g){for(s=g-1;f<s&&c[d*(s-1)+p]===y;)s-=1;s+=1}else{if(!(g<o))break;for(f=g+1;f<s&&c[d*f+p]===y;)f+=1}}return i(b,p,r,o,c,l,c[d*o+p])};var i=h("./partition")("lo<p0",["p0"]);function m(b,p,r,u,c,l){for(var f=2*b,s=f*(r+1)+p,o=r+1;o<u;++o,s+=f)for(var d=c[s],g=o,y=f*(o-1);g>r&&c[y+p]>d;--g,y-=f){for(var v=y,_=y+f,w=0;w<f;++w,++v,++_){var x=c[v];c[v]=c[_],c[_]=x}var E=l[g];l[g]=l[g-1],l[g-1]=E}}},{"./partition":112}],112:[function(h,G,X){"use strict";G.exports=function(i,m){var b="abcdef".split("").concat(m),p=[];return i.indexOf("lo")>=0&&p.push("lo=e[k+n]"),i.indexOf("hi")>=0&&p.push("hi=e[k+o]"),b.push("for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m".replace("_",p.join()).replace("$",i)),Function.apply(void 0,b)}},{}],113:[function(h,G,X){"use strict";function i(l,f,s){for(var o=2*(l+1),d=l+1;d<=f;++d){for(var g=s[o++],y=s[o++],v=d,_=o-2;v-- >l;){var w=s[_-2],x=s[_-1];if(w<g||w===g&&x<y)break;s[_]=w,s[_+1]=x,_-=2}s[_]=g,s[_+1]=y}}function m(l,f,s){var o=s[l*=2],d=s[l+1];s[l]=s[f*=2],s[l+1]=s[f+1],s[f]=o,s[f+1]=d}function b(l,f,s){s[l*=2]=s[f*=2],s[l+1]=s[f+1]}function p(l,f,s,o){s*=2;var d=o[l*=2],g=o[l+1];o[l]=o[f*=2],o[l+1]=o[f+1],o[f]=o[s],o[f+1]=o[s+1],o[s]=d,o[s+1]=g}function r(l,f,s,o,d){d[l*=2]=d[f*=2],d[f]=s,d[l+1]=d[f+1],d[f+1]=o}function u(l,f,s){var o=s[l*=2],d=s[f*=2];return!(o<d)&&(o!==d||s[l+1]>s[f+1])}function c(l,f,s,o){var d=o[l*=2];return d<f||d===f&&o[l+1]<s}G.exports=function(l,f){f<=128?i(0,f-1,l):function s(o,d,g){var y=(d-o+1)/6|0,v=o+y,_=d-y,w=o+d>>1,x=w-y,E=w+y,k=v,C=x,L=w,P=E,A=_,I=o+1,D=d-1,R=0;u(k,C,g)&&(R=k,k=C,C=R),u(P,A,g)&&(R=P,P=A,A=R),u(k,L,g)&&(R=k,k=L,L=R),u(C,L,g)&&(R=C,C=L,L=R),u(k,P,g)&&(R=k,k=P,P=R),u(L,P,g)&&(R=L,L=P,P=R),u(C,A,g)&&(R=C,C=A,A=R),u(C,L,g)&&(R=C,C=L,L=R),u(P,A,g)&&(R=P,P=A,A=R);for(var S=g[2*C],N=g[2*C+1],B=g[2*P],H=g[2*P+1],Y=2*k,Q=2*L,ne=2*A,ae=2*v,te=2*w,K=2*_,q=0;q<2;++q){var V=g[Q+q],W=g[ne+q];g[ae+q]=g[Y+q],g[te+q]=V,g[K+q]=W}b(x,o,g),b(E,d,g);for(var Z=I;Z<=D;++Z)if(c(Z,S,N,g))Z!==I&&m(Z,I,g),++I;else if(!c(Z,B,H,g))for(;;){if(c(D,B,H,g)){c(D,S,N,g)?(p(Z,I,D,g),++I,--D):(m(Z,D,g),--D);break}if(--D<Z)break}r(o,I-1,S,N,g),r(d,D+1,B,H,g),I-2-o<=32?i(o,I-2,g):s(o,I-2,g),d-(D+2)<=32?i(D+2,d,g):s(D+2,d,g),D-I<=32?i(I,D,g):s(I,D,g)}(0,f-1,l)}},{}],114:[function(h,G,X){"use strict";G.exports={init:function(g){var y=m.nextPow2(g);p.length<y&&(i.free(p),p=i.mallocInt32(y)),r.length<y&&(i.free(r),r=i.mallocInt32(y)),u.length<y&&(i.free(u),u=i.mallocInt32(y)),c.length<y&&(i.free(c),c=i.mallocInt32(y)),l.length<y&&(i.free(l),l=i.mallocInt32(y)),f.length<y&&(i.free(f),f=i.mallocInt32(y));var v=8*y;s.length<v&&(i.free(s),s=i.mallocDouble(v))},sweepBipartite:function(g,y,v,_,w,x,E,k,C,L){for(var P=0,A=2*g,I=g-1,D=A-1,R=v;R<_;++R){var S=x[R],N=A*R;s[P++]=w[N+I],s[P++]=-(S+1),s[P++]=w[N+D],s[P++]=S}for(R=E;R<k;++R){S=L[R]+(1<<28);var B=A*R;s[P++]=C[B+I],s[P++]=-S,s[P++]=C[B+D],s[P++]=S}var H=P>>>1;b(s,H);var Y=0,Q=0;for(R=0;R<H;++R){var ne=0|s[2*R+1];if(ne>=1<<28)o(u,c,Q--,ne=ne-(1<<28)|0);else if(ne>=0)o(p,r,Y--,ne);else if(ne<=-(1<<28)){ne=-ne-(1<<28)|0;for(var ae=0;ae<Y;++ae)if(void 0!==(te=y(p[ae],ne)))return te;d(u,c,Q++,ne)}else{for(ne=-ne-1|0,ae=0;ae<Q;++ae){var te;if(void 0!==(te=y(ne,u[ae])))return te}d(p,r,Y++,ne)}}},sweepComplete:function(g,y,v,_,w,x,E,k,C,L){for(var P=0,A=2*g,I=g-1,D=A-1,R=v;R<_;++R){var S=x[R]+1<<1,N=A*R;s[P++]=w[N+I],s[P++]=-S,s[P++]=w[N+D],s[P++]=S}for(R=E;R<k;++R){S=L[R]+1<<1;var B=A*R;s[P++]=C[B+I],s[P++]=1|-S,s[P++]=C[B+D],s[P++]=1|S}var H=P>>>1;b(s,H);var Y=0,Q=0,ne=0;for(R=0;R<H;++R){var ae=0|s[2*R+1],te=1&ae;if(R<H-1&&ae>>1==s[2*R+3]>>1&&(te=2,R+=1),ae<0){for(var K=-(ae>>1)-1,q=0;q<ne;++q)if(void 0!==(re=y(l[q],K)))return re;if(0!==te)for(q=0;q<Y;++q)if(void 0!==(re=y(p[q],K)))return re;if(1!==te)for(q=0;q<Q;++q){var re;if(void 0!==(re=y(u[q],K)))return re}0===te?d(p,r,Y++,K):1===te?d(u,c,Q++,K):2===te&&d(l,f,ne++,K)}else K=(ae>>1)-1,0===te?o(p,r,Y--,K):1===te?o(u,c,Q--,K):2===te&&o(l,f,ne--,K)}},scanBipartite:function(g,y,v,_,w,x,E,k,C,L,P,A){var I=0,D=2*g,R=y,S=y+g,N=1,B=1;_?B=1<<28:N=1<<28;for(var H=w;H<x;++H){var Y=H+N,Q=D*H;s[I++]=E[Q+R],s[I++]=-Y,s[I++]=E[Q+S],s[I++]=Y}for(H=C;H<L;++H)Y=H+B,s[I++]=P[D*H+R],s[I++]=-Y;var ae=I>>>1;b(s,ae);var te=0;for(H=0;H<ae;++H){var K=0|s[2*H+1];if(K<0){var q=!1;if((Y=-K)>=1<<28?(q=!_,Y-=1<<28):(q=!!_,Y-=1),q)d(p,r,te++,Y);else{var re=A[Y],V=D*Y,W=P[V+y+1],Z=P[V+y+1+g];e:for(var oe=0;oe<te;++oe){var ie=p[oe],ue=D*ie;if(!(Z<E[ue+y+1]||E[ue+y+1+g]<W)){for(var fe=y+2;fe<g;++fe)if(P[V+fe+g]<E[ue+fe]||E[ue+fe+g]<P[V+fe])continue e;var he,de=k[ie];if(void 0!==(he=_?v(re,de):v(de,re)))return he}}}}else o(p,r,te--,K-N)}},scanComplete:function(g,y,v,_,w,x,E,k,C,L,P){for(var A=0,I=2*g,D=y,R=y+g,S=_;S<w;++S){var N=S+(1<<28),B=I*S;s[A++]=x[B+D],s[A++]=-N,s[A++]=x[B+R],s[A++]=N}for(S=k;S<C;++S)N=S+1,s[A++]=L[I*S+D],s[A++]=-N;var Y=A>>>1;b(s,Y);var Q=0;for(S=0;S<Y;++S){var ne=0|s[2*S+1];if(ne<0)if((N=-ne)>=1<<28)p[Q++]=N-(1<<28);else{var ae=P[N-=1],te=I*N,K=L[te+y+1],q=L[te+y+1+g];e:for(var re=0;re<Q;++re){var V=p[re],W=E[V];if(W===ae)break;var Z=I*V;if(!(q<x[Z+y+1]||x[Z+y+1+g]<K)){for(var oe=y+2;oe<g;++oe)if(L[te+oe+g]<x[Z+oe]||x[Z+oe+g]<L[te+oe])continue e;var ie=v(W,ae);if(void 0!==ie)return ie}}}else{for(N=ne-(1<<28),re=Q-1;re>=0;--re)if(p[re]===N){for(oe=re+1;oe<Q;++oe)p[oe-1]=p[oe];break}--Q}}}};var i=h("typedarray-pool"),m=h("bit-twiddle"),b=h("./sort"),p=i.mallocInt32(1024),r=i.mallocInt32(1024),u=i.mallocInt32(1024),c=i.mallocInt32(1024),l=i.mallocInt32(1024),f=i.mallocInt32(1024),s=i.mallocDouble(8192);function o(g,y,v,_){var w=y[_],x=g[v-1];g[w]=x,y[x]=w}function d(g,y,v,_){g[v]=_,y[_]=v}},{"./sort":113,"bit-twiddle":104,"typedarray-pool":617}],115:[function(h,G,X){},{}],116:[function(h,G,X){"use strict";var i,m="object"==typeof Reflect?Reflect:null,b=m&&"function"==typeof m.apply?m.apply:function(v,_,w){return Function.prototype.apply.call(v,_,w)};i=m&&"function"==typeof m.ownKeys?m.ownKeys:Object.getOwnPropertySymbols?function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))}:function(v){return Object.getOwnPropertyNames(v)};var p=Number.isNaN||function(v){return v!=v};function r(){r.init.call(this)}G.exports=r,G.exports.once=function(v,_){return new Promise(function(w,x){function E(){void 0!==k&&v.removeListener("error",k),w([].slice.call(arguments))}var k;"error"!==_&&(k=function(C){v.removeListener(_,E),x(C)},v.once("error",k)),v.once(_,E)})},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var u=10;function c(v){if("function"!=typeof v)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof v)}function l(v){return void 0===v._maxListeners?r.defaultMaxListeners:v._maxListeners}function f(v,_,w,x){var E,k,C;if(c(w),void 0===(k=v._events)?(k=v._events=Object.create(null),v._eventsCount=0):(void 0!==k.newListener&&(v.emit("newListener",_,w.listener?w.listener:w),k=v._events),C=k[_]),void 0===C)C=k[_]=w,++v._eventsCount;else if("function"==typeof C?C=k[_]=x?[w,C]:[C,w]:x?C.unshift(w):C.push(w),(E=l(v))>0&&C.length>E&&!C.warned){C.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+C.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=v,P.type=_,P.count=C.length,console&&console.warn&&console.warn(P)}return v}function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(v,_,w){var x={fired:!1,wrapFn:void 0,target:v,type:_,listener:w},E=s.bind(x);return E.listener=w,x.wrapFn=E,E}function d(v,_,w){var x=v._events;if(void 0===x)return[];var E=x[_];return void 0===E?[]:"function"==typeof E?w?[E.listener||E]:[E]:w?function(k){for(var C=new Array(k.length),L=0;L<C.length;++L)C[L]=k[L].listener||k[L];return C}(E):y(E,E.length)}function g(v){var _=this._events;if(void 0!==_){var w=_[v];if("function"==typeof w)return 1;if(void 0!==w)return w.length}return 0}function y(v,_){for(var w=new Array(_),x=0;x<_;++x)w[x]=v[x];return w}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(v){if("number"!=typeof v||v<0||p(v))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+v+".");u=v}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(v){if("number"!=typeof v||v<0||p(v))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+v+".");return this._maxListeners=v,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(v){for(var _=[],w=1;w<arguments.length;w++)_.push(arguments[w]);var x="error"===v,E=this._events;if(void 0!==E)x=x&&void 0===E.error;else if(!x)return!1;if(x){var k;if(_.length>0&&(k=_[0]),k instanceof Error)throw k;var C=new Error("Unhandled error."+(k?" ("+k.message+")":""));throw C.context=k,C}var L=E[v];if(void 0===L)return!1;if("function"==typeof L)b(L,this,_);else{var P=L.length,A=y(L,P);for(w=0;w<P;++w)b(A[w],this,_)}return!0},r.prototype.on=r.prototype.addListener=function(v,_){return f(this,v,_,!1)},r.prototype.prependListener=function(v,_){return f(this,v,_,!0)},r.prototype.once=function(v,_){return c(_),this.on(v,o(this,v,_)),this},r.prototype.prependOnceListener=function(v,_){return c(_),this.prependListener(v,o(this,v,_)),this},r.prototype.off=r.prototype.removeListener=function(v,_){var w,x,E,k,C;if(c(_),void 0===(x=this._events))return this;if(void 0===(w=x[v]))return this;if(w===_||w.listener===_)0==--this._eventsCount?this._events=Object.create(null):(delete x[v],x.removeListener&&this.emit("removeListener",v,w.listener||_));else if("function"!=typeof w){for(E=-1,k=w.length-1;k>=0;k--)if(w[k]===_||w[k].listener===_){C=w[k].listener,E=k;break}if(E<0)return this;0===E?w.shift():function(L,P){for(;P+1<L.length;P++)L[P]=L[P+1];L.pop()}(w,E),1===w.length&&(x[v]=w[0]),void 0!==x.removeListener&&this.emit("removeListener",v,C||_)}return this},r.prototype.removeAllListeners=function(v){var _,w,x;if(void 0===(w=this._events))return this;if(void 0===w.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==w[v]&&(0==--this._eventsCount?this._events=Object.create(null):delete w[v]),this;if(0===arguments.length){var E,k=Object.keys(w);for(x=0;x<k.length;++x)"removeListener"!==(E=k[x])&&this.removeAllListeners(E);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(_=w[v]))this.removeListener(v,_);else if(void 0!==_)for(x=_.length-1;x>=0;x--)this.removeListener(v,_[x]);return this},r.prototype.listeners=function(v){return d(this,v,!0)},r.prototype.rawListeners=function(v){return d(this,v,!1)},r.listenerCount=function(v,_){return"function"==typeof v.listenerCount?v.listenerCount(_):g.call(v,_)},r.prototype.listenerCount=g,r.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},{}],117:[function(h,G,X){(function(i){(function(){"use strict";var m=h("base64-js"),b=h("ieee754");function p(V){if(V>2147483647)throw new RangeError('The value "'+V+'" is invalid for option "size"');var W=new Uint8Array(V);return W.__proto__=r.prototype,W}function r(V,W,Z){if("number"==typeof V){if("string"==typeof W)throw new TypeError('The "string" argument must be of type string. Received type number');return l(V)}return u(V,W,Z)}function u(V,W,Z){if("string"==typeof V)return function(ue,fe){if("string"==typeof fe&&""!==fe||(fe="utf8"),!r.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);var he=0|o(ue,fe),de=p(he),be=de.write(ue,fe);return be!==he&&(de=de.slice(0,be)),de}(V,W);if(ArrayBuffer.isView(V))return f(V);if(null==V)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V);if(q(V,ArrayBuffer)||V&&q(V.buffer,ArrayBuffer))return function(ue,fe,he){if(fe<0||ue.byteLength<fe)throw new RangeError('"offset" is outside of buffer bounds');if(ue.byteLength<fe+(he||0))throw new RangeError('"length" is outside of buffer bounds');var de;return(de=void 0===fe&&void 0===he?new Uint8Array(ue):void 0===he?new Uint8Array(ue,fe):new Uint8Array(ue,fe,he)).__proto__=r.prototype,de}(V,W,Z);if("number"==typeof V)throw new TypeError('The "value" argument must not be of type number. Received type number');var oe=V.valueOf&&V.valueOf();if(null!=oe&&oe!==V)return r.from(oe,W,Z);var ie=function(ue){if(r.isBuffer(ue)){var fe=0|s(ue.length),he=p(fe);return 0===he.length||ue.copy(he,0,0,fe),he}return void 0!==ue.length?"number"!=typeof ue.length||re(ue.length)?p(0):f(ue):"Buffer"===ue.type&&Array.isArray(ue.data)?f(ue.data):void 0}(V);if(ie)return ie;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof V[Symbol.toPrimitive])return r.from(V[Symbol.toPrimitive]("string"),W,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V)}function c(V){if("number"!=typeof V)throw new TypeError('"size" argument must be of type number');if(V<0)throw new RangeError('The value "'+V+'" is invalid for option "size"')}function l(V){return c(V),p(V<0?0:0|s(V))}function f(V){for(var W=V.length<0?0:0|s(V.length),Z=p(W),oe=0;oe<W;oe+=1)Z[oe]=255&V[oe];return Z}function s(V){if(V>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|V}function o(V,W){if(r.isBuffer(V))return V.length;if(ArrayBuffer.isView(V)||q(V,ArrayBuffer))return V.byteLength;if("string"!=typeof V)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof V);var Z=V.length,oe=arguments.length>2&&!0===arguments[2];if(!oe&&0===Z)return 0;for(var ie=!1;;)switch(W){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return ae(V).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Z;case"hex":return Z>>>1;case"base64":return te(V).length;default:if(ie)return oe?-1:ae(V).length;W=(""+W).toLowerCase(),ie=!0}}function d(V,W,Z){var oe=!1;if((void 0===W||W<0)&&(W=0),W>this.length||((void 0===Z||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0)<=(W>>>=0))return"";for(V||(V="utf8");;)switch(V){case"hex":return D(this,W,Z);case"utf8":case"utf-8":return P(this,W,Z);case"ascii":return A(this,W,Z);case"latin1":case"binary":return I(this,W,Z);case"base64":return L(this,W,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,W,Z);default:if(oe)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase(),oe=!0}}function g(V,W,Z){var oe=V[W];V[W]=V[Z],V[Z]=oe}function y(V,W,Z,oe,ie){if(0===V.length)return-1;if("string"==typeof Z?(oe=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),re(Z=+Z)&&(Z=ie?0:V.length-1),Z<0&&(Z=V.length+Z),Z>=V.length){if(ie)return-1;Z=V.length-1}else if(Z<0){if(!ie)return-1;Z=0}if("string"==typeof W&&(W=r.from(W,oe)),r.isBuffer(W))return 0===W.length?-1:v(V,W,Z,oe,ie);if("number"==typeof W)return W&=255,"function"==typeof Uint8Array.prototype.indexOf?ie?Uint8Array.prototype.indexOf.call(V,W,Z):Uint8Array.prototype.lastIndexOf.call(V,W,Z):v(V,[W],Z,oe,ie);throw new TypeError("val must be string, number or Buffer")}function v(V,W,Z,oe,ie){var ue,fe=1,he=V.length,de=W.length;if(void 0!==oe&&("ucs2"===(oe=String(oe).toLowerCase())||"ucs-2"===oe||"utf16le"===oe||"utf-16le"===oe)){if(V.length<2||W.length<2)return-1;fe=2,he/=2,de/=2,Z/=2}function be(ke,ze){return 1===fe?ke[ze]:ke.readUInt16BE(ze*fe)}if(ie){var pe=-1;for(ue=Z;ue<he;ue++)if(be(V,ue)===be(W,-1===pe?0:ue-pe)){if(-1===pe&&(pe=ue),ue-pe+1===de)return pe*fe}else-1!==pe&&(ue-=ue-pe),pe=-1}else for(Z+de>he&&(Z=he-de),ue=Z;ue>=0;ue--){for(var Te=!0,ye=0;ye<de;ye++)if(be(V,ue+ye)!==be(W,ye)){Te=!1;break}if(Te)return ue}return-1}function _(V,W,Z,oe){Z=Number(Z)||0;var ie=V.length-Z;oe?(oe=Number(oe))>ie&&(oe=ie):oe=ie;var ue=W.length;oe>ue/2&&(oe=ue/2);for(var fe=0;fe<oe;++fe){var he=parseInt(W.substr(2*fe,2),16);if(re(he))return fe;V[Z+fe]=he}return fe}function w(V,W,Z,oe){return K(ae(W,V.length-Z),V,Z,oe)}function x(V,W,Z,oe){return K(function(ie){for(var ue=[],fe=0;fe<ie.length;++fe)ue.push(255&ie.charCodeAt(fe));return ue}(W),V,Z,oe)}function E(V,W,Z,oe){return x(V,W,Z,oe)}function k(V,W,Z,oe){return K(te(W),V,Z,oe)}function C(V,W,Z,oe){return K(function(ie,ue){for(var fe,he,be=[],pe=0;pe<ie.length&&!((ue-=2)<0);++pe)he=(fe=ie.charCodeAt(pe))>>8,be.push(fe%256),be.push(he);return be}(W,V.length-Z),V,Z,oe)}function L(V,W,Z){return m.fromByteArray(0===W&&Z===V.length?V:V.slice(W,Z))}function P(V,W,Z){Z=Math.min(V.length,Z);for(var oe=[],ie=W;ie<Z;){var ue,fe,he,de,be=V[ie],pe=null,Te=be>239?4:be>223?3:be>191?2:1;if(ie+Te<=Z)switch(Te){case 1:be<128&&(pe=be);break;case 2:128==(192&(ue=V[ie+1]))&&(de=(31&be)<<6|63&ue)>127&&(pe=de);break;case 3:fe=V[ie+2],128==(192&(ue=V[ie+1]))&&128==(192&fe)&&(de=(15&be)<<12|(63&ue)<<6|63&fe)>2047&&(de<55296||de>57343)&&(pe=de);break;case 4:fe=V[ie+2],he=V[ie+3],128==(192&(ue=V[ie+1]))&&128==(192&fe)&&128==(192&he)&&(de=(15&be)<<18|(63&ue)<<12|(63&fe)<<6|63&he)>65535&&de<1114112&&(pe=de)}null===pe?(pe=65533,Te=1):pe>65535&&(oe.push((pe-=65536)>>>10&1023|55296),pe=56320|1023&pe),oe.push(pe),ie+=Te}return function(ye){var ke=ye.length;if(ke<=4096)return String.fromCharCode.apply(String,ye);for(var ze="",je=0;je<ke;)ze+=String.fromCharCode.apply(String,ye.slice(je,je+=4096));return ze}(oe)}function A(V,W,Z){var oe="";Z=Math.min(V.length,Z);for(var ie=W;ie<Z;++ie)oe+=String.fromCharCode(127&V[ie]);return oe}function I(V,W,Z){var oe="";Z=Math.min(V.length,Z);for(var ie=W;ie<Z;++ie)oe+=String.fromCharCode(V[ie]);return oe}function D(V,W,Z){var oe=V.length;(!W||W<0)&&(W=0),(!Z||Z<0||Z>oe)&&(Z=oe);for(var ie="",ue=W;ue<Z;++ue)ie+=ne(V[ue]);return ie}function R(V,W,Z){for(var oe=V.slice(W,Z),ie="",ue=0;ue<oe.length;ue+=2)ie+=String.fromCharCode(oe[ue]+256*oe[ue+1]);return ie}function S(V,W,Z){if(V%1!=0||V<0)throw new RangeError("offset is not uint");if(V+W>Z)throw new RangeError("Trying to access beyond buffer length")}function N(V,W,Z,oe,ie,ue){if(!r.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(W>ie||W<ue)throw new RangeError('"value" argument is out of bounds');if(Z+oe>V.length)throw new RangeError("Index out of range")}function B(V,W,Z,oe,ie,ue){if(Z+oe>V.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function H(V,W,Z,oe,ie){return W=+W,Z>>>=0,ie||B(V,0,Z,4),b.write(V,W,Z,oe,23,4),Z+4}function Y(V,W,Z,oe,ie){return W=+W,Z>>>=0,ie||B(V,0,Z,8),b.write(V,W,Z,oe,52,8),Z+8}X.Buffer=r,X.SlowBuffer=function(V){return+V!=V&&(V=0),r.alloc(+V)},X.INSPECT_MAX_BYTES=50,X.kMaxLength=2147483647,(r.TYPED_ARRAY_SUPPORT=function(){try{var V=new Uint8Array(1);return V.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===V.foo()}catch(W){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(V,W,Z){return u(V,W,Z)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(V,W,Z){return ie=W,ue=Z,c(oe=V),oe<=0?p(oe):void 0!==ie?"string"==typeof ue?p(oe).fill(ie,ue):p(oe).fill(ie):p(oe);var oe,ie,ue},r.allocUnsafe=function(V){return l(V)},r.allocUnsafeSlow=function(V){return l(V)},r.isBuffer=function(V){return null!=V&&!0===V._isBuffer&&V!==r.prototype},r.compare=function(V,W){if(q(V,Uint8Array)&&(V=r.from(V,V.offset,V.byteLength)),q(W,Uint8Array)&&(W=r.from(W,W.offset,W.byteLength)),!r.isBuffer(V)||!r.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(V===W)return 0;for(var Z=V.length,oe=W.length,ie=0,ue=Math.min(Z,oe);ie<ue;++ie)if(V[ie]!==W[ie]){Z=V[ie],oe=W[ie];break}return Z<oe?-1:oe<Z?1:0},r.isEncoding=function(V){switch(String(V).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(V,W){if(!Array.isArray(V))throw new TypeError('"list" argument must be an Array of Buffers');if(0===V.length)return r.alloc(0);var Z;if(void 0===W)for(W=0,Z=0;Z<V.length;++Z)W+=V[Z].length;var oe=r.allocUnsafe(W),ie=0;for(Z=0;Z<V.length;++Z){var ue=V[Z];if(q(ue,Uint8Array)&&(ue=r.from(ue)),!r.isBuffer(ue))throw new TypeError('"list" argument must be an Array of Buffers');ue.copy(oe,ie),ie+=ue.length}return oe},r.byteLength=o,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var V=this.length;if(V%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var W=0;W<V;W+=2)g(this,W,W+1);return this},r.prototype.swap32=function(){var V=this.length;if(V%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var W=0;W<V;W+=4)g(this,W,W+3),g(this,W+1,W+2);return this},r.prototype.swap64=function(){var V=this.length;if(V%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var W=0;W<V;W+=8)g(this,W,W+7),g(this,W+1,W+6),g(this,W+2,W+5),g(this,W+3,W+4);return this},r.prototype.toLocaleString=r.prototype.toString=function(){var V=this.length;return 0===V?"":0===arguments.length?P(this,0,V):d.apply(this,arguments)},r.prototype.equals=function(V){if(!r.isBuffer(V))throw new TypeError("Argument must be a Buffer");return this===V||0===r.compare(this,V)},r.prototype.inspect=function(){var V="",W=X.INSPECT_MAX_BYTES;return V=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&(V+=" ... "),"<Buffer "+V+">"},r.prototype.compare=function(V,W,Z,oe,ie){if(q(V,Uint8Array)&&(V=r.from(V,V.offset,V.byteLength)),!r.isBuffer(V))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof V);if(void 0===W&&(W=0),void 0===Z&&(Z=V?V.length:0),void 0===oe&&(oe=0),void 0===ie&&(ie=this.length),W<0||Z>V.length||oe<0||ie>this.length)throw new RangeError("out of range index");if(oe>=ie&&W>=Z)return 0;if(oe>=ie)return-1;if(W>=Z)return 1;if(this===V)return 0;for(var ue=(ie>>>=0)-(oe>>>=0),fe=(Z>>>=0)-(W>>>=0),he=Math.min(ue,fe),de=this.slice(oe,ie),be=V.slice(W,Z),pe=0;pe<he;++pe)if(de[pe]!==be[pe]){ue=de[pe],fe=be[pe];break}return ue<fe?-1:fe<ue?1:0},r.prototype.includes=function(V,W,Z){return-1!==this.indexOf(V,W,Z)},r.prototype.indexOf=function(V,W,Z){return y(this,V,W,Z,!0)},r.prototype.lastIndexOf=function(V,W,Z){return y(this,V,W,Z,!1)},r.prototype.write=function(V,W,Z,oe){if(void 0===W)oe="utf8",Z=this.length,W=0;else if(void 0===Z&&"string"==typeof W)oe=W,Z=this.length,W=0;else{if(!isFinite(W))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");W>>>=0,isFinite(Z)?(Z>>>=0,void 0===oe&&(oe="utf8")):(oe=Z,Z=void 0)}var ie=this.length-W;if((void 0===Z||Z>ie)&&(Z=ie),V.length>0&&(Z<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");oe||(oe="utf8");for(var ue=!1;;)switch(oe){case"hex":return _(this,V,W,Z);case"utf8":case"utf-8":return w(this,V,W,Z);case"ascii":return x(this,V,W,Z);case"latin1":case"binary":return E(this,V,W,Z);case"base64":return k(this,V,W,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,V,W,Z);default:if(ue)throw new TypeError("Unknown encoding: "+oe);oe=(""+oe).toLowerCase(),ue=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(V,W){var Z=this.length;(V=~~V)<0?(V+=Z)<0&&(V=0):V>Z&&(V=Z),(W=void 0===W?Z:~~W)<0?(W+=Z)<0&&(W=0):W>Z&&(W=Z),W<V&&(W=V);var oe=this.subarray(V,W);return oe.__proto__=r.prototype,oe},r.prototype.readUIntLE=function(V,W,Z){V>>>=0,W>>>=0,Z||S(V,W,this.length);for(var oe=this[V],ie=1,ue=0;++ue<W&&(ie*=256);)oe+=this[V+ue]*ie;return oe},r.prototype.readUIntBE=function(V,W,Z){V>>>=0,W>>>=0,Z||S(V,W,this.length);for(var oe=this[V+--W],ie=1;W>0&&(ie*=256);)oe+=this[V+--W]*ie;return oe},r.prototype.readUInt8=function(V,W){return V>>>=0,W||S(V,1,this.length),this[V]},r.prototype.readUInt16LE=function(V,W){return V>>>=0,W||S(V,2,this.length),this[V]|this[V+1]<<8},r.prototype.readUInt16BE=function(V,W){return V>>>=0,W||S(V,2,this.length),this[V]<<8|this[V+1]},r.prototype.readUInt32LE=function(V,W){return V>>>=0,W||S(V,4,this.length),(this[V]|this[V+1]<<8|this[V+2]<<16)+16777216*this[V+3]},r.prototype.readUInt32BE=function(V,W){return V>>>=0,W||S(V,4,this.length),16777216*this[V]+(this[V+1]<<16|this[V+2]<<8|this[V+3])},r.prototype.readIntLE=function(V,W,Z){V>>>=0,W>>>=0,Z||S(V,W,this.length);for(var oe=this[V],ie=1,ue=0;++ue<W&&(ie*=256);)oe+=this[V+ue]*ie;return oe>=(ie*=128)&&(oe-=Math.pow(2,8*W)),oe},r.prototype.readIntBE=function(V,W,Z){V>>>=0,W>>>=0,Z||S(V,W,this.length);for(var oe=W,ie=1,ue=this[V+--oe];oe>0&&(ie*=256);)ue+=this[V+--oe]*ie;return ue>=(ie*=128)&&(ue-=Math.pow(2,8*W)),ue},r.prototype.readInt8=function(V,W){return V>>>=0,W||S(V,1,this.length),128&this[V]?-1*(255-this[V]+1):this[V]},r.prototype.readInt16LE=function(V,W){V>>>=0,W||S(V,2,this.length);var Z=this[V]|this[V+1]<<8;return 32768&Z?4294901760|Z:Z},r.prototype.readInt16BE=function(V,W){V>>>=0,W||S(V,2,this.length);var Z=this[V+1]|this[V]<<8;return 32768&Z?4294901760|Z:Z},r.prototype.readInt32LE=function(V,W){return V>>>=0,W||S(V,4,this.length),this[V]|this[V+1]<<8|this[V+2]<<16|this[V+3]<<24},r.prototype.readInt32BE=function(V,W){return V>>>=0,W||S(V,4,this.length),this[V]<<24|this[V+1]<<16|this[V+2]<<8|this[V+3]},r.prototype.readFloatLE=function(V,W){return V>>>=0,W||S(V,4,this.length),b.read(this,V,!0,23,4)},r.prototype.readFloatBE=function(V,W){return V>>>=0,W||S(V,4,this.length),b.read(this,V,!1,23,4)},r.prototype.readDoubleLE=function(V,W){return V>>>=0,W||S(V,8,this.length),b.read(this,V,!0,52,8)},r.prototype.readDoubleBE=function(V,W){return V>>>=0,W||S(V,8,this.length),b.read(this,V,!1,52,8)},r.prototype.writeUIntLE=function(V,W,Z,oe){V=+V,W>>>=0,Z>>>=0,oe||N(this,V,W,Z,Math.pow(2,8*Z)-1,0);var ie=1,ue=0;for(this[W]=255&V;++ue<Z&&(ie*=256);)this[W+ue]=V/ie&255;return W+Z},r.prototype.writeUIntBE=function(V,W,Z,oe){V=+V,W>>>=0,Z>>>=0,oe||N(this,V,W,Z,Math.pow(2,8*Z)-1,0);var ie=Z-1,ue=1;for(this[W+ie]=255&V;--ie>=0&&(ue*=256);)this[W+ie]=V/ue&255;return W+Z},r.prototype.writeUInt8=function(V,W,Z){return V=+V,W>>>=0,Z||N(this,V,W,1,255,0),this[W]=255&V,W+1},r.prototype.writeUInt16LE=function(V,W,Z){return V=+V,W>>>=0,Z||N(this,V,W,2,65535,0),this[W]=255&V,this[W+1]=V>>>8,W+2},r.prototype.writeUInt16BE=function(V,W,Z){return V=+V,W>>>=0,Z||N(this,V,W,2,65535,0),this[W]=V>>>8,this[W+1]=255&V,W+2},r.prototype.writeUInt32LE=function(V,W,Z){return V=+V,W>>>=0,Z||N(this,V,W,4,4294967295,0),this[W+3]=V>>>24,this[W+2]=V>>>16,this[W+1]=V>>>8,this[W]=255&V,W+4},r.prototype.writeUInt32BE=function(V,W,Z){return V=+V,W>>>=0,Z||N(this,V,W,4,4294967295,0),this[W]=V>>>24,this[W+1]=V>>>16,this[W+2]=V>>>8,this[W+3]=255&V,W+4},r.prototype.writeIntLE=function(V,W,Z,oe){if(V=+V,W>>>=0,!oe){var ie=Math.pow(2,8*Z-1);N(this,V,W,Z,ie-1,-ie)}var ue=0,fe=1,he=0;for(this[W]=255&V;++ue<Z&&(fe*=256);)V<0&&0===he&&0!==this[W+ue-1]&&(he=1),this[W+ue]=(V/fe>>0)-he&255;return W+Z},r.prototype.writeIntBE=function(V,W,Z,oe){if(V=+V,W>>>=0,!oe){var ie=Math.pow(2,8*Z-1);N(this,V,W,Z,ie-1,-ie)}var ue=Z-1,fe=1,he=0;for(this[W+ue]=255&V;--ue>=0&&(fe*=256);)V<0&&0===he&&0!==this[W+ue+1]&&(he=1),this[W+ue]=(V/fe>>0)-he&255;return W+Z},r.prototype.writeInt8=function(V,W,Z){return V=+V,W>>>=0,Z||N(this,V,W,1,127,-128),V<0&&(V=255+V+1),this[W]=255&V,W+1},r.prototype.writeInt16LE=function(V,W,Z){return V=+V,W>>>=0,Z||N(this,V,W,2,32767,-32768),this[W]=255&V,this[W+1]=V>>>8,W+2},r.prototype.writeInt16BE=function(V,W,Z){return V=+V,W>>>=0,Z||N(this,V,W,2,32767,-32768),this[W]=V>>>8,this[W+1]=255&V,W+2},r.prototype.writeInt32LE=function(V,W,Z){return V=+V,W>>>=0,Z||N(this,V,W,4,2147483647,-2147483648),this[W]=255&V,this[W+1]=V>>>8,this[W+2]=V>>>16,this[W+3]=V>>>24,W+4},r.prototype.writeInt32BE=function(V,W,Z){return V=+V,W>>>=0,Z||N(this,V,W,4,2147483647,-2147483648),V<0&&(V=4294967295+V+1),this[W]=V>>>24,this[W+1]=V>>>16,this[W+2]=V>>>8,this[W+3]=255&V,W+4},r.prototype.writeFloatLE=function(V,W,Z){return H(this,V,W,!0,Z)},r.prototype.writeFloatBE=function(V,W,Z){return H(this,V,W,!1,Z)},r.prototype.writeDoubleLE=function(V,W,Z){return Y(this,V,W,!0,Z)},r.prototype.writeDoubleBE=function(V,W,Z){return Y(this,V,W,!1,Z)},r.prototype.copy=function(V,W,Z,oe){if(!r.isBuffer(V))throw new TypeError("argument should be a Buffer");if(Z||(Z=0),oe||0===oe||(oe=this.length),W>=V.length&&(W=V.length),W||(W=0),oe>0&&oe<Z&&(oe=Z),oe===Z||0===V.length||0===this.length)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(Z<0||Z>=this.length)throw new RangeError("Index out of range");if(oe<0)throw new RangeError("sourceEnd out of bounds");oe>this.length&&(oe=this.length),V.length-W<oe-Z&&(oe=V.length-W+Z);var ie=oe-Z;if(this===V&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(W,Z,oe);else if(this===V&&Z<W&&W<oe)for(var ue=ie-1;ue>=0;--ue)V[ue+W]=this[ue+Z];else Uint8Array.prototype.set.call(V,this.subarray(Z,oe),W);return ie},r.prototype.fill=function(V,W,Z,oe){if("string"==typeof V){if("string"==typeof W?(oe=W,W=0,Z=this.length):"string"==typeof Z&&(oe=Z,Z=this.length),void 0!==oe&&"string"!=typeof oe)throw new TypeError("encoding must be a string");if("string"==typeof oe&&!r.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);if(1===V.length){var ie=V.charCodeAt(0);("utf8"===oe&&ie<128||"latin1"===oe)&&(V=ie)}}else"number"==typeof V&&(V&=255);if(W<0||this.length<W||this.length<Z)throw new RangeError("Out of range index");if(Z<=W)return this;var ue;if(W>>>=0,Z=void 0===Z?this.length:Z>>>0,V||(V=0),"number"==typeof V)for(ue=W;ue<Z;++ue)this[ue]=V;else{var fe=r.isBuffer(V)?V:r.from(V,oe),he=fe.length;if(0===he)throw new TypeError('The value "'+V+'" is invalid for argument "value"');for(ue=0;ue<Z-W;++ue)this[ue+W]=fe[ue%he]}return this};var Q=/[^+/0-9A-Za-z-_]/g;function ne(V){return V<16?"0"+V.toString(16):V.toString(16)}function ae(V,W){var Z;W=W||1/0;for(var oe=V.length,ie=null,ue=[],fe=0;fe<oe;++fe){if((Z=V.charCodeAt(fe))>55295&&Z<57344){if(!ie){if(Z>56319){(W-=3)>-1&&ue.push(239,191,189);continue}if(fe+1===oe){(W-=3)>-1&&ue.push(239,191,189);continue}ie=Z;continue}if(Z<56320){(W-=3)>-1&&ue.push(239,191,189),ie=Z;continue}Z=65536+(ie-55296<<10|Z-56320)}else ie&&(W-=3)>-1&&ue.push(239,191,189);if(ie=null,Z<128){if((W-=1)<0)break;ue.push(Z)}else if(Z<2048){if((W-=2)<0)break;ue.push(Z>>6|192,63&Z|128)}else if(Z<65536){if((W-=3)<0)break;ue.push(Z>>12|224,Z>>6&63|128,63&Z|128)}else{if(!(Z<1114112))throw new Error("Invalid code point");if((W-=4)<0)break;ue.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,63&Z|128)}}return ue}function te(V){return m.toByteArray(function(W){if((W=(W=W.split("=")[0]).trim().replace(Q,"")).length<2)return"";for(;W.length%4!=0;)W+="=";return W}(V))}function K(V,W,Z,oe){for(var ie=0;ie<oe&&!(ie+Z>=W.length||ie>=V.length);++ie)W[ie+Z]=V[ie];return ie}function q(V,W){return V instanceof W||null!=V&&null!=V.constructor&&null!=V.constructor.name&&V.constructor.name===W.name}function re(V){return V!=V}}).call(this)}).call(this,h("buffer").Buffer)},{"base64-js":86,buffer:117,ieee754:445}],118:[function(h,G,X){"use strict";var i=h("./lib/monotone"),m=h("./lib/triangulation"),b=h("./lib/delaunay"),p=h("./lib/filter");function r(l){return[Math.min(l[0],l[1]),Math.max(l[0],l[1])]}function u(l,f){return l[0]-f[0]||l[1]-f[1]}function c(l,f,s){return f in l?l[f]:s}G.exports=function(l,f,s){Array.isArray(f)?(s=s||{},f=f||[]):(s=f||{},f=[]);var o=!!c(s,"delaunay",!0),d=!!c(s,"interior",!0),g=!!c(s,"exterior",!0),y=!!c(s,"infinity",!1);if(!d&&!g||0===l.length)return[];var v=i(l,f);if(o||d!==g||y){for(var _=m(l.length,f.map(r).sort(u)),w=0;w<v.length;++w){var x=v[w];_.addTriangle(x[0],x[1],x[2])}return o&&b(l,_),g?d?y?p(_,0,y):_.cells():p(_,1,y):p(_,-1)}return v}},{"./lib/delaunay":119,"./lib/filter":120,"./lib/monotone":121,"./lib/triangulation":122}],119:[function(h,G,X){"use strict";var i=h("robust-in-sphere")[4];function m(b,p,r,u,c,l){var f=p.opposite(u,c);if(!(f<0)){if(c<u){var s=u;u=c,c=s,s=l,l=f,f=s}p.isConstraint(u,c)||i(b[u],b[c],b[l],b[f])<0&&r.push(u,c)}}h("binary-search-bounds"),G.exports=function(b,p){for(var r=[],u=b.length,c=p.stars,l=0;l<u;++l)for(var f=c[l],s=1;s<f.length;s+=2)if(!((y=f[s])<l||p.isConstraint(l,y))){for(var o=f[s-1],d=-1,g=1;g<f.length;g+=2)if(f[g-1]===y){d=f[g];break}d<0||i(b[l],b[y],b[o],b[d])<0&&r.push(l,y)}for(;r.length>0;){for(var y=r.pop(),v=(o=-1,d=-1,f=c[l=r.pop()],1);v<f.length;v+=2){var _=f[v-1],w=f[v];_===y?d=w:w===y&&(o=_)}o<0||d<0||i(b[l],b[y],b[o],b[d])>=0||(p.flip(l,y),m(b,p,r,o,l,d),m(b,p,r,l,d,o),m(b,p,r,d,y,o),m(b,p,r,y,o,d))}}},{"binary-search-bounds":103,"robust-in-sphere":546}],120:[function(h,G,X){"use strict";var i,m=h("binary-search-bounds");function b(r,u,c,l,f,s,o){this.cells=r,this.neighbor=u,this.flags=l,this.constraint=c,this.active=f,this.next=s,this.boundary=o}function p(r,u){return r[0]-u[0]||r[1]-u[1]||r[2]-u[2]}G.exports=function(r,u,c){var l=function(C,L){for(var P=C.cells(),A=P.length,I=0;I<A;++I){var D=(te=P[I])[0],R=te[1],S=te[2];R<S?R<D&&(te[0]=R,te[1]=S,te[2]=D):S<D&&(te[0]=S,te[1]=D,te[2]=R)}P.sort(p);var N=new Array(A);for(I=0;I<N.length;++I)N[I]=0;var B=[],H=[],Y=new Array(3*A),Q=new Array(3*A),ne=null;L&&(ne=[]);var ae=new b(P,Y,Q,N,B,H,ne);for(I=0;I<A;++I)for(var te=P[I],K=0;K<3;++K){var q=Y[3*I+K]=ae.locate(R=te[(K+1)%3],D=te[K],C.opposite(R,D)),re=Q[3*I+K]=C.isConstraint(D,R);q<0&&(re?H.push(I):(B.push(I),N[I]=1),L&&ne.push([R,D,-1]))}return ae}(r,c);if(0===u)return c?l.cells.concat(l.boundary):l.cells;for(var f=1,s=l.active,o=l.next,d=l.flags,g=l.cells,y=l.constraint,v=l.neighbor;s.length>0||o.length>0;){for(;s.length>0;){var _=s.pop();if(d[_]!==-f){d[_]=f;for(var w=0;w<3;++w){var x=v[3*_+w];x>=0&&0===d[x]&&(y[3*_+w]?o.push(x):(s.push(x),d[x]=f))}}}var E=o;o=s,s=E,o.length=0,f=-f}var k=function(C,L,P){for(var A=0,I=0;I<C.length;++I)L[I]===P&&(C[A++]=C[I]);return C.length=A,C}(g,d,u);return c?k.concat(l.boundary):k},b.prototype.locate=(i=[0,0,0],function(r,u,c){var l=r,f=u,s=c;return u<c?u<r&&(l=u,f=c,s=r):c<r&&(l=c,f=r,s=u),l<0?-1:(i[0]=l,i[1]=f,i[2]=s,m.eq(this.cells,i,p))})},{"binary-search-bounds":103}],121:[function(h,G,X){"use strict";var i=h("binary-search-bounds"),m=h("robust-orientation")[3];function b(o,d,g,y,v){this.a=o,this.b=d,this.idx=g,this.lowerIds=y,this.upperIds=v}function p(o,d,g,y){this.a=o,this.b=d,this.type=g,this.idx=y}function r(o,d){var g=o.a[0]-d.a[0]||o.a[1]-d.a[1]||o.type-d.type;return g||(0!==o.type&&(g=m(o.a,o.b,d.b))?g:o.idx-d.idx)}function u(o,d){return m(o.a,o.b,d)}function c(o,d,g,y,v){for(var _=i.lt(d,y,u),w=i.gt(d,y,u),x=_;x<w;++x){for(var E=d[x],k=E.lowerIds,C=k.length;C>1&&m(g[k[C-2]],g[k[C-1]],y)>0;)o.push([k[C-1],k[C-2],v]),C-=1;k.length=C,k.push(v);var L=E.upperIds;for(C=L.length;C>1&&m(g[L[C-2]],g[L[C-1]],y)<0;)o.push([L[C-2],L[C-1],v]),C-=1;L.length=C,L.push(v)}}function l(o,d){var g;return(g=o.a[0]<d.a[0]?m(o.a,o.b,d.a):m(d.b,d.a,o.a))?g:(g=d.b[0]<o.b[0]?m(o.a,o.b,d.b):m(d.b,d.a,o.b))||o.idx-d.idx}function f(o,d,g){var y=i.le(o,g,l),v=o[y],_=v.upperIds,w=_[_.length-1];v.upperIds=[w],o.splice(y+1,0,new b(g.a,g.b,g.idx,[w],_))}function s(o,d,g){var y=g.a;g.a=g.b,g.b=y;var v=i.eq(o,g,l);o[v-1].upperIds=o[v].upperIds,o.splice(v,1)}G.exports=function(o,d){for(var g=o.length,y=d.length,v=[],_=0;_<g;++_)v.push(new p(o[_],null,0,_));for(_=0;_<y;++_){var w=d[_],x=o[w[0]],E=o[w[1]];x[0]<E[0]?v.push(new p(x,E,2,_),new p(E,x,1,_)):x[0]>E[0]&&v.push(new p(E,x,2,_),new p(x,E,1,_))}v.sort(r);for(var k=v[0].a[0]-(1+Math.abs(v[0].a[0]))*Math.pow(2,-52),C=[new b([k,1],[k,0],-1,[],[],[],[])],L=[],P=(_=0,v.length);_<P;++_){var A=v[_],I=A.type;0===I?c(L,C,o,A.a,A.idx):2===I?f(C,0,A):s(C,0,A)}return L}},{"binary-search-bounds":103,"robust-orientation":548}],122:[function(h,G,X){"use strict";var i=h("binary-search-bounds");function m(r,u){this.stars=r,this.edges=u}G.exports=function(r,u){for(var c=new Array(r),l=0;l<r;++l)c[l]=[];return new m(c,u)};var b=m.prototype;function p(r,u,c){for(var l=1,f=r.length;l<f;l+=2)if(r[l-1]===u&&r[l]===c)return r[l-1]=r[f-2],r[l]=r[f-1],void(r.length=f-2)}b.isConstraint=function(){var r=[0,0];function u(c,l){return c[0]-l[0]||c[1]-l[1]}return function(c,l){return r[0]=Math.min(c,l),r[1]=Math.max(c,l),i.eq(this.edges,r,u)>=0}}(),b.removeTriangle=function(r,u,c){var l=this.stars;p(l[r],u,c),p(l[u],c,r),p(l[c],r,u)},b.addTriangle=function(r,u,c){var l=this.stars;l[r].push(u,c),l[u].push(c,r),l[c].push(r,u)},b.opposite=function(r,u){for(var c=this.stars[u],l=1,f=c.length;l<f;l+=2)if(c[l]===r)return c[l-1];return-1},b.flip=function(r,u){var c=this.opposite(r,u),l=this.opposite(u,r);this.removeTriangle(r,u,c),this.removeTriangle(u,r,l),this.addTriangle(r,l,c),this.addTriangle(u,c,l)},b.edges=function(){for(var r=this.stars,u=[],c=0,l=r.length;c<l;++c)for(var f=r[c],s=0,o=f.length;s<o;s+=2)u.push([f[s],f[s+1]]);return u},b.cells=function(){for(var r=this.stars,u=[],c=0,l=r.length;c<l;++c)for(var f=r[c],s=0,o=f.length;s<o;s+=2){var d=f[s],g=f[s+1];c<Math.min(d,g)&&u.push([c,d,g])}return u}},{"binary-search-bounds":103}],123:[function(h,G,X){"use strict";G.exports=function(i){for(var m=1,b=1;b<i.length;++b)for(var p=0;p<b;++p)if(i[b]<i[p])m=-m;else if(i[p]===i[b])return 0;return m}},{}],124:[function(h,G,X){"use strict";var i=h("dup"),m=h("robust-linear-solve");function b(u,c){for(var l=0,f=u.length,s=0;s<f;++s)l+=u[s]*c[s];return l}function p(u){var c=u.length;if(0===c)return[];var l=i([u.length+1,u.length+1],1),f=i([u.length+1],1);l[c][c]=0;for(var s=0;s<c;++s){for(var o=0;o<=s;++o)l[o][s]=l[s][o]=2*b(u[s],u[o]);f[s]=b(u[s],u[s])}var d=m(l,f),g=0,y=d[c+1];for(s=0;s<y.length;++s)g+=y[s];var v=new Array(c);for(s=0;s<c;++s){y=d[s];var _=0;for(o=0;o<y.length;++o)_+=y[o];v[s]=_/g}return v}function r(u){if(0===u.length)return[];for(var c=u[0].length,l=i([c]),f=p(u),s=0;s<u.length;++s)for(var o=0;o<c;++o)l[o]+=u[s][o]*f[s];return l}r.barycenetric=p,G.exports=r},{dup:185,"robust-linear-solve":547}],125:[function(h,G,X){G.exports=function(m){for(var b=i(m),p=0,r=0;r<m.length;++r)for(var u=m[r],c=0;c<b.length;++c)p+=Math.pow(u[c]-b[c],2);return Math.sqrt(p/m.length)};var i=h("circumcenter")},{circumcenter:124}],126:[function(h,G,X){G.exports=function(i,m,b){return m<b?i<m?m:i>b?b:i:i<b?b:i>m?m:i}},{}],127:[function(h,G,X){"use strict";G.exports=function(w,x,E){var k,I,R,S;if(E){k=x;for(var C=new Array(x.length),L=0;L<x.length;++L){var P=x[L];C[L]=[P[0],P[1],E[L]]}x=C}for(var A=(R=!!E,void 0,v(x,S=d(I=w,[],o(I)),R),!!S);_(w,x,!!E);)A=!0;if(E&&A)for(k.length=0,E.length=0,L=0;L<x.length;++L)k.push([(P=x[L])[0],P[1]]),E.push(P[2]);return A};var i=h("union-find"),m=h("box-intersect"),b=h("robust-segment-intersect"),p=h("big-rat"),r=h("big-rat/cmp"),u=h("big-rat/to-float"),c=h("rat-vec"),l=h("nextafter"),f=h("./lib/rat-seg-intersect");function s(w){var x=u(w);return[l(x,-1/0),l(x,1/0)]}function o(w){for(var x=new Array(w.length),E=0;E<w.length;++E){var k=w[E];x[E]=[l(k[0],-1/0),l(k[1],-1/0),l(k[0],1/0),l(k[1],1/0)]}return x}function d(w,x,E){for(var k=x.length,C=new i(k),L=[],P=0;P<x.length;++P){var A=x[P],I=s(A[0]),D=s(A[1]);L.push([l(I[0],-1/0),l(D[0],-1/0),l(I[1],1/0),l(D[1],1/0)])}m(L,function(H,Y){C.link(H,Y)});var R=!0,S=new Array(k);for(P=0;P<k;++P)(B=C.find(P))!==P&&(R=!1,w[B]=[Math.min(w[P][0],w[B][0]),Math.min(w[P][1],w[B][1])]);if(R)return null;var N=0;for(P=0;P<k;++P){var B;(B=C.find(P))===P?(S[P]=N,w[N++]=w[P]):S[P]=-1}for(w.length=N,P=0;P<k;++P)S[P]<0&&(S[P]=S[C.find(P)]);return S}function g(w,x){return w[0]-x[0]||w[1]-x[1]}function y(w,x){return w[0]-x[0]||w[1]-x[1]||(w[2]<x[2]?-1:w[2]>x[2]?1:0)}function v(w,x,E){if(0!==w.length){if(x)for(var k=0;k<w.length;++k){var C=x[(P=w[k])[0]],L=x[P[1]];P[0]=Math.min(C,L),P[1]=Math.max(C,L)}else for(k=0;k<w.length;++k){var P;C=(P=w[k])[0],L=P[1],P[0]=Math.min(C,L),P[1]=Math.max(C,L)}w.sort(E?y:g);var A=1;for(k=1;k<w.length;++k){var I=w[k-1],D=w[k];(D[0]!==I[0]||D[1]!==I[1]||E&&D[2]!==I[2])&&(w[A++]=D)}w.length=A}}function _(w,x,E){var I,D,S,k=function(I,D){for(var R=new Array(D.length),S=0;S<D.length;++S){var N=D[S],B=I[N[0]],H=I[N[1]];R[S]=[l(Math.min(B[0],H[0]),-1/0),l(Math.min(B[1],H[1]),-1/0),l(Math.max(B[0],H[0]),1/0),l(Math.max(B[1],H[1]),1/0)]}return R}(w,x),C=(I=w,D=x,S=[],m(k,function(N,B){var H=D[N],Y=D[B];H[0]!==Y[0]&&H[0]!==Y[1]&&H[1]!==Y[0]&&H[1]!==Y[1]&&b(I[H[0]],I[H[1]],I[Y[0]],I[Y[1]])&&S.push([N,B])}),S),P=function(I,D,R,S){var N=[];return m(R,S,function(B,H){var Y=D[B];if(Y[0]!==H&&Y[1]!==H){var Q=I[H];b(I[Y[0]],I[Y[1]],Q,Q)&&N.push([B,H])}}),N}(w,x,k,o(w)),A=d(w,function(I,D,R,S,N){var B,H,Y=I.map(function(be){return[p(be[0]),p(be[1])]});for(B=0;B<R.length;++B){var Q=R[B],ne=Q[1],ae=D[H=Q[0]],te=D[ne],K=f(c(I[ae[0]]),c(I[ae[1]]),c(I[te[0]]),c(I[te[1]]));if(K){var q=I.length;I.push([u(K[0]),u(K[1])]),Y.push(K),S.push([H,q],[ne,q])}}for(S.sort(function(be,pe){if(be[0]!==pe[0])return be[0]-pe[0];var Te=Y[be[1]],ye=Y[pe[1]];return r(Te[0],ye[0])||r(Te[1],ye[1])}),B=S.length-1;B>=0;--B){var re=D[H=(he=S[B])[0]],V=re[0],W=re[1],Z=I[V],oe=I[W];if((Z[0]-oe[0]||Z[1]-oe[1])<0){var ie=V;V=W,W=ie}re[0]=V;var ue,fe=re[1]=he[1];for(N&&(ue=re[2]);B>0&&S[B-1][0]===H;){var he,de=(he=S[--B])[1];D.push(N?[fe,de,ue]:[fe,de]),fe=de}D.push(N?[fe,W,ue]:[fe,W])}return Y}(w,x,C,P,E));return v(x,A,E),!!A||C.length>0||P.length>0}},{"./lib/rat-seg-intersect":128,"big-rat":90,"big-rat/cmp":88,"big-rat/to-float":102,"box-intersect":108,nextafter:484,"rat-vec":532,"robust-segment-intersect":551,"union-find":618}],128:[function(h,G,X){"use strict";G.exports=function(f,s,o,d){var g=r(s,f),y=r(d,o),v=l(g,y);if(0===p(v))return null;var w=l(y,r(f,o)),x=m(w,v),E=c(g,x);return u(f,E)};var i=h("big-rat/mul"),m=h("big-rat/div"),b=h("big-rat/sub"),p=h("big-rat/sign"),r=h("rat-vec/sub"),u=h("rat-vec/add"),c=h("rat-vec/muls");function l(f,s){return b(i(f[0],s[1]),i(f[1],s[0]))}},{"big-rat/div":89,"big-rat/mul":99,"big-rat/sign":100,"big-rat/sub":101,"rat-vec/add":531,"rat-vec/muls":533,"rat-vec/sub":534}],129:[function(h,G,X){"use strict";var i=h("clamp");function m(b,p){null==p&&(p=!0);var r=b[0],u=b[1],c=b[2],l=b[3];return null==l&&(l=p?1:255),p&&(r*=255,u*=255,c*=255,l*=255),16777216*(r=255&i(r,0,255))+((u=255&i(u,0,255))<<16)+((c=255&i(c,0,255))<<8)+(255&i(l,0,255))}G.exports=m,G.exports.to=m,G.exports.from=function(b,p){var r=(b=+b)>>>24,u=(16711680&b)>>>16,c=(65280&b)>>>8,l=255&b;return!1===p?[r,u,c,l]:[r/255,u/255,c/255,l/255]}},{clamp:126}],130:[function(h,G,X){"use strict";G.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],131:[function(h,G,X){"use strict";var i=h("color-rgba"),m=h("clamp"),b=h("dtype");G.exports=function(p,r){"float"!==r&&r||(r="array"),"uint"===r&&(r="uint8"),"uint_clamped"===r&&(r="uint8_clamped");var l,u=new(b(r))(4),c="uint8"!==r&&"uint8_clamped"!==r;return p.length&&"string"!=typeof p||((p=i(p))[0]/=255,p[1]/=255,p[2]/=255),(l=p)instanceof Uint8Array||l instanceof Uint8ClampedArray||Array.isArray(l)&&(l[0]>1||0===l[0])&&(l[1]>1||0===l[1])&&(l[2]>1||0===l[2])&&(!l[3]||l[3]>1)?(u[0]=p[0],u[1]=p[1],u[2]=p[2],u[3]=null!=p[3]?p[3]:255,c&&(u[0]/=255,u[1]/=255,u[2]/=255,u[3]/=255),u):(c?(u[0]=p[0],u[1]=p[1],u[2]=p[2],u[3]=null!=p[3]?p[3]:1):(u[0]=m(Math.floor(255*p[0]),0,255),u[1]=m(Math.floor(255*p[1]),0,255),u[2]=m(Math.floor(255*p[2]),0,255),u[3]=null==p[3]?255:m(Math.floor(255*p[3]),0,255)),u)}},{clamp:126,"color-rgba":133,dtype:184}],132:[function(h,G,X){(function(i){(function(){"use strict";var m=h("color-name"),b=h("is-plain-obj"),p=h("defined");G.exports=function(u){var c,l,f=[],s=1;if("string"==typeof u)if(m[u])f=m[u].slice(),l="rgb";else if("transparent"===u)s=0,l="rgb",f=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(u)){var o=(y=u.slice(1)).length;s=1,o<=4?(f=[parseInt(y[0]+y[0],16),parseInt(y[1]+y[1],16),parseInt(y[2]+y[2],16)],4===o&&(s=parseInt(y[3]+y[3],16)/255)):(f=[parseInt(y[0]+y[1],16),parseInt(y[2]+y[3],16),parseInt(y[4]+y[5],16)],8===o&&(s=parseInt(y[6]+y[7],16)/255)),f[0]||(f[0]=0),f[1]||(f[1]=0),f[2]||(f[2]=0),l="rgb"}else if(c=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(u)){var d=c[1],g="rgb"===d,y=d.replace(/a$/,"");l=y,o="cmyk"===y?4:"gray"===y?1:3,f=c[2].trim().split(/\s*,\s*/).map(function(_,w){if(/%$/.test(_))return w===o?parseFloat(_)/100:"rgb"===y?255*parseFloat(_)/100:parseFloat(_);if("h"===y[w]){if(/deg$/.test(_))return parseFloat(_);if(void 0!==r[_])return r[_]}return parseFloat(_)}),d===y&&f.push(1),s=g||void 0===f[o]?1:f[o],f=f.slice(0,o)}else u.length>10&&/[0-9](?:\s|\/)/.test(u)&&(f=u.match(/([0-9]+)/g).map(function(_){return parseFloat(_)}),l=u.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(u))if(b(u)){var v=p(u.r,u.red,u.R,null);null!==v?(l="rgb",f=[v,p(u.g,u.green,u.G),p(u.b,u.blue,u.B)]):(l="hsl",f=[p(u.h,u.hue,u.H),p(u.s,u.saturation,u.S),p(u.l,u.lightness,u.L,u.b,u.brightness)]),s=p(u.a,u.alpha,u.opacity,1),null!=u.opacity&&(s/=100)}else(Array.isArray(u)||i.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(u))&&(f=[u[0],u[1],u[2]],l="rgb",s=4===u.length?u[3]:1);else l="rgb",f=[u>>>16,(65280&u)>>>8,255&u];return{space:l,values:f,alpha:s}};var r={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"color-name":130,defined:179,"is-plain-obj":457}],133:[function(h,G,X){"use strict";var i=h("color-parse"),m=h("color-space/hsl"),b=h("clamp");G.exports=function(p){var r,u=i(p);return u.space?((r=Array(3))[0]=b(u.values[0],0,255),r[1]=b(u.values[1],0,255),r[2]=b(u.values[2],0,255),"h"===u.space[0]&&(r=m.rgb(r)),r.push(b(u.alpha,0,1)),r):[]}},{clamp:126,"color-parse":132,"color-space/hsl":134}],134:[function(h,G,X){"use strict";var i=h("./rgb");G.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(m){var b,p,r,u,c,l=m[0]/360,f=m[1]/100,s=m[2]/100;if(0===f)return[c=255*s,c,c];b=2*s-(p=s<.5?s*(1+f):s+f-s*f),u=[0,0,0];for(var o=0;o<3;o++)(r=l+1/3*-(o-1))<0?r++:r>1&&r--,u[o]=255*(c=6*r<1?b+6*(p-b)*r:2*r<1?p:3*r<2?b+(p-b)*(2/3-r)*6:b);return u}},i.hsl=function(m){var b,p,r=m[0]/255,u=m[1]/255,c=m[2]/255,l=Math.min(r,u,c),f=Math.max(r,u,c),s=f-l;return f===l?b=0:r===f?b=(u-c)/s:u===f?b=2+(c-r)/s:c===f&&(b=4+(r-u)/s),(b=Math.min(60*b,360))<0&&(b+=360),p=(l+f)/2,[b,100*(f===l?0:p<=.5?s/(f+l):s/(2-f-l)),100*p]}},{"./rgb":135}],135:[function(h,G,X){"use strict";G.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],136:[function(h,G,X){G.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],137:[function(h,G,X){"use strict";var i=h("./colorScale"),m=h("lerp");function b(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function p(u){for(var c,l="#",f=0;f<3;++f)l+=("00"+(c=(c=u[f]).toString(16))).substr(c.length);return l}function r(u){return"rgba("+u.join(",")+")"}G.exports=function(u){var c,l,f,s,o,d,g,y,v,_;if(u||(u={}),y=(u.nshades||72)-1,g=u.format||"hex",(d=u.colormap)||(d="jet"),"string"==typeof d){if(d=d.toLowerCase(),!i[d])throw Error(d+" not a supported colorscale");o=i[d]}else{if(!Array.isArray(d))throw Error("unsupported colormap option",d);o=d.slice()}if(o.length>y+1)throw new Error(d+" map requires nshades to be at least size "+o.length);v=Array.isArray(u.alpha)?2!==u.alpha.length?[1,1]:u.alpha.slice():"number"==typeof u.alpha?[u.alpha,u.alpha]:[1,1],c=o.map(function(C){return Math.round(C.index*y)}),v[0]=Math.min(Math.max(v[0],0),1),v[1]=Math.min(Math.max(v[1],0),1);var w=o.map(function(C,L){var P=o[L].index,A=o[L].rgb.slice();return 4===A.length&&A[3]>=0&&A[3]<=1||(A[3]=v[0]+(v[1]-v[0])*P),A}),x=[];for(_=0;_<c.length-1;++_){s=c[_+1]-c[_],l=w[_],f=w[_+1];for(var E=0;E<s;E++){var k=E/s;x.push([Math.round(m(l[0],f[0],k)),Math.round(m(l[1],f[1],k)),Math.round(m(l[2],f[2],k)),m(l[3],f[3],k)])}}return x.push(o[o.length-1].rgb.concat(v[1])),"hex"===g?x=x.map(p):"rgbaString"===g?x=x.map(r):"float"===g&&(x=x.map(b)),x}},{"./colorScale":136,lerp:460}],138:[function(h,G,X){"use strict";G.exports=function(c,l,f,s){var o=i(l,f,s);if(0===o){var d=m(i(c,l,f)),g=m(i(c,l,s));if(d===g){if(0===d){var y=u(c,l,f);return y===u(c,l,s)?0:y?1:-1}return 0}return 0===g?d>0||u(c,l,s)?-1:1:0===d?g>0||u(c,l,f)?1:-1:m(g-d)}var _=i(c,l,f);return _>0?o>0&&i(c,l,s)>0?1:-1:_<0?o>0||i(c,l,s)>0?1:-1:i(c,l,s)>0||u(c,l,f)?1:-1};var i=h("robust-orientation"),m=h("signum"),b=h("two-sum"),p=h("robust-product"),r=h("robust-sum");function u(c,l,f){var s=b(c[0],-l[0]),o=b(c[1],-l[1]),d=b(f[0],-l[0]),g=b(f[1],-l[1]),y=r(p(s,d),p(o,g));return y[y.length-1]>=0}},{"robust-orientation":548,"robust-product":549,"robust-sum":553,signum:555,"two-sum":605}],139:[function(h,G,X){G.exports=function(b,p){var r=b.length,u=b.length-p.length;if(u)return u;switch(r){case 0:return 0;case 1:return b[0]-p[0];case 2:return b[0]+b[1]-p[0]-p[1]||i(b[0],b[1])-i(p[0],p[1]);case 3:var c=b[0]+b[1],l=p[0]+p[1];if(u=c+b[2]-(l+p[2]))return u;var f=i(b[0],b[1]),s=i(p[0],p[1]);return i(f,b[2])-i(s,p[2])||i(f+b[2],c)-i(s+p[2],l);case 4:var o=b[0],d=b[1],g=b[2],y=b[3],v=p[0],_=p[1],w=p[2],x=p[3];return o+d+g+y-(v+_+w+x)||i(o,d,g,y)-i(v,_,w,x,v)||i(o+d,o+g,o+y,d+g,d+y,g+y)-i(v+_,v+w,v+x,_+w,_+x,w+x)||i(o+d+g,o+d+y,o+g+y,d+g+y)-i(v+_+w,v+_+x,v+w+x,_+w+x);default:for(var E=b.slice().sort(m),k=p.slice().sort(m),C=0;C<r;++C)if(u=E[C]-k[C])return u;return 0}};var i=Math.min;function m(b,p){return b-p}},{}],140:[function(h,G,X){"use strict";var i=h("compare-cell"),m=h("cell-orientation");G.exports=function(b,p){return i(b,p)||m(b)-m(p)}},{"cell-orientation":123,"compare-cell":139}],141:[function(h,G,X){"use strict";var i=h("./lib/ch1d"),m=h("./lib/ch2d"),b=h("./lib/chnd");G.exports=function(p){var r=p.length;if(0===r)return[];if(1===r)return[[0]];var u=p[0].length;return 0===u?[]:1===u?i(p):2===u?m(p):b(p,u)}},{"./lib/ch1d":142,"./lib/ch2d":143,"./lib/chnd":144}],142:[function(h,G,X){"use strict";G.exports=function(i){for(var m=0,b=0,p=1;p<i.length;++p)i[p][0]<i[m][0]&&(m=p),i[p][0]>i[b][0]&&(b=p);return m<b?[[m],[b]]:m>b?[[b],[m]]:[[m]]}},{}],143:[function(h,G,X){"use strict";G.exports=function(m){var b=i(m),p=b.length;if(p<=2)return[];for(var r=new Array(p),u=b[p-1],c=0;c<p;++c){var l=b[c];r[c]=[u,l],u=l}return r};var i=h("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":469}],144:[function(h,G,X){"use strict";G.exports=function(b,p){try{return i(b,!0)}catch(c){var r=m(b);if(r.length<=p)return[];var u=function(l,f){for(var s=l.length,o=new Array(s),d=0;d<f.length;++d)o[d]=l[f[d]];var g=f.length;for(d=0;d<s;++d)f.indexOf(d)<0&&(o[g++]=l[d]);return o}(b,r);return function(l,f){for(var s=l.length,o=f.length,d=0;d<s;++d)for(var g=l[d],y=0;y<g.length;++y){var v=g[y];if(v<o)g[y]=f[v];else{v-=o;for(var _=0;_<o;++_)v>=f[_]&&(v+=1);g[y]=v}}return l}(i(u,!0),r)}};var i=h("incremental-convex-hull"),m=h("affine-hull")},{"affine-hull":73,"incremental-convex-hull":446}],145:[function(h,G,X){G.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],146:[function(h,G,X){G.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],147:[function(h,G,X){G.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],148:[function(h,G,X){G.exports=["normal","italic","oblique"]},{}],149:[function(h,G,X){G.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],150:[function(h,G,X){"use strict";G.exports={parse:h("./parse"),stringify:h("./stringify")}},{"./parse":152,"./stringify":153}],151:[function(h,G,X){"use strict";var i=h("css-font-size-keywords");G.exports={isSize:function(m){return/^[\d\.]/.test(m)||-1!==m.indexOf("/")||-1!==i.indexOf(m)}}},{"css-font-size-keywords":146}],152:[function(h,G,X){"use strict";var i=h("unquote"),m=h("css-global-keywords"),b=h("css-system-font-keywords"),p=h("css-font-weight-keywords"),r=h("css-font-style-keywords"),u=h("css-font-stretch-keywords"),c=h("string-split-by"),l=h("./lib/util").isSize;G.exports=s;var f=s.cache={};function s(d){if("string"!=typeof d)throw new Error("Font argument must be a string.");if(f[d])return f[d];if(""===d)throw new Error("Cannot parse an empty string.");if(-1!==b.indexOf(d))return f[d]={system:d};for(var g,y={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},v=c(d,/\s+/);g=v.shift();){if(-1!==m.indexOf(g))return["style","variant","weight","stretch"].forEach(function(w){y[w]=g}),f[d]=y;if(-1===r.indexOf(g))if("normal"!==g&&"small-caps"!==g)if(-1===u.indexOf(g)){if(-1===p.indexOf(g)){if(l(g)){var _=c(g,"/");if(y.size=_[0],null!=_[1]?y.lineHeight=o(_[1]):"/"===v[0]&&(v.shift(),y.lineHeight=o(v.shift())),!v.length)throw new Error("Missing required font-family.");return y.family=c(v.join(" "),/\s*,\s*/).map(i),f[d]=y}throw new Error("Unknown or unsupported font token: "+g)}y.weight=g}else y.stretch=g;else y.variant=g;else y.style=g}throw new Error("Missing required font-size.")}function o(d){var g=parseFloat(d);return g.toString()===d?g:d}},{"./lib/util":151,"css-font-stretch-keywords":147,"css-font-style-keywords":148,"css-font-weight-keywords":149,"css-global-keywords":154,"css-system-font-keywords":155,"string-split-by":589,unquote:620}],153:[function(h,G,X){"use strict";var i=h("pick-by-alias"),m=h("./lib/util").isSize,b=g(h("css-global-keywords")),p=g(h("css-system-font-keywords")),r=g(h("css-font-weight-keywords")),u=g(h("css-font-style-keywords")),c=g(h("css-font-stretch-keywords")),l={normal:1,"small-caps":1},f={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},o="serif";function d(y,v){if(y&&!v[y]&&!b[y])throw Error("Unknown keyword `"+y+"`");return y}function g(y){for(var v={},_=0;_<y.length;_++)v[y[_]]=1;return v}G.exports=function(y){if((y=i(y,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return y.system&&d(y.system,p),y.system;if(d(y.style,u),d(y.variant,l),d(y.weight,r),d(y.stretch,c),null==y.size&&(y.size="1rem"),"number"==typeof y.size&&(y.size+="px"),!m)throw Error("Bad size value `"+y.size+"`");y.family||(y.family=o),Array.isArray(y.family)&&(y.family.length||(y.family=[o]),y.family=y.family.map(function(_){return f[_]?_:'"'+_+'"'}).join(", "));var v=[];return v.push(y.style),y.variant!==y.style&&v.push(y.variant),y.weight!==y.variant&&y.weight!==y.style&&v.push(y.weight),y.stretch!==y.weight&&y.stretch!==y.variant&&y.stretch!==y.style&&v.push(y.stretch),v.push(y.size+(null==y.lineHeight||"normal"===y.lineHeight||y.lineHeight+""=="1"?"":"/"+y.lineHeight)),v.push(y.family),v.filter(Boolean).join(" ")}},{"./lib/util":151,"css-font-stretch-keywords":147,"css-font-style-keywords":148,"css-font-weight-keywords":149,"css-global-keywords":154,"css-system-font-keywords":155,"pick-by-alias":498}],154:[function(h,G,X){G.exports=["inherit","initial","unset"]},{}],155:[function(h,G,X){G.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],156:[function(h,G,X){"use strict";G.exports=function(i,m,b,p,r,u){var c=r-1,l=r*r,f=c*c,s=(1+2*r)*f,o=r*f,d=l*(3-2*r),g=l*c;if(i.length){u||(u=new Array(i.length));for(var y=i.length-1;y>=0;--y)u[y]=s*i[y]+o*m[y]+d*b[y]+g*p[y];return u}return s*i+o*m+d*b+g*p},G.exports.derivative=function(i,m,b,p,r,u){var c=6*r*r-6*r,l=3*r*r-4*r+1,f=-6*r*r+6*r,s=3*r*r-2*r;if(i.length){u||(u=new Array(i.length));for(var o=i.length-1;o>=0;--o)u[o]=c*i[o]+l*m[o]+f*b[o]+s*p[o];return u}return c*i+l*m+f*b[o]+s*p}},{}],157:[function(h,G,X){"use strict";var i=h("./lib/thunk.js");function m(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}G.exports=function(b){var p=new m;p.pre=b.pre,p.body=b.body,p.post=b.post;var r=b.args.slice(0);p.argTypes=r;for(var u=0;u<r.length;++u){var c=r[u];if("array"===c||"object"==typeof c&&c.blockIndices){if(p.argTypes[u]="array",p.arrayArgs.push(u),p.arrayBlockIndices.push(c.blockIndices?c.blockIndices:0),p.shimArgs.push("array"+u),u<p.pre.args.length&&p.pre.args[u].count>0)throw new Error("cwise: pre() block may not reference array args");if(u<p.post.args.length&&p.post.args[u].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===c)p.scalarArgs.push(u),p.shimArgs.push("scalar"+u);else if("index"===c){if(p.indexArgs.push(u),u<p.pre.args.length&&p.pre.args[u].count>0)throw new Error("cwise: pre() block may not reference array index");if(u<p.body.args.length&&p.body.args[u].lvalue)throw new Error("cwise: body() block may not write to array index");if(u<p.post.args.length&&p.post.args[u].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===c){if(p.shapeArgs.push(u),u<p.pre.args.length&&p.pre.args[u].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(u<p.body.args.length&&p.body.args[u].lvalue)throw new Error("cwise: body() block may not write to array shape");if(u<p.post.args.length&&p.post.args[u].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof c||!c.offset)throw new Error("cwise: Unknown argument type "+r[u]);p.argTypes[u]="offset",p.offsetArgs.push({array:c.array,offset:c.offset}),p.offsetArgIndex.push(u)}}if(p.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(p.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(p.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(p.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return p.debug=!!b.printCode||!!b.debug,p.funcName=b.funcName||"cwise",p.blockSize=b.blockSize||64,i(p)}},{"./lib/thunk.js":159}],158:[function(h,G,X){"use strict";var i=h("uniq");function m(r,u,c){var l,f,s=r.length,o=u.arrayArgs.length,d=u.indexArgs.length>0,g=[],y=[],v=0,_=0;for(l=0;l<s;++l)y.push(["i",l,"=0"].join(""));for(f=0;f<o;++f)for(l=0;l<s;++l)_=v,v=r[l],y.push(0===l?["d",f,"s",l,"=t",f,"p",v].join(""):["d",f,"s",l,"=(t",f,"p",v,"-s",_,"*t",f,"p",_,")"].join(""));for(y.length>0&&g.push("var "+y.join(",")),l=s-1;l>=0;--l)g.push(["for(i",l,"=0;i",l,"<s",v=r[l],";++i",l,"){"].join(""));for(g.push(c),l=0;l<s;++l){for(_=v,v=r[l],f=0;f<o;++f)g.push(["p",f,"+=d",f,"s",l].join(""));d&&(l>0&&g.push(["index[",_,"]-=s",_].join("")),g.push(["++index[",v,"]"].join(""))),g.push("}")}return g.join("\n")}function b(r,u,c){for(var l=r.body,f=[],s=[],o=0;o<r.args.length;++o){var d=r.args[o];if(!(d.count<=0)){var g=new RegExp(d.name,"g"),y="",v=u.arrayArgs.indexOf(o);switch(u.argTypes[o]){case"offset":var _=u.offsetArgIndex.indexOf(o);v=u.offsetArgs[_].array,y="+q"+_;case"array":y="p"+v+y;var w="l"+o,x="a"+v;if(0===u.arrayBlockIndices[v])1===d.count?"generic"===c[v]?d.lvalue?(f.push(["var ",w,"=",x,".get(",y,")"].join("")),l=l.replace(g,w),s.push([x,".set(",y,",",w,")"].join(""))):l=l.replace(g,[x,".get(",y,")"].join("")):l=l.replace(g,[x,"[",y,"]"].join("")):"generic"===c[v]?(f.push(["var ",w,"=",x,".get(",y,")"].join("")),l=l.replace(g,w),d.lvalue&&s.push([x,".set(",y,",",w,")"].join(""))):(f.push(["var ",w,"=",x,"[",y,"]"].join("")),l=l.replace(g,w),d.lvalue&&s.push([x,"[",y,"]=",w].join("")));else{for(var E=[d.name],k=[y],C=0;C<Math.abs(u.arrayBlockIndices[v]);C++)E.push("\\s*\\[([^\\]]+)\\]"),k.push("$"+(C+1)+"*t"+v+"b"+C);if(g=new RegExp(E.join(""),"g"),y=k.join("+"),"generic"===c[v])throw new Error("cwise: Generic arrays not supported in combination with blocks!");l=l.replace(g,[x,"[",y,"]"].join(""))}break;case"scalar":l=l.replace(g,"Y"+u.scalarArgs.indexOf(o));break;case"index":l=l.replace(g,"index");break;case"shape":l=l.replace(g,"shape")}}}return[f.join("\n"),l,s.join("\n")].join("\n").trim()}function p(r){for(var u=new Array(r.length),c=!0,l=0;l<r.length;++l){var f=r[l],s=f.match(/\d+/);s=s?s[0]:"",u[l]=0===f.charAt(0)?"u"+f.charAt(1)+s:f.charAt(0)+s,l>0&&(c=c&&u[l]===u[l-1])}return c?u[0]:u.join("")}G.exports=function(r,u){for(var c=u[1].length-Math.abs(r.arrayBlockIndices[0])|0,l=new Array(r.arrayArgs.length),f=new Array(r.arrayArgs.length),s=0;s<r.arrayArgs.length;++s)f[s]=u[2*s],l[s]=u[2*s+1];var o=[],d=[],g=[],y=[],v=[];for(s=0;s<r.arrayArgs.length;++s){r.arrayBlockIndices[s]<0?(g.push(0),y.push(c),o.push(c),d.push(c+r.arrayBlockIndices[s])):(g.push(r.arrayBlockIndices[s]),y.push(r.arrayBlockIndices[s]+c),o.push(0),d.push(r.arrayBlockIndices[s]));for(var _=[],w=0;w<l[s].length;w++)g[s]<=l[s][w]&&l[s][w]<y[s]&&_.push(l[s][w]-g[s]);v.push(_)}var x=["SS"],E=["'use strict'"],k=[];for(w=0;w<c;++w)k.push(["s",w,"=SS[",w,"]"].join(""));for(s=0;s<r.arrayArgs.length;++s){for(x.push("a"+s),x.push("t"+s),x.push("p"+s),w=0;w<c;++w)k.push(["t",s,"p",w,"=t",s,"[",g[s]+w,"]"].join(""));for(w=0;w<Math.abs(r.arrayBlockIndices[s]);++w)k.push(["t",s,"b",w,"=t",s,"[",o[s]+w,"]"].join(""))}for(s=0;s<r.scalarArgs.length;++s)x.push("Y"+s);if(r.shapeArgs.length>0&&k.push("shape=SS.slice(0)"),r.indexArgs.length>0){var C=new Array(c);for(s=0;s<c;++s)C[s]="0";k.push(["index=[",C.join(","),"]"].join(""))}for(s=0;s<r.offsetArgs.length;++s){var L=r.offsetArgs[s],P=[];for(w=0;w<L.offset.length;++w)0!==L.offset[w]&&P.push(1===L.offset[w]?["t",L.array,"p",w].join(""):[L.offset[w],"*t",L.array,"p",w].join(""));k.push(0===P.length?"q"+s+"=0":["q",s,"=",P.join("+")].join(""))}var A=i([].concat(r.pre.thisVars).concat(r.body.thisVars).concat(r.post.thisVars));for((k=k.concat(A)).length>0&&E.push("var "+k.join(",")),s=0;s<r.arrayArgs.length;++s)E.push("p"+s+"|=0");r.pre.body.length>3&&E.push(b(r.pre,r,f));var I=b(r.body,r,f),D=function(S){for(var N=0,B=S[0].length;N<B;){for(var H=1;H<S.length;++H)if(S[H][N]!==S[0][N])return N;++N}return N}(v);E.push(D<c?function(S,N,B,H){for(var Y=N.length,Q=B.arrayArgs.length,ne=B.blockSize,ae=B.indexArgs.length>0,te=[],K=0;K<Q;++K)te.push(["var offset",K,"=p",K].join(""));for(K=S;K<Y;++K)te.push(["for(var j"+K+"=SS[",N[K],"]|0;j",K,">0;){"].join("")),te.push(["if(j",K,"<",ne,"){"].join("")),te.push(["s",N[K],"=j",K].join("")),te.push(["j",K,"=0"].join("")),te.push(["}else{s",N[K],"=",ne].join("")),te.push(["j",K,"-=",ne,"}"].join("")),ae&&te.push(["index[",N[K],"]=j",K].join(""));for(K=0;K<Q;++K){for(var q=["offset"+K],re=S;re<Y;++re)q.push(["j",re,"*t",K,"p",N[re]].join(""));te.push(["p",K,"=(",q.join("+"),")"].join(""))}for(te.push(m(N,B,H)),K=S;K<Y;++K)te.push("}");return te.join("\n")}(D,v[0],r,I):m(v[0],r,I)),r.post.body.length>3&&E.push(b(r.post,r,f)),r.debug&&console.log("-----Generated cwise routine for ",u,":\n"+E.join("\n")+"\n----------");var R=[r.funcName||"unnamed","_cwise_loop_",l[0].join("s"),"m",D,p(f)].join("");return new Function(["function ",R,"(",x.join(","),"){",E.join("\n"),"} return ",R].join(""))()}},{uniq:619}],159:[function(h,G,X){"use strict";var i=h("./compile.js");G.exports=function(m){var b=["'use strict'","var CACHED={}"],p=[];b.push(["return function ",m.funcName+"_cwise_thunk","(",m.shimArgs.join(","),"){"].join(""));for(var u=[],c=[],l=[["array",m.arrayArgs[0],".shape.slice(",Math.max(0,m.arrayBlockIndices[0]),m.arrayBlockIndices[0]<0?","+m.arrayBlockIndices[0]+")":")"].join("")],f=[],s=[],o=0;o<m.arrayArgs.length;++o){var d=m.arrayArgs[o];p.push(["t",d,"=array",d,".dtype,","r",d,"=array",d,".order"].join("")),u.push("t"+d),u.push("r"+d),c.push("t"+d),c.push("r"+d+".join()"),l.push("array"+d+".data"),l.push("array"+d+".stride"),l.push("array"+d+".offset|0"),o>0&&(f.push("array"+m.arrayArgs[0]+".shape.length===array"+d+".shape.length+"+(Math.abs(m.arrayBlockIndices[0])-Math.abs(m.arrayBlockIndices[o]))),s.push("array"+m.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,m.arrayBlockIndices[0])+"]===array"+d+".shape[shapeIndex+"+Math.max(0,m.arrayBlockIndices[o])+"]"))}for(m.arrayArgs.length>1&&(b.push("if (!("+f.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),b.push("for(var shapeIndex=array"+m.arrayArgs[0]+".shape.length-"+Math.abs(m.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),b.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),b.push("}")),o=0;o<m.scalarArgs.length;++o)l.push("scalar"+m.scalarArgs[o]);return p.push(["type=[",c.join(","),"].join()"].join("")),p.push("proc=CACHED[type]"),b.push("var "+p.join(",")),b.push(["if(!proc){","CACHED[type]=proc=compile([",u.join(","),"])}","return proc(",l.join(","),")}"].join("")),m.debug&&console.log("-----Generated thunk:\n"+b.join("\n")+"\n----------"),new Function("compile",b.join("\n"))(i.bind(void 0,m))}},{"./compile.js":158}],160:[function(h,G,X){"use strict";var i,m=h("type/value/is"),b=h("type/value/ensure"),p=h("type/plain-function/ensure"),r=h("es5-ext/object/copy"),u=h("es5-ext/object/normalize-options"),c=h("es5-ext/object/map"),l=Function.prototype.bind,f=Object.defineProperty,s=Object.prototype.hasOwnProperty;i=function(o,d,g){var y,v=b(d)&&p(d.value);return delete(y=r(d)).writable,delete y.value,y.get=function(){return!g.overwriteDefinition&&s.call(this,o)?v:(d.value=l.call(v,g.resolveContext?g.resolveContext(this):this),f(this,o,d),this[o])},y},G.exports=function(o){var d=u(arguments[1]);return m(d.resolveContext)&&p(d.resolveContext),c(o,function(g,y){return i(y,g,d)})}},{"es5-ext/object/copy":205,"es5-ext/object/map":213,"es5-ext/object/normalize-options":214,"type/plain-function/ensure":611,"type/value/ensure":615,"type/value/is":616}],161:[function(h,G,X){"use strict";var i=h("type/value/is"),m=h("type/plain-function/is"),b=h("es5-ext/object/assign"),p=h("es5-ext/object/normalize-options"),r=h("es5-ext/string/#/contains");(G.exports=function(u,c){var l,f,s,o,d;return arguments.length<2||"string"!=typeof u?(o=c,c=u,u=null):o=arguments[2],i(u)?(l=r.call(u,"c"),f=r.call(u,"e"),s=r.call(u,"w")):(l=s=!0,f=!1),d={value:c,configurable:l,enumerable:f,writable:s},o?b(p(o),d):d}).gs=function(u,c,l){var f,s,o,d;return"string"!=typeof u?(o=l,l=c,c=u,u=null):o=arguments[3],i(c)?m(c)?i(l)?m(l)||(o=l,l=void 0):l=void 0:(o=c,c=l=void 0):c=void 0,i(u)?(f=r.call(u,"c"),s=r.call(u,"e")):(f=!0,s=!1),d={get:c,set:l,configurable:f,enumerable:s},o?b(p(o),d):d}},{"es5-ext/object/assign":202,"es5-ext/object/normalize-options":214,"es5-ext/string/#/contains":221,"type/plain-function/is":612,"type/value/is":616}],162:[function(h,G,X){(function(i){"use strict";function m(S,N){return S<N?-1:S>N?1:S>=N?0:NaN}function b(S){var N;return 1===S.length&&(N=S,S=function(B,H){return m(N(B),H)}),{left:function(B,H,Y,Q){for(null==Y&&(Y=0),null==Q&&(Q=B.length);Y<Q;){var ne=Y+Q>>>1;S(B[ne],H)<0?Y=ne+1:Q=ne}return Y},right:function(B,H,Y,Q){for(null==Y&&(Y=0),null==Q&&(Q=B.length);Y<Q;){var ne=Y+Q>>>1;S(B[ne],H)>0?Q=ne:Y=ne+1}return Y}}}var p=b(m),r=p.right,u=p.left;function c(S,N){return[S,N]}function l(S){return null===S?NaN:+S}function f(S,N){var B,H,Y=S.length,Q=0,ne=-1,ae=0,te=0;if(null==N)for(;++ne<Y;)isNaN(B=l(S[ne]))||(te+=(H=B-ae)*(B-(ae+=H/++Q)));else for(;++ne<Y;)isNaN(B=l(N(S[ne],ne,S)))||(te+=(H=B-ae)*(B-(ae+=H/++Q)));if(Q>1)return te/(Q-1)}function s(S,N){var B=f(S,N);return B&&Math.sqrt(B)}function o(S,N){var B,H,Y,Q=S.length,ne=-1;if(null==N){for(;++ne<Q;)if(null!=(B=S[ne])&&B>=B)for(H=Y=B;++ne<Q;)null!=(B=S[ne])&&(H>B&&(H=B),Y<B&&(Y=B))}else for(;++ne<Q;)if(null!=(B=N(S[ne],ne,S))&&B>=B)for(H=Y=B;++ne<Q;)null!=(B=N(S[ne],ne,S))&&(H>B&&(H=B),Y<B&&(Y=B));return[H,Y]}var d=Array.prototype,g=d.slice,y=d.map;function v(S){return function(){return S}}function _(S){return S}function w(S,N,B){S=+S,N=+N,B=(Y=arguments.length)<2?(N=S,S=0,1):Y<3?1:+B;for(var H=-1,Y=0|Math.max(0,Math.ceil((N-S)/B)),Q=new Array(Y);++H<Y;)Q[H]=S+H*B;return Q}var x=Math.sqrt(50),E=Math.sqrt(10),k=Math.sqrt(2);function C(S,N,B){var H=(N-S)/Math.max(0,B),Y=Math.floor(Math.log(H)/Math.LN10),Q=H/Math.pow(10,Y);return Y>=0?(Q>=x?10:Q>=E?5:Q>=k?2:1)*Math.pow(10,Y):-Math.pow(10,-Y)/(Q>=x?10:Q>=E?5:Q>=k?2:1)}function L(S,N,B){var H=Math.abs(N-S)/Math.max(0,B),Y=Math.pow(10,Math.floor(Math.log(H)/Math.LN10)),Q=H/Y;return Q>=x?Y*=10:Q>=E?Y*=5:Q>=k&&(Y*=2),N<S?-Y:Y}function P(S){return Math.ceil(Math.log(S.length)/Math.LN2)+1}function A(S,N,B){if(null==B&&(B=l),H=S.length){if((N=+N)<=0||H<2)return+B(S[0],0,S);if(N>=1)return+B(S[H-1],H-1,S);var H,Y=(H-1)*N,Q=Math.floor(Y),ne=+B(S[Q],Q,S);return ne+(+B(S[Q+1],Q+1,S)-ne)*(Y-Q)}}function I(S,N){var B,H,Y=S.length,Q=-1;if(null==N){for(;++Q<Y;)if(null!=(B=S[Q])&&B>=B)for(H=B;++Q<Y;)null!=(B=S[Q])&&H>B&&(H=B)}else for(;++Q<Y;)if(null!=(B=N(S[Q],Q,S))&&B>=B)for(H=B;++Q<Y;)null!=(B=N(S[Q],Q,S))&&H>B&&(H=B);return H}function D(S){if(!(Y=S.length))return[];for(var N=-1,B=I(S,R),H=new Array(B);++N<B;)for(var Y,Q=-1,ne=H[N]=new Array(Y);++Q<Y;)ne[Q]=S[Q][N];return H}function R(S){return S.length}i.bisect=r,i.bisectRight=r,i.bisectLeft=u,i.ascending=m,i.bisector=b,i.cross=function(S,N,B){var H,Y,Q,ne,ae=S.length,te=N.length,K=new Array(ae*te);for(null==B&&(B=c),H=Q=0;H<ae;++H)for(ne=S[H],Y=0;Y<te;++Y,++Q)K[Q]=B(ne,N[Y]);return K},i.descending=function(S,N){return N<S?-1:N>S?1:N>=S?0:NaN},i.deviation=s,i.extent=o,i.histogram=function(){var S=_,N=o,B=P;function H(Y){var Q,ne,ae=Y.length,te=new Array(ae);for(Q=0;Q<ae;++Q)te[Q]=S(Y[Q],Q,Y);var K=N(te),q=K[0],re=K[1],V=B(te,q,re);Array.isArray(V)||(V=L(q,re,V),V=w(Math.ceil(q/V)*V,re,V));for(var W=V.length;V[0]<=q;)V.shift(),--W;for(;V[W-1]>re;)V.pop(),--W;var Z,oe=new Array(W+1);for(Q=0;Q<=W;++Q)(Z=oe[Q]=[]).x0=Q>0?V[Q-1]:q,Z.x1=Q<W?V[Q]:re;for(Q=0;Q<ae;++Q)q<=(ne=te[Q])&&ne<=re&&oe[r(V,ne,0,W)].push(Y[Q]);return oe}return H.value=function(Y){return arguments.length?(S="function"==typeof Y?Y:v(Y),H):S},H.domain=function(Y){return arguments.length?(N="function"==typeof Y?Y:v([Y[0],Y[1]]),H):N},H.thresholds=function(Y){return arguments.length?(B="function"==typeof Y?Y:Array.isArray(Y)?v(g.call(Y)):v(Y),H):B},H},i.thresholdFreedmanDiaconis=function(S,N,B){return S=y.call(S,l).sort(m),Math.ceil((B-N)/(2*(A(S,.75)-A(S,.25))*Math.pow(S.length,-1/3)))},i.thresholdScott=function(S,N,B){return Math.ceil((B-N)/(3.5*s(S)*Math.pow(S.length,-1/3)))},i.thresholdSturges=P,i.max=function(S,N){var B,H,Y=S.length,Q=-1;if(null==N){for(;++Q<Y;)if(null!=(B=S[Q])&&B>=B)for(H=B;++Q<Y;)null!=(B=S[Q])&&B>H&&(H=B)}else for(;++Q<Y;)if(null!=(B=N(S[Q],Q,S))&&B>=B)for(H=B;++Q<Y;)null!=(B=N(S[Q],Q,S))&&B>H&&(H=B);return H},i.mean=function(S,N){var B,H=S.length,Y=H,Q=-1,ne=0;if(null==N)for(;++Q<H;)isNaN(B=l(S[Q]))?--Y:ne+=B;else for(;++Q<H;)isNaN(B=l(N(S[Q],Q,S)))?--Y:ne+=B;if(Y)return ne/Y},i.median=function(S,N){var B,H=S.length,Y=-1,Q=[];if(null==N)for(;++Y<H;)isNaN(B=l(S[Y]))||Q.push(B);else for(;++Y<H;)isNaN(B=l(N(S[Y],Y,S)))||Q.push(B);return A(Q.sort(m),.5)},i.merge=function(S){for(var N,B,H,Y=S.length,Q=-1,ne=0;++Q<Y;)ne+=S[Q].length;for(B=new Array(ne);--Y>=0;)for(N=(H=S[Y]).length;--N>=0;)B[--ne]=H[N];return B},i.min=I,i.pairs=function(S,N){null==N&&(N=c);for(var B=0,H=S.length-1,Y=S[0],Q=new Array(H<0?0:H);B<H;)Q[B]=N(Y,Y=S[++B]);return Q},i.permute=function(S,N){for(var B=N.length,H=new Array(B);B--;)H[B]=S[N[B]];return H},i.quantile=A,i.range=w,i.scan=function(S,N){if(B=S.length){var B,H,Y=0,Q=0,ne=S[Q];for(null==N&&(N=m);++Y<B;)(N(H=S[Y],ne)<0||0!==N(ne,ne))&&(ne=H,Q=Y);return 0===N(ne,ne)?Q:void 0}},i.shuffle=function(S,N,B){for(var H,Y,Q=(null==B?S.length:B)-(N=null==N?0:+N);Q;)Y=Math.random()*Q--|0,H=S[Q+N],S[Q+N]=S[Y+N],S[Y+N]=H;return S},i.sum=function(S,N){var B,H=S.length,Y=-1,Q=0;if(null==N)for(;++Y<H;)(B=+S[Y])&&(Q+=B);else for(;++Y<H;)(B=+N(S[Y],Y,S))&&(Q+=B);return Q},i.ticks=function(S,N,B){var H,Y,Q,ne,ae=-1;if(B=+B,(S=+S)==(N=+N)&&B>0)return[S];if((H=N<S)&&(Y=S,S=N,N=Y),0===(ne=C(S,N,B))||!isFinite(ne))return[];if(ne>0)for(S=Math.ceil(S/ne),N=Math.floor(N/ne),Q=new Array(Y=Math.ceil(N-S+1));++ae<Y;)Q[ae]=(S+ae)*ne;else for(S=Math.floor(S*ne),N=Math.ceil(N*ne),Q=new Array(Y=Math.ceil(S-N+1));++ae<Y;)Q[ae]=(S-ae)/ne;return H&&Q.reverse(),Q},i.tickIncrement=C,i.tickStep=L,i.transpose=D,i.variance=f,i.zip=function(){return D(arguments)},Object.defineProperty(i,"__esModule",{value:!0})})("object"==typeof X&&void 0!==G?X:this.d3=this.d3||{})},{}],163:[function(h,G,X){(function(i){"use strict";function m(){}function b(o,d){var g=new m;if(o instanceof m)o.each(function(x,E){g.set(E,x)});else if(Array.isArray(o)){var y,v=-1,_=o.length;if(null==d)for(;++v<_;)g.set(v,o[v]);else for(;++v<_;)g.set(d(y=o[v],v,o),y)}else if(o)for(var w in o)g.set(w,o[w]);return g}function p(){return{}}function r(o,d,g){o[d]=g}function u(){return b()}function c(o,d,g){o.set(d,g)}function l(){}m.prototype=b.prototype={constructor:m,has:function(o){return"$"+o in this},get:function(o){return this["$"+o]},set:function(o,d){return this["$"+o]=d,this},remove:function(o){var d="$"+o;return d in this&&delete this[d]},clear:function(){for(var o in this)"$"===o[0]&&delete this[o]},keys:function(){var o=[];for(var d in this)"$"===d[0]&&o.push(d.slice(1));return o},values:function(){var o=[];for(var d in this)"$"===d[0]&&o.push(this[d]);return o},entries:function(){var o=[];for(var d in this)"$"===d[0]&&o.push({key:d.slice(1),value:this[d]});return o},size:function(){var o=0;for(var d in this)"$"===d[0]&&++o;return o},empty:function(){for(var o in this)if("$"===o[0])return!1;return!0},each:function(o){for(var d in this)"$"===d[0]&&o(this[d],d.slice(1),this)}};var f=b.prototype;function s(o,d){var g=new l;if(o instanceof l)o.each(function(_){g.add(_)});else if(o){var y=-1,v=o.length;if(null==d)for(;++y<v;)g.add(o[y]);else for(;++y<v;)g.add(d(o[y],y,o))}return g}l.prototype=s.prototype={constructor:l,has:f.has,add:function(o){return this["$"+(o+="")]=o,this},remove:f.remove,clear:f.clear,values:f.keys,size:f.size,empty:f.empty,each:f.each},i.nest=function(){var o,d,g,y=[],v=[];function _(w,x,E,k){if(x>=y.length)return null!=o&&w.sort(o),null!=d?d(w):w;for(var C,L,P,A=-1,I=w.length,D=y[x++],R=b(),S=E();++A<I;)(P=R.get(C=D(L=w[A])+""))?P.push(L):R.set(C,[L]);return R.each(function(N,B){k(S,B,_(N,x,E,k))}),S}return g={object:function(w){return _(w,0,p,r)},map:function(w){return _(w,0,u,c)},entries:function(w){return function x(E,k){if(++k>y.length)return E;var C,L=v[k-1];return null!=d&&k>=y.length?C=E.entries():(C=[],E.each(function(P,A){C.push({key:A,values:x(P,k)})})),null!=L?C.sort(function(P,A){return L(P.key,A.key)}):C}(_(w,0,u,c),0)},key:function(w){return y.push(w),g},sortKeys:function(w){return v[y.length-1]=w,g},sortValues:function(w){return o=w,g},rollup:function(w){return d=w,g}}},i.set=s,i.map=b,i.keys=function(o){var d=[];for(var g in o)d.push(g);return d},i.values=function(o){var d=[];for(var g in o)d.push(o[g]);return d},i.entries=function(o){var d=[];for(var g in o)d.push({key:g,value:o[g]});return d},Object.defineProperty(i,"__esModule",{value:!0})})("object"==typeof X&&void 0!==G?X:this.d3=this.d3||{})},{}],164:[function(h,G,X){var i;i=this,function(i){"use strict";function m(_e,we,Se){_e.prototype=we.prototype=Se,Se.constructor=_e}function b(_e,we){var Se=Object.create(_e.prototype);for(var Oe in we)Se[Oe]=we[Oe];return Se}function p(){}var r="\\s*([+-]?\\d+)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,f=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),s=new RegExp("^rgb\\("+[c,c,c]+"\\)$"),o=new RegExp("^rgba\\("+[r,r,r,u]+"\\)$"),d=new RegExp("^rgba\\("+[c,c,c,u]+"\\)$"),g=new RegExp("^hsl\\("+[u,c,c]+"\\)$"),y=new RegExp("^hsla\\("+[u,c,c,u]+"\\)$"),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _(){return this.rgb().formatHex()}function w(){return this.rgb().formatRgb()}function x(_e){var we,Se;return _e=(_e+"").trim().toLowerCase(),(we=l.exec(_e))?(Se=we[1].length,we=parseInt(we[1],16),6===Se?E(we):3===Se?new P(we>>8&15|we>>4&240,we>>4&15|240&we,(15&we)<<4|15&we,1):8===Se?k(we>>24&255,we>>16&255,we>>8&255,(255&we)/255):4===Se?k(we>>12&15|we>>8&240,we>>8&15|we>>4&240,we>>4&15|240&we,((15&we)<<4|15&we)/255):null):(we=f.exec(_e))?new P(we[1],we[2],we[3],1):(we=s.exec(_e))?new P(255*we[1]/100,255*we[2]/100,255*we[3]/100,1):(we=o.exec(_e))?k(we[1],we[2],we[3],we[4]):(we=d.exec(_e))?k(255*we[1]/100,255*we[2]/100,255*we[3]/100,we[4]):(we=g.exec(_e))?R(we[1],we[2]/100,we[3]/100,1):(we=y.exec(_e))?R(we[1],we[2]/100,we[3]/100,we[4]):v.hasOwnProperty(_e)?E(v[_e]):"transparent"===_e?new P(NaN,NaN,NaN,0):null}function E(_e){return new P(_e>>16&255,_e>>8&255,255&_e,1)}function k(_e,we,Se,Oe){return Oe<=0&&(_e=we=Se=NaN),new P(_e,we,Se,Oe)}function C(_e){return _e instanceof p||(_e=x(_e)),_e?new P((_e=_e.rgb()).r,_e.g,_e.b,_e.opacity):new P}function L(_e,we,Se,Oe){return 1===arguments.length?C(_e):new P(_e,we,Se,null==Oe?1:Oe)}function P(_e,we,Se,Oe){this.r=+_e,this.g=+we,this.b=+Se,this.opacity=+Oe}function A(){return"#"+D(this.r)+D(this.g)+D(this.b)}function I(){var _e=this.opacity;return(1===(_e=isNaN(_e)?1:Math.max(0,Math.min(1,_e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===_e?")":", "+_e+")")}function D(_e){return((_e=Math.max(0,Math.min(255,Math.round(_e)||0)))<16?"0":"")+_e.toString(16)}function R(_e,we,Se,Oe){return Oe<=0?_e=we=Se=NaN:Se<=0||Se>=1?_e=we=NaN:we<=0&&(_e=NaN),new B(_e,we,Se,Oe)}function S(_e){if(_e instanceof B)return new B(_e.h,_e.s,_e.l,_e.opacity);if(_e instanceof p||(_e=x(_e)),!_e)return new B;if(_e instanceof B)return _e;var we=(_e=_e.rgb()).r/255,Se=_e.g/255,Oe=_e.b/255,Be=Math.min(we,Se,Oe),He=Math.max(we,Se,Oe),Xe=NaN,nt=He-Be,et=(He+Be)/2;return nt?(Xe=we===He?(Se-Oe)/nt+6*(Se<Oe):Se===He?(Oe-we)/nt+2:(we-Se)/nt+4,nt/=et<.5?He+Be:2-He-Be,Xe*=60):nt=et>0&&et<1?0:Xe,new B(Xe,nt,et,_e.opacity)}function N(_e,we,Se,Oe){return 1===arguments.length?S(_e):new B(_e,we,Se,null==Oe?1:Oe)}function B(_e,we,Se,Oe){this.h=+_e,this.s=+we,this.l=+Se,this.opacity=+Oe}function H(_e,we,Se){return 255*(_e<60?we+(Se-we)*_e/60:_e<180?Se:_e<240?we+(Se-we)*(240-_e)/60:we)}m(p,x,{copy:function(_e){return Object.assign(new this.constructor,this,_e)},displayable:function(){return this.rgb().displayable()},hex:_,formatHex:_,formatHsl:function(){return S(this).formatHsl()},formatRgb:w,toString:w}),m(P,L,b(p,{brighter:function(_e){return _e=null==_e?1/.7:Math.pow(1/.7,_e),new P(this.r*_e,this.g*_e,this.b*_e,this.opacity)},darker:function(_e){return _e=null==_e?.7:Math.pow(.7,_e),new P(this.r*_e,this.g*_e,this.b*_e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:A,formatHex:A,formatRgb:I,toString:I})),m(B,N,b(p,{brighter:function(_e){return _e=null==_e?1/.7:Math.pow(1/.7,_e),new B(this.h,this.s,this.l*_e,this.opacity)},darker:function(_e){return _e=null==_e?.7:Math.pow(.7,_e),new B(this.h,this.s,this.l*_e,this.opacity)},rgb:function(){var _e=this.h%360+360*(this.h<0),we=isNaN(_e)||isNaN(this.s)?0:this.s,Se=this.l,Oe=Se+(Se<.5?Se:1-Se)*we,Be=2*Se-Oe;return new P(H(_e>=240?_e-240:_e+120,Be,Oe),H(_e,Be,Oe),H(_e<120?_e+240:_e-120,Be,Oe),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var _e=this.opacity;return(1===(_e=isNaN(_e)?1:Math.max(0,Math.min(1,_e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===_e?")":", "+_e+")")}}));var Y=Math.PI/180,Q=180/Math.PI,ne=6/29,ae=3*ne*ne;function te(_e){if(_e instanceof q)return new q(_e.l,_e.a,_e.b,_e.opacity);if(_e instanceof ue)return fe(_e);_e instanceof P||(_e=C(_e));var we,Se,Oe=Z(_e.r),Be=Z(_e.g),He=Z(_e.b),Xe=re((.2225045*Oe+.7168786*Be+.0606169*He)/1);return Oe===Be&&Be===He?we=Se=Xe:(we=re((.4360747*Oe+.3850649*Be+.1430804*He)/.96422),Se=re((.0139322*Oe+.0971045*Be+.7141733*He)/.82521)),new q(116*Xe-16,500*(we-Xe),200*(Xe-Se),_e.opacity)}function K(_e,we,Se,Oe){return 1===arguments.length?te(_e):new q(_e,we,Se,null==Oe?1:Oe)}function q(_e,we,Se,Oe){this.l=+_e,this.a=+we,this.b=+Se,this.opacity=+Oe}function re(_e){return _e>.008856451679035631?Math.pow(_e,1/3):_e/ae+4/29}function V(_e){return _e>ne?_e*_e*_e:ae*(_e-4/29)}function W(_e){return 255*(_e<=.0031308?12.92*_e:1.055*Math.pow(_e,1/2.4)-.055)}function Z(_e){return(_e/=255)<=.04045?_e/12.92:Math.pow((_e+.055)/1.055,2.4)}function oe(_e){if(_e instanceof ue)return new ue(_e.h,_e.c,_e.l,_e.opacity);if(_e instanceof q||(_e=te(_e)),0===_e.a&&0===_e.b)return new ue(NaN,0<_e.l&&_e.l<100?0:NaN,_e.l,_e.opacity);var we=Math.atan2(_e.b,_e.a)*Q;return new ue(we<0?we+360:we,Math.sqrt(_e.a*_e.a+_e.b*_e.b),_e.l,_e.opacity)}function ie(_e,we,Se,Oe){return 1===arguments.length?oe(_e):new ue(_e,we,Se,null==Oe?1:Oe)}function ue(_e,we,Se,Oe){this.h=+_e,this.c=+we,this.l=+Se,this.opacity=+Oe}function fe(_e){if(isNaN(_e.h))return new q(_e.l,0,0,_e.opacity);var we=_e.h*Y;return new q(_e.l,Math.cos(we)*_e.c,Math.sin(we)*_e.c,_e.opacity)}m(q,K,b(p,{brighter:function(_e){return new q(this.l+18*(null==_e?1:_e),this.a,this.b,this.opacity)},darker:function(_e){return new q(this.l-18*(null==_e?1:_e),this.a,this.b,this.opacity)},rgb:function(){var _e=(this.l+16)/116,we=isNaN(this.a)?_e:_e+this.a/500,Se=isNaN(this.b)?_e:_e-this.b/200;return new P(W(3.1338561*(we=.96422*V(we))-1.6168667*(_e=1*V(_e))-.4906146*(Se=.82521*V(Se))),W(-.9787684*we+1.9161415*_e+.033454*Se),W(.0719453*we-.2289914*_e+1.4052427*Se),this.opacity)}})),m(ue,ie,b(p,{brighter:function(_e){return new ue(this.h,this.c,this.l+18*(null==_e?1:_e),this.opacity)},darker:function(_e){return new ue(this.h,this.c,this.l-18*(null==_e?1:_e),this.opacity)},rgb:function(){return fe(this).rgb()}}));var de=1.78277,be=-.29227,pe=-.90649,Te=1.97294,ye=Te*pe,ke=Te*de,ze=de*be- -.14861*pe;function je(_e){if(_e instanceof Ce)return new Ce(_e.h,_e.s,_e.l,_e.opacity);_e instanceof P||(_e=C(_e));var Se=_e.g/255,Oe=_e.b/255,Be=(ze*Oe+ye*(_e.r/255)-ke*Se)/(ze+ye-ke),He=Oe-Be,Xe=(Te*(Se-Be)-be*He)/pe,nt=Math.sqrt(Xe*Xe+He*He)/(Te*Be*(1-Be)),et=nt?Math.atan2(Xe,He)*Q-120:NaN;return new Ce(et<0?et+360:et,nt,Be,_e.opacity)}function Ie(_e,we,Se,Oe){return 1===arguments.length?je(_e):new Ce(_e,we,Se,null==Oe?1:Oe)}function Ce(_e,we,Se,Oe){this.h=+_e,this.s=+we,this.l=+Se,this.opacity=+Oe}m(Ce,Ie,b(p,{brighter:function(_e){return _e=null==_e?1/.7:Math.pow(1/.7,_e),new Ce(this.h,this.s,this.l*_e,this.opacity)},darker:function(_e){return _e=null==_e?.7:Math.pow(.7,_e),new Ce(this.h,this.s,this.l*_e,this.opacity)},rgb:function(){var _e=isNaN(this.h)?0:(this.h+120)*Y,we=+this.l,Se=isNaN(this.s)?0:this.s*we*(1-we),Oe=Math.cos(_e),Be=Math.sin(_e);return new P(255*(we+Se*(-.14861*Oe+de*Be)),255*(we+Se*(be*Oe+pe*Be)),255*(we+Se*(Te*Oe)),this.opacity)}})),i.color=x,i.cubehelix=Ie,i.gray=function(_e,we){return new q(_e,0,0,null==we?1:we)},i.hcl=ie,i.hsl=N,i.lab=K,i.lch=function(_e,we,Se,Oe){return 1===arguments.length?oe(_e):new ue(Se,we,_e,null==Oe?1:Oe)},i.rgb=L,Object.defineProperty(i,"__esModule",{value:!0})}("object"==typeof X&&void 0!==G?X:(i=i||self).d3=i.d3||{})},{}],165:[function(h,G,X){var i;i=this,function(i){"use strict";var m={value:function(){}};function b(){for(var l,f=0,s=arguments.length,o={};f<s;++f){if(!(l=arguments[f]+"")||l in o||/[\s.]/.test(l))throw new Error("illegal type: "+l);o[l]=[]}return new p(o)}function p(l){this._=l}function r(l,f){return l.trim().split(/^|\s+/).map(function(s){var o="",d=s.indexOf(".");if(d>=0&&(o=s.slice(d+1),s=s.slice(0,d)),s&&!f.hasOwnProperty(s))throw new Error("unknown type: "+s);return{type:s,name:o}})}function u(l,f){for(var s,o=0,d=l.length;o<d;++o)if((s=l[o]).name===f)return s.value}function c(l,f,s){for(var o=0,d=l.length;o<d;++o)if(l[o].name===f){l[o]=m,l=l.slice(0,o).concat(l.slice(o+1));break}return null!=s&&l.push({name:f,value:s}),l}p.prototype=b.prototype={constructor:p,on:function(l,f){var s,o=this._,d=r(l+"",o),g=-1,y=d.length;if(!(arguments.length<2)){if(null!=f&&"function"!=typeof f)throw new Error("invalid callback: "+f);for(;++g<y;)if(s=(l=d[g]).type)o[s]=c(o[s],l.name,f);else if(null==f)for(s in o)o[s]=c(o[s],l.name,null);return this}for(;++g<y;)if((s=(l=d[g]).type)&&(s=u(o[s],l.name)))return s},copy:function(){var l={},f=this._;for(var s in f)l[s]=f[s].slice();return new p(l)},call:function(l,f){if((s=arguments.length-2)>0)for(var s,o,d=new Array(s),g=0;g<s;++g)d[g]=arguments[g+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(g=0,s=(o=this._[l]).length;g<s;++g)o[g].value.apply(f,d)},apply:function(l,f,s){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var o=this._[l],d=0,g=o.length;d<g;++d)o[d].value.apply(f,s)}},i.dispatch=b,Object.defineProperty(i,"__esModule",{value:!0})}("object"==typeof X&&void 0!==G?X:(i=i||self).d3=i.d3||{})},{}],166:[function(h,G,X){var i,m;i=this,m=function(i,m,b,p,r){"use strict";function u(v){return function(){return v}}function c(){return 1e-6*(Math.random()-.5)}function l(v){return v.x+v.vx}function f(v){return v.y+v.vy}function s(v){return v.index}function o(v,_){var w=v.get(_);if(!w)throw new Error("missing: "+_);return w}function d(v){return v.x}function g(v){return v.y}var y=Math.PI*(3-Math.sqrt(5));i.forceCenter=function(v,_){var w;function x(){var E,k,C=w.length,L=0,P=0;for(E=0;E<C;++E)L+=(k=w[E]).x,P+=k.y;for(L=L/C-v,P=P/C-_,E=0;E<C;++E)(k=w[E]).x-=L,k.y-=P}return null==v&&(v=0),null==_&&(_=0),x.initialize=function(E){w=E},x.x=function(E){return arguments.length?(v=+E,x):v},x.y=function(E){return arguments.length?(_=+E,x):_},x},i.forceCollide=function(v){var _,w,x=1,E=1;function k(){for(var P,A,I,D,R,S,N,B=_.length,H=0;H<E;++H)for(A=m.quadtree(_,l,f).visitAfter(C),P=0;P<B;++P)N=(S=w[(I=_[P]).index])*S,D=I.x+I.vx,R=I.y+I.vy,A.visit(Y);function Y(Q,ne,ae,te,K){var q=Q.data,re=Q.r,V=S+re;if(!q)return ne>D+V||te<D-V||ae>R+V||K<R-V;if(q.index>I.index){var W=D-q.x-q.vx,Z=R-q.y-q.vy,oe=W*W+Z*Z;oe<V*V&&(0===W&&(oe+=(W=c())*W),0===Z&&(oe+=(Z=c())*Z),oe=(V-(oe=Math.sqrt(oe)))/oe*x,I.vx+=(W*=oe)*(V=(re*=re)/(N+re)),I.vy+=(Z*=oe)*V,q.vx-=W*(V=1-V),q.vy-=Z*V)}}}function C(P){if(P.data)return P.r=w[P.data.index];for(var A=P.r=0;A<4;++A)P[A]&&P[A].r>P.r&&(P.r=P[A].r)}function L(){if(_){var P,A,I=_.length;for(w=new Array(I),P=0;P<I;++P)w[(A=_[P]).index]=+v(A,P,_)}}return"function"!=typeof v&&(v=u(null==v?1:+v)),k.initialize=function(P){_=P,L()},k.iterations=function(P){return arguments.length?(E=+P,k):E},k.strength=function(P){return arguments.length?(x=+P,k):x},k.radius=function(P){return arguments.length?(v="function"==typeof P?P:u(+P),L(),k):v},k},i.forceLink=function(v){var _,w,x,E,k,C=s,L=function(N){return 1/Math.min(E[N.source.index],E[N.target.index])},P=u(30),A=1;function I(N){for(var B=0,H=v.length;B<A;++B)for(var Y,Q,ne,ae,te,K,q,re=0;re<H;++re)Q=(Y=v[re]).source,ae=(ne=Y.target).x+ne.vx-Q.x-Q.vx||c(),te=ne.y+ne.vy-Q.y-Q.vy||c(),ae*=K=((K=Math.sqrt(ae*ae+te*te))-w[re])/K*N*_[re],te*=K,ne.vx-=ae*(q=k[re]),ne.vy-=te*q,Q.vx+=ae*(q=1-q),Q.vy+=te*q}function D(){if(x){var N,B,H=x.length,Y=v.length,Q=b.map(x,C);for(N=0,E=new Array(H);N<Y;++N)(B=v[N]).index=N,"object"!=typeof B.source&&(B.source=o(Q,B.source)),"object"!=typeof B.target&&(B.target=o(Q,B.target)),E[B.source.index]=(E[B.source.index]||0)+1,E[B.target.index]=(E[B.target.index]||0)+1;for(N=0,k=new Array(Y);N<Y;++N)k[N]=E[(B=v[N]).source.index]/(E[B.source.index]+E[B.target.index]);_=new Array(Y),R(),w=new Array(Y),S()}}function R(){if(x)for(var N=0,B=v.length;N<B;++N)_[N]=+L(v[N],N,v)}function S(){if(x)for(var N=0,B=v.length;N<B;++N)w[N]=+P(v[N],N,v)}return null==v&&(v=[]),I.initialize=function(N){x=N,D()},I.links=function(N){return arguments.length?(v=N,D(),I):v},I.id=function(N){return arguments.length?(C=N,I):C},I.iterations=function(N){return arguments.length?(A=+N,I):A},I.strength=function(N){return arguments.length?(L="function"==typeof N?N:u(+N),R(),I):L},I.distance=function(N){return arguments.length?(P="function"==typeof N?N:u(+N),S(),I):P},I},i.forceManyBody=function(){var v,_,w,x,E=u(-30),k=1,C=1/0,L=.81;function P(R){var S,N=v.length,B=m.quadtree(v,d,g).visitAfter(I);for(w=R,S=0;S<N;++S)_=v[S],B.visit(D)}function A(){if(v){var R,S,N=v.length;for(x=new Array(N),R=0;R<N;++R)x[(S=v[R]).index]=+E(S,R,v)}}function I(R){var S,N,B,H,Y,Q=0,ne=0;if(R.length){for(B=H=Y=0;Y<4;++Y)(S=R[Y])&&(N=Math.abs(S.value))&&(Q+=S.value,ne+=N,B+=N*S.x,H+=N*S.y);R.x=B/ne,R.y=H/ne}else{(S=R).x=S.data.x,S.y=S.data.y;do{Q+=x[S.data.index]}while(S=S.next)}R.value=Q}function D(R,S,N,B){if(!R.value)return!0;var H=R.x-_.x,Y=R.y-_.y,Q=B-S,ne=H*H+Y*Y;if(Q*Q/L<ne)return ne<C&&(0===H&&(ne+=(H=c())*H),0===Y&&(ne+=(Y=c())*Y),ne<k&&(ne=Math.sqrt(k*ne)),_.vx+=H*R.value*w/ne,_.vy+=Y*R.value*w/ne),!0;if(!(R.length||ne>=C)){(R.data!==_||R.next)&&(0===H&&(ne+=(H=c())*H),0===Y&&(ne+=(Y=c())*Y),ne<k&&(ne=Math.sqrt(k*ne)));do{R.data!==_&&(_.vx+=H*(Q=x[R.data.index]*w/ne),_.vy+=Y*Q)}while(R=R.next)}}return P.initialize=function(R){v=R,A()},P.strength=function(R){return arguments.length?(E="function"==typeof R?R:u(+R),A(),P):E},P.distanceMin=function(R){return arguments.length?(k=R*R,P):Math.sqrt(k)},P.distanceMax=function(R){return arguments.length?(C=R*R,P):Math.sqrt(C)},P.theta=function(R){return arguments.length?(L=R*R,P):Math.sqrt(L)},P},i.forceRadial=function(v,_,w){var x,E,k,C=u(.1);function L(A){for(var I=0,D=x.length;I<D;++I){var R=x[I],S=R.x-_||1e-6,N=R.y-w||1e-6,B=Math.sqrt(S*S+N*N),H=(k[I]-B)*E[I]*A/B;R.vx+=S*H,R.vy+=N*H}}function P(){if(x){var A,I=x.length;for(E=new Array(I),k=new Array(I),A=0;A<I;++A)k[A]=+v(x[A],A,x),E[A]=isNaN(k[A])?0:+C(x[A],A,x)}}return"function"!=typeof v&&(v=u(+v)),null==_&&(_=0),null==w&&(w=0),L.initialize=function(A){x=A,P()},L.strength=function(A){return arguments.length?(C="function"==typeof A?A:u(+A),P(),L):C},L.radius=function(A){return arguments.length?(v="function"==typeof A?A:u(+A),P(),L):v},L.x=function(A){return arguments.length?(_=+A,L):_},L.y=function(A){return arguments.length?(w=+A,L):w},L},i.forceSimulation=function(v){var _,w=1,x=.001,E=1-Math.pow(x,1/300),k=0,C=.6,L=b.map(),P=r.timer(I),A=p.dispatch("tick","end");function I(){D(),A.call("tick",_),w<x&&(P.stop(),A.call("end",_))}function D(N){var B,H,Y=v.length;void 0===N&&(N=1);for(var Q=0;Q<N;++Q)for(w+=(k-w)*E,L.each(function(ne){ne(w)}),B=0;B<Y;++B)null==(H=v[B]).fx?H.x+=H.vx*=C:(H.x=H.fx,H.vx=0),null==H.fy?H.y+=H.vy*=C:(H.y=H.fy,H.vy=0);return _}function R(){for(var N,B=0,H=v.length;B<H;++B){if((N=v[B]).index=B,null!=N.fx&&(N.x=N.fx),null!=N.fy&&(N.y=N.fy),isNaN(N.x)||isNaN(N.y)){var Y=10*Math.sqrt(B),Q=B*y;N.x=Y*Math.cos(Q),N.y=Y*Math.sin(Q)}(isNaN(N.vx)||isNaN(N.vy))&&(N.vx=N.vy=0)}}function S(N){return N.initialize&&N.initialize(v),N}return null==v&&(v=[]),R(),_={tick:D,restart:function(){return P.restart(I),_},stop:function(){return P.stop(),_},nodes:function(N){return arguments.length?(v=N,R(),L.each(S),_):v},alpha:function(N){return arguments.length?(w=+N,_):w},alphaMin:function(N){return arguments.length?(x=+N,_):x},alphaDecay:function(N){return arguments.length?(E=+N,_):+E},alphaTarget:function(N){return arguments.length?(k=+N,_):k},velocityDecay:function(N){return arguments.length?(C=1-N,_):1-C},force:function(N,B){return arguments.length>1?(null==B?L.remove(N):L.set(N,S(B)),_):L.get(N)},find:function(N,B,H){var Y,Q,ne,ae,te,K=0,q=v.length;for(null==H?H=1/0:H*=H,K=0;K<q;++K)(ne=(Y=N-(ae=v[K]).x)*Y+(Q=B-ae.y)*Q)<H&&(te=ae,H=ne);return te},on:function(N,B){return arguments.length>1?(A.on(N,B),_):A.on(N)}}},i.forceX=function(v){var _,w,x,E=u(.1);function k(L){for(var P,A=0,I=_.length;A<I;++A)(P=_[A]).vx+=(x[A]-P.x)*w[A]*L}function C(){if(_){var L,P=_.length;for(w=new Array(P),x=new Array(P),L=0;L<P;++L)w[L]=isNaN(x[L]=+v(_[L],L,_))?0:+E(_[L],L,_)}}return"function"!=typeof v&&(v=u(null==v?0:+v)),k.initialize=function(L){_=L,C()},k.strength=function(L){return arguments.length?(E="function"==typeof L?L:u(+L),C(),k):E},k.x=function(L){return arguments.length?(v="function"==typeof L?L:u(+L),C(),k):v},k},i.forceY=function(v){var _,w,x,E=u(.1);function k(L){for(var P,A=0,I=_.length;A<I;++A)(P=_[A]).vy+=(x[A]-P.y)*w[A]*L}function C(){if(_){var L,P=_.length;for(w=new Array(P),x=new Array(P),L=0;L<P;++L)w[L]=isNaN(x[L]=+v(_[L],L,_))?0:+E(_[L],L,_)}}return"function"!=typeof v&&(v=u(null==v?0:+v)),k.initialize=function(L){_=L,C()},k.strength=function(L){return arguments.length?(E="function"==typeof L?L:u(+L),C(),k):E},k.y=function(L){return arguments.length?(v="function"==typeof L?L:u(+L),C(),k):v},k},Object.defineProperty(i,"__esModule",{value:!0})},"object"==typeof X&&void 0!==G?m(X,h("d3-quadtree"),h("d3-collection"),h("d3-dispatch"),h("d3-timer")):m(i.d3=i.d3||{},i.d3,i.d3,i.d3,i.d3)},{"d3-collection":163,"d3-dispatch":165,"d3-quadtree":173,"d3-timer":178}],167:[function(h,G,X){var i;i=this,function(i){"use strict";function m(_,w){if((x=(_=w?_.toExponential(w-1):_.toExponential()).indexOf("e"))<0)return null;var x,E=_.slice(0,x);return[E.length>1?E[0]+E.slice(2):E,+_.slice(x+1)]}function b(_){return(_=m(Math.abs(_)))?_[1]:NaN}var p,r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function u(_){if(!(w=r.exec(_)))throw new Error("invalid format: "+_);var w;return new c({fill:w[1],align:w[2],sign:w[3],symbol:w[4],zero:w[5],width:w[6],comma:w[7],precision:w[8]&&w[8].slice(1),trim:w[9],type:w[10]})}function c(_){this.fill=void 0===_.fill?" ":_.fill+"",this.align=void 0===_.align?">":_.align+"",this.sign=void 0===_.sign?"-":_.sign+"",this.symbol=void 0===_.symbol?"":_.symbol+"",this.zero=!!_.zero,this.width=void 0===_.width?void 0:+_.width,this.comma=!!_.comma,this.precision=void 0===_.precision?void 0:+_.precision,this.trim=!!_.trim,this.type=void 0===_.type?"":_.type+""}function l(_,w){var x=m(_,w);if(!x)return _+"";var E=x[0],k=x[1];return k<0?"0."+new Array(-k).join("0")+E:E.length>k+1?E.slice(0,k+1)+"."+E.slice(k+1):E+new Array(k-E.length+2).join("0")}u.prototype=c.prototype,c.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var f={"%":function(_,w){return(100*_).toFixed(w)},b:function(_){return Math.round(_).toString(2)},c:function(_){return _+""},d:function(_){return Math.abs(_=Math.round(_))>=1e21?_.toLocaleString("en").replace(/,/g,""):_.toString(10)},e:function(_,w){return _.toExponential(w)},f:function(_,w){return _.toFixed(w)},g:function(_,w){return _.toPrecision(w)},o:function(_){return Math.round(_).toString(8)},p:function(_,w){return l(100*_,w)},r:l,s:function(_,w){var x=m(_,w);if(!x)return _+"";var E=x[0],k=x[1],C=k-(p=3*Math.max(-8,Math.min(8,Math.floor(k/3))))+1,L=E.length;return C===L?E:C>L?E+new Array(C-L+1).join("0"):C>0?E.slice(0,C)+"."+E.slice(C):"0."+new Array(1-C).join("0")+m(_,Math.max(0,w+C-1))[0]},X:function(_){return Math.round(_).toString(16).toUpperCase()},x:function(_){return Math.round(_).toString(16)}};function s(_){return _}var o,d=Array.prototype.map,g=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function y(_){var w,x,S,E=void 0===_.grouping||void 0===_.thousands?s:(w=d.call(_.grouping,Number),x=_.thousands+"",function(S,N){for(var B=S.length,H=[],Y=0,Q=w[0],ne=0;B>0&&Q>0&&(ne+Q+1>N&&(Q=Math.max(1,N-ne)),H.push(S.substring(B-=Q,B+Q)),!((ne+=Q+1)>N));)Q=w[Y=(Y+1)%w.length];return H.reverse().join(x)}),k=void 0===_.currency?"":_.currency[0]+"",C=void 0===_.currency?"":_.currency[1]+"",L=void 0===_.decimal?".":_.decimal+"",P=void 0===_.numerals?s:(S=d.call(_.numerals,String),function(N){return N.replace(/[0-9]/g,function(B){return S[+B]})}),A=void 0===_.percent?"%":_.percent+"",I=void 0===_.minus?"-":_.minus+"",D=void 0===_.nan?"NaN":_.nan+"";function R(S){var N=(S=u(S)).fill,B=S.align,H=S.sign,Y=S.symbol,Q=S.zero,ne=S.width,ae=S.comma,te=S.precision,K=S.trim,q=S.type;"n"===q?(ae=!0,q="g"):f[q]||(void 0===te&&(te=12),K=!0,q="g"),(Q||"0"===N&&"="===B)&&(Q=!0,N="0",B="=");var re="$"===Y?k:"#"===Y&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",V="$"===Y?C:/[%p]/.test(q)?A:"",W=f[q],Z=/[defgprs%]/.test(q);function oe(ie){var ue,fe,he,de=re,be=V;if("c"===q)be=W(ie)+be,ie="";else{var pe=(ie=+ie)<0||1/ie<0;if(ie=isNaN(ie)?D:W(Math.abs(ie),te),K&&(ie=function(ke){e:for(var ze,je=ke.length,Ie=1,Ce=-1;Ie<je;++Ie)switch(ke[Ie]){case".":Ce=ze=Ie;break;case"0":0===Ce&&(Ce=Ie),ze=Ie;break;default:if(!+ke[Ie])break e;Ce>0&&(Ce=0)}return Ce>0?ke.slice(0,Ce)+ke.slice(ze+1):ke}(ie)),pe&&0==+ie&&"+"!==H&&(pe=!1),de=(pe?"("===H?H:I:"-"===H||"("===H?"":H)+de,be=("s"===q?g[8+p/3]:"")+be+(pe&&"("===H?")":""),Z)for(ue=-1,fe=ie.length;++ue<fe;)if(48>(he=ie.charCodeAt(ue))||he>57){be=(46===he?L+ie.slice(ue+1):ie.slice(ue))+be,ie=ie.slice(0,ue);break}}ae&&!Q&&(ie=E(ie,1/0));var Te=de.length+ie.length+be.length,ye=Te<ne?new Array(ne-Te+1).join(N):"";switch(ae&&Q&&(ie=E(ye+ie,ye.length?ne-be.length:1/0),ye=""),B){case"<":ie=de+ie+be+ye;break;case"=":ie=de+ye+ie+be;break;case"^":ie=ye.slice(0,Te=ye.length>>1)+de+ie+be+ye.slice(Te);break;default:ie=ye+de+ie+be}return P(ie)}return te=void 0===te?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,te)):Math.max(0,Math.min(20,te)),oe.toString=function(){return S+""},oe}return{format:R,formatPrefix:function(S,N){var B=R(((S=u(S)).type="f",S)),H=3*Math.max(-8,Math.min(8,Math.floor(b(N)/3))),Y=Math.pow(10,-H),Q=g[8+H/3];return function(ne){return B(Y*ne)+Q}}}}function v(_){return o=y(_),i.format=o.format,i.formatPrefix=o.formatPrefix,o}v({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),i.FormatSpecifier=c,i.formatDefaultLocale=v,i.formatLocale=y,i.formatSpecifier=u,i.precisionFixed=function(_){return Math.max(0,-b(Math.abs(_)))},i.precisionPrefix=function(_,w){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(b(w)/3)))-b(Math.abs(_)))},i.precisionRound=function(_,w){return _=Math.abs(_),w=Math.abs(w)-_,Math.max(0,b(w)-b(_))+1},Object.defineProperty(i,"__esModule",{value:!0})}("object"==typeof X&&void 0!==G?X:(i="undefined"!=typeof globalThis?globalThis:i||self).d3=i.d3||{})},{}],168:[function(h,G,X){var i,m;i=this,m=function(i,m,b){"use strict";var p=Math.abs,r=Math.atan,u=Math.atan2,c=Math.cos,l=Math.exp,f=Math.floor,s=Math.log,o=Math.max,d=Math.min,g=Math.pow,y=Math.round,v=Math.sign||function(Je){return Je>0?1:Je<0?-1:0},_=Math.sin,w=Math.tan,x=1e-6,E=Math.PI,k=E/2,C=E/4,L=Math.SQRT1_2,P=B(2),A=B(E),I=2*E,D=180/E,R=E/180;function S(Je){return Je>1?k:Je<-1?-k:Math.asin(Je)}function N(Je){return Je>1?0:Je<-1?E:Math.acos(Je)}function B(Je){return Je>0?Math.sqrt(Je):0}function H(Je){return(l(Je)-l(-Je))/2}function Y(Je){return(l(Je)+l(-Je))/2}function Q(Je){var tt=w(Je/2),ut=2*s(c(Je/2))/(tt*tt);function vt(Et,kt){var zt=c(Et),fn=c(kt),dn=_(kt),cn=fn*zt,wn=-((1-cn?s((1+cn)/2)/(1-cn):-.5)+ut/(1+cn));return[wn*fn*_(Et),wn*dn]}return vt.invert=function(Et,kt){var zt,fn=B(Et*Et+kt*kt),dn=-Je/2,cn=50;if(!fn)return[0,0];do{var wn=dn/2,En=c(wn),Fn=_(wn),zn=Fn/En,Qn=-s(p(En));dn-=zt=(2/zn*Qn-ut*zn-fn)/(-Qn/(Fn*Fn)+1-ut/(2*En*En))*(En<0?.7:1)}while(p(zt)>x&&--cn>0);var _r=_(dn);return[u(Et*_r,fn*c(dn)),S(kt*_r/fn)]},vt}function ne(Je,tt){var Et,ut=c(tt),vt=(Et=N(ut*c(Je/=2)))?Et/Math.sin(Et):1;return[2*ut*_(Je)*vt,_(tt)*vt]}function ae(Je){var tt=_(Je),ut=c(Je),vt=Je>=0?1:-1,Et=w(vt*Je),kt=(1+tt-ut)/2;function zt(fn,dn){var cn=c(dn),wn=c(fn/=2);return[(1+cn)*_(fn),(vt*dn>-u(wn,Et)-.001?0:10*-vt)+kt+_(dn)*ut-(1+cn)*tt*wn]}return zt.invert=function(fn,dn){var cn=0,wn=0,En=50;do{var Fn=c(cn),zn=_(cn),Qn=c(wn),_r=_(wn),Cr=1+Qn,Qr=Cr*zn-fn,oi=kt+_r*ut-Cr*tt*Fn-dn,yi=Cr*Fn/2,ei=-zn*_r,Qi=tt*Cr*zn/2,Ci=ut*Qn+tt*Fn*_r,La=ei*Qi-Ci*yi,Ra=(oi*ei-Qr*Ci)/La/2,Ba=(Qr*Qi-oi*yi)/La;p(Ba)>2&&(Ba/=2),cn-=Ra,wn-=Ba}while((p(Ra)>x||p(Ba)>x)&&--En>0);return vt*wn>-u(c(cn),Et)-.001?[2*cn,wn]:null},zt}function te(Je,tt){var ut=w(tt/2),vt=B(1-ut*ut),Et=1+vt*c(Je/=2),kt=_(Je)*vt/Et,zt=ut/Et,fn=kt*kt,dn=zt*zt;return[4/3*kt*(3+fn-3*dn),4/3*zt*(3+3*fn-dn)]}ne.invert=function(Je,tt){if(!(Je*Je+4*tt*tt>E*E+x)){var ut=Je,vt=tt,Et=25;do{var kt,zt=_(ut),fn=_(ut/2),dn=c(ut/2),cn=_(vt),wn=c(vt),En=_(2*vt),Fn=cn*cn,zn=wn*wn,Qn=fn*fn,_r=1-zn*dn*dn,Cr=_r?N(wn*dn)*B(kt=1/_r):kt=0,Qr=2*Cr*wn*fn-Je,oi=Cr*cn-tt,yi=kt*(zn*Qn+Cr*wn*dn*Fn),ei=kt*(.5*zt*En-2*Cr*cn*fn),Qi=.25*kt*(En*fn-Cr*cn*zn*zt),Ci=kt*(Fn*dn+Cr*Qn*wn),La=ei*Qi-Ci*yi;if(!La)break;var Ra=(oi*ei-Qr*Ci)/La,Ba=(Qr*Qi-oi*yi)/La;ut-=Ra,vt-=Ba}while((p(Ra)>x||p(Ba)>x)&&--Et>0);return[ut,vt]}},te.invert=function(Je,tt){if(tt*=3/8,!(Je*=3/8)&&p(tt)>1)return null;var cn,ut=1+Je*Je+tt*tt,vt=B((ut-B(ut*ut-4*tt*tt))/2),Et=S(vt)/3,kt=vt?(cn=p(tt/vt),s(cn+B(cn*cn-1))/3):function(cn){return s(cn+B(cn*cn+1))}(p(Je))/3,zt=c(Et),fn=Y(kt),dn=fn*fn-zt*zt;return[2*v(Je)*u(H(kt)*zt,.25-dn),2*v(tt)*u(fn*_(Et),.25+dn)]};var K=B(8),q=s(1+P);function re(Je,tt){var ut=p(tt);return ut<C?[Je,s(w(C+tt/2))]:[Je*c(ut)*(2*P-1/_(ut)),v(tt)*(2*P*(ut-C)-s(w(ut/2)))]}function V(Je){var tt=2*E/Je;function ut(vt,Et){var kt=m.geoAzimuthalEquidistantRaw(vt,Et);if(p(vt)>k){var zt=u(kt[1],kt[0]),fn=B(kt[0]*kt[0]+kt[1]*kt[1]),dn=tt*y((zt-k)/tt)+k,cn=u(_(zt-=dn),2-c(zt));zt=dn+S(E/fn*_(cn))-cn,kt[0]=fn*c(zt),kt[1]=fn*_(zt)}return kt}return ut.invert=function(vt,Et){var kt=B(vt*vt+Et*Et);if(kt>k){var zt=u(Et,vt),fn=tt*y((zt-k)/tt)+k,dn=zt>fn?-1:1,cn=kt*c(fn-zt),wn=1/w(dn*N((cn-E)/B(E*(E-2*cn)+kt*kt)));zt=fn+2*r((wn+dn*B(wn*wn-3))/3),vt=kt*c(zt),Et=kt*_(zt)}return m.geoAzimuthalEquidistantRaw.invert(vt,Et)},ut}function W(Je,tt){if(arguments.length<2&&(tt=Je),1===tt)return m.geoAzimuthalEqualAreaRaw;if(tt===1/0)return Z;function ut(vt,Et){var kt=m.geoAzimuthalEqualAreaRaw(vt/tt,Et);return kt[0]*=Je,kt}return ut.invert=function(vt,Et){var kt=m.geoAzimuthalEqualAreaRaw.invert(vt/Je,Et);return kt[0]*=tt,kt},ut}function Z(Je,tt){return[Je*c(tt)/c(tt/=2),2*_(tt)]}function oe(Je,tt,ut){var vt,Et,kt,zt=100;ut=void 0===ut?0:+ut,tt=+tt;do{(Et=Je(ut))===(kt=Je(ut+x))&&(kt=Et+x),ut-=vt=-1*x*(Et-tt)/(Et-kt)}while(zt-- >0&&p(vt)>x);return zt<0?NaN:ut}function ie(Je,tt,ut){return void 0===tt&&(tt=40),void 0===ut&&(ut=1e-12),function(vt,Et,kt,zt){var fn,dn,cn;kt=void 0===kt?0:+kt,zt=void 0===zt?0:+zt;for(var wn=0;wn<tt;wn++){var En=Je(kt,zt),Fn=En[0]-vt,zn=En[1]-Et;if(p(Fn)<ut&&p(zn)<ut)break;var Qn=Fn*Fn+zn*zn;if(Qn>fn)kt-=dn/=2,zt-=cn/=2;else{fn=Qn;var _r=(kt>0?-1:1)*ut,Cr=(zt>0?-1:1)*ut,Qr=Je(kt+_r,zt),oi=Je(kt,zt+Cr),yi=(Qr[0]-En[0])/_r,ei=(Qr[1]-En[1])/_r,Qi=(oi[0]-En[0])/Cr,Ci=(oi[1]-En[1])/Cr,La=Ci*yi-ei*Qi,Ra=(p(La)<.5?.5:1)/La;if(kt+=dn=(zn*Qi-Fn*Ci)*Ra,zt+=cn=(Fn*ei-zn*yi)*Ra,p(dn)<ut&&p(cn)<ut)break}}return[kt,zt]}}function ue(){var Je=W(1.68,2);function tt(ut,vt){if(ut+vt<-1.4){var Et=(ut-vt+1.6)*(ut+vt+1.4)/8;ut+=Et,vt-=.8*Et*_(vt+E/2)}var kt=Je(ut,vt),zt=(1-c(ut*vt))/12;return kt[1]<0&&(kt[0]*=1+zt),kt[1]>0&&(kt[1]*=1+zt/1.5*kt[0]*kt[0]),kt}return tt.invert=ie(tt),tt}function fe(Je,tt){var ut,vt=Je*_(tt),Et=30;do{tt-=ut=(tt+_(tt)-vt)/(1+c(tt))}while(p(ut)>x&&--Et>0);return tt/2}function he(Je,tt,ut){function vt(Et,kt){return[Je*Et*c(kt=fe(ut,kt)),tt*_(kt)]}return vt.invert=function(Et,kt){return kt=S(kt/tt),[Et/(Je*c(kt)),S((2*kt+_(2*kt))/ut)]},vt}re.invert=function(Je,tt){if((vt=p(tt))<q)return[Je,2*r(l(tt))-k];var ut,vt,Et=C,kt=25;do{var zt=c(Et/2),fn=w(Et/2);Et-=ut=(K*(Et-C)-s(fn)-vt)/(K-zt*zt/(2*fn))}while(p(ut)>1e-12&&--kt>0);return[Je/(c(Et)*(K-1/_(Et))),v(tt)*Et]},Z.invert=function(Je,tt){var ut=2*S(tt/2);return[Je*c(ut/2)/c(ut),ut]};var de=he(P/k,P,E),be=2.00276;function Te(Je,tt){var ut=fe(E,tt);return[be*Je/(1/c(tt)+1.11072/c(ut)),(tt+P*_(ut))/be]}function ye(Je){var tt=0,ut=m.geoProjectionMutator(Je),vt=ut(tt);return vt.parallel=function(Et){return arguments.length?ut(tt=Et*R):tt*D},vt}function ke(Je,tt){return[Je*c(tt),tt]}function ze(Je){if(!Je)return ke;var tt=1/w(Je);function ut(vt,Et){var kt=tt+Je-Et,zt=kt&&vt*c(Et)/kt;return[kt*_(zt),tt-kt*c(zt)]}return ut.invert=function(vt,Et){var kt=B(vt*vt+(Et=tt-Et)*Et),zt=tt+Je-kt;return[kt/c(zt)*u(vt,Et),zt]},ut}function je(Je){function tt(ut,vt){var Et=k-vt,kt=Et&&ut*Je*_(Et)/Et;return[Et*_(kt)/Je,k-Et*c(kt)]}return tt.invert=function(ut,vt){var Et=ut*Je,kt=k-vt,zt=B(Et*Et+kt*kt),fn=u(Et,kt);return[(zt?zt/_(zt):1)*fn/Je,k-zt]},tt}Te.invert=function(Je,tt){var ut,vt,Et=be*tt,kt=tt<0?-C:C,zt=25;do{vt=Et-P*_(kt),kt-=ut=(_(2*kt)+2*kt-E*_(vt))/(2*c(2*kt)+2+E*c(vt)*P*c(kt))}while(p(ut)>x&&--zt>0);return vt=Et-P*_(kt),[Je*(1/c(vt)+1.11072/c(kt))/be,vt]},ke.invert=function(Je,tt){return[Je/c(tt),tt]};var Ie=he(1,4/E,E);function Ce(Je,tt,ut,vt,Et,kt){var zt,fn=c(kt);if(p(Je)>1||p(kt)>1)zt=N(ut*Et+tt*vt*fn);else{var dn=_(Je/2),cn=_(kt/2);zt=2*S(B(dn*dn+tt*vt*cn*cn))}return p(zt)>x?[zt,u(vt*_(kt),tt*Et-ut*vt*fn)]:[0,0]}function _e(Je,tt,ut){return N((Je*Je+tt*tt-ut*ut)/(2*Je*tt))}function we(Je){return Je-2*E*f((Je+E)/(2*E))}function Se(Je,tt,ut){for(var vt,Et=[[Je[0],Je[1],_(Je[1]),c(Je[1])],[tt[0],tt[1],_(tt[1]),c(tt[1])],[ut[0],ut[1],_(ut[1]),c(ut[1])]],kt=Et[2],zt=0;zt<3;++zt,kt=vt)kt.v=Ce((vt=Et[zt])[1]-kt[1],kt[3],kt[2],vt[3],vt[2],vt[0]-kt[0]),kt.point=[0,0];var fn=_e(Et[0].v[0],Et[2].v[0],Et[1].v[0]),dn=_e(Et[0].v[0],Et[1].v[0],Et[2].v[0]),cn=E-fn;Et[2].point[1]=0,Et[0].point[0]=-(Et[1].point[0]=Et[0].v[0]/2);var wn=[Et[2].point[0]=Et[0].point[0]+Et[2].v[0]*c(fn),2*(Et[0].point[1]=Et[1].point[1]=Et[2].v[0]*_(fn))];return function(En,Fn){var zn,Qn=_(Fn),_r=c(Fn),Cr=new Array(3);for(zn=0;zn<3;++zn){var Qr=Et[zn];if(Cr[zn]=Ce(Fn-Qr[1],Qr[3],Qr[2],_r,Qn,En-Qr[0]),!Cr[zn][0])return Qr.point;Cr[zn][1]=we(Cr[zn][1]-Qr.v[1])}var oi=wn.slice();for(zn=0;zn<3;++zn){var ei=_e(Et[zn].v[0],Cr[zn][0],Cr[2==zn?0:zn+1][0]);Cr[zn][1]<0&&(ei=-ei),zn?1==zn?(oi[0]-=Cr[zn][0]*c(ei=dn-ei),oi[1]-=Cr[zn][0]*_(ei)):(oi[0]+=Cr[zn][0]*c(ei=cn-ei),oi[1]+=Cr[zn][0]*_(ei)):(oi[0]+=Cr[zn][0]*c(ei),oi[1]-=Cr[zn][0]*_(ei))}return oi[0]/=3,oi[1]/=3,oi}}function Oe(Je){return Je[0]*=R,Je[1]*=R,Je}function Be(Je,tt,ut){var vt=m.geoCentroid({type:"MultiPoint",coordinates:[Je,tt,ut]}),Et=[-vt[0],-vt[1]],kt=m.geoRotation(Et),zt=Se(Oe(kt(Je)),Oe(kt(tt)),Oe(kt(ut)));zt.invert=ie(zt);var fn=m.geoProjection(zt).rotate(Et),dn=fn.center;return delete fn.rotate,fn.center=function(cn){return arguments.length?dn(kt(cn)):kt.invert(dn())},fn.clipAngle(90)}function He(Je,tt){var ut=B(1-_(tt));return[2/A*Je*ut,A*(1-ut)]}function Xe(Je){var tt=w(Je);function ut(vt,Et){return[vt,(vt?vt/_(vt):1)*(_(Et)*c(vt)-tt*c(Et))]}return ut.invert=tt?function(vt,Et){vt&&(Et*=_(vt)/vt);var kt=c(vt);return[vt,2*u(B(kt*kt+tt*tt-Et*Et)-kt,tt-Et)]}:function(vt,Et){return[vt,S(vt?Et*w(vt)/vt:Et)]},ut}He.invert=function(Je,tt){var ut=(ut=tt/A-1)*ut;return[ut>0?Je*B(E/ut)/2:0,S(1-ut)]};var nt=B(3);function et(Je,tt){return[nt*Je*(2*c(2*tt/3)-1)/A,nt*A*_(tt/3)]}function qe(Je){var tt=c(Je);function ut(vt,Et){return[vt*tt,_(Et)/tt]}return ut.invert=function(vt,Et){return[vt/tt,S(Et*tt)]},ut}function Ye(Je){var tt=c(Je);function ut(vt,Et){return[vt*tt,(1+tt)*w(Et/2)]}return ut.invert=function(vt,Et){return[vt/tt,2*r(Et/(1+tt))]},ut}function ot(Je,tt){var ut=B(8/(3*E));return[ut*Je*(1-p(tt)/E),ut*tt]}function at(Je,tt){var ut=B(4-3*_(p(tt)));return[2/B(6*E)*Je*ut,v(tt)*B(2*E/3)*(2-ut)]}function ct(Je,tt){var ut=B(E*(4+E));return[2/ut*Je*(1+B(1-4*tt*tt/(E*E))),4/ut*tt]}function _t(Je,tt){var ut=(2+k)*_(tt);tt/=2;for(var vt=0,Et=1/0;vt<10&&p(Et)>x;vt++){var kt=c(tt);tt-=Et=(tt+_(tt)*(kt+2)-ut)/(2*kt*(1+kt))}return[2/B(E*(4+E))*Je*(1+c(tt)),2*B(E/(4+E))*_(tt)]}function xt(Je,tt){return[Je*(1+c(tt))/B(2+E),2*tt/B(2+E)]}function Ht(Je,tt){for(var ut=(1+k)*_(tt),vt=0,Et=1/0;vt<10&&p(Et)>x;vt++)tt-=Et=(tt+_(tt)-ut)/(1+c(tt));return ut=B(2+E),[Je*(1+c(tt))/ut,2*tt/ut]}et.invert=function(Je,tt){var ut=3*S(tt/(nt*A));return[A*Je/(nt*(2*c(2*ut/3)-1)),ut]},ot.invert=function(Je,tt){var ut=B(8/(3*E)),vt=tt/ut;return[Je/(ut*(1-p(vt)/E)),vt]},at.invert=function(Je,tt){var ut=2-p(tt)/B(2*E/3);return[Je*B(6*E)/(2*ut),v(tt)*S((4-ut*ut)/3)]},ct.invert=function(Je,tt){var ut=B(E*(4+E))/2;return[Je*ut/(1+B(1-tt*tt*(4+E)/(4*E))),tt*ut/2]},_t.invert=function(Je,tt){var ut=tt*B((4+E)/E)/2,vt=S(ut),Et=c(vt);return[Je/(2/B(E*(4+E))*(1+Et)),S((vt+ut*(Et+2))/(2+k))]},xt.invert=function(Je,tt){var ut=B(2+E),vt=tt*ut/2;return[ut*Je/(1+c(vt)),vt]},Ht.invert=function(Je,tt){var ut=1+k,vt=B(ut/2);return[2*Je*vt/(1+c(tt*=vt)),S((tt+_(tt))/ut)]};var At=3+2*P;function ht(Je,tt){var ut=_(Je/=2),vt=c(Je),Et=B(c(tt)),kt=c(tt/=2),zt=_(tt)/(kt+P*vt*Et),fn=B(2/(1+zt*zt)),dn=B((P*kt+(vt+ut)*Et)/(P*kt+(vt-ut)*Et));return[At*(fn*(dn-1/dn)-2*s(dn)),At*(fn*zt*(dn+1/dn)-2*r(zt))]}ht.invert=function(Je,tt){if(!(ut=te.invert(Je/1.2,1.065*tt)))return null;var ut,vt=ut[0],Et=ut[1],kt=20;Je/=At,tt/=At;do{var zt=vt/2,fn=Et/2,dn=_(zt),cn=c(zt),wn=_(fn),En=c(fn),Fn=c(Et),zn=B(Fn),Qn=wn/(En+P*cn*zn),_r=Qn*Qn,Cr=B(2/(1+_r)),Qr=(P*En+(cn+dn)*zn)/(P*En+(cn-dn)*zn),oi=B(Qr),yi=oi-1/oi,ei=oi+1/oi,Qi=Cr*yi-2*s(oi)-Je,Ci=Cr*Qn*ei-2*r(Qn)-tt,La=wn&&L*zn*dn*_r/wn,Ra=(P*cn*En+zn)/(2*(En+P*cn*zn)*(En+P*cn*zn)*zn),Ba=-.5*Qn*Cr*Cr*Cr,Go=Ba*La,jo=Ba*Ra,yo=(yo=2*En+P*zn*(cn-dn))*yo*oi,oo=(P*cn*En*zn+Fn)/yo,qo=-P*dn*wn/(zn*yo),co=yi*Go-2*oo/oi+Cr*(oo+oo/Qr),Hs=yi*jo-2*qo/oi+Cr*(qo+qo/Qr),Gs=Qn*ei*Go-2*La/(1+_r)+Cr*ei*La+Cr*Qn*(oo-oo/Qr),Rs=Qn*ei*jo-2*Ra/(1+_r)+Cr*ei*Ra+Cr*Qn*(qo-qo/Qr),Xs=Hs*Gs-Rs*co;if(!Xs)break;var Ma=(Ci*Hs-Qi*Rs)/Xs,Mt=(Qi*Gs-Ci*co)/Xs;vt-=Ma,Et=o(-k,d(k,Et-Mt))}while((p(Ma)>x||p(Mt)>x)&&--kt>0);return p(p(Et)-k)<x?[0,Et]:kt&&[vt,Et]};var st=c(35*R);function Bt(Je,tt){var ut=w(tt/2);return[Je*st*B(1-ut*ut),(1+st)*ut]}function gn(Je,tt){var ut=tt/2,vt=c(ut);return[2*Je/A*c(tt)*vt*vt,A*w(ut)]}function hn(Je){var tt=1-Je,ut=Et(E,0)[0]-Et(-E,0)[0],vt=B(2*(Et(0,k)[1]-Et(0,-k)[1])/ut);function Et(fn,dn){var cn=c(dn),wn=_(dn);return[cn/(tt+Je*cn)*fn,tt*dn+Je*wn]}function kt(fn,dn){var cn=Et(fn,dn);return[cn[0]*vt,cn[1]/vt]}function zt(fn){return kt(0,fn)[1]}return kt.invert=function(fn,dn){var cn=oe(zt,dn);return[fn/vt*(Je+tt/c(cn)),cn]},kt}function We(Je){return[Je[0]/2,S(w(Je[1]/2*R))*D]}function it(Je){return[2*Je[0],2*r(_(Je[1]*R))*D]}function qt(Je,tt){var ut=2*E/tt,vt=Je*Je;function Et(kt,zt){var fn=m.geoAzimuthalEquidistantRaw(kt,zt),dn=fn[0],cn=fn[1],wn=dn*dn+cn*cn;if(wn>vt){var En=B(wn),Fn=u(cn,dn),zn=ut*y(Fn/ut),Qn=Fn-zn,_r=Je*c(Qn),Cr=(Je*_(Qn)-Qn*_(_r))/(k-_r),Qr=Ge(Qn,Cr),oi=(E-Je)/Pe(Qr,_r,E);dn=En;var yi,ei=50;do{dn-=yi=(Je+Pe(Qr,_r,dn)*oi-En)/(Qr(dn)*oi)}while(p(yi)>x&&--ei>0);cn=Qn*_(dn),dn<k&&(cn-=Cr*(dn-k));var Qi=_(zn),Ci=c(zn);fn[0]=dn*Ci-cn*Qi,fn[1]=dn*Qi+cn*Ci}return fn}return Et.invert=function(kt,zt){var fn=kt*kt+zt*zt;if(fn>vt){var dn=B(fn),cn=u(zt,kt),wn=ut*y(cn/ut),En=cn-wn;kt=dn*c(En),zt=dn*_(En);for(var Fn=kt-k,zn=_(kt),Qn=zt/zn,_r=kt<k?1/0:0,Cr=10;;){var Qr=Je*_(Qn),oi=Je*c(Qn),yi=_(oi),ei=k-oi,Qi=(Qr-Qn*yi)/ei,Ci=Ge(Qn,Qi);if(p(_r)<1e-12||!--Cr)break;Qn-=_r=(Qn*zn-Qi*Fn-zt)/(zn-2*Fn*(ei*(oi+Qn*Qr*c(oi)-yi)-Qr*(Qr-Qn*yi))/(ei*ei))}kt=(dn=Je+Pe(Ci,oi,kt)*(E-Je)/Pe(Ci,oi,E))*c(cn=wn+Qn),zt=dn*_(cn)}return m.geoAzimuthalEquidistantRaw.invert(kt,zt)},Et}function Ge(Je,tt){return function(ut){var vt=Je*c(ut);return ut<k&&(vt-=tt),B(1+vt*vt)}}function Pe(Je,tt,ut){for(var vt=(ut-tt)/50,Et=Je(tt)+Je(ut),kt=1,zt=tt;kt<50;++kt)Et+=2*Je(zt+=vt);return.5*Et*vt}function Ee(Je,tt,ut,vt,Et,kt,zt,fn){function dn(cn,wn){if(!wn)return[Je*cn/E,0];var En=wn*wn,Fn=Je+En*(tt+En*(ut+En*vt)),zn=wn*(Et-1+En*(kt-fn+En*zt)),Qn=(Fn*Fn+zn*zn)/(2*zn),_r=cn*S(Fn/Qn)/E;return[Qn*_(_r),wn*(1+En*fn)+Qn*(1-c(_r))]}return arguments.length<8&&(fn=0),dn.invert=function(cn,wn){var En,Fn,zn=E*cn/Je,Qn=wn,_r=50;do{var Cr=Qn*Qn,Qr=Je+Cr*(tt+Cr*(ut+Cr*vt)),oi=Qn*(Et-1+Cr*(kt-fn+Cr*zt)),yi=Qr*Qr+oi*oi,ei=2*oi,Qi=yi/ei,Ci=Qi*Qi,La=S(Qr/Qi)/E,Ra=zn*La,Ba=Qr*Qr,Go=(2*tt+Cr*(4*ut+6*Cr*vt))*Qn,jo=Et+Cr*(3*kt+5*Cr*zt),yo=(2*(Qr*Go+oi*(jo-1))*ei-yi*(2*(jo-1)))/(ei*ei),oo=c(Ra),qo=_(Ra),co=Qi*oo,Hs=Qi*qo,Gs=zn/E*(1/B(1-Ba/Ci))*(Go*Qi-Qr*yo)/Ci,Rs=Hs-cn,Xs=Qn*(1+Cr*fn)+Qi-co-wn,Ma=yo*qo+co*Gs,Mt=co*La,Gt=1+yo-(yo*oo-Hs*Gs),Tn=Hs*La,on=Ma*Tn-Gt*Mt;if(!on)break;zn-=En=(Xs*Ma-Rs*Gt)/on,Qn-=Fn=(Rs*Tn-Xs*Mt)/on}while((p(En)>x||p(Fn)>x)&&--_r>0);return[zn,Qn]},dn}Bt.invert=function(Je,tt){var ut=tt/(1+st);return[Je&&Je/(st*B(1-ut*ut)),2*r(ut)]},gn.invert=function(Je,tt){var ut=r(tt/A),vt=c(ut),Et=2*ut;return[Je*A/2/(c(Et)*vt*vt),Et]};var Ne=Ee(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),Ve=Ee(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Ke=Ee(5/6*E,-.62636,-.0344,0,1.3493,-.05524,0,.045);function bt(Je,tt){var ut=Je*Je,vt=tt*tt;return[Je*(1-.162388*vt)*(.87-952426e-9*ut*ut),tt*(1+vt/12)]}bt.invert=function(Je,tt){var ut,vt=Je,Et=tt,kt=50;do{var zt=Et*Et;Et-=ut=(Et*(1+zt/12)-tt)/(1+zt/4)}while(p(ut)>x&&--kt>0);kt=50,Je/=1-.162388*zt;do{var fn=(fn=vt*vt)*fn;vt-=ut=(vt*(.87-952426e-9*fn)-Je)/(.87-.00476213*fn)}while(p(ut)>x&&--kt>0);return[vt,Et]};var gt=Ee(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function pt(Je){var tt=Je(k,0)[0]-Je(-k,0)[0];function ut(vt,Et){var kt=vt>0?-.5:.5,zt=Je(vt+kt*E,Et);return zt[0]-=kt*tt,zt}return Je.invert&&(ut.invert=function(vt,Et){var kt=vt>0?-.5:.5,zt=Je.invert(vt+kt*tt,Et),fn=zt[0]-kt*E;return fn<-E?fn+=2*E:fn>E&&(fn-=2*E),zt[0]=fn,zt}),ut}function St(Je,tt){var ut=v(Je),vt=v(tt),Et=c(tt),kt=c(Je)*Et,zt=_(Je)*Et,fn=_(vt*tt);Je=p(u(zt,fn)),tt=S(kt),p(Je-k)>x&&(Je%=k);var dn=function(cn,wn){if(wn===k)return[0,0];var En,Fn,zn=_(wn),Qn=zn*zn,_r=Qn*Qn,Cr=1+_r,Qr=1+3*_r,oi=1-_r,yi=S(1/B(Cr)),ei=oi+Qn*Cr*yi,Qi=(1-zn)/ei,Ci=B(Qi),La=Qi*Cr,Ra=B(La),Ba=Ci*oi;if(0===cn)return[0,-(Ba+Qn*Ra)];var Go,jo=c(wn),yo=1/jo,oo=2*zn*jo,qo=(-ei*jo-(-3*Qn+yi*Qr)*oo*(1-zn))/(ei*ei),co=-yo*oo,Hs=-yo*(Qn*Cr*qo+Qi*Qr*oo),Gs=-2*yo*(oi*(.5*qo/Ci)-2*Qn*Ci*oo),Rs=4*cn/E;if(cn>.222*E||wn<E/4&&cn>.175*E){if(En=(Ba+Qn*B(La*(1+_r)-Ba*Ba))/(1+_r),cn>E/4)return[En,En];var Xs=En,Ma=.5*En;En=.5*(Ma+Xs),Fn=50;do{var Gt=En*(Gs+co*B(La-En*En))+Hs*S(En/Ra)-Rs;if(!Gt)break;Gt<0?Ma=En:Xs=En,En=.5*(Ma+Xs)}while(p(Xs-Ma)>x&&--Fn>0)}else{En=x,Fn=25;do{var Tn=En*En,on=B(La-Tn),An=Gs+co*on,Vn=En*An+Hs*S(En/Ra)-Rs;En-=Go=on?Vn/(An+(Hs-co*Tn)/on):0}while(p(Go)>x&&--Fn>0)}return[En,-Ba-Qn*B(La-En*En)]}(Je>E/4?k-Je:Je,tt);return Je>E/4&&(fn=dn[0],dn[0]=-dn[1],dn[1]=-fn),dn[0]*=ut,dn[1]*=-vt,dn}function jt(Je,tt){var ut,vt,Et,kt,zt,fn;if(tt<x)return[(kt=_(Je))-(ut=tt*(Je-kt*(vt=c(Je)))/4)*vt,vt+ut*kt,1-tt*kt*kt/2,Je-ut];if(tt>=1-x)return ut=(1-tt)/4,Et=1/(vt=Y(Je)),[(kt=((fn=l(2*(fn=Je)))-1)/(fn+1))+ut*((zt=vt*H(Je))-Je)/(vt*vt),Et-ut*kt*Et*(zt-Je),Et+ut*kt*Et*(zt+Je),2*r(l(Je))-k+ut*(zt-Je)/vt];var dn=[1,0,0,0,0,0,0,0,0],cn=[B(tt),0,0,0,0,0,0,0,0],wn=0;for(vt=B(1-tt),zt=1;p(cn[wn]/dn[wn])>x&&wn<8;)ut=dn[wn++],cn[wn]=(ut-vt)/2,dn[wn]=(ut+vt)/2,vt=B(ut*vt),zt*=2;Et=zt*dn[wn]*Je;do{Et=(S(kt=cn[wn]*_(vt=Et)/dn[wn])+Et)/2}while(--wn);return[_(Et),kt=c(Et),kt/c(Et-vt),Et]}function Lt(Je,tt){if(!tt)return Je;if(1===tt)return s(w(Je/2+C));for(var ut=1,vt=B(1-tt),Et=B(tt),kt=0;p(Et)>x;kt++){if(Je%E){var zt=r(vt*w(Je)/ut);zt<0&&(zt+=E),Je+=zt+~~(Je/E)*E}else Je+=Je;Et=(ut+vt)/2,vt=B(ut*vt),Et=((ut=Et)-vt)/2}return Je/(g(2,kt)*ut)}function Vt(Je,tt){var cn,wn,En,Fn,zn,ut=(P-1)/(P+1),vt=B(1-ut*ut),Et=Lt(k,vt*vt),kt=s(w(E/4+p(tt)/2)),zt=l(-1*kt)/B(ut),fn=(cn=zt*c(-1*Je),Fn=(wn=zt*_(-1*Je))+1,[.5*((cn>=0?k:-k)-u(zn=1-(En=cn*cn)-wn*wn,2*cn)),-.25*s(zn*zn+4*En)+.5*s(Fn*Fn+En)]),dn=function(cn,wn,En){var Fn=p(cn),zn=H(p(wn));if(Fn){var Qn=1/_(Fn),_r=1/(w(Fn)*w(Fn)),Cr=-(_r+En*(zn*zn*Qn*Qn)-1+En),Qr=(-Cr+B(Cr*Cr-(En-1)*_r*4))/2;return[Lt(r(1/B(Qr)),En)*v(cn),Lt(r(B((Qr/_r-1)/En)),1-En)*v(wn)]}return[0,Lt(r(zn),1-En)*v(wn)]}(fn[0],fn[1],vt*vt);return[-dn[1],(tt>=0?1:-1)*(.5*Et-dn[0])]}function mt(Je){var tt=_(Je),ut=c(Je),vt=Wt(Je);function Et(kt,zt){var fn=vt(kt,zt);kt=fn[0];var dn=_(zt=fn[1]),cn=c(zt),wn=c(kt),En=N(tt*dn+ut*cn*wn),Fn=_(En),zn=p(Fn)>x?En/Fn:1;return[zn*ut*_(kt),(p(kt)>k?zn:-zn)*(tt*cn-ut*dn*wn)]}return vt.invert=Wt(-Je),Et.invert=function(kt,zt){var fn=B(kt*kt+zt*zt),dn=-_(fn),cn=c(fn),wn=fn*cn,En=-zt*dn,Fn=fn*tt,zn=B(wn*wn+En*En-Fn*Fn),Qn=u(wn*Fn+En*zn,En*Fn-wn*zn),_r=(fn>k?-1:1)*u(kt*dn,fn*c(Qn)*cn+zt*_(Qn)*dn);return vt.invert(_r,Qn)},Et}function Wt(Je){var tt=_(Je),ut=c(Je);return function(vt,Et){var kt=c(Et),zt=c(vt)*kt,fn=_(vt)*kt,dn=_(Et);return[u(fn,zt*ut-dn*tt),S(dn*ut+zt*tt)]}}St.invert=function(Je,tt){p(Je)>1&&(Je=2*v(Je)-Je),p(tt)>1&&(tt=2*v(tt)-tt);var ut=v(Je),vt=v(tt),Et=-ut*Je,kt=-vt*tt,zt=kt/Et<1,fn=function(En,Fn){for(var zn=0,Qn=1,_r=.5,Cr=50;;){var Qr=_r*_r,oi=B(_r),yi=S(1/B(1+Qr)),ei=1-Qr+_r*(1+Qr)*yi,Qi=(1-oi)/ei,Ci=B(Qi),La=Qi*(1+Qr),Ra=Ci*(1-Qr),Ba=B(La-En*En),Go=Fn+Ra+_r*Ba;if(p(Qn-zn)<1e-12||0==--Cr||0===Go)break;Go>0?zn=_r:Qn=_r,_r=.5*(zn+Qn)}if(!Cr)return null;var jo=S(oi),yo=c(jo),oo=1/yo,qo=2*oi*yo,co=(-ei*yo-(-3*_r+yi*(1+3*Qr))*qo*(1-oi))/(ei*ei);return[E/4*(En*(-2*oo*(.5*co/Ci*(1-Qr)-2*_r*Ci*qo)+-oo*qo*Ba)+-oo*(_r*(1+Qr)*co+Qi*(1+3*Qr)*qo)*S(En/B(La))),jo]}(zt?kt:Et,zt?Et:kt),dn=fn[0],cn=fn[1],wn=c(cn);return zt&&(dn=-k-dn),[ut*(u(_(dn)*wn,-_(cn))+E),vt*S(c(dn)*wn)]},Vt.invert=function(Je,tt){var ut,vt,Et,kt,zt,fn,zn,Qn,_r,dn=(P-1)/(P+1),cn=B(1-dn*dn),En=(vt=-Je,Et=cn*cn,(ut=.5*Lt(k,cn*cn)-tt)?(kt=jt(ut,Et),vt?(fn=(zt=jt(vt,1-Et))[1]*zt[1]+Et*kt[0]*kt[0]*zt[0]*zt[0],[[kt[0]*zt[2]/fn,kt[1]*kt[2]*zt[0]*zt[1]/fn],[kt[1]*zt[1]/fn,-kt[0]*kt[2]*zt[0]*zt[2]/fn],[kt[2]*zt[1]*zt[2]/fn,-Et*kt[0]*kt[1]*zt[0]/fn]]):[[kt[0],0],[kt[1],0],[kt[2],0]]):[[0,(zt=jt(vt,1-Et))[0]/zt[1]],[1/zt[1],0],[zt[2]/zt[1],0]]),Fn=[((zn=En[0])[0]*(Qn=En[1])[0]+zn[1]*Qn[1])/(_r=Qn[0]*Qn[0]+Qn[1]*Qn[1]),(zn[1]*Qn[0]-zn[0]*Qn[1])/_r];return[u(Fn[1],Fn[0])/-1,2*r(l(-.5*s(dn*Fn[0]*Fn[0]+dn*Fn[1]*Fn[1])))-k]};var Kt=S(1-1/3)*D,rn=qe(0);function Yt(Je){var tt=Kt*R,ut=He(E,tt)[0]-He(-E,tt)[0],vt=rn(0,tt)[1],Et=He(0,tt)[1],kt=A-Et,zt=I/Je,fn=4/I,dn=vt+kt*kt*4/I;function cn(wn,En){var Fn,zn=p(En);if(zn>tt){var Qn=d(Je-1,o(0,f((wn+E)/zt)));(Fn=He(wn+=E*(Je-1)/Je-Qn*zt,zn))[0]=Fn[0]*I/ut-I*(Je-1)/(2*Je)+Qn*I/Je,Fn[1]=vt+4*(Fn[1]-Et)*kt/I,En<0&&(Fn[1]=-Fn[1])}else Fn=rn(wn,En);return Fn[0]*=fn,Fn[1]/=dn,Fn}return cn.invert=function(wn,En){wn/=fn;var Fn=p(En*=dn);if(Fn>vt){var zn=d(Je-1,o(0,f((wn+E)/zt))),Qn=He.invert(wn=(wn+E*(Je-1)/Je-zn*zt)*ut/I,.25*(Fn-vt)*I/kt+Et);return Qn[0]-=E*(Je-1)/Je-zn*zt,En<0&&(Qn[1]=-Qn[1]),Qn}return rn.invert(wn,En)},cn}function Ue(Je,tt){return[Je,1&tt?90-x:Kt]}function wt(Je,tt){return[Je,1&tt?-90+x:-Kt]}function Ut(Je){return[Je[0]*(1-x),Je[1]]}function Zt(Je){var tt,ut=1+Je,vt=S(_(1/ut)),Et=2*B(E/(tt=E+4*vt*ut)),kt=.5*Et*(ut+B(Je*(2+Je))),zt=Je*Je,fn=ut*ut;function dn(cn,wn){var En,Fn,zn=1-_(wn);if(zn&&zn<2){var Qn,_r=k-wn,Cr=25;do{var Qr=_(_r),oi=c(_r),yi=vt+u(Qr,ut-oi),ei=1+fn-2*ut*oi;_r-=Qn=(_r-zt*vt-ut*Qr+ei*yi-.5*zn*tt)/(2*ut*Qr*yi)}while(p(Qn)>1e-12&&--Cr>0);En=Et*B(ei),Fn=cn*yi/E}else En=Et*(Je+zn),Fn=cn*vt/E;return[En*_(Fn),kt-En*c(Fn)]}return dn.invert=function(cn,wn){var En=cn*cn+(wn-=kt)*wn,Fn=(1+fn-En/(Et*Et))/(2*ut),zn=N(Fn),Qn=_(zn),_r=vt+u(Qn,ut-Fn);return[S(cn/B(En))*E/_r,S(1-2*(zn-zt*vt-ut*Qn+(1+fn-2*ut*Fn)*_r)/tt)]},dn}function tn(Je,tt){return tt>-.7109889596207567?((Je=de(Je,tt))[1]+=.0528035274542,Je):ke(Je,tt)}function un(Je,tt){return p(tt)>.7109889596207567?((Je=de(Je,tt))[1]-=tt>0?.0528035274542:-.0528035274542,Je):ke(Je,tt)}function vn(Je,tt,ut,vt){var Et=B(4*E/(2*ut+(1+Je-tt/2)*_(2*ut)+(Je+tt)/2*_(4*ut)+tt/2*_(6*ut))),kt=B(vt*_(ut)*B((1+Je*c(2*ut)+tt*c(4*ut))/(1+Je+tt))),zt=ut*dn(1);function fn(En){return B(1+Je*c(2*En)+tt*c(4*En))}function dn(En){var Fn=En*ut;return(2*Fn+(1+Je-tt/2)*_(2*Fn)+(Je+tt)/2*_(4*Fn)+tt/2*_(6*Fn))/ut}function cn(En){return fn(En)*_(En)}var wn=function(En,Fn){var zn=ut*oe(dn,zt*_(Fn)/ut,Fn/E);isNaN(zn)&&(zn=ut*v(Fn));var Qn=Et*fn(zn);return[Qn*kt*En/E*c(zn),Qn/kt*_(zn)]};return wn.invert=function(En,Fn){var zn=oe(cn,Fn*kt/Et);return[En*E/(c(zn)*Et*kt*fn(zn)),S(ut*dn(zn/ut)/zt)]},0===ut&&(Et=B(vt/E),(wn=function(En,Fn){return[En*Et,_(Fn)/Et]}).invert=function(En,Fn){return[En/Et,S(Fn*Et)]}),wn}function yn(Je,tt,ut){function vt(zn){return Je+(1-Je)*g(1-g(zn,tt),1/tt)}function Et(zn){return function(Je,tt,ut,vt,Et){void 0===vt&&(vt=1e-8),void 0===Et&&(Et=20);var kt=Je(tt),zt=Je(.5*(tt+ut)),fn=Je(ut);return function dn(cn,wn,En,Fn,zn,Qn,_r,Cr,Qr,oi,yi){if(yi.nanEncountered)return NaN;var ei,Qi,Ci,La,Ra,Ba,Go,jo,yo,oo;if(Qi=cn(wn+.25*(ei=En-wn)),Ci=cn(En-.25*ei),isNaN(Qi))yi.nanEncountered=!0;else{if(!isNaN(Ci))return oo=((Ba=(La=ei*(Fn+4*Qi+zn)/12)+(Ra=ei*(zn+4*Ci+Qn)/12))-_r)/15,oi>Qr?(yi.maxDepthCount++,Ba+oo):Math.abs(oo)<Cr?Ba+oo:(jo=dn(cn,wn,Go=wn+.5*ei,Fn,Qi,zn,La,.5*Cr,Qr,oi+1,yi),isNaN(jo)?(yi.nanEncountered=!0,NaN):(yo=dn(cn,Go,En,zn,Ci,Qn,Ra,.5*Cr,Qr,oi+1,yi),isNaN(yo)?(yi.nanEncountered=!0,NaN):jo+yo));yi.nanEncountered=!0}}(Je,tt,ut,kt,zt,fn,(kt+4*zt+fn)*(ut-tt)/6,vt,Et,1,{maxDepthCount:0,nanEncountered:!1})}(vt,0,zn,1e-4)}for(var kt=1/Et(1),fn=(1+1e-8)*kt,dn=[],cn=0;cn<=1e3;cn++)dn.push(Et(cn/1e3)*fn);function wn(zn){var Qn=0,_r=1e3,Cr=500;do{dn[Cr]>zn?_r=Cr:Qn=Cr,Cr=Qn+_r>>1}while(Cr>Qn);var Qr=dn[Cr+1]-dn[Cr];return Qr&&(Qr=(zn-dn[Cr+1])/Qr),(Cr+1+Qr)/1e3}var En=2*wn(1)/E*kt/ut,Fn=function(zn,Qn){var _r=wn(p(_(Qn))),Cr=vt(_r)*zn;return _r/=En,[Cr,Qn>=0?_r:-_r]};return Fn.invert=function(zn,Qn){var _r;return p(Qn*=En)<1&&(_r=v(Qn)*S(Et(p(Qn))*kt)),[zn/vt(p(Qn)),_r]},Fn}function Mn(Je,tt){return p(Je[0]-tt[0])<x&&p(Je[1]-tt[1])<x}function Pn(Je,tt){for(var ut,vt,Et,kt=-1,zt=Je.length,fn=Je[0],dn=[];++kt<zt;){vt=((ut=Je[kt])[0]-fn[0])/tt,Et=(ut[1]-fn[1])/tt;for(var cn=0;cn<tt;++cn)dn.push([fn[0]+cn*vt,fn[1]+cn*Et]);fn=ut}return dn.push(ut),dn}function sn(Je){var tt,ut,Et,kt,fn,dn=[],cn=Je[0].length;for(fn=0;fn<cn;++fn)ut=(tt=Je[0][fn])[0][0],dn.push(Pn([[ut+x,tt[0][1]+x],[ut+x,(Et=tt[1][1])-x],[(kt=tt[2][0])-x,Et-x],[kt-x,tt[2][1]+x]],30));for(fn=Je[1].length-1;fn>=0;--fn)ut=(tt=Je[1][fn])[0][0],dn.push(Pn([[(kt=tt[2][0])-x,tt[2][1]-x],[kt-x,(Et=tt[1][1])+x],[ut+x,Et+x],[ut+x,tt[0][1]-x]],30));return{type:"Polygon",coordinates:[b.merge(dn)]}}function In(Je,tt,ut){var vt,Et;function kt(dn,cn){for(var wn=cn<0?-1:1,En=tt[+(cn<0)],Fn=0,zn=En.length-1;Fn<zn&&dn>En[Fn][2][0];++Fn);var Qn=Je(dn-En[Fn][1][0],cn);return Qn[0]+=Je(En[Fn][1][0],wn*cn>wn*En[Fn][0][1]?En[Fn][0][1]:cn)[0],Qn}ut?kt.invert=ut(kt):Je.invert&&(kt.invert=function(dn,cn){for(var wn=Et[+(cn<0)],En=tt[+(cn<0)],Fn=0,zn=wn.length;Fn<zn;++Fn){var Qn=wn[Fn];if(Qn[0][0]<=dn&&dn<Qn[1][0]&&Qn[0][1]<=cn&&cn<Qn[1][1]){var _r=Je.invert(dn-Je(En[Fn][1][0],0)[0],cn);return _r[0]+=En[Fn][1][0],Mn(kt(_r[0],_r[1]),[dn,cn])?_r:null}}});var zt=m.geoProjection(kt),fn=zt.stream;return zt.stream=function(dn){var cn=zt.rotate(),wn=fn(dn),En=(zt.rotate([0,0]),fn(dn));return zt.rotate(cn),wn.sphere=function(){m.geoStream(vt,En)},wn},zt.lobes=function(dn){return arguments.length?(vt=sn(dn),tt=dn.map(function(cn){return cn.map(function(wn){return[[wn[0][0]*R,wn[0][1]*R],[wn[1][0]*R,wn[1][1]*R],[wn[2][0]*R,wn[2][1]*R]]})}),Et=tt.map(function(cn){return cn.map(function(wn){var En,Fn=Je(wn[0][0],wn[0][1])[0],zn=Je(wn[2][0],wn[2][1])[0],Qn=Je(wn[1][0],wn[0][1])[1],_r=Je(wn[1][0],wn[1][1])[1];return Qn>_r&&(En=Qn,Qn=_r,_r=En),[[Fn,Qn],[zn,_r]]})}),zt):tt.map(function(cn){return cn.map(function(wn){return[[wn[0][0]*D,wn[0][1]*D],[wn[1][0]*D,wn[1][1]*D],[wn[2][0]*D,wn[2][1]*D]]})})},null!=tt&&zt.lobes(tt),zt}tn.invert=function(Je,tt){return tt>-.7109889596207567?de.invert(Je,tt-.0528035274542):ke.invert(Je,tt)},un.invert=function(Je,tt){return p(tt)>.7109889596207567?de.invert(Je,tt+(tt>0?.0528035274542:-.0528035274542)):ke.invert(Je,tt)};var Rn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Ln=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],qn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],nr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],rr=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],gr=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function jr(Je,tt){return[3/I*Je*B(E*E/3-tt*tt),tt]}function kr(Je){function tt(ut,vt){if(p(p(vt)-k)<x)return[0,vt<0?-2:2];var Et=_(vt),kt=g((1+Et)/(1-Et),Je/2),zt=.5*(kt+1/kt)+c(ut*=Je);return[2*_(ut)/zt,(kt-1/kt)/zt]}return tt.invert=function(ut,vt){var Et=p(vt);if(p(Et-2)<x)return ut?null:[0,v(vt)*k];if(Et>2)return null;var kt=(ut/=2)*ut,zt=(vt/=2)*vt,fn=2*vt/(1+kt+zt);return fn=g((1+fn)/(1-fn),1/Je),[u(2*ut,1-kt-zt)/Je,S((fn-1)/(fn+1))]},tt}jr.invert=function(Je,tt){return[I/3*Je/B(E*E/3-tt*tt),tt]};var er=E/P;function Xr(Je,tt){return[Je*(1+B(c(tt)))/2,tt/(c(tt/2)*c(Je/6))]}function ir(Je,tt){var ut=Je*Je,vt=tt*tt;return[Je*(.975534+vt*(-.0143059*ut-.119161+-.0547009*vt)),tt*(1.00384+ut*(.0802894+-.02855*vt+199025e-9*ut)+vt*(.0998909+-.0491032*vt))]}function Bn(Je,tt){return[_(Je)/c(tt),w(tt)*c(Je)]}function mr(Je){var tt=c(Je),ut=w(C+Je/2);function vt(Et,kt){var zt=kt-Je,fn=p(zt)<x?Et*tt:p(fn=C+kt/2)<x||p(p(fn)-k)<x?0:Et*zt/s(w(fn)/ut);return[fn,zt]}return vt.invert=function(Et,kt){var zt,fn=kt+Je;return[p(kt)<x?Et/tt:p(zt=C+fn/2)<x||p(p(zt)-k)<x?0:Et*s(w(zt)/ut)/kt,fn]},vt}function zr(Je,tt){return[Je,1.25*s(w(C+.4*tt))]}function br(Je){var tt=Je.length-1;function ut(vt,Et){for(var kt,zt=c(Et),fn=2/(1+zt*c(vt)),dn=fn*zt*_(vt),cn=fn*_(Et),wn=tt,En=Je[wn],Fn=En[0],zn=En[1];--wn>=0;)Fn=(En=Je[wn])[0]+dn*(kt=Fn)-cn*zn,zn=En[1]+dn*zn+cn*kt;return[Fn=dn*(kt=Fn)-cn*zn,zn=dn*zn+cn*kt]}return ut.invert=function(vt,Et){var kt=20,zt=vt,fn=Et;do{for(var dn,cn=tt,wn=Je[cn],En=wn[0],Fn=wn[1],zn=0,Qn=0;--cn>=0;)zn=En+zt*(dn=zn)-fn*Qn,Qn=Fn+zt*Qn+fn*dn,En=(wn=Je[cn])[0]+zt*(dn=En)-fn*Fn,Fn=wn[1]+zt*Fn+fn*dn;var _r,Cr,Qr=(zn=En+zt*(dn=zn)-fn*Qn)*zn+(Qn=Fn+zt*Qn+fn*dn)*Qn;zt-=_r=((En=zt*(dn=En)-fn*Fn-vt)*zn+(Fn=zt*Fn+fn*dn-Et)*Qn)/Qr,fn-=Cr=(Fn*zn-En*Qn)/Qr}while(p(_r)+p(Cr)>1e-12&&--kt>0);if(kt){var oi=B(zt*zt+fn*fn),yi=2*r(.5*oi),ei=_(yi);return[u(zt*ei,oi*c(yi)),oi?S(fn*ei/oi):0]}},ut}Xr.invert=function(Je,tt){var ut=p(Je),vt=p(tt),Et=x,kt=k;vt<er?kt*=vt/er:Et+=6*N(er/vt);for(var zt=0;zt<25;zt++){var fn=_(kt),dn=B(c(kt)),cn=_(kt/2),wn=c(kt/2),En=_(Et/6),Fn=c(Et/6),zn=.5*Et*(1+dn)-ut,Qn=kt/(wn*Fn)-vt,_r=dn?-.25*Et*fn/dn:0,Cr=.5*(1+dn),Qr=(1+.5*kt*cn/wn)/(wn*Fn),oi=kt/wn*(En/6)/(Fn*Fn),yi=_r*oi-Qr*Cr,ei=(zn*oi-Qn*Cr)/yi,Qi=(Qn*_r-zn*Qr)/yi;if(kt-=ei,Et-=Qi,p(ei)<x&&p(Qi)<x)break}return[Je<0?-Et:Et,tt<0?-kt:kt]},ir.invert=function(Je,tt){var ut=v(Je)*E,vt=tt/2,Et=50;do{var kt=ut*ut,zt=vt*vt,fn=ut*vt,dn=ut*(.975534+zt*(-.0143059*kt-.119161+-.0547009*zt))-Je,cn=vt*(1.00384+kt*(.0802894+-.02855*zt+199025e-9*kt)+zt*(.0998909+-.0491032*zt))-tt,wn=.975534-zt*(.119161+3*kt*.0143059+.0547009*zt),En=-fn*(.238322+.2188036*zt+.0286118*kt),Fn=fn*(.1605788+7961e-7*kt+-.0571*zt),zn=1.00384+kt*(.0802894+199025e-9*kt)+zt*(3*(.0998909-.02855*kt)-.245516*zt),Qn=En*Fn-zn*wn,_r=(cn*En-dn*zn)/Qn,Cr=(dn*Fn-cn*wn)/Qn;ut-=_r,vt-=Cr}while((p(_r)>x||p(Cr)>x)&&--Et>0);return Et&&[ut,vt]},Bn.invert=function(Je,tt){var ut=Je*Je,vt=tt*tt+1,Et=ut+vt,kt=Je?L*B((Et-B(Et*Et-4*ut))/ut):1/B(vt);return[S(Je*kt),v(tt)*N(kt)]},zr.invert=function(Je,tt){return[Je,2.5*r(l(.8*tt))-.625*E]};var Dr=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],di=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],ni=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],pi=[[.9245,0],[0,0],[.01943,0]],qi=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Ct(Je,tt){var ut=m.geoProjection(br(Je)).rotate(tt).clipAngle(90),vt=m.geoRotation(tt),Et=ut.center;return delete ut.rotate,ut.center=function(kt){return arguments.length?Et(vt(kt)):vt.invert(Et())},ut}var mn=B(6),pn=B(7);function Sn(Je,tt){var ut=S(7*_(tt)/(3*mn));return[mn*Je*(2*c(2*ut/3)-1)/pn,9*_(ut/3)/pn]}function Zn(Je,tt){for(var ut,vt=(1+L)*_(tt),Et=tt,kt=0;kt<25&&(Et-=ut=(_(Et/2)+_(Et)-vt)/(.5*c(Et/2)+c(Et)),!(p(ut)<x));kt++);return[Je*(1+2*c(Et)/c(Et/2))/(3*P),2*B(3)*_(Et/2)/B(2+P)]}function fr(Je,tt){for(var ut,vt=B(6/(4+E)),Et=(1+E/4)*_(tt),kt=tt/2,zt=0;zt<25&&(kt-=ut=(kt/2+_(kt)-Et)/(.5+c(kt)),!(p(ut)<x));zt++);return[vt*(.5+c(kt))*Je/1.5,vt*kt]}function Hn(Je,tt){var ut=tt*tt,vt=ut*ut,Et=ut*vt;return[Je*(.84719-.13063*ut+Et*Et*(.05494*ut-.04515-.02326*vt+.00331*Et)),tt*(1.01183+vt*vt*(.01926*ut-.02625-.00396*vt))]}function Dn(Je,tt){return[Je*(1+c(tt))/2,2*(tt-w(tt/2))]}Sn.invert=function(Je,tt){var ut=3*S(tt*pn/9);return[Je*pn/(mn*(2*c(2*ut/3)-1)),S(3*_(ut)*mn/7)]},Zn.invert=function(Je,tt){var ut=tt*B(2+P)/(2*B(3)),vt=2*S(ut);return[3*P*Je/(1+2*c(vt)/c(vt/2)),S((ut+_(vt))/(1+L))]},fr.invert=function(Je,tt){var ut=B(6/(4+E)),vt=tt/ut;return p(p(vt)-k)<x&&(vt=vt<0?-k:k),[1.5*Je/(ut*(.5+c(vt))),S((vt/2+_(vt))/(1+E/4))]},Hn.invert=function(Je,tt){var ut,vt,Et,kt,zt=tt,fn=25;do{zt-=ut=(zt*(1.01183+(Et=(vt=zt*zt)*vt)*Et*(.01926*vt-.02625-.00396*Et))-tt)/(1.01183+Et*Et*(.21186*vt-.23625+-.05148*Et))}while(p(ut)>1e-12&&--fn>0);return[Je/(.84719-.13063*(vt=zt*zt)+(kt=vt*(Et=vt*vt))*kt*(.05494*vt-.04515-.02326*Et+.00331*kt)),zt]},Dn.invert=function(Je,tt){for(var ut=tt/2,vt=0,Et=1/0;vt<10&&p(Et)>x;++vt){var kt=c(tt/2);tt-=Et=(tt-w(tt/2)-ut)/(1-.5/(kt*kt))}return[2*Je/(1+c(tt)),tt]};var Jn=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Nn(Je,tt){var ut=_(tt),vt=c(tt),Et=v(Je);if(0===Je||p(tt)===k)return[0,tt];if(0===tt)return[Je,0];if(p(Je)===k)return[Je*vt,k*ut];var kt=E/(2*Je)-2*Je/E,zt=2*tt/E,fn=(1-zt*zt)/(ut-zt),dn=kt*kt,cn=fn*fn,wn=1+dn/cn,En=1+cn/dn,Fn=(kt*ut/fn-kt/2)/wn,zn=(cn*ut/dn+fn/2)/En,Qn=zn*zn-(cn*ut*ut/dn+fn*ut-1)/En;return[k*(Fn+B(Fn*Fn+vt*vt/wn)*Et),k*(zn+B(Qn<0?0:Qn)*v(-tt*kt)*Et)]}function Un(Je,tt){var ut=tt*tt;return[Je,tt*(1.0148+ut*ut*(.23185+ut*(.02406*ut-.14499)))]}function sr(Je,tt){if(p(tt)<x)return[Je,0];var ut=w(tt),vt=Je*_(tt);return[_(vt)/ut,tt+(1-c(vt))/ut]}function Vr(Je,tt){return[Je[0]*tt[0]+Je[1]*tt[3],Je[0]*tt[1]+Je[1]*tt[4],Je[0]*tt[2]+Je[1]*tt[5]+Je[2],Je[3]*tt[0]+Je[4]*tt[3],Je[3]*tt[1]+Je[4]*tt[4],Je[3]*tt[2]+Je[4]*tt[5]+Je[5]]}function Zr(Je,tt){return[Je[0]-tt[0],Je[1]-tt[1]]}function Or(Je){return B(Je[0]*Je[0]+Je[1]*Je[1])}function $r(Je,tt,ut){function vt(zt,fn){var dn,cn=tt(zt,fn),wn=cn.project([zt*D,fn*D]);return(dn=cn.transform)?[dn[0]*wn[0]+dn[1]*wn[1]+dn[2],-(dn[3]*wn[0]+dn[4]*wn[1]+dn[5])]:(wn[1]=-wn[1],wn)}(function zt(fn,dn){if(fn.edges=function(Qn){for(var _r=Qn.length,Cr=[],Qr=Qn[_r-1],oi=0;oi<_r;++oi)Cr.push([Qr,Qr=Qn[oi]]);return Cr}(fn.face),dn.face){var cn=fn.shared=function(Qn,_r){for(var Cr,Qr,oi=Qn.length,yi=null,ei=0;ei<oi;++ei){Cr=Qn[ei];for(var Qi=_r.length;--Qi>=0;)if(Cr[0]===(Qr=_r[Qi])[0]&&Cr[1]===Qr[1]){if(yi)return[yi,Cr];yi=Cr}}}(fn.face,dn.face),wn=function(Je,tt){var zt,fn,ut=Zr(Je[1],Je[0]),vt=Zr(tt[1],tt[0]),Et=u((zt=ut)[0]*(fn=vt)[1]-zt[1]*fn[0],zt[0]*fn[0]+zt[1]*fn[1]),kt=Or(ut)/Or(vt);return Vr([1,0,Je[0][0],0,1,Je[0][1]],Vr([kt,0,0,0,kt,0],Vr([c(Et),_(Et),0,-_(Et),c(Et),0],[1,0,-tt[0][0],0,1,-tt[0][1]])))}(cn.map(dn.project),cn.map(fn.project));fn.transform=dn.transform?Vr(dn.transform,wn):wn;for(var En=dn.edges,Fn=0,zn=En.length;Fn<zn;++Fn)Ji(cn[0],En[Fn][1])&&Ji(cn[1],En[Fn][0])&&(En[Fn]=fn),Ji(cn[0],En[Fn][0])&&Ji(cn[1],En[Fn][1])&&(En[Fn]=fn);for(Fn=0,zn=(En=fn.edges).length;Fn<zn;++Fn)Ji(cn[0],En[Fn][0])&&Ji(cn[1],En[Fn][1])&&(En[Fn]=dn),Ji(cn[0],En[Fn][1])&&Ji(cn[1],En[Fn][0])&&(En[Fn]=dn)}else fn.transform=dn.transform;return fn.children&&fn.children.forEach(function(Qn){zt(Qn,fn)}),fn})(Je,{transform:null}),Bi(Je)&&(vt.invert=function(zt,fn){var dn=function cn(wn,En){var yi,ei,Fn=wn.project.invert,zn=wn.transform,Qn=En;if(zn&&(Qn=[(zn=[(ei=1/((yi=zn)[0]*yi[4]-yi[1]*yi[3]))*yi[4],-ei*yi[1],ei*(yi[1]*yi[5]-yi[2]*yi[4]),-ei*yi[3],ei*yi[0],ei*(yi[2]*yi[3]-yi[0]*yi[5])])[0]*Qn[0]+zn[1]*Qn[1]+zn[2],zn[3]*Qn[0]+zn[4]*Qn[1]+zn[5]]),Fn&&wn===function(yi){return tt(yi[0]*R,yi[1]*R)}(_r=Fn(Qn)))return _r;for(var _r,Cr=wn.children,Qr=0,oi=Cr&&Cr.length;Qr<oi;++Qr)if(_r=cn(Cr[Qr],En))return _r}(Je,[zt,-fn]);return dn&&(dn[0]*=R,dn[1]*=R,dn)});var Et=m.geoProjection(vt),kt=Et.stream;return Et.stream=function(zt){var fn=Et.rotate(),dn=kt(zt),cn=(Et.rotate([0,0]),kt(zt));return Et.rotate(fn),dn.sphere=function(){cn.polygonStart(),cn.lineStart(),function wn(En,Fn,zn){var Qn,_r,Cr=Fn.edges,Qr=Cr.length,oi={type:"MultiPoint",coordinates:Fn.face},yi=Fn.face.filter(function(Go){return 90!==p(Go[1])}),ei=m.geoBounds({type:"MultiPoint",coordinates:yi}),Qi=!1,Ci=-1,La=ei[1][0]-ei[0][0],Ra=180===La||360===La?[(ei[0][0]+ei[1][0])/2,(ei[0][1]+ei[1][1])/2]:m.geoCentroid(oi);if(zn)for(;++Ci<Qr&&Cr[Ci]!==zn;);++Ci;for(var Ba=0;Ba<Qr;++Ba)_r=Cr[(Ba+Ci)%Qr],Array.isArray(_r)?(Qi||(En.point((Qn=m.geoInterpolate(_r[0],Ra)(x))[0],Qn[1]),Qi=!0),En.point((Qn=m.geoInterpolate(_r[1],Ra)(x))[0],Qn[1])):(Qi=!1,_r!==zn&&wn(En,_r,Fn))}(cn,Je),cn.lineEnd(),cn.polygonEnd()},dn},Et.angle(null==ut?-30:ut*D)}function Ji(Je,tt){return Je&&tt&&Je[0]===tt[0]&&Je[1]===tt[1]}function Bi(Je){return Je.project.invert||Je.children&&Je.children.some(Bi)}Nn.invert=function(Je,tt){var ut=(Je/=k)*Je,vt=ut+(tt/=k)*tt,Et=E*E;return[Je?(vt-1+B((1-vt)*(1-vt)+4*ut))/(2*Je)*k:0,oe(function(kt){return vt*(E*_(kt)-2*kt)*E+4*kt*kt*(tt-_(kt))+2*E*kt-Et*tt},0)]},Un.invert=function(Je,tt){tt>1.790857183?tt=1.790857183:tt<-1.790857183&&(tt=-1.790857183);var ut,vt=tt;do{var Et=vt*vt;vt-=ut=(vt*(1.0148+Et*Et*(.23185+Et*(.02406*Et-.14499)))-tt)/(1.0148+Et*Et*(5*.23185+Et*(.21654*Et-1.01493)))}while(p(ut)>x);return[Je,vt]},sr.invert=function(Je,tt){if(p(tt)<x)return[Je,0];var ut,vt=Je*Je+tt*tt,Et=.5*tt,kt=10;do{var zt=w(Et),fn=1/c(Et),dn=vt-2*tt*Et+Et*Et;Et-=ut=(zt*dn+2*(Et-tt))/(2+dn*fn*fn+2*(Et-tt)*zt)}while(p(ut)>x&&--kt>0);return zt=w(Et),[(p(tt)<p(Et+1/zt)?S(Je*zt):v(tt)*v(Je)*(N(p(Je*zt))+k))/_(Et),Et]};var ci=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Ai=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Je){return Je.map(function(tt){return ci[tt]})}),wi=2/B(3);function Ri(Je,tt){var ut=He(Je,tt);return[ut[0]*wi,ut[1]]}function Lr(Je,tt){for(var ut=0,vt=Je.length,Et=0;ut<vt;++ut)Et+=Je[ut]*tt[ut];return Et}function vr(Je){return[u(Je[1],Je[0])*D,S(o(-1,d(1,Je[2])))*D]}function Fi(Je){var tt=Je[0]*R,ut=Je[1]*R,vt=c(ut);return[vt*c(tt),vt*_(tt),_(ut)]}function ga(){}function Do(Je,tt){return{type:"FeatureCollection",features:Je.features.map(function(ut){return Ha(ut,tt)})}}function Ha(Je,tt){return{type:"Feature",id:Je.id,properties:Je.properties,geometry:Xa(Je.geometry,tt)}}function Xa(Je,tt){if(!Je)return null;if("GeometryCollection"===Je.type)return Et=tt,{type:"GeometryCollection",geometries:Je.geometries.map(function(kt){return Xa(kt,Et)})};var Et,ut;switch(Je.type){case"Point":case"MultiPoint":ut=Ti;break;case"LineString":case"MultiLineString":ut=pa;break;case"Polygon":case"MultiPolygon":case"Sphere":ut=Qa;break;default:return null}return m.geoStream(Je,tt(ut)),ut.result()}Ri.invert=function(Je,tt){return He.invert(Je/wi,tt)};var _a=[],ya=[],Ti={point:function(Je,tt){_a.push([Je,tt])},result:function(){var Je=_a.length?_a.length<2?{type:"Point",coordinates:_a[0]}:{type:"MultiPoint",coordinates:_a}:null;return _a=[],Je}},pa={lineStart:ga,point:function(Je,tt){_a.push([Je,tt])},lineEnd:function(){_a.length&&(ya.push(_a),_a=[])},result:function(){var Je=ya.length?ya.length<2?{type:"LineString",coordinates:ya[0]}:{type:"MultiLineString",coordinates:ya}:null;return ya=[],Je}},Qa={polygonStart:ga,lineStart:ga,point:function(Je,tt){_a.push([Je,tt])},lineEnd:function(){var Je=_a.length;if(Je){do{_a.push(_a[0].slice())}while(++Je<4);ya.push(_a),_a=[]}},polygonEnd:ga,result:function(){if(!ya.length)return null;var Je=[],tt=[];return ya.forEach(function(ut){!function(vt){if((Et=vt.length)<4)return!1;for(var Et,kt=0,zt=vt[Et-1][1]*vt[0][0]-vt[Et-1][0]*vt[0][1];++kt<Et;)zt+=vt[kt-1][1]*vt[kt][0]-vt[kt-1][0]*vt[kt][1];return zt<=0}(ut)?tt.push(ut):Je.push([ut])}),tt.forEach(function(ut){var vt=ut[0];Je.some(function(Et){if(function(kt,zt){for(var fn=zt[0],dn=zt[1],cn=!1,wn=0,En=kt.length,Fn=En-1;wn<En;Fn=wn++){var zn=kt[wn],Qn=zn[0],_r=zn[1],Cr=kt[Fn],oi=Cr[1];_r>dn^oi>dn&&fn<(Cr[0]-Qn)*(dn-_r)/(oi-_r)+Qn&&(cn=!cn)}return cn}(Et[0],vt))return Et.push(ut),!0})||Je.push([ut])}),ya=[],Je.length?Je.length>1?{type:"MultiPolygon",coordinates:Je}:{type:"Polygon",coordinates:Je[0]}:null}};function go(Je){var tt=Je(k,0)[0]-Je(-k,0)[0];function ut(vt,Et){var kt=p(vt)<k,zt=Je(kt?vt:vt>0?vt-E:vt+E,Et),fn=(zt[0]-zt[1])*L,dn=(zt[0]+zt[1])*L;if(kt)return[fn,dn];var cn=tt*L,wn=fn>0^dn>0?-1:1;return[wn*fn-v(dn)*cn,wn*dn-v(fn)*cn]}return Je.invert&&(ut.invert=function(vt,Et){var kt=(vt+Et)*L,zt=(Et-vt)*L,fn=p(kt)<.5*tt&&p(zt)<.5*tt;if(!fn){var dn=tt*L,cn=kt>0^zt>0?-1:1,wn=-cn*vt+(zt>0?1:-1)*dn,En=-cn*Et+(kt>0?1:-1)*dn;kt=(-wn-En)*L,zt=(wn-En)*L}var Fn=Je.invert(kt,zt);return fn||(Fn[0]+=kt>0?E:-E),Fn}),m.geoProjection(ut).rotate([-90,-90,45]).clipAngle(179.999)}function ts(){return go(Vt).scale(111.48)}function Eo(Je){var tt=_(Je);function ut(vt,Et){var kt=tt?w(vt*tt/2)/tt:vt/2;if(!Et)return[2*kt,-Je];var zt=2*r(kt*_(Et)),fn=1/w(Et);return[_(zt)*fn,Et+(1-c(zt))*fn-Je]}return ut.invert=function(vt,Et){if(p(Et+=Je)<x)return[tt?2*r(tt*vt/2)/tt:vt,0];var kt,zt=vt*vt+Et*Et,fn=0,dn=10;do{var cn=w(fn),wn=1/c(fn),En=zt-2*Et*fn+fn*fn;fn-=kt=(cn*En+2*(fn-Et))/(2+En*wn*wn+2*(fn-Et)*cn)}while(p(kt)>x&&--dn>0);var Fn=vt*(cn=w(fn)),zn=w(p(Et)<p(fn+1/cn)?.5*S(Fn):.5*N(Fn)+E/4)/_(fn);return[tt?2*r(tt*zn)/tt:2*zn,fn]},ut}var Pa=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function eo(Je,tt){var ut,vt=d(18,36*p(tt)/E),Et=f(vt),kt=vt-Et,zt=(ut=Pa[Et])[0],fn=ut[1],dn=(ut=Pa[++Et])[0],cn=ut[1],wn=(ut=Pa[d(19,++Et)])[0],En=ut[1];return[Je*(dn+kt*(wn-zt)/2+kt*kt*(wn-2*dn+zt)/2),(tt>0?k:-k)*(cn+kt*(En-fn)/2+kt*kt*(En-2*cn+fn)/2)]}function Ss(Je,tt){var ut=function(zt){function fn(dn,cn){var wn=c(cn),En=(zt-1)/(zt-wn*c(dn));return[En*wn*_(dn),En*_(cn)]}return fn.invert=function(dn,cn){var wn=dn*dn+cn*cn,En=B(wn),Fn=(zt-B(1-wn*(zt+1)/(zt-1)))/((zt-1)/En+En/(zt-1));return[u(dn*Fn,En*B(1-Fn*Fn)),En?S(cn*Fn/En):0]},fn}(Je);if(!tt)return ut;var vt=c(tt),Et=_(tt);function kt(zt,fn){var dn=ut(zt,fn),cn=dn[1],wn=cn*Et/(Je-1)+vt;return[dn[0]*vt/wn,cn/wn]}return kt.invert=function(zt,fn){var dn=(Je-1)/(Je-1-fn*Et);return ut.invert(dn*zt,dn*fn*vt)},kt}Pa.forEach(function(Je){Je[1]*=1.0144}),eo.invert=function(Je,tt){var ut=tt/k,vt=90*ut,Et=d(18,p(vt/5)),kt=o(0,f(Et));do{var zt=Pa[kt][1],fn=Pa[kt+1][1],dn=Pa[d(19,kt+2)][1],cn=dn-zt,wn=dn-2*fn+zt,En=2*(p(ut)-fn)/cn,Fn=wn/cn,zn=En*(1-Fn*En*(1-2*Fn*En));if(zn>=0||1===kt){vt=(tt>=0?5:-5)*(zn+Et);var Qn,_r=50;do{zn=(Et=d(18,p(vt)/5))-(kt=f(Et)),zt=Pa[kt][1],fn=Pa[kt+1][1],dn=Pa[d(19,kt+2)][1],vt-=(Qn=(tt>=0?k:-k)*(fn+zn*(dn-zt)/2+zn*zn*(dn-2*fn+zt)/2)-tt)*D}while(p(Qn)>1e-12&&--_r>0);break}}while(--kt>=0);var Cr=Pa[kt][0],Qr=Pa[kt+1][0],oi=Pa[d(19,kt+2)][0];return[Je/(Qr+zn*(oi-Cr)/2+zn*zn*(oi-2*Qr+Cr)/2),vt*R]};var Co=-179.9999,ra=179.9999,Us=-89.9999;function Is(Je){return Je.length>0}function hs(Je){return-90===Je||90===Je?[0,Je]:[-180,(tt=Je,Math.floor(1e4*tt)/1e4)];var tt}function mo(Je){var tt=Je[0],ut=Je[1],vt=!1;return tt<=Co?(tt=-180,vt=!0):tt>=ra&&(tt=180,vt=!0),ut<=Us?(ut=-90,vt=!0):ut>=89.9999&&(ut=90,vt=!0),vt?[tt,ut]:Je}function uo(Je){return Je.map(mo)}function nu(Je,tt,ut){for(var vt=0,Et=Je.length;vt<Et;++vt){var kt=Je[vt].slice();ut.push({index:-1,polygon:tt,ring:kt});for(var zt=0,fn=kt.length;zt<fn;++zt){var dn=kt[zt],cn=dn[0],wn=dn[1];if(cn<=Co||cn>=ra||wn<=Us||wn>=89.9999){kt[zt]=mo(dn);for(var En=zt+1;En<fn;++En){var Fn=kt[En],zn=Fn[0],Qn=Fn[1];if(zn>Co&&zn<ra&&Qn>Us&&Qn<89.9999)break}if(En===zt+1)continue;if(zt){var _r={index:-1,polygon:tt,ring:kt.slice(0,zt+1)};_r.ring[_r.ring.length-1]=hs(wn),ut[ut.length-1]=_r}else ut.pop();if(En>=fn)break;ut.push({index:-1,polygon:tt,ring:kt=kt.slice(En-1)}),kt[0]=hs(kt[0][1]),zt=-1,fn=kt.length}}}}function ru(Je){var tt,ut,vt,Et,kt,zt,fn=Je.length,dn={},cn={};for(tt=0;tt<fn;++tt)(vt=(ut=Je[tt]).ring[0])[0]!==(kt=ut.ring[ut.ring.length-1])[0]||vt[1]!==kt[1]?(ut.index=tt,dn[vt]=cn[kt]=ut):(ut.polygon.push(ut.ring),Je[tt]=null);for(tt=0;tt<fn;++tt)if(ut=Je[tt]){if(Et=cn[vt=ut.ring[0]],zt=dn[kt=ut.ring[ut.ring.length-1]],delete dn[vt],delete cn[kt],vt[0]===kt[0]&&vt[1]===kt[1]){ut.polygon.push(ut.ring);continue}Et?(delete cn[vt],delete dn[Et.ring[0]],Et.ring.pop(),Je[Et.index]=null,ut={index:-1,polygon:Et.polygon,ring:Et.ring.concat(ut.ring)},Et===zt?ut.polygon.push(ut.ring):(ut.index=fn++,Je.push(dn[ut.ring[0]]=cn[ut.ring[ut.ring.length-1]]=ut))):zt?(delete dn[kt],delete cn[zt.ring[zt.ring.length-1]],ut.ring.pop(),ut={index:fn++,polygon:zt.polygon,ring:ut.ring.concat(zt.ring)},Je[zt.index]=null,Je.push(dn[ut.ring[0]]=cn[ut.ring[ut.ring.length-1]]=ut)):(ut.ring.push(ut.ring[0]),ut.polygon.push(ut.ring))}}function xa(Je){var tt={type:"Feature",geometry:ao(Je.geometry)};return null!=Je.id&&(tt.id=Je.id),null!=Je.bbox&&(tt.bbox=Je.bbox),null!=Je.properties&&(tt.properties=Je.properties),tt}function ao(Je){if(null==Je)return Je;var tt,ut,vt,Et;switch(Je.type){case"GeometryCollection":tt={type:"GeometryCollection",geometries:Je.geometries.map(ao)};break;case"Point":tt={type:"Point",coordinates:mo(Je.coordinates)};break;case"MultiPoint":case"LineString":tt={type:Je.type,coordinates:uo(Je.coordinates)};break;case"MultiLineString":tt={type:"MultiLineString",coordinates:Je.coordinates.map(uo)};break;case"Polygon":var kt=[];nu(Je.coordinates,kt,ut=[]),ru(ut),tt={type:"Polygon",coordinates:kt};break;case"MultiPolygon":ut=[],vt=-1,Et=Je.coordinates.length;for(var zt=new Array(Et);++vt<Et;)nu(Je.coordinates[vt],zt[vt]=[],ut);ru(ut),tt={type:"MultiPolygon",coordinates:zt.filter(Is)};break;default:return Je}return null!=Je.bbox&&(tt.bbox=Je.bbox),tt}function gu(Je,tt){var ut=w(tt/2),vt=_(C*ut);return[Je*(.74482-.34588*vt*vt),1.70711*ut]}function xc(Je,tt,ut){var vt=m.geoInterpolate(tt,ut),Et=vt(.5),kt=m.geoRotation([-Et[0],-Et[1]])(tt),zt=vt.distance/2,fn=-S(_(kt[1]*R)/_(zt)),dn=[-Et[0],-Et[1],-(kt[0]>0?E-fn:fn)*D],cn=m.geoProjection(Je(zt)).rotate(dn),wn=m.geoRotation(dn),En=cn.center;return delete cn.rotate,cn.center=function(Fn){return arguments.length?En(wn(Fn)):wn.invert(En())},cn.clipAngle(90)}function Lu(Je){var tt=c(Je);function ut(vt,Et){var kt=m.geoGnomonicRaw(vt,Et);return kt[0]*=tt,kt}return ut.invert=function(vt,Et){return m.geoGnomonicRaw.invert(vt/tt,Et)},ut}function Ru(Je,tt){return xc(Lu,Je,tt)}function mu(Je){if(!(Je*=2))return m.geoAzimuthalEquidistantRaw;var tt=-Je/2,ut=-tt,vt=Je*Je,Et=w(ut),kt=.5/_(ut);function zt(fn,dn){var cn=N(c(dn)*c(fn-tt)),wn=N(c(dn)*c(fn-ut));return[((cn*=cn)-(wn*=wn))/(2*Je),(dn<0?-1:1)*B(4*vt*wn-(vt-cn+wn)*(vt-cn+wn))/(2*Je)]}return zt.invert=function(fn,dn){var cn,wn,En=dn*dn,Fn=c(B(En+(cn=fn+tt)*cn)),zn=c(B(En+(cn=fn+ut)*cn));return[u(wn=Fn-zn,cn=(Fn+zn)*Et),(dn<0?-1:1)*N(B(cn*cn+wn*wn)*kt)]},zt}function sl(Je,tt){return xc(mu,Je,tt)}function Ps(Je,tt){if(p(tt)<x)return[Je,0];var ut=p(tt/k),vt=S(ut);if(p(Je)<x||p(p(tt)-k)<x)return[0,v(tt)*E*w(vt/2)];var Et=c(vt),kt=p(E/Je-Je/E)/2,zt=kt*kt,fn=Et/(ut+Et-1),dn=fn*(2/ut-1),cn=dn*dn,wn=cn+zt,En=fn-cn,Fn=zt+fn;return[v(Je)*E*(kt*En+B(zt*En*En-wn*(fn*fn-cn)))/wn,v(tt)*E*(dn*Fn-kt*B((zt+1)*wn-Fn*Fn))/wn]}function Fo(Je,tt){if(p(tt)<x)return[Je,0];var ut=p(tt/k),vt=S(ut);if(p(Je)<x||p(p(tt)-k)<x)return[0,v(tt)*E*w(vt/2)];var Et=c(vt),kt=p(E/Je-Je/E)/2,zt=kt*kt,fn=Et*(B(1+zt)-kt*Et)/(1+zt*ut*ut);return[v(Je)*E*fn,v(tt)*E*B(1-fn*(2*kt+fn))]}function Gl(Je,tt){if(p(tt)<x)return[Je,0];var ut=tt/k,vt=S(ut);if(p(Je)<x||p(p(tt)-k)<x)return[0,E*w(vt/2)];var Et=(E/Je-Je/E)/2,kt=ut/(1+c(vt));return[E*(v(Je)*B(Et*Et+1-kt*kt)-Et),E*kt]}function Ds(Je,tt){if(!tt)return[Je,0];var ut=p(tt);if(!Je||ut===k)return[0,tt];var vt=ut/k,Et=vt*vt,kt=(8*vt-Et*(Et+2)-5)/(2*Et*(vt-1)),zt=kt*kt,fn=vt*kt,dn=Et+zt+2*fn,cn=vt+3*kt,wn=Je/k,En=wn+1/wn,Fn=v(p(Je)-k)*B(En*En-4),zn=Fn*Fn,Qn=(Fn*(dn+zt-1)+2*B(dn*(Et+zt*zn-1)+(1-Et)*(Et*(cn*cn+4*zt)+12*fn*zt+4*zt*zt)))/(4*dn+zn);return[v(Je)*k*Qn,v(tt)*k*B(1+Fn*p(Qn)-Qn*Qn)]}function Os(Je,tt,ut,vt){var Et=E/3;Je=o(Je,x),tt=o(tt,x),Je=d(Je,k),tt=d(tt,E-x),ut=o(ut,0),ut=d(ut,100-x);var kt=(vt=o(vt,x))/100,zt=N((ut/100+1)*c(Et))/Et,fn=_(Je)/_(zt*k),dn=tt/E,cn=B(kt*_(Je/2)/_(tt/2));return function(wn,En,Fn,zn,Qn){function _r(Cr,Qr){var oi=Fn*_(zn*Qr),yi=B(1-oi*oi),ei=B(2/(1+yi*c(Cr*=Qn)));return[wn*yi*ei*_(Cr),En*oi*ei]}return _r.invert=function(Cr,Qr){var oi=Cr/wn,yi=Qr/En,ei=B(oi*oi+yi*yi),Qi=2*S(ei/2);return[u(Cr*w(Qi),wn*ei)/Qn,ei&&S(Qr*_(Qi)/(En*Fn*ei))/zn]},_r}(cn/B(dn*fn*zt),1/(cn*B(dn*fn*zt)),fn,zt,dn)}function Zs(){var Je=65*R,tt=60*R,ut=20,vt=200,Et=m.geoProjectionMutator(Os),kt=Et(Je,tt,ut,vt);return kt.poleline=function(zt){return arguments.length?Et(Je=+zt*R,tt,ut,vt):Je*D},kt.parallels=function(zt){return arguments.length?Et(Je,tt=+zt*R,ut,vt):tt*D},kt.inflation=function(zt){return arguments.length?Et(Je,tt,ut=+zt,vt):ut},kt.ratio=function(zt){return arguments.length?Et(Je,tt,ut,vt=+zt):vt},kt.scale(163.775)}gu.invert=function(Je,tt){var ut=tt/1.70711,vt=_(C*ut);return[Je/(.74482-.34588*vt*vt),2*r(ut)]},Ps.invert=function(Je,tt){if(p(tt)<x)return[Je,0];if(p(Je)<x)return[0,k*_(2*r(tt/E))];var ut=(Je/=E)*Je,vt=(tt/=E)*tt,Et=ut+vt,kt=Et*Et,zt=-p(tt)*(1+Et),fn=zt-2*vt+ut,dn=-2*zt+1+2*vt+kt,cn=vt/dn+(2*fn*fn*fn/(dn*dn*dn)-9*zt*fn/(dn*dn))/27,wn=(zt-fn*fn/(3*dn))/dn,En=2*B(-wn/3),Fn=N(3*cn/(wn*En))/3;return[E*(Et-1+B(1+2*(ut-vt)+kt))/(2*Je),v(tt)*E*(-En*c(Fn+E/3)-fn/(3*dn))]},Fo.invert=function(Je,tt){if(!Je)return[0,k*_(2*r(tt/E))];var ut=p(Je/E),vt=(1-ut*ut-(tt/=E)*tt)/(2*ut),Et=B(vt*vt+1);return[v(Je)*E*(Et-vt),v(tt)*k*_(2*u(B((1-2*vt*ut)*(vt+Et)-ut),B(Et+vt+ut)))]},Gl.invert=function(Je,tt){if(!tt)return[Je,0];var ut=tt/E,vt=(E*E*(1-ut*ut)-Je*Je)/(2*E*Je);return[Je?E*(v(Je)*B(vt*vt+1)-vt):0,k*_(2*r(ut))]},Ds.invert=function(Je,tt){var ut;if(!Je||!tt)return[Je,tt];tt/=E;var vt=v(Je)*Je/k,Et=(vt*vt-1+4*tt*tt)/p(vt),kt=Et*Et,zt=2*tt,fn=50;do{var dn=zt*zt,cn=(8*zt-dn*(dn+2)-5)/(2*dn*(zt-1)),wn=(3*zt-dn*zt-10)/(2*dn*zt),En=cn*cn,Fn=zt*cn,zn=zt+cn,Qn=zn*zn,_r=zt+3*cn,Cr=-2*zn*(4*Fn*En+(1-4*dn+3*dn*dn)*(1+wn)+En*(14*dn-6-kt+(8*dn-8-2*kt)*wn)+Fn*(12*dn-8+(10*dn-10-kt)*wn)),Qr=B(Qn*(dn+En*kt-1)+(1-dn)*(dn*(_r*_r+4*En)+En*(12*Fn+4*En)));zt-=ut=(Et*(Qn+En-1)+2*Qr-vt*(4*Qn+kt))/(Et*(2*cn*wn+2*zn*(1+wn))+Cr/Qr-8*zn*(Et*(-1+En+Qn)+2*Qr)*(1+wn)/(kt+4*Qn))}while(ut>x&&--fn>0);return[v(Je)*(B(Et*Et+4)+Et)*E/4,k*zt]};var iu=4*E+3*B(3),Ls=2*B(2*E*B(3)/iu),Ts=he(Ls*B(3)/E,Ls,iu/6);function Zu(Je,tt){return[Je*B(1-3*tt*tt/(E*E)),tt]}function Ol(Je,tt){var ut=c(tt),vt=c(Je)*ut,Et=1-vt,kt=c(Je=u(_(Je)*ut,-_(tt))),zt=_(Je);return[zt*(ut=B(1-vt*vt))-kt*Et,-kt*ut-zt*Et]}function Wa(Je,tt){var ut=ne(Je,tt);return[(ut[0]+Je/k)/2,(ut[1]+tt)/2]}Zu.invert=function(Je,tt){return[Je/B(1-3*tt*tt/(E*E)),tt]},Ol.invert=function(Je,tt){var ut=(Je*Je+tt*tt)/-2,vt=B(-ut*(2+ut)),Et=tt*ut+Je*vt,kt=Je*ut-tt*vt,zt=B(kt*kt+Et*Et);return[u(vt*Et,zt*(1+ut)),zt?-S(vt*kt/zt):0]},Wa.invert=function(Je,tt){var ut=Je,vt=tt,Et=25;do{var kt,zt=c(vt),fn=_(vt),dn=_(2*vt),cn=fn*fn,wn=zt*zt,En=_(ut),Fn=c(ut/2),zn=_(ut/2),Qn=zn*zn,_r=1-wn*Fn*Fn,Cr=_r?N(zt*Fn)*B(kt=1/_r):kt=0,Qr=.5*(2*Cr*zt*zn+ut/k)-Je,oi=.5*(Cr*fn+vt)-tt,yi=.5*kt*(wn*Qn+Cr*zt*Fn*cn)+.5/k,ei=kt*(En*dn/4-Cr*fn*zn),Qi=.125*kt*(dn*zn-Cr*fn*wn*En),Ci=.5*kt*(cn*Fn+Cr*Qn*zt)+.5,La=ei*Qi-Ci*yi,Ra=(oi*ei-Qr*Ci)/La,Ba=(Qr*Qi-oi*yi)/La;ut-=Ra,vt-=Ba}while((p(Ra)>x||p(Ba)>x)&&--Et>0);return[ut,vt]},i.geoNaturalEarth=m.geoNaturalEarth1,i.geoNaturalEarthRaw=m.geoNaturalEarth1Raw,i.geoAiry=function(){var Je=k,tt=m.geoProjectionMutator(Q),ut=tt(Je);return ut.radius=function(vt){return arguments.length?tt(Je=vt*R):Je*D},ut.scale(179.976).clipAngle(147)},i.geoAiryRaw=Q,i.geoAitoff=function(){return m.geoProjection(ne).scale(152.63)},i.geoAitoffRaw=ne,i.geoArmadillo=function(){var Je=20*R,tt=Je>=0?1:-1,ut=w(tt*Je),vt=m.geoProjectionMutator(ae),Et=vt(Je),kt=Et.stream;return Et.parallel=function(zt){return arguments.length?(ut=w((tt=(Je=zt*R)>=0?1:-1)*Je),vt(Je)):Je*D},Et.stream=function(zt){var fn=Et.rotate(),dn=kt(zt),cn=(Et.rotate([0,0]),kt(zt)),wn=Et.precision();return Et.rotate(fn),dn.sphere=function(){cn.polygonStart(),cn.lineStart();for(var En=-180*tt;tt*En<180;En+=90*tt)cn.point(En,90*tt);if(Je)for(;tt*(En-=3*tt*wn)>=-180;)cn.point(En,tt*-u(c(En*R/2),ut)*D);cn.lineEnd(),cn.polygonEnd()},dn},Et.scale(218.695).center([0,28.0974])},i.geoArmadilloRaw=ae,i.geoAugust=function(){return m.geoProjection(te).scale(66.1603)},i.geoAugustRaw=te,i.geoBaker=function(){return m.geoProjection(re).scale(112.314)},i.geoBakerRaw=re,i.geoBerghaus=function(){var Je=5,tt=m.geoProjectionMutator(V),ut=tt(Je),vt=ut.stream,Et=-c(.01*R),kt=_(.01*R);return ut.lobes=function(zt){return arguments.length?tt(Je=+zt):Je},ut.stream=function(zt){var fn=ut.rotate(),dn=vt(zt),cn=(ut.rotate([0,0]),vt(zt));return ut.rotate(fn),dn.sphere=function(){cn.polygonStart(),cn.lineStart();for(var wn=0,En=360/Je,Fn=2*E/Je,zn=90-180/Je,Qn=k;wn<Je;++wn,zn-=En,Qn-=Fn)cn.point(u(kt*c(Qn),Et)*D,S(kt*_(Qn))*D),zn<-90?(cn.point(-90,-180-zn-.01),cn.point(-90,-180-zn+.01)):(cn.point(90,zn+.01),cn.point(90,zn-.01));cn.lineEnd(),cn.polygonEnd()},dn},ut.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},i.geoBerghausRaw=V,i.geoBertin1953=function(){return m.geoProjection(ue()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},i.geoBertin1953Raw=ue,i.geoBoggs=function(){return m.geoProjection(Te).scale(160.857)},i.geoBoggsRaw=Te,i.geoBonne=function(){return ye(ze).scale(123.082).center([0,26.1441]).parallel(45)},i.geoBonneRaw=ze,i.geoBottomley=function(){var Je=.5,tt=m.geoProjectionMutator(je),ut=tt(Je);return ut.fraction=function(vt){return arguments.length?tt(Je=+vt):Je},ut.scale(158.837)},i.geoBottomleyRaw=je,i.geoBromley=function(){return m.geoProjection(Ie).scale(152.63)},i.geoBromleyRaw=Ie,i.geoChamberlin=Be,i.geoChamberlinRaw=Se,i.geoChamberlinAfrica=function(){return Be([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},i.geoCollignon=function(){return m.geoProjection(He).scale(95.6464).center([0,30])},i.geoCollignonRaw=He,i.geoCraig=function(){return ye(Xe).scale(249.828).clipAngle(90)},i.geoCraigRaw=Xe,i.geoCraster=function(){return m.geoProjection(et).scale(156.19)},i.geoCrasterRaw=et,i.geoCylindricalEqualArea=function(){return ye(qe).parallel(38.58).scale(195.044)},i.geoCylindricalEqualAreaRaw=qe,i.geoCylindricalStereographic=function(){return ye(Ye).scale(124.75)},i.geoCylindricalStereographicRaw=Ye,i.geoEckert1=function(){return m.geoProjection(ot).scale(165.664)},i.geoEckert1Raw=ot,i.geoEckert2=function(){return m.geoProjection(at).scale(165.664)},i.geoEckert2Raw=at,i.geoEckert3=function(){return m.geoProjection(ct).scale(180.739)},i.geoEckert3Raw=ct,i.geoEckert4=function(){return m.geoProjection(_t).scale(180.739)},i.geoEckert4Raw=_t,i.geoEckert5=function(){return m.geoProjection(xt).scale(173.044)},i.geoEckert5Raw=xt,i.geoEckert6=function(){return m.geoProjection(Ht).scale(173.044)},i.geoEckert6Raw=Ht,i.geoEisenlohr=function(){return m.geoProjection(ht).scale(62.5271)},i.geoEisenlohrRaw=ht,i.geoFahey=function(){return m.geoProjection(Bt).scale(137.152)},i.geoFaheyRaw=Bt,i.geoFoucaut=function(){return m.geoProjection(gn).scale(135.264)},i.geoFoucautRaw=gn,i.geoFoucautSinusoidal=function(){var Je=.5,tt=m.geoProjectionMutator(hn),ut=tt(Je);return ut.alpha=function(vt){return arguments.length?tt(Je=+vt):Je},ut.scale(168.725)},i.geoFoucautSinusoidalRaw=hn,i.geoGilbert=function(Je){null==Je&&(Je=m.geoOrthographic);var tt=Je(),ut=m.geoEquirectangular().scale(D).precision(0).clipAngle(null).translate([0,0]);function vt(kt){return tt(We(kt))}function Et(kt){vt[kt]=function(){return arguments.length?(tt[kt].apply(tt,arguments),vt):tt[kt]()}}return tt.invert&&(vt.invert=function(kt){return it(tt.invert(kt))}),vt.stream=function(kt){var zt=tt.stream(kt),fn=ut.stream({point:function(dn,cn){zt.point(dn/2,S(w(-cn/2*R))*D)},lineStart:function(){zt.lineStart()},lineEnd:function(){zt.lineEnd()},polygonStart:function(){zt.polygonStart()},polygonEnd:function(){zt.polygonEnd()}});return fn.sphere=zt.sphere,fn},vt.rotate=function(kt){return arguments.length?(ut.rotate(kt),vt):ut.rotate()},vt.center=function(kt){return arguments.length?(tt.center(We(kt)),vt):it(tt.center())},Et("angle"),Et("clipAngle"),Et("clipExtent"),Et("fitExtent"),Et("fitHeight"),Et("fitSize"),Et("fitWidth"),Et("scale"),Et("translate"),Et("precision"),vt.scale(249.5)},i.geoGingery=function(){var Je=6,tt=30*R,ut=c(tt),vt=_(tt),Et=m.geoProjectionMutator(qt),kt=Et(tt,Je),zt=kt.stream,fn=-c(.01*R),dn=_(.01*R);return kt.radius=function(cn){return arguments.length?(ut=c(tt=cn*R),vt=_(tt),Et(tt,Je)):tt*D},kt.lobes=function(cn){return arguments.length?Et(tt,Je=+cn):Je},kt.stream=function(cn){var wn=kt.rotate(),En=zt(cn),Fn=(kt.rotate([0,0]),zt(cn));return kt.rotate(wn),En.sphere=function(){Fn.polygonStart(),Fn.lineStart();for(var zn=0,Qn=2*E/Je,_r=0;zn<Je;++zn,_r-=Qn)Fn.point(u(dn*c(_r),fn)*D,S(dn*_(_r))*D),Fn.point(u(vt*c(_r-Qn/2),ut)*D,S(vt*_(_r-Qn/2))*D);Fn.lineEnd(),Fn.polygonEnd()},En},kt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},i.geoGingeryRaw=qt,i.geoGinzburg4=function(){return m.geoProjection(Ne).scale(149.995)},i.geoGinzburg4Raw=Ne,i.geoGinzburg5=function(){return m.geoProjection(Ve).scale(153.93)},i.geoGinzburg5Raw=Ve,i.geoGinzburg6=function(){return m.geoProjection(Ke).scale(130.945)},i.geoGinzburg6Raw=Ke,i.geoGinzburg8=function(){return m.geoProjection(bt).scale(131.747)},i.geoGinzburg8Raw=bt,i.geoGinzburg9=function(){return m.geoProjection(gt).scale(131.087)},i.geoGinzburg9Raw=gt,i.geoGringorten=function(){return m.geoProjection(pt(St)).scale(239.75)},i.geoGringortenRaw=St,i.geoGuyou=function(){return m.geoProjection(pt(Vt)).scale(151.496)},i.geoGuyouRaw=Vt,i.geoHammer=function(){var Je=2,tt=m.geoProjectionMutator(W),ut=tt(Je);return ut.coefficient=function(vt){return arguments.length?tt(Je=+vt):Je},ut.scale(169.529)},i.geoHammerRaw=W,i.geoHammerRetroazimuthal=function(){var Je=0,tt=m.geoProjectionMutator(mt),ut=tt(Je),vt=ut.rotate,Et=ut.stream,kt=m.geoCircle();return ut.parallel=function(zt){if(!arguments.length)return Je*D;var fn=ut.rotate();return tt(Je=zt*R).rotate(fn)},ut.rotate=function(zt){return arguments.length?(vt.call(ut,[zt[0],zt[1]-Je*D]),kt.center([-zt[0],-zt[1]]),ut):((zt=vt.call(ut))[1]+=Je*D,zt)},ut.stream=function(zt){return(zt=Et(zt)).sphere=function(){zt.polygonStart();var fn,dn=kt.radius(89.99)().coordinates[0],cn=dn.length-1,wn=-1;for(zt.lineStart();++wn<cn;)zt.point((fn=dn[wn])[0],fn[1]);for(zt.lineEnd(),cn=(dn=kt.radius(90.01)().coordinates[0]).length-1,zt.lineStart();--wn>=0;)zt.point((fn=dn[wn])[0],fn[1]);zt.lineEnd(),zt.polygonEnd()},zt},ut.scale(79.4187).parallel(45).clipAngle(179.999)},i.geoHammerRetroazimuthalRaw=mt,i.geoHealpix=function(){var Je=4,tt=m.geoProjectionMutator(Yt),ut=tt(Je),vt=ut.stream;return ut.lobes=function(Et){return arguments.length?tt(Je=+Et):Je},ut.stream=function(Et){var kt=ut.rotate(),zt=vt(Et),fn=(ut.rotate([0,0]),vt(Et));return ut.rotate(kt),zt.sphere=function(){var dn,cn;m.geoStream((cn=[].concat(b.range(-180,180+(dn=180/Je)/2,dn).map(Ue),b.range(180,-180-dn/2,-dn).map(wt)),{type:"Polygon",coordinates:[180===dn?cn.map(Ut):cn]}),fn)},zt},ut.scale(239.75)},i.geoHealpixRaw=Yt,i.geoHill=function(){var Je=1,tt=m.geoProjectionMutator(Zt),ut=tt(Je);return ut.ratio=function(vt){return arguments.length?tt(Je=+vt):Je},ut.scale(167.774).center([0,18.67])},i.geoHillRaw=Zt,i.geoHomolosine=function(){return m.geoProjection(un).scale(152.63)},i.geoHomolosineRaw=un,i.geoHufnagel=function(){var Je=1,tt=0,ut=45*R,vt=2,Et=m.geoProjectionMutator(vn),kt=Et(Je,tt,ut,vt);return kt.a=function(zt){return arguments.length?Et(Je=+zt,tt,ut,vt):Je},kt.b=function(zt){return arguments.length?Et(Je,tt=+zt,ut,vt):tt},kt.psiMax=function(zt){return arguments.length?Et(Je,tt,ut=+zt*R,vt):ut*D},kt.ratio=function(zt){return arguments.length?Et(Je,tt,ut,vt=+zt):vt},kt.scale(180.739)},i.geoHufnagelRaw=vn,i.geoHyperelliptical=function(){var Je=0,tt=2.5,ut=1.183136,vt=m.geoProjectionMutator(yn),Et=vt(Je,tt,ut);return Et.alpha=function(kt){return arguments.length?vt(Je=+kt,tt,ut):Je},Et.k=function(kt){return arguments.length?vt(Je,tt=+kt,ut):tt},Et.gamma=function(kt){return arguments.length?vt(Je,tt,ut=+kt):ut},Et.scale(152.63)},i.geoHyperellipticalRaw=yn,i.geoInterrupt=In,i.geoInterruptedBoggs=function(){return In(Te,Rn).scale(160.857)},i.geoInterruptedHomolosine=function(){return In(un,Ln).scale(152.63)},i.geoInterruptedMollweide=function(){return In(de,qn).scale(169.529)},i.geoInterruptedMollweideHemispheres=function(){return In(de,nr).scale(169.529).rotate([20,0])},i.geoInterruptedSinuMollweide=function(){return In(tn,rr,ie).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},i.geoInterruptedSinusoidal=function(){return In(ke,gr).scale(152.63).rotate([-20,0])},i.geoKavrayskiy7=function(){return m.geoProjection(jr).scale(158.837)},i.geoKavrayskiy7Raw=jr,i.geoLagrange=function(){var Je=.5,tt=m.geoProjectionMutator(kr),ut=tt(Je);return ut.spacing=function(vt){return arguments.length?tt(Je=+vt):Je},ut.scale(124.75)},i.geoLagrangeRaw=kr,i.geoLarrivee=function(){return m.geoProjection(Xr).scale(97.2672)},i.geoLarriveeRaw=Xr,i.geoLaskowski=function(){return m.geoProjection(ir).scale(139.98)},i.geoLaskowskiRaw=ir,i.geoLittrow=function(){return m.geoProjection(Bn).scale(144.049).clipAngle(89.999)},i.geoLittrowRaw=Bn,i.geoLoximuthal=function(){return ye(mr).parallel(40).scale(158.837)},i.geoLoximuthalRaw=mr,i.geoMiller=function(){return m.geoProjection(zr).scale(108.318)},i.geoMillerRaw=zr,i.geoModifiedStereographic=Ct,i.geoModifiedStereographicRaw=br,i.geoModifiedStereographicAlaska=function(){return Ct(Dr,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},i.geoModifiedStereographicGs48=function(){return Ct(di,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},i.geoModifiedStereographicGs50=function(){return Ct(ni,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},i.geoModifiedStereographicMiller=function(){return Ct(pi,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},i.geoModifiedStereographicLee=function(){return Ct(qi,[165,10]).scale(250).clipAngle(130).center([-165,-10])},i.geoMollweide=function(){return m.geoProjection(de).scale(169.529)},i.geoMollweideRaw=de,i.geoMtFlatPolarParabolic=function(){return m.geoProjection(Sn).scale(164.859)},i.geoMtFlatPolarParabolicRaw=Sn,i.geoMtFlatPolarQuartic=function(){return m.geoProjection(Zn).scale(188.209)},i.geoMtFlatPolarQuarticRaw=Zn,i.geoMtFlatPolarSinusoidal=function(){return m.geoProjection(fr).scale(166.518)},i.geoMtFlatPolarSinusoidalRaw=fr,i.geoNaturalEarth2=function(){return m.geoProjection(Hn).scale(175.295)},i.geoNaturalEarth2Raw=Hn,i.geoNellHammer=function(){return m.geoProjection(Dn).scale(152.63)},i.geoNellHammerRaw=Dn,i.geoInterruptedQuarticAuthalic=function(){return In(W(1/0),Jn).rotate([20,0]).scale(152.63)},i.geoNicolosi=function(){return m.geoProjection(Nn).scale(127.267)},i.geoNicolosiRaw=Nn,i.geoPatterson=function(){return m.geoProjection(Un).scale(139.319)},i.geoPattersonRaw=Un,i.geoPolyconic=function(){return m.geoProjection(sr).scale(103.74)},i.geoPolyconicRaw=sr,i.geoPolyhedral=$r,i.geoPolyhedralButterfly=function(Je){Je=Je||function(ut){var vt=m.geoCentroid({type:"MultiPoint",coordinates:ut});return m.geoGnomonic().scale(1).translate([0,0]).rotate([-vt[0],-vt[1]])};var tt=Ai.map(function(ut){return{face:ut,project:Je(ut)}});return[-1,0,0,1,0,1,4,5].forEach(function(ut,vt){var Et=tt[ut];Et&&(Et.children||(Et.children=[])).push(tt[vt])}),$r(tt[0],function(ut,vt){return tt[ut<-E/2?vt<0?6:4:ut<0?vt<0?2:0:ut<E/2?vt<0?3:1:vt<0?7:5]}).angle(-30).scale(101.858).center([0,45])},i.geoPolyhedralCollignon=function(Je){Je=Je||function(ut){var vt=m.geoCentroid({type:"MultiPoint",coordinates:ut});return m.geoProjection(Ri).translate([0,0]).scale(1).rotate(vt[1]>0?[-vt[0],0]:[180-vt[0],180])};var tt=Ai.map(function(ut){return{face:ut,project:Je(ut)}});return[-1,0,0,1,0,1,4,5].forEach(function(ut,vt){var Et=tt[ut];Et&&(Et.children||(Et.children=[])).push(tt[vt])}),$r(tt[0],function(ut,vt){return tt[ut<-E/2?vt<0?6:4:ut<0?vt<0?2:0:ut<E/2?vt<0?3:1:vt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},i.geoPolyhedralWaterman=function(Je){Je=Je||function(kt){var zt=6===kt.length?m.geoCentroid({type:"MultiPoint",coordinates:kt}):kt[0];return m.geoGnomonic().scale(1).translate([0,0]).rotate([-zt[0],-zt[1]])};var tt=Ai.map(function(kt){for(var zt,fn=kt.map(Fi),dn=fn.length,cn=fn[dn-1],wn=[],En=0;En<dn;++En)wn.push(vr([.9486832980505138*cn[0]+.31622776601683794*(zt=fn[En])[0],.9486832980505138*cn[1]+.31622776601683794*zt[1],.9486832980505138*cn[2]+.31622776601683794*zt[2]]),vr([.9486832980505138*zt[0]+.31622776601683794*cn[0],.9486832980505138*zt[1]+.31622776601683794*cn[1],.9486832980505138*zt[2]+.31622776601683794*cn[2]])),cn=zt;return wn}),ut=[],vt=[-1,0,0,1,0,1,4,5];tt.forEach(function(kt,zt){for(var fn,dn,cn=Ai[zt],wn=cn.length,En=ut[zt]=[],Fn=0;Fn<wn;++Fn)tt.push([cn[Fn],kt[(2*Fn+2)%(2*wn)],kt[(2*Fn+1)%(2*wn)]]),vt.push(zt),En.push((fn=Fi(kt[(2*Fn+2)%(2*wn)]),dn=Fi(kt[(2*Fn+1)%(2*wn)]),[fn[1]*dn[2]-fn[2]*dn[1],fn[2]*dn[0]-fn[0]*dn[2],fn[0]*dn[1]-fn[1]*dn[0]]))});var Et=tt.map(function(kt){return{project:Je(kt),face:kt}});return vt.forEach(function(kt,zt){var fn=Et[kt];fn&&(fn.children||(fn.children=[])).push(Et[zt])}),$r(Et[0],function(kt,zt){var fn=c(zt),dn=[fn*c(kt),fn*_(kt),_(zt)],cn=kt<-E/2?zt<0?6:4:kt<0?zt<0?2:0:kt<E/2?zt<0?3:1:zt<0?7:5,wn=ut[cn];return Et[Lr(wn[0],dn)<0?8+3*cn:Lr(wn[1],dn)<0?8+3*cn+1:Lr(wn[2],dn)<0?8+3*cn+2:cn]}).angle(-30).scale(110.625).center([0,45])},i.geoProject=function(Je,tt){var ut,vt=tt.stream;if(!vt)throw new Error("invalid projection");switch(Je&&Je.type){case"Feature":ut=Ha;break;case"FeatureCollection":ut=Do;break;default:ut=Xa}return ut(Je,vt)},i.geoGringortenQuincuncial=function(){return go(St).scale(176.423)},i.geoPeirceQuincuncial=ts,i.geoPierceQuincuncial=ts,i.geoQuantize=function(Je,tt){if(!(0<=(tt=+tt)&&tt<=20))throw new Error("invalid digits");function ut(cn){var wn=cn.length,En=2,Fn=new Array(wn);for(Fn[0]=+cn[0].toFixed(tt),Fn[1]=+cn[1].toFixed(tt);En<wn;)Fn[En]=cn[En],++En;return Fn}function vt(cn){return cn.map(ut)}function Et(cn){for(var wn=ut(cn[0]),En=[wn],Fn=1;Fn<cn.length;Fn++){var zn=ut(cn[Fn]);(zn.length>2||zn[0]!=wn[0]||zn[1]!=wn[1])&&(En.push(zn),wn=zn)}return 1===En.length&&cn.length>1&&En.push(ut(cn[cn.length-1])),En}function kt(cn){return cn.map(Et)}function zt(cn){if(null==cn)return cn;var wn;switch(cn.type){case"GeometryCollection":wn={type:"GeometryCollection",geometries:cn.geometries.map(zt)};break;case"Point":wn={type:"Point",coordinates:ut(cn.coordinates)};break;case"MultiPoint":wn={type:cn.type,coordinates:vt(cn.coordinates)};break;case"LineString":wn={type:cn.type,coordinates:Et(cn.coordinates)};break;case"MultiLineString":case"Polygon":wn={type:cn.type,coordinates:kt(cn.coordinates)};break;case"MultiPolygon":wn={type:"MultiPolygon",coordinates:cn.coordinates.map(kt)};break;default:return cn}return null!=cn.bbox&&(wn.bbox=cn.bbox),wn}function fn(cn){var wn={type:"Feature",properties:cn.properties,geometry:zt(cn.geometry)};return null!=cn.id&&(wn.id=cn.id),null!=cn.bbox&&(wn.bbox=cn.bbox),wn}if(null!=Je)switch(Je.type){case"Feature":return fn(Je);case"FeatureCollection":var dn={type:"FeatureCollection",features:Je.features.map(fn)};return null!=Je.bbox&&(dn.bbox=Je.bbox),dn;default:return zt(Je)}return Je},i.geoQuincuncial=go,i.geoRectangularPolyconic=function(){return ye(Eo).scale(131.215)},i.geoRectangularPolyconicRaw=Eo,i.geoRobinson=function(){return m.geoProjection(eo).scale(152.63)},i.geoRobinsonRaw=eo,i.geoSatellite=function(){var Je=2,tt=0,ut=m.geoProjectionMutator(Ss),vt=ut(Je,tt);return vt.distance=function(Et){return arguments.length?ut(Je=+Et,tt):Je},vt.tilt=function(Et){return arguments.length?ut(Je,tt=Et*R):tt*D},vt.scale(432.147).clipAngle(N(1/Je)*D-1e-6)},i.geoSatelliteRaw=Ss,i.geoSinuMollweide=function(){return m.geoProjection(tn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},i.geoSinuMollweideRaw=tn,i.geoSinusoidal=function(){return m.geoProjection(ke).scale(152.63)},i.geoSinusoidalRaw=ke,i.geoStitch=function(Je){if(null==Je)return Je;switch(Je.type){case"Feature":return xa(Je);case"FeatureCollection":var tt={type:"FeatureCollection",features:Je.features.map(xa)};return null!=Je.bbox&&(tt.bbox=Je.bbox),tt;default:return ao(Je)}},i.geoTimes=function(){return m.geoProjection(gu).scale(146.153)},i.geoTimesRaw=gu,i.geoTwoPointAzimuthal=Ru,i.geoTwoPointAzimuthalRaw=Lu,i.geoTwoPointAzimuthalUsa=function(){return Ru([-158,21.5],[-77,39]).clipAngle(60).scale(400)},i.geoTwoPointEquidistant=sl,i.geoTwoPointEquidistantRaw=mu,i.geoTwoPointEquidistantUsa=function(){return sl([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},i.geoVanDerGrinten=function(){return m.geoProjection(Ps).scale(79.4183)},i.geoVanDerGrintenRaw=Ps,i.geoVanDerGrinten2=function(){return m.geoProjection(Fo).scale(79.4183)},i.geoVanDerGrinten2Raw=Fo,i.geoVanDerGrinten3=function(){return m.geoProjection(Gl).scale(79.4183)},i.geoVanDerGrinten3Raw=Gl,i.geoVanDerGrinten4=function(){return m.geoProjection(Ds).scale(127.16)},i.geoVanDerGrinten4Raw=Ds,i.geoWagner=Zs,i.geoWagner7=function(){return Zs().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},i.geoWagnerRaw=Os,i.geoWagner4=function(){return m.geoProjection(Ts).scale(176.84)},i.geoWagner4Raw=Ts,i.geoWagner6=function(){return m.geoProjection(Zu).scale(152.63)},i.geoWagner6Raw=Zu,i.geoWiechel=function(){return m.geoProjection(Ol).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},i.geoWiechelRaw=Ol,i.geoWinkel3=function(){return m.geoProjection(Wa).scale(158.837)},i.geoWinkel3Raw=Wa,Object.defineProperty(i,"__esModule",{value:!0})},"object"==typeof X&&void 0!==G?m(X,h("d3-geo"),h("d3-array")):m(i.d3=i.d3||{},i.d3,i.d3)},{"d3-array":162,"d3-geo":169}],169:[function(h,G,X){var i,m;i=this,m=function(i,m){"use strict";function b(){return new p}function p(){this.reset()}p.prototype={constructor:p,reset:function(){this.s=this.t=0},add:function(Mt){u(r,Mt,this.t),u(this,r.s,this.s),this.s?this.t+=r.t:this.s=r.t},valueOf:function(){return this.s}};var r=new p;function u(Mt,Gt,Tn){var on=Mt.s=Gt+Tn,An=on-Gt;Mt.t=Gt-(on-An)+(Tn-An)}var c=1e-6,l=Math.PI,f=l/2,s=l/4,o=2*l,d=180/l,g=l/180,y=Math.abs,v=Math.atan,_=Math.atan2,w=Math.cos,x=Math.ceil,E=Math.exp,k=Math.log,C=Math.pow,L=Math.sin,P=Math.sign||function(Mt){return Mt>0?1:Mt<0?-1:0},A=Math.sqrt,I=Math.tan;function D(Mt){return Mt>1?0:Mt<-1?l:Math.acos(Mt)}function R(Mt){return Mt>1?f:Mt<-1?-f:Math.asin(Mt)}function S(Mt){return(Mt=L(Mt/2))*Mt}function N(){}function B(Mt,Gt){Mt&&Y.hasOwnProperty(Mt.type)&&Y[Mt.type](Mt,Gt)}var H={Feature:function(Mt,Gt){B(Mt.geometry,Gt)},FeatureCollection:function(Mt,Gt){for(var Tn=Mt.features,on=-1,An=Tn.length;++on<An;)B(Tn[on].geometry,Gt)}},Y={Sphere:function(Mt,Gt){Gt.sphere()},Point:function(Mt,Gt){Gt.point((Mt=Mt.coordinates)[0],Mt[1],Mt[2])},MultiPoint:function(Mt,Gt){for(var Tn=Mt.coordinates,on=-1,An=Tn.length;++on<An;)Gt.point((Mt=Tn[on])[0],Mt[1],Mt[2])},LineString:function(Mt,Gt){Q(Mt.coordinates,Gt,0)},MultiLineString:function(Mt,Gt){for(var Tn=Mt.coordinates,on=-1,An=Tn.length;++on<An;)Q(Tn[on],Gt,0)},Polygon:function(Mt,Gt){ne(Mt.coordinates,Gt)},MultiPolygon:function(Mt,Gt){for(var Tn=Mt.coordinates,on=-1,An=Tn.length;++on<An;)ne(Tn[on],Gt)},GeometryCollection:function(Mt,Gt){for(var Tn=Mt.geometries,on=-1,An=Tn.length;++on<An;)B(Tn[on],Gt)}};function Q(Mt,Gt,Tn){var on,An=-1,Vn=Mt.length-Tn;for(Gt.lineStart();++An<Vn;)Gt.point((on=Mt[An])[0],on[1],on[2]);Gt.lineEnd()}function ne(Mt,Gt){var Tn=-1,on=Mt.length;for(Gt.polygonStart();++Tn<on;)Q(Mt[Tn],Gt,1);Gt.polygonEnd()}function ae(Mt,Gt){Mt&&H.hasOwnProperty(Mt.type)?H[Mt.type](Mt,Gt):B(Mt,Gt)}var te,K,q,re,V,W=b(),Z=b(),oe={point:N,lineStart:N,lineEnd:N,polygonStart:function(){W.reset(),oe.lineStart=ie,oe.lineEnd=ue},polygonEnd:function(){var Mt=+W;Z.add(Mt<0?o+Mt:Mt),this.lineStart=this.lineEnd=this.point=N},sphere:function(){Z.add(o)}};function ie(){oe.point=fe}function ue(){he(te,K)}function fe(Mt,Gt){oe.point=he,te=Mt,K=Gt,q=Mt*=g,re=w(Gt=(Gt*=g)/2+s),V=L(Gt)}function he(Mt,Gt){var Tn=(Mt*=g)-q,on=Tn>=0?1:-1,An=on*Tn,Vn=w(Gt=(Gt*=g)/2+s),tr=L(Gt),hr=V*tr,Tr=re*Vn+hr*w(An),yr=hr*on*L(An);W.add(_(yr,Tr)),q=Mt,re=Vn,V=tr}function de(Mt){return[_(Mt[1],Mt[0]),R(Mt[2])]}function be(Mt){var Gt=Mt[0],Tn=Mt[1],on=w(Tn);return[on*w(Gt),on*L(Gt),L(Tn)]}function pe(Mt,Gt){return Mt[0]*Gt[0]+Mt[1]*Gt[1]+Mt[2]*Gt[2]}function Te(Mt,Gt){return[Mt[1]*Gt[2]-Mt[2]*Gt[1],Mt[2]*Gt[0]-Mt[0]*Gt[2],Mt[0]*Gt[1]-Mt[1]*Gt[0]]}function ye(Mt,Gt){Mt[0]+=Gt[0],Mt[1]+=Gt[1],Mt[2]+=Gt[2]}function ke(Mt,Gt){return[Mt[0]*Gt,Mt[1]*Gt,Mt[2]*Gt]}function ze(Mt){var Gt=A(Mt[0]*Mt[0]+Mt[1]*Mt[1]+Mt[2]*Mt[2]);Mt[0]/=Gt,Mt[1]/=Gt,Mt[2]/=Gt}var je,Ie,Ce,_e,we,Se,Oe,Be,He,Xe,nt,et,qe,Ye,ot,at,ct,_t,xt,Ht,At,ht,st,Bt,gn,hn,We=b(),it={point:qt,lineStart:Pe,lineEnd:Ee,polygonStart:function(){it.point=Ne,it.lineStart=Ve,it.lineEnd=Ke,We.reset(),oe.polygonStart()},polygonEnd:function(){oe.polygonEnd(),it.point=qt,it.lineStart=Pe,it.lineEnd=Ee,W<0?(je=-(Ce=180),Ie=-(_e=90)):We>c?_e=90:We<-c&&(Ie=-90),Xe[0]=je,Xe[1]=Ce},sphere:function(){je=-(Ce=180),Ie=-(_e=90)}};function qt(Mt,Gt){He.push(Xe=[je=Mt,Ce=Mt]),Gt<Ie&&(Ie=Gt),Gt>_e&&(_e=Gt)}function Ge(Mt,Gt){var Tn=be([Mt*g,Gt*g]);if(Be){var on=Te(Be,Tn),An=Te([on[1],-on[0],0],on);ze(An),An=de(An);var Vn,tr=Mt-we,hr=tr>0?1:-1,Tr=An[0]*d*hr,yr=y(tr)>180;yr^(hr*we<Tr&&Tr<hr*Mt)?(Vn=An[1]*d)>_e&&(_e=Vn):yr^(hr*we<(Tr=(Tr+360)%360-180)&&Tr<hr*Mt)?(Vn=-An[1]*d)<Ie&&(Ie=Vn):(Gt<Ie&&(Ie=Gt),Gt>_e&&(_e=Gt)),yr?Mt<we?bt(je,Mt)>bt(je,Ce)&&(Ce=Mt):bt(Mt,Ce)>bt(je,Ce)&&(je=Mt):Ce>=je?(Mt<je&&(je=Mt),Mt>Ce&&(Ce=Mt)):Mt>we?bt(je,Mt)>bt(je,Ce)&&(Ce=Mt):bt(Mt,Ce)>bt(je,Ce)&&(je=Mt)}else He.push(Xe=[je=Mt,Ce=Mt]);Gt<Ie&&(Ie=Gt),Gt>_e&&(_e=Gt),Be=Tn,we=Mt}function Pe(){it.point=Ge}function Ee(){Xe[0]=je,Xe[1]=Ce,it.point=qt,Be=null}function Ne(Mt,Gt){if(Be){var Tn=Mt-we;We.add(y(Tn)>180?Tn+(Tn>0?360:-360):Tn)}else Se=Mt,Oe=Gt;oe.point(Mt,Gt),Ge(Mt,Gt)}function Ve(){oe.lineStart()}function Ke(){Ne(Se,Oe),oe.lineEnd(),y(We)>c&&(je=-(Ce=180)),Xe[0]=je,Xe[1]=Ce,Be=null}function bt(Mt,Gt){return(Gt-=Mt)<0?Gt+360:Gt}function gt(Mt,Gt){return Mt[0]-Gt[0]}function pt(Mt,Gt){return Mt[0]<=Mt[1]?Mt[0]<=Gt&&Gt<=Mt[1]:Gt<Mt[0]||Mt[1]<Gt}var St={sphere:N,point:jt,lineStart:Vt,lineEnd:Kt,polygonStart:function(){St.lineStart=rn,St.lineEnd=Yt},polygonEnd:function(){St.lineStart=Vt,St.lineEnd=Kt}};function jt(Mt,Gt){Mt*=g;var Tn=w(Gt*=g);Lt(Tn*w(Mt),Tn*L(Mt),L(Gt))}function Lt(Mt,Gt,Tn){++nt,qe+=(Mt-qe)/nt,Ye+=(Gt-Ye)/nt,ot+=(Tn-ot)/nt}function Vt(){St.point=mt}function mt(Mt,Gt){Mt*=g;var Tn=w(Gt*=g);Bt=Tn*w(Mt),gn=Tn*L(Mt),hn=L(Gt),St.point=Wt,Lt(Bt,gn,hn)}function Wt(Mt,Gt){Mt*=g;var Tn=w(Gt*=g),on=Tn*w(Mt),An=Tn*L(Mt),Vn=L(Gt),tr=_(A((tr=gn*Vn-hn*An)*tr+(tr=hn*on-Bt*Vn)*tr+(tr=Bt*An-gn*on)*tr),Bt*on+gn*An+hn*Vn);et+=tr,at+=tr*(Bt+(Bt=on)),ct+=tr*(gn+(gn=An)),_t+=tr*(hn+(hn=Vn)),Lt(Bt,gn,hn)}function Kt(){St.point=jt}function rn(){St.point=Ue}function Yt(){wt(ht,st),St.point=jt}function Ue(Mt,Gt){ht=Mt,st=Gt,Mt*=g,Gt*=g,St.point=wt;var Tn=w(Gt);Bt=Tn*w(Mt),gn=Tn*L(Mt),hn=L(Gt),Lt(Bt,gn,hn)}function wt(Mt,Gt){Mt*=g;var Tn=w(Gt*=g),on=Tn*w(Mt),An=Tn*L(Mt),Vn=L(Gt),tr=gn*Vn-hn*An,hr=hn*on-Bt*Vn,Tr=Bt*An-gn*on,yr=A(tr*tr+hr*hr+Tr*Tr),Ir=R(yr),Br=yr&&-Ir/yr;xt+=Br*tr,Ht+=Br*hr,At+=Br*Tr,et+=Ir,at+=Ir*(Bt+(Bt=on)),ct+=Ir*(gn+(gn=An)),_t+=Ir*(hn+(hn=Vn)),Lt(Bt,gn,hn)}function Ut(Mt){return function(){return Mt}}function Zt(Mt,Gt){function Tn(on,An){return on=Mt(on,An),Gt(on[0],on[1])}return Mt.invert&&Gt.invert&&(Tn.invert=function(on,An){return(on=Gt.invert(on,An))&&Mt.invert(on[0],on[1])}),Tn}function tn(Mt,Gt){return[y(Mt)>l?Mt+Math.round(-Mt/o)*o:Mt,Gt]}function un(Mt,Gt,Tn){return(Mt%=o)?Gt||Tn?Zt(Qt(Mt),yn(Gt,Tn)):Qt(Mt):Gt||Tn?yn(Gt,Tn):tn}function vn(Mt){return function(Gt,Tn){return[(Gt+=Mt)>l?Gt-o:Gt<-l?Gt+o:Gt,Tn]}}function Qt(Mt){var Gt=vn(Mt);return Gt.invert=vn(-Mt),Gt}function yn(Mt,Gt){var Tn=w(Mt),on=L(Mt),An=w(Gt),Vn=L(Gt);function tr(hr,Tr){var yr=w(Tr),Ir=w(hr)*yr,Br=L(hr)*yr,xr=L(Tr),Pr=xr*Tn+Ir*on;return[_(Br*An-Pr*Vn,Ir*Tn-xr*on),R(Pr*An+Br*Vn)]}return tr.invert=function(hr,Tr){var yr=w(Tr),Ir=w(hr)*yr,Br=L(hr)*yr,xr=L(Tr),Pr=xr*An-Br*Vn;return[_(Br*An+xr*Vn,Ir*Tn+Pr*on),R(Pr*Tn-Ir*on)]},tr}function Mn(Mt){function Gt(Tn){return(Tn=Mt(Tn[0]*g,Tn[1]*g))[0]*=d,Tn[1]*=d,Tn}return Mt=un(Mt[0]*g,Mt[1]*g,Mt.length>2?Mt[2]*g:0),Gt.invert=function(Tn){return(Tn=Mt.invert(Tn[0]*g,Tn[1]*g))[0]*=d,Tn[1]*=d,Tn},Gt}function Pn(Mt,Gt,Tn,on,An,Vn){if(Tn){var tr=w(Gt),hr=L(Gt),Tr=on*Tn;null==An?(An=Gt+on*o,Vn=Gt-Tr/2):(An=sn(tr,An),Vn=sn(tr,Vn),(on>0?An<Vn:An>Vn)&&(An+=on*o));for(var yr,Ir=An;on>0?Ir>Vn:Ir<Vn;Ir-=Tr)yr=de([tr,-hr*w(Ir),-hr*L(Ir)]),Mt.point(yr[0],yr[1])}}function sn(Mt,Gt){(Gt=be(Gt))[0]-=Mt,ze(Gt);var Tn=D(-Gt[1]);return((-Gt[2]<0?-Tn:Tn)+o-c)%o}function In(){var Mt,Gt=[];return{point:function(Tn,on,An){Mt.push([Tn,on,An])},lineStart:function(){Gt.push(Mt=[])},lineEnd:N,rejoin:function(){Gt.length>1&&Gt.push(Gt.pop().concat(Gt.shift()))},result:function(){var Tn=Gt;return Gt=[],Mt=null,Tn}}}function Rn(Mt,Gt){return y(Mt[0]-Gt[0])<c&&y(Mt[1]-Gt[1])<c}function Ln(Mt,Gt,Tn,on){this.x=Mt,this.z=Gt,this.o=Tn,this.e=on,this.v=!1,this.n=this.p=null}function qn(Mt,Gt,Tn,on,An){var Vn,tr,hr=[],Tr=[];if(Mt.forEach(function(ai){if(!((gi=ai.length-1)<=0)){var gi,ji,ur=ai[0],Ni=ai[gi];if(Rn(ur,Ni)){if(!ur[2]&&!Ni[2]){for(An.lineStart(),Vn=0;Vn<gi;++Vn)An.point((ur=ai[Vn])[0],ur[1]);return void An.lineEnd()}Ni[0]+=2*c}hr.push(ji=new Ln(ur,ai,null,!0)),Tr.push(ji.o=new Ln(ur,null,ji,!1)),hr.push(ji=new Ln(Ni,ai,null,!1)),Tr.push(ji.o=new Ln(Ni,null,ji,!0))}}),hr.length){for(Tr.sort(Gt),nr(hr),nr(Tr),Vn=0,tr=Tr.length;Vn<tr;++Vn)Tr[Vn].e=Tn=!Tn;for(var yr,Ir,Br=hr[0];;){for(var xr=Br,Pr=!0;xr.v;)if((xr=xr.n)===Br)return;yr=xr.z,An.lineStart();do{if(xr.v=xr.o.v=!0,xr.e){if(Pr)for(Vn=0,tr=yr.length;Vn<tr;++Vn)An.point((Ir=yr[Vn])[0],Ir[1]);else on(xr.x,xr.n.x,1,An);xr=xr.n}else{if(Pr)for(Vn=(yr=xr.p.z).length-1;Vn>=0;--Vn)An.point((Ir=yr[Vn])[0],Ir[1]);else on(xr.x,xr.p.x,-1,An);xr=xr.p}yr=(xr=xr.o).z,Pr=!Pr}while(!xr.v);An.lineEnd()}}}function nr(Mt){if(Gt=Mt.length){for(var Gt,Tn,on=0,An=Mt[0];++on<Gt;)An.n=Tn=Mt[on],Tn.p=An,An=Tn;An.n=Tn=Mt[0],Tn.p=An}}tn.invert=tn;var rr=b();function gr(Mt){return y(Mt[0])<=l?Mt[0]:P(Mt[0])*((y(Mt[0])+l)%o-l)}function jr(Mt,Gt){var Tn=gr(Gt),on=Gt[1],An=L(on),Vn=[L(Tn),-w(Tn),0],tr=0,hr=0;rr.reset(),1===An?on=f+c:-1===An&&(on=-f-c);for(var Tr=0,yr=Mt.length;Tr<yr;++Tr)if(Br=(Ir=Mt[Tr]).length)for(var Ir,Br,xr=Ir[Br-1],Pr=gr(xr),ai=xr[1]/2+s,gi=L(ai),ji=w(ai),ur=0;ur<Br;++ur,Pr=Jr,gi=zi,ji=fa,xr=Ni){var Ni=Ir[ur],Jr=gr(Ni),Mr=Ni[1]/2+s,zi=L(Mr),fa=w(Mr),wa=Jr-Pr,Yr=wa>=0?1:-1,Ea=Yr*wa,va=Ea>l,Ki=gi*zi;if(rr.add(_(Ki*Yr*L(Ea),ji*fa+Ki*w(Ea))),tr+=va?wa+Yr*o:wa,va^Pr>=Tn^Jr>=Tn){var Ar=Te(be(xr),be(Ni));ze(Ar);var Di=Te(Vn,Ar);ze(Di);var ea=(va^wa>=0?-1:1)*R(Di[2]);(on>ea||on===ea&&(Ar[0]||Ar[1]))&&(hr+=va^wa>=0?1:-1)}}return(tr<-c||tr<c&&rr<-c)^1&hr}function kr(Mt,Gt,Tn,on){return function(An){var Vn,tr,hr,Tr=Gt(An),yr=In(),Ir=Gt(yr),Br=!1,xr={point:Pr,lineStart:gi,lineEnd:ji,polygonStart:function(){xr.point=ur,xr.lineStart=Ni,xr.lineEnd=Jr,tr=[],Vn=[]},polygonEnd:function(){xr.point=Pr,xr.lineStart=gi,xr.lineEnd=ji,tr=m.merge(tr);var Mr=jr(Vn,on);tr.length?(Br||(An.polygonStart(),Br=!0),qn(tr,Xr,Mr,Tn,An)):Mr&&(Br||(An.polygonStart(),Br=!0),An.lineStart(),Tn(null,null,1,An),An.lineEnd()),Br&&(An.polygonEnd(),Br=!1),tr=Vn=null},sphere:function(){An.polygonStart(),An.lineStart(),Tn(null,null,1,An),An.lineEnd(),An.polygonEnd()}};function Pr(Mr,zi){Mt(Mr,zi)&&An.point(Mr,zi)}function ai(Mr,zi){Tr.point(Mr,zi)}function gi(){xr.point=ai,Tr.lineStart()}function ji(){xr.point=Pr,Tr.lineEnd()}function ur(Mr,zi){hr.push([Mr,zi]),Ir.point(Mr,zi)}function Ni(){Ir.lineStart(),hr=[]}function Jr(){ur(hr[0][0],hr[0][1]),Ir.lineEnd();var Mr,zi,fa,wa,Yr=Ir.clean(),Ea=yr.result(),va=Ea.length;if(hr.pop(),Vn.push(hr),hr=null,va)if(1&Yr){if((zi=(fa=Ea[0]).length-1)>0){for(Br||(An.polygonStart(),Br=!0),An.lineStart(),Mr=0;Mr<zi;++Mr)An.point((wa=fa[Mr])[0],wa[1]);An.lineEnd()}}else va>1&&2&Yr&&Ea.push(Ea.pop().concat(Ea.shift())),tr.push(Ea.filter(er))}return xr}}function er(Mt){return Mt.length>1}function Xr(Mt,Gt){return((Mt=Mt.x)[0]<0?Mt[1]-f-c:f-Mt[1])-((Gt=Gt.x)[0]<0?Gt[1]-f-c:f-Gt[1])}var ir=kr(function(){return!0},function(Mt){var Gt,Tn=NaN,on=NaN,An=NaN;return{lineStart:function(){Mt.lineStart(),Gt=1},point:function(Vn,tr){var yr,Ir,Br,xr,Pr,ai,gi,hr=Vn>0?l:-l,Tr=y(Vn-Tn);y(Tr-l)<c?(Mt.point(Tn,on=(on+tr)/2>0?f:-f),Mt.point(An,on),Mt.lineEnd(),Mt.lineStart(),Mt.point(hr,on),Mt.point(Vn,on),Gt=0):An!==hr&&Tr>=l&&(y(Tn-An)<c&&(Tn-=An*c),y(Vn-hr)<c&&(Vn-=hr*c),Ir=on,xr=tr,gi=L((yr=Tn)-(Br=Vn)),on=y(gi)>c?v((L(Ir)*(ai=w(xr))*L(Br)-L(xr)*(Pr=w(Ir))*L(yr))/(Pr*ai*gi)):(Ir+xr)/2,Mt.point(An,on),Mt.lineEnd(),Mt.lineStart(),Mt.point(hr,on),Gt=0),Mt.point(Tn=Vn,on=tr),An=hr},lineEnd:function(){Mt.lineEnd(),Tn=on=NaN},clean:function(){return 2-Gt}}},function(Mt,Gt,Tn,on){var An;if(null==Mt)on.point(-l,An=Tn*f),on.point(0,An),on.point(l,An),on.point(l,0),on.point(l,-An),on.point(0,-An),on.point(-l,-An),on.point(-l,0),on.point(-l,An);else if(y(Mt[0]-Gt[0])>c){var Vn=Mt[0]<Gt[0]?l:-l;on.point(-Vn,An=Tn*Vn/2),on.point(0,An),on.point(Vn,An)}else on.point(Gt[0],Gt[1])},[-l,-f]);function Bn(Mt){var Gt=w(Mt),Tn=6*g,on=Gt>0,An=y(Gt)>c;function Vn(Tr,yr){return w(Tr)*w(yr)>Gt}function tr(Tr,yr,Ir){var Br=[1,0,0],xr=Te(be(Tr),be(yr)),Pr=pe(xr,xr),ai=xr[0],gi=Pr-ai*ai;if(!gi)return!Ir&&Tr;var ji=Gt*Pr/gi,ur=-Gt*ai/gi,Ni=Te(Br,xr),Jr=ke(Br,ji);ye(Jr,ke(xr,ur));var Mr=Ni,zi=pe(Jr,Mr),fa=pe(Mr,Mr),wa=zi*zi-fa*(pe(Jr,Jr)-1);if(!(wa<0)){var Yr=A(wa),Ea=ke(Mr,(-zi-Yr)/fa);if(ye(Ea,Jr),Ea=de(Ea),!Ir)return Ea;var va,Ki=Tr[0],Ar=yr[0],Di=Tr[1],ea=yr[1];Ar<Ki&&(va=Ki,Ki=Ar,Ar=va);var mi=Ar-Ki,$a=y(mi-l)<c;if(!$a&&ea<Di&&(va=Di,Di=ea,ea=va),$a||mi<c?$a?Di+ea>0^Ea[1]<(y(Ea[0]-Ki)<c?Di:ea):Di<=Ea[1]&&Ea[1]<=ea:mi>l^(Ki<=Ea[0]&&Ea[0]<=Ar)){var Wo=ke(Mr,(-zi+Yr)/fa);return ye(Wo,Jr),[Ea,de(Wo)]}}}function hr(Tr,yr){var Ir=on?Mt:l-Mt,Br=0;return Tr<-Ir?Br|=1:Tr>Ir&&(Br|=2),yr<-Ir?Br|=4:yr>Ir&&(Br|=8),Br}return kr(Vn,function(Tr){var yr,Ir,Br,xr,Pr;return{lineStart:function(){xr=Br=!1,Pr=1},point:function(ai,gi){var ji,ur=[ai,gi],Ni=Vn(ai,gi),Jr=on?Ni?0:hr(ai,gi):Ni?hr(ai+(ai<0?l:-l),gi):0;if(!yr&&(xr=Br=Ni)&&Tr.lineStart(),Ni!==Br&&(!(ji=tr(yr,ur))||Rn(yr,ji)||Rn(ur,ji))&&(ur[2]=1),Ni!==Br)Pr=0,Ni?(Tr.lineStart(),ji=tr(ur,yr),Tr.point(ji[0],ji[1])):(ji=tr(yr,ur),Tr.point(ji[0],ji[1],2),Tr.lineEnd()),yr=ji;else if(An&&yr&&on^Ni){var Mr;Jr&Ir||!(Mr=tr(ur,yr,!0))||(Pr=0,on?(Tr.lineStart(),Tr.point(Mr[0][0],Mr[0][1]),Tr.point(Mr[1][0],Mr[1][1]),Tr.lineEnd()):(Tr.point(Mr[1][0],Mr[1][1]),Tr.lineEnd(),Tr.lineStart(),Tr.point(Mr[0][0],Mr[0][1],3)))}!Ni||yr&&Rn(yr,ur)||Tr.point(ur[0],ur[1]),yr=ur,Br=Ni,Ir=Jr},lineEnd:function(){Br&&Tr.lineEnd(),yr=null},clean:function(){return Pr|(xr&&Br)<<1}}},function(Tr,yr,Ir,Br){Pn(Br,Mt,Tn,Ir,Tr,yr)},on?[0,-Mt]:[-l,Mt-l])}function mr(Mt,Gt,Tn,on){function An(yr,Ir){return Mt<=yr&&yr<=Tn&&Gt<=Ir&&Ir<=on}function Vn(yr,Ir,Br,xr){var Pr=0,ai=0;if(null==yr||(Pr=tr(yr,Br))!==(ai=tr(Ir,Br))||Tr(yr,Ir)<0^Br>0)do{xr.point(0===Pr||3===Pr?Mt:Tn,Pr>1?on:Gt)}while((Pr=(Pr+Br+4)%4)!==ai);else xr.point(Ir[0],Ir[1])}function tr(yr,Ir){return y(yr[0]-Mt)<c?Ir>0?0:3:y(yr[0]-Tn)<c?Ir>0?2:1:y(yr[1]-Gt)<c?Ir>0?1:0:Ir>0?3:2}function hr(yr,Ir){return Tr(yr.x,Ir.x)}function Tr(yr,Ir){var Br=tr(yr,1),xr=tr(Ir,1);return Br!==xr?Br-xr:0===Br?Ir[1]-yr[1]:1===Br?yr[0]-Ir[0]:2===Br?yr[1]-Ir[1]:Ir[0]-yr[0]}return function(yr){var Ir,Br,xr,Pr,ai,gi,ji,ur,Ni,Jr,Mr,zi=yr,fa=In(),wa={point:Yr,lineStart:function(){wa.point=Ea,Br&&Br.push(xr=[]),Jr=!0,Ni=!1,ji=ur=NaN},lineEnd:function(){Ir&&(Ea(Pr,ai),gi&&Ni&&fa.rejoin(),Ir.push(fa.result())),wa.point=Yr,Ni&&zi.lineEnd()},polygonStart:function(){zi=fa,Ir=[],Br=[],Mr=!0},polygonEnd:function(){var va=function(){for(var Di=0,ea=0,mi=Br.length;ea<mi;++ea)for(var $a,Wo,Fs=Br[ea],bl=1,Js=Fs.length,la=Fs[0],Vo=la[0],qs=la[1];bl<Js;++bl)$a=Vo,Wo=qs,Vo=(la=Fs[bl])[0],qs=la[1],Wo<=on?qs>on&&(Vo-$a)*(on-Wo)>(qs-Wo)*(Mt-$a)&&++Di:qs<=on&&(Vo-$a)*(on-Wo)<(qs-Wo)*(Mt-$a)&&--Di;return Di}(),Ki=Mr&&va,Ar=(Ir=m.merge(Ir)).length;(Ki||Ar)&&(yr.polygonStart(),Ki&&(yr.lineStart(),Vn(null,null,1,yr),yr.lineEnd()),Ar&&qn(Ir,hr,va,Vn,yr),yr.polygonEnd()),zi=yr,Ir=Br=xr=null}};function Yr(va,Ki){An(va,Ki)&&zi.point(va,Ki)}function Ea(va,Ki){var Ar=An(va,Ki);if(Br&&xr.push([va,Ki]),Jr)Pr=va,ai=Ki,gi=Ar,Jr=!1,Ar&&(zi.lineStart(),zi.point(va,Ki));else if(Ar&&Ni)zi.point(va,Ki);else{var Di=[ji=Math.max(-1e9,Math.min(1e9,ji)),ur=Math.max(-1e9,Math.min(1e9,ur))],ea=[va=Math.max(-1e9,Math.min(1e9,va)),Ki=Math.max(-1e9,Math.min(1e9,Ki))];!function(mi,$a,Wo,Fs,bl,Js){var la,Vo=mi[0],qs=mi[1],ja=0,Va=1,So=$a[0]-Vo,so=$a[1]-qs;if(la=Wo-Vo,So||!(la>0)){if(la/=So,So<0){if(la<ja)return;la<Va&&(Va=la)}else if(So>0){if(la>Va)return;la>ja&&(ja=la)}if(la=bl-Vo,So||!(la<0)){if(la/=So,So<0){if(la>Va)return;la>ja&&(ja=la)}else if(So>0){if(la<ja)return;la<Va&&(Va=la)}if(la=Fs-qs,so||!(la>0)){if(la/=so,so<0){if(la<ja)return;la<Va&&(Va=la)}else if(so>0){if(la>Va)return;la>ja&&(ja=la)}if(la=Js-qs,so||!(la<0)){if(la/=so,so<0){if(la>Va)return;la>ja&&(ja=la)}else if(so>0){if(la<ja)return;la<Va&&(Va=la)}return ja>0&&(mi[0]=Vo+ja*So,mi[1]=qs+ja*so),Va<1&&($a[0]=Vo+Va*So,$a[1]=qs+Va*so),!0}}}}}(Di,ea,Mt,Gt,Tn,on)?Ar&&(zi.lineStart(),zi.point(va,Ki),Mr=!1):(Ni||(zi.lineStart(),zi.point(Di[0],Di[1])),zi.point(ea[0],ea[1]),Ar||zi.lineEnd(),Mr=!1)}ji=va,ur=Ki,Ni=Ar}return wa}}var zr,br,Dr,di=b(),ni={sphere:N,point:N,lineStart:function(){ni.point=qi,ni.lineEnd=pi},lineEnd:N,polygonStart:N,polygonEnd:N};function pi(){ni.point=ni.lineEnd=N}function qi(Mt,Gt){zr=Mt*=g,br=L(Gt*=g),Dr=w(Gt),ni.point=Ct}function Ct(Mt,Gt){Mt*=g;var Tn=L(Gt*=g),on=w(Gt),An=y(Mt-zr),Vn=w(An),tr=on*L(An),hr=Dr*Tn-br*on*Vn,Tr=br*Tn+Dr*on*Vn;di.add(_(A(tr*tr+hr*hr),Tr)),zr=Mt,br=Tn,Dr=on}function mn(Mt){return di.reset(),ae(Mt,ni),+di}var pn=[null,null],Sn={type:"LineString",coordinates:pn};function Zn(Mt,Gt){return pn[0]=Mt,pn[1]=Gt,mn(Sn)}var fr={Feature:function(Mt,Gt){return Dn(Mt.geometry,Gt)},FeatureCollection:function(Mt,Gt){for(var Tn=Mt.features,on=-1,An=Tn.length;++on<An;)if(Dn(Tn[on].geometry,Gt))return!0;return!1}},Hn={Sphere:function(){return!0},Point:function(Mt,Gt){return Jn(Mt.coordinates,Gt)},MultiPoint:function(Mt,Gt){for(var Tn=Mt.coordinates,on=-1,An=Tn.length;++on<An;)if(Jn(Tn[on],Gt))return!0;return!1},LineString:function(Mt,Gt){return Nn(Mt.coordinates,Gt)},MultiLineString:function(Mt,Gt){for(var Tn=Mt.coordinates,on=-1,An=Tn.length;++on<An;)if(Nn(Tn[on],Gt))return!0;return!1},Polygon:function(Mt,Gt){return Un(Mt.coordinates,Gt)},MultiPolygon:function(Mt,Gt){for(var Tn=Mt.coordinates,on=-1,An=Tn.length;++on<An;)if(Un(Tn[on],Gt))return!0;return!1},GeometryCollection:function(Mt,Gt){for(var Tn=Mt.geometries,on=-1,An=Tn.length;++on<An;)if(Dn(Tn[on],Gt))return!0;return!1}};function Dn(Mt,Gt){return!(!Mt||!Hn.hasOwnProperty(Mt.type))&&Hn[Mt.type](Mt,Gt)}function Jn(Mt,Gt){return 0===Zn(Mt,Gt)}function Nn(Mt,Gt){for(var Tn,on,An,Vn=0,tr=Mt.length;Vn<tr;Vn++){if(0===(on=Zn(Mt[Vn],Gt))||Vn>0&&(An=Zn(Mt[Vn],Mt[Vn-1]))>0&&Tn<=An&&on<=An&&(Tn+on-An)*(1-Math.pow((Tn-on)/An,2))<1e-12*An)return!0;Tn=on}return!1}function Un(Mt,Gt){return!!jr(Mt.map(sr),Wr(Gt))}function sr(Mt){return(Mt=Mt.map(Wr)).pop(),Mt}function Wr(Mt){return[Mt[0]*g,Mt[1]*g]}function Vr(Mt,Gt,Tn){var on=m.range(Mt,Gt-c,Tn).concat(Gt);return function(An){return on.map(function(Vn){return[An,Vn]})}}function Zr(Mt,Gt,Tn){var on=m.range(Mt,Gt-c,Tn).concat(Gt);return function(An){return on.map(function(Vn){return[Vn,An]})}}function Or(){var Mt,Gt,Tn,on,An,Vn,tr,hr,Tr,yr,Ir,Br,xr=10,Pr=xr,ai=90,gi=360,ji=2.5;function ur(){return{type:"MultiLineString",coordinates:Ni()}}function Ni(){return m.range(x(on/ai)*ai,Tn,ai).map(Ir).concat(m.range(x(hr/gi)*gi,tr,gi).map(Br)).concat(m.range(x(Gt/xr)*xr,Mt,xr).filter(function(Jr){return y(Jr%ai)>c}).map(Tr)).concat(m.range(x(Vn/Pr)*Pr,An,Pr).filter(function(Jr){return y(Jr%gi)>c}).map(yr))}return ur.lines=function(){return Ni().map(function(Jr){return{type:"LineString",coordinates:Jr}})},ur.outline=function(){return{type:"Polygon",coordinates:[Ir(on).concat(Br(tr).slice(1),Ir(Tn).reverse().slice(1),Br(hr).reverse().slice(1))]}},ur.extent=function(Jr){return arguments.length?ur.extentMajor(Jr).extentMinor(Jr):ur.extentMinor()},ur.extentMajor=function(Jr){return arguments.length?(hr=+Jr[0][1],tr=+Jr[1][1],(on=+Jr[0][0])>(Tn=+Jr[1][0])&&(Jr=on,on=Tn,Tn=Jr),hr>tr&&(Jr=hr,hr=tr,tr=Jr),ur.precision(ji)):[[on,hr],[Tn,tr]]},ur.extentMinor=function(Jr){return arguments.length?(Vn=+Jr[0][1],An=+Jr[1][1],(Gt=+Jr[0][0])>(Mt=+Jr[1][0])&&(Jr=Gt,Gt=Mt,Mt=Jr),Vn>An&&(Jr=Vn,Vn=An,An=Jr),ur.precision(ji)):[[Gt,Vn],[Mt,An]]},ur.step=function(Jr){return arguments.length?ur.stepMajor(Jr).stepMinor(Jr):ur.stepMinor()},ur.stepMajor=function(Jr){return arguments.length?(ai=+Jr[0],gi=+Jr[1],ur):[ai,gi]},ur.stepMinor=function(Jr){return arguments.length?(xr=+Jr[0],Pr=+Jr[1],ur):[xr,Pr]},ur.precision=function(Jr){return arguments.length?(ji=+Jr,Tr=Vr(Vn,An,90),yr=Zr(Gt,Mt,ji),Ir=Vr(hr,tr,90),Br=Zr(on,Tn,ji),ur):ji},ur.extentMajor([[-180,-90+c],[180,90-c]]).extentMinor([[-180,-80-c],[180,80+c]])}function $r(Mt){return Mt}var Ji,Bi,ci,Ai,wi=b(),Ri=b(),Lr={point:N,lineStart:N,lineEnd:N,polygonStart:function(){Lr.lineStart=vr,Lr.lineEnd=Do},polygonEnd:function(){Lr.lineStart=Lr.lineEnd=Lr.point=N,wi.add(y(Ri)),Ri.reset()},result:function(){var Mt=wi/2;return wi.reset(),Mt}};function vr(){Lr.point=Fi}function Fi(Mt,Gt){Lr.point=ga,Ji=ci=Mt,Bi=Ai=Gt}function ga(Mt,Gt){Ri.add(Ai*Mt-ci*Gt),ci=Mt,Ai=Gt}function Do(){ga(Ji,Bi)}var pa,Qa,go,ts,Ha=1/0,Xa=Ha,_a=-Ha,ya=_a,Ti={point:function(Mt,Gt){Mt<Ha&&(Ha=Mt),Mt>_a&&(_a=Mt),Gt<Xa&&(Xa=Gt),Gt>ya&&(ya=Gt)},lineStart:N,lineEnd:N,polygonStart:N,polygonEnd:N,result:function(){var Mt=[[Ha,Xa],[_a,ya]];return _a=ya=-(Xa=Ha=1/0),Mt}},Eo=0,Pa=0,eo=0,Ss=0,Co=0,ra=0,Us=0,Is=0,hs=0,mo={point:uo,lineStart:nu,lineEnd:ao,polygonStart:function(){mo.lineStart=gu,mo.lineEnd=xc},polygonEnd:function(){mo.point=uo,mo.lineStart=nu,mo.lineEnd=ao},result:function(){var Mt=hs?[Us/hs,Is/hs]:ra?[Ss/ra,Co/ra]:eo?[Eo/eo,Pa/eo]:[NaN,NaN];return Eo=Pa=eo=Ss=Co=ra=Us=Is=hs=0,Mt}};function uo(Mt,Gt){Eo+=Mt,Pa+=Gt,++eo}function nu(){mo.point=ru}function ru(Mt,Gt){mo.point=xa,uo(go=Mt,ts=Gt)}function xa(Mt,Gt){var Tn=Mt-go,on=Gt-ts,An=A(Tn*Tn+on*on);Ss+=An*(go+Mt)/2,Co+=An*(ts+Gt)/2,ra+=An,uo(go=Mt,ts=Gt)}function ao(){mo.point=uo}function gu(){mo.point=Lu}function xc(){Ru(pa,Qa)}function Lu(Mt,Gt){mo.point=Ru,uo(pa=go=Mt,Qa=ts=Gt)}function Ru(Mt,Gt){var Tn=Mt-go,on=Gt-ts,An=A(Tn*Tn+on*on);Ss+=An*(go+Mt)/2,Co+=An*(ts+Gt)/2,ra+=An,Us+=(An=ts*Mt-go*Gt)*(go+Mt),Is+=An*(ts+Gt),hs+=3*An,uo(go=Mt,ts=Gt)}function mu(Mt){this._context=Mt}mu.prototype={_radius:4.5,pointRadius:function(Mt){return this._radius=Mt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(Mt,Gt){switch(this._point){case 0:this._context.moveTo(Mt,Gt),this._point=1;break;case 1:this._context.lineTo(Mt,Gt);break;default:this._context.moveTo(Mt+this._radius,Gt),this._context.arc(Mt,Gt,this._radius,0,o)}},result:N};var sl,Ps,Fo,Gl,Ds,Os=b(),Zs={point:N,lineStart:function(){Zs.point=iu},lineEnd:function(){sl&&Ls(Ps,Fo),Zs.point=N},polygonStart:function(){sl=!0},polygonEnd:function(){sl=null},result:function(){var Mt=+Os;return Os.reset(),Mt}};function iu(Mt,Gt){Zs.point=Ls,Ps=Gl=Mt,Fo=Ds=Gt}function Ls(Mt,Gt){Os.add(A((Gl-=Mt)*Gl+(Ds-=Gt)*Ds)),Gl=Mt,Ds=Gt}function Ts(){this._string=[]}function Zu(Mt){return"m0,"+Mt+"a"+Mt+","+Mt+" 0 1,1 0,"+-2*Mt+"a"+Mt+","+Mt+" 0 1,1 0,"+2*Mt+"z"}function Ol(Mt){return function(Gt){var Tn=new Wa;for(var on in Mt)Tn[on]=Mt[on];return Tn.stream=Gt,Tn}}function Wa(){}function Je(Mt,Gt,Tn){var on=Mt.clipExtent&&Mt.clipExtent();return Mt.scale(150).translate([0,0]),null!=on&&Mt.clipExtent(null),ae(Tn,Mt.stream(Ti)),Gt(Ti.result()),null!=on&&Mt.clipExtent(on),Mt}function tt(Mt,Gt,Tn){return Je(Mt,function(on){var An=Gt[1][0]-Gt[0][0],Vn=Gt[1][1]-Gt[0][1],tr=Math.min(An/(on[1][0]-on[0][0]),Vn/(on[1][1]-on[0][1])),hr=+Gt[0][0]+(An-tr*(on[1][0]+on[0][0]))/2,Tr=+Gt[0][1]+(Vn-tr*(on[1][1]+on[0][1]))/2;Mt.scale(150*tr).translate([hr,Tr])},Tn)}function ut(Mt,Gt,Tn){return tt(Mt,[[0,0],Gt],Tn)}function vt(Mt,Gt,Tn){return Je(Mt,function(on){var An=+Gt,Vn=An/(on[1][0]-on[0][0]),tr=(An-Vn*(on[1][0]+on[0][0]))/2,hr=-Vn*on[0][1];Mt.scale(150*Vn).translate([tr,hr])},Tn)}function Et(Mt,Gt,Tn){return Je(Mt,function(on){var An=+Gt,Vn=An/(on[1][1]-on[0][1]),tr=-Vn*on[0][0],hr=(An-Vn*(on[1][1]+on[0][1]))/2;Mt.scale(150*Vn).translate([tr,hr])},Tn)}Ts.prototype={_radius:4.5,_circle:Zu(4.5),pointRadius:function(Mt){return(Mt=+Mt)!==this._radius&&(this._radius=Mt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(Mt,Gt){switch(this._point){case 0:this._string.push("M",Mt,",",Gt),this._point=1;break;case 1:this._string.push("L",Mt,",",Gt);break;default:null==this._circle&&(this._circle=Zu(this._radius)),this._string.push("M",Mt,",",Gt,this._circle)}},result:function(){if(this._string.length){var Mt=this._string.join("");return this._string=[],Mt}return null}},Wa.prototype={constructor:Wa,point:function(Mt,Gt){this.stream.point(Mt,Gt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var kt=w(30*g);function zt(Mt,Gt){return+Gt?function(Tn,on){function An(Vn,tr,hr,Tr,yr,Ir,Br,xr,Pr,ai,gi,ji,ur,Ni){var Jr=Br-Vn,Mr=xr-tr,zi=Jr*Jr+Mr*Mr;if(zi>4*on&&ur--){var fa=Tr+ai,wa=yr+gi,Yr=Ir+ji,Ea=A(fa*fa+wa*wa+Yr*Yr),va=R(Yr/=Ea),Ki=y(y(Yr)-1)<c||y(hr-Pr)<c?(hr+Pr)/2:_(wa,fa),Ar=Tn(Ki,va),Di=Ar[0],ea=Ar[1],mi=Di-Vn,$a=ea-tr,Wo=Mr*mi-Jr*$a;(Wo*Wo/zi>on||y((Jr*mi+Mr*$a)/zi-.5)>.3||Tr*ai+yr*gi+Ir*ji<kt)&&(An(Vn,tr,hr,Tr,yr,Ir,Di,ea,Ki,fa/=Ea,wa/=Ea,Yr,ur,Ni),Ni.point(Di,ea),An(Di,ea,Ki,fa,wa,Yr,Br,xr,Pr,ai,gi,ji,ur,Ni))}}return function(Vn){var tr,hr,Tr,yr,Ir,Br,xr,Pr,ai,gi,ji,ur,Ni={point:Jr,lineStart:Mr,lineEnd:fa,polygonStart:function(){Vn.polygonStart(),Ni.lineStart=wa},polygonEnd:function(){Vn.polygonEnd(),Ni.lineStart=Mr}};function Jr(va,Ki){va=Tn(va,Ki),Vn.point(va[0],va[1])}function Mr(){Pr=NaN,Ni.point=zi,Vn.lineStart()}function zi(va,Ki){var Ar=be([va,Ki]),Di=Tn(va,Ki);An(Pr,ai,xr,gi,ji,ur,Pr=Di[0],ai=Di[1],xr=va,gi=Ar[0],ji=Ar[1],ur=Ar[2],16,Vn),Vn.point(Pr,ai)}function fa(){Ni.point=Jr,Vn.lineEnd()}function wa(){Mr(),Ni.point=Yr,Ni.lineEnd=Ea}function Yr(va,Ki){zi(tr=va,Ki),hr=Pr,Tr=ai,yr=gi,Ir=ji,Br=ur,Ni.point=zi}function Ea(){An(Pr,ai,xr,gi,ji,ur,hr,Tr,tr,yr,Ir,Br,16,Vn),Ni.lineEnd=fa,fa()}return Ni}}(Mt,Gt):(Tn=Mt,Ol({point:function(on,An){on=Tn(on,An),this.stream.point(on[0],on[1])}}));var Tn}var fn=Ol({point:function(Mt,Gt){this.stream.point(Mt*g,Gt*g)}});function dn(Mt,Gt,Tn,on,An){function Vn(tr,hr){return[Gt+Mt*(tr*=on),Tn-Mt*(hr*=An)]}return Vn.invert=function(tr,hr){return[(tr-Gt)/Mt*on,(Tn-hr)/Mt*An]},Vn}function cn(Mt,Gt,Tn,on,An,Vn){var tr=w(Vn),hr=L(Vn),Tr=tr*Mt,yr=hr*Mt,Ir=tr/Mt,Br=hr/Mt,xr=(hr*Tn-tr*Gt)/Mt,Pr=(hr*Gt+tr*Tn)/Mt;function ai(gi,ji){return[Tr*(gi*=on)-yr*(ji*=An)+Gt,Tn-yr*gi-Tr*ji]}return ai.invert=function(gi,ji){return[on*(Ir*gi-Br*ji+xr),An*(Pr-Br*gi-Ir*ji)]},ai}function wn(Mt){return En(function(){return Mt})()}function En(Mt){var Gt,Tn,on,An,Vn,tr,hr,Tr,yr,Ir,Br=150,xr=480,Pr=250,ai=0,gi=0,ji=0,ur=0,Ni=0,Jr=0,Mr=1,zi=1,fa=null,wa=ir,Yr=null,Ea=$r,va=.5;function Ki(mi){return Tr(mi[0]*g,mi[1]*g)}function Ar(mi){return(mi=Tr.invert(mi[0],mi[1]))&&[mi[0]*d,mi[1]*d]}function Di(){var mi=cn(Br,0,0,Mr,zi,Jr).apply(null,Gt(ai,gi)),$a=(Jr?cn:dn)(Br,xr-mi[0],Pr-mi[1],Mr,zi,Jr);return Tn=un(ji,ur,Ni),hr=Zt(Gt,$a),Tr=Zt(Tn,hr),tr=zt(hr,va),ea()}function ea(){return yr=Ir=null,Ki}return Ki.stream=function(mi){return yr&&Ir===mi?yr:yr=fn(($a=Tn,Ol({point:function(Wo,Fs){var bl=$a(Wo,Fs);return this.stream.point(bl[0],bl[1])}}))(wa(tr(Ea(Ir=mi)))));var $a},Ki.preclip=function(mi){return arguments.length?(wa=mi,fa=void 0,ea()):wa},Ki.postclip=function(mi){return arguments.length?(Ea=mi,Yr=on=An=Vn=null,ea()):Ea},Ki.clipAngle=function(mi){return arguments.length?(wa=+mi?Bn(fa=mi*g):(fa=null,ir),ea()):fa*d},Ki.clipExtent=function(mi){return arguments.length?(Ea=null==mi?(Yr=on=An=Vn=null,$r):mr(Yr=+mi[0][0],on=+mi[0][1],An=+mi[1][0],Vn=+mi[1][1]),ea()):null==Yr?null:[[Yr,on],[An,Vn]]},Ki.scale=function(mi){return arguments.length?(Br=+mi,Di()):Br},Ki.translate=function(mi){return arguments.length?(xr=+mi[0],Pr=+mi[1],Di()):[xr,Pr]},Ki.center=function(mi){return arguments.length?(ai=mi[0]%360*g,gi=mi[1]%360*g,Di()):[ai*d,gi*d]},Ki.rotate=function(mi){return arguments.length?(ji=mi[0]%360*g,ur=mi[1]%360*g,Ni=mi.length>2?mi[2]%360*g:0,Di()):[ji*d,ur*d,Ni*d]},Ki.angle=function(mi){return arguments.length?(Jr=mi%360*g,Di()):Jr*d},Ki.reflectX=function(mi){return arguments.length?(Mr=mi?-1:1,Di()):Mr<0},Ki.reflectY=function(mi){return arguments.length?(zi=mi?-1:1,Di()):zi<0},Ki.precision=function(mi){return arguments.length?(tr=zt(hr,va=mi*mi),ea()):A(va)},Ki.fitExtent=function(mi,$a){return tt(Ki,mi,$a)},Ki.fitSize=function(mi,$a){return ut(Ki,mi,$a)},Ki.fitWidth=function(mi,$a){return vt(Ki,mi,$a)},Ki.fitHeight=function(mi,$a){return Et(Ki,mi,$a)},function(){return Gt=Mt.apply(this,arguments),Ki.invert=Gt.invert&&Ar,Di()}}function Fn(Mt){var Gt=0,Tn=l/3,on=En(Mt),An=on(Gt,Tn);return An.parallels=function(Vn){return arguments.length?on(Gt=Vn[0]*g,Tn=Vn[1]*g):[Gt*d,Tn*d]},An}function zn(Mt,Gt){var Tn=L(Mt),on=(Tn+L(Gt))/2;if(y(on)<c)return function(hr){var Tr=w(hr);function yr(Ir,Br){return[Ir*Tr,L(Br)/Tr]}return yr.invert=function(Ir,Br){return[Ir/Tr,R(Br*Tr)]},yr}(Mt);var An=1+Tn*(2*on-Tn),Vn=A(An)/on;function tr(hr,Tr){var yr=A(An-2*on*L(Tr))/on;return[yr*L(hr*=on),Vn-yr*w(hr)]}return tr.invert=function(hr,Tr){var yr=Vn-Tr,Ir=_(hr,y(yr))*P(yr);return yr*on<0&&(Ir-=l*P(hr)*P(yr)),[Ir/on,R((An-(hr*hr+yr*yr)*on*on)/(2*on))]},tr}function Qn(){return Fn(zn).scale(155.424).center([0,33.6442])}function _r(){return Qn().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Cr(Mt){return function(Gt,Tn){var on=w(Gt),An=w(Tn),Vn=Mt(on*An);return[Vn*An*L(Gt),Vn*L(Tn)]}}function Qr(Mt){return function(Gt,Tn){var on=A(Gt*Gt+Tn*Tn),An=Mt(on),Vn=L(An),tr=w(An);return[_(Gt*Vn,on*tr),R(on&&Tn*Vn/on)]}}var oi=Cr(function(Mt){return A(2/(1+Mt))});oi.invert=Qr(function(Mt){return 2*R(Mt/2)});var yi=Cr(function(Mt){return(Mt=D(Mt))&&Mt/L(Mt)});function ei(Mt,Gt){return[Mt,k(I((f+Gt)/2))]}function Qi(Mt){var Gt,Tn,on,An=wn(Mt),Vn=An.center,tr=An.scale,hr=An.translate,Tr=An.clipExtent,yr=null;function Ir(){var Br=l*tr(),xr=An(Mn(An.rotate()).invert([0,0]));return Tr(null==yr?[[xr[0]-Br,xr[1]-Br],[xr[0]+Br,xr[1]+Br]]:Mt===ei?[[Math.max(xr[0]-Br,yr),Gt],[Math.min(xr[0]+Br,Tn),on]]:[[yr,Math.max(xr[1]-Br,Gt)],[Tn,Math.min(xr[1]+Br,on)]])}return An.scale=function(Br){return arguments.length?(tr(Br),Ir()):tr()},An.translate=function(Br){return arguments.length?(hr(Br),Ir()):hr()},An.center=function(Br){return arguments.length?(Vn(Br),Ir()):Vn()},An.clipExtent=function(Br){return arguments.length?(null==Br?yr=Gt=Tn=on=null:(yr=+Br[0][0],Gt=+Br[0][1],Tn=+Br[1][0],on=+Br[1][1]),Ir()):null==yr?null:[[yr,Gt],[Tn,on]]},Ir()}function Ci(Mt){return I((f+Mt)/2)}function La(Mt,Gt){var Tn=w(Mt),on=Mt===Gt?L(Mt):k(Tn/w(Gt))/k(Ci(Gt)/Ci(Mt)),An=Tn*C(Ci(Mt),on)/on;if(!on)return ei;function Vn(tr,hr){An>0?hr<-f+c&&(hr=-f+c):hr>f-c&&(hr=f-c);var Tr=An/C(Ci(hr),on);return[Tr*L(on*tr),An-Tr*w(on*tr)]}return Vn.invert=function(tr,hr){var Tr=An-hr,yr=P(on)*A(tr*tr+Tr*Tr),Ir=_(tr,y(Tr))*P(Tr);return Tr*on<0&&(Ir-=l*P(tr)*P(Tr)),[Ir/on,2*v(C(An/yr,1/on))-f]},Vn}function Ra(Mt,Gt){return[Mt,Gt]}function Ba(Mt,Gt){var Tn=w(Mt),on=Mt===Gt?L(Mt):(Tn-w(Gt))/(Gt-Mt),An=Tn/on+Mt;if(y(on)<c)return Ra;function Vn(tr,hr){var Tr=An-hr,yr=on*tr;return[Tr*L(yr),An-Tr*w(yr)]}return Vn.invert=function(tr,hr){var Tr=An-hr,yr=_(tr,y(Tr))*P(Tr);return Tr*on<0&&(yr-=l*P(tr)*P(Tr)),[yr/on,An-P(on)*A(tr*tr+Tr*Tr)]},Vn}yi.invert=Qr(function(Mt){return Mt}),ei.invert=function(Mt,Gt){return[Mt,2*v(E(Gt))-f]},Ra.invert=Ra;var Go=1.340264,jo=-.081106,yo=893e-6,oo=.003796,qo=A(3)/2;function co(Mt,Gt){var Tn=R(qo*L(Gt)),on=Tn*Tn,An=on*on*on;return[Mt*w(Tn)/(qo*(Go+3*jo*on+An*(7*yo+9*oo*on))),Tn*(Go+jo*on+An*(yo+oo*on))]}function Hs(Mt,Gt){var Tn=w(Gt),on=w(Mt)*Tn;return[Tn*L(Mt)/on,L(Gt)/on]}function Gs(Mt,Gt){var Tn=Gt*Gt,on=Tn*Tn;return[Mt*(.8707-.131979*Tn+on*(on*(.003971*Tn-.001529*on)-.013791)),Gt*(1.007226+Tn*(.015085+on*(.028874*Tn-.044475-.005916*on)))]}function Rs(Mt,Gt){return[w(Gt)*L(Mt),L(Gt)]}function Xs(Mt,Gt){var Tn=w(Gt),on=1+w(Mt)*Tn;return[Tn*L(Mt)/on,L(Gt)/on]}function Ma(Mt,Gt){return[k(I((f+Gt)/2)),-Mt]}co.invert=function(Mt,Gt){for(var Tn,on=Gt,An=on*on,Vn=An*An*An,tr=0;tr<12&&(Vn=(An=(on-=Tn=(on*(Go+jo*An+Vn*(yo+oo*An))-Gt)/(Go+3*jo*An+Vn*(7*yo+9*oo*An)))*on)*An*An,!(y(Tn)<1e-12));++tr);return[qo*Mt*(Go+3*jo*An+Vn*(7*yo+9*oo*An))/w(on),R(L(on)/qo)]},Hs.invert=Qr(v),Gs.invert=function(Mt,Gt){var Tn,on=Gt,An=25;do{var Vn=on*on,tr=Vn*Vn;on-=Tn=(on*(1.007226+Vn*(.015085+tr*(.028874*Vn-.044475-.005916*tr)))-Gt)/(1.007226+Vn*(.045255+tr*(.259866*Vn-.311325-.005916*11*tr)))}while(y(Tn)>c&&--An>0);return[Mt/(.8707+(Vn=on*on)*(Vn*(Vn*Vn*Vn*(.003971-.001529*Vn)-.013791)-.131979)),on]},Rs.invert=Qr(R),Xs.invert=Qr(function(Mt){return 2*v(Mt)}),Ma.invert=function(Mt,Gt){return[-Gt,2*v(E(Mt))-f]},i.geoAlbers=_r,i.geoAlbersUsa=function(){var Mt,Gt,Tn,on,An,Vn,tr=_r(),hr=Qn().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Tr=Qn().rotate([157,0]).center([-3,19.9]).parallels([8,18]),yr={point:function(xr,Pr){Vn=[xr,Pr]}};function Ir(xr){var Pr=xr[0],ai=xr[1];return Vn=null,Tn.point(Pr,ai),Vn||(on.point(Pr,ai),Vn)||(An.point(Pr,ai),Vn)}function Br(){return Mt=Gt=null,Ir}return Ir.invert=function(xr){var Pr=tr.scale(),ai=tr.translate(),gi=(xr[0]-ai[0])/Pr,ji=(xr[1]-ai[1])/Pr;return(ji>=.12&&ji<.234&&gi>=-.425&&gi<-.214?hr:ji>=.166&&ji<.234&&gi>=-.214&&gi<-.115?Tr:tr).invert(xr)},Ir.stream=function(xr){return Mt&&Gt===xr?Mt:(Pr=[tr.stream(Gt=xr),hr.stream(xr),Tr.stream(xr)],ai=Pr.length,Mt={point:function(gi,ji){for(var ur=-1;++ur<ai;)Pr[ur].point(gi,ji)},sphere:function(){for(var gi=-1;++gi<ai;)Pr[gi].sphere()},lineStart:function(){for(var gi=-1;++gi<ai;)Pr[gi].lineStart()},lineEnd:function(){for(var gi=-1;++gi<ai;)Pr[gi].lineEnd()},polygonStart:function(){for(var gi=-1;++gi<ai;)Pr[gi].polygonStart()},polygonEnd:function(){for(var gi=-1;++gi<ai;)Pr[gi].polygonEnd()}});var Pr,ai},Ir.precision=function(xr){return arguments.length?(tr.precision(xr),hr.precision(xr),Tr.precision(xr),Br()):tr.precision()},Ir.scale=function(xr){return arguments.length?(tr.scale(xr),hr.scale(.35*xr),Tr.scale(xr),Ir.translate(tr.translate())):tr.scale()},Ir.translate=function(xr){if(!arguments.length)return tr.translate();var Pr=tr.scale(),ai=+xr[0],gi=+xr[1];return Tn=tr.translate(xr).clipExtent([[ai-.455*Pr,gi-.238*Pr],[ai+.455*Pr,gi+.238*Pr]]).stream(yr),on=hr.translate([ai-.307*Pr,gi+.201*Pr]).clipExtent([[ai-.425*Pr+c,gi+.12*Pr+c],[ai-.214*Pr-c,gi+.234*Pr-c]]).stream(yr),An=Tr.translate([ai-.205*Pr,gi+.212*Pr]).clipExtent([[ai-.214*Pr+c,gi+.166*Pr+c],[ai-.115*Pr-c,gi+.234*Pr-c]]).stream(yr),Br()},Ir.fitExtent=function(xr,Pr){return tt(Ir,xr,Pr)},Ir.fitSize=function(xr,Pr){return ut(Ir,xr,Pr)},Ir.fitWidth=function(xr,Pr){return vt(Ir,xr,Pr)},Ir.fitHeight=function(xr,Pr){return Et(Ir,xr,Pr)},Ir.scale(1070)},i.geoArea=function(Mt){return Z.reset(),ae(Mt,oe),2*Z},i.geoAzimuthalEqualArea=function(){return wn(oi).scale(124.75).clipAngle(179.999)},i.geoAzimuthalEqualAreaRaw=oi,i.geoAzimuthalEquidistant=function(){return wn(yi).scale(79.4188).clipAngle(179.999)},i.geoAzimuthalEquidistantRaw=yi,i.geoBounds=function(Mt){var Gt,Tn,on,An,Vn,tr,hr;if(_e=Ce=-(je=Ie=1/0),He=[],ae(Mt,it),Tn=He.length){for(He.sort(gt),Gt=1,Vn=[on=He[0]];Gt<Tn;++Gt)pt(on,(An=He[Gt])[0])||pt(on,An[1])?(bt(on[0],An[1])>bt(on[0],on[1])&&(on[1]=An[1]),bt(An[0],on[1])>bt(on[0],on[1])&&(on[0]=An[0])):Vn.push(on=An);for(tr=-1/0,Gt=0,on=Vn[Tn=Vn.length-1];Gt<=Tn;on=An,++Gt)(hr=bt(on[1],(An=Vn[Gt])[0]))>tr&&(tr=hr,je=An[0],Ce=on[1])}return He=Xe=null,je===1/0||Ie===1/0?[[NaN,NaN],[NaN,NaN]]:[[je,Ie],[Ce,_e]]},i.geoCentroid=function(Mt){nt=et=qe=Ye=ot=at=ct=_t=xt=Ht=At=0,ae(Mt,St);var Gt=xt,Tn=Ht,on=At,An=Gt*Gt+Tn*Tn+on*on;return An<1e-12&&(Gt=at,Tn=ct,on=_t,et<c&&(Gt=qe,Tn=Ye,on=ot),(An=Gt*Gt+Tn*Tn+on*on)<1e-12)?[NaN,NaN]:[_(Tn,Gt)*d,R(on/A(An))*d]},i.geoCircle=function(){var Mt,Gt,Tn=Ut([0,0]),on=Ut(90),An=Ut(6),Vn={point:function(hr,Tr){Mt.push(hr=Gt(hr,Tr)),hr[0]*=d,hr[1]*=d}};function tr(){var hr=Tn.apply(this,arguments),Tr=on.apply(this,arguments)*g,yr=An.apply(this,arguments)*g;return Mt=[],Gt=un(-hr[0]*g,-hr[1]*g,0).invert,Pn(Vn,Tr,yr,1),hr={type:"Polygon",coordinates:[Mt]},Mt=Gt=null,hr}return tr.center=function(hr){return arguments.length?(Tn="function"==typeof hr?hr:Ut([+hr[0],+hr[1]]),tr):Tn},tr.radius=function(hr){return arguments.length?(on="function"==typeof hr?hr:Ut(+hr),tr):on},tr.precision=function(hr){return arguments.length?(An="function"==typeof hr?hr:Ut(+hr),tr):An},tr},i.geoClipAntimeridian=ir,i.geoClipCircle=Bn,i.geoClipExtent=function(){var Mt,Gt,Tn,on=0,An=0,Vn=960,tr=500;return Tn={stream:function(hr){return Mt&&Gt===hr?Mt:Mt=mr(on,An,Vn,tr)(Gt=hr)},extent:function(hr){return arguments.length?(on=+hr[0][0],An=+hr[0][1],Vn=+hr[1][0],tr=+hr[1][1],Mt=Gt=null,Tn):[[on,An],[Vn,tr]]}}},i.geoClipRectangle=mr,i.geoConicConformal=function(){return Fn(La).scale(109.5).parallels([30,30])},i.geoConicConformalRaw=La,i.geoConicEqualArea=Qn,i.geoConicEqualAreaRaw=zn,i.geoConicEquidistant=function(){return Fn(Ba).scale(131.154).center([0,13.9389])},i.geoConicEquidistantRaw=Ba,i.geoContains=function(Mt,Gt){return(Mt&&fr.hasOwnProperty(Mt.type)?fr[Mt.type]:Dn)(Mt,Gt)},i.geoDistance=Zn,i.geoEqualEarth=function(){return wn(co).scale(177.158)},i.geoEqualEarthRaw=co,i.geoEquirectangular=function(){return wn(Ra).scale(152.63)},i.geoEquirectangularRaw=Ra,i.geoGnomonic=function(){return wn(Hs).scale(144.049).clipAngle(60)},i.geoGnomonicRaw=Hs,i.geoGraticule=Or,i.geoGraticule10=function(){return Or()()},i.geoIdentity=function(){var Mt,Gt,Tn,on,An,Vn,tr,hr=1,Tr=0,yr=0,Ir=1,Br=1,xr=0,Pr=null,ai=1,gi=1,ji=Ol({point:function(Mr,zi){var fa=Jr([Mr,zi]);this.stream.point(fa[0],fa[1])}}),ur=$r;function Ni(){return ai=hr*Ir,gi=hr*Br,Vn=tr=null,Jr}function Jr(Mr){var zi=Mr[0]*ai,fa=Mr[1]*gi;if(xr){var wa=fa*Mt-zi*Gt;zi=zi*Mt+fa*Gt,fa=wa}return[zi+Tr,fa+yr]}return Jr.invert=function(Mr){var zi=Mr[0]-Tr,fa=Mr[1]-yr;if(xr){var wa=fa*Mt+zi*Gt;zi=zi*Mt-fa*Gt,fa=wa}return[zi/ai,fa/gi]},Jr.stream=function(Mr){return Vn&&tr===Mr?Vn:Vn=ji(ur(tr=Mr))},Jr.postclip=function(Mr){return arguments.length?(ur=Mr,Pr=Tn=on=An=null,Ni()):ur},Jr.clipExtent=function(Mr){return arguments.length?(ur=null==Mr?(Pr=Tn=on=An=null,$r):mr(Pr=+Mr[0][0],Tn=+Mr[0][1],on=+Mr[1][0],An=+Mr[1][1]),Ni()):null==Pr?null:[[Pr,Tn],[on,An]]},Jr.scale=function(Mr){return arguments.length?(hr=+Mr,Ni()):hr},Jr.translate=function(Mr){return arguments.length?(Tr=+Mr[0],yr=+Mr[1],Ni()):[Tr,yr]},Jr.angle=function(Mr){return arguments.length?(Gt=L(xr=Mr%360*g),Mt=w(xr),Ni()):xr*d},Jr.reflectX=function(Mr){return arguments.length?(Ir=Mr?-1:1,Ni()):Ir<0},Jr.reflectY=function(Mr){return arguments.length?(Br=Mr?-1:1,Ni()):Br<0},Jr.fitExtent=function(Mr,zi){return tt(Jr,Mr,zi)},Jr.fitSize=function(Mr,zi){return ut(Jr,Mr,zi)},Jr.fitWidth=function(Mr,zi){return vt(Jr,Mr,zi)},Jr.fitHeight=function(Mr,zi){return Et(Jr,Mr,zi)},Jr},i.geoInterpolate=function(Mt,Gt){var Tn=Mt[0]*g,on=Mt[1]*g,An=Gt[0]*g,Vn=Gt[1]*g,tr=w(on),hr=L(on),Tr=w(Vn),yr=L(Vn),Ir=tr*w(Tn),Br=tr*L(Tn),xr=Tr*w(An),Pr=Tr*L(An),ai=2*R(A(S(Vn-on)+tr*Tr*S(An-Tn))),gi=L(ai),ji=ai?function(ur){var Ni=L(ur*=ai)/gi,Jr=L(ai-ur)/gi,Mr=Jr*Ir+Ni*xr,zi=Jr*Br+Ni*Pr,fa=Jr*hr+Ni*yr;return[_(zi,Mr)*d,_(fa,A(Mr*Mr+zi*zi))*d]}:function(){return[Tn*d,on*d]};return ji.distance=ai,ji},i.geoLength=mn,i.geoMercator=function(){return Qi(ei).scale(961/o)},i.geoMercatorRaw=ei,i.geoNaturalEarth1=function(){return wn(Gs).scale(175.295)},i.geoNaturalEarth1Raw=Gs,i.geoOrthographic=function(){return wn(Rs).scale(249.5).clipAngle(90+c)},i.geoOrthographicRaw=Rs,i.geoPath=function(Mt,Gt){var Tn,on,An=4.5;function Vn(tr){return tr&&("function"==typeof An&&on.pointRadius(+An.apply(this,arguments)),ae(tr,Tn(on))),on.result()}return Vn.area=function(tr){return ae(tr,Tn(Lr)),Lr.result()},Vn.measure=function(tr){return ae(tr,Tn(Zs)),Zs.result()},Vn.bounds=function(tr){return ae(tr,Tn(Ti)),Ti.result()},Vn.centroid=function(tr){return ae(tr,Tn(mo)),mo.result()},Vn.projection=function(tr){return arguments.length?(Tn=null==tr?(Mt=null,$r):(Mt=tr).stream,Vn):Mt},Vn.context=function(tr){return arguments.length?(on=null==tr?(Gt=null,new Ts):new mu(Gt=tr),"function"!=typeof An&&on.pointRadius(An),Vn):Gt},Vn.pointRadius=function(tr){return arguments.length?(An="function"==typeof tr?tr:(on.pointRadius(+tr),+tr),Vn):An},Vn.projection(Mt).context(Gt)},i.geoProjection=wn,i.geoProjectionMutator=En,i.geoRotation=Mn,i.geoStereographic=function(){return wn(Xs).scale(250).clipAngle(142)},i.geoStereographicRaw=Xs,i.geoStream=ae,i.geoTransform=function(Mt){return{stream:Ol(Mt)}},i.geoTransverseMercator=function(){var Mt=Qi(Ma),Gt=Mt.center,Tn=Mt.rotate;return Mt.center=function(on){return arguments.length?Gt([-on[1],on[0]]):[(on=Gt())[1],-on[0]]},Mt.rotate=function(on){return arguments.length?Tn([on[0],on[1],on.length>2?on[2]+90:90]):[(on=Tn())[0],on[1],on[2]-90]},Tn([0,0,90]).scale(159.155)},i.geoTransverseMercatorRaw=Ma,Object.defineProperty(i,"__esModule",{value:!0})},"object"==typeof X&&void 0!==G?m(X,h("d3-array")):m((i=i||self).d3=i.d3||{},i.d3)},{"d3-array":162}],170:[function(h,G,X){var i;i=this,function(i){"use strict";function m(pe,Te){return pe.parent===Te.parent?1:2}function b(pe,Te){return pe+Te.x}function p(pe,Te){return Math.max(pe,Te.y)}function r(pe){var Te=0,ye=pe.children,ke=ye&&ye.length;if(ke)for(;--ke>=0;)Te+=ye[ke].value;else Te=1;pe.value=Te}function u(pe,Te){var ye,ke,ze,je,Ie,Ce=new s(pe),_e=+pe.value&&(Ce.value=pe.value),we=[Ce];for(null==Te&&(Te=c);ye=we.pop();)if(_e&&(ye.value=+ye.data.value),(ze=Te(ye.data))&&(Ie=ze.length))for(ye.children=new Array(Ie),je=Ie-1;je>=0;--je)we.push(ke=ye.children[je]=new s(ze[je])),ke.parent=ye,ke.depth=ye.depth+1;return Ce.eachBefore(f)}function c(pe){return pe.children}function l(pe){pe.data=pe.data.data}function f(pe){var Te=0;do{pe.height=Te}while((pe=pe.parent)&&pe.height<++Te)}function s(pe){this.data=pe,this.depth=this.height=0,this.parent=null}s.prototype=u.prototype={constructor:s,count:function(){return this.eachAfter(r)},each:function(pe){var Te,ye,ke,ze,je=this,Ie=[je];do{for(Te=Ie.reverse(),Ie=[];je=Te.pop();)if(pe(je),ye=je.children)for(ke=0,ze=ye.length;ke<ze;++ke)Ie.push(ye[ke])}while(Ie.length);return this},eachAfter:function(pe){for(var Te,ye,ke,ze=this,je=[ze],Ie=[];ze=je.pop();)if(Ie.push(ze),Te=ze.children)for(ye=0,ke=Te.length;ye<ke;++ye)je.push(Te[ye]);for(;ze=Ie.pop();)pe(ze);return this},eachBefore:function(pe){for(var Te,ye,ke=this,ze=[ke];ke=ze.pop();)if(pe(ke),Te=ke.children)for(ye=Te.length-1;ye>=0;--ye)ze.push(Te[ye]);return this},sum:function(pe){return this.eachAfter(function(Te){for(var ye=+pe(Te.data)||0,ke=Te.children,ze=ke&&ke.length;--ze>=0;)ye+=ke[ze].value;Te.value=ye})},sort:function(pe){return this.eachBefore(function(Te){Te.children&&Te.children.sort(pe)})},path:function(pe){for(var Te=this,ye=function(je,Ie){if(je===Ie)return je;var Ce=je.ancestors(),_e=Ie.ancestors(),we=null;for(je=Ce.pop(),Ie=_e.pop();je===Ie;)we=je,je=Ce.pop(),Ie=_e.pop();return we}(Te,pe),ke=[Te];Te!==ye;)ke.push(Te=Te.parent);for(var ze=ke.length;pe!==ye;)ke.splice(ze,0,pe),pe=pe.parent;return ke},ancestors:function(){for(var pe=this,Te=[pe];pe=pe.parent;)Te.push(pe);return Te},descendants:function(){var pe=[];return this.each(function(Te){pe.push(Te)}),pe},leaves:function(){var pe=[];return this.eachBefore(function(Te){Te.children||pe.push(Te)}),pe},links:function(){var pe=this,Te=[];return pe.each(function(ye){ye!==pe&&Te.push({source:ye.parent,target:ye})}),Te},copy:function(){return u(this).eachBefore(l)}};var o=Array.prototype.slice;function d(pe){for(var Te,ye,ke=0,ze=(pe=function(Ie){for(var Ce,_e,we=Ie.length;we;)_e=Math.random()*we--|0,Ce=Ie[we],Ie[we]=Ie[_e],Ie[_e]=Ce;return Ie}(o.call(pe))).length,je=[];ke<ze;)Te=pe[ke],ye&&v(ye,Te)?++ke:(ye=w(je=g(je,Te)),ke=0);return ye}function g(pe,Te){var ye,ke;if(_(Te,pe))return[Te];for(ye=0;ye<pe.length;++ye)if(y(Te,pe[ye])&&_(x(pe[ye],Te),pe))return[pe[ye],Te];for(ye=0;ye<pe.length-1;++ye)for(ke=ye+1;ke<pe.length;++ke)if(y(x(pe[ye],pe[ke]),Te)&&y(x(pe[ye],Te),pe[ke])&&y(x(pe[ke],Te),pe[ye])&&_(E(pe[ye],pe[ke],Te),pe))return[pe[ye],pe[ke],Te];throw new Error}function y(pe,Te){var ye=pe.r-Te.r,ke=Te.x-pe.x,ze=Te.y-pe.y;return ye<0||ye*ye<ke*ke+ze*ze}function v(pe,Te){var ye=pe.r-Te.r+1e-6,ke=Te.x-pe.x,ze=Te.y-pe.y;return ye>0&&ye*ye>ke*ke+ze*ze}function _(pe,Te){for(var ye=0;ye<Te.length;++ye)if(!v(pe,Te[ye]))return!1;return!0}function w(pe){switch(pe.length){case 1:return{x:(Te=pe[0]).x,y:Te.y,r:Te.r};case 2:return x(pe[0],pe[1]);case 3:return E(pe[0],pe[1],pe[2])}var Te}function x(pe,Te){var ye=pe.x,ke=pe.y,ze=pe.r,je=Te.x,Ie=Te.y,Ce=Te.r,_e=je-ye,we=Ie-ke,Se=Ce-ze,Oe=Math.sqrt(_e*_e+we*we);return{x:(ye+je+_e/Oe*Se)/2,y:(ke+Ie+we/Oe*Se)/2,r:(Oe+ze+Ce)/2}}function E(pe,Te,ye){var ke=pe.x,ze=pe.y,je=pe.r,Ie=Te.x,Ce=Te.y,_e=Te.r,we=ye.x,Se=ye.y,Oe=ye.r,Be=ke-Ie,He=ke-we,Xe=ze-Ce,nt=ze-Se,et=_e-je,qe=Oe-je,Ye=ke*ke+ze*ze-je*je,ot=Ye-Ie*Ie-Ce*Ce+_e*_e,at=Ye-we*we-Se*Se+Oe*Oe,ct=He*Xe-Be*nt,_t=(Xe*at-nt*ot)/(2*ct)-ke,xt=(nt*et-Xe*qe)/ct,Ht=(He*ot-Be*at)/(2*ct)-ze,At=(Be*qe-He*et)/ct,ht=xt*xt+At*At-1,st=2*(je+_t*xt+Ht*At),Bt=_t*_t+Ht*Ht-je*je,gn=-(ht?(st+Math.sqrt(st*st-4*ht*Bt))/(2*ht):Bt/st);return{x:ke+_t+xt*gn,y:ze+Ht+At*gn,r:gn}}function k(pe,Te,ye){var ke,ze,je,Ie,Ce=pe.x-Te.x,_e=pe.y-Te.y,we=Ce*Ce+_e*_e;we?(ze=Te.r+ye.r,Ie=pe.r+ye.r,(ze*=ze)>(Ie*=Ie)?(ke=(we+Ie-ze)/(2*we),je=Math.sqrt(Math.max(0,Ie/we-ke*ke)),ye.x=pe.x-ke*Ce-je*_e,ye.y=pe.y-ke*_e+je*Ce):(ke=(we+ze-Ie)/(2*we),je=Math.sqrt(Math.max(0,ze/we-ke*ke)),ye.x=Te.x+ke*Ce-je*_e,ye.y=Te.y+ke*_e+je*Ce)):(ye.x=Te.x+ye.r,ye.y=Te.y)}function C(pe,Te){var ye=pe.r+Te.r-1e-6,ke=Te.x-pe.x,ze=Te.y-pe.y;return ye>0&&ye*ye>ke*ke+ze*ze}function L(pe){var Te=pe._,ye=pe.next._,ke=Te.r+ye.r,ze=(Te.x*ye.r+ye.x*Te.r)/ke,je=(Te.y*ye.r+ye.y*Te.r)/ke;return ze*ze+je*je}function P(pe){this._=pe,this.next=null,this.previous=null}function A(pe){if(!(ze=pe.length))return 0;var Te,ye,ke,ze,je,Ie,Ce,_e,we,Se,Oe;if((Te=pe[0]).x=0,Te.y=0,!(ze>1))return Te.r;if(Te.x=-(ye=pe[1]).r,ye.x=Te.r,ye.y=0,!(ze>2))return Te.r+ye.r;k(ye,Te,ke=pe[2]),Te=new P(Te),ye=new P(ye),ke=new P(ke),Te.next=ke.previous=ye,ye.next=Te.previous=ke,ke.next=ye.previous=Te;e:for(Ce=3;Ce<ze;++Ce){k(Te._,ye._,ke=pe[Ce]),ke=new P(ke),_e=ye.next,we=Te.previous,Se=ye._.r,Oe=Te._.r;do{if(Se<=Oe){if(C(_e._,ke._)){Te.next=ye=_e,ye.previous=Te,--Ce;continue e}Se+=_e._.r,_e=_e.next}else{if(C(we._,ke._)){(Te=we).next=ye,ye.previous=Te,--Ce;continue e}Oe+=we._.r,we=we.previous}}while(_e!==we.next);for(ke.previous=Te,ke.next=ye,Te.next=ye.previous=ye=ke,je=L(Te);(ke=ke.next)!==ye;)(Ie=L(ke))<je&&(Te=ke,je=Ie);ye=Te.next}for(Te=[ye._],ke=ye;(ke=ke.next)!==ye;)Te.push(ke._);for(ke=d(Te),Ce=0;Ce<ze;++Ce)(Te=pe[Ce]).x-=ke.x,Te.y-=ke.y;return ke.r}function I(pe){return null==pe?null:D(pe)}function D(pe){if("function"!=typeof pe)throw new Error;return pe}function R(){return 0}function S(pe){return function(){return pe}}function N(pe){return Math.sqrt(pe.value)}function B(pe){return function(Te){Te.children||(Te.r=Math.max(0,+pe(Te)||0))}}function H(pe,Te){return function(ye){if(ke=ye.children){var ke,ze,je,Ie=ke.length,Ce=pe(ye)*Te||0;if(Ce)for(ze=0;ze<Ie;++ze)ke[ze].r+=Ce;if(je=A(ke),Ce)for(ze=0;ze<Ie;++ze)ke[ze].r-=Ce;ye.r=je+Ce}}}function Y(pe){return function(Te){var ye=Te.parent;Te.r*=pe,ye&&(Te.x=ye.x+pe*Te.x,Te.y=ye.y+pe*Te.y)}}function Q(pe){pe.x0=Math.round(pe.x0),pe.y0=Math.round(pe.y0),pe.x1=Math.round(pe.x1),pe.y1=Math.round(pe.y1)}function ne(pe,Te,ye,ke,ze){for(var je,Ie=pe.children,Ce=-1,_e=Ie.length,we=pe.value&&(ke-Te)/pe.value;++Ce<_e;)(je=Ie[Ce]).y0=ye,je.y1=ze,je.x0=Te,je.x1=Te+=je.value*we}var ae={depth:-1},te={};function K(pe){return pe.id}function q(pe){return pe.parentId}function re(pe,Te){return pe.parent===Te.parent?1:2}function V(pe){var Te=pe.children;return Te?Te[0]:pe.t}function W(pe){var Te=pe.children;return Te?Te[Te.length-1]:pe.t}function Z(pe,Te,ye){var ke=ye/(Te.i-pe.i);Te.c-=ke,Te.s+=ye,pe.c+=ke,Te.z+=ye,Te.m+=ye}function oe(pe,Te,ye){return pe.a.parent===Te.parent?pe.a:ye}function ie(pe,Te){this._=pe,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Te}function ue(pe,Te,ye,ke,ze){for(var je,Ie=pe.children,Ce=-1,_e=Ie.length,we=pe.value&&(ze-ye)/pe.value;++Ce<_e;)(je=Ie[Ce]).x0=Te,je.x1=ke,je.y0=ye,je.y1=ye+=je.value*we}ie.prototype=Object.create(s.prototype);var fe=(1+Math.sqrt(5))/2;function he(pe,Te,ye,ke,ze,je){for(var Ie,Ce,_e,we,Se,Oe,Be,He,Xe,nt,et,qe=[],Ye=Te.children,ot=0,at=0,ct=Ye.length,_t=Te.value;ot<ct;){_e=ze-ye,we=je-ke;do{Se=Ye[at++].value}while(!Se&&at<ct);for(Oe=Be=Se,et=Se*Se*(nt=Math.max(we/_e,_e/we)/(_t*pe)),Xe=Math.max(Be/et,et/Oe);at<ct;++at){if(Se+=Ce=Ye[at].value,Ce<Oe&&(Oe=Ce),Ce>Be&&(Be=Ce),et=Se*Se*nt,(He=Math.max(Be/et,et/Oe))>Xe){Se-=Ce;break}Xe=He}qe.push(Ie={value:Se,dice:_e<we,children:Ye.slice(ot,at)}),Ie.dice?ne(Ie,ye,ke,ze,_t?ke+=we*Se/_t:je):ue(Ie,ye,ke,_t?ye+=_e*Se/_t:ze,je),_t-=Se,ot=at}return qe}var de=function pe(Te){function ye(ke,ze,je,Ie,Ce){he(Te,ke,ze,je,Ie,Ce)}return ye.ratio=function(ke){return pe((ke=+ke)>1?ke:1)},ye}(fe),be=function pe(Te){function ye(ke,ze,je,Ie,Ce){if((_e=ke._squarify)&&_e.ratio===Te)for(var _e,we,Se,Oe,Be,He=-1,Xe=_e.length,nt=ke.value;++He<Xe;){for(Se=(we=_e[He]).children,Oe=we.value=0,Be=Se.length;Oe<Be;++Oe)we.value+=Se[Oe].value;we.dice?ne(we,ze,je,Ie,je+=(Ce-je)*we.value/nt):ue(we,ze,je,ze+=(Ie-ze)*we.value/nt,Ce),nt-=we.value}else ke._squarify=_e=he(Te,ke,ze,je,Ie,Ce),_e.ratio=Te}return ye.ratio=function(ke){return pe((ke=+ke)>1?ke:1)},ye}(fe);i.cluster=function(){var pe=m,Te=1,ye=1,ke=!1;function ze(je){var Ie,Ce=0;je.eachAfter(function(Be){var Xe,He=Be.children;He?(Be.x=(Xe=He).reduce(b,0)/Xe.length,Be.y=function(Xe){return 1+Xe.reduce(p,0)}(He)):(Be.x=Ie?Ce+=pe(Be,Ie):0,Be.y=0,Ie=Be)});var _e=function(Be){for(var He;He=Be.children;)Be=He[0];return Be}(je),we=function(Be){for(var He;He=Be.children;)Be=He[He.length-1];return Be}(je),Se=_e.x-pe(_e,we)/2,Oe=we.x+pe(we,_e)/2;return je.eachAfter(ke?function(Be){Be.x=(Be.x-je.x)*Te,Be.y=(je.y-Be.y)*ye}:function(Be){Be.x=(Be.x-Se)/(Oe-Se)*Te,Be.y=(1-(je.y?Be.y/je.y:1))*ye})}return ze.separation=function(je){return arguments.length?(pe=je,ze):pe},ze.size=function(je){return arguments.length?(ke=!1,Te=+je[0],ye=+je[1],ze):ke?null:[Te,ye]},ze.nodeSize=function(je){return arguments.length?(ke=!0,Te=+je[0],ye=+je[1],ze):ke?[Te,ye]:null},ze},i.hierarchy=u,i.pack=function(){var pe=null,Te=1,ye=1,ke=R;function ze(je){return je.x=Te/2,je.y=ye/2,pe?je.eachBefore(B(pe)).eachAfter(H(ke,.5)).eachBefore(Y(1)):je.eachBefore(B(N)).eachAfter(H(R,1)).eachAfter(H(ke,je.r/Math.min(Te,ye))).eachBefore(Y(Math.min(Te,ye)/(2*je.r))),je}return ze.radius=function(je){return arguments.length?(pe=I(je),ze):pe},ze.size=function(je){return arguments.length?(Te=+je[0],ye=+je[1],ze):[Te,ye]},ze.padding=function(je){return arguments.length?(ke="function"==typeof je?je:S(+je),ze):ke},ze},i.packEnclose=d,i.packSiblings=function(pe){return A(pe),pe},i.partition=function(){var pe=1,Te=1,ye=0,ke=!1;function ze(je){var Ce,_e,Ie=je.height+1;return je.x0=je.y0=ye,je.x1=pe,je.y1=Te/Ie,je.eachBefore((Ce=Te,_e=Ie,function(we){we.children&&ne(we,we.x0,Ce*(we.depth+1)/_e,we.x1,Ce*(we.depth+2)/_e);var Se=we.x0,Oe=we.y0,Be=we.x1-ye,He=we.y1-ye;Be<Se&&(Se=Be=(Se+Be)/2),He<Oe&&(Oe=He=(Oe+He)/2),we.x0=Se,we.y0=Oe,we.x1=Be,we.y1=He})),ke&&je.eachBefore(Q),je}return ze.round=function(je){return arguments.length?(ke=!!je,ze):ke},ze.size=function(je){return arguments.length?(pe=+je[0],Te=+je[1],ze):[pe,Te]},ze.padding=function(je){return arguments.length?(ye=+je,ze):ye},ze},i.stratify=function(){var pe=K,Te=q;function ye(ke){var ze,je,Ie,Ce,_e,we,Se,Oe=ke.length,Be=new Array(Oe),He={};for(je=0;je<Oe;++je)_e=Be[je]=new s(ze=ke[je]),null!=(we=pe(ze,je,ke))&&(we+="")&&(He[Se="$"+(_e.id=we)]=Se in He?te:_e);for(je=0;je<Oe;++je)if(_e=Be[je],null!=(we=Te(ke[je],je,ke))&&(we+="")){if(!(Ce=He["$"+we]))throw new Error("missing: "+we);if(Ce===te)throw new Error("ambiguous: "+we);Ce.children?Ce.children.push(_e):Ce.children=[_e],_e.parent=Ce}else{if(Ie)throw new Error("multiple roots");Ie=_e}if(!Ie)throw new Error("no root");if(Ie.parent=ae,Ie.eachBefore(function(Xe){Xe.depth=Xe.parent.depth+1,--Oe}).eachBefore(f),Ie.parent=null,Oe>0)throw new Error("cycle");return Ie}return ye.id=function(ke){return arguments.length?(pe=D(ke),ye):pe},ye.parentId=function(ke){return arguments.length?(Te=D(ke),ye):Te},ye},i.tree=function(){var pe=re,Te=1,ye=1,ke=null;function ze(_e){var we=function(qe){for(var Ye,ot,at,ct,_t,xt=new ie(qe,0),Ht=[xt];Ye=Ht.pop();)if(at=Ye._.children)for(Ye.children=new Array(_t=at.length),ct=_t-1;ct>=0;--ct)Ht.push(ot=Ye.children[ct]=new ie(at[ct],ct)),ot.parent=Ye;return(xt.parent=new ie(null,0)).children=[xt],xt}(_e);if(we.eachAfter(je),we.parent.m=-we.z,we.eachBefore(Ie),ke)_e.eachBefore(Ce);else{var Se=_e,Oe=_e,Be=_e;_e.eachBefore(function(qe){qe.x<Se.x&&(Se=qe),qe.x>Oe.x&&(Oe=qe),qe.depth>Be.depth&&(Be=qe)});var He=Se===Oe?1:pe(Se,Oe)/2,Xe=He-Se.x,nt=Te/(Oe.x+He+Xe),et=ye/(Be.depth||1);_e.eachBefore(function(qe){qe.x=(qe.x+Xe)*nt,qe.y=qe.depth*et})}return _e}function je(_e){var we=_e.children,Se=_e.parent.children,Oe=_e.i?Se[_e.i-1]:null;if(we){!function(He){for(var Xe,nt=0,et=0,qe=He.children,Ye=qe.length;--Ye>=0;)(Xe=qe[Ye]).z+=nt,Xe.m+=nt,nt+=Xe.s+(et+=Xe.c)}(_e);var Be=(we[0].z+we[we.length-1].z)/2;Oe?(_e.z=Oe.z+pe(_e._,Oe._),_e.m=_e.z-Be):_e.z=Be}else Oe&&(_e.z=Oe.z+pe(_e._,Oe._));_e.parent.A=function(He,Xe,nt){if(Xe){for(var et,qe=He,Ye=He,ot=Xe,at=qe.parent.children[0],ct=qe.m,_t=Ye.m,xt=ot.m,Ht=at.m;ot=W(ot),qe=V(qe),ot&&qe;)at=V(at),(Ye=W(Ye)).a=He,(et=ot.z+xt-qe.z-ct+pe(ot._,qe._))>0&&(Z(oe(ot,He,nt),He,et),ct+=et,_t+=et),xt+=ot.m,ct+=qe.m,Ht+=at.m,_t+=Ye.m;ot&&!W(Ye)&&(Ye.t=ot,Ye.m+=xt-_t),qe&&!V(at)&&(at.t=qe,at.m+=ct-Ht,nt=He)}return nt}(_e,Oe,_e.parent.A||Se[0])}function Ie(_e){_e._.x=_e.z+_e.parent.m,_e.m+=_e.parent.m}function Ce(_e){_e.x*=Te,_e.y=_e.depth*ye}return ze.separation=function(_e){return arguments.length?(pe=_e,ze):pe},ze.size=function(_e){return arguments.length?(ke=!1,Te=+_e[0],ye=+_e[1],ze):ke?null:[Te,ye]},ze.nodeSize=function(_e){return arguments.length?(ke=!0,Te=+_e[0],ye=+_e[1],ze):ke?[Te,ye]:null},ze},i.treemap=function(){var pe=de,Te=!1,ye=1,ke=1,ze=[0],je=R,Ie=R,Ce=R,_e=R,we=R;function Se(Be){return Be.x0=Be.y0=0,Be.x1=ye,Be.y1=ke,Be.eachBefore(Oe),ze=[0],Te&&Be.eachBefore(Q),Be}function Oe(Be){var He=ze[Be.depth],Xe=Be.x0+He,nt=Be.y0+He,et=Be.x1-He,qe=Be.y1-He;et<Xe&&(Xe=et=(Xe+et)/2),qe<nt&&(nt=qe=(nt+qe)/2),Be.x0=Xe,Be.y0=nt,Be.x1=et,Be.y1=qe,Be.children&&(He=ze[Be.depth+1]=je(Be)/2,Xe+=we(Be)-He,nt+=Ie(Be)-He,(et-=Ce(Be)-He)<Xe&&(Xe=et=(Xe+et)/2),(qe-=_e(Be)-He)<nt&&(nt=qe=(nt+qe)/2),pe(Be,Xe,nt,et,qe))}return Se.round=function(Be){return arguments.length?(Te=!!Be,Se):Te},Se.size=function(Be){return arguments.length?(ye=+Be[0],ke=+Be[1],Se):[ye,ke]},Se.tile=function(Be){return arguments.length?(pe=D(Be),Se):pe},Se.padding=function(Be){return arguments.length?Se.paddingInner(Be).paddingOuter(Be):Se.paddingInner()},Se.paddingInner=function(Be){return arguments.length?(je="function"==typeof Be?Be:S(+Be),Se):je},Se.paddingOuter=function(Be){return arguments.length?Se.paddingTop(Be).paddingRight(Be).paddingBottom(Be).paddingLeft(Be):Se.paddingTop()},Se.paddingTop=function(Be){return arguments.length?(Ie="function"==typeof Be?Be:S(+Be),Se):Ie},Se.paddingRight=function(Be){return arguments.length?(Ce="function"==typeof Be?Be:S(+Be),Se):Ce},Se.paddingBottom=function(Be){return arguments.length?(_e="function"==typeof Be?Be:S(+Be),Se):_e},Se.paddingLeft=function(Be){return arguments.length?(we="function"==typeof Be?Be:S(+Be),Se):we},Se},i.treemapBinary=function(pe,Te,ye,ke,ze){var je,Ie,Ce=pe.children,_e=Ce.length,we=new Array(_e+1);for(we[0]=Ie=je=0;je<_e;++je)we[je+1]=Ie+=Ce[je].value;!function Se(Oe,Be,He,Xe,nt,et,qe){if(Oe>=Be-1){var Ye=Ce[Oe];return Ye.x0=Xe,Ye.y0=nt,Ye.x1=et,void(Ye.y1=qe)}for(var ot=we[Oe],at=He/2+ot,ct=Oe+1,_t=Be-1;ct<_t;){var xt=ct+_t>>>1;we[xt]<at?ct=xt+1:_t=xt}at-we[ct-1]<we[ct]-at&&Oe+1<ct&&--ct;var Ht=we[ct]-ot,At=He-Ht;if(et-Xe>qe-nt){var ht=(Xe*At+et*Ht)/He;Se(Oe,ct,Ht,Xe,nt,ht,qe),Se(ct,Be,At,ht,nt,et,qe)}else{var st=(nt*At+qe*Ht)/He;Se(Oe,ct,Ht,Xe,nt,et,st),Se(ct,Be,At,Xe,st,et,qe)}}(0,_e,pe.value,Te,ye,ke,ze)},i.treemapDice=ne,i.treemapResquarify=be,i.treemapSlice=ue,i.treemapSliceDice=function(pe,Te,ye,ke,ze){(1&pe.depth?ue:ne)(pe,Te,ye,ke,ze)},i.treemapSquarify=de,Object.defineProperty(i,"__esModule",{value:!0})}("object"==typeof X&&void 0!==G?X:(i=i||self).d3=i.d3||{})},{}],171:[function(h,G,X){var i,m;i=this,m=function(i,m){"use strict";function b(fe,he,de,be,pe){var Te=fe*fe,ye=Te*fe;return((1-3*fe+3*Te-ye)*he+(4-6*Te+3*ye)*de+(1+3*fe+3*Te-3*ye)*be+ye*pe)/6}function p(fe){var he=fe.length-1;return function(de){var be=de<=0?de=0:de>=1?(de=1,he-1):Math.floor(de*he),pe=fe[be],Te=fe[be+1];return b((de-be/he)*he,be>0?fe[be-1]:2*pe-Te,pe,Te,be<he-1?fe[be+2]:2*Te-pe)}}function r(fe){var he=fe.length;return function(de){var be=Math.floor(((de%=1)<0?++de:de)*he);return b((de-be/he)*he,fe[(be+he-1)%he],fe[be%he],fe[(be+1)%he],fe[(be+2)%he])}}function u(fe){return function(){return fe}}function c(fe,he){return function(de){return fe+de*he}}function l(fe,he){var de=he-fe;return de?c(fe,de>180||de<-180?de-360*Math.round(de/360):de):u(isNaN(fe)?he:fe)}function s(fe,he){var de=he-fe;return de?c(fe,de):u(isNaN(fe)?he:fe)}var o=function fe(he){var de=function(fe){return 1==(fe=+fe)?s:function(he,de){return de-he?(be=he,pe=de,Te=fe,be=Math.pow(be,Te),pe=Math.pow(pe,Te)-be,Te=1/Te,function(ye){return Math.pow(be+ye*pe,Te)}):u(isNaN(he)?de:he);var be,pe,Te}}(he);function be(pe,Te){var ye=de((pe=m.rgb(pe)).r,(Te=m.rgb(Te)).r),ke=de(pe.g,Te.g),ze=de(pe.b,Te.b),je=s(pe.opacity,Te.opacity);return function(Ie){return pe.r=ye(Ie),pe.g=ke(Ie),pe.b=ze(Ie),pe.opacity=je(Ie),pe+""}}return be.gamma=fe,be}(1);function d(fe){return function(he){var de,be,pe=he.length,Te=new Array(pe),ye=new Array(pe),ke=new Array(pe);for(de=0;de<pe;++de)be=m.rgb(he[de]),Te[de]=be.r||0,ye[de]=be.g||0,ke[de]=be.b||0;return Te=fe(Te),ye=fe(ye),ke=fe(ke),be.opacity=1,function(ze){return be.r=Te(ze),be.g=ye(ze),be.b=ke(ze),be+""}}}var g=d(p),y=d(r);function v(fe,he){he||(he=[]);var de,be=fe?Math.min(he.length,fe.length):0,pe=he.slice();return function(Te){for(de=0;de<be;++de)pe[de]=fe[de]*(1-Te)+he[de]*Te;return pe}}function _(fe){return ArrayBuffer.isView(fe)&&!(fe instanceof DataView)}function w(fe,he){var de,be=he?he.length:0,pe=fe?Math.min(be,fe.length):0,Te=new Array(pe),ye=new Array(be);for(de=0;de<pe;++de)Te[de]=A(fe[de],he[de]);for(;de<be;++de)ye[de]=he[de];return function(ke){for(de=0;de<pe;++de)ye[de]=Te[de](ke);return ye}}function x(fe,he){var de=new Date;return fe=+fe,he=+he,function(be){return de.setTime(fe*(1-be)+he*be),de}}function E(fe,he){return fe=+fe,he=+he,function(de){return fe*(1-de)+he*de}}function k(fe,he){var de,be={},pe={};for(de in null!==fe&&"object"==typeof fe||(fe={}),null!==he&&"object"==typeof he||(he={}),he)de in fe?be[de]=A(fe[de],he[de]):pe[de]=he[de];return function(Te){for(de in be)pe[de]=be[de](Te);return pe}}var C=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,L=new RegExp(C.source,"g");function P(fe,he){var de,be,pe,je,Te=C.lastIndex=L.lastIndex=0,ye=-1,ke=[],ze=[];for(fe+="",he+="";(de=C.exec(fe))&&(be=L.exec(he));)(pe=be.index)>Te&&(pe=he.slice(Te,pe),ke[ye]?ke[ye]+=pe:ke[++ye]=pe),(de=de[0])===(be=be[0])?ke[ye]?ke[ye]+=be:ke[++ye]=be:(ke[++ye]=null,ze.push({i:ye,x:E(de,be)})),Te=L.lastIndex;return Te<he.length&&(pe=he.slice(Te),ke[ye]?ke[ye]+=pe:ke[++ye]=pe),ke.length<2?ze[0]?(je=ze[0].x,function(Ie){return je(Ie)+""}):function(je){return function(){return je}}(he):(he=ze.length,function(je){for(var Ie,Ce=0;Ce<he;++Ce)ke[(Ie=ze[Ce]).i]=Ie.x(je);return ke.join("")})}function A(fe,he){var de,be=typeof he;return null==he||"boolean"===be?u(he):("number"===be?E:"string"===be?(de=m.color(he))?(he=de,o):P:he instanceof m.color?o:he instanceof Date?x:_(he)?v:Array.isArray(he)?w:"function"!=typeof he.valueOf&&"function"!=typeof he.toString||isNaN(he)?k:E)(fe,he)}var I,D,R,S,N=180/Math.PI,B={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function H(fe,he,de,be,pe,Te){var ye,ke,ze;return(ye=Math.sqrt(fe*fe+he*he))&&(fe/=ye,he/=ye),(ze=fe*de+he*be)&&(de-=fe*ze,be-=he*ze),(ke=Math.sqrt(de*de+be*be))&&(de/=ke,be/=ke,ze/=ke),fe*be<he*de&&(fe=-fe,he=-he,ze=-ze,ye=-ye),{translateX:pe,translateY:Te,rotate:Math.atan2(he,fe)*N,skewX:Math.atan(ze)*N,scaleX:ye,scaleY:ke}}function Y(fe,he,de,be){function pe(Te){return Te.length?Te.pop()+" ":""}return function(Te,ye){var je,Ie,Ce,ke=[],ze=[];return Te=fe(Te),ye=fe(ye),function(je,Ie,Ce,_e,we,Se){if(je!==Ce||Ie!==_e){var Oe=we.push("translate(",null,he,null,de);Se.push({i:Oe-4,x:E(je,Ce)},{i:Oe-2,x:E(Ie,_e)})}else(Ce||_e)&&we.push("translate("+Ce+he+_e+de)}(Te.translateX,Te.translateY,ye.translateX,ye.translateY,ke,ze),Ce=ke,(je=Te.rotate)!==(Ie=ye.rotate)?(je-Ie>180?Ie+=360:Ie-je>180&&(je+=360),ze.push({i:Ce.push(pe(Ce)+"rotate(",null,be)-2,x:E(je,Ie)})):Ie&&Ce.push(pe(Ce)+"rotate("+Ie+be),function(je,Ie,Ce,_e){je!==Ie?_e.push({i:Ce.push(pe(Ce)+"skewX(",null,be)-2,x:E(je,Ie)}):Ie&&Ce.push(pe(Ce)+"skewX("+Ie+be)}(Te.skewX,ye.skewX,ke,ze),function(je,Ie,Ce,_e,we,Se){if(je!==Ce||Ie!==_e){var Oe=we.push(pe(we)+"scale(",null,",",null,")");Se.push({i:Oe-4,x:E(je,Ce)},{i:Oe-2,x:E(Ie,_e)})}else 1===Ce&&1===_e||we.push(pe(we)+"scale("+Ce+","+_e+")")}(Te.scaleX,Te.scaleY,ye.scaleX,ye.scaleY,ke,ze),Te=ye=null,function(je){for(var Ie,Ce=-1,_e=ze.length;++Ce<_e;)ke[(Ie=ze[Ce]).i]=Ie.x(je);return ke.join("")}}}var Q=Y(function(fe){return"none"===fe?B:(I||(I=document.createElement("DIV"),D=document.documentElement,R=document.defaultView),I.style.transform=fe,fe=R.getComputedStyle(D.appendChild(I),null).getPropertyValue("transform"),D.removeChild(I),H(+(fe=fe.slice(7,-1).split(","))[0],+fe[1],+fe[2],+fe[3],+fe[4],+fe[5]))},"px, ","px)","deg)"),ne=Y(function(fe){return null==fe?B:(S||(S=document.createElementNS("http://www.w3.org/2000/svg","g")),S.setAttribute("transform",fe),(fe=S.transform.baseVal.consolidate())?H((fe=fe.matrix).a,fe.b,fe.c,fe.d,fe.e,fe.f):B)},", ",")",")"),ae=Math.SQRT2;function te(fe){return((fe=Math.exp(fe))+1/fe)/2}function K(fe){return function(he,de){var be=fe((he=m.hsl(he)).h,(de=m.hsl(de)).h),pe=s(he.s,de.s),Te=s(he.l,de.l),ye=s(he.opacity,de.opacity);return function(ke){return he.h=be(ke),he.s=pe(ke),he.l=Te(ke),he.opacity=ye(ke),he+""}}}var q=K(l),re=K(s);function V(fe){return function(he,de){var be=fe((he=m.hcl(he)).h,(de=m.hcl(de)).h),pe=s(he.c,de.c),Te=s(he.l,de.l),ye=s(he.opacity,de.opacity);return function(ke){return he.h=be(ke),he.c=pe(ke),he.l=Te(ke),he.opacity=ye(ke),he+""}}}var W=V(l),Z=V(s);function oe(fe){return function he(de){function be(pe,Te){var ye=fe((pe=m.cubehelix(pe)).h,(Te=m.cubehelix(Te)).h),ke=s(pe.s,Te.s),ze=s(pe.l,Te.l),je=s(pe.opacity,Te.opacity);return function(Ie){return pe.h=ye(Ie),pe.s=ke(Ie),pe.l=ze(Math.pow(Ie,de)),pe.opacity=je(Ie),pe+""}}return de=+de,be.gamma=he,be}(1)}var ie=oe(l),ue=oe(s);i.interpolate=A,i.interpolateArray=function(fe,he){return(_(he)?v:w)(fe,he)},i.interpolateBasis=p,i.interpolateBasisClosed=r,i.interpolateCubehelix=ie,i.interpolateCubehelixLong=ue,i.interpolateDate=x,i.interpolateDiscrete=function(fe){var he=fe.length;return function(de){return fe[Math.max(0,Math.min(he-1,Math.floor(de*he)))]}},i.interpolateHcl=W,i.interpolateHclLong=Z,i.interpolateHsl=q,i.interpolateHslLong=re,i.interpolateHue=function(fe,he){var de=l(+fe,+he);return function(be){var pe=de(be);return pe-360*Math.floor(pe/360)}},i.interpolateLab=function(fe,he){var de=s((fe=m.lab(fe)).l,(he=m.lab(he)).l),be=s(fe.a,he.a),pe=s(fe.b,he.b),Te=s(fe.opacity,he.opacity);return function(ye){return fe.l=de(ye),fe.a=be(ye),fe.b=pe(ye),fe.opacity=Te(ye),fe+""}},i.interpolateNumber=E,i.interpolateNumberArray=v,i.interpolateObject=k,i.interpolateRgb=o,i.interpolateRgbBasis=g,i.interpolateRgbBasisClosed=y,i.interpolateRound=function(fe,he){return fe=+fe,he=+he,function(de){return Math.round(fe*(1-de)+he*de)}},i.interpolateString=P,i.interpolateTransformCss=Q,i.interpolateTransformSvg=ne,i.interpolateZoom=function(fe,he){var de,be,pe=fe[0],Te=fe[1],ye=fe[2],je=he[2],Ie=he[0]-pe,Ce=he[1]-Te,_e=Ie*Ie+Ce*Ce;if(_e<1e-12)be=Math.log(je/ye)/ae,de=function(Xe){return[pe+Xe*Ie,Te+Xe*Ce,ye*Math.exp(ae*Xe*be)]};else{var we=Math.sqrt(_e),Se=(je*je-ye*ye+4*_e)/(2*ye*2*we),Oe=(je*je-ye*ye-4*_e)/(2*je*2*we),Be=Math.log(Math.sqrt(Se*Se+1)-Se),He=Math.log(Math.sqrt(Oe*Oe+1)-Oe);be=(He-Be)/ae,de=function(Xe){var nt,ot,et=Xe*be,qe=te(Be),Ye=ye/(2*we)*(qe*(nt=ae*et+Be,((nt=Math.exp(2*nt))-1)/(nt+1))-(ot=Be,((ot=Math.exp(ot))-1/ot)/2));return[pe+Ye*Ie,Te+Ye*Ce,ye*qe/te(ae*et+Be)]}}return de.duration=1e3*be,de},i.piecewise=function(fe,he){for(var de=0,be=he.length-1,pe=he[0],Te=new Array(be<0?0:be);de<be;)Te[de]=fe(pe,pe=he[++de]);return function(ye){var ke=Math.max(0,Math.min(be-1,Math.floor(ye*=be)));return Te[ke](ye-ke)}},i.quantize=function(fe,he){for(var de=new Array(he),be=0;be<he;++be)de[be]=fe(be/(he-1));return de},Object.defineProperty(i,"__esModule",{value:!0})},"object"==typeof X&&void 0!==G?m(X,h("d3-color")):m((i=i||self).d3=i.d3||{},i.d3)},{"d3-color":164}],172:[function(h,G,X){var i;i=this,function(i){"use strict";var m=Math.PI,b=2*m,p=b-1e-6;function r(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function u(){return new r}r.prototype=u.prototype={constructor:r,moveTo:function(c,l){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+l)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(c,l){this._+="L"+(this._x1=+c)+","+(this._y1=+l)},quadraticCurveTo:function(c,l,f,s){this._+="Q"+ +c+","+ +l+","+(this._x1=+f)+","+(this._y1=+s)},bezierCurveTo:function(c,l,f,s,o,d){this._+="C"+ +c+","+ +l+","+ +f+","+ +s+","+(this._x1=+o)+","+(this._y1=+d)},arcTo:function(c,l,f,s,o){var d=this._x1,g=this._y1,y=(f=+f)-(c=+c),v=(s=+s)-(l=+l),_=d-c,w=g-l,x=_*_+w*w;if((o=+o)<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=c)+","+(this._y1=l);else if(x>1e-6)if(Math.abs(w*y-v*_)>1e-6&&o){var E=f-d,k=s-g,C=y*y+v*v,L=E*E+k*k,P=Math.sqrt(C),A=Math.sqrt(x),I=o*Math.tan((m-Math.acos((C+x-L)/(2*P*A)))/2),D=I/A,R=I/P;Math.abs(D-1)>1e-6&&(this._+="L"+(c+D*_)+","+(l+D*w)),this._+="A"+o+","+o+",0,0,"+ +(w*E>_*k)+","+(this._x1=c+R*y)+","+(this._y1=l+R*v)}else this._+="L"+(this._x1=c)+","+(this._y1=l)},arc:function(c,l,f,s,o,d){c=+c,l=+l,d=!!d;var g=(f=+f)*Math.cos(s),y=f*Math.sin(s),v=c+g,_=l+y,w=1^d,x=d?s-o:o-s;if(f<0)throw new Error("negative radius: "+f);null===this._x1?this._+="M"+v+","+_:(Math.abs(this._x1-v)>1e-6||Math.abs(this._y1-_)>1e-6)&&(this._+="L"+v+","+_),f&&(x<0&&(x=x%b+b),x>p?this._+="A"+f+","+f+",0,1,"+w+","+(c-g)+","+(l-y)+"A"+f+","+f+",0,1,"+w+","+(this._x1=v)+","+(this._y1=_):x>1e-6&&(this._+="A"+f+","+f+",0,"+ +(x>=m)+","+w+","+(this._x1=c+f*Math.cos(o))+","+(this._y1=l+f*Math.sin(o))))},rect:function(c,l,f,s){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+l)+"h"+ +f+"v"+ +s+"h"+-f+"Z"},toString:function(){return this._}},i.path=u,Object.defineProperty(i,"__esModule",{value:!0})}("object"==typeof X&&void 0!==G?X:(i=i||self).d3=i.d3||{})},{}],173:[function(h,G,X){var i;i=this,function(i){"use strict";function m(s,o,d,g){if(isNaN(o)||isNaN(d))return s;var y,v,_,w,x,E,k,C,L,P=s._root,A={data:g},I=s._x0,D=s._y0,R=s._x1,S=s._y1;if(!P)return s._root=A,s;for(;P.length;)if((E=o>=(v=(I+R)/2))?I=v:R=v,(k=d>=(_=(D+S)/2))?D=_:S=_,y=P,!(P=P[C=k<<1|E]))return y[C]=A,s;if(w=+s._x.call(null,P.data),x=+s._y.call(null,P.data),o===w&&d===x)return A.next=P,y?y[C]=A:s._root=A,s;do{y=y?y[C]=new Array(4):s._root=new Array(4),(E=o>=(v=(I+R)/2))?I=v:R=v,(k=d>=(_=(D+S)/2))?D=_:S=_}while((C=k<<1|E)==(L=(x>=_)<<1|w>=v));return y[L]=P,y[C]=A,s}function b(s,o,d,g,y){this.node=s,this.x0=o,this.y0=d,this.x1=g,this.y1=y}function p(s){return s[0]}function r(s){return s[1]}function u(s,o,d){var g=new c(null==o?p:o,null==d?r:d,NaN,NaN,NaN,NaN);return null==s?g:g.addAll(s)}function c(s,o,d,g,y,v){this._x=s,this._y=o,this._x0=d,this._y0=g,this._x1=y,this._y1=v,this._root=void 0}function l(s){for(var o={data:s.data},d=o;s=s.next;)d=d.next={data:s.data};return o}var f=u.prototype=c.prototype;f.copy=function(){var s,o,d=new c(this._x,this._y,this._x0,this._y0,this._x1,this._y1),g=this._root;if(!g)return d;if(!g.length)return d._root=l(g),d;for(s=[{source:g,target:d._root=new Array(4)}];g=s.pop();)for(var y=0;y<4;++y)(o=g.source[y])&&(o.length?s.push({source:o,target:g.target[y]=new Array(4)}):g.target[y]=l(o));return d},f.add=function(s){var o=+this._x.call(null,s),d=+this._y.call(null,s);return m(this.cover(o,d),o,d,s)},f.addAll=function(s){var o,d,g,y,v=s.length,_=new Array(v),w=new Array(v),x=1/0,E=1/0,k=-1/0,C=-1/0;for(d=0;d<v;++d)isNaN(g=+this._x.call(null,o=s[d]))||isNaN(y=+this._y.call(null,o))||(_[d]=g,w[d]=y,g<x&&(x=g),g>k&&(k=g),y<E&&(E=y),y>C&&(C=y));if(x>k||E>C)return this;for(this.cover(x,E).cover(k,C),d=0;d<v;++d)m(this,_[d],w[d],s[d]);return this},f.cover=function(s,o){if(isNaN(s=+s)||isNaN(o=+o))return this;var d=this._x0,g=this._y0,y=this._x1,v=this._y1;if(isNaN(d))y=(d=Math.floor(s))+1,v=(g=Math.floor(o))+1;else{for(var _,w,x=y-d,E=this._root;d>s||s>=y||g>o||o>=v;)switch(w=(o<g)<<1|s<d,(_=new Array(4))[w]=E,E=_,x*=2,w){case 0:y=d+x,v=g+x;break;case 1:d=y-x,v=g+x;break;case 2:y=d+x,g=v-x;break;case 3:d=y-x,g=v-x}this._root&&this._root.length&&(this._root=E)}return this._x0=d,this._y0=g,this._x1=y,this._y1=v,this},f.data=function(){var s=[];return this.visit(function(o){if(!o.length)do{s.push(o.data)}while(o=o.next)}),s},f.extent=function(s){return arguments.length?this.cover(+s[0][0],+s[0][1]).cover(+s[1][0],+s[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},f.find=function(s,o,d){var g,y,v,_,w,x,E,k=this._x0,C=this._y0,L=this._x1,P=this._y1,A=[],I=this._root;for(I&&A.push(new b(I,k,C,L,P)),null==d?d=1/0:(k=s-d,C=o-d,L=s+d,P=o+d,d*=d);x=A.pop();)if(!(!(I=x.node)||(y=x.x0)>L||(v=x.y0)>P||(_=x.x1)<k||(w=x.y1)<C))if(I.length){var D=(y+_)/2,R=(v+w)/2;A.push(new b(I[3],D,R,_,w),new b(I[2],y,R,D,w),new b(I[1],D,v,_,R),new b(I[0],y,v,D,R)),(E=(o>=R)<<1|s>=D)&&(x=A[A.length-1],A[A.length-1]=A[A.length-1-E],A[A.length-1-E]=x)}else{var S=s-+this._x.call(null,I.data),N=o-+this._y.call(null,I.data),B=S*S+N*N;if(B<d){var H=Math.sqrt(d=B);k=s-H,C=o-H,L=s+H,P=o+H,g=I.data}}return g},f.remove=function(s){if(isNaN(v=+this._x.call(null,s))||isNaN(_=+this._y.call(null,s)))return this;var o,d,g,y,v,_,w,x,E,k,C,L,P=this._root,A=this._x0,I=this._y0,D=this._x1,R=this._y1;if(!P)return this;if(P.length)for(;;){if((E=v>=(w=(A+D)/2))?A=w:D=w,(k=_>=(x=(I+R)/2))?I=x:R=x,o=P,!(P=P[C=k<<1|E]))return this;if(!P.length)break;(o[C+1&3]||o[C+2&3]||o[C+3&3])&&(d=o,L=C)}for(;P.data!==s;)if(g=P,!(P=P.next))return this;return(y=P.next)&&delete P.next,g?(y?g.next=y:delete g.next,this):o?(y?o[C]=y:delete o[C],(P=o[0]||o[1]||o[2]||o[3])&&P===(o[3]||o[2]||o[1]||o[0])&&!P.length&&(d?d[L]=P:this._root=P),this):(this._root=y,this)},f.removeAll=function(s){for(var o=0,d=s.length;o<d;++o)this.remove(s[o]);return this},f.root=function(){return this._root},f.size=function(){var s=0;return this.visit(function(o){if(!o.length)do{++s}while(o=o.next)}),s},f.visit=function(s){var o,d,g,y,v,_,w=[],x=this._root;for(x&&w.push(new b(x,this._x0,this._y0,this._x1,this._y1));o=w.pop();)if(!s(x=o.node,g=o.x0,y=o.y0,v=o.x1,_=o.y1)&&x.length){var E=(g+v)/2,k=(y+_)/2;(d=x[3])&&w.push(new b(d,E,k,v,_)),(d=x[2])&&w.push(new b(d,g,k,E,_)),(d=x[1])&&w.push(new b(d,E,y,v,k)),(d=x[0])&&w.push(new b(d,g,y,E,k))}return this},f.visitAfter=function(s){var o,d=[],g=[];for(this._root&&d.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));o=d.pop();){var y=o.node;if(y.length){var v,_=o.x0,w=o.y0,x=o.x1,E=o.y1,k=(_+x)/2,C=(w+E)/2;(v=y[0])&&d.push(new b(v,_,w,k,C)),(v=y[1])&&d.push(new b(v,k,w,x,C)),(v=y[2])&&d.push(new b(v,_,C,k,E)),(v=y[3])&&d.push(new b(v,k,C,x,E))}g.push(o)}for(;o=g.pop();)s(o.node,o.x0,o.y0,o.x1,o.y1);return this},f.x=function(s){return arguments.length?(this._x=s,this):this._x},f.y=function(s){return arguments.length?(this._y=s,this):this._y},i.quadtree=u,Object.defineProperty(i,"__esModule",{value:!0})}("object"==typeof X&&void 0!==G?X:(i=i||self).d3=i.d3||{})},{}],174:[function(h,G,X){var i,m;i=this,m=function(i,m){"use strict";function b(Ue){return function(){return Ue}}var p=Math.abs,r=Math.atan2,u=Math.cos,c=Math.max,l=Math.min,f=Math.sin,s=Math.sqrt,o=Math.PI,d=o/2,g=2*o;function y(Ue){return Ue>1?0:Ue<-1?o:Math.acos(Ue)}function v(Ue){return Ue>=1?d:Ue<=-1?-d:Math.asin(Ue)}function _(Ue){return Ue.innerRadius}function w(Ue){return Ue.outerRadius}function x(Ue){return Ue.startAngle}function E(Ue){return Ue.endAngle}function k(Ue){return Ue&&Ue.padAngle}function C(Ue,wt,Ut,Zt,tn,un,vn,Qt){var yn=Ut-Ue,Mn=Zt-wt,Pn=vn-tn,sn=Qt-un,In=sn*yn-Pn*Mn;if(!(In*In<1e-12))return[Ue+(In=(Pn*(wt-un)-sn*(Ue-tn))/In)*yn,wt+In*Mn]}function L(Ue,wt,Ut,Zt,tn,un,vn){var Qt=Ue-Ut,yn=wt-Zt,Mn=(vn?un:-un)/s(Qt*Qt+yn*yn),Pn=Mn*yn,sn=-Mn*Qt,In=Ue+Pn,Rn=wt+sn,Ln=Ut+Pn,qn=Zt+sn,nr=(In+Ln)/2,rr=(Rn+qn)/2,gr=Ln-In,jr=qn-Rn,kr=gr*gr+jr*jr,er=tn-un,Xr=In*qn-Ln*Rn,ir=(jr<0?-1:1)*s(c(0,er*er*kr-Xr*Xr)),Bn=(Xr*jr-gr*ir)/kr,mr=(-Xr*gr-jr*ir)/kr,zr=(Xr*jr+gr*ir)/kr,br=(-Xr*gr+jr*ir)/kr,Dr=Bn-nr,di=mr-rr,ni=zr-nr,pi=br-rr;return Dr*Dr+di*di>ni*ni+pi*pi&&(Bn=zr,mr=br),{cx:Bn,cy:mr,x01:-Pn,y01:-sn,x11:Bn*(tn/er-1),y11:mr*(tn/er-1)}}function P(Ue){this._context=Ue}function A(Ue){return new P(Ue)}function I(Ue){return Ue[0]}function D(Ue){return Ue[1]}function R(){var Ue=I,wt=D,Ut=b(!0),Zt=null,tn=A,un=null;function vn(Qt){var yn,Mn,Pn,sn=Qt.length,In=!1;for(null==Zt&&(un=tn(Pn=m.path())),yn=0;yn<=sn;++yn)!(yn<sn&&Ut(Mn=Qt[yn],yn,Qt))===In&&((In=!In)?un.lineStart():un.lineEnd()),In&&un.point(+Ue(Mn,yn,Qt),+wt(Mn,yn,Qt));if(Pn)return un=null,Pn+""||null}return vn.x=function(Qt){return arguments.length?(Ue="function"==typeof Qt?Qt:b(+Qt),vn):Ue},vn.y=function(Qt){return arguments.length?(wt="function"==typeof Qt?Qt:b(+Qt),vn):wt},vn.defined=function(Qt){return arguments.length?(Ut="function"==typeof Qt?Qt:b(!!Qt),vn):Ut},vn.curve=function(Qt){return arguments.length?(tn=Qt,null!=Zt&&(un=tn(Zt)),vn):tn},vn.context=function(Qt){return arguments.length?(null==Qt?Zt=un=null:un=tn(Zt=Qt),vn):Zt},vn}function S(){var Ue=I,wt=null,Ut=b(0),Zt=D,tn=b(!0),un=null,vn=A,Qt=null;function yn(Pn){var sn,In,Rn,Ln,qn,nr=Pn.length,rr=!1,gr=new Array(nr),jr=new Array(nr);for(null==un&&(Qt=vn(qn=m.path())),sn=0;sn<=nr;++sn){if(!(sn<nr&&tn(Ln=Pn[sn],sn,Pn))===rr)if(rr=!rr)In=sn,Qt.areaStart(),Qt.lineStart();else{for(Qt.lineEnd(),Qt.lineStart(),Rn=sn-1;Rn>=In;--Rn)Qt.point(gr[Rn],jr[Rn]);Qt.lineEnd(),Qt.areaEnd()}rr&&(gr[sn]=+Ue(Ln,sn,Pn),jr[sn]=+Ut(Ln,sn,Pn),Qt.point(wt?+wt(Ln,sn,Pn):gr[sn],Zt?+Zt(Ln,sn,Pn):jr[sn]))}if(qn)return Qt=null,qn+""||null}function Mn(){return R().defined(tn).curve(vn).context(un)}return yn.x=function(Pn){return arguments.length?(Ue="function"==typeof Pn?Pn:b(+Pn),wt=null,yn):Ue},yn.x0=function(Pn){return arguments.length?(Ue="function"==typeof Pn?Pn:b(+Pn),yn):Ue},yn.x1=function(Pn){return arguments.length?(wt=null==Pn?null:"function"==typeof Pn?Pn:b(+Pn),yn):wt},yn.y=function(Pn){return arguments.length?(Ut="function"==typeof Pn?Pn:b(+Pn),Zt=null,yn):Ut},yn.y0=function(Pn){return arguments.length?(Ut="function"==typeof Pn?Pn:b(+Pn),yn):Ut},yn.y1=function(Pn){return arguments.length?(Zt=null==Pn?null:"function"==typeof Pn?Pn:b(+Pn),yn):Zt},yn.lineX0=yn.lineY0=function(){return Mn().x(Ue).y(Ut)},yn.lineY1=function(){return Mn().x(Ue).y(Zt)},yn.lineX1=function(){return Mn().x(wt).y(Ut)},yn.defined=function(Pn){return arguments.length?(tn="function"==typeof Pn?Pn:b(!!Pn),yn):tn},yn.curve=function(Pn){return arguments.length?(vn=Pn,null!=un&&(Qt=vn(un)),yn):vn},yn.context=function(Pn){return arguments.length?(null==Pn?un=Qt=null:Qt=vn(un=Pn),yn):un},yn}function N(Ue,wt){return wt<Ue?-1:wt>Ue?1:wt>=Ue?0:NaN}function B(Ue){return Ue}P.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ue,wt){switch(Ue=+Ue,wt=+wt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ue,wt):this._context.moveTo(Ue,wt);break;case 1:this._point=2;default:this._context.lineTo(Ue,wt)}}};var H=Q(A);function Y(Ue){this._curve=Ue}function Q(Ue){function wt(Ut){return new Y(Ue(Ut))}return wt._curve=Ue,wt}function ne(Ue){var wt=Ue.curve;return Ue.angle=Ue.x,delete Ue.x,Ue.radius=Ue.y,delete Ue.y,Ue.curve=function(Ut){return arguments.length?wt(Q(Ut)):wt()._curve},Ue}function ae(){return ne(R().curve(H))}function te(){var Ue=S().curve(H),wt=Ue.curve,Ut=Ue.lineX0,Zt=Ue.lineX1,tn=Ue.lineY0,un=Ue.lineY1;return Ue.angle=Ue.x,delete Ue.x,Ue.startAngle=Ue.x0,delete Ue.x0,Ue.endAngle=Ue.x1,delete Ue.x1,Ue.radius=Ue.y,delete Ue.y,Ue.innerRadius=Ue.y0,delete Ue.y0,Ue.outerRadius=Ue.y1,delete Ue.y1,Ue.lineStartAngle=function(){return ne(Ut())},delete Ue.lineX0,Ue.lineEndAngle=function(){return ne(Zt())},delete Ue.lineX1,Ue.lineInnerRadius=function(){return ne(tn())},delete Ue.lineY0,Ue.lineOuterRadius=function(){return ne(un())},delete Ue.lineY1,Ue.curve=function(vn){return arguments.length?wt(Q(vn)):wt()._curve},Ue}function K(Ue,wt){return[(wt=+wt)*Math.cos(Ue-=Math.PI/2),wt*Math.sin(Ue)]}Y.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Ue,wt){this._curve.point(wt*Math.sin(Ue),wt*-Math.cos(Ue))}};var q=Array.prototype.slice;function re(Ue){return Ue.source}function V(Ue){return Ue.target}function W(Ue){var wt=re,Ut=V,Zt=I,tn=D,un=null;function vn(){var Qt,yn=q.call(arguments),Mn=wt.apply(this,yn),Pn=Ut.apply(this,yn);if(un||(un=Qt=m.path()),Ue(un,+Zt.apply(this,(yn[0]=Mn,yn)),+tn.apply(this,yn),+Zt.apply(this,(yn[0]=Pn,yn)),+tn.apply(this,yn)),Qt)return un=null,Qt+""||null}return vn.source=function(Qt){return arguments.length?(wt=Qt,vn):wt},vn.target=function(Qt){return arguments.length?(Ut=Qt,vn):Ut},vn.x=function(Qt){return arguments.length?(Zt="function"==typeof Qt?Qt:b(+Qt),vn):Zt},vn.y=function(Qt){return arguments.length?(tn="function"==typeof Qt?Qt:b(+Qt),vn):tn},vn.context=function(Qt){return arguments.length?(un=null==Qt?null:Qt,vn):un},vn}function Z(Ue,wt,Ut,Zt,tn){Ue.moveTo(wt,Ut),Ue.bezierCurveTo(wt=(wt+Zt)/2,Ut,wt,tn,Zt,tn)}function oe(Ue,wt,Ut,Zt,tn){Ue.moveTo(wt,Ut),Ue.bezierCurveTo(wt,Ut=(Ut+tn)/2,Zt,Ut,Zt,tn)}function ie(Ue,wt,Ut,Zt,tn){var un=K(wt,Ut),vn=K(wt,Ut=(Ut+tn)/2),Qt=K(Zt,Ut),yn=K(Zt,tn);Ue.moveTo(un[0],un[1]),Ue.bezierCurveTo(vn[0],vn[1],Qt[0],Qt[1],yn[0],yn[1])}var ue={draw:function(Ue,wt){var Ut=Math.sqrt(wt/o);Ue.moveTo(Ut,0),Ue.arc(0,0,Ut,0,g)}},fe={draw:function(Ue,wt){var Ut=Math.sqrt(wt/5)/2;Ue.moveTo(-3*Ut,-Ut),Ue.lineTo(-Ut,-Ut),Ue.lineTo(-Ut,-3*Ut),Ue.lineTo(Ut,-3*Ut),Ue.lineTo(Ut,-Ut),Ue.lineTo(3*Ut,-Ut),Ue.lineTo(3*Ut,Ut),Ue.lineTo(Ut,Ut),Ue.lineTo(Ut,3*Ut),Ue.lineTo(-Ut,3*Ut),Ue.lineTo(-Ut,Ut),Ue.lineTo(-3*Ut,Ut),Ue.closePath()}},he=Math.sqrt(1/3),de=2*he,be={draw:function(Ue,wt){var Ut=Math.sqrt(wt/de),Zt=Ut*he;Ue.moveTo(0,-Ut),Ue.lineTo(Zt,0),Ue.lineTo(0,Ut),Ue.lineTo(-Zt,0),Ue.closePath()}},pe=Math.sin(o/10)/Math.sin(7*o/10),Te=Math.sin(g/10)*pe,ye=-Math.cos(g/10)*pe,ke={draw:function(Ue,wt){var Ut=Math.sqrt(.8908130915292852*wt),Zt=Te*Ut,tn=ye*Ut;Ue.moveTo(0,-Ut),Ue.lineTo(Zt,tn);for(var un=1;un<5;++un){var vn=g*un/5,Qt=Math.cos(vn),yn=Math.sin(vn);Ue.lineTo(yn*Ut,-Qt*Ut),Ue.lineTo(Qt*Zt-yn*tn,yn*Zt+Qt*tn)}Ue.closePath()}},ze={draw:function(Ue,wt){var Ut=Math.sqrt(wt),Zt=-Ut/2;Ue.rect(Zt,Zt,Ut,Ut)}},je=Math.sqrt(3),Ie={draw:function(Ue,wt){var Ut=-Math.sqrt(wt/(3*je));Ue.moveTo(0,2*Ut),Ue.lineTo(-je*Ut,-Ut),Ue.lineTo(je*Ut,-Ut),Ue.closePath()}},Ce=-.5,_e=Math.sqrt(3)/2,we=1/Math.sqrt(12),Se=3*(we/2+1),Oe={draw:function(Ue,wt){var Ut=Math.sqrt(wt/Se),Zt=Ut/2,tn=Ut*we,un=Zt,vn=Ut*we+Ut,Qt=-un,yn=vn;Ue.moveTo(Zt,tn),Ue.lineTo(un,vn),Ue.lineTo(Qt,yn),Ue.lineTo(Ce*Zt-_e*tn,_e*Zt+Ce*tn),Ue.lineTo(Ce*un-_e*vn,_e*un+Ce*vn),Ue.lineTo(Ce*Qt-_e*yn,_e*Qt+Ce*yn),Ue.lineTo(Ce*Zt+_e*tn,Ce*tn-_e*Zt),Ue.lineTo(Ce*un+_e*vn,Ce*vn-_e*un),Ue.lineTo(Ce*Qt+_e*yn,Ce*yn-_e*Qt),Ue.closePath()}},Be=[ue,fe,be,ze,ke,Ie,Oe];function He(){}function Xe(Ue,wt,Ut){Ue._context.bezierCurveTo((2*Ue._x0+Ue._x1)/3,(2*Ue._y0+Ue._y1)/3,(Ue._x0+2*Ue._x1)/3,(Ue._y0+2*Ue._y1)/3,(Ue._x0+4*Ue._x1+wt)/6,(Ue._y0+4*Ue._y1+Ut)/6)}function nt(Ue){this._context=Ue}function et(Ue){this._context=Ue}function qe(Ue){this._context=Ue}function Ye(Ue,wt){this._basis=new nt(Ue),this._beta=wt}nt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xe(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ue,wt){switch(Ue=+Ue,wt=+wt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ue,wt):this._context.moveTo(Ue,wt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xe(this,Ue,wt)}this._x0=this._x1,this._x1=Ue,this._y0=this._y1,this._y1=wt}},et.prototype={areaStart:He,areaEnd:He,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(Ue,wt){switch(Ue=+Ue,wt=+wt,this._point){case 0:this._point=1,this._x2=Ue,this._y2=wt;break;case 1:this._point=2,this._x3=Ue,this._y3=wt;break;case 2:this._point=3,this._x4=Ue,this._y4=wt,this._context.moveTo((this._x0+4*this._x1+Ue)/6,(this._y0+4*this._y1+wt)/6);break;default:Xe(this,Ue,wt)}this._x0=this._x1,this._x1=Ue,this._y0=this._y1,this._y1=wt}},qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ue,wt){switch(Ue=+Ue,wt=+wt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var Ut=(this._x0+4*this._x1+Ue)/6,Zt=(this._y0+4*this._y1+wt)/6;this._line?this._context.lineTo(Ut,Zt):this._context.moveTo(Ut,Zt);break;case 3:this._point=4;default:Xe(this,Ue,wt)}this._x0=this._x1,this._x1=Ue,this._y0=this._y1,this._y1=wt}},Ye.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var Ue=this._x,wt=this._y,Ut=Ue.length-1;if(Ut>0)for(var Zt,tn=Ue[0],un=wt[0],vn=Ue[Ut]-tn,Qt=wt[Ut]-un,yn=-1;++yn<=Ut;)this._basis.point(this._beta*Ue[yn]+(1-this._beta)*(tn+(Zt=yn/Ut)*vn),this._beta*wt[yn]+(1-this._beta)*(un+Zt*Qt));this._x=this._y=null,this._basis.lineEnd()},point:function(Ue,wt){this._x.push(+Ue),this._y.push(+wt)}};var ot=function Ue(wt){function Ut(Zt){return 1===wt?new nt(Zt):new Ye(Zt,wt)}return Ut.beta=function(Zt){return Ue(+Zt)},Ut}(.85);function at(Ue,wt,Ut){Ue._context.bezierCurveTo(Ue._x1+Ue._k*(Ue._x2-Ue._x0),Ue._y1+Ue._k*(Ue._y2-Ue._y0),Ue._x2+Ue._k*(Ue._x1-wt),Ue._y2+Ue._k*(Ue._y1-Ut),Ue._x2,Ue._y2)}function ct(Ue,wt){this._context=Ue,this._k=(1-wt)/6}ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:at(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ue,wt){switch(Ue=+Ue,wt=+wt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ue,wt):this._context.moveTo(Ue,wt);break;case 1:this._point=2,this._x1=Ue,this._y1=wt;break;case 2:this._point=3;default:at(this,Ue,wt)}this._x0=this._x1,this._x1=this._x2,this._x2=Ue,this._y0=this._y1,this._y1=this._y2,this._y2=wt}};var _t=function Ue(wt){function Ut(Zt){return new ct(Zt,wt)}return Ut.tension=function(Zt){return Ue(+Zt)},Ut}(0);function xt(Ue,wt){this._context=Ue,this._k=(1-wt)/6}xt.prototype={areaStart:He,areaEnd:He,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Ue,wt){switch(Ue=+Ue,wt=+wt,this._point){case 0:this._point=1,this._x3=Ue,this._y3=wt;break;case 1:this._point=2,this._context.moveTo(this._x4=Ue,this._y4=wt);break;case 2:this._point=3,this._x5=Ue,this._y5=wt;break;default:at(this,Ue,wt)}this._x0=this._x1,this._x1=this._x2,this._x2=Ue,this._y0=this._y1,this._y1=this._y2,this._y2=wt}};var Ht=function Ue(wt){function Ut(Zt){return new xt(Zt,wt)}return Ut.tension=function(Zt){return Ue(+Zt)},Ut}(0);function At(Ue,wt){this._context=Ue,this._k=(1-wt)/6}At.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ue,wt){switch(Ue=+Ue,wt=+wt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:at(this,Ue,wt)}this._x0=this._x1,this._x1=this._x2,this._x2=Ue,this._y0=this._y1,this._y1=this._y2,this._y2=wt}};var ht=function Ue(wt){function Ut(Zt){return new At(Zt,wt)}return Ut.tension=function(Zt){return Ue(+Zt)},Ut}(0);function st(Ue,wt,Ut){var Zt=Ue._x1,tn=Ue._y1,un=Ue._x2,vn=Ue._y2;if(Ue._l01_a>1e-12){var Qt=2*Ue._l01_2a+3*Ue._l01_a*Ue._l12_a+Ue._l12_2a,yn=3*Ue._l01_a*(Ue._l01_a+Ue._l12_a);Zt=(Zt*Qt-Ue._x0*Ue._l12_2a+Ue._x2*Ue._l01_2a)/yn,tn=(tn*Qt-Ue._y0*Ue._l12_2a+Ue._y2*Ue._l01_2a)/yn}if(Ue._l23_a>1e-12){var Mn=2*Ue._l23_2a+3*Ue._l23_a*Ue._l12_a+Ue._l12_2a,Pn=3*Ue._l23_a*(Ue._l23_a+Ue._l12_a);un=(un*Mn+Ue._x1*Ue._l23_2a-wt*Ue._l12_2a)/Pn,vn=(vn*Mn+Ue._y1*Ue._l23_2a-Ut*Ue._l12_2a)/Pn}Ue._context.bezierCurveTo(Zt,tn,un,vn,Ue._x2,Ue._y2)}function Bt(Ue,wt){this._context=Ue,this._alpha=wt}Bt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ue,wt){if(Ue=+Ue,wt=+wt,this._point){var Ut=this._x2-Ue,Zt=this._y2-wt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ut*Ut+Zt*Zt,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Ue,wt):this._context.moveTo(Ue,wt);break;case 1:this._point=2;break;case 2:this._point=3;default:st(this,Ue,wt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ue,this._y0=this._y1,this._y1=this._y2,this._y2=wt}};var gn=function Ue(wt){function Ut(Zt){return wt?new Bt(Zt,wt):new ct(Zt,0)}return Ut.alpha=function(Zt){return Ue(+Zt)},Ut}(.5);function hn(Ue,wt){this._context=Ue,this._alpha=wt}hn.prototype={areaStart:He,areaEnd:He,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Ue,wt){if(Ue=+Ue,wt=+wt,this._point){var Ut=this._x2-Ue,Zt=this._y2-wt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ut*Ut+Zt*Zt,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=Ue,this._y3=wt;break;case 1:this._point=2,this._context.moveTo(this._x4=Ue,this._y4=wt);break;case 2:this._point=3,this._x5=Ue,this._y5=wt;break;default:st(this,Ue,wt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ue,this._y0=this._y1,this._y1=this._y2,this._y2=wt}};var We=function Ue(wt){function Ut(Zt){return wt?new hn(Zt,wt):new xt(Zt,0)}return Ut.alpha=function(Zt){return Ue(+Zt)},Ut}(.5);function it(Ue,wt){this._context=Ue,this._alpha=wt}it.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ue,wt){if(Ue=+Ue,wt=+wt,this._point){var Ut=this._x2-Ue,Zt=this._y2-wt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ut*Ut+Zt*Zt,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:st(this,Ue,wt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ue,this._y0=this._y1,this._y1=this._y2,this._y2=wt}};var qt=function Ue(wt){function Ut(Zt){return wt?new it(Zt,wt):new At(Zt,0)}return Ut.alpha=function(Zt){return Ue(+Zt)},Ut}(.5);function Ge(Ue){this._context=Ue}function Pe(Ue){return Ue<0?-1:1}function Ee(Ue,wt,Ut){var Zt=Ue._x1-Ue._x0,tn=wt-Ue._x1,un=(Ue._y1-Ue._y0)/(Zt||tn<0&&-0),vn=(Ut-Ue._y1)/(tn||Zt<0&&-0),Qt=(un*tn+vn*Zt)/(Zt+tn);return(Pe(un)+Pe(vn))*Math.min(Math.abs(un),Math.abs(vn),.5*Math.abs(Qt))||0}function Ne(Ue,wt){var Ut=Ue._x1-Ue._x0;return Ut?(3*(Ue._y1-Ue._y0)/Ut-wt)/2:wt}function Ve(Ue,wt,Ut){var Zt=Ue._x0,un=Ue._x1,vn=Ue._y1,Qt=(un-Zt)/3;Ue._context.bezierCurveTo(Zt+Qt,Ue._y0+Qt*wt,un-Qt,vn-Qt*Ut,un,vn)}function Ke(Ue){this._context=Ue}function bt(Ue){this._context=new gt(Ue)}function gt(Ue){this._context=Ue}function pt(Ue){this._context=Ue}function St(Ue){var wt,Ut,Zt=Ue.length-1,tn=new Array(Zt),un=new Array(Zt),vn=new Array(Zt);for(tn[0]=0,un[0]=2,vn[0]=Ue[0]+2*Ue[1],wt=1;wt<Zt-1;++wt)tn[wt]=1,un[wt]=4,vn[wt]=4*Ue[wt]+2*Ue[wt+1];for(tn[Zt-1]=2,un[Zt-1]=7,vn[Zt-1]=8*Ue[Zt-1]+Ue[Zt],wt=1;wt<Zt;++wt)un[wt]-=Ut=tn[wt]/un[wt-1],vn[wt]-=Ut*vn[wt-1];for(tn[Zt-1]=vn[Zt-1]/un[Zt-1],wt=Zt-2;wt>=0;--wt)tn[wt]=(vn[wt]-tn[wt+1])/un[wt];for(un[Zt-1]=(Ue[Zt]+tn[Zt-1])/2,wt=0;wt<Zt-1;++wt)un[wt]=2*Ue[wt+1]-tn[wt+1];return[tn,un]}function jt(Ue,wt){this._context=Ue,this._t=wt}function Lt(Ue,wt){if((tn=Ue.length)>1)for(var Ut,Zt,tn,un=1,vn=Ue[wt[0]],Qt=vn.length;un<tn;++un)for(Zt=vn,vn=Ue[wt[un]],Ut=0;Ut<Qt;++Ut)vn[Ut][1]+=vn[Ut][0]=isNaN(Zt[Ut][1])?Zt[Ut][0]:Zt[Ut][1]}function Vt(Ue){for(var wt=Ue.length,Ut=new Array(wt);--wt>=0;)Ut[wt]=wt;return Ut}function mt(Ue,wt){return Ue[wt]}function Wt(Ue){var wt=Ue.map(Kt);return Vt(Ue).sort(function(Ut,Zt){return wt[Ut]-wt[Zt]})}function Kt(Ue){for(var wt,Ut=-1,Zt=0,tn=Ue.length,un=-1/0;++Ut<tn;)(wt=+Ue[Ut][1])>un&&(un=wt,Zt=Ut);return Zt}function rn(Ue){var wt=Ue.map(Yt);return Vt(Ue).sort(function(Ut,Zt){return wt[Ut]-wt[Zt]})}function Yt(Ue){for(var wt,Ut=0,Zt=-1,tn=Ue.length;++Zt<tn;)(wt=+Ue[Zt][1])&&(Ut+=wt);return Ut}Ge.prototype={areaStart:He,areaEnd:He,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Ue,wt){Ue=+Ue,wt=+wt,this._point?this._context.lineTo(Ue,wt):(this._point=1,this._context.moveTo(Ue,wt))}},Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ve(this,this._t0,Ne(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ue,wt){var Ut=NaN;if(wt=+wt,(Ue=+Ue)!==this._x1||wt!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Ue,wt):this._context.moveTo(Ue,wt);break;case 1:this._point=2;break;case 2:this._point=3,Ve(this,Ne(this,Ut=Ee(this,Ue,wt)),Ut);break;default:Ve(this,this._t0,Ut=Ee(this,Ue,wt))}this._x0=this._x1,this._x1=Ue,this._y0=this._y1,this._y1=wt,this._t0=Ut}}},(bt.prototype=Object.create(Ke.prototype)).point=function(Ue,wt){Ke.prototype.point.call(this,wt,Ue)},gt.prototype={moveTo:function(Ue,wt){this._context.moveTo(wt,Ue)},closePath:function(){this._context.closePath()},lineTo:function(Ue,wt){this._context.lineTo(wt,Ue)},bezierCurveTo:function(Ue,wt,Ut,Zt,tn,un){this._context.bezierCurveTo(wt,Ue,Zt,Ut,un,tn)}},pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Ue=this._x,wt=this._y,Ut=Ue.length;if(Ut)if(this._line?this._context.lineTo(Ue[0],wt[0]):this._context.moveTo(Ue[0],wt[0]),2===Ut)this._context.lineTo(Ue[1],wt[1]);else for(var Zt=St(Ue),tn=St(wt),un=0,vn=1;vn<Ut;++un,++vn)this._context.bezierCurveTo(Zt[0][un],tn[0][un],Zt[1][un],tn[1][un],Ue[vn],wt[vn]);(this._line||0!==this._line&&1===Ut)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Ue,wt){this._x.push(+Ue),this._y.push(+wt)}},jt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Ue,wt){switch(Ue=+Ue,wt=+wt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ue,wt):this._context.moveTo(Ue,wt);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,wt),this._context.lineTo(Ue,wt);else{var Ut=this._x*(1-this._t)+Ue*this._t;this._context.lineTo(Ut,this._y),this._context.lineTo(Ut,wt)}}this._x=Ue,this._y=wt}},i.arc=function(){var Ue=_,wt=w,Ut=b(0),Zt=null,tn=x,un=E,vn=k,Qt=null;function yn(){var Mn,Pn,sn=+Ue.apply(this,arguments),In=+wt.apply(this,arguments),Rn=tn.apply(this,arguments)-d,Ln=un.apply(this,arguments)-d,qn=p(Ln-Rn),nr=Ln>Rn;if(Qt||(Qt=Mn=m.path()),In<sn&&(Pn=In,In=sn,sn=Pn),In>1e-12)if(qn>g-1e-12)Qt.moveTo(In*u(Rn),In*f(Rn)),Qt.arc(0,0,In,Rn,Ln,!nr),sn>1e-12&&(Qt.moveTo(sn*u(Ln),sn*f(Ln)),Qt.arc(0,0,sn,Ln,Rn,nr));else{var rr,gr,jr=Rn,kr=Ln,er=Rn,Xr=Ln,ir=qn,Bn=qn,mr=vn.apply(this,arguments)/2,zr=mr>1e-12&&(Zt?+Zt.apply(this,arguments):s(sn*sn+In*In)),br=l(p(In-sn)/2,+Ut.apply(this,arguments)),Dr=br,di=br;if(zr>1e-12){var ni=v(zr/sn*f(mr)),pi=v(zr/In*f(mr));(ir-=2*ni)>1e-12?(er+=ni*=nr?1:-1,Xr-=ni):(ir=0,er=Xr=(Rn+Ln)/2),(Bn-=2*pi)>1e-12?(jr+=pi*=nr?1:-1,kr-=pi):(Bn=0,jr=kr=(Rn+Ln)/2)}var qi=In*u(jr),Ct=In*f(jr),mn=sn*u(Xr),pn=sn*f(Xr);if(br>1e-12){var Sn,Zn=In*u(kr),fr=In*f(kr),Hn=sn*u(er),Dn=sn*f(er);if(qn<o&&(Sn=C(qi,Ct,Hn,Dn,Zn,fr,mn,pn))){var Jn=qi-Sn[0],Nn=Ct-Sn[1],Un=Zn-Sn[0],sr=fr-Sn[1],Wr=1/f(y((Jn*Un+Nn*sr)/(s(Jn*Jn+Nn*Nn)*s(Un*Un+sr*sr)))/2),Vr=s(Sn[0]*Sn[0]+Sn[1]*Sn[1]);Dr=l(br,(sn-Vr)/(Wr-1)),di=l(br,(In-Vr)/(Wr+1))}}Bn>1e-12?di>1e-12?(rr=L(Hn,Dn,qi,Ct,In,di,nr),gr=L(Zn,fr,mn,pn,In,di,nr),Qt.moveTo(rr.cx+rr.x01,rr.cy+rr.y01),di<br?Qt.arc(rr.cx,rr.cy,di,r(rr.y01,rr.x01),r(gr.y01,gr.x01),!nr):(Qt.arc(rr.cx,rr.cy,di,r(rr.y01,rr.x01),r(rr.y11,rr.x11),!nr),Qt.arc(0,0,In,r(rr.cy+rr.y11,rr.cx+rr.x11),r(gr.cy+gr.y11,gr.cx+gr.x11),!nr),Qt.arc(gr.cx,gr.cy,di,r(gr.y11,gr.x11),r(gr.y01,gr.x01),!nr))):(Qt.moveTo(qi,Ct),Qt.arc(0,0,In,jr,kr,!nr)):Qt.moveTo(qi,Ct),sn>1e-12&&ir>1e-12?Dr>1e-12?(rr=L(mn,pn,Zn,fr,sn,-Dr,nr),gr=L(qi,Ct,Hn,Dn,sn,-Dr,nr),Qt.lineTo(rr.cx+rr.x01,rr.cy+rr.y01),Dr<br?Qt.arc(rr.cx,rr.cy,Dr,r(rr.y01,rr.x01),r(gr.y01,gr.x01),!nr):(Qt.arc(rr.cx,rr.cy,Dr,r(rr.y01,rr.x01),r(rr.y11,rr.x11),!nr),Qt.arc(0,0,sn,r(rr.cy+rr.y11,rr.cx+rr.x11),r(gr.cy+gr.y11,gr.cx+gr.x11),nr),Qt.arc(gr.cx,gr.cy,Dr,r(gr.y11,gr.x11),r(gr.y01,gr.x01),!nr))):Qt.arc(0,0,sn,Xr,er,nr):Qt.lineTo(mn,pn)}else Qt.moveTo(0,0);if(Qt.closePath(),Mn)return Qt=null,Mn+""||null}return yn.centroid=function(){var Mn=(+Ue.apply(this,arguments)+ +wt.apply(this,arguments))/2,Pn=(+tn.apply(this,arguments)+ +un.apply(this,arguments))/2-o/2;return[u(Pn)*Mn,f(Pn)*Mn]},yn.innerRadius=function(Mn){return arguments.length?(Ue="function"==typeof Mn?Mn:b(+Mn),yn):Ue},yn.outerRadius=function(Mn){return arguments.length?(wt="function"==typeof Mn?Mn:b(+Mn),yn):wt},yn.cornerRadius=function(Mn){return arguments.length?(Ut="function"==typeof Mn?Mn:b(+Mn),yn):Ut},yn.padRadius=function(Mn){return arguments.length?(Zt=null==Mn?null:"function"==typeof Mn?Mn:b(+Mn),yn):Zt},yn.startAngle=function(Mn){return arguments.length?(tn="function"==typeof Mn?Mn:b(+Mn),yn):tn},yn.endAngle=function(Mn){return arguments.length?(un="function"==typeof Mn?Mn:b(+Mn),yn):un},yn.padAngle=function(Mn){return arguments.length?(vn="function"==typeof Mn?Mn:b(+Mn),yn):vn},yn.context=function(Mn){return arguments.length?(Qt=null==Mn?null:Mn,yn):Qt},yn},i.area=S,i.areaRadial=te,i.curveBasis=function(Ue){return new nt(Ue)},i.curveBasisClosed=function(Ue){return new et(Ue)},i.curveBasisOpen=function(Ue){return new qe(Ue)},i.curveBundle=ot,i.curveCardinal=_t,i.curveCardinalClosed=Ht,i.curveCardinalOpen=ht,i.curveCatmullRom=gn,i.curveCatmullRomClosed=We,i.curveCatmullRomOpen=qt,i.curveLinear=A,i.curveLinearClosed=function(Ue){return new Ge(Ue)},i.curveMonotoneX=function(Ue){return new Ke(Ue)},i.curveMonotoneY=function(Ue){return new bt(Ue)},i.curveNatural=function(Ue){return new pt(Ue)},i.curveStep=function(Ue){return new jt(Ue,.5)},i.curveStepAfter=function(Ue){return new jt(Ue,1)},i.curveStepBefore=function(Ue){return new jt(Ue,0)},i.line=R,i.lineRadial=ae,i.linkHorizontal=function(){return W(Z)},i.linkRadial=function(){var Ue=W(ie);return Ue.angle=Ue.x,delete Ue.x,Ue.radius=Ue.y,delete Ue.y,Ue},i.linkVertical=function(){return W(oe)},i.pie=function(){var Ue=B,wt=N,Ut=null,Zt=b(0),tn=b(g),un=b(0);function vn(Qt){var yn,Mn,Pn,sn,In,Rn=Qt.length,Ln=0,qn=new Array(Rn),nr=new Array(Rn),rr=+Zt.apply(this,arguments),gr=Math.min(g,Math.max(-g,tn.apply(this,arguments)-rr)),jr=Math.min(Math.abs(gr)/Rn,un.apply(this,arguments)),kr=jr*(gr<0?-1:1);for(yn=0;yn<Rn;++yn)(In=nr[qn[yn]=yn]=+Ue(Qt[yn],yn,Qt))>0&&(Ln+=In);for(null!=wt?qn.sort(function(er,Xr){return wt(nr[er],nr[Xr])}):null!=Ut&&qn.sort(function(er,Xr){return Ut(Qt[er],Qt[Xr])}),yn=0,Pn=Ln?(gr-Rn*kr)/Ln:0;yn<Rn;++yn,rr=sn)sn=rr+((In=nr[Mn=qn[yn]])>0?In*Pn:0)+kr,nr[Mn]={data:Qt[Mn],index:yn,value:In,startAngle:rr,endAngle:sn,padAngle:jr};return nr}return vn.value=function(Qt){return arguments.length?(Ue="function"==typeof Qt?Qt:b(+Qt),vn):Ue},vn.sortValues=function(Qt){return arguments.length?(wt=Qt,Ut=null,vn):wt},vn.sort=function(Qt){return arguments.length?(Ut=Qt,wt=null,vn):Ut},vn.startAngle=function(Qt){return arguments.length?(Zt="function"==typeof Qt?Qt:b(+Qt),vn):Zt},vn.endAngle=function(Qt){return arguments.length?(tn="function"==typeof Qt?Qt:b(+Qt),vn):tn},vn.padAngle=function(Qt){return arguments.length?(un="function"==typeof Qt?Qt:b(+Qt),vn):un},vn},i.pointRadial=K,i.radialArea=te,i.radialLine=ae,i.stack=function(){var Ue=b([]),wt=Vt,Ut=Lt,Zt=mt;function tn(un){var vn,Qt,yn=Ue.apply(this,arguments),Mn=un.length,Pn=yn.length,sn=new Array(Pn);for(vn=0;vn<Pn;++vn){for(var In,Rn=yn[vn],Ln=sn[vn]=new Array(Mn),qn=0;qn<Mn;++qn)Ln[qn]=In=[0,+Zt(un[qn],Rn,qn,un)],In.data=un[qn];Ln.key=Rn}for(vn=0,Qt=wt(sn);vn<Pn;++vn)sn[Qt[vn]].index=vn;return Ut(sn,Qt),sn}return tn.keys=function(un){return arguments.length?(Ue="function"==typeof un?un:b(q.call(un)),tn):Ue},tn.value=function(un){return arguments.length?(Zt="function"==typeof un?un:b(+un),tn):Zt},tn.order=function(un){return arguments.length?(wt=null==un?Vt:"function"==typeof un?un:b(q.call(un)),tn):wt},tn.offset=function(un){return arguments.length?(Ut=null==un?Lt:un,tn):Ut},tn},i.stackOffsetDiverging=function(Ue,wt){if((Qt=Ue.length)>0)for(var Ut,Zt,tn,un,vn,Qt,yn=0,Mn=Ue[wt[0]].length;yn<Mn;++yn)for(un=vn=0,Ut=0;Ut<Qt;++Ut)(tn=(Zt=Ue[wt[Ut]][yn])[1]-Zt[0])>0?(Zt[0]=un,Zt[1]=un+=tn):tn<0?(Zt[1]=vn,Zt[0]=vn+=tn):(Zt[0]=0,Zt[1]=tn)},i.stackOffsetExpand=function(Ue,wt){if((Zt=Ue.length)>0){for(var Ut,Zt,tn,un=0,vn=Ue[0].length;un<vn;++un){for(tn=Ut=0;Ut<Zt;++Ut)tn+=Ue[Ut][un][1]||0;if(tn)for(Ut=0;Ut<Zt;++Ut)Ue[Ut][un][1]/=tn}Lt(Ue,wt)}},i.stackOffsetNone=Lt,i.stackOffsetSilhouette=function(Ue,wt){if((Ut=Ue.length)>0){for(var Ut,Zt=0,tn=Ue[wt[0]],un=tn.length;Zt<un;++Zt){for(var vn=0,Qt=0;vn<Ut;++vn)Qt+=Ue[vn][Zt][1]||0;tn[Zt][1]+=tn[Zt][0]=-Qt/2}Lt(Ue,wt)}},i.stackOffsetWiggle=function(Ue,wt){if((tn=Ue.length)>0&&(Zt=(Ut=Ue[wt[0]]).length)>0){for(var Ut,Zt,tn,un=0,vn=1;vn<Zt;++vn){for(var Qt=0,yn=0,Mn=0;Qt<tn;++Qt){for(var Pn=Ue[wt[Qt]],sn=Pn[vn][1]||0,In=(sn-(Pn[vn-1][1]||0))/2,Rn=0;Rn<Qt;++Rn){var Ln=Ue[wt[Rn]];In+=(Ln[vn][1]||0)-(Ln[vn-1][1]||0)}yn+=sn,Mn+=In*sn}Ut[vn-1][1]+=Ut[vn-1][0]=un,yn&&(un-=Mn/yn)}Ut[vn-1][1]+=Ut[vn-1][0]=un,Lt(Ue,wt)}},i.stackOrderAppearance=Wt,i.stackOrderAscending=rn,i.stackOrderDescending=function(Ue){return rn(Ue).reverse()},i.stackOrderInsideOut=function(Ue){var wt,Ut,Zt=Ue.length,tn=Ue.map(Yt),un=Wt(Ue),vn=0,Qt=0,yn=[],Mn=[];for(wt=0;wt<Zt;++wt)Ut=un[wt],vn<Qt?(vn+=tn[Ut],yn.push(Ut)):(Qt+=tn[Ut],Mn.push(Ut));return Mn.reverse().concat(yn)},i.stackOrderNone=Vt,i.stackOrderReverse=function(Ue){return Vt(Ue).reverse()},i.symbol=function(){var Ue=b(ue),wt=b(64),Ut=null;function Zt(){var tn;if(Ut||(Ut=tn=m.path()),Ue.apply(this,arguments).draw(Ut,+wt.apply(this,arguments)),tn)return Ut=null,tn+""||null}return Zt.type=function(tn){return arguments.length?(Ue="function"==typeof tn?tn:b(tn),Zt):Ue},Zt.size=function(tn){return arguments.length?(wt="function"==typeof tn?tn:b(+tn),Zt):wt},Zt.context=function(tn){return arguments.length?(Ut=null==tn?null:tn,Zt):Ut},Zt},i.symbolCircle=ue,i.symbolCross=fe,i.symbolDiamond=be,i.symbolSquare=ze,i.symbolStar=ke,i.symbolTriangle=Ie,i.symbolWye=Oe,i.symbols=Be,Object.defineProperty(i,"__esModule",{value:!0})},"object"==typeof X&&void 0!==G?m(X,h("d3-path")):m((i=i||self).d3=i.d3||{},i.d3)},{"d3-path":172}],175:[function(h,G,X){var i,m;i=this,m=function(i,m){"use strict";function b(ht){if(0<=ht.y&&ht.y<100){var st=new Date(-1,ht.m,ht.d,ht.H,ht.M,ht.S,ht.L);return st.setFullYear(ht.y),st}return new Date(ht.y,ht.m,ht.d,ht.H,ht.M,ht.S,ht.L)}function p(ht){if(0<=ht.y&&ht.y<100){var st=new Date(Date.UTC(-1,ht.m,ht.d,ht.H,ht.M,ht.S,ht.L));return st.setUTCFullYear(ht.y),st}return new Date(Date.UTC(ht.y,ht.m,ht.d,ht.H,ht.M,ht.S,ht.L))}function r(ht,st,Bt){return{y:ht,m:st,d:Bt,H:0,M:0,S:0,L:0}}function u(ht){var st=ht.dateTime,Bt=ht.date,gn=ht.time,hn=ht.periods,We=ht.days,it=ht.shortDays,qt=ht.months,Ge=ht.shortMonths,Pe=y(hn),Ee=v(hn),Ne=y(We),Ve=v(We),Ke=y(it),bt=v(it),gt=y(qt),pt=v(qt),St=y(Ge),jt=v(Ge),Lt={a:function(Yt){return it[Yt.getDay()]},A:function(Yt){return We[Yt.getDay()]},b:function(Yt){return Ge[Yt.getMonth()]},B:function(Yt){return qt[Yt.getMonth()]},c:null,d:te,e:te,f:W,H:K,I:q,j:re,L:V,m:Z,M:oe,p:function(Yt){return hn[+(Yt.getHours()>=12)]},q:function(Yt){return 1+~~(Yt.getMonth()/3)},Q:ct,s:_t,S:ie,u:ue,U:fe,V:he,w:de,W:be,x:null,X:null,y:pe,Y:Te,Z:ye,"%":at},Vt={a:function(Yt){return it[Yt.getUTCDay()]},A:function(Yt){return We[Yt.getUTCDay()]},b:function(Yt){return Ge[Yt.getUTCMonth()]},B:function(Yt){return qt[Yt.getUTCMonth()]},c:null,d:ke,e:ke,f:_e,H:ze,I:je,j:Ie,L:Ce,m:we,M:Se,p:function(Yt){return hn[+(Yt.getUTCHours()>=12)]},q:function(Yt){return 1+~~(Yt.getUTCMonth()/3)},Q:ct,s:_t,S:Oe,u:Be,U:He,V:Xe,w:nt,W:et,x:null,X:null,y:qe,Y:Ye,Z:ot,"%":at},mt={a:function(Yt,Ue,wt){var Ut=Ke.exec(Ue.slice(wt));return Ut?(Yt.w=bt[Ut[0].toLowerCase()],wt+Ut[0].length):-1},A:function(Yt,Ue,wt){var Ut=Ne.exec(Ue.slice(wt));return Ut?(Yt.w=Ve[Ut[0].toLowerCase()],wt+Ut[0].length):-1},b:function(Yt,Ue,wt){var Ut=St.exec(Ue.slice(wt));return Ut?(Yt.m=jt[Ut[0].toLowerCase()],wt+Ut[0].length):-1},B:function(Yt,Ue,wt){var Ut=gt.exec(Ue.slice(wt));return Ut?(Yt.m=pt[Ut[0].toLowerCase()],wt+Ut[0].length):-1},c:function(Yt,Ue,wt){return rn(Yt,st,Ue,wt)},d:D,e:D,f:Y,H:S,I:S,j:R,L:H,m:I,M:N,p:function(Yt,Ue,wt){var Ut=Pe.exec(Ue.slice(wt));return Ut?(Yt.p=Ee[Ut[0].toLowerCase()],wt+Ut[0].length):-1},q:A,Q:ne,s:ae,S:B,u:w,U:x,V:E,w:_,W:k,x:function(Yt,Ue,wt){return rn(Yt,Bt,Ue,wt)},X:function(Yt,Ue,wt){return rn(Yt,gn,Ue,wt)},y:L,Y:C,Z:P,"%":Q};function Wt(Yt,Ue){return function(wt){var Ut,Zt,tn,un=[],vn=-1,Qt=0,yn=Yt.length;for(wt instanceof Date||(wt=new Date(+wt));++vn<yn;)37===Yt.charCodeAt(vn)&&(un.push(Yt.slice(Qt,vn)),null!=(Zt=l[Ut=Yt.charAt(++vn)])?Ut=Yt.charAt(++vn):Zt="e"===Ut?" ":"0",(tn=Ue[Ut])&&(Ut=tn(wt,Zt)),un.push(Ut),Qt=vn+1);return un.push(Yt.slice(Qt,vn)),un.join("")}}function Kt(Yt,Ue){return function(wt){var Ut,Zt,tn=r(1900,void 0,1);if(rn(tn,Yt,wt+="",0)!=wt.length)return null;if("Q"in tn)return new Date(tn.Q);if("s"in tn)return new Date(1e3*tn.s+("L"in tn?tn.L:0));if(Ue&&!("Z"in tn)&&(tn.Z=0),"p"in tn&&(tn.H=tn.H%12+12*tn.p),void 0===tn.m&&(tn.m="q"in tn?tn.q:0),"V"in tn){if(tn.V<1||tn.V>53)return null;"w"in tn||(tn.w=1),"Z"in tn?(Zt=(Ut=p(r(tn.y,0,1))).getUTCDay(),Ut=Zt>4||0===Zt?m.utcMonday.ceil(Ut):m.utcMonday(Ut),Ut=m.utcDay.offset(Ut,7*(tn.V-1)),tn.y=Ut.getUTCFullYear(),tn.m=Ut.getUTCMonth(),tn.d=Ut.getUTCDate()+(tn.w+6)%7):(Zt=(Ut=b(r(tn.y,0,1))).getDay(),Ut=Zt>4||0===Zt?m.timeMonday.ceil(Ut):m.timeMonday(Ut),Ut=m.timeDay.offset(Ut,7*(tn.V-1)),tn.y=Ut.getFullYear(),tn.m=Ut.getMonth(),tn.d=Ut.getDate()+(tn.w+6)%7)}else("W"in tn||"U"in tn)&&("w"in tn||(tn.w="u"in tn?tn.u%7:"W"in tn?1:0),Zt="Z"in tn?p(r(tn.y,0,1)).getUTCDay():b(r(tn.y,0,1)).getDay(),tn.m=0,tn.d="W"in tn?(tn.w+6)%7+7*tn.W-(Zt+5)%7:tn.w+7*tn.U-(Zt+6)%7);return"Z"in tn?(tn.H+=tn.Z/100|0,tn.M+=tn.Z%100,p(tn)):b(tn)}}function rn(Yt,Ue,wt,Ut){for(var Zt,tn,un=0,vn=Ue.length,Qt=wt.length;un<vn;){if(Ut>=Qt)return-1;if(37===(Zt=Ue.charCodeAt(un++))){if(Zt=Ue.charAt(un++),!(tn=mt[Zt in l?Ue.charAt(un++):Zt])||(Ut=tn(Yt,wt,Ut))<0)return-1}else if(Zt!=wt.charCodeAt(Ut++))return-1}return Ut}return Lt.x=Wt(Bt,Lt),Lt.X=Wt(gn,Lt),Lt.c=Wt(st,Lt),Vt.x=Wt(Bt,Vt),Vt.X=Wt(gn,Vt),Vt.c=Wt(st,Vt),{format:function(Yt){var Ue=Wt(Yt+="",Lt);return Ue.toString=function(){return Yt},Ue},parse:function(Yt){var Ue=Kt(Yt+="",!1);return Ue.toString=function(){return Yt},Ue},utcFormat:function(Yt){var Ue=Wt(Yt+="",Vt);return Ue.toString=function(){return Yt},Ue},utcParse:function(Yt){var Ue=Kt(Yt+="",!0);return Ue.toString=function(){return Yt},Ue}}}var c,l={"-":"",_:" ",0:"0"},f=/^\s*\d+/,s=/^%/,o=/[\\^$*+?|[\]().{}]/g;function d(ht,st,Bt){var gn=ht<0?"-":"",hn=(gn?-ht:ht)+"",We=hn.length;return gn+(We<Bt?new Array(Bt-We+1).join(st)+hn:hn)}function g(ht){return ht.replace(o,"\\$&")}function y(ht){return new RegExp("^(?:"+ht.map(g).join("|")+")","i")}function v(ht){for(var st={},Bt=-1,gn=ht.length;++Bt<gn;)st[ht[Bt].toLowerCase()]=Bt;return st}function _(ht,st,Bt){var gn=f.exec(st.slice(Bt,Bt+1));return gn?(ht.w=+gn[0],Bt+gn[0].length):-1}function w(ht,st,Bt){var gn=f.exec(st.slice(Bt,Bt+1));return gn?(ht.u=+gn[0],Bt+gn[0].length):-1}function x(ht,st,Bt){var gn=f.exec(st.slice(Bt,Bt+2));return gn?(ht.U=+gn[0],Bt+gn[0].length):-1}function E(ht,st,Bt){var gn=f.exec(st.slice(Bt,Bt+2));return gn?(ht.V=+gn[0],Bt+gn[0].length):-1}function k(ht,st,Bt){var gn=f.exec(st.slice(Bt,Bt+2));return gn?(ht.W=+gn[0],Bt+gn[0].length):-1}function C(ht,st,Bt){var gn=f.exec(st.slice(Bt,Bt+4));return gn?(ht.y=+gn[0],Bt+gn[0].length):-1}function L(ht,st,Bt){var gn=f.exec(st.slice(Bt,Bt+2));return gn?(ht.y=+gn[0]+(+gn[0]>68?1900:2e3),Bt+gn[0].length):-1}function P(ht,st,Bt){var gn=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(st.slice(Bt,Bt+6));return gn?(ht.Z=gn[1]?0:-(gn[2]+(gn[3]||"00")),Bt+gn[0].length):-1}function A(ht,st,Bt){var gn=f.exec(st.slice(Bt,Bt+1));return gn?(ht.q=3*gn[0]-3,Bt+gn[0].length):-1}function I(ht,st,Bt){var gn=f.exec(st.slice(Bt,Bt+2));return gn?(ht.m=gn[0]-1,Bt+gn[0].length):-1}function D(ht,st,Bt){var gn=f.exec(st.slice(Bt,Bt+2));return gn?(ht.d=+gn[0],Bt+gn[0].length):-1}function R(ht,st,Bt){var gn=f.exec(st.slice(Bt,Bt+3));return gn?(ht.m=0,ht.d=+gn[0],Bt+gn[0].length):-1}function S(ht,st,Bt){var gn=f.exec(st.slice(Bt,Bt+2));return gn?(ht.H=+gn[0],Bt+gn[0].length):-1}function N(ht,st,Bt){var gn=f.exec(st.slice(Bt,Bt+2));return gn?(ht.M=+gn[0],Bt+gn[0].length):-1}function B(ht,st,Bt){var gn=f.exec(st.slice(Bt,Bt+2));return gn?(ht.S=+gn[0],Bt+gn[0].length):-1}function H(ht,st,Bt){var gn=f.exec(st.slice(Bt,Bt+3));return gn?(ht.L=+gn[0],Bt+gn[0].length):-1}function Y(ht,st,Bt){var gn=f.exec(st.slice(Bt,Bt+6));return gn?(ht.L=Math.floor(gn[0]/1e3),Bt+gn[0].length):-1}function Q(ht,st,Bt){var gn=s.exec(st.slice(Bt,Bt+1));return gn?Bt+gn[0].length:-1}function ne(ht,st,Bt){var gn=f.exec(st.slice(Bt));return gn?(ht.Q=+gn[0],Bt+gn[0].length):-1}function ae(ht,st,Bt){var gn=f.exec(st.slice(Bt));return gn?(ht.s=+gn[0],Bt+gn[0].length):-1}function te(ht,st){return d(ht.getDate(),st,2)}function K(ht,st){return d(ht.getHours(),st,2)}function q(ht,st){return d(ht.getHours()%12||12,st,2)}function re(ht,st){return d(1+m.timeDay.count(m.timeYear(ht),ht),st,3)}function V(ht,st){return d(ht.getMilliseconds(),st,3)}function W(ht,st){return V(ht,st)+"000"}function Z(ht,st){return d(ht.getMonth()+1,st,2)}function oe(ht,st){return d(ht.getMinutes(),st,2)}function ie(ht,st){return d(ht.getSeconds(),st,2)}function ue(ht){var st=ht.getDay();return 0===st?7:st}function fe(ht,st){return d(m.timeSunday.count(m.timeYear(ht)-1,ht),st,2)}function he(ht,st){var Bt=ht.getDay();return ht=Bt>=4||0===Bt?m.timeThursday(ht):m.timeThursday.ceil(ht),d(m.timeThursday.count(m.timeYear(ht),ht)+(4===m.timeYear(ht).getDay()),st,2)}function de(ht){return ht.getDay()}function be(ht,st){return d(m.timeMonday.count(m.timeYear(ht)-1,ht),st,2)}function pe(ht,st){return d(ht.getFullYear()%100,st,2)}function Te(ht,st){return d(ht.getFullYear()%1e4,st,4)}function ye(ht){var st=ht.getTimezoneOffset();return(st>0?"-":(st*=-1,"+"))+d(st/60|0,"0",2)+d(st%60,"0",2)}function ke(ht,st){return d(ht.getUTCDate(),st,2)}function ze(ht,st){return d(ht.getUTCHours(),st,2)}function je(ht,st){return d(ht.getUTCHours()%12||12,st,2)}function Ie(ht,st){return d(1+m.utcDay.count(m.utcYear(ht),ht),st,3)}function Ce(ht,st){return d(ht.getUTCMilliseconds(),st,3)}function _e(ht,st){return Ce(ht,st)+"000"}function we(ht,st){return d(ht.getUTCMonth()+1,st,2)}function Se(ht,st){return d(ht.getUTCMinutes(),st,2)}function Oe(ht,st){return d(ht.getUTCSeconds(),st,2)}function Be(ht){var st=ht.getUTCDay();return 0===st?7:st}function He(ht,st){return d(m.utcSunday.count(m.utcYear(ht)-1,ht),st,2)}function Xe(ht,st){var Bt=ht.getUTCDay();return ht=Bt>=4||0===Bt?m.utcThursday(ht):m.utcThursday.ceil(ht),d(m.utcThursday.count(m.utcYear(ht),ht)+(4===m.utcYear(ht).getUTCDay()),st,2)}function nt(ht){return ht.getUTCDay()}function et(ht,st){return d(m.utcMonday.count(m.utcYear(ht)-1,ht),st,2)}function qe(ht,st){return d(ht.getUTCFullYear()%100,st,2)}function Ye(ht,st){return d(ht.getUTCFullYear()%1e4,st,4)}function ot(){return"+0000"}function at(){return"%"}function ct(ht){return+ht}function _t(ht){return Math.floor(+ht/1e3)}function xt(ht){return c=u(ht),i.timeFormat=c.format,i.timeParse=c.parse,i.utcFormat=c.utcFormat,i.utcParse=c.utcParse,c}xt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ht=Date.prototype.toISOString?function(ht){return ht.toISOString()}:i.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),At=+new Date("2000-01-01T00:00:00.000Z")?function(ht){var st=new Date(ht);return isNaN(st)?null:st}:i.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");i.isoFormat=Ht,i.isoParse=At,i.timeFormatDefaultLocale=xt,i.timeFormatLocale=u,Object.defineProperty(i,"__esModule",{value:!0})},"object"==typeof X&&void 0!==G?m(X,h("d3-time")):m((i=i||self).d3=i.d3||{},i.d3)},{"d3-time":176}],176:[function(h,G,X){var i;i=this,function(i){"use strict";var m=new Date,b=new Date;function p(we,Se,Oe,Be){function He(Xe){return we(Xe=0===arguments.length?new Date:new Date(+Xe)),Xe}return He.floor=function(Xe){return we(Xe=new Date(+Xe)),Xe},He.ceil=function(Xe){return we(Xe=new Date(Xe-1)),Se(Xe,1),we(Xe),Xe},He.round=function(Xe){var nt=He(Xe),et=He.ceil(Xe);return Xe-nt<et-Xe?nt:et},He.offset=function(Xe,nt){return Se(Xe=new Date(+Xe),null==nt?1:Math.floor(nt)),Xe},He.range=function(Xe,nt,et){var qe,Ye=[];if(Xe=He.ceil(Xe),et=null==et?1:Math.floor(et),!(Xe<nt&&et>0))return Ye;do{Ye.push(qe=new Date(+Xe)),Se(Xe,et),we(Xe)}while(qe<Xe&&Xe<nt);return Ye},He.filter=function(Xe){return p(function(nt){if(nt>=nt)for(;we(nt),!Xe(nt);)nt.setTime(nt-1)},function(nt,et){if(nt>=nt)if(et<0)for(;++et<=0;)for(;Se(nt,-1),!Xe(nt););else for(;--et>=0;)for(;Se(nt,1),!Xe(nt););})},Oe&&(He.count=function(Xe,nt){return m.setTime(+Xe),b.setTime(+nt),we(m),we(b),Math.floor(Oe(m,b))},He.every=function(Xe){return Xe=Math.floor(Xe),isFinite(Xe)&&Xe>0?Xe>1?He.filter(Be?function(nt){return Be(nt)%Xe==0}:function(nt){return He.count(0,nt)%Xe==0}):He:null}),He}var r=p(function(){},function(we,Se){we.setTime(+we+Se)},function(we,Se){return Se-we});r.every=function(we){return we=Math.floor(we),isFinite(we)&&we>0?we>1?p(function(Se){Se.setTime(Math.floor(Se/we)*we)},function(Se,Oe){Se.setTime(+Se+Oe*we)},function(Se,Oe){return(Oe-Se)/we}):r:null};var u=r.range,c=p(function(we){we.setTime(we-we.getMilliseconds())},function(we,Se){we.setTime(+we+1e3*Se)},function(we,Se){return(Se-we)/1e3},function(we){return we.getUTCSeconds()}),l=c.range,f=p(function(we){we.setTime(we-we.getMilliseconds()-1e3*we.getSeconds())},function(we,Se){we.setTime(+we+6e4*Se)},function(we,Se){return(Se-we)/6e4},function(we){return we.getMinutes()}),s=f.range,o=p(function(we){we.setTime(we-we.getMilliseconds()-1e3*we.getSeconds()-6e4*we.getMinutes())},function(we,Se){we.setTime(+we+36e5*Se)},function(we,Se){return(Se-we)/36e5},function(we){return we.getHours()}),d=o.range,g=p(function(we){we.setHours(0,0,0,0)},function(we,Se){we.setDate(we.getDate()+Se)},function(we,Se){return(Se-we-6e4*(Se.getTimezoneOffset()-we.getTimezoneOffset()))/864e5},function(we){return we.getDate()-1}),y=g.range;function v(we){return p(function(Se){Se.setDate(Se.getDate()-(Se.getDay()+7-we)%7),Se.setHours(0,0,0,0)},function(Se,Oe){Se.setDate(Se.getDate()+7*Oe)},function(Se,Oe){return(Oe-Se-6e4*(Oe.getTimezoneOffset()-Se.getTimezoneOffset()))/6048e5})}var _=v(0),w=v(1),x=v(2),E=v(3),k=v(4),C=v(5),L=v(6),P=_.range,A=w.range,I=x.range,D=E.range,R=k.range,S=C.range,N=L.range,B=p(function(we){we.setDate(1),we.setHours(0,0,0,0)},function(we,Se){we.setMonth(we.getMonth()+Se)},function(we,Se){return Se.getMonth()-we.getMonth()+12*(Se.getFullYear()-we.getFullYear())},function(we){return we.getMonth()}),H=B.range,Y=p(function(we){we.setMonth(0,1),we.setHours(0,0,0,0)},function(we,Se){we.setFullYear(we.getFullYear()+Se)},function(we,Se){return Se.getFullYear()-we.getFullYear()},function(we){return we.getFullYear()});Y.every=function(we){return isFinite(we=Math.floor(we))&&we>0?p(function(Se){Se.setFullYear(Math.floor(Se.getFullYear()/we)*we),Se.setMonth(0,1),Se.setHours(0,0,0,0)},function(Se,Oe){Se.setFullYear(Se.getFullYear()+Oe*we)}):null};var Q=Y.range,ne=p(function(we){we.setUTCSeconds(0,0)},function(we,Se){we.setTime(+we+6e4*Se)},function(we,Se){return(Se-we)/6e4},function(we){return we.getUTCMinutes()}),ae=ne.range,te=p(function(we){we.setUTCMinutes(0,0,0)},function(we,Se){we.setTime(+we+36e5*Se)},function(we,Se){return(Se-we)/36e5},function(we){return we.getUTCHours()}),K=te.range,q=p(function(we){we.setUTCHours(0,0,0,0)},function(we,Se){we.setUTCDate(we.getUTCDate()+Se)},function(we,Se){return(Se-we)/864e5},function(we){return we.getUTCDate()-1}),re=q.range;function V(we){return p(function(Se){Se.setUTCDate(Se.getUTCDate()-(Se.getUTCDay()+7-we)%7),Se.setUTCHours(0,0,0,0)},function(Se,Oe){Se.setUTCDate(Se.getUTCDate()+7*Oe)},function(Se,Oe){return(Oe-Se)/6048e5})}var W=V(0),Z=V(1),oe=V(2),ie=V(3),ue=V(4),fe=V(5),he=V(6),de=W.range,be=Z.range,pe=oe.range,Te=ie.range,ye=ue.range,ke=fe.range,ze=he.range,je=p(function(we){we.setUTCDate(1),we.setUTCHours(0,0,0,0)},function(we,Se){we.setUTCMonth(we.getUTCMonth()+Se)},function(we,Se){return Se.getUTCMonth()-we.getUTCMonth()+12*(Se.getUTCFullYear()-we.getUTCFullYear())},function(we){return we.getUTCMonth()}),Ie=je.range,Ce=p(function(we){we.setUTCMonth(0,1),we.setUTCHours(0,0,0,0)},function(we,Se){we.setUTCFullYear(we.getUTCFullYear()+Se)},function(we,Se){return Se.getUTCFullYear()-we.getUTCFullYear()},function(we){return we.getUTCFullYear()});Ce.every=function(we){return isFinite(we=Math.floor(we))&&we>0?p(function(Se){Se.setUTCFullYear(Math.floor(Se.getUTCFullYear()/we)*we),Se.setUTCMonth(0,1),Se.setUTCHours(0,0,0,0)},function(Se,Oe){Se.setUTCFullYear(Se.getUTCFullYear()+Oe*we)}):null};var _e=Ce.range;i.timeDay=g,i.timeDays=y,i.timeFriday=C,i.timeFridays=S,i.timeHour=o,i.timeHours=d,i.timeInterval=p,i.timeMillisecond=r,i.timeMilliseconds=u,i.timeMinute=f,i.timeMinutes=s,i.timeMonday=w,i.timeMondays=A,i.timeMonth=B,i.timeMonths=H,i.timeSaturday=L,i.timeSaturdays=N,i.timeSecond=c,i.timeSeconds=l,i.timeSunday=_,i.timeSundays=P,i.timeThursday=k,i.timeThursdays=R,i.timeTuesday=x,i.timeTuesdays=I,i.timeWednesday=E,i.timeWednesdays=D,i.timeWeek=_,i.timeWeeks=P,i.timeYear=Y,i.timeYears=Q,i.utcDay=q,i.utcDays=re,i.utcFriday=fe,i.utcFridays=ke,i.utcHour=te,i.utcHours=K,i.utcMillisecond=r,i.utcMilliseconds=u,i.utcMinute=ne,i.utcMinutes=ae,i.utcMonday=Z,i.utcMondays=be,i.utcMonth=je,i.utcMonths=Ie,i.utcSaturday=he,i.utcSaturdays=ze,i.utcSecond=c,i.utcSeconds=l,i.utcSunday=W,i.utcSundays=de,i.utcThursday=ue,i.utcThursdays=ye,i.utcTuesday=oe,i.utcTuesdays=pe,i.utcWednesday=ie,i.utcWednesdays=Te,i.utcWeek=W,i.utcWeeks=de,i.utcYear=Ce,i.utcYears=_e,Object.defineProperty(i,"__esModule",{value:!0})}("object"==typeof X&&void 0!==G?X:(i=i||self).d3=i.d3||{})},{}],177:[function(h,G,X){arguments[4][176][0].apply(X,arguments)},{dup:176}],178:[function(h,G,X){var i;i=this,function(i){"use strict";var m,b,p=0,r=0,u=0,c=0,l=0,f=0,s="object"==typeof performance&&performance.now?performance:Date,o="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(k){setTimeout(k,17)};function d(){return l||(o(g),l=s.now()+f)}function g(){l=0}function y(){this._call=this._time=this._next=null}function v(k,C,L){var P=new y;return P.restart(k,C,L),P}function _(){d(),++p;for(var k,C=m;C;)(k=l-C._time)>=0&&C._call.call(null,k),C=C._next;--p}function w(){l=(c=s.now())+f,p=r=0;try{_()}finally{p=0,function(){for(var k,C,L=m,P=1/0;L;)L._call?(P>L._time&&(P=L._time),k=L,L=L._next):(C=L._next,L._next=null,L=k?k._next=C:m=C);b=k,E(P)}(),l=0}}function x(){var k=s.now(),C=k-c;C>1e3&&(f-=C,c=k)}function E(k){p||(r&&(r=clearTimeout(r)),k-l>24?(k<1/0&&(r=setTimeout(w,k-s.now()-f)),u&&(u=clearInterval(u))):(u||(c=s.now(),u=setInterval(x,1e3)),p=1,o(w)))}y.prototype=v.prototype={constructor:y,restart:function(k,C,L){if("function"!=typeof k)throw new TypeError("callback is not a function");L=(null==L?d():+L)+(null==C?0:+C),this._next||b===this||(b?b._next=this:m=this,b=this),this._call=k,this._time=L,E()},stop:function(){this._call&&(this._call=null,this._time=1/0,E())}},i.interval=function(k,C,L){var P=new y,A=C;return null==C?(P.restart(k,C,L),P):(C=+C,L=null==L?d():+L,P.restart(function I(D){D+=A,P.restart(I,A+=C,L),k(D)},C,L),P)},i.now=d,i.timeout=function(k,C,L){var P=new y;return P.restart(function(A){P.stop(),k(A+C)},C=null==C?0:+C,L),P},i.timer=v,i.timerFlush=_,Object.defineProperty(i,"__esModule",{value:!0})}("object"==typeof X&&void 0!==G?X:(i=i||self).d3=i.d3||{})},{}],179:[function(h,G,X){G.exports=function(){for(var i=0;i<arguments.length;i++)if(void 0!==arguments[i])return arguments[i]}},{}],180:[function(h,G,X){"use strict";var i=h("incremental-convex-hull"),m=h("uniq");function b(r,u){this.point=r,this.index=u}function p(r,u){for(var c=r.point,l=u.point,f=c.length,s=0;s<f;++s){var o=l[s]-c[s];if(o)return o}return 0}G.exports=function(r,u){var c=r.length;if(0===c)return[];var l=r[0].length;if(l<1)return[];if(1===l)return function(P,A,I){if(1===P)return I?[[-1,0]]:[];var D=A.map(function(H,Y){return[H[0],Y]});D.sort(function(H,Y){return H[0]-Y[0]});for(var R=new Array(P-1),S=1;S<P;++S)R[S-1]=[D[S-1][1],D[S][1]];return I&&R.push([-1,R[0][1]],[R[P-1][1],-1]),R}(c,r,u);for(var f=new Array(c),s=1,o=0;o<c;++o){for(var d=r[o],g=new Array(l+1),y=0,v=0;v<l;++v){var _=d[v];g[v]=_,y+=_*_}g[l]=y,f[o]=new b(g,o),s=Math.max(y,s)}m(f,p),c=f.length;var w=new Array(c+l+1),x=new Array(c+l+1),E=(l+1)*(l+1)*s,k=new Array(l+1);for(o=0;o<=l;++o)k[o]=0;for(k[l]=E,w[0]=k.slice(),x[0]=-1,o=0;o<=l;++o)(g=k.slice())[o]=1,w[o+1]=g,x[o+1]=-1;for(o=0;o<c;++o){var C=f[o];w[o+l+1]=C.point,x[o+l+1]=C.index}var L=i(w,!1);if(L=L.filter(u?function(P){for(var A=0,I=0;I<=l;++I){var D=x[P[I]];if(D<0&&++A>=2)return!1;P[I]=D}return!0}:function(P){for(var A=0;A<=l;++A){var I=x[P[A]];if(I<0)return!1;P[A]=I}return!0}),1&l)for(o=0;o<L.length;++o)g=(C=L[o])[0],C[0]=C[1],C[1]=g;return L}},{"incremental-convex-hull":446,uniq:619}],181:[function(h,G,X){"use strict";G.exports=b;var i=(b.canvas=document.createElement("canvas")).getContext("2d"),m=p([32,126]);function b(r,u){Array.isArray(r)&&(r=r.join(", "));var c,l={},f=16,s=.05;u&&(2===u.length&&"number"==typeof u[0]?c=p(u):Array.isArray(u)?c=u:(u.o?c=p(u.o):u.pairs&&(c=u.pairs),u.fontSize&&(f=u.fontSize),null!=u.threshold&&(s=u.threshold))),c||(c=m),i.font=f+"px "+r;for(var o=0;o<c.length;o++){var d=c[o],g=i.measureText(d[0]).width+i.measureText(d[1]).width,y=i.measureText(d).width;Math.abs(g-y)>f*s&&(l[d]=(y-g)/f*1e3)}return l}function p(r){for(var u=[],c=r[0];c<=r[1];c++)for(var l=String.fromCharCode(c),f=r[0];f<r[1];f++){var s=l+String.fromCharCode(f);u.push(s)}return u}b.createPairs=p,b.ascii=m},{}],182:[function(h,G,X){(function(i){(function(){var m=!1;if("undefined"!=typeof Float64Array){var b=new Float64Array(1),p=new Uint32Array(b.buffer);b[0]=1,m=!0,1072693248===p[1]?(G.exports=function(u){return b[0]=u,[p[0],p[1]]},G.exports.pack=function(u,c){return p[0]=u,p[1]=c,b[0]},G.exports.lo=function(u){return b[0]=u,p[0]},G.exports.hi=function(u){return b[0]=u,p[1]}):1072693248===p[0]?(G.exports=function(u){return b[0]=u,[p[1],p[0]]},G.exports.pack=function(u,c){return p[1]=u,p[0]=c,b[0]},G.exports.lo=function(u){return b[0]=u,p[1]},G.exports.hi=function(u){return b[0]=u,p[0]}):m=!1}if(!m){var r=new i(8);G.exports=function(u){return r.writeDoubleLE(u,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},G.exports.pack=function(u,c){return r.writeUInt32LE(u,0,!0),r.writeUInt32LE(c,4,!0),r.readDoubleLE(0,!0)},G.exports.lo=function(u){return r.writeDoubleLE(u,0,!0),r.readUInt32LE(0,!0)},G.exports.hi=function(u){return r.writeDoubleLE(u,0,!0),r.readUInt32LE(4,!0)}}G.exports.sign=function(u){return G.exports.hi(u)>>>31},G.exports.exponent=function(u){return(G.exports.hi(u)<<1>>>21)-1023},G.exports.fraction=function(u){var c=G.exports.lo(u),l=G.exports.hi(u),f=1048575&l;return 2146435072&l&&(f+=1<<20),[c,f]},G.exports.denormalized=function(u){return!(2146435072&G.exports.hi(u))}}).call(this)}).call(this,h("buffer").Buffer)},{buffer:117}],183:[function(h,G,X){var i=h("abs-svg-path"),m=h("normalize-svg-path"),b={M:"moveTo",C:"bezierCurveTo"};G.exports=function(p,r){p.beginPath(),m(i(r)).forEach(function(u){var c=u[0],l=u.slice(1);p[b[c]].apply(p,l)}),p.closePath()}},{"abs-svg-path":71,"normalize-svg-path":485}],184:[function(h,G,X){G.exports=function(i){switch(i){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],185:[function(h,G,X){"use strict";G.exports=function(i,m){switch(void 0===m&&(m=0),typeof i){case"number":if(i>0)return function(b,p){var r,u;for(r=new Array(b),u=0;u<b;++u)r[u]=p;return r}(0|i,m);break;case"object":if("number"==typeof i.length)return function b(p,r,u){var c=0|p[u];if(c<=0)return[];var l,f=new Array(c);if(u===p.length-1)for(l=0;l<c;++l)f[l]=r;else for(l=0;l<c;++l)f[l]=b(p,r,u+1);return f}(i,m,0)}return[]}},{}],186:[function(h,G,X){"use strict";function i(R,S,N){N=N||2;var B,H,Y,Q,ne,ae,te,K=S&&S.length,q=K?S[0]*N:R.length,re=m(R,0,q,N,!0),V=[];if(!re||re.next===re.prev)return V;if(K&&(re=function(Z,oe,ie,ue){var fe,he,pe,Te=[];for(fe=0,he=oe.length;fe<he;fe++)(pe=m(Z,oe[fe]*ue,fe<he-1?oe[fe+1]*ue:Z.length,ue,!1))===pe.next&&(pe.steiner=!0),Te.push(g(pe));for(Te.sort(f),fe=0;fe<Te.length;fe++)s(Te[fe],ie),ie=b(ie,ie.next);return ie}(R,S,re,N)),R.length>80*N){B=Y=R[0],H=Q=R[1];for(var W=N;W<q;W+=N)(ne=R[W])<B&&(B=ne),(ae=R[W+1])<H&&(H=ae),ne>Y&&(Y=ne),ae>Q&&(Q=ae);te=0!==(te=Math.max(Y-B,Q-H))?1/te:0}return p(re,V,N,B,H,te),V}function m(R,S,N,B,H){var Y,Q;if(H===D(R,S,N,B)>0)for(Y=S;Y<N;Y+=B)Q=P(Y,R[Y],R[Y+1],Q);else for(Y=N-B;Y>=S;Y-=B)Q=P(Y,R[Y],R[Y+1],Q);return Q&&w(Q,Q.next)&&(A(Q),Q=Q.next),Q}function b(R,S){if(!R)return R;S||(S=R);var N,B=R;do{if(N=!1,B.steiner||!w(B,B.next)&&0!==_(B.prev,B,B.next))B=B.next;else{if(A(B),(B=S=B.prev)===B.next)break;N=!0}}while(N||B!==S);return S}function p(R,S,N,B,H,Y,Q){if(R){!Q&&Y&&function(K,q,re,V){var W=K;do{null===W.z&&(W.z=d(W.x,W.y,q,re,V)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next}while(W!==K);W.prevZ.nextZ=null,W.prevZ=null,function(Z){var oe,ie,ue,fe,he,de,be,pe,Te=1;do{for(ie=Z,Z=null,he=null,de=0;ie;){for(de++,ue=ie,be=0,oe=0;oe<Te&&(be++,ue=ue.nextZ);oe++);for(pe=Te;be>0||pe>0&&ue;)0!==be&&(0===pe||!ue||ie.z<=ue.z)?(fe=ie,ie=ie.nextZ,be--):(fe=ue,ue=ue.nextZ,pe--),he?he.nextZ=fe:Z=fe,fe.prevZ=he,he=fe;ie=ue}he.nextZ=null,Te*=2}while(de>1)}(W)}(R,B,H,Y);for(var ne,ae,te=R;R.prev!==R.next;)if(ne=R.prev,ae=R.next,Y?u(R,B,H,Y):r(R))S.push(ne.i/N),S.push(R.i/N),S.push(ae.i/N),A(R),R=ae.next,te=ae.next;else if((R=ae)===te){Q?1===Q?p(R=c(b(R),S,N),S,N,B,H,Y,2):2===Q&&l(R,S,N,B,H,Y):p(b(R),S,N,B,H,Y,1);break}}}function r(R){var S=R.prev,N=R,B=R.next;if(_(S,N,B)>=0)return!1;for(var H=R.next.next;H!==R.prev;){if(y(S.x,S.y,N.x,N.y,B.x,B.y,H.x,H.y)&&_(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function u(R,S,N,B){var H=R.prev,Y=R,Q=R.next;if(_(H,Y,Q)>=0)return!1;for(var te=H.x>Y.x?H.x>Q.x?H.x:Q.x:Y.x>Q.x?Y.x:Q.x,K=H.y>Y.y?H.y>Q.y?H.y:Q.y:Y.y>Q.y?Y.y:Q.y,q=d(H.x<Y.x?H.x<Q.x?H.x:Q.x:Y.x<Q.x?Y.x:Q.x,H.y<Y.y?H.y<Q.y?H.y:Q.y:Y.y<Q.y?Y.y:Q.y,S,N,B),re=d(te,K,S,N,B),V=R.prevZ,W=R.nextZ;V&&V.z>=q&&W&&W.z<=re;){if(V!==R.prev&&V!==R.next&&y(H.x,H.y,Y.x,Y.y,Q.x,Q.y,V.x,V.y)&&_(V.prev,V,V.next)>=0||(V=V.prevZ,W!==R.prev&&W!==R.next&&y(H.x,H.y,Y.x,Y.y,Q.x,Q.y,W.x,W.y)&&_(W.prev,W,W.next)>=0))return!1;W=W.nextZ}for(;V&&V.z>=q;){if(V!==R.prev&&V!==R.next&&y(H.x,H.y,Y.x,Y.y,Q.x,Q.y,V.x,V.y)&&_(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;W&&W.z<=re;){if(W!==R.prev&&W!==R.next&&y(H.x,H.y,Y.x,Y.y,Q.x,Q.y,W.x,W.y)&&_(W.prev,W,W.next)>=0)return!1;W=W.nextZ}return!0}function c(R,S,N){var B=R;do{var H=B.prev,Y=B.next.next;!w(H,Y)&&x(H,B,B.next,Y)&&C(H,Y)&&C(Y,H)&&(S.push(H.i/N),S.push(B.i/N),S.push(Y.i/N),A(B),A(B.next),B=R=Y),B=B.next}while(B!==R);return b(B)}function l(R,S,N,B,H,Y){var Q=R;do{for(var ne=Q.next.next;ne!==Q.prev;){if(Q.i!==ne.i&&v(Q,ne)){var ae=L(Q,ne);return Q=b(Q,Q.next),ae=b(ae,ae.next),p(Q,S,N,B,H,Y),void p(ae,S,N,B,H,Y)}ne=ne.next}Q=Q.next}while(Q!==R)}function f(R,S){return R.x-S.x}function s(R,S){if(S=function(B,H){var Y,Q=H,ne=B.x,ae=B.y,te=-1/0;do{if(ae<=Q.y&&ae>=Q.next.y&&Q.next.y!==Q.y){var K=Q.x+(ae-Q.y)*(Q.next.x-Q.x)/(Q.next.y-Q.y);if(K<=ne&&K>te){if(te=K,K===ne){if(ae===Q.y)return Q;if(ae===Q.next.y)return Q.next}Y=Q.x<Q.next.x?Q:Q.next}}Q=Q.next}while(Q!==H);if(!Y)return null;if(ne===te)return Y;var q,re=Y,V=Y.x,W=Y.y,Z=1/0;Q=Y;do{ne>=Q.x&&Q.x>=V&&ne!==Q.x&&y(ae<W?ne:te,ae,V,W,ae<W?te:ne,ae,Q.x,Q.y)&&(q=Math.abs(ae-Q.y)/(ne-Q.x),C(Q,B)&&(q<Z||q===Z&&(Q.x>Y.x||Q.x===Y.x&&o(Y,Q)))&&(Y=Q,Z=q)),Q=Q.next}while(Q!==re);return Y}(R,S)){var N=L(S,R);b(S,S.next),b(N,N.next)}}function o(R,S){return _(R.prev,R,S.prev)<0&&_(S.next,R,R.next)<0}function d(R,S,N,B,H){return(R=1431655765&((R=858993459&((R=252645135&((R=16711935&((R=32767*(R-N)*H)|R<<8))|R<<4))|R<<2))|R<<1))|(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-B)*H)|S<<8))|S<<4))|S<<2))|S<<1))<<1}function g(R){var S=R,N=R;do{(S.x<N.x||S.x===N.x&&S.y<N.y)&&(N=S),S=S.next}while(S!==R);return N}function y(R,S,N,B,H,Y,Q,ne){return(H-Q)*(S-ne)-(R-Q)*(Y-ne)>=0&&(R-Q)*(B-ne)-(N-Q)*(S-ne)>=0&&(N-Q)*(Y-ne)-(H-Q)*(B-ne)>=0}function v(R,S){return R.next.i!==S.i&&R.prev.i!==S.i&&!function(N,B){var H=N;do{if(H.i!==N.i&&H.next.i!==N.i&&H.i!==B.i&&H.next.i!==B.i&&x(H,H.next,N,B))return!0;H=H.next}while(H!==N);return!1}(R,S)&&(C(R,S)&&C(S,R)&&function(N,B){var H=N,Y=!1,Q=(N.x+B.x)/2,ne=(N.y+B.y)/2;do{H.y>ne!=H.next.y>ne&&H.next.y!==H.y&&Q<(H.next.x-H.x)*(ne-H.y)/(H.next.y-H.y)+H.x&&(Y=!Y),H=H.next}while(H!==N);return Y}(R,S)&&(_(R.prev,R,S.prev)||_(R,S.prev,S))||w(R,S)&&_(R.prev,R,R.next)>0&&_(S.prev,S,S.next)>0)}function _(R,S,N){return(S.y-R.y)*(N.x-S.x)-(S.x-R.x)*(N.y-S.y)}function w(R,S){return R.x===S.x&&R.y===S.y}function x(R,S,N,B){var H=k(_(R,S,N)),Y=k(_(R,S,B)),Q=k(_(N,B,R)),ne=k(_(N,B,S));return H!==Y&&Q!==ne||!(0!==H||!E(R,N,S))||!(0!==Y||!E(R,B,S))||!(0!==Q||!E(N,R,B))||!(0!==ne||!E(N,S,B))}function E(R,S,N){return S.x<=Math.max(R.x,N.x)&&S.x>=Math.min(R.x,N.x)&&S.y<=Math.max(R.y,N.y)&&S.y>=Math.min(R.y,N.y)}function k(R){return R>0?1:R<0?-1:0}function C(R,S){return _(R.prev,R,R.next)<0?_(R,S,R.next)>=0&&_(R,R.prev,S)>=0:_(R,S,R.prev)<0||_(R,R.next,S)<0}function L(R,S){var N=new I(R.i,R.x,R.y),B=new I(S.i,S.x,S.y),H=R.next,Y=S.prev;return R.next=S,S.prev=R,N.next=H,H.prev=N,B.next=N,N.prev=B,Y.next=B,B.prev=Y,B}function P(R,S,N,B){var H=new I(R,S,N);return B?(H.next=B.next,H.prev=B,B.next.prev=H,B.next=H):(H.prev=H,H.next=H),H}function A(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function I(R,S,N){this.i=R,this.x=S,this.y=N,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function D(R,S,N,B){for(var H=0,Y=S,Q=N-B;Y<N;Y+=B)H+=(R[Q]-R[Y])*(R[Y+1]+R[Q+1]),Q=Y;return H}G.exports=i,G.exports.default=i,i.deviation=function(R,S,N,B){var H=S&&S.length,Q=Math.abs(D(R,0,H?S[0]*N:R.length,N));if(H)for(var ne=0,ae=S.length;ne<ae;ne++)Q-=Math.abs(D(R,S[ne]*N,ne<ae-1?S[ne+1]*N:R.length,N));var q=0;for(ne=0;ne<B.length;ne+=3){var re=B[ne]*N,V=B[ne+1]*N,W=B[ne+2]*N;q+=Math.abs((R[re]-R[W])*(R[V+1]-R[re+1])-(R[re]-R[V])*(R[W+1]-R[re+1]))}return 0===Q&&0===q?0:Math.abs((q-Q)/Q)},i.flatten=function(R){for(var S=R[0][0].length,N={vertices:[],holes:[],dimensions:S},B=0,H=0;H<R.length;H++){for(var Y=0;Y<R[H].length;Y++)for(var Q=0;Q<S;Q++)N.vertices.push(R[H][Y][Q]);H>0&&N.holes.push(B+=R[H-1].length)}return N}},{}],187:[function(h,G,X){"use strict";G.exports=function(m,b){var p=m.length;if("number"!=typeof b){b=0;for(var r=0;r<p;++r){var u=m[r];b=Math.max(b,u[0],u[1])}b=1+(0|b)}b|=0;var c=new Array(b);for(r=0;r<b;++r)c[r]=[];for(r=0;r<p;++r)c[(u=m[r])[0]].push(u[1]),c[u[1]].push(u[0]);for(var l=0;l<b;++l)i(c[l],function(f,s){return f-s});return c};var i=h("uniq")},{uniq:619}],188:[function(h,G,X){var i=h("strongly-connected-components");G.exports=function(m,b){var p,r=[],u=[],c=[],l={},f=[];function s(x){var E,k,C=!1;for(u.push(x),c[x]=!0,E=0;E<f[x].length;E++)(k=f[x][E])===p?(o(p,u),C=!0):c[k]||(C=s(k));if(C)!function P(A){c[A]=!1,l.hasOwnProperty(A)&&Object.keys(l[A]).forEach(function(I){delete l[A][I],c[I]&&P(I)})}(x);else for(E=0;E<f[x].length;E++){var L=l[k=f[x][E]];L||(l[k]=L={}),L[k]=!0}return u.pop(),C}function o(x,E){var k=[].concat(E).concat(x);b?b(s):r.push(k)}function d(x){!function(I){for(var D=0;D<m.length;D++)D<I&&(m[D]=[]),m[D]=m[D].filter(function(R){return R>=I})}(x);for(var E,k=i(m).components.filter(function(I){return I.length>1}),C=1/0,L=0;L<k.length;L++)for(var P=0;P<k[L].length;P++)k[L][P]<C&&(C=k[L][P],E=L);var A=k[E];return!!A&&{leastVertex:C,adjList:m.map(function(I,D){return-1===A.indexOf(D)?[]:I.filter(function(R){return-1!==A.indexOf(R)})})}}p=0;for(var g=m.length;p<g;){var y=d(p);if(p=y.leastVertex,f=y.adjList){for(var v=0;v<f.length;v++)for(var _=0;_<f[v].length;_++){var w=f[v][_];c[+w]=!1,l[w]={}}s(p),p+=1}else p=g}return b?void 0:r}},{"strongly-connected-components":590}],189:[function(h,G,X){"use strict";var i=h("../../object/valid-value");G.exports=function(){return i(this).length=0,this}},{"../../object/valid-value":220}],190:[function(h,G,X){"use strict";G.exports=h("./is-implemented")()?Array.from:h("./shim")},{"./is-implemented":191,"./shim":192}],191:[function(h,G,X){"use strict";G.exports=function(){var i,m,b=Array.from;return"function"==typeof b&&(m=b(i=["raz","dwa"]),Boolean(m&&m!==i&&"dwa"===m[1]))}},{}],192:[function(h,G,X){"use strict";var i=h("es6-symbol").iterator,m=h("../../function/is-arguments"),b=h("../../function/is-function"),p=h("../../number/to-pos-integer"),r=h("../../object/valid-callable"),u=h("../../object/valid-value"),c=h("../../object/is-value"),l=h("../../string/is-string"),f=Array.isArray,s=Function.prototype.call,o={configurable:!0,enumerable:!0,writable:!0,value:null},d=Object.defineProperty;G.exports=function(g){var y,v,_,w,x,E,k,C,L,P,A=arguments[1],I=arguments[2];if(g=Object(u(g)),c(A)&&r(A),this&&this!==Array&&b(this))y=this;else{if(!A){if(m(g))return 1!==(x=g.length)?Array.apply(null,g):((w=new Array(1))[0]=g[0],w);if(f(g)){for(w=new Array(x=g.length),v=0;v<x;++v)w[v]=g[v];return w}}w=[]}if(!f(g))if(void 0!==(L=g[i])){for(k=r(L).call(g),y&&(w=new y),C=k.next(),v=0;!C.done;)P=A?s.call(A,I,C.value,v):C.value,y?(o.value=P,d(w,v,o)):w[v]=P,C=k.next(),++v;x=v}else if(l(g)){for(x=g.length,y&&(w=new y),v=0,_=0;v<x;++v)P=g[v],v+1<x&&(E=P.charCodeAt(0))>=55296&&E<=56319&&(P+=g[++v]),P=A?s.call(A,I,P,_):P,y?(o.value=P,d(w,_,o)):w[_]=P,++_;x=_}if(void 0===x)for(x=p(g.length),y&&(w=new y(x)),v=0;v<x;++v)P=A?s.call(A,I,g[v],v):g[v],y?(o.value=P,d(w,v,o)):w[v]=P;return y&&(o.value=null,w.length=x),w}},{"../../function/is-arguments":193,"../../function/is-function":194,"../../number/to-pos-integer":200,"../../object/is-value":209,"../../object/valid-callable":218,"../../object/valid-value":220,"../../string/is-string":224,"es6-symbol":233}],193:[function(h,G,X){"use strict";var i=Object.prototype.toString,m=i.call(function(){return arguments}());G.exports=function(b){return i.call(b)===m}},{}],194:[function(h,G,X){"use strict";var i=Object.prototype.toString,m=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);G.exports=function(b){return"function"==typeof b&&m(i.call(b))}},{}],195:[function(h,G,X){"use strict";G.exports=function(){}},{}],196:[function(h,G,X){"use strict";G.exports=h("./is-implemented")()?Math.sign:h("./shim")},{"./is-implemented":197,"./shim":198}],197:[function(h,G,X){"use strict";G.exports=function(){var i=Math.sign;return"function"==typeof i&&1===i(10)&&-1===i(-20)}},{}],198:[function(h,G,X){"use strict";G.exports=function(i){return i=Number(i),isNaN(i)||0===i?i:i>0?1:-1}},{}],199:[function(h,G,X){"use strict";var i=h("../math/sign"),m=Math.abs,b=Math.floor;G.exports=function(p){return isNaN(p)?0:0!==(p=Number(p))&&isFinite(p)?i(p)*b(m(p)):p}},{"../math/sign":196}],200:[function(h,G,X){"use strict";var i=h("./to-integer"),m=Math.max;G.exports=function(b){return m(0,i(b))}},{"./to-integer":199}],201:[function(h,G,X){"use strict";var i=h("./valid-callable"),m=h("./valid-value"),b=Function.prototype.bind,p=Function.prototype.call,r=Object.keys,u=Object.prototype.propertyIsEnumerable;G.exports=function(c,l){return function(f,s){var o,d=arguments[2],g=arguments[3];return f=Object(m(f)),i(s),o=r(f),g&&o.sort("function"==typeof g?b.call(g,f):void 0),"function"!=typeof c&&(c=o[c]),p.call(c,o,function(y,v){return u.call(f,y)?p.call(s,d,f[y],y,f,v):l})}}},{"./valid-callable":218,"./valid-value":220}],202:[function(h,G,X){"use strict";G.exports=h("./is-implemented")()?Object.assign:h("./shim")},{"./is-implemented":203,"./shim":204}],203:[function(h,G,X){"use strict";G.exports=function(){var i,m=Object.assign;return"function"==typeof m&&(m(i={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),i.foo+i.bar+i.trzy==="razdwatrzy")}},{}],204:[function(h,G,X){"use strict";var i=h("../keys"),m=h("../valid-value"),b=Math.max;G.exports=function(p,r){var u,c,l,f=b(arguments.length,2);for(p=Object(m(p)),l=function(s){try{p[s]=r[s]}catch(o){u||(u=o)}},c=1;c<f;++c)i(r=arguments[c]).forEach(l);if(void 0!==u)throw u;return p}},{"../keys":210,"../valid-value":220}],205:[function(h,G,X){"use strict";var i=h("../array/from"),m=h("./assign"),b=h("./valid-value");G.exports=function(p){var r=Object(b(p)),u=arguments[1],c=Object(arguments[2]);if(r!==p&&!u)return r;var l={};return u?i(u,function(f){(c.ensure||f in p)&&(l[f]=p[f])}):m(l,p),l}},{"../array/from":190,"./assign":202,"./valid-value":220}],206:[function(h,G,X){"use strict";var i,m,b,p,r=Object.create;h("./set-prototype-of/is-implemented")()||(i=h("./set-prototype-of/shim")),G.exports=i?1!==i.level?r:(m={},b={},p={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(u){b[u]="__proto__"!==u?p:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(m,b),Object.defineProperty(i,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:m}),function(u,c){return r(null===u?m:u,c)}):r},{"./set-prototype-of/is-implemented":216,"./set-prototype-of/shim":217}],207:[function(h,G,X){"use strict";G.exports=h("./_iterate")("forEach")},{"./_iterate":201}],208:[function(h,G,X){"use strict";var i=h("./is-value"),m={function:!0,object:!0};G.exports=function(b){return i(b)&&m[typeof b]||!1}},{"./is-value":209}],209:[function(h,G,X){"use strict";var i=h("../function/noop")();G.exports=function(m){return m!==i&&null!==m}},{"../function/noop":195}],210:[function(h,G,X){"use strict";G.exports=h("./is-implemented")()?Object.keys:h("./shim")},{"./is-implemented":211,"./shim":212}],211:[function(h,G,X){"use strict";G.exports=function(){try{return Object.keys("primitive"),!0}catch(i){return!1}}},{}],212:[function(h,G,X){"use strict";var i=h("../is-value"),m=Object.keys;G.exports=function(b){return m(i(b)?Object(b):b)}},{"../is-value":209}],213:[function(h,G,X){"use strict";var i=h("./valid-callable"),m=h("./for-each"),b=Function.prototype.call;G.exports=function(p,r){var u={},c=arguments[2];return i(r),m(p,function(l,f,s,o){u[f]=b.call(r,c,l,f,s,o)}),u}},{"./for-each":207,"./valid-callable":218}],214:[function(h,G,X){"use strict";var i=h("./is-value"),m=Array.prototype.forEach,b=Object.create,p=function(r,u){var c;for(c in r)u[c]=r[c]};G.exports=function(r){var u=b(null);return m.call(arguments,function(c){i(c)&&p(Object(c),u)}),u}},{"./is-value":209}],215:[function(h,G,X){"use strict";G.exports=h("./is-implemented")()?Object.setPrototypeOf:h("./shim")},{"./is-implemented":216,"./shim":217}],216:[function(h,G,X){"use strict";var i=Object.create,m=Object.getPrototypeOf,b={};G.exports=function(){var p=Object.setPrototypeOf;return"function"==typeof p&&m(p((arguments[0]||i)(null),b))===b}},{}],217:[function(h,G,X){"use strict";var i,c,l,f,m=h("../is-object"),b=h("../valid-value"),p=Object.prototype.isPrototypeOf,r=Object.defineProperty,u={configurable:!0,enumerable:!1,writable:!0,value:void 0};i=function(c,l){if(b(c),null===l||m(l))return c;throw new TypeError("Prototype must be null or an object")},G.exports=(c=function(){var c,l=Object.create(null),f={},s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(s){try{(c=s.set).call(l,f)}catch(o){}if(Object.getPrototypeOf(l)===f)return{set:c,level:2}}return l.__proto__=f,Object.getPrototypeOf(l)===f?{level:2}:((l={}).__proto__=f,Object.getPrototypeOf(l)===f&&{level:1})}())?(2===c.level?c.set?(f=c.set,l=function(s,o){return f.call(i(s,o),o),s}):l=function(s,o){return i(s,o).__proto__=o,s}:l=function s(o,d){var g;return i(o,d),(g=p.call(s.nullPolyfill,o))&&delete s.nullPolyfill.__proto__,null===d&&(d=s.nullPolyfill),o.__proto__=d,g&&r(s.nullPolyfill,"__proto__",u),o},Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:c.level})):null,h("../create")},{"../create":206,"../is-object":208,"../valid-value":220}],218:[function(h,G,X){"use strict";G.exports=function(i){if("function"!=typeof i)throw new TypeError(i+" is not a function");return i}},{}],219:[function(h,G,X){"use strict";var i=h("./is-object");G.exports=function(m){if(!i(m))throw new TypeError(m+" is not an Object");return m}},{"./is-object":208}],220:[function(h,G,X){"use strict";var i=h("./is-value");G.exports=function(m){if(!i(m))throw new TypeError("Cannot use null or undefined");return m}},{"./is-value":209}],221:[function(h,G,X){"use strict";G.exports=h("./is-implemented")()?String.prototype.contains:h("./shim")},{"./is-implemented":222,"./shim":223}],222:[function(h,G,X){"use strict";var i="razdwatrzy";G.exports=function(){return"function"==typeof i.contains&&!0===i.contains("dwa")&&!1===i.contains("foo")}},{}],223:[function(h,G,X){"use strict";var i=String.prototype.indexOf;G.exports=function(m){return i.call(this,m,arguments[1])>-1}},{}],224:[function(h,G,X){"use strict";var i=Object.prototype.toString,m=i.call("");G.exports=function(b){return"string"==typeof b||b&&"object"==typeof b&&(b instanceof String||i.call(b)===m)||!1}},{}],225:[function(h,G,X){"use strict";var i=Object.create(null),m=Math.random;G.exports=function(){var b;do{b=m().toString(36).slice(2)}while(i[b]);return b}},{}],226:[function(h,G,X){"use strict";var i,m=h("es5-ext/object/set-prototype-of"),b=h("es5-ext/string/#/contains"),p=h("d"),r=h("es6-symbol"),u=h("./"),c=Object.defineProperty;i=G.exports=function(l,f){if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");u.call(this,l),f=f?b.call(f,"key+value")?"key+value":b.call(f,"key")?"key":"value":"value",c(this,"__kind__",p("",f))},m&&m(i,u),delete i.prototype.constructor,i.prototype=Object.create(u.prototype,{_resolve:p(function(l){return"value"===this.__kind__?this.__list__[l]:"key+value"===this.__kind__?[l,this.__list__[l]]:l})}),c(i.prototype,r.toStringTag,p("c","Array Iterator"))},{"./":229,d:161,"es5-ext/object/set-prototype-of":215,"es5-ext/string/#/contains":221,"es6-symbol":233}],227:[function(h,G,X){"use strict";var i=h("es5-ext/function/is-arguments"),m=h("es5-ext/object/valid-callable"),b=h("es5-ext/string/is-string"),p=h("./get"),r=Array.isArray,u=Function.prototype.call,c=Array.prototype.some;G.exports=function(l,f){var s,o,d,g,y,v,_,w,x=arguments[2];if(r(l)||i(l)?s="array":b(l)?s="string":l=p(l),m(f),d=function(){g=!0},"array"!==s)if("string"!==s)for(o=l.next();!o.done;){if(u.call(f,x,o.value,d),g)return;o=l.next()}else for(v=l.length,y=0;y<v&&(_=l[y],y+1<v&&(w=_.charCodeAt(0))>=55296&&w<=56319&&(_+=l[++y]),u.call(f,x,_,d),!g);++y);else c.call(l,function(E){return u.call(f,x,E,d),g})}},{"./get":228,"es5-ext/function/is-arguments":193,"es5-ext/object/valid-callable":218,"es5-ext/string/is-string":224}],228:[function(h,G,X){"use strict";var i=h("es5-ext/function/is-arguments"),m=h("es5-ext/string/is-string"),b=h("./array"),p=h("./string"),r=h("./valid-iterable"),u=h("es6-symbol").iterator;G.exports=function(c){return"function"==typeof r(c)[u]?c[u]():i(c)?new b(c):m(c)?new p(c):new b(c)}},{"./array":226,"./string":231,"./valid-iterable":232,"es5-ext/function/is-arguments":193,"es5-ext/string/is-string":224,"es6-symbol":233}],229:[function(h,G,X){"use strict";var i,m=h("es5-ext/array/#/clear"),b=h("es5-ext/object/assign"),p=h("es5-ext/object/valid-callable"),r=h("es5-ext/object/valid-value"),u=h("d"),c=h("d/auto-bind"),l=h("es6-symbol"),f=Object.defineProperty,s=Object.defineProperties;G.exports=i=function(o,d){if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");s(this,{__list__:u("w",r(o)),__context__:u("w",d),__nextIndex__:u("w",0)}),d&&(p(d.on),d.on("_add",this._onAdd),d.on("_delete",this._onDelete),d.on("_clear",this._onClear))},delete i.prototype.constructor,s(i.prototype,b({_next:u(function(){var o;if(this.__list__)return this.__redo__&&void 0!==(o=this.__redo__.shift())?o:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:u(function(){return this._createResult(this._next())}),_createResult:u(function(o){return void 0===o?{done:!0,value:void 0}:{done:!1,value:this._resolve(o)}}),_resolve:u(function(o){return this.__list__[o]}),_unBind:u(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:u(function(){return"[object "+(this[l.toStringTag]||"Object")+"]"})},c({_onAdd:u(function(o){o>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(d,g){d>=o&&(this.__redo__[g]=++d)},this),this.__redo__.push(o)):f(this,"__redo__",u("c",[o])))}),_onDelete:u(function(o){var d;o>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(d=this.__redo__.indexOf(o))&&this.__redo__.splice(d,1),this.__redo__.forEach(function(g,y){g>o&&(this.__redo__[y]=--g)},this)))}),_onClear:u(function(){this.__redo__&&m.call(this.__redo__),this.__nextIndex__=0})}))),f(i.prototype,l.iterator,u(function(){return this}))},{d:161,"d/auto-bind":160,"es5-ext/array/#/clear":189,"es5-ext/object/assign":202,"es5-ext/object/valid-callable":218,"es5-ext/object/valid-value":220,"es6-symbol":233}],230:[function(h,G,X){"use strict";var i=h("es5-ext/function/is-arguments"),m=h("es5-ext/object/is-value"),b=h("es5-ext/string/is-string"),p=h("es6-symbol").iterator,r=Array.isArray;G.exports=function(u){return!(!m(u)||!r(u)&&!b(u)&&!i(u)&&"function"!=typeof u[p])}},{"es5-ext/function/is-arguments":193,"es5-ext/object/is-value":209,"es5-ext/string/is-string":224,"es6-symbol":233}],231:[function(h,G,X){"use strict";var i,m=h("es5-ext/object/set-prototype-of"),b=h("d"),p=h("es6-symbol"),r=h("./"),u=Object.defineProperty;i=G.exports=function(c){if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");c=String(c),r.call(this,c),u(this,"__length__",b("",c.length))},m&&m(i,r),delete i.prototype.constructor,i.prototype=Object.create(r.prototype,{_next:b(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:b(function(c){var l,f=this.__list__[c];return this.__nextIndex__===this.__length__?f:(l=f.charCodeAt(0))>=55296&&l<=56319?f+this.__list__[this.__nextIndex__++]:f})}),u(i.prototype,p.toStringTag,b("c","String Iterator"))},{"./":229,d:161,"es5-ext/object/set-prototype-of":215,"es6-symbol":233}],232:[function(h,G,X){"use strict";var i=h("./is-iterable");G.exports=function(m){if(!i(m))throw new TypeError(m+" is not iterable");return m}},{"./is-iterable":230}],233:[function(h,G,X){"use strict";G.exports=h("./is-implemented")()?h("ext/global-this").Symbol:h("./polyfill")},{"./is-implemented":234,"./polyfill":239,"ext/global-this":246}],234:[function(h,G,X){"use strict";var i=h("ext/global-this"),m={object:!0,symbol:!0};G.exports=function(){var b,p=i.Symbol;if("function"!=typeof p)return!1;b=p("test symbol");try{String(b)}catch(r){return!1}return!!m[typeof p.iterator]&&!!m[typeof p.toPrimitive]&&!!m[typeof p.toStringTag]}},{"ext/global-this":246}],235:[function(h,G,X){"use strict";G.exports=function(i){return!!i&&("symbol"==typeof i||!!i.constructor&&"Symbol"===i.constructor.name&&"Symbol"===i[i.constructor.toStringTag])}},{}],236:[function(h,G,X){"use strict";var i=h("d"),b=Object.defineProperty,p=Object.prototype,r=(0,Object.create)(null);G.exports=function(u){for(var c,l,f=0;r[u+(f||"")];)++f;return r[u+=f||""]=!0,b(p,c="@@"+u,i.gs(null,function(s){l||(l=!0,b(this,c,i(s)),l=!1)})),c}},{d:161}],237:[function(h,G,X){"use strict";var i=h("d"),m=h("ext/global-this").Symbol;G.exports=function(b){return Object.defineProperties(b,{hasInstance:i("",m&&m.hasInstance||b("hasInstance")),isConcatSpreadable:i("",m&&m.isConcatSpreadable||b("isConcatSpreadable")),iterator:i("",m&&m.iterator||b("iterator")),match:i("",m&&m.match||b("match")),replace:i("",m&&m.replace||b("replace")),search:i("",m&&m.search||b("search")),species:i("",m&&m.species||b("species")),split:i("",m&&m.split||b("split")),toPrimitive:i("",m&&m.toPrimitive||b("toPrimitive")),toStringTag:i("",m&&m.toStringTag||b("toStringTag")),unscopables:i("",m&&m.unscopables||b("unscopables"))})}},{d:161,"ext/global-this":246}],238:[function(h,G,X){"use strict";var i=h("d"),m=h("../../../validate-symbol"),b=Object.create(null);G.exports=function(p){return Object.defineProperties(p,{for:i(function(r){return b[r]?b[r]:b[r]=p(String(r))}),keyFor:i(function(r){var u;for(u in m(r),b)if(b[u]===r)return u})})}},{"../../../validate-symbol":240,d:161}],239:[function(h,G,X){"use strict";var i,m,b,p=h("d"),r=h("./validate-symbol"),u=h("ext/global-this").Symbol,c=h("./lib/private/generate-name"),l=h("./lib/private/setup/standard-symbols"),f=h("./lib/private/setup/symbol-registry"),s=Object.create,o=Object.defineProperties,d=Object.defineProperty;if("function"==typeof u)try{String(u()),b=!0}catch(g){}else u=null;m=function(g){if(this instanceof m)throw new TypeError("Symbol is not a constructor");return i(g)},G.exports=i=function g(y){var v;if(this instanceof g)throw new TypeError("Symbol is not a constructor");return b?u(y):(v=s(m.prototype),y=void 0===y?"":String(y),o(v,{__description__:p("",y),__name__:p("",c(y))}))},l(i),f(i),o(m.prototype,{constructor:p(i),toString:p("",function(){return this.__name__})}),o(i.prototype,{toString:p(function(){return"Symbol ("+r(this).__description__+")"}),valueOf:p(function(){return r(this)})}),d(i.prototype,i.toPrimitive,p("",function(){var g=r(this);return"symbol"==typeof g?g:g.toString()})),d(i.prototype,i.toStringTag,p("c","Symbol")),d(m.prototype,i.toStringTag,p("c",i.prototype[i.toStringTag])),d(m.prototype,i.toPrimitive,p("c",i.prototype[i.toPrimitive]))},{"./lib/private/generate-name":236,"./lib/private/setup/standard-symbols":237,"./lib/private/setup/symbol-registry":238,"./validate-symbol":240,d:161,"ext/global-this":246}],240:[function(h,G,X){"use strict";var i=h("./is-symbol");G.exports=function(m){if(!i(m))throw new TypeError(m+" is not a symbol");return m}},{"./is-symbol":235}],241:[function(h,G,X){"use strict";G.exports=h("./is-implemented")()?WeakMap:h("./polyfill")},{"./is-implemented":242,"./polyfill":244}],242:[function(h,G,X){"use strict";G.exports=function(){var i,m;if("function"!=typeof WeakMap)return!1;try{i=new WeakMap([[m={},"one"],[{},"two"],[{},"three"]])}catch(b){return!1}return"[object WeakMap]"===String(i)&&"function"==typeof i.set&&i.set({},1)===i&&"function"==typeof i.delete&&"function"==typeof i.has&&"one"===i.get(m)}},{}],243:[function(h,G,X){"use strict";G.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],244:[function(h,G,X){"use strict";var i,m=h("es5-ext/object/is-value"),b=h("es5-ext/object/set-prototype-of"),p=h("es5-ext/object/valid-object"),r=h("es5-ext/object/valid-value"),u=h("es5-ext/string/random-uniq"),c=h("d"),l=h("es6-iterator/get"),f=h("es6-iterator/for-of"),s=h("es6-symbol").toStringTag,o=h("./is-native-implemented"),d=Array.isArray,g=Object.defineProperty,y=Object.prototype.hasOwnProperty,v=Object.getPrototypeOf;G.exports=i=function(){var _,w=arguments[0];if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");return _=o&&b&&WeakMap!==i?b(new WeakMap,v(this)):this,m(w)&&(d(w)||(w=l(w))),g(_,"__weakMapData__",c("c","$weakMap$"+u())),w&&f(w,function(x){r(x),_.set(x[0],x[1])}),_},o&&(b&&b(i,WeakMap),i.prototype=Object.create(WeakMap.prototype,{constructor:c(i)})),Object.defineProperties(i.prototype,{delete:c(function(_){return!!y.call(p(_),this.__weakMapData__)&&(delete _[this.__weakMapData__],!0)}),get:c(function(_){if(y.call(p(_),this.__weakMapData__))return _[this.__weakMapData__]}),has:c(function(_){return y.call(p(_),this.__weakMapData__)}),set:c(function(_,w){return g(p(_),this.__weakMapData__,c("c",w)),this}),toString:c(function(){return"[object WeakMap]"})}),g(i.prototype,s,c("c","WeakMap"))},{"./is-native-implemented":243,d:161,"es5-ext/object/is-value":209,"es5-ext/object/set-prototype-of":215,"es5-ext/object/valid-object":219,"es5-ext/object/valid-value":220,"es5-ext/string/random-uniq":225,"es6-iterator/for-of":227,"es6-iterator/get":228,"es6-symbol":233}],245:[function(h,G,X){var i=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};G.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(m){return i()}try{return __global__||i()}finally{delete Object.prototype.__global__}}()},{}],246:[function(h,G,X){"use strict";G.exports=h("./is-implemented")()?globalThis:h("./implementation")},{"./implementation":245,"./is-implemented":247}],247:[function(h,G,X){"use strict";G.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},{}],248:[function(h,G,X){"use strict";G.exports=function(i,m,b){var p=m||0,r=b||1;return[[i[12]+i[0],i[13]+i[1],i[14]+i[2],i[15]+i[3]],[i[12]-i[0],i[13]-i[1],i[14]-i[2],i[15]-i[3]],[i[12]+i[4],i[13]+i[5],i[14]+i[6],i[15]+i[7]],[i[12]-i[4],i[13]-i[5],i[14]-i[6],i[15]-i[7]],[p*i[12]+i[8],p*i[13]+i[9],p*i[14]+i[10],p*i[15]+i[11]],[r*i[12]-i[8],r*i[13]-i[9],r*i[14]-i[10],r*i[15]-i[11]]]}},{}],249:[function(h,G,X){"use strict";var i=h("is-string-blank");G.exports=function(m){var b=typeof m;if("string"===b){var p=m;if(0==(m=+m)&&i(p))return!1}else if("number"!==b)return!1;return m-m<1}},{"is-string-blank":458}],250:[function(h,G,X){"use strict";G.exports=function(c,l,f){switch(arguments.length){case 0:return new p([0],[0],0);case 1:return"number"==typeof c?new p(s=u(c),s,0):new p(c,u(c.length),0);case 2:if("number"==typeof l){var s=u(c.length);return new p(c,s,+l)}f=0;case 3:if(c.length!==l.length)throw new Error("state and velocity lengths must match");return new p(c,l,f)}};var i=h("cubic-hermite"),m=h("binary-search-bounds");function b(c,l,f){return Math.min(l,Math.max(c,f))}function p(c,l,f){this.dimension=c.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var s=0;s<this.dimension;++s)this.bounds[0][s]=-1/0,this.bounds[1][s]=1/0;this._state=c.slice().reverse(),this._velocity=l.slice().reverse(),this._time=[f],this._scratch=[c.slice(),c.slice(),c.slice(),c.slice(),c.slice()]}var r=p.prototype;function u(c){for(var l=new Array(c),f=0;f<c;++f)l[f]=0;return l}r.flush=function(c){var l=m.gt(this._time,c)-1;l<=0||(this._time.splice(0,l),this._state.splice(0,l*this.dimension),this._velocity.splice(0,l*this.dimension))},r.curve=function(c){var l=this._time,f=l.length,s=m.le(l,c),o=this._scratch[0],d=this._state,g=this._velocity,y=this.dimension,v=this.bounds;if(s<0)for(var _=y-1,w=0;w<y;++w,--_)o[w]=d[_];else if(s>=f-1){_=d.length-1;var x=c-l[f-1];for(w=0;w<y;++w,--_)o[w]=d[_]+x*g[_]}else{_=y*(s+1)-1;var E=l[s],k=l[s+1]-E||1,C=this._scratch[1],L=this._scratch[2],P=this._scratch[3],A=this._scratch[4],I=!0;for(w=0;w<y;++w,--_)C[w]=d[_],P[w]=g[_]*k,L[w]=d[_+y],A[w]=g[_+y]*k,I=I&&C[w]===L[w]&&P[w]===A[w]&&0===P[w];if(I)for(w=0;w<y;++w)o[w]=C[w];else i(C,P,L,A,(c-E)/k,o)}var D=v[0],R=v[1];for(w=0;w<y;++w)o[w]=b(D[w],R[w],o[w]);return o},r.dcurve=function(c){var l=this._time,f=l.length,s=m.le(l,c),o=this._scratch[0],d=this._state,g=this._velocity,y=this.dimension;if(s>=f-1)for(var v=d.length-1,_=0;_<y;++_,--v)o[_]=g[v];else{v=y*(s+1)-1;var w=l[s],x=l[s+1]-w||1,E=this._scratch[1],k=this._scratch[2],C=this._scratch[3],L=this._scratch[4],P=!0;for(_=0;_<y;++_,--v)E[_]=d[v],C[_]=g[v]*x,k[_]=d[v+y],L[_]=g[v+y]*x,P=P&&E[_]===k[_]&&C[_]===L[_]&&0===C[_];if(P)for(_=0;_<y;++_)o[_]=0;else for(i.derivative(E,C,k,L,(c-w)/x,o),_=0;_<y;++_)o[_]/=x}return o},r.lastT=function(){var c=this._time;return c[c.length-1]},r.stable=function(){for(var c=this._velocity,l=c.length,f=this.dimension-1;f>=0;--f)if(c[--l])return!1;return!0},r.jump=function(c){var l=this.lastT(),f=this.dimension;if(!(c<l||arguments.length!==f+1)){var s=this._state,o=this._velocity,d=s.length-this.dimension,g=this.bounds,y=g[0],v=g[1];this._time.push(l,c);for(var _=0;_<2;++_)for(var w=0;w<f;++w)s.push(s[d++]),o.push(0);for(this._time.push(c),w=f;w>0;--w)s.push(b(y[w-1],v[w-1],arguments[w])),o.push(0)}},r.push=function(c){var l=this.lastT(),f=this.dimension;if(!(c<l||arguments.length!==f+1)){var s=this._state,o=this._velocity,d=s.length-this.dimension,g=c-l,y=this.bounds,v=y[0],_=y[1],w=g>1e-6?1/g:0;this._time.push(c);for(var x=f;x>0;--x){var E=b(v[x-1],_[x-1],arguments[x]);s.push(E),o.push((E-s[d++])*w)}}},r.set=function(c){var l=this.dimension;if(!(c<this.lastT()||arguments.length!==l+1)){var f=this._state,s=this._velocity,o=this.bounds,d=o[0],g=o[1];this._time.push(c);for(var y=l;y>0;--y)f.push(b(d[y-1],g[y-1],arguments[y])),s.push(0)}},r.move=function(c){var l=this.lastT(),f=this.dimension;if(!(c<=l||arguments.length!==f+1)){var s=this._state,o=this._velocity,d=s.length-this.dimension,g=this.bounds,y=g[0],v=g[1],_=c-l,w=_>1e-6?1/_:0;this._time.push(c);for(var x=f;x>0;--x){var E=arguments[x];s.push(b(y[x-1],v[x-1],s[d++]+E)),o.push(E*w)}}},r.idle=function(c){var l=this.lastT();if(!(c<l)){var f=this.dimension,s=this._state,o=this._velocity,d=s.length-f,g=this.bounds,y=g[0],v=g[1],_=c-l;this._time.push(c);for(var w=f-1;w>=0;--w)s.push(b(y[w],v[w],s[d]+_*o[d])),o.push(0),d+=1}}},{"binary-search-bounds":251,"cubic-hermite":156}],251:[function(h,G,X){"use strict";function i(b,p,r,u,c,l){var f=["function ",b,"(a,l,h,",u.join(","),"){",l?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",c?".get(m)":"[m]"];return l?p.indexOf("c")<0?f.push(";if(x===y){return m}else if(x<=y){"):f.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):f.push(";if(",p,"){i=m;"),f.push(r?"l=m+1}else{h=m-1}":"h=m-1}else{l=m+1}"),f.push("}"),f.push(l?"return -1};":"return i};"),f.join("")}function m(b,p,r,u){return new Function([i("A","x"+b+"y",p,["y"],!1,u),i("B","x"+b+"y",p,["y"],!0,u),i("P","c(x,y)"+b+"0",p,["y","c"],!1,u),i("Q","c(x,y)"+b+"0",p,["y","c"],!0,u),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}G.exports={ge:m(">=",!1,"GE"),gt:m(">",!1,"GT"),lt:m("<",!0,"LT"),le:m("<=",!0,"LE"),eq:m("-",!0,"EQ",!0)}},{}],252:[function(h,G,X){var i=h("dtype");G.exports=function(m,b,p){if(!m)throw new TypeError("must specify data as first parameter");if(p=0|+(p||0),Array.isArray(m)&&m[0]&&"number"==typeof m[0][0]){var r,u,c,l,f=m[0].length,s=m.length*f;b&&"string"!=typeof b||(b=new(i(b||"float32"))(s+p));var o=b.length-p;if(s!==o)throw new Error("source length "+s+" ("+f+"x"+m.length+") does not match destination length "+o);for(r=0,c=p;r<m.length;r++)for(u=0;u<f;u++)b[c++]=null===m[r][u]?NaN:m[r][u]}else if(b&&"string"!=typeof b)b.set(m,p);else{var d=i(b||"float32");if(Array.isArray(m)||"array"===b)for(r=0,c=p,l=(b=new d(m.length+p)).length;c<l;c++,r++)b[c]=null===m[r]?NaN:m[r];else 0===p?b=new d(m):(b=new d(m.length+p)).set(m,p)}return b}},{dtype:184}],253:[function(h,G,X){"use strict";var i=h("css-font/stringify"),m=[32,126];G.exports=function(b){var p=(b=b||{}).shape?b.shape:b.canvas?[b.canvas.width,b.canvas.height]:[512,512],r=b.canvas||document.createElement("canvas"),u=b.font,c="number"==typeof b.step?[b.step,b.step]:b.step||[32,32],l=b.chars||m;if(u&&"string"!=typeof u&&(u=i(u)),Array.isArray(l)){if(2===l.length&&"number"==typeof l[0]&&"number"==typeof l[1]){for(var f=[],s=l[0],o=0;s<=l[1];s++)f[o++]=String.fromCharCode(s);l=f}}else l=String(l).split("");p=p.slice(),r.width=p[0],r.height=p[1];var d=r.getContext("2d");d.fillStyle="#000",d.fillRect(0,0,r.width,r.height),d.font=u,d.textAlign="center",d.textBaseline="middle",d.fillStyle="#fff";var g=c[0]/2,y=c[1]/2;for(s=0;s<l.length;s++)d.fillText(l[s],g,y),(g+=c[0])>p[0]-c[0]/2&&(g=c[0]/2,y+=c[1]);return r}},{"css-font/stringify":153}],254:[function(h,G,X){"use strict";function i(r,u){u||(u={}),("string"==typeof r||Array.isArray(r))&&(u.family=r);var c=Array.isArray(u.family)?u.family.join(", "):u.family;if(!c)throw Error("`family` must be defined");var l=u.size||u.fontSize||u.em||48,s=(r=[u.style||u.fontStyle||"",u.weight||u.fontWeight||"",l].join(" ")+"px "+c,u.origin||"top");if(i.cache[c]&&l<=i.cache[c].em)return m(i.cache[c],s);var o=u.canvas||i.canvas,d=o.getContext("2d"),g={upper:void 0!==u.upper?u.upper:"H",lower:void 0!==u.lower?u.lower:"x",descent:void 0!==u.descent?u.descent:"p",ascent:void 0!==u.ascent?u.ascent:"h",tittle:void 0!==u.tittle?u.tittle:"i",overshoot:void 0!==u.overshoot?u.overshoot:"O"},y=Math.ceil(1.5*l);o.height=y,o.width=.5*y,d.font=r;var v={top:0};d.clearRect(0,0,y,y),d.textBaseline="top",d.fillStyle="black",d.fillText("H",0,0);var _=b(d.getImageData(0,0,y,y));d.clearRect(0,0,y,y),d.textBaseline="bottom",d.fillText("H",0,y);var w=b(d.getImageData(0,0,y,y));v.lineHeight=v.bottom=y-w+_,d.clearRect(0,0,y,y),d.textBaseline="alphabetic",d.fillText("H",0,y);var x=y-b(d.getImageData(0,0,y,y))-1+_;v.baseline=v.alphabetic=x,d.clearRect(0,0,y,y),d.textBaseline="middle",d.fillText("H",0,.5*y);var E=b(d.getImageData(0,0,y,y));v.median=v.middle=y-E-1+_-.5*y,d.clearRect(0,0,y,y),d.textBaseline="hanging",d.fillText("H",0,.5*y);var k=b(d.getImageData(0,0,y,y));v.hanging=y-k-1+_-.5*y,d.clearRect(0,0,y,y),d.textBaseline="ideographic",d.fillText("H",0,y);var C=b(d.getImageData(0,0,y,y));if(v.ideographic=y-C-1+_,g.upper&&(d.clearRect(0,0,y,y),d.textBaseline="top",d.fillText(g.upper,0,0),v.upper=b(d.getImageData(0,0,y,y)),v.capHeight=v.baseline-v.upper),g.lower&&(d.clearRect(0,0,y,y),d.textBaseline="top",d.fillText(g.lower,0,0),v.lower=b(d.getImageData(0,0,y,y)),v.xHeight=v.baseline-v.lower),g.tittle&&(d.clearRect(0,0,y,y),d.textBaseline="top",d.fillText(g.tittle,0,0),v.tittle=b(d.getImageData(0,0,y,y))),g.ascent&&(d.clearRect(0,0,y,y),d.textBaseline="top",d.fillText(g.ascent,0,0),v.ascent=b(d.getImageData(0,0,y,y))),g.descent&&(d.clearRect(0,0,y,y),d.textBaseline="top",d.fillText(g.descent,0,0),v.descent=p(d.getImageData(0,0,y,y))),g.overshoot){d.clearRect(0,0,y,y),d.textBaseline="top",d.fillText(g.overshoot,0,0);var L=p(d.getImageData(0,0,y,y));v.overshoot=L-x}for(var P in v)v[P]/=l;return v.em=l,i.cache[c]=v,m(v,s)}function m(r,u){var c={};for(var l in"string"==typeof u&&(u=r[u]),r)"em"!==l&&(c[l]=r[l]-u);return c}function b(r){for(var u=r.height,c=r.data,l=3;l<c.length;l+=4)if(0!==c[l])return Math.floor(.25*(l-3)/u)}function p(r){for(var u=r.height,c=r.data,l=c.length-1;l>0;l-=4)if(0!==c[l])return Math.floor(.25*(l-3)/u)}G.exports=i,i.canvas=document.createElement("canvas"),i.cache={}},{}],255:[function(h,G,X){"use strict";function i(y,v,_,w,x,E){this._color=y,this.key=v,this.value=_,this.left=w,this.right=x,this._count=E}function m(y){return new i(y._color,y.key,y.value,y.left,y.right,y._count)}function b(y,v){return new i(y,v.key,v.value,v.left,v.right,v._count)}function p(y){y._count=1+(y.left?y.left._count:0)+(y.right?y.right._count:0)}function r(y,v){this._compare=y,this.root=v}G.exports=function(y){return new r(y||g,null)};var u=r.prototype;function c(y,v){var _;return v.left&&(_=c(y,v.left))?_:(_=y(v.key,v.value))||(v.right?c(y,v.right):void 0)}function l(y,v,_,w){var x;return v(y,w.key)<=0&&(w.left&&(x=l(y,v,_,w.left))||(x=_(w.key,w.value)))?x:w.right?l(y,v,_,w.right):void 0}function f(y,v,_,w,x){var E,k=_(y,x.key),C=_(v,x.key);return k<=0&&(x.left&&(E=f(y,v,_,w,x.left))||C>0&&(E=w(x.key,x.value)))?E:C>0&&x.right?f(y,v,_,w,x.right):void 0}function s(y,v){this.tree=y,this._stack=v}Object.defineProperty(u,"keys",{get:function(){var y=[];return this.forEach(function(v,_){y.push(v)}),y}}),Object.defineProperty(u,"values",{get:function(){var y=[];return this.forEach(function(v,_){y.push(_)}),y}}),Object.defineProperty(u,"length",{get:function(){return this.root?this.root._count:0}}),u.insert=function(y,v){for(var _=this._compare,w=this.root,x=[],E=[];w;){var k=_(y,w.key);x.push(w),E.push(k),w=k<=0?w.left:w.right}x.push(new i(0,y,v,null,null,1));for(var C=x.length-2;C>=0;--C)w=x[C],x[C]=E[C]<=0?new i(w._color,w.key,w.value,x[C+1],w.right,w._count+1):new i(w._color,w.key,w.value,w.left,x[C+1],w._count+1);for(C=x.length-1;C>1;--C){var L=x[C-1];if(w=x[C],1===L._color||1===w._color)break;var P=x[C-2];if(P.left===L)if(L.left===w){if(!(A=P.right)||0!==A._color){P._color=0,P.left=L.right,L._color=1,L.right=P,x[C-2]=L,x[C-1]=w,p(P),p(L),C>=3&&((I=x[C-3]).left===P?I.left=L:I.right=L);break}L._color=1,P.right=b(1,A),P._color=0,C-=1}else{if(!(A=P.right)||0!==A._color){L.right=w.left,P._color=0,P.left=w.right,w._color=1,w.left=L,w.right=P,x[C-2]=w,x[C-1]=L,p(P),p(L),p(w),C>=3&&((I=x[C-3]).left===P?I.left=w:I.right=w);break}L._color=1,P.right=b(1,A),P._color=0,C-=1}else if(L.right===w){if(!(A=P.left)||0!==A._color){P._color=0,P.right=L.left,L._color=1,L.left=P,x[C-2]=L,x[C-1]=w,p(P),p(L),C>=3&&((I=x[C-3]).right===P?I.right=L:I.left=L);break}L._color=1,P.left=b(1,A),P._color=0,C-=1}else{var A;if(!(A=P.left)||0!==A._color){var I;L.left=w.right,P._color=0,P.right=w.left,w._color=1,w.right=L,w.left=P,x[C-2]=w,x[C-1]=L,p(P),p(L),p(w),C>=3&&((I=x[C-3]).right===P?I.right=w:I.left=w);break}L._color=1,P.left=b(1,A),P._color=0,C-=1}}return x[0]._color=1,new r(_,x[0])},u.forEach=function(y,v,_){if(this.root)switch(arguments.length){case 1:return c(y,this.root);case 2:return l(v,this._compare,y,this.root);case 3:return this._compare(v,_)>=0?void 0:f(v,_,this._compare,y,this.root)}},Object.defineProperty(u,"begin",{get:function(){for(var y=[],v=this.root;v;)y.push(v),v=v.left;return new s(this,y)}}),Object.defineProperty(u,"end",{get:function(){for(var y=[],v=this.root;v;)y.push(v),v=v.right;return new s(this,y)}}),u.at=function(y){if(y<0)return new s(this,[]);for(var v=this.root,_=[];;){if(_.push(v),v.left){if(y<v.left._count){v=v.left;continue}y-=v.left._count}if(!y)return new s(this,_);if(y-=1,!v.right||y>=v.right._count)break;v=v.right}return new s(this,[])},u.ge=function(y){for(var v=this._compare,_=this.root,w=[],x=0;_;){var E=v(y,_.key);w.push(_),E<=0&&(x=w.length),_=E<=0?_.left:_.right}return w.length=x,new s(this,w)},u.gt=function(y){for(var v=this._compare,_=this.root,w=[],x=0;_;){var E=v(y,_.key);w.push(_),E<0&&(x=w.length),_=E<0?_.left:_.right}return w.length=x,new s(this,w)},u.lt=function(y){for(var v=this._compare,_=this.root,w=[],x=0;_;){var E=v(y,_.key);w.push(_),E>0&&(x=w.length),_=E<=0?_.left:_.right}return w.length=x,new s(this,w)},u.le=function(y){for(var v=this._compare,_=this.root,w=[],x=0;_;){var E=v(y,_.key);w.push(_),E>=0&&(x=w.length),_=E<0?_.left:_.right}return w.length=x,new s(this,w)},u.find=function(y){for(var v=this._compare,_=this.root,w=[];_;){var x=v(y,_.key);if(w.push(_),0===x)return new s(this,w);_=x<=0?_.left:_.right}return new s(this,[])},u.remove=function(y){var v=this.find(y);return v?v.remove():this},u.get=function(y){for(var v=this._compare,_=this.root;_;){var w=v(y,_.key);if(0===w)return _.value;_=w<=0?_.left:_.right}};var o=s.prototype;function d(y,v){y.key=v.key,y.value=v.value,y.left=v.left,y.right=v.right,y._color=v._color,y._count=v._count}function g(y,v){return y<v?-1:y>v?1:0}Object.defineProperty(o,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(o,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),o.clone=function(){return new s(this.tree,this._stack.slice())},o.remove=function(){var y=this._stack;if(0===y.length)return this.tree;var v=new Array(y.length),_=y[y.length-1];v[v.length-1]=new i(_._color,_.key,_.value,_.left,_.right,_._count);for(var w=y.length-2;w>=0;--w)v[w]=(_=y[w]).left===y[w+1]?new i(_._color,_.key,_.value,v[w+1],_.right,_._count):new i(_._color,_.key,_.value,_.left,v[w+1],_._count);if((_=v[v.length-1]).left&&_.right){var x=v.length;for(_=_.left;_.right;)v.push(_),_=_.right;var E=v[x-1];for(v.push(new i(_._color,E.key,E.value,_.left,_.right,_._count)),v[x-1].key=_.key,v[x-1].value=_.value,w=v.length-2;w>=x;--w)v[w]=new i((_=v[w])._color,_.key,_.value,_.left,v[w+1],_._count);v[x-1].left=v[x]}if(0===(_=v[v.length-1])._color){var k=v[v.length-2];for(k.left===_?k.left=null:k.right===_&&(k.right=null),v.pop(),w=0;w<v.length;++w)v[w]._count--;return new r(this.tree._compare,v[0])}if(_.left||_.right){for(_.left?d(_,_.left):_.right&&d(_,_.right),_._color=1,w=0;w<v.length-1;++w)v[w]._count--;return new r(this.tree._compare,v[0])}if(1===v.length)return new r(this.tree._compare,null);for(w=0;w<v.length;++w)v[w]._count--;var C=v[v.length-2];return function(L){for(var P,A,I,D,R=L.length-1;R>=0;--R){if(P=L[R],0===R)return void(P._color=1);if((A=L[R-1]).left===P){if((I=A.right).right&&0===I.right._color)return D=(I=A.right=m(I)).right=m(I.right),A.right=I.left,I.left=A,I.right=D,I._color=A._color,P._color=1,A._color=1,D._color=1,p(A),p(I),R>1&&((S=L[R-2]).left===A?S.left=I:S.right=I),void(L[R-1]=I);if(I.left&&0===I.left._color)return D=(I=A.right=m(I)).left=m(I.left),A.right=D.left,I.left=D.right,D.left=A,D.right=I,D._color=A._color,A._color=1,I._color=1,P._color=1,p(A),p(I),p(D),R>1&&((S=L[R-2]).left===A?S.left=D:S.right=D),void(L[R-1]=D);if(1===I._color){if(0===A._color)return A._color=1,void(A.right=b(0,I));A.right=b(0,I);continue}I=m(I),A.right=I.left,I.left=A,I._color=A._color,A._color=0,p(A),p(I),R>1&&((S=L[R-2]).left===A?S.left=I:S.right=I),L[R-1]=I,L[R]=A,R+1<L.length?L[R+1]=P:L.push(P),R+=2}else{if((I=A.left).left&&0===I.left._color)return D=(I=A.left=m(I)).left=m(I.left),A.left=I.right,I.right=A,I.left=D,I._color=A._color,P._color=1,A._color=1,D._color=1,p(A),p(I),R>1&&((S=L[R-2]).right===A?S.right=I:S.left=I),void(L[R-1]=I);if(I.right&&0===I.right._color)return D=(I=A.left=m(I)).right=m(I.right),A.left=D.right,I.right=D.left,D.right=A,D.left=I,D._color=A._color,A._color=1,I._color=1,P._color=1,p(A),p(I),p(D),R>1&&((S=L[R-2]).right===A?S.right=D:S.left=D),void(L[R-1]=D);if(1===I._color){if(0===A._color)return A._color=1,void(A.left=b(0,I));A.left=b(0,I);continue}var S;I=m(I),A.left=I.right,I.right=A,I._color=A._color,A._color=0,p(A),p(I),R>1&&((S=L[R-2]).right===A?S.right=I:S.left=I),L[R-1]=I,L[R]=A,R+1<L.length?L[R+1]=P:L.push(P),R+=2}}}(v),C.left===_?C.left=null:C.right=null,new r(this.tree._compare,v[0])},Object.defineProperty(o,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(o,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(o,"index",{get:function(){var y=0,v=this._stack;if(0===v.length){var _=this.tree.root;return _?_._count:0}v[v.length-1].left&&(y=v[v.length-1].left._count);for(var w=v.length-2;w>=0;--w)v[w+1]===v[w].right&&(++y,v[w].left&&(y+=v[w].left._count));return y},enumerable:!0}),o.next=function(){var y=this._stack;if(0!==y.length){var v=y[y.length-1];if(v.right)for(v=v.right;v;)y.push(v),v=v.left;else for(y.pop();y.length>0&&y[y.length-1].right===v;)v=y[y.length-1],y.pop()}},Object.defineProperty(o,"hasNext",{get:function(){var y=this._stack;if(0===y.length)return!1;if(y[y.length-1].right)return!0;for(var v=y.length-1;v>0;--v)if(y[v-1].left===y[v])return!0;return!1}}),o.update=function(y){var v=this._stack;if(0===v.length)throw new Error("Can't update empty node!");var _=new Array(v.length),w=v[v.length-1];_[_.length-1]=new i(w._color,w.key,y,w.left,w.right,w._count);for(var x=v.length-2;x>=0;--x)_[x]=(w=v[x]).left===v[x+1]?new i(w._color,w.key,w.value,_[x+1],w.right,w._count):new i(w._color,w.key,w.value,w.left,_[x+1],w._count);return new r(this.tree._compare,_[0])},o.prev=function(){var y=this._stack;if(0!==y.length){var v=y[y.length-1];if(v.left)for(v=v.left;v;)y.push(v),v=v.right;else for(y.pop();y.length>0&&y[y.length-1].left===v;)v=y[y.length-1],y.pop()}},Object.defineProperty(o,"hasPrev",{get:function(){var y=this._stack;if(0===y.length)return!1;if(y[y.length-1].left)return!0;for(var v=y.length-1;v>0;--v)if(y[v-1].right===y[v])return!0;return!1}})},{}],256:[function(h,G,X){var i=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],m=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function b(p){if(p<0)return Number("0/0");for(var r=m[0],u=m.length-1;u>0;--u)r+=m[u]/(p+u);var c=p+607/128+.5;return.5*Math.log(2*Math.PI)+(p+.5)*Math.log(c)-c+Math.log(r)-Math.log(p)}G.exports=function p(r){if(r<.5)return Math.PI/(Math.sin(Math.PI*r)*p(1-r));if(r>100)return Math.exp(b(r));r-=1;for(var u=i[0],c=1;c<9;c++)u+=i[c]/(r+c);var l=r+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(l,r+.5)*Math.exp(-l)*u},G.exports.log=b},{}],257:[function(h,G,X){G.exports=function(i,m){if("string"!=typeof i)throw new TypeError("must specify type string");if(m=m||{},"undefined"==typeof document&&!m.canvas)return null;var b=m.canvas||document.createElement("canvas");"number"==typeof m.width&&(b.width=m.width),"number"==typeof m.height&&(b.height=m.height);var p,r=m;try{var u=[i];0===i.indexOf("webgl")&&u.push("experimental-"+i);for(var c=0;c<u.length;c++)if(p=b.getContext(u[c],r))return p}catch(l){p=null}return p||null}},{}],258:[function(h,G,X){"use strict";G.exports=function(x,E){var k=new l(x);return k.update(E),k};var i=h("./lib/text.js"),m=h("./lib/lines.js"),b=h("./lib/background.js"),p=h("./lib/cube.js"),r=h("./lib/ticks.js"),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function c(x,E){return x[0]=E[0],x[1]=E[1],x[2]=E[2],x}function l(x){this.gl=x,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=b(x)}var f=l.prototype;function s(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}f.update=function(x){function E(H,Y,Q){if(Q in x){var ne,ae=x[Q],te=this[Q];this[Q]=ne=(H?Array.isArray(ae)&&Array.isArray(ae[0]):Array.isArray(ae))?[Y(ae[0]),Y(ae[1]),Y(ae[2])]:[Y(ae),Y(ae),Y(ae)];for(var K=0;K<3;++K)if(ne[K]!==te[K])return!0}return!1}x=x||{};var k,C=E.bind(this,!1,Number),L=E.bind(this,!1,Boolean),P=E.bind(this,!1,String),A=E.bind(this,!0,function(H){if(Array.isArray(H)){if(3===H.length)return[+H[0],+H[1],+H[2],1];if(4===H.length)return[+H[0],+H[1],+H[2],+H[3]]}return[0,0,0,1]}),I=!1,D=!1;if("bounds"in x)for(var R=x.bounds,S=0;S<2;++S)for(var N=0;N<3;++N)R[S][N]!==this.bounds[S][N]&&(D=!0),this.bounds[S][N]=R[S][N];if("ticks"in x)for(k=x.ticks,I=!0,this.autoTicks=!1,S=0;S<3;++S)this.tickSpacing[S]=0;else C("tickSpacing")&&(this.autoTicks=!0,D=!0);if(this._firstInit&&("ticks"in x||"tickSpacing"in x||(this.autoTicks=!0),D=!0,I=!0,this._firstInit=!1),D&&this.autoTicks&&(k=r.create(this.bounds,this.tickSpacing),I=!0),I){for(S=0;S<3;++S)k[S].sort(function(H,Y){return H.x-Y.x});r.equal(k,this.ticks)?I=!1:this.ticks=k}L("tickEnable"),P("tickFont")&&(I=!0),C("tickSize"),C("tickAngle"),C("tickPad"),A("tickColor");var B=P("labels");P("labelFont")&&(B=!0),L("labelEnable"),C("labelSize"),C("labelPad"),A("labelColor"),L("lineEnable"),L("lineMirror"),C("lineWidth"),A("lineColor"),L("lineTickEnable"),L("lineTickMirror"),C("lineTickLength"),C("lineTickWidth"),A("lineTickColor"),L("gridEnable"),C("gridWidth"),A("gridColor"),L("zeroEnable"),A("zeroLineColor"),C("zeroLineWidth"),L("backgroundEnable"),A("backgroundColor"),this._text?this._text&&(B||I)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=i(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&I&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=m(this.gl,this.bounds,this.ticks))};var o=[new s,new s,new s];function d(x,E,k,C,L){for(var P=x.primalOffset,A=x.primalMinor,I=x.mirrorOffset,D=x.mirrorMinor,R=C[E],S=0;S<3;++S)if(E!==S){var N=P,B=I,H=A,Y=D;R&1<<S&&(N=I,B=P,H=D,Y=A),N[S]=k[0][S],B[S]=k[1][S],L[S]>0?(H[S]=-1,Y[S]=0):(H[S]=0,Y[S]=1)}}var g=[0,0,0],y={model:u,view:u,projection:u,_ortho:!1};f.isOpaque=function(){return!0},f.isTransparent=function(){return!1},f.drawTransparent=function(x){};var v=[0,0,0],_=[0,0,0],w=[0,0,0];f.draw=function(x){for(var E=this.gl,k=(x=x||y).model||u,C=x.view||u,L=x.projection||u,P=this.bounds,A=x._ortho||!1,I=p(k,C,L,P,A),D=I.cubeEdges,R=I.axis,Y=(A?2:1)*this.pixelRatio*(L[3]*C[12]+L[7]*C[13]+L[11]*C[14]+L[15]*C[15])/E.drawingBufferHeight,Q=0;Q<3;++Q)this.lastCubeProps.cubeEdges[Q]=D[Q],this.lastCubeProps.axis[Q]=R[Q];var ne=o;for(Q=0;Q<3;++Q)d(o[Q],Q,this.bounds,D,R);E=this.gl;var ae,ue,fe,ke,ze,je,Ie,Ce,_e,we,Se,Oe,te=g;for(Q=0;Q<3;++Q)te[Q]=this.backgroundEnable[Q]?R[Q]:0;for(this._background.draw(k,C,L,P,te,this.backgroundColor),this._lines.bind(k,C,L,this),Q=0;Q<3;++Q){var K=[0,0,0];K[Q]=R[Q]>0?P[1][Q]:P[0][Q];for(var q=0;q<2;++q){var re=(Q+1+q)%3,V=(Q+1+(1^q))%3;this.gridEnable[re]&&this._lines.drawGrid(re,V,this.bounds,K,this.gridColor[re],this.gridWidth[re]*this.pixelRatio)}for(q=0;q<2;++q)re=(Q+1+q)%3,this.zeroEnable[V=(Q+1+(1^q))%3]&&Math.min(P[0][V],P[1][V])<=0&&Math.max(P[0][V],P[1][V])>=0&&this._lines.drawZero(re,V,this.bounds,K,this.zeroLineColor[V],this.zeroLineWidth[V]*this.pixelRatio)}for(Q=0;Q<3;++Q){this.lineEnable[Q]&&this._lines.drawAxisLine(Q,this.bounds,ne[Q].primalOffset,this.lineColor[Q],this.lineWidth[Q]*this.pixelRatio),this.lineMirror[Q]&&this._lines.drawAxisLine(Q,this.bounds,ne[Q].mirrorOffset,this.lineColor[Q],this.lineWidth[Q]*this.pixelRatio);var W=c(v,ne[Q].primalMinor),Z=c(_,ne[Q].mirrorMinor),oe=this.lineTickLength;for(q=0;q<3;++q){var ie=Y/k[5*q];W[q]*=oe[q]*ie,Z[q]*=oe[q]*ie}this.lineTickEnable[Q]&&this._lines.drawAxisTicks(Q,ne[Q].primalOffset,W,this.lineTickColor[Q],this.lineTickWidth[Q]*this.pixelRatio),this.lineTickMirror[Q]&&this._lines.drawAxisTicks(Q,ne[Q].mirrorOffset,Z,this.lineTickColor[Q],this.lineTickWidth[Q]*this.pixelRatio)}function he(ke){(fe=[0,0,0])[ke]=1}for(this._lines.unbind(),this._text.bind(k,C,L,this.pixelRatio),Q=0;Q<3;++Q){var be=ne[Q].primalMinor,pe=ne[Q].mirrorMinor,Te=c(w,ne[Q].primalOffset);for(q=0;q<3;++q)this.lineTickEnable[Q]&&(Te[q]+=Y*be[q]*Math.max(this.lineTickLength[q],0)/k[5*q]);var ye=[0,0,0];if(ye[Q]=1,this.tickEnable[Q]){for(-3600===this.tickAngle[Q]?(this.tickAngle[Q]=0,this.tickAlign[Q]="auto"):this.tickAlign[Q]=-1,ae[0]="auto"===(ae=[this.tickAlign[Q],.5,ue=1])[0]?0:parseInt(""+ae[0]),fe=[0,0,0],Ie=void 0,Ce=void 0,_e=void 0,we=void 0,Se=void 0,Oe=void 0,we=(ze=be)[Ce=((ke=Q)+2)%3],Se=(je=pe)[Ie=(ke+1)%3],Oe=je[Ce],(_e=ze[Ie])>0&&Oe>0||_e>0&&Oe<0||_e<0&&Oe>0||_e<0&&Oe<0?he(Ie):(we>0&&Se>0||we>0&&Se<0||we<0&&Se>0||we<0&&Se<0)&&he(Ce),q=0;q<3;++q)Te[q]+=Y*be[q]*this.tickPad[q]/k[5*q];this._text.drawTicks(Q,this.tickSize[Q],this.tickAngle[Q],Te,this.tickColor[Q],ye,fe,ae)}if(this.labelEnable[Q]){for(ue=0,fe=[0,0,0],this.labels[Q].length>4&&(he(Q),ue=1),ae[0]="auto"===(ae=[this.labelAlign[Q],.5,ue])[0]?0:parseInt(""+ae[0]),q=0;q<3;++q)Te[q]+=Y*be[q]*this.labelPad[q]/k[5*q];Te[Q]+=.5*(P[0][Q]+P[1][Q]),this._text.drawLabel(Q,this.labelSize[Q],this.labelAngle[Q],Te,this.labelColor[Q],[0,0,0],fe,ae)}}this._text.unbind()},f.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":259,"./lib/cube.js":260,"./lib/lines.js":261,"./lib/text.js":263,"./lib/ticks.js":264}],259:[function(h,G,X){"use strict";G.exports=function(u){for(var c=[],l=[],f=0,s=0;s<3;++s)for(var o=(s+1)%3,d=(s+2)%3,g=[0,0,0],y=[0,0,0],v=-1;v<=1;v+=2){l.push(f,f+2,f+1,f+1,f+2,f+3),g[s]=v,y[s]=v;for(var _=-1;_<=1;_+=2){g[o]=_;for(var w=-1;w<=1;w+=2)g[d]=w,c.push(g[0],g[1],g[2],y[0],y[1],y[2]),f+=1}var x=o;o=d,d=x}var E=i(u,new Float32Array(c)),k=i(u,new Uint16Array(l),u.ELEMENT_ARRAY_BUFFER),C=m(u,[{buffer:E,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:u.FLOAT,size:3,offset:12,stride:24}],k),L=b(u);return L.attributes.position.location=0,L.attributes.normal.location=1,new p(u,E,C,L)};var i=h("gl-buffer"),m=h("gl-vao"),b=h("./shaders").bg;function p(u,c,l,f){this.gl=u,this.buffer=c,this.vao=l,this.shader=f}var r=p.prototype;r.draw=function(u,c,l,f,s,o){for(var d=!1,g=0;g<3;++g)d=d||s[g];if(d){var y=this.gl;y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:c,projection:l,bounds:f,enable:s,colors:o},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),y.disable(y.POLYGON_OFFSET_FILL)}},r.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":262,"gl-buffer":267,"gl-vao":361}],260:[function(h,G,X){"use strict";G.exports=function(_,w,x,E,k){m(r,w,_),m(r,x,r);for(var C=0,L=0;L<2;++L){l[2]=E[L][2];for(var P=0;P<2;++P){l[1]=E[P][1];for(var A=0;A<2;++A)l[0]=E[A][0],s(u[C],l,r),C+=1}}var I=-1;for(L=0;L<8;++L){for(var D=u[L][3],R=0;R<3;++R)c[L][R]=u[L][R]/D;k&&(c[L][2]*=-1),D<0&&(I<0||c[L][2]<c[I][2])&&(I=L)}if(I<0){I=0;for(var S=0;S<3;++S){for(var N=(S+2)%3,B=(S+1)%3,H=-1,Y=-1,Q=0;Q<2;++Q){var ne=(te=Q<<S)+(Q<<N)+(1-Q<<B),ae=te+(1-Q<<N)+(Q<<B);p(c[te],c[ne],c[ae],f)<0||(Q?H=1:Y=1)}if(H<0||Y<0)Y>H&&(I|=1<<S);else{for(Q=0;Q<2;++Q){ne=(te=Q<<S)+(Q<<N)+(1-Q<<B);var te,K=d([u[te],u[ne],u[ae=te+(1-Q<<N)+(Q<<B)],u[te+(1<<N)+(1<<B)]]);Q?H=K:Y=K}Y>H&&(I|=1<<S)}}}var q=7^I,re=-1;for(L=0;L<8;++L)L!==I&&L!==q&&(re<0||c[re][1]>c[L][1])&&(re=L);var V=-1;for(L=0;L<3;++L)(Z=re^1<<L)!==I&&Z!==q&&(V<0&&(V=Z),(B=c[Z])[0]<c[V][0]&&(V=Z));var W=-1;for(L=0;L<3;++L){var Z;(Z=re^1<<L)!==I&&Z!==q&&Z!==V&&(W<0&&(W=Z),(B=c[Z])[0]>c[W][0]&&(W=Z))}var oe=g;oe[0]=oe[1]=oe[2]=0,oe[i.log2(V^re)]=re&V,oe[i.log2(re^W)]=re&W;var ie=7^W;ie===I||ie===q?oe[i.log2(W^(ie=7^V))]=ie&W:oe[i.log2(V^ie)]=ie&V;var ue=y,fe=I;for(S=0;S<3;++S)ue[S]=fe&1<<S?-1:1;return v};var i=h("bit-twiddle"),m=h("gl-mat4/multiply"),b=h("split-polygon"),p=h("robust-orientation"),r=new Array(16),u=new Array(8),c=new Array(8),l=new Array(3),f=[0,0,0];function s(_,w,x){for(var E=0;E<4;++E){_[E]=x[12+E];for(var k=0;k<3;++k)_[E]+=w[k]*x[4*k+E]}}!function(){for(var _=0;_<8;++_)u[_]=[1,1,1,1],c[_]=[1,1,1]}();var o=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function d(_){for(var w=0;w<o.length;++w)if((_=b.positive(_,o[w])).length<3)return 0;var x=_[0],E=x[0]/x[3],k=x[1]/x[3],C=0;for(w=1;w+1<_.length;++w){var L=_[w],P=_[w+1];C+=Math.abs((L[0]/L[3]-E)*(P[1]/P[3]-k)-(L[1]/L[3]-k)*(P[0]/P[3]-E))}return C}var g=[1,1,1],y=[0,0,0],v={cubeEdges:g,axis:y}},{"bit-twiddle":104,"gl-mat4/multiply":301,"robust-orientation":548,"split-polygon":567}],261:[function(h,G,X){"use strict";G.exports=function(g,y,v){var _=[],w=[0,0,0],x=[0,0,0],E=[0,0,0],k=[0,0,0];_.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var L=_.length/3|0,P=0;P<v[C].length;++P){var A=+v[C][P].x;_.push(A,0,1,A,1,1,A,0,-1,A,0,-1,A,1,1,A,1,-1)}var I=_.length/3|0;w[C]=L,x[C]=I-L,L=_.length/3|0;for(var D=0;D<v[C].length;++D)_.push(A=+v[C][D].x,0,1,A,1,1,A,0,-1,A,0,-1,A,1,1,A,1,-1);I=_.length/3|0,E[C]=L,k[C]=I-L}var R=i(g,new Float32Array(_)),S=m(g,[{buffer:R,type:g.FLOAT,size:3,stride:0,offset:0}]),N=b(g);return N.attributes.position.location=0,new o(g,R,S,N,x,w,k,E)};var i=h("gl-buffer"),m=h("gl-vao"),b=h("./shaders").line,p=[0,0,0],r=[0,0,0],u=[0,0,0],c=[0,0,0],l=[1,1];function f(g){return g[0]=g[1]=g[2]=0,g}function s(g,y){return g[0]=y[0],g[1]=y[1],g[2]=y[2],g}function o(g,y,v,_,w,x,E,k){this.gl=g,this.vertBuffer=y,this.vao=v,this.shader=_,this.tickCount=w,this.tickOffset=x,this.gridCount=E,this.gridOffset=k}var d=o.prototype;d.bind=function(g,y,v){this.shader.bind(),this.shader.uniforms.model=g,this.shader.uniforms.view=y,this.shader.uniforms.projection=v,l[0]=this.gl.drawingBufferWidth,l[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=l,this.vao.bind()},d.unbind=function(){this.vao.unbind()},d.drawAxisLine=function(g,y,v,_,w){var x=f(r);this.shader.uniforms.majorAxis=r,x[g]=y[1][g]-y[0][g],this.shader.uniforms.minorAxis=x;var E,k=s(c,v);k[g]+=y[0][g],this.shader.uniforms.offset=k,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=_,(E=f(u))[(g+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=f(u))[(g+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},d.drawAxisTicks=function(g,y,v,_,w){if(this.tickCount[g]){var x=f(p);x[g]=1,this.shader.uniforms.majorAxis=x,this.shader.uniforms.offset=y,this.shader.uniforms.minorAxis=v,this.shader.uniforms.color=_,this.shader.uniforms.lineWidth=w;var E=f(u);E[g]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g])}},d.drawGrid=function(g,y,v,_,w,x){if(this.gridCount[g]){var E=f(r);E[y]=v[1][y]-v[0][y],this.shader.uniforms.minorAxis=E;var k=s(c,_);k[y]+=v[0][y],this.shader.uniforms.offset=k;var C=f(p);C[g]=1,this.shader.uniforms.majorAxis=C;var L=f(u);L[g]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=x,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,this.gridCount[g],this.gridOffset[g])}},d.drawZero=function(g,y,v,_,w,x){var E=f(r);this.shader.uniforms.majorAxis=E,E[g]=v[1][g]-v[0][g],this.shader.uniforms.minorAxis=E;var k=s(c,_);k[g]+=v[0][g],this.shader.uniforms.offset=k;var C=f(u);C[y]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=x,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,6)},d.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":262,"gl-buffer":267,"gl-vao":361}],262:[function(h,G,X){"use strict";var i=h("glslify"),m=h("gl-shader"),b=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),p=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);X.line=function(f){return m(f,b,p,null,[{name:"position",type:"vec3"}])};var r=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),u=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);X.text=function(f){return m(f,r,u,null,[{name:"position",type:"vec3"}])};var c=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);X.bg=function(f){return m(f,c,l,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":339,glslify:265}],263:[function(h,G,X){(function(i){(function(){"use strict";G.exports=function(o,d,g,y,v,_){var w=m(o),x=b(o,[{buffer:w,size:3}]),E=r(o);E.attributes.position.location=0;var k=new l(o,E,w,x);return k.update(d,g,y,v,_),k};var m=h("gl-buffer"),b=h("gl-vao"),p=h("vectorize-text"),r=h("./shaders").text,u=window||i.global||{},c=u.__TEXT_CACHE||{};function l(o,d,g,y){this.gl=o,this.shader=d,this.buffer=g,this.vao=y,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}u.__TEXT_CACHE={};var f=l.prototype,s=[0,0];f.bind=function(o,d,g,y){this.vao.bind(),this.shader.bind();var v=this.shader.uniforms;v.model=o,v.view=d,v.projection=g,v.pixelScale=y,s[0]=this.gl.drawingBufferWidth,s[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=s},f.unbind=function(){this.vao.unbind()},f.update=function(o,d,g,y,v){var _=[];function w(I,D,R,S,N,B){var H=c[R];H||(H=c[R]={});var Y=H[D];Y||(Y=H[D]=function(W,Z){try{return p(W,Z)}catch(oe){return console.warn('error vectorizing text:"'+W+'" error:',oe),{cells:[],positions:[]}}}(D,{triangles:!0,font:R,textAlign:"center",textBaseline:"middle",lineSpacing:N,styletags:B}));for(var Q=(S||12)/12,ne=Y.positions,ae=Y.cells,te=0,K=ae.length;te<K;++te)for(var q=ae[te],re=2;re>=0;--re){var V=ne[q[re]];_.push(Q*V[0],-Q*V[1],I)}}for(var x=[0,0,0],E=[0,0,0],k=[0,0,0],C=[0,0,0],L={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},P=0;P<3;++P){k[P]=_.length/3|0,w(.5*(o[0][P]+o[1][P]),d[P],g[P],12,1.25,L),C[P]=(_.length/3|0)-k[P],x[P]=_.length/3|0;for(var A=0;A<y[P].length;++A)y[P][A].text&&w(y[P][A].x,y[P][A].text,y[P][A].font||v,y[P][A].fontSize||12,1.25,L);E[P]=(_.length/3|0)-x[P]}this.buffer.update(_),this.tickOffset=x,this.tickCount=E,this.labelOffset=k,this.labelCount=C},f.drawTicks=function(o,d,g,y,v,_,w,x){this.tickCount[o]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=v,this.shader.uniforms.angle=g,this.shader.uniforms.scale=d,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=x,this.vao.draw(this.gl.TRIANGLES,this.tickCount[o],this.tickOffset[o]))},f.drawLabel=function(o,d,g,y,v,_,w,x){this.labelCount[o]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=v,this.shader.uniforms.angle=g,this.shader.uniforms.scale=d,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=x,this.vao.draw(this.gl.TRIANGLES,this.labelCount[o],this.labelOffset[o]))},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,h("_process"))},{"./shaders":262,_process:528,"gl-buffer":267,"gl-vao":361,"vectorize-text":623}],264:[function(h,G,X){"use strict";function i(m,b){var p=m+"",r=p.indexOf("."),u=0;r>=0&&(u=p.length-r-1);var c=Math.pow(10,u),l=Math.round(m*b*c),f=l+"";if(f.indexOf("e")>=0)return f;var s=l/c,o=l%c;l<0?(s=0|-Math.ceil(s),o=0|-o):(s=0|Math.floor(s),o|=0);var d=""+s;if(l<0&&(d="-"+d),u){for(var g=""+o;g.length<u;)g="0"+g;return d+"."+g}return d}X.create=function(m,b){for(var p=[],r=0;r<3;++r){for(var u=[],c=0;c*b[r]<=m[1][r];++c)u.push({x:c*b[r],text:i(b[r],c)});for(c=-1;c*b[r]>=m[0][r];--c)u.push({x:c*b[r],text:i(b[r],c)});p.push(u)}return p},X.equal=function(m,b){for(var p=0;p<3;++p){if(m[p].length!==b[p].length)return!1;for(var r=0;r<m[p].length;++r){var u=m[p][r],c=b[p][r];if(u.x!==c.x||u.text!==c.text||u.font!==c.font||u.fontColor!==c.fontColor||u.fontSize!==c.fontSize||u.dx!==c.dx||u.dy!==c.dy)return!1}}return!0}},{}],265:[function(h,G,X){G.exports=function(i){"string"==typeof i&&(i=[i]);for(var m=[].slice.call(arguments,1),b=[],p=0;p<i.length-1;p++)b.push(i[p],m[p]||"");return b.push(i[p]),b.join("")}},{}],266:[function(h,G,X){"use strict";G.exports=function(v,_,w,x,E){var k=_.model||c,C=_.view||c,L=_.projection||c,P=_._ortho||!1,A=v.bounds,I=(E=E||b(k,C,L,A,P)).axis;p(l,C,k),p(l,L,l);for(var D=g,R=0;R<3;++R)D[R].lo=1/0,D[R].hi=-1/0,D[R].pixelsPerDataUnit=1/0;var S=i(r(l,l));r(l,l);for(var N=0;N<3;++N){var B=(N+1)%3,H=(N+2)%3,Y=y;e:for(R=0;R<2;++R){var Q=[];if(I[N]<0!=!!R){Y[N]=A[R][N];for(var ne=0;ne<2;++ne){Y[B]=A[ne^R][B];for(var ae=0;ae<2;++ae)Y[H]=A[ae^ne^R][H],Q.push(Y.slice())}var te=P?5:4;for(ne=te;ne===te;++ne){if(0===Q.length)continue e;Q=m.positive(Q,S[ne])}for(ne=0;ne<Q.length;++ne){var K=d(y,l,H=Q[ne],w,x);for(ae=0;ae<3;++ae)D[ae].lo=Math.min(D[ae].lo,H[ae]),D[ae].hi=Math.max(D[ae].hi,H[ae]),ae!==N&&(D[ae].pixelsPerDataUnit=Math.min(D[ae].pixelsPerDataUnit,Math.abs(K[ae])))}}}}return D};var i=h("extract-frustum-planes"),m=h("split-polygon"),b=h("./lib/cube.js"),p=h("gl-mat4/multiply"),r=h("gl-mat4/transpose"),u=h("gl-vec4/transformMat4"),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),l=new Float32Array(16);function f(v,_,w){this.lo=v,this.hi=_,this.pixelsPerDataUnit=w}var s=[0,0,0,1],o=[0,0,0,1];function d(v,_,w,x,E){for(var k=0;k<3;++k){for(var C=s,L=o,P=0;P<3;++P)L[P]=C[P]=w[P];L[3]=C[3]=1,L[k]+=1,u(L,L,_),L[3]<0&&(v[k]=1/0),C[k]-=1,u(C,C,_),C[3]<0&&(v[k]=1/0);var A=(C[0]/C[3]-L[0]/L[3])*x,I=(C[1]/C[3]-L[1]/L[3])*E;v[k]=.25*Math.sqrt(A*A+I*I)}return v}var g=[new f(1/0,-1/0,1/0),new f(1/0,-1/0,1/0),new f(1/0,-1/0,1/0)],y=[0,0,0]},{"./lib/cube.js":260,"extract-frustum-planes":248,"gl-mat4/multiply":301,"gl-mat4/transpose":312,"gl-vec4/transformMat4":432,"split-polygon":567}],267:[function(h,G,X){"use strict";var i=h("typedarray-pool"),m=h("ndarray-ops"),b=h("ndarray"),p=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function r(f,s,o,d,g){this.gl=f,this.type=s,this.handle=o,this.length=d,this.usage=g}var u=r.prototype;function c(f,s,o,d,g,y){var v=g.length*g.BYTES_PER_ELEMENT;if(y<0)return f.bufferData(s,g,d),v;if(v+y>o)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return f.bufferSubData(s,y,g),o}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(f,s){if("number"!=typeof s&&(s=-1),this.bind(),"object"==typeof f&&void 0!==f.shape){var o=f.dtype;if(p.indexOf(o)<0&&(o="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(o=gl.getExtension("OES_element_index_uint")&&"uint16"!==o?"uint32":"uint16"),o===f.dtype&&function(v,_){for(var w=1,x=_.length-1;x>=0;--x){if(_[x]!==w)return!1;w*=v[x]}return!0}(f.shape,f.stride))this.length=c(this.gl,this.type,this.length,this.usage,0===f.offset&&f.data.length===f.shape[0]?f.data:f.data.subarray(f.offset,f.shape[0]),s);else{var d=i.malloc(f.size,o),g=b(d,f.shape);m.assign(g,f),this.length=c(this.gl,this.type,this.length,this.usage,s<0?d:d.subarray(0,f.size),s),i.free(d)}}else if(Array.isArray(f)){var y;y=function(f,s){for(var o=i.malloc(f.length,s),d=f.length,g=0;g<d;++g)o[g]=f[g];return o}(f,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=c(this.gl,this.type,this.length,this.usage,s<0?y:y.subarray(0,f.length),s),i.free(y)}else if("object"==typeof f&&"number"==typeof f.length)this.length=c(this.gl,this.type,this.length,this.usage,f,s);else{if("number"!=typeof f&&void 0!==f)throw new Error("gl-buffer: Invalid data type");if(s>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(f|=0)<=0&&(f=1),this.gl.bufferData(this.type,0|f,this.usage),this.length=f}},G.exports=function(f,s,o,d){if(d=d||f.DYNAMIC_DRAW,(o=o||f.ARRAY_BUFFER)!==f.ARRAY_BUFFER&&o!==f.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(d!==f.DYNAMIC_DRAW&&d!==f.STATIC_DRAW&&d!==f.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var g=f.createBuffer(),y=new r(f,o,g,0,d);return y.update(s),y}},{ndarray:483,"ndarray-ops":478,"typedarray-pool":617}],268:[function(h,G,X){"use strict";var i=h("gl-vec3");G.exports=function(b,p){var r=b.positions,u=b.vectors,c={positions:[],vertexIntensity:[],vertexIntensityBounds:b.vertexIntensityBounds,vectors:[],cells:[],coneOffset:b.coneOffset,colormap:b.colormap};if(0===b.positions.length)return p&&(p[0]=[0,0,0],p[1]=[0,0,0]),c;for(var l=0,f=1/0,s=-1/0,o=1/0,d=-1/0,g=1/0,y=-1/0,v=null,_=null,w=[],x=1/0,E=!1,k=0;k<r.length;k++){var C=r[k];f=Math.min(C[0],f),s=Math.max(C[0],s),o=Math.min(C[1],o),d=Math.max(C[1],d),g=Math.min(C[2],g),y=Math.max(C[2],y);var L=u[k];if(i.length(L)>l&&(l=i.length(L)),k){var P=2*i.distance(v,C)/(i.length(_)+i.length(L));P?(x=Math.min(x,P),E=!1):E=!0}E||(v=C,_=L),w.push(L)}var I=[s,d,y];p&&(p[0]=[f,o,g],p[1]=I),0===l&&(l=1);var D=1/l;isFinite(x)||(x=1),c.vectorScale=x;var R=b.coneSize||.5;b.absoluteConeSize&&(R=b.absoluteConeSize*D),c.coneScale=R,k=0;for(var S=0;k<r.length;k++)for(var N=(C=r[k])[0],B=C[1],H=C[2],Y=w[k],Q=i.length(Y)*D,ne=0;ne<8;ne++){c.positions.push([N,B,H,S++]),c.positions.push([N,B,H,S++]),c.positions.push([N,B,H,S++]),c.positions.push([N,B,H,S++]),c.positions.push([N,B,H,S++]),c.positions.push([N,B,H,S++]),c.vectors.push(Y),c.vectors.push(Y),c.vectors.push(Y),c.vectors.push(Y),c.vectors.push(Y),c.vectors.push(Y),c.vertexIntensity.push(Q,Q,Q),c.vertexIntensity.push(Q,Q,Q);var ae=c.positions.length;c.cells.push([ae-6,ae-5,ae-4],[ae-3,ae-2,ae-1])}return c};var m=h("./lib/shaders");G.exports.createMesh=h("./create_mesh"),G.exports.createConeMesh=function(b,p){return G.exports.createMesh(b,p,{shaders:m,traceType:"cone"})}},{"./create_mesh":269,"./lib/shaders":270,"gl-vec3":380}],269:[function(h,G,X){"use strict";var i=h("gl-shader"),m=h("gl-buffer"),b=h("gl-vao"),p=h("gl-texture2d"),r=h("gl-mat4/multiply"),u=h("gl-mat4/invert"),c=h("ndarray"),l=h("colormap"),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(y,v,_,w,x,E,k,C,L,P,A){this.gl=y,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=v,this.dirty=!0,this.triShader=_,this.pickShader=w,this.trianglePositions=x,this.triangleVectors=E,this.triangleColors=C,this.triangleUVs=L,this.triangleIds=k,this.triangleVAO=P,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=A,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=f,this._view=f,this._projection=f,this._resolution=[1,1]}var o=s.prototype;function d(y,v){var _=i(y,v.meshShader.vertex,v.meshShader.fragment,null,v.meshShader.attributes);return _.attributes.position.location=0,_.attributes.color.location=2,_.attributes.uv.location=3,_.attributes.vector.location=4,_}function g(y,v){var _=i(y,v.pickShader.vertex,v.pickShader.fragment,null,v.pickShader.attributes);return _.attributes.position.location=0,_.attributes.id.location=1,_.attributes.vector.location=4,_}o.isOpaque=function(){return this.opacity>=1},o.isTransparent=function(){return this.opacity<1},o.pickSlots=1,o.setPickBase=function(y){this.pickId=y},o.update=function(y){y=y||{};var v=this.gl;this.dirty=!0,"lightPosition"in y&&(this.lightPosition=y.lightPosition),"opacity"in y&&(this.opacity=y.opacity),"ambient"in y&&(this.ambientLight=y.ambient),"diffuse"in y&&(this.diffuseLight=y.diffuse),"specular"in y&&(this.specularLight=y.specular),"roughness"in y&&(this.roughness=y.roughness),"fresnel"in y&&(this.fresnel=y.fresnel),void 0!==y.tubeScale&&(this.tubeScale=y.tubeScale),void 0!==y.vectorScale&&(this.vectorScale=y.vectorScale),void 0!==y.coneScale&&(this.coneScale=y.coneScale),void 0!==y.coneOffset&&(this.coneOffset=y.coneOffset),y.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=v.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=v.LINEAR,this.texture.setPixels(function(re){for(var V=l({colormap:re,nshades:256,format:"rgba"}),W=new Uint8Array(1024),Z=0;Z<256;++Z){for(var oe=V[Z],ie=0;ie<3;++ie)W[4*Z+ie]=oe[ie];W[4*Z+3]=255*oe[3]}return c(W,[256,256,4],[4,0,1])}(y.colormap)),this.texture.generateMipmap());var _=y.cells,w=y.positions,x=y.vectors;if(w&&_&&x){var E=[],k=[],C=[],L=[],P=[];this.cells=_,this.positions=w,this.vectors=x;var A=y.meshColor||[1,1,1,1],I=y.vertexIntensity,D=1/0,R=-1/0;if(I)if(y.vertexIntensityBounds)D=+y.vertexIntensityBounds[0],R=+y.vertexIntensityBounds[1];else for(var S=0;S<I.length;++S){var N=I[S];D=Math.min(D,N),R=Math.max(R,N)}else for(S=0;S<w.length;++S)N=w[S][2],D=Math.min(D,N),R=Math.max(R,N);for(this.intensity=I||function(re){for(var V=re.length,W=new Array(V),Z=0;Z<V;++Z)W[Z]=re[Z][2];return W}(w),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],S=0;S<w.length;++S)for(var B=w[S],H=0;H<3;++H)!isNaN(B[H])&&isFinite(B[H])&&(this.bounds[0][H]=Math.min(this.bounds[0][H],B[H]),this.bounds[1][H]=Math.max(this.bounds[1][H],B[H]));var Y=0;e:for(S=0;S<_.length;++S){var Q=_[S];switch(Q.length){case 3:for(H=0;H<3;++H){B=w[ae=Q[H]];for(var ne=0;ne<3;++ne)if(isNaN(B[ne])||!isFinite(B[ne]))continue e}for(H=0;H<3;++H){var ae;B=w[ae=Q[2-H]],E.push(B[0],B[1],B[2],B[3]);var te=x[ae];k.push(te[0],te[1],te[2],te[3]||0);var K;C.push(A[0],A[1],A[2],3===A.length?1:A[3]),L.push((K=I?[(I[ae]-D)/(R-D),0]:[(B[2]-D)/(R-D),0])[0],K[1]),P.push(S)}Y+=1}}this.triangleCount=Y,this.trianglePositions.update(E),this.triangleVectors.update(k),this.triangleColors.update(C),this.triangleUVs.update(L),this.triangleIds.update(new Uint32Array(P))}},o.drawTransparent=o.draw=function(y){for(var v=this.gl,_=(y=y||{}).model||f,w=y.view||f,x=y.projection||f,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)E[0][k]=Math.max(E[0][k],this.clipBounds[0][k]),E[1][k]=Math.min(E[1][k],this.clipBounds[1][k]);var C={model:_,view:w,projection:x,inverseModel:f.slice(),clipBounds:E,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};C.inverseModel=u(C.inverseModel,C.model),v.disable(v.CULL_FACE),this.texture.bind(0);var L=new Array(16);for(r(L,C.view,C.model),r(L,C.projection,L),u(L,L),k=0;k<3;++k)C.eyePosition[k]=L[12+k]/L[15];var P=L[15];for(k=0;k<3;++k)P+=this.lightPosition[k]*L[4*k+3];for(k=0;k<3;++k){for(var A=L[12+k],I=0;I<3;++I)A+=L[4*I+k]*this.lightPosition[I];C.lightPosition[k]=A/P}if(this.triangleCount>0){var D=this.triShader;D.bind(),D.uniforms=C,this.triangleVAO.bind(),v.drawArrays(v.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},o.drawPick=function(y){for(var v=this.gl,_=(y=y||{}).model||f,w=y.view||f,x=y.projection||f,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)E[0][k]=Math.max(E[0][k],this.clipBounds[0][k]),E[1][k]=Math.min(E[1][k],this.clipBounds[1][k]);this._model=[].slice.call(_),this._view=[].slice.call(w),this._projection=[].slice.call(x),this._resolution=[v.drawingBufferWidth,v.drawingBufferHeight];var C={model:_,view:w,projection:x,clipBounds:E,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},L=this.pickShader;L.bind(),L.uniforms=C,this.triangleCount>0&&(this.triangleVAO.bind(),v.drawArrays(v.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},o.pick=function(y){if(!y||y.id!==this.pickId)return null;var v=y.value[0]+256*y.value[1]+65536*y.value[2],_=this.cells[v],w=this.positions[_[1]].slice(0,3),x={position:w,dataCoordinate:w,index:Math.floor(_[1]/48)};return"cone"===this.traceType?x.index=Math.floor(_[1]/48):"streamtube"===this.traceType&&(x.intensity=this.intensity[_[1]],x.velocity=this.vectors[_[1]].slice(0,3),x.divergence=this.vectors[_[1]][3],x.index=v),x},o.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},G.exports=function(y,v,_){var w=_.shaders;1===arguments.length&&(y=(v=y).gl);var x=d(y,w),E=g(y,w),k=p(y,c(new Uint8Array([255,255,255,255]),[1,1,4]));k.generateMipmap(),k.minFilter=y.LINEAR_MIPMAP_LINEAR,k.magFilter=y.LINEAR;var C=m(y),L=m(y),P=m(y),A=m(y),I=m(y),R=new s(y,k,x,E,C,L,I,P,A,b(y,[{buffer:C,type:y.FLOAT,size:4},{buffer:I,type:y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:P,type:y.FLOAT,size:4},{buffer:A,type:y.FLOAT,size:2},{buffer:L,type:y.FLOAT,size:4}]),_.traceType||"cone");return R.update(v),R}},{colormap:137,"gl-buffer":267,"gl-mat4/invert":299,"gl-mat4/multiply":301,"gl-shader":339,"gl-texture2d":356,"gl-vao":361,ndarray:483}],270:[function(h,G,X){var i=h("glslify"),m=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),b=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),p=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),r=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);X.meshShader={vertex:m,fragment:b,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},X.pickShader={vertex:p,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:442}],271:[function(h,G,X){G.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],272:[function(h,G,X){var i=h("./1.0/numbers");G.exports=function(m){return i[m]}},{"./1.0/numbers":271}],273:[function(h,G,X){"use strict";G.exports=function(s){var o=s.gl,d=i(o),g=m(o,[{buffer:d,type:o.FLOAT,size:3,offset:0,stride:40},{buffer:d,type:o.FLOAT,size:4,offset:12,stride:40},{buffer:d,type:o.FLOAT,size:3,offset:28,stride:40}]),y=b(o);y.attributes.position.location=0,y.attributes.color.location=1,y.attributes.offset.location=2;var v=new r(o,d,g,y);return v.update(s),v};var i=h("gl-buffer"),m=h("gl-vao"),b=h("./shaders/index"),p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(s,o,d,g){this.gl=s,this.shader=g,this.buffer=o,this.vao=d,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=r.prototype;function c(s,o){for(var d=0;d<3;++d)s[0][d]=Math.min(s[0][d],o[d]),s[1][d]=Math.max(s[1][d],o[d])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(s){var o=this.gl,d=this.shader.uniforms;this.shader.bind();var g=d.view=s.view||p,y=d.projection=s.projection||p;d.model=s.model||p,d.clipBounds=this.clipBounds,d.opacity=this.opacity;var E=(s._ortho?2:1)*this.pixelRatio*(y[3]*g[12]+y[7]*g[13]+y[11]*g[14]+y[15]*g[15])/o.drawingBufferHeight;this.vao.bind();for(var k=0;k<3;++k)o.lineWidth(this.lineWidth[k]*this.pixelRatio),d.capSize=this.capSize[k]*E,this.lineCount[k]&&o.drawArrays(o.LINES,this.lineOffset[k],this.lineCount[k]);this.vao.unbind()};var l=function(){for(var s=new Array(3),o=0;o<3;++o){for(var d=[],g=1;g<=2;++g)for(var y=-1;y<=1;y+=2){var v=[0,0,0];v[(g+o)%3]=y,d.push(v)}s[o]=d}return s}();function f(s,o,d,g){for(var y=l[g],v=0;v<y.length;++v){var _=y[v];s.push(o[0],o[1],o[2],d[0],d[1],d[2],d[3],_[0],_[1],_[2])}return y.length}u.update=function(s){"lineWidth"in(s=s||{})&&(this.lineWidth=s.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in s&&(this.capSize=s.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in s&&(this.opacity=+s.opacity,this.opacity<1&&(this.hasAlpha=!0));var o=s.color||[[0,0,0],[0,0,0],[0,0,0]],d=s.position,g=s.error;if(Array.isArray(o[0])||(o=[o,o,o]),d&&g){var y=[],v=d.length,_=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var w=0;w<3;++w){this.lineOffset[w]=_;e:for(var x=0;x<v;++x){for(var E=d[x],k=0;k<3;++k)if(isNaN(E[k])||!isFinite(E[k]))continue e;var P,C=g[x],L=o[w];Array.isArray(L[0])&&(L=o[x]),3===L.length?L=[L[0],L[1],L[2],1]:4===L.length&&(L=[L[0],L[1],L[2],L[3]],!this.hasAlpha&&L[3]<1&&(this.hasAlpha=!0)),isNaN(C[0][w])||isNaN(C[1][w])||(C[0][w]<0&&((P=E.slice())[w]+=C[0][w],y.push(E[0],E[1],E[2],L[0],L[1],L[2],L[3],0,0,0,P[0],P[1],P[2],L[0],L[1],L[2],L[3],0,0,0),c(this.bounds,P),_+=2+f(y,P,L,w)),C[1][w]>0&&((P=E.slice())[w]+=C[1][w],y.push(E[0],E[1],E[2],L[0],L[1],L[2],L[3],0,0,0,P[0],P[1],P[2],L[0],L[1],L[2],L[3],0,0,0),c(this.bounds,P),_+=2+f(y,P,L,w)))}this.lineCount[w]=_-this.lineOffset[w]}this.buffer.update(y)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":275,"gl-buffer":267,"gl-vao":361}],274:[function(h,G,X){arguments[4][265][0].apply(X,arguments)},{dup:265}],275:[function(h,G,X){"use strict";var i=h("glslify"),m=h("gl-shader"),b=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),p=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);G.exports=function(r){return m(r,b,p,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":339,glslify:274}],276:[function(h,G,X){"use strict";var i=h("gl-texture2d");G.exports=function(v,_,w,x){m||(m=v.FRAMEBUFFER_UNSUPPORTED,b=v.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,p=v.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,r=v.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=v.getExtension("WEBGL_draw_buffers");if(!u&&E&&function(D,R){var S=D.getParameter(R.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(S+1);for(var N=0;N<=S;++N){for(var B=new Array(S),H=0;H<N;++H)B[H]=D.COLOR_ATTACHMENT0+H;for(H=N;H<S;++H)B[H]=D.NONE;u[N]=B}}(v,E),Array.isArray(_)&&(x=w,w=0|_[1],_=0|_[0]),"number"!=typeof _)throw new Error("gl-fbo: Missing shape parameter");var k=v.getParameter(v.MAX_RENDERBUFFER_SIZE);if(_<0||_>k||w<0||w>k)throw new Error("gl-fbo: Parameters are too large for FBO");var C=1;if("color"in(x=x||{})){if((C=Math.max(0|x.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(C>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(C>v.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+C+" draw buffers")}}var L=v.UNSIGNED_BYTE,P=v.getExtension("OES_texture_float");if(x.float&&C>0){if(!P)throw new Error("gl-fbo: Context does not support floating point textures");L=v.FLOAT}else x.preferFloat&&C>0&&P&&(L=v.FLOAT);var A=!0;"depth"in x&&(A=!!x.depth);var I=!1;return"stencil"in x&&(I=!!x.stencil),new d(v,_,w,L,C,A,I,E)};var m,b,p,r,u=null;function c(v){return[v.getParameter(v.FRAMEBUFFER_BINDING),v.getParameter(v.RENDERBUFFER_BINDING),v.getParameter(v.TEXTURE_BINDING_2D)]}function l(v,_){v.bindFramebuffer(v.FRAMEBUFFER,_[0]),v.bindRenderbuffer(v.RENDERBUFFER,_[1]),v.bindTexture(v.TEXTURE_2D,_[2])}function f(v){switch(v){case m:throw new Error("gl-fbo: Framebuffer unsupported");case b:throw new Error("gl-fbo: Framebuffer incomplete attachment");case p:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case r:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function s(v,_,w,x,E,k){if(!x)return null;var C=i(v,_,w,E,x);return C.magFilter=v.NEAREST,C.minFilter=v.NEAREST,C.mipSamples=1,C.bind(),v.framebufferTexture2D(v.FRAMEBUFFER,k,v.TEXTURE_2D,C.handle,0),C}function o(v,_,w,x,E){var k=v.createRenderbuffer();return v.bindRenderbuffer(v.RENDERBUFFER,k),v.renderbufferStorage(v.RENDERBUFFER,x,_,w),v.framebufferRenderbuffer(v.FRAMEBUFFER,E,v.RENDERBUFFER,k),k}function d(v,_,w,x,E,k,C,L){this.gl=v,this._shape=[0|_,0|w],this._destroyed=!1,this._ext=L,this.color=new Array(E);for(var P=0;P<E;++P)this.color[P]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=x,this._useDepth=k,this._useStencil=C;var A=this,I=[0|_,0|w];Object.defineProperties(I,{0:{get:function(){return A._shape[0]},set:function(D){return A.width=D}},1:{get:function(){return A._shape[1]},set:function(D){return A.height=D}}}),this._shapeVector=I,function(D){var R=c(D.gl),S=D.gl,N=D.handle=S.createFramebuffer(),B=D._shape[0],H=D._shape[1],Y=D.color.length,Q=D._ext,ne=D._useStencil,ae=D._useDepth,te=D._colorType;S.bindFramebuffer(S.FRAMEBUFFER,N);for(var K=0;K<Y;++K)D.color[K]=s(S,B,H,te,S.RGBA,S.COLOR_ATTACHMENT0+K);0===Y?(D._color_rb=o(S,B,H,S.RGBA4,S.COLOR_ATTACHMENT0),Q&&Q.drawBuffersWEBGL(u[0])):Y>1&&Q.drawBuffersWEBGL(u[Y]);var q=S.getExtension("WEBGL_depth_texture");q?ne?D.depth=s(S,B,H,q.UNSIGNED_INT_24_8_WEBGL,S.DEPTH_STENCIL,S.DEPTH_STENCIL_ATTACHMENT):ae&&(D.depth=s(S,B,H,S.UNSIGNED_SHORT,S.DEPTH_COMPONENT,S.DEPTH_ATTACHMENT)):ae&&ne?D._depth_rb=o(S,B,H,S.DEPTH_STENCIL,S.DEPTH_STENCIL_ATTACHMENT):ae?D._depth_rb=o(S,B,H,S.DEPTH_COMPONENT16,S.DEPTH_ATTACHMENT):ne&&(D._depth_rb=o(S,B,H,S.STENCIL_INDEX,S.STENCIL_ATTACHMENT));var re=S.checkFramebufferStatus(S.FRAMEBUFFER);if(re!==S.FRAMEBUFFER_COMPLETE){for(D._destroyed=!0,S.bindFramebuffer(S.FRAMEBUFFER,null),S.deleteFramebuffer(D.handle),D.handle=null,D.depth&&(D.depth.dispose(),D.depth=null),D._depth_rb&&(S.deleteRenderbuffer(D._depth_rb),D._depth_rb=null),K=0;K<D.color.length;++K)D.color[K].dispose(),D.color[K]=null;D._color_rb&&(S.deleteRenderbuffer(D._color_rb),D._color_rb=null),l(S,R),f(re)}l(S,R)}(this)}var g=d.prototype;function y(v,_,w){if(v._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(v._shape[0]!==_||v._shape[1]!==w){var x=v.gl,E=x.getParameter(x.MAX_RENDERBUFFER_SIZE);if(_<0||_>E||w<0||w>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");v._shape[0]=_,v._shape[1]=w;for(var k=c(x),C=0;C<v.color.length;++C)v.color[C].shape=v._shape;v._color_rb&&(x.bindRenderbuffer(x.RENDERBUFFER,v._color_rb),x.renderbufferStorage(x.RENDERBUFFER,x.RGBA4,v._shape[0],v._shape[1])),v.depth&&(v.depth.shape=v._shape),v._depth_rb&&(x.bindRenderbuffer(x.RENDERBUFFER,v._depth_rb),v._useDepth&&v._useStencil?x.renderbufferStorage(x.RENDERBUFFER,x.DEPTH_STENCIL,v._shape[0],v._shape[1]):v._useDepth?x.renderbufferStorage(x.RENDERBUFFER,x.DEPTH_COMPONENT16,v._shape[0],v._shape[1]):v._useStencil&&x.renderbufferStorage(x.RENDERBUFFER,x.STENCIL_INDEX,v._shape[0],v._shape[1])),x.bindFramebuffer(x.FRAMEBUFFER,v.handle);var L=x.checkFramebufferStatus(x.FRAMEBUFFER);L!==x.FRAMEBUFFER_COMPLETE&&(v.dispose(),l(x,k),f(L)),l(x,k)}}Object.defineProperties(g,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(v){if(Array.isArray(v)||(v=[0|v,0|v]),2!==v.length)throw new Error("gl-fbo: Shape vector must be length 2");var _=0|v[0],w=0|v[1];return y(this,_,w),[_,w]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(v){return y(this,v|=0,this._shape[1]),v},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(v){return y(this,this._shape[0],v|=0),v},enumerable:!1}}),g.bind=function(){if(!this._destroyed){var v=this.gl;v.bindFramebuffer(v.FRAMEBUFFER,this.handle),v.viewport(0,0,this._shape[0],this._shape[1])}},g.dispose=function(){if(!this._destroyed){this._destroyed=!0;var v=this.gl;v.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(v.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var _=0;_<this.color.length;++_)this.color[_].dispose(),this.color[_]=null;this._color_rb&&(v.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":356}],277:[function(h,G,X){var i=h("sprintf-js").sprintf,m=h("gl-constants/lookup"),b=h("glsl-shader-name"),p=h("add-line-numbers");G.exports=function(r,u,c){"use strict";var l=b(u)||"of unknown name (see npm glsl-shader-name)",f="unknown type";void 0!==c&&(f=c===m.FRAGMENT_SHADER?"fragment":"vertex");for(var s=i("Error compiling %s shader %s:\n",f,l),o=i("%s%s",s,r),d=r.split("\n"),g={},y=0;y<d.length;y++){var v=d[y];if(""!==v&&"\0"!==v){var _=parseInt(v.split(":")[2]);if(isNaN(_))throw new Error(i("Could not parse error: %s",v));g[_]=v}}var w=p(u).split("\n");for(y=0;y<w.length;y++)if((g[y+3]||g[y+2]||g[y+1])&&(s+=w[y]+"\n",g[y+1])){var E=g[y+1];E=E.substr(E.split(":",3).join(":").length+1).trim(),s+=i("^^^ %s\n\n",E)}return{long:s.trim(),short:o.trim()}}},{"add-line-numbers":72,"gl-constants/lookup":272,"glsl-shader-name":434,"sprintf-js":568}],278:[function(h,G,X){"use strict";G.exports=function(o,d){var g=o.gl,k=new c(o,p(g,u.vertex,u.fragment),p(g,u.pickVertex,u.pickFragment),r(g),r(g),r(g),r(g));return k.update(d),o.addObject(k),k};var i=h("binary-search-bounds"),m=h("iota-array"),b=h("typedarray-pool"),p=h("gl-shader"),r=h("gl-buffer"),u=h("./lib/shaders");function c(o,d,g,y,v,_,w){this.plot=o,this.shader=d,this.pickShader=g,this.positionBuffer=y,this.weightBuffer=v,this.colorBuffer=_,this.idBuffer=w,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var l,o,d,f=c.prototype,s=[0,0,1,0,0,1,1,0,1,1,0,1];f.draw=(l=[1,0,0,0,1,0,0,0,1],function(){var o=this.plot,d=this.shader,g=this.bounds,y=this.numVertices;if(!(y<=0)){var v=o.gl,_=o.dataBox,x=g[3]-g[1],E=_[2]-_[0],k=_[3]-_[1];l[0]=2*(g[2]-g[0])/E,l[4]=2*x/k,l[6]=2*(g[0]-_[0])/E-1,l[7]=2*(g[1]-_[1])/k-1,d.bind();var C=d.uniforms;C.viewTransform=l,C.shape=this.shape;var L=d.attributes;this.positionBuffer.bind(),L.position.pointer(),this.weightBuffer.bind(),L.weight.pointer(v.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),L.color.pointer(v.UNSIGNED_BYTE,!0),v.drawArrays(v.TRIANGLES,0,y)}}),f.drawPick=(o=[1,0,0,0,1,0,0,0,1],d=[0,0,0,0],function(g){var y=this.plot,v=this.pickShader,_=this.bounds,w=this.numVertices;if(!(w<=0)){var x=y.gl,E=y.dataBox,C=_[3]-_[1],L=E[2]-E[0],P=E[3]-E[1];o[0]=2*(_[2]-_[0])/L,o[4]=2*C/P,o[6]=2*(_[0]-E[0])/L-1,o[7]=2*(_[1]-E[1])/P-1;for(var A=0;A<4;++A)d[A]=g>>8*A&255;this.pickOffset=g,v.bind();var I=v.uniforms;I.viewTransform=o,I.pickOffset=d,I.shape=this.shape;var D=v.attributes;return this.positionBuffer.bind(),D.position.pointer(),this.weightBuffer.bind(),D.weight.pointer(x.UNSIGNED_BYTE,!1),this.idBuffer.bind(),D.pickId.pointer(x.UNSIGNED_BYTE,!1),x.drawArrays(x.TRIANGLES,0,w),g+this.shape[0]*this.shape[1]}}),f.pick=function(o,d,g){var y=this.pickOffset;if(g<y||g>=y+this.shape[0]*this.shape[1])return null;var _=g-y;return{object:this,pointId:_,dataCoord:[this.xData[_%this.shape[0]],this.yData[_/this.shape[0]|0]]}},f.update=function(o){var d=(o=o||{}).shape||[0,0],g=o.x||m(d[0]),y=o.y||m(d[1]),v=o.z||new Float32Array(d[0]*d[1]),_=!1!==o.zsmooth;this.xData=g,this.yData=y;var w,x,E,k,C=o.colorLevels||[0],L=o.colorValues||[0,0,0,1],P=C.length,A=this.bounds;_?(w=A[0]=g[0],x=A[1]=y[0],E=A[2]=g[g.length-1],k=A[3]=y[y.length-1]):(w=A[0]=g[0]+(g[1]-g[0])/2,x=A[1]=y[0]+(y[1]-y[0])/2,E=A[2]=g[g.length-1]+(g[g.length-1]-g[g.length-2])/2,k=A[3]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2);var I=1/(E-w),D=1/(k-x),R=d[0],S=d[1];this.shape=[R,S];var N=(_?(R-1)*(S-1):R*S)*(s.length>>>1);this.numVertices=N;for(var B=b.mallocUint8(4*N),H=b.mallocFloat32(2*N),Y=b.mallocUint8(2*N),Q=b.mallocUint32(N),ne=0,ae=_?R-1:R,te=_?S-1:S,K=0;K<te;++K){var q,re;_?(q=D*(y[K]-x),re=D*(y[K+1]-x)):(q=K<S-1?D*(y[K]-(y[K+1]-y[K])/2-x):D*(y[K]-(y[K]-y[K-1])/2-x),re=K<S-1?D*(y[K]+(y[K+1]-y[K])/2-x):D*(y[K]+(y[K]-y[K-1])/2-x));for(var V=0;V<ae;++V){var W,Z;_?(W=I*(g[V]-w),Z=I*(g[V+1]-w)):(W=V<R-1?I*(g[V]-(g[V+1]-g[V])/2-w):I*(g[V]-(g[V]-g[V-1])/2-w),Z=V<R-1?I*(g[V]+(g[V+1]-g[V])/2-w):I*(g[V]+(g[V]-g[V-1])/2-w));for(var oe=0;oe<s.length;oe+=2){var ie,ue,fe,he,de=s[oe],be=s[oe+1],pe=v[_?(K+be)*R+(V+de):K*R+V],Te=i.le(C,pe);if(Te<0)ie=L[0],ue=L[1],fe=L[2],he=L[3];else if(Te===P-1)ie=L[4*P-4],ue=L[4*P-3],fe=L[4*P-2],he=L[4*P-1];else{var ye=(pe-C[Te])/(C[Te+1]-C[Te]),ke=1-ye,ze=4*Te,je=4*(Te+1);ie=ke*L[ze]+ye*L[je],ue=ke*L[ze+1]+ye*L[je+1],fe=ke*L[ze+2]+ye*L[je+2],he=ke*L[ze+3]+ye*L[je+3]}B[4*ne]=255*ie,B[4*ne+1]=255*ue,B[4*ne+2]=255*fe,B[4*ne+3]=255*he,H[2*ne]=.5*W+.5*Z,H[2*ne+1]=.5*q+.5*re,Y[2*ne]=de,Y[2*ne+1]=be,Q[ne]=K*R+V,ne+=1}}}this.positionBuffer.update(H),this.weightBuffer.update(Y),this.colorBuffer.update(B),this.idBuffer.update(Q),b.free(H),b.free(B),b.free(Y),b.free(Q)},f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":279,"binary-search-bounds":103,"gl-buffer":267,"gl-shader":339,"iota-array":451,"typedarray-pool":617}],279:[function(h,G,X){"use strict";var i=h("glslify");G.exports={fragment:i(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:442}],280:[function(h,G,X){var i=h("glslify"),m=h("gl-shader"),b=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),p=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),r=i(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];X.createShader=function(c){return m(c,b,p,null,u)},X.createPickShader=function(c){return m(c,b,r,null,u)}},{"gl-shader":339,glslify:282}],281:[function(h,G,X){"use strict";G.exports=function(w){var x=w.gl||w.scene&&w.scene.gl,E=f(x);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var k=s(x);k.attributes.position.location=0,k.attributes.nextPosition.location=1,k.attributes.arcLength.location=2,k.attributes.lineWidth.location=3,k.attributes.color.location=4;for(var C=i(x),L=m(x,[{buffer:C,size:3,offset:0,stride:48},{buffer:C,size:3,offset:12,stride:48},{buffer:C,size:1,offset:24,stride:48},{buffer:C,size:1,offset:28,stride:48},{buffer:C,size:4,offset:32,stride:48}]),P=c(new Array(1024),[256,1,4]),A=0;A<1024;++A)P.data[A]=255;var I=b(x,P);I.wrap=x.REPEAT;var D=new v(x,E,k,C,L,I);return D.update(w),D};var i=h("gl-buffer"),m=h("gl-vao"),b=h("gl-texture2d"),p=new Uint8Array(4),r=new Float32Array(p.buffer),u=h("binary-search-bounds"),c=h("ndarray"),l=h("./lib/shaders"),f=l.createShader,s=l.createPickShader,o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(w,x){for(var E=0,k=0;k<3;++k){var C=w[k]-x[k];E+=C*C}return Math.sqrt(E)}function g(w){for(var x=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)x[0][E]=Math.max(w[0][E],x[0][E]),x[1][E]=Math.min(w[1][E],x[1][E]);return x}function y(w,x,E,k){this.arcLength=w,this.position=x,this.index=E,this.dataCoordinate=k}function v(w,x,E,k,C,L){this.gl=w,this.shader=x,this.pickShader=E,this.buffer=k,this.vao=C,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=L,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var _=v.prototype;_.isTransparent=function(){return this.hasAlpha},_.isOpaque=function(){return!this.hasAlpha},_.pickSlots=1,_.setPickBase=function(w){this.pickId=w},_.drawTransparent=_.draw=function(w){if(this.vertexCount){var x=this.gl,E=this.shader,k=this.vao;E.bind(),E.uniforms={model:w.model||o,view:w.view||o,projection:w.projection||o,clipBounds:g(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[x.drawingBufferWidth,x.drawingBufferHeight],pixelRatio:this.pixelRatio},k.bind(),k.draw(x.TRIANGLE_STRIP,this.vertexCount),k.unbind()}},_.drawPick=function(w){if(this.vertexCount){var x=this.gl,E=this.pickShader,k=this.vao;E.bind(),E.uniforms={model:w.model||o,view:w.view||o,projection:w.projection||o,pickId:this.pickId,clipBounds:g(this.clipBounds),screenShape:[x.drawingBufferWidth,x.drawingBufferHeight],pixelRatio:this.pixelRatio},k.bind(),k.draw(x.TRIANGLE_STRIP,this.vertexCount),k.unbind()}},_.update=function(w){var x,E;this.dirty=!0;var k=!!w.connectGaps;"dashScale"in w&&(this.dashScale=w.dashScale),this.hasAlpha=!1,"opacity"in w&&(this.opacity=+w.opacity,this.opacity<1&&(this.hasAlpha=!0));var C=[],L=[],P=[],A=0,I=0,D=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=w.position||w.positions;if(R){var S=w.color||w.colors||[0,0,0,1],N=w.lineWidth||1,B=!1;e:for(x=1;x<R.length;++x){var H,Y,Q,ne=R[x-1],ae=R[x];for(L.push(A),P.push(ne.slice()),E=0;E<3;++E){if(isNaN(ne[E])||isNaN(ae[E])||!isFinite(ne[E])||!isFinite(ae[E])){if(!k&&C.length>0){for(var te=0;te<24;++te)C.push(C[C.length-12]);I+=2,B=!0}continue e}D[0][E]=Math.min(D[0][E],ne[E],ae[E]),D[1][E]=Math.max(D[1][E],ne[E],ae[E])}Array.isArray(S[0])?(H=S.length>x-1?S[x-1]:S.length>0?S[S.length-1]:[0,0,0,1],Y=S.length>x?S[x]:S.length>0?S[S.length-1]:[0,0,0,1]):H=Y=S,3===H.length&&(H=[H[0],H[1],H[2],1]),3===Y.length&&(Y=[Y[0],Y[1],Y[2],1]),!this.hasAlpha&&H[3]<1&&(this.hasAlpha=!0),Q=Array.isArray(N)?N.length>x-1?N[x-1]:N.length>0?N[N.length-1]:[0,0,0,1]:N;var K=A;if(A+=d(ne,ae),B){for(E=0;E<2;++E)C.push(ne[0],ne[1],ne[2],ae[0],ae[1],ae[2],K,Q,H[0],H[1],H[2],H[3]);I+=2,B=!1}C.push(ne[0],ne[1],ne[2],ae[0],ae[1],ae[2],K,Q,H[0],H[1],H[2],H[3],ne[0],ne[1],ne[2],ae[0],ae[1],ae[2],K,-Q,H[0],H[1],H[2],H[3],ae[0],ae[1],ae[2],ne[0],ne[1],ne[2],A,-Q,Y[0],Y[1],Y[2],Y[3],ae[0],ae[1],ae[2],ne[0],ne[1],ne[2],A,Q,Y[0],Y[1],Y[2],Y[3]),I+=4}}if(this.buffer.update(C),L.push(A),P.push(R[R.length-1].slice()),this.bounds=D,this.vertexCount=I,this.points=P,this.arcLength=L,"dashes"in w){var q=w.dashes.slice();for(q.unshift(0),x=1;x<q.length;++x)q[x]=q[x-1]+q[x];var re=c(new Array(1024),[256,1,4]);for(x=0;x<256;++x){for(E=0;E<4;++E)re.set(x,0,E,0);1&u.le(q,q[q.length-1]*x/255)?re.set(x,0,0,0):re.set(x,0,0,255)}this.texture.setPixels(re)}},_.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},_.pick=function(w){if(!w||w.id!==this.pickId)return null;var R,S,N,x=(R=w.value[0],S=w.value[1],N=w.value[2],p[0]=0,p[1]=N,p[2]=S,p[3]=R,r[0]),E=u.le(this.arcLength,x);if(E<0)return null;if(E===this.arcLength.length-1)return new y(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var k=this.points[E],C=this.points[Math.min(E+1,this.points.length-1)],L=(x-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),P=1-L,A=[0,0,0],I=0;I<3;++I)A[I]=P*k[I]+L*C[I];var D=Math.min(L<.5?E:E+1,this.points.length-1);return new y(x,A,D,this.points[D])}},{"./lib/shaders":280,"binary-search-bounds":103,"gl-buffer":267,"gl-texture2d":356,"gl-vao":361,ndarray:483}],282:[function(h,G,X){arguments[4][265][0].apply(X,arguments)},{dup:265}],283:[function(h,G,X){G.exports=function(i,m){var b=m[0],p=m[1],r=m[2],u=m[3],c=m[4],l=m[5],f=m[6],s=m[7],o=m[8],d=m[9],g=m[10],y=m[11],v=m[12],_=m[13],w=m[14],x=m[15];return i[0]=l*(g*x-y*w)-d*(f*x-s*w)+_*(f*y-s*g),i[1]=-(p*(g*x-y*w)-d*(r*x-u*w)+_*(r*y-u*g)),i[2]=p*(f*x-s*w)-l*(r*x-u*w)+_*(r*s-u*f),i[3]=-(p*(f*y-s*g)-l*(r*y-u*g)+d*(r*s-u*f)),i[4]=-(c*(g*x-y*w)-o*(f*x-s*w)+v*(f*y-s*g)),i[5]=b*(g*x-y*w)-o*(r*x-u*w)+v*(r*y-u*g),i[6]=-(b*(f*x-s*w)-c*(r*x-u*w)+v*(r*s-u*f)),i[7]=b*(f*y-s*g)-c*(r*y-u*g)+o*(r*s-u*f),i[8]=c*(d*x-y*_)-o*(l*x-s*_)+v*(l*y-s*d),i[9]=-(b*(d*x-y*_)-o*(p*x-u*_)+v*(p*y-u*d)),i[10]=b*(l*x-s*_)-c*(p*x-u*_)+v*(p*s-u*l),i[11]=-(b*(l*y-s*d)-c*(p*y-u*d)+o*(p*s-u*l)),i[12]=-(c*(d*w-g*_)-o*(l*w-f*_)+v*(l*g-f*d)),i[13]=b*(d*w-g*_)-o*(p*w-r*_)+v*(p*g-r*d),i[14]=-(b*(l*w-f*_)-c*(p*w-r*_)+v*(p*f-r*l)),i[15]=b*(l*g-f*d)-c*(p*g-r*d)+o*(p*f-r*l),i}},{}],284:[function(h,G,X){G.exports=function(i){var m=new Float32Array(16);return m[0]=i[0],m[1]=i[1],m[2]=i[2],m[3]=i[3],m[4]=i[4],m[5]=i[5],m[6]=i[6],m[7]=i[7],m[8]=i[8],m[9]=i[9],m[10]=i[10],m[11]=i[11],m[12]=i[12],m[13]=i[13],m[14]=i[14],m[15]=i[15],m}},{}],285:[function(h,G,X){G.exports=function(i,m){return i[0]=m[0],i[1]=m[1],i[2]=m[2],i[3]=m[3],i[4]=m[4],i[5]=m[5],i[6]=m[6],i[7]=m[7],i[8]=m[8],i[9]=m[9],i[10]=m[10],i[11]=m[11],i[12]=m[12],i[13]=m[13],i[14]=m[14],i[15]=m[15],i}},{}],286:[function(h,G,X){G.exports=function(){var i=new Float32Array(16);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{}],287:[function(h,G,X){G.exports=function(i){var m=i[0],b=i[1],p=i[2],r=i[3],u=i[4],c=i[5],l=i[6],f=i[7],s=i[8],o=i[9],d=i[10],g=i[11],y=i[12],v=i[13],_=i[14],w=i[15];return(m*c-b*u)*(d*w-g*_)-(m*l-p*u)*(o*w-g*v)+(m*f-r*u)*(o*_-d*v)+(b*l-p*c)*(s*w-g*y)-(b*f-r*c)*(s*_-d*y)+(p*f-r*l)*(s*v-o*y)}},{}],288:[function(h,G,X){G.exports=function(i,m){var b=m[0],p=m[1],r=m[2],u=m[3],c=b+b,l=p+p,f=r+r,s=b*c,o=p*c,d=p*l,g=r*c,y=r*l,v=r*f,_=u*c,w=u*l,x=u*f;return i[0]=1-d-v,i[1]=o+x,i[2]=g-w,i[3]=0,i[4]=o-x,i[5]=1-s-v,i[6]=y+_,i[7]=0,i[8]=g+w,i[9]=y-_,i[10]=1-s-d,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{}],289:[function(h,G,X){G.exports=function(i,m,b){var p,r,u,c=b[0],l=b[1],f=b[2],s=Math.sqrt(c*c+l*l+f*f);return Math.abs(s)<1e-6?null:(c*=s=1/s,l*=s,f*=s,p=Math.sin(m),r=Math.cos(m),i[0]=c*c*(u=1-r)+r,i[1]=l*c*u+f*p,i[2]=f*c*u-l*p,i[3]=0,i[4]=c*l*u-f*p,i[5]=l*l*u+r,i[6]=f*l*u+c*p,i[7]=0,i[8]=c*f*u+l*p,i[9]=l*f*u-c*p,i[10]=f*f*u+r,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i)}},{}],290:[function(h,G,X){G.exports=function(i,m,b){var p=m[0],r=m[1],u=m[2],c=m[3],l=p+p,f=r+r,s=u+u,o=p*l,d=p*f,g=p*s,y=r*f,v=r*s,_=u*s,w=c*l,x=c*f,E=c*s;return i[0]=1-(y+_),i[1]=d+E,i[2]=g-x,i[3]=0,i[4]=d-E,i[5]=1-(o+_),i[6]=v+w,i[7]=0,i[8]=g+x,i[9]=v-w,i[10]=1-(o+y),i[11]=0,i[12]=b[0],i[13]=b[1],i[14]=b[2],i[15]=1,i}},{}],291:[function(h,G,X){G.exports=function(i,m){return i[0]=m[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=m[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=m[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{}],292:[function(h,G,X){G.exports=function(i,m){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=m[0],i[13]=m[1],i[14]=m[2],i[15]=1,i}},{}],293:[function(h,G,X){G.exports=function(i,m){var b=Math.sin(m),p=Math.cos(m);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=p,i[6]=b,i[7]=0,i[8]=0,i[9]=-b,i[10]=p,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{}],294:[function(h,G,X){G.exports=function(i,m){var b=Math.sin(m),p=Math.cos(m);return i[0]=p,i[1]=0,i[2]=-b,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=b,i[9]=0,i[10]=p,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{}],295:[function(h,G,X){G.exports=function(i,m){var b=Math.sin(m),p=Math.cos(m);return i[0]=p,i[1]=b,i[2]=0,i[3]=0,i[4]=-b,i[5]=p,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{}],296:[function(h,G,X){G.exports=function(i,m,b,p,r,u,c){var l=1/(b-m),f=1/(r-p),s=1/(u-c);return i[0]=2*u*l,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*u*f,i[6]=0,i[7]=0,i[8]=(b+m)*l,i[9]=(r+p)*f,i[10]=(c+u)*s,i[11]=-1,i[12]=0,i[13]=0,i[14]=c*u*2*s,i[15]=0,i}},{}],297:[function(h,G,X){G.exports=function(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{}],298:[function(h,G,X){G.exports={create:h("./create"),clone:h("./clone"),copy:h("./copy"),identity:h("./identity"),transpose:h("./transpose"),invert:h("./invert"),adjoint:h("./adjoint"),determinant:h("./determinant"),multiply:h("./multiply"),translate:h("./translate"),scale:h("./scale"),rotate:h("./rotate"),rotateX:h("./rotateX"),rotateY:h("./rotateY"),rotateZ:h("./rotateZ"),fromRotation:h("./fromRotation"),fromRotationTranslation:h("./fromRotationTranslation"),fromScaling:h("./fromScaling"),fromTranslation:h("./fromTranslation"),fromXRotation:h("./fromXRotation"),fromYRotation:h("./fromYRotation"),fromZRotation:h("./fromZRotation"),fromQuat:h("./fromQuat"),frustum:h("./frustum"),perspective:h("./perspective"),perspectiveFromFieldOfView:h("./perspectiveFromFieldOfView"),ortho:h("./ortho"),lookAt:h("./lookAt"),str:h("./str")}},{"./adjoint":283,"./clone":284,"./copy":285,"./create":286,"./determinant":287,"./fromQuat":288,"./fromRotation":289,"./fromRotationTranslation":290,"./fromScaling":291,"./fromTranslation":292,"./fromXRotation":293,"./fromYRotation":294,"./fromZRotation":295,"./frustum":296,"./identity":297,"./invert":299,"./lookAt":300,"./multiply":301,"./ortho":302,"./perspective":303,"./perspectiveFromFieldOfView":304,"./rotate":305,"./rotateX":306,"./rotateY":307,"./rotateZ":308,"./scale":309,"./str":310,"./translate":311,"./transpose":312}],299:[function(h,G,X){G.exports=function(i,m){var b=m[0],p=m[1],r=m[2],u=m[3],c=m[4],l=m[5],f=m[6],s=m[7],o=m[8],d=m[9],g=m[10],y=m[11],v=m[12],_=m[13],w=m[14],x=m[15],E=b*l-p*c,k=b*f-r*c,C=b*s-u*c,L=p*f-r*l,P=p*s-u*l,A=r*s-u*f,I=o*_-d*v,D=o*w-g*v,R=o*x-y*v,S=d*w-g*_,N=d*x-y*_,B=g*x-y*w,H=E*B-k*N+C*S+L*R-P*D+A*I;return H?(i[0]=(l*B-f*N+s*S)*(H=1/H),i[1]=(r*N-p*B-u*S)*H,i[2]=(_*A-w*P+x*L)*H,i[3]=(g*P-d*A-y*L)*H,i[4]=(f*R-c*B-s*D)*H,i[5]=(b*B-r*R+u*D)*H,i[6]=(w*C-v*A-x*k)*H,i[7]=(o*A-g*C+y*k)*H,i[8]=(c*N-l*R+s*I)*H,i[9]=(p*R-b*N-u*I)*H,i[10]=(v*P-_*C+x*E)*H,i[11]=(d*C-o*P-y*E)*H,i[12]=(l*D-c*S-f*I)*H,i[13]=(b*S-p*D+r*I)*H,i[14]=(_*k-v*L-w*E)*H,i[15]=(o*L-d*k+g*E)*H,i):null}},{}],300:[function(h,G,X){var i=h("./identity");G.exports=function(m,b,p,r){var u,c,l,f,s,o,d,g,y,v,_=b[0],w=b[1],x=b[2],E=r[0],k=r[1],C=r[2],L=p[0],P=p[1],A=p[2];return Math.abs(_-L)<1e-6&&Math.abs(w-P)<1e-6&&Math.abs(x-A)<1e-6?i(m):(d=_-L,g=w-P,y=x-A,u=k*(y*=v=1/Math.sqrt(d*d+g*g+y*y))-C*(g*=v),c=C*(d*=v)-E*y,l=E*g-k*d,(v=Math.sqrt(u*u+c*c+l*l))?(u*=v=1/v,c*=v,l*=v):(u=0,c=0,l=0),f=g*l-y*c,s=y*u-d*l,o=d*c-g*u,(v=Math.sqrt(f*f+s*s+o*o))?(f*=v=1/v,s*=v,o*=v):(f=0,s=0,o=0),m[0]=u,m[1]=f,m[2]=d,m[3]=0,m[4]=c,m[5]=s,m[6]=g,m[7]=0,m[8]=l,m[9]=o,m[10]=y,m[11]=0,m[12]=-(u*_+c*w+l*x),m[13]=-(f*_+s*w+o*x),m[14]=-(d*_+g*w+y*x),m[15]=1,m)}},{"./identity":297}],301:[function(h,G,X){G.exports=function(i,m,b){var p=m[0],r=m[1],u=m[2],c=m[3],l=m[4],f=m[5],s=m[6],o=m[7],d=m[8],g=m[9],y=m[10],v=m[11],_=m[12],w=m[13],x=m[14],E=m[15],k=b[0],C=b[1],L=b[2],P=b[3];return i[0]=k*p+C*l+L*d+P*_,i[1]=k*r+C*f+L*g+P*w,i[2]=k*u+C*s+L*y+P*x,i[3]=k*c+C*o+L*v+P*E,i[4]=(k=b[4])*p+(C=b[5])*l+(L=b[6])*d+(P=b[7])*_,i[5]=k*r+C*f+L*g+P*w,i[6]=k*u+C*s+L*y+P*x,i[7]=k*c+C*o+L*v+P*E,i[8]=(k=b[8])*p+(C=b[9])*l+(L=b[10])*d+(P=b[11])*_,i[9]=k*r+C*f+L*g+P*w,i[10]=k*u+C*s+L*y+P*x,i[11]=k*c+C*o+L*v+P*E,i[12]=(k=b[12])*p+(C=b[13])*l+(L=b[14])*d+(P=b[15])*_,i[13]=k*r+C*f+L*g+P*w,i[14]=k*u+C*s+L*y+P*x,i[15]=k*c+C*o+L*v+P*E,i}},{}],302:[function(h,G,X){G.exports=function(i,m,b,p,r,u,c){var l=1/(m-b),f=1/(p-r),s=1/(u-c);return i[0]=-2*l,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*f,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*s,i[11]=0,i[12]=(m+b)*l,i[13]=(r+p)*f,i[14]=(c+u)*s,i[15]=1,i}},{}],303:[function(h,G,X){G.exports=function(i,m,b,p,r){var u=1/Math.tan(m/2),c=1/(p-r);return i[0]=u/b,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=u,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(r+p)*c,i[11]=-1,i[12]=0,i[13]=0,i[14]=2*r*p*c,i[15]=0,i}},{}],304:[function(h,G,X){G.exports=function(i,m,b,p){var r=Math.tan(m.upDegrees*Math.PI/180),u=Math.tan(m.downDegrees*Math.PI/180),c=Math.tan(m.leftDegrees*Math.PI/180),l=Math.tan(m.rightDegrees*Math.PI/180),f=2/(c+l),s=2/(r+u);return i[0]=f,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=s,i[6]=0,i[7]=0,i[8]=-(c-l)*f*.5,i[9]=(r-u)*s*.5,i[10]=p/(b-p),i[11]=-1,i[12]=0,i[13]=0,i[14]=p*b/(b-p),i[15]=0,i}},{}],305:[function(h,G,X){G.exports=function(i,m,b,p){var r,u,c,l,f,s,o,d,g,y,v,_,w,x,E,k,C,L,P,A,I,D,R,S,N=p[0],B=p[1],H=p[2],Y=Math.sqrt(N*N+B*B+H*H);return Math.abs(Y)<1e-6?null:(N*=Y=1/Y,B*=Y,H*=Y,r=Math.sin(b),u=Math.cos(b),f=m[1],s=m[2],o=m[3],g=m[5],y=m[6],v=m[7],w=m[9],x=m[10],E=m[11],P=N*B*(c=1-u)-H*r,A=B*B*c+u,I=H*B*c+N*r,D=N*H*c+B*r,R=B*H*c-N*r,S=H*H*c+u,i[0]=(l=m[0])*(k=N*N*c+u)+(d=m[4])*(C=B*N*c+H*r)+(_=m[8])*(L=H*N*c-B*r),i[1]=f*k+g*C+w*L,i[2]=s*k+y*C+x*L,i[3]=o*k+v*C+E*L,i[4]=l*P+d*A+_*I,i[5]=f*P+g*A+w*I,i[6]=s*P+y*A+x*I,i[7]=o*P+v*A+E*I,i[8]=l*D+d*R+_*S,i[9]=f*D+g*R+w*S,i[10]=s*D+y*R+x*S,i[11]=o*D+v*R+E*S,m!==i&&(i[12]=m[12],i[13]=m[13],i[14]=m[14],i[15]=m[15]),i)}},{}],306:[function(h,G,X){G.exports=function(i,m,b){var p=Math.sin(b),r=Math.cos(b),u=m[4],c=m[5],l=m[6],f=m[7],s=m[8],o=m[9],d=m[10],g=m[11];return m!==i&&(i[0]=m[0],i[1]=m[1],i[2]=m[2],i[3]=m[3],i[12]=m[12],i[13]=m[13],i[14]=m[14],i[15]=m[15]),i[4]=u*r+s*p,i[5]=c*r+o*p,i[6]=l*r+d*p,i[7]=f*r+g*p,i[8]=s*r-u*p,i[9]=o*r-c*p,i[10]=d*r-l*p,i[11]=g*r-f*p,i}},{}],307:[function(h,G,X){G.exports=function(i,m,b){var p=Math.sin(b),r=Math.cos(b),u=m[0],c=m[1],l=m[2],f=m[3],s=m[8],o=m[9],d=m[10],g=m[11];return m!==i&&(i[4]=m[4],i[5]=m[5],i[6]=m[6],i[7]=m[7],i[12]=m[12],i[13]=m[13],i[14]=m[14],i[15]=m[15]),i[0]=u*r-s*p,i[1]=c*r-o*p,i[2]=l*r-d*p,i[3]=f*r-g*p,i[8]=u*p+s*r,i[9]=c*p+o*r,i[10]=l*p+d*r,i[11]=f*p+g*r,i}},{}],308:[function(h,G,X){G.exports=function(i,m,b){var p=Math.sin(b),r=Math.cos(b),u=m[0],c=m[1],l=m[2],f=m[3],s=m[4],o=m[5],d=m[6],g=m[7];return m!==i&&(i[8]=m[8],i[9]=m[9],i[10]=m[10],i[11]=m[11],i[12]=m[12],i[13]=m[13],i[14]=m[14],i[15]=m[15]),i[0]=u*r+s*p,i[1]=c*r+o*p,i[2]=l*r+d*p,i[3]=f*r+g*p,i[4]=s*r-u*p,i[5]=o*r-c*p,i[6]=d*r-l*p,i[7]=g*r-f*p,i}},{}],309:[function(h,G,X){G.exports=function(i,m,b){var p=b[0],r=b[1],u=b[2];return i[0]=m[0]*p,i[1]=m[1]*p,i[2]=m[2]*p,i[3]=m[3]*p,i[4]=m[4]*r,i[5]=m[5]*r,i[6]=m[6]*r,i[7]=m[7]*r,i[8]=m[8]*u,i[9]=m[9]*u,i[10]=m[10]*u,i[11]=m[11]*u,i[12]=m[12],i[13]=m[13],i[14]=m[14],i[15]=m[15],i}},{}],310:[function(h,G,X){G.exports=function(i){return"mat4("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+", "+i[6]+", "+i[7]+", "+i[8]+", "+i[9]+", "+i[10]+", "+i[11]+", "+i[12]+", "+i[13]+", "+i[14]+", "+i[15]+")"}},{}],311:[function(h,G,X){G.exports=function(i,m,b){var p,r,u,c,l,f,s,o,d,g,y,v,_=b[0],w=b[1],x=b[2];return m===i?(i[12]=m[0]*_+m[4]*w+m[8]*x+m[12],i[13]=m[1]*_+m[5]*w+m[9]*x+m[13],i[14]=m[2]*_+m[6]*w+m[10]*x+m[14],i[15]=m[3]*_+m[7]*w+m[11]*x+m[15]):(r=m[1],u=m[2],c=m[3],l=m[4],f=m[5],s=m[6],o=m[7],d=m[8],g=m[9],y=m[10],v=m[11],i[0]=p=m[0],i[1]=r,i[2]=u,i[3]=c,i[4]=l,i[5]=f,i[6]=s,i[7]=o,i[8]=d,i[9]=g,i[10]=y,i[11]=v,i[12]=p*_+l*w+d*x+m[12],i[13]=r*_+f*w+g*x+m[13],i[14]=u*_+s*w+y*x+m[14],i[15]=c*_+o*w+v*x+m[15]),i}},{}],312:[function(h,G,X){G.exports=function(i,m){if(i===m){var b=m[1],p=m[2],r=m[3],u=m[6],c=m[7],l=m[11];i[1]=m[4],i[2]=m[8],i[3]=m[12],i[4]=b,i[6]=m[9],i[7]=m[13],i[8]=p,i[9]=u,i[11]=m[14],i[12]=r,i[13]=c,i[14]=l}else i[0]=m[0],i[1]=m[4],i[2]=m[8],i[3]=m[12],i[4]=m[1],i[5]=m[5],i[6]=m[9],i[7]=m[13],i[8]=m[2],i[9]=m[6],i[10]=m[10],i[11]=m[14],i[12]=m[3],i[13]=m[7],i[14]=m[11],i[15]=m[15];return i}},{}],313:[function(h,G,X){"use strict";var i=h("barycentric"),m=h("polytope-closest-point/lib/closest_point_2d.js");function b(u,c){for(var l=[0,0,0,0],f=0;f<4;++f)for(var s=0;s<4;++s)l[s]+=u[4*f+s]*c[f];return l}function p(u,c,l,f,s){for(var o=b(f,b(l,b(c,[u[0],u[1],u[2],1]))),d=0;d<3;++d)o[d]/=o[3];return[.5*s[0]*(1+o[0]),.5*s[1]*(1-o[1])]}function r(u,c){for(var l=[0,0,0],f=0;f<u.length;++f)for(var s=u[f],o=c[f],d=0;d<3;++d)l[d]+=o*s[d];return l}G.exports=function(u,c,l,f,s,o){if(1===u.length)return[0,u[0].slice()];for(var d=new Array(u.length),g=0;g<u.length;++g)d[g]=p(u[g],l,f,s,o);var y=0,v=1/0;for(g=0;g<d.length;++g){for(var _=0,w=0;w<2;++w)_+=Math.pow(d[g][w]-c[w],2);_<v&&(v=_,y=g)}var x=function(k,C){if(2===k.length){for(var L=0,P=0,A=0;A<2;++A)L+=Math.pow(C[A]-k[0][A],2),P+=Math.pow(C[A]-k[1][A],2);return(L=Math.sqrt(L))+(P=Math.sqrt(P))<1e-6?[1,0]:[P/(L+P),L/(P+L)]}if(3===k.length){var I=[0,0];return m(k[0],k[1],k[2],C,I),i(k,I)}return[]}(d,c),E=0;for(g=0;g<3;++g){if(x[g]<-.001||x[g]>1.0001)return null;E+=x[g]}return Math.abs(E-1)>.001?null:[y,r(u,x),x]}},{barycentric:85,"polytope-closest-point/lib/closest_point_2d.js":512}],314:[function(h,G,X){var i=h("glslify"),m=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),b=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),p=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),r=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),u=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),c=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),f=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),d=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);X.meshShader={vertex:m,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},X.wireShader={vertex:p,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},X.pointShader={vertex:u,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},X.pickShader={vertex:l,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},X.pointPickShader={vertex:s,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},X.contourShader={vertex:o,fragment:d,attributes:[{name:"position",type:"vec3"}]}},{glslify:442}],315:[function(h,G,X){"use strict";var i=h("gl-shader"),m=h("gl-buffer"),b=h("gl-vao"),p=h("gl-texture2d"),r=h("normals"),u=h("gl-mat4/multiply"),c=h("gl-mat4/invert"),l=h("ndarray"),f=h("colormap"),s=h("simplicial-complex-contour"),o=h("typedarray-pool"),d=h("./lib/shaders"),g=h("./lib/closest-point"),y=d.meshShader,v=d.wireShader,_=d.pointShader,w=d.pickShader,x=d.pointPickShader,E=d.contourShader,k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function C(B,H,Y,Q,ne,ae,te,K,q,re,V,W,Z,oe,ie,ue,fe,he,de,be,pe,Te,ye,ke,ze,je,Ie){this.gl=B,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=H,this.dirty=!0,this.triShader=Y,this.lineShader=Q,this.pointShader=ne,this.pickShader=ae,this.pointPickShader=te,this.contourShader=K,this.trianglePositions=q,this.triangleColors=V,this.triangleNormals=Z,this.triangleUVs=W,this.triangleIds=re,this.triangleVAO=oe,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ie,this.edgeColors=fe,this.edgeUVs=he,this.edgeIds=ue,this.edgeVAO=de,this.edgeCount=0,this.pointPositions=be,this.pointColors=Te,this.pointUVs=ye,this.pointSizes=ke,this.pointIds=pe,this.pointVAO=ze,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=je,this.contourVAO=Ie,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=k,this._view=k,this._projection=k,this._resolution=[1,1]}var L=C.prototype;function P(B,H){if(!H||!H.length)return 1;for(var Y=0;Y<H.length;++Y){if(H.length<2)return 1;if(H[Y][0]===B)return H[Y][1];if(H[Y][0]>B&&Y>0){var Q=(H[Y][0]-B)/(H[Y][0]-H[Y-1][0]);return H[Y][1]*(1-Q)+Q*H[Y-1][1]}}return 1}function A(B){var H=i(B,y.vertex,y.fragment);return H.attributes.position.location=0,H.attributes.color.location=2,H.attributes.uv.location=3,H.attributes.normal.location=4,H}function I(B){var H=i(B,v.vertex,v.fragment);return H.attributes.position.location=0,H.attributes.color.location=2,H.attributes.uv.location=3,H}function D(B){var H=i(B,_.vertex,_.fragment);return H.attributes.position.location=0,H.attributes.color.location=2,H.attributes.uv.location=3,H.attributes.pointSize.location=4,H}function R(B){var H=i(B,w.vertex,w.fragment);return H.attributes.position.location=0,H.attributes.id.location=1,H}function S(B){var H=i(B,x.vertex,x.fragment);return H.attributes.position.location=0,H.attributes.id.location=1,H.attributes.pointSize.location=4,H}function N(B){var H=i(B,E.vertex,E.fragment);return H.attributes.position.location=0,H}L.isOpaque=function(){return!this.hasAlpha},L.isTransparent=function(){return this.hasAlpha},L.pickSlots=1,L.setPickBase=function(B){this.pickId=B},L.highlight=function(B){if(B&&this.contourEnable){for(var H=s(this.cells,this.intensity,B.intensity),Y=H.cells,Q=H.vertexIds,ne=H.vertexWeights,ae=Y.length,te=o.mallocFloat32(6*ae),K=0,q=0;q<ae;++q)for(var re=Y[q],V=0;V<2;++V){var W=re[0];2===re.length&&(W=re[V]);for(var ie=ne[W],ue=1-ie,fe=this.positions[Q[W][0]],he=this.positions[Q[W][1]],de=0;de<3;++de)te[K++]=ie*fe[de]+ue*he[de]}this.contourCount=K/3|0,this.contourPositions.update(te.subarray(0,K)),o.free(te)}else this.contourCount=0},L.update=function(B){B=B||{};var H=this.gl;this.dirty=!0,"contourEnable"in B&&(this.contourEnable=B.contourEnable),"contourColor"in B&&(this.contourColor=B.contourColor),"lineWidth"in B&&(this.lineWidth=B.lineWidth),"lightPosition"in B&&(this.lightPosition=B.lightPosition),this.hasAlpha=!1,"opacity"in B&&(this.opacity=B.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in B&&(this.opacityscale=B.opacityscale,this.hasAlpha=!0),"ambient"in B&&(this.ambientLight=B.ambient),"diffuse"in B&&(this.diffuseLight=B.diffuse),"specular"in B&&(this.specularLight=B.specular),"roughness"in B&&(this.roughness=B.roughness),"fresnel"in B&&(this.fresnel=B.fresnel),B.texture?(this.texture.dispose(),this.texture=p(H,B.texture)):B.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=H.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=H.LINEAR,this.texture.setPixels(function(ht,st){for(var Bt=f({colormap:ht,nshades:256,format:"rgba"}),gn=new Uint8Array(1024),hn=0;hn<256;++hn){for(var We=Bt[hn],it=0;it<3;++it)gn[4*hn+it]=We[it];gn[4*hn+3]=st?255*P(hn/255,st):255*We[3]}return l(gn,[256,256,4],[4,0,1])}(B.colormap,this.opacityscale)),this.texture.generateMipmap());var Y=B.cells,Q=B.positions;if(Q&&Y){var ne=[],ae=[],te=[],K=[],q=[],re=[],V=[],W=[],Z=[],oe=[],ie=[],ue=[],fe=[],he=[];this.cells=Y,this.positions=Q;var de=B.vertexNormals,be=B.cellNormals,pe=void 0===B.vertexNormalsEpsilon?1e-6:B.vertexNormalsEpsilon;B.useFacetNormals&&!be&&(be=r.faceNormals(Y,Q,void 0===B.faceNormalsEpsilon?1e-6:B.faceNormalsEpsilon)),be||de||(de=r.vertexNormals(Y,Q,pe));var ye=B.vertexColors,ke=B.cellColors,ze=B.meshColor||[1,1,1,1],je=B.vertexUVs,Ie=B.vertexIntensity,Ce=B.cellUVs,_e=B.cellIntensity,we=1/0,Se=-1/0;if(!je&&!Ce)if(Ie)if(B.vertexIntensityBounds)we=+B.vertexIntensityBounds[0],Se=+B.vertexIntensityBounds[1];else for(var Oe=0;Oe<Ie.length;++Oe){var Be=Ie[Oe];we=Math.min(we,Be),Se=Math.max(Se,Be)}else if(_e)if(B.cellIntensityBounds)we=+B.cellIntensityBounds[0],Se=+B.cellIntensityBounds[1];else for(Oe=0;Oe<_e.length;++Oe)Be=_e[Oe],we=Math.min(we,Be),Se=Math.max(Se,Be);else for(Oe=0;Oe<Q.length;++Oe)Be=Q[Oe][2],we=Math.min(we,Be),Se=Math.max(Se,Be);this.intensity=Ie||_e||function(ht){for(var st=ht.length,Bt=new Array(st),gn=0;gn<st;++gn)Bt[gn]=ht[gn][2];return Bt}(Q),this.pickVertex=!(_e||ke);var He=B.pointSizes,Xe=B.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Oe=0;Oe<Q.length;++Oe)for(var nt=Q[Oe],et=0;et<3;++et)!isNaN(nt[et])&&isFinite(nt[et])&&(this.bounds[0][et]=Math.min(this.bounds[0][et],nt[et]),this.bounds[1][et]=Math.max(this.bounds[1][et],nt[et]));var qe=0,Ye=0,ot=0;e:for(Oe=0;Oe<Y.length;++Oe){var at=Y[Oe];switch(at.length){case 1:for(nt=Q[_t=at[0]],et=0;et<3;++et)if(isNaN(nt[et])||!isFinite(nt[et]))continue e;oe.push(nt[0],nt[1],nt[2]),xt=ye?ye[_t]:ke?ke[Oe]:ze,this.opacityscale&&Ie?ae.push(xt[0],xt[1],xt[2],this.opacity*P((Ie[_t]-we)/(Se-we),this.opacityscale)):3===xt.length?ie.push(xt[0],xt[1],xt[2],this.opacity):(ie.push(xt[0],xt[1],xt[2],xt[3]*this.opacity),xt[3]<1&&(this.hasAlpha=!0)),ue.push((Ht=je?je[_t]:Ie?[(Ie[_t]-we)/(Se-we),0]:Ce?Ce[Oe]:_e?[(_e[Oe]-we)/(Se-we),0]:[(nt[2]-we)/(Se-we),0])[0],Ht[1]),fe.push(He?He[_t]:Xe),he.push(Oe),ot+=1;break;case 2:for(et=0;et<2;++et){nt=Q[_t=at[et]];for(var ct=0;ct<3;++ct)if(isNaN(nt[ct])||!isFinite(nt[ct]))continue e}for(et=0;et<2;++et)nt=Q[_t=at[et]],re.push(nt[0],nt[1],nt[2]),xt=ye?ye[_t]:ke?ke[Oe]:ze,this.opacityscale&&Ie?ae.push(xt[0],xt[1],xt[2],this.opacity*P((Ie[_t]-we)/(Se-we),this.opacityscale)):3===xt.length?V.push(xt[0],xt[1],xt[2],this.opacity):(V.push(xt[0],xt[1],xt[2],xt[3]*this.opacity),xt[3]<1&&(this.hasAlpha=!0)),W.push((Ht=je?je[_t]:Ie?[(Ie[_t]-we)/(Se-we),0]:Ce?Ce[Oe]:_e?[(_e[Oe]-we)/(Se-we),0]:[(nt[2]-we)/(Se-we),0])[0],Ht[1]),Z.push(Oe);Ye+=1;break;case 3:for(et=0;et<3;++et)for(nt=Q[_t=at[et]],ct=0;ct<3;++ct)if(isNaN(nt[ct])||!isFinite(nt[ct]))continue e;for(et=0;et<3;++et){var _t,xt,Ht,At;nt=Q[_t=at[2-et]],ne.push(nt[0],nt[1],nt[2]),(xt=ye?ye[_t]:ke?ke[Oe]:ze)?this.opacityscale&&Ie?ae.push(xt[0],xt[1],xt[2],this.opacity*P((Ie[_t]-we)/(Se-we),this.opacityscale)):3===xt.length?ae.push(xt[0],xt[1],xt[2],this.opacity):(ae.push(xt[0],xt[1],xt[2],xt[3]*this.opacity),xt[3]<1&&(this.hasAlpha=!0)):ae.push(.5,.5,.5,1),K.push((Ht=je?je[_t]:Ie?[(Ie[_t]-we)/(Se-we),0]:Ce?Ce[Oe]:_e?[(_e[Oe]-we)/(Se-we),0]:[(nt[2]-we)/(Se-we),0])[0],Ht[1]),te.push((At=de?de[_t]:be[Oe])[0],At[1],At[2]),q.push(Oe)}qe+=1}}this.pointCount=ot,this.edgeCount=Ye,this.triangleCount=qe,this.pointPositions.update(oe),this.pointColors.update(ie),this.pointUVs.update(ue),this.pointSizes.update(fe),this.pointIds.update(new Uint32Array(he)),this.edgePositions.update(re),this.edgeColors.update(V),this.edgeUVs.update(W),this.edgeIds.update(new Uint32Array(Z)),this.trianglePositions.update(ne),this.triangleColors.update(ae),this.triangleUVs.update(K),this.triangleNormals.update(te),this.triangleIds.update(new Uint32Array(q))}},L.drawTransparent=L.draw=function(B){for(var H=this.gl,Y=(B=B||{}).model||k,Q=B.view||k,ne=B.projection||k,ae=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],te=0;te<3;++te)ae[0][te]=Math.max(ae[0][te],this.clipBounds[0][te]),ae[1][te]=Math.min(ae[1][te],this.clipBounds[1][te]);var K={model:Y,view:Q,projection:ne,inverseModel:k.slice(),clipBounds:ae,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};K.inverseModel=c(K.inverseModel,K.model),H.disable(H.CULL_FACE),this.texture.bind(0);var q=new Array(16);for(u(q,K.view,K.model),u(q,K.projection,q),c(q,q),te=0;te<3;++te)K.eyePosition[te]=q[12+te]/q[15];var re,V=q[15];for(te=0;te<3;++te)V+=this.lightPosition[te]*q[4*te+3];for(te=0;te<3;++te){for(var W=q[12+te],Z=0;Z<3;++Z)W+=q[4*Z+te]*this.lightPosition[Z];K.lightPosition[te]=W/V}this.triangleCount>0&&((re=this.triShader).bind(),re.uniforms=K,this.triangleVAO.bind(),H.drawArrays(H.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((re=this.lineShader).bind(),re.uniforms=K,this.edgeVAO.bind(),H.lineWidth(this.lineWidth*this.pixelRatio),H.drawArrays(H.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((re=this.pointShader).bind(),re.uniforms=K,this.pointVAO.bind(),H.drawArrays(H.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((re=this.contourShader).bind(),re.uniforms=K,this.contourVAO.bind(),H.drawArrays(H.LINES,0,this.contourCount),this.contourVAO.unbind())},L.drawPick=function(B){for(var H=this.gl,Y=(B=B||{}).model||k,Q=B.view||k,ne=B.projection||k,ae=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],te=0;te<3;++te)ae[0][te]=Math.max(ae[0][te],this.clipBounds[0][te]),ae[1][te]=Math.min(ae[1][te],this.clipBounds[1][te]);this._model=[].slice.call(Y),this._view=[].slice.call(Q),this._projection=[].slice.call(ne),this._resolution=[H.drawingBufferWidth,H.drawingBufferHeight];var K,q={model:Y,view:Q,projection:ne,clipBounds:ae,pickId:this.pickId/255};(K=this.pickShader).bind(),K.uniforms=q,this.triangleCount>0&&(this.triangleVAO.bind(),H.drawArrays(H.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),H.lineWidth(this.lineWidth*this.pixelRatio),H.drawArrays(H.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((K=this.pointPickShader).bind(),K.uniforms=q,this.pointVAO.bind(),H.drawArrays(H.POINTS,0,this.pointCount),this.pointVAO.unbind())},L.pick=function(B){if(!B||B.id!==this.pickId)return null;for(var H=B.value[0]+256*B.value[1]+65536*B.value[2],Y=this.cells[H],Q=this.positions,ne=new Array(Y.length),ae=0;ae<Y.length;++ae)ne[ae]=Q[Y[ae]];var te=B.coord[0],K=B.coord[1];if(!this.pickVertex){var q=this.positions[Y[0]],re=this.positions[Y[1]],V=this.positions[Y[2]];return{_cellCenter:!0,position:[te,K],index:H,cell:Y,cellId:H,intensity:this.intensity[H],dataCoordinate:[(q[0]+re[0]+V[0])/3,(q[1]+re[1]+V[1])/3,(q[2]+re[2]+V[2])/3]}}var Z=g(ne,[te*this.pixelRatio,this._resolution[1]-K*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!Z)return null;var oe=Z[2],ie=0;for(ae=0;ae<Y.length;++ae)ie+=oe[ae]*this.intensity[Y[ae]];return{position:Z[1],index:Y[Z[0]],cell:Y,cellId:H,intensity:ie,dataCoordinate:this.positions[Y[Z[0]]]}},L.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},G.exports=function(B,H){if(1===arguments.length&&(B=(H=B).gl),!(B.getExtension("OES_standard_derivatives")||B.getExtension("MOZ_OES_standard_derivatives")||B.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var Q=A(B),ne=I(B),ae=D(B),te=R(B),K=S(B),q=N(B),re=p(B,l(new Uint8Array([255,255,255,255]),[1,1,4]));re.generateMipmap(),re.minFilter=B.LINEAR_MIPMAP_LINEAR,re.magFilter=B.LINEAR;var V=m(B),W=m(B),Z=m(B),oe=m(B),ie=m(B),ue=b(B,[{buffer:V,type:B.FLOAT,size:3},{buffer:ie,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:W,type:B.FLOAT,size:4},{buffer:Z,type:B.FLOAT,size:2},{buffer:oe,type:B.FLOAT,size:3}]),fe=m(B),he=m(B),de=m(B),be=m(B),pe=b(B,[{buffer:fe,type:B.FLOAT,size:3},{buffer:be,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:he,type:B.FLOAT,size:4},{buffer:de,type:B.FLOAT,size:2}]),Te=m(B),ye=m(B),ke=m(B),ze=m(B),je=m(B),Ie=b(B,[{buffer:Te,type:B.FLOAT,size:3},{buffer:je,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ye,type:B.FLOAT,size:4},{buffer:ke,type:B.FLOAT,size:2},{buffer:ze,type:B.FLOAT,size:1}]),Ce=m(B),we=new C(B,re,Q,ne,ae,te,K,q,V,ie,W,Z,oe,ue,fe,be,he,de,pe,Te,je,ye,ke,ze,Ie,Ce,b(B,[{buffer:Ce,type:B.FLOAT,size:3}]));return we.update(H),we}},{"./lib/closest-point":313,"./lib/shaders":314,colormap:137,"gl-buffer":267,"gl-mat4/invert":299,"gl-mat4/multiply":301,"gl-shader":339,"gl-texture2d":356,"gl-vao":361,ndarray:483,normals:486,"simplicial-complex-contour":557,"typedarray-pool":617}],316:[function(h,G,X){"use strict";G.exports=function(l){var f=l.gl;return new p(l,i(f,[0,0,0,1,1,0,1,1]),m(f,b.boxVert,b.lineFrag))};var i=h("gl-buffer"),m=h("gl-shader"),b=h("./shaders");function p(l,f,s){this.plot=l,this.vbo=f,this.shader=s}var r,u,c=p.prototype;c.bind=function(){var l=this.shader;this.vbo.bind(),this.shader.bind(),l.attributes.coord.pointer(),l.uniforms.screenBox=this.plot.screenBox},c.drawBox=(r=[0,0],u=[0,0],function(l,f,s,o,d){var y=this.shader,v=this.plot.gl;r[0]=l,r[1]=f,u[0]=s,u[1]=o,y.uniforms.lo=r,y.uniforms.hi=u,y.uniforms.color=d,v.drawArrays(v.TRIANGLE_STRIP,0,4)}),c.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":319,"gl-buffer":267,"gl-shader":339}],317:[function(h,G,X){"use strict";G.exports=function(g){var y=g.gl;return new r(g,i(y),m(y,p.gridVert,p.gridFrag),m(y,p.tickVert,p.gridFrag))};var i=h("gl-buffer"),m=h("gl-shader"),b=h("binary-search-bounds"),p=h("./shaders");function r(g,y,v,_){this.plot=g,this.vbo=y,this.shader=v,this.tickShader=_,this.ticks=[[],[]]}function u(g,y){return g-y}var c,l,f,s,o,g,y,v,_,w,x,d=r.prototype;d.draw=(c=[0,0],l=[0,0],f=[0,0],function(){for(var g=this.plot,y=this.vbo,v=this.shader,_=this.ticks,w=g.gl,x=g._tickBounds,E=g.dataBox,k=g.viewBox,C=g.gridLineWidth,L=g.gridLineColor,P=g.gridLineEnable,A=g.pixelRatio,I=0;I<2;++I){var D=x[I],S=.5*(E[I+2]+E[I]),N=E[I+2]-E[I];l[I]=2*(x[I+2]-D)/N,c[I]=2*(D-S)/N}v.bind(),y.bind(),v.attributes.dataCoord.pointer(),v.uniforms.dataShift=c,v.uniforms.dataScale=l;var B=0;for(I=0;I<2;++I){f[0]=f[1]=0,f[I]=1,v.uniforms.dataAxis=f,v.uniforms.lineWidth=C[I]/(k[I+2]-k[I])*A,v.uniforms.color=L[I];var H=6*_[I].length;P[I]&&H&&w.drawArrays(w.TRIANGLES,B,H),B+=H}}),d.drawTickMarks=(g=[0,0],y=[0,0],v=[1,0],_=[0,1],w=[0,0],x=[0,0],function(){for(var E=this.plot,k=this.vbo,C=this.tickShader,L=this.ticks,P=E.gl,A=E._tickBounds,I=E.dataBox,D=E.viewBox,R=E.pixelRatio,S=E.screenBox,N=S[2]-S[0],B=S[3]-S[1],H=D[2]-D[0],Y=D[3]-D[1],Q=0;Q<2;++Q){var ne=A[Q],te=.5*(I[Q+2]+I[Q]),K=I[Q+2]-I[Q];y[Q]=2*(A[Q+2]-ne)/K,g[Q]=2*(ne-te)/K}y[0]*=H/N,g[0]*=H/N,y[1]*=Y/B,g[1]*=Y/B,C.bind(),k.bind(),C.attributes.dataCoord.pointer();var q=C.uniforms;q.dataShift=g,q.dataScale=y;var re=E.tickMarkLength,V=E.tickMarkWidth,W=E.tickMarkColor,Z=6*L[0].length,oe=Math.min(b.ge(L[0],(I[0]-A[0])/(A[2]-A[0]),u),L[0].length),ie=Math.min(b.gt(L[0],(I[2]-A[0])/(A[2]-A[0]),u),L[0].length),ue=0+6*oe,fe=6*Math.max(0,ie-oe),he=Math.min(b.ge(L[1],(I[1]-A[1])/(A[3]-A[1]),u),L[1].length),de=Math.min(b.gt(L[1],(I[3]-A[1])/(A[3]-A[1]),u),L[1].length),be=Z+6*he,pe=6*Math.max(0,de-he);w[0]=2*(D[0]-re[1])/N-1,w[1]=(D[3]+D[1])/B-1,x[0]=re[1]*R/N,x[1]=V[1]*R/B,pe&&(q.color=W[1],q.tickScale=x,q.dataAxis=_,q.screenOffset=w,P.drawArrays(P.TRIANGLES,be,pe)),w[0]=(D[2]+D[0])/N-1,w[1]=2*(D[1]-re[0])/B-1,x[0]=V[0]*R/N,x[1]=re[0]*R/B,fe&&(q.color=W[0],q.tickScale=x,q.dataAxis=v,q.screenOffset=w,P.drawArrays(P.TRIANGLES,ue,fe)),w[0]=2*(D[2]+re[3])/N-1,w[1]=(D[3]+D[1])/B-1,x[0]=re[3]*R/N,x[1]=V[3]*R/B,pe&&(q.color=W[3],q.tickScale=x,q.dataAxis=_,q.screenOffset=w,P.drawArrays(P.TRIANGLES,be,pe)),w[0]=(D[2]+D[0])/N-1,w[1]=2*(D[3]+re[2])/B-1,x[0]=V[2]*R/N,x[1]=re[2]*R/B,fe&&(q.color=W[2],q.tickScale=x,q.dataAxis=v,q.screenOffset=w,P.drawArrays(P.TRIANGLES,ue,fe))}),d.update=(s=[1,1,-1,-1,1,-1],o=[1,-1,1,1,-1,-1],function(g){for(var y=g.ticks,v=g.bounds,_=new Float32Array(18*(y[0].length+y[1].length)),w=0,x=[[],[]],E=0;E<2;++E)for(var k=x[E],C=y[E],L=v[E],P=v[E+2],A=0;A<C.length;++A){var I=(C[A].x-L)/(P-L);k.push(I);for(var D=0;D<6;++D)_[w++]=I,_[w++]=s[D],_[w++]=o[D]}this.ticks=x,this.vbo.update(_)}),d.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":319,"binary-search-bounds":103,"gl-buffer":267,"gl-shader":339}],318:[function(h,G,X){"use strict";G.exports=function(l){var f=l.gl;return new p(l,i(f,[-1,-1,-1,1,1,-1,1,1]),m(f,b.lineVert,b.lineFrag))};var i=h("gl-buffer"),m=h("gl-shader"),b=h("./shaders");function p(l,f,s){this.plot=l,this.vbo=f,this.shader=s}var r,u,c=p.prototype;c.bind=function(){var l=this.shader;this.vbo.bind(),this.shader.bind(),l.attributes.coord.pointer(),l.uniforms.screenBox=this.plot.screenBox},c.drawLine=(r=[0,0],u=[0,0],function(l,f,s,o,d,g){var y=this.plot,v=this.shader,_=y.gl;r[0]=l,r[1]=f,u[0]=s,u[1]=o,v.uniforms.start=r,v.uniforms.end=u,v.uniforms.width=d*y.pixelRatio,v.uniforms.color=g,_.drawArrays(_.TRIANGLE_STRIP,0,4)}),c.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":319,"gl-buffer":267,"gl-shader":339}],319:[function(h,G,X){"use strict";var i=h("glslify"),m=i(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);G.exports={lineVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:m,textVert:i(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:m,gridVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:m,boxVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:321}],320:[function(h,G,X){"use strict";G.exports=function(y){var v=y.gl;return new u(y,i(v),m(v,r.textVert,r.textFrag))};var i=h("gl-buffer"),m=h("gl-shader"),b=h("text-cache"),p=h("binary-search-bounds"),r=h("./shaders");function u(y,v,_){this.plot=y,this.vbo=v,this.shader=_,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var c,l,f,s,o,d,y,v,g=u.prototype;g.drawTicks=(c=[0,0],l=[0,0],f=[0,0],function(y){var v=this.plot,_=this.shader,w=this.tickX[y],x=this.tickOffset[y],E=v.gl,k=v.viewBox,C=v.dataBox,L=v.screenBox,P=v.pixelRatio,A=v.tickEnable,I=v.tickPad,D=v.tickColor,R=v.tickAngle,S=v.labelEnable,N=v.labelPad,B=v.labelColor,H=v.labelAngle,Y=this.labelOffset[y],Q=this.labelCount[y],ne=p.lt(w,C[y]),ae=p.le(w,C[y+2]);c[0]=c[1]=0,c[y]=1,l[y]=(k[2+y]+k[y])/(L[2+y]-L[y])-1;var te=2/L[2+(1^y)]-L[1^y];l[1^y]=te*k[1^y]-1,A[y]&&(l[1^y]-=te*P*I[y],ne<ae&&x[ae]>x[ne]&&(_.uniforms.dataAxis=c,_.uniforms.screenOffset=l,_.uniforms.color=D[y],_.uniforms.angle=R[y],E.drawArrays(E.TRIANGLES,x[ne],x[ae]-x[ne]))),S[y]&&Q&&(l[1^y]-=te*P*N[y],_.uniforms.dataAxis=f,_.uniforms.screenOffset=l,_.uniforms.color=B[y],_.uniforms.angle=H[y],E.drawArrays(E.TRIANGLES,Y,Q)),l[1^y]=te*k[2+(1^y)]-1,A[y+2]&&(l[1^y]+=te*P*I[y+2],ne<ae&&x[ae]>x[ne]&&(_.uniforms.dataAxis=c,_.uniforms.screenOffset=l,_.uniforms.color=D[y+2],_.uniforms.angle=R[y+2],E.drawArrays(E.TRIANGLES,x[ne],x[ae]-x[ne]))),S[y+2]&&Q&&(l[1^y]+=te*P*N[y+2],_.uniforms.dataAxis=f,_.uniforms.screenOffset=l,_.uniforms.color=B[y+2],_.uniforms.angle=H[y+2],E.drawArrays(E.TRIANGLES,Y,Q))}),g.drawTitle=(y=[0,0],v=[0,0],function(){var _=this.plot,w=this.shader,x=_.gl,E=_.screenBox,k=_.titleCenter,C=_.titleAngle,L=_.titleColor,P=_.pixelRatio;if(this.titleCount){for(var A=0;A<2;++A)v[A]=2*(k[A]*P-E[A])/(E[2+A]-E[A])-1;w.bind(),w.uniforms.dataAxis=y,w.uniforms.screenOffset=v,w.uniforms.angle=C,w.uniforms.color=L,x.drawArrays(x.TRIANGLES,this.titleOffset,this.titleCount)}}),g.bind=(s=[0,0],o=[0,0],d=[0,0],function(){var y=this.plot,v=this.shader,_=y._tickBounds,w=y.dataBox,x=y.screenBox,E=y.viewBox;v.bind();for(var k=0;k<2;++k){var C=_[k],P=.5*(w[k+2]+w[k]),A=w[k+2]-w[k],D=E[k+2]-E[k],S=x[k+2]-x[k];o[k]=2*(_[k+2]-C)/A*D/S,s[k]=2*(C-P)/A*D/S}d[1]=2*y.pixelRatio/(x[3]-x[1]),d[0]=d[1]*(x[3]-x[1])/(x[2]-x[0]),v.uniforms.dataScale=o,v.uniforms.dataShift=s,v.uniforms.textScale=d,this.vbo.bind(),v.attributes.textCoordinate.pointer()}),g.update=function(y){var v,_,w,x,E,k=[],C=y.ticks,L=y.bounds;for(E=0;E<2;++E){var P=[Math.floor(k.length/3)],A=[-1/0],I=C[E];for(v=0;v<I.length;++v){var D=I[v],R=D.x,N=D.font||"sans-serif";x=D.fontSize||12;for(var B=1/(L[E+2]-L[E]),H=L[E],Y=D.text.split("\n"),Q=0;Q<Y.length;Q++)for(w=b(N,Y[Q]).data,_=0;_<w.length;_+=2)k.push(w[_]*x,-w[_+1]*x-Q*x*1.2,(R-H)*B);P.push(Math.floor(k.length/3)),A.push(R)}this.tickOffset[E]=P,this.tickX[E]=A}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(k.length/3),w=b(y.labelFont[E],y.labels[E],{textAlign:"center"}).data,x=y.labelSize[E],v=0;v<w.length;v+=2)k.push(w[v]*x,-w[v+1]*x,0);this.labelCount[E]=Math.floor(k.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(k.length/3),w=b(y.titleFont,y.title).data,x=y.titleSize,v=0;v<w.length;v+=2)k.push(w[v]*x,-w[v+1]*x,0);this.titleCount=Math.floor(k.length/3)-this.titleOffset,this.vbo.update(k)},g.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":319,"binary-search-bounds":103,"gl-buffer":267,"gl-shader":339,"text-cache":596}],321:[function(h,G,X){arguments[4][265][0].apply(X,arguments)},{dup:265}],322:[function(h,G,X){"use strict";G.exports=function(s){var o=s.gl,g=new u(o,i(o,[o.drawingBufferWidth,o.drawingBufferHeight]));return g.grid=m(g),g.text=b(g),g.line=p(g),g.box=r(g),g.update(s),g};var i=h("gl-select-static"),m=h("./lib/grid"),b=h("./lib/text"),p=h("./lib/line"),r=h("./lib/box");function u(s,o){this.gl=s,this.pickBuffer=o,this.screenBox=[0,0,s.drawingBufferWidth,s.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var c=u.prototype;function l(s){for(var o=s.slice(),d=0;d<o.length;++d)o[d]=o[d].slice();return o}function f(s,o){return s.x-o.x}c.setDirty=function(){this.dirty=this.pickDirty=!0},c.setOverlayDirty=function(){this.dirty=!0},c.nextDepthValue=function(){return this._depthCounter++/65536},c.draw=function(){var s=this.gl,o=this.screenBox,d=this.viewBox,g=this.dataBox,y=this.pixelRatio,v=this.grid,_=this.line,w=this.text,x=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,s.bindFramebuffer(s.FRAMEBUFFER,null),s.enable(s.SCISSOR_TEST),s.disable(s.DEPTH_TEST),s.depthFunc(s.LESS),s.depthMask(!1),s.enable(s.BLEND),s.blendEquation(s.FUNC_ADD,s.FUNC_ADD),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),this.borderColor){s.scissor(o[0],o[1],o[2]-o[0],o[3]-o[1]);var E=this.borderColor;s.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)}s.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]),s.viewport(d[0],d[1],d[2]-d[0],d[3]-d[1]);var k=this.backgroundColor;s.clearColor(k[0]*k[3],k[1]*k[3],k[2]*k[3],k[3]),s.clear(s.COLOR_BUFFER_BIT),v.draw();var C=this.zeroLineEnable,L=this.zeroLineColor,P=this.zeroLineWidth;if(C[0]||C[1]){_.bind();for(var A=0;A<2;++A)if(C[A]&&g[A]<=0&&g[A+2]>=0){var I=o[A]-g[A]*(o[A+2]-o[A])/(g[A+2]-g[A]);0===A?_.drawLine(I,o[1],I,o[3],P[A],L[A]):_.drawLine(o[0],I,o[2],I,P[A],L[A])}}for(A=0;A<x.length;++A)x[A].draw();s.viewport(o[0],o[1],o[2]-o[0],o[3]-o[1]),s.scissor(o[0],o[1],o[2]-o[0],o[3]-o[1]),this.grid.drawTickMarks(),_.bind();var D=this.borderLineEnable,R=this.borderLineWidth,S=this.borderLineColor;for(D[1]&&_.drawLine(d[0],d[1]-.5*R[1]*y,d[0],d[3]+.5*R[3]*y,R[1],S[1]),D[0]&&_.drawLine(d[0]-.5*R[0]*y,d[1],d[2]+.5*R[2]*y,d[1],R[0],S[0]),D[3]&&_.drawLine(d[2],d[1]-.5*R[1]*y,d[2],d[3]+.5*R[3]*y,R[3],S[3]),D[2]&&_.drawLine(d[0]-.5*R[0]*y,d[3],d[2]+.5*R[2]*y,d[3],R[2],S[2]),w.bind(),A=0;A<2;++A)w.drawTicks(A);this.titleEnable&&w.drawTitle();var N=this.overlays;for(A=0;A<N.length;++A)N[A].draw();s.disable(s.SCISSOR_TEST),s.disable(s.BLEND),s.depthMask(!0)}},c.drawPick=function(){if(!this.static){var s=this.pickBuffer;this._pickTimeout=null,s.begin();for(var o=1,d=this.objects,g=0;g<d.length;++g)o=d[g].drawPick(o);s.end()}},c.pick=function(s,o){if(!this.static){var d=this.pixelRatio,g=this.pickPixelRatio,y=this.viewBox,v=0|Math.round((s-y[0]/d)*g),_=0|Math.round((o-y[1]/d)*g),w=this.pickBuffer.query(v,_,this.pickRadius);if(!w)return null;for(var x=w.id+(w.value[0]<<8)+(w.value[1]<<16)+(w.value[2]<<24),E=this.objects,k=0;k<E.length;++k){var C=E[k].pick(v,_,x);if(C)return C}return null}},c.setScreenBox=function(s){var o=this.screenBox,d=this.pixelRatio;o[0]=0|Math.round(s[0]*d),o[1]=0|Math.round(s[1]*d),o[2]=0|Math.round(s[2]*d),o[3]=0|Math.round(s[3]*d),this.setDirty()},c.setDataBox=function(s){var o=this.dataBox;(o[0]!==s[0]||o[1]!==s[1]||o[2]!==s[2]||o[3]!==s[3])&&(o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],this.setDirty())},c.setViewBox=function(s){var o=this.pixelRatio,d=this.viewBox;d[0]=0|Math.round(s[0]*o),d[1]=0|Math.round(s[1]*o),d[2]=0|Math.round(s[2]*o),d[3]=0|Math.round(s[3]*o);var g=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((s[2]-s[0])*g),0|Math.round((s[3]-s[1])*g)],this.setDirty()},c.update=function(s){var o=this.gl;this.pixelRatio=(s=s||{}).pixelRatio||1;var d=this.pixelRatio;this.pickPixelRatio=Math.max(d,1),this.setScreenBox(s.screenBox||[0,0,o.drawingBufferWidth/d,o.drawingBufferHeight/d]),this.setViewBox(s.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/d,.125*(this.screenBox[3]-this.screenBox[1])/d,.875*(this.screenBox[2]-this.screenBox[0])/d,.875*(this.screenBox[3]-this.screenBox[1])/d]);var g=this.viewBox,y=(g[2]-g[0])/(g[3]-g[1]);this.setDataBox(s.dataBox||[-10,-10/y,10,10/y]),this.borderColor=!1!==s.borderColor&&(s.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(s.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(s.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(s.gridLineWidth||[1,1]).slice(),this.gridLineColor=l(s.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(s.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(s.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=l(s.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(s.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(s.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=l(s.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(s.titleCenter||[.5*(g[0]+g[2])/d,(g[3]+120)/d]).slice(),this.titleEnable=!("titleEnable"in s)||!!s.titleEnable,this.titleAngle=s.titleAngle||0,this.titleColor=(s.titleColor||[0,0,0,1]).slice(),this.labelPad=(s.labelPad||[15,15,15,15]).slice(),this.labelAngle=(s.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(s.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=l(s.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(s.tickPad||[15,15,15,15]).slice(),this.tickAngle=(s.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(s.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=l(s.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(s.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(s.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=l(s.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var v=s.ticks||[[],[]],_=this._tickBounds;_[0]=_[1]=1/0,_[2]=_[3]=-1/0;for(var w=0;w<2;++w){var x=v[w].slice(0);0!==x.length&&(x.sort(f),_[w]=Math.min(_[w],x[0].x),_[w+2]=Math.max(_[w+2],x[x.length-1].x))}this.grid.update({bounds:_,ticks:v}),this.text.update({bounds:_,ticks:v,labels:s.labels||["x","y"],labelSize:s.labelSize||[12,12],labelFont:s.labelFont||["sans-serif","sans-serif"],title:s.title||"",titleSize:s.titleSize||18,titleFont:s.titleFont||"sans-serif"}),this.static=!!s.static,this.setDirty()},c.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var s=this.objects.length-1;s>=0;--s)this.objects[s].dispose();for(this.objects.length=0,s=this.overlays.length-1;s>=0;--s)this.overlays[s].dispose();this.overlays.length=0,this.gl=null},c.addObject=function(s){this.objects.indexOf(s)<0&&(this.objects.push(s),this.setDirty())},c.removeObject=function(s){for(var o=this.objects,d=0;d<o.length;++d)if(o[d]===s){o.splice(d,1),this.setDirty();break}},c.addOverlay=function(s){this.overlays.indexOf(s)<0&&(this.overlays.push(s),this.setOverlayDirty())},c.removeOverlay=function(s){for(var o=this.overlays,d=0;d<o.length;++d)if(o[d]===s){o.splice(d,1),this.setOverlayDirty();break}}},{"./lib/box":316,"./lib/grid":317,"./lib/line":318,"./lib/text":320,"gl-select-static":338}],323:[function(h,G,X){"use strict";G.exports=function(c,l){c=c||document.body;var f=[.01,1/0];"distanceLimits"in(l=l||{})&&(f[0]=l.distanceLimits[0],f[1]=l.distanceLimits[1]),"zoomMin"in l&&(f[0]=l.zoomMin),"zoomMax"in l&&(f[1]=l.zoomMax);var s=m({center:l.center||[0,0,0],up:l.up||[0,1,0],eye:l.eye||[0,0,10],mode:l.mode||"orbit",distanceLimits:f}),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=0,g=c.clientWidth,y=c.clientHeight,v={keyBindingMode:"rotate",enableWheel:!0,view:s,element:c,delay:l.delay||16,rotateSpeed:l.rotateSpeed||1,zoomSpeed:l.zoomSpeed||1,translateSpeed:l.translateSpeed||1,flipX:!!l.flipX,flipY:!!l.flipY,modes:s.modes,_ortho:l._ortho||l.projection&&"orthographic"===l.projection.type||!1,tick:function(){var _=i(),w=this.delay,x=_-2*w;s.idle(_-w),s.recalcMatrix(x),s.flush(_-(100+2*w));for(var E=!0,k=s.computedMatrix,C=0;C<16;++C)E=E&&o[C]===k[C],o[C]=k[C];var L=c.clientWidth===g&&c.clientHeight===y;return g=c.clientWidth,y=c.clientHeight,E?!L:(d=Math.exp(s.computedRadius[0]),!0)},lookAt:function(_,w,x){s.lookAt(s.lastT(),_,w,x)},rotate:function(_,w,x){s.rotate(s.lastT(),_,w,x)},pan:function(_,w,x){s.pan(s.lastT(),_,w,x)},translate:function(_,w,x){s.translate(s.lastT(),_,w,x)}};return Object.defineProperties(v,{matrix:{get:function(){return s.computedMatrix},set:function(_){return s.setMatrix(s.lastT(),_),s.computedMatrix},enumerable:!0},mode:{get:function(){return s.getMode()},set:function(_){var w=s.computedUp.slice(),x=s.computedEye.slice(),E=s.computedCenter.slice();if(s.setMode(_),"turntable"===_){var k=i();s._active.lookAt(k,x,E,w),s._active.lookAt(k+500,x,E,[0,0,1]),s._active.flush(k)}return s.getMode()},enumerable:!0},center:{get:function(){return s.computedCenter},set:function(_){return s.lookAt(s.lastT(),null,_),s.computedCenter},enumerable:!0},eye:{get:function(){return s.computedEye},set:function(_){return s.lookAt(s.lastT(),_),s.computedEye},enumerable:!0},up:{get:function(){return s.computedUp},set:function(_){return s.lookAt(s.lastT(),null,null,_),s.computedUp},enumerable:!0},distance:{get:function(){return d},set:function(_){return s.setDistance(s.lastT(),_),_},enumerable:!0},distanceLimits:{get:function(){return s.getDistanceLimits(f)},set:function(_){return s.setDistanceLimits(_),_},enumerable:!0}}),c.addEventListener("contextmenu",function(_){return _.preventDefault(),!1}),v._lastX=-1,v._lastY=-1,v._lastMods={shift:!1,control:!1,alt:!1,meta:!1},v.enableMouseListeners=function(){function _(w,x,E,k){var C=v.keyBindingMode;if(!1!==C){var L="rotate"===C,P="pan"===C,A="zoom"===C,I=!!k.control,D=!!k.alt,R=!!k.shift,S=!!(1&w),N=!!(2&w),B=!!(4&w),H=1/c.clientHeight,Y=H*(x-v._lastX),Q=H*(E-v._lastY),ne=v.flipX?1:-1,ae=v.flipY?1:-1,te=Math.PI*v.rotateSpeed,K=i();if(-1!==v._lastX&&-1!==v._lastY&&((L&&S&&!I&&!D&&!R||S&&!I&&!D&&R)&&s.rotate(K,ne*te*Y,-ae*te*Q,0),(P&&S&&!I&&!D&&!R||N||S&&I&&!D&&!R)&&s.pan(K,-v.translateSpeed*Y*d,v.translateSpeed*Q*d,0),A&&S&&!I&&!D&&!R||B||S&&!I&&D&&!R)){var q=-v.zoomSpeed*Q/window.innerHeight*(K-s.lastT())*100;s.pan(K,0,0,d*(Math.exp(q)-1))}return v._lastX=x,v._lastY=E,v._lastMods=k,!0}}v.mouseListener=b(c,_),c.addEventListener("touchstart",function(w){var x=r(w.changedTouches[0],c);_(0,x[0],x[1],v._lastMods),_(1,x[0],x[1],v._lastMods)},!!u&&{passive:!0}),c.addEventListener("touchmove",function(w){var x=r(w.changedTouches[0],c);_(1,x[0],x[1],v._lastMods),w.preventDefault()},!!u&&{passive:!1}),c.addEventListener("touchend",function(w){_(0,v._lastX,v._lastY,v._lastMods)},!!u&&{passive:!0}),v.wheelListener=p(c,function(w,x){if(!1!==v.keyBindingMode&&v.enableWheel){var E=v.flipX?1:-1,k=v.flipY?1:-1,C=i();if(Math.abs(w)>Math.abs(x))s.rotate(C,0,0,-w*E*Math.PI*v.rotateSpeed/window.innerWidth);else if(!v._ortho){var L=-v.zoomSpeed*k*x/window.innerHeight*(C-s.lastT())/20;s.pan(C,0,0,d*(Math.exp(L)-1))}}},!0)},v.enableMouseListeners(),v};var i=h("right-now"),m=h("3d-view"),b=h("mouse-change"),p=h("mouse-wheel"),r=h("mouse-event-offset"),u=h("has-passive-events")},{"3d-view":55,"has-passive-events":444,"mouse-change":470,"mouse-event-offset":471,"mouse-wheel":473,"right-now":542}],324:[function(h,G,X){var i=h("glslify"),m=h("gl-shader"),b=i(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),p=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);G.exports=function(r){return m(r,b,p,null,[{name:"position",type:"vec2"}])}},{"gl-shader":339,glslify:325}],325:[function(h,G,X){arguments[4][265][0].apply(X,arguments)},{dup:265}],326:[function(h,G,X){"use strict";var i=h("./camera.js"),m=h("gl-axes3d"),b=h("gl-axes3d/properties"),p=h("gl-spikes3d"),r=h("gl-select-static"),u=h("gl-fbo"),c=h("a-big-triangle"),l=h("mouse-change"),f=h("gl-mat4/perspective"),s=h("gl-mat4/ortho"),o=h("./lib/shader"),d=h("is-mobile")({tablet:!0,featureDetect:!0});function g(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function y(_){var w=Math.round(Math.log(Math.abs(_))/Math.log(10));if(w<0){var x=Math.round(Math.pow(10,-w));return Math.ceil(_*x)/x}return w>0?(x=Math.round(Math.pow(10,w)),Math.ceil(_/x)*x):Math.ceil(_)}function v(_){return"boolean"!=typeof _||_}G.exports={createScene:function(_){(_=_||{}).camera=_.camera||{};var w=_.canvas;w||(w=document.createElement("canvas"),_.container?_.container.appendChild(w):document.body.appendChild(w));var x=_.gl;if(x||(_.glOptions&&(d=!!_.glOptions.preserveDrawingBuffer),x=function(de,be){var pe=null;try{(pe=de.getContext("webgl",be))||(pe=de.getContext("experimental-webgl",be))}catch(Te){return null}return pe}(w,_.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:d})),!x)throw new Error("webgl not supported");var E=_.bounds||[[-10,-10,-10],[10,10,10]],k=new g,C=u(x,x.drawingBufferWidth,x.drawingBufferHeight,{preferFloat:!d}),L=o(x),P=_.cameraObject&&!0===_.cameraObject._ortho||_.camera.projection&&"orthographic"===_.camera.projection.type||!1,A={eye:_.camera.eye||[2,0,0],center:_.camera.center||[0,0,0],up:_.camera.up||[0,1,0],zoomMin:_.camera.zoomMax||.1,zoomMax:_.camera.zoomMin||100,mode:_.camera.mode||"turntable",_ortho:P},I=_.axes||{},D=m(x,I);D.enable=!I.disable;var S=p(x,_.spikes||{}),N=[],B=[],H=[],Y=[],Q=!0,ne=!0,K={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},q=(ne=!0,[x.drawingBufferWidth,x.drawingBufferHeight]),re=_.cameraObject||i(w,A),V={gl:x,contextLost:!1,pixelRatio:_.pixelRatio||1,canvas:w,selection:k,camera:re,axes:D,axesPixels:null,spikes:S,bounds:E,objects:N,shape:q,aspect:_.aspectRatio||[1,1,1],pickRadius:_.pickRadius||10,zNear:_.zNear||.01,zFar:_.zFar||1e3,fovy:_.fovy||Math.PI/4,clearColor:_.clearColor||[0,0,0,0],autoResize:v(_.autoResize),autoBounds:v(_.autoBounds),autoScale:!!_.autoScale,autoCenter:v(_.autoCenter),clipToBounds:v(_.clipToBounds),snapToData:!!_.snapToData,onselect:_.onselect||null,onrender:_.onrender||null,onclick:_.onclick||null,cameraParams:K,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(de){this.aspect[0]=de.x,this.aspect[1]=de.y,this.aspect[2]=de.z,ne=!0},setBounds:function(de,be){this.bounds[0][de]=be.min,this.bounds[1][de]=be.max},setClearColor:function(de){this.clearColor=de},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},W=[x.drawingBufferWidth/V.pixelRatio|0,x.drawingBufferHeight/V.pixelRatio|0];function Z(){if(!V._stopped&&V.autoResize){var de=w.parentNode,be=1,pe=1;de&&de!==document.body?(be=de.clientWidth,pe=de.clientHeight):(be=window.innerWidth,pe=window.innerHeight);var Te=0|Math.ceil(be*V.pixelRatio),ye=0|Math.ceil(pe*V.pixelRatio);if(Te!==w.width||ye!==w.height){w.width=Te,w.height=ye;var ke=w.style;ke.position=ke.position||"absolute",ke.left="0px",ke.top="0px",ke.width=be+"px",ke.height=pe+"px",Q=!0}}}function oe(){for(var de=N.length,be=Y.length,pe=0;pe<be;++pe)H[pe]=0;e:for(pe=0;pe<de;++pe){var Te=N[pe],ye=Te.pickSlots;if(ye){for(var ke=0;ke<be;++ke)if(H[ke]+ye<255){B[pe]=ke,Te.setPickBase(H[ke]+1),H[ke]+=ye;continue e}var ze=r(x,q);B[pe]=be,Y.push(ze),H.push(ye),Te.setPickBase(1),be+=1}else B[pe]=-1}for(;be>0&&0===H[be-1];)H.pop(),Y.pop().dispose()}function ie(){if(V.contextLost)return!0;x.isContextLost()&&(V.contextLost=!0,V.mouseListener.enabled=!1,V.selection.object=null,V.oncontextloss&&V.oncontextloss())}V.autoResize&&Z(),window.addEventListener("resize",Z),V.update=function(de){V._stopped||(de=de||{},Q=!0,ne=!0)},V.add=function(de){V._stopped||(de.axes=D,N.push(de),B.push(-1),Q=!0,ne=!0,oe())},V.remove=function(de){if(!V._stopped){var be=N.indexOf(de);be<0||(N.splice(be,1),B.pop(),Q=!0,ne=!0,oe())}},V.dispose=function(){if(!V._stopped&&(V._stopped=!0,window.removeEventListener("resize",Z),w.removeEventListener("webglcontextlost",ie),V.mouseListener.enabled=!1,!V.contextLost)){D.dispose(),S.dispose();for(var de=0;de<N.length;++de)N[de].dispose();for(C.dispose(),de=0;de<Y.length;++de)Y[de].dispose();L.dispose(),x=null,D=null,S=null,N=[]}},V._mouseRotating=!1,V._prevButtons=0,V.enableMouseListeners=function(){V.mouseListener=l(w,function(de,be,pe){if(!V._stopped){var Te=Y.length,ye=N.length,ke=k.object;k.distance=1/0,k.mouse[0]=be,k.mouse[1]=pe,k.object=null,k.screen=null,k.dataCoordinate=k.dataPosition=null;var ze=!1;if(de&&V._prevButtons)V._mouseRotating=!0;else{V._mouseRotating&&(ne=!0),V._mouseRotating=!1;for(var je=0;je<Te;++je){var Ie=Y[je].query(be,W[1]-pe-1,V.pickRadius);if(Ie){if(Ie.distance>k.distance)continue;for(var Ce=0;Ce<ye;++Ce){var _e=N[Ce];if(B[Ce]===je){var we=_e.pick(Ie);we&&(k.buttons=de,k.screen=Ie.coord,k.distance=Ie.distance,k.object=_e,k.index=we.distance,k.dataPosition=we.position,k.dataCoordinate=we.dataCoordinate,k.data=we,ze=!0)}}}}}ke&&ke!==k.object&&(ke.highlight&&ke.highlight(null),Q=!0),k.object&&(k.object.highlight&&k.object.highlight(k.data),Q=!0),(ze=ze||k.object!==ke)&&V.onselect&&V.onselect(k),1&de&&!(1&V._prevButtons)&&V.onclick&&V.onclick(k),V._prevButtons=de}})},w.addEventListener("webglcontextlost",ie);var ue=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],fe=[ue[0].slice(),ue[1].slice()];function he(){if(!ie()){Z();var de=V.camera.tick();K.view=V.camera.matrix,Q=Q||de,ne=ne||de,D.pixelRatio=V.pixelRatio,S.pixelRatio=V.pixelRatio;var be=N.length,pe=ue[0],Te=ue[1];pe[0]=pe[1]=pe[2]=1/0,Te[0]=Te[1]=Te[2]=-1/0;for(var ye=0;ye<be;++ye){(Xe=N[ye]).pixelRatio=V.pixelRatio,Xe.axes=V.axes,Q=Q||!!Xe.dirty,ne=ne||!!Xe.dirty;var ke=Xe.bounds;if(ke)for(var ze=ke[0],je=ke[1],Ie=0;Ie<3;++Ie)pe[Ie]=Math.min(pe[Ie],ze[Ie]),Te[Ie]=Math.max(Te[Ie],je[Ie])}var Ce=V.bounds;if(V.autoBounds)for(Ie=0;Ie<3;++Ie){if(Te[Ie]<pe[Ie])pe[Ie]=-1,Te[Ie]=1;else{pe[Ie]===Te[Ie]&&(pe[Ie]-=1,Te[Ie]+=1);var _e=.05*(Te[Ie]-pe[Ie]);pe[Ie]=pe[Ie]-_e,Te[Ie]=Te[Ie]+_e}Ce[0][Ie]=pe[Ie],Ce[1][Ie]=Te[Ie]}var we=!1;for(Ie=0;Ie<3;++Ie)we=we||fe[0][Ie]!==Ce[0][Ie]||fe[1][Ie]!==Ce[1][Ie],fe[0][Ie]=Ce[0][Ie],fe[1][Ie]=Ce[1][Ie];if(ne=ne||we,Q=Q||we){if(we){var Se=[0,0,0];for(ye=0;ye<3;++ye)Se[ye]=y((Ce[1][ye]-Ce[0][ye])/10);D.update(D.autoTicks?{bounds:Ce,tickSpacing:Se}:{bounds:Ce})}var Oe=x.drawingBufferWidth,Be=x.drawingBufferHeight;for(q[0]=Oe,q[1]=Be,W[0]=0|Math.max(Oe/V.pixelRatio,1),W[1]=0|Math.max(Be/V.pixelRatio,1),function(nt,et){var qe=nt.bounds,Ye=nt.cameraParams,ot=Ye.projection,at=Ye.model,xt=nt.zNear,Ht=nt.zFar,At=nt.fovy,ht=nt.gl.drawingBufferWidth/nt.gl.drawingBufferHeight;et?(s(ot,-ht,ht,-1,1,xt,Ht),Ye._ortho=!0):(f(ot,At,ht,xt,Ht),Ye._ortho=!1);for(var st=0;st<16;++st)at[st]=0;at[15]=1;var Bt=0;for(st=0;st<3;++st)Bt=Math.max(Bt,qe[1][st]-qe[0][st]);for(st=0;st<3;++st)at[5*st]=nt.autoScale?nt.aspect[st]/(qe[1][st]-qe[0][st]):1/Bt,nt.autoCenter&&(at[12+st]=.5*-at[5*st]*(qe[0][st]+qe[1][st]))}(V,P),ye=0;ye<be;++ye)(Xe=N[ye]).axesBounds=Ce,V.clipToBounds&&(Xe.clipBounds=Ce);k.object&&(S.position=V.snapToData?k.dataCoordinate:k.dataPosition,S.bounds=Ce),ne&&(ne=!1,function(){if(!ie()){x.colorMask(!0,!0,!0,!0),x.depthMask(!0),x.disable(x.BLEND),x.enable(x.DEPTH_TEST),x.depthFunc(x.LEQUAL);for(var nt=N.length,et=Y.length,qe=0;qe<et;++qe){var Ye=Y[qe];Ye.shape=W,Ye.begin();for(var ot=0;ot<nt;++ot)if(B[ot]===qe){var at=N[ot];at.drawPick&&(at.pixelRatio=1,at.drawPick(K))}Ye.end()}}}()),V.axesPixels=b(V.axes,K,Oe,Be),V.onrender&&V.onrender(),x.bindFramebuffer(x.FRAMEBUFFER,null),x.viewport(0,0,Oe,Be),V.clearRGBA(),x.depthMask(!0),x.colorMask(!0,!0,!0,!0),x.enable(x.DEPTH_TEST),x.depthFunc(x.LEQUAL),x.disable(x.BLEND),x.disable(x.CULL_FACE);var He=!1;for(D.enable&&(He=He||D.isTransparent(),D.draw(K)),S.axes=D,k.object&&S.draw(K),x.disable(x.CULL_FACE),ye=0;ye<be;++ye)(Xe=N[ye]).axes=D,Xe.pixelRatio=V.pixelRatio,Xe.isOpaque&&Xe.isOpaque()&&Xe.draw(K),Xe.isTransparent&&Xe.isTransparent()&&(He=!0);if(He){for(C.shape=q,C.bind(),x.clear(x.DEPTH_BUFFER_BIT),x.colorMask(!1,!1,!1,!1),x.depthMask(!0),x.depthFunc(x.LESS),D.enable&&D.isTransparent()&&D.drawTransparent(K),ye=0;ye<be;++ye)(Xe=N[ye]).isOpaque&&Xe.isOpaque()&&Xe.draw(K);for(x.enable(x.BLEND),x.blendEquation(x.FUNC_ADD),x.blendFunc(x.ONE,x.ONE_MINUS_SRC_ALPHA),x.colorMask(!0,!0,!0,!0),x.depthMask(!1),x.clearColor(0,0,0,0),x.clear(x.COLOR_BUFFER_BIT),D.isTransparent()&&D.drawTransparent(K),ye=0;ye<be;++ye){var Xe;(Xe=N[ye]).isTransparent&&Xe.isTransparent()&&Xe.drawTransparent(K)}x.bindFramebuffer(x.FRAMEBUFFER,null),x.blendFunc(x.ONE,x.ONE_MINUS_SRC_ALPHA),x.disable(x.DEPTH_TEST),L.bind(),C.color[0].bind(0),L.uniforms.accumBuffer=0,c(x),x.disable(x.BLEND)}for(Q=!1,ye=0;ye<be;++ye)N[ye].dirty=!1}}}return V.enableMouseListeners(),function de(){V._stopped||V.contextLost||(he(),requestAnimationFrame(de))}(),V.redraw=function(){V._stopped||(Q=!0,he())},V},createCamera:i}},{"./camera.js":323,"./lib/shader":324,"a-big-triangle":70,"gl-axes3d":258,"gl-axes3d/properties":266,"gl-fbo":276,"gl-mat4/ortho":302,"gl-mat4/perspective":303,"gl-select-static":338,"gl-spikes3d":349,"is-mobile":455,"mouse-change":470}],327:[function(h,G,X){var i=h("glslify");X.pointVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),X.pointFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),X.pickVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),X.pickFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:442}],328:[function(h,G,X){"use strict";var i=h("gl-shader"),m=h("gl-buffer"),b=h("typedarray-pool"),p=h("./lib/shader");function r(f,s,o,d,g){this.plot=f,this.offsetBuffer=s,this.pickBuffer=o,this.shader=d,this.pickShader=g,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}G.exports=function(f,s){var o=f.gl,_=new r(f,m(o),m(o),i(o,p.pointVertex,p.pointFragment),i(o,p.pickVertex,p.pickFragment));return _.update(s),f.addObject(_),_};var u,c,l=r.prototype;l.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},l.update=function(f){var s;function o(x,E){return x in f?f[x]:E}f=f||{},this.sizeMin=o("sizeMin",.5),this.sizeMax=o("sizeMax",20),this.color=o("color",[1,0,0,1]).slice(),this.areaRatio=o("areaRatio",1),this.borderColor=o("borderColor",[0,0,0,1]).slice(),this.blend=o("blend",!1);var d=f.positions.length>>>1,g=f.positions instanceof Float32Array,y=f.idToIndex instanceof Int32Array&&f.idToIndex.length>=d,v=f.positions,_=g?v:b.mallocFloat32(v.length),w=y?f.idToIndex:b.mallocInt32(d);if(g||_.set(v),!y)for(_.set(v),s=0;s<d;s++)w[s]=s;this.points=v,this.offsetBuffer.update(_),this.pickBuffer.update(w),g||b.free(_),y||b.free(w),this.pointCount=d,this.pickOffset=0},l.unifiedDraw=(u=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0],function(f){var s=void 0!==f,o=s?this.pickShader:this.shader,d=this.plot.gl,g=this.plot.dataBox;if(0===this.pointCount)return f;var y=g[2]-g[0],v=g[3]-g[1],_=function(k,C){var L,P=0,A=k.length>>>1;for(L=0;L<A;L++){var I=k[2*L],D=k[2*L+1];I>=C[0]&&I<=C[2]&&D>=C[1]&&D<=C[3]&&P++}return P}(this.points,g),w=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(_,.33333)));u[0]=2/y,u[4]=2/v,u[6]=-2*g[0]/y-1,u[7]=-2*g[1]/v-1,this.offsetBuffer.bind(),o.bind(),o.attributes.position.pointer(),o.uniforms.matrix=u,o.uniforms.color=this.color,o.uniforms.borderColor=this.borderColor,o.uniforms.pointCloud=w<5,o.uniforms.pointSize=w,o.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),s&&(c[0]=255&f,c[1]=f>>8&255,c[2]=f>>16&255,c[3]=f>>24&255,this.pickBuffer.bind(),o.attributes.pickId.pointer(d.UNSIGNED_BYTE),o.uniforms.pickOffset=c,this.pickOffset=f);var x=d.getParameter(d.BLEND),E=d.getParameter(d.DITHER);return x&&!this.blend&&d.disable(d.BLEND),E&&d.disable(d.DITHER),d.drawArrays(d.POINTS,0,this.pointCount),x&&!this.blend&&d.enable(d.BLEND),E&&d.enable(d.DITHER),f+this.pointCount}),l.draw=l.unifiedDraw,l.drawPick=l.unifiedDraw,l.pick=function(f,s,o){var d=this.pickOffset;if(o<d||o>=d+this.pointCount)return null;var y=o-d,v=this.points;return{object:this,pointId:y,dataCoord:[v[2*y],v[2*y+1]]}}},{"./lib/shader":327,"gl-buffer":267,"gl-shader":339,"typedarray-pool":617}],329:[function(h,G,X){G.exports=function(i,m,b,p){var r,u,c,l,f,s=m[0],o=m[1],d=m[2],g=m[3],y=b[0],v=b[1],_=b[2],w=b[3];return(u=s*y+o*v+d*_+g*w)<0&&(u=-u,y=-y,v=-v,_=-_,w=-w),1-u>1e-6?(r=Math.acos(u),c=Math.sin(r),l=Math.sin((1-p)*r)/c,f=Math.sin(p*r)/c):(l=1-p,f=p),i[0]=l*s+f*y,i[1]=l*o+f*v,i[2]=l*d+f*_,i[3]=l*g+f*w,i}},{}],330:[function(h,G,X){"use strict";G.exports=function(i){return i||0===i?i.toString():""}},{}],331:[function(h,G,X){"use strict";var i=h("vectorize-text");G.exports=function(b,p,r){var u=m[p];if(u||(u=m[p]={}),b in u)return u[b];var c={textAlign:"center",textBaseline:"middle",lineHeight:1,font:p,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},l=i(b,c);c.triangles=!1;var f,s,o=i(b,c);if(r&&1!==r){for(f=0;f<l.positions.length;++f)for(s=0;s<l.positions[f].length;++s)l.positions[f][s]/=r;for(f=0;f<o.positions.length;++f)for(s=0;s<o.positions[f].length;++s)o.positions[f][s]/=r}var d=[[1/0,1/0],[-1/0,-1/0]],g=o.positions.length;for(f=0;f<g;++f){var y=o.positions[f];for(s=0;s<2;++s)d[0][s]=Math.min(d[0][s],y[s]),d[1][s]=Math.max(d[1][s],y[s])}return u[b]=[l,o,d]};var m={}},{"vectorize-text":623}],332:[function(h,G,X){var i=h("gl-shader"),m=h("glslify"),b=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),p=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),r=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),u=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),c=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),l=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],f={vertex:b,fragment:u,attributes:l},s={vertex:p,fragment:u,attributes:l},o={vertex:r,fragment:u,attributes:l},d={vertex:b,fragment:c,attributes:l},g={vertex:p,fragment:c,attributes:l},y={vertex:r,fragment:c,attributes:l};function v(_,w){var x=i(_,w),E=x.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,x}X.createPerspective=function(_){return v(_,f)},X.createOrtho=function(_){return v(_,s)},X.createProject=function(_){return v(_,o)},X.createPickPerspective=function(_){return v(_,d)},X.createPickOrtho=function(_){return v(_,g)},X.createPickProject=function(_){return v(_,y)}},{"gl-shader":339,glslify:333}],333:[function(h,G,X){arguments[4][265][0].apply(X,arguments)},{dup:265}],334:[function(h,G,X){"use strict";var i=h("is-string-blank"),m=h("gl-buffer"),b=h("gl-vao"),p=h("typedarray-pool"),r=h("gl-mat4/multiply"),u=h("./lib/shaders"),c=h("./lib/glyphs"),l=h("./lib/get-simple-string"),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(H,Y){var Q=H[0],ne=H[1],ae=H[2],te=H[3];return H[0]=Y[0]*Q+Y[4]*ne+Y[8]*ae+Y[12]*te,H[1]=Y[1]*Q+Y[5]*ne+Y[9]*ae+Y[13]*te,H[2]=Y[2]*Q+Y[6]*ne+Y[10]*ae+Y[14]*te,H[3]=Y[3]*Q+Y[7]*ne+Y[11]*ae+Y[15]*te,H}function o(H,Y,Q,ne){return s(ne,ne),s(ne,ne),s(ne,ne)}function d(H,Y){this.index=H,this.dataCoordinate=this.position=Y}function g(H){return!0===H||H>1?1:H}function y(H,Y,Q,ne,ae,te,K,q,re,V,W,Z){this.gl=H,this.pixelRatio=1,this.shader=Y,this.orthoShader=Q,this.projectShader=ne,this.pointBuffer=ae,this.colorBuffer=te,this.glyphBuffer=K,this.idBuffer=q,this.vao=re,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=V,this.pickOrthoShader=W,this.pickProjectShader=Z,this.points=[],this._selectResult=new d(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}G.exports=function(H){var Y=H.gl,Q=u.createPerspective(Y),ne=u.createOrtho(Y),ae=u.createProject(Y),te=u.createPickPerspective(Y),K=u.createPickOrtho(Y),q=u.createPickProject(Y),re=m(Y),V=m(Y),W=m(Y),Z=m(Y),ie=new y(Y,Q,ne,ae,re,V,W,Z,b(Y,[{buffer:re,size:3,type:Y.FLOAT},{buffer:V,size:4,type:Y.FLOAT},{buffer:W,size:2,type:Y.FLOAT},{buffer:Z,size:4,type:Y.UNSIGNED_BYTE,normalized:!0}]),te,K,q);return ie.update(H),ie};var v=y.prototype;v.pickSlots=1,v.setPickBase=function(H){this.pickId=H},v.isTransparent=function(){if(this.hasAlpha)return!0;for(var H=0;H<3;++H)if(this.axesProject[H]&&this.projectHasAlpha)return!0;return!1},v.isOpaque=function(){if(!this.hasAlpha)return!0;for(var H=0;H<3;++H)if(this.axesProject[H]&&!this.projectHasAlpha)return!0;return!1};var _=[0,0],w=[0,0,0],x=[0,0,0],E=[0,0,0,1],k=[0,0,0,1],C=f.slice(),L=[0,0,0],P=[[0,0,0],[0,0,0]];function A(H){return H[0]=H[1]=H[2]=0,H}function I(H,Y){return H[0]=Y[0],H[1]=Y[1],H[2]=Y[2],H[3]=1,H}function D(H,Y,Q,ne){return H[0]=Y[0],H[1]=Y[1],H[2]=Y[2],H[Q]=ne,H}var S=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function N(H,Y,Q,ne,ae,te,K){var q=Q.gl;if((te===Q.projectHasAlpha||K)&&function(H,Y,Q,ne){var ae,te=Y.axesProject,K=Y.gl,q=H.uniforms,re=Q.model||f,V=Q.view||f,W=Q.projection||f,Z=Y.axesBounds,oe=function(Ce){for(var _e=P,we=0;we<2;++we)for(var Se=0;Se<3;++Se)_e[we][Se]=Math.max(Math.min(Ce[we][Se],1e8),-1e8);return _e}(Y.clipBounds);ae=Y.axes&&Y.axes.lastCubeProps?Y.axes.lastCubeProps.axis:[1,1,1],_[0]=2/K.drawingBufferWidth,_[1]=2/K.drawingBufferHeight,H.bind(),q.view=V,q.projection=W,q.screenSize=_,q.highlightId=Y.highlightId,q.highlightScale=Y.highlightScale,q.clipBounds=oe,q.pickGroup=Y.pickId/255,q.pixelRatio=ne;for(var ie=0;ie<3;++ie)if(te[ie]){q.scale=Y.projectScale[ie],q.opacity=Y.projectOpacity[ie];for(var ue=C,fe=0;fe<16;++fe)ue[fe]=0;for(fe=0;fe<4;++fe)ue[5*fe]=1;ue[5*ie]=0,ue[12+ie]=ae[ie]<0?Z[0][ie]:Z[1][ie],r(ue,re,ue),q.model=ue;var he=(ie+1)%3,de=(ie+2)%3,be=A(w),pe=A(x);be[he]=1,pe[de]=1;var Te=o(0,0,0,I(E,be)),ye=o(0,0,0,I(k,pe));if(Math.abs(Te[1])>Math.abs(ye[1])){var ke=Te;Te=ye,ye=ke,ke=be,be=pe,pe=ke;var ze=he;he=de,de=ze}Te[0]<0&&(be[he]=-1),ye[1]>0&&(pe[de]=-1);var je=0,Ie=0;for(fe=0;fe<4;++fe)je+=Math.pow(re[4*he+fe],2),Ie+=Math.pow(re[4*de+fe],2);be[he]/=Math.sqrt(je),pe[de]/=Math.sqrt(Ie),q.axes[0]=be,q.axes[1]=pe,q.fragClipBounds[0]=D(L,oe[0],ie,-1e8),q.fragClipBounds[1]=D(L,oe[1],ie,1e8),Y.vao.bind(),Y.vao.draw(K.TRIANGLES,Y.vertexCount),Y.lineWidth>0&&(K.lineWidth(Y.lineWidth*ne),Y.vao.draw(K.LINES,Y.lineVertexCount,Y.vertexCount)),Y.vao.unbind()}}(Y,Q,ne,ae),te===Q.hasAlpha||K){H.bind();var re=H.uniforms;re.model=ne.model||f,re.view=ne.view||f,re.projection=ne.projection||f,_[0]=2/q.drawingBufferWidth,_[1]=2/q.drawingBufferHeight,re.screenSize=_,re.highlightId=Q.highlightId,re.highlightScale=Q.highlightScale,re.fragClipBounds=S,re.clipBounds=Q.axes.bounds,re.opacity=Q.opacity,re.pickGroup=Q.pickId/255,re.pixelRatio=ae,Q.vao.bind(),Q.vao.draw(q.TRIANGLES,Q.vertexCount),Q.lineWidth>0&&(q.lineWidth(Q.lineWidth*ae),Q.vao.draw(q.LINES,Q.lineVertexCount,Q.vertexCount)),Q.vao.unbind()}}function B(H,Y,Q,ne){var ae;ae=Array.isArray(H)?Y<H.length?H[Y]:void 0:H,ae=l(ae);var te=!0;i(ae)&&(ae="\u25bc",te=!1);var K=c(ae,Q,ne);return{mesh:K[0],lines:K[1],bounds:K[2],visible:te}}v.draw=function(H){N(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,H,this.pixelRatio,!1,!1)},v.drawTransparent=function(H){N(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,H,this.pixelRatio,!0,!1)},v.drawPick=function(H){N(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,H,1,!0,!0)},v.pick=function(H){if(!H||H.id!==this.pickId)return null;var Y=H.value[2]+(H.value[1]<<8)+(H.value[0]<<16);if(Y>=this.pointCount||Y<0)return null;var Q=this.points[Y],ne=this._selectResult;ne.index=Y;for(var ae=0;ae<3;++ae)ne.position[ae]=ne.dataCoordinate[ae]=Q[ae];return ne},v.highlight=function(H){if(H){var Y=H.index;this.highlightId=[(255&Y)/255,(Y>>8&255)/255,(Y>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},v.update=function(H){if("perspective"in(H=H||{})&&(this.useOrtho=!H.perspective),"orthographic"in H&&(this.useOrtho=!!H.orthographic),"lineWidth"in H&&(this.lineWidth=H.lineWidth),"project"in H)if(Array.isArray(H.project))this.axesProject=H.project;else{var Y=!!H.project;this.axesProject=[Y,Y,Y]}if("projectScale"in H)if(Array.isArray(H.projectScale))this.projectScale=H.projectScale.slice();else{var Q=+H.projectScale;this.projectScale=[Q,Q,Q]}if(this.projectHasAlpha=!1,"projectOpacity"in H){this.projectOpacity=Array.isArray(H.projectOpacity)?H.projectOpacity.slice():[Q=+H.projectOpacity,Q,Q];for(var ne=0;ne<3;++ne)this.projectOpacity[ne]=g(this.projectOpacity[ne]),this.projectOpacity[ne]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in H&&(this.opacity=g(H.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var ae,te,K=H.position,q=H.font||"normal",re=H.alignment||[0,0];if(2===re.length)ae=re[0],te=re[1];else for(ae=[],te=[],ne=0;ne<re.length;++ne)ae[ne]=re[ne][0],te[ne]=re[ne][1];var V=[1/0,1/0,1/0],W=[-1/0,-1/0,-1/0],Z=H.glyph,oe=H.color,ie=H.size,ue=H.angle,fe=H.lineColor,he=-1,de=0,be=0,pe=0;if(K.length){pe=K.length;e:for(ne=0;ne<pe;++ne){for(var Te=K[ne],ye=0;ye<3;++ye)if(isNaN(Te[ye])||!isFinite(Te[ye]))continue e;var ke=(qe=B(Z,ne,q,this.pixelRatio)).mesh,ze=qe.lines,je=qe.bounds;de+=3*ke.cells.length,be+=2*ze.edges.length}}var Ie=de+be,Ce=p.mallocFloat(3*Ie),_e=p.mallocFloat(4*Ie),we=p.mallocFloat(2*Ie),Se=p.mallocUint32(Ie);if(Ie>0){var Oe=0,Be=de,He=[0,0,0,1],Xe=[0,0,0,1],nt=Array.isArray(oe)&&Array.isArray(oe[0]),et=Array.isArray(fe)&&Array.isArray(fe[0]);e:for(ne=0;ne<pe;++ne){for(he+=1,Te=K[ne],ye=0;ye<3;++ye){if(isNaN(Te[ye])||!isFinite(Te[ye]))continue e;W[ye]=Math.max(W[ye],Te[ye]),V[ye]=Math.min(V[ye],Te[ye])}ke=(qe=B(Z,ne,q,this.pixelRatio)).mesh,ze=qe.lines,je=qe.bounds;var qe,Ye=qe.visible;if(Ye)if(Array.isArray(oe)){if(3===(ot=nt?ne<oe.length?oe[ne]:[0,0,0,0]:oe).length){for(ye=0;ye<3;++ye)He[ye]=ot[ye];He[3]=1}else if(4===ot.length){for(ye=0;ye<4;++ye)He[ye]=ot[ye];!this.hasAlpha&&ot[3]<1&&(this.hasAlpha=!0)}}else He[0]=He[1]=He[2]=0,He[3]=1;else He=[1,1,1,0];if(Ye)if(Array.isArray(fe)){var ot;if(3===(ot=et?ne<fe.length?fe[ne]:[0,0,0,0]:fe).length){for(ye=0;ye<3;++ye)Xe[ye]=ot[ye];Xe[ye]=1}else if(4===ot.length){for(ye=0;ye<4;++ye)Xe[ye]=ot[ye];!this.hasAlpha&&ot[3]<1&&(this.hasAlpha=!0)}}else Xe[0]=Xe[1]=Xe[2]=0,Xe[3]=1;else Xe=[1,1,1,0];var at=.5;Ye?Array.isArray(ie)?at=ne<ie.length?+ie[ne]:12:ie?at=+ie:this.useOrtho&&(at=12):at=0;var ct=0;Array.isArray(ue)?ct=ne<ue.length?+ue[ne]:0:ue&&(ct=+ue);var _t=Math.cos(ct),xt=Math.sin(ct);for(Te=K[ne],ye=0;ye<3;++ye)W[ye]=Math.max(W[ye],Te[ye]),V[ye]=Math.min(V[ye],Te[ye]);var Ht=ae,At=te;Ht=0,Array.isArray(ae)?Ht=ne<ae.length?ae[ne]:0:ae&&(Ht=ae),At=0,Array.isArray(te)?At=ne<te.length?te[ne]:0:te&&(At=te);var ht=[Ht*=Ht>0?1-je[0][0]:Ht<0?1+je[1][0]:1,At*=At>0?1-je[0][1]:At<0?1+je[1][1]:1],st=ke.cells||[],Bt=ke.positions||[];for(ye=0;ye<st.length;++ye)for(var gn=st[ye],hn=0;hn<3;++hn){for(var We=0;We<3;++We)Ce[3*Oe+We]=Te[We];for(We=0;We<4;++We)_e[4*Oe+We]=He[We];Se[Oe]=he;var it=Bt[gn[hn]];we[2*Oe]=at*(_t*it[0]-xt*it[1]+ht[0]),we[2*Oe+1]=at*(xt*it[0]+_t*it[1]+ht[1]),Oe+=1}for(st=ze.edges,Bt=ze.positions,ye=0;ye<st.length;++ye)for(gn=st[ye],hn=0;hn<2;++hn){for(We=0;We<3;++We)Ce[3*Be+We]=Te[We];for(We=0;We<4;++We)_e[4*Be+We]=Xe[We];Se[Be]=he,we[2*Be]=at*(_t*(it=Bt[gn[hn]])[0]-xt*it[1]+ht[0]),we[2*Be+1]=at*(xt*it[0]+_t*it[1]+ht[1]),Be+=1}}}this.bounds=[V,W],this.points=K,this.pointCount=K.length,this.vertexCount=de,this.lineVertexCount=be,this.pointBuffer.update(Ce),this.colorBuffer.update(_e),this.glyphBuffer.update(we),this.idBuffer.update(Se),p.free(Ce),p.free(_e),p.free(we),p.free(Se)},v.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":330,"./lib/glyphs":331,"./lib/shaders":332,"gl-buffer":267,"gl-mat4/multiply":301,"gl-vao":361,"is-string-blank":458,"typedarray-pool":617}],335:[function(h,G,X){"use strict";var i=h("glslify");X.boxVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),X.boxFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:336}],336:[function(h,G,X){arguments[4][265][0].apply(X,arguments)},{dup:265}],337:[function(h,G,X){"use strict";var i=h("gl-shader"),m=h("gl-buffer"),b=h("./lib/shaders");function p(u,c,l){this.plot=u,this.boxBuffer=c,this.boxShader=l,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}G.exports=function(u,c){var l=u.gl,o=new p(u,m(l,[0,0,0,1,1,0,1,1]),i(l,b.boxVertex,b.boxFragment));return o.update(c),u.addOverlay(o),o};var r=p.prototype;r.draw=function(){if(this.enabled){var u=this.plot,c=this.selectBox,l=this.borderWidth,f=this.innerColor,s=this.outerColor,o=this.borderColor,d=u.box,g=u.screenBox,y=u.dataBox,v=u.viewBox,_=u.pixelRatio,w=(c[0]-y[0])*(v[2]-v[0])/(y[2]-y[0])+v[0],x=(c[1]-y[1])*(v[3]-v[1])/(y[3]-y[1])+v[1],E=(c[2]-y[0])*(v[2]-v[0])/(y[2]-y[0])+v[0],k=(c[3]-y[1])*(v[3]-v[1])/(y[3]-y[1])+v[1];if(w=Math.max(w,v[0]),x=Math.max(x,v[1]),E=Math.min(E,v[2]),k=Math.min(k,v[3]),!(E<w||k<x)){d.bind();var C=g[2]-g[0],L=g[3]-g[1];if(this.outerFill&&(d.drawBox(0,0,C,x,s),d.drawBox(0,x,w,k,s),d.drawBox(0,k,C,L,s),d.drawBox(E,x,C,k,s)),this.innerFill&&d.drawBox(w,x,E,k,f),l>0){var P=l*_;d.drawBox(w-P,x-P,E+P,x+P,o),d.drawBox(w-P,k-P,E+P,k+P,o),d.drawBox(w-P,x-P,w+P,k+P,o),d.drawBox(E-P,x-P,E+P,k+P,o)}}}},r.update=function(u){this.innerFill=!!(u=u||{}).innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},r.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":335,"gl-buffer":267,"gl-shader":339}],338:[function(h,G,X){"use strict";G.exports=function(l,f){var s=f[0],o=f[1];return new u(l,i(l,s,o,{}),m.mallocUint8(s*o*4))};var i=h("gl-fbo"),m=h("typedarray-pool"),b=h("ndarray"),p=h("bit-twiddle").nextPow2;function r(l,f,s,o,d){this.coord=[l,f],this.id=s,this.value=o,this.distance=d}function u(l,f,s){this.gl=l,this.fbo=f,this.buffer=s,this._readTimeout=null;var o=this;this._readCallback=function(){o.gl&&(f.bind(),l.readPixels(0,0,f.shape[0],f.shape[1],l.RGBA,l.UNSIGNED_BYTE,o.buffer),o._readTimeout=null)}}var c=u.prototype;Object.defineProperty(c,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(l){if(this.gl){this.fbo.shape=l;var f=this.fbo.shape[0],s=this.fbo.shape[1];if(s*f*4>this.buffer.length){m.free(this.buffer);for(var o=this.buffer=m.mallocUint8(p(s*f*4)),d=0;d<s*f*4;++d)o[d]=255}return l}}}),c.begin=function(){var l=this.gl;l&&(this.fbo.bind(),l.clearColor(1,1,1,1),l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT))},c.end=function(){var l=this.gl;l&&(l.bindFramebuffer(l.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},c.query=function(l,f,s){if(!this.gl)return null;var o=this.fbo.shape.slice();l|=0,f|=0,"number"!=typeof s&&(s=1);var d=0|Math.min(Math.max(l-s,0),o[0]),g=0|Math.min(Math.max(l+s,0),o[0]),y=0|Math.min(Math.max(f-s,0),o[1]),v=0|Math.min(Math.max(f+s,0),o[1]);if(g<=d||v<=y)return null;var _=[g-d,v-y],w=b(this.buffer,[_[0],_[1],4],[4,4*o[0],1],4*(d+o[0]*y)),x=function(C,L,P){for(var A=1e8,I=-1,D=-1,R=C.shape[0],S=C.shape[1],N=0;N<R;N++)for(var B=0;B<S;B++){var H=C.get(N,B,0),Y=C.get(N,B,1),Q=C.get(N,B,2),ne=C.get(N,B,3);if(H<255||Y<255||Q<255||ne<255){var ae=L-N,te=P-B,K=ae*ae+te*te;K<A&&(A=K,I=N,D=B)}}return[I,D,A]}(w.hi(_[0],_[1],1),s,s),E=x[0],k=x[1];return E<0||Math.pow(this.radius,2)<x[2]?null:new r(E+d|0,k+y|0,w.get(E,k,0),[w.get(E,k,1),w.get(E,k,2),w.get(E,k,3)],Math.sqrt(x[2]))},c.dispose=function(){this.gl&&(this.fbo.dispose(),m.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":104,"gl-fbo":276,ndarray:483,"typedarray-pool":617}],339:[function(h,G,X){"use strict";var i=h("./lib/create-uniforms"),m=h("./lib/create-attributes"),b=h("./lib/reflect"),p=h("./lib/shader-cache"),r=h("./lib/runtime-reflect"),u=h("./lib/GLError");function c(s){this.gl=s,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var l=c.prototype;function f(s,o){return s.name<o.name?-1:1}l.bind=function(){var s;this.program||this._relink();var o=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),d=this.gl.lastAttribCount;if(o>d)for(s=d;s<o;s++)this.gl.enableVertexAttribArray(s);else if(d>o)for(s=o;s<d;s++)this.gl.disableVertexAttribArray(s);this.gl.lastAttribCount=o,this.gl.useProgram(this.program)},l.dispose=function(){for(var s=this.gl.lastAttribCount,o=0;o<s;o++)this.gl.disableVertexAttribArray(o);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},l.update=function(s,o,d,g){if(!o||1===arguments.length){var y=s;s=y.vertex,o=y.fragment,d=y.uniforms,g=y.attributes}var v=this,_=v.gl,w=v._vref;v._vref=p.shader(_,_.VERTEX_SHADER,s),w&&w.dispose(),v.vertShader=v._vref.shader;var x=this._fref;if(v._fref=p.shader(_,_.FRAGMENT_SHADER,o),x&&x.dispose(),v.fragShader=v._fref.shader,!d||!g){var E=_.createProgram();if(_.attachShader(E,v.fragShader),_.attachShader(E,v.vertShader),_.linkProgram(E),!_.getProgramParameter(E,_.LINK_STATUS)){var k=_.getProgramInfoLog(E);throw new u(k,"Error linking program:"+k)}d=d||r.uniforms(_,E),g=g||r.attributes(_,E),_.deleteProgram(E)}(g=g.slice()).sort(f);var C,L=[],P=[],A=[];for(C=0;C<g.length;++C){var I=g[C];if(I.type.indexOf("mat")>=0){for(var D=0|I.type.charAt(I.type.length-1),R=new Array(D),S=0;S<D;++S)R[S]=A.length,P.push(I.name+"["+S+"]"),"number"==typeof I.location?A.push(I.location+S):Array.isArray(I.location)&&I.location.length===D&&"number"==typeof I.location[S]?A.push(0|I.location[S]):A.push(-1);L.push({name:I.name,type:I.type,locations:R})}else L.push({name:I.name,type:I.type,locations:[A.length]}),P.push(I.name),A.push("number"==typeof I.location?0|I.location:-1)}var N=0;for(C=0;C<A.length;++C)if(A[C]<0){for(;A.indexOf(N)>=0;)N+=1;A[C]=N}var B=new Array(d.length);function H(){v.program=p.program(_,v._vref,v._fref,P,A);for(var Y=0;Y<d.length;++Y)B[Y]=_.getUniformLocation(v.program,d[Y].name)}H(),v._relink=H,v.types={uniforms:b(d),attributes:b(g)},v.attributes=m(_,v,L,A),Object.defineProperty(v,"uniforms",i(_,v,d,B))},G.exports=function(s,o,d,g,y){var v=new c(s);return v.update(o,d,g,y),v}},{"./lib/GLError":340,"./lib/create-attributes":341,"./lib/create-uniforms":342,"./lib/reflect":343,"./lib/runtime-reflect":344,"./lib/shader-cache":345}],340:[function(h,G,X){function i(m,b,p){this.shortMessage=b||"",this.longMessage=p||"",this.rawError=m||"",this.message="gl-shader: "+(b||m||"")+(p?"\n"+p:""),this.stack=(new Error).stack}(i.prototype=new Error).name="GLError",i.prototype.constructor=i,G.exports=i},{}],341:[function(h,G,X){"use strict";G.exports=function(u,c,l,f){for(var s={},o=0,d=l.length;o<d;++o){var g=l[o],y=g.name,v=g.type,_=g.locations;switch(v){case"bool":case"int":case"float":p(u,c,_[0],f,1,s,y);break;default:if(v.indexOf("vec")>=0){if((w=v.charCodeAt(v.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+y+": "+v);p(u,c,_[0],f,w,s,y)}else{if(!(v.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+y+": "+v);var w;if((w=v.charCodeAt(v.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+y+": "+v);r(u,c,_,f,w,s,y)}}}return s};var i=h("./GLError");function m(u,c,l,f,s,o){this._gl=u,this._wrapper=c,this._index=l,this._locations=f,this._dimension=s,this._constFunc=o}var b=m.prototype;function p(u,c,l,f,s,o,d){for(var g=["gl","v"],y=[],v=0;v<s;++v)g.push("x"+v),y.push("x"+v);g.push("if(x0.length===void 0){return gl.vertexAttrib"+s+"f(v,"+y.join()+")}else{return gl.vertexAttrib"+s+"fv(v,x0)}");var _=Function.apply(null,g),w=new m(u,c,l,f,s,_);Object.defineProperty(o,d,{set:function(x){return u.disableVertexAttribArray(f[l]),_(u,f[l],x),x},get:function(){return w},enumerable:!0})}function r(u,c,l,f,s,o,d){for(var g=new Array(s),y=new Array(s),v=0;v<s;++v)p(u,c,l[v],f,s,g,v),y[v]=g[v];Object.defineProperty(g,"location",{set:function(x){if(Array.isArray(x))for(var E=0;E<s;++E)y[E].location=x[E];else for(E=0;E<s;++E)y[E].location=x+E;return x},get:function(){for(var x=new Array(s),E=0;E<s;++E)x[E]=f[l[E]];return x},enumerable:!0}),g.pointer=function(x,E,k,C){x=x||u.FLOAT,E=!!E,k=k||s*s,C=C||0;for(var L=0;L<s;++L){var P=f[l[L]];u.vertexAttribPointer(P,s,x,E,k,C+L*s),u.enableVertexAttribArray(P)}};var _=new Array(s),w=u["vertexAttrib"+s+"fv"];Object.defineProperty(o,d,{set:function(x){for(var E=0;E<s;++E){var k=f[l[E]];if(u.disableVertexAttribArray(k),Array.isArray(x[0]))w.call(u,k,x[E]);else{for(var C=0;C<s;++C)_[C]=x[s*E+C];w.call(u,k,_)}}return x},get:function(){return g},enumerable:!0})}b.pointer=function(u,c,l,f){var s=this._gl,o=this._locations[this._index];s.vertexAttribPointer(o,this._dimension,u||s.FLOAT,!!c,l||0,f||0),s.enableVertexAttribArray(o)},b.set=function(u,c,l,f){return this._constFunc(this._locations[this._index],u,c,l,f)},Object.defineProperty(b,"location",{get:function(){return this._locations[this._index]},set:function(u){return u!==this._locations[this._index]&&(this._locations[this._index]=0|u,this._wrapper.program=null),0|u}})},{"./GLError":340}],342:[function(h,G,X){"use strict";var i=h("./reflect"),m=h("./GLError");function b(r){return new Function("y","return function(){return y}")(r)}function p(r,u){for(var c=new Array(r),l=0;l<r;++l)c[l]=u;return c}G.exports=function(r,u,c,l){function f(y,v,_){switch(_){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+v+"],obj"+y+")";case"float":return"gl.uniform1f(locations["+v+"],obj"+y+")";default:var w=_.indexOf("vec");if(!(0<=w&&w<=1&&_.length===4+w)){if(0===_.indexOf("mat")&&4===_.length){var x;if((x=_.charCodeAt(_.length-1)-48)<2||x>4)throw new m("","Invalid uniform dimension type for matrix "+name+": "+_);return"gl.uniformMatrix"+x+"fv(locations["+v+"],false,obj"+y+")"}throw new m("","Unknown uniform data type for "+name+": "+_)}if((x=_.charCodeAt(_.length-1)-48)<2||x>4)throw new m("","Invalid data type");switch(_.charAt(0)){case"b":case"i":return"gl.uniform"+x+"iv(locations["+v+"],obj"+y+")";case"v":return"gl.uniform"+x+"fv(locations["+v+"],obj"+y+")";default:throw new m("","Unrecognized data type for vector "+name+": "+_)}}}function s(y){for(var v=["return function updateProperty(obj){"],_=function C(L,P){if("object"!=typeof P)return[[L,P]];var A=[];for(var I in P){var D=P[I],R=L;parseInt(I)+""===I?R+="["+I+"]":R+="."+I,"object"==typeof D?A.push.apply(A,C(R,D)):A.push([R,D])}return A}("",y),w=0;w<_.length;++w){var x=_[w],k=x[1];l[k]&&v.push(f(x[0],k,c[k].type))}return v.push("return obj}"),new Function("gl","locations",v.join("\n"))(r,l)}function o(y,v,_){if("object"==typeof _){var w=d(_);Object.defineProperty(y,v,{get:b(w),set:s(_),enumerable:!0,configurable:!1})}else l[_]?Object.defineProperty(y,v,{get:(x=_,new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+x+"])}")(r,u,l)),set:s(_),enumerable:!0,configurable:!1}):y[v]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var k=E.indexOf("vec");if(0<=k&&k<=1&&E.length===4+k){if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new m("","Invalid data type");return"b"===E.charAt(0)?p(C,!1):p(C,0)}if(0===E.indexOf("mat")&&4===E.length){var C;if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new m("","Invalid uniform dimension type for matrix "+name+": "+E);return p(C*C,0)}throw new m("","Unknown uniform data type for "+name+": "+E)}}(c[_].type);var x}function d(y){var v;if(Array.isArray(y)){v=new Array(y.length);for(var _=0;_<y.length;++_)o(v,_,y[_])}else for(var w in v={},y)o(v,w,y[w]);return v}var g=i(c,!0);return{get:b(d(g)),set:s(g),enumerable:!0,configurable:!0}}},{"./GLError":340,"./reflect":343}],343:[function(h,G,X){"use strict";G.exports=function(i,m){for(var b={},p=0;p<i.length;++p)for(var r=i[p].name.split("."),u=b,c=0;c<r.length;++c){var l=r[c].split("[");if(l.length>1){l[0]in u||(u[l[0]]=[]),u=u[l[0]];for(var f=1;f<l.length;++f){var s=parseInt(l[f]);f<l.length-1||c<r.length-1?(s in u||(u[s]=f<l.length-1?[]:{}),u=u[s]):u[s]=m?p:i[p].type}}else c<r.length-1?(l[0]in u||(u[l[0]]={}),u=u[l[0]]):u[l[0]]=m?p:i[p].type}return b}},{}],344:[function(h,G,X){"use strict";X.uniforms=function(p,r){for(var u=p.getProgramParameter(r,p.ACTIVE_UNIFORMS),c=[],l=0;l<u;++l){var f=p.getActiveUniform(r,l);if(f){var s=b(p,f.type);if(f.size>1)for(var o=0;o<f.size;++o)c.push({name:f.name.replace("[0]","["+o+"]"),type:s});else c.push({name:f.name,type:s})}}return c},X.attributes=function(p,r){for(var u=p.getProgramParameter(r,p.ACTIVE_ATTRIBUTES),c=[],l=0;l<u;++l){var f=p.getActiveAttrib(r,l);f&&c.push({name:f.name,type:b(p,f.type)})}return c};var i={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},m=null;function b(p,r){if(!m){var u=Object.keys(i);m={};for(var c=0;c<u.length;++c){var l=u[c];m[p[l]]=i[l]}}return m[r]}},{}],345:[function(h,G,X){"use strict";X.shader=function(f,s,o){return l(f).getShaderReference(s,o)},X.program=function(f,s,o,d,g){return l(f).getProgram(s,o,d,g)};var i=h("./GLError"),m=h("gl-format-compiler-error"),b=new("undefined"==typeof WeakMap?h("weakmap-shim"):WeakMap),p=0;function r(f,s,o,d,g,y,v){this.id=f,this.src=s,this.type=o,this.shader=d,this.count=y,this.programs=[],this.cache=v}function u(f){this.gl=f,this.shaders=[{},{}],this.programs={}}r.prototype.dispose=function(){if(0==--this.count){for(var f=this.cache,s=f.gl,o=this.programs,d=0,g=o.length;d<g;++d){var y=f.programs[o[d]];y&&(delete f.programs[d],s.deleteProgram(y))}s.deleteShader(this.shader),delete f.shaders[this.type===s.FRAGMENT_SHADER|0][this.src]}};var c=u.prototype;function l(f){var s=b.get(f);return s||(s=new u(f),b.set(f,s)),s}c.getShaderReference=function(f,s){var o=this.gl,d=this.shaders[f===o.FRAGMENT_SHADER|0],g=d[s];if(g&&o.isShader(g.shader))g.count+=1;else{var y=function(v,_,w){var x=v.createShader(_);if(v.shaderSource(x,w),v.compileShader(x),!v.getShaderParameter(x,v.COMPILE_STATUS)){var E=v.getShaderInfoLog(x);try{var k=m(E,w,_)}catch(C){throw console.warn("Failed to format compiler error: "+C),new i(E,"Error compiling shader:\n"+E)}throw new i(E,k.short,k.long)}return x}(o,f,s);g=d[s]=new r(p++,s,f,y,[],1,this)}return g},c.getProgram=function(f,s,o,d){var g=[f.id,s.id,o.join(":"),d.join(":")].join("@"),y=this.programs[g];return y&&this.gl.isProgram(y)||(this.programs[g]=y=function(v,_,w,x,E){var k=v.createProgram();v.attachShader(k,_),v.attachShader(k,w);for(var C=0;C<x.length;++C)v.bindAttribLocation(k,E[C],x[C]);if(v.linkProgram(k),!v.getProgramParameter(k,v.LINK_STATUS)){var L=v.getProgramInfoLog(k);throw new i(L,"Error linking program: "+L)}return k}(this.gl,f.shader,s.shader,o,d),f.programs.push(g),s.programs.push(g)),y}},{"./GLError":340,"gl-format-compiler-error":277,"weakmap-shim":628}],346:[function(h,G,X){"use strict";function i(b){this.plot=b,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}G.exports=function(b,p){var r=new i(b);return r.update(p),b.addOverlay(r),r};var m=i.prototype;m.update=function(b){this.enable=((b=b||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(b.width||[1,1,1,1]).slice(),this.color=(b.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(p){return p.slice()}),this.center=(b.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},m.draw=function(){var b=this.enable,p=this.width,r=this.color,u=this.center,c=this.plot,l=c.line,f=c.dataBox,s=c.viewBox;if(l.bind(),f[0]<=u[0]&&u[0]<=f[2]&&f[1]<=u[1]&&u[1]<=f[3]){var o=s[0]+(u[0]-f[0])/(f[2]-f[0])*(s[2]-s[0]),d=s[1]+(u[1]-f[1])/(f[3]-f[1])*(s[3]-s[1]);b[0]&&l.drawLine(o,d,s[0],d,p[0],r[0]),b[1]&&l.drawLine(o,d,o,s[1],p[1],r[1]),b[2]&&l.drawLine(o,d,s[2],d,p[2],r[2]),b[3]&&l.drawLine(o,d,o,s[3],p[3],r[3])}},m.dispose=function(){this.plot.removeOverlay(this)}},{}],347:[function(h,G,X){arguments[4][265][0].apply(X,arguments)},{dup:265}],348:[function(h,G,X){"use strict";var i=h("glslify"),m=h("gl-shader"),b=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),p=i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);G.exports=function(r){return m(r,b,p,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":339,glslify:347}],349:[function(h,G,X){"use strict";var i=h("gl-buffer"),m=h("gl-vao"),b=h("./shaders/index");G.exports=function(s,o){var d=[];function g(x,E,k,C,L,P){var A=[x,E,k,0,0,0,1];A[C+3]=1,A[C]=L,d.push.apply(d,A),A[6]=-1,d.push.apply(d,A),A[C]=P,d.push.apply(d,A),d.push.apply(d,A),A[6]=1,d.push.apply(d,A),A[C]=L,d.push.apply(d,A)}g(0,0,0,0,0,1),g(0,0,0,1,0,1),g(0,0,0,2,0,1),g(1,0,0,1,-1,1),g(1,0,0,2,-1,1),g(0,1,0,0,-1,1),g(0,1,0,2,-1,1),g(0,0,1,0,-1,1),g(0,0,1,1,-1,1);var y=i(s,d),v=m(s,[{type:s.FLOAT,buffer:y,size:3,offset:0,stride:28},{type:s.FLOAT,buffer:y,size:3,offset:12,stride:28},{type:s.FLOAT,buffer:y,size:1,offset:24,stride:28}]),_=b(s);_.attributes.position.location=0,_.attributes.color.location=1,_.attributes.weight.location=2;var w=new r(s,y,v,_);return w.update(o),w};var p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(s,o,d,g){this.gl=s,this.buffer=o,this.vao=d,this.shader=g,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=r.prototype,c=[0,0,0],l=[0,0,0],f=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(s){},u.draw=function(s){var o=this.gl,d=this.vao,g=this.shader;d.bind(),g.bind();var y,v=s.model||p,_=s.view||p,w=s.projection||p;this.axes&&(y=this.axes.lastCubeProps.axis);for(var x=c,E=l,k=0;k<3;++k)y&&y[k]<0?(x[k]=this.bounds[0][k],E[k]=this.bounds[1][k]):(x[k]=this.bounds[1][k],E[k]=this.bounds[0][k]);for(f[0]=o.drawingBufferWidth,f[1]=o.drawingBufferHeight,g.uniforms.model=v,g.uniforms.view=_,g.uniforms.projection=w,g.uniforms.coordinates=[this.position,x,E],g.uniforms.colors=this.colors,g.uniforms.screenShape=f,k=0;k<3;++k)g.uniforms.lineWidth=this.lineWidth[k]*this.pixelRatio,this.enabled[k]&&(d.draw(o.TRIANGLES,6,6*k),this.drawSides[k]&&d.draw(o.TRIANGLES,12,18+12*k));d.unbind()},u.update=function(s){s&&("bounds"in s&&(this.bounds=s.bounds),"position"in s&&(this.position=s.position),"lineWidth"in s&&(this.lineWidth=s.lineWidth),"colors"in s&&(this.colors=s.colors),"enabled"in s&&(this.enabled=s.enabled),"drawSides"in s&&(this.drawSides=s.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":348,"gl-buffer":267,"gl-vao":361}],350:[function(h,G,X){var i=h("glslify"),m=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),b=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),p=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),r=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);X.meshShader={vertex:m,fragment:b,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},X.pickShader={vertex:p,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:351}],351:[function(h,G,X){arguments[4][265][0].apply(X,arguments)},{dup:265}],352:[function(h,G,X){"use strict";var i=h("gl-vec3"),m=h("gl-vec4"),b=["xyz","xzy","yxz","yzx","zxy","zyx"],r=function(s,o){var d,g=s.length;for(d=0;d<g;d++){var y=s[d];if(y===o)return d;if(y>o)return d-1}return d},u=function(s,o,d){return s<o?o:s>d?d:s},c=function(s){var o=1/0;s.sort(function(v,_){return v-_});for(var d=s.length,g=1;g<d;g++){var y=Math.abs(s[g]-s[g-1]);y<o&&(o=y)}return o};G.exports=function(s,o){var d=s.startingPositions,g=s.maxLength||1e3,y=s.tubeSize||1,v=s.absoluteTubeSize,_=s.gridFill||"+x+y+z",w={};-1!==_.indexOf("-x")&&(w.reversedX=!0),-1!==_.indexOf("-y")&&(w.reversedY=!0),-1!==_.indexOf("-z")&&(w.reversedZ=!0),w.filled=b.indexOf(_.replace(/-/g,"").replace(/\+/g,""));var fe,he,de,be,x=s.getVelocity||function(fe){return function(he,de,be){var pe=de.vectors,Te=de.meshgrid,ye=he[0],ke=he[1],ze=he[2],je=Te[0].length,Ie=Te[1].length,Ce=Te[2].length,_e=r(Te[0],ye),we=r(Te[1],ke),Se=r(Te[2],ze),Oe=_e+1,Be=we+1,He=Se+1;if(_e=u(_e,0,je-1),Oe=u(Oe,0,je-1),we=u(we,0,Ie-1),Be=u(Be,0,Ie-1),Se=u(Se,0,Ce-1),He=u(He,0,Ce-1),_e<0||we<0||Se<0||Oe>je-1||Be>Ie-1||He>Ce-1)return i.create();var Xe,nt,et,qe,Ye,ot,at=Te[0][_e],_t=Te[1][we],Ht=Te[2][Se],At=(ye-at)/(Te[0][Oe]-at),ht=(ke-_t)/(Te[1][Be]-_t),st=(ze-Ht)/(Te[2][He]-Ht);switch(isFinite(At)||(At=.5),isFinite(ht)||(ht=.5),isFinite(st)||(st=.5),be.reversedX&&(_e=je-1-_e,Oe=je-1-Oe),be.reversedY&&(we=Ie-1-we,Be=Ie-1-Be),be.reversedZ&&(Se=Ce-1-Se,He=Ce-1-He),be.filled){case 5:Ye=Se,ot=He,et=we*Ce,qe=Be*Ce,Xe=_e*Ce*Ie,nt=Oe*Ce*Ie;break;case 4:Ye=Se,ot=He,Xe=_e*Ce,nt=Oe*Ce,et=we*Ce*je,qe=Be*Ce*je;break;case 3:et=we,qe=Be,Ye=Se*Ie,ot=He*Ie,Xe=_e*Ie*Ce,nt=Oe*Ie*Ce;break;case 2:et=we,qe=Be,Xe=_e*Ie,nt=Oe*Ie,Ye=Se*Ie*je,ot=He*Ie*je;break;case 1:Xe=_e,nt=Oe,Ye=Se*je,ot=He*je,et=we*je*Ce,qe=Be*je*Ce;break;default:Xe=_e,nt=Oe,et=we*je,qe=Be*je,Ye=Se*je*Ie,ot=He*je*Ie}var Bt=pe[Xe+et+Ye],gn=pe[Xe+et+ot],hn=pe[Xe+qe+Ye],We=pe[Xe+qe+ot],it=pe[nt+et+Ye],qt=pe[nt+et+ot],Ge=pe[nt+qe+Ye],Pe=pe[nt+qe+ot],Ee=i.create(),Ne=i.create(),Ve=i.create(),Ke=i.create();i.lerp(Ee,Bt,it,At),i.lerp(Ne,gn,qt,At),i.lerp(Ve,hn,Ge,At),i.lerp(Ke,We,Pe,At);var bt=i.create(),gt=i.create();i.lerp(bt,Ee,Ve,ht),i.lerp(gt,Ne,Ke,ht);var pt=i.create();return i.lerp(pt,bt,gt,st),pt}(fe,s,w)},E=s.getDivergence||function(fe,he){var de=i.create(),be=1e-4;i.add(de,fe,[be,0,0]);var pe=x(de);i.subtract(pe,pe,he),i.scale(pe,pe,1/be),i.add(de,fe,[0,be,0]);var Te=x(de);i.subtract(Te,Te,he),i.scale(Te,Te,1/be),i.add(de,fe,[0,0,be]);var ye=x(de);return i.subtract(ye,ye,he),i.scale(ye,ye,1/be),i.add(de,pe,Te),i.add(de,de,ye),de},k=[],C=o[0][0],L=o[0][1],P=o[0][2],A=o[1][0],I=o[1][1],D=o[1][2],S=10*i.distance(o[0],o[1])/g,N=S*S,B=1,H=0,Y=d.length;Y>1&&(B=function(fe){for(var he=[],de=[],be=[],pe={},Te={},ye={},ke=fe.length,ze=0;ze<ke;ze++){var je=fe[ze],Ie=je[0],Ce=je[1],_e=je[2];pe[Ie]||(he.push(Ie),pe[Ie]=!0),Te[Ce]||(de.push(Ce),Te[Ce]=!0),ye[_e]||(be.push(_e),ye[_e]=!0)}var we=c(he),Se=c(de),Oe=c(be),Be=Math.min(we,Se,Oe);return isFinite(Be)?Be:1}(d));for(var Q=0;Q<Y;Q++){var ne=i.create();i.copy(ne,d[Q]);var ae=[ne],te=[],K=x(ne),q=ne;te.push(K);var re=[],V=E(ne,K),W=i.length(V);isFinite(W)&&W>H&&(H=W),re.push(W),k.push({points:ae,velocities:te,divergences:re});for(var Z=0;Z<100*g&&ae.length<g&&(he=void 0,de=void 0,be=void 0,de=(fe=ne)[1],be=fe[2],!((he=fe[0])<C||he>A||de<L||de>I||be<P||be>D));){Z++;var oe=i.clone(K),ie=i.squaredLength(oe);if(0===ie)break;ie>N&&i.scale(oe,oe,S/Math.sqrt(ie)),i.add(oe,oe,ne),K=x(oe),i.squaredDistance(q,oe)-N>-1e-4*N&&(ae.push(oe),q=oe,te.push(K),V=E(oe,K),W=i.length(V),isFinite(W)&&W>H&&(H=W),re.push(W)),ne=oe}}var ue=function(s,o,d,g){for(var y=0,v=0;v<s.length;v++)for(var _=s[v].velocities,w=0;w<_.length;w++)y=Math.max(y,i.length(_[w]));var x=s.map(function(S){return function(N,B,H,Y){for(var Q=N.points,ne=N.velocities,ae=N.divergences,te=[],K=[],q=[],re=[],V=[],W=[],Z=0,oe=0,ie=m.create(),ue=m.create(),fe=0;fe<Q.length;fe++){var he=Q[fe],de=ne[fe],be=ae[fe];0===B&&(be=.05*H),oe=i.length(de)/Y,ie=m.create(),i.copy(ie,de),ie[3]=be;for(var pe=0;pe<8;pe++)V[pe]=[he[0],he[1],he[2],pe];if(re.length>0)for(pe=0;pe<8;pe++){var Te=(pe+1)%8;te.push(re[pe],V[pe],V[Te],V[Te],re[Te],re[pe]),q.push(ue,ie,ie,ie,ue,ue),W.push(Z,oe,oe,oe,Z,Z);var ye=te.length;K.push([ye-6,ye-5,ye-4],[ye-3,ye-2,ye-1])}var ke=re;re=V,V=ke;var ze=ue;ue=ie,ie=ze;var je=Z;Z=oe,oe=je}return{positions:te,cells:K,vectors:q,vertexIntensity:W}}(S,d,g,y)}),E=[],k=[],C=[],L=[];for(v=0;v<x.length;v++){var P=x[v],A=E.length;for(E=E.concat(P.positions),C=C.concat(P.vectors),L=L.concat(P.vertexIntensity),w=0;w<P.cells.length;w++){var I=P.cells[w],D=[];k.push(D);for(var R=0;R<I.length;R++)D.push(I[R]+A)}}return{positions:E,cells:k,vectors:C,vertexIntensity:L,colormap:o}}(k,s.colormap,H,B);return v?ue.tubeScale=v:(0===H&&(H=1),ue.tubeScale=.5*y*B/H),ue};var l=h("./lib/shaders"),f=h("gl-cone3d").createMesh;G.exports.createTubeMesh=function(s,o){return f(s,o,{shaders:l,traceType:"streamtube"})}},{"./lib/shaders":350,"gl-cone3d":268,"gl-vec3":380,"gl-vec4":416}],353:[function(h,G,X){var i=h("gl-shader"),m=h("glslify"),b=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),p=m(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),r=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),u=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);X.createShader=function(c){var l=i(c,b,p,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return l.attributes.uv.location=0,l.attributes.f.location=1,l.attributes.normal.location=2,l},X.createPickShader=function(c){var l=i(c,b,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return l.attributes.uv.location=0,l.attributes.f.location=1,l.attributes.normal.location=2,l},X.createContourShader=function(c){var l=i(c,r,p,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return l.attributes.uv.location=0,l.attributes.f.location=1,l},X.createPickContourShader=function(c){var l=i(c,r,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return l.attributes.uv.location=0,l.attributes.f.location=1,l}},{"gl-shader":339,glslify:442}],354:[function(h,G,X){"use strict";G.exports=function(K){var q=K.gl,re=_(q),V=x(q),W=w(q),Z=E(q),oe=m(q),ie=b(q,[{buffer:oe,size:4,stride:40,offset:0},{buffer:oe,size:3,stride:40,offset:16},{buffer:oe,size:3,stride:40,offset:28}]),ue=m(q),fe=b(q,[{buffer:ue,size:4,stride:20,offset:0},{buffer:ue,size:1,stride:20,offset:16}]),he=m(q),de=b(q,[{buffer:he,size:2,type:q.FLOAT}]),be=p(q,1,256,q.RGBA,q.UNSIGNED_BYTE);be.minFilter=q.LINEAR,be.magFilter=q.LINEAR;var pe=new A(q,[0,0],[[0,0,0],[0,0,0]],re,V,oe,ie,be,W,Z,ue,fe,he,de,[0,0,0]),Te={levels:[[],[],[]]};for(var ye in K)Te[ye]=K[ye];return Te.colormap=Te.colormap||"jet",pe.update(Te),pe};var i=h("bit-twiddle"),m=h("gl-buffer"),b=h("gl-vao"),p=h("gl-texture2d"),r=h("typedarray-pool"),u=h("colormap"),c=h("ndarray-ops"),l=h("ndarray-pack"),f=h("ndarray"),s=h("surface-nets"),o=h("gl-mat4/multiply"),d=h("gl-mat4/invert"),g=h("binary-search-bounds"),y=h("ndarray-gradient"),v=h("./lib/shaders"),_=v.createShader,w=v.createContourShader,x=v.createPickShader,E=v.createPickContourShader,k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],C=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],L=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function P(K,q,re,V,W){this.position=K,this.index=q,this.uv=re,this.level=V,this.dataCoordinate=W}function A(K,q,re,V,W,Z,oe,ie,ue,fe,he,de,be,pe,Te){this.gl=K,this.shape=q,this.bounds=re,this.objectOffset=Te,this.intensityBounds=[],this._shader=V,this._pickShader=W,this._coordinateBuffer=Z,this._vao=oe,this._colorMap=ie,this._contourShader=ue,this._contourPickShader=fe,this._contourBuffer=he,this._contourVAO=de,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new P([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=be,this._dynamicVAO=pe,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[f(r.mallocFloat(1024),[0,0]),f(r.mallocFloat(1024),[0,0]),f(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var K=0;K<3;++K){var q=L[K],re=(K+2)%3;q[(K+1)%3+0]=1,q[re+3]=1,q[K+6]=1}}();var I=A.prototype;I.genColormap=function(K,q){var re=!1,V=l([u({colormap:K,nshades:256,format:"rgba"}).map(function(W,Z){var oe=q?function(ie,ue){if(!ue||!ue.length)return 1;for(var fe=0;fe<ue.length;++fe){if(ue.length<2)return 1;if(ue[fe][0]===ie)return ue[fe][1];if(ue[fe][0]>ie&&fe>0){var he=(ue[fe][0]-ie)/(ue[fe][0]-ue[fe-1][0]);return ue[fe][1]*(1-he)+he*ue[fe-1][1]}}return 1}(Z/255,q):W[3];return oe<1&&(re=!0),[W[0],W[1],W[2],255*oe]})]);return c.divseq(V,255),this.hasAlphaScale=re,V},I.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},I.isOpaque=function(){return!this.isTransparent()},I.pickSlots=1,I.setPickBase=function(K){this.pickId=K};var D=[0,0,0],R={showSurface:!1,showContour:!1,projections:[k.slice(),k.slice(),k.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function S(K,q){var re,V,W,Z=q.axes&&q.axes.lastCubeProps.axis||D,oe=q.showSurface,ie=q.showContour;for(re=0;re<3;++re)for(oe=oe||q.surfaceProject[re],V=0;V<3;++V)ie=ie||q.contourProject[re][V];for(re=0;re<3;++re){var ue=R.projections[re];for(V=0;V<16;++V)ue[V]=0;for(V=0;V<4;++V)ue[5*V]=1;ue[5*re]=0,ue[12+re]=q.axesBounds[+(Z[re]>0)][re],o(ue,K.model,ue);var fe=R.clipBounds[re];for(W=0;W<2;++W)for(V=0;V<3;++V)fe[W][V]=K.clipBounds[W][V];fe[0][re]=-1e8,fe[1][re]=1e8}return R.showSurface=oe,R.showContour=ie,R}var N={model:k,view:k,projection:k,inverseModel:k.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},B=k.slice(),H=[1,0,0,0,1,0,0,0,1];function Y(K,q){K=K||{};var re=this.gl;re.disable(re.CULL_FACE),this._colorMap.bind(0);var V=N;V.model=K.model||k,V.view=K.view||k,V.projection=K.projection||k,V.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],V.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],V.objectOffset=this.objectOffset,V.contourColor=this.contourColor[0],V.inverseModel=d(V.inverseModel,V.model);for(var W=0;W<2;++W)for(var Z=V.clipBounds[W],oe=0;oe<3;++oe)Z[oe]=Math.min(Math.max(this.clipBounds[W][oe],-1e8),1e8);V.kambient=this.ambientLight,V.kdiffuse=this.diffuseLight,V.kspecular=this.specularLight,V.roughness=this.roughness,V.fresnel=this.fresnel,V.opacity=this.opacity,V.height=0,V.permutation=H,V.vertexColor=this.vertexColor;var ie=B;for(o(ie,V.view,V.model),o(ie,V.projection,ie),d(ie,ie),W=0;W<3;++W)V.eyePosition[W]=ie[12+W]/ie[15];var ue=ie[15];for(W=0;W<3;++W)ue+=this.lightPosition[W]*ie[4*W+3];for(W=0;W<3;++W){var fe=ie[12+W];for(oe=0;oe<3;++oe)fe+=ie[4*oe+W]*this.lightPosition[oe];V.lightPosition[W]=fe/ue}var he=S(V,this);if(he.showSurface){for(this._shader.bind(),this._shader.uniforms=V,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(re.TRIANGLES,this._vertexCount),W=0;W<3;++W)this.surfaceProject[W]&&this.vertexCount&&(this._shader.uniforms.model=he.projections[W],this._shader.uniforms.clipBounds=he.clipBounds[W],this._vao.draw(re.TRIANGLES,this._vertexCount));this._vao.unbind()}if(he.showContour){var de=this._contourShader;V.kambient=1,V.kdiffuse=0,V.kspecular=0,V.opacity=1,de.bind(),de.uniforms=V;var be=this._contourVAO;for(be.bind(),W=0;W<3;++W)for(de.uniforms.permutation=L[W],re.lineWidth(this.contourWidth[W]*this.pixelRatio),oe=0;oe<this.contourLevels[W].length;++oe)oe===this.highlightLevel[W]?(de.uniforms.contourColor=this.highlightColor[W],de.uniforms.contourTint=this.highlightTint[W]):0!==oe&&oe-1!==this.highlightLevel[W]||(de.uniforms.contourColor=this.contourColor[W],de.uniforms.contourTint=this.contourTint[W]),this._contourCounts[W][oe]&&(de.uniforms.height=this.contourLevels[W][oe],be.draw(re.LINES,this._contourCounts[W][oe],this._contourOffsets[W][oe]));for(W=0;W<3;++W)for(de.uniforms.model=he.projections[W],de.uniforms.clipBounds=he.clipBounds[W],oe=0;oe<3;++oe)if(this.contourProject[W][oe]){de.uniforms.permutation=L[oe],re.lineWidth(this.contourWidth[oe]*this.pixelRatio);for(var pe=0;pe<this.contourLevels[oe].length;++pe)pe===this.highlightLevel[oe]?(de.uniforms.contourColor=this.highlightColor[oe],de.uniforms.contourTint=this.highlightTint[oe]):0!==pe&&pe-1!==this.highlightLevel[oe]||(de.uniforms.contourColor=this.contourColor[oe],de.uniforms.contourTint=this.contourTint[oe]),this._contourCounts[oe][pe]&&(de.uniforms.height=this.contourLevels[oe][pe],be.draw(re.LINES,this._contourCounts[oe][pe],this._contourOffsets[oe][pe]))}for(be.unbind(),(be=this._dynamicVAO).bind(),W=0;W<3;++W)if(0!==this._dynamicCounts[W])for(de.uniforms.model=V.model,de.uniforms.clipBounds=V.clipBounds,de.uniforms.permutation=L[W],re.lineWidth(this.dynamicWidth[W]*this.pixelRatio),de.uniforms.contourColor=this.dynamicColor[W],de.uniforms.contourTint=this.dynamicTint[W],de.uniforms.height=this.dynamicLevel[W],be.draw(re.LINES,this._dynamicCounts[W],this._dynamicOffsets[W]),oe=0;oe<3;++oe)this.contourProject[oe][W]&&(de.uniforms.model=he.projections[oe],de.uniforms.clipBounds=he.clipBounds[oe],be.draw(re.LINES,this._dynamicCounts[W],this._dynamicOffsets[W]));be.unbind()}}I.draw=function(K){return Y.call(this,K,!1)},I.drawTransparent=function(K){return Y.call(this,K,!0)};var Q={model:k,view:k,projection:k,inverseModel:k,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function ne(K,q){return Array.isArray(K)?[q(K[0]),q(K[1]),q(K[2])]:[q(K),q(K),q(K)]}function ae(K){return Array.isArray(K)?3===K.length?[K[0],K[1],K[2],1]:[K[0],K[1],K[2],K[3]]:[0,0,0,1]}function te(K){if(Array.isArray(K)){if(Array.isArray(K))return[ae(K[0]),ae(K[1]),ae(K[2])];var q=ae(K);return[q.slice(),q.slice(),q.slice()]}}I.drawPick=function(K){K=K||{};var q=this.gl;q.disable(q.CULL_FACE);var re=Q;re.model=K.model||k,re.view=K.view||k,re.projection=K.projection||k,re.shape=this._field[2].shape,re.pickId=this.pickId/255,re.lowerBound=this.bounds[0],re.upperBound=this.bounds[1],re.objectOffset=this.objectOffset,re.permutation=H;for(var V=0;V<2;++V)for(var W=re.clipBounds[V],Z=0;Z<3;++Z)W[Z]=Math.min(Math.max(this.clipBounds[V][Z],-1e8),1e8);var oe=S(re,this);if(oe.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=re,this._vao.bind(),this._vao.draw(q.TRIANGLES,this._vertexCount),V=0;V<3;++V)this.surfaceProject[V]&&(this._pickShader.uniforms.model=oe.projections[V],this._pickShader.uniforms.clipBounds=oe.clipBounds[V],this._vao.draw(q.TRIANGLES,this._vertexCount));this._vao.unbind()}if(oe.showContour){var ie=this._contourPickShader;ie.bind(),ie.uniforms=re;var ue=this._contourVAO;for(ue.bind(),Z=0;Z<3;++Z)for(q.lineWidth(this.contourWidth[Z]*this.pixelRatio),ie.uniforms.permutation=L[Z],V=0;V<this.contourLevels[Z].length;++V)this._contourCounts[Z][V]&&(ie.uniforms.height=this.contourLevels[Z][V],ue.draw(q.LINES,this._contourCounts[Z][V],this._contourOffsets[Z][V]));for(V=0;V<3;++V)for(ie.uniforms.model=oe.projections[V],ie.uniforms.clipBounds=oe.clipBounds[V],Z=0;Z<3;++Z)if(this.contourProject[V][Z]){ie.uniforms.permutation=L[Z],q.lineWidth(this.contourWidth[Z]*this.pixelRatio);for(var fe=0;fe<this.contourLevels[Z].length;++fe)this._contourCounts[Z][fe]&&(ie.uniforms.height=this.contourLevels[Z][fe],ue.draw(q.LINES,this._contourCounts[Z][fe],this._contourOffsets[Z][fe]))}ue.unbind()}},I.pick=function(K){if(!K||K.id!==this.pickId)return null;var q=this._field[2].shape,re=this._pickResult,V=q[0]*(K.value[0]+(K.value[2]>>4)/16)/255,W=Math.floor(V),Z=V-W,oe=q[1]*(K.value[1]+(15&K.value[2])/16)/255,ie=Math.floor(oe),ue=oe-ie;W+=1,ie+=1;var fe=re.position;fe[0]=fe[1]=fe[2]=0;for(var he=0;he<2;++he)for(var de=he?Z:1-Z,be=0;be<2;++be)for(var pe=W+he,Te=ie+be,ye=de*(be?ue:1-ue),ke=0;ke<3;++ke)fe[ke]+=this._field[ke].get(pe,Te)*ye;for(var ze=this._pickResult.level,je=0;je<3;++je)if(ze[je]=g.le(this.contourLevels[je],fe[je]),ze[je]<0)this.contourLevels[je].length>0&&(ze[je]=0);else if(ze[je]<this.contourLevels[je].length-1){var Ce=this.contourLevels[je][ze[je]+1];Math.abs(this.contourLevels[je][ze[je]]-fe[je])>Math.abs(Ce-fe[je])&&(ze[je]+=1)}for(re.index[0]=Z<.5?W:W+1,re.index[1]=ue<.5?ie:ie+1,re.uv[0]=V/q[0],re.uv[1]=oe/q[1],ke=0;ke<3;++ke)re.dataCoordinate[ke]=this._field[ke].get(re.index[0],re.index[1]);return re},I.padField=function(K,q){var re=q.shape.slice(),V=K.shape.slice();c.assign(K.lo(1,1).hi(re[0],re[1]),q),c.assign(K.lo(1).hi(re[0],1),q.hi(re[0],1)),c.assign(K.lo(1,V[1]-1).hi(re[0],1),q.lo(0,re[1]-1).hi(re[0],1)),c.assign(K.lo(0,1).hi(1,re[1]),q.hi(1)),c.assign(K.lo(V[0]-1,1).hi(1,re[1]),q.lo(re[0]-1)),K.set(0,0,q.get(0,0)),K.set(0,V[1]-1,q.get(0,re[1]-1)),K.set(V[0]-1,0,q.get(re[0]-1,0)),K.set(V[0]-1,V[1]-1,q.get(re[0]-1,re[1]-1))},I.update=function(K){this.objectOffset=(K=K||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in K&&(this.contourWidth=ne(K.contourWidth,Number)),"showContour"in K&&(this.showContour=ne(K.showContour,Boolean)),"showSurface"in K&&(this.showSurface=!!K.showSurface),"contourTint"in K&&(this.contourTint=ne(K.contourTint,Boolean)),"contourColor"in K&&(this.contourColor=te(K.contourColor)),"contourProject"in K&&(this.contourProject=ne(K.contourProject,function(Ut){return ne(Ut,Boolean)})),"surfaceProject"in K&&(this.surfaceProject=K.surfaceProject),"dynamicColor"in K&&(this.dynamicColor=te(K.dynamicColor)),"dynamicTint"in K&&(this.dynamicTint=ne(K.dynamicTint,Number)),"dynamicWidth"in K&&(this.dynamicWidth=ne(K.dynamicWidth,Number)),"opacity"in K&&(this.opacity=K.opacity),"opacityscale"in K&&(this.opacityscale=K.opacityscale),"colorBounds"in K&&(this.colorBounds=K.colorBounds),"vertexColor"in K&&(this.vertexColor=K.vertexColor?1:0),"colormap"in K&&this._colorMap.setPixels(this.genColormap(K.colormap,this.opacityscale));var q=K.field||K.coords&&K.coords[2]||null,re=!1;if(q||(q=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in K||"coords"in K){var V=(q.shape[0]+2)*(q.shape[1]+2);V>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(i.nextPow2(V))),this._field[2]=f(this._field[2].data,[q.shape[0]+2,q.shape[1]+2]),this.padField(this._field[2],q),this.shape=q.shape.slice();for(var W=this.shape,Z=0;Z<2;++Z)this._field[2].size>this._field[Z].data.length&&(r.freeFloat(this._field[Z].data),this._field[Z].data=r.mallocFloat(this._field[2].size)),this._field[Z]=f(this._field[Z].data,[W[0]+2,W[1]+2]);if(K.coords){var oe=K.coords;if(!Array.isArray(oe)||3!==oe.length)throw new Error("gl-surface: invalid coordinates for x/y");for(Z=0;Z<2;++Z){var ie=oe[Z];for(be=0;be<2;++be)if(ie.shape[be]!==W[be])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[Z],ie)}}else if(K.ticks){var ue=K.ticks;if(!Array.isArray(ue)||2!==ue.length)throw new Error("gl-surface: invalid ticks");for(Z=0;Z<2;++Z){var fe=ue[Z];if((Array.isArray(fe)||fe.length)&&(fe=f(fe)),fe.shape[0]!==W[Z])throw new Error("gl-surface: invalid tick length");var he=f(fe.data,W);he.stride[Z]=fe.stride[0],he.stride[1^Z]=0,this.padField(this._field[Z],he)}}else{for(Z=0;Z<2;++Z){var de=[0,0];de[Z]=1,this._field[Z]=f(this._field[Z].data,[W[0]+2,W[1]+2],de,0)}this._field[0].set(0,0,0);for(var be=0;be<W[0];++be)this._field[0].set(be+1,0,be);for(this._field[0].set(W[0]+1,0,W[0]-1),this._field[1].set(0,0,0),be=0;be<W[1];++be)this._field[1].set(0,be+1,be);this._field[1].set(0,W[1]+1,W[1]-1)}var pe=this._field,Te=f(r.mallocFloat(3*pe[2].size*2),[3,W[0]+2,W[1]+2,2]);for(Z=0;Z<3;++Z)y(Te.pick(Z),pe[Z],"mirror");var ye=f(r.mallocFloat(3*pe[2].size),[W[0]+2,W[1]+2,3]);for(Z=0;Z<W[0]+2;++Z)for(be=0;be<W[1]+2;++be){var ke=Te.get(0,Z,be,0),ze=Te.get(0,Z,be,1),je=Te.get(1,Z,be,0),Ie=Te.get(1,Z,be,1),Ce=Te.get(2,Z,be,0),_e=Te.get(2,Z,be,1),we=je*_e-Ie*Ce,Se=Ce*ze-_e*ke,Oe=ke*Ie-ze*je,Be=Math.sqrt(we*we+Se*Se+Oe*Oe);Be<1e-8?(Be=Math.max(Math.abs(we),Math.abs(Se),Math.abs(Oe)))<1e-8?(Oe=1,Se=we=0,Be=1):Be=1/Be:Be=1/Math.sqrt(Be),ye.set(Z,be,0,we*Be),ye.set(Z,be,1,Se*Be),ye.set(Z,be,2,Oe*Be)}r.free(Te.data);var He=[1/0,1/0,1/0],Xe=[-1/0,-1/0,-1/0],nt=1/0,et=-1/0,Ye=r.mallocFloat(i.nextPow2((W[0]-1)*(W[1]-1)*6*10)),ot=0,at=0;for(Z=0;Z<W[0]-1;++Z)e:for(be=0;be<W[1]-1;++be){for(var ct=0;ct<2;++ct)for(var _t=0;_t<2;++_t)for(var xt=0;xt<3;++xt){var Ht=this._field[xt].get(1+Z+ct,1+be+_t);if(isNaN(Ht)||!isFinite(Ht))continue e}for(xt=0;xt<6;++xt){var At=Z+C[xt][0],ht=be+C[xt][1],st=this._field[0].get(At+1,ht+1),Bt=this._field[1].get(At+1,ht+1);Ht=this._field[2].get(At+1,ht+1),we=ye.get(At+1,ht+1,0),Se=ye.get(At+1,ht+1,1),Oe=ye.get(At+1,ht+1,2),K.intensity&&(gn=K.intensity.get(At,ht));var gn=K.intensity?K.intensity.get(At,ht):Ht+this.objectOffset[2];Ye[ot++]=At,Ye[ot++]=ht,Ye[ot++]=st,Ye[ot++]=Bt,Ye[ot++]=Ht,Ye[ot++]=0,Ye[ot++]=gn,Ye[ot++]=we,Ye[ot++]=Se,Ye[ot++]=Oe,He[0]=Math.min(He[0],st+this.objectOffset[0]),He[1]=Math.min(He[1],Bt+this.objectOffset[1]),He[2]=Math.min(He[2],Ht+this.objectOffset[2]),nt=Math.min(nt,gn),Xe[0]=Math.max(Xe[0],st+this.objectOffset[0]),Xe[1]=Math.max(Xe[1],Bt+this.objectOffset[1]),Xe[2]=Math.max(Xe[2],Ht+this.objectOffset[2]),et=Math.max(et,gn),at+=1}}for(K.intensityBounds&&(nt=+K.intensityBounds[0],et=+K.intensityBounds[1]),Z=6;Z<ot;Z+=10)Ye[Z]=(Ye[Z]-nt)/(et-nt);this._vertexCount=at,this._coordinateBuffer.update(Ye.subarray(0,ot)),r.freeFloat(Ye),r.free(ye.data),this.bounds=[He,Xe],this.intensity=K.intensity||this._field[2],this.intensityBounds[0]===nt&&this.intensityBounds[1]===et||(re=!0),this.intensityBounds=[nt,et]}if("levels"in K){var hn=K.levels;for(hn=Array.isArray(hn[0])?hn.slice():[[],[],hn],Z=0;Z<3;++Z)hn[Z]=hn[Z].slice(),hn[Z].sort(function(Ut,Zt){return Ut-Zt});for(Z=0;Z<3;++Z)for(be=0;be<hn[Z].length;++be)hn[Z][be]-=this.objectOffset[Z];e:for(Z=0;Z<3;++Z){if(hn[Z].length!==this.contourLevels[Z].length){re=!0;break}for(be=0;be<hn[Z].length;++be)if(hn[Z][be]!==this.contourLevels[Z][be]){re=!0;break e}}this.contourLevels=hn}if(re){pe=this._field,W=this.shape;for(var We=[],it=0;it<3;++it){var qt=this.contourLevels[it],Ge=[],Pe=[],Ee=[0,0,0];for(Z=0;Z<qt.length;++Z){var Ne=s(this._field[it],qt[Z]);Ge.push(We.length/5|0),at=0;e:for(be=0;be<Ne.cells.length;++be){var Ve=Ne.cells[be];for(xt=0;xt<2;++xt){var Ke=Ne.positions[Ve[xt]],bt=Ke[0],gt=0|Math.floor(bt),pt=bt-gt,St=Ke[1],jt=0|Math.floor(St),Lt=St-jt,Vt=!1;t:for(var mt=0;mt<3;++mt){Ee[mt]=0;var Wt=(it+mt+1)%3;for(ct=0;ct<2;++ct){var Kt=ct?pt:1-pt;for(At=0|Math.min(Math.max(gt+ct,0),W[0]),_t=0;_t<2;++_t){var rn=_t?Lt:1-Lt;if(ht=0|Math.min(Math.max(jt+_t,0),W[1]),Ht=mt<2?this._field[Wt].get(At,ht):(this.intensity.get(At,ht)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ht)||isNaN(Ht)){Vt=!0;break t}Ee[mt]+=Kt*rn*Ht}}}if(Vt){if(xt>0){for(var Ue=0;Ue<5;++Ue)We.pop();at-=1}continue e}We.push(Ee[0],Ee[1],Ke[0],Ke[1],Ee[2]),at+=1}}Pe.push(at)}this._contourOffsets[it]=Ge,this._contourCounts[it]=Pe}var wt=r.mallocFloat(We.length);for(Z=0;Z<We.length;++Z)wt[Z]=We[Z];this._contourBuffer.update(wt),r.freeFloat(wt)}},I.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var K=0;K<3;++K)r.freeFloat(this._field[K].data)},I.highlight=function(K){var q,re;if(!K)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(q=0;q<3;++q)this.highlightLevel[q]=this.enableHighlight[q]?K.level[q]:-1;for(re=this.snapToData?K.dataCoordinate:K.position,q=0;q<3;++q)re[q]-=this.objectOffset[q];if(this.enableDynamic[0]&&re[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&re[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&re[2]!==this.dynamicLevel[2]){for(var V=0,W=this.shape,Z=r.mallocFloat(12*W[0]*W[1]),oe=0;oe<3;++oe)if(this.enableDynamic[oe]){this.dynamicLevel[oe]=re[oe];var he=this._field[(oe+1)%3],de=this._field[(oe+2)%3],be=s(this._field[oe],re[oe]),pe=be.cells,Te=be.positions;for(this._dynamicOffsets[oe]=V,q=0;q<pe.length;++q)for(var ye=pe[q],ke=0;ke<2;++ke){var ze=Te[ye[ke]],je=+ze[0],Ie=0|je,Ce=0|Math.min(Ie+1,W[0]),_e=je-Ie,we=1-_e,Se=+ze[1],Oe=0|Se,Be=0|Math.min(Oe+1,W[1]),He=Se-Oe,Xe=1-He,nt=we*Xe,et=we*He,qe=_e*Xe,Ye=_e*He,ot=nt*he.get(Ie,Oe)+et*he.get(Ie,Be)+qe*he.get(Ce,Oe)+Ye*he.get(Ce,Be),at=nt*de.get(Ie,Oe)+et*de.get(Ie,Be)+qe*de.get(Ce,Oe)+Ye*de.get(Ce,Be);if(isNaN(ot)||isNaN(at)){ke&&(V-=1);break}Z[2*V+0]=ot,Z[2*V+1]=at,V+=1}this._dynamicCounts[oe]=V-this._dynamicOffsets[oe]}else this.dynamicLevel[oe]=NaN,this._dynamicCounts[oe]=0;this._dynamicBuffer.update(Z.subarray(0,2*V)),r.freeFloat(Z)}}},{"./lib/shaders":353,"binary-search-bounds":103,"bit-twiddle":104,colormap:137,"gl-buffer":267,"gl-mat4/invert":299,"gl-mat4/multiply":301,"gl-texture2d":356,"gl-vao":361,ndarray:483,"ndarray-gradient":476,"ndarray-ops":478,"ndarray-pack":479,"surface-nets":591,"typedarray-pool":617}],355:[function(h,G,X){"use strict";var i=h("css-font"),m=h("pick-by-alias"),b=h("regl"),p=h("gl-util/context"),r=h("es6-weak-map"),u=h("color-normalize"),c=h("font-atlas"),l=h("typedarray-pool"),f=h("parse-rect"),s=h("is-plain-obj"),o=h("parse-unit"),d=h("to-px"),g=h("detect-kerning"),y=h("object-assign"),v=h("font-measure"),_=h("flatten-vertex-data"),w=h("bit-twiddle").nextPow2,x=new r,E=!1;if(document.body){var k=document.body.appendChild(document.createElement("div"));k.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(k).fontStretch&&(E=!0),document.body.removeChild(k)}var C=function(L){var P;this.gl="function"==typeof(P=L)&&P._gl&&P.prop&&P.texture&&P.buffer?(L={regl:L}).regl._gl:p(L),this.shader=x.get(this.gl),this.regl=this.shader?this.shader.regl:L.regl||b({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),x.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(s(L)?L:{})};C.prototype.createShader=function(){var L=this.regl,P=L({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:L.prop("count"),offset:L.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:L.this("sizeBuffer")},width:{offset:0,stride:8,buffer:L.this("sizeBuffer")},char:L.this("charBuffer"),position:L.this("position")},uniforms:{atlasSize:function(A,I){return[I.atlas.width,I.atlas.height]},atlasDim:function(A,I){return[I.atlas.cols,I.atlas.rows]},atlas:function(A,I){return I.atlas.texture},charStep:function(A,I){return I.atlas.step},em:function(A,I){return I.atlas.em},color:L.prop("color"),opacity:L.prop("opacity"),viewport:L.this("viewportArray"),scale:L.this("scale"),align:L.prop("align"),baseline:L.prop("baseline"),translate:L.this("translate"),positionOffset:L.prop("positionOffset")},primitive:"points",viewport:L.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\t"+(C.normalViewport?"":"vec2 positionOffset = vec2(positionOffset.x,- positionOffset.y);")+"\n\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ positionOffset))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\t"+(C.normalViewport?"position.y = 1. - position.y;":"")+"\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform sampler2D atlas;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:L,draw:P,atlas:{}}},C.prototype.update=function(L){var P=this;if("string"==typeof L)L={text:L};else if(!L)return;null!=(L=m(L,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(L.opacity)?L.opacity.map(function(we){return parseFloat(we)}):parseFloat(L.opacity)),null!=L.viewport&&(this.viewport=f(L.viewport),C.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=L.kerning&&(this.kerning=L.kerning),null!=L.offset&&("number"==typeof L.offset&&(L.offset=[L.offset,0]),this.positionOffset=_(L.offset)),L.direction&&(this.direction=L.direction),L.range&&(this.range=L.range,this.scale=[1/(L.range[2]-L.range[0]),1/(L.range[3]-L.range[1])],this.translate=[-L.range[0],-L.range[1]]),L.scale&&(this.scale=L.scale),L.translate&&(this.translate=L.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||L.font||(L.font=C.baseFontSize+"px sans-serif");var A,I=!1,D=!1;if(L.font&&(Array.isArray(L.font)?L.font:[L.font]).forEach(function(we,Se){if("string"==typeof we)try{we=i.parse(we)}catch(et){we=i.parse(C.baseFontSize+"px "+we)}else we=i.parse(i.stringify(we));var Oe=i.stringify({size:C.baseFontSize,family:we.family,stretch:E?we.stretch:void 0,variant:we.variant,weight:we.weight,style:we.style}),Be=o(we.size),He=Math.round(Be[0]*d(Be[1]));if(He!==P.fontSize[Se]&&(D=!0,P.fontSize[Se]=He),!(P.font[Se]&&Oe==P.font[Se].baseString||(I=!0,P.font[Se]=C.fonts[Oe],P.font[Se]))){var Xe=we.family.join(", "),nt=[we.style];we.style!=we.variant&&nt.push(we.variant),we.variant!=we.weight&&nt.push(we.weight),E&&we.weight!=we.stretch&&nt.push(we.stretch),P.font[Se]={baseString:Oe,family:Xe,weight:we.weight,stretch:we.stretch,style:we.style,variant:we.variant,width:{},kerning:{},metrics:v(Xe,{origin:"top",fontSize:C.baseFontSize,fontStyle:nt.join(" ")})},C.fonts[Oe]=P.font[Se]}}),(I||D)&&this.font.forEach(function(we,Se){var Oe=i.stringify({size:P.fontSize[Se],family:we.family,stretch:E?we.stretch:void 0,variant:we.variant,weight:we.weight,style:we.style});P.fontAtlas[Se]=P.shader.atlas[Oe],P.fontAtlas[Se]||(P.shader.atlas[Oe]=P.fontAtlas[Se]={fontString:Oe,step:2*Math.ceil(P.fontSize[Se]*we.metrics.bottom*.5),em:P.fontSize[Se],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:P.regl.texture()}),null==L.text&&(L.text=P.text)}),"string"==typeof L.text&&L.position&&L.position.length>2){for(var R=Array(.5*L.position.length),S=0;S<R.length;S++)R[S]=L.text;L.text=R}if(null!=L.text||I){if(this.textOffsets=[0],Array.isArray(L.text)){this.count=L.text[0].length,this.counts=[this.count];for(var N=1;N<L.text.length;N++)this.textOffsets[N]=this.textOffsets[N-1]+L.text[N-1].length,this.count+=L.text[N].length,this.counts.push(L.text[N].length);this.text=L.text.join("")}else this.text=L.text,this.count=this.text.length,this.counts=[this.count];A=[],this.font.forEach(function(we,Se){C.atlasContext.font=we.baseString;for(var Oe=P.fontAtlas[Se],Be=0;Be<P.text.length;Be++){var He=P.text.charAt(Be);if(null==Oe.ids[He]&&(Oe.ids[He]=Oe.chars.length,Oe.chars.push(He),A.push(He)),null==we.width[He]&&(we.width[He]=C.atlasContext.measureText(He).width/C.baseFontSize,P.kerning)){var Xe=[];for(var nt in we.width)Xe.push(nt+He,He+nt);y(we.kerning,g(we.family,{pairs:Xe}))}}})}if(L.position)if(L.position.length>2){for(var B=!L.position[0].length,H=l.mallocFloat(2*this.count),Y=0,Q=0;Y<this.counts.length;Y++){var ne=this.counts[Y];if(B)for(var ae=0;ae<ne;ae++)H[Q++]=L.position[2*Y],H[Q++]=L.position[2*Y+1];else for(var te=0;te<ne;te++)H[Q++]=L.position[Y][0],H[Q++]=L.position[Y][1]}this.position.call?this.position({type:"float",data:H}):this.position=this.regl.buffer({type:"float",data:H}),l.freeFloat(H)}else this.position.destroy&&this.position.destroy(),this.position={constant:L.position};if(L.text||I){var K=l.mallocUint8(this.count),q=l.mallocFloat(2*this.count);this.textWidth=[];for(var re=0,V=0;re<this.counts.length;re++){for(var W=this.counts[re],Z=this.font[re]||this.font[0],oe=this.fontAtlas[re]||this.fontAtlas[0],ie=0;ie<W;ie++){var ue=this.text.charAt(V),fe=this.text.charAt(V-1);if(K[V]=oe.ids[ue],q[2*V]=Z.width[ue],ie){var be=q[2*V-1]+.5*q[2*V-2]+.5*q[2*V];if(this.kerning){var pe=Z.kerning[fe+ue];pe&&(be+=.001*pe)}q[2*V+1]=be}else q[2*V+1]=.5*q[2*V];V++}this.textWidth.push(q.length?.5*q[2*V-2]+q[2*V-1]:0)}L.align||(L.align=this.align),this.charBuffer({data:K,type:"uint8",usage:"stream"}),this.sizeBuffer({data:q,type:"float",usage:"stream"}),l.freeUint8(K),l.freeFloat(q),A.length&&this.font.forEach(function(we,Se){var Oe=P.fontAtlas[Se],Be=Oe.step,He=Math.floor(C.maxAtlasSize/Be),Xe=Math.min(He,Oe.chars.length),nt=Math.ceil(Oe.chars.length/Xe),et=w(Xe*Be),qe=w(nt*Be);Oe.width=et,Oe.height=qe,Oe.rows=nt,Oe.cols=Xe,Oe.em&&Oe.texture({data:c({canvas:C.atlasCanvas,font:Oe.fontString,chars:Oe.chars,shape:[et,qe],step:[Be,Be]})})})}if(L.align&&(this.align=L.align,this.alignOffset=this.textWidth.map(function(we,Se){var Oe=Array.isArray(P.align)?P.align.length>1?P.align[Se]:P.align[0]:P.align;if("number"==typeof Oe)return Oe;switch(Oe){case"right":case"end":return-we;case"center":case"centre":case"middle":return.5*-we}return 0})),null==this.baseline&&null==L.baseline&&(L.baseline=0),null!=L.baseline&&(this.baseline=L.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(we,Se){var Oe=(P.font[Se]||P.font[0]).metrics,Be=0;return Be+=.5*Oe.bottom,Be+="number"==typeof we?we-Oe.baseline:-Oe[we],C.normalViewport||(Be*=-1),Be})),null!=L.color)if(L.color||(L.color="transparent"),"string"!=typeof L.color&&isNaN(L.color)){var Te;if("number"==typeof L.color[0]&&L.color.length>this.counts.length){var ye=L.color.length;Te=l.mallocUint8(ye);for(var ke=(L.color.subarray||L.color.slice).bind(L.color),ze=0;ze<ye;ze+=4)Te.set(u(ke(ze,ze+4),"uint8"),ze)}else{var je=L.color.length;Te=l.mallocUint8(4*je);for(var Ie=0;Ie<je;Ie++)Te.set(u(L.color[Ie]||0,"uint8"),4*Ie)}this.color=Te}else this.color=u(L.color,"uint8");if(L.position||L.text||L.color||L.baseline||L.align||L.font||L.offset||L.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Ce=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Ce);for(var _e=0;_e<this.batch.length;_e++)this.batch[_e]={count:this.counts.length>1?this.counts[_e]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[_e]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*_e,4*_e+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[_e]:this.opacity,baseline:null!=this.baselineOffset[_e]?this.baselineOffset[_e]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[_e]?this.alignOffset[_e]:this.alignOffset[0]:0,atlas:this.fontAtlas[_e]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*_e,2*_e+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},C.prototype.destroy=function(){},C.prototype.kerning=!0,C.prototype.position={constant:new Float32Array(2)},C.prototype.translate=null,C.prototype.scale=null,C.prototype.font=null,C.prototype.text="",C.prototype.positionOffset=[0,0],C.prototype.opacity=1,C.prototype.color=new Uint8Array([0,0,0,255]),C.prototype.alignOffset=[0,0],C.normalViewport=!1,C.maxAtlasSize=1024,C.atlasCanvas=document.createElement("canvas"),C.atlasContext=C.atlasCanvas.getContext("2d",{alpha:!1}),C.baseFontSize=64,C.fonts={},G.exports=C},{"bit-twiddle":104,"color-normalize":131,"css-font":150,"detect-kerning":181,"es6-weak-map":241,"flatten-vertex-data":252,"font-atlas":253,"font-measure":254,"gl-util/context":357,"is-plain-obj":457,"object-assign":487,"parse-rect":492,"parse-unit":494,"pick-by-alias":498,regl:540,"to-px":600,"typedarray-pool":617}],356:[function(h,G,X){"use strict";var i=h("ndarray"),m=h("ndarray-ops"),b=h("typedarray-pool");G.exports=function(x){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(p||c(x),"number"==typeof arguments[1])return v(x,arguments[1],arguments[2],arguments[3]||x.RGBA,arguments[4]||x.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return v(x,0|arguments[1][0],0|arguments[1][1],arguments[2]||x.RGBA,arguments[3]||x.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var E=arguments[1],k=l(E)?E:E.raw;if(k)return _(x,k,0|E.width,0|E.height,arguments[2]||x.RGBA,arguments[3]||x.UNSIGNED_BYTE);if(E.shape&&E.data&&E.stride)return w(x,E)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var p=null,r=null,u=null;function c(x){p=[x.LINEAR,x.NEAREST_MIPMAP_LINEAR,x.LINEAR_MIPMAP_NEAREST,x.LINEAR_MIPMAP_NEAREST],r=[x.NEAREST,x.LINEAR,x.NEAREST_MIPMAP_NEAREST,x.NEAREST_MIPMAP_LINEAR,x.LINEAR_MIPMAP_NEAREST,x.LINEAR_MIPMAP_LINEAR],u=[x.REPEAT,x.CLAMP_TO_EDGE,x.MIRRORED_REPEAT]}function l(x){return"undefined"!=typeof HTMLCanvasElement&&x instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&x instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&x instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&x instanceof ImageData}var f=function(x,E){m.muls(x,E,255)};function s(x,E,k){var C=x.gl,L=C.getParameter(C.MAX_TEXTURE_SIZE);if(E<0||E>L||k<0||k>L)throw new Error("gl-texture2d: Invalid texture size");return x._shape=[E,k],x.bind(),C.texImage2D(C.TEXTURE_2D,0,x.format,E,k,0,x.format,x.type,null),x._mipLevels=[0],x}function o(x,E,k,C,L,P){this.gl=x,this.handle=E,this.format=L,this.type=P,this._shape=[k,C],this._mipLevels=[0],this._magFilter=x.NEAREST,this._minFilter=x.NEAREST,this._wrapS=x.CLAMP_TO_EDGE,this._wrapT=x.CLAMP_TO_EDGE,this._anisoSamples=1;var A=this,I=[this._wrapS,this._wrapT];Object.defineProperties(I,[{get:function(){return A._wrapS},set:function(R){return A.wrapS=R}},{get:function(){return A._wrapT},set:function(R){return A.wrapT=R}}]),this._wrapVector=I;var D=[this._shape[0],this._shape[1]];Object.defineProperties(D,[{get:function(){return A._shape[0]},set:function(R){return A.width=R}},{get:function(){return A._shape[1]},set:function(R){return A.height=R}}]),this._shapeVector=D}var d=o.prototype;function g(x,E){return 3===x.length?1===E[2]&&E[1]===x[0]*x[2]&&E[0]===x[2]:1===E[0]&&E[1]===x[0]}function y(x){var E=x.createTexture();return x.bindTexture(x.TEXTURE_2D,E),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),E}function v(x,E,k,C,L){var P=x.getParameter(x.MAX_TEXTURE_SIZE);if(E<0||E>P||k<0||k>P)throw new Error("gl-texture2d: Invalid texture shape");if(L===x.FLOAT&&!x.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var A=y(x);return x.texImage2D(x.TEXTURE_2D,0,C,E,k,0,C,L,null),new o(x,A,E,k,C,L)}function _(x,E,k,C,L,P){var A=y(x);return x.texImage2D(x.TEXTURE_2D,0,L,L,P,E),new o(x,A,k,C,L,P)}function w(x,E){var k=E.dtype,C=E.shape.slice(),L=x.getParameter(x.MAX_TEXTURE_SIZE);if(C[0]<0||C[0]>L||C[1]<0||C[1]>L)throw new Error("gl-texture2d: Invalid texture size");var P=g(C,E.stride.slice()),A=0;"float32"===k?A=x.FLOAT:"float64"===k?(A=x.FLOAT,P=!1,k="float32"):"uint8"===k?A=x.UNSIGNED_BYTE:(A=x.UNSIGNED_BYTE,P=!1,k="uint8");var I,D,R=0;if(2===C.length)R=x.LUMINANCE,E=i(E.data,C=[C[0],C[1],1],[E.stride[0],E.stride[1],1],E.offset);else{if(3!==C.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===C[2])R=x.ALPHA;else if(2===C[2])R=x.LUMINANCE_ALPHA;else if(3===C[2])R=x.RGB;else{if(4!==C[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");R=x.RGBA}}A!==x.FLOAT||x.getExtension("OES_texture_float")||(A=x.UNSIGNED_BYTE,P=!1);var S=E.size;if(P)I=0===E.offset&&E.data.length===S?E.data:E.data.subarray(E.offset,E.offset+S);else{var N=[C[2],C[2]*C[0],1];D=b.malloc(S,k);var B=i(D,C,N,0);"float32"!==k&&"float64"!==k||A!==x.UNSIGNED_BYTE?m.assign(B,E):f(B,E),I=D.subarray(0,S)}var H=y(x);return x.texImage2D(x.TEXTURE_2D,0,R,C[0],C[1],0,R,A,I),P||b.free(D),new o(x,H,C[0],C[1],R,A)}Object.defineProperties(d,{minFilter:{get:function(){return this._minFilter},set:function(x){this.bind();var E=this.gl;if(this.type===E.FLOAT&&p.indexOf(x)>=0&&(E.getExtension("OES_texture_float_linear")||(x=E.NEAREST)),r.indexOf(x)<0)throw new Error("gl-texture2d: Unknown filter mode "+x);return E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,x),this._minFilter=x}},magFilter:{get:function(){return this._magFilter},set:function(x){this.bind();var E=this.gl;if(this.type===E.FLOAT&&p.indexOf(x)>=0&&(E.getExtension("OES_texture_float_linear")||(x=E.NEAREST)),r.indexOf(x)<0)throw new Error("gl-texture2d: Unknown filter mode "+x);return E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,x),this._magFilter=x}},mipSamples:{get:function(){return this._anisoSamples},set:function(x){var E=this._anisoSamples;if(this._anisoSamples=0|Math.max(x,1),E!==this._anisoSamples){var k=this.gl.getExtension("EXT_texture_filter_anisotropic");k&&this.gl.texParameterf(this.gl.TEXTURE_2D,k.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(x){if(this.bind(),u.indexOf(x)<0)throw new Error("gl-texture2d: Unknown wrap mode "+x);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,x),this._wrapS=x}},wrapT:{get:function(){return this._wrapT},set:function(x){if(this.bind(),u.indexOf(x)<0)throw new Error("gl-texture2d: Unknown wrap mode "+x);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,x),this._wrapT=x}},wrap:{get:function(){return this._wrapVector},set:function(x){if(Array.isArray(x)||(x=[x,x]),2!==x.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var E=0;E<2;++E)if(u.indexOf(x[E])<0)throw new Error("gl-texture2d: Unknown wrap mode "+x);this._wrapS=x[0],this._wrapT=x[1];var k=this.gl;return this.bind(),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,this._wrapS),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,this._wrapT),x}},shape:{get:function(){return this._shapeVector},set:function(x){if(Array.isArray(x)){if(2!==x.length)throw new Error("gl-texture2d: Invalid texture shape")}else x=[0|x,0|x];return s(this,0|x[0],0|x[1]),[0|x[0],0|x[1]]}},width:{get:function(){return this._shape[0]},set:function(x){return s(this,x|=0,this._shape[1]),x}},height:{get:function(){return this._shape[1]},set:function(x){return s(this,this._shape[0],x|=0),x}}}),d.bind=function(x){var E=this.gl;return void 0!==x&&E.activeTexture(E.TEXTURE0+(0|x)),E.bindTexture(E.TEXTURE_2D,this.handle),void 0!==x?0|x:E.getParameter(E.ACTIVE_TEXTURE)-E.TEXTURE0},d.dispose=function(){this.gl.deleteTexture(this.handle)},d.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var x=Math.min(this._shape[0],this._shape[1]),E=0;x>0;++E,x>>>=1)this._mipLevels.indexOf(E)<0&&this._mipLevels.push(E)},d.setPixels=function(x,E,k,C){var L=this.gl;this.bind(),Array.isArray(E)?(C=k,k=0|E[1],E=0|E[0]):(E=E||0,k=k||0),C=C||0;var P=l(x)?x:x.raw;if(P)this._mipLevels.indexOf(C)<0?(L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(C)):L.texSubImage2D(L.TEXTURE_2D,C,E,k,this.format,this.type,P);else{if(!(x.shape&&x.stride&&x.data))throw new Error("gl-texture2d: Unsupported data type");if(x.shape.length<2||E+x.shape[1]>this._shape[1]>>>C||k+x.shape[0]>this._shape[0]>>>C||E<0||k<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(A,I,D,R,S,N,B,H){var Y=H.dtype,Q=H.shape.slice();if(Q.length<2||Q.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var ne=0,ae=0,te=g(Q,H.stride.slice());if("float32"===Y?ne=A.FLOAT:"float64"===Y?(ne=A.FLOAT,te=!1,Y="float32"):"uint8"===Y?ne=A.UNSIGNED_BYTE:(ne=A.UNSIGNED_BYTE,te=!1,Y="uint8"),2===Q.length)ae=A.LUMINANCE,H=i(H.data,Q=[Q[0],Q[1],1],[H.stride[0],H.stride[1],1],H.offset);else{if(3!==Q.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===Q[2])ae=A.ALPHA;else if(2===Q[2])ae=A.LUMINANCE_ALPHA;else if(3===Q[2])ae=A.RGB;else{if(4!==Q[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");ae=A.RGBA}}if(ae!==A.LUMINANCE&&ae!==A.ALPHA||S!==A.LUMINANCE&&S!==A.ALPHA||(ae=S),ae!==S)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var K=H.size,q=B.indexOf(R)<0;if(q&&B.push(R),ne===N&&te)0===H.offset&&H.data.length===K?q?A.texImage2D(A.TEXTURE_2D,R,S,Q[0],Q[1],0,S,N,H.data):A.texSubImage2D(A.TEXTURE_2D,R,I,D,Q[0],Q[1],S,N,H.data):q?A.texImage2D(A.TEXTURE_2D,R,S,Q[0],Q[1],0,S,N,H.data.subarray(H.offset,H.offset+K)):A.texSubImage2D(A.TEXTURE_2D,R,I,D,Q[0],Q[1],S,N,H.data.subarray(H.offset,H.offset+K));else{var re;re=N===A.FLOAT?b.mallocFloat32(K):b.mallocUint8(K);var V=i(re,Q,[Q[2],Q[2]*Q[0],1]);ne===A.FLOAT&&N===A.UNSIGNED_BYTE?f(V,H):m.assign(V,H),q?A.texImage2D(A.TEXTURE_2D,R,S,Q[0],Q[1],0,S,N,re.subarray(0,K)):A.texSubImage2D(A.TEXTURE_2D,R,I,D,Q[0],Q[1],S,N,re.subarray(0,K)),N===A.FLOAT?b.freeFloat32(re):b.freeUint8(re)}}(L,E,k,C,this.format,this.type,this._mipLevels,x)}}},{ndarray:483,"ndarray-ops":478,"typedarray-pool":617}],357:[function(h,G,X){(function(i){(function(){"use strict";var m=h("pick-by-alias");function b(u){if(u.container)if(u.container==document.body)document.body.style.width||(u.canvas.width=u.width||u.pixelRatio*i.innerWidth),document.body.style.height||(u.canvas.height=u.height||u.pixelRatio*i.innerHeight);else{var c=u.container.getBoundingClientRect();u.canvas.width=u.width||c.right-c.left,u.canvas.height=u.height||c.bottom-c.top}}function p(u){return"function"==typeof u.getContext&&"width"in u&&"height"in u}function r(){var u=document.createElement("canvas");return u.style.position="absolute",u.style.top=0,u.style.left=0,u}G.exports=function(u){var c,f;if(u?"string"==typeof u&&(u={container:u}):u={},(u=p(u)||"string"==typeof(c=u).nodeName&&"function"==typeof c.appendChild&&"function"==typeof c.getBoundingClientRect?{container:u}:"function"==typeof(f=u).drawArrays||"function"==typeof f.drawElements?{gl:u}:m(u,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(u.pixelRatio=i.pixelRatio||1),u.gl)return u.gl;if(u.canvas&&(u.container=u.canvas.parentNode),u.container){if("string"==typeof u.container){var l=document.querySelector(u.container);if(!l)throw Error("Element "+u.container+" is not found");u.container=l}p(u.container)?(u.canvas=u.container,u.container=u.canvas.parentNode):u.canvas||(u.canvas=r(),u.container.appendChild(u.canvas),b(u))}else if(!u.canvas){if("undefined"==typeof document)throw Error("Not DOM environment. Use headless-gl.");u.container=document.body||document.documentElement,u.canvas=r(),u.container.appendChild(u.canvas),b(u)}if(!u.gl)try{u.gl=u.canvas.getContext("webgl",u.attrs)}catch(f){try{u.gl=u.canvas.getContext("experimental-webgl",u.attrs)}catch(s){u.gl=u.canvas.getContext("webgl-experimental",u.attrs)}}return u.gl}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"pick-by-alias":498}],358:[function(h,G,X){"use strict";G.exports=function(i,m,b){m?m.bind():i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null);var p=0|i.getParameter(i.MAX_VERTEX_ATTRIBS);if(b){if(b.length>p)throw new Error("gl-vao: Too many vertex attributes");for(var r=0;r<b.length;++r){var u=b[r];if(u.buffer){var l=u.size||4,f=u.type||i.FLOAT,s=!!u.normalized,o=u.stride||0,d=u.offset||0;u.buffer.bind(),i.enableVertexAttribArray(r),i.vertexAttribPointer(r,l,f,s,o,d)}else{if("number"==typeof u)i.vertexAttrib1f(r,u);else if(1===u.length)i.vertexAttrib1f(r,u[0]);else if(2===u.length)i.vertexAttrib2f(r,u[0],u[1]);else if(3===u.length)i.vertexAttrib3f(r,u[0],u[1],u[2]);else{if(4!==u.length)throw new Error("gl-vao: Invalid vertex attribute");i.vertexAttrib4f(r,u[0],u[1],u[2],u[3])}i.disableVertexAttribArray(r)}}for(;r<p;++r)i.disableVertexAttribArray(r)}else for(i.bindBuffer(i.ARRAY_BUFFER,null),r=0;r<p;++r)i.disableVertexAttribArray(r)}},{}],359:[function(h,G,X){"use strict";var i=h("./do-bind.js");function m(b){this.gl=b,this._elements=null,this._attributes=null,this._elementsType=b.UNSIGNED_SHORT}m.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},m.prototype.update=function(b,p,r){this._elements=p,this._attributes=b,this._elementsType=r||this.gl.UNSIGNED_SHORT},m.prototype.dispose=function(){},m.prototype.unbind=function(){},m.prototype.draw=function(b,p,r){r=r||0;var u=this.gl;this._elements?u.drawElements(b,p,this._elementsType,r):u.drawArrays(b,r,p)},G.exports=function(b){return new m(b)}},{"./do-bind.js":358}],360:[function(h,G,X){"use strict";var i=h("./do-bind.js");function m(p,r,u,c,l,f){this.location=p,this.dimension=r,this.a=u,this.b=c,this.c=l,this.d=f}function b(p,r,u){this.gl=p,this._ext=r,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=p.UNSIGNED_SHORT}m.prototype.bind=function(p){switch(this.dimension){case 1:p.vertexAttrib1f(this.location,this.a);break;case 2:p.vertexAttrib2f(this.location,this.a,this.b);break;case 3:p.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:p.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},b.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var p=0;p<this._attribs.length;++p)this._attribs[p].bind(this.gl)},b.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},b.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},b.prototype.update=function(p,r,u){if(this.bind(),i(this.gl,r,p),this.unbind(),this._attribs.length=0,p)for(var c=0;c<p.length;++c){var l=p[c];"number"==typeof l?this._attribs.push(new m(c,1,l)):Array.isArray(l)&&this._attribs.push(new m(c,l.length,l[0],l[1],l[2],l[3]))}this._useElements=!!r,this._elementsType=u||this.gl.UNSIGNED_SHORT},b.prototype.draw=function(p,r,u){u=u||0;var c=this.gl;this._useElements?c.drawElements(p,r,this._elementsType,u):c.drawArrays(p,u,r)},G.exports=function(p,r){return new b(p,r,r.createVertexArrayOES())}},{"./do-bind.js":358}],361:[function(h,G,X){"use strict";var i=h("./lib/vao-native.js"),m=h("./lib/vao-emulated.js");function b(p){this.bindVertexArrayOES=p.bindVertexArray.bind(p),this.createVertexArrayOES=p.createVertexArray.bind(p),this.deleteVertexArrayOES=p.deleteVertexArray.bind(p)}G.exports=function(p,r,u,c){var l,f=p.createVertexArray?new b(p):p.getExtension("OES_vertex_array_object");return(l=f?i(p,f):m(p)).update(r,u,c),l}},{"./lib/vao-emulated.js":359,"./lib/vao-native.js":360}],362:[function(h,G,X){G.exports=function(i,m,b){return i[0]=m[0]+b[0],i[1]=m[1]+b[1],i[2]=m[2]+b[2],i}},{}],363:[function(h,G,X){G.exports=function(p,r){var u=i(p[0],p[1],p[2]),c=i(r[0],r[1],r[2]);m(u,u),m(c,c);var l=b(u,c);return l>1?0:Math.acos(l)};var i=h("./fromValues"),m=h("./normalize"),b=h("./dot")},{"./dot":373,"./fromValues":379,"./normalize":390}],364:[function(h,G,X){G.exports=function(i,m){return i[0]=Math.ceil(m[0]),i[1]=Math.ceil(m[1]),i[2]=Math.ceil(m[2]),i}},{}],365:[function(h,G,X){G.exports=function(i){var m=new Float32Array(3);return m[0]=i[0],m[1]=i[1],m[2]=i[2],m}},{}],366:[function(h,G,X){G.exports=function(i,m){return i[0]=m[0],i[1]=m[1],i[2]=m[2],i}},{}],367:[function(h,G,X){G.exports=function(){var i=new Float32Array(3);return i[0]=0,i[1]=0,i[2]=0,i}},{}],368:[function(h,G,X){G.exports=function(i,m,b){var p=m[0],r=m[1],u=m[2],c=b[0],l=b[1],f=b[2];return i[0]=r*f-u*l,i[1]=u*c-p*f,i[2]=p*l-r*c,i}},{}],369:[function(h,G,X){G.exports=h("./distance")},{"./distance":370}],370:[function(h,G,X){G.exports=function(i,m){var b=m[0]-i[0],p=m[1]-i[1],r=m[2]-i[2];return Math.sqrt(b*b+p*p+r*r)}},{}],371:[function(h,G,X){G.exports=h("./divide")},{"./divide":372}],372:[function(h,G,X){G.exports=function(i,m,b){return i[0]=m[0]/b[0],i[1]=m[1]/b[1],i[2]=m[2]/b[2],i}},{}],373:[function(h,G,X){G.exports=function(i,m){return i[0]*m[0]+i[1]*m[1]+i[2]*m[2]}},{}],374:[function(h,G,X){G.exports=1e-6},{}],375:[function(h,G,X){G.exports=function(m,b){var p=m[0],r=m[1],u=m[2],c=b[0],l=b[1],f=b[2];return Math.abs(p-c)<=i*Math.max(1,Math.abs(p),Math.abs(c))&&Math.abs(r-l)<=i*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(u-f)<=i*Math.max(1,Math.abs(u),Math.abs(f))};var i=h("./epsilon")},{"./epsilon":374}],376:[function(h,G,X){G.exports=function(i,m){return i[0]===m[0]&&i[1]===m[1]&&i[2]===m[2]}},{}],377:[function(h,G,X){G.exports=function(i,m){return i[0]=Math.floor(m[0]),i[1]=Math.floor(m[1]),i[2]=Math.floor(m[2]),i}},{}],378:[function(h,G,X){G.exports=function(m,b,p,r,u,c){var l,f;for(b||(b=3),p||(p=0),f=r?Math.min(r*b+p,m.length):m.length,l=p;l<f;l+=b)i[0]=m[l],i[1]=m[l+1],i[2]=m[l+2],u(i,i,c),m[l]=i[0],m[l+1]=i[1],m[l+2]=i[2];return m};var i=h("./create")()},{"./create":367}],379:[function(h,G,X){G.exports=function(i,m,b){var p=new Float32Array(3);return p[0]=i,p[1]=m,p[2]=b,p}},{}],380:[function(h,G,X){G.exports={EPSILON:h("./epsilon"),create:h("./create"),clone:h("./clone"),angle:h("./angle"),fromValues:h("./fromValues"),copy:h("./copy"),set:h("./set"),equals:h("./equals"),exactEquals:h("./exactEquals"),add:h("./add"),subtract:h("./subtract"),sub:h("./sub"),multiply:h("./multiply"),mul:h("./mul"),divide:h("./divide"),div:h("./div"),min:h("./min"),max:h("./max"),floor:h("./floor"),ceil:h("./ceil"),round:h("./round"),scale:h("./scale"),scaleAndAdd:h("./scaleAndAdd"),distance:h("./distance"),dist:h("./dist"),squaredDistance:h("./squaredDistance"),sqrDist:h("./sqrDist"),length:h("./length"),len:h("./len"),squaredLength:h("./squaredLength"),sqrLen:h("./sqrLen"),negate:h("./negate"),inverse:h("./inverse"),normalize:h("./normalize"),dot:h("./dot"),cross:h("./cross"),lerp:h("./lerp"),random:h("./random"),transformMat4:h("./transformMat4"),transformMat3:h("./transformMat3"),transformQuat:h("./transformQuat"),rotateX:h("./rotateX"),rotateY:h("./rotateY"),rotateZ:h("./rotateZ"),forEach:h("./forEach")}},{"./add":362,"./angle":363,"./ceil":364,"./clone":365,"./copy":366,"./create":367,"./cross":368,"./dist":369,"./distance":370,"./div":371,"./divide":372,"./dot":373,"./epsilon":374,"./equals":375,"./exactEquals":376,"./floor":377,"./forEach":378,"./fromValues":379,"./inverse":381,"./len":382,"./length":383,"./lerp":384,"./max":385,"./min":386,"./mul":387,"./multiply":388,"./negate":389,"./normalize":390,"./random":391,"./rotateX":392,"./rotateY":393,"./rotateZ":394,"./round":395,"./scale":396,"./scaleAndAdd":397,"./set":398,"./sqrDist":399,"./sqrLen":400,"./squaredDistance":401,"./squaredLength":402,"./sub":403,"./subtract":404,"./transformMat3":405,"./transformMat4":406,"./transformQuat":407}],381:[function(h,G,X){G.exports=function(i,m){return i[0]=1/m[0],i[1]=1/m[1],i[2]=1/m[2],i}},{}],382:[function(h,G,X){G.exports=h("./length")},{"./length":383}],383:[function(h,G,X){G.exports=function(i){var m=i[0],b=i[1],p=i[2];return Math.sqrt(m*m+b*b+p*p)}},{}],384:[function(h,G,X){G.exports=function(i,m,b,p){var r=m[0],u=m[1],c=m[2];return i[0]=r+p*(b[0]-r),i[1]=u+p*(b[1]-u),i[2]=c+p*(b[2]-c),i}},{}],385:[function(h,G,X){G.exports=function(i,m,b){return i[0]=Math.max(m[0],b[0]),i[1]=Math.max(m[1],b[1]),i[2]=Math.max(m[2],b[2]),i}},{}],386:[function(h,G,X){G.exports=function(i,m,b){return i[0]=Math.min(m[0],b[0]),i[1]=Math.min(m[1],b[1]),i[2]=Math.min(m[2],b[2]),i}},{}],387:[function(h,G,X){G.exports=h("./multiply")},{"./multiply":388}],388:[function(h,G,X){G.exports=function(i,m,b){return i[0]=m[0]*b[0],i[1]=m[1]*b[1],i[2]=m[2]*b[2],i}},{}],389:[function(h,G,X){G.exports=function(i,m){return i[0]=-m[0],i[1]=-m[1],i[2]=-m[2],i}},{}],390:[function(h,G,X){G.exports=function(i,m){var b=m[0],p=m[1],r=m[2],u=b*b+p*p+r*r;return u>0&&(u=1/Math.sqrt(u),i[0]=m[0]*u,i[1]=m[1]*u,i[2]=m[2]*u),i}},{}],391:[function(h,G,X){G.exports=function(i,m){m=m||1;var b=2*Math.random()*Math.PI,p=2*Math.random()-1,r=Math.sqrt(1-p*p)*m;return i[0]=Math.cos(b)*r,i[1]=Math.sin(b)*r,i[2]=p*m,i}},{}],392:[function(h,G,X){G.exports=function(i,m,b,p){var r=b[1],u=b[2],c=m[1]-r,l=m[2]-u,f=Math.sin(p),s=Math.cos(p);return i[0]=m[0],i[1]=r+c*s-l*f,i[2]=u+c*f+l*s,i}},{}],393:[function(h,G,X){G.exports=function(i,m,b,p){var r=b[0],u=b[2],c=m[0]-r,l=m[2]-u,f=Math.sin(p),s=Math.cos(p);return i[0]=r+l*f+c*s,i[1]=m[1],i[2]=u+l*s-c*f,i}},{}],394:[function(h,G,X){G.exports=function(i,m,b,p){var r=b[0],u=b[1],c=m[0]-r,l=m[1]-u,f=Math.sin(p),s=Math.cos(p);return i[0]=r+c*s-l*f,i[1]=u+c*f+l*s,i[2]=m[2],i}},{}],395:[function(h,G,X){G.exports=function(i,m){return i[0]=Math.round(m[0]),i[1]=Math.round(m[1]),i[2]=Math.round(m[2]),i}},{}],396:[function(h,G,X){G.exports=function(i,m,b){return i[0]=m[0]*b,i[1]=m[1]*b,i[2]=m[2]*b,i}},{}],397:[function(h,G,X){G.exports=function(i,m,b,p){return i[0]=m[0]+b[0]*p,i[1]=m[1]+b[1]*p,i[2]=m[2]+b[2]*p,i}},{}],398:[function(h,G,X){G.exports=function(i,m,b,p){return i[0]=m,i[1]=b,i[2]=p,i}},{}],399:[function(h,G,X){G.exports=h("./squaredDistance")},{"./squaredDistance":401}],400:[function(h,G,X){G.exports=h("./squaredLength")},{"./squaredLength":402}],401:[function(h,G,X){G.exports=function(i,m){var b=m[0]-i[0],p=m[1]-i[1],r=m[2]-i[2];return b*b+p*p+r*r}},{}],402:[function(h,G,X){G.exports=function(i){var m=i[0],b=i[1],p=i[2];return m*m+b*b+p*p}},{}],403:[function(h,G,X){G.exports=h("./subtract")},{"./subtract":404}],404:[function(h,G,X){G.exports=function(i,m,b){return i[0]=m[0]-b[0],i[1]=m[1]-b[1],i[2]=m[2]-b[2],i}},{}],405:[function(h,G,X){G.exports=function(i,m,b){var p=m[0],r=m[1],u=m[2];return i[0]=p*b[0]+r*b[3]+u*b[6],i[1]=p*b[1]+r*b[4]+u*b[7],i[2]=p*b[2]+r*b[5]+u*b[8],i}},{}],406:[function(h,G,X){G.exports=function(i,m,b){var p=m[0],r=m[1],u=m[2],c=b[3]*p+b[7]*r+b[11]*u+b[15];return i[0]=(b[0]*p+b[4]*r+b[8]*u+b[12])/(c=c||1),i[1]=(b[1]*p+b[5]*r+b[9]*u+b[13])/c,i[2]=(b[2]*p+b[6]*r+b[10]*u+b[14])/c,i}},{}],407:[function(h,G,X){G.exports=function(i,m,b){var p=m[0],r=m[1],u=m[2],c=b[0],l=b[1],f=b[2],s=b[3],o=s*p+l*u-f*r,d=s*r+f*p-c*u,g=s*u+c*r-l*p,y=-c*p-l*r-f*u;return i[0]=o*s+y*-c+d*-f-g*-l,i[1]=d*s+y*-l+g*-c-o*-f,i[2]=g*s+y*-f+o*-l-d*-c,i}},{}],408:[function(h,G,X){G.exports=function(i,m,b){return i[0]=m[0]+b[0],i[1]=m[1]+b[1],i[2]=m[2]+b[2],i[3]=m[3]+b[3],i}},{}],409:[function(h,G,X){G.exports=function(i){var m=new Float32Array(4);return m[0]=i[0],m[1]=i[1],m[2]=i[2],m[3]=i[3],m}},{}],410:[function(h,G,X){G.exports=function(i,m){return i[0]=m[0],i[1]=m[1],i[2]=m[2],i[3]=m[3],i}},{}],411:[function(h,G,X){G.exports=function(){var i=new Float32Array(4);return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i}},{}],412:[function(h,G,X){G.exports=function(i,m){var b=m[0]-i[0],p=m[1]-i[1],r=m[2]-i[2],u=m[3]-i[3];return Math.sqrt(b*b+p*p+r*r+u*u)}},{}],413:[function(h,G,X){G.exports=function(i,m,b){return i[0]=m[0]/b[0],i[1]=m[1]/b[1],i[2]=m[2]/b[2],i[3]=m[3]/b[3],i}},{}],414:[function(h,G,X){G.exports=function(i,m){return i[0]*m[0]+i[1]*m[1]+i[2]*m[2]+i[3]*m[3]}},{}],415:[function(h,G,X){G.exports=function(i,m,b,p){var r=new Float32Array(4);return r[0]=i,r[1]=m,r[2]=b,r[3]=p,r}},{}],416:[function(h,G,X){G.exports={create:h("./create"),clone:h("./clone"),fromValues:h("./fromValues"),copy:h("./copy"),set:h("./set"),add:h("./add"),subtract:h("./subtract"),multiply:h("./multiply"),divide:h("./divide"),min:h("./min"),max:h("./max"),scale:h("./scale"),scaleAndAdd:h("./scaleAndAdd"),distance:h("./distance"),squaredDistance:h("./squaredDistance"),length:h("./length"),squaredLength:h("./squaredLength"),negate:h("./negate"),inverse:h("./inverse"),normalize:h("./normalize"),dot:h("./dot"),lerp:h("./lerp"),random:h("./random"),transformMat4:h("./transformMat4"),transformQuat:h("./transformQuat")}},{"./add":408,"./clone":409,"./copy":410,"./create":411,"./distance":412,"./divide":413,"./dot":414,"./fromValues":415,"./inverse":417,"./length":418,"./lerp":419,"./max":420,"./min":421,"./multiply":422,"./negate":423,"./normalize":424,"./random":425,"./scale":426,"./scaleAndAdd":427,"./set":428,"./squaredDistance":429,"./squaredLength":430,"./subtract":431,"./transformMat4":432,"./transformQuat":433}],417:[function(h,G,X){G.exports=function(i,m){return i[0]=1/m[0],i[1]=1/m[1],i[2]=1/m[2],i[3]=1/m[3],i}},{}],418:[function(h,G,X){G.exports=function(i){var m=i[0],b=i[1],p=i[2],r=i[3];return Math.sqrt(m*m+b*b+p*p+r*r)}},{}],419:[function(h,G,X){G.exports=function(i,m,b,p){var r=m[0],u=m[1],c=m[2],l=m[3];return i[0]=r+p*(b[0]-r),i[1]=u+p*(b[1]-u),i[2]=c+p*(b[2]-c),i[3]=l+p*(b[3]-l),i}},{}],420:[function(h,G,X){G.exports=function(i,m,b){return i[0]=Math.max(m[0],b[0]),i[1]=Math.max(m[1],b[1]),i[2]=Math.max(m[2],b[2]),i[3]=Math.max(m[3],b[3]),i}},{}],421:[function(h,G,X){G.exports=function(i,m,b){return i[0]=Math.min(m[0],b[0]),i[1]=Math.min(m[1],b[1]),i[2]=Math.min(m[2],b[2]),i[3]=Math.min(m[3],b[3]),i}},{}],422:[function(h,G,X){G.exports=function(i,m,b){return i[0]=m[0]*b[0],i[1]=m[1]*b[1],i[2]=m[2]*b[2],i[3]=m[3]*b[3],i}},{}],423:[function(h,G,X){G.exports=function(i,m){return i[0]=-m[0],i[1]=-m[1],i[2]=-m[2],i[3]=-m[3],i}},{}],424:[function(h,G,X){G.exports=function(i,m){var b=m[0],p=m[1],r=m[2],u=m[3],c=b*b+p*p+r*r+u*u;return c>0&&(c=1/Math.sqrt(c),i[0]=b*c,i[1]=p*c,i[2]=r*c,i[3]=u*c),i}},{}],425:[function(h,G,X){var i=h("./normalize"),m=h("./scale");G.exports=function(b,p){return p=p||1,b[0]=Math.random(),b[1]=Math.random(),b[2]=Math.random(),b[3]=Math.random(),i(b,b),m(b,b,p),b}},{"./normalize":424,"./scale":426}],426:[function(h,G,X){G.exports=function(i,m,b){return i[0]=m[0]*b,i[1]=m[1]*b,i[2]=m[2]*b,i[3]=m[3]*b,i}},{}],427:[function(h,G,X){G.exports=function(i,m,b,p){return i[0]=m[0]+b[0]*p,i[1]=m[1]+b[1]*p,i[2]=m[2]+b[2]*p,i[3]=m[3]+b[3]*p,i}},{}],428:[function(h,G,X){G.exports=function(i,m,b,p,r){return i[0]=m,i[1]=b,i[2]=p,i[3]=r,i}},{}],429:[function(h,G,X){G.exports=function(i,m){var b=m[0]-i[0],p=m[1]-i[1],r=m[2]-i[2],u=m[3]-i[3];return b*b+p*p+r*r+u*u}},{}],430:[function(h,G,X){G.exports=function(i){var m=i[0],b=i[1],p=i[2],r=i[3];return m*m+b*b+p*p+r*r}},{}],431:[function(h,G,X){G.exports=function(i,m,b){return i[0]=m[0]-b[0],i[1]=m[1]-b[1],i[2]=m[2]-b[2],i[3]=m[3]-b[3],i}},{}],432:[function(h,G,X){G.exports=function(i,m,b){var p=m[0],r=m[1],u=m[2],c=m[3];return i[0]=b[0]*p+b[4]*r+b[8]*u+b[12]*c,i[1]=b[1]*p+b[5]*r+b[9]*u+b[13]*c,i[2]=b[2]*p+b[6]*r+b[10]*u+b[14]*c,i[3]=b[3]*p+b[7]*r+b[11]*u+b[15]*c,i}},{}],433:[function(h,G,X){G.exports=function(i,m,b){var p=m[0],r=m[1],u=m[2],c=b[0],l=b[1],f=b[2],s=b[3],o=s*p+l*u-f*r,d=s*r+f*p-c*u,g=s*u+c*r-l*p,y=-c*p-l*r-f*u;return i[0]=o*s+y*-c+d*-f-g*-l,i[1]=d*s+y*-l+g*-c-o*-f,i[2]=g*s+y*-f+o*-l-d*-c,i[3]=m[3],i}},{}],434:[function(h,G,X){var i=h("glsl-tokenizer"),m=h("atob-lite");G.exports=function(b){for(var p=Array.isArray(b)?b:i(b),r=0;r<p.length;r++){var u=p[r];if("preprocessor"===u.type){var c=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(c&&c[2]){var f=c[2];return(c[1]?m(f):f).trim()}}}}},{"atob-lite":84,"glsl-tokenizer":441}],435:[function(h,G,X){G.exports=function(c){var l,f,s,o=0,d=0,g=999,y=[],v=[],_=1,w=0,x=0,E=!1,k=!1,C="",L=b,P=i;"300 es"===(c=c||{}).version&&(L=r,P=p);var A={},I={};for(o=0;o<L.length;o++)A[L[o]]=!0;for(o=0;o<P.length;o++)I[P[o]]=!0;return function(K){return v=[],null!==K?function(q){var re;for(o=0,q.toString&&(q=q.toString()),C+=q.replace(/\r\n/g,"\n"),s=C.length;l=C[o],o<s;){switch(re=o,g){case 0:o="/"===l&&"*"===f?(y.push(l),D(y.join("")),g=999,o+1):(y.push(l),f=l,o+1);break;case 1:case 2:o="\r"!==l&&"\n"!==l||"\\"===f?(y.push(l),f=l,o+1):(D(y.join("")),g=999,o);break;case 3:o=H();break;case 4:o="."===l||/[eE]/.test(l)?(y.push(l),g=5,f=l,o+1):"x"===l&&1===y.length&&"0"===y[0]?(g=11,y.push(l),f=l,o+1):/[^\d]/.test(l)?(D(y.join("")),g=999,o):(y.push(l),f=l,o+1);break;case 11:o=/[^a-fA-F0-9]/.test(l)?(D(y.join("")),g=999,o):(y.push(l),f=l,o+1);break;case 5:"f"===l&&(y.push(l),f=l,o+=1),o=/[eE]/.test(l)?(y.push(l),f=l,o+1):("-"!==l&&"+"!==l||!/[eE]/.test(f))&&/[^\d]/.test(l)?(D(y.join("")),g=999,o):(y.push(l),f=l,o+1);break;case 9999:o=te();break;case 9:o=/[^\s]/g.test(l)?(D(y.join("")),g=999,o):(y.push(l),f=l,o+1);break;case 999:y=y.length?[]:y,o="/"===f&&"*"===l?(x=d+o-1,g=0,f=l,o+1):"/"===f&&"/"===l?(x=d+o-1,g=1,f=l,o+1):"#"===l?(g=2,x=d+o,o):/\s/.test(l)?(g=9,x=d+o,o):(E=/\d/.test(l),k=/[^\w_]/.test(l),x=d+o,g=E?4:k?3:9999,o)}if(re!==o)switch(C[re]){case"\n":w=0,++_;break;default:++w}}return d+=o,C=C.slice(o),v}(K):(y.length&&D(y.join("")),g=10,D("(eof)"),v)};function D(K){K.length&&v.push({type:u[g],data:K,position:x,line:_,column:w})}function H(){if("."===f&&/\d/.test(l))return g=5,o;if("/"===f&&"*"===l)return g=0,o;if("/"===f&&"/"===l)return g=1,o;if("."===l&&y.length){for(;Y(y););return g=5,o}if(";"===l||")"===l||"("===l){if(y.length)for(;Y(y););return D(l),g=999,o+1}var K=2===y.length&&"="!==l;if(/[\w_\d\s]/.test(l)||K){for(;Y(y););return g=999,o}return y.push(l),f=l,o+1}function Y(K){for(var q,re,V=0;;){if(q=m.indexOf(K.slice(0,K.length+V).join("")),re=m[q],-1===q){if(V--+K.length>0)continue;re=K.slice(0,1).join("")}return D(re),x+=re.length,(y=y.slice(re.length)).length}}function te(){if(/[^\d\w_]/.test(l)){var K=y.join("");return g=I[K]?8:A[K]?7:6,D(y.join("")),g=999,o}return y.push(l),f=l,o+1}};var i=h("./lib/literals"),m=h("./lib/operators"),b=h("./lib/builtins"),p=h("./lib/literals-300es"),r=h("./lib/builtins-300es"),u=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":437,"./lib/builtins-300es":436,"./lib/literals":439,"./lib/literals-300es":438,"./lib/operators":440}],436:[function(h,G,X){var i=h("./builtins");i=i.slice().filter(function(m){return!/^(gl\_|texture)/.test(m)}),G.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":437}],437:[function(h,G,X){G.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],438:[function(h,G,X){var i=h("./literals");G.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":439}],439:[function(h,G,X){G.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],440:[function(h,G,X){G.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],441:[function(h,G,X){var i=h("./index");G.exports=function(m,b){var p=i(b),r=[];return(r=r.concat(p(m))).concat(p(null))}},{"./index":435}],442:[function(h,G,X){arguments[4][265][0].apply(X,arguments)},{dup:265}],443:[function(h,G,X){(function(i){(function(){"use strict";var m,b=h("is-browser");m="function"==typeof i.matchMedia?!i.matchMedia("(hover: none)").matches:b,G.exports=m}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":452}],444:[function(h,G,X){"use strict";var i=h("is-browser");G.exports=i&&function(){var m=!1;try{var b=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("test",null,b),window.removeEventListener("test",null,b)}catch(p){m=!1}return m}()},{"is-browser":452}],445:[function(h,G,X){X.read=function(i,m,b,p,r){var u,c,l=8*r-p-1,f=(1<<l)-1,s=f>>1,o=-7,d=b?r-1:0,g=b?-1:1,y=i[m+d];for(d+=g,u=y&(1<<-o)-1,y>>=-o,o+=l;o>0;u=256*u+i[m+d],d+=g,o-=8);for(c=u&(1<<-o)-1,u>>=-o,o+=p;o>0;c=256*c+i[m+d],d+=g,o-=8);if(0===u)u=1-s;else{if(u===f)return c?NaN:1/0*(y?-1:1);c+=Math.pow(2,p),u-=s}return(y?-1:1)*c*Math.pow(2,u-p)},X.write=function(i,m,b,p,r,u){var c,l,f,s=8*u-r-1,o=(1<<s)-1,d=o>>1,g=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,y=p?0:u-1,v=p?1:-1,_=m<0||0===m&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(l=isNaN(m)?1:0,c=o):(c=Math.floor(Math.log(m)/Math.LN2),m*(f=Math.pow(2,-c))<1&&(c--,f*=2),(m+=c+d>=1?g/f:g*Math.pow(2,1-d))*f>=2&&(c++,f/=2),c+d>=o?(l=0,c=o):c+d>=1?(l=(m*f-1)*Math.pow(2,r),c+=d):(l=m*Math.pow(2,d-1)*Math.pow(2,r),c=0));r>=8;i[b+y]=255&l,y+=v,l/=256,r-=8);for(c=c<<r|l,s+=r;s>0;i[b+y]=255&c,y+=v,c/=256,s-=8);i[b+y-v]|=128*_}},{}],446:[function(h,G,X){"use strict";G.exports=function(f,s){var o=f.length;if(0===o)throw new Error("Must have at least d+1 points");var d=f[0].length;if(o<=d)throw new Error("Must input at least d+1 points");var g=f.slice(0,d+1),y=i.apply(void 0,g);if(0===y)throw new Error("Input not in general position");for(var v=new Array(d+1),_=0;_<=d;++_)v[_]=_;y<0&&(v[0]=1,v[1]=0);var w=new b(v,new Array(d+1),!1),x=w.adjacent,E=new Array(d+2);for(_=0;_<=d;++_){for(var k=v.slice(),C=0;C<=d;++C)C===_&&(k[C]=-1);var L=k[0];k[0]=k[1],k[1]=L;var P=new b(k,new Array(d+1),!0);x[_]=P,E[_]=P}for(E[d+1]=w,_=0;_<=d;++_){k=x[_].vertices;var A=x[_].adjacent;for(C=0;C<=d;++C){var I=k[C];if(I<0)A[C]=w;else for(var D=0;D<=d;++D)x[D].vertices.indexOf(I)<0&&(A[C]=x[D])}}var R=new c(d,g,E),S=!!s;for(_=d+1;_<o;++_)R.insert(f[_],S);return R.boundary()};var i=h("robust-orientation"),m=h("simplicial-complex").compareCells;function b(f,s,o){this.vertices=f,this.adjacent=s,this.boundary=o,this.lastVisited=-1}function p(f,s,o){this.vertices=f,this.cell=s,this.index=o}function r(f,s){return m(f.vertices,s.vertices)}b.prototype.flip=function(){var f=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=f;var s=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=s};var u=[];function c(f,s,o){this.dimension=f,this.vertices=s,this.simplices=o,this.interior=o.filter(function(y){return!y.boundary}),this.tuple=new Array(f+1);for(var d=0;d<=f;++d)this.tuple[d]=this.vertices[d];var g=u[f];g||(g=u[f]=function(y){for(var v=["function orient(){var tuple=this.tuple;return test("],_=0;_<=y;++_)_>0&&v.push(","),v.push("tuple[",_,"]");v.push(")}return orient");var w=new Function("test",v.join("")),x=i[y+1];return x||(x=i),w(x)}(f)),this.orient=g}var l=c.prototype;l.handleBoundaryDegeneracy=function(f,s){var o=this.dimension,d=this.vertices.length-1,g=this.tuple,y=this.vertices,v=[f];for(f.lastVisited=-d;v.length>0;)for(var _=(f=v.pop()).adjacent,w=0;w<=o;++w){var x=_[w];if(x.boundary&&!(x.lastVisited<=-d)){for(var E=x.vertices,k=0;k<=o;++k){var C=E[k];g[k]=C<0?s:y[C]}var L=this.orient();if(L>0)return x;x.lastVisited=-d,0===L&&v.push(x)}}return null},l.walk=function(f,s){var o=this.vertices.length-1,d=this.dimension,g=this.vertices,y=this.tuple,v=s?this.interior.length*Math.random()|0:this.interior.length-1,_=this.interior[v];e:for(;!_.boundary;){for(var w=_.vertices,x=_.adjacent,E=0;E<=d;++E)y[E]=g[w[E]];for(_.lastVisited=o,E=0;E<=d;++E){var k=x[E];if(!(k.lastVisited>=o)){var C=y[E];y[E]=f;var L=this.orient();if(y[E]=C,L<0){_=k;continue e}k.lastVisited=k.boundary?-o:o}}return}return _},l.addPeaks=function(f,s){var o=this.vertices.length-1,d=this.dimension,g=this.vertices,y=this.tuple,v=this.interior,_=this.simplices,w=[s];s.lastVisited=o,s.vertices[s.vertices.indexOf(-1)]=o,s.boundary=!1,v.push(s);for(var x=[];w.length>0;){var E=(s=w.pop()).vertices,k=s.adjacent,C=E.indexOf(o);if(!(C<0))for(var L=0;L<=d;++L)if(L!==C){var P=k[L];if(P.boundary&&!(P.lastVisited>=o)){var A=P.vertices;if(P.lastVisited!==-o){for(var I=0,D=0;D<=d;++D)A[D]<0?(I=D,y[D]=f):y[D]=g[A[D]];if(this.orient()>0){A[I]=o,P.boundary=!1,v.push(P),w.push(P),P.lastVisited=o;continue}P.lastVisited=-o}var R=P.adjacent,S=E.slice(),N=k.slice(),B=new b(S,N,!0);_.push(B);var H=R.indexOf(s);if(!(H<0))for(R[H]=B,N[C]=P,S[L]=-1,N[L]=s,k[L]=B,B.flip(),D=0;D<=d;++D){var Y=S[D];if(!(Y<0||Y===o)){for(var Q=new Array(d-1),ne=0,ae=0;ae<=d;++ae){var te=S[ae];te<0||ae===D||(Q[ne++]=te)}x.push(new p(Q,B,D))}}}}}for(x.sort(r),L=0;L+1<x.length;L+=2){var K=x[L],q=x[L+1];K.index<0||q.index<0||(K.cell.adjacent[K.index]=q.cell,q.cell.adjacent[q.index]=K.cell)}},l.insert=function(f,s){var o=this.vertices;o.push(f);var d=this.walk(f,s);if(d){for(var g=this.dimension,y=this.tuple,v=0;v<=g;++v){var _=d.vertices[v];y[v]=_<0?f:o[_]}var w=this.orient(y);w<0||(0!==w||(d=this.handleBoundaryDegeneracy(d,f)))&&this.addPeaks(f,d)}},l.boundary=function(){for(var f=this.dimension,s=[],o=this.simplices,d=o.length,g=0;g<d;++g){var y=o[g];if(y.boundary){for(var v=new Array(f),_=y.vertices,w=0,x=0,E=0;E<=f;++E)_[E]>=0?v[w++]=_[E]:x=1&E;if(x===(1&f)){var k=v[0];v[0]=v[1],v[1]=k}s.push(v)}}return s}},{"robust-orientation":548,"simplicial-complex":559}],447:[function(h,G,X){G.exports="function"==typeof Object.create?function(i,m){m&&(i.super_=m,i.prototype=Object.create(m.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:function(i,m){if(m){i.super_=m;var b=function(){};b.prototype=m.prototype,i.prototype=new b,i.prototype.constructor=i}}},{}],448:[function(h,G,X){"use strict";var i=h("binary-search-bounds");function m(w,x,E,k,C){this.mid=w,this.left=x,this.right=E,this.leftPoints=k,this.rightPoints=C,this.count=(x?x.count:0)+(E?E.count:0)+k.length}G.exports=function(w){return new v(w&&0!==w.length?y(w):null)};var b=m.prototype;function p(w,x){w.mid=x.mid,w.left=x.left,w.right=x.right,w.leftPoints=x.leftPoints,w.rightPoints=x.rightPoints,w.count=x.count}function r(w,x){var E=y(x);w.mid=E.mid,w.left=E.left,w.right=E.right,w.leftPoints=E.leftPoints,w.rightPoints=E.rightPoints,w.count=E.count}function u(w,x){var E=w.intervals([]);E.push(x),r(w,E)}function c(w,x){var E=w.intervals([]),k=E.indexOf(x);return k<0?0:(E.splice(k,1),r(w,E),1)}function l(w,x,E){for(var k=0;k<w.length&&w[k][0]<=x;++k){var C=E(w[k]);if(C)return C}}function f(w,x,E){for(var k=w.length-1;k>=0&&w[k][1]>=x;--k){var C=E(w[k]);if(C)return C}}function s(w,x){for(var E=0;E<w.length;++E){var k=x(w[E]);if(k)return k}}function o(w,x){return w-x}function d(w,x){return w[0]-x[0]||w[1]-x[1]}function g(w,x){return w[1]-x[1]||w[0]-x[0]}function y(w){if(0===w.length)return null;for(var x=[],E=0;E<w.length;++E)x.push(w[E][0],w[E][1]);x.sort(o);var k=x[x.length>>1],C=[],L=[],P=[];for(E=0;E<w.length;++E){var A=w[E];A[1]<k?C.push(A):k<A[0]?L.push(A):P.push(A)}var I=P,D=P.slice();return I.sort(d),D.sort(g),new m(k,y(C),y(L),I,D)}function v(w){this.root=w}b.intervals=function(w){return w.push.apply(w,this.leftPoints),this.left&&this.left.intervals(w),this.right&&this.right.intervals(w),w},b.insert=function(w){var x=this.count-this.leftPoints.length;if(this.count+=1,w[1]<this.mid)this.left?4*(this.left.count+1)>3*(x+1)?u(this,w):this.left.insert(w):this.left=y([w]);else if(w[0]>this.mid)this.right?4*(this.right.count+1)>3*(x+1)?u(this,w):this.right.insert(w):this.right=y([w]);else{var E=i.ge(this.leftPoints,w,d),k=i.ge(this.rightPoints,w,g);this.leftPoints.splice(E,0,w),this.rightPoints.splice(k,0,w)}},b.remove=function(w){var x=this.count-this.leftPoints;if(w[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(x-1)?c(this,w):2===(L=this.left.remove(w))?(this.left=null,this.count-=1,1):(1===L&&(this.count-=1),L):0;if(w[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(x-1)?c(this,w):2===(L=this.right.remove(w))?(this.right=null,this.count-=1,1):(1===L&&(this.count-=1),L):0;if(1===this.count)return this.leftPoints[0]===w?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===w){if(this.left&&this.right){for(var E=this,k=this.left;k.right;)E=k,k=k.right;if(E===this)k.right=this.right;else{var C=this.left,L=this.right;E.count-=k.count,E.right=k.left,k.left=C,k.right=L}p(this,k),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else p(this,this.left?this.left:this.right);return 1}for(C=i.ge(this.leftPoints,w,d);C<this.leftPoints.length&&this.leftPoints[C][0]===w[0];++C)if(this.leftPoints[C]===w)for(this.count-=1,this.leftPoints.splice(C,1),L=i.ge(this.rightPoints,w,g);L<this.rightPoints.length&&this.rightPoints[L][1]===w[1];++L)if(this.rightPoints[L]===w)return this.rightPoints.splice(L,1),1;return 0},b.queryPoint=function(w,x){return w<this.mid?this.left&&(E=this.left.queryPoint(w,x))?E:l(this.leftPoints,w,x):w>this.mid?this.right&&(E=this.right.queryPoint(w,x))?E:f(this.rightPoints,w,x):s(this.leftPoints,x);var E},b.queryInterval=function(w,x,E){var k;return w<this.mid&&this.left&&(k=this.left.queryInterval(w,x,E))||x>this.mid&&this.right&&(k=this.right.queryInterval(w,x,E))?k:x<this.mid?l(this.leftPoints,x,E):w>this.mid?f(this.rightPoints,w,E):s(this.leftPoints,E)};var _=v.prototype;_.insert=function(w){this.root?this.root.insert(w):this.root=new m(w[0],null,null,[w],[w])},_.remove=function(w){if(this.root){var x=this.root.remove(w);return 2===x&&(this.root=null),0!==x}return!1},_.queryPoint=function(w,x){if(this.root)return this.root.queryPoint(w,x)},_.queryInterval=function(w,x,E){if(w<=x&&this.root)return this.root.queryInterval(w,x,E)},Object.defineProperty(_,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(_,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":449}],449:[function(h,G,X){arguments[4][251][0].apply(X,arguments)},{dup:251}],450:[function(h,G,X){"use strict";G.exports=function(i,m){m=m||new Array(i.length);for(var b=0;b<i.length;++b)m[i[b]]=b;return m}},{}],451:[function(h,G,X){"use strict";G.exports=function(i){for(var m=new Array(i),b=0;b<i;++b)m[b]=b;return m}},{}],452:[function(h,G,X){G.exports=!0},{}],453:[function(h,G,X){function i(m){return!!m.constructor&&"function"==typeof m.constructor.isBuffer&&m.constructor.isBuffer(m)}G.exports=function(m){return null!=m&&(i(m)||"function"==typeof(b=m).readFloatLE&&"function"==typeof b.slice&&i(b.slice(0,0))||!!m._isBuffer);var b}},{}],454:[function(h,G,X){"use strict";G.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],455:[function(h,G,X){"use strict";G.exports=b,G.exports.isMobile=b,G.exports.default=b;var i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,m=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function b(p){p||(p={});var r=p.ua;if(r||"undefined"==typeof navigator||(r=navigator.userAgent),r&&r.headers&&"string"==typeof r.headers["user-agent"]&&(r=r.headers["user-agent"]),"string"!=typeof r)return!1;var u=p.tablet?m.test(r):i.test(r);return!u&&p.tablet&&p.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==r.indexOf("Macintosh")&&-1!==r.indexOf("Safari")&&(u=!0),u}},{}],456:[function(h,G,X){"use strict";G.exports=function(i){var m=typeof i;return null!==i&&("object"===m||"function"===m)}},{}],457:[function(h,G,X){"use strict";var i=Object.prototype.toString;G.exports=function(m){var b;return"[object Object]"===i.call(m)&&(null===(b=Object.getPrototypeOf(m))||b===Object.getPrototypeOf({}))}},{}],458:[function(h,G,X){"use strict";G.exports=function(i){for(var m,b=i.length,p=0;p<b;p++)if(((m=i.charCodeAt(p))<9||m>13)&&32!==m&&133!==m&&160!==m&&5760!==m&&6158!==m&&(m<8192||m>8205)&&8232!==m&&8233!==m&&8239!==m&&8287!==m&&8288!==m&&12288!==m&&65279!==m)return!1;return!0}},{}],459:[function(h,G,X){"use strict";G.exports=function(i){return"string"==typeof i&&(i=i.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(i)&&/[\dz]$/i.test(i)&&i.length>4))}},{}],460:[function(h,G,X){G.exports=function(i,m,b){return i*(1-b)+m*b}},{}],461:[function(h,G,X){var i,m;i=this,m=function(){"use strict";var i,m,b;function p(r,u){if(i)if(m){var c="var sharedChunk = {}; ("+i+")(sharedChunk); ("+m+")(sharedChunk);",l={};i(l),(b=u(l)).workerUrl=window.URL.createObjectURL(new Blob([c],{type:"text/javascript"}))}else m=u;else i=u}return p(0,function(r){function u(M,z){return M(z={exports:{}},z.exports),z.exports}var c=l;function l(M,z,J,se){this.cx=3*M,this.bx=3*(J-M)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*z,this.by=3*(se-z)-this.cy,this.ay=1-this.cy-this.by,this.p1x=M,this.p1y=se,this.p2x=J,this.p2y=se}l.prototype.sampleCurveX=function(M){return((this.ax*M+this.bx)*M+this.cx)*M},l.prototype.sampleCurveY=function(M){return((this.ay*M+this.by)*M+this.cy)*M},l.prototype.sampleCurveDerivativeX=function(M){return(3*this.ax*M+2*this.bx)*M+this.cx},l.prototype.solveCurveX=function(M,z){var J,se,ve,Me,Fe;for(void 0===z&&(z=1e-6),ve=M,Fe=0;Fe<8;Fe++){if(Me=this.sampleCurveX(ve)-M,Math.abs(Me)<z)return ve;var Ze=this.sampleCurveDerivativeX(ve);if(Math.abs(Ze)<1e-6)break;ve-=Me/Ze}if((ve=M)<(J=0))return J;if(ve>(se=1))return se;for(;J<se;){if(Me=this.sampleCurveX(ve),Math.abs(Me-M)<z)return ve;M>Me?J=ve:se=ve,ve=.5*(se-J)+J}return ve},l.prototype.solve=function(M,z){return this.sampleCurveY(this.solveCurveX(M,z))};var f=s;function s(M,z){this.x=M,this.y=z}function o(M,z,J,se){var ve=new c(M,z,J,se);return function(Me){return ve.solve(Me)}}s.prototype={clone:function(){return new s(this.x,this.y)},add:function(M){return this.clone()._add(M)},sub:function(M){return this.clone()._sub(M)},multByPoint:function(M){return this.clone()._multByPoint(M)},divByPoint:function(M){return this.clone()._divByPoint(M)},mult:function(M){return this.clone()._mult(M)},div:function(M){return this.clone()._div(M)},rotate:function(M){return this.clone()._rotate(M)},rotateAround:function(M,z){return this.clone()._rotateAround(M,z)},matMult:function(M){return this.clone()._matMult(M)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(M){return this.x===M.x&&this.y===M.y},dist:function(M){return Math.sqrt(this.distSqr(M))},distSqr:function(M){var z=M.x-this.x,J=M.y-this.y;return z*z+J*J},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(M){return Math.atan2(this.y-M.y,this.x-M.x)},angleWith:function(M){return this.angleWithSep(M.x,M.y)},angleWithSep:function(M,z){return Math.atan2(this.x*z-this.y*M,this.x*M+this.y*z)},_matMult:function(M){var J=M[2]*this.x+M[3]*this.y;return this.x=M[0]*this.x+M[1]*this.y,this.y=J,this},_add:function(M){return this.x+=M.x,this.y+=M.y,this},_sub:function(M){return this.x-=M.x,this.y-=M.y,this},_mult:function(M){return this.x*=M,this.y*=M,this},_div:function(M){return this.x/=M,this.y/=M,this},_multByPoint:function(M){return this.x*=M.x,this.y*=M.y,this},_divByPoint:function(M){return this.x/=M.x,this.y/=M.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var M=this.y;return this.y=this.x,this.x=-M,this},_rotate:function(M){var z=Math.cos(M),J=Math.sin(M),ve=J*this.x+z*this.y;return this.x=z*this.x-J*this.y,this.y=ve,this},_rotateAround:function(M,z){var J=Math.cos(M),se=Math.sin(M),Me=z.y+se*(this.x-z.x)+J*(this.y-z.y);return this.x=z.x+J*(this.x-z.x)-se*(this.y-z.y),this.y=Me,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},s.convert=function(M){return M instanceof s?M:Array.isArray(M)?new s(M[0],M[1]):M};var d=o(.25,.1,.25,1);function g(M,z,J){return Math.min(J,Math.max(z,M))}function y(M,z,J){var se=J-z,ve=((M-z)%se+se)%se+z;return ve===z?J:ve}function v(M){for(var z=[],J=arguments.length-1;J-- >0;)z[J]=arguments[J+1];for(var se=0,ve=z;se<ve.length;se+=1){var Me=ve[se];for(var Fe in Me)M[Fe]=Me[Fe]}return M}var _=1;function w(){return _++}function x(){return function M(z){return z?(z^16*Math.random()>>z/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,M)}()}function E(M){return!!M&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(M)}function k(M,z){M.forEach(function(J){z[J]&&(z[J]=z[J].bind(z))})}function C(M,z){return-1!==M.indexOf(z,M.length-z.length)}function L(M,z,J){var se={};for(var ve in M)se[ve]=z.call(J||this,M[ve],ve,M);return se}function P(M,z,J){var se={};for(var ve in M)z.call(J||this,M[ve],ve,M)&&(se[ve]=M[ve]);return se}function A(M){return Array.isArray(M)?M.map(A):"object"==typeof M&&M?L(M,A):M}var I={};function D(M){I[M]||("undefined"!=typeof console&&console.warn(M),I[M]=!0)}function R(M,z,J){return(J.y-M.y)*(z.x-M.x)>(z.y-M.y)*(J.x-M.x)}function S(M){for(var z=0,J=0,se=M.length,ve=se-1,Me=void 0,Fe=void 0;J<se;ve=J++)z+=((Fe=M[ve]).x-(Me=M[J]).x)*(Me.y+Fe.y);return z}function N(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function B(M){var z={};if(M.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(se,ve,Me,Fe){var Ze=Me||Fe;return z[ve]=!Ze||Ze.toLowerCase(),""}),z["max-age"]){var J=parseInt(z["max-age"],10);isNaN(J)?delete z["max-age"]:z["max-age"]=J}return z}var H=null;function Y(M){if(null==H){var z=M.navigator?M.navigator.userAgent:null;H=!!M.safari||!(!z||!(/\b(iPad|iPhone|iPod)\b/.test(z)||z.match("Safari")&&!z.match("Chrome")))}return H}function Q(M){try{var z=self[M];return z.setItem("_mapbox_test_",1),z.removeItem("_mapbox_test_"),!0}catch(J){return!1}}var ne,ae,te,K,q=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),re=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,V=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,W={now:q,frame:function(M){var z=re(M);return{cancel:function(){return V(z)}}},getImageData:function(M,z){void 0===z&&(z=0);var J=self.document.createElement("canvas"),se=J.getContext("2d");if(!se)throw new Error("failed to create canvas 2d context");return J.width=M.width,J.height=M.height,se.drawImage(M,0,0,M.width,M.height),se.getImageData(-z,-z,M.width+2*z,M.height+2*z)},resolveURL:function(M){return ne||(ne=self.document.createElement("a")),ne.href=M,ne.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==ae&&(ae=self.matchMedia("(prefers-reduced-motion: reduce)")),ae.matches)}},Z={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},oe={supported:!1,testSupport:function(M){ie||!K||(ue?fe(M):te=M)}},ie=!1,ue=!1;function fe(M){var z=M.createTexture();M.bindTexture(M.TEXTURE_2D,z);try{if(M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,K),M.isContextLost())return;oe.supported=!0}catch(J){}M.deleteTexture(z),ie=!0}self.document&&((K=self.document.createElement("img")).onload=function(){te&&fe(te),te=null,ue=!0},K.onerror=function(){ie=!0,te=null},K.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var he="01",de=function(M,z){this._transformRequestFn=M,this._customAccessToken=z,this._createSkuToken()};function be(M){return 0===M.indexOf("mapbox:")}de.prototype._createSkuToken=function(){var M=function(){for(var z="",J=0;J<10;J++)z+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",he,z].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=M.token,this._skuTokenExpiresAt=M.tokenExpiresAt},de.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},de.prototype.transformRequest=function(M,z){return this._transformRequestFn&&this._transformRequestFn(M,z)||{url:M}},de.prototype.normalizeStyleURL=function(M,z){if(!be(M))return M;var J=ke(M);return J.path="/styles/v1"+J.path,this._makeAPIURL(J,this._customAccessToken||z)},de.prototype.normalizeGlyphsURL=function(M,z){if(!be(M))return M;var J=ke(M);return J.path="/fonts/v1"+J.path,this._makeAPIURL(J,this._customAccessToken||z)},de.prototype.normalizeSourceURL=function(M,z){if(!be(M))return M;var J=ke(M);return J.path="/v4/"+J.authority+".json",J.params.push("secure"),this._makeAPIURL(J,this._customAccessToken||z)},de.prototype.normalizeSpriteURL=function(M,z,J,se){var ve=ke(M);return be(M)?(ve.path="/styles/v1"+ve.path+"/sprite"+z+J,this._makeAPIURL(ve,this._customAccessToken||se)):(ve.path+=""+z+J,ze(ve))},de.prototype.normalizeTileURL=function(M,z){if(this._isSkuTokenExpired()&&this._createSkuToken(),M&&!be(M))return M;var J=ke(M);J.path=J.path.replace(/(\.(png|jpg)\d*)(?=$)/,(W.devicePixelRatio>=2||512===z?"@2x":"")+(oe.supported?".webp":"$1")),J.path=J.path.replace(/^.+\/v4\//,"/"),J.path="/v4"+J.path;var Me=this._customAccessToken||function(Fe){for(var Ze=0,lt=Fe;Ze<lt.length;Ze+=1){var Tt=lt[Ze].match(/^access_token=(.*)$/);if(Tt)return Tt[1]}return null}(J.params)||Z.ACCESS_TOKEN;return Z.REQUIRE_ACCESS_TOKEN&&Me&&this._skuToken&&J.params.push("sku="+this._skuToken),this._makeAPIURL(J,Me)},de.prototype.canonicalizeTileURL=function(M,z){var J=ke(M);if(!J.path.match(/(^\/v4\/)/)||!J.path.match(/\.[\w]+$/))return M;var se="mapbox://tiles/";se+=J.path.replace("/v4/","");var ve=J.params;return z&&(ve=ve.filter(function(Me){return!Me.match(/^access_token=/)})),ve.length&&(se+="?"+ve.join("&")),se},de.prototype.canonicalizeTileset=function(M,z){for(var J=!!z&&be(z),se=[],ve=0,Me=M.tiles||[];ve<Me.length;ve+=1){var Fe=Me[ve];Te(Fe)?se.push(this.canonicalizeTileURL(Fe,J)):se.push(Fe)}return se},de.prototype._makeAPIURL=function(M,z){var J="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",se=ke(Z.API_URL);if(M.protocol=se.protocol,M.authority=se.authority,"/"!==se.path&&(M.path=""+se.path+M.path),!Z.REQUIRE_ACCESS_TOKEN)return ze(M);if(!(z=z||Z.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+J);if("s"===z[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+J);return M.params=M.params.filter(function(ve){return-1===ve.indexOf("access_token")}),M.params.push("access_token="+z),ze(M)};var pe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Te(M){return pe.test(M)}var ye=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ke(M){var z=M.match(ye);if(!z)throw new Error("Unable to parse URL object");return{protocol:z[1],authority:z[2],path:z[3]||"/",params:z[4]?z[4].split("&"):[]}}function ze(M){var z=M.params.length?"?"+M.params.join("&"):"";return M.protocol+"://"+M.authority+M.path+z}function je(M){if(!M)return null;var J=M.split(".");if(!J||3!==J.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(J[1]).split("").map(function(se){return"%"+("00"+se.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(se){return null}}var Ie=function(M){this.type=M,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ie.prototype.getStorageKey=function(M){var se,J=je(Z.ACCESS_TOKEN);return se=J&&J.u?self.btoa(encodeURIComponent(J.u).replace(/%([0-9A-F]{2})/g,function(ve,Me){return String.fromCharCode(Number("0x"+Me))})):Z.ACCESS_TOKEN||"",M?"mapbox.eventData."+M+":"+se:"mapbox.eventData:"+se},Ie.prototype.fetchEventData=function(){var M=Q("localStorage"),z=this.getStorageKey(),J=this.getStorageKey("uuid");if(M)try{var se=self.localStorage.getItem(z);se&&(this.eventData=JSON.parse(se));var ve=self.localStorage.getItem(J);ve&&(this.anonId=ve)}catch(Me){D("Unable to read from LocalStorage")}},Ie.prototype.saveEventData=function(){var M=Q("localStorage"),z=this.getStorageKey(),J=this.getStorageKey("uuid");if(M)try{self.localStorage.setItem(J,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(z,JSON.stringify(this.eventData))}catch(se){D("Unable to write to LocalStorage")}},Ie.prototype.processRequests=function(M){},Ie.prototype.postEvent=function(M,z,J,se){var ve=this;if(Z.EVENTS_URL){var Me=ke(Z.EVENTS_URL);Me.params.push("access_token="+(se||Z.ACCESS_TOKEN||""));var Fe={event:this.type,created:new Date(M).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:he,userId:this.anonId},Ze=z?v(Fe,z):Fe,lt={url:ze(Me),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ze])};this.pendingRequest=gn(lt,function(Tt){ve.pendingRequest=null,J(Tt),ve.saveEventData(),ve.processRequests(se)})}},Ie.prototype.queueRequest=function(M,z){this.queue.push(M),this.processRequests(z)};var Ce,_e,we=function(M){function z(){M.call(this,"map.load"),this.success={},this.skuToken=""}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.postMapLoadEvent=function(J,se,ve,Me){this.skuToken=ve,(Z.EVENTS_URL&&Me||Z.ACCESS_TOKEN&&Array.isArray(J)&&J.some(function(Fe){return be(Fe)||Te(Fe)}))&&this.queueRequest({id:se,timestamp:Date.now()},Me)},z.prototype.processRequests=function(J){var se=this;if(!this.pendingRequest&&0!==this.queue.length){var ve=this.queue.shift(),Me=ve.id,Fe=ve.timestamp;Me&&this.success[Me]||(this.anonId||this.fetchEventData(),E(this.anonId)||(this.anonId=x()),this.postEvent(Fe,{skuToken:this.skuToken},function(Ze){Ze||Me&&(se.success[Me]=!0)},J))}},z}(Ie),Se=new(function(M){function z(J){M.call(this,"appUserTurnstile"),this._customAccessToken=J}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.postTurnstileEvent=function(J,se){Z.EVENTS_URL&&Z.ACCESS_TOKEN&&Array.isArray(J)&&J.some(function(ve){return be(ve)||Te(ve)})&&this.queueRequest(Date.now(),se)},z.prototype.processRequests=function(J){var se=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var ve=je(Z.ACCESS_TOKEN),Me=ve?ve.u:Z.ACCESS_TOKEN,Fe=Me!==this.eventData.tokenU;E(this.anonId)||(this.anonId=x(),Fe=!0);var Ze=this.queue.shift();if(this.eventData.lastSuccess){var lt=new Date(this.eventData.lastSuccess),Tt=new Date(Ze),Dt=(Ze-this.eventData.lastSuccess)/864e5;Fe=Fe||Dt>=1||Dt<-1||lt.getDate()!==Tt.getDate()}else Fe=!0;if(!Fe)return this.processRequests();this.postEvent(Ze,{"enabled.telemetry":!1},function(Jt){Jt||(se.eventData.lastSuccess=Ze,se.eventData.tokenU=Me)},J)}},z}(Ie)),Oe=Se.postTurnstileEvent.bind(Se),Be=new we,He=Be.postMapLoadEvent.bind(Be),Xe=500,nt=50;function et(){self.caches&&!Ce&&(Ce=self.caches.open("mapbox-tiles"))}function Ye(M){var z=M.indexOf("?");return z<0?M:M.slice(0,z)}var at,ct=1/0;function _t(){return null==at&&(at=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),at}var xt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(xt);var Ht=function(M){function z(J,se,ve){401===se&&Te(ve)&&(J+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),M.call(this,J),this.status=se,this.url=ve,this.name=this.constructor.name,this.message=J}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},z}(Error),At=N()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function ht(M,z){var J,se=new self.AbortController,ve=new self.Request(M.url,{method:M.method||"GET",body:M.body,credentials:M.credentials,headers:M.headers,referrer:At(),signal:se.signal}),Me=!1,Fe=!1,Ze=(J=ve.url).indexOf("sku=")>0&&Te(J);"json"===M.type&&ve.headers.set("Accept","application/json");var lt=function(Dt,Jt,ln){if(!Fe){if(Dt&&"SecurityError"!==Dt.message&&D(Dt),Jt&&ln)return Tt(Jt);var an=Date.now();self.fetch(ve).then(function(xn){if(xn.ok){var On=Ze?xn.clone():null;return Tt(xn,On,an)}return z(new Ht(xn.statusText,xn.status,M.url))}).catch(function(xn){20!==xn.code&&z(new Error(xn.message))})}},Tt=function(Dt,Jt,ln){("arrayBuffer"===M.type?Dt.arrayBuffer():"json"===M.type?Dt.json():Dt.text()).then(function(an){Fe||(Jt&&ln&&function(M,z,J){if(et(),Ce){var se={status:z.status,statusText:z.statusText,headers:new self.Headers};z.headers.forEach(function(Me,Fe){return se.headers.set(Fe,Me)});var ve=B(z.headers.get("Cache-Control")||"");ve["no-store"]||(ve["max-age"]&&se.headers.set("Expires",new Date(J+1e3*ve["max-age"]).toUTCString()),new Date(se.headers.get("Expires")).getTime()-J<42e4||function(Me,Fe){if(void 0===_e)try{new Response(new ReadableStream),_e=!0}catch(Ze){_e=!1}_e?Fe(Me.body):Me.blob().then(Fe)}(z,function(Me){var Fe=new self.Response(Me,se);et(),Ce&&Ce.then(function(Ze){return Ze.put(Ye(M.url),Fe)}).catch(function(Ze){return D(Ze.message)})}))}}(ve,Jt,ln),Me=!0,z(null,an,Dt.headers.get("Cache-Control"),Dt.headers.get("Expires")))}).catch(function(an){Fe||z(new Error(an.message))})};return Ze?function(M,z){if(et(),!Ce)return z(null);var J=Ye(M.url);Ce.then(function(se){se.match(J).then(function(ve){var Me=function(Fe){if(!Fe)return!1;var Ze=new Date(Fe.headers.get("Expires")||0),lt=B(Fe.headers.get("Cache-Control")||"");return Ze>Date.now()&&!lt["no-cache"]}(ve);se.delete(J),Me&&se.put(J,ve.clone()),z(null,ve,Me)}).catch(z)}).catch(z)}(ve,lt):lt(null,null),{cancel:function(){Fe=!0,Me||se.abort()}}}var hn,We,st=function(M,z){if(!(/^file:/.test(J=M.url)||/^file:/.test(At())&&!/^\w+:/.test(J))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return ht(M,z);if(N()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",M,z,void 0,!0)}var J;return function(se,ve){var Me=new self.XMLHttpRequest;for(var Fe in Me.open(se.method||"GET",se.url,!0),"arrayBuffer"===se.type&&(Me.responseType="arraybuffer"),se.headers)Me.setRequestHeader(Fe,se.headers[Fe]);return"json"===se.type&&(Me.responseType="text",Me.setRequestHeader("Accept","application/json")),Me.withCredentials="include"===se.credentials,Me.onerror=function(){ve(new Error(Me.statusText))},Me.onload=function(){if((Me.status>=200&&Me.status<300||0===Me.status)&&null!==Me.response){var Ze=Me.response;if("json"===se.type)try{Ze=JSON.parse(Me.response)}catch(lt){return ve(lt)}ve(null,Ze,Me.getResponseHeader("Cache-Control"),Me.getResponseHeader("Expires"))}else ve(new Ht(Me.statusText,Me.status,se.url))},Me.send(se.body),{cancel:function(){return Me.abort()}}}(M,z)},Bt=function(M,z){return st(v(M,{type:"arrayBuffer"}),z)},gn=function(M,z){return st(v(M,{method:"POST"}),z)};hn=[],We=0;var it=function(M,z){if(oe.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),We>=Z.MAX_PARALLEL_IMAGE_REQUESTS){var J={requestParameters:M,callback:z,cancelled:!1,cancel:function(){this.cancelled=!0}};return hn.push(J),J}We++;var se=!1,ve=function(){if(!se)for(se=!0,We--;hn.length&&We<Z.MAX_PARALLEL_IMAGE_REQUESTS;){var Fe=hn.shift();Fe.cancelled||(Fe.cancel=it(Fe.requestParameters,Fe.callback).cancel)}},Me=Bt(M,function(Fe,Ze,lt,Tt){var Jt,ln;ve(),Fe?z(Fe):Ze&&(_t()?(Jt=z,ln=new self.Blob([new Uint8Array(Ze)],{type:"image/png"}),self.createImageBitmap(ln).then(function(an){Jt(null,an)}).catch(function(an){Jt(new Error("Could not load image because of "+an.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(Dt,Jt,ln,an){var xn=new self.Image,On=self.URL;xn.onload=function(){Jt(null,xn),On.revokeObjectURL(xn.src)},xn.onerror=function(){return Jt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Xn=new self.Blob([new Uint8Array(Dt)],{type:"image/png"});xn.cacheControl=ln,xn.expires=an,xn.src=Dt.byteLength?On.createObjectURL(Xn):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Ze,z,lt,Tt))});return{cancel:function(){Me.cancel(),ve()}}};function qt(M,z,J){J[M]&&-1!==J[M].indexOf(z)||(J[M]=J[M]||[],J[M].push(z))}function Ge(M,z,J){if(J&&J[M]){var se=J[M].indexOf(z);-1!==se&&J[M].splice(se,1)}}var Pe=function(M,z){void 0===z&&(z={}),v(this,z),this.type=M},Ee=function(M){function z(J,se){void 0===se&&(se={}),M.call(this,"error",v({error:J},se))}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z}(Pe),Ne=function(){};Ne.prototype.on=function(M,z){return this._listeners=this._listeners||{},qt(M,z,this._listeners),this},Ne.prototype.off=function(M,z){return Ge(M,z,this._listeners),Ge(M,z,this._oneTimeListeners),this},Ne.prototype.once=function(M,z){return this._oneTimeListeners=this._oneTimeListeners||{},qt(M,z,this._oneTimeListeners),this},Ne.prototype.fire=function(M,z){"string"==typeof M&&(M=new Pe(M,z||{}));var J=M.type;if(this.listens(J)){M.target=this;for(var se=0,ve=this._listeners&&this._listeners[J]?this._listeners[J].slice():[];se<ve.length;se+=1)ve[se].call(this,M);for(var Me=0,Fe=this._oneTimeListeners&&this._oneTimeListeners[J]?this._oneTimeListeners[J].slice():[];Me<Fe.length;Me+=1){var Ze=Fe[Me];Ge(J,Ze,this._oneTimeListeners),Ze.call(this,M)}var lt=this._eventedParent;lt&&(v(M,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),lt.fire(M))}else M instanceof Ee&&console.error(M.error);return this},Ne.prototype.listens=function(M){return this._listeners&&this._listeners[M]&&this._listeners[M].length>0||this._oneTimeListeners&&this._oneTimeListeners[M]&&this._oneTimeListeners[M].length>0||this._eventedParent&&this._eventedParent.listens(M)},Ne.prototype.setEventedParent=function(M,z){return this._eventedParent=M,this._eventedParentData=z,this};var Ve={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ke=function(M,z,J,se){this.message=(M?M+": ":"")+J,se&&(this.identifier=se),null!=z&&z.__line__&&(this.line=z.__line__)};function bt(M){var J=M.value;return J?[new Ke(M.key,J,"constants have been deprecated as of v8")]:[]}function gt(M){for(var z=[],J=arguments.length-1;J-- >0;)z[J]=arguments[J+1];for(var se=0,ve=z;se<ve.length;se+=1){var Me=ve[se];for(var Fe in Me)M[Fe]=Me[Fe]}return M}function pt(M){return M instanceof Number||M instanceof String||M instanceof Boolean?M.valueOf():M}function St(M){if(Array.isArray(M))return M.map(St);if(M instanceof Object&&!(M instanceof Number||M instanceof String||M instanceof Boolean)){var z={};for(var J in M)z[J]=St(M[J]);return z}return pt(M)}var jt=function(M){function z(J,se){M.call(this,se),this.message=se,this.key=J}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z}(Error),Lt=function(M,z){void 0===z&&(z=[]),this.parent=M,this.bindings={};for(var J=0,se=z;J<se.length;J+=1){var ve=se[J];this.bindings[ve[0]]=ve[1]}};Lt.prototype.concat=function(M){return new Lt(this,M)},Lt.prototype.get=function(M){if(this.bindings[M])return this.bindings[M];if(this.parent)return this.parent.get(M);throw new Error(M+" not found in scope.")},Lt.prototype.has=function(M){return!!this.bindings[M]||!!this.parent&&this.parent.has(M)};var Vt={kind:"null"},mt={kind:"number"},Wt={kind:"string"},Kt={kind:"boolean"},rn={kind:"color"},Yt={kind:"object"},Ue={kind:"value"},wt={kind:"collator"},Ut={kind:"formatted"},Zt={kind:"resolvedImage"};function tn(M,z){return{kind:"array",itemType:M,N:z}}function un(M){if("array"===M.kind){var z=un(M.itemType);return"number"==typeof M.N?"array<"+z+", "+M.N+">":"value"===M.itemType.kind?"array":"array<"+z+">"}return M.kind}var vn=[Vt,mt,Wt,Kt,rn,Ut,Yt,tn(Ue),Zt];function Qt(M,z){if("error"===z.kind)return null;if("array"===M.kind){if("array"===z.kind&&(0===z.N&&"value"===z.itemType.kind||!Qt(M.itemType,z.itemType))&&("number"!=typeof M.N||M.N===z.N))return null}else{if(M.kind===z.kind)return null;if("value"===M.kind)for(var J=0,se=vn;J<se.length;J+=1)if(!Qt(se[J],z))return null}return"Expected "+un(M)+" but found "+un(z)+" instead."}function yn(M,z){return z.some(function(J){return J.kind===M.kind})}function Mn(M,z){return z.some(function(J){return"null"===J?null===M:"array"===J?Array.isArray(M):"object"===J?M&&!Array.isArray(M)&&"object"==typeof M:J===typeof M})}var Pn=u(function(M,z){var J={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function se(lt){return(lt=Math.round(lt))<0?0:lt>255?255:lt}function Me(lt){return se("%"===lt[lt.length-1]?parseFloat(lt)/100*255:parseInt(lt))}function Fe(lt){return function(lt){return lt<0?0:lt>1?1:lt}("%"===lt[lt.length-1]?parseFloat(lt)/100:parseFloat(lt))}function Ze(lt,Tt,Dt){return Dt<0?Dt+=1:Dt>1&&(Dt-=1),6*Dt<1?lt+(Tt-lt)*Dt*6:2*Dt<1?Tt:3*Dt<2?lt+(Tt-lt)*(2/3-Dt)*6:lt}try{z.parseCSSColor=function(lt){var Tt,Dt=lt.replace(/ /g,"").toLowerCase();if(Dt in J)return J[Dt].slice();if("#"===Dt[0])return 4===Dt.length?(Tt=parseInt(Dt.substr(1),16))>=0&&Tt<=4095?[(3840&Tt)>>4|(3840&Tt)>>8,240&Tt|(240&Tt)>>4,15&Tt|(15&Tt)<<4,1]:null:7===Dt.length&&(Tt=parseInt(Dt.substr(1),16))>=0&&Tt<=16777215?[(16711680&Tt)>>16,(65280&Tt)>>8,255&Tt,1]:null;var Jt=Dt.indexOf("("),ln=Dt.indexOf(")");if(-1!==Jt&&ln+1===Dt.length){var an=Dt.substr(0,Jt),xn=Dt.substr(Jt+1,ln-(Jt+1)).split(","),On=1;switch(an){case"rgba":if(4!==xn.length)return null;On=Fe(xn.pop());case"rgb":return 3!==xn.length?null:[Me(xn[0]),Me(xn[1]),Me(xn[2]),On];case"hsla":if(4!==xn.length)return null;On=Fe(xn.pop());case"hsl":if(3!==xn.length)return null;var Xn=(parseFloat(xn[0])%360+360)%360/360,Yn=Fe(xn[1]),ar=Fe(xn[2]),or=ar<=.5?ar*(Yn+1):ar+Yn-ar*Yn,cr=2*ar-or;return[se(255*Ze(cr,or,Xn+1/3)),se(255*Ze(cr,or,Xn)),se(255*Ze(cr,or,Xn-1/3)),On];default:return null}}return null}}catch(lt){}}).parseCSSColor,sn=function(M,z,J,se){void 0===se&&(se=1),this.r=M,this.g=z,this.b=J,this.a=se};sn.parse=function(M){if(M){if(M instanceof sn)return M;if("string"==typeof M){var z=Pn(M);if(z)return new sn(z[0]/255*z[3],z[1]/255*z[3],z[2]/255*z[3],z[3])}}},sn.prototype.toString=function(){var M=this.toArray(),J=M[1],se=M[2],ve=M[3];return"rgba("+Math.round(M[0])+","+Math.round(J)+","+Math.round(se)+","+ve+")"},sn.prototype.toArray=function(){var se=this.a;return 0===se?[0,0,0,0]:[255*this.r/se,255*this.g/se,255*this.b/se,se]},sn.black=new sn(0,0,0,1),sn.white=new sn(1,1,1,1),sn.transparent=new sn(0,0,0,0),sn.red=new sn(1,0,0,1);var In=function(M,z,J){this.sensitivity=M?z?"variant":"case":z?"accent":"base",this.locale=J,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};In.prototype.compare=function(M,z){return this.collator.compare(M,z)},In.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Rn=function(M,z,J,se,ve){this.text=M,this.image=z,this.scale=J,this.fontStack=se,this.textColor=ve},Ln=function(M){this.sections=M};Ln.fromString=function(M){return new Ln([new Rn(M,null,null,null,null)])},Ln.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(M){return 0!==M.text.length||M.image&&0!==M.image.name.length})},Ln.factory=function(M){return M instanceof Ln?M:Ln.fromString(M)},Ln.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(M){return M.text}).join("")},Ln.prototype.serialize=function(){for(var M=["format"],z=0,J=this.sections;z<J.length;z+=1){var se=J[z];if(se.image)M.push(["image",se.image.name]);else{M.push(se.text);var ve={};se.fontStack&&(ve["text-font"]=["literal",se.fontStack.split(",")]),se.scale&&(ve["font-scale"]=se.scale),se.textColor&&(ve["text-color"]=["rgba"].concat(se.textColor.toArray())),M.push(ve)}}return M};var qn=function(M){this.name=M.name,this.available=M.available};function nr(M,z,J,se){return"number"==typeof M&&M>=0&&M<=255&&"number"==typeof z&&z>=0&&z<=255&&"number"==typeof J&&J>=0&&J<=255?void 0===se||"number"==typeof se&&se>=0&&se<=1?null:"Invalid rgba value ["+[M,z,J,se].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof se?[M,z,J,se]:[M,z,J]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function rr(M){if(null===M||"string"==typeof M||"boolean"==typeof M||"number"==typeof M||M instanceof sn||M instanceof In||M instanceof Ln||M instanceof qn)return!0;if(Array.isArray(M)){for(var z=0,J=M;z<J.length;z+=1)if(!rr(J[z]))return!1;return!0}if("object"==typeof M){for(var se in M)if(!rr(M[se]))return!1;return!0}return!1}function gr(M){if(null===M)return Vt;if("string"==typeof M)return Wt;if("boolean"==typeof M)return Kt;if("number"==typeof M)return mt;if(M instanceof sn)return rn;if(M instanceof In)return wt;if(M instanceof Ln)return Ut;if(M instanceof qn)return Zt;if(Array.isArray(M)){for(var z,J=M.length,se=0,ve=M;se<ve.length;se+=1){var Me=gr(ve[se]);if(z){if(z===Me)continue;z=Ue;break}z=Me}return tn(z||Ue,J)}return Yt}function jr(M){var z=typeof M;return null===M?"":"string"===z||"number"===z||"boolean"===z?String(M):M instanceof sn||M instanceof Ln||M instanceof qn?M.toString():JSON.stringify(M)}qn.prototype.toString=function(){return this.name},qn.fromString=function(M){return M?new qn({name:M,available:!1}):null},qn.prototype.serialize=function(){return["image",this.name]};var kr=function(M,z){this.type=M,this.value=z};kr.parse=function(M,z){if(2!==M.length)return z.error("'literal' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(!rr(M[1]))return z.error("invalid value");var J=M[1],se=gr(J),ve=z.expectedType;return"array"!==se.kind||0!==se.N||!ve||"array"!==ve.kind||"number"==typeof ve.N&&0!==ve.N||(se=ve),new kr(se,J)},kr.prototype.evaluate=function(){return this.value},kr.prototype.eachChild=function(){},kr.prototype.outputDefined=function(){return!0},kr.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof sn?["rgba"].concat(this.value.toArray()):this.value instanceof Ln?this.value.serialize():this.value};var er=function(M){this.name="ExpressionEvaluationError",this.message=M};er.prototype.toJSON=function(){return this.message};var Xr={string:Wt,number:mt,boolean:Kt,object:Yt},ir=function(M,z){this.type=M,this.args=z};ir.parse=function(M,z){if(M.length<2)return z.error("Expected at least one argument.");var J,se=1,ve=M[0];if("array"===ve){var Me,Fe;if(M.length>2){var Ze=M[1];if("string"!=typeof Ze||!(Ze in Xr)||"object"===Ze)return z.error('The item type argument of "array" must be one of string, number, boolean',1);Me=Xr[Ze],se++}else Me=Ue;if(M.length>3){if(null!==M[2]&&("number"!=typeof M[2]||M[2]<0||M[2]!==Math.floor(M[2])))return z.error('The length argument to "array" must be a positive integer literal',2);Fe=M[2],se++}J=tn(Me,Fe)}else J=Xr[ve];for(var lt=[];se<M.length;se++){var Tt=z.parse(M[se],se,Ue);if(!Tt)return null;lt.push(Tt)}return new ir(J,lt)},ir.prototype.evaluate=function(M){for(var z=0;z<this.args.length;z++){var J=this.args[z].evaluate(M);if(!Qt(this.type,gr(J)))return J;if(z===this.args.length-1)throw new er("Expected value to be of type "+un(this.type)+", but found "+un(gr(J))+" instead.")}return null},ir.prototype.eachChild=function(M){this.args.forEach(M)},ir.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},ir.prototype.serialize=function(){var M=this.type,z=[M.kind];if("array"===M.kind){var J=M.itemType;if("string"===J.kind||"number"===J.kind||"boolean"===J.kind){z.push(J.kind);var se=M.N;("number"==typeof se||this.args.length>1)&&z.push(se)}}return z.concat(this.args.map(function(ve){return ve.serialize()}))};var Bn=function(M){this.type=Ut,this.sections=M};Bn.parse=function(M,z){if(M.length<2)return z.error("Expected at least one argument.");var J=M[1];if(!Array.isArray(J)&&"object"==typeof J)return z.error("First argument must be an image or text section.");for(var se=[],ve=!1,Me=1;Me<=M.length-1;++Me){var Fe=M[Me];if(ve&&"object"==typeof Fe&&!Array.isArray(Fe)){ve=!1;var Ze=null;if(Fe["font-scale"]&&!(Ze=z.parse(Fe["font-scale"],1,mt)))return null;var lt=null;if(Fe["text-font"]&&!(lt=z.parse(Fe["text-font"],1,tn(Wt))))return null;var Tt=null;if(Fe["text-color"]&&!(Tt=z.parse(Fe["text-color"],1,rn)))return null;var Dt=se[se.length-1];Dt.scale=Ze,Dt.font=lt,Dt.textColor=Tt}else{var Jt=z.parse(M[Me],1,Ue);if(!Jt)return null;var ln=Jt.type.kind;if("string"!==ln&&"value"!==ln&&"null"!==ln&&"resolvedImage"!==ln)return z.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");ve=!0,se.push({content:Jt,scale:null,font:null,textColor:null})}}return new Bn(se)},Bn.prototype.evaluate=function(M){return new Ln(this.sections.map(function(z){var J=z.content.evaluate(M);return gr(J)===Zt?new Rn("",J,null,null,null):new Rn(jr(J),null,z.scale?z.scale.evaluate(M):null,z.font?z.font.evaluate(M).join(","):null,z.textColor?z.textColor.evaluate(M):null)}))},Bn.prototype.eachChild=function(M){for(var z=0,J=this.sections;z<J.length;z+=1){var se=J[z];M(se.content),se.scale&&M(se.scale),se.font&&M(se.font),se.textColor&&M(se.textColor)}},Bn.prototype.outputDefined=function(){return!1},Bn.prototype.serialize=function(){for(var M=["format"],z=0,J=this.sections;z<J.length;z+=1){var se=J[z];M.push(se.content.serialize());var ve={};se.scale&&(ve["font-scale"]=se.scale.serialize()),se.font&&(ve["text-font"]=se.font.serialize()),se.textColor&&(ve["text-color"]=se.textColor.serialize()),M.push(ve)}return M};var mr=function(M){this.type=Zt,this.input=M};mr.parse=function(M,z){if(2!==M.length)return z.error("Expected two arguments.");var J=z.parse(M[1],1,Wt);return J?new mr(J):z.error("No image name provided.")},mr.prototype.evaluate=function(M){var z=this.input.evaluate(M),J=qn.fromString(z);return J&&M.availableImages&&(J.available=M.availableImages.indexOf(z)>-1),J},mr.prototype.eachChild=function(M){M(this.input)},mr.prototype.outputDefined=function(){return!1},mr.prototype.serialize=function(){return["image",this.input.serialize()]};var zr={"to-boolean":Kt,"to-color":rn,"to-number":mt,"to-string":Wt},br=function(M,z){this.type=M,this.args=z};br.parse=function(M,z){if(M.length<2)return z.error("Expected at least one argument.");var J=M[0];if(("to-boolean"===J||"to-string"===J)&&2!==M.length)return z.error("Expected one argument.");for(var se=zr[J],ve=[],Me=1;Me<M.length;Me++){var Fe=z.parse(M[Me],Me,Ue);if(!Fe)return null;ve.push(Fe)}return new br(se,ve)},br.prototype.evaluate=function(M){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(M));if("color"===this.type.kind){for(var z,J,se=0,ve=this.args;se<ve.length;se+=1){if(J=null,(z=ve[se].evaluate(M))instanceof sn)return z;if("string"==typeof z){var Me=M.parseColor(z);if(Me)return Me}else if(Array.isArray(z)&&!(J=z.length<3||z.length>4?"Invalid rbga value "+JSON.stringify(z)+": expected an array containing either three or four numeric values.":nr(z[0],z[1],z[2],z[3])))return new sn(z[0]/255,z[1]/255,z[2]/255,z[3])}throw new er(J||"Could not parse color from value '"+("string"==typeof z?z:String(JSON.stringify(z)))+"'")}if("number"===this.type.kind){for(var Fe=null,Ze=0,lt=this.args;Ze<lt.length;Ze+=1){if(null===(Fe=lt[Ze].evaluate(M)))return 0;var Tt=Number(Fe);if(!isNaN(Tt))return Tt}throw new er("Could not convert "+JSON.stringify(Fe)+" to number.")}return"formatted"===this.type.kind?Ln.fromString(jr(this.args[0].evaluate(M))):"resolvedImage"===this.type.kind?qn.fromString(jr(this.args[0].evaluate(M))):jr(this.args[0].evaluate(M))},br.prototype.eachChild=function(M){this.args.forEach(M)},br.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},br.prototype.serialize=function(){if("formatted"===this.type.kind)return new Bn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new mr(this.args[0]).serialize();var M=["to-"+this.type.kind];return this.eachChild(function(z){M.push(z.serialize())}),M};var Dr=["Unknown","Point","LineString","Polygon"],di=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};di.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},di.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Dr[this.feature.type]:this.feature.type:null},di.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},di.prototype.canonicalID=function(){return this.canonical},di.prototype.properties=function(){return this.feature&&this.feature.properties||{}},di.prototype.parseColor=function(M){var z=this._parseColorCache[M];return z||(z=this._parseColorCache[M]=sn.parse(M)),z};var ni=function(M,z,J,se){this.name=M,this.type=z,this._evaluate=J,this.args=se};ni.prototype.evaluate=function(M){return this._evaluate(M,this.args)},ni.prototype.eachChild=function(M){this.args.forEach(M)},ni.prototype.outputDefined=function(){return!1},ni.prototype.serialize=function(){return[this.name].concat(this.args.map(function(M){return M.serialize()}))},ni.parse=function(M,z){var J,se=M[0],ve=ni.definitions[se];if(!ve)return z.error('Unknown expression "'+se+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Me=Array.isArray(ve)?ve[0]:ve.type,Fe=Array.isArray(ve)?[[ve[1],ve[2]]]:ve.overloads,Ze=Fe.filter(function(Vi){var Si=Vi[0];return!Array.isArray(Si)||Si.length===M.length-1}),lt=null,Tt=0,Dt=Ze;Tt<Dt.length;Tt+=1){var Jt=Dt[Tt],ln=Jt[0],an=Jt[1];lt=new ci(z.registry,z.path,null,z.scope);for(var xn=[],On=!1,Xn=1;Xn<M.length;Xn++){var Yn=M[Xn],ar=Array.isArray(ln)?ln[Xn-1]:ln.type,or=lt.parse(Yn,1+xn.length,ar);if(!or){On=!0;break}xn.push(or)}if(!On)if(Array.isArray(ln)&&ln.length!==xn.length)lt.error("Expected "+ln.length+" arguments, but found "+xn.length+" instead.");else{for(var cr=0;cr<xn.length;cr++){var Sr=Array.isArray(ln)?ln[cr]:ln.type,Rr=xn[cr];lt.concat(cr+1).checkSubtype(Sr,Rr.type)}if(0===lt.errors.length)return new ni(se,Me,an,xn)}}if(1===Ze.length)(J=z.errors).push.apply(J,lt.errors);else{for(var si=(Ze.length?Ze:Fe).map(function(Vi){var Si;return Si=Vi[0],Array.isArray(Si)?"("+Si.map(un).join(", ")+")":"("+un(Si.type)+"...)"}).join(" | "),ii=[],_i=1;_i<M.length;_i++){var Ui=z.parse(M[_i],1+ii.length);if(!Ui)return null;ii.push(un(Ui.type))}z.error("Expected arguments of type "+si+", but found ("+ii.join(", ")+") instead.")}return null},ni.register=function(M,z){for(var J in ni.definitions=z,z)M[J]=ni};var pi=function(M,z,J){this.type=wt,this.locale=J,this.caseSensitive=M,this.diacriticSensitive=z};function qi(M,z){M[0]=Math.min(M[0],z[0]),M[1]=Math.min(M[1],z[1]),M[2]=Math.max(M[2],z[0]),M[3]=Math.max(M[3],z[1])}function Ct(M,z){return!(M[0]<=z[0]||M[2]>=z[2]||M[1]<=z[1]||M[3]>=z[3])}function mn(M,z){var se=(180+M[0])/360,ve=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M[1]*Math.PI/360)))/360,Me=Math.pow(2,z.z);return[Math.round(se*Me*8192),Math.round(ve*Me*8192)]}function pn(M,z,J){return z[1]>M[1]!=J[1]>M[1]&&M[0]<(J[0]-z[0])*(M[1]-z[1])/(J[1]-z[1])+z[0]}function Sn(M,z){for(var J,se,ve,Me,Fe,Ze,lt,Tt=!1,Dt=0,Jt=z.length;Dt<Jt;Dt++)for(var ln=z[Dt],an=0,xn=ln.length;an<xn-1;an++){if(void 0,void 0,void 0,void 0,(Me=(J=M)[0]-(se=ln[an])[0])*(lt=J[1]-(ve=ln[an+1])[1])-(Ze=J[0]-ve[0])*(Fe=J[1]-se[1])==0&&Me*Ze<=0&&Fe*lt<=0)return!1;pn(M,ln[an],ln[an+1])&&(Tt=!Tt)}return Tt}function Zn(M,z){for(var J=0;J<z.length;J++)if(Sn(M,z[J]))return!0;return!1}function fr(M,z,J,se){var lt=se[0]-J[0],Tt=se[1]-J[1],Dt=(M[0]-J[0])*Tt-lt*(M[1]-J[1]),Jt=(z[0]-J[0])*Tt-lt*(z[1]-J[1]);return Dt>0&&Jt<0||Dt<0&&Jt>0}function Hn(M,z,J){for(var se=0,ve=J;se<ve.length;se+=1)for(var Me=ve[se],Fe=0;Fe<Me.length-1;++Fe)if(void 0,void 0,(Jt=[(Dt=Me[Fe+1])[0]-(Tt=Me[Fe])[0],Dt[1]-Tt[1]])[0]*(ln=[(lt=z)[0]-(Ze=M)[0],lt[1]-Ze[1]])[1]-Jt[1]*ln[0]!=0&&fr(Ze,lt,Tt,Dt)&&fr(Tt,Dt,Ze,lt))return!0;var Ze,lt,Tt,Dt,Jt,ln;return!1}function Dn(M,z){for(var J=0;J<M.length;++J)if(!Sn(M[J],z))return!1;for(var se=0;se<M.length-1;++se)if(Hn(M[se],M[se+1],z))return!1;return!0}function Jn(M,z){for(var J=0;J<z.length;J++)if(Dn(M,z[J]))return!0;return!1}function Nn(M,z,J){for(var se=[],ve=0;ve<M.length;ve++){for(var Me=[],Fe=0;Fe<M[ve].length;Fe++){var Ze=mn(M[ve][Fe],J);qi(z,Ze),Me.push(Ze)}se.push(Me)}return se}function Un(M,z,J){for(var se=[],ve=0;ve<M.length;ve++){var Me=Nn(M[ve],z,J);se.push(Me)}return se}function sr(M,z,J,se){if(M[0]<J[0]||M[0]>J[2]){var ve=.5*se,Me=M[0]-J[0]>ve?-se:J[0]-M[0]>ve?se:0;0===Me&&(Me=M[0]-J[2]>ve?-se:J[2]-M[0]>ve?se:0),M[0]+=Me}qi(z,M)}function Wr(M,z,J,se){for(var ve=8192*Math.pow(2,se.z),Me=[8192*se.x,8192*se.y],Fe=[],Ze=0,lt=M;Ze<lt.length;Ze+=1)for(var Tt=0,Dt=lt[Ze];Tt<Dt.length;Tt+=1){var Jt=Dt[Tt],ln=[Jt.x+Me[0],Jt.y+Me[1]];sr(ln,z,J,ve),Fe.push(ln)}return Fe}function Vr(M,z,J,se){for(var ve,Me=8192*Math.pow(2,se.z),Fe=[8192*se.x,8192*se.y],Ze=[],lt=0,Tt=M;lt<Tt.length;lt+=1){for(var Dt=[],Jt=0,ln=Tt[lt];Jt<ln.length;Jt+=1){var an=ln[Jt],xn=[an.x+Fe[0],an.y+Fe[1]];qi(z,xn),Dt.push(xn)}Ze.push(Dt)}if(z[2]-z[0]<=Me/2){(ve=z)[0]=ve[1]=1/0,ve[2]=ve[3]=-1/0;for(var On=0,Xn=Ze;On<Xn.length;On+=1)for(var Yn=0,ar=Xn[On];Yn<ar.length;Yn+=1)sr(ar[Yn],z,J,Me)}return Ze}pi.parse=function(M,z){if(2!==M.length)return z.error("Expected one argument.");var J=M[1];if("object"!=typeof J||Array.isArray(J))return z.error("Collator options argument must be an object.");var se=z.parse(void 0!==J["case-sensitive"]&&J["case-sensitive"],1,Kt);if(!se)return null;var ve=z.parse(void 0!==J["diacritic-sensitive"]&&J["diacritic-sensitive"],1,Kt);if(!ve)return null;var Me=null;return J.locale&&!(Me=z.parse(J.locale,1,Wt))?null:new pi(se,ve,Me)},pi.prototype.evaluate=function(M){return new In(this.caseSensitive.evaluate(M),this.diacriticSensitive.evaluate(M),this.locale?this.locale.evaluate(M):null)},pi.prototype.eachChild=function(M){M(this.caseSensitive),M(this.diacriticSensitive),this.locale&&M(this.locale)},pi.prototype.outputDefined=function(){return!1},pi.prototype.serialize=function(){var M={};return M["case-sensitive"]=this.caseSensitive.serialize(),M["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(M.locale=this.locale.serialize()),["collator",M]};var Zr=function(M,z){this.type=Kt,this.geojson=M,this.geometries=z};function Or(M){if(M instanceof ni&&("get"===M.name&&1===M.args.length||"feature-state"===M.name||"has"===M.name&&1===M.args.length||"properties"===M.name||"geometry-type"===M.name||"id"===M.name||/^filter-/.test(M.name))||M instanceof Zr)return!1;var z=!0;return M.eachChild(function(J){z&&!Or(J)&&(z=!1)}),z}function $r(M){if(M instanceof ni&&"feature-state"===M.name)return!1;var z=!0;return M.eachChild(function(J){z&&!$r(J)&&(z=!1)}),z}function Ji(M,z){if(M instanceof ni&&z.indexOf(M.name)>=0)return!1;var J=!0;return M.eachChild(function(se){J&&!Ji(se,z)&&(J=!1)}),J}Zr.parse=function(M,z){if(2!==M.length)return z.error("'within' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(rr(M[1])){var J=M[1];if("FeatureCollection"===J.type)for(var se=0;se<J.features.length;++se){var ve=J.features[se].geometry.type;if("Polygon"===ve||"MultiPolygon"===ve)return new Zr(J,J.features[se].geometry)}else if("Feature"===J.type){var Me=J.geometry.type;if("Polygon"===Me||"MultiPolygon"===Me)return new Zr(J,J.geometry)}else if("Polygon"===J.type||"MultiPolygon"===J.type)return new Zr(J,J)}return z.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Zr.prototype.evaluate=function(M){if(null!=M.geometry()&&null!=M.canonicalID()){if("Point"===M.geometryType())return function(z,J){var se=[1/0,1/0,-1/0,-1/0],ve=[1/0,1/0,-1/0,-1/0],Me=z.canonicalID();if("Polygon"===J.type){var Fe=Nn(J.coordinates,ve,Me),Ze=Wr(z.geometry(),se,ve,Me);if(!Ct(se,ve))return!1;for(var lt=0,Tt=Ze;lt<Tt.length;lt+=1)if(!Sn(Tt[lt],Fe))return!1}if("MultiPolygon"===J.type){var Dt=Un(J.coordinates,ve,Me),Jt=Wr(z.geometry(),se,ve,Me);if(!Ct(se,ve))return!1;for(var ln=0,an=Jt;ln<an.length;ln+=1)if(!Zn(an[ln],Dt))return!1}return!0}(M,this.geometries);if("LineString"===M.geometryType())return function(z,J){var se=[1/0,1/0,-1/0,-1/0],ve=[1/0,1/0,-1/0,-1/0],Me=z.canonicalID();if("Polygon"===J.type){var Fe=Nn(J.coordinates,ve,Me),Ze=Vr(z.geometry(),se,ve,Me);if(!Ct(se,ve))return!1;for(var lt=0,Tt=Ze;lt<Tt.length;lt+=1)if(!Dn(Tt[lt],Fe))return!1}if("MultiPolygon"===J.type){var Dt=Un(J.coordinates,ve,Me),Jt=Vr(z.geometry(),se,ve,Me);if(!Ct(se,ve))return!1;for(var ln=0,an=Jt;ln<an.length;ln+=1)if(!Jn(an[ln],Dt))return!1}return!0}(M,this.geometries)}return!1},Zr.prototype.eachChild=function(){},Zr.prototype.outputDefined=function(){return!0},Zr.prototype.serialize=function(){return["within",this.geojson]};var Bi=function(M,z){this.type=z.type,this.name=M,this.boundExpression=z};Bi.parse=function(M,z){if(2!==M.length||"string"!=typeof M[1])return z.error("'var' expression requires exactly one string literal argument.");var J=M[1];return z.scope.has(J)?new Bi(J,z.scope.get(J)):z.error('Unknown variable "'+J+'". Make sure "'+J+'" has been bound in an enclosing "let" expression before using it.',1)},Bi.prototype.evaluate=function(M){return this.boundExpression.evaluate(M)},Bi.prototype.eachChild=function(){},Bi.prototype.outputDefined=function(){return!1},Bi.prototype.serialize=function(){return["var",this.name]};var ci=function(M,z,J,se,ve){void 0===z&&(z=[]),void 0===se&&(se=new Lt),void 0===ve&&(ve=[]),this.registry=M,this.path=z,this.key=z.map(function(Me){return"["+Me+"]"}).join(""),this.scope=se,this.errors=ve,this.expectedType=J};function Ai(M,z){for(var J,ve=M.length-1,Me=0,Fe=ve,Ze=0;Me<=Fe;)if((J=M[Ze=Math.floor((Me+Fe)/2)])<=z){if(Ze===ve||z<M[Ze+1])return Ze;Me=Ze+1}else{if(!(J>z))throw new er("Input is not a number.");Fe=Ze-1}return 0}ci.prototype.parse=function(M,z,J,se,ve){return void 0===ve&&(ve={}),z?this.concat(z,J,se)._parse(M,ve):this._parse(M,ve)},ci.prototype._parse=function(M,z){function J(Tt,Dt,Jt){return"assert"===Jt?new ir(Dt,[Tt]):"coerce"===Jt?new br(Dt,[Tt]):Tt}if(null!==M&&"string"!=typeof M&&"boolean"!=typeof M&&"number"!=typeof M||(M=["literal",M]),Array.isArray(M)){if(0===M.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var se=M[0];if("string"!=typeof se)return this.error("Expression name must be a string, but found "+typeof se+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var ve=this.registry[se];if(ve){var Me=ve.parse(M,this);if(!Me)return null;if(this.expectedType){var Fe=this.expectedType,Ze=Me.type;if("string"!==Fe.kind&&"number"!==Fe.kind&&"boolean"!==Fe.kind&&"object"!==Fe.kind&&"array"!==Fe.kind||"value"!==Ze.kind)if("color"!==Fe.kind&&"formatted"!==Fe.kind&&"resolvedImage"!==Fe.kind||"value"!==Ze.kind&&"string"!==Ze.kind){if(this.checkSubtype(Fe,Ze))return null}else Me=J(Me,Fe,z.typeAnnotation||"coerce");else Me=J(Me,Fe,z.typeAnnotation||"assert")}if(!(Me instanceof kr)&&"resolvedImage"!==Me.type.kind&&function Tt(Dt){if(Dt instanceof Bi)return Tt(Dt.boundExpression);if(Dt instanceof ni&&"error"===Dt.name||Dt instanceof pi||Dt instanceof Zr)return!1;var Jt=Dt instanceof br||Dt instanceof ir,ln=!0;return Dt.eachChild(function(an){ln=Jt?ln&&Tt(an):ln&&an instanceof kr}),!!ln&&Or(Dt)&&Ji(Dt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(Me)){var lt=new di;try{Me=new kr(Me.type,Me.evaluate(lt))}catch(Tt){return this.error(Tt.message),null}}return Me}return this.error('Unknown expression "'+se+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===M?"'undefined' value invalid. Use null instead.":"object"==typeof M?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof M+" instead.")},ci.prototype.concat=function(M,z,J){var se="number"==typeof M?this.path.concat(M):this.path,ve=J?this.scope.concat(J):this.scope;return new ci(this.registry,se,z||null,ve,this.errors)},ci.prototype.error=function(M){for(var z=[],J=arguments.length-1;J-- >0;)z[J]=arguments[J+1];var se=""+this.key+z.map(function(ve){return"["+ve+"]"}).join("");this.errors.push(new jt(se,M))},ci.prototype.checkSubtype=function(M,z){var J=Qt(M,z);return J&&this.error(J),J};var wi=function(M,z,J){this.type=M,this.input=z,this.labels=[],this.outputs=[];for(var se=0,ve=J;se<ve.length;se+=1){var Me=ve[se],Ze=Me[1];this.labels.push(Me[0]),this.outputs.push(Ze)}};function Ri(M,z,J){return M*(1-J)+z*J}wi.parse=function(M,z){if(M.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return z.error("Expected an even number of arguments.");var J=z.parse(M[1],1,mt);if(!J)return null;var se=[],ve=null;z.expectedType&&"value"!==z.expectedType.kind&&(ve=z.expectedType);for(var Me=1;Me<M.length;Me+=2){var Fe=1===Me?-1/0:M[Me],Ze=M[Me+1],lt=Me,Tt=Me+1;if("number"!=typeof Fe)return z.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',lt);if(se.length&&se[se.length-1][0]>=Fe)return z.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',lt);var Dt=z.parse(Ze,Tt,ve);if(!Dt)return null;ve=ve||Dt.type,se.push([Fe,Dt])}return new wi(ve,J,se)},wi.prototype.evaluate=function(M){var z=this.labels,J=this.outputs;if(1===z.length)return J[0].evaluate(M);var se=this.input.evaluate(M);if(se<=z[0])return J[0].evaluate(M);var ve=z.length;return se>=z[ve-1]?J[ve-1].evaluate(M):J[Ai(z,se)].evaluate(M)},wi.prototype.eachChild=function(M){M(this.input);for(var z=0,J=this.outputs;z<J.length;z+=1)M(J[z])},wi.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},wi.prototype.serialize=function(){for(var M=["step",this.input.serialize()],z=0;z<this.labels.length;z++)z>0&&M.push(this.labels[z]),M.push(this.outputs[z].serialize());return M};var Lr=Object.freeze({__proto__:null,number:Ri,color:function(M,z,J){return new sn(Ri(M.r,z.r,J),Ri(M.g,z.g,J),Ri(M.b,z.b,J),Ri(M.a,z.a,J))},array:function(M,z,J){return M.map(function(se,ve){return Ri(se,z[ve],J)})}}),vr=6/29,Fi=3*vr*vr,ga=Math.PI/180,Do=180/Math.PI;function Ha(M){return M>.008856451679035631?Math.pow(M,1/3):M/Fi+4/29}function Xa(M){return M>vr?M*M*M:Fi*(M-4/29)}function _a(M){return 255*(M<=.0031308?12.92*M:1.055*Math.pow(M,1/2.4)-.055)}function ya(M){return(M/=255)<=.04045?M/12.92:Math.pow((M+.055)/1.055,2.4)}function Ti(M){var z=ya(M.r),J=ya(M.g),se=ya(M.b),ve=Ha((.4124564*z+.3575761*J+.1804375*se)/.95047),Me=Ha((.2126729*z+.7151522*J+.072175*se)/1);return{l:116*Me-16,a:500*(ve-Me),b:200*(Me-Ha((.0193339*z+.119192*J+.9503041*se)/1.08883)),alpha:M.a}}function pa(M){var z=(M.l+16)/116,J=isNaN(M.a)?z:z+M.a/500,se=isNaN(M.b)?z:z-M.b/200;return z=1*Xa(z),J=.95047*Xa(J),se=1.08883*Xa(se),new sn(_a(3.2404542*J-1.5371385*z-.4985314*se),_a(-.969266*J+1.8760108*z+.041556*se),_a(.0556434*J-.2040259*z+1.0572252*se),M.alpha)}function Qa(M,z,J){var se=z-M;return M+J*(se>180||se<-180?se-360*Math.round(se/360):se)}var go={forward:Ti,reverse:pa,interpolate:function(M,z,J){return{l:Ri(M.l,z.l,J),a:Ri(M.a,z.a,J),b:Ri(M.b,z.b,J),alpha:Ri(M.alpha,z.alpha,J)}}},ts={forward:function(M){var z=Ti(M),J=z.l,se=z.a,ve=z.b,Me=Math.atan2(ve,se)*Do;return{h:Me<0?Me+360:Me,c:Math.sqrt(se*se+ve*ve),l:J,alpha:M.a}},reverse:function(M){var z=M.h*ga,J=M.c;return pa({l:M.l,a:Math.cos(z)*J,b:Math.sin(z)*J,alpha:M.alpha})},interpolate:function(M,z,J){return{h:Qa(M.h,z.h,J),c:Ri(M.c,z.c,J),l:Ri(M.l,z.l,J),alpha:Ri(M.alpha,z.alpha,J)}}},Eo=Object.freeze({__proto__:null,lab:go,hcl:ts}),Pa=function(M,z,J,se,ve){this.type=M,this.operator=z,this.interpolation=J,this.input=se,this.labels=[],this.outputs=[];for(var Me=0,Fe=ve;Me<Fe.length;Me+=1){var Ze=Fe[Me],Tt=Ze[1];this.labels.push(Ze[0]),this.outputs.push(Tt)}};function eo(M,z,J,se){var ve=se-J,Me=M-J;return 0===ve?0:1===z?Me/ve:(Math.pow(z,Me)-1)/(Math.pow(z,ve)-1)}Pa.interpolationFactor=function(M,z,J,se){var ve=0;if("exponential"===M.name)ve=eo(z,M.base,J,se);else if("linear"===M.name)ve=eo(z,1,J,se);else if("cubic-bezier"===M.name){var Me=M.controlPoints;ve=new c(Me[0],Me[1],Me[2],Me[3]).solve(eo(z,1,J,se))}return ve},Pa.parse=function(M,z){var J=M[0],se=M[1],ve=M[2],Me=M.slice(3);if(!Array.isArray(se)||0===se.length)return z.error("Expected an interpolation type expression.",1);if("linear"===se[0])se={name:"linear"};else if("exponential"===se[0]){var Fe=se[1];if("number"!=typeof Fe)return z.error("Exponential interpolation requires a numeric base.",1,1);se={name:"exponential",base:Fe}}else{if("cubic-bezier"!==se[0])return z.error("Unknown interpolation type "+String(se[0]),1,0);var Ze=se.slice(1);if(4!==Ze.length||Ze.some(function(Xn){return"number"!=typeof Xn||Xn<0||Xn>1}))return z.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);se={name:"cubic-bezier",controlPoints:Ze}}if(M.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return z.error("Expected an even number of arguments.");if(!(ve=z.parse(ve,2,mt)))return null;var lt=[],Tt=null;"interpolate-hcl"===J||"interpolate-lab"===J?Tt=rn:z.expectedType&&"value"!==z.expectedType.kind&&(Tt=z.expectedType);for(var Dt=0;Dt<Me.length;Dt+=2){var Jt=Me[Dt],ln=Me[Dt+1],an=Dt+3,xn=Dt+4;if("number"!=typeof Jt)return z.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',an);if(lt.length&&lt[lt.length-1][0]>=Jt)return z.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',an);var On=z.parse(ln,xn,Tt);if(!On)return null;Tt=Tt||On.type,lt.push([Jt,On])}return"number"===Tt.kind||"color"===Tt.kind||"array"===Tt.kind&&"number"===Tt.itemType.kind&&"number"==typeof Tt.N?new Pa(Tt,J,se,ve,lt):z.error("Type "+un(Tt)+" is not interpolatable.")},Pa.prototype.evaluate=function(M){var z=this.labels,J=this.outputs;if(1===z.length)return J[0].evaluate(M);var se=this.input.evaluate(M);if(se<=z[0])return J[0].evaluate(M);var ve=z.length;if(se>=z[ve-1])return J[ve-1].evaluate(M);var Me=Ai(z,se),lt=Pa.interpolationFactor(this.interpolation,se,z[Me],z[Me+1]),Tt=J[Me].evaluate(M),Dt=J[Me+1].evaluate(M);return"interpolate"===this.operator?Lr[this.type.kind.toLowerCase()](Tt,Dt,lt):"interpolate-hcl"===this.operator?ts.reverse(ts.interpolate(ts.forward(Tt),ts.forward(Dt),lt)):go.reverse(go.interpolate(go.forward(Tt),go.forward(Dt),lt))},Pa.prototype.eachChild=function(M){M(this.input);for(var z=0,J=this.outputs;z<J.length;z+=1)M(J[z])},Pa.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Pa.prototype.serialize=function(){var M;M="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var z=[this.operator,M,this.input.serialize()],J=0;J<this.labels.length;J++)z.push(this.labels[J],this.outputs[J].serialize());return z};var Ss=function(M,z){this.type=M,this.args=z};Ss.parse=function(M,z){if(M.length<2)return z.error("Expectected at least one argument.");var J=null,se=z.expectedType;se&&"value"!==se.kind&&(J=se);for(var ve=[],Me=0,Fe=M.slice(1);Me<Fe.length;Me+=1){var lt=z.parse(Fe[Me],1+ve.length,J,void 0,{typeAnnotation:"omit"});if(!lt)return null;J=J||lt.type,ve.push(lt)}var Tt=se&&ve.some(function(Dt){return Qt(se,Dt.type)});return new Ss(Tt?Ue:J,ve)},Ss.prototype.evaluate=function(M){for(var z,J=null,se=0,ve=0,Me=this.args;ve<Me.length&&(se++,(J=Me[ve].evaluate(M))&&J instanceof qn&&!J.available&&(z||(z=J.name),J=null,se===this.args.length&&(J=z)),null===J);ve+=1);return J},Ss.prototype.eachChild=function(M){this.args.forEach(M)},Ss.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},Ss.prototype.serialize=function(){var M=["coalesce"];return this.eachChild(function(z){M.push(z.serialize())}),M};var Co=function(M,z){this.type=z.type,this.bindings=[].concat(M),this.result=z};Co.prototype.evaluate=function(M){return this.result.evaluate(M)},Co.prototype.eachChild=function(M){for(var z=0,J=this.bindings;z<J.length;z+=1)M(J[z][1]);M(this.result)},Co.parse=function(M,z){if(M.length<4)return z.error("Expected at least 3 arguments, but found "+(M.length-1)+" instead.");for(var J=[],se=1;se<M.length-1;se+=2){var ve=M[se];if("string"!=typeof ve)return z.error("Expected string, but found "+typeof ve+" instead.",se);if(/[^a-zA-Z0-9_]/.test(ve))return z.error("Variable names must contain only alphanumeric characters or '_'.",se);var Me=z.parse(M[se+1],se+1);if(!Me)return null;J.push([ve,Me])}var Fe=z.parse(M[M.length-1],M.length-1,z.expectedType,J);return Fe?new Co(J,Fe):null},Co.prototype.outputDefined=function(){return this.result.outputDefined()},Co.prototype.serialize=function(){for(var M=["let"],z=0,J=this.bindings;z<J.length;z+=1){var se=J[z];M.push(se[0],se[1].serialize())}return M.push(this.result.serialize()),M};var ra=function(M,z,J){this.type=M,this.index=z,this.input=J};ra.parse=function(M,z){if(3!==M.length)return z.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var J=z.parse(M[1],1,mt),se=z.parse(M[2],2,tn(z.expectedType||Ue));return J&&se?new ra(se.type.itemType,J,se):null},ra.prototype.evaluate=function(M){var z=this.index.evaluate(M),J=this.input.evaluate(M);if(z<0)throw new er("Array index out of bounds: "+z+" < 0.");if(z>=J.length)throw new er("Array index out of bounds: "+z+" > "+(J.length-1)+".");if(z!==Math.floor(z))throw new er("Array index must be an integer, but found "+z+" instead.");return J[z]},ra.prototype.eachChild=function(M){M(this.index),M(this.input)},ra.prototype.outputDefined=function(){return!1},ra.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Us=function(M,z){this.type=Kt,this.needle=M,this.haystack=z};Us.parse=function(M,z){if(3!==M.length)return z.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var J=z.parse(M[1],1,Ue),se=z.parse(M[2],2,Ue);return J&&se?yn(J.type,[Kt,Wt,mt,Vt,Ue])?new Us(J,se):z.error("Expected first argument to be of type boolean, string, number or null, but found "+un(J.type)+" instead"):null},Us.prototype.evaluate=function(M){var z=this.needle.evaluate(M),J=this.haystack.evaluate(M);if(!J)return!1;if(!Mn(z,["boolean","string","number","null"]))throw new er("Expected first argument to be of type boolean, string, number or null, but found "+un(gr(z))+" instead.");if(!Mn(J,["string","array"]))throw new er("Expected second argument to be of type array or string, but found "+un(gr(J))+" instead.");return J.indexOf(z)>=0},Us.prototype.eachChild=function(M){M(this.needle),M(this.haystack)},Us.prototype.outputDefined=function(){return!0},Us.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Is=function(M,z,J){this.type=mt,this.needle=M,this.haystack=z,this.fromIndex=J};Is.parse=function(M,z){if(M.length<=2||M.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var J=z.parse(M[1],1,Ue),se=z.parse(M[2],2,Ue);if(!J||!se)return null;if(!yn(J.type,[Kt,Wt,mt,Vt,Ue]))return z.error("Expected first argument to be of type boolean, string, number or null, but found "+un(J.type)+" instead");if(4===M.length){var ve=z.parse(M[3],3,mt);return ve?new Is(J,se,ve):null}return new Is(J,se)},Is.prototype.evaluate=function(M){var z=this.needle.evaluate(M),J=this.haystack.evaluate(M);if(!Mn(z,["boolean","string","number","null"]))throw new er("Expected first argument to be of type boolean, string, number or null, but found "+un(gr(z))+" instead.");if(!Mn(J,["string","array"]))throw new er("Expected second argument to be of type array or string, but found "+un(gr(J))+" instead.");if(this.fromIndex){var se=this.fromIndex.evaluate(M);return J.indexOf(z,se)}return J.indexOf(z)},Is.prototype.eachChild=function(M){M(this.needle),M(this.haystack),this.fromIndex&&M(this.fromIndex)},Is.prototype.outputDefined=function(){return!1},Is.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var M=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),M]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var hs=function(M,z,J,se,ve,Me){this.inputType=M,this.type=z,this.input=J,this.cases=se,this.outputs=ve,this.otherwise=Me};hs.parse=function(M,z){if(M.length<5)return z.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if(M.length%2!=1)return z.error("Expected an even number of arguments.");var J,se;z.expectedType&&"value"!==z.expectedType.kind&&(se=z.expectedType);for(var ve={},Me=[],Fe=2;Fe<M.length-1;Fe+=2){var Ze=M[Fe],lt=M[Fe+1];Array.isArray(Ze)||(Ze=[Ze]);var Tt=z.concat(Fe);if(0===Ze.length)return Tt.error("Expected at least one branch label.");for(var Dt=0,Jt=Ze;Dt<Jt.length;Dt+=1){var ln=Jt[Dt];if("number"!=typeof ln&&"string"!=typeof ln)return Tt.error("Branch labels must be numbers or strings.");if("number"==typeof ln&&Math.abs(ln)>Number.MAX_SAFE_INTEGER)return Tt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof ln&&Math.floor(ln)!==ln)return Tt.error("Numeric branch labels must be integer values.");if(J){if(Tt.checkSubtype(J,gr(ln)))return null}else J=gr(ln);if(void 0!==ve[String(ln)])return Tt.error("Branch labels must be unique.");ve[String(ln)]=Me.length}var an=z.parse(lt,Fe,se);if(!an)return null;se=se||an.type,Me.push(an)}var xn=z.parse(M[1],1,Ue);if(!xn)return null;var On=z.parse(M[M.length-1],M.length-1,se);return On?"value"!==xn.type.kind&&z.concat(1).checkSubtype(J,xn.type)?null:new hs(J,se,xn,ve,Me,On):null},hs.prototype.evaluate=function(M){var z=this.input.evaluate(M);return(gr(z)===this.inputType&&this.outputs[this.cases[z]]||this.otherwise).evaluate(M)},hs.prototype.eachChild=function(M){M(this.input),this.outputs.forEach(M),M(this.otherwise)},hs.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})&&this.otherwise.outputDefined()},hs.prototype.serialize=function(){for(var M=this,z=["match",this.input.serialize()],J=[],se={},ve=0,Me=Object.keys(this.cases).sort();ve<Me.length;ve+=1){var Fe=Me[ve];void 0===(Jt=se[this.cases[Fe]])?(se[this.cases[Fe]]=J.length,J.push([this.cases[Fe],[Fe]])):J[Jt][1].push(Fe)}for(var Ze=function(an){return"number"===M.inputType.kind?Number(an):an},lt=0,Tt=J;lt<Tt.length;lt+=1){var Dt=Tt[lt],Jt=Dt[0],ln=Dt[1];z.push(1===ln.length?Ze(ln[0]):ln.map(Ze)),z.push(this.outputs[outputIndex$1].serialize())}return z.push(this.otherwise.serialize()),z};var mo=function(M,z,J){this.type=M,this.branches=z,this.otherwise=J};mo.parse=function(M,z){if(M.length<4)return z.error("Expected at least 3 arguments, but found only "+(M.length-1)+".");if(M.length%2!=0)return z.error("Expected an odd number of arguments.");var J;z.expectedType&&"value"!==z.expectedType.kind&&(J=z.expectedType);for(var se=[],ve=1;ve<M.length-1;ve+=2){var Me=z.parse(M[ve],ve,Kt);if(!Me)return null;var Fe=z.parse(M[ve+1],ve+1,J);if(!Fe)return null;se.push([Me,Fe]),J=J||Fe.type}var Ze=z.parse(M[M.length-1],M.length-1,J);return Ze?new mo(J,se,Ze):null},mo.prototype.evaluate=function(M){for(var z=0,J=this.branches;z<J.length;z+=1){var se=J[z],Me=se[1];if(se[0].evaluate(M))return Me.evaluate(M)}return this.otherwise.evaluate(M)},mo.prototype.eachChild=function(M){for(var z=0,J=this.branches;z<J.length;z+=1){var se=J[z],Me=se[1];M(se[0]),M(Me)}M(this.otherwise)},mo.prototype.outputDefined=function(){return this.branches.every(function(M){return M[1].outputDefined()})&&this.otherwise.outputDefined()},mo.prototype.serialize=function(){var M=["case"];return this.eachChild(function(z){M.push(z.serialize())}),M};var uo=function(M,z,J,se){this.type=M,this.input=z,this.beginIndex=J,this.endIndex=se};function nu(M,z){return"=="===M||"!="===M?"boolean"===z.kind||"string"===z.kind||"number"===z.kind||"null"===z.kind||"value"===z.kind:"string"===z.kind||"number"===z.kind||"value"===z.kind}function ru(M,z,J,se){return 0===se.compare(z,J)}function xa(M,z,J){var se="=="!==M&&"!="!==M;return function(){function ve(Me,Fe,Ze){this.type=Kt,this.lhs=Me,this.rhs=Fe,this.collator=Ze,this.hasUntypedArgument="value"===Me.type.kind||"value"===Fe.type.kind}return ve.parse=function(Me,Fe){if(3!==Me.length&&4!==Me.length)return Fe.error("Expected two or three arguments.");var Ze=Me[0],lt=Fe.parse(Me[1],1,Ue);if(!lt)return null;if(!nu(Ze,lt.type))return Fe.concat(1).error('"'+Ze+"\" comparisons are not supported for type '"+un(lt.type)+"'.");var Tt=Fe.parse(Me[2],2,Ue);if(!Tt)return null;if(!nu(Ze,Tt.type))return Fe.concat(2).error('"'+Ze+"\" comparisons are not supported for type '"+un(Tt.type)+"'.");if(lt.type.kind!==Tt.type.kind&&"value"!==lt.type.kind&&"value"!==Tt.type.kind)return Fe.error("Cannot compare types '"+un(lt.type)+"' and '"+un(Tt.type)+"'.");se&&("value"===lt.type.kind&&"value"!==Tt.type.kind?lt=new ir(Tt.type,[lt]):"value"!==lt.type.kind&&"value"===Tt.type.kind&&(Tt=new ir(lt.type,[Tt])));var Dt=null;if(4===Me.length){if("string"!==lt.type.kind&&"string"!==Tt.type.kind&&"value"!==lt.type.kind&&"value"!==Tt.type.kind)return Fe.error("Cannot use collator to compare non-string types.");if(!(Dt=Fe.parse(Me[3],3,wt)))return null}return new ve(lt,Tt,Dt)},ve.prototype.evaluate=function(Me){var Fe=this.lhs.evaluate(Me),Ze=this.rhs.evaluate(Me);if(se&&this.hasUntypedArgument){var lt=gr(Fe),Tt=gr(Ze);if(lt.kind!==Tt.kind||"string"!==lt.kind&&"number"!==lt.kind)throw new er('Expected arguments for "'+M+'" to be (string, string) or (number, number), but found ('+lt.kind+", "+Tt.kind+") instead.")}if(this.collator&&!se&&this.hasUntypedArgument){var Dt=gr(Fe),Jt=gr(Ze);if("string"!==Dt.kind||"string"!==Jt.kind)return z(Me,Fe,Ze)}return this.collator?J(Me,Fe,Ze,this.collator.evaluate(Me)):z(Me,Fe,Ze)},ve.prototype.eachChild=function(Me){Me(this.lhs),Me(this.rhs),this.collator&&Me(this.collator)},ve.prototype.outputDefined=function(){return!0},ve.prototype.serialize=function(){var Me=[M];return this.eachChild(function(Fe){Me.push(Fe.serialize())}),Me},ve}()}uo.parse=function(M,z){if(M.length<=2||M.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var J=z.parse(M[1],1,Ue),se=z.parse(M[2],2,mt);if(!J||!se)return null;if(!yn(J.type,[tn(Ue),Wt,Ue]))return z.error("Expected first argument to be of type array or string, but found "+un(J.type)+" instead");if(4===M.length){var ve=z.parse(M[3],3,mt);return ve?new uo(J.type,J,se,ve):null}return new uo(J.type,J,se)},uo.prototype.evaluate=function(M){var z=this.input.evaluate(M),J=this.beginIndex.evaluate(M);if(!Mn(z,["string","array"]))throw new er("Expected first argument to be of type array or string, but found "+un(gr(z))+" instead.");if(this.endIndex){var se=this.endIndex.evaluate(M);return z.slice(J,se)}return z.slice(J)},uo.prototype.eachChild=function(M){M(this.input),M(this.beginIndex),this.endIndex&&M(this.endIndex)},uo.prototype.outputDefined=function(){return!1},uo.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var M=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),M]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ao=xa("==",function(M,z,J){return z===J},ru),gu=xa("!=",function(M,z,J){return z!==J},function(M,z,J,se){return!ru(0,z,J,se)}),xc=xa("<",function(M,z,J){return z<J},function(M,z,J,se){return se.compare(z,J)<0}),Lu=xa(">",function(M,z,J){return z>J},function(M,z,J,se){return se.compare(z,J)>0}),Ru=xa("<=",function(M,z,J){return z<=J},function(M,z,J,se){return se.compare(z,J)<=0}),mu=xa(">=",function(M,z,J){return z>=J},function(M,z,J,se){return se.compare(z,J)>=0}),sl=function(M,z,J,se,ve){this.type=Wt,this.number=M,this.locale=z,this.currency=J,this.minFractionDigits=se,this.maxFractionDigits=ve};sl.parse=function(M,z){if(3!==M.length)return z.error("Expected two arguments.");var J=z.parse(M[1],1,mt);if(!J)return null;var se=M[2];if("object"!=typeof se||Array.isArray(se))return z.error("NumberFormat options argument must be an object.");var ve=null;if(se.locale&&!(ve=z.parse(se.locale,1,Wt)))return null;var Me=null;if(se.currency&&!(Me=z.parse(se.currency,1,Wt)))return null;var Fe=null;if(se["min-fraction-digits"]&&!(Fe=z.parse(se["min-fraction-digits"],1,mt)))return null;var Ze=null;return se["max-fraction-digits"]&&!(Ze=z.parse(se["max-fraction-digits"],1,mt))?null:new sl(J,ve,Me,Fe,Ze)},sl.prototype.evaluate=function(M){return new Intl.NumberFormat(this.locale?this.locale.evaluate(M):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(M):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(M):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(M):void 0}).format(this.number.evaluate(M))},sl.prototype.eachChild=function(M){M(this.number),this.locale&&M(this.locale),this.currency&&M(this.currency),this.minFractionDigits&&M(this.minFractionDigits),this.maxFractionDigits&&M(this.maxFractionDigits)},sl.prototype.outputDefined=function(){return!1},sl.prototype.serialize=function(){var M={};return this.locale&&(M.locale=this.locale.serialize()),this.currency&&(M.currency=this.currency.serialize()),this.minFractionDigits&&(M["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(M["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),M]};var Ps=function(M){this.type=mt,this.input=M};Ps.parse=function(M,z){if(2!==M.length)return z.error("Expected 1 argument, but found "+(M.length-1)+" instead.");var J=z.parse(M[1],1);return J?"array"!==J.type.kind&&"string"!==J.type.kind&&"value"!==J.type.kind?z.error("Expected argument of type string or array, but found "+un(J.type)+" instead."):new Ps(J):null},Ps.prototype.evaluate=function(M){var z=this.input.evaluate(M);if("string"==typeof z||Array.isArray(z))return z.length;throw new er("Expected value to be of type string or array, but found "+un(gr(z))+" instead.")},Ps.prototype.eachChild=function(M){M(this.input)},Ps.prototype.outputDefined=function(){return!1},Ps.prototype.serialize=function(){var M=["length"];return this.eachChild(function(z){M.push(z.serialize())}),M};var Fo={"==":ao,"!=":gu,">":Lu,"<":xc,">=":mu,"<=":Ru,array:ir,at:ra,boolean:ir,case:mo,coalesce:Ss,collator:pi,format:Bn,image:mr,in:Us,"index-of":Is,interpolate:Pa,"interpolate-hcl":Pa,"interpolate-lab":Pa,length:Ps,let:Co,literal:kr,match:hs,number:ir,"number-format":sl,object:ir,slice:uo,step:wi,string:ir,"to-boolean":br,"to-color":br,"to-number":br,"to-string":br,var:Bi,within:Zr};function Gl(M,z){var J=z[0],se=z[1],ve=z[2],Me=z[3];J=J.evaluate(M),se=se.evaluate(M),ve=ve.evaluate(M);var Fe=Me?Me.evaluate(M):1,Ze=nr(J,se,ve,Fe);if(Ze)throw new er(Ze);return new sn(J/255*Fe,se/255*Fe,ve/255*Fe,Fe)}function Ds(M,z){return M in z}function Os(M,z){var J=z[M];return void 0===J?null:J}function Zs(M){return{type:M}}function iu(M){return{result:"success",value:M}}function Ls(M){return{result:"error",value:M}}function Ts(M){return"data-driven"===M["property-type"]||"cross-faded-data-driven"===M["property-type"]}function Zu(M){return!!M.expression&&M.expression.parameters.indexOf("zoom")>-1}function Ol(M){return!!M.expression&&M.expression.interpolated}function Wa(M){return M instanceof Number?"number":M instanceof String?"string":M instanceof Boolean?"boolean":Array.isArray(M)?"array":null===M?"null":typeof M}function Je(M){return"object"==typeof M&&null!==M&&!Array.isArray(M)}function tt(M){return M}function ut(M,z,J){return void 0!==M?M:void 0!==z?z:void 0!==J?J:void 0}function vt(M,z,J,se,ve){return ut(typeof J===ve?se[J]:void 0,M.default,z.default)}function Et(M,z,J){if("number"!==Wa(J))return ut(M.default,z.default);var se=M.stops.length;if(1===se||J<=M.stops[0][0])return M.stops[0][1];if(J>=M.stops[se-1][0])return M.stops[se-1][1];var ve=Ai(M.stops.map(function(Me){return Me[0]}),J);return M.stops[ve][1]}function kt(M,z,J){var se=void 0!==M.base?M.base:1;if("number"!==Wa(J))return ut(M.default,z.default);var ve=M.stops.length;if(1===ve||J<=M.stops[0][0])return M.stops[0][1];if(J>=M.stops[ve-1][0])return M.stops[ve-1][1];var ln,an,On,Xn,Me=Ai(M.stops.map(function(Jt){return Jt[0]}),J),Fe=(ln=se,Xn=J-(an=M.stops[Me][0]),0==(On=M.stops[Me+1][0]-an)?0:1===ln?Xn/On:(Math.pow(ln,Xn)-1)/(Math.pow(ln,On)-1)),Ze=M.stops[Me][1],lt=M.stops[Me+1][1],Tt=Lr[z.type]||tt;if(M.colorSpace&&"rgb"!==M.colorSpace){var Dt=Eo[M.colorSpace];Tt=function(Jt,ln){return Dt.reverse(Dt.interpolate(Dt.forward(Jt),Dt.forward(ln),Fe))}}return"function"==typeof Ze.evaluate?{evaluate:function(){for(var Jt=[],ln=arguments.length;ln--;)Jt[ln]=arguments[ln];var an=Ze.evaluate.apply(void 0,Jt),xn=lt.evaluate.apply(void 0,Jt);if(void 0!==an&&void 0!==xn)return Tt(an,xn,Fe)}}:Tt(Ze,lt,Fe)}function zt(M,z,J){return"color"===z.type?J=sn.parse(J):"formatted"===z.type?J=Ln.fromString(J.toString()):"resolvedImage"===z.type?J=qn.fromString(J.toString()):Wa(J)===z.type||"enum"===z.type&&z.values[J]||(J=void 0),ut(J,M.default,z.default)}ni.register(Fo,{error:[{kind:"error"},[Wt],function(M,z){throw new er(z[0].evaluate(M))}],typeof:[Wt,[Ue],function(M,z){return un(gr(z[0].evaluate(M)))}],"to-rgba":[tn(mt,4),[rn],function(M,z){return z[0].evaluate(M).toArray()}],rgb:[rn,[mt,mt,mt],Gl],rgba:[rn,[mt,mt,mt,mt],Gl],has:{type:Kt,overloads:[[[Wt],function(M,z){return Ds(z[0].evaluate(M),M.properties())}],[[Wt,Yt],function(M,z){var se=z[1];return Ds(z[0].evaluate(M),se.evaluate(M))}]]},get:{type:Ue,overloads:[[[Wt],function(M,z){return Os(z[0].evaluate(M),M.properties())}],[[Wt,Yt],function(M,z){var se=z[1];return Os(z[0].evaluate(M),se.evaluate(M))}]]},"feature-state":[Ue,[Wt],function(M,z){return Os(z[0].evaluate(M),M.featureState||{})}],properties:[Yt,[],function(M){return M.properties()}],"geometry-type":[Wt,[],function(M){return M.geometryType()}],id:[Ue,[],function(M){return M.id()}],zoom:[mt,[],function(M){return M.globals.zoom}],"heatmap-density":[mt,[],function(M){return M.globals.heatmapDensity||0}],"line-progress":[mt,[],function(M){return M.globals.lineProgress||0}],accumulated:[Ue,[],function(M){return void 0===M.globals.accumulated?null:M.globals.accumulated}],"+":[mt,Zs(mt),function(M,z){for(var J=0,se=0,ve=z;se<ve.length;se+=1)J+=ve[se].evaluate(M);return J}],"*":[mt,Zs(mt),function(M,z){for(var J=1,se=0,ve=z;se<ve.length;se+=1)J*=ve[se].evaluate(M);return J}],"-":{type:mt,overloads:[[[mt,mt],function(M,z){var se=z[1];return z[0].evaluate(M)-se.evaluate(M)}],[[mt],function(M,z){return-z[0].evaluate(M)}]]},"/":[mt,[mt,mt],function(M,z){var se=z[1];return z[0].evaluate(M)/se.evaluate(M)}],"%":[mt,[mt,mt],function(M,z){var se=z[1];return z[0].evaluate(M)%se.evaluate(M)}],ln2:[mt,[],function(){return Math.LN2}],pi:[mt,[],function(){return Math.PI}],e:[mt,[],function(){return Math.E}],"^":[mt,[mt,mt],function(M,z){var se=z[1];return Math.pow(z[0].evaluate(M),se.evaluate(M))}],sqrt:[mt,[mt],function(M,z){return Math.sqrt(z[0].evaluate(M))}],log10:[mt,[mt],function(M,z){return Math.log(z[0].evaluate(M))/Math.LN10}],ln:[mt,[mt],function(M,z){return Math.log(z[0].evaluate(M))}],log2:[mt,[mt],function(M,z){return Math.log(z[0].evaluate(M))/Math.LN2}],sin:[mt,[mt],function(M,z){return Math.sin(z[0].evaluate(M))}],cos:[mt,[mt],function(M,z){return Math.cos(z[0].evaluate(M))}],tan:[mt,[mt],function(M,z){return Math.tan(z[0].evaluate(M))}],asin:[mt,[mt],function(M,z){return Math.asin(z[0].evaluate(M))}],acos:[mt,[mt],function(M,z){return Math.acos(z[0].evaluate(M))}],atan:[mt,[mt],function(M,z){return Math.atan(z[0].evaluate(M))}],min:[mt,Zs(mt),function(M,z){return Math.min.apply(Math,z.map(function(J){return J.evaluate(M)}))}],max:[mt,Zs(mt),function(M,z){return Math.max.apply(Math,z.map(function(J){return J.evaluate(M)}))}],abs:[mt,[mt],function(M,z){return Math.abs(z[0].evaluate(M))}],round:[mt,[mt],function(M,z){var J=z[0].evaluate(M);return J<0?-Math.round(-J):Math.round(J)}],floor:[mt,[mt],function(M,z){return Math.floor(z[0].evaluate(M))}],ceil:[mt,[mt],function(M,z){return Math.ceil(z[0].evaluate(M))}],"filter-==":[Kt,[Wt,Ue],function(M,z){var J=z[0],se=z[1];return M.properties()[J.value]===se.value}],"filter-id-==":[Kt,[Ue],function(M,z){var J=z[0];return M.id()===J.value}],"filter-type-==":[Kt,[Wt],function(M,z){var J=z[0];return M.geometryType()===J.value}],"filter-<":[Kt,[Wt,Ue],function(M,z){var J=z[0],se=z[1],ve=M.properties()[J.value],Me=se.value;return typeof ve==typeof Me&&ve<Me}],"filter-id-<":[Kt,[Ue],function(M,z){var J=z[0],se=M.id(),ve=J.value;return typeof se==typeof ve&&se<ve}],"filter->":[Kt,[Wt,Ue],function(M,z){var J=z[0],se=z[1],ve=M.properties()[J.value],Me=se.value;return typeof ve==typeof Me&&ve>Me}],"filter-id->":[Kt,[Ue],function(M,z){var J=z[0],se=M.id(),ve=J.value;return typeof se==typeof ve&&se>ve}],"filter-<=":[Kt,[Wt,Ue],function(M,z){var J=z[0],se=z[1],ve=M.properties()[J.value],Me=se.value;return typeof ve==typeof Me&&ve<=Me}],"filter-id-<=":[Kt,[Ue],function(M,z){var J=z[0],se=M.id(),ve=J.value;return typeof se==typeof ve&&se<=ve}],"filter->=":[Kt,[Wt,Ue],function(M,z){var J=z[0],se=z[1],ve=M.properties()[J.value],Me=se.value;return typeof ve==typeof Me&&ve>=Me}],"filter-id->=":[Kt,[Ue],function(M,z){var J=z[0],se=M.id(),ve=J.value;return typeof se==typeof ve&&se>=ve}],"filter-has":[Kt,[Ue],function(M,z){return z[0].value in M.properties()}],"filter-has-id":[Kt,[],function(M){return null!==M.id()&&void 0!==M.id()}],"filter-type-in":[Kt,[tn(Wt)],function(M,z){return z[0].value.indexOf(M.geometryType())>=0}],"filter-id-in":[Kt,[tn(Ue)],function(M,z){return z[0].value.indexOf(M.id())>=0}],"filter-in-small":[Kt,[Wt,tn(Ue)],function(M,z){var J=z[0];return z[1].value.indexOf(M.properties()[J.value])>=0}],"filter-in-large":[Kt,[Wt,tn(Ue)],function(M,z){var J=z[0],se=z[1];return function(ve,Me,Fe,Ze){for(;Fe<=Ze;){var lt=Fe+Ze>>1;if(Me[lt]===ve)return!0;Me[lt]>ve?Ze=lt-1:Fe=lt+1}return!1}(M.properties()[J.value],se.value,0,se.value.length-1)}],all:{type:Kt,overloads:[[[Kt,Kt],function(M,z){var se=z[1];return z[0].evaluate(M)&&se.evaluate(M)}],[Zs(Kt),function(M,z){for(var J=0,se=z;J<se.length;J+=1)if(!se[J].evaluate(M))return!1;return!0}]]},any:{type:Kt,overloads:[[[Kt,Kt],function(M,z){var se=z[1];return z[0].evaluate(M)||se.evaluate(M)}],[Zs(Kt),function(M,z){for(var J=0,se=z;J<se.length;J+=1)if(se[J].evaluate(M))return!0;return!1}]]},"!":[Kt,[Kt],function(M,z){return!z[0].evaluate(M)}],"is-supported-script":[Kt,[Wt],function(M,z){var se=M.globals&&M.globals.isSupportedScript;return!se||se(z[0].evaluate(M))}],upcase:[Wt,[Wt],function(M,z){return z[0].evaluate(M).toUpperCase()}],downcase:[Wt,[Wt],function(M,z){return z[0].evaluate(M).toLowerCase()}],concat:[Wt,Zs(Ue),function(M,z){return z.map(function(J){return jr(J.evaluate(M))}).join("")}],"resolved-locale":[Wt,[wt],function(M,z){return z[0].evaluate(M).resolvedLocale()}]});var fn=function(M,z){var J;this.expression=M,this._warningHistory={},this._evaluator=new di,this._defaultValue=z?"color"===(J=z).type&&Je(J.default)?new sn(0,0,0,0):"color"===J.type?sn.parse(J.default)||null:void 0===J.default?null:J.default:null,this._enumValues=z&&"enum"===z.type?z.values:null};function dn(M){return Array.isArray(M)&&M.length>0&&"string"==typeof M[0]&&M[0]in Fo}function cn(M,z){var ve,Me,J=new ci(Fo,[],z?(Me={color:rn,string:Wt,number:mt,enum:Wt,boolean:Kt,formatted:Ut,resolvedImage:Zt},"array"===(ve=z).type?tn(Me[ve.value]||Ue,ve.length):Me[ve.type]):void 0),se=J.parse(M,void 0,void 0,void 0,z&&"string"===z.type?{typeAnnotation:"coerce"}:void 0);return se?iu(new fn(se,z)):Ls(J.errors)}fn.prototype.evaluateWithoutErrorHandling=function(M,z,J,se,ve,Me){return this._evaluator.globals=M,this._evaluator.feature=z,this._evaluator.featureState=J,this._evaluator.canonical=se,this._evaluator.availableImages=ve||null,this._evaluator.formattedSection=Me,this.expression.evaluate(this._evaluator)},fn.prototype.evaluate=function(M,z,J,se,ve,Me){this._evaluator.globals=M,this._evaluator.feature=z||null,this._evaluator.featureState=J||null,this._evaluator.canonical=se,this._evaluator.availableImages=ve||null,this._evaluator.formattedSection=Me||null;try{var Fe=this.expression.evaluate(this._evaluator);if(null==Fe||"number"==typeof Fe&&Fe!=Fe)return this._defaultValue;if(this._enumValues&&!(Fe in this._enumValues))throw new er("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ze){return JSON.stringify(Ze)}).join(", ")+", but found "+JSON.stringify(Fe)+" instead.");return Fe}catch(Ze){return this._warningHistory[Ze.message]||(this._warningHistory[Ze.message]=!0,"undefined"!=typeof console&&console.warn(Ze.message)),this._defaultValue}};var wn=function(M,z){this.kind=M,this._styleExpression=z,this.isStateDependent="constant"!==M&&!$r(z.expression)};wn.prototype.evaluateWithoutErrorHandling=function(M,z,J,se,ve,Me){return this._styleExpression.evaluateWithoutErrorHandling(M,z,J,se,ve,Me)},wn.prototype.evaluate=function(M,z,J,se,ve,Me){return this._styleExpression.evaluate(M,z,J,se,ve,Me)};var En=function(M,z,J,se){this.kind=M,this.zoomStops=J,this._styleExpression=z,this.isStateDependent="camera"!==M&&!$r(z.expression),this.interpolationType=se};function Fn(M,z){if("error"===(M=cn(M,z)).result)return M;var J=M.value.expression,se=Or(J);if(!se&&!Ts(z))return Ls([new jt("","data expressions not supported")]);var ve=Ji(J,["zoom"]);if(!ve&&!Zu(z))return Ls([new jt("","zoom expressions not supported")]);var Me=function Ze(lt){var Tt=null;if(lt instanceof Co)Tt=Ze(lt.result);else if(lt instanceof Ss)for(var Dt=0,Jt=lt.args;Dt<Jt.length&&!(Tt=Ze(Jt[Dt]));Dt+=1);else(lt instanceof wi||lt instanceof Pa)&&lt.input instanceof ni&&"zoom"===lt.input.name&&(Tt=lt);return Tt instanceof jt||lt.eachChild(function(an){var xn=Ze(an);xn instanceof jt?Tt=xn:!Tt&&xn?Tt=new jt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Tt&&xn&&Tt!==xn&&(Tt=new jt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),Tt}(J);return Me||ve?Me instanceof jt?Ls([Me]):Me instanceof Pa&&!Ol(z)?Ls([new jt("",'"interpolate" expressions cannot be used with this property')]):iu(Me?new En(se?"camera":"composite",M.value,Me.labels,Me instanceof Pa?Me.interpolation:void 0):new wn(se?"constant":"source",M.value)):Ls([new jt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}En.prototype.evaluateWithoutErrorHandling=function(M,z,J,se,ve,Me){return this._styleExpression.evaluateWithoutErrorHandling(M,z,J,se,ve,Me)},En.prototype.evaluate=function(M,z,J,se,ve,Me){return this._styleExpression.evaluate(M,z,J,se,ve,Me)},En.prototype.interpolationFactor=function(M,z,J){return this.interpolationType?Pa.interpolationFactor(this.interpolationType,M,z,J):0};var zn=function(M,z){this._parameters=M,this._specification=z,gt(this,function J(se,ve){var Me,Fe,Ze,lt="color"===ve.type,Tt=se.stops&&"object"==typeof se.stops[0][0],Jt=Tt||!(Tt||void 0!==se.property),ln=se.type||(Ol(ve)?"exponential":"interval");if(lt&&((se=gt({},se)).stops&&(se.stops=se.stops.map(function(Vi){return[Vi[0],sn.parse(Vi[1])]})),se.default=sn.parse(se.default?se.default:ve.default)),se.colorSpace&&"rgb"!==se.colorSpace&&!Eo[se.colorSpace])throw new Error("Unknown color space: "+se.colorSpace);if("exponential"===ln)Me=kt;else if("interval"===ln)Me=Et;else if("categorical"===ln){Me=vt,Fe=Object.create(null);for(var an=0,xn=se.stops;an<xn.length;an+=1){var On=xn[an];Fe[On[0]]=On[1]}Ze=typeof se.stops[0][0]}else{if("identity"!==ln)throw new Error('Unknown function type "'+ln+'"');Me=zt}if(Tt){for(var Xn={},Yn=[],ar=0;ar<se.stops.length;ar++){var or=se.stops[ar],cr=or[0].zoom;void 0===Xn[cr]&&(Xn[cr]={zoom:cr,type:se.type,property:se.property,default:se.default,stops:[]},Yn.push(cr)),Xn[cr].stops.push([or[0].value,or[1]])}for(var Sr=[],Rr=0,si=Yn;Rr<si.length;Rr+=1){var ii=si[Rr];Sr.push([Xn[ii].zoom,J(Xn[ii],ve)])}var _i={name:"linear"};return{kind:"composite",interpolationType:_i,interpolationFactor:Pa.interpolationFactor.bind(void 0,_i),zoomStops:Sr.map(function(Vi){return Vi[0]}),evaluate:function(Vi,Si){var Zi=Vi.zoom;return kt({stops:Sr,base:se.base},ve,Zi).evaluate(Zi,Si)}}}if(Jt){var Ui="exponential"===ln?{name:"exponential",base:void 0!==se.base?se.base:1}:null;return{kind:"camera",interpolationType:Ui,interpolationFactor:Pa.interpolationFactor.bind(void 0,Ui),zoomStops:se.stops.map(function(Vi){return Vi[0]}),evaluate:function(Vi){return Me(se,ve,Vi.zoom,Fe,Ze)}}}return{kind:"source",evaluate:function(Vi,Si){var Zi=Si&&Si.properties?Si.properties[se.property]:void 0;return void 0===Zi?ut(se.default,ve.default):Me(se,ve,Zi,Fe,Ze)}}}(this._parameters,this._specification))};function Qn(M){var z=M.key,J=M.value,se=M.valueSpec||{},ve=M.objectElementValidators||{},Me=M.style,Fe=M.styleSpec,Ze=[],lt=Wa(J);if("object"!==lt)return[new Ke(z,J,"object expected, "+lt+" found")];for(var Tt in J){var Dt=Tt.split(".")[0],Jt=se[Dt]||se["*"],ln=void 0;if(ve[Dt])ln=ve[Dt];else if(se[Dt])ln=Tn;else if(ve["*"])ln=ve["*"];else{if(!se["*"]){Ze.push(new Ke(z,J[Tt],'unknown property "'+Tt+'"'));continue}ln=Tn}Ze=Ze.concat(ln({key:(z&&z+".")+Tt,value:J[Tt],valueSpec:Jt,style:Me,styleSpec:Fe,object:J,objectKey:Tt},J))}for(var an in se)ve[an]||se[an].required&&void 0===se[an].default&&void 0===J[an]&&Ze.push(new Ke(z,J,'missing required property "'+an+'"'));return Ze}function _r(M){var z=M.value,J=M.valueSpec,se=M.style,ve=M.styleSpec,Me=M.key,Fe=M.arrayElementValidator||Tn;if("array"!==Wa(z))return[new Ke(Me,z,"array expected, "+Wa(z)+" found")];if(J.length&&z.length!==J.length)return[new Ke(Me,z,"array length "+J.length+" expected, length "+z.length+" found")];if(J["min-length"]&&z.length<J["min-length"])return[new Ke(Me,z,"array length at least "+J["min-length"]+" expected, length "+z.length+" found")];var Ze={type:J.value,values:J.values};ve.$version<7&&(Ze.function=J.function),"object"===Wa(J.value)&&(Ze=J.value);for(var lt=[],Tt=0;Tt<z.length;Tt++)lt=lt.concat(Fe({array:z,arrayIndex:Tt,value:z[Tt],valueSpec:Ze,style:se,styleSpec:ve,key:Me+"["+Tt+"]"}));return lt}function Cr(M){var z=M.key,J=M.value,se=M.valueSpec,ve=Wa(J);return"number"===ve&&J!=J&&(ve="NaN"),"number"!==ve?[new Ke(z,J,"number expected, "+ve+" found")]:"minimum"in se&&J<se.minimum?[new Ke(z,J,J+" is less than the minimum value "+se.minimum)]:"maximum"in se&&J>se.maximum?[new Ke(z,J,J+" is greater than the maximum value "+se.maximum)]:[]}function Qr(M){var z,J,se,ve=M.valueSpec,Me=pt(M.value.type),Fe={},Ze="categorical"!==Me&&void 0===M.value.property,lt=!Ze,Tt="array"===Wa(M.value.stops)&&"array"===Wa(M.value.stops[0])&&"object"===Wa(M.value.stops[0][0]),Dt=Qn({key:M.key,value:M.value,valueSpec:M.styleSpec.function,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{stops:function(an){if("identity"===Me)return[new Ke(an.key,an.value,'identity function may not have a "stops" property')];var xn=[],On=an.value;return xn=xn.concat(_r({key:an.key,value:On,valueSpec:an.valueSpec,style:an.style,styleSpec:an.styleSpec,arrayElementValidator:Jt})),"array"===Wa(On)&&0===On.length&&xn.push(new Ke(an.key,On,"array must have at least one stop")),xn},default:function(an){return Tn({key:an.key,value:an.value,valueSpec:ve,style:an.style,styleSpec:an.styleSpec})}}});return"identity"===Me&&Ze&&Dt.push(new Ke(M.key,M.value,'missing required property "property"')),"identity"===Me||M.value.stops||Dt.push(new Ke(M.key,M.value,'missing required property "stops"')),"exponential"===Me&&M.valueSpec.expression&&!Ol(M.valueSpec)&&Dt.push(new Ke(M.key,M.value,"exponential functions not supported")),M.styleSpec.$version>=8&&(lt&&!Ts(M.valueSpec)?Dt.push(new Ke(M.key,M.value,"property functions not supported")):Ze&&!Zu(M.valueSpec)&&Dt.push(new Ke(M.key,M.value,"zoom functions not supported"))),"categorical"!==Me&&!Tt||void 0!==M.value.property||Dt.push(new Ke(M.key,M.value,'"property" property is required')),Dt;function Jt(an){var xn=[],On=an.value,Xn=an.key;if("array"!==Wa(On))return[new Ke(Xn,On,"array expected, "+Wa(On)+" found")];if(2!==On.length)return[new Ke(Xn,On,"array length 2 expected, length "+On.length+" found")];if(Tt){if("object"!==Wa(On[0]))return[new Ke(Xn,On,"object expected, "+Wa(On[0])+" found")];if(void 0===On[0].zoom)return[new Ke(Xn,On,"object stop key must have zoom")];if(void 0===On[0].value)return[new Ke(Xn,On,"object stop key must have value")];if(se&&se>pt(On[0].zoom))return[new Ke(Xn,On[0].zoom,"stop zoom values must appear in ascending order")];pt(On[0].zoom)!==se&&(se=pt(On[0].zoom),J=void 0,Fe={}),xn=xn.concat(Qn({key:Xn+"[0]",value:On[0],valueSpec:{zoom:{}},style:an.style,styleSpec:an.styleSpec,objectElementValidators:{zoom:Cr,value:ln}}))}else xn=xn.concat(ln({key:Xn+"[0]",value:On[0],valueSpec:{},style:an.style,styleSpec:an.styleSpec},On));return dn(St(On[1]))?xn.concat([new Ke(Xn+"[1]",On[1],"expressions are not allowed in function stops.")]):xn.concat(Tn({key:Xn+"[1]",value:On[1],valueSpec:ve,style:an.style,styleSpec:an.styleSpec}))}function ln(an,xn){var On=Wa(an.value),Xn=pt(an.value),Yn=null!==an.value?an.value:xn;if(z){if(On!==z)return[new Ke(an.key,Yn,On+" stop domain type must match previous stop domain type "+z)]}else z=On;if("number"!==On&&"string"!==On&&"boolean"!==On)return[new Ke(an.key,Yn,"stop domain value must be a number, string, or boolean")];if("number"!==On&&"categorical"!==Me){var ar="number expected, "+On+" found";return Ts(ve)&&void 0===Me&&(ar+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ke(an.key,Yn,ar)]}return"categorical"!==Me||"number"!==On||isFinite(Xn)&&Math.floor(Xn)===Xn?"categorical"!==Me&&"number"===On&&void 0!==J&&Xn<J?[new Ke(an.key,Yn,"stop domain values must appear in ascending order")]:(J=Xn,"categorical"===Me&&Xn in Fe?[new Ke(an.key,Yn,"stop domain values must be unique")]:(Fe[Xn]=!0,[])):[new Ke(an.key,Yn,"integer expected, found "+Xn)]}}function oi(M){var z=("property"===M.expressionContext?Fn:cn)(St(M.value),M.valueSpec);if("error"===z.result)return z.value.map(function(se){return new Ke(""+M.key+se.key,M.value,se.message)});var J=z.value.expression||z.value._styleExpression.expression;if("property"===M.expressionContext&&"text-font"===M.propertyKey&&!J.outputDefined())return[new Ke(M.key,M.value,'Invalid data expression for "'+M.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===M.expressionContext&&"layout"===M.propertyType&&!$r(J))return[new Ke(M.key,M.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===M.expressionContext&&!$r(J))return[new Ke(M.key,M.value,'"feature-state" data expressions are not supported with filters.')];if(M.expressionContext&&0===M.expressionContext.indexOf("cluster")){if(!Ji(J,["zoom","feature-state"]))return[new Ke(M.key,M.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===M.expressionContext&&!Or(J))return[new Ke(M.key,M.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function yi(M){var z=M.key,J=M.value,se=M.valueSpec,ve=[];return Array.isArray(se.values)?-1===se.values.indexOf(pt(J))&&ve.push(new Ke(z,J,"expected one of ["+se.values.join(", ")+"], "+JSON.stringify(J)+" found")):-1===Object.keys(se.values).indexOf(pt(J))&&ve.push(new Ke(z,J,"expected one of ["+Object.keys(se.values).join(", ")+"], "+JSON.stringify(J)+" found")),ve}function ei(M){if(!0===M||!1===M)return!0;if(!Array.isArray(M)||0===M.length)return!1;switch(M[0]){case"has":return M.length>=2&&"$id"!==M[1]&&"$type"!==M[1];case"in":return M.length>=3&&("string"!=typeof M[1]||Array.isArray(M[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==M.length||Array.isArray(M[1])||Array.isArray(M[2]);case"any":case"all":for(var z=0,J=M.slice(1);z<J.length;z+=1){var se=J[z];if(!ei(se)&&"boolean"!=typeof se)return!1}return!0;default:return!0}}zn.deserialize=function(M){return new zn(M._parameters,M._specification)},zn.serialize=function(M){return{_parameters:M._parameters,_specification:M._specification}};var Qi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ci(M){if(null==M)return{filter:function(){return!0},needGeometry:!1};ei(M)||(M=Ra(M));var z=cn(M,Qi);if("error"===z.result)throw new Error(z.value.map(function(J){return J.key+": "+J.message}).join(", "));return{filter:function(J,se,ve){return z.value.evaluate(J,se,{},ve)},needGeometry:function J(se){if(!Array.isArray(se))return!1;if("within"===se[0])return!0;for(var ve=1;ve<se.length;ve++)if(J(se[ve]))return!0;return!1}(M)}}function La(M,z){return M<z?-1:M>z?1:0}function Ra(M){if(!M)return!0;var z,J=M[0];return M.length<=1?"any"!==J:"=="===J?Ba(M[1],M[2],"=="):"!="===J?yo(Ba(M[1],M[2],"==")):"<"===J||">"===J||"<="===J||">="===J?Ba(M[1],M[2],J):"any"===J?(z=M.slice(1),["any"].concat(z.map(Ra))):"all"===J?["all"].concat(M.slice(1).map(Ra)):"none"===J?["all"].concat(M.slice(1).map(Ra).map(yo)):"in"===J?Go(M[1],M.slice(2)):"!in"===J?yo(Go(M[1],M.slice(2))):"has"===J?jo(M[1]):"!has"===J?yo(jo(M[1])):"within"!==J||M}function Ba(M,z,J){switch(M){case"$type":return["filter-type-"+J,z];case"$id":return["filter-id-"+J,z];default:return["filter-"+J,M,z]}}function Go(M,z){if(0===z.length)return!1;switch(M){case"$type":return["filter-type-in",["literal",z]];case"$id":return["filter-id-in",["literal",z]];default:return z.length>200&&!z.some(function(J){return typeof J!=typeof z[0]})?["filter-in-large",M,["literal",z.sort(La)]]:["filter-in-small",M,["literal",z]]}}function jo(M){switch(M){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",M]}}function yo(M){return["!",M]}function oo(M){return ei(St(M.value))?oi(gt({},M,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function z(J){var se=J.value,ve=J.key;if("array"!==Wa(se))return[new Ke(ve,se,"array expected, "+Wa(se)+" found")];var Me,Fe=J.styleSpec,Ze=[];if(se.length<1)return[new Ke(ve,se,"filter array must have at least 1 element")];switch(Ze=Ze.concat(yi({key:ve+"[0]",value:se[0],valueSpec:Fe.filter_operator,style:J.style,styleSpec:J.styleSpec})),pt(se[0])){case"<":case"<=":case">":case">=":se.length>=2&&"$type"===pt(se[1])&&Ze.push(new Ke(ve,se,'"$type" cannot be use with operator "'+se[0]+'"'));case"==":case"!=":3!==se.length&&Ze.push(new Ke(ve,se,'filter array for operator "'+se[0]+'" must have 3 elements'));case"in":case"!in":se.length>=2&&"string"!==(Me=Wa(se[1]))&&Ze.push(new Ke(ve+"[1]",se[1],"string expected, "+Me+" found"));for(var lt=2;lt<se.length;lt++)Me=Wa(se[lt]),"$type"===pt(se[1])?Ze=Ze.concat(yi({key:ve+"["+lt+"]",value:se[lt],valueSpec:Fe.geometry_type,style:J.style,styleSpec:J.styleSpec})):"string"!==Me&&"number"!==Me&&"boolean"!==Me&&Ze.push(new Ke(ve+"["+lt+"]",se[lt],"string, number, or boolean expected, "+Me+" found"));break;case"any":case"all":case"none":for(var Tt=1;Tt<se.length;Tt++)Ze=Ze.concat(z({key:ve+"["+Tt+"]",value:se[Tt],style:J.style,styleSpec:J.styleSpec}));break;case"has":case"!has":Me=Wa(se[1]),2!==se.length?Ze.push(new Ke(ve,se,'filter array for "'+se[0]+'" operator must have 2 elements')):"string"!==Me&&Ze.push(new Ke(ve+"[1]",se[1],"string expected, "+Me+" found"));break;case"within":Me=Wa(se[1]),2!==se.length?Ze.push(new Ke(ve,se,'filter array for "'+se[0]+'" operator must have 2 elements')):"object"!==Me&&Ze.push(new Ke(ve+"[1]",se[1],"object expected, "+Me+" found"))}return Ze}(M)}function qo(M,z){var J=M.key,se=M.style,ve=M.styleSpec,Me=M.value,Fe=M.objectKey,Ze=ve[z+"_"+M.layerType];if(!Ze)return[];var lt=Fe.match(/^(.*)-transition$/);if("paint"===z&&lt&&Ze[lt[1]]&&Ze[lt[1]].transition)return Tn({key:J,value:Me,valueSpec:ve.transition,style:se,styleSpec:ve});var Tt,Dt=M.valueSpec||Ze[Fe];if(!Dt)return[new Ke(J,Me,'unknown property "'+Fe+'"')];if("string"===Wa(Me)&&Ts(Dt)&&!Dt.tokens&&(Tt=/^{([^}]+)}$/.exec(Me)))return[new Ke(J,Me,'"'+Fe+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Tt[1])+" }`.")];var Jt=[];return"symbol"===M.layerType&&("text-field"===Fe&&se&&!se.glyphs&&Jt.push(new Ke(J,Me,'use of "text-field" requires a style "glyphs" property')),"text-font"===Fe&&Je(St(Me))&&"identity"===pt(Me.type)&&Jt.push(new Ke(J,Me,'"text-font" does not support identity functions'))),Jt.concat(Tn({key:M.key,value:Me,valueSpec:Dt,style:se,styleSpec:ve,expressionContext:"property",propertyType:z,propertyKey:Fe}))}function co(M){return qo(M,"paint")}function Hs(M){return qo(M,"layout")}function Gs(M){var z=[],J=M.value,se=M.key,ve=M.style,Me=M.styleSpec;J.type||J.ref||z.push(new Ke(se,J,'either "type" or "ref" is required'));var Fe,Ze=pt(J.type),lt=pt(J.ref);if(J.id)for(var Tt=pt(J.id),Dt=0;Dt<M.arrayIndex;Dt++){var Jt=ve.layers[Dt];pt(Jt.id)===Tt&&z.push(new Ke(se,J.id,'duplicate layer id "'+J.id+'", previously used at line '+Jt.id.__line__))}if("ref"in J)["type","source","source-layer","filter","layout"].forEach(function(xn){xn in J&&z.push(new Ke(se,J[xn],'"'+xn+'" is prohibited for ref layers'))}),ve.layers.forEach(function(xn){pt(xn.id)===lt&&(Fe=xn)}),Fe?Fe.ref?z.push(new Ke(se,J.ref,"ref cannot reference another ref layer")):Ze=pt(Fe.type):z.push(new Ke(se,J.ref,'ref layer "'+lt+'" not found'));else if("background"!==Ze)if(J.source){var ln=ve.sources&&ve.sources[J.source],an=ln&&pt(ln.type);ln?"vector"===an&&"raster"===Ze?z.push(new Ke(se,J.source,'layer "'+J.id+'" requires a raster source')):"raster"===an&&"raster"!==Ze?z.push(new Ke(se,J.source,'layer "'+J.id+'" requires a vector source')):"vector"!==an||J["source-layer"]?"raster-dem"===an&&"hillshade"!==Ze?z.push(new Ke(se,J.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Ze||!J.paint||!J.paint["line-gradient"]||"geojson"===an&&ln.lineMetrics||z.push(new Ke(se,J,'layer "'+J.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):z.push(new Ke(se,J,'layer "'+J.id+'" must specify a "source-layer"')):z.push(new Ke(se,J.source,'source "'+J.source+'" not found'))}else z.push(new Ke(se,J,'missing required property "source"'));return z=z.concat(Qn({key:se,value:J,valueSpec:Me.layer,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Tn({key:se+".type",value:J.type,valueSpec:Me.layer.type,style:M.style,styleSpec:M.styleSpec,object:J,objectKey:"type"})},filter:oo,layout:function(xn){return Qn({layer:J,key:xn.key,value:xn.value,style:xn.style,styleSpec:xn.styleSpec,objectElementValidators:{"*":function(On){return Hs(gt({layerType:Ze},On))}}})},paint:function(xn){return Qn({layer:J,key:xn.key,value:xn.value,style:xn.style,styleSpec:xn.styleSpec,objectElementValidators:{"*":function(On){return co(gt({layerType:Ze},On))}}})}}}))}function Rs(M){var z=M.value,J=M.key,se=Wa(z);return"string"!==se?[new Ke(J,z,"string expected, "+se+" found")]:[]}var Xs={promoteId:function(M){var z=M.key,J=M.value;if("string"===Wa(J))return Rs({key:z,value:J});var se=[];for(var ve in J)se.push.apply(se,Rs({key:z+"."+ve,value:J[ve]}));return se}};function Ma(M){var z=M.value,J=M.key,se=M.styleSpec,ve=M.style;if(!z.type)return[new Ke(J,z,'"type" is required')];var Me,Fe=pt(z.type);switch(Fe){case"vector":case"raster":case"raster-dem":return Qn({key:J,value:z,valueSpec:se["source_"+Fe.replace("-","_")],style:M.style,styleSpec:se,objectElementValidators:Xs});case"geojson":if(Me=Qn({key:J,value:z,valueSpec:se.source_geojson,style:ve,styleSpec:se,objectElementValidators:Xs}),z.cluster)for(var Ze in z.clusterProperties){var lt=z.clusterProperties[Ze],Tt=lt[0],Jt="string"==typeof Tt?[Tt,["accumulated"],["get",Ze]]:Tt;Me.push.apply(Me,oi({key:J+"."+Ze+".map",value:lt[1],expressionContext:"cluster-map"})),Me.push.apply(Me,oi({key:J+"."+Ze+".reduce",value:Jt,expressionContext:"cluster-reduce"}))}return Me;case"video":return Qn({key:J,value:z,valueSpec:se.source_video,style:ve,styleSpec:se});case"image":return Qn({key:J,value:z,valueSpec:se.source_image,style:ve,styleSpec:se});case"canvas":return[new Ke(J,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return yi({key:J+".type",value:z.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:ve,styleSpec:se})}}function Mt(M){var z=M.value,J=M.styleSpec,se=J.light,ve=M.style,Me=[],Fe=Wa(z);if(void 0===z)return Me;if("object"!==Fe)return Me.concat([new Ke("light",z,"object expected, "+Fe+" found")]);for(var Ze in z){var lt=Ze.match(/^(.*)-transition$/);Me=Me.concat(lt&&se[lt[1]]&&se[lt[1]].transition?Tn({key:Ze,value:z[Ze],valueSpec:J.transition,style:ve,styleSpec:J}):se[Ze]?Tn({key:Ze,value:z[Ze],valueSpec:se[Ze],style:ve,styleSpec:J}):[new Ke(Ze,z[Ze],'unknown property "'+Ze+'"')])}return Me}var Gt={"*":function(){return[]},array:_r,boolean:function(M){var z=M.value,J=M.key,se=Wa(z);return"boolean"!==se?[new Ke(J,z,"boolean expected, "+se+" found")]:[]},number:Cr,color:function(M){var z=M.key,J=M.value,se=Wa(J);return"string"!==se?[new Ke(z,J,"color expected, "+se+" found")]:null===Pn(J)?[new Ke(z,J,'color expected, "'+J+'" found')]:[]},constants:bt,enum:yi,filter:oo,function:Qr,layer:Gs,object:Qn,source:Ma,light:Mt,string:Rs,formatted:function(M){return 0===Rs(M).length?[]:oi(M)},resolvedImage:function(M){return 0===Rs(M).length?[]:oi(M)}};function Tn(M){var z=M.value,J=M.valueSpec,se=M.styleSpec;return J.expression&&Je(pt(z))?Qr(M):J.expression&&dn(St(z))?oi(M):J.type&&Gt[J.type]?Gt[J.type](M):Qn(gt({},M,{valueSpec:J.type?se[J.type]:J}))}function on(M){var z=M.value,J=M.key,se=Rs(M);return se.length||(-1===z.indexOf("{fontstack}")&&se.push(new Ke(J,z,'"glyphs" url must include a "{fontstack}" token')),-1===z.indexOf("{range}")&&se.push(new Ke(J,z,'"glyphs" url must include a "{range}" token'))),se}function An(M,z){void 0===z&&(z=Ve);var J=[];return J=J.concat(Tn({key:"",value:M,valueSpec:z.$root,styleSpec:z,style:M,objectElementValidators:{glyphs:on,"*":function(){return[]}}})),M.constants&&(J=J.concat(bt({key:"constants",value:M.constants,style:M,styleSpec:z}))),Vn(J)}function Vn(M){return[].concat(M).sort(function(z,J){return z.line-J.line})}function tr(M){return function(){for(var z=[],J=arguments.length;J--;)z[J]=arguments[J];return Vn(M.apply(this,z))}}An.source=tr(Ma),An.light=tr(Mt),An.layer=tr(Gs),An.filter=tr(oo),An.paintProperty=tr(co),An.layoutProperty=tr(Hs);var hr=An,Tr=hr.light,yr=hr.paintProperty,Ir=hr.layoutProperty;function Br(M,z){var J=!1;if(z&&z.length)for(var se=0,ve=z;se<ve.length;se+=1)M.fire(new Ee(new Error(ve[se].message))),J=!0;return J}var xr=Pr;function Pr(M,z,J){var se=this.cells=[];if(M instanceof ArrayBuffer){this.arrayBuffer=M;var ve=new Int32Array(this.arrayBuffer);M=ve[0],this.d=(z=ve[1])+2*(J=ve[2]);for(var Me=0;Me<this.d*this.d;Me++){var Fe=ve[3+Me],Ze=ve[3+Me+1];se.push(Fe===Ze?null:ve.subarray(Fe,Ze))}var Tt=ve[3+se.length+1];this.keys=ve.subarray(ve[3+se.length],Tt),this.bboxes=ve.subarray(Tt),this.insert=this._insertReadonly}else{this.d=z+2*J;for(var Dt=0;Dt<this.d*this.d;Dt++)se.push([]);this.keys=[],this.bboxes=[]}this.n=z,this.extent=M,this.padding=J,this.scale=z/M,this.uid=0;var Jt=J/z*M;this.min=-Jt,this.max=M+Jt}Pr.prototype.insert=function(M,z,J,se,ve){this._forEachCell(z,J,se,ve,this._insertCell,this.uid++),this.keys.push(M),this.bboxes.push(z),this.bboxes.push(J),this.bboxes.push(se),this.bboxes.push(ve)},Pr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Pr.prototype._insertCell=function(M,z,J,se,ve,Me){this.cells[ve].push(Me)},Pr.prototype.query=function(M,z,J,se,ve){var Me=this.min,Fe=this.max;if(M<=Me&&z<=Me&&Fe<=J&&Fe<=se&&!ve)return Array.prototype.slice.call(this.keys);var Ze=[];return this._forEachCell(M,z,J,se,this._queryCell,Ze,{},ve),Ze},Pr.prototype._queryCell=function(M,z,J,se,ve,Me,Fe,Ze){var lt=this.cells[ve];if(null!==lt)for(var Tt=this.keys,Dt=this.bboxes,Jt=0;Jt<lt.length;Jt++){var ln=lt[Jt];if(void 0===Fe[ln]){var an=4*ln;(Ze?Ze(Dt[an+0],Dt[an+1],Dt[an+2],Dt[an+3]):M<=Dt[an+2]&&z<=Dt[an+3]&&J>=Dt[an+0]&&se>=Dt[an+1])?(Fe[ln]=!0,Me.push(Tt[ln])):Fe[ln]=!1}}},Pr.prototype._forEachCell=function(M,z,J,se,ve,Me,Fe,Ze){for(var lt=this._convertToCellCoord(M),Tt=this._convertToCellCoord(z),Dt=this._convertToCellCoord(J),Jt=this._convertToCellCoord(se),ln=lt;ln<=Dt;ln++)for(var an=Tt;an<=Jt;an++){var xn=this.d*an+ln;if((!Ze||Ze(this._convertFromCellCoord(ln),this._convertFromCellCoord(an),this._convertFromCellCoord(ln+1),this._convertFromCellCoord(an+1)))&&ve.call(this,M,z,J,se,xn,Me,Fe,Ze))return}},Pr.prototype._convertFromCellCoord=function(M){return(M-this.padding)/this.scale},Pr.prototype._convertToCellCoord=function(M){return Math.max(0,Math.min(this.d-1,Math.floor(M*this.scale)+this.padding))},Pr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var M=this.cells,z=3+this.cells.length+1+1,J=0,se=0;se<this.cells.length;se++)J+=this.cells[se].length;var ve=new Int32Array(z+J+this.keys.length+this.bboxes.length);ve[0]=this.extent,ve[1]=this.n,ve[2]=this.padding;for(var Me=z,Fe=0;Fe<M.length;Fe++){var Ze=M[Fe];ve[3+Fe]=Me,ve.set(Ze,Me),Me+=Ze.length}return ve[3+M.length]=Me,ve.set(this.keys,Me),ve[3+M.length+1]=Me+=this.keys.length,ve.set(this.bboxes,Me),Me+=this.bboxes.length,ve.buffer};var ai=self.ImageData,gi=self.ImageBitmap,ji={};function ur(M,z,J){void 0===J&&(J={}),Object.defineProperty(z,"_classRegistryKey",{value:M,writeable:!1}),ji[M]={klass:z,omit:J.omit||[],shallow:J.shallow||[]}}for(var Ni in ur("Object",Object),xr.serialize=function(M,z){var J=M.toArrayBuffer();return z&&z.push(J),{buffer:J}},xr.deserialize=function(M){return new xr(M.buffer)},ur("Grid",xr),ur("Color",sn),ur("Error",Error),ur("ResolvedImage",qn),ur("StylePropertyFunction",zn),ur("StyleExpression",fn,{omit:["_evaluator"]}),ur("ZoomDependentExpression",En),ur("ZoomConstantExpression",wn),ur("CompoundExpression",ni,{omit:["_evaluate"]}),Fo)Fo[Ni]._classRegistryKey||ur("Expression_"+Ni,Fo[Ni]);function Jr(M){return M&&"undefined"!=typeof ArrayBuffer&&(M instanceof ArrayBuffer||M.constructor&&"ArrayBuffer"===M.constructor.name)}function Mr(M){return gi&&M instanceof gi}function zi(M,z){if(null==M||"boolean"==typeof M||"number"==typeof M||"string"==typeof M||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp)return M;if(Jr(M)||Mr(M))return z&&z.push(M),M;if(ArrayBuffer.isView(M)){var J=M;return z&&z.push(J.buffer),J}if(M instanceof ai)return z&&z.push(M.data.buffer),M;if(Array.isArray(M)){for(var se=[],ve=0,Me=M;ve<Me.length;ve+=1)se.push(zi(Me[ve],z));return se}if("object"==typeof M){var Ze=M.constructor,lt=Ze._classRegistryKey;if(!lt)throw new Error("can't serialize object of unregistered class");var Tt=Ze.serialize?Ze.serialize(M,z):{};if(!Ze.serialize){for(var Dt in M)if(M.hasOwnProperty(Dt)&&!(ji[lt].omit.indexOf(Dt)>=0)){var Jt=M[Dt];Tt[Dt]=ji[lt].shallow.indexOf(Dt)>=0?Jt:zi(Jt,z)}M instanceof Error&&(Tt.message=M.message)}if(Tt.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==lt&&(Tt.$name=lt),Tt}throw new Error("can't serialize object of type "+typeof M)}function fa(M){if(null==M||"boolean"==typeof M||"number"==typeof M||"string"==typeof M||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp||Jr(M)||Mr(M)||ArrayBuffer.isView(M)||M instanceof ai)return M;if(Array.isArray(M))return M.map(fa);if("object"==typeof M){var z=M.$name||"Object",J=ji[z].klass;if(!J)throw new Error("can't deserialize unregistered class "+z);if(J.deserialize)return J.deserialize(M);for(var se=Object.create(J.prototype),ve=0,Me=Object.keys(M);ve<Me.length;ve+=1){var Fe=Me[ve];if("$name"!==Fe){var Ze=M[Fe];se[Fe]=ji[z].shallow.indexOf(Fe)>=0?Ze:fa(Ze)}}return se}throw new Error("can't deserialize object of type "+typeof M)}var wa=function(){this.first=!0};wa.prototype.update=function(M,z){var J=Math.floor(M);return this.first?(this.first=!1,this.lastIntegerZoom=J,this.lastIntegerZoomTime=0,this.lastZoom=M,this.lastFloorZoom=J,!0):(this.lastFloorZoom>J?(this.lastIntegerZoom=J+1,this.lastIntegerZoomTime=z):this.lastFloorZoom<J&&(this.lastIntegerZoom=J,this.lastIntegerZoomTime=z),M!==this.lastZoom&&(this.lastZoom=M,this.lastFloorZoom=J,!0))};var Yr={"Latin-1 Supplement":function(M){return M>=128&&M<=255},Arabic:function(M){return M>=1536&&M<=1791},"Arabic Supplement":function(M){return M>=1872&&M<=1919},"Arabic Extended-A":function(M){return M>=2208&&M<=2303},"Hangul Jamo":function(M){return M>=4352&&M<=4607},"Unified Canadian Aboriginal Syllabics":function(M){return M>=5120&&M<=5759},Khmer:function(M){return M>=6016&&M<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(M){return M>=6320&&M<=6399},"General Punctuation":function(M){return M>=8192&&M<=8303},"Letterlike Symbols":function(M){return M>=8448&&M<=8527},"Number Forms":function(M){return M>=8528&&M<=8591},"Miscellaneous Technical":function(M){return M>=8960&&M<=9215},"Control Pictures":function(M){return M>=9216&&M<=9279},"Optical Character Recognition":function(M){return M>=9280&&M<=9311},"Enclosed Alphanumerics":function(M){return M>=9312&&M<=9471},"Geometric Shapes":function(M){return M>=9632&&M<=9727},"Miscellaneous Symbols":function(M){return M>=9728&&M<=9983},"Miscellaneous Symbols and Arrows":function(M){return M>=11008&&M<=11263},"CJK Radicals Supplement":function(M){return M>=11904&&M<=12031},"Kangxi Radicals":function(M){return M>=12032&&M<=12255},"Ideographic Description Characters":function(M){return M>=12272&&M<=12287},"CJK Symbols and Punctuation":function(M){return M>=12288&&M<=12351},Hiragana:function(M){return M>=12352&&M<=12447},Katakana:function(M){return M>=12448&&M<=12543},Bopomofo:function(M){return M>=12544&&M<=12591},"Hangul Compatibility Jamo":function(M){return M>=12592&&M<=12687},Kanbun:function(M){return M>=12688&&M<=12703},"Bopomofo Extended":function(M){return M>=12704&&M<=12735},"CJK Strokes":function(M){return M>=12736&&M<=12783},"Katakana Phonetic Extensions":function(M){return M>=12784&&M<=12799},"Enclosed CJK Letters and Months":function(M){return M>=12800&&M<=13055},"CJK Compatibility":function(M){return M>=13056&&M<=13311},"CJK Unified Ideographs Extension A":function(M){return M>=13312&&M<=19903},"Yijing Hexagram Symbols":function(M){return M>=19904&&M<=19967},"CJK Unified Ideographs":function(M){return M>=19968&&M<=40959},"Yi Syllables":function(M){return M>=40960&&M<=42127},"Yi Radicals":function(M){return M>=42128&&M<=42191},"Hangul Jamo Extended-A":function(M){return M>=43360&&M<=43391},"Hangul Syllables":function(M){return M>=44032&&M<=55215},"Hangul Jamo Extended-B":function(M){return M>=55216&&M<=55295},"Private Use Area":function(M){return M>=57344&&M<=63743},"CJK Compatibility Ideographs":function(M){return M>=63744&&M<=64255},"Arabic Presentation Forms-A":function(M){return M>=64336&&M<=65023},"Vertical Forms":function(M){return M>=65040&&M<=65055},"CJK Compatibility Forms":function(M){return M>=65072&&M<=65103},"Small Form Variants":function(M){return M>=65104&&M<=65135},"Arabic Presentation Forms-B":function(M){return M>=65136&&M<=65279},"Halfwidth and Fullwidth Forms":function(M){return M>=65280&&M<=65519}};function Ea(M){for(var z=0,J=M;z<J.length;z+=1)if(Ki(J[z].charCodeAt(0)))return!0;return!1}function va(M){return!(Yr.Arabic(M)||Yr["Arabic Supplement"](M)||Yr["Arabic Extended-A"](M)||Yr["Arabic Presentation Forms-A"](M)||Yr["Arabic Presentation Forms-B"](M))}function Ki(M){return!(746!==M&&747!==M&&(M<4352||!(Yr["Bopomofo Extended"](M)||Yr.Bopomofo(M)||Yr["CJK Compatibility Forms"](M)&&!(M>=65097&&M<=65103)||Yr["CJK Compatibility Ideographs"](M)||Yr["CJK Compatibility"](M)||Yr["CJK Radicals Supplement"](M)||Yr["CJK Strokes"](M)||!(!Yr["CJK Symbols and Punctuation"](M)||M>=12296&&M<=12305||M>=12308&&M<=12319||12336===M)||Yr["CJK Unified Ideographs Extension A"](M)||Yr["CJK Unified Ideographs"](M)||Yr["Enclosed CJK Letters and Months"](M)||Yr["Hangul Compatibility Jamo"](M)||Yr["Hangul Jamo Extended-A"](M)||Yr["Hangul Jamo Extended-B"](M)||Yr["Hangul Jamo"](M)||Yr["Hangul Syllables"](M)||Yr.Hiragana(M)||Yr["Ideographic Description Characters"](M)||Yr.Kanbun(M)||Yr["Kangxi Radicals"](M)||Yr["Katakana Phonetic Extensions"](M)||Yr.Katakana(M)&&12540!==M||!(!Yr["Halfwidth and Fullwidth Forms"](M)||65288===M||65289===M||65293===M||M>=65306&&M<=65310||65339===M||65341===M||65343===M||M>=65371&&M<=65503||65507===M||M>=65512&&M<=65519)||!(!Yr["Small Form Variants"](M)||M>=65112&&M<=65118||M>=65123&&M<=65126)||Yr["Unified Canadian Aboriginal Syllabics"](M)||Yr["Unified Canadian Aboriginal Syllabics Extended"](M)||Yr["Vertical Forms"](M)||Yr["Yijing Hexagram Symbols"](M)||Yr["Yi Syllables"](M)||Yr["Yi Radicals"](M))))}function Ar(M){return!(Ki(M)||(z=M,Yr["Latin-1 Supplement"](z)&&(167===z||169===z||174===z||177===z||188===z||189===z||190===z||215===z||247===z)||Yr["General Punctuation"](z)&&(8214===z||8224===z||8225===z||8240===z||8241===z||8251===z||8252===z||8258===z||8263===z||8264===z||8265===z||8273===z)||Yr["Letterlike Symbols"](z)||Yr["Number Forms"](z)||Yr["Miscellaneous Technical"](z)&&(z>=8960&&z<=8967||z>=8972&&z<=8991||z>=8996&&z<=9e3||9003===z||z>=9085&&z<=9114||z>=9150&&z<=9165||9167===z||z>=9169&&z<=9179||z>=9186&&z<=9215)||Yr["Control Pictures"](z)&&9251!==z||Yr["Optical Character Recognition"](z)||Yr["Enclosed Alphanumerics"](z)||Yr["Geometric Shapes"](z)||Yr["Miscellaneous Symbols"](z)&&!(z>=9754&&z<=9759)||Yr["Miscellaneous Symbols and Arrows"](z)&&(z>=11026&&z<=11055||z>=11088&&z<=11097||z>=11192&&z<=11243)||Yr["CJK Symbols and Punctuation"](z)||Yr.Katakana(z)||Yr["Private Use Area"](z)||Yr["CJK Compatibility Forms"](z)||Yr["Small Form Variants"](z)||Yr["Halfwidth and Fullwidth Forms"](z)||8734===z||8756===z||8757===z||z>=9984&&z<=10087||z>=10102&&z<=10131||65532===z||65533===z));var z}function Di(M){return M>=1424&&M<=2303||Yr["Arabic Presentation Forms-A"](M)||Yr["Arabic Presentation Forms-B"](M)}function ea(M,z){return!(!z&&Di(M)||M>=2304&&M<=3583||M>=3840&&M<=4255||Yr.Khmer(M))}function mi(M){for(var z=0,J=M;z<J.length;z+=1)if(Di(J[z].charCodeAt(0)))return!0;return!1}var $a="deferred",Wo="loading",Fs="loaded",Js=null,la="unavailable",Vo=null,qs=function(M){M&&"string"==typeof M&&M.indexOf("NetworkError")>-1&&(la="error"),Js&&Js(M)};function ja(){Va.fire(new Pe("pluginStateChange",{pluginStatus:la,pluginURL:Vo}))}var Va=new Ne,So=function(){return la},so=function(){if(la!==$a||!Vo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");la=Wo,ja(),Vo&&Bt({url:Vo},function(M){M?qs(M):(la=Fs,ja())})},As={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return la===Fs||null!=As.applyArabicShaping},isLoading:function(){return la===Wo},setState:function(M){la=M.pluginStatus,Vo=M.pluginURL},isParsed:function(){return null!=As.applyArabicShaping&&null!=As.processBidirectionalText&&null!=As.processStyledBidirectionalText},getPluginURL:function(){return Vo}},Fa=function(M,z){this.zoom=M,z?(this.now=z.now,this.fadeDuration=z.fadeDuration,this.zoomHistory=z.zoomHistory,this.transition=z.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new wa,this.transition={})};Fa.prototype.isSupportedScript=function(M){return function(z,J){for(var se=0,ve=z;se<ve.length;se+=1)if(!ea(ve[se].charCodeAt(0),J))return!1;return!0}(M,As.isLoaded())},Fa.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Fa.prototype.getCrossfadeParameters=function(){var M=this.zoom,z=M-Math.floor(M),J=this.crossFadingFactor();return M>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:z+(1-z)*J}:{fromScale:.5,toScale:1,t:1-(1-J)*z}};var Ks=function(M,z){this.property=M,this.value=z,this.expression=function(J,se){if(Je(J))return new zn(J,se);if(dn(J)){var ve=Fn(J,se);if("error"===ve.result)throw new Error(ve.value.map(function(Fe){return Fe.key+": "+Fe.message}).join(", "));return ve.value}var Me=J;return"string"==typeof J&&"color"===se.type&&(Me=sn.parse(J)),{kind:"constant",evaluate:function(){return Me}}}(void 0===z?M.specification.default:z,M.specification)};Ks.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Ks.prototype.possiblyEvaluate=function(M,z,J){return this.property.possiblyEvaluate(this,M,z,J)};var yu=function(M){this.property=M,this.value=new Ks(M,void 0)};yu.prototype.transitioned=function(M,z){return new Uc(this.property,this.value,z,v({},M.transition,this.transition),M.now)},yu.prototype.untransitioned=function(){return new Uc(this.property,this.value,null,{},0)};var vu=function(M){this._properties=M,this._values=Object.create(M.defaultTransitionablePropertyValues)};vu.prototype.getValue=function(M){return A(this._values[M].value.value)},vu.prototype.setValue=function(M,z){this._values.hasOwnProperty(M)||(this._values[M]=new yu(this._values[M].property)),this._values[M].value=new Ks(this._values[M].property,null===z?void 0:A(z))},vu.prototype.getTransition=function(M){return A(this._values[M].transition)},vu.prototype.setTransition=function(M,z){this._values.hasOwnProperty(M)||(this._values[M]=new yu(this._values[M].property)),this._values[M].transition=A(z)||void 0},vu.prototype.serialize=function(){for(var M={},z=0,J=Object.keys(this._values);z<J.length;z+=1){var se=J[z],ve=this.getValue(se);void 0!==ve&&(M[se]=ve);var Me=this.getTransition(se);void 0!==Me&&(M[se+"-transition"]=Me)}return M},vu.prototype.transitioned=function(M,z){for(var J=new ns(this._properties),se=0,ve=Object.keys(this._values);se<ve.length;se+=1){var Me=ve[se];J._values[Me]=this._values[Me].transitioned(M,z._values[Me])}return J},vu.prototype.untransitioned=function(){for(var M=new ns(this._properties),z=0,J=Object.keys(this._values);z<J.length;z+=1){var se=J[z];M._values[se]=this._values[se].untransitioned()}return M};var Uc=function(M,z,J,se,ve){this.property=M,this.value=z,this.begin=ve+se.delay||0,this.end=this.begin+se.duration||0,M.specification.transition&&(se.delay||se.duration)&&(this.prior=J)};Uc.prototype.possiblyEvaluate=function(M,z,J){var se=M.now||0,ve=this.value.possiblyEvaluate(M,z,J),Me=this.prior;if(Me){if(se>this.end)return this.prior=null,ve;if(this.value.isDataDriven())return this.prior=null,ve;if(se<this.begin)return Me.possiblyEvaluate(M,z,J);var Fe=(se-this.begin)/(this.end-this.begin);return this.property.interpolate(Me.possiblyEvaluate(M,z,J),ve,function(Ze){if(Ze<=0)return 0;if(Ze>=1)return 1;var lt=Ze*Ze,Tt=lt*Ze;return 4*(Ze<.5?Tt:3*(Ze-lt)+Tt-.75)}(Fe))}return ve};var ns=function(M){this._properties=M,this._values=Object.create(M.defaultTransitioningPropertyValues)};ns.prototype.possiblyEvaluate=function(M,z,J){for(var se=new ql(this._properties),ve=0,Me=Object.keys(this._values);ve<Me.length;ve+=1){var Fe=Me[ve];se._values[Fe]=this._values[Fe].possiblyEvaluate(M,z,J)}return se},ns.prototype.hasTransition=function(){for(var M=0,z=Object.keys(this._values);M<z.length;M+=1)if(this._values[z[M]].prior)return!0;return!1};var lc=function(M){this._properties=M,this._values=Object.create(M.defaultPropertyValues)};lc.prototype.getValue=function(M){return A(this._values[M].value)},lc.prototype.setValue=function(M,z){this._values[M]=new Ks(this._values[M].property,null===z?void 0:A(z))},lc.prototype.serialize=function(){for(var M={},z=0,J=Object.keys(this._values);z<J.length;z+=1){var se=J[z],ve=this.getValue(se);void 0!==ve&&(M[se]=ve)}return M},lc.prototype.possiblyEvaluate=function(M,z,J){for(var se=new ql(this._properties),ve=0,Me=Object.keys(this._values);ve<Me.length;ve+=1){var Fe=Me[ve];se._values[Fe]=this._values[Fe].possiblyEvaluate(M,z,J)}return se};var ds=function(M,z,J){this.property=M,this.value=z,this.parameters=J};ds.prototype.isConstant=function(){return"constant"===this.value.kind},ds.prototype.constantOr=function(M){return"constant"===this.value.kind?this.value.value:M},ds.prototype.evaluate=function(M,z,J,se){return this.property.evaluate(this.value,this.parameters,M,z,J,se)};var ql=function(M){this._properties=M,this._values=Object.create(M.defaultPossiblyEvaluatedValues)};ql.prototype.get=function(M){return this._values[M]};var Gi=function(M){this.specification=M};Gi.prototype.possiblyEvaluate=function(M,z){return M.expression.evaluate(z)},Gi.prototype.interpolate=function(M,z,J){var se=Lr[this.specification.type];return se?se(M,z,J):M};var ia=function(M,z){this.specification=M,this.overrides=z};ia.prototype.possiblyEvaluate=function(M,z,J,se){return new ds(this,"constant"===M.expression.kind||"camera"===M.expression.kind?{kind:"constant",value:M.expression.evaluate(z,null,{},J,se)}:M.expression,z)},ia.prototype.interpolate=function(M,z,J){if("constant"!==M.value.kind||"constant"!==z.value.kind)return M;if(void 0===M.value.value||void 0===z.value.value)return new ds(this,{kind:"constant",value:void 0},M.parameters);var se=Lr[this.specification.type];return se?new ds(this,{kind:"constant",value:se(M.value.value,z.value.value,J)},M.parameters):M},ia.prototype.evaluate=function(M,z,J,se,ve,Me){return"constant"===M.kind?M.value:M.evaluate(z,J,se,ve,Me)};var Xu=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.possiblyEvaluate=function(J,se,ve,Me){if(void 0===J.value)return new ds(this,{kind:"constant",value:void 0},se);if("constant"===J.expression.kind){var Fe=J.expression.evaluate(se,null,{},ve,Me),Ze="resolvedImage"===J.property.specification.type&&"string"!=typeof Fe?Fe.name:Fe,lt=this._calculate(Ze,Ze,Ze,se);return new ds(this,{kind:"constant",value:lt},se)}if("camera"===J.expression.kind){var Tt=this._calculate(J.expression.evaluate({zoom:se.zoom-1}),J.expression.evaluate({zoom:se.zoom}),J.expression.evaluate({zoom:se.zoom+1}),se);return new ds(this,{kind:"constant",value:Tt},se)}return new ds(this,J.expression,se)},z.prototype.evaluate=function(J,se,ve,Me,Fe,Ze){if("source"===J.kind){var lt=J.evaluate(se,ve,Me,Fe,Ze);return this._calculate(lt,lt,lt,se)}return"composite"===J.kind?this._calculate(J.evaluate({zoom:Math.floor(se.zoom)-1},ve,Me),J.evaluate({zoom:Math.floor(se.zoom)},ve,Me),J.evaluate({zoom:Math.floor(se.zoom)+1},ve,Me),se):J.value},z.prototype._calculate=function(J,se,ve,Me){return Me.zoom>Me.zoomHistory.lastIntegerZoom?{from:J,to:se}:{from:ve,to:se}},z.prototype.interpolate=function(J){return J},z}(ia),wc=function(M){this.specification=M};wc.prototype.possiblyEvaluate=function(M,z,J,se){if(void 0!==M.value){if("constant"===M.expression.kind){var ve=M.expression.evaluate(z,null,{},J,se);return this._calculate(ve,ve,ve,z)}return this._calculate(M.expression.evaluate(new Fa(Math.floor(z.zoom-1),z)),M.expression.evaluate(new Fa(Math.floor(z.zoom),z)),M.expression.evaluate(new Fa(Math.floor(z.zoom+1),z)),z)}},wc.prototype._calculate=function(M,z,J,se){return se.zoom>se.zoomHistory.lastIntegerZoom?{from:M,to:z}:{from:J,to:z}},wc.prototype.interpolate=function(M){return M};var au=function(M){this.specification=M};au.prototype.possiblyEvaluate=function(M,z,J,se){return!!M.expression.evaluate(z,null,{},J,se)},au.prototype.interpolate=function(){return!1};var _l=function(M){for(var z in this.properties=M,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],M){var J=M[z];J.specification.overridable&&this.overridableProperties.push(z);var se=this.defaultPropertyValues[z]=new Ks(J,void 0),ve=this.defaultTransitionablePropertyValues[z]=new yu(J);this.defaultTransitioningPropertyValues[z]=ve.untransitioned(),this.defaultPossiblyEvaluatedValues[z]=se.possiblyEvaluate({})}};ur("DataDrivenProperty",ia),ur("DataConstantProperty",Gi),ur("CrossFadedDataDrivenProperty",Xu),ur("CrossFadedProperty",wc),ur("ColorRampProperty",au);var Ll=function(M){function z(J,se){if(M.call(this),this.id=J.id,this.type=J.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==J.type&&(this.metadata=(J=J).metadata,this.minzoom=J.minzoom,this.maxzoom=J.maxzoom,"background"!==J.type&&(this.source=J.source,this.sourceLayer=J["source-layer"],this.filter=J.filter),se.layout&&(this._unevaluatedLayout=new lc(se.layout)),se.paint)){for(var ve in this._transitionablePaint=new vu(se.paint),J.paint)this.setPaintProperty(ve,J.paint[ve],{validate:!1});for(var Me in J.layout)this.setLayoutProperty(Me,J.layout[Me],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ql(se.paint)}}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},z.prototype.getLayoutProperty=function(J){return"visibility"===J?this.visibility:this._unevaluatedLayout.getValue(J)},z.prototype.setLayoutProperty=function(J,se,ve){void 0===ve&&(ve={}),null!=se&&this._validate(Ir,"layers."+this.id+".layout."+J,J,se,ve)||("visibility"!==J?this._unevaluatedLayout.setValue(J,se):this.visibility=se)},z.prototype.getPaintProperty=function(J){return C(J,"-transition")?this._transitionablePaint.getTransition(J.slice(0,-"-transition".length)):this._transitionablePaint.getValue(J)},z.prototype.setPaintProperty=function(J,se,ve){if(void 0===ve&&(ve={}),null!=se&&this._validate(yr,"layers."+this.id+".paint."+J,J,se,ve))return!1;if(C(J,"-transition"))return this._transitionablePaint.setTransition(J.slice(0,-"-transition".length),se||void 0),!1;var Fe=this._transitionablePaint._values[J],Ze="cross-faded-data-driven"===Fe.property.specification["property-type"],lt=Fe.value.isDataDriven(),Tt=Fe.value;this._transitionablePaint.setValue(J,se),this._handleSpecialPaintPropertyUpdate(J);var Dt=this._transitionablePaint._values[J].value;return Dt.isDataDriven()||lt||Ze||this._handleOverridablePaintPropertyUpdate(J,Tt,Dt)},z.prototype._handleSpecialPaintPropertyUpdate=function(J){},z.prototype._handleOverridablePaintPropertyUpdate=function(J,se,ve){return!1},z.prototype.isHidden=function(J){return!!(this.minzoom&&J<this.minzoom)||!!(this.maxzoom&&J>=this.maxzoom)||"none"===this.visibility},z.prototype.updateTransitions=function(J){this._transitioningPaint=this._transitionablePaint.transitioned(J,this._transitioningPaint)},z.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},z.prototype.recalculate=function(J,se){J.getCrossfadeParameters&&(this._crossfadeParameters=J.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(J,void 0,se)),this.paint=this._transitioningPaint.possiblyEvaluate(J,void 0,se)},z.prototype.serialize=function(){var J={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(J.layout=J.layout||{},J.layout.visibility=this.visibility),P(J,function(se,ve){return!(void 0===se||"layout"===ve&&!Object.keys(se).length||"paint"===ve&&!Object.keys(se).length)})},z.prototype._validate=function(J,se,ve,Me,Fe){return void 0===Fe&&(Fe={}),(!Fe||!1!==Fe.validate)&&Br(this,J.call(hr,{key:se,layerType:this.type,objectKey:ve,value:Me,styleSpec:Ve,style:{glyphs:!0,sprite:!0}}))},z.prototype.is3D=function(){return!1},z.prototype.isTileClipped=function(){return!1},z.prototype.hasOffscreenPass=function(){return!1},z.prototype.resize=function(){},z.prototype.isStateDependent=function(){for(var J in this.paint._values){var se=this.paint.get(J);if(se instanceof ds&&Ts(se.property.specification)&&("source"===se.value.kind||"composite"===se.value.kind)&&se.value.isStateDependent)return!0}return!1},z}(Ne),Tc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ac=function(M,z){this._structArray=M,this._pos1=z*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ja=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ba(M,z){void 0===z&&(z=1);var J=0,se=0;return{members:M.map(function(ve){var Fe=Tc[ve.type].BYTES_PER_ELEMENT,Ze=J=xl(J,Math.max(z,Fe)),lt=ve.components||1;return se=Math.max(se,Fe),J+=Fe*lt,{name:ve.name,type:ve.type,components:lt,offset:Ze}}),size:xl(J,Math.max(se,z)),alignment:z}}function xl(M,z){return Math.ceil(M/z)*z}Ja.serialize=function(M,z){return M._trim(),z&&(M.isTransferred=!0,z.push(M.arrayBuffer)),{length:M.length,arrayBuffer:M.arrayBuffer}},Ja.deserialize=function(M){var z=Object.create(this.prototype);return z.arrayBuffer=M.arrayBuffer,z.length=M.length,z.capacity=M.arrayBuffer.byteLength/z.bytesPerElement,z._refreshViews(),z},Ja.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ja.prototype.clear=function(){this.length=0},Ja.prototype.resize=function(M){this.reserve(M),this.length=M},Ja.prototype.reserve=function(M){if(M>this.capacity){this.capacity=Math.max(M,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var z=this.uint8;this._refreshViews(),z&&this.uint8.set(z)}},Ja.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var _o=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se){var ve=this.length;return this.resize(ve+1),this.emplace(ve,J,se)},z.prototype.emplace=function(J,se,ve){var Me=2*J;return this.int16[Me+0]=se,this.int16[Me+1]=ve,J},z}(Ja);_o.prototype.bytesPerElement=4,ur("StructArrayLayout2i4",_o);var ps=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se,ve,Me){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,J,se,ve,Me)},z.prototype.emplace=function(J,se,ve,Me,Fe){var Ze=4*J;return this.int16[Ze+0]=se,this.int16[Ze+1]=ve,this.int16[Ze+2]=Me,this.int16[Ze+3]=Fe,J},z}(Ja);ps.prototype.bytesPerElement=8,ur("StructArrayLayout4i8",ps);var Ju=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se,ve,Me,Fe,Ze){var lt=this.length;return this.resize(lt+1),this.emplace(lt,J,se,ve,Me,Fe,Ze)},z.prototype.emplace=function(J,se,ve,Me,Fe,Ze,lt){var Tt=6*J;return this.int16[Tt+0]=se,this.int16[Tt+1]=ve,this.int16[Tt+2]=Me,this.int16[Tt+3]=Fe,this.int16[Tt+4]=Ze,this.int16[Tt+5]=lt,J},z}(Ja);Ju.prototype.bytesPerElement=12,ur("StructArrayLayout2i4i12",Ju);var Mc=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se,ve,Me,Fe,Ze){var lt=this.length;return this.resize(lt+1),this.emplace(lt,J,se,ve,Me,Fe,Ze)},z.prototype.emplace=function(J,se,ve,Me,Fe,Ze,lt){var Tt=4*J,Dt=8*J;return this.int16[Tt+0]=se,this.int16[Tt+1]=ve,this.uint8[Dt+4]=Me,this.uint8[Dt+5]=Fe,this.uint8[Dt+6]=Ze,this.uint8[Dt+7]=lt,J},z}(Ja);Mc.prototype.bytesPerElement=8,ur("StructArrayLayout2i4ub8",Mc);var uc=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt){var ln=this.length;return this.resize(ln+1),this.emplace(ln,J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt)},z.prototype.emplace=function(J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt,ln){var an=9*J,xn=18*J;return this.uint16[an+0]=se,this.uint16[an+1]=ve,this.uint16[an+2]=Me,this.uint16[an+3]=Fe,this.uint16[an+4]=Ze,this.uint16[an+5]=lt,this.uint16[an+6]=Tt,this.uint16[an+7]=Dt,this.uint8[xn+16]=Jt,this.uint8[xn+17]=ln,J},z}(Ja);uc.prototype.bytesPerElement=18,ur("StructArrayLayout8ui2ub18",uc);var kc=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt,ln,an){var xn=this.length;return this.resize(xn+1),this.emplace(xn,J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt,ln,an)},z.prototype.emplace=function(J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt,ln,an,xn){var On=12*J;return this.int16[On+0]=se,this.int16[On+1]=ve,this.int16[On+2]=Me,this.int16[On+3]=Fe,this.uint16[On+4]=Ze,this.uint16[On+5]=lt,this.uint16[On+6]=Tt,this.uint16[On+7]=Dt,this.int16[On+8]=Jt,this.int16[On+9]=ln,this.int16[On+10]=an,this.int16[On+11]=xn,J},z}(Ja);kc.prototype.bytesPerElement=24,ur("StructArrayLayout4i4ui4i24",kc);var Fu=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se,ve){var Me=this.length;return this.resize(Me+1),this.emplace(Me,J,se,ve)},z.prototype.emplace=function(J,se,ve,Me){var Fe=3*J;return this.float32[Fe+0]=se,this.float32[Fe+1]=ve,this.float32[Fe+2]=Me,J},z}(Ja);Fu.prototype.bytesPerElement=12,ur("StructArrayLayout3f12",Fu);var Dc=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J){var se=this.length;return this.resize(se+1),this.emplace(se,J)},z.prototype.emplace=function(J,se){return this.uint32[1*J+0]=se,J},z}(Ja);Dc.prototype.bytesPerElement=4,ur("StructArrayLayout1ul4",Dc);var Hc=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se,ve,Me,Fe,Ze,lt,Tt,Dt){var Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,J,se,ve,Me,Fe,Ze,lt,Tt,Dt)},z.prototype.emplace=function(J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt){var ln=10*J,an=5*J;return this.int16[ln+0]=se,this.int16[ln+1]=ve,this.int16[ln+2]=Me,this.int16[ln+3]=Fe,this.int16[ln+4]=Ze,this.int16[ln+5]=lt,this.uint32[an+3]=Tt,this.uint16[ln+8]=Dt,this.uint16[ln+9]=Jt,J},z}(Ja);Hc.prototype.bytesPerElement=20,ur("StructArrayLayout6i1ul2ui20",Hc);var ou=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se,ve,Me,Fe,Ze){var lt=this.length;return this.resize(lt+1),this.emplace(lt,J,se,ve,Me,Fe,Ze)},z.prototype.emplace=function(J,se,ve,Me,Fe,Ze,lt){var Tt=6*J;return this.int16[Tt+0]=se,this.int16[Tt+1]=ve,this.int16[Tt+2]=Me,this.int16[Tt+3]=Fe,this.int16[Tt+4]=Ze,this.int16[Tt+5]=lt,J},z}(Ja);ou.prototype.bytesPerElement=12,ur("StructArrayLayout2i2i2i12",ou);var Gc=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se,ve,Me,Fe){var Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,J,se,ve,Me,Fe)},z.prototype.emplace=function(J,se,ve,Me,Fe,Ze){var lt=4*J,Tt=8*J;return this.float32[lt+0]=se,this.float32[lt+1]=ve,this.float32[lt+2]=Me,this.int16[Tt+6]=Fe,this.int16[Tt+7]=Ze,J},z}(Ja);Gc.prototype.bytesPerElement=16,ur("StructArrayLayout2f1f2i16",Gc);var cc=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se,ve,Me){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,J,se,ve,Me)},z.prototype.emplace=function(J,se,ve,Me,Fe){var Ze=12*J,lt=3*J;return this.uint8[Ze+0]=se,this.uint8[Ze+1]=ve,this.float32[lt+1]=Me,this.float32[lt+2]=Fe,J},z}(Ja);cc.prototype.bytesPerElement=12,ur("StructArrayLayout2ub2f12",cc);var Qs=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se,ve){var Me=this.length;return this.resize(Me+1),this.emplace(Me,J,se,ve)},z.prototype.emplace=function(J,se,ve,Me){var Fe=3*J;return this.uint16[Fe+0]=se,this.uint16[Fe+1]=ve,this.uint16[Fe+2]=Me,J},z}(Ja);Qs.prototype.bytesPerElement=6,ur("StructArrayLayout3ui6",Qs);var Nu=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt,ln,an,xn,On,Xn,Yn,ar){var or=this.length;return this.resize(or+1),this.emplace(or,J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt,ln,an,xn,On,Xn,Yn,ar)},z.prototype.emplace=function(J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt,ln,an,xn,On,Xn,Yn,ar,or){var cr=24*J,Sr=12*J,Rr=48*J;return this.int16[cr+0]=se,this.int16[cr+1]=ve,this.uint16[cr+2]=Me,this.uint16[cr+3]=Fe,this.uint32[Sr+2]=Ze,this.uint32[Sr+3]=lt,this.uint32[Sr+4]=Tt,this.uint16[cr+10]=Dt,this.uint16[cr+11]=Jt,this.uint16[cr+12]=ln,this.float32[Sr+7]=an,this.float32[Sr+8]=xn,this.uint8[Rr+36]=On,this.uint8[Rr+37]=Xn,this.uint8[Rr+38]=Yn,this.uint32[Sr+10]=ar,this.int16[cr+22]=or,J},z}(Ja);Nu.prototype.bytesPerElement=48,ur("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Nu);var Ec=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt,ln,an,xn,On,Xn,Yn,ar,or,cr,Sr,Rr,si,ii,_i,Ui,Vi,Si,Zi){var Yi=this.length;return this.resize(Yi+1),this.emplace(Yi,J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt,ln,an,xn,On,Xn,Yn,ar,or,cr,Sr,Rr,si,ii,_i,Ui,Vi,Si,Zi)},z.prototype.emplace=function(J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt,ln,an,xn,On,Xn,Yn,ar,or,cr,Sr,Rr,si,ii,_i,Ui,Vi,Si,Zi,Yi){var Hi=34*J,Aa=17*J;return this.int16[Hi+0]=se,this.int16[Hi+1]=ve,this.int16[Hi+2]=Me,this.int16[Hi+3]=Fe,this.int16[Hi+4]=Ze,this.int16[Hi+5]=lt,this.int16[Hi+6]=Tt,this.int16[Hi+7]=Dt,this.uint16[Hi+8]=Jt,this.uint16[Hi+9]=ln,this.uint16[Hi+10]=an,this.uint16[Hi+11]=xn,this.uint16[Hi+12]=On,this.uint16[Hi+13]=Xn,this.uint16[Hi+14]=Yn,this.uint16[Hi+15]=ar,this.uint16[Hi+16]=or,this.uint16[Hi+17]=cr,this.uint16[Hi+18]=Sr,this.uint16[Hi+19]=Rr,this.uint16[Hi+20]=si,this.uint16[Hi+21]=ii,this.uint16[Hi+22]=_i,this.uint32[Aa+12]=Ui,this.float32[Aa+13]=Vi,this.float32[Aa+14]=Si,this.float32[Aa+15]=Zi,this.float32[Aa+16]=Yi,J},z}(Ja);Ec.prototype.bytesPerElement=68,ur("StructArrayLayout8i15ui1ul4f68",Ec);var ge=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J){var se=this.length;return this.resize(se+1),this.emplace(se,J)},z.prototype.emplace=function(J,se){return this.float32[1*J+0]=se,J},z}(Ja);ge.prototype.bytesPerElement=4,ur("StructArrayLayout1f4",ge);var O=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se,ve){var Me=this.length;return this.resize(Me+1),this.emplace(Me,J,se,ve)},z.prototype.emplace=function(J,se,ve,Me){var Fe=3*J;return this.int16[Fe+0]=se,this.int16[Fe+1]=ve,this.int16[Fe+2]=Me,J},z}(Ja);O.prototype.bytesPerElement=6,ur("StructArrayLayout3i6",O);var j=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se,ve){var Me=this.length;return this.resize(Me+1),this.emplace(Me,J,se,ve)},z.prototype.emplace=function(J,se,ve,Me){var Ze=4*J;return this.uint32[2*J+0]=se,this.uint16[Ze+2]=ve,this.uint16[Ze+3]=Me,J},z}(Ja);j.prototype.bytesPerElement=8,ur("StructArrayLayout1ul2ui8",j);var U=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se){var ve=this.length;return this.resize(ve+1),this.emplace(ve,J,se)},z.prototype.emplace=function(J,se,ve){var Me=2*J;return this.uint16[Me+0]=se,this.uint16[Me+1]=ve,J},z}(Ja);U.prototype.bytesPerElement=4,ur("StructArrayLayout2ui4",U);var $=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J){var se=this.length;return this.resize(se+1),this.emplace(se,J)},z.prototype.emplace=function(J,se){return this.uint16[1*J+0]=se,J},z}(Ja);$.prototype.bytesPerElement=2,ur("StructArrayLayout1ui2",$);var le=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se){var ve=this.length;return this.resize(ve+1),this.emplace(ve,J,se)},z.prototype.emplace=function(J,se,ve){var Me=2*J;return this.float32[Me+0]=se,this.float32[Me+1]=ve,J},z}(Ja);le.prototype.bytesPerElement=8,ur("StructArrayLayout2f8",le);var me=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,se,ve,Me){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,J,se,ve,Me)},z.prototype.emplace=function(J,se,ve,Me,Fe){var Ze=4*J;return this.float32[Ze+0]=se,this.float32[Ze+1]=ve,this.float32[Ze+2]=Me,this.float32[Ze+3]=Fe,J},z}(Ja);me.prototype.bytesPerElement=16,ur("StructArrayLayout4f16",me);var Ae=function(M){function z(){M.apply(this,arguments)}M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z;var J={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return J.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},J.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},J.x1.get=function(){return this._structArray.int16[this._pos2+2]},J.y1.get=function(){return this._structArray.int16[this._pos2+3]},J.x2.get=function(){return this._structArray.int16[this._pos2+4]},J.y2.get=function(){return this._structArray.int16[this._pos2+5]},J.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},J.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},J.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},J.anchorPoint.get=function(){return new f(this.anchorPointX,this.anchorPointY)},Object.defineProperties(z.prototype,J),z}(Ac);Ae.prototype.size=20;var De=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.get=function(J){return new Ae(this,J)},z}(Hc);ur("CollisionBoxArray",De);var Le=function(M){function z(){M.apply(this,arguments)}M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z;var J={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return J.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},J.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},J.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},J.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},J.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},J.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},J.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},J.segment.get=function(){return this._structArray.uint16[this._pos2+10]},J.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},J.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},J.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},J.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},J.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},J.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},J.placedOrientation.set=function(se){this._structArray.uint8[this._pos1+37]=se},J.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},J.hidden.set=function(se){this._structArray.uint8[this._pos1+38]=se},J.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},J.crossTileID.set=function(se){this._structArray.uint32[this._pos4+10]=se},J.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(z.prototype,J),z}(Ac);Le.prototype.size=48;var Qe=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.get=function(J){return new Le(this,J)},z}(Nu);ur("PlacedSymbolArray",Qe);var rt=function(M){function z(){M.apply(this,arguments)}M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z;var J={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return J.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},J.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},J.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},J.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},J.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},J.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},J.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},J.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},J.key.get=function(){return this._structArray.uint16[this._pos2+8]},J.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},J.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},J.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},J.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},J.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},J.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},J.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},J.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},J.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},J.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},J.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},J.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},J.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},J.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},J.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},J.crossTileID.set=function(se){this._structArray.uint32[this._pos4+12]=se},J.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},J.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},J.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},J.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(z.prototype,J),z}(Ac);rt.prototype.size=68;var dt=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.get=function(J){return new rt(this,J)},z}(Ec);ur("SymbolInstanceArray",dt);var Pt=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.getoffsetX=function(J){return this.float32[1*J+0]},z}(ge);ur("GlyphOffsetArray",Pt);var Nt=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.getx=function(J){return this.int16[3*J+0]},z.prototype.gety=function(J){return this.int16[3*J+1]},z.prototype.gettileUnitDistanceFromAnchor=function(J){return this.int16[3*J+2]},z}(O);ur("SymbolLineVertexArray",Nt);var Rt=function(M){function z(){M.apply(this,arguments)}M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z;var J={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return J.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},J.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},J.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(z.prototype,J),z}(Ac);Rt.prototype.size=8;var Ft=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.get=function(J){return new Rt(this,J)},z}(j);ur("FeatureIndexArray",Ft);var It=ba([{name:"a_pos",components:2,type:"Int16"}],4).members,Xt=function(M){void 0===M&&(M=[]),this.segments=M};function $t(M,z){return 256*(M=g(Math.floor(M),0,255))+g(Math.floor(z),0,255)}Xt.prototype.prepareSegment=function(M,z,J,se){var ve=this.segments[this.segments.length-1];return M>Xt.MAX_VERTEX_ARRAY_LENGTH&&D("Max vertices per segment is "+Xt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+M),(!ve||ve.vertexLength+M>Xt.MAX_VERTEX_ARRAY_LENGTH||ve.sortKey!==se)&&(ve={vertexOffset:z.length,primitiveOffset:J.length,vertexLength:0,primitiveLength:0},void 0!==se&&(ve.sortKey=se),this.segments.push(ve)),ve},Xt.prototype.get=function(){return this.segments},Xt.prototype.destroy=function(){for(var M=0,z=this.segments;M<z.length;M+=1){var J=z[M];for(var se in J.vaos)J.vaos[se].destroy()}},Xt.simpleSegment=function(M,z,J,se){return new Xt([{vertexOffset:M,primitiveOffset:z,vertexLength:J,primitiveLength:se,vaos:{},sortKey:0}])},Xt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ur("SegmentVector",Xt);var en=ba([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),bn=u(function(M){M.exports=function(z,J){var se,ve,Me,Fe,Ze,lt,Tt,Dt;for(ve=z.length-(se=3&z.length),Me=J,Ze=3432918353,lt=461845907,Dt=0;Dt<ve;)Tt=255&z.charCodeAt(Dt)|(255&z.charCodeAt(++Dt))<<8|(255&z.charCodeAt(++Dt))<<16|(255&z.charCodeAt(++Dt))<<24,++Dt,Me=27492+(65535&(Fe=5*(65535&(Me=(Me^=Tt=(65535&(Tt=(Tt=(65535&Tt)*Ze+(((Tt>>>16)*Ze&65535)<<16)&4294967295)<<15|Tt>>>17))*lt+(((Tt>>>16)*lt&65535)<<16)&4294967295)<<13|Me>>>19))+((5*(Me>>>16)&65535)<<16)&4294967295))+((58964+(Fe>>>16)&65535)<<16);switch(Tt=0,se){case 3:Tt^=(255&z.charCodeAt(Dt+2))<<16;case 2:Tt^=(255&z.charCodeAt(Dt+1))<<8;case 1:Me^=Tt=(65535&(Tt=(Tt=(65535&(Tt^=255&z.charCodeAt(Dt)))*Ze+(((Tt>>>16)*Ze&65535)<<16)&4294967295)<<15|Tt>>>17))*lt+(((Tt>>>16)*lt&65535)<<16)&4294967295}return Me^=z.length,Me=2246822507*(65535&(Me^=Me>>>16))+((2246822507*(Me>>>16)&65535)<<16)&4294967295,Me=3266489909*(65535&(Me^=Me>>>13))+((3266489909*(Me>>>16)&65535)<<16)&4294967295,(Me^=Me>>>16)>>>0}}),Cn=u(function(M){M.exports=function(z,J){for(var se,ve=z.length,Me=J^ve,Fe=0;ve>=4;)se=1540483477*(65535&(se=255&z.charCodeAt(Fe)|(255&z.charCodeAt(++Fe))<<8|(255&z.charCodeAt(++Fe))<<16|(255&z.charCodeAt(++Fe))<<24))+((1540483477*(se>>>16)&65535)<<16),Me=1540483477*(65535&Me)+((1540483477*(Me>>>16)&65535)<<16)^(se=1540483477*(65535&(se^=se>>>24))+((1540483477*(se>>>16)&65535)<<16)),ve-=4,++Fe;switch(ve){case 3:Me^=(255&z.charCodeAt(Fe+2))<<16;case 2:Me^=(255&z.charCodeAt(Fe+1))<<8;case 1:Me=1540483477*(65535&(Me^=255&z.charCodeAt(Fe)))+((1540483477*(Me>>>16)&65535)<<16)}return Me=1540483477*(65535&(Me^=Me>>>13))+((1540483477*(Me>>>16)&65535)<<16),(Me^=Me>>>15)>>>0}}),$n=bn,pr=Cn;$n.murmur3=bn,$n.murmur2=pr;var dr=function(){this.ids=[],this.positions=[],this.indexed=!1};dr.prototype.add=function(M,z,J,se){this.ids.push(wr(M)),this.positions.push(z,J,se)},dr.prototype.getPositions=function(M){for(var z=wr(M),J=0,se=this.ids.length-1;J<se;){var ve=J+se>>1;this.ids[ve]>=z?se=ve:J=ve+1}for(var Me=[];this.ids[J]===z;)Me.push({index:this.positions[3*J],start:this.positions[3*J+1],end:this.positions[3*J+2]}),J++;return Me},dr.serialize=function(M,z){var J=new Float64Array(M.ids),se=new Uint32Array(M.positions);return function ve(Me,Fe,Ze,lt){for(;Ze<lt;){for(var Tt=Me[Ze+lt>>1],Dt=Ze-1,Jt=lt+1;;){do{Dt++}while(Me[Dt]<Tt);do{Jt--}while(Me[Jt]>Tt);if(Dt>=Jt)break;fi(Me,Dt,Jt),fi(Fe,3*Dt,3*Jt),fi(Fe,3*Dt+1,3*Jt+1),fi(Fe,3*Dt+2,3*Jt+2)}Jt-Ze<lt-Jt?(ve(Me,Fe,Ze,Jt),Ze=Jt+1):(ve(Me,Fe,Jt+1,lt),lt=Jt)}}(J,se,0,J.length-1),z&&z.push(J.buffer,se.buffer),{ids:J,positions:se}},dr.deserialize=function(M){var z=new dr;return z.ids=M.ids,z.positions=M.positions,z.indexed=!0,z};var Er=Math.pow(2,53)-1;function wr(M){var z=+M;return!isNaN(z)&&z<=Er?z:$n(String(M))}function fi(M,z,J){var se=M[z];M[z]=M[J],M[J]=se}ur("FeaturePositionMap",dr);var Mi=function(M,z){this.gl=M.gl,this.location=z},Wi=function(M){function z(J,se){M.call(this,J,se),this.current=0}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.set=function(J){this.current!==J&&(this.current=J,this.gl.uniform1i(this.location,J))},z}(Mi),lr=function(M){function z(J,se){M.call(this,J,se),this.current=0}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.set=function(J){this.current!==J&&(this.current=J,this.gl.uniform1f(this.location,J))},z}(Mi),Ur=function(M){function z(J,se){M.call(this,J,se),this.current=[0,0]}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.set=function(J){J[0]===this.current[0]&&J[1]===this.current[1]||(this.current=J,this.gl.uniform2f(this.location,J[0],J[1]))},z}(Mi),ki=function(M){function z(J,se){M.call(this,J,se),this.current=[0,0,0]}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.set=function(J){J[0]===this.current[0]&&J[1]===this.current[1]&&J[2]===this.current[2]||(this.current=J,this.gl.uniform3f(this.location,J[0],J[1],J[2]))},z}(Mi),vi=function(M){function z(J,se){M.call(this,J,se),this.current=[0,0,0,0]}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.set=function(J){J[0]===this.current[0]&&J[1]===this.current[1]&&J[2]===this.current[2]&&J[3]===this.current[3]||(this.current=J,this.gl.uniform4f(this.location,J[0],J[1],J[2],J[3]))},z}(Mi),Oi=function(M){function z(J,se){M.call(this,J,se),this.current=sn.transparent}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.set=function(J){J.r===this.current.r&&J.g===this.current.g&&J.b===this.current.b&&J.a===this.current.a||(this.current=J,this.gl.uniform4f(this.location,J.r,J.g,J.b,J.a))},z}(Mi),$i=new Float32Array(16),da=function(M){function z(J,se){M.call(this,J,se),this.current=$i}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.set=function(J){if(J[12]!==this.current[12]||J[0]!==this.current[0])return this.current=J,void this.gl.uniformMatrix4fv(this.location,!1,J);for(var se=1;se<16;se++)if(J[se]!==this.current[se]){this.current=J,this.gl.uniformMatrix4fv(this.location,!1,J);break}},z}(Mi);function Ii(M){return[$t(255*M.r,255*M.g),$t(255*M.b,255*M.a)]}var sa=function(M,z,J){this.value=M,this.uniformNames=z.map(function(se){return"u_"+se}),this.type=J};sa.prototype.setUniform=function(M,z,J){M.set(J.constantOr(this.value))},sa.prototype.getBinding=function(M,z,J){return"color"===this.type?new Oi(M,z):new lr(M,z)};var ta=function(M,z){this.uniformNames=z.map(function(J){return"u_"+J}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};ta.prototype.setConstantPatternPositions=function(M,z){this.pixelRatioFrom=z.pixelRatio,this.pixelRatioTo=M.pixelRatio,this.patternFrom=z.tlbr,this.patternTo=M.tlbr},ta.prototype.setUniform=function(M,z,J,se){var ve="u_pattern_to"===se?this.patternTo:"u_pattern_from"===se?this.patternFrom:"u_pixel_ratio_to"===se?this.pixelRatioTo:"u_pixel_ratio_from"===se?this.pixelRatioFrom:null;ve&&M.set(ve)},ta.prototype.getBinding=function(M,z,J){return"u_pattern"===J.substr(0,9)?new vi(M,z):new lr(M,z)};var na=function(M,z,J,se){this.expression=M,this.type=J,this.maxValue=0,this.paintVertexAttributes=z.map(function(ve){return{name:"a_"+ve,type:"Float32",components:"color"===J?2:1,offset:0}}),this.paintVertexArray=new se};na.prototype.populatePaintArray=function(M,z,J,se,ve){var Me=this.paintVertexArray.length,Fe=this.expression.evaluate(new Fa(0),z,{},se,[],ve);this.paintVertexArray.resize(M),this._setPaintValue(Me,M,Fe)},na.prototype.updatePaintArray=function(M,z,J,se){var ve=this.expression.evaluate({zoom:0},J,se);this._setPaintValue(M,z,ve)},na.prototype._setPaintValue=function(M,z,J){if("color"===this.type)for(var se=Ii(J),ve=M;ve<z;ve++)this.paintVertexArray.emplace(ve,se[0],se[1]);else{for(var Me=M;Me<z;Me++)this.paintVertexArray.emplace(Me,J);this.maxValue=Math.max(this.maxValue,Math.abs(J))}},na.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},na.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var aa=function(M,z,J,se,ve,Me){this.expression=M,this.uniformNames=z.map(function(Fe){return"u_"+Fe+"_t"}),this.type=J,this.useIntegerZoom=se,this.zoom=ve,this.maxValue=0,this.paintVertexAttributes=z.map(function(Fe){return{name:"a_"+Fe,type:"Float32",components:"color"===J?4:2,offset:0}}),this.paintVertexArray=new Me};aa.prototype.populatePaintArray=function(M,z,J,se,ve){var Me=this.expression.evaluate(new Fa(this.zoom),z,{},se,[],ve),Fe=this.expression.evaluate(new Fa(this.zoom+1),z,{},se,[],ve),Ze=this.paintVertexArray.length;this.paintVertexArray.resize(M),this._setPaintValue(Ze,M,Me,Fe)},aa.prototype.updatePaintArray=function(M,z,J,se){var ve=this.expression.evaluate({zoom:this.zoom},J,se),Me=this.expression.evaluate({zoom:this.zoom+1},J,se);this._setPaintValue(M,z,ve,Me)},aa.prototype._setPaintValue=function(M,z,J,se){if("color"===this.type)for(var ve=Ii(J),Me=Ii(se),Fe=M;Fe<z;Fe++)this.paintVertexArray.emplace(Fe,ve[0],ve[1],Me[0],Me[1]);else{for(var Ze=M;Ze<z;Ze++)this.paintVertexArray.emplace(Ze,J,se);this.maxValue=Math.max(this.maxValue,Math.abs(J),Math.abs(se))}},aa.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},aa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},aa.prototype.setUniform=function(M,z){var J=this.useIntegerZoom?Math.floor(z.zoom):z.zoom,se=g(this.expression.interpolationFactor(J,this.zoom,this.zoom+1),0,1);M.set(se)},aa.prototype.getBinding=function(M,z,J){return new lr(M,z)};var ha=function(M,z,J,se,ve,Me){this.expression=M,this.type=z,this.useIntegerZoom=J,this.zoom=se,this.layerId=Me,this.zoomInPaintVertexArray=new ve,this.zoomOutPaintVertexArray=new ve};ha.prototype.populatePaintArray=function(M,z,J){var se=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(M),this.zoomOutPaintVertexArray.resize(M),this._setPaintValues(se,M,z.patterns&&z.patterns[this.layerId],J)},ha.prototype.updatePaintArray=function(M,z,J,se,ve){this._setPaintValues(M,z,J.patterns&&J.patterns[this.layerId],ve)},ha.prototype._setPaintValues=function(M,z,J,se){if(se&&J){var Ze=se[J.min],lt=se[J.mid],Tt=se[J.max];if(Ze&&lt&&Tt)for(var Dt=M;Dt<z;Dt++)this.zoomInPaintVertexArray.emplace(Dt,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],Ze.tl[0],Ze.tl[1],Ze.br[0],Ze.br[1],lt.pixelRatio,Ze.pixelRatio),this.zoomOutPaintVertexArray.emplace(Dt,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],Tt.tl[0],Tt.tl[1],Tt.br[0],Tt.br[1],lt.pixelRatio,Tt.pixelRatio)}},ha.prototype.upload=function(M){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=M.createVertexBuffer(this.zoomInPaintVertexArray,en.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=M.createVertexBuffer(this.zoomOutPaintVertexArray,en.members,this.expression.isStateDependent))},ha.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ca=function(M,z,J,se){this.binders={},this.layoutAttributes=se,this._buffers=[];var ve=[];for(var Me in M.paint._values)if(J(Me)){var Fe=M.paint.get(Me);if(Fe instanceof ds&&Ts(Fe.property.specification)){var Ze=Oo(Me,M.type),lt=Fe.value,Tt=Fe.property.specification.type,Dt=Fe.property.useIntegerZoom,Jt=Fe.property.specification["property-type"],ln="cross-faded"===Jt||"cross-faded-data-driven"===Jt;if("constant"===lt.kind)this.binders[Me]=ln?new ta(lt.value,Ze):new sa(lt.value,Ze,Tt),ve.push("/u_"+Me);else if("source"===lt.kind||ln){var an=No(Me,Tt,"source");this.binders[Me]=ln?new ha(lt,Tt,Dt,z,an,M.id):new na(lt,Ze,Tt,an),ve.push("/a_"+Me)}else{var xn=No(Me,Tt,"composite");this.binders[Me]=new aa(lt,Ze,Tt,Dt,z,xn),ve.push("/z_"+Me)}}}this.cacheKey=ve.sort().join("")};Ca.prototype.getMaxValue=function(M){var z=this.binders[M];return z instanceof na||z instanceof aa?z.maxValue:0},Ca.prototype.populatePaintArrays=function(M,z,J,se,ve){for(var Me in this.binders){var Fe=this.binders[Me];(Fe instanceof na||Fe instanceof aa||Fe instanceof ha)&&Fe.populatePaintArray(M,z,J,se,ve)}},Ca.prototype.setConstantPatternPositions=function(M,z){for(var J in this.binders){var se=this.binders[J];se instanceof ta&&se.setConstantPatternPositions(M,z)}},Ca.prototype.updatePaintArrays=function(M,z,J,se,ve){var Me=!1;for(var Fe in M)for(var Ze=0,lt=z.getPositions(Fe);Ze<lt.length;Ze+=1){var Tt=lt[Ze],Dt=J.feature(Tt.index);for(var Jt in this.binders){var ln=this.binders[Jt];if((ln instanceof na||ln instanceof aa||ln instanceof ha)&&!0===ln.expression.isStateDependent){var an=se.paint.get(Jt);ln.expression=an.value,ln.updatePaintArray(Tt.start,Tt.end,Dt,M[Fe],ve),Me=!0}}}return Me},Ca.prototype.defines=function(){var M=[];for(var z in this.binders){var J=this.binders[z];(J instanceof sa||J instanceof ta)&&M.push.apply(M,J.uniformNames.map(function(se){return"#define HAS_UNIFORM_"+se}))}return M},Ca.prototype.getPaintVertexBuffers=function(){return this._buffers},Ca.prototype.getUniforms=function(M,z){var J=[];for(var se in this.binders){var ve=this.binders[se];if(ve instanceof sa||ve instanceof ta||ve instanceof aa)for(var Me=0,Fe=ve.uniformNames;Me<Fe.length;Me+=1){var Ze=Fe[Me];if(z[Ze]){var lt=ve.getBinding(M,z[Ze],Ze);J.push({name:Ze,property:se,binding:lt})}}}return J},Ca.prototype.setUniforms=function(M,z,J,se){for(var ve=0,Me=z;ve<Me.length;ve+=1){var Fe=Me[ve],Ze=Fe.name,lt=Fe.property;this.binders[lt].setUniform(Fe.binding,se,J.get(lt),Ze)}},Ca.prototype.updatePaintBuffers=function(M){for(var z in this._buffers=[],this.binders){var J=this.binders[z];if(M&&J instanceof ha){var se=2===M.fromScale?J.zoomInPaintVertexBuffer:J.zoomOutPaintVertexBuffer;se&&this._buffers.push(se)}else(J instanceof na||J instanceof aa)&&J.paintVertexBuffer&&this._buffers.push(J.paintVertexBuffer)}},Ca.prototype.upload=function(M){for(var z in this.binders){var J=this.binders[z];(J instanceof na||J instanceof aa||J instanceof ha)&&J.upload(M)}this.updatePaintBuffers()},Ca.prototype.destroy=function(){for(var M in this.binders){var z=this.binders[M];(z instanceof na||z instanceof aa||z instanceof ha)&&z.destroy()}};var fo=function(M,z,J,se){void 0===se&&(se=function(){return!0}),this.programConfigurations={};for(var ve=0,Me=z;ve<Me.length;ve+=1){var Fe=Me[ve];this.programConfigurations[Fe.id]=new Ca(Fe,J,se,M)}this.needsUpload=!1,this._featureMap=new dr,this._bufferOffset=0};function Oo(M,z){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[M]||[M.replace(z+"-","").replace(/-/g,"_")]}function No(M,z,J){var ve={"line-pattern":{source:uc,composite:uc},"fill-pattern":{source:uc,composite:uc},"fill-extrusion-pattern":{source:uc,composite:uc}}[M];return ve&&ve[J]||{color:{source:le,composite:me},number:{source:ge,composite:le}}[z][J]}fo.prototype.populatePaintArrays=function(M,z,J,se,ve,Me){for(var Fe in this.programConfigurations)this.programConfigurations[Fe].populatePaintArrays(M,z,se,ve,Me);void 0!==z.id&&this._featureMap.add(z.id,J,this._bufferOffset,M),this._bufferOffset=M,this.needsUpload=!0},fo.prototype.updatePaintArrays=function(M,z,J,se){for(var ve=0,Me=J;ve<Me.length;ve+=1){var Fe=Me[ve];this.needsUpload=this.programConfigurations[Fe.id].updatePaintArrays(M,this._featureMap,z,Fe,se)||this.needsUpload}},fo.prototype.get=function(M){return this.programConfigurations[M]},fo.prototype.upload=function(M){if(this.needsUpload){for(var z in this.programConfigurations)this.programConfigurations[z].upload(M);this.needsUpload=!1}},fo.prototype.destroy=function(){for(var M in this.programConfigurations)this.programConfigurations[M].destroy()},ur("ConstantBinder",sa),ur("CrossFadedConstantBinder",ta),ur("SourceExpressionBinder",na),ur("CrossFadedCompositeBinder",ha),ur("CompositeExpressionBinder",aa),ur("ProgramConfiguration",Ca,{omit:["_buffers"]}),ur("ProgramConfigurationSet",fo);var wo=(15,{min:-1*Math.pow(2,14),max:Math.pow(2,14)-1});function $o(M){for(var z=8192/M.extent,J=M.loadGeometry(),se=0;se<J.length;se++)for(var ve=J[se],Me=0;Me<ve.length;Me++){var Fe=ve[Me];Fe.x=Math.round(Fe.x*z),Fe.y=Math.round(Fe.y*z),(Fe.x<wo.min||Fe.x>wo.max||Fe.y<wo.min||Fe.y>wo.max)&&(D("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Fe.x=g(Fe.x,wo.min,wo.max),Fe.y=g(Fe.y,wo.min,wo.max))}return J}function wl(M,z,J,se,ve){M.emplaceBack(2*z+(se+1)/2,2*J+(ve+1)/2)}var Ns=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new _o,this.indexArray=new Qs,this.segments=new Xt,this.programConfigurations=new fo(It,M.layers,M.zoom),this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function Wl(M,z){for(var J=0;J<M.length;J++)if(zu(z,M[J]))return!0;for(var se=0;se<z.length;se++)if(zu(M,z[se]))return!0;return!!yf(M,z)}function fc(M,z,J){return!!zu(M,z)||!!Tl(z,M,J)}function Ta(M,z){if(1===M.length)return Lh(z,M[0]);for(var J=0;J<z.length;J++)for(var se=z[J],ve=0;ve<se.length;ve++)if(zu(M,se[ve]))return!0;for(var Me=0;Me<M.length;Me++)if(Lh(z,M[Me]))return!0;for(var Fe=0;Fe<z.length;Fe++)if(yf(M,z[Fe]))return!0;return!1}function uh(M,z,J){if(M.length>1){if(yf(M,z))return!0;for(var se=0;se<z.length;se++)if(Tl(z[se],M,J))return!0}for(var ve=0;ve<M.length;ve++)if(Tl(M[ve],z,J))return!0;return!1}function yf(M,z){if(0===M.length||0===z.length)return!1;for(var J=0;J<M.length-1;J++)for(var se=M[J],ve=M[J+1],Me=0;Me<z.length-1;Me++)if(ch(se,ve,z[Me],z[Me+1]))return!0;return!1}function ch(M,z,J,se){return R(M,J,se)!==R(z,J,se)&&R(M,z,J)!==R(M,z,se)}function Tl(M,z,J){var se=J*J;if(1===z.length)return M.distSqr(z[0])<se;for(var ve=1;ve<z.length;ve++)if(Vf(M,z[ve-1],z[ve])<se)return!0;return!1}function Vf(M,z,J){var se=z.distSqr(J);if(0===se)return M.distSqr(z);var ve=((M.x-z.x)*(J.x-z.x)+(M.y-z.y)*(J.y-z.y))/se;return M.distSqr(ve<0?z:ve>1?J:J.sub(z)._mult(ve)._add(z))}function Lh(M,z){for(var J,se,ve,Me=!1,Fe=0;Fe<M.length;Fe++)for(var Ze=0,lt=(J=M[Fe]).length-1;Ze<J.length;lt=Ze++)(se=J[Ze]).y>z.y!=(ve=J[lt]).y>z.y&&z.x<(ve.x-se.x)*(z.y-se.y)/(ve.y-se.y)+se.x&&(Me=!Me);return Me}function zu(M,z){for(var J=!1,se=0,ve=M.length-1;se<M.length;ve=se++){var Me=M[se],Fe=M[ve];Me.y>z.y!=Fe.y>z.y&&z.x<(Fe.x-Me.x)*(z.y-Me.y)/(Fe.y-Me.y)+Me.x&&(J=!J)}return J}function Rh(M,z,J){var se=J[0],ve=J[2];if(M.x<se.x&&z.x<se.x||M.x>ve.x&&z.x>ve.x||M.y<se.y&&z.y<se.y||M.y>ve.y&&z.y>ve.y)return!1;var Me=R(M,z,J[0]);return Me!==R(M,z,J[1])||Me!==R(M,z,J[2])||Me!==R(M,z,J[3])}function gs(M,z,J){var se=z.paint.get(M).value;return"constant"===se.kind?se.value:J.programConfigurations.get(z.id).getMaxValue(M)}function Rl(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function Fl(M,z,J,se,ve){if(!z[0]&&!z[1])return M;var Me=f.convert(z)._mult(ve);"viewport"===J&&Me._rotate(-se);for(var Fe=[],Ze=0;Ze<M.length;Ze++)Fe.push(M[Ze].sub(Me));return Fe}Ns.prototype.populate=function(M,z,J){var se=this.layers[0],ve=[],Me=null;"circle"===se.type&&(Me=se.layout.get("circle-sort-key"));for(var Fe=0,Ze=M;Fe<Ze.length;Fe+=1){var lt=Ze[Fe],Tt=lt.feature,Dt=lt.id,Jt=lt.index,ln=lt.sourceLayerIndex,an=this.layers[0]._featureFilter.needGeometry,xn={type:Tt.type,id:Dt,properties:Tt.properties,geometry:an?$o(Tt):[]};if(this.layers[0]._featureFilter.filter(new Fa(this.zoom),xn,J)){an||(xn.geometry=$o(Tt));var On=Me?Me.evaluate(xn,{},J):void 0;ve.push({id:Dt,properties:Tt.properties,type:Tt.type,sourceLayerIndex:ln,index:Jt,geometry:xn.geometry,patterns:{},sortKey:On})}}Me&&ve.sort(function(_i,Ui){return _i.sortKey-Ui.sortKey});for(var Yn=0,ar=ve;Yn<ar.length;Yn+=1){var or=ar[Yn],Sr=or.geometry,Rr=or.index,si=or.sourceLayerIndex,ii=M[Rr].feature;this.addFeature(or,Sr,Rr,J),z.featureIndex.insert(ii,Sr,Rr,si,this.index)}},Ns.prototype.update=function(M,z,J){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,z,this.stateDependentLayers,J)},Ns.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ns.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ns.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,It),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Ns.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ns.prototype.addFeature=function(M,z,J,se){for(var ve=0,Me=z;ve<Me.length;ve+=1)for(var Fe=0,Ze=Me[ve];Fe<Ze.length;Fe+=1){var lt=Ze[Fe],Tt=lt.x,Dt=lt.y;if(!(Tt<0||Tt>=8192||Dt<0||Dt>=8192)){var Jt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,M.sortKey),ln=Jt.vertexLength;wl(this.layoutVertexArray,Tt,Dt,-1,-1),wl(this.layoutVertexArray,Tt,Dt,1,-1),wl(this.layoutVertexArray,Tt,Dt,1,1),wl(this.layoutVertexArray,Tt,Dt,-1,1),this.indexArray.emplaceBack(ln,ln+1,ln+2),this.indexArray.emplaceBack(ln,ln+3,ln+2),Jt.vertexLength+=4,Jt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,J,{},se)},ur("CircleBucket",Ns,{omit:["layers"]});var qc=new _l({"circle-sort-key":new ia(Ve.layout_circle["circle-sort-key"])}),by={paint:new _l({"circle-radius":new ia(Ve.paint_circle["circle-radius"]),"circle-color":new ia(Ve.paint_circle["circle-color"]),"circle-blur":new ia(Ve.paint_circle["circle-blur"]),"circle-opacity":new ia(Ve.paint_circle["circle-opacity"]),"circle-translate":new Gi(Ve.paint_circle["circle-translate"]),"circle-translate-anchor":new Gi(Ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Gi(Ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Gi(Ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ia(Ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ia(Ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ia(Ve.paint_circle["circle-stroke-opacity"])}),layout:qc},Io="undefined"!=typeof Float32Array?Float32Array:Array;function Uf(M){return M[0]=1,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=1,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=1,M[11]=0,M[12]=0,M[13]=0,M[14]=0,M[15]=1,M}function Wc(M,z,J){var se=z[0],ve=z[1],Me=z[2],Fe=z[3],Ze=z[4],lt=z[5],Tt=z[6],Dt=z[7],Jt=z[8],ln=z[9],an=z[10],xn=z[11],On=z[12],Xn=z[13],Yn=z[14],ar=z[15],or=J[0],cr=J[1],Sr=J[2],Rr=J[3];return M[0]=or*se+cr*Ze+Sr*Jt+Rr*On,M[1]=or*ve+cr*lt+Sr*ln+Rr*Xn,M[2]=or*Me+cr*Tt+Sr*an+Rr*Yn,M[3]=or*Fe+cr*Dt+Sr*xn+Rr*ar,M[4]=(or=J[4])*se+(cr=J[5])*Ze+(Sr=J[6])*Jt+(Rr=J[7])*On,M[5]=or*ve+cr*lt+Sr*ln+Rr*Xn,M[6]=or*Me+cr*Tt+Sr*an+Rr*Yn,M[7]=or*Fe+cr*Dt+Sr*xn+Rr*ar,M[8]=(or=J[8])*se+(cr=J[9])*Ze+(Sr=J[10])*Jt+(Rr=J[11])*On,M[9]=or*ve+cr*lt+Sr*ln+Rr*Xn,M[10]=or*Me+cr*Tt+Sr*an+Rr*Yn,M[11]=or*Fe+cr*Dt+Sr*xn+Rr*ar,M[12]=(or=J[12])*se+(cr=J[13])*Ze+(Sr=J[14])*Jt+(Rr=J[15])*On,M[13]=or*ve+cr*lt+Sr*ln+Rr*Xn,M[14]=or*Me+cr*Tt+Sr*an+Rr*Yn,M[15]=or*Fe+cr*Dt+Sr*xn+Rr*ar,M}Math.hypot||(Math.hypot=function(){for(var M=arguments,z=0,J=arguments.length;J--;)z+=M[J]*M[J];return Math.sqrt(z)});var $c,z,_y=Wc;function Cc(M,z,J){var se=z[0],ve=z[1],Me=z[2],Fe=z[3];return M[0]=J[0]*se+J[4]*ve+J[8]*Me+J[12]*Fe,M[1]=J[1]*se+J[5]*ve+J[9]*Me+J[13]*Fe,M[2]=J[2]*se+J[6]*ve+J[10]*Me+J[14]*Fe,M[3]=J[3]*se+J[7]*ve+J[11]*Me+J[15]*Fe,M}$c=new Io(3),Io!=Float32Array&&($c[0]=0,$c[1]=0,$c[2]=0),z=new Io(4),Io!=Float32Array&&(z[0]=0,z[1]=0,z[2]=0,z[3]=0);var Hf=(function(){var z=new Io(2);Io!=Float32Array&&(z[0]=0,z[1]=0)}(),function(M){function z(J){M.call(this,J,by)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.createBucket=function(J){return new Ns(J)},z.prototype.queryRadius=function(J){var se=J;return gs("circle-radius",this,se)+gs("circle-stroke-width",this,se)+Rl(this.paint.get("circle-translate"))},z.prototype.queryIntersectsFeature=function(J,se,ve,Me,Fe,Ze,lt,Tt){for(var Dt=Fl(J,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ze.angle,lt),Jt=this.paint.get("circle-radius").evaluate(se,ve)+this.paint.get("circle-stroke-width").evaluate(se,ve),ln="map"===this.paint.get("circle-pitch-alignment"),an=ln?Dt:function(si,ii){return si.map(function(_i){return gg(_i,ii)})}(Dt,Tt),xn=ln?Jt*lt:Jt,On=0,Xn=Me;On<Xn.length;On+=1)for(var Yn=0,ar=Xn[On];Yn<ar.length;Yn+=1){var or=ar[Yn],cr=ln?or:gg(or,Tt),Sr=xn,Rr=Cc([],[or.x,or.y,0,1],Tt);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Sr*=Rr[3]/Ze.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Sr*=Ze.cameraToCenterDistance/Rr[3]),fc(an,cr,Sr))return!0}return!1},z}(Ll));function gg(M,z){var J=Cc([],[M.x,M.y,0,1],z);return new f(J[0]/J[3],J[1]/J[3])}var xy=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z}(Ns);function mg(M,z,J,se){var ve=z.width,Me=z.height;if(se){if(se instanceof Uint8ClampedArray)se=new Uint8Array(se.buffer);else if(se.length!==ve*Me*J)throw new RangeError("mismatched image size")}else se=new Uint8Array(ve*Me*J);return M.width=ve,M.height=Me,M.data=se,M}function db(M,z,J){var se=z.width,ve=z.height;if(se!==M.width||ve!==M.height){var Me=mg({},{width:se,height:ve},J);wy(M,Me,{x:0,y:0},{x:0,y:0},{width:Math.min(M.width,se),height:Math.min(M.height,ve)},J),M.width=se,M.height=ve,M.data=Me.data}}function wy(M,z,J,se,ve,Me){if(0===ve.width||0===ve.height)return z;if(ve.width>M.width||ve.height>M.height||J.x>M.width-ve.width||J.y>M.height-ve.height)throw new RangeError("out of range source coordinates for image copy");if(ve.width>z.width||ve.height>z.height||se.x>z.width-ve.width||se.y>z.height-ve.height)throw new RangeError("out of range destination coordinates for image copy");for(var Fe=M.data,Ze=z.data,lt=0;lt<ve.height;lt++)for(var Tt=((J.y+lt)*M.width+J.x)*Me,Dt=((se.y+lt)*z.width+se.x)*Me,Jt=0;Jt<ve.width*Me;Jt++)Ze[Dt+Jt]=Fe[Tt+Jt];return z}ur("HeatmapBucket",xy,{omit:["layers"]});var Gf=function(M,z){mg(this,M,1,z)};Gf.prototype.resize=function(M){db(this,M,1)},Gf.prototype.clone=function(){return new Gf({width:this.width,height:this.height},new Uint8Array(this.data))},Gf.copy=function(M,z,J,se,ve){wy(M,z,J,se,ve,1)};var ms=function(M,z){mg(this,M,4,z)};ms.prototype.resize=function(M){db(this,M,4)},ms.prototype.replace=function(M,z){z?this.data.set(M):this.data=M instanceof Uint8ClampedArray?new Uint8Array(M.buffer):M},ms.prototype.clone=function(){return new ms({width:this.width,height:this.height},new Uint8Array(this.data))},ms.copy=function(M,z,J,se,ve){wy(M,z,J,se,ve,4)},ur("AlphaImage",Gf),ur("RGBAImage",ms);var yg={paint:new _l({"heatmap-radius":new ia(Ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ia(Ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Gi(Ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new au(Ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Gi(Ve.paint_heatmap["heatmap-opacity"])})};function hh(M,z){for(var J=new Uint8Array(1024),se={},ve=0,Me=0;ve<256;ve++,Me+=4){se[z]=ve/255;var Fe=M.evaluate(se);J[Me+0]=Math.floor(255*Fe.r/Fe.a),J[Me+1]=Math.floor(255*Fe.g/Fe.a),J[Me+2]=Math.floor(255*Fe.b/Fe.a),J[Me+3]=Math.floor(255*Fe.a)}return new ms({width:256,height:1},J)}var Sw=function(M){function z(J){M.call(this,J,yg),this._updateColorRamp()}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.createBucket=function(J){return new xy(J)},z.prototype._handleSpecialPaintPropertyUpdate=function(J){"heatmap-color"===J&&this._updateColorRamp()},z.prototype._updateColorRamp=function(){this.colorRamp=hh(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},z.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},z}(Ll),Ty={paint:new _l({"hillshade-illumination-direction":new Gi(Ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Gi(Ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Gi(Ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Gi(Ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Gi(Ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Gi(Ve.paint_hillshade["hillshade-accent-color"])})},pb=function(M){function z(J){M.call(this,J,Ty)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},z}(Ll),Ay=ba([{name:"a_pos",components:2,type:"Int16"}],4).members,vg=Bp,gb=Bp;function Bp(M,z,J){J=J||2;var se,ve,Me,Fe,Ze,lt,Tt,Dt=z&&z.length,Jt=Dt?z[0]*J:M.length,ln=Fh(M,0,Jt,J,!0),an=[];if(!ln||ln.next===ln.prev)return an;if(Dt&&(ln=function(On,Xn,Yn,ar){var or,cr,si,ii=[];for(or=0,cr=Xn.length;or<cr;or++)(si=Fh(On,Xn[or]*ar,or<cr-1?Xn[or+1]*ar:On.length,ar,!1))===si.next&&(si.steiner=!0),ii.push(Pw(si));for(ii.sort(mb),or=0;or<ii.length;or++)yb(ii[or],Yn),Yn=Yc(Yn,Yn.next);return Yn}(M,z,ln,J)),M.length>80*J){se=Me=M[0],ve=Fe=M[1];for(var xn=J;xn<Jt;xn+=J)(Ze=M[xn])<se&&(se=Ze),(lt=M[xn+1])<ve&&(ve=lt),Ze>Me&&(Me=Ze),lt>Fe&&(Fe=lt);Tt=0!==(Tt=Math.max(Me-se,Fe-ve))?1/Tt:0}return qf(ln,an,J,se,ve,Tt),an}function Fh(M,z,J,se,ve){var Me,Fe;if(ve===ky(M,z,J,se)>0)for(Me=z;Me<J;Me+=se)Fe=My(Me,M[Me],M[Me+1],Fe);else for(Me=J-se;Me>=z;Me-=se)Fe=My(Me,M[Me],M[Me+1],Fe);return Fe&&jp(Fe,Fe.next)&&(Bh(Fe),Fe=Fe.next),Fe}function Yc(M,z){if(!M)return M;z||(z=M);var J,se=M;do{if(J=!1,se.steiner||!jp(se,se.next)&&0!==ys(se.prev,se,se.next))se=se.next;else{if(Bh(se),(se=z=se.prev)===se.next)break;J=!0}}while(J||se!==z);return z}function qf(M,z,J,se,ve,Me,Fe){if(M){!Fe&&Me&&function(Dt,Jt,ln,an){var xn=Dt;do{null===xn.z&&(xn.z=Hd(xn.x,xn.y,Jt,ln,an)),xn.prevZ=xn.prev,xn.nextZ=xn.next,xn=xn.next}while(xn!==Dt);xn.prevZ.nextZ=null,xn.prevZ=null,function(On){var Xn,Yn,ar,or,cr,Sr,Rr,si,ii=1;do{for(Yn=On,On=null,cr=null,Sr=0;Yn;){for(Sr++,ar=Yn,Rr=0,Xn=0;Xn<ii&&(Rr++,ar=ar.nextZ);Xn++);for(si=ii;Rr>0||si>0&&ar;)0!==Rr&&(0===si||!ar||Yn.z<=ar.z)?(or=Yn,Yn=Yn.nextZ,Rr--):(or=ar,ar=ar.nextZ,si--),cr?cr.nextZ=or:On=or,or.prevZ=cr,cr=or;Yn=ar}cr.nextZ=null,ii*=2}while(Sr>1)}(xn)}(M,se,ve,Me);for(var Ze,lt,Tt=M;M.prev!==M.next;)if(Ze=M.prev,lt=M.next,Me?Ud(M,se,ve,Me):Iw(M))z.push(Ze.i/J),z.push(M.i/J),z.push(lt.i/J),Bh(M),M=lt.next,Tt=lt.next;else if((M=lt)===Tt){Fe?1===Fe?qf(M=bg(Yc(M),z,J),z,J,se,ve,Me,2):2===Fe&&Nh(M,z,J,se,ve,Me):qf(Yc(M),z,J,se,ve,Me,1);break}}}function Iw(M){var z=M.prev,J=M,se=M.next;if(ys(z,J,se)>=0)return!1;for(var ve=M.next.next;ve!==M.prev;){if(Wf(z.x,z.y,J.x,J.y,se.x,se.y,ve.x,ve.y)&&ys(ve.prev,ve,ve.next)>=0)return!1;ve=ve.next}return!0}function Ud(M,z,J,se){var ve=M.prev,Me=M,Fe=M.next;if(ys(ve,Me,Fe)>=0)return!1;for(var Tt=ve.x>Me.x?ve.x>Fe.x?ve.x:Fe.x:Me.x>Fe.x?Me.x:Fe.x,Dt=ve.y>Me.y?ve.y>Fe.y?ve.y:Fe.y:Me.y>Fe.y?Me.y:Fe.y,Jt=Hd(ve.x<Me.x?ve.x<Fe.x?ve.x:Fe.x:Me.x<Fe.x?Me.x:Fe.x,ve.y<Me.y?ve.y<Fe.y?ve.y:Fe.y:Me.y<Fe.y?Me.y:Fe.y,z,J,se),ln=Hd(Tt,Dt,z,J,se),an=M.prevZ,xn=M.nextZ;an&&an.z>=Jt&&xn&&xn.z<=ln;){if(an!==M.prev&&an!==M.next&&Wf(ve.x,ve.y,Me.x,Me.y,Fe.x,Fe.y,an.x,an.y)&&ys(an.prev,an,an.next)>=0||(an=an.prevZ,xn!==M.prev&&xn!==M.next&&Wf(ve.x,ve.y,Me.x,Me.y,Fe.x,Fe.y,xn.x,xn.y)&&ys(xn.prev,xn,xn.next)>=0))return!1;xn=xn.nextZ}for(;an&&an.z>=Jt;){if(an!==M.prev&&an!==M.next&&Wf(ve.x,ve.y,Me.x,Me.y,Fe.x,Fe.y,an.x,an.y)&&ys(an.prev,an,an.next)>=0)return!1;an=an.prevZ}for(;xn&&xn.z<=ln;){if(xn!==M.prev&&xn!==M.next&&Wf(ve.x,ve.y,Me.x,Me.y,Fe.x,Fe.y,xn.x,xn.y)&&ys(xn.prev,xn,xn.next)>=0)return!1;xn=xn.nextZ}return!0}function bg(M,z,J){var se=M;do{var ve=se.prev,Me=se.next.next;!jp(ve,Me)&&Hr(ve,se,se.next,Me)&&Sc(ve,Me)&&Sc(Me,ve)&&(z.push(ve.i/J),z.push(se.i/J),z.push(Me.i/J),Bh(se),Bh(se.next),se=M=Me),se=se.next}while(se!==M);return Yc(se)}function Nh(M,z,J,se,ve,Me){var Fe=M;do{for(var Ze=Fe.next.next;Ze!==Fe.prev;){if(Fe.i!==Ze.i&&Gd(Fe,Ze)){var lt=zh(Fe,Ze);return Fe=Yc(Fe,Fe.next),lt=Yc(lt,lt.next),qf(Fe,z,J,se,ve,Me),void qf(lt,z,J,se,ve,Me)}Ze=Ze.next}Fe=Fe.next}while(Fe!==M)}function mb(M,z){return M.x-z.x}function yb(M,z){if(z=function(se,ve){var Me,Fe=ve,Ze=se.x,lt=se.y,Tt=-1/0;do{if(lt<=Fe.y&&lt>=Fe.next.y&&Fe.next.y!==Fe.y){var Dt=Fe.x+(lt-Fe.y)*(Fe.next.x-Fe.x)/(Fe.next.y-Fe.y);if(Dt<=Ze&&Dt>Tt){if(Tt=Dt,Dt===Ze){if(lt===Fe.y)return Fe;if(lt===Fe.next.y)return Fe.next}Me=Fe.x<Fe.next.x?Fe:Fe.next}}Fe=Fe.next}while(Fe!==ve);if(!Me)return null;if(Ze===Tt)return Me;var Jt,ln=Me,an=Me.x,xn=Me.y,On=1/0;Fe=Me;do{Ze>=Fe.x&&Fe.x>=an&&Ze!==Fe.x&&Wf(lt<xn?Ze:Tt,lt,an,xn,lt<xn?Tt:Ze,lt,Fe.x,Fe.y)&&(Jt=Math.abs(lt-Fe.y)/(Ze-Fe.x),Sc(Fe,se)&&(Jt<On||Jt===On&&(Fe.x>Me.x||Fe.x===Me.x&&vb(Me,Fe)))&&(Me=Fe,On=Jt)),Fe=Fe.next}while(Fe!==ln);return Me}(M,z)){var J=zh(z,M);Yc(z,z.next),Yc(J,J.next)}}function vb(M,z){return ys(M.prev,M,z.prev)<0&&ys(z.next,M,M.next)<0}function Hd(M,z,J,se,ve){return(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-J)*ve)|M<<8))|M<<4))|M<<2))|M<<1))|(z=1431655765&((z=858993459&((z=252645135&((z=16711935&((z=32767*(z-se)*ve)|z<<8))|z<<4))|z<<2))|z<<1))<<1}function Pw(M){var z=M,J=M;do{(z.x<J.x||z.x===J.x&&z.y<J.y)&&(J=z),z=z.next}while(z!==M);return J}function Wf(M,z,J,se,ve,Me,Fe,Ze){return(ve-Fe)*(z-Ze)-(M-Fe)*(Me-Ze)>=0&&(M-Fe)*(se-Ze)-(J-Fe)*(z-Ze)>=0&&(J-Fe)*(Me-Ze)-(ve-Fe)*(se-Ze)>=0}function Gd(M,z){return M.next.i!==z.i&&M.prev.i!==z.i&&!function(J,se){var ve=J;do{if(ve.i!==J.i&&ve.next.i!==J.i&&ve.i!==se.i&&ve.next.i!==se.i&&Hr(ve,ve.next,J,se))return!0;ve=ve.next}while(ve!==J);return!1}(M,z)&&(Sc(M,z)&&Sc(z,M)&&function(J,se){var ve=J,Me=!1,Fe=(J.x+se.x)/2,Ze=(J.y+se.y)/2;do{ve.y>Ze!=ve.next.y>Ze&&ve.next.y!==ve.y&&Fe<(ve.next.x-ve.x)*(Ze-ve.y)/(ve.next.y-ve.y)+ve.x&&(Me=!Me),ve=ve.next}while(ve!==J);return Me}(M,z)&&(ys(M.prev,M,z.prev)||ys(M,z.prev,z))||jp(M,z)&&ys(M.prev,M,M.next)>0&&ys(z.prev,z,z.next)>0)}function ys(M,z,J){return(z.y-M.y)*(J.x-z.x)-(z.x-M.x)*(J.y-z.y)}function jp(M,z){return M.x===z.x&&M.y===z.y}function Hr(M,z,J,se){var ve=_g(ys(M,z,J)),Me=_g(ys(M,z,se)),Fe=_g(ys(J,se,M)),Ze=_g(ys(J,se,z));return ve!==Me&&Fe!==Ze||!(0!==ve||!qd(M,J,z))||!(0!==Me||!qd(M,se,z))||!(0!==Fe||!qd(J,M,se))||!(0!==Ze||!qd(J,z,se))}function qd(M,z,J){return z.x<=Math.max(M.x,J.x)&&z.x>=Math.min(M.x,J.x)&&z.y<=Math.max(M.y,J.y)&&z.y>=Math.min(M.y,J.y)}function _g(M){return M>0?1:M<0?-1:0}function Sc(M,z){return ys(M.prev,M,M.next)<0?ys(M,z,M.next)>=0&&ys(M,M.prev,z)>=0:ys(M,z,M.prev)<0||ys(M,M.next,z)<0}function zh(M,z){var J=new Vp(M.i,M.x,M.y),se=new Vp(z.i,z.x,z.y),ve=M.next,Me=z.prev;return M.next=z,z.prev=M,J.next=ve,ve.prev=J,se.next=J,J.prev=se,Me.next=se,se.prev=Me,se}function My(M,z,J,se){var ve=new Vp(M,z,J);return se?(ve.next=se.next,ve.prev=se,se.next.prev=ve,se.next=ve):(ve.prev=ve,ve.next=ve),ve}function Bh(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function Vp(M,z,J){this.i=M,this.x=z,this.y=J,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ky(M,z,J,se){for(var ve=0,Me=z,Fe=J-se;Me<J;Me+=se)ve+=(M[Fe]-M[Me])*(M[Me+1]+M[Fe+1]),Fe=Me;return ve}function jh(M,z,J,se,ve){!function Me(Fe,Ze,lt,Tt,Dt){for(;Tt>lt;){if(Tt-lt>600){var Jt=Tt-lt+1,ln=Ze-lt+1,an=Math.log(Jt),xn=.5*Math.exp(2*an/3),On=.5*Math.sqrt(an*xn*(Jt-xn)/Jt)*(ln-Jt/2<0?-1:1);Me(Fe,Ze,Math.max(lt,Math.floor(Ze-ln*xn/Jt+On)),Math.min(Tt,Math.floor(Ze+(Jt-ln)*xn/Jt+On)),Dt)}var ar=Fe[Ze],or=lt,cr=Tt;for(Nl(Fe,lt,Ze),Dt(Fe[Tt],ar)>0&&Nl(Fe,lt,Tt);or<cr;){for(Nl(Fe,or,cr),or++,cr--;Dt(Fe[or],ar)<0;)or++;for(;Dt(Fe[cr],ar)>0;)cr--}0===Dt(Fe[lt],ar)?Nl(Fe,lt,cr):Nl(Fe,++cr,Tt),cr<=Ze&&(lt=cr+1),Ze<=cr&&(Tt=cr-1)}}(M,z,J||0,se||M.length-1,ve||Up)}function Nl(M,z,J){var se=M[z];M[z]=M[J],M[J]=se}function Up(M,z){return M<z?-1:M>z?1:0}function Zc(M,z){var J=M.length;if(J<=1)return[M];for(var se,ve,Me=[],Fe=0;Fe<J;Fe++){var Ze=S(M[Fe]);0!==Ze&&(M[Fe].area=Math.abs(Ze),void 0===ve&&(ve=Ze<0),ve===Ze<0?(se&&Me.push(se),se=[M[Fe]]):se.push(M[Fe]))}if(se&&Me.push(se),z>1)for(var lt=0;lt<Me.length;lt++)Me[lt].length<=z||(jh(Me[lt],z,1,Me[lt].length-1,bb),Me[lt]=Me[lt].slice(0,z));return Me}function bb(M,z){return z.area-M.area}function Hp(M,z,J){for(var se=J.patternDependencies,ve=!1,Me=0,Fe=z;Me<Fe.length;Me+=1){var Ze=Fe[Me].paint.get(M+"-pattern");Ze.isConstant()||(ve=!0);var lt=Ze.constantOr(null);lt&&(ve=!0,se[lt.to]=!0,se[lt.from]=!0)}return ve}function Wd(M,z,J,se,ve){for(var Me=ve.patternDependencies,Fe=0,Ze=z;Fe<Ze.length;Fe+=1){var lt=Ze[Fe],Tt=lt.paint.get(M+"-pattern").value;if("constant"!==Tt.kind){var Dt=Tt.evaluate({zoom:se-1},J,{},ve.availableImages),Jt=Tt.evaluate({zoom:se},J,{},ve.availableImages),ln=Tt.evaluate({zoom:se+1},J,{},ve.availableImages);Jt=Jt&&Jt.name?Jt.name:Jt,ln=ln&&ln.name?ln.name:ln,Me[Dt=Dt&&Dt.name?Dt.name:Dt]=!0,Me[Jt]=!0,Me[ln]=!0,J.patterns[lt.id]={min:Dt,mid:Jt,max:ln}}}return J}Bp.deviation=function(M,z,J,se){var ve=z&&z.length,Fe=Math.abs(ky(M,0,ve?z[0]*J:M.length,J));if(ve)for(var Ze=0,lt=z.length;Ze<lt;Ze++)Fe-=Math.abs(ky(M,z[Ze]*J,Ze<lt-1?z[Ze+1]*J:M.length,J));var Jt=0;for(Ze=0;Ze<se.length;Ze+=3){var ln=se[Ze]*J,an=se[Ze+1]*J,xn=se[Ze+2]*J;Jt+=Math.abs((M[ln]-M[xn])*(M[an+1]-M[ln+1])-(M[ln]-M[an])*(M[xn+1]-M[ln+1]))}return 0===Fe&&0===Jt?0:Math.abs((Jt-Fe)/Fe)},Bp.flatten=function(M){for(var z=M[0][0].length,J={vertices:[],holes:[],dimensions:z},se=0,ve=0;ve<M.length;ve++){for(var Me=0;Me<M[ve].length;Me++)for(var Fe=0;Fe<z;Fe++)J.vertices.push(M[ve][Me][Fe]);ve>0&&J.holes.push(se+=M[ve-1].length)}return J},vg.default=gb;var ju=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new _o,this.indexArray=new Qs,this.indexArray2=new U,this.programConfigurations=new fo(Ay,M.layers,M.zoom),this.segments=new Xt,this.segments2=new Xt,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};ju.prototype.populate=function(M,z,J){this.hasPattern=Hp("fill",this.layers,z);for(var se=this.layers[0].layout.get("fill-sort-key"),ve=[],Me=0,Fe=M;Me<Fe.length;Me+=1){var Ze=Fe[Me],lt=Ze.feature,Tt=Ze.id,Dt=Ze.index,Jt=Ze.sourceLayerIndex,ln=this.layers[0]._featureFilter.needGeometry,an={type:lt.type,id:Tt,properties:lt.properties,geometry:ln?$o(lt):[]};if(this.layers[0]._featureFilter.filter(new Fa(this.zoom),an,J)){ln||(an.geometry=$o(lt));var xn=se?se.evaluate(an,{},J,z.availableImages):void 0;ve.push({id:Tt,properties:lt.properties,type:lt.type,sourceLayerIndex:Jt,index:Dt,geometry:an.geometry,patterns:{},sortKey:xn})}}se&&ve.sort(function(_i,Ui){return _i.sortKey-Ui.sortKey});for(var Xn=0,Yn=ve;Xn<Yn.length;Xn+=1){var ar=Yn[Xn],cr=ar.geometry,Sr=ar.index,Rr=ar.sourceLayerIndex;if(this.hasPattern){var si=Wd("fill",this.layers,ar,this.zoom,z);this.patternFeatures.push(si)}else this.addFeature(ar,cr,Sr,J,{});z.featureIndex.insert(M[Sr].feature,cr,Sr,Rr,this.index)}},ju.prototype.update=function(M,z,J){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,z,this.stateDependentLayers,J)},ju.prototype.addFeatures=function(M,z,J){for(var se=0,ve=this.patternFeatures;se<ve.length;se+=1){var Me=ve[se];this.addFeature(Me,Me.geometry,Me.index,z,J)}},ju.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ju.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ju.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Ay),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.indexBuffer2=M.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(M),this.uploaded=!0},ju.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ju.prototype.addFeature=function(M,z,J,se,ve){for(var Me=0,Fe=Zc(z,500);Me<Fe.length;Me+=1){for(var Ze=Fe[Me],lt=0,Tt=0,Dt=Ze;Tt<Dt.length;Tt+=1)lt+=Dt[Tt].length;for(var Jt=this.segments.prepareSegment(lt,this.layoutVertexArray,this.indexArray),ln=Jt.vertexLength,an=[],xn=[],On=0,Xn=Ze;On<Xn.length;On+=1){var Yn=Xn[On];if(0!==Yn.length){Yn!==Ze[0]&&xn.push(an.length/2);var ar=this.segments2.prepareSegment(Yn.length,this.layoutVertexArray,this.indexArray2),or=ar.vertexLength;this.layoutVertexArray.emplaceBack(Yn[0].x,Yn[0].y),this.indexArray2.emplaceBack(or+Yn.length-1,or),an.push(Yn[0].x),an.push(Yn[0].y);for(var cr=1;cr<Yn.length;cr++)this.layoutVertexArray.emplaceBack(Yn[cr].x,Yn[cr].y),this.indexArray2.emplaceBack(or+cr-1,or+cr),an.push(Yn[cr].x),an.push(Yn[cr].y);ar.vertexLength+=Yn.length,ar.primitiveLength+=Yn.length}}for(var Sr=vg(an,xn),Rr=0;Rr<Sr.length;Rr+=3)this.indexArray.emplaceBack(ln+Sr[Rr],ln+Sr[Rr+1],ln+Sr[Rr+2]);Jt.vertexLength+=lt,Jt.primitiveLength+=Sr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,J,ve,se)},ur("FillBucket",ju,{omit:["layers","patternFeatures"]});var Dy=new _l({"fill-sort-key":new ia(Ve.layout_fill["fill-sort-key"])}),_b={paint:new _l({"fill-antialias":new Gi(Ve.paint_fill["fill-antialias"]),"fill-opacity":new ia(Ve.paint_fill["fill-opacity"]),"fill-color":new ia(Ve.paint_fill["fill-color"]),"fill-outline-color":new ia(Ve.paint_fill["fill-outline-color"]),"fill-translate":new Gi(Ve.paint_fill["fill-translate"]),"fill-translate-anchor":new Gi(Ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new Xu(Ve.paint_fill["fill-pattern"])}),layout:Dy},xb=function(M){function z(J){M.call(this,J,_b)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.recalculate=function(J,se){M.prototype.recalculate.call(this,J,se);var ve=this.paint._values["fill-outline-color"];"constant"===ve.value.kind&&void 0===ve.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},z.prototype.createBucket=function(J){return new ju(J)},z.prototype.queryRadius=function(){return Rl(this.paint.get("fill-translate"))},z.prototype.queryIntersectsFeature=function(J,se,ve,Me,Fe,Ze,lt){return Ta(Fl(J,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ze.angle,lt),Me)},z.prototype.isTileClipped=function(){return!0},z}(Ll),dh=ba([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Vh=Uh;function Uh(M,z,J,se,ve){this.properties={},this.extent=J,this.type=0,this._pbf=M,this._geometry=-1,this._keys=se,this._values=ve,M.readFields(Ow,this,z)}function Ow(M,z,J){1==M?z.id=J.readVarint():2==M?function(se,ve){for(var Me=se.readVarint()+se.pos;se.pos<Me;){var Fe=ve._keys[se.readVarint()],Ze=ve._values[se.readVarint()];ve.properties[Fe]=Ze}}(J,z):3==M?z.type=J.readVarint():4==M&&(z._geometry=J.pos)}function Ey(M){for(var z,J,se=0,ve=0,Me=M.length,Fe=Me-1;ve<Me;Fe=ve++)se+=((J=M[Fe]).x-(z=M[ve]).x)*(z.y+J.y);return se}Uh.types=["Unknown","Point","LineString","Polygon"],Uh.prototype.loadGeometry=function(){var M=this._pbf;M.pos=this._geometry;for(var z,J=M.readVarint()+M.pos,se=1,ve=0,Me=0,Fe=0,Ze=[];M.pos<J;){if(ve<=0){var lt=M.readVarint();se=7&lt,ve=lt>>3}if(ve--,1===se||2===se)Me+=M.readSVarint(),Fe+=M.readSVarint(),1===se&&(z&&Ze.push(z),z=[]),z.push(new f(Me,Fe));else{if(7!==se)throw new Error("unknown command "+se);z&&z.push(z[0].clone())}}return z&&Ze.push(z),Ze},Uh.prototype.bbox=function(){var M=this._pbf;M.pos=this._geometry;for(var z=M.readVarint()+M.pos,J=1,se=0,ve=0,Me=0,Fe=1/0,Ze=-1/0,lt=1/0,Tt=-1/0;M.pos<z;){if(se<=0){var Dt=M.readVarint();J=7&Dt,se=Dt>>3}if(se--,1===J||2===J)(ve+=M.readSVarint())<Fe&&(Fe=ve),ve>Ze&&(Ze=ve),(Me+=M.readSVarint())<lt&&(lt=Me),Me>Tt&&(Tt=Me);else if(7!==J)throw new Error("unknown command "+J)}return[Fe,lt,Ze,Tt]},Uh.prototype.toGeoJSON=function(M,z,J){var se,ve,Me=this.extent*Math.pow(2,J),Fe=this.extent*M,Ze=this.extent*z,lt=this.loadGeometry(),Tt=Uh.types[this.type];function Dt(an){for(var xn=0;xn<an.length;xn++){var On=an[xn];an[xn]=[360*(On.x+Fe)/Me-180,360/Math.PI*Math.atan(Math.exp((180-360*(On.y+Ze)/Me)*Math.PI/180))-90]}}switch(this.type){case 1:var Jt=[];for(se=0;se<lt.length;se++)Jt[se]=lt[se][0];Dt(lt=Jt);break;case 2:for(se=0;se<lt.length;se++)Dt(lt[se]);break;case 3:for(lt=function(an){var xn=an.length;if(xn<=1)return[an];for(var On,Xn,Yn=[],ar=0;ar<xn;ar++){var or=Ey(an[ar]);0!==or&&(void 0===Xn&&(Xn=or<0),Xn===or<0?(On&&Yn.push(On),On=[an[ar]]):On.push(an[ar]))}return On&&Yn.push(On),Yn}(lt),se=0;se<lt.length;se++)for(ve=0;ve<lt[se].length;ve++)Dt(lt[se][ve])}1===lt.length?lt=lt[0]:Tt="Multi"+Tt;var ln={type:"Feature",geometry:{type:Tt,coordinates:lt},properties:this.properties};return"id"in this&&(ln.id=this.id),ln};var Cy=wb;function wb(M,z){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=M,this._keys=[],this._values=[],this._features=[],M.readFields(Tb,this,z),this.length=this._features.length}function Tb(M,z,J){15===M?z.version=J.readVarint():1===M?z.name=J.readString():5===M?z.extent=J.readVarint():2===M?z._features.push(J.pos):3===M?z._keys.push(J.readString()):4===M&&z._values.push(function(se){for(var ve=null,Me=se.readVarint()+se.pos;se.pos<Me;){var Fe=se.readVarint()>>3;ve=1===Fe?se.readString():2===Fe?se.readFloat():3===Fe?se.readDouble():4===Fe?se.readVarint64():5===Fe?se.readVarint():6===Fe?se.readSVarint():7===Fe?se.readBoolean():null}return ve}(J))}function Ab(M,z,J){if(3===M){var se=new Cy(J,J.readVarint()+J.pos);se.length&&(z[se.name]=se)}}wb.prototype.feature=function(M){if(M<0||M>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[M];var z=this._pbf.readVarint()+this._pbf.pos;return new Vh(this._pbf,z,this.extent,this._keys,this._values)};var Hh={VectorTile:function(M,z){this.layers=M.readFields(Ab,{},z)},VectorTileFeature:Vh,VectorTileLayer:Cy},Gp=Hh.VectorTileFeature.types,$d=Math.pow(2,13);function Xc(M,z,J,se,ve,Me,Fe,Ze){M.emplaceBack(z,J,2*Math.floor(se*$d)+Fe,ve*$d*2,Me*$d*2,Math.round(Ze))}var Ic=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new Ju,this.indexArray=new Qs,this.programConfigurations=new fo(dh,M.layers,M.zoom),this.segments=new Xt,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function Mb(M,z){return M.x===z.x&&(M.x<0||M.x>8192)||M.y===z.y&&(M.y<0||M.y>8192)}function Lw(M){return M.every(function(z){return z.x<0})||M.every(function(z){return z.x>8192})||M.every(function(z){return z.y<0})||M.every(function(z){return z.y>8192})}Ic.prototype.populate=function(M,z,J){this.features=[],this.hasPattern=Hp("fill-extrusion",this.layers,z);for(var se=0,ve=M;se<ve.length;se+=1){var Me=ve[se],Fe=Me.feature,Ze=Me.id,lt=Me.index,Tt=Me.sourceLayerIndex,Dt=this.layers[0]._featureFilter.needGeometry,Jt={type:Fe.type,id:Ze,properties:Fe.properties,geometry:Dt?$o(Fe):[]};if(this.layers[0]._featureFilter.filter(new Fa(this.zoom),Jt,J)){var ln={id:Ze,sourceLayerIndex:Tt,index:lt,geometry:Dt?Jt.geometry:$o(Fe),properties:Fe.properties,type:Fe.type,patterns:{}};void 0!==Fe.id&&(ln.id=Fe.id),this.hasPattern?this.features.push(Wd("fill-extrusion",this.layers,ln,this.zoom,z)):this.addFeature(ln,ln.geometry,lt,J,{}),z.featureIndex.insert(Fe,ln.geometry,lt,Tt,this.index,!0)}}},Ic.prototype.addFeatures=function(M,z,J){for(var se=0,ve=this.features;se<ve.length;se+=1){var Me=ve[se];this.addFeature(Me,Me.geometry,Me.index,z,J)}},Ic.prototype.update=function(M,z,J){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,z,this.stateDependentLayers,J)},Ic.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ic.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ic.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,dh),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Ic.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ic.prototype.addFeature=function(M,z,J,se,ve){for(var Me=0,Fe=Zc(z,500);Me<Fe.length;Me+=1){for(var Ze=Fe[Me],lt=0,Tt=0,Dt=Ze;Tt<Dt.length;Tt+=1)lt+=Dt[Tt].length;for(var Jt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),ln=0,an=Ze;ln<an.length;ln+=1){var xn=an[ln];if(0!==xn.length&&!Lw(xn))for(var On=0,Xn=0;Xn<xn.length;Xn++){var Yn=xn[Xn];if(Xn>=1){var ar=xn[Xn-1];if(!Mb(Yn,ar)){Jt.vertexLength+4>Xt.MAX_VERTEX_ARRAY_LENGTH&&(Jt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var or=Yn.sub(ar)._perp()._unit(),cr=ar.dist(Yn);On+cr>32768&&(On=0),Xc(this.layoutVertexArray,Yn.x,Yn.y,or.x,or.y,0,0,On),Xc(this.layoutVertexArray,Yn.x,Yn.y,or.x,or.y,0,1,On),Xc(this.layoutVertexArray,ar.x,ar.y,or.x,or.y,0,0,On+=cr),Xc(this.layoutVertexArray,ar.x,ar.y,or.x,or.y,0,1,On);var Sr=Jt.vertexLength;this.indexArray.emplaceBack(Sr,Sr+2,Sr+1),this.indexArray.emplaceBack(Sr+1,Sr+2,Sr+3),Jt.vertexLength+=4,Jt.primitiveLength+=2}}}}if(Jt.vertexLength+lt>Xt.MAX_VERTEX_ARRAY_LENGTH&&(Jt=this.segments.prepareSegment(lt,this.layoutVertexArray,this.indexArray)),"Polygon"===Gp[M.type]){for(var Rr=[],si=[],ii=Jt.vertexLength,_i=0,Ui=Ze;_i<Ui.length;_i+=1){var Vi=Ui[_i];if(0!==Vi.length){Vi!==Ze[0]&&si.push(Rr.length/2);for(var Si=0;Si<Vi.length;Si++){var Zi=Vi[Si];Xc(this.layoutVertexArray,Zi.x,Zi.y,0,0,1,1,0),Rr.push(Zi.x),Rr.push(Zi.y)}}}for(var Yi=vg(Rr,si),Hi=0;Hi<Yi.length;Hi+=3)this.indexArray.emplaceBack(ii+Yi[Hi],ii+Yi[Hi+2],ii+Yi[Hi+1]);Jt.primitiveLength+=Yi.length/3,Jt.vertexLength+=lt}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,J,ve,se)},ur("FillExtrusionBucket",Ic,{omit:["layers","features"]});var qp={paint:new _l({"fill-extrusion-opacity":new Gi(Ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ia(Ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Gi(Ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Gi(Ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Xu(Ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ia(Ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ia(Ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Gi(Ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},xg=function(M){function z(J){M.call(this,J,qp)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.createBucket=function(J){return new Ic(J)},z.prototype.queryRadius=function(){return Rl(this.paint.get("fill-extrusion-translate"))},z.prototype.is3D=function(){return!0},z.prototype.queryIntersectsFeature=function(J,se,ve,Me,Fe,Ze,lt,Tt){var Dt=Fl(J,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ze.angle,lt),Jt=this.paint.get("fill-extrusion-height").evaluate(se,ve),ln=this.paint.get("fill-extrusion-base").evaluate(se,ve),an=function(On,Xn,Yn,ar){for(var or=[],cr=0,Sr=On;cr<Sr.length;cr+=1){var Rr=Sr[cr],si=[Rr.x,Rr.y,0,1];Cc(si,si,Xn),or.push(new f(si[0]/si[3],si[1]/si[3]))}return or}(Dt,Tt),xn=function(On,Xn,Yn,ar){for(var or=[],cr=[],Sr=ar[8]*Xn,Rr=ar[9]*Xn,si=ar[10]*Xn,ii=ar[11]*Xn,_i=ar[8]*Yn,Ui=ar[9]*Yn,Vi=ar[10]*Yn,Si=ar[11]*Yn,Zi=0,Yi=On;Zi<Yi.length;Zi+=1){for(var Aa=[],Ga=[],to=0,ua=Yi[Zi];to<ua.length;to+=1){var Ya=ua[to],Uo=Ya.x,zo=Ya.y,Jo=ar[0]*Uo+ar[4]*zo+ar[12],Bo=ar[1]*Uo+ar[5]*zo+ar[13],el=ar[2]*Uo+ar[6]*zo+ar[14],rs=ar[3]*Uo+ar[7]*zo+ar[15],oa=el+si,Kr=rs+ii,hl=Jo+_i,Al=Bo+Ui,vs=el+Vi,Ws=rs+Si,Ml=new f((Jo+Sr)/Kr,(Bo+Rr)/Kr);Ml.z=oa/Kr,Aa.push(Ml);var Es=new f(hl/Ws,Al/Ws);Es.z=vs/Ws,Ga.push(Es)}or.push(Aa),cr.push(Ga)}return[or,cr]}(Me,ln,Jt,Tt);return function(On,Xn,Yn){var ar=1/0;Ta(Yn,Xn)&&(ar=wg(Yn,Xn[0]));for(var or=0;or<Xn.length;or++)for(var cr=Xn[or],Sr=On[or],Rr=0;Rr<cr.length-1;Rr++){var si=cr[Rr],Vi=[si,cr[Rr+1],Sr[Rr+1],Sr[Rr],si];Wl(Yn,Vi)&&(ar=Math.min(ar,wg(Yn,Vi)))}return ar!==1/0&&ar}(xn[0],xn[1],an)},z}(Ll);function Gh(M,z){return M.x*z.x+M.y*z.y}function wg(M,z){if(1===M.length){for(var J,se=0,ve=z[se++];!J||ve.equals(J);)if(!(J=z[se++]))return 1/0;for(;se<z.length;se++){var Me=z[se],Fe=M[0],Ze=J.sub(ve),lt=Me.sub(ve),Tt=Fe.sub(ve),Dt=Gh(Ze,Ze),Jt=Gh(Ze,lt),ln=Gh(lt,lt),an=Gh(Tt,Ze),xn=Gh(Tt,lt),On=Dt*ln-Jt*Jt,Xn=(ln*an-Jt*xn)/On,Yn=(Dt*xn-Jt*an)/On,or=ve.z*(1-Xn-Yn)+J.z*Xn+Me.z*Yn;if(isFinite(or))return or}return 1/0}for(var cr=1/0,Sr=0,Rr=z;Sr<Rr.length;Sr+=1)cr=Math.min(cr,Rr[Sr].z);return cr}var Tg=ba([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ph=Hh.VectorTileFeature.types,kb=Math.cos(Math.PI/180*37.5),Sy=Math.pow(2,14)/.5,su=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Mc,this.indexArray=new Qs,this.programConfigurations=new fo(Tg,M.layers,M.zoom),this.segments=new Xt,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};su.prototype.populate=function(M,z,J){this.hasPattern=Hp("line",this.layers,z);for(var se=this.layers[0].layout.get("line-sort-key"),ve=[],Me=0,Fe=M;Me<Fe.length;Me+=1){var Ze=Fe[Me],lt=Ze.feature,Tt=Ze.id,Dt=Ze.index,Jt=Ze.sourceLayerIndex,ln=this.layers[0]._featureFilter.needGeometry,an={type:lt.type,id:Tt,properties:lt.properties,geometry:ln?$o(lt):[]};if(this.layers[0]._featureFilter.filter(new Fa(this.zoom),an,J)){ln||(an.geometry=$o(lt));var xn=se?se.evaluate(an,{},J):void 0;ve.push({id:Tt,properties:lt.properties,type:lt.type,sourceLayerIndex:Jt,index:Dt,geometry:an.geometry,patterns:{},sortKey:xn})}}se&&ve.sort(function(_i,Ui){return _i.sortKey-Ui.sortKey});for(var Xn=0,Yn=ve;Xn<Yn.length;Xn+=1){var ar=Yn[Xn],cr=ar.geometry,Sr=ar.index,Rr=ar.sourceLayerIndex;if(this.hasPattern){var si=Wd("line",this.layers,ar,this.zoom,z);this.patternFeatures.push(si)}else this.addFeature(ar,cr,Sr,J,{});z.featureIndex.insert(M[Sr].feature,cr,Sr,Rr,this.index)}},su.prototype.update=function(M,z,J){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,z,this.stateDependentLayers,J)},su.prototype.addFeatures=function(M,z,J){for(var se=0,ve=this.patternFeatures;se<ve.length;se+=1){var Me=ve[se];this.addFeature(Me,Me.geometry,Me.index,z,J)}},su.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},su.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},su.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Tg),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},su.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},su.prototype.addFeature=function(M,z,J,se,ve){for(var Me=this.layers[0].layout,Fe=Me.get("line-join").evaluate(M,{}),Ze=Me.get("line-cap"),lt=Me.get("line-miter-limit"),Tt=Me.get("line-round-limit"),Dt=0,Jt=z;Dt<Jt.length;Dt+=1)this.addLine(Jt[Dt],M,Fe,Ze,lt,Tt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,J,ve,se)},su.prototype.addLine=function(M,z,J,se,ve,Me){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,z.properties&&z.properties.hasOwnProperty("mapbox_clip_start")&&z.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+z.properties.mapbox_clip_start,this.clipEnd=+z.properties.mapbox_clip_end;for(var Fe=0;Fe<M.length-1;Fe++)this.totalDistance+=M[Fe].dist(M[Fe+1]);this.updateScaledDistance()}for(var Ze="Polygon"===ph[z.type],lt=M.length;lt>=2&&M[lt-1].equals(M[lt-2]);)lt--;for(var Tt=0;Tt<lt-1&&M[Tt].equals(M[Tt+1]);)Tt++;if(!(lt<(Ze?3:2))){"bevel"===J&&(ve=1.05);var Dt,Jt=this.overscaling<=16?122880/(512*this.overscaling):0,ln=this.segments.prepareSegment(10*lt,this.layoutVertexArray,this.indexArray),an=void 0,xn=void 0,On=void 0,Xn=void 0;this.e1=this.e2=-1,Ze&&(Xn=M[Tt].sub(Dt=M[lt-2])._unit()._perp());for(var Yn=Tt;Yn<lt;Yn++)if(!(xn=Yn===lt-1?Ze?M[Tt+1]:void 0:M[Yn+1])||!M[Yn].equals(xn)){Xn&&(On=Xn),Dt&&(an=Dt),Dt=M[Yn],Xn=xn?xn.sub(Dt)._unit()._perp():On;var ar=(On=On||Xn).add(Xn);0===ar.x&&0===ar.y||ar._unit();var or=On.x*Xn.x+On.y*Xn.y,cr=ar.x*Xn.x+ar.y*Xn.y,Sr=0!==cr?1/cr:1/0,Rr=2*Math.sqrt(2-2*cr),si=cr<kb&&an&&xn,ii=On.x*Xn.y-On.y*Xn.x>0;if(si&&Yn>Tt){var _i=Dt.dist(an);if(_i>2*Jt){var Ui=Dt.sub(Dt.sub(an)._mult(Jt/_i)._round());this.updateDistance(an,Ui),this.addCurrentVertex(Ui,On,0,0,ln),an=Ui}}var Vi=an&&xn,Si=Vi?J:Ze?"butt":se;if(Vi&&"round"===Si&&(Sr<Me?Si="miter":Sr<=2&&(Si="fakeround")),"miter"===Si&&Sr>ve&&(Si="bevel"),"bevel"===Si&&(Sr>2&&(Si="flipbevel"),Sr<ve&&(Si="miter")),an&&this.updateDistance(an,Dt),"miter"===Si)ar._mult(Sr),this.addCurrentVertex(Dt,ar,0,0,ln);else if("flipbevel"===Si){if(Sr>100)ar=Xn.mult(-1);else{var Zi=Sr*On.add(Xn).mag()/On.sub(Xn).mag();ar._perp()._mult(Zi*(ii?-1:1))}this.addCurrentVertex(Dt,ar,0,0,ln),this.addCurrentVertex(Dt,ar.mult(-1),0,0,ln)}else if("bevel"===Si||"fakeround"===Si){var Yi=-Math.sqrt(Sr*Sr-1),Hi=ii?Yi:0,Aa=ii?0:Yi;if(an&&this.addCurrentVertex(Dt,On,Hi,Aa,ln),"fakeround"===Si)for(var Ga=Math.round(180*Rr/Math.PI/20),to=1;to<Ga;to++){var ua=to/Ga;if(.5!==ua){var Ya=ua-.5;ua+=ua*Ya*(ua-1)*((1.0904+or*(or*(3.55645-1.43519*or)-3.2452))*Ya*Ya+(.848013+or*(.215638*or-1.06021)))}var Uo=Xn.sub(On)._mult(ua)._add(On)._unit()._mult(ii?-1:1);this.addHalfVertex(Dt,Uo.x,Uo.y,!1,ii,0,ln)}xn&&this.addCurrentVertex(Dt,Xn,-Hi,-Aa,ln)}else if("butt"===Si)this.addCurrentVertex(Dt,ar,0,0,ln);else if("square"===Si){var zo=an?1:-1;this.addCurrentVertex(Dt,ar,zo,zo,ln)}else"round"===Si&&(an&&(this.addCurrentVertex(Dt,On,0,0,ln),this.addCurrentVertex(Dt,On,1,1,ln,!0)),xn&&(this.addCurrentVertex(Dt,Xn,-1,-1,ln,!0),this.addCurrentVertex(Dt,Xn,0,0,ln)));if(si&&Yn<lt-1){var Jo=Dt.dist(xn);if(Jo>2*Jt){var Bo=Dt.add(xn.sub(Dt)._mult(Jt/Jo)._round());this.updateDistance(Dt,Bo),this.addCurrentVertex(Bo,Xn,0,0,ln),Dt=Bo}}}}},su.prototype.addCurrentVertex=function(M,z,J,se,ve,Me){void 0===Me&&(Me=!1);var lt=z.y*se-z.x,Tt=-z.y-z.x*se;this.addHalfVertex(M,z.x+z.y*J,z.y-z.x*J,Me,!1,J,ve),this.addHalfVertex(M,lt,Tt,Me,!0,-se,ve),this.distance>Sy/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(M,z,J,se,ve,Me))},su.prototype.addHalfVertex=function(M,z,J,se,ve,Me,Fe){var Tt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((M.x<<1)+(se?1:0),(M.y<<1)+(ve?1:0),Math.round(63*z)+128,Math.round(63*J)+128,1+(0===Me?0:Me<0?-1:1)|(63&Tt)<<2,Tt>>6);var Dt=Fe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Dt),Fe.primitiveLength++),ve?this.e2=Dt:this.e1=Dt},su.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Sy-1):this.distance},su.prototype.updateDistance=function(M,z){this.distance+=M.dist(z),this.updateScaledDistance()},ur("LineBucket",su,{omit:["layers","patternFeatures"]});var Db=new _l({"line-cap":new Gi(Ve.layout_line["line-cap"]),"line-join":new ia(Ve.layout_line["line-join"]),"line-miter-limit":new Gi(Ve.layout_line["line-miter-limit"]),"line-round-limit":new Gi(Ve.layout_line["line-round-limit"]),"line-sort-key":new ia(Ve.layout_line["line-sort-key"])}),Iy={paint:new _l({"line-opacity":new ia(Ve.paint_line["line-opacity"]),"line-color":new ia(Ve.paint_line["line-color"]),"line-translate":new Gi(Ve.paint_line["line-translate"]),"line-translate-anchor":new Gi(Ve.paint_line["line-translate-anchor"]),"line-width":new ia(Ve.paint_line["line-width"]),"line-gap-width":new ia(Ve.paint_line["line-gap-width"]),"line-offset":new ia(Ve.paint_line["line-offset"]),"line-blur":new ia(Ve.paint_line["line-blur"]),"line-dasharray":new wc(Ve.paint_line["line-dasharray"]),"line-pattern":new Xu(Ve.paint_line["line-pattern"]),"line-gradient":new au(Ve.paint_line["line-gradient"])}),layout:Db},Vu=new(function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.possiblyEvaluate=function(J,se){return se=new Fa(Math.floor(se.zoom),{now:se.now,fadeDuration:se.fadeDuration,zoomHistory:se.zoomHistory,transition:se.transition}),M.prototype.possiblyEvaluate.call(this,J,se)},z.prototype.evaluate=function(J,se,ve,Me){return se=v({},se,{zoom:Math.floor(se.zoom)}),M.prototype.evaluate.call(this,J,se,ve,Me)},z}(ia))(Iy.paint.properties["line-width"].specification);Vu.useIntegerZoom=!0;var Jc=function(M){function z(J){M.call(this,J,Iy)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype._handleSpecialPaintPropertyUpdate=function(J){"line-gradient"===J&&this._updateGradient()},z.prototype._updateGradient=function(){this.gradient=hh(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},z.prototype.recalculate=function(J,se){M.prototype.recalculate.call(this,J,se),this.paint._values["line-floorwidth"]=Vu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,J)},z.prototype.createBucket=function(J){return new su(J)},z.prototype.queryRadius=function(J){var se=J,ve=Ag(gs("line-width",this,se),gs("line-gap-width",this,se)),Me=gs("line-offset",this,se);return ve/2+Math.abs(Me)+Rl(this.paint.get("line-translate"))},z.prototype.queryIntersectsFeature=function(J,se,ve,Me,Fe,Ze,lt){var Tt=Fl(J,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ze.angle,lt),Dt=lt/2*Ag(this.paint.get("line-width").evaluate(se,ve),this.paint.get("line-gap-width").evaluate(se,ve)),Jt=this.paint.get("line-offset").evaluate(se,ve);return Jt&&(Me=function(ln,an){for(var xn=[],On=new f(0,0),Xn=0;Xn<ln.length;Xn++){for(var Yn=ln[Xn],ar=[],or=0;or<Yn.length;or++){var Sr=Yn[or],Rr=Yn[or+1],si=0===or?On:Sr.sub(Yn[or-1])._unit()._perp(),ii=or===Yn.length-1?On:Rr.sub(Sr)._unit()._perp(),_i=si._add(ii)._unit();_i._mult(1/(_i.x*ii.x+_i.y*ii.y)),ar.push(_i._mult(an)._add(Sr))}xn.push(ar)}return xn}(Me,Jt*lt)),function(ln,an,xn){for(var On=0;On<an.length;On++){var Xn=an[On];if(ln.length>=3)for(var Yn=0;Yn<Xn.length;Yn++)if(zu(ln,Xn[Yn]))return!0;if(uh(ln,Xn,xn))return!0}return!1}(Tt,Me,Dt)},z.prototype.isTileClipped=function(){return!0},z}(Ll);function Ag(M,z){return z>0?z+2*M:M}var Mg=ba([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Eb=ba([{name:"a_projected_pos",components:3,type:"Float32"}],4),Cb=(ba([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ba([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Py=(ba([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ba([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Sb=ba([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Oy(M,z,J){return M.sections.forEach(function(se){var ve,Fe,Ze;se.text=(ve=se.text,Fe=J,"uppercase"===(Ze=z.layout.get("text-transform").evaluate(Fe,{}))?ve=ve.toLocaleUpperCase():"lowercase"===Ze&&(ve=ve.toLocaleLowerCase()),As.applyArabicShaping&&(ve=As.applyArabicShaping(ve)),ve)}),M}ba([{name:"triangle",components:3,type:"Uint16"}]),ba([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ba([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ba([{type:"Float32",name:"offsetX"}]),ba([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Yd={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Ly=function(M,z,J,se,ve){var Me,Fe,Ze=8*ve-se-1,lt=(1<<Ze)-1,Tt=lt>>1,Dt=-7,Jt=J?ve-1:0,ln=J?-1:1,an=M[z+Jt];for(Jt+=ln,Me=an&(1<<-Dt)-1,an>>=-Dt,Dt+=Ze;Dt>0;Me=256*Me+M[z+Jt],Jt+=ln,Dt-=8);for(Fe=Me&(1<<-Dt)-1,Me>>=-Dt,Dt+=se;Dt>0;Fe=256*Fe+M[z+Jt],Jt+=ln,Dt-=8);if(0===Me)Me=1-Tt;else{if(Me===lt)return Fe?NaN:1/0*(an?-1:1);Fe+=Math.pow(2,se),Me-=Tt}return(an?-1:1)*Fe*Math.pow(2,Me-se)},Ry=function(M,z,J,se,ve,Me){var Fe,Ze,lt,Tt=8*Me-ve-1,Dt=(1<<Tt)-1,Jt=Dt>>1,ln=23===ve?Math.pow(2,-24)-Math.pow(2,-77):0,an=se?0:Me-1,xn=se?1:-1,On=z<0||0===z&&1/z<0?1:0;for(z=Math.abs(z),isNaN(z)||z===1/0?(Ze=isNaN(z)?1:0,Fe=Dt):(Fe=Math.floor(Math.log(z)/Math.LN2),z*(lt=Math.pow(2,-Fe))<1&&(Fe--,lt*=2),(z+=Fe+Jt>=1?ln/lt:ln*Math.pow(2,1-Jt))*lt>=2&&(Fe++,lt/=2),Fe+Jt>=Dt?(Ze=0,Fe=Dt):Fe+Jt>=1?(Ze=(z*lt-1)*Math.pow(2,ve),Fe+=Jt):(Ze=z*Math.pow(2,Jt-1)*Math.pow(2,ve),Fe=0));ve>=8;M[J+an]=255&Ze,an+=xn,Ze/=256,ve-=8);for(Fe=Fe<<ve|Ze,Tt+=ve;Tt>0;M[J+an]=255&Fe,an+=xn,Fe/=256,Tt-=8);M[J+an-xn]|=128*On},Wp=Yo;function Yo(M){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(M)?M:new Uint8Array(M||0),this.pos=0,this.type=0,this.length=this.buf.length}Yo.Varint=0,Yo.Fixed64=1,Yo.Bytes=2,Yo.Fixed32=5;var Fy="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Ku(M){return M.type===Yo.Bytes?M.readVarint()+M.pos:M.pos+1}function Pc(M,z,J){var se=z<=16383?1:z<=2097151?2:z<=268435455?3:Math.floor(Math.log(z)/(7*Math.LN2));J.realloc(se);for(var ve=J.pos-1;ve>=M;ve--)J.buf[ve+se]=J.buf[ve]}function Zd(M,z){for(var J=0;J<M.length;J++)z.writeVarint(M[J])}function Ny(M,z){for(var J=0;J<M.length;J++)z.writeSVarint(M[J])}function zy(M,z){for(var J=0;J<M.length;J++)z.writeFloat(M[J])}function By(M,z){for(var J=0;J<M.length;J++)z.writeDouble(M[J])}function Rw(M,z){for(var J=0;J<M.length;J++)z.writeBoolean(M[J])}function Fw(M,z){for(var J=0;J<M.length;J++)z.writeFixed32(M[J])}function Nw(M,z){for(var J=0;J<M.length;J++)z.writeSFixed32(M[J])}function kg(M,z){for(var J=0;J<M.length;J++)z.writeFixed64(M[J])}function Dg(M,z){for(var J=0;J<M.length;J++)z.writeSFixed64(M[J])}function qh(M,z){return(M[z]|M[z+1]<<8|M[z+2]<<16)+16777216*M[z+3]}function Xd(M,z,J){M[J]=z,M[J+1]=z>>>8,M[J+2]=z>>>16,M[J+3]=z>>>24}function Ib(M,z){return(M[z]|M[z+1]<<8|M[z+2]<<16)+(M[z+3]<<24)}function jy(M,z,J){1===M&&J.readMessage(Pb,z)}function Pb(M,z,J){if(3===M){var se=J.readMessage(Ob,{}),Fe=se.width,Ze=se.height,lt=se.left,Tt=se.top,Dt=se.advance;z.push({id:se.id,bitmap:new Gf({width:Fe+6,height:Ze+6},se.bitmap),metrics:{width:Fe,height:Ze,left:lt,top:Tt,advance:Dt}})}}function Ob(M,z,J){1===M?z.id=J.readVarint():2===M?z.bitmap=J.readBytes():3===M?z.width=J.readVarint():4===M?z.height=J.readVarint():5===M?z.left=J.readSVarint():6===M?z.top=J.readSVarint():7===M&&(z.advance=J.readVarint())}function Vy(M){for(var z=0,J=0,se=0,ve=M;se<ve.length;se+=1){var Me=ve[se];z+=Me.w*Me.h,J=Math.max(J,Me.w)}M.sort(function(On,Xn){return Xn.h-On.h});for(var Fe=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(z/.95)),J),h:1/0}],Ze=0,lt=0,Tt=0,Dt=M;Tt<Dt.length;Tt+=1)for(var Jt=Dt[Tt],ln=Fe.length-1;ln>=0;ln--){var an=Fe[ln];if(!(Jt.w>an.w||Jt.h>an.h)){if(Jt.x=an.x,Jt.y=an.y,lt=Math.max(lt,Jt.y+Jt.h),Ze=Math.max(Ze,Jt.x+Jt.w),Jt.w===an.w&&Jt.h===an.h){var xn=Fe.pop();ln<Fe.length&&(Fe[ln]=xn)}else Jt.h===an.h?(an.x+=Jt.w,an.w-=Jt.w):Jt.w===an.w?(an.y+=Jt.h,an.h-=Jt.h):(Fe.push({x:an.x+Jt.w,y:an.y,w:an.w-Jt.w,h:Jt.h}),an.y+=Jt.h,an.h-=Jt.h);break}}return{w:Ze,h:lt,fill:z/(Ze*lt)||0}}Yo.prototype={destroy:function(){this.buf=null},readFields:function(M,z,J){for(J=J||this.length;this.pos<J;){var se=this.readVarint(),ve=se>>3,Me=this.pos;this.type=7&se,M(ve,z,this),this.pos===Me&&this.skip(se)}return z},readMessage:function(M,z){return this.readFields(M,z,this.readVarint()+this.pos)},readFixed32:function(){var M=qh(this.buf,this.pos);return this.pos+=4,M},readSFixed32:function(){var M=Ib(this.buf,this.pos);return this.pos+=4,M},readFixed64:function(){var M=qh(this.buf,this.pos)+4294967296*qh(this.buf,this.pos+4);return this.pos+=8,M},readSFixed64:function(){var M=qh(this.buf,this.pos)+4294967296*Ib(this.buf,this.pos+4);return this.pos+=8,M},readFloat:function(){var M=Ly(this.buf,this.pos,!0,23,4);return this.pos+=4,M},readDouble:function(){var M=Ly(this.buf,this.pos,!0,52,8);return this.pos+=8,M},readVarint:function(M){var z,J,se=this.buf;return z=127&(J=se[this.pos++]),J<128?z:(z|=(127&(J=se[this.pos++]))<<7,J<128?z:(z|=(127&(J=se[this.pos++]))<<14,J<128?z:(z|=(127&(J=se[this.pos++]))<<21,J<128?z:function(ve,Me,Fe){var Ze,lt,Tt=Fe.buf;if(Ze=(112&(lt=Tt[Fe.pos++]))>>4,lt<128||(Ze|=(127&(lt=Tt[Fe.pos++]))<<3,lt<128)||(Ze|=(127&(lt=Tt[Fe.pos++]))<<10,lt<128)||(Ze|=(127&(lt=Tt[Fe.pos++]))<<17,lt<128)||(Ze|=(127&(lt=Tt[Fe.pos++]))<<24,lt<128)||(Ze|=(1&(lt=Tt[Fe.pos++]))<<31,lt<128))return function(M,z,J){return J?4294967296*z+(M>>>0):4294967296*(z>>>0)+(M>>>0)}(ve,Ze,Me);throw new Error("Expected varint not more than 10 bytes")}(z|=(15&(J=se[this.pos]))<<28,M,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var M=this.readVarint();return M%2==1?(M+1)/-2:M/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var M=this.readVarint()+this.pos,z=this.pos;return this.pos=M,M-z>=12&&Fy?Fy.decode(this.buf.subarray(z,M)):function(J,se,ve){for(var Me="",Fe=se;Fe<ve;){var Ze,lt,Tt,Dt=J[Fe],Jt=null,ln=Dt>239?4:Dt>223?3:Dt>191?2:1;if(Fe+ln>ve)break;1===ln?Dt<128&&(Jt=Dt):2===ln?128==(192&(Ze=J[Fe+1]))&&(Jt=(31&Dt)<<6|63&Ze)<=127&&(Jt=null):3===ln?(lt=J[Fe+2],128==(192&(Ze=J[Fe+1]))&&128==(192&lt)&&((Jt=(15&Dt)<<12|(63&Ze)<<6|63&lt)<=2047||Jt>=55296&&Jt<=57343)&&(Jt=null)):4===ln&&(lt=J[Fe+2],Tt=J[Fe+3],128==(192&(Ze=J[Fe+1]))&&128==(192&lt)&&128==(192&Tt)&&((Jt=(15&Dt)<<18|(63&Ze)<<12|(63&lt)<<6|63&Tt)<=65535||Jt>=1114112)&&(Jt=null)),null===Jt?(Jt=65533,ln=1):Jt>65535&&(Jt-=65536,Me+=String.fromCharCode(Jt>>>10&1023|55296),Jt=56320|1023&Jt),Me+=String.fromCharCode(Jt),Fe+=ln}return Me}(this.buf,z,M)},readBytes:function(){var M=this.readVarint()+this.pos,z=this.buf.subarray(this.pos,M);return this.pos=M,z},readPackedVarint:function(M,z){if(this.type!==Yo.Bytes)return M.push(this.readVarint(z));var J=Ku(this);for(M=M||[];this.pos<J;)M.push(this.readVarint(z));return M},readPackedSVarint:function(M){if(this.type!==Yo.Bytes)return M.push(this.readSVarint());var z=Ku(this);for(M=M||[];this.pos<z;)M.push(this.readSVarint());return M},readPackedBoolean:function(M){if(this.type!==Yo.Bytes)return M.push(this.readBoolean());var z=Ku(this);for(M=M||[];this.pos<z;)M.push(this.readBoolean());return M},readPackedFloat:function(M){if(this.type!==Yo.Bytes)return M.push(this.readFloat());var z=Ku(this);for(M=M||[];this.pos<z;)M.push(this.readFloat());return M},readPackedDouble:function(M){if(this.type!==Yo.Bytes)return M.push(this.readDouble());var z=Ku(this);for(M=M||[];this.pos<z;)M.push(this.readDouble());return M},readPackedFixed32:function(M){if(this.type!==Yo.Bytes)return M.push(this.readFixed32());var z=Ku(this);for(M=M||[];this.pos<z;)M.push(this.readFixed32());return M},readPackedSFixed32:function(M){if(this.type!==Yo.Bytes)return M.push(this.readSFixed32());var z=Ku(this);for(M=M||[];this.pos<z;)M.push(this.readSFixed32());return M},readPackedFixed64:function(M){if(this.type!==Yo.Bytes)return M.push(this.readFixed64());var z=Ku(this);for(M=M||[];this.pos<z;)M.push(this.readFixed64());return M},readPackedSFixed64:function(M){if(this.type!==Yo.Bytes)return M.push(this.readSFixed64());var z=Ku(this);for(M=M||[];this.pos<z;)M.push(this.readSFixed64());return M},skip:function(M){var z=7&M;if(z===Yo.Varint)for(;this.buf[this.pos++]>127;);else if(z===Yo.Bytes)this.pos=this.readVarint()+this.pos;else if(z===Yo.Fixed32)this.pos+=4;else{if(z!==Yo.Fixed64)throw new Error("Unimplemented type: "+z);this.pos+=8}},writeTag:function(M,z){this.writeVarint(M<<3|z)},realloc:function(M){for(var z=this.length||16;z<this.pos+M;)z*=2;if(z!==this.length){var J=new Uint8Array(z);J.set(this.buf),this.buf=J,this.length=z}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(M){this.realloc(4),Xd(this.buf,M,this.pos),this.pos+=4},writeSFixed32:function(M){this.realloc(4),Xd(this.buf,M,this.pos),this.pos+=4},writeFixed64:function(M){this.realloc(8),Xd(this.buf,-1&M,this.pos),Xd(this.buf,Math.floor(M*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(M){this.realloc(8),Xd(this.buf,-1&M,this.pos),Xd(this.buf,Math.floor(M*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(M){(M=+M||0)>268435455||M<0?function(z,J){var se,ve,Me,Ze;if(z>=0?(se=z%4294967296|0,ve=z/4294967296|0):(ve=~(-z/4294967296),4294967295^(se=~(-z%4294967296))?se=se+1|0:(se=0,ve=ve+1|0)),z>=0x10000000000000000||z<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");J.realloc(10),Me=se,(Ze=J).buf[Ze.pos++]=127&Me|128,Me>>>=7,Ze.buf[Ze.pos++]=127&Me|128,Me>>>=7,Ze.buf[Ze.pos++]=127&Me|128,Me>>>=7,Ze.buf[Ze.pos++]=127&Me|128,Ze.buf[Ze.pos]=127&(Me>>>=7),function(Me,Fe){var Ze=(7&Me)<<4;Fe.buf[Fe.pos++]|=Ze|((Me>>>=3)?128:0),Me&&(Fe.buf[Fe.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Fe.buf[Fe.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Fe.buf[Fe.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Fe.buf[Fe.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Fe.buf[Fe.pos++]=127&Me)))))}(ve,J)}(M,this):(this.realloc(4),this.buf[this.pos++]=127&M|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=M>>>7&127))))},writeSVarint:function(M){this.writeVarint(M<0?2*-M-1:2*M)},writeBoolean:function(M){this.writeVarint(Boolean(M))},writeString:function(M){M=String(M),this.realloc(4*M.length),this.pos++;var z=this.pos;this.pos=function(se,ve,Me){for(var Fe,Ze,lt=0;lt<ve.length;lt++){if((Fe=ve.charCodeAt(lt))>55295&&Fe<57344){if(!Ze){Fe>56319||lt+1===ve.length?(se[Me++]=239,se[Me++]=191,se[Me++]=189):Ze=Fe;continue}if(Fe<56320){se[Me++]=239,se[Me++]=191,se[Me++]=189,Ze=Fe;continue}Fe=Ze-55296<<10|Fe-56320|65536,Ze=null}else Ze&&(se[Me++]=239,se[Me++]=191,se[Me++]=189,Ze=null);Fe<128?se[Me++]=Fe:(Fe<2048?se[Me++]=Fe>>6|192:(Fe<65536?se[Me++]=Fe>>12|224:(se[Me++]=Fe>>18|240,se[Me++]=Fe>>12&63|128),se[Me++]=Fe>>6&63|128),se[Me++]=63&Fe|128)}return Me}(this.buf,M,this.pos);var J=this.pos-z;J>=128&&Pc(z,J,this),this.pos=z-1,this.writeVarint(J),this.pos+=J},writeFloat:function(M){this.realloc(4),Ry(this.buf,M,this.pos,!0,23,4),this.pos+=4},writeDouble:function(M){this.realloc(8),Ry(this.buf,M,this.pos,!0,52,8),this.pos+=8},writeBytes:function(M){var z=M.length;this.writeVarint(z),this.realloc(z);for(var J=0;J<z;J++)this.buf[this.pos++]=M[J]},writeRawMessage:function(M,z){this.pos++;var J=this.pos;M(z,this);var se=this.pos-J;se>=128&&Pc(J,se,this),this.pos=J-1,this.writeVarint(se),this.pos+=se},writeMessage:function(M,z,J){this.writeTag(M,Yo.Bytes),this.writeRawMessage(z,J)},writePackedVarint:function(M,z){z.length&&this.writeMessage(M,Zd,z)},writePackedSVarint:function(M,z){z.length&&this.writeMessage(M,Ny,z)},writePackedBoolean:function(M,z){z.length&&this.writeMessage(M,Rw,z)},writePackedFloat:function(M,z){z.length&&this.writeMessage(M,zy,z)},writePackedDouble:function(M,z){z.length&&this.writeMessage(M,By,z)},writePackedFixed32:function(M,z){z.length&&this.writeMessage(M,Fw,z)},writePackedSFixed32:function(M,z){z.length&&this.writeMessage(M,Nw,z)},writePackedFixed64:function(M,z){z.length&&this.writeMessage(M,kg,z)},writePackedSFixed64:function(M,z){z.length&&this.writeMessage(M,Dg,z)},writeBytesField:function(M,z){this.writeTag(M,Yo.Bytes),this.writeBytes(z)},writeFixed32Field:function(M,z){this.writeTag(M,Yo.Fixed32),this.writeFixed32(z)},writeSFixed32Field:function(M,z){this.writeTag(M,Yo.Fixed32),this.writeSFixed32(z)},writeFixed64Field:function(M,z){this.writeTag(M,Yo.Fixed64),this.writeFixed64(z)},writeSFixed64Field:function(M,z){this.writeTag(M,Yo.Fixed64),this.writeSFixed64(z)},writeVarintField:function(M,z){this.writeTag(M,Yo.Varint),this.writeVarint(z)},writeSVarintField:function(M,z){this.writeTag(M,Yo.Varint),this.writeSVarint(z)},writeStringField:function(M,z){this.writeTag(M,Yo.Bytes),this.writeString(z)},writeFloatField:function(M,z){this.writeTag(M,Yo.Fixed32),this.writeFloat(z)},writeDoubleField:function(M,z){this.writeTag(M,Yo.Fixed64),this.writeDouble(z)},writeBooleanField:function(M,z){this.writeVarintField(M,Boolean(z))}};var $p=function(M,z){var J=z.pixelRatio,se=z.version,ve=z.stretchX,Me=z.stretchY,Fe=z.content;this.paddedRect=M,this.pixelRatio=J,this.stretchX=ve,this.stretchY=Me,this.content=Fe,this.version=se},Wh={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Wh.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Wh.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Wh.tlbr.get=function(){return this.tl.concat(this.br)},Wh.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties($p.prototype,Wh);var $f=function(M,z){var J={},se={};this.haveRenderCallbacks=[];var ve=[];this.addImages(M,J,ve),this.addImages(z,se,ve);var Me=Vy(ve),lt=new ms({width:Me.w||1,height:Me.h||1});for(var Tt in M){var Dt=M[Tt],Jt=J[Tt].paddedRect;ms.copy(Dt.data,lt,{x:0,y:0},{x:Jt.x+1,y:Jt.y+1},Dt.data)}for(var ln in z){var an=z[ln],xn=se[ln].paddedRect,On=xn.x+1,Xn=xn.y+1,Yn=an.data.width,ar=an.data.height;ms.copy(an.data,lt,{x:0,y:0},{x:On,y:Xn},an.data),ms.copy(an.data,lt,{x:0,y:ar-1},{x:On,y:Xn-1},{width:Yn,height:1}),ms.copy(an.data,lt,{x:0,y:0},{x:On,y:Xn+ar},{width:Yn,height:1}),ms.copy(an.data,lt,{x:Yn-1,y:0},{x:On-1,y:Xn},{width:1,height:ar}),ms.copy(an.data,lt,{x:0,y:0},{x:On+Yn,y:Xn},{width:1,height:ar})}this.image=lt,this.iconPositions=J,this.patternPositions=se};$f.prototype.addImages=function(M,z,J){for(var se in M){var ve=M[se],Me={x:0,y:0,w:ve.data.width+2,h:ve.data.height+2};J.push(Me),z[se]=new $p(Me,ve),ve.hasRenderCallback&&this.haveRenderCallbacks.push(se)}},$f.prototype.patchUpdatedImages=function(M,z){for(var J in M.dispatchRenderCallbacks(this.haveRenderCallbacks),M.updatedImages)this.patchUpdatedImage(this.iconPositions[J],M.getImage(J),z),this.patchUpdatedImage(this.patternPositions[J],M.getImage(J),z)},$f.prototype.patchUpdatedImage=function(M,z,J){if(M&&z&&M.version!==z.version){M.version=z.version;var se=M.tl;J.update(z.data,void 0,{x:se[0],y:se[1]})}},ur("ImagePosition",$p),ur("ImageAtlas",$f);var bu={horizontal:1,vertical:2,horizontalOnly:3},Yf=function(){this.scale=1,this.fontStack="",this.imageName=null};Yf.forText=function(M,z){var J=new Yf;return J.scale=M||1,J.fontStack=z,J},Yf.forImage=function(M){var z=new Yf;return z.imageName=M,z};var zl=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Zo(M,z,J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt,ln,an,xn,On){var Xn,Yn=zl.fromFeature(M,ve);Jt===bu.vertical&&Yn.verticalizePunctuation();var ar=As.processBidirectionalText,or=As.processStyledBidirectionalText;if(ar&&1===Yn.sections.length){Xn=[];for(var cr=0,Sr=ar(Yn.toString(),Cg(Yn,Tt,Me,z,se,an,xn));cr<Sr.length;cr+=1){var Rr=Sr[cr],si=new zl;si.text=Rr,si.sections=Yn.sections;for(var ii=0;ii<Rr.length;ii++)si.sectionIndex.push(0);Xn.push(si)}}else if(or){Xn=[];for(var _i=0,Ui=or(Yn.text,Yn.sectionIndex,Cg(Yn,Tt,Me,z,se,an,xn));_i<Ui.length;_i+=1){var Vi=Ui[_i],Si=new zl;Si.text=Vi[0],Si.sectionIndex=Vi[1],Si.sections=Yn.sections,Xn.push(Si)}}else Xn=function(Hi,Aa){for(var Ga=[],to=Hi.text,ua=0,Ya=0,Uo=Aa;Ya<Uo.length;Ya+=1){var zo=Uo[Ya];Ga.push(Hi.substring(ua,zo)),ua=zo}return ua<to.length&&Ga.push(Hi.substring(ua,to.length)),Ga}(Yn,Cg(Yn,Tt,Me,z,se,an,xn));var Zi=[],Yi={positionedLines:Zi,text:Yn.toString(),top:Dt[1],bottom:Dt[1],left:Dt[0],right:Dt[0],writingMode:Jt,iconsInText:!1,verticalizable:!1};return function(Hi,Aa,Ga,to,ua,Ya,Uo,zo,Jo,Bo,el,rs){for(var oa=0,Kr=-17,hl=0,Al=0,vs="right"===zo?1:"left"===zo?0:.5,Ws=0,Ml=0,Es=ua;Ml<Es.length;Ml+=1){var Ko=Es[Ml];Ko.trim();var ka=Ko.getMaxScale(),Ka=24*(ka-1),bs={positionedGlyphs:[],lineOffset:0};Hi.positionedLines[Ws]=bs;var Bs=bs.positionedGlyphs,_s=0;if(Ko.length()){for(var xs=0;xs<Ko.length();xs++){var Na=Ko.getSection(xs),is=Ko.getSectionIndex(xs),kl=Ko.getCharCode(xs),Yl=0,Zl=null,Oc=null,ef=null,Dl=24,Lc=!(Jo===bu.horizontal||!el&&!Ki(kl)||el&&(Yp[kl]||(bh=kl,Yr.Arabic(bh)||Yr["Arabic Supplement"](bh)||Yr["Arabic Extended-A"](bh)||Yr["Arabic Presentation Forms-A"](bh)||Yr["Arabic Presentation Forms-B"](bh))));if(Na.imageName){var tf=to[Na.imageName];if(!tf)continue;ef=Na.imageName,Hi.iconsInText=Hi.iconsInText||!0,Oc=tf.paddedRect;var dc=tf.displaySize;Na.scale=24*Na.scale/rs,Yl=Ka+(24-dc[1]*Na.scale),Dl=(Zl={width:dc[0],height:dc[1],left:1,top:-3,advance:Lc?dc[1]:dc[0]}).advance;var ed=Lc?dc[0]*Na.scale-24*ka:dc[1]*Na.scale-24*ka;ed>0&&ed>_s&&(_s=ed)}else{var td=Ga[Na.fontStack],nd=td&&td[kl];if(nd&&nd.rect)Oc=nd.rect,Zl=nd.metrics;else{var qg=Aa[Na.fontStack],Wg=qg&&qg[kl];if(!Wg)continue;Zl=Wg.metrics}Yl=24*(ka-Na.scale)}Lc?(Hi.verticalizable=!0,Bs.push({glyph:kl,imageName:ef,x:oa,y:Kr+Yl,vertical:Lc,scale:Na.scale,fontStack:Na.fontStack,sectionIndex:is,metrics:Zl,rect:Oc}),oa+=Dl*Na.scale+Bo):(Bs.push({glyph:kl,imageName:ef,x:oa,y:Kr+Yl,vertical:Lc,scale:Na.scale,fontStack:Na.fontStack,sectionIndex:is,metrics:Zl,rect:Oc}),oa+=Zl.advance*Na.scale+Bo)}0!==Bs.length&&(hl=Math.max(oa-Bo,hl),Rb(Bs,0,Bs.length-1,vs,_s)),oa=0;var Yg=Ya*ka+_s;bs.lineOffset=Math.max(_s,Ka),Kr+=Yg,Al=Math.max(Yg,Al),++Ws}else Kr+=Ya,++Ws}var bh,np=Kr- -17,Zg=Sg(Uo),rp=Zg.horizontalAlign,_h=Zg.verticalAlign;(function(s0,Rc,rd,l0,id,ad,od,sd,ip){var xh,Fc=(Rc-rd)*id;xh=ad!==od?-sd*l0- -17:(-l0*ip+.5)*od;for(var ld=0,ap=s0;ld<ap.length;ld+=1)for(var cd=0,fd=ap[ld].positionedGlyphs;cd<fd.length;cd+=1){var hd=fd[cd];hd.x+=Fc,hd.y+=xh}})(Hi.positionedLines,vs,rp,_h,hl,Al,Ya,np,ua.length),Hi.top+=-_h*np,Hi.bottom=Hi.top+np,Hi.left+=-rp*hl,Hi.right=Hi.left+hl}(Yi,z,J,se,Xn,Fe,Ze,lt,Jt,Tt,ln,On),!function(Hi){for(var Aa=0,Ga=Hi;Aa<Ga.length;Aa+=1)if(0!==Ga[Aa].positionedGlyphs.length)return!1;return!0}(Zi)&&Yi}zl.fromFeature=function(M,z){for(var J=new zl,se=0;se<M.sections.length;se++){var ve=M.sections[se];ve.image?J.addImageSection(ve):J.addTextSection(ve,z)}return J},zl.prototype.length=function(){return this.text.length},zl.prototype.getSection=function(M){return this.sections[this.sectionIndex[M]]},zl.prototype.getSectionIndex=function(M){return this.sectionIndex[M]},zl.prototype.getCharCode=function(M){return this.text.charCodeAt(M)},zl.prototype.verticalizePunctuation=function(){this.text=function(M){for(var z="",J=0;J<M.length;J++){var se=M.charCodeAt(J+1)||null,ve=M.charCodeAt(J-1)||null;se&&Ar(se)&&!Yd[M[J+1]]||ve&&Ar(ve)&&!Yd[M[J-1]]||!Yd[M[J]]?z+=M[J]:z+=Yd[M[J]]}return z}(this.text)},zl.prototype.trim=function(){for(var M=0,z=0;z<this.text.length&&Yp[this.text.charCodeAt(z)];z++)M++;for(var J=this.text.length,se=this.text.length-1;se>=0&&se>=M&&Yp[this.text.charCodeAt(se)];se--)J--;this.text=this.text.substring(M,J),this.sectionIndex=this.sectionIndex.slice(M,J)},zl.prototype.substring=function(M,z){var J=new zl;return J.text=this.text.substring(M,z),J.sectionIndex=this.sectionIndex.slice(M,z),J.sections=this.sections,J},zl.prototype.toString=function(){return this.text},zl.prototype.getMaxScale=function(){var M=this;return this.sectionIndex.reduce(function(z,J){return Math.max(z,M.sections[J].scale)},0)},zl.prototype.addTextSection=function(M,z){this.text+=M.text,this.sections.push(Yf.forText(M.scale,M.fontStack||z));for(var J=this.sections.length-1,se=0;se<M.text.length;++se)this.sectionIndex.push(J)},zl.prototype.addImageSection=function(M){var z=M.image?M.image.name:"";if(0!==z.length){var J=this.getNextImageSectionCharCode();J?(this.text+=String.fromCharCode(J),this.sections.push(Yf.forImage(z)),this.sectionIndex.push(this.sections.length-1)):D("Reached maximum number of images 6401")}else D("Can't add FormattedSection with an empty image.")},zl.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Yp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_u={};function Zp(M,z,J,se,ve,Me){if(z.imageName){var Fe=se[z.imageName];return Fe?Fe.displaySize[0]*z.scale*24/Me+ve:0}var Ze=J[z.fontStack],lt=Ze&&Ze[M];return lt?lt.metrics.advance*z.scale+ve:0}function Eg(M,z,J,se){var ve=Math.pow(M-z,2);return se?M<z?ve/2:2*ve:ve+Math.abs(J)*J}function Lb(M,z,J){var se=0;return 10===M&&(se-=1e4),J&&(se+=150),40!==M&&65288!==M||(se+=50),41!==z&&65289!==z||(se+=50),se}function Uy(M,z,J,se,ve,Me){for(var Fe=null,Ze=Eg(z,J,ve,Me),lt=0,Tt=se;lt<Tt.length;lt+=1){var Dt=Tt[lt],Jt=Eg(z-Dt.x,J,ve,Me)+Dt.badness;Jt<=Ze&&(Fe=Dt,Ze=Jt)}return{index:M,x:z,priorBreak:Fe,badness:Ze}}function Cg(M,z,J,se,ve,Me,Fe){if("point"!==Me)return[];if(!M)return[];for(var Ze,lt=[],Tt=function(Xn,Yn,ar,or,cr,Sr){for(var Rr=0,si=0;si<Xn.length();si++){var ii=Xn.getSection(si);Rr+=Zp(Xn.getCharCode(si),ii,or,cr,Yn,Sr)}return Rr/Math.max(1,Math.ceil(Rr/ar))}(M,z,J,se,ve,Fe),Dt=M.text.indexOf("\u200b")>=0,Jt=0,ln=0;ln<M.length();ln++){var an=M.getSection(ln),xn=M.getCharCode(ln);if(Yp[xn]||(Jt+=Zp(xn,an,se,ve,z,Fe)),ln<M.length()-1){var On=!((Ze=xn)<11904||!(Yr["Bopomofo Extended"](Ze)||Yr.Bopomofo(Ze)||Yr["CJK Compatibility Forms"](Ze)||Yr["CJK Compatibility Ideographs"](Ze)||Yr["CJK Compatibility"](Ze)||Yr["CJK Radicals Supplement"](Ze)||Yr["CJK Strokes"](Ze)||Yr["CJK Symbols and Punctuation"](Ze)||Yr["CJK Unified Ideographs Extension A"](Ze)||Yr["CJK Unified Ideographs"](Ze)||Yr["Enclosed CJK Letters and Months"](Ze)||Yr["Halfwidth and Fullwidth Forms"](Ze)||Yr.Hiragana(Ze)||Yr["Ideographic Description Characters"](Ze)||Yr["Kangxi Radicals"](Ze)||Yr["Katakana Phonetic Extensions"](Ze)||Yr.Katakana(Ze)||Yr["Vertical Forms"](Ze)||Yr["Yi Radicals"](Ze)||Yr["Yi Syllables"](Ze)));(_u[xn]||On||an.imageName)&&lt.push(Uy(ln+1,Jt,Tt,lt,Lb(xn,M.getCharCode(ln+1),On&&Dt),!1))}}return function Xn(Yn){return Yn?Xn(Yn.priorBreak).concat(Yn.index):[]}(Uy(M.length(),Jt,Tt,lt,0,!0))}function Sg(M){var z=.5,J=.5;switch(M){case"right":case"top-right":case"bottom-right":z=1;break;case"left":case"top-left":case"bottom-left":z=0}switch(M){case"bottom":case"bottom-right":case"bottom-left":J=1;break;case"top":case"top-right":case"top-left":J=0}return{horizontalAlign:z,verticalAlign:J}}function Rb(M,z,J,se,ve){if(se||ve)for(var Me=M[J],Ze=(M[J].x+Me.metrics.advance*Me.scale)*se,lt=z;lt<=J;lt++)M[lt].x-=Ze,M[lt].y+=ve}function Fb(M,z,J,se,ve,Me){var Fe,Ze=M.image;if(Ze.content){var lt=Ze.content,Tt=Ze.pixelRatio||1;Fe=[lt[0]/Tt,lt[1]/Tt,Ze.displaySize[0]-lt[2]/Tt,Ze.displaySize[1]-lt[3]/Tt]}var Dt,Jt,ln,an,xn=z.left*Me,On=z.right*Me;"width"===J||"both"===J?(an=ve[0]+xn-se[3],Jt=ve[0]+On+se[1]):Jt=(an=ve[0]+(xn+On-Ze.displaySize[0])/2)+Ze.displaySize[0];var Xn=z.top*Me,Yn=z.bottom*Me;return"height"===J||"both"===J?(Dt=ve[1]+Xn-se[0],ln=ve[1]+Yn+se[2]):ln=(Dt=ve[1]+(Xn+Yn-Ze.displaySize[1])/2)+Ze.displaySize[1],{image:Ze,top:Dt,right:Jt,bottom:ln,left:an,collisionPadding:Fe}}_u[10]=!0,_u[32]=!0,_u[38]=!0,_u[40]=!0,_u[41]=!0,_u[43]=!0,_u[45]=!0,_u[47]=!0,_u[173]=!0,_u[183]=!0,_u[8203]=!0,_u[8208]=!0,_u[8211]=!0,_u[8231]=!0;var Jd=function(M){function z(J,se,ve,Me){M.call(this,J,se),this.angle=ve,void 0!==Me&&(this.segment=Me)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.clone=function(){return new z(this.x,this.y,this.angle,this.segment)},z}(f);function mh(M,z){var J=z.expression;if("constant"===J.kind)return{kind:"constant",layoutSize:J.evaluate(new Fa(M+1))};if("source"===J.kind)return{kind:"source"};for(var se=J.zoomStops,ve=J.interpolationType,Me=0;Me<se.length&&se[Me]<=M;)Me++;for(var Fe=Me=Math.max(0,Me-1);Fe<se.length&&se[Fe]<M+1;)Fe++;Fe=Math.min(se.length-1,Fe);var Ze=se[Me],lt=se[Fe];return"composite"===J.kind?{kind:"composite",minZoom:Ze,maxZoom:lt,interpolationType:ve}:{kind:"camera",minZoom:Ze,maxZoom:lt,minSize:J.evaluate(new Fa(Ze)),maxSize:J.evaluate(new Fa(lt)),interpolationType:ve}}function lu(M,z,J){var se=z.uSize,Me=J.lowerSize;return"source"===M.kind?Me/128:"composite"===M.kind?Ri(Me/128,J.upperSize/128,z.uSizeT):se}function Xp(M,z){var J=0,se=0;if("constant"===M.kind)se=M.layoutSize;else if("source"!==M.kind){var ve=M.interpolationType,Ze=ve?g(Pa.interpolationFactor(ve,z,M.minZoom,M.maxZoom),0,1):0;"camera"===M.kind?se=Ri(M.minSize,M.maxSize,Ze):J=Ze}return{uSizeT:J,uSize:se}}ur("Anchor",Jd);var Hy=Object.freeze({__proto__:null,getSizeData:mh,evaluateSizeForFeature:lu,evaluateSizeForZoom:Xp,SIZE_PACK_FACTOR:128});function Ig(M,z,J,se,ve){if(void 0===z.segment)return!0;for(var Me=z,Fe=z.segment+1,Ze=0;Ze>-J/2;){if(--Fe<0)return!1;Ze-=M[Fe].dist(Me),Me=M[Fe]}Ze+=M[Fe].dist(M[Fe+1]),Fe++;for(var lt=[],Tt=0;Ze<J/2;){var Jt=M[Fe],ln=M[Fe+1];if(!ln)return!1;var an=M[Fe-1].angleTo(Jt)-Jt.angleTo(ln);for(an=Math.abs((an+3*Math.PI)%(2*Math.PI)-Math.PI),lt.push({distance:Ze,angleDelta:an}),Tt+=an;Ze-lt[0].distance>se;)Tt-=lt.shift().angleDelta;if(Tt>ve)return!1;Fe++,Ze+=Jt.dist(ln)}return!0}function $l(M){for(var z=0,J=0;J<M.length-1;J++)z+=M[J].dist(M[J+1]);return z}function $h(M,z,J){return M?.6*z*J:0}function Jp(M,z){return Math.max(M?M.right-M.left:0,z?z.right-z.left:0)}function Nb(M,z,J,se,ve,Me){for(var Fe=$h(J,ve,Me),Ze=Jp(J,se)*Me,lt=0,Tt=$l(M)/2,Dt=0;Dt<M.length-1;Dt++){var Jt=M[Dt],ln=M[Dt+1],an=Jt.dist(ln);if(lt+an>Tt){var xn=(Tt-lt)/an,On=Ri(Jt.x,ln.x,xn),Xn=Ri(Jt.y,ln.y,xn),Yn=new Jd(On,Xn,ln.angleTo(Jt),Dt);return Yn._round(),!Fe||Ig(M,Yn,Ze,Fe,z)?Yn:void 0}lt+=an}}function zb(M,z,J,se,ve,Me,Fe,Ze,lt){var Tt=$h(se,Me,Fe),Dt=Jp(se,ve),Jt=Dt*Fe,ln=0===M[0].x||M[0].x===lt||0===M[0].y||M[0].y===lt;return z-Jt<z/4&&(z=Jt+z/4),function an(xn,On,Xn,Yn,ar,or,cr,Sr,Rr){for(var si=or/2,ii=$l(xn),_i=0,Ui=On-Xn,Vi=[],Si=0;Si<xn.length-1;Si++){for(var Zi=xn[Si],Yi=xn[Si+1],Hi=Zi.dist(Yi),Aa=Yi.angleTo(Zi);Ui+Xn<_i+Hi;){var Ga=((Ui+=Xn)-_i)/Hi,to=Ri(Zi.x,Yi.x,Ga),ua=Ri(Zi.y,Yi.y,Ga);if(to>=0&&to<Rr&&ua>=0&&ua<Rr&&Ui-si>=0&&Ui+si<=ii){var Ya=new Jd(to,ua,Aa,Si);Ya._round(),Yn&&!Ig(xn,Ya,or,Yn,ar)||Vi.push(Ya)}}_i+=Hi}return Sr||Vi.length||cr||(Vi=an(xn,_i/2,Xn,Yn,ar,or,cr,!0,Rr)),Vi}(M,ln?z/2*Ze%z:(Dt/2+2*Me)*Fe*Ze%z,z,Tt,J,Jt,ln,!1,lt)}function Pg(M,z,J,se,ve){for(var Me=[],Fe=0;Fe<M.length;Fe++)for(var Ze=M[Fe],lt=void 0,Tt=0;Tt<Ze.length-1;Tt++){var Dt=Ze[Tt],Jt=Ze[Tt+1];Dt.x<z&&Jt.x<z||(Dt.x<z?Dt=new f(z,Dt.y+(z-Dt.x)/(Jt.x-Dt.x)*(Jt.y-Dt.y))._round():Jt.x<z&&(Jt=new f(z,Dt.y+(z-Dt.x)/(Jt.x-Dt.x)*(Jt.y-Dt.y))._round()),Dt.y<J&&Jt.y<J||(Dt.y<J?Dt=new f(Dt.x+(J-Dt.y)/(Jt.y-Dt.y)*(Jt.x-Dt.x),J)._round():Jt.y<J&&(Jt=new f(Dt.x+(J-Dt.y)/(Jt.y-Dt.y)*(Jt.x-Dt.x),J)._round()),Dt.x>=se&&Jt.x>=se||(Dt.x>=se?Dt=new f(se,Dt.y+(se-Dt.x)/(Jt.x-Dt.x)*(Jt.y-Dt.y))._round():Jt.x>=se&&(Jt=new f(se,Dt.y+(se-Dt.x)/(Jt.x-Dt.x)*(Jt.y-Dt.y))._round()),Dt.y>=ve&&Jt.y>=ve||(Dt.y>=ve?Dt=new f(Dt.x+(ve-Dt.y)/(Jt.y-Dt.y)*(Jt.x-Dt.x),ve)._round():Jt.y>=ve&&(Jt=new f(Dt.x+(ve-Dt.y)/(Jt.y-Dt.y)*(Jt.x-Dt.x),ve)._round()),lt&&Dt.equals(lt[lt.length-1])||Me.push(lt=[Dt]),lt.push(Jt)))))}return Me}function Gy(M,z,J,se){var ve=[],Me=M.image,Fe=Me.pixelRatio,Ze=Me.paddedRect.w-2,lt=Me.paddedRect.h-2,Tt=M.right-M.left,Dt=M.bottom-M.top,Jt=Me.stretchX||[[0,Ze]],ln=Me.stretchY||[[0,lt]],an=function(Ya,Uo){return Ya+Uo[1]-Uo[0]},xn=Jt.reduce(an,0),On=ln.reduce(an,0),Xn=Ze-xn,Yn=lt-On,ar=0,or=xn,cr=0,Sr=On,Rr=0,si=Xn,ii=0,_i=Yn;if(Me.content&&se){var Ui=Me.content;ar=Kd(Jt,0,Ui[0]),cr=Kd(ln,0,Ui[1]),or=Kd(Jt,Ui[0],Ui[2]),Sr=Kd(ln,Ui[1],Ui[3]),Rr=Ui[0]-ar,ii=Ui[1]-cr,si=Ui[2]-Ui[0]-or,_i=Ui[3]-Ui[1]-Sr}var Vi=function(Ya,Uo,zo,Jo){var Bo=Qd(Ya.stretch-ar,or,Tt,M.left),el=Kp(Ya.fixed-Rr,si,Ya.stretch,xn),rs=Qd(Uo.stretch-cr,Sr,Dt,M.top),oa=Kp(Uo.fixed-ii,_i,Uo.stretch,On),Kr=Qd(zo.stretch-ar,or,Tt,M.left),hl=Kp(zo.fixed-Rr,si,zo.stretch,xn),Al=Qd(Jo.stretch-cr,Sr,Dt,M.top),vs=Kp(Jo.fixed-ii,_i,Jo.stretch,On),Ws=new f(Bo,rs),Ml=new f(Kr,rs),Es=new f(Kr,Al),Ko=new f(Bo,Al),ka=new f(el/Fe,oa/Fe),Ka=new f(hl/Fe,vs/Fe),bs=z*Math.PI/180;if(bs){var Bs=Math.sin(bs),_s=Math.cos(bs),xs=[_s,-Bs,Bs,_s];Ws._matMult(xs),Ml._matMult(xs),Ko._matMult(xs),Es._matMult(xs)}var Na=Ya.stretch+Ya.fixed,kl=Uo.stretch+Uo.fixed;return{tl:Ws,tr:Ml,bl:Ko,br:Es,tex:{x:Me.paddedRect.x+1+Na,y:Me.paddedRect.y+1+kl,w:zo.stretch+zo.fixed-Na,h:Jo.stretch+Jo.fixed-kl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ka,pixelOffsetBR:Ka,minFontScaleX:si/Fe/Tt,minFontScaleY:_i/Fe/Dt,isSDF:J}};if(se&&(Me.stretchX||Me.stretchY))for(var Si=qy(Jt,Xn,xn),Zi=qy(ln,Yn,On),Yi=0;Yi<Si.length-1;Yi++)for(var Hi=Si[Yi],Aa=Si[Yi+1],Ga=0;Ga<Zi.length-1;Ga++)ve.push(Vi(Hi,Zi[Ga],Aa,Zi[Ga+1]));else ve.push(Vi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ze+1},{fixed:0,stretch:lt+1}));return ve}function Kd(M,z,J){for(var se=0,ve=0,Me=M;ve<Me.length;ve+=1){var Fe=Me[ve];se+=Math.max(z,Math.min(J,Fe[1]))-Math.max(z,Math.min(J,Fe[0]))}return se}function qy(M,z,J){for(var se=[{fixed:-1,stretch:0}],ve=0,Me=M;ve<Me.length;ve+=1){var Fe=Me[ve],Ze=Fe[0],lt=Fe[1],Tt=se[se.length-1];se.push({fixed:Ze-Tt.stretch,stretch:Tt.stretch}),se.push({fixed:Ze-Tt.stretch,stretch:Tt.stretch+(lt-Ze)})}return se.push({fixed:z+1,stretch:J}),se}function Qd(M,z,J,se){return M/z*J+se}function Kp(M,z,J,se){return M-z*J/se}var Qp=function(M,z,J,se,ve,Me,Fe,Ze,lt,Tt){if(this.boxStartIndex=M.length,lt){var Dt=Me.top,Jt=Me.bottom,ln=Me.collisionPadding;ln&&(Dt-=ln[1],Jt+=ln[3]);var an=Jt-Dt;an>0&&(an=Math.max(10,an),this.circleDiameter=an)}else{var xn=Me.top*Fe-Ze,On=Me.bottom*Fe+Ze,Xn=Me.left*Fe-Ze,Yn=Me.right*Fe+Ze,ar=Me.collisionPadding;if(ar&&(Xn-=ar[0]*Fe,xn-=ar[1]*Fe,Yn+=ar[2]*Fe,On+=ar[3]*Fe),Tt){var or=new f(Xn,xn),cr=new f(Yn,xn),Sr=new f(Xn,On),Rr=new f(Yn,On),si=Tt*Math.PI/180;or._rotate(si),cr._rotate(si),Sr._rotate(si),Rr._rotate(si),Xn=Math.min(or.x,cr.x,Sr.x,Rr.x),Yn=Math.max(or.x,cr.x,Sr.x,Rr.x),xn=Math.min(or.y,cr.y,Sr.y,Rr.y),On=Math.max(or.y,cr.y,Sr.y,Rr.y)}M.emplaceBack(z.x,z.y,Xn,xn,Yn,On,J,se,ve)}this.boxEndIndex=M.length},Yh=function(M,z){if(void 0===M&&(M=[]),void 0===z&&(z=Wy),this.data=M,this.length=this.data.length,this.compare=z,this.length>0)for(var J=(this.length>>1)-1;J>=0;J--)this._down(J)};function Wy(M,z){return M<z?-1:M>z?1:0}function Og(M,z,J){void 0===z&&(z=1),void 0===J&&(J=!1);for(var se=1/0,ve=1/0,Me=-1/0,Fe=-1/0,Ze=M[0],lt=0;lt<Ze.length;lt++){var Tt=Ze[lt];(!lt||Tt.x<se)&&(se=Tt.x),(!lt||Tt.y<ve)&&(ve=Tt.y),(!lt||Tt.x>Me)&&(Me=Tt.x),(!lt||Tt.y>Fe)&&(Fe=Tt.y)}var ln=Math.min(Me-se,Fe-ve),an=ln/2,xn=new Yh([],$y);if(0===ln)return new f(se,ve);for(var On=se;On<Me;On+=ln)for(var Xn=ve;Xn<Fe;Xn+=ln)xn.push(new Zh(On+an,Xn+an,an,M));for(var Yn=function(cr){for(var Sr=0,Rr=0,si=0,ii=cr[0],_i=0,Ui=ii.length,Vi=Ui-1;_i<Ui;Vi=_i++){var Si=ii[_i],Zi=ii[Vi],Yi=Si.x*Zi.y-Zi.x*Si.y;Rr+=(Si.x+Zi.x)*Yi,si+=(Si.y+Zi.y)*Yi,Sr+=3*Yi}return new Zh(Rr/Sr,si/Sr,0,cr)}(M),ar=xn.length;xn.length;){var or=xn.pop();(or.d>Yn.d||!Yn.d)&&(Yn=or,J&&console.log("found best %d after %d probes",Math.round(1e4*or.d)/1e4,ar)),or.max-Yn.d<=z||(xn.push(new Zh(or.p.x-(an=or.h/2),or.p.y-an,an,M)),xn.push(new Zh(or.p.x+an,or.p.y-an,an,M)),xn.push(new Zh(or.p.x-an,or.p.y+an,an,M)),xn.push(new Zh(or.p.x+an,or.p.y+an,an,M)),ar+=4)}return J&&(console.log("num probes: "+ar),console.log("best distance: "+Yn.d)),Yn.p}function $y(M,z){return z.max-M.max}function Zh(M,z,J,se){this.p=new f(M,z),this.h=J,this.d=function(ve,Me){for(var Fe=!1,Ze=1/0,lt=0;lt<Me.length;lt++)for(var Tt=Me[lt],Dt=0,Jt=Tt.length,ln=Jt-1;Dt<Jt;ln=Dt++){var an=Tt[Dt],xn=Tt[ln];an.y>ve.y!=xn.y>ve.y&&ve.x<(xn.x-an.x)*(ve.y-an.y)/(xn.y-an.y)+an.x&&(Fe=!Fe),Ze=Math.min(Ze,Vf(ve,an,xn))}return(Fe?1:-1)*Math.sqrt(Ze)}(this.p,se),this.max=this.d+this.h*Math.SQRT2}Yh.prototype.push=function(M){this.data.push(M),this.length++,this._up(this.length-1)},Yh.prototype.pop=function(){if(0!==this.length){var M=this.data[0],z=this.data.pop();return this.length--,this.length>0&&(this.data[0]=z,this._down(0)),M}},Yh.prototype.peek=function(){return this.data[0]},Yh.prototype._up=function(M){for(var z=this.data,J=this.compare,se=z[M];M>0;){var ve=M-1>>1,Me=z[ve];if(J(se,Me)>=0)break;z[M]=Me,M=ve}z[M]=se},Yh.prototype._down=function(M){for(var z=this.data,J=this.compare,se=this.length>>1,ve=z[M];M<se;){var Me=1+(M<<1),Fe=z[Me],Ze=Me+1;if(Ze<this.length&&J(z[Ze],Fe)<0&&(Me=Ze,Fe=z[Ze]),J(Fe,ve)>=0)break;z[M]=Fe,M=Me}z[M]=ve};var Yy=Number.POSITIVE_INFINITY;function Lg(M,z){return z[1]!==Yy?function(J,se,ve){var Me=0,Fe=0;switch(se=Math.abs(se),ve=Math.abs(ve),J){case"top-right":case"top-left":case"top":Fe=ve-7;break;case"bottom-right":case"bottom-left":case"bottom":Fe=7-ve}switch(J){case"top-right":case"bottom-right":case"right":Me=-se;break;case"top-left":case"bottom-left":case"left":Me=se}return[Me,Fe]}(M,z[0],z[1]):function(J,se){var ve=0,Me=0;se<0&&(se=0);var Fe=se/Math.sqrt(2);switch(J){case"top-right":case"top-left":Me=Fe-7;break;case"bottom-right":case"bottom-left":Me=7-Fe;break;case"bottom":Me=7-se;break;case"top":Me=se-7}switch(J){case"top-right":case"bottom-right":ve=-Fe;break;case"top-left":case"bottom-left":ve=Fe;break;case"left":ve=se;break;case"right":ve=-se}return[ve,Me]}(M,z[0])}function Xh(M){switch(M){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Zy(M,z,J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt,ln,an,xn){var On=function(cr,Sr,Rr,si,ii,_i,Ui,Vi){for(var Si=si.layout.get("text-rotate").evaluate(_i,{})*Math.PI/180,Zi=[],Yi=0,Hi=Sr.positionedLines;Yi<Hi.length;Yi+=1)for(var Aa=Hi[Yi],Ga=0,to=Aa.positionedGlyphs;Ga<to.length;Ga+=1){var ua=to[Ga];if(ua.rect){var Ya=ua.rect||{},Uo=4,zo=!0,Jo=1,Bo=0,el=(ii||Vi)&&ua.vertical,rs=ua.metrics.advance*ua.scale/2;if(Vi&&Sr.verticalizable&&(Bo=Aa.lineOffset/2-(ua.imageName?-(24-ua.metrics.width*ua.scale)/2:24*(ua.scale-1))),ua.imageName){var hl=Ui[ua.imageName];zo=hl.sdf,Uo=1/(Jo=hl.pixelRatio)}var Al=ii?[ua.x+rs,ua.y]:[0,0],vs=ii?[0,0]:[ua.x+rs+Rr[0],ua.y+Rr[1]-Bo],Ws=[0,0];el&&(Ws=vs,vs=[0,0]);var Ml=(ua.metrics.left-Uo)*ua.scale-rs+vs[0],Es=(-ua.metrics.top-Uo)*ua.scale+vs[1],Ko=Ml+Ya.w*ua.scale/Jo,ka=Es+Ya.h*ua.scale/Jo,Ka=new f(Ml,Es),bs=new f(Ko,Es),Bs=new f(Ml,ka),_s=new f(Ko,ka);if(el){var xs=new f(-rs,rs- -17),Na=-Math.PI/2,is=12-rs,Yl=new f(22-is,-(ua.imageName?is:0)),Zl=new(Function.prototype.bind.apply(f,[null].concat(Ws)));Ka._rotateAround(Na,xs)._add(Yl)._add(Zl),bs._rotateAround(Na,xs)._add(Yl)._add(Zl),Bs._rotateAround(Na,xs)._add(Yl)._add(Zl),_s._rotateAround(Na,xs)._add(Yl)._add(Zl)}if(Si){var Oc=Math.sin(Si),ef=Math.cos(Si),Dl=[ef,-Oc,Oc,ef];Ka._matMult(Dl),bs._matMult(Dl),Bs._matMult(Dl),_s._matMult(Dl)}var Lc=new f(0,0),tf=new f(0,0);Zi.push({tl:Ka,tr:bs,bl:Bs,br:_s,tex:Ya,writingMode:Sr.writingMode,glyphOffset:Al,sectionIndex:ua.sectionIndex,isSDF:zo,pixelOffsetTL:Lc,pixelOffsetBR:tf,minFontScaleX:0,minFontScaleY:0})}}return Zi}(0,J,Ze,ve,Me,Fe,se,M.allowVerticalPlacement),Xn=M.textSizeData,Yn=null;"source"===Xn.kind?(Yn=[128*ve.layout.get("text-size").evaluate(Fe,{})])[0]>32640&&D(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Xn.kind&&((Yn=[128*an.compositeTextSizes[0].evaluate(Fe,{},xn),128*an.compositeTextSizes[1].evaluate(Fe,{},xn)])[0]>32640||Yn[1]>32640)&&D(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),M.addSymbols(M.text,On,Yn,Ze,Me,Fe,Tt,z,lt.lineStartIndex,lt.lineLength,ln,xn);for(var ar=0,or=Dt;ar<or.length;ar+=1)Jt[or[ar]]=M.text.placedSymbolArray.length-1;return 4*On.length}function Xy(M){for(var z in M)return M[z];return null}function yh(M,z,J,se){var ve=M.compareText;if(z in ve){for(var Me=ve[z],Fe=Me.length-1;Fe>=0;Fe--)if(se.dist(Me[Fe])<J)return!0}else ve[z]=[];return ve[z].push(se),!1}var Bb=Hh.VectorTileFeature.types,jb=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function e0(M,z,J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt,ln){var an=Ze?Math.min(32640,Math.round(Ze[0])):0,xn=Ze?Math.min(32640,Math.round(Ze[1])):0;M.emplaceBack(z,J,Math.round(32*se),Math.round(32*ve),Me,Fe,(an<<1)+(lt?1:0),xn,16*Tt,16*Dt,256*Jt,256*ln)}function Rg(M,z,J){M.emplaceBack(z.x,z.y,J),M.emplaceBack(z.x,z.y,J),M.emplaceBack(z.x,z.y,J),M.emplaceBack(z.x,z.y,J)}function Vb(M){for(var z=0,J=M.sections;z<J.length;z+=1)if(mi(J[z].text))return!0;return!1}var vf=function(M){this.layoutVertexArray=new kc,this.indexArray=new Qs,this.programConfigurations=M,this.segments=new Xt,this.dynamicLayoutVertexArray=new Fu,this.opacityVertexArray=new Dc,this.placedSymbolArray=new Qe};vf.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},vf.prototype.upload=function(M,z,J,se){this.isEmpty()||(J&&(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Mg.members),this.indexBuffer=M.createIndexBuffer(this.indexArray,z),this.dynamicLayoutVertexBuffer=M.createVertexBuffer(this.dynamicLayoutVertexArray,Eb.members,!0),this.opacityVertexBuffer=M.createVertexBuffer(this.opacityVertexArray,jb,!0),this.opacityVertexBuffer.itemSize=1),(J||se)&&this.programConfigurations.upload(M))},vf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ur("SymbolBuffers",vf);var uu=function(M,z,J){this.layoutVertexArray=new M,this.layoutAttributes=z,this.indexArray=new J,this.segments=new Xt,this.collisionVertexArray=new cc};uu.prototype.upload=function(M){this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=M.createVertexBuffer(this.collisionVertexArray,Cb.members,!0)},uu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ur("CollisionBuffers",uu);var To=function(M){this.collisionBoxArray=M.collisionBoxArray,this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(Fe){return Fe.id}),this.index=M.index,this.pixelRatio=M.pixelRatio,this.sourceLayerIndex=M.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Uf([]),this.placementViewportMatrix=Uf([]);var z=this.layers[0]._unevaluatedLayout._values;this.textSizeData=mh(this.zoom,z["text-size"]),this.iconSizeData=mh(this.zoom,z["icon-size"]);var J=this.layers[0].layout,se=J.get("symbol-sort-key"),ve=J.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==ve&&void 0!==se.constantOr(1),this.sortFeaturesByY=("viewport-y"===ve||"auto"===ve&&!this.sortFeaturesByKey)&&(J.get("text-allow-overlap")||J.get("icon-allow-overlap")||J.get("text-ignore-placement")||J.get("icon-ignore-placement")),"point"===J.get("symbol-placement")&&(this.writingModes=J.get("text-writing-mode").map(function(Fe){return bu[Fe]})),this.stateDependentLayerIds=this.layers.filter(function(Fe){return Fe.isStateDependent()}).map(function(Fe){return Fe.id}),this.sourceID=M.sourceID};To.prototype.createArrays=function(){this.text=new vf(new fo(Mg.members,this.layers,this.zoom,function(M){return/^text/.test(M)})),this.icon=new vf(new fo(Mg.members,this.layers,this.zoom,function(M){return/^icon/.test(M)})),this.glyphOffsetArray=new Pt,this.lineVertexArray=new Nt,this.symbolInstances=new dt},To.prototype.calculateGlyphDependencies=function(M,z,J,se,ve){for(var Me=0;Me<M.length;Me++)if(z[M.charCodeAt(Me)]=!0,(J||se)&&ve){var Fe=Yd[M.charAt(Me)];Fe&&(z[Fe.charCodeAt(0)]=!0)}},To.prototype.populate=function(M,z,J){var se=this.layers[0],ve=se.layout,Me=ve.get("text-font"),Fe=ve.get("text-field"),Ze=ve.get("icon-image"),lt=("constant"!==Fe.value.kind||Fe.value.value instanceof Ln&&!Fe.value.value.isEmpty()||Fe.value.value.toString().length>0)&&("constant"!==Me.value.kind||Me.value.value.length>0),Tt="constant"!==Ze.value.kind||!!Ze.value.value||Object.keys(Ze.parameters).length>0,Dt=ve.get("symbol-sort-key");if(this.features=[],lt||Tt){for(var Jt=z.iconDependencies,ln=z.glyphDependencies,an=z.availableImages,xn=new Fa(this.zoom),On=0,Xn=M;On<Xn.length;On+=1){var Yn=Xn[On],ar=Yn.feature,or=Yn.id,cr=Yn.index,Sr=Yn.sourceLayerIndex,Rr=se._featureFilter.needGeometry,si={type:ar.type,id:or,properties:ar.properties,geometry:Rr?$o(ar):[]};if(se._featureFilter.filter(xn,si,J)){Rr||(si.geometry=$o(ar));var ii=void 0;if(lt){var _i=se.getValueAndResolveTokens("text-field",si,J,an),Ui=Ln.factory(_i);Vb(Ui)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===So()||this.hasRTLText&&As.isParsed())&&(ii=Oy(Ui,se,si))}var Vi=void 0;if(Tt){var Si=se.getValueAndResolveTokens("icon-image",si,J,an);Vi=Si instanceof qn?Si:qn.fromString(Si)}if(ii||Vi){var Zi=this.sortFeaturesByKey?Dt.evaluate(si,{},J):void 0,Yi={id:or,text:ii,icon:Vi,index:cr,sourceLayerIndex:Sr,geometry:$o(ar),properties:ar.properties,type:Bb[ar.type],sortKey:Zi};if(this.features.push(Yi),Vi&&(Jt[Vi.name]=!0),ii){var Hi=Me.evaluate(si,{},J).join(","),Aa="map"===ve.get("text-rotation-alignment")&&"point"!==ve.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(bu.vertical)>=0;for(var Ga=0,to=ii.sections;Ga<to.length;Ga+=1){var ua=to[Ga];if(ua.image)Jt[ua.image.name]=!0;else{var Ya=Ea(ii.toString()),Uo=ua.fontStack||Hi,zo=ln[Uo]=ln[Uo]||{};this.calculateGlyphDependencies(ua.text,zo,Aa,this.allowVerticalPlacement,Ya)}}}}}}"line"===ve.get("symbol-placement")&&(this.features=function(Jo){var Bo={},el={},rs=[],oa=0;function Kr(_s){rs.push(Jo[_s]),oa++}function hl(_s,xs,Na){var is=el[_s];return delete el[_s],el[xs]=is,rs[is].geometry[0].pop(),rs[is].geometry[0]=rs[is].geometry[0].concat(Na[0]),is}function Al(_s,xs,Na){var is=Bo[xs];return delete Bo[xs],Bo[_s]=is,rs[is].geometry[0].shift(),rs[is].geometry[0]=Na[0].concat(rs[is].geometry[0]),is}function vs(_s,xs,Na){var is=Na?xs[0][xs[0].length-1]:xs[0][0];return _s+":"+is.x+":"+is.y}for(var Ws=0;Ws<Jo.length;Ws++){var Ml=Jo[Ws],Es=Ml.geometry,Ko=Ml.text?Ml.text.toString():null;if(Ko){var ka=vs(Ko,Es),Ka=vs(Ko,Es,!0);if(ka in el&&Ka in Bo&&el[ka]!==Bo[Ka]){var bs=Al(ka,Ka,Es),Bs=hl(ka,Ka,rs[bs].geometry);delete Bo[ka],delete el[Ka],el[vs(Ko,rs[Bs].geometry,!0)]=Bs,rs[bs].geometry=null}else ka in el?hl(ka,Ka,Es):Ka in Bo?Al(ka,Ka,Es):(Kr(Ws),Bo[ka]=oa-1,el[Ka]=oa-1)}else Kr(Ws)}return rs.filter(function(_s){return _s.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Jo,Bo){return Jo.sortKey-Bo.sortKey})}},To.prototype.update=function(M,z,J){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(M,z,this.layers,J),this.icon.programConfigurations.updatePaintArrays(M,z,this.layers,J))},To.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},To.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},To.prototype.upload=function(M){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(M),this.iconCollisionBox.upload(M)),this.text.upload(M,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(M,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},To.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},To.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},To.prototype.addToLineVertexArray=function(M,z){var J=this.lineVertexArray.length;if(void 0!==M.segment){for(var se=M.dist(z[M.segment+1]),ve=M.dist(z[M.segment]),Me={},Fe=M.segment+1;Fe<z.length;Fe++)Me[Fe]={x:z[Fe].x,y:z[Fe].y,tileUnitDistanceFromAnchor:se},Fe<z.length-1&&(se+=z[Fe+1].dist(z[Fe]));for(var Ze=M.segment||0;Ze>=0;Ze--)Me[Ze]={x:z[Ze].x,y:z[Ze].y,tileUnitDistanceFromAnchor:ve},Ze>0&&(ve+=z[Ze-1].dist(z[Ze]));for(var lt=0;lt<z.length;lt++){var Tt=Me[lt];this.lineVertexArray.emplaceBack(Tt.x,Tt.y,Tt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:J,lineLength:this.lineVertexArray.length-J}},To.prototype.addSymbols=function(M,z,J,se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt){for(var ln=M.indexArray,an=M.layoutVertexArray,xn=M.segments.prepareSegment(4*z.length,an,ln,Me.sortKey),On=this.glyphOffsetArray.length,Xn=xn.vertexLength,Yn=this.allowVerticalPlacement&&Fe===bu.vertical?Math.PI/2:0,ar=Me.text&&Me.text.sections,or=0;or<z.length;or++){var cr=z[or],Sr=cr.tl,Rr=cr.tr,si=cr.bl,ii=cr.br,_i=cr.tex,Ui=cr.pixelOffsetTL,Vi=cr.pixelOffsetBR,Si=cr.minFontScaleX,Zi=cr.minFontScaleY,Yi=cr.glyphOffset,Hi=cr.isSDF,Aa=cr.sectionIndex,Ga=xn.vertexLength,to=Yi[1];e0(an,Ze.x,Ze.y,Sr.x,to+Sr.y,_i.x,_i.y,J,Hi,Ui.x,Ui.y,Si,Zi),e0(an,Ze.x,Ze.y,Rr.x,to+Rr.y,_i.x+_i.w,_i.y,J,Hi,Vi.x,Ui.y,Si,Zi),e0(an,Ze.x,Ze.y,si.x,to+si.y,_i.x,_i.y+_i.h,J,Hi,Ui.x,Vi.y,Si,Zi),e0(an,Ze.x,Ze.y,ii.x,to+ii.y,_i.x+_i.w,_i.y+_i.h,J,Hi,Vi.x,Vi.y,Si,Zi),Rg(M.dynamicLayoutVertexArray,Ze,Yn),ln.emplaceBack(Ga,Ga+1,Ga+2),ln.emplaceBack(Ga+1,Ga+2,Ga+3),xn.vertexLength+=4,xn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Yi[0]),or!==z.length-1&&Aa===z[or+1].sectionIndex||M.programConfigurations.populatePaintArrays(an.length,Me,Me.index,{},Jt,ar&&ar[Aa])}M.placedSymbolArray.emplaceBack(Ze.x,Ze.y,On,this.glyphOffsetArray.length-On,Xn,lt,Tt,Ze.segment,J?J[0]:0,J?J[1]:0,se[0],se[1],Fe,0,!1,0,Dt)},To.prototype._addCollisionDebugVertex=function(M,z,J,se,ve,Me){return z.emplaceBack(0,0),M.emplaceBack(J.x,J.y,se,ve,Math.round(Me.x),Math.round(Me.y))},To.prototype.addCollisionDebugVertices=function(M,z,J,se,ve,Me,Fe){var Ze=ve.segments.prepareSegment(4,ve.layoutVertexArray,ve.indexArray),lt=Ze.vertexLength,Tt=ve.layoutVertexArray,Dt=ve.collisionVertexArray,Jt=Fe.anchorX,ln=Fe.anchorY;this._addCollisionDebugVertex(Tt,Dt,Me,Jt,ln,new f(M,z)),this._addCollisionDebugVertex(Tt,Dt,Me,Jt,ln,new f(J,z)),this._addCollisionDebugVertex(Tt,Dt,Me,Jt,ln,new f(J,se)),this._addCollisionDebugVertex(Tt,Dt,Me,Jt,ln,new f(M,se)),Ze.vertexLength+=4;var an=ve.indexArray;an.emplaceBack(lt,lt+1),an.emplaceBack(lt+1,lt+2),an.emplaceBack(lt+2,lt+3),an.emplaceBack(lt+3,lt),Ze.primitiveLength+=4},To.prototype.addDebugCollisionBoxes=function(M,z,J,se){for(var ve=M;ve<z;ve++){var Me=this.collisionBoxArray.get(ve);this.addCollisionDebugVertices(Me.x1,Me.y1,Me.x2,Me.y2,se?this.textCollisionBox:this.iconCollisionBox,Me.anchorPoint,J)}},To.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new uu(ou,Py.members,U),this.iconCollisionBox=new uu(ou,Py.members,U);for(var M=0;M<this.symbolInstances.length;M++){var z=this.symbolInstances.get(M);this.addDebugCollisionBoxes(z.textBoxStartIndex,z.textBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.verticalTextBoxStartIndex,z.verticalTextBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.iconBoxStartIndex,z.iconBoxEndIndex,z,!1),this.addDebugCollisionBoxes(z.verticalIconBoxStartIndex,z.verticalIconBoxEndIndex,z,!1)}},To.prototype._deserializeCollisionBoxesForSymbol=function(M,z,J,se,ve,Me,Fe,Ze,lt){for(var Tt={},Dt=z;Dt<J;Dt++){var Jt=M.get(Dt);Tt.textBox={x1:Jt.x1,y1:Jt.y1,x2:Jt.x2,y2:Jt.y2,anchorPointX:Jt.anchorPointX,anchorPointY:Jt.anchorPointY},Tt.textFeatureIndex=Jt.featureIndex;break}for(var ln=se;ln<ve;ln++){var an=M.get(ln);Tt.verticalTextBox={x1:an.x1,y1:an.y1,x2:an.x2,y2:an.y2,anchorPointX:an.anchorPointX,anchorPointY:an.anchorPointY},Tt.verticalTextFeatureIndex=an.featureIndex;break}for(var xn=Me;xn<Fe;xn++){var On=M.get(xn);Tt.iconBox={x1:On.x1,y1:On.y1,x2:On.x2,y2:On.y2,anchorPointX:On.anchorPointX,anchorPointY:On.anchorPointY},Tt.iconFeatureIndex=On.featureIndex;break}for(var Xn=Ze;Xn<lt;Xn++){var Yn=M.get(Xn);Tt.verticalIconBox={x1:Yn.x1,y1:Yn.y1,x2:Yn.x2,y2:Yn.y2,anchorPointX:Yn.anchorPointX,anchorPointY:Yn.anchorPointY},Tt.verticalIconFeatureIndex=Yn.featureIndex;break}return Tt},To.prototype.deserializeCollisionBoxes=function(M){this.collisionArrays=[];for(var z=0;z<this.symbolInstances.length;z++){var J=this.symbolInstances.get(z);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(M,J.textBoxStartIndex,J.textBoxEndIndex,J.verticalTextBoxStartIndex,J.verticalTextBoxEndIndex,J.iconBoxStartIndex,J.iconBoxEndIndex,J.verticalIconBoxStartIndex,J.verticalIconBoxEndIndex))}},To.prototype.hasTextData=function(){return this.text.segments.get().length>0},To.prototype.hasIconData=function(){return this.icon.segments.get().length>0},To.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},To.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},To.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},To.prototype.addIndicesForPlacedSymbol=function(M,z){for(var J=M.placedSymbolArray.get(z),se=J.vertexStartIndex+4*J.numGlyphs,ve=J.vertexStartIndex;ve<se;ve+=4)M.indexArray.emplaceBack(ve,ve+1,ve+2),M.indexArray.emplaceBack(ve+1,ve+2,ve+3)},To.prototype.getSortedSymbolIndexes=function(M){if(this.sortedAngle===M&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var z=Math.sin(M),J=Math.cos(M),se=[],ve=[],Me=[],Fe=0;Fe<this.symbolInstances.length;++Fe){Me.push(Fe);var Ze=this.symbolInstances.get(Fe);se.push(0|Math.round(z*Ze.anchorX+J*Ze.anchorY)),ve.push(Ze.featureIndex)}return Me.sort(function(lt,Tt){return se[lt]-se[Tt]||ve[Tt]-ve[lt]}),Me},To.prototype.addToSortKeyRanges=function(M,z){var J=this.sortKeyRanges[this.sortKeyRanges.length-1];J&&J.sortKey===z?J.symbolInstanceEnd=M+1:this.sortKeyRanges.push({sortKey:z,symbolInstanceStart:M,symbolInstanceEnd:M+1})},To.prototype.sortFeatures=function(M){var z=this;if(this.sortFeaturesByY&&this.sortedAngle!==M&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(M),this.sortedAngle=M,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var J=0,se=this.symbolInstanceIndexes;J<se.length;J+=1){var Me=this.symbolInstances.get(se[J]);this.featureSortOrder.push(Me.featureIndex),[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(function(Fe,Ze,lt){Fe>=0&&lt.indexOf(Fe)===Ze&&z.addIndicesForPlacedSymbol(z.text,Fe)}),Me.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Me.verticalPlacedTextSymbolIndex),Me.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.placedIconSymbolIndex),Me.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ur("SymbolBucket",To,{omit:["layers","collisionBoxArray","features","compareText"]}),To.MAX_GLYPHS=65535,To.addDynamicAttributes=Rg;var Ub=new _l({"symbol-placement":new Gi(Ve.layout_symbol["symbol-placement"]),"symbol-spacing":new Gi(Ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Gi(Ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ia(Ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Gi(Ve.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Gi(Ve.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Gi(Ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new Gi(Ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Gi(Ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new ia(Ve.layout_symbol["icon-size"]),"icon-text-fit":new Gi(Ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Gi(Ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new ia(Ve.layout_symbol["icon-image"]),"icon-rotate":new ia(Ve.layout_symbol["icon-rotate"]),"icon-padding":new Gi(Ve.layout_symbol["icon-padding"]),"icon-keep-upright":new Gi(Ve.layout_symbol["icon-keep-upright"]),"icon-offset":new ia(Ve.layout_symbol["icon-offset"]),"icon-anchor":new ia(Ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Gi(Ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Gi(Ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Gi(Ve.layout_symbol["text-rotation-alignment"]),"text-field":new ia(Ve.layout_symbol["text-field"]),"text-font":new ia(Ve.layout_symbol["text-font"]),"text-size":new ia(Ve.layout_symbol["text-size"]),"text-max-width":new ia(Ve.layout_symbol["text-max-width"]),"text-line-height":new Gi(Ve.layout_symbol["text-line-height"]),"text-letter-spacing":new ia(Ve.layout_symbol["text-letter-spacing"]),"text-justify":new ia(Ve.layout_symbol["text-justify"]),"text-radial-offset":new ia(Ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Gi(Ve.layout_symbol["text-variable-anchor"]),"text-anchor":new ia(Ve.layout_symbol["text-anchor"]),"text-max-angle":new Gi(Ve.layout_symbol["text-max-angle"]),"text-writing-mode":new Gi(Ve.layout_symbol["text-writing-mode"]),"text-rotate":new ia(Ve.layout_symbol["text-rotate"]),"text-padding":new Gi(Ve.layout_symbol["text-padding"]),"text-keep-upright":new Gi(Ve.layout_symbol["text-keep-upright"]),"text-transform":new ia(Ve.layout_symbol["text-transform"]),"text-offset":new ia(Ve.layout_symbol["text-offset"]),"text-allow-overlap":new Gi(Ve.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Gi(Ve.layout_symbol["text-ignore-placement"]),"text-optional":new Gi(Ve.layout_symbol["text-optional"])}),Fg={paint:new _l({"icon-opacity":new ia(Ve.paint_symbol["icon-opacity"]),"icon-color":new ia(Ve.paint_symbol["icon-color"]),"icon-halo-color":new ia(Ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new ia(Ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ia(Ve.paint_symbol["icon-halo-blur"]),"icon-translate":new Gi(Ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new Gi(Ve.paint_symbol["icon-translate-anchor"]),"text-opacity":new ia(Ve.paint_symbol["text-opacity"]),"text-color":new ia(Ve.paint_symbol["text-color"],{runtimeType:rn,getOverride:function(M){return M.textColor},hasOverride:function(M){return!!M.textColor}}),"text-halo-color":new ia(Ve.paint_symbol["text-halo-color"]),"text-halo-width":new ia(Ve.paint_symbol["text-halo-width"]),"text-halo-blur":new ia(Ve.paint_symbol["text-halo-blur"]),"text-translate":new Gi(Ve.paint_symbol["text-translate"]),"text-translate-anchor":new Gi(Ve.paint_symbol["text-translate-anchor"])}),layout:Ub},vh=function(M){this.type=M.property.overrides?M.property.overrides.runtimeType:Vt,this.defaultValue=M};vh.prototype.evaluate=function(M){if(M.formattedSection){var z=this.defaultValue.property.overrides;if(z&&z.hasOverride(M.formattedSection))return z.getOverride(M.formattedSection)}return M.feature&&M.featureState?this.defaultValue.evaluate(M.feature,M.featureState):this.defaultValue.property.specification.default},vh.prototype.eachChild=function(M){this.defaultValue.isConstant()||M(this.defaultValue.value._styleExpression.expression)},vh.prototype.outputDefined=function(){return!1},vh.prototype.serialize=function(){return null},ur("FormatSectionOverride",vh,{omit:["defaultValue"]});var zw=function(M){function z(J){M.call(this,J,Fg)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.recalculate=function(J,se){if(M.prototype.recalculate.call(this,J,se),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var ve=this.layout.get("text-writing-mode");if(ve){for(var Me=[],Fe=0,Ze=ve;Fe<Ze.length;Fe+=1){var lt=Ze[Fe];Me.indexOf(lt)<0&&Me.push(lt)}this.layout._values["text-writing-mode"]=Me}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},z.prototype.getValueAndResolveTokens=function(J,se,ve,Me){var lt,Fe=this.layout.get(J).evaluate(se,{},ve,Me),Ze=this._unevaluatedLayout._values[J];return Ze.isDataDriven()||dn(Ze.value)||!Fe?Fe:(lt=se.properties,Fe.replace(/{([^{}]+)}/g,function(Dt,Jt){return Jt in lt?String(lt[Jt]):""}))},z.prototype.createBucket=function(J){return new To(J)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype._setPaintOverrides=function(){for(var J=0,se=Fg.paint.overridableProperties;J<se.length;J+=1){var ve=se[J];if(z.hasPaintOverride(this.layout,ve)){var lt,Me=this.paint.get(ve),Fe=new vh(Me),Ze=new fn(Fe,Me.property.specification);lt="constant"===Me.value.kind||"source"===Me.value.kind?new wn("source",Ze):new En("composite",Ze,Me.value.zoomStops,Me.value._interpolationType),this.paint._values[ve]=new ds(Me.property,lt,Me.parameters)}}},z.prototype._handleOverridablePaintPropertyUpdate=function(J,se,ve){return!(!this.layout||se.isDataDriven()||ve.isDataDriven())&&z.hasPaintOverride(this.layout,J)},z.hasPaintOverride=function(J,se){var ve=J.get("text-field"),Me=Fg.paint.properties[se],Fe=!1,Ze=function(Dt){for(var Jt=0,ln=Dt;Jt<ln.length;Jt+=1)if(Me.overrides&&Me.overrides.hasOverride(ln[Jt]))return void(Fe=!0)};if("constant"===ve.value.kind&&ve.value.value instanceof Ln)Ze(ve.value.value.sections);else if("source"===ve.value.kind){var lt=function(Dt){Fe||(Dt instanceof kr&&gr(Dt.value)===Ut?Ze(Dt.value.sections):Dt instanceof Bn?Ze(Dt.sections):Dt.eachChild(lt))},Tt=ve.value;Tt._styleExpression&&lt(Tt._styleExpression.expression)}return Fe},z}(Ll),Jy={paint:new _l({"background-color":new Gi(Ve.paint_background["background-color"]),"background-pattern":new wc(Ve.paint_background["background-pattern"]),"background-opacity":new Gi(Ve.paint_background["background-opacity"])})},Hb=function(M){function z(J){M.call(this,J,Jy)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z}(Ll),Gb={paint:new _l({"raster-opacity":new Gi(Ve.paint_raster["raster-opacity"]),"raster-hue-rotate":new Gi(Ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Gi(Ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Gi(Ve.paint_raster["raster-brightness-max"]),"raster-saturation":new Gi(Ve.paint_raster["raster-saturation"]),"raster-contrast":new Gi(Ve.paint_raster["raster-contrast"]),"raster-resampling":new Gi(Ve.paint_raster["raster-resampling"]),"raster-fade-duration":new Gi(Ve.paint_raster["raster-fade-duration"])})},qb=function(M){function z(J){M.call(this,J,Gb)}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z}(Ll),Jh=function(M){function z(J){M.call(this,J,{}),this.implementation=J}return M&&(z.__proto__=M),(z.prototype=Object.create(M&&M.prototype)).constructor=z,z.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},z.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},z.prototype.recalculate=function(){},z.prototype.updateTransitions=function(){},z.prototype.hasTransition=function(){},z.prototype.serialize=function(){},z.prototype.onAdd=function(J){this.implementation.onAdd&&this.implementation.onAdd(J,J.painter.context.gl)},z.prototype.onRemove=function(J){this.implementation.onRemove&&this.implementation.onRemove(J,J.painter.context.gl)},z}(Ll),Kc={circle:Hf,heatmap:Sw,hillshade:pb,fill:xb,"fill-extrusion":xg,line:Jc,symbol:zw,background:Hb,raster:qb},Wb=self.HTMLImageElement,$b=self.HTMLCanvasElement,Ng=self.HTMLVideoElement,Yb=self.ImageData,cu=self.ImageBitmap,bf=function(M,z,J,se){this.context=M,this.format=J,this.texture=M.gl.createTexture(),this.update(z,se)};bf.prototype.update=function(M,z,J){var se=M.width,ve=M.height,Me=!(this.size&&this.size[0]===se&&this.size[1]===ve||J),Fe=this.context,Ze=Fe.gl;if(this.useMipmap=Boolean(z&&z.useMipmap),Ze.bindTexture(Ze.TEXTURE_2D,this.texture),Fe.pixelStoreUnpackFlipY.set(!1),Fe.pixelStoreUnpack.set(1),Fe.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ze.RGBA&&(!z||!1!==z.premultiply)),Me)this.size=[se,ve],M instanceof Wb||M instanceof $b||M instanceof Ng||M instanceof Yb||cu&&M instanceof cu?Ze.texImage2D(Ze.TEXTURE_2D,0,this.format,this.format,Ze.UNSIGNED_BYTE,M):Ze.texImage2D(Ze.TEXTURE_2D,0,this.format,se,ve,0,this.format,Ze.UNSIGNED_BYTE,M.data);else{var lt=J||{x:0,y:0},Tt=lt.x,Dt=lt.y;M instanceof Wb||M instanceof $b||M instanceof Ng||M instanceof Yb||cu&&M instanceof cu?Ze.texSubImage2D(Ze.TEXTURE_2D,0,Tt,Dt,Ze.RGBA,Ze.UNSIGNED_BYTE,M):Ze.texSubImage2D(Ze.TEXTURE_2D,0,Tt,Dt,se,ve,Ze.RGBA,Ze.UNSIGNED_BYTE,M.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ze.generateMipmap(Ze.TEXTURE_2D)},bf.prototype.bind=function(M,z,J){var se=this.context.gl;se.bindTexture(se.TEXTURE_2D,this.texture),J!==se.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(J=se.LINEAR),M!==this.filter&&(se.texParameteri(se.TEXTURE_2D,se.TEXTURE_MAG_FILTER,M),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_MIN_FILTER,J||M),this.filter=M),z!==this.wrap&&(se.texParameteri(se.TEXTURE_2D,se.TEXTURE_WRAP_S,z),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_WRAP_T,z),this.wrap=z)},bf.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},bf.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var ep=function(M){var z=this;this._callback=M,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){z._triggered=!1,z._callback()})};ep.prototype.trigger=function(){var M=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){M._triggered=!1,M._callback()},0))},ep.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Kh=function(M,z,J){this.target=M,this.parent=z,this.mapId=J,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},k(["receive","process"],this),this.invoker=new ep(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=N()?M:self};function zg(M,z,J){var se=2*Math.PI*6378137/256/Math.pow(2,J);return[M*se-2*Math.PI*6378137/2,z*se-2*Math.PI*6378137/2]}Kh.prototype.send=function(M,z,J,se,ve){var Me=this;void 0===ve&&(ve=!1);var Fe=Math.round(1e18*Math.random()).toString(36).substring(0,10);J&&(this.callbacks[Fe]=J);var Ze=Y(this.globalScope)?void 0:[];return this.target.postMessage({id:Fe,type:M,hasCallback:!!J,targetMapId:se,mustQueue:ve,sourceMapId:this.mapId,data:zi(z,Ze)},Ze),{cancel:function(){J&&delete Me.callbacks[Fe],Me.target.postMessage({id:Fe,type:"<cancel>",targetMapId:se,sourceMapId:Me.mapId})}}},Kh.prototype.receive=function(M){var z=M.data,J=z.id;if(J&&(!z.targetMapId||this.mapId===z.targetMapId))if("<cancel>"===z.type){delete this.tasks[J];var se=this.cancelCallbacks[J];delete this.cancelCallbacks[J],se&&se()}else N()||z.mustQueue?(this.tasks[J]=z,this.taskQueue.push(J),this.invoker.trigger()):this.processTask(J,z)},Kh.prototype.process=function(){if(this.taskQueue.length){var M=this.taskQueue.shift(),z=this.tasks[M];delete this.tasks[M],this.taskQueue.length&&this.invoker.trigger(),z&&this.processTask(M,z)}},Kh.prototype.processTask=function(M,z){var J=this;if("<response>"===z.type){var se=this.callbacks[M];delete this.callbacks[M],se&&(z.error?se(fa(z.error)):se(null,fa(z.data)))}else{var ve=!1,Me=Y(this.globalScope)?void 0:[],Fe=z.hasCallback?function(Dt,Jt){ve=!0,delete J.cancelCallbacks[M],J.target.postMessage({id:M,type:"<response>",sourceMapId:J.mapId,error:Dt?zi(Dt):null,data:zi(Jt,Me)},Me)}:function(Dt){ve=!0},Ze=null,lt=fa(z.data);if(this.parent[z.type])Ze=this.parent[z.type](z.sourceMapId,lt,Fe);else if(this.parent.getWorkerSource){var Tt=z.type.split(".");Ze=this.parent.getWorkerSource(z.sourceMapId,Tt[0],lt.source)[Tt[1]](lt,Fe)}else Fe(new Error("Could not find function "+z.type));!ve&&Ze&&Ze.cancel&&(this.cancelCallbacks[M]=Ze.cancel)}},Kh.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Ms=function(M,z){M&&(z?this.setSouthWest(M).setNorthEast(z):4===M.length?this.setSouthWest([M[0],M[1]]).setNorthEast([M[2],M[3]]):this.setSouthWest(M[0]).setNorthEast(M[1]))};Ms.prototype.setNorthEast=function(M){return this._ne=M instanceof Xo?new Xo(M.lng,M.lat):Xo.convert(M),this},Ms.prototype.setSouthWest=function(M){return this._sw=M instanceof Xo?new Xo(M.lng,M.lat):Xo.convert(M),this},Ms.prototype.extend=function(M){var z,J,se=this._sw,ve=this._ne;if(M instanceof Xo)z=M,J=M;else{if(!(M instanceof Ms))return Array.isArray(M)?4===M.length||M.every(Array.isArray)?this.extend(Ms.convert(M)):this.extend(Xo.convert(M)):this;if(J=M._ne,!(z=M._sw)||!J)return this}return se||ve?(se.lng=Math.min(z.lng,se.lng),se.lat=Math.min(z.lat,se.lat),ve.lng=Math.max(J.lng,ve.lng),ve.lat=Math.max(J.lat,ve.lat)):(this._sw=new Xo(z.lng,z.lat),this._ne=new Xo(J.lng,J.lat)),this},Ms.prototype.getCenter=function(){return new Xo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Ms.prototype.getSouthWest=function(){return this._sw},Ms.prototype.getNorthEast=function(){return this._ne},Ms.prototype.getNorthWest=function(){return new Xo(this.getWest(),this.getNorth())},Ms.prototype.getSouthEast=function(){return new Xo(this.getEast(),this.getSouth())},Ms.prototype.getWest=function(){return this._sw.lng},Ms.prototype.getSouth=function(){return this._sw.lat},Ms.prototype.getEast=function(){return this._ne.lng},Ms.prototype.getNorth=function(){return this._ne.lat},Ms.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Ms.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Ms.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Ms.prototype.contains=function(M){var z=Xo.convert(M),J=z.lng,se=z.lat,Me=this._sw.lng<=J&&J<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Me=this._sw.lng>=J&&J>=this._ne.lng),this._sw.lat<=se&&se<=this._ne.lat&&Me},Ms.convert=function(M){return!M||M instanceof Ms?M:new Ms(M)};var Xo=function(M,z){if(isNaN(M)||isNaN(z))throw new Error("Invalid LngLat object: ("+M+", "+z+")");if(this.lng=+M,this.lat=+z,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Xo.prototype.wrap=function(){return new Xo(y(this.lng,-180,180),this.lat)},Xo.prototype.toArray=function(){return[this.lng,this.lat]},Xo.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Xo.prototype.distanceTo=function(M){var z=Math.PI/180,J=this.lat*z,se=M.lat*z,ve=Math.sin(J)*Math.sin(se)+Math.cos(J)*Math.cos(se)*Math.cos((M.lng-this.lng)*z);return 6371008.8*Math.acos(Math.min(ve,1))},Xo.prototype.toBounds=function(M){void 0===M&&(M=0);var z=360*M/40075017,J=z/Math.cos(Math.PI/180*this.lat);return new Ms(new Xo(this.lng-J,this.lat-z),new Xo(this.lng+J,this.lat+z))},Xo.convert=function(M){if(M instanceof Xo)return M;if(Array.isArray(M)&&(2===M.length||3===M.length))return new Xo(Number(M[0]),Number(M[1]));if(!Array.isArray(M)&&"object"==typeof M&&null!==M)return new Xo(Number("lng"in M?M.lng:M.lon),Number(M.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Bg=2*Math.PI*6371008.8;function t0(M){return Bg*Math.cos(M*Math.PI/180)}function n0(M){return(180+M)/360}function jg(M){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M*Math.PI/360)))/360}function Zb(M,z){return M/t0(z)}function Zf(M){return 360/Math.PI*Math.atan(Math.exp((180-360*M)*Math.PI/180))-90}var _f=function(M,z,J){void 0===J&&(J=0),this.x=+M,this.y=+z,this.z=+J};_f.fromLngLat=function(M,z){void 0===z&&(z=0);var J=Xo.convert(M);return new _f(n0(J.lng),jg(J.lat),Zb(z,J.lat))},_f.prototype.toLngLat=function(){return new Xo(360*this.x-180,Zf(this.y))},_f.prototype.toAltitude=function(){return this.z*t0(Zf(this.y))},_f.prototype.meterInMercatorCoordinateUnits=function(){return 1/Bg*(M=Zf(this.y),1/Math.cos(M*Math.PI/180));var M};var Xf=function(M,z,J){this.z=M,this.x=z,this.y=J,this.key=tp(0,M,M,z,J)};Xf.prototype.equals=function(M){return this.z===M.z&&this.x===M.x&&this.y===M.y},Xf.prototype.url=function(M,z){var J,se,ve,Me,Fe,Ze=(se=this.y,ve=this.z,Me=zg(256*(J=this.x),256*(se=Math.pow(2,ve)-se-1),ve),Fe=zg(256*(J+1),256*(se+1),ve),Me[0]+","+Me[1]+","+Fe[0]+","+Fe[1]),lt=function(Tt,Dt,Jt){for(var ln,an="",xn=Tt;xn>0;xn--)an+=(Dt&(ln=1<<xn-1)?1:0)+(Jt&ln?2:0);return an}(this.z,this.x,this.y);return M[(this.x+this.y)%M.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===z?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",lt).replace("{bbox-epsg-3857}",Ze)},Xf.prototype.getTilePoint=function(M){var z=Math.pow(2,this.z);return new f(8192*(M.x*z-this.x),8192*(M.y*z-this.y))},Xf.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Ky=function(M,z){this.wrap=M,this.canonical=z,this.key=tp(M,z.z,z.z,z.x,z.y)},zs=function(M,z,J,se,ve){this.overscaledZ=M,this.wrap=z,this.canonical=new Xf(J,+se,+ve),this.key=tp(z,M,J,se,ve)};function tp(M,z,J,se,ve){(M*=2)<0&&(M=-1*M-1);var Me=1<<J;return(Me*Me*M+Me*ve+se).toString(36)+J.toString(36)+z.toString(36)}zs.prototype.equals=function(M){return this.overscaledZ===M.overscaledZ&&this.wrap===M.wrap&&this.canonical.equals(M.canonical)},zs.prototype.scaledTo=function(M){var z=this.canonical.z-M;return M>this.canonical.z?new zs(M,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new zs(M,this.wrap,M,this.canonical.x>>z,this.canonical.y>>z)},zs.prototype.calculateScaledKey=function(M,z){var J=this.canonical.z-M;return M>this.canonical.z?tp(this.wrap*+z,M,this.canonical.z,this.canonical.x,this.canonical.y):tp(this.wrap*+z,M,M,this.canonical.x>>J,this.canonical.y>>J)},zs.prototype.isChildOf=function(M){if(M.wrap!==this.wrap)return!1;var z=this.canonical.z-M.canonical.z;return 0===M.overscaledZ||M.overscaledZ<this.overscaledZ&&M.canonical.x===this.canonical.x>>z&&M.canonical.y===this.canonical.y>>z},zs.prototype.children=function(M){if(this.overscaledZ>=M)return[new zs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var z=this.canonical.z+1,J=2*this.canonical.x,se=2*this.canonical.y;return[new zs(z,this.wrap,z,J,se),new zs(z,this.wrap,z,J+1,se),new zs(z,this.wrap,z,J,se+1),new zs(z,this.wrap,z,J+1,se+1)]},zs.prototype.isLessThan=function(M){return this.wrap<M.wrap||!(this.wrap>M.wrap)&&(this.overscaledZ<M.overscaledZ||!(this.overscaledZ>M.overscaledZ)&&(this.canonical.x<M.canonical.x||!(this.canonical.x>M.canonical.x)&&this.canonical.y<M.canonical.y))},zs.prototype.wrapped=function(){return new zs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},zs.prototype.unwrapTo=function(M){return new zs(this.overscaledZ,M,this.canonical.z,this.canonical.x,this.canonical.y)},zs.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},zs.prototype.toUnwrapped=function(){return new Ky(this.wrap,this.canonical)},zs.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},zs.prototype.getTilePoint=function(M){return this.canonical.getTilePoint(new _f(M.x-this.wrap,M.y))},ur("CanonicalTileID",Xf),ur("OverscaledTileID",zs,{omit:["posMatrix"]});var xf=function(M,z,J){if(this.uid=M,z.height!==z.width)throw new RangeError("DEM tiles must be square");if(J&&"mapbox"!==J&&"terrarium"!==J)return D('"'+J+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=z.height;var se=this.dim=z.height-2;this.data=new Uint32Array(z.data.buffer),this.encoding=J||"mapbox";for(var ve=0;ve<se;ve++)this.data[this._idx(-1,ve)]=this.data[this._idx(0,ve)],this.data[this._idx(se,ve)]=this.data[this._idx(se-1,ve)],this.data[this._idx(ve,-1)]=this.data[this._idx(ve,0)],this.data[this._idx(ve,se)]=this.data[this._idx(ve,se-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(se,-1)]=this.data[this._idx(se-1,0)],this.data[this._idx(-1,se)]=this.data[this._idx(0,se-1)],this.data[this._idx(se,se)]=this.data[this._idx(se-1,se-1)]};xf.prototype.get=function(M,z){var J=new Uint8Array(this.data.buffer),se=4*this._idx(M,z);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(J[se],J[se+1],J[se+2])},xf.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},xf.prototype._idx=function(M,z){if(M<-1||M>=this.dim+1||z<-1||z>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(z+1)*this.stride+(M+1)},xf.prototype._unpackMapbox=function(M,z,J){return(256*M*256+256*z+J)/10-1e4},xf.prototype._unpackTerrarium=function(M,z,J){return 256*M+z+J/256-32768},xf.prototype.getPixels=function(){return new ms({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},xf.prototype.backfillBorder=function(M,z,J){if(this.dim!==M.dim)throw new Error("dem dimension mismatch");var se=z*this.dim,ve=z*this.dim+this.dim,Me=J*this.dim,Fe=J*this.dim+this.dim;switch(z){case-1:se=ve-1;break;case 1:ve=se+1}switch(J){case-1:Me=Fe-1;break;case 1:Fe=Me+1}for(var Ze=-z*this.dim,lt=-J*this.dim,Tt=Me;Tt<Fe;Tt++)for(var Dt=se;Dt<ve;Dt++)this.data[this._idx(Dt,Tt)]=M.data[this._idx(Dt+Ze,Tt+lt)]},ur("DEMData",xf);var r0=function(M){this._stringToNumber={},this._numberToString=[];for(var z=0;z<M.length;z++){var J=M[z];this._stringToNumber[J]=z,this._numberToString[z]=J}};r0.prototype.encode=function(M){return this._stringToNumber[M]},r0.prototype.decode=function(M){return this._numberToString[M]};var i0=function(M,z,J,se,ve){this.type="Feature",this._vectorTileFeature=M,M._z=z,M._x=J,M._y=se,this.properties=M.properties,this.id=ve},Vg={geometry:{configurable:!0}};Vg.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Vg.geometry.set=function(M){this._geometry=M},i0.prototype.toJSON=function(){var M={geometry:this.geometry};for(var z in this)"_geometry"!==z&&"_vectorTileFeature"!==z&&(M[z]=this[z]);return M},Object.defineProperties(i0.prototype,Vg);var Qh=function(){this.state={},this.stateChanges={},this.deletedStates={}};Qh.prototype.updateState=function(M,z,J){var se=String(z);if(this.stateChanges[M]=this.stateChanges[M]||{},this.stateChanges[M][se]=this.stateChanges[M][se]||{},v(this.stateChanges[M][se],J),null===this.deletedStates[M])for(var ve in this.deletedStates[M]={},this.state[M])ve!==se&&(this.deletedStates[M][ve]=null);else if(this.deletedStates[M]&&null===this.deletedStates[M][se])for(var Me in this.deletedStates[M][se]={},this.state[M][se])J[Me]||(this.deletedStates[M][se][Me]=null);else for(var Fe in J)this.deletedStates[M]&&this.deletedStates[M][se]&&null===this.deletedStates[M][se][Fe]&&delete this.deletedStates[M][se][Fe]},Qh.prototype.removeFeatureState=function(M,z,J){if(null!==this.deletedStates[M]){var se=String(z);if(this.deletedStates[M]=this.deletedStates[M]||{},J&&void 0!==z)null!==this.deletedStates[M][se]&&(this.deletedStates[M][se]=this.deletedStates[M][se]||{},this.deletedStates[M][se][J]=null);else if(void 0!==z)if(this.stateChanges[M]&&this.stateChanges[M][se])for(J in this.deletedStates[M][se]={},this.stateChanges[M][se])this.deletedStates[M][se][J]=null;else this.deletedStates[M][se]=null;else this.deletedStates[M]=null}},Qh.prototype.getState=function(M,z){var J=String(z),Me=v({},(this.state[M]||{})[J],(this.stateChanges[M]||{})[J]);if(null===this.deletedStates[M])return{};if(this.deletedStates[M]){var Fe=this.deletedStates[M][z];if(null===Fe)return{};for(var Ze in Fe)delete Me[Ze]}return Me},Qh.prototype.initializeTileState=function(M,z){M.setFeatureState(this.state,z)},Qh.prototype.coalesceChanges=function(M,z){var J={};for(var se in this.stateChanges){this.state[se]=this.state[se]||{};var ve={};for(var Me in this.stateChanges[se])this.state[se][Me]||(this.state[se][Me]={}),v(this.state[se][Me],this.stateChanges[se][Me]),ve[Me]=this.state[se][Me];J[se]=ve}for(var Fe in this.deletedStates){this.state[Fe]=this.state[Fe]||{};var Ze={};if(null===this.deletedStates[Fe])for(var lt in this.state[Fe])Ze[lt]={},this.state[Fe][lt]={};else for(var Tt in this.deletedStates[Fe]){if(null===this.deletedStates[Fe][Tt])this.state[Fe][Tt]={};else for(var Dt=0,Jt=Object.keys(this.deletedStates[Fe][Tt]);Dt<Jt.length;Dt+=1)delete this.state[Fe][Tt][Jt[Dt]];Ze[Tt]=this.state[Fe][Tt]}J[Fe]=J[Fe]||{},v(J[Fe],Ze)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(J).length)for(var an in M)M[an].setFeatureState(J,z)};var Qc=function(M,z){this.tileID=M,this.x=M.canonical.x,this.y=M.canonical.y,this.z=M.canonical.z,this.grid=new xr(8192,16,0),this.grid3D=new xr(8192,16,0),this.featureIndexArray=new Ft,this.promoteId=z};function a0(M,z,J,se,ve){return L(M,function(Me,Fe){var Ze=z instanceof ql?z.get(Fe):null;return Ze&&Ze.evaluate?Ze.evaluate(J,se,ve):Ze})}function Ug(M){for(var z=1/0,J=1/0,se=-1/0,ve=-1/0,Me=0,Fe=M;Me<Fe.length;Me+=1){var Ze=Fe[Me];z=Math.min(z,Ze.x),J=Math.min(J,Ze.y),se=Math.max(se,Ze.x),ve=Math.max(ve,Ze.y)}return{minX:z,minY:J,maxX:se,maxY:ve}}function Hg(M,z){return z-M}Qc.prototype.insert=function(M,z,J,se,ve,Me){var Fe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(J,se,ve);for(var Ze=Me?this.grid3D:this.grid,lt=0;lt<z.length;lt++){for(var Tt=z[lt],Dt=[1/0,1/0,-1/0,-1/0],Jt=0;Jt<Tt.length;Jt++){var ln=Tt[Jt];Dt[0]=Math.min(Dt[0],ln.x),Dt[1]=Math.min(Dt[1],ln.y),Dt[2]=Math.max(Dt[2],ln.x),Dt[3]=Math.max(Dt[3],ln.y)}Dt[0]<8192&&Dt[1]<8192&&Dt[2]>=0&&Dt[3]>=0&&Ze.insert(Fe,Dt[0],Dt[1],Dt[2],Dt[3])}},Qc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Hh.VectorTile(new Wp(this.rawTileData)).layers,this.sourceLayerCoder=new r0(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Qc.prototype.query=function(M,z,J,se){var ve=this;this.loadVTLayers();for(var Me=M.params||{},Fe=8192/M.tileSize/M.scale,Ze=Ci(Me.filter),lt=M.queryGeometry,Tt=M.queryPadding*Fe,Dt=Ug(lt),Jt=this.grid.query(Dt.minX-Tt,Dt.minY-Tt,Dt.maxX+Tt,Dt.maxY+Tt),ln=Ug(M.cameraQueryGeometry),xn=0,On=this.grid3D.query(ln.minX-Tt,ln.minY-Tt,ln.maxX+Tt,ln.maxY+Tt,function(Sr,Rr,si,ii){return function(_i,Ui,Vi,Si,Zi){for(var Yi=0,Hi=_i;Yi<Hi.length;Yi+=1){var Aa=Hi[Yi];if(Ui<=Aa.x&&Vi<=Aa.y&&Si>=Aa.x&&Zi>=Aa.y)return!0}var Ga=[new f(Ui,Vi),new f(Ui,Zi),new f(Si,Zi),new f(Si,Vi)];if(_i.length>2)for(var to=0,ua=Ga;to<ua.length;to+=1)if(zu(_i,ua[to]))return!0;for(var Ya=0;Ya<_i.length-1;Ya++)if(Rh(_i[Ya],_i[Ya+1],Ga))return!0;return!1}(M.cameraQueryGeometry,Sr-Tt,Rr-Tt,si+Tt,ii+Tt)});xn<On.length;xn+=1)Jt.push(On[xn]);Jt.sort(Hg);for(var Yn,ar={},or=function(Sr){var Rr=Jt[Sr];if(Rr!==Yn){Yn=Rr;var si=ve.featureIndexArray.get(Rr),ii=null;ve.loadMatchingFeature(ar,si.bucketIndex,si.sourceLayerIndex,si.featureIndex,Ze,Me.layers,Me.availableImages,z,J,se,function(_i,Ui,Vi){return ii||(ii=$o(_i)),Ui.queryIntersectsFeature(lt,_i,Vi,ii,ve.z,M.transform,Fe,M.pixelPosMatrix)})}},cr=0;cr<Jt.length;cr++)or(cr);return ar},Qc.prototype.loadMatchingFeature=function(M,z,J,se,ve,Me,Fe,Ze,lt,Tt,Dt){var Jt=this.bucketLayerIDs[z];if(!Me||function(si,ii){for(var _i=0;_i<si.length;_i++)if(ii.indexOf(si[_i])>=0)return!0;return!1}(Me,Jt)){var ln=this.sourceLayerCoder.decode(J),an=this.vtLayers[ln].feature(se);if(ve.filter(new Fa(this.tileID.overscaledZ),an))for(var xn=this.getId(an,ln),On=0;On<Jt.length;On++){var Xn=Jt[On];if(!(Me&&Me.indexOf(Xn)<0)){var Yn=Ze[Xn];if(Yn){var ar={};void 0!==xn&&Tt&&(ar=Tt.getState(Yn.sourceLayer||"_geojsonTileLayer",xn));var or=lt[Xn];or.paint=a0(or.paint,Yn.paint,an,ar,Fe),or.layout=a0(or.layout,Yn.layout,an,ar,Fe);var cr=!Dt||Dt(an,Yn,ar);if(cr){var Sr=new i0(an,this.z,this.x,this.y,xn);Sr.layer=or;var Rr=M[Xn];void 0===Rr&&(Rr=M[Xn]=[]),Rr.push({featureIndex:se,feature:Sr,intersectionZ:cr})}}}}}},Qc.prototype.lookupSymbolFeatures=function(M,z,J,se,ve,Me,Fe,Ze){var lt={};this.loadVTLayers();for(var Tt=Ci(ve),Dt=0,Jt=M;Dt<Jt.length;Dt+=1)this.loadMatchingFeature(lt,J,se,Jt[Dt],Tt,Me,Fe,Ze,z);return lt},Qc.prototype.hasLayer=function(M){for(var z=0,J=this.bucketLayerIDs;z<J.length;z+=1)for(var se=0,ve=J[z];se<ve.length;se+=1)if(M===ve[se])return!0;return!1},Qc.prototype.getId=function(M,z){var J=M.id;return this.promoteId&&"boolean"==typeof(J=M.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[z]])&&(J=Number(J)),J},ur("FeatureIndex",Qc,{omit:["rawTileData","sourceLayerCoder"]});var fl=function(M,z){this.tileID=M,this.uid=w(),this.uses=0,this.tileSize=z,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};fl.prototype.registerFadeDuration=function(M){var z=M+this.timeAdded;z<W.now()||this.fadeEndTime&&z<this.fadeEndTime||(this.fadeEndTime=z)},fl.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},fl.prototype.loadVectorData=function(M,z,J){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",M){for(var se in M.featureIndex&&(this.latestFeatureIndex=M.featureIndex,M.rawTileData?(this.latestRawTileData=M.rawTileData,this.latestFeatureIndex.rawTileData=M.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=M.collisionBoxArray,this.buckets=function(Tt,Dt){var Jt={};if(!Dt)return Jt;for(var ln=function(){var On=xn[an],Xn=On.layerIds.map(function(cr){return Dt.getLayer(cr)}).filter(Boolean);if(0!==Xn.length){On.layers=Xn,On.stateDependentLayerIds&&(On.stateDependentLayers=On.stateDependentLayerIds.map(function(cr){return Xn.filter(function(Sr){return Sr.id===cr})[0]}));for(var Yn=0,ar=Xn;Yn<ar.length;Yn+=1)Jt[ar[Yn].id]=On}},an=0,xn=Tt;an<xn.length;an+=1)ln();return Jt}(M.buckets,z.style),this.hasSymbolBuckets=!1,this.buckets){var ve=this.buckets[se];if(ve instanceof To){if(this.hasSymbolBuckets=!0,!J)break;ve.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Me in this.buckets){var Fe=this.buckets[Me];if(Fe instanceof To&&Fe.hasRTLText){this.hasRTLText=!0,As.isLoading()||As.isLoaded()||"deferred"!==So()||so();break}}for(var Ze in this.queryPadding=0,this.buckets){var lt=this.buckets[Ze];this.queryPadding=Math.max(this.queryPadding,z.style.getLayer(Ze).queryRadius(lt))}M.imageAtlas&&(this.imageAtlas=M.imageAtlas),M.glyphAtlasImage&&(this.glyphAtlasImage=M.glyphAtlasImage)}else this.collisionBoxArray=new De},fl.prototype.unloadVectorData=function(){for(var M in this.buckets)this.buckets[M].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},fl.prototype.getBucket=function(M){return this.buckets[M.id]},fl.prototype.upload=function(M){for(var z in this.buckets){var J=this.buckets[z];J.uploadPending()&&J.upload(M)}var se=M.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new bf(M,this.imageAtlas.image,se.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new bf(M,this.glyphAtlasImage,se.ALPHA),this.glyphAtlasImage=null)},fl.prototype.prepare=function(M){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(M,this.imageAtlasTexture)},fl.prototype.queryRenderedFeatures=function(M,z,J,se,ve,Me,Fe,Ze,lt,Tt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:se,cameraQueryGeometry:ve,scale:Me,tileSize:this.tileSize,pixelPosMatrix:Tt,transform:Ze,params:Fe,queryPadding:this.queryPadding*lt},M,z,J):{}},fl.prototype.querySourceFeatures=function(M,z){var J=this.latestFeatureIndex;if(J&&J.rawTileData){var se=J.loadVTLayers(),ve=z?z.sourceLayer:"",Me=se._geojsonTileLayer||se[ve];if(Me)for(var Fe=Ci(z&&z.filter),Ze=this.tileID.canonical,lt=Ze.z,Tt=Ze.x,Dt=Ze.y,Jt={z:lt,x:Tt,y:Dt},ln=0;ln<Me.length;ln++){var an=Me.feature(ln);if(Fe.filter(new Fa(this.tileID.overscaledZ),an)){var xn=J.getId(an,ve),On=new i0(an,lt,Tt,Dt,xn);On.tile=Jt,M.push(On)}}}},fl.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},fl.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},fl.prototype.setExpiryData=function(M){var z=this.expirationTime;if(M.cacheControl){var J=B(M.cacheControl);J["max-age"]&&(this.expirationTime=Date.now()+1e3*J["max-age"])}else M.expires&&(this.expirationTime=new Date(M.expires).getTime());if(this.expirationTime){var se=Date.now(),ve=!1;if(this.expirationTime>se)ve=!1;else if(z)if(this.expirationTime<z)ve=!0;else{var Me=this.expirationTime-z;Me?this.expirationTime=se+Math.max(Me,3e4):ve=!0}else ve=!0;ve?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},fl.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},fl.prototype.setFeatureState=function(M,z){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(M).length){var J=this.latestFeatureIndex.loadVTLayers();for(var se in this.buckets)if(z.style.hasLayer(se)){var ve=this.buckets[se],Me=ve.layers[0].sourceLayer||"_geojsonTileLayer",Fe=J[Me],Ze=M[Me];if(Fe&&Ze&&0!==Object.keys(Ze).length){ve.update(Ze,Fe,this.imageAtlas&&this.imageAtlas.patternPositions||{});var lt=z&&z.style&&z.style.getLayer(se);lt&&(this.queryPadding=Math.max(this.queryPadding,lt.queryRadius(ve)))}}}},fl.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},fl.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<W.now()},fl.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},fl.prototype.setHoldDuration=function(M){this.symbolFadeHoldUntil=W.now()+M},fl.prototype.setDependencies=function(M,z){for(var J={},se=0,ve=z;se<ve.length;se+=1)J[ve[se]]=!0;this.dependencies[M]=J},fl.prototype.hasDependency=function(M,z){for(var J=0,se=M;J<se.length;J+=1){var Me=this.dependencies[se[J]];if(Me)for(var Fe=0,Ze=z;Fe<Ze.length;Fe+=1)if(Me[Ze[Fe]])return!0}return!1};var Jf=self.performance,Gg=function(M){this._marks={start:[M.url,"start"].join("#"),end:[M.url,"end"].join("#"),measure:M.url.toString()},Jf.mark(this._marks.start)};Gg.prototype.finish=function(){Jf.mark(this._marks.end);var M=Jf.getEntriesByName(this._marks.measure);return 0===M.length&&(Jf.measure(this._marks.measure,this._marks.start,this._marks.end),M=Jf.getEntriesByName(this._marks.measure),Jf.clearMarks(this._marks.start),Jf.clearMarks(this._marks.end),Jf.clearMeasures(this._marks.measure)),M},r.Actor=Kh,r.AlphaImage=Gf,r.CanonicalTileID=Xf,r.CollisionBoxArray=De,r.Color=sn,r.DEMData=xf,r.DataConstantProperty=Gi,r.DictionaryCoder=r0,r.EXTENT=8192,r.ErrorEvent=Ee,r.EvaluationParameters=Fa,r.Event=Pe,r.Evented=Ne,r.FeatureIndex=Qc,r.FillBucket=ju,r.FillExtrusionBucket=Ic,r.ImageAtlas=$f,r.ImagePosition=$p,r.LineBucket=su,r.LngLat=Xo,r.LngLatBounds=Ms,r.MercatorCoordinate=_f,r.ONE_EM=24,r.OverscaledTileID=zs,r.Point=f,r.Point$1=f,r.Properties=_l,r.Protobuf=Wp,r.RGBAImage=ms,r.RequestManager=de,r.RequestPerformance=Gg,r.ResourceType=xt,r.SegmentVector=Xt,r.SourceFeatureState=Qh,r.StructArrayLayout1ui2=$,r.StructArrayLayout2f1f2i16=Gc,r.StructArrayLayout2i4=_o,r.StructArrayLayout3ui6=Qs,r.StructArrayLayout4i8=ps,r.SymbolBucket=To,r.Texture=bf,r.Tile=fl,r.Transitionable=vu,r.Uniform1f=lr,r.Uniform1i=Wi,r.Uniform2f=Ur,r.Uniform3f=ki,r.Uniform4f=vi,r.UniformColor=Oi,r.UniformMatrix4f=da,r.UnwrappedTileID=Ky,r.ValidationError=Ke,r.WritingMode=bu,r.ZoomHistory=wa,r.add=function(M,z,J){return M[0]=z[0]+J[0],M[1]=z[1]+J[1],M[2]=z[2]+J[2],M},r.addDynamicAttributes=Rg,r.asyncAll=function(M,z,J){if(!M.length)return J(null,[]);var se=M.length,ve=new Array(M.length),Me=null;M.forEach(function(Fe,Ze){z(Fe,function(lt,Tt){lt&&(Me=lt),ve[Ze]=Tt,0==--se&&J(Me,ve)})})},r.bezier=o,r.bindAll=k,r.browser=W,r.cacheEntryPossiblyAdded=function(M){++ct>nt&&(M.getActor().send("enforceCacheSizeLimit",Xe),ct=0)},r.clamp=g,r.clearTileCache=function(M){var z=self.caches.delete("mapbox-tiles");M&&z.catch(M).then(function(){return M()})},r.clipLine=Pg,r.clone=function(M){var z=new Io(16);return z[0]=M[0],z[1]=M[1],z[2]=M[2],z[3]=M[3],z[4]=M[4],z[5]=M[5],z[6]=M[6],z[7]=M[7],z[8]=M[8],z[9]=M[9],z[10]=M[10],z[11]=M[11],z[12]=M[12],z[13]=M[13],z[14]=M[14],z[15]=M[15],z},r.clone$1=A,r.clone$2=function(M){var z=new Io(3);return z[0]=M[0],z[1]=M[1],z[2]=M[2],z},r.collisionCircleLayout=Sb,r.config=Z,r.create=function(){var M=new Io(16);return Io!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=0,M[12]=0,M[13]=0,M[14]=0),M[0]=1,M[5]=1,M[10]=1,M[15]=1,M},r.create$1=function(){var M=new Io(9);return Io!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[5]=0,M[6]=0,M[7]=0),M[0]=1,M[4]=1,M[8]=1,M},r.create$2=function(){var M=new Io(4);return Io!=Float32Array&&(M[1]=0,M[2]=0),M[0]=1,M[3]=1,M},r.createCommonjsModule=u,r.createExpression=cn,r.createLayout=ba,r.createStyleLayer=function(M){return"custom"===M.type?new Jh(M):new Kc[M.type](M)},r.cross=function(M,z,J){var se=z[0],ve=z[1],Me=z[2],Fe=J[0],Ze=J[1],lt=J[2];return M[0]=ve*lt-Me*Ze,M[1]=Me*Fe-se*lt,M[2]=se*Ze-ve*Fe,M},r.deepEqual=function M(z,J){if(Array.isArray(z)){if(!Array.isArray(J)||z.length!==J.length)return!1;for(var se=0;se<z.length;se++)if(!M(z[se],J[se]))return!1;return!0}if("object"==typeof z&&null!==z&&null!==J){if("object"!=typeof J||Object.keys(z).length!==Object.keys(J).length)return!1;for(var ve in z)if(!M(z[ve],J[ve]))return!1;return!0}return z===J},r.dot=function(M,z){return M[0]*z[0]+M[1]*z[1]+M[2]*z[2]},r.dot$1=function(M,z){return M[0]*z[0]+M[1]*z[1]+M[2]*z[2]+M[3]*z[3]},r.ease=d,r.emitValidationErrors=Br,r.endsWith=C,r.enforceCacheSizeLimit=function(M){et(),Ce&&Ce.then(function(z){z.keys().then(function(J){for(var se=0;se<J.length-M;se++)z.delete(J[se])})})},r.evaluateSizeForFeature=lu,r.evaluateSizeForZoom=Xp,r.evaluateVariableOffset=Lg,r.evented=Va,r.extend=v,r.featureFilter=Ci,r.filterObject=P,r.fromRotation=function(M,z){var J=Math.sin(z),se=Math.cos(z);return M[0]=se,M[1]=J,M[2]=0,M[3]=-J,M[4]=se,M[5]=0,M[6]=0,M[7]=0,M[8]=1,M},r.getAnchorAlignment=Sg,r.getAnchorJustification=Xh,r.getArrayBuffer=Bt,r.getImage=it,r.getJSON=function(M,z){return st(v(M,{type:"json"}),z)},r.getRTLTextPluginStatus=So,r.getReferrer=At,r.getVideo=function(M,z){var J,se,ve=self.document.createElement("video");ve.muted=!0,ve.onloadstart=function(){z(null,ve)};for(var Me=0;Me<M.length;Me++){var Fe=self.document.createElement("source");J=M[Me],se=void 0,(se=self.document.createElement("a")).href=J,(se.protocol!==self.document.location.protocol||se.host!==self.document.location.host)&&(ve.crossOrigin="Anonymous"),Fe.src=M[Me],ve.appendChild(Fe)}return{cancel:function(){}}},r.identity=Uf,r.invert=function(M,z){var J=z[0],se=z[1],ve=z[2],Me=z[3],Fe=z[4],Ze=z[5],lt=z[6],Tt=z[7],Dt=z[8],Jt=z[9],ln=z[10],an=z[11],xn=z[12],On=z[13],Xn=z[14],Yn=z[15],ar=J*Ze-se*Fe,or=J*lt-ve*Fe,cr=J*Tt-Me*Fe,Sr=se*lt-ve*Ze,Rr=se*Tt-Me*Ze,si=ve*Tt-Me*lt,ii=Dt*On-Jt*xn,_i=Dt*Xn-ln*xn,Ui=Dt*Yn-an*xn,Vi=Jt*Xn-ln*On,Si=Jt*Yn-an*On,Zi=ln*Yn-an*Xn,Yi=ar*Zi-or*Si+cr*Vi+Sr*Ui-Rr*_i+si*ii;return Yi?(M[0]=(Ze*Zi-lt*Si+Tt*Vi)*(Yi=1/Yi),M[1]=(ve*Si-se*Zi-Me*Vi)*Yi,M[2]=(On*si-Xn*Rr+Yn*Sr)*Yi,M[3]=(ln*Rr-Jt*si-an*Sr)*Yi,M[4]=(lt*Ui-Fe*Zi-Tt*_i)*Yi,M[5]=(J*Zi-ve*Ui+Me*_i)*Yi,M[6]=(Xn*cr-xn*si-Yn*or)*Yi,M[7]=(Dt*si-ln*cr+an*or)*Yi,M[8]=(Fe*Si-Ze*Ui+Tt*ii)*Yi,M[9]=(se*Ui-J*Si-Me*ii)*Yi,M[10]=(xn*Rr-On*cr+Yn*ar)*Yi,M[11]=(Jt*cr-Dt*Rr-an*ar)*Yi,M[12]=(Ze*_i-Fe*Vi-lt*ii)*Yi,M[13]=(J*Vi-se*_i+ve*ii)*Yi,M[14]=(On*or-xn*Sr-Xn*ar)*Yi,M[15]=(Dt*Sr-Jt*or+ln*ar)*Yi,M):null},r.isChar=Yr,r.isMapboxURL=be,r.keysDifference=function(M,z){var J=[];for(var se in M)se in z||J.push(se);return J},r.makeRequest=st,r.mapObject=L,r.mercatorXfromLng=n0,r.mercatorYfromLat=jg,r.mercatorZfromAltitude=Zb,r.mul=_y,r.multiply=Wc,r.mvt=Hh,r.normalize=function(M,z){var J=z[0],se=z[1],ve=z[2],Me=J*J+se*se+ve*ve;return Me>0&&(Me=1/Math.sqrt(Me)),M[0]=z[0]*Me,M[1]=z[1]*Me,M[2]=z[2]*Me,M},r.number=Ri,r.offscreenCanvasSupported=_t,r.ortho=function(M,z,J,se,ve,Me,Fe){var Ze=1/(z-J),lt=1/(se-ve),Tt=1/(Me-Fe);return M[0]=-2*Ze,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=-2*lt,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=2*Tt,M[11]=0,M[12]=(z+J)*Ze,M[13]=(ve+se)*lt,M[14]=(Fe+Me)*Tt,M[15]=1,M},r.parseGlyphPBF=function(M){return new Wp(M).readFields(jy,[])},r.pbf=Wp,r.performSymbolLayout=function(M,z,J,se,ve,Me,Fe){M.createArrays(),M.tilePixelRatio=8192/(512*M.overscaling),M.compareText={},M.iconsNeedLinear=!1;var lt=M.layers[0].layout,Tt=M.layers[0]._unevaluatedLayout._values,Dt={};if("composite"===M.textSizeData.kind){var Jt=M.textSizeData,an=Jt.maxZoom;Dt.compositeTextSizes=[Tt["text-size"].possiblyEvaluate(new Fa(Jt.minZoom),Fe),Tt["text-size"].possiblyEvaluate(new Fa(an),Fe)]}if("composite"===M.iconSizeData.kind){var xn=M.iconSizeData,Xn=xn.maxZoom;Dt.compositeIconSizes=[Tt["icon-size"].possiblyEvaluate(new Fa(xn.minZoom),Fe),Tt["icon-size"].possiblyEvaluate(new Fa(Xn),Fe)]}Dt.layoutTextSize=Tt["text-size"].possiblyEvaluate(new Fa(M.zoom+1),Fe),Dt.layoutIconSize=Tt["icon-size"].possiblyEvaluate(new Fa(M.zoom+1),Fe),Dt.textMaxSize=Tt["text-size"].possiblyEvaluate(new Fa(18));for(var Yn=24*lt.get("text-line-height"),ar="map"===lt.get("text-rotation-alignment")&&"point"!==lt.get("symbol-placement"),or=lt.get("text-keep-upright"),cr=lt.get("text-size"),Sr=function(){var ii=si[Rr],_i=lt.get("text-font").evaluate(ii,{},Fe).join(","),Ui=cr.evaluate(ii,{},Fe),Vi=Dt.layoutTextSize.evaluate(ii,{},Fe),Si=Dt.layoutIconSize.evaluate(ii,{},Fe),Zi={horizontal:{},vertical:void 0},Yi=ii.text,Hi=[0,0];if(Yi){var Aa=Yi.toString(),Ga=24*lt.get("text-letter-spacing").evaluate(ii,{},Fe),to=function(ka){for(var Ka=0,bs=ka;Ka<bs.length;Ka+=1)if(!va(bs[Ka].charCodeAt(0)))return!1;return!0}(Aa)?Ga:0,ua=lt.get("text-anchor").evaluate(ii,{},Fe),Ya=lt.get("text-variable-anchor");if(!Ya){var Uo=lt.get("text-radial-offset").evaluate(ii,{},Fe);Hi=Uo?Lg(ua,[24*Uo,Yy]):lt.get("text-offset").evaluate(ii,{},Fe).map(function(ka){return 24*ka})}var zo=ar?"center":lt.get("text-justify").evaluate(ii,{},Fe),Jo=lt.get("symbol-placement"),Bo="point"===Jo?24*lt.get("text-max-width").evaluate(ii,{},Fe):0,el=function(){M.allowVerticalPlacement&&Ea(Aa)&&(Zi.vertical=Zo(Yi,z,J,ve,_i,Bo,Yn,ua,"left",to,Hi,bu.vertical,!0,Jo,Vi,Ui))};if(!ar&&Ya){for(var rs="auto"===zo?Ya.map(function(ka){return Xh(ka)}):[zo],oa=!1,Kr=0;Kr<rs.length;Kr++){var hl=rs[Kr];if(!Zi.horizontal[hl])if(oa)Zi.horizontal[hl]=Zi.horizontal[0];else{var Al=Zo(Yi,z,J,ve,_i,Bo,Yn,"center",hl,to,Hi,bu.horizontal,!1,Jo,Vi,Ui);Al&&(Zi.horizontal[hl]=Al,oa=1===Al.positionedLines.length)}}el()}else{"auto"===zo&&(zo=Xh(ua));var vs=Zo(Yi,z,J,ve,_i,Bo,Yn,ua,zo,to,Hi,bu.horizontal,!1,Jo,Vi,Ui);vs&&(Zi.horizontal[zo]=vs),el(),Ea(Aa)&&ar&&or&&(Zi.vertical=Zo(Yi,z,J,ve,_i,Bo,Yn,ua,zo,to,Hi,bu.vertical,!1,Jo,Vi,Ui))}}var ka,Ka,Bs,kl,Zl,Ws=void 0,Ml=!1;if(ii.icon&&ii.icon.name){var Es=se[ii.icon.name];Es&&(ka=ve[ii.icon.name],Ka=lt.get("icon-offset").evaluate(ii,{},Fe),Bs=Sg(lt.get("icon-anchor").evaluate(ii,{},Fe)),Ws={image:ka,top:Zl=Ka[1]-ka.displaySize[1]*Bs.verticalAlign,bottom:Zl+ka.displaySize[1],left:kl=Ka[0]-ka.displaySize[0]*Bs.horizontalAlign,right:kl+ka.displaySize[0]},Ml=Es.sdf,void 0===M.sdfIcons?M.sdfIcons=Es.sdf:M.sdfIcons!==Es.sdf&&D("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Es.pixelRatio!==M.pixelRatio||0!==lt.get("icon-rotate").constantOr(1))&&(M.iconsNeedLinear=!0))}var Ko=Xy(Zi.horizontal)||Zi.vertical;M.iconsInText=!!Ko&&Ko.iconsInText,(Ko||Ws)&&function(ka,Ka,bs,Bs,_s,xs,Na,is,kl,Yl,Zl){var Oc=xs.textMaxSize.evaluate(Ka,{});void 0===Oc&&(Oc=Na);var ef,Dl=ka.layers[0].layout,Lc=Dl.get("icon-offset").evaluate(Ka,{},Zl),tf=Xy(bs.horizontal),dc=Na/24,o0=ka.tilePixelRatio*dc,ed=ka.tilePixelRatio*Oc/24,td=ka.tilePixelRatio*is,nd=ka.tilePixelRatio*Dl.get("symbol-spacing"),qg=Dl.get("text-padding")*ka.tilePixelRatio,Wg=Dl.get("icon-padding")*ka.tilePixelRatio,$g=Dl.get("text-max-angle")/180*Math.PI,Yg="map"===Dl.get("text-rotation-alignment")&&"point"!==Dl.get("symbol-placement"),bh="map"===Dl.get("icon-rotation-alignment")&&"point"!==Dl.get("symbol-placement"),np=Dl.get("symbol-placement"),Zg=nd/2,rp=Dl.get("icon-text-fit");Bs&&"none"!==rp&&(ka.allowVerticalPlacement&&bs.vertical&&(ef=Fb(Bs,bs.vertical,rp,Dl.get("icon-text-fit-padding"),Lc,dc)),tf&&(Bs=Fb(Bs,tf,rp,Dl.get("icon-text-fit-padding"),Lc,dc)));var _h=function(ev,pd){pd.x<0||pd.x>=8192||pd.y<0||pd.y>=8192||function(ks,Qu,tv,Nc,Jg,Kg,Qg,zc,op,sp,lp,c0,em,Uu,up,nv,Xb,Jb,tm,Kb,Hu,gd,nm,nf,Qb){var rm,Qf,md,Mh,yd,vd=ks.addToLineVertexArray(Qu,tv),im=0,am=0,rv=0,Bc=0,cp=-1,om=-1,wf={},e_=$n(""),f0=0,sm=0;if(void 0===zc._unevaluatedLayout.getValue("text-radial-offset")?(f0=(rm=zc.layout.get("text-offset").evaluate(Hu,{},nf).map(function(pp){return 24*pp}))[0],sm=rm[1]):(f0=24*zc.layout.get("text-radial-offset").evaluate(Hu,{},nf),sm=Yy),ks.allowVerticalPlacement&&Nc.vertical){var iv=zc.layout.get("text-rotate").evaluate(Hu,{},nf)+90;Mh=new Qp(op,Qu,sp,lp,c0,Nc.vertical,em,Uu,up,iv),Qg&&(yd=new Qp(op,Qu,sp,lp,c0,Qg,Xb,Jb,up,iv))}if(Jg){var fp=zc.layout.get("icon-rotate").evaluate(Hu,{}),av="none"!==zc.layout.get("icon-text-fit"),ov=Gy(Jg,fp,nm,av),bd=Qg?Gy(Qg,fp,nm,av):void 0;md=new Qp(op,Qu,sp,lp,c0,Jg,Xb,Jb,!1,fp),im=4*ov.length;var h0=ks.iconSizeData,hp=null;"source"===h0.kind?(hp=[128*zc.layout.get("icon-size").evaluate(Hu,{})])[0]>32640&&D(ks.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===h0.kind&&((hp=[128*gd.compositeIconSizes[0].evaluate(Hu,{},nf),128*gd.compositeIconSizes[1].evaluate(Hu,{},nf)])[0]>32640||hp[1]>32640)&&D(ks.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),ks.addSymbols(ks.icon,ov,hp,Kb,tm,Hu,!1,Qu,vd.lineStartIndex,vd.lineLength,-1,nf),cp=ks.icon.placedSymbolArray.length-1,bd&&(am=4*bd.length,ks.addSymbols(ks.icon,bd,hp,Kb,tm,Hu,bu.vertical,Qu,vd.lineStartIndex,vd.lineLength,-1,nf),om=ks.icon.placedSymbolArray.length-1)}for(var d0 in Nc.horizontal){var _d=Nc.horizontal[d0];if(!Qf){e_=$n(_d.text);var sv=zc.layout.get("text-rotate").evaluate(Hu,{},nf);Qf=new Qp(op,Qu,sp,lp,c0,_d,em,Uu,up,sv)}var lv=1===_d.positionedLines.length;if(rv+=Zy(ks,Qu,_d,Kg,zc,up,Hu,nv,vd,Nc.vertical?bu.horizontal:bu.horizontalOnly,lv?Object.keys(Nc.horizontal):[d0],wf,cp,gd,nf),lv)break}Nc.vertical&&(Bc+=Zy(ks,Qu,Nc.vertical,Kg,zc,up,Hu,nv,vd,bu.vertical,["vertical"],wf,om,gd,nf));var n_=Qf?Qf.boxStartIndex:ks.collisionBoxArray.length,lm=Qf?Qf.boxEndIndex:ks.collisionBoxArray.length,Bw=Mh?Mh.boxStartIndex:ks.collisionBoxArray.length,r_=Mh?Mh.boxEndIndex:ks.collisionBoxArray.length,uv=md?md.boxStartIndex:ks.collisionBoxArray.length,cv=md?md.boxEndIndex:ks.collisionBoxArray.length,fv=yd?yd.boxStartIndex:ks.collisionBoxArray.length,hv=yd?yd.boxEndIndex:ks.collisionBoxArray.length,jc=-1,pc=function(pp,dv){return pp&&pp.circleDiameter?Math.max(pp.circleDiameter,dv):dv};jc=pc(Qf,jc),jc=pc(Mh,jc),jc=pc(md,jc);var dp=(jc=pc(yd,jc))>-1?1:0;dp&&(jc*=Qb/24),ks.glyphOffsetArray.length>=To.MAX_GLYPHS&&D("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Hu.sortKey&&ks.addToSortKeyRanges(ks.symbolInstances.length,Hu.sortKey),ks.symbolInstances.emplaceBack(Qu.x,Qu.y,wf.right>=0?wf.right:-1,wf.center>=0?wf.center:-1,wf.left>=0?wf.left:-1,wf.vertical||-1,cp,om,e_,n_,lm,Bw,r_,uv,cv,fv,hv,sp,rv,Bc,im,am,dp,0,em,f0,sm,jc)}(ka,pd,ev,bs,Bs,_s,ef,ka.layers[0],ka.collisionBoxArray,Ka.index,Ka.sourceLayerIndex,ka.index,o0,qg,Yg,kl,td,Wg,bh,Lc,Ka,xs,Yl,Zl,Na)};if("line"===np)for(var s0=0,Rc=Pg(Ka.geometry,0,0,8192,8192);s0<Rc.length;s0+=1)for(var rd=Rc[s0],id=0,ad=zb(rd,nd,$g,bs.vertical||tf,Bs,24,ed,ka.overscaling,8192);id<ad.length;id+=1){var od=ad[id];tf&&yh(ka,tf.text,Zg,od)||_h(rd,od)}else if("line-center"===np)for(var ip=0,Fc=Ka.geometry;ip<Fc.length;ip+=1){var xh=Fc[ip];if(xh.length>1){var ld=Nb(xh,$g,bs.vertical||tf,Bs,24,ed);ld&&_h(xh,ld)}}else if("Polygon"===Ka.type)for(var ap=0,ud=Zc(Ka.geometry,0);ap<ud.length;ap+=1){var cd=ud[ap],fd=Og(cd,16);_h(cd[0],new Jd(fd.x,fd.y,0))}else if("LineString"===Ka.type)for(var hd=0,Qy=Ka.geometry;hd<Qy.length;hd+=1){var wh=Qy[hd];_h(wh,new Jd(wh[0].x,wh[0].y,0))}else if("Point"===Ka.type)for(var Kf=0,u0=Ka.geometry;Kf<u0.length;Kf+=1)for(var Th=0,Ah=u0[Kf];Th<Ah.length;Th+=1){var Xg=Ah[Th];_h([Xg],new Jd(Xg.x,Xg.y,0))}}(M,ii,Zi,Ws,se,Dt,Vi,Si,Hi,Ml,Fe)},Rr=0,si=M.features;Rr<si.length;Rr+=1)Sr();Me&&M.generateCollisionDebugBuffers()},r.perspective=function(M,z,J,se,ve){var Me,Fe=1/Math.tan(z/2);return M[0]=Fe/J,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=Fe,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=-1,M[12]=0,M[13]=0,M[15]=0,null!=ve&&ve!==1/0?(M[10]=(ve+se)*(Me=1/(se-ve)),M[14]=2*ve*se*Me):(M[10]=-1,M[14]=-2*se),M},r.pick=function(M,z){for(var J={},se=0;se<z.length;se++){var ve=z[se];ve in M&&(J[ve]=M[ve])}return J},r.plugin=As,r.polygonIntersectsPolygon=Wl,r.postMapLoadEvent=He,r.postTurnstileEvent=Oe,r.potpack=Vy,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.register=ur,r.registerForPluginStateChange=function(M){return M({pluginStatus:la,pluginURL:Vo}),Va.on("pluginStateChange",M),M},r.rotate=function(M,z,J){var se=z[0],ve=z[1],Me=z[2],Fe=z[3],Ze=Math.sin(J),lt=Math.cos(J);return M[0]=se*lt+Me*Ze,M[1]=ve*lt+Fe*Ze,M[2]=se*-Ze+Me*lt,M[3]=ve*-Ze+Fe*lt,M},r.rotateX=function(M,z,J){var se=Math.sin(J),ve=Math.cos(J),Me=z[4],Fe=z[5],Ze=z[6],lt=z[7],Tt=z[8],Dt=z[9],Jt=z[10],ln=z[11];return z!==M&&(M[0]=z[0],M[1]=z[1],M[2]=z[2],M[3]=z[3],M[12]=z[12],M[13]=z[13],M[14]=z[14],M[15]=z[15]),M[4]=Me*ve+Tt*se,M[5]=Fe*ve+Dt*se,M[6]=Ze*ve+Jt*se,M[7]=lt*ve+ln*se,M[8]=Tt*ve-Me*se,M[9]=Dt*ve-Fe*se,M[10]=Jt*ve-Ze*se,M[11]=ln*ve-lt*se,M},r.rotateZ=function(M,z,J){var se=Math.sin(J),ve=Math.cos(J),Me=z[0],Fe=z[1],Ze=z[2],lt=z[3],Tt=z[4],Dt=z[5],Jt=z[6],ln=z[7];return z!==M&&(M[8]=z[8],M[9]=z[9],M[10]=z[10],M[11]=z[11],M[12]=z[12],M[13]=z[13],M[14]=z[14],M[15]=z[15]),M[0]=Me*ve+Tt*se,M[1]=Fe*ve+Dt*se,M[2]=Ze*ve+Jt*se,M[3]=lt*ve+ln*se,M[4]=Tt*ve-Me*se,M[5]=Dt*ve-Fe*se,M[6]=Jt*ve-Ze*se,M[7]=ln*ve-lt*se,M},r.scale=function(M,z,J){var se=J[0],ve=J[1],Me=J[2];return M[0]=z[0]*se,M[1]=z[1]*se,M[2]=z[2]*se,M[3]=z[3]*se,M[4]=z[4]*ve,M[5]=z[5]*ve,M[6]=z[6]*ve,M[7]=z[7]*ve,M[8]=z[8]*Me,M[9]=z[9]*Me,M[10]=z[10]*Me,M[11]=z[11]*Me,M[12]=z[12],M[13]=z[13],M[14]=z[14],M[15]=z[15],M},r.scale$1=function(M,z,J){return M[0]=z[0]*J,M[1]=z[1]*J,M[2]=z[2]*J,M[3]=z[3]*J,M},r.scale$2=function(M,z,J){return M[0]=z[0]*J,M[1]=z[1]*J,M[2]=z[2]*J,M},r.setCacheLimits=function(M,z){Xe=M,nt=z},r.setRTLTextPlugin=function(M,z,J){if(void 0===J&&(J=!1),la===$a||la===Wo||la===Fs)throw new Error("setRTLTextPlugin cannot be called multiple times.");Vo=W.resolveURL(M),la=$a,Js=z,ja(),J||so()},r.sphericalToCartesian=function(M){var z=M[0],J=M[1],se=M[2];return J+=90,J*=Math.PI/180,se*=Math.PI/180,{x:z*Math.cos(J)*Math.sin(se),y:z*Math.sin(J)*Math.sin(se),z:z*Math.cos(se)}},r.sqrLen=function(M){var z=M[0],J=M[1];return z*z+J*J},r.styleSpec=Ve,r.sub=function(M,z,J){return M[0]=z[0]-J[0],M[1]=z[1]-J[1],M[2]=z[2]-J[2],M},r.symbolSize=Hy,r.transformMat3=function(M,z,J){var se=z[0],ve=z[1],Me=z[2];return M[0]=se*J[0]+ve*J[3]+Me*J[6],M[1]=se*J[1]+ve*J[4]+Me*J[7],M[2]=se*J[2]+ve*J[5]+Me*J[8],M},r.transformMat4=Cc,r.translate=function(M,z,J){var se,ve,Me,Fe,Ze,lt,Tt,Dt,Jt,ln,an,xn,On=J[0],Xn=J[1],Yn=J[2];return z===M?(M[12]=z[0]*On+z[4]*Xn+z[8]*Yn+z[12],M[13]=z[1]*On+z[5]*Xn+z[9]*Yn+z[13],M[14]=z[2]*On+z[6]*Xn+z[10]*Yn+z[14],M[15]=z[3]*On+z[7]*Xn+z[11]*Yn+z[15]):(ve=z[1],Me=z[2],Fe=z[3],Ze=z[4],lt=z[5],Tt=z[6],Dt=z[7],Jt=z[8],ln=z[9],an=z[10],xn=z[11],M[0]=se=z[0],M[1]=ve,M[2]=Me,M[3]=Fe,M[4]=Ze,M[5]=lt,M[6]=Tt,M[7]=Dt,M[8]=Jt,M[9]=ln,M[10]=an,M[11]=xn,M[12]=se*On+Ze*Xn+Jt*Yn+z[12],M[13]=ve*On+lt*Xn+ln*Yn+z[13],M[14]=Me*On+Tt*Xn+an*Yn+z[14],M[15]=Fe*On+Dt*Xn+xn*Yn+z[15]),M},r.triggerPluginCompletionEvent=qs,r.uniqueId=w,r.validateCustomStyleLayer=function(M){var z=[],J=M.id;return void 0===J&&z.push({message:"layers."+J+': missing required property "id"'}),void 0===M.render&&z.push({message:"layers."+J+': missing required method "render"'}),M.renderingMode&&"2d"!==M.renderingMode&&"3d"!==M.renderingMode&&z.push({message:"layers."+J+': property "renderingMode" must be either "2d" or "3d"'}),z},r.validateLight=Tr,r.validateStyle=hr,r.values=function(M){var z=[];for(var J in M)z.push(M[J]);return z},r.vectorTile=Hh,r.version="1.10.1",r.warnOnce=D,r.webpSupported=oe,r.window=self,r.wrap=y}),p(0,function(r){function u(Pe){var Ee=typeof Pe;if("number"===Ee||"boolean"===Ee||"string"===Ee||null==Pe)return JSON.stringify(Pe);if(Array.isArray(Pe)){for(var Ne="[",Ve=0,Ke=Pe;Ve<Ke.length;Ve+=1)Ne+=u(Ke[Ve])+",";return Ne+"]"}for(var bt=Object.keys(Pe).sort(),gt="{",pt=0;pt<bt.length;pt++)gt+=JSON.stringify(bt[pt])+":"+u(Pe[bt[pt]])+",";return gt+"}"}function c(Pe){for(var Ee="",Ne=0,Ve=r.refProperties;Ne<Ve.length;Ne+=1)Ee+="/"+u(Pe[Ve[Ne]]);return Ee}var l=function(Pe){this.keyCache={},Pe&&this.replace(Pe)};l.prototype.replace=function(Pe){this._layerConfigs={},this._layers={},this.update(Pe,[])},l.prototype.update=function(Pe,Ee){for(var Ne=this,Ve=0,Ke=Pe;Ve<Ke.length;Ve+=1){var bt=Ke[Ve];this._layerConfigs[bt.id]=bt;var gt=this._layers[bt.id]=r.createStyleLayer(bt);gt._featureFilter=r.featureFilter(gt.filter),this.keyCache[bt.id]&&delete this.keyCache[bt.id]}for(var pt=0,St=Ee;pt<St.length;pt+=1){var jt=St[pt];delete this.keyCache[jt],delete this._layerConfigs[jt],delete this._layers[jt]}this.familiesBySource={};for(var Lt=0,Vt=function(wt,Ut){for(var Zt={},tn=0;tn<wt.length;tn++){var un=Ut&&Ut[wt[tn].id]||c(wt[tn]);Ut&&(Ut[wt[tn].id]=un);var vn=Zt[un];vn||(vn=Zt[un]=[]),vn.push(wt[tn])}var Qt=[];for(var yn in Zt)Qt.push(Zt[yn]);return Qt}(r.values(this._layerConfigs),this.keyCache);Lt<Vt.length;Lt+=1){var mt=Vt[Lt].map(function(wt){return Ne._layers[wt.id]}),Wt=mt[0];if("none"!==Wt.visibility){var Kt=Wt.source||"",rn=this.familiesBySource[Kt];rn||(rn=this.familiesBySource[Kt]={});var Yt=Wt.sourceLayer||"_geojsonTileLayer",Ue=rn[Yt];Ue||(Ue=rn[Yt]=[]),Ue.push(mt)}}};var f=function(Pe){var Ee={},Ne=[];for(var Ve in Pe){var Ke=Pe[Ve],bt=Ee[Ve]={};for(var gt in Ke){var pt=Ke[+gt];if(pt&&0!==pt.bitmap.width&&0!==pt.bitmap.height){var St={x:0,y:0,w:pt.bitmap.width+2,h:pt.bitmap.height+2};Ne.push(St),bt[gt]={rect:St,metrics:pt.metrics}}}}var jt=r.potpack(Ne),mt=new r.AlphaImage({width:jt.w||1,height:jt.h||1});for(var Wt in Pe){var Kt=Pe[Wt];for(var rn in Kt){var Yt=Kt[+rn];if(Yt&&0!==Yt.bitmap.width&&0!==Yt.bitmap.height){var Ue=Ee[Wt][rn].rect;r.AlphaImage.copy(Yt.bitmap,mt,{x:0,y:0},{x:Ue.x+1,y:Ue.y+1},Yt.bitmap)}}}this.image=mt,this.positions=Ee};r.register("GlyphAtlas",f);var s=function(Pe){this.tileID=new r.OverscaledTileID(Pe.tileID.overscaledZ,Pe.tileID.wrap,Pe.tileID.canonical.z,Pe.tileID.canonical.x,Pe.tileID.canonical.y),this.uid=Pe.uid,this.zoom=Pe.zoom,this.pixelRatio=Pe.pixelRatio,this.tileSize=Pe.tileSize,this.source=Pe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Pe.showCollisionBoxes,this.collectResourceTiming=!!Pe.collectResourceTiming,this.returnDependencies=!!Pe.returnDependencies,this.promoteId=Pe.promoteId};function o(Pe,Ee,Ne){for(var Ve=new r.EvaluationParameters(Ee),Ke=0,bt=Pe;Ke<bt.length;Ke+=1)bt[Ke].recalculate(Ve,Ne)}function d(Pe,Ee){var Ne=r.getArrayBuffer(Pe.request,function(Ve,Ke,bt,gt){Ve?Ee(Ve):Ke&&Ee(null,{vectorTile:new r.vectorTile.VectorTile(new r.pbf(Ke)),rawData:Ke,cacheControl:bt,expires:gt})});return function(){Ne.cancel(),Ee()}}s.prototype.parse=function(Pe,Ee,Ne,Ve,Ke){var bt=this;this.status="parsing",this.data=Pe,this.collisionBoxArray=new r.CollisionBoxArray;var gt=new r.DictionaryCoder(Object.keys(Pe.layers).sort()),pt=new r.FeatureIndex(this.tileID,this.promoteId);pt.bucketLayerIDs=[];var St,jt,Lt,Vt,mt={},Wt={featureIndex:pt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ne},Kt=Ee.familiesBySource[this.source];for(var rn in Kt){var Yt=Pe.layers[rn];if(Yt){1===Yt.version&&r.warnOnce('Vector tile source "'+this.source+'" layer "'+rn+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ue=gt.encode(rn),wt=[],Ut=0;Ut<Yt.length;Ut++){var Zt=Yt.feature(Ut),tn=pt.getId(Zt,rn);wt.push({feature:Zt,id:tn,index:Ut,sourceLayerIndex:Ue})}for(var un=0,vn=Kt[rn];un<vn.length;un+=1){var Qt=vn[un],yn=Qt[0];yn.minzoom&&this.zoom<Math.floor(yn.minzoom)||yn.maxzoom&&this.zoom>=yn.maxzoom||"none"!==yn.visibility&&(o(Qt,this.zoom,Ne),(mt[yn.id]=yn.createBucket({index:pt.bucketLayerIDs.length,layers:Qt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ue,sourceID:this.source})).populate(wt,Wt,this.tileID.canonical),pt.bucketLayerIDs.push(Qt.map(function(Rn){return Rn.id})))}}}var Mn=r.mapObject(Wt.glyphDependencies,function(Rn){return Object.keys(Rn).map(Number)});Object.keys(Mn).length?Ve.send("getGlyphs",{uid:this.uid,stacks:Mn},function(Rn,Ln){St||(St=Rn,jt=Ln,In.call(bt))}):jt={};var Pn=Object.keys(Wt.iconDependencies);Pn.length?Ve.send("getImages",{icons:Pn,source:this.source,tileID:this.tileID,type:"icons"},function(Rn,Ln){St||(St=Rn,Lt=Ln,In.call(bt))}):Lt={};var sn=Object.keys(Wt.patternDependencies);function In(){if(St)return Ke(St);if(jt&&Lt&&Vt){var Rn=new f(jt),Ln=new r.ImageAtlas(Lt,Vt);for(var qn in mt){var nr=mt[qn];nr instanceof r.SymbolBucket?(o(nr.layers,this.zoom,Ne),r.performSymbolLayout(nr,jt,Rn.positions,Lt,Ln.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):nr.hasPattern&&(nr instanceof r.LineBucket||nr instanceof r.FillBucket||nr instanceof r.FillExtrusionBucket)&&(o(nr.layers,this.zoom,Ne),nr.addFeatures(Wt,this.tileID.canonical,Ln.patternPositions))}this.status="done",Ke(null,{buckets:r.values(mt).filter(function(rr){return!rr.isEmpty()}),featureIndex:pt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Rn.image,imageAtlas:Ln,glyphMap:this.returnDependencies?jt:null,iconMap:this.returnDependencies?Lt:null,glyphPositions:this.returnDependencies?Rn.positions:null})}}sn.length?Ve.send("getImages",{icons:sn,source:this.source,tileID:this.tileID,type:"patterns"},function(Rn,Ln){St||(St=Rn,Vt=Ln,In.call(bt))}):Vt={},In.call(this)};var g=function(Pe,Ee,Ne,Ve){this.actor=Pe,this.layerIndex=Ee,this.availableImages=Ne,this.loadVectorData=Ve||d,this.loading={},this.loaded={}};g.prototype.loadTile=function(Pe,Ee){var Ne=this,Ve=Pe.uid;this.loading||(this.loading={});var Ke=!!(Pe&&Pe.request&&Pe.request.collectResourceTiming)&&new r.RequestPerformance(Pe.request),bt=this.loading[Ve]=new s(Pe);bt.abort=this.loadVectorData(Pe,function(gt,pt){if(delete Ne.loading[Ve],gt||!pt)return bt.status="done",Ne.loaded[Ve]=bt,Ee(gt);var St=pt.rawData,jt={};pt.expires&&(jt.expires=pt.expires),pt.cacheControl&&(jt.cacheControl=pt.cacheControl);var Lt={};if(Ke){var Vt=Ke.finish();Vt&&(Lt.resourceTiming=JSON.parse(JSON.stringify(Vt)))}bt.vectorTile=pt.vectorTile,bt.parse(pt.vectorTile,Ne.layerIndex,Ne.availableImages,Ne.actor,function(mt,Wt){if(mt||!Wt)return Ee(mt);Ee(null,r.extend({rawTileData:St.slice(0)},Wt,jt,Lt))}),Ne.loaded=Ne.loaded||{},Ne.loaded[Ve]=bt})},g.prototype.reloadTile=function(Pe,Ee){var Ne=this,Ve=this.loaded,Ke=Pe.uid,bt=this;if(Ve&&Ve[Ke]){var gt=Ve[Ke];gt.showCollisionBoxes=Pe.showCollisionBoxes;var pt=function(St,jt){var Lt=gt.reloadCallback;Lt&&(delete gt.reloadCallback,gt.parse(gt.vectorTile,bt.layerIndex,Ne.availableImages,bt.actor,Lt)),Ee(St,jt)};"parsing"===gt.status?gt.reloadCallback=pt:"done"===gt.status&&(gt.vectorTile?gt.parse(gt.vectorTile,this.layerIndex,this.availableImages,this.actor,pt):pt())}},g.prototype.abortTile=function(Pe,Ee){var Ne=this.loading,Ve=Pe.uid;Ne&&Ne[Ve]&&Ne[Ve].abort&&(Ne[Ve].abort(),delete Ne[Ve]),Ee()},g.prototype.removeTile=function(Pe,Ee){var Ne=this.loaded,Ve=Pe.uid;Ne&&Ne[Ve]&&delete Ne[Ve],Ee()};var y=r.window.ImageBitmap,v=function(){this.loaded={}};v.prototype.loadTile=function(Pe,Ee){var Ne=Pe.uid,Ve=Pe.encoding,Ke=Pe.rawImageData,bt=y&&Ke instanceof y?this.getImageData(Ke):Ke,gt=new r.DEMData(Ne,bt,Ve);this.loaded=this.loaded||{},this.loaded[Ne]=gt,Ee(null,gt)},v.prototype.getImageData=function(Pe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Pe.width,Pe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Pe.width,this.offscreenCanvas.height=Pe.height,this.offscreenCanvasContext.drawImage(Pe,0,0,Pe.width,Pe.height);var Ee=this.offscreenCanvasContext.getImageData(-1,-1,Pe.width+2,Pe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new r.RGBAImage({width:Ee.width,height:Ee.height},Ee.data)},v.prototype.removeTile=function(Pe){var Ee=this.loaded,Ne=Pe.uid;Ee&&Ee[Ne]&&delete Ee[Ne]};var _=function Pe(Ee,Ne){var Ve,Ke=Ee&&Ee.type;if("FeatureCollection"===Ke)for(Ve=0;Ve<Ee.features.length;Ve++)Pe(Ee.features[Ve],Ne);else if("GeometryCollection"===Ke)for(Ve=0;Ve<Ee.geometries.length;Ve++)Pe(Ee.geometries[Ve],Ne);else if("Feature"===Ke)Pe(Ee.geometry,Ne);else if("Polygon"===Ke)w(Ee.coordinates,Ne);else if("MultiPolygon"===Ke)for(Ve=0;Ve<Ee.coordinates.length;Ve++)w(Ee.coordinates[Ve],Ne);return Ee};function w(Pe,Ee){if(0!==Pe.length){x(Pe[0],Ee);for(var Ne=1;Ne<Pe.length;Ne++)x(Pe[Ne],!Ee)}}function x(Pe,Ee){for(var Ne=0,Ve=0,Ke=Pe.length,bt=Ke-1;Ve<Ke;bt=Ve++)Ne+=(Pe[Ve][0]-Pe[bt][0])*(Pe[bt][1]+Pe[Ve][1]);Ne>=0!=!!Ee&&Pe.reverse()}var E=r.vectorTile.VectorTileFeature.prototype.toGeoJSON,k=function(Pe){this._feature=Pe,this.extent=r.EXTENT,this.type=Pe.type,this.properties=Pe.tags,"id"in Pe&&!isNaN(Pe.id)&&(this.id=parseInt(Pe.id,10))};k.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Pe=[],Ee=0,Ne=this._feature.geometry;Ee<Ne.length;Ee+=1){var Ve=Ne[Ee];Pe.push([new r.Point$1(Ve[0],Ve[1])])}return Pe}for(var Ke=[],bt=0,gt=this._feature.geometry;bt<gt.length;bt+=1){for(var pt=[],St=0,jt=gt[bt];St<jt.length;St+=1){var Lt=jt[St];pt.push(new r.Point$1(Lt[0],Lt[1]))}Ke.push(pt)}return Ke},k.prototype.toGeoJSON=function(Pe,Ee,Ne){return E.call(this,Pe,Ee,Ne)};var C=function(Pe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=Pe.length,this._features=Pe};C.prototype.feature=function(Pe){return new k(this._features[Pe])};var L=r.vectorTile.VectorTileFeature,P=A;function A(Pe,Ee){this.options=Ee||{},this.features=Pe,this.length=Pe.length}function I(Pe,Ee){this.id="number"==typeof Pe.id?Pe.id:void 0,this.type=Pe.type,this.rawGeometry=1===Pe.type?[Pe.geometry]:Pe.geometry,this.properties=Pe.tags,this.extent=Ee||4096}A.prototype.feature=function(Pe){return new I(this.features[Pe],this.options.extent)},I.prototype.loadGeometry=function(){var Pe=this.rawGeometry;this.geometry=[];for(var Ee=0;Ee<Pe.length;Ee++){for(var Ne=Pe[Ee],Ve=[],Ke=0;Ke<Ne.length;Ke++)Ve.push(new r.Point$1(Ne[Ke][0],Ne[Ke][1]));this.geometry.push(Ve)}return this.geometry},I.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Pe=this.geometry,Ee=1/0,Ne=-1/0,Ve=1/0,Ke=-1/0,bt=0;bt<Pe.length;bt++)for(var gt=Pe[bt],pt=0;pt<gt.length;pt++){var St=gt[pt];Ee=Math.min(Ee,St.x),Ne=Math.max(Ne,St.x),Ve=Math.min(Ve,St.y),Ke=Math.max(Ke,St.y)}return[Ee,Ve,Ne,Ke]},I.prototype.toGeoJSON=L.prototype.toGeoJSON;var D=B,N=P;function B(Pe){var Ee=new r.pbf;return function(Ne,Ve){for(var Ke in Ne.layers)Ve.writeMessage(3,H,Ne.layers[Ke])}(Pe,Ee),Ee.finish()}function H(Pe,Ee){var Ne;Ee.writeVarintField(15,Pe.version||1),Ee.writeStringField(1,Pe.name||""),Ee.writeVarintField(5,Pe.extent||4096);var Ve={keys:[],values:[],keycache:{},valuecache:{}};for(Ne=0;Ne<Pe.length;Ne++)Ve.feature=Pe.feature(Ne),Ee.writeMessage(2,Y,Ve);var Ke=Ve.keys;for(Ne=0;Ne<Ke.length;Ne++)Ee.writeStringField(3,Ke[Ne]);var bt=Ve.values;for(Ne=0;Ne<bt.length;Ne++)Ee.writeMessage(4,K,bt[Ne])}function Y(Pe,Ee){var Ne=Pe.feature;void 0!==Ne.id&&Ee.writeVarintField(1,Ne.id),Ee.writeMessage(2,Q,Pe),Ee.writeVarintField(3,Ne.type),Ee.writeMessage(4,te,Ne)}function Q(Pe,Ee){var Ne=Pe.feature,Ve=Pe.keys,Ke=Pe.values,bt=Pe.keycache,gt=Pe.valuecache;for(var pt in Ne.properties){var St=bt[pt];void 0===St&&(Ve.push(pt),bt[pt]=St=Ve.length-1),Ee.writeVarint(St);var jt=Ne.properties[pt],Lt=typeof jt;"string"!==Lt&&"boolean"!==Lt&&"number"!==Lt&&(jt=JSON.stringify(jt));var Vt=Lt+":"+jt,mt=gt[Vt];void 0===mt&&(Ke.push(jt),gt[Vt]=mt=Ke.length-1),Ee.writeVarint(mt)}}function ne(Pe,Ee){return(Ee<<3)+(7&Pe)}function ae(Pe){return Pe<<1^Pe>>31}function te(Pe,Ee){for(var Ne=Pe.loadGeometry(),Ve=Pe.type,Ke=0,bt=0,gt=Ne.length,pt=0;pt<gt;pt++){var St=Ne[pt],jt=1;1===Ve&&(jt=St.length),Ee.writeVarint(ne(1,jt));for(var Lt=3===Ve?St.length-1:St.length,Vt=0;Vt<Lt;Vt++){1===Vt&&1!==Ve&&Ee.writeVarint(ne(2,Lt-1));var mt=St[Vt].x-Ke,Wt=St[Vt].y-bt;Ee.writeVarint(ae(mt)),Ee.writeVarint(ae(Wt)),Ke+=mt,bt+=Wt}3===Ve&&Ee.writeVarint(ne(7,1))}}function K(Pe,Ee){var Ne=typeof Pe;"string"===Ne?Ee.writeStringField(1,Pe):"boolean"===Ne?Ee.writeBooleanField(7,Pe):"number"===Ne&&(Pe%1!=0?Ee.writeDoubleField(3,Pe):Pe<0?Ee.writeSVarintField(6,Pe):Ee.writeVarintField(5,Pe))}function q(Pe,Ee,Ne,Ve,Ke,bt){if(!(Ke-Ve<=Ne)){var gt=Ve+Ke>>1;(function pt(St,jt,Lt,Vt,mt,Wt){for(;mt>Vt;){if(mt-Vt>600){var Kt=mt-Vt+1,rn=Lt-Vt+1,Yt=Math.log(Kt),Ue=.5*Math.exp(2*Yt/3),wt=.5*Math.sqrt(Yt*Ue*(Kt-Ue)/Kt)*(rn-Kt/2<0?-1:1);pt(St,jt,Lt,Math.max(Vt,Math.floor(Lt-rn*Ue/Kt+wt)),Math.min(mt,Math.floor(Lt+(Kt-rn)*Ue/Kt+wt)),Wt)}var tn=jt[2*Lt+Wt],un=Vt,vn=mt;for(re(St,jt,Vt,Lt),jt[2*mt+Wt]>tn&&re(St,jt,Vt,mt);un<vn;){for(re(St,jt,un,vn),un++,vn--;jt[2*un+Wt]<tn;)un++;for(;jt[2*vn+Wt]>tn;)vn--}jt[2*Vt+Wt]===tn?re(St,jt,Vt,vn):re(St,jt,++vn,mt),vn<=Lt&&(Vt=vn+1),Lt<=vn&&(mt=vn-1)}})(Pe,Ee,gt,Ve,Ke,bt%2),q(Pe,Ee,Ne,Ve,gt-1,bt+1),q(Pe,Ee,Ne,gt+1,Ke,bt+1)}}function re(Pe,Ee,Ne,Ve){V(Pe,Ne,Ve),V(Ee,2*Ne,2*Ve),V(Ee,2*Ne+1,2*Ve+1)}function V(Pe,Ee,Ne){var Ve=Pe[Ee];Pe[Ee]=Pe[Ne],Pe[Ne]=Ve}function W(Pe,Ee,Ne,Ve){var Ke=Pe-Ne,bt=Ee-Ve;return Ke*Ke+bt*bt}D.fromVectorTileJs=B,D.fromGeojsonVt=function(Pe,Ee){Ee=Ee||{};var Ne={};for(var Ve in Pe)Ne[Ve]=new P(Pe[Ve].features,Ee),Ne[Ve].name=Ve,Ne[Ve].version=Ee.version,Ne[Ve].extent=Ee.extent;return B({layers:Ne})},D.GeoJSONWrapper=N;var Z=function(Pe){return Pe[0]},oe=function(Pe){return Pe[1]},ie=function(Pe,Ee,Ne,Ve,Ke){void 0===Ee&&(Ee=Z),void 0===Ne&&(Ne=oe),void 0===Ve&&(Ve=64),void 0===Ke&&(Ke=Float64Array),this.nodeSize=Ve,this.points=Pe;for(var bt=Pe.length<65536?Uint16Array:Uint32Array,gt=this.ids=new bt(Pe.length),pt=this.coords=new Ke(2*Pe.length),St=0;St<Pe.length;St++)gt[St]=St,pt[2*St]=Ee(Pe[St]),pt[2*St+1]=Ne(Pe[St]);q(gt,pt,Ve,0,gt.length-1,0)};ie.prototype.range=function(Pe,Ee,Ne,Ve){return function(Ke,bt,gt,pt,St,jt,Lt){for(var Vt,mt,Wt=[0,Ke.length-1,0],Kt=[];Wt.length;){var rn=Wt.pop(),Yt=Wt.pop(),Ue=Wt.pop();if(Yt-Ue<=Lt)for(var wt=Ue;wt<=Yt;wt++)mt=bt[2*wt+1],(Vt=bt[2*wt])>=gt&&Vt<=St&&mt>=pt&&mt<=jt&&Kt.push(Ke[wt]);else{var Ut=Math.floor((Ue+Yt)/2);mt=bt[2*Ut+1],(Vt=bt[2*Ut])>=gt&&Vt<=St&&mt>=pt&&mt<=jt&&Kt.push(Ke[Ut]);var Zt=(rn+1)%2;(0===rn?gt<=Vt:pt<=mt)&&(Wt.push(Ue),Wt.push(Ut-1),Wt.push(Zt)),(0===rn?St>=Vt:jt>=mt)&&(Wt.push(Ut+1),Wt.push(Yt),Wt.push(Zt))}}return Kt}(this.ids,this.coords,Pe,Ee,Ne,Ve,this.nodeSize)},ie.prototype.within=function(Pe,Ee,Ne){return function(Ve,Ke,bt,gt,pt,St){for(var jt=[0,Ve.length-1,0],Lt=[],Vt=pt*pt;jt.length;){var mt=jt.pop(),Wt=jt.pop(),Kt=jt.pop();if(Wt-Kt<=St)for(var rn=Kt;rn<=Wt;rn++)W(Ke[2*rn],Ke[2*rn+1],bt,gt)<=Vt&&Lt.push(Ve[rn]);else{var Yt=Math.floor((Kt+Wt)/2),Ue=Ke[2*Yt],wt=Ke[2*Yt+1];W(Ue,wt,bt,gt)<=Vt&&Lt.push(Ve[Yt]);var Ut=(mt+1)%2;(0===mt?bt-pt<=Ue:gt-pt<=wt)&&(jt.push(Kt),jt.push(Yt-1),jt.push(Ut)),(0===mt?bt+pt>=Ue:gt+pt>=wt)&&(jt.push(Yt+1),jt.push(Wt),jt.push(Ut))}}return Lt}(this.ids,this.coords,Pe,Ee,Ne,this.nodeSize)};var ue={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Pe){return Pe}},fe=function(Pe){this.options=ke(Object.create(ue),Pe),this.trees=new Array(this.options.maxZoom+1)};function he(Pe,Ee,Ne,Ve,Ke){return{x:Pe,y:Ee,zoom:1/0,id:Ne,parentId:-1,numPoints:Ve,properties:Ke}}function de(Pe,Ee){var Ne=Pe.geometry.coordinates,Ke=Ne[1];return{x:Te(Ne[0]),y:ye(Ke),zoom:1/0,index:Ee,parentId:-1}}function be(Pe){return{type:"Feature",id:Pe.id,properties:pe(Pe),geometry:{type:"Point",coordinates:[(Ve=Pe.x,360*(Ve-.5)),(Ee=Pe.y,Ne=(180-360*Ee)*Math.PI/180,360*Math.atan(Math.exp(Ne))/Math.PI-90)]}};var Ee,Ne,Ve}function pe(Pe){var Ee=Pe.numPoints,Ne=Ee>=1e4?Math.round(Ee/1e3)+"k":Ee>=1e3?Math.round(Ee/100)/10+"k":Ee;return ke(ke({},Pe.properties),{cluster:!0,cluster_id:Pe.id,point_count:Ee,point_count_abbreviated:Ne})}function Te(Pe){return Pe/360+.5}function ye(Pe){var Ee=Math.sin(Pe*Math.PI/180),Ne=.5-.25*Math.log((1+Ee)/(1-Ee))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function ke(Pe,Ee){for(var Ne in Ee)Pe[Ne]=Ee[Ne];return Pe}function ze(Pe){return Pe.x}function je(Pe){return Pe.y}function Ie(Pe,Ee,Ne,Ve,Ke,bt){var gt=Ke-Ne,pt=bt-Ve;if(0!==gt||0!==pt){var St=((Pe-Ne)*gt+(Ee-Ve)*pt)/(gt*gt+pt*pt);St>1?(Ne=Ke,Ve=bt):St>0&&(Ne+=gt*St,Ve+=pt*St)}return(gt=Pe-Ne)*gt+(pt=Ee-Ve)*pt}function Ce(Pe,Ee,Ne,Ve){var Ke={id:void 0===Pe?null:Pe,type:Ee,geometry:Ne,tags:Ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(bt){var gt=bt.geometry,pt=bt.type;if("Point"===pt||"MultiPoint"===pt||"LineString"===pt)_e(bt,gt);else if("Polygon"===pt||"MultiLineString"===pt)for(var St=0;St<gt.length;St++)_e(bt,gt[St]);else if("MultiPolygon"===pt)for(St=0;St<gt.length;St++)for(var jt=0;jt<gt[St].length;jt++)_e(bt,gt[St][jt])}(Ke),Ke}function _e(Pe,Ee){for(var Ne=0;Ne<Ee.length;Ne+=3)Pe.minX=Math.min(Pe.minX,Ee[Ne]),Pe.minY=Math.min(Pe.minY,Ee[Ne+1]),Pe.maxX=Math.max(Pe.maxX,Ee[Ne]),Pe.maxY=Math.max(Pe.maxY,Ee[Ne+1])}function we(Pe,Ee,Ne,Ve){if(Ee.geometry){var Ke=Ee.geometry.coordinates,bt=Ee.geometry.type,gt=Math.pow(Ne.tolerance/((1<<Ne.maxZoom)*Ne.extent),2),pt=[],St=Ee.id;if(Ne.promoteId?St=Ee.properties[Ne.promoteId]:Ne.generateId&&(St=Ve||0),"Point"===bt)Se(Ke,pt);else if("MultiPoint"===bt)for(var jt=0;jt<Ke.length;jt++)Se(Ke[jt],pt);else if("LineString"===bt)Oe(Ke,pt,gt,!1);else if("MultiLineString"===bt){if(Ne.lineMetrics){for(jt=0;jt<Ke.length;jt++)Oe(Ke[jt],pt=[],gt,!1),Pe.push(Ce(St,"LineString",pt,Ee.properties));return}Be(Ke,pt,gt,!1)}else if("Polygon"===bt)Be(Ke,pt,gt,!0);else{if("MultiPolygon"!==bt){if("GeometryCollection"===bt){for(jt=0;jt<Ee.geometry.geometries.length;jt++)we(Pe,{id:St,geometry:Ee.geometry.geometries[jt],properties:Ee.properties},Ne,Ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(jt=0;jt<Ke.length;jt++){var Lt=[];Be(Ke[jt],Lt,gt,!0),pt.push(Lt)}}Pe.push(Ce(St,bt,pt,Ee.properties))}}function Se(Pe,Ee){Ee.push(He(Pe[0])),Ee.push(Xe(Pe[1])),Ee.push(0)}function Oe(Pe,Ee,Ne,Ve){for(var Ke,bt,gt=0,pt=0;pt<Pe.length;pt++){var St=He(Pe[pt][0]),jt=Xe(Pe[pt][1]);Ee.push(St),Ee.push(jt),Ee.push(0),pt>0&&(gt+=Ve?(Ke*jt-St*bt)/2:Math.sqrt(Math.pow(St-Ke,2)+Math.pow(jt-bt,2))),Ke=St,bt=jt}var Lt=Ee.length-3;Ee[2]=1,function Vt(mt,Wt,Kt,rn){for(var Yt,Ue=rn,wt=Kt-Wt>>1,Ut=Kt-Wt,Zt=mt[Wt],tn=mt[Wt+1],un=mt[Kt],vn=mt[Kt+1],Qt=Wt+3;Qt<Kt;Qt+=3){var yn=Ie(mt[Qt],mt[Qt+1],Zt,tn,un,vn);if(yn>Ue)Yt=Qt,Ue=yn;else if(yn===Ue){var Mn=Math.abs(Qt-wt);Mn<Ut&&(Yt=Qt,Ut=Mn)}}Ue>rn&&(Yt-Wt>3&&Vt(mt,Wt,Yt,rn),mt[Yt+2]=Ue,Kt-Yt>3&&Vt(mt,Yt,Kt,rn))}(Ee,0,Lt,Ne),Ee[Lt+2]=1,Ee.size=Math.abs(gt),Ee.start=0,Ee.end=Ee.size}function Be(Pe,Ee,Ne,Ve){for(var Ke=0;Ke<Pe.length;Ke++){var bt=[];Oe(Pe[Ke],bt,Ne,Ve),Ee.push(bt)}}function He(Pe){return Pe/360+.5}function Xe(Pe){var Ee=Math.sin(Pe*Math.PI/180),Ne=.5-.25*Math.log((1+Ee)/(1-Ee))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function nt(Pe,Ee,Ne,Ve,Ke,bt,gt,pt){if(Ve/=Ee,bt>=(Ne/=Ee)&&gt<Ve)return Pe;if(gt<Ne||bt>=Ve)return null;for(var St=[],jt=0;jt<Pe.length;jt++){var Lt=Pe[jt],Vt=Lt.geometry,mt=Lt.type,Wt=0===Ke?Lt.minX:Lt.minY,Kt=0===Ke?Lt.maxX:Lt.maxY;if(Wt>=Ne&&Kt<Ve)St.push(Lt);else if(!(Kt<Ne||Wt>=Ve)){var rn=[];if("Point"===mt||"MultiPoint"===mt)et(Vt,rn,Ne,Ve,Ke);else if("LineString"===mt)qe(Vt,rn,Ne,Ve,Ke,!1,pt.lineMetrics);else if("MultiLineString"===mt)ot(Vt,rn,Ne,Ve,Ke,!1);else if("Polygon"===mt)ot(Vt,rn,Ne,Ve,Ke,!0);else if("MultiPolygon"===mt)for(var Yt=0;Yt<Vt.length;Yt++){var Ue=[];ot(Vt[Yt],Ue,Ne,Ve,Ke,!0),Ue.length&&rn.push(Ue)}if(rn.length){if(pt.lineMetrics&&"LineString"===mt){for(Yt=0;Yt<rn.length;Yt++)St.push(Ce(Lt.id,mt,rn[Yt],Lt.tags));continue}"LineString"!==mt&&"MultiLineString"!==mt||(1===rn.length?(mt="LineString",rn=rn[0]):mt="MultiLineString"),"Point"!==mt&&"MultiPoint"!==mt||(mt=3===rn.length?"Point":"MultiPoint"),St.push(Ce(Lt.id,mt,rn,Lt.tags))}}}return St.length?St:null}function et(Pe,Ee,Ne,Ve,Ke){for(var bt=0;bt<Pe.length;bt+=3){var gt=Pe[bt+Ke];gt>=Ne&&gt<=Ve&&(Ee.push(Pe[bt]),Ee.push(Pe[bt+1]),Ee.push(Pe[bt+2]))}}function qe(Pe,Ee,Ne,Ve,Ke,bt,gt){for(var pt,St,jt=Ye(Pe),Lt=0===Ke?ct:_t,Vt=Pe.start,mt=0;mt<Pe.length-3;mt+=3){var Wt=Pe[mt],Kt=Pe[mt+1],rn=Pe[mt+2],Yt=Pe[mt+3],Ue=Pe[mt+4],wt=0===Ke?Wt:Kt,Ut=0===Ke?Yt:Ue,Zt=!1;gt&&(pt=Math.sqrt(Math.pow(Wt-Yt,2)+Math.pow(Kt-Ue,2))),wt<Ne?Ut>Ne&&(St=Lt(jt,Wt,Kt,Yt,Ue,Ne),gt&&(jt.start=Vt+pt*St)):wt>Ve?Ut<Ve&&(St=Lt(jt,Wt,Kt,Yt,Ue,Ve),gt&&(jt.start=Vt+pt*St)):at(jt,Wt,Kt,rn),Ut<Ne&&wt>=Ne&&(St=Lt(jt,Wt,Kt,Yt,Ue,Ne),Zt=!0),Ut>Ve&&wt<=Ve&&(St=Lt(jt,Wt,Kt,Yt,Ue,Ve),Zt=!0),!bt&&Zt&&(gt&&(jt.end=Vt+pt*St),Ee.push(jt),jt=Ye(Pe)),gt&&(Vt+=pt)}var tn=Pe.length-3;Wt=Pe[tn],Kt=Pe[tn+1],rn=Pe[tn+2],(wt=0===Ke?Wt:Kt)>=Ne&&wt<=Ve&&at(jt,Wt,Kt,rn),tn=jt.length-3,bt&&tn>=3&&(jt[tn]!==jt[0]||jt[tn+1]!==jt[1])&&at(jt,jt[0],jt[1],jt[2]),jt.length&&Ee.push(jt)}function Ye(Pe){var Ee=[];return Ee.size=Pe.size,Ee.start=Pe.start,Ee.end=Pe.end,Ee}function ot(Pe,Ee,Ne,Ve,Ke,bt){for(var gt=0;gt<Pe.length;gt++)qe(Pe[gt],Ee,Ne,Ve,Ke,bt,!1)}function at(Pe,Ee,Ne,Ve){Pe.push(Ee),Pe.push(Ne),Pe.push(Ve)}function ct(Pe,Ee,Ne,Ve,Ke,bt){var gt=(bt-Ee)/(Ve-Ee);return Pe.push(bt),Pe.push(Ne+(Ke-Ne)*gt),Pe.push(1),gt}function _t(Pe,Ee,Ne,Ve,Ke,bt){var gt=(bt-Ne)/(Ke-Ne);return Pe.push(Ee+(Ve-Ee)*gt),Pe.push(bt),Pe.push(1),gt}function xt(Pe,Ee){for(var Ne=[],Ve=0;Ve<Pe.length;Ve++){var Ke,bt=Pe[Ve],gt=bt.type;if("Point"===gt||"MultiPoint"===gt||"LineString"===gt)Ke=Ht(bt.geometry,Ee);else if("MultiLineString"===gt||"Polygon"===gt){Ke=[];for(var pt=0;pt<bt.geometry.length;pt++)Ke.push(Ht(bt.geometry[pt],Ee))}else if("MultiPolygon"===gt)for(Ke=[],pt=0;pt<bt.geometry.length;pt++){for(var St=[],jt=0;jt<bt.geometry[pt].length;jt++)St.push(Ht(bt.geometry[pt][jt],Ee));Ke.push(St)}Ne.push(Ce(bt.id,gt,Ke,bt.tags))}return Ne}function Ht(Pe,Ee){var Ne=[];Ne.size=Pe.size,void 0!==Pe.start&&(Ne.start=Pe.start,Ne.end=Pe.end);for(var Ve=0;Ve<Pe.length;Ve+=3)Ne.push(Pe[Ve]+Ee,Pe[Ve+1],Pe[Ve+2]);return Ne}function At(Pe,Ee){if(Pe.transformed)return Pe;var Ne,Ve,Ke,bt=1<<Pe.z,gt=Pe.x,pt=Pe.y;for(Ne=0;Ne<Pe.features.length;Ne++){var St=Pe.features[Ne],jt=St.geometry,Lt=St.type;if(St.geometry=[],1===Lt)for(Ve=0;Ve<jt.length;Ve+=2)St.geometry.push(ht(jt[Ve],jt[Ve+1],Ee,bt,gt,pt));else for(Ve=0;Ve<jt.length;Ve++){var Vt=[];for(Ke=0;Ke<jt[Ve].length;Ke+=2)Vt.push(ht(jt[Ve][Ke],jt[Ve][Ke+1],Ee,bt,gt,pt));St.geometry.push(Vt)}}return Pe.transformed=!0,Pe}function ht(Pe,Ee,Ne,Ve,Ke,bt){return[Math.round(Ne*(Pe*Ve-Ke)),Math.round(Ne*(Ee*Ve-bt))]}function st(Pe,Ee,Ne,Ve,Ke){for(var bt=Ee===Ke.maxZoom?0:Ke.tolerance/((1<<Ee)*Ke.extent),gt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ne,y:Ve,z:Ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},pt=0;pt<Pe.length;pt++){gt.numFeatures++,Bt(gt,Pe[pt],bt,Ke);var St=Pe[pt].minX,jt=Pe[pt].minY,Lt=Pe[pt].maxX,Vt=Pe[pt].maxY;St<gt.minX&&(gt.minX=St),jt<gt.minY&&(gt.minY=jt),Lt>gt.maxX&&(gt.maxX=Lt),Vt>gt.maxY&&(gt.maxY=Vt)}return gt}function Bt(Pe,Ee,Ne,Ve){var Ke=Ee.geometry,bt=Ee.type,gt=[];if("Point"===bt||"MultiPoint"===bt)for(var pt=0;pt<Ke.length;pt+=3)gt.push(Ke[pt]),gt.push(Ke[pt+1]),Pe.numPoints++,Pe.numSimplified++;else if("LineString"===bt)gn(gt,Ke,Pe,Ne,!1,!1);else if("MultiLineString"===bt||"Polygon"===bt)for(pt=0;pt<Ke.length;pt++)gn(gt,Ke[pt],Pe,Ne,"Polygon"===bt,0===pt);else if("MultiPolygon"===bt)for(var St=0;St<Ke.length;St++){var jt=Ke[St];for(pt=0;pt<jt.length;pt++)gn(gt,jt[pt],Pe,Ne,!0,0===pt)}if(gt.length){var Lt=Ee.tags||null;if("LineString"===bt&&Ve.lineMetrics){for(var Vt in Lt={},Ee.tags)Lt[Vt]=Ee.tags[Vt];Lt.mapbox_clip_start=Ke.start/Ke.size,Lt.mapbox_clip_end=Ke.end/Ke.size}var mt={geometry:gt,type:"Polygon"===bt||"MultiPolygon"===bt?3:"LineString"===bt||"MultiLineString"===bt?2:1,tags:Lt};null!==Ee.id&&(mt.id=Ee.id),Pe.features.push(mt)}}function gn(Pe,Ee,Ne,Ve,Ke,bt){var gt=Ve*Ve;if(Ve>0&&Ee.size<(Ke?gt:Ve))Ne.numPoints+=Ee.length/3;else{for(var pt=[],St=0;St<Ee.length;St+=3)(0===Ve||Ee[St+2]>gt)&&(Ne.numSimplified++,pt.push(Ee[St]),pt.push(Ee[St+1])),Ne.numPoints++;Ke&&function(jt,Lt){for(var Vt=0,mt=0,Wt=jt.length,Kt=Wt-2;mt<Wt;Kt=mt,mt+=2)Vt+=(jt[mt]-jt[Kt])*(jt[mt+1]+jt[Kt+1]);if(Vt>0===Lt)for(mt=0,Wt=jt.length;mt<Wt/2;mt+=2){var rn=jt[mt],Yt=jt[mt+1];jt[mt]=jt[Wt-2-mt],jt[mt+1]=jt[Wt-1-mt],jt[Wt-2-mt]=rn,jt[Wt-1-mt]=Yt}}(pt,bt),Pe.push(pt)}}function hn(Pe,Ee){var Ne=(Ee=this.options=function(Ke,bt){for(var gt in bt)Ke[gt]=bt[gt];return Ke}(Object.create(this.options),Ee)).debug;if(Ne&&console.time("preprocess data"),Ee.maxZoom<0||Ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ee.promoteId&&Ee.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ke,bt,gt,pt,St,jt,Ve=function(Ke,bt){var gt=[];if("FeatureCollection"===Ke.type)for(var pt=0;pt<Ke.features.length;pt++)we(gt,Ke.features[pt],bt,pt);else we(gt,"Feature"===Ke.type?Ke:{geometry:Ke},bt);return gt}(Pe,Ee);this.tiles={},this.tileCoords=[],Ne&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ee.indexMaxZoom,Ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ke=Ve,bt=Ee,gt=bt.buffer/bt.extent,pt=Ke,St=nt(Ke,1,-1-gt,gt,0,-1,2,bt),jt=nt(Ke,1,1-gt,2+gt,0,-1,2,bt),(St||jt)&&(pt=nt(Ke,1,-gt,1+gt,0,-1,2,bt)||[],St&&(pt=xt(St,1).concat(pt)),jt&&(pt=pt.concat(xt(jt,-1)))),Ve=pt).length&&this.splitTile(Ve,0,0,0),Ne&&(Ve.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function We(Pe,Ee,Ne){return 32*((1<<Pe)*Ne+Ee)+Pe}function it(Pe,Ee){var Ne=Pe.tileID.canonical;if(!this._geoJSONIndex)return Ee(null,null);var Ve=this._geoJSONIndex.getTile(Ne.z,Ne.x,Ne.y);if(!Ve)return Ee(null,null);var Ke=new C(Ve.features),bt=D(Ke);0===bt.byteOffset&&bt.byteLength===bt.buffer.byteLength||(bt=new Uint8Array(bt)),Ee(null,{vectorTile:Ke,rawData:bt.buffer})}fe.prototype.load=function(Pe){var Ee=this.options,Ne=Ee.log,Ve=Ee.minZoom,Ke=Ee.maxZoom,bt=Ee.nodeSize;Ne&&console.time("total time");var gt="prepare "+Pe.length+" points";Ne&&console.time(gt),this.points=Pe;for(var pt=[],St=0;St<Pe.length;St++)Pe[St].geometry&&pt.push(de(Pe[St],St));this.trees[Ke+1]=new ie(pt,ze,je,bt,Float32Array),Ne&&console.timeEnd(gt);for(var jt=Ke;jt>=Ve;jt--){var Lt=+Date.now();pt=this._cluster(pt,jt),this.trees[jt]=new ie(pt,ze,je,bt,Float32Array),Ne&&console.log("z%d: %d clusters in %dms",jt,pt.length,+Date.now()-Lt)}return Ne&&console.timeEnd("total time"),this},fe.prototype.getClusters=function(Pe,Ee){var Ne=((Pe[0]+180)%360+360)%360-180,Ve=Math.max(-90,Math.min(90,Pe[1])),Ke=180===Pe[2]?180:((Pe[2]+180)%360+360)%360-180,bt=Math.max(-90,Math.min(90,Pe[3]));if(Pe[2]-Pe[0]>=360)Ne=-180,Ke=180;else if(Ne>Ke){var gt=this.getClusters([Ne,Ve,180,bt],Ee),pt=this.getClusters([-180,Ve,Ke,bt],Ee);return gt.concat(pt)}for(var St=this.trees[this._limitZoom(Ee)],jt=[],Lt=0,Vt=St.range(Te(Ne),ye(bt),Te(Ke),ye(Ve));Lt<Vt.length;Lt+=1){var Wt=St.points[Vt[Lt]];jt.push(Wt.numPoints?be(Wt):this.points[Wt.index])}return jt},fe.prototype.getChildren=function(Pe){var Ee=this._getOriginId(Pe),Ne=this._getOriginZoom(Pe),Ve="No cluster with the specified id.",Ke=this.trees[Ne];if(!Ke)throw new Error(Ve);var bt=Ke.points[Ee];if(!bt)throw new Error(Ve);for(var gt=this.options.radius/(this.options.extent*Math.pow(2,Ne-1)),pt=[],St=0,jt=Ke.within(bt.x,bt.y,gt);St<jt.length;St+=1){var Vt=Ke.points[jt[St]];Vt.parentId===Pe&&pt.push(Vt.numPoints?be(Vt):this.points[Vt.index])}if(0===pt.length)throw new Error(Ve);return pt},fe.prototype.getLeaves=function(Pe,Ee,Ne){var Ve=[];return this._appendLeaves(Ve,Pe,Ee=Ee||10,Ne=Ne||0,0),Ve},fe.prototype.getTile=function(Pe,Ee,Ne){var Ve=this.trees[this._limitZoom(Pe)],Ke=Math.pow(2,Pe),bt=this.options,pt=bt.radius/bt.extent,St=(Ne-pt)/Ke,jt=(Ne+1+pt)/Ke,Lt={features:[]};return this._addTileFeatures(Ve.range((Ee-pt)/Ke,St,(Ee+1+pt)/Ke,jt),Ve.points,Ee,Ne,Ke,Lt),0===Ee&&this._addTileFeatures(Ve.range(1-pt/Ke,St,1,jt),Ve.points,Ke,Ne,Ke,Lt),Ee===Ke-1&&this._addTileFeatures(Ve.range(0,St,pt/Ke,jt),Ve.points,-1,Ne,Ke,Lt),Lt.features.length?Lt:null},fe.prototype.getClusterExpansionZoom=function(Pe){for(var Ee=this._getOriginZoom(Pe)-1;Ee<=this.options.maxZoom;){var Ne=this.getChildren(Pe);if(Ee++,1!==Ne.length)break;Pe=Ne[0].properties.cluster_id}return Ee},fe.prototype._appendLeaves=function(Pe,Ee,Ne,Ve,Ke){for(var bt=0,gt=this.getChildren(Ee);bt<gt.length;bt+=1){var pt=gt[bt],St=pt.properties;if(St&&St.cluster?Ke+St.point_count<=Ve?Ke+=St.point_count:Ke=this._appendLeaves(Pe,St.cluster_id,Ne,Ve,Ke):Ke<Ve?Ke++:Pe.push(pt),Pe.length===Ne)break}return Ke},fe.prototype._addTileFeatures=function(Pe,Ee,Ne,Ve,Ke,bt){for(var gt=0,pt=Pe;gt<pt.length;gt+=1){var St=Ee[pt[gt]],jt=St.numPoints,Lt={type:1,geometry:[[Math.round(this.options.extent*(St.x*Ke-Ne)),Math.round(this.options.extent*(St.y*Ke-Ve))]],tags:jt?pe(St):this.points[St.index].properties},Vt=void 0;jt?Vt=St.id:this.options.generateId?Vt=St.index:this.points[St.index].id&&(Vt=this.points[St.index].id),void 0!==Vt&&(Lt.id=Vt),bt.features.push(Lt)}},fe.prototype._limitZoom=function(Pe){return Math.max(this.options.minZoom,Math.min(Pe,this.options.maxZoom+1))},fe.prototype._cluster=function(Pe,Ee){for(var Ne=[],Ve=this.options,gt=Ve.reduce,pt=Ve.radius/(Ve.extent*Math.pow(2,Ee)),St=0;St<Pe.length;St++){var jt=Pe[St];if(!(jt.zoom<=Ee)){jt.zoom=Ee;for(var Lt=this.trees[Ee+1],Vt=Lt.within(jt.x,jt.y,pt),mt=jt.numPoints||1,Wt=jt.x*mt,Kt=jt.y*mt,rn=gt&&mt>1?this._map(jt,!0):null,Yt=(St<<5)+(Ee+1)+this.points.length,Ue=0,wt=Vt;Ue<wt.length;Ue+=1){var Zt=Lt.points[wt[Ue]];if(!(Zt.zoom<=Ee)){Zt.zoom=Ee;var tn=Zt.numPoints||1;Wt+=Zt.x*tn,Kt+=Zt.y*tn,mt+=tn,Zt.parentId=Yt,gt&&(rn||(rn=this._map(jt,!0)),gt(rn,this._map(Zt)))}}1===mt?Ne.push(jt):(jt.parentId=Yt,Ne.push(he(Wt/mt,Kt/mt,Yt,mt,rn)))}}return Ne},fe.prototype._getOriginId=function(Pe){return Pe-this.points.length>>5},fe.prototype._getOriginZoom=function(Pe){return(Pe-this.points.length)%32},fe.prototype._map=function(Pe,Ee){if(Pe.numPoints)return Ee?ke({},Pe.properties):Pe.properties;var Ne=this.points[Pe.index].properties,Ve=this.options.map(Ne);return Ee&&Ve===Ne?ke({},Ve):Ve},hn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},hn.prototype.splitTile=function(Pe,Ee,Ne,Ve,Ke,bt,gt){for(var pt=[Pe,Ee,Ne,Ve],St=this.options,jt=St.debug;pt.length;){Ve=pt.pop(),Ne=pt.pop(),Ee=pt.pop(),Pe=pt.pop();var Lt=1<<Ee,Vt=We(Ee,Ne,Ve),mt=this.tiles[Vt];if(!mt&&(jt>1&&console.time("creation"),mt=this.tiles[Vt]=st(Pe,Ee,Ne,Ve,St),this.tileCoords.push({z:Ee,x:Ne,y:Ve}),jt)){jt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ee,Ne,Ve,mt.numFeatures,mt.numPoints,mt.numSimplified),console.timeEnd("creation"));var Wt="z"+Ee;this.stats[Wt]=(this.stats[Wt]||0)+1,this.total++}if(mt.source=Pe,Ke){if(Ee===St.maxZoom||Ee===Ke)continue;var Kt=1<<Ke-Ee;if(Ne!==Math.floor(bt/Kt)||Ve!==Math.floor(gt/Kt))continue}else if(Ee===St.indexMaxZoom||mt.numPoints<=St.indexMaxPoints)continue;if(mt.source=null,0!==Pe.length){jt>1&&console.time("clipping");var rn,Yt,Ue,wt,Ut,Zt,tn=.5*St.buffer/St.extent,un=.5-tn,vn=.5+tn,Qt=1+tn;rn=Yt=Ue=wt=null,Ut=nt(Pe,Lt,Ne-tn,Ne+vn,0,mt.minX,mt.maxX,St),Zt=nt(Pe,Lt,Ne+un,Ne+Qt,0,mt.minX,mt.maxX,St),Pe=null,Ut&&(rn=nt(Ut,Lt,Ve-tn,Ve+vn,1,mt.minY,mt.maxY,St),Yt=nt(Ut,Lt,Ve+un,Ve+Qt,1,mt.minY,mt.maxY,St),Ut=null),Zt&&(Ue=nt(Zt,Lt,Ve-tn,Ve+vn,1,mt.minY,mt.maxY,St),wt=nt(Zt,Lt,Ve+un,Ve+Qt,1,mt.minY,mt.maxY,St),Zt=null),jt>1&&console.timeEnd("clipping"),pt.push(rn||[],Ee+1,2*Ne,2*Ve),pt.push(Yt||[],Ee+1,2*Ne,2*Ve+1),pt.push(Ue||[],Ee+1,2*Ne+1,2*Ve),pt.push(wt||[],Ee+1,2*Ne+1,2*Ve+1)}}},hn.prototype.getTile=function(Pe,Ee,Ne){var Ve=this.options,Ke=Ve.extent,bt=Ve.debug;if(Pe<0||Pe>24)return null;var gt=1<<Pe,pt=We(Pe,Ee=(Ee%gt+gt)%gt,Ne);if(this.tiles[pt])return At(this.tiles[pt],Ke);bt>1&&console.log("drilling down to z%d-%d-%d",Pe,Ee,Ne);for(var St,jt=Pe,Lt=Ee,Vt=Ne;!St&&jt>0;)jt--,Lt=Math.floor(Lt/2),Vt=Math.floor(Vt/2),St=this.tiles[We(jt,Lt,Vt)];return St&&St.source?(bt>1&&console.log("found parent tile z%d-%d-%d",jt,Lt,Vt),bt>1&&console.time("drilling down"),this.splitTile(St.source,jt,Lt,Vt,Pe,Ee,Ne),bt>1&&console.timeEnd("drilling down"),this.tiles[pt]?At(this.tiles[pt],Ke):null):null};var qt=function(Pe){function Ee(Ne,Ve,Ke,bt){Pe.call(this,Ne,Ve,Ke,it),bt&&(this.loadGeoJSON=bt)}return Pe&&(Ee.__proto__=Pe),(Ee.prototype=Object.create(Pe&&Pe.prototype)).constructor=Ee,Ee.prototype.loadData=function(Ne,Ve){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ve,this._pendingLoadDataParams=Ne,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ee.prototype._loadData=function(){var Ne=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ve=this._pendingCallback,Ke=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var bt=!!(Ke&&Ke.request&&Ke.request.collectResourceTiming)&&new r.RequestPerformance(Ke.request);this.loadGeoJSON(Ke,function(gt,pt){if(gt||!pt)return Ve(gt);if("object"!=typeof pt)return Ve(new Error("Input data given to '"+Ke.source+"' is not a valid GeoJSON object."));_(pt,!0);try{Ne._geoJSONIndex=Ke.cluster?new fe(function(Lt){var Vt=Lt.superclusterOptions,mt=Lt.clusterProperties;if(!mt||!Vt)return Vt;for(var Wt={},Kt={},rn={accumulated:null,zoom:0},Yt={properties:null},Ue=Object.keys(mt),wt=0,Ut=Ue;wt<Ut.length;wt+=1){var Zt=Ut[wt],tn=mt[Zt],un=tn[0],Qt=r.createExpression(tn[1]),yn=r.createExpression("string"==typeof un?[un,["accumulated"],["get",Zt]]:un);Wt[Zt]=Qt.value,Kt[Zt]=yn.value}return Vt.map=function(Mn){Yt.properties=Mn;for(var Pn={},sn=0,In=Ue;sn<In.length;sn+=1){var Rn=In[sn];Pn[Rn]=Wt[Rn].evaluate(rn,Yt)}return Pn},Vt.reduce=function(Mn,Pn){Yt.properties=Pn;for(var sn=0,In=Ue;sn<In.length;sn+=1){var Rn=In[sn];rn.accumulated=Mn[Rn],Mn[Rn]=Kt[Rn].evaluate(rn,Yt)}},Vt}(Ke)).load(pt.features):new hn(Lt=pt,Ke.geojsonVtOptions)}catch(Lt){return Ve(Lt)}var Lt;Ne.loaded={};var St={};if(bt){var jt=bt.finish();jt&&(St.resourceTiming={},St.resourceTiming[Ke.source]=JSON.parse(JSON.stringify(jt)))}Ve(null,St)})}},Ee.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},Ee.prototype.reloadTile=function(Ne,Ve){var Ke=this.loaded;return Ke&&Ke[Ne.uid]?Pe.prototype.reloadTile.call(this,Ne,Ve):this.loadTile(Ne,Ve)},Ee.prototype.loadGeoJSON=function(Ne,Ve){if(Ne.request)r.getJSON(Ne.request,Ve);else{if("string"!=typeof Ne.data)return Ve(new Error("Input data given to '"+Ne.source+"' is not a valid GeoJSON object."));try{return Ve(null,JSON.parse(Ne.data))}catch(Ke){return Ve(new Error("Input data given to '"+Ne.source+"' is not a valid GeoJSON object."))}}},Ee.prototype.removeSource=function(Ne,Ve){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ve()},Ee.prototype.getClusterExpansionZoom=function(Ne,Ve){try{Ve(null,this._geoJSONIndex.getClusterExpansionZoom(Ne.clusterId))}catch(Ke){Ve(Ke)}},Ee.prototype.getClusterChildren=function(Ne,Ve){try{Ve(null,this._geoJSONIndex.getChildren(Ne.clusterId))}catch(Ke){Ve(Ke)}},Ee.prototype.getClusterLeaves=function(Ne,Ve){try{Ve(null,this._geoJSONIndex.getLeaves(Ne.clusterId,Ne.limit,Ne.offset))}catch(Ke){Ve(Ke)}},Ee}(g),Ge=function(Pe){var Ee=this;this.self=Pe,this.actor=new r.Actor(Pe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:g,geojson:qt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ne,Ve){if(Ee.workerSourceTypes[Ne])throw new Error('Worker source with name "'+Ne+'" already registered.');Ee.workerSourceTypes[Ne]=Ve},this.self.registerRTLTextPlugin=function(Ne){if(r.plugin.isParsed())throw new Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=Ne.applyArabicShaping,r.plugin.processBidirectionalText=Ne.processBidirectionalText,r.plugin.processStyledBidirectionalText=Ne.processStyledBidirectionalText}};return Ge.prototype.setReferrer=function(Pe,Ee){this.referrer=Ee},Ge.prototype.setImages=function(Pe,Ee,Ne){for(var Ve in this.availableImages[Pe]=Ee,this.workerSources[Pe]){var Ke=this.workerSources[Pe][Ve];for(var bt in Ke)Ke[bt].availableImages=Ee}Ne()},Ge.prototype.setLayers=function(Pe,Ee,Ne){this.getLayerIndex(Pe).replace(Ee),Ne()},Ge.prototype.updateLayers=function(Pe,Ee,Ne){this.getLayerIndex(Pe).update(Ee.layers,Ee.removedIds),Ne()},Ge.prototype.loadTile=function(Pe,Ee,Ne){this.getWorkerSource(Pe,Ee.type,Ee.source).loadTile(Ee,Ne)},Ge.prototype.loadDEMTile=function(Pe,Ee,Ne){this.getDEMWorkerSource(Pe,Ee.source).loadTile(Ee,Ne)},Ge.prototype.reloadTile=function(Pe,Ee,Ne){this.getWorkerSource(Pe,Ee.type,Ee.source).reloadTile(Ee,Ne)},Ge.prototype.abortTile=function(Pe,Ee,Ne){this.getWorkerSource(Pe,Ee.type,Ee.source).abortTile(Ee,Ne)},Ge.prototype.removeTile=function(Pe,Ee,Ne){this.getWorkerSource(Pe,Ee.type,Ee.source).removeTile(Ee,Ne)},Ge.prototype.removeDEMTile=function(Pe,Ee){this.getDEMWorkerSource(Pe,Ee.source).removeTile(Ee)},Ge.prototype.removeSource=function(Pe,Ee,Ne){if(this.workerSources[Pe]&&this.workerSources[Pe][Ee.type]&&this.workerSources[Pe][Ee.type][Ee.source]){var Ve=this.workerSources[Pe][Ee.type][Ee.source];delete this.workerSources[Pe][Ee.type][Ee.source],void 0!==Ve.removeSource?Ve.removeSource(Ee,Ne):Ne()}},Ge.prototype.loadWorkerSource=function(Pe,Ee,Ne){try{this.self.importScripts(Ee.url),Ne()}catch(Ve){Ne(Ve.toString())}},Ge.prototype.syncRTLPluginState=function(Pe,Ee,Ne){try{r.plugin.setState(Ee);var Ve=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&null!=Ve){this.self.importScripts(Ve);var Ke=r.plugin.isParsed();Ne(Ke?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ve),Ke)}}catch(bt){Ne(bt.toString())}},Ge.prototype.getAvailableImages=function(Pe){var Ee=this.availableImages[Pe];return Ee||(Ee=[]),Ee},Ge.prototype.getLayerIndex=function(Pe){var Ee=this.layerIndexes[Pe];return Ee||(Ee=this.layerIndexes[Pe]=new l),Ee},Ge.prototype.getWorkerSource=function(Pe,Ee,Ne){var Ve=this;return this.workerSources[Pe]||(this.workerSources[Pe]={}),this.workerSources[Pe][Ee]||(this.workerSources[Pe][Ee]={}),this.workerSources[Pe][Ee][Ne]||(this.workerSources[Pe][Ee][Ne]=new this.workerSourceTypes[Ee]({send:function(bt,gt,pt){Ve.actor.send(bt,gt,pt,Pe)}},this.getLayerIndex(Pe),this.getAvailableImages(Pe))),this.workerSources[Pe][Ee][Ne]},Ge.prototype.getDEMWorkerSource=function(Pe,Ee){return this.demWorkerSources[Pe]||(this.demWorkerSources[Pe]={}),this.demWorkerSources[Pe][Ee]||(this.demWorkerSources[Pe][Ee]=new v),this.demWorkerSources[Pe][Ee]},Ge.prototype.enforceCacheSizeLimit=function(Pe,Ee){r.enforceCacheSizeLimit(Ee)},"undefined"!=typeof WorkerGlobalScope&&void 0!==r.window&&r.window instanceof WorkerGlobalScope&&(r.window.worker=new Ge(r.window)),Ge}),p(0,function(r){var u=r.createCommonjsModule(function(O){function j(le){return!U(le)}function U(le){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var me,Ae,De=new Blob([""],{type:"text/javascript"}),Le=URL.createObjectURL(De);try{Ae=new Worker(Le),me=!0}catch(Qe){me=!1}return Ae&&Ae.terminate(),URL.revokeObjectURL(Le),me}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var me=document.createElement("canvas");me.width=me.height=1;var Ae=me.getContext("2d");if(!Ae)return!1;var De=Ae.getImageData(0,0,1,1);return De&&De.width===me.width}()?(void 0===$[me=le&&le.failIfMajorPerformanceCaveat]&&($[me]=function(Ae){var Qe,rt,dt,De=(Qe=Ae,rt=document.createElement("canvas"),(dt=Object.create(j.webGLContextAttributes)).failIfMajorPerformanceCaveat=Qe,rt.probablySupportsContext?rt.probablySupportsContext("webgl",dt)||rt.probablySupportsContext("experimental-webgl",dt):rt.supportsContext?rt.supportsContext("webgl",dt)||rt.supportsContext("experimental-webgl",dt):rt.getContext("webgl",dt)||rt.getContext("experimental-webgl",dt));if(!De)return!1;var Le=De.createShader(De.VERTEX_SHADER);return!(!Le||De.isContextLost())&&(De.shaderSource(Le,"void main() {}"),De.compileShader(Le),!0===De.getShaderParameter(Le,De.COMPILE_STATUS))}(me)),$[me]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var me}O.exports?O.exports=j:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=j,window.mapboxgl.notSupportedReason=U);var $={};j.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),c={create:function(O,j,U){var $=r.window.document.createElement(O);return void 0!==j&&($.className=j),U&&U.appendChild($),$},createNS:function(O,j){return r.window.document.createElementNS(O,j)}},l=r.window.document.documentElement.style;function f(O){if(!l)return O[0];for(var j=0;j<O.length;j++)if(O[j]in l)return O[j];return O[0]}var s,o=f(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);c.disableDrag=function(){l&&o&&(s=l[o],l[o]="none")},c.enableDrag=function(){l&&o&&(l[o]=s)};var d=f(["transform","WebkitTransform"]);c.setTransform=function(O,j){O.style[d]=j};var g=!1;try{var y=Object.defineProperty({},"passive",{get:function(){g=!0}});r.window.addEventListener("test",y,y),r.window.removeEventListener("test",y,y)}catch(O){g=!1}c.addEventListener=function(O,j,U,$){void 0===$&&($={}),O.addEventListener(j,U,"passive"in $&&g?$:$.capture)},c.removeEventListener=function(O,j,U,$){void 0===$&&($={}),O.removeEventListener(j,U,"passive"in $&&g?$:$.capture)};var v=function(O){O.preventDefault(),O.stopPropagation(),r.window.removeEventListener("click",v,!0)};function _(O){var j=O.userImage;return!!(j&&j.render&&j.render())&&(O.data.replace(new Uint8Array(j.data.buffer)),!0)}c.suppressClick=function(){r.window.addEventListener("click",v,!0),r.window.setTimeout(function(){r.window.removeEventListener("click",v,!0)},0)},c.mousePos=function(O,j){var U=O.getBoundingClientRect();return new r.Point(j.clientX-U.left-O.clientLeft,j.clientY-U.top-O.clientTop)},c.touchPos=function(O,j){for(var U=O.getBoundingClientRect(),$=[],le=0;le<j.length;le++)$.push(new r.Point(j[le].clientX-U.left-O.clientLeft,j[le].clientY-U.top-O.clientTop));return $},c.mouseButton=function(O){return void 0!==r.window.InstallTrigger&&2===O.button&&O.ctrlKey&&r.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:O.button},c.remove=function(O){O.parentNode&&O.parentNode.removeChild(O)};var w=function(O){function j(){O.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.isLoaded=function(){return this.loaded},j.prototype.setLoaded=function(U){if(this.loaded!==U&&(this.loaded=U,U)){for(var $=0,le=this.requestors;$<le.length;$+=1){var me=le[$];this._notify(me.ids,me.callback)}this.requestors=[]}},j.prototype.getImage=function(U){return this.images[U]},j.prototype.addImage=function(U,$){this._validate(U,$)&&(this.images[U]=$)},j.prototype._validate=function(U,$){var le=!0;return this._validateStretch($.stretchX,$.data&&$.data.width)||(this.fire(new r.ErrorEvent(new Error('Image "'+U+'" has invalid "stretchX" value'))),le=!1),this._validateStretch($.stretchY,$.data&&$.data.height)||(this.fire(new r.ErrorEvent(new Error('Image "'+U+'" has invalid "stretchY" value'))),le=!1),this._validateContent($.content,$)||(this.fire(new r.ErrorEvent(new Error('Image "'+U+'" has invalid "content" value'))),le=!1),le},j.prototype._validateStretch=function(U,$){if(!U)return!0;for(var le=0,me=0,Ae=U;me<Ae.length;me+=1){var De=Ae[me];if(De[0]<le||De[1]<De[0]||$<De[1])return!1;le=De[1]}return!0},j.prototype._validateContent=function(U,$){return!(U&&(4!==U.length||U[0]<0||$.data.width<U[0]||U[1]<0||$.data.height<U[1]||U[2]<0||$.data.width<U[2]||U[3]<0||$.data.height<U[3]||U[2]<U[0]||U[3]<U[1]))},j.prototype.updateImage=function(U,$){$.version=this.images[U].version+1,this.images[U]=$,this.updatedImages[U]=!0},j.prototype.removeImage=function(U){var $=this.images[U];delete this.images[U],delete this.patterns[U],$.userImage&&$.userImage.onRemove&&$.userImage.onRemove()},j.prototype.listImages=function(){return Object.keys(this.images)},j.prototype.getImages=function(U,$){var le=!0;if(!this.isLoaded())for(var me=0,Ae=U;me<Ae.length;me+=1)this.images[Ae[me]]||(le=!1);this.isLoaded()||le?this._notify(U,$):this.requestors.push({ids:U,callback:$})},j.prototype._notify=function(U,$){for(var le={},me=0,Ae=U;me<Ae.length;me+=1){var De=Ae[me];this.images[De]||this.fire(new r.Event("styleimagemissing",{id:De}));var Le=this.images[De];Le?le[De]={data:Le.data.clone(),pixelRatio:Le.pixelRatio,sdf:Le.sdf,version:Le.version,stretchX:Le.stretchX,stretchY:Le.stretchY,content:Le.content,hasRenderCallback:Boolean(Le.userImage&&Le.userImage.render)}:r.warnOnce('Image "'+De+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}$(null,le)},j.prototype.getPixelSize=function(){var U=this.atlasImage;return{width:U.width,height:U.height}},j.prototype.getPattern=function(U){var $=this.patterns[U],le=this.getImage(U);if(!le)return null;if($&&$.position.version===le.version)return $.position;if($)$.position.version=le.version;else{var me={w:le.data.width+2,h:le.data.height+2,x:0,y:0},Ae=new r.ImagePosition(me,le);this.patterns[U]={bin:me,position:Ae}}return this._updatePatternAtlas(),this.patterns[U].position},j.prototype.bind=function(U){var $=U.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new r.Texture(U,this.atlasImage,$.RGBA),this.atlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE)},j.prototype._updatePatternAtlas=function(){var U=[];for(var $ in this.patterns)U.push(this.patterns[$].bin);var le=r.potpack(U),me=le.w,Ae=le.h,De=this.atlasImage;for(var Le in De.resize({width:me||1,height:Ae||1}),this.patterns){var Qe=this.patterns[Le].bin,rt=Qe.x+1,dt=Qe.y+1,Pt=this.images[Le].data,Nt=Pt.width,Rt=Pt.height;r.RGBAImage.copy(Pt,De,{x:0,y:0},{x:rt,y:dt},{width:Nt,height:Rt}),r.RGBAImage.copy(Pt,De,{x:0,y:Rt-1},{x:rt,y:dt-1},{width:Nt,height:1}),r.RGBAImage.copy(Pt,De,{x:0,y:0},{x:rt,y:dt+Rt},{width:Nt,height:1}),r.RGBAImage.copy(Pt,De,{x:Nt-1,y:0},{x:rt-1,y:dt},{width:1,height:Rt}),r.RGBAImage.copy(Pt,De,{x:0,y:0},{x:rt+Nt,y:dt},{width:1,height:Rt})}this.dirty=!0},j.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},j.prototype.dispatchRenderCallbacks=function(U){for(var $=0,le=U;$<le.length;$+=1){var me=le[$];if(!this.callbackDispatchedThisFrame[me]){this.callbackDispatchedThisFrame[me]=!0;var Ae=this.images[me];_(Ae)&&this.updateImage(me,Ae)}}},j}(r.Evented),x=C,E=C,k=1e20;function C(O,j,U,$,le,me){this.fontSize=O||24,this.buffer=void 0===j?3:j,this.cutoff=$||.25,this.fontFamily=le||"sans-serif",this.fontWeight=me||"normal",this.radius=U||8;var Ae=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Ae,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Ae*Ae),this.gridInner=new Float64Array(Ae*Ae),this.f=new Float64Array(Ae),this.d=new Float64Array(Ae),this.z=new Float64Array(Ae+1),this.v=new Int16Array(Ae),this.middle=Math.round(Ae/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function L(O,j,U,$,le,me,Ae){for(var De=0;De<j;De++){for(var Le=0;Le<U;Le++)$[Le]=O[Le*j+De];for(P($,le,me,Ae,U),Le=0;Le<U;Le++)O[Le*j+De]=le[Le]}for(Le=0;Le<U;Le++){for(De=0;De<j;De++)$[De]=O[Le*j+De];for(P($,le,me,Ae,j),De=0;De<j;De++)O[Le*j+De]=Math.sqrt(le[De])}}function P(O,j,U,$,le){U[0]=0,$[0]=-k,$[1]=+k;for(var me=1,Ae=0;me<le;me++){for(var De=(O[me]+me*me-(O[U[Ae]]+U[Ae]*U[Ae]))/(2*me-2*U[Ae]);De<=$[Ae];)Ae--,De=(O[me]+me*me-(O[U[Ae]]+U[Ae]*U[Ae]))/(2*me-2*U[Ae]);U[++Ae]=me,$[Ae]=De,$[Ae+1]=+k}for(me=0,Ae=0;me<le;me++){for(;$[Ae+1]<me;)Ae++;j[me]=(me-U[Ae])*(me-U[Ae])+O[U[Ae]]}}C.prototype.draw=function(O){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(O,this.buffer,this.middle);for(var j=this.ctx.getImageData(0,0,this.size,this.size),U=new Uint8ClampedArray(this.size*this.size),$=0;$<this.size*this.size;$++){var le=j.data[4*$+3]/255;this.gridOuter[$]=1===le?0:0===le?k:Math.pow(Math.max(0,.5-le),2),this.gridInner[$]=1===le?k:0===le?0:Math.pow(Math.max(0,le-.5),2)}for(L(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),L(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),$=0;$<this.size*this.size;$++)U[$]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[$]-this.gridInner[$])/this.radius+this.cutoff))));return U},x.default=E;var A=function(O,j){this.requestManager=O,this.localIdeographFontFamily=j,this.entries={}};A.prototype.setURL=function(O){this.url=O},A.prototype.getGlyphs=function(O,j){var U=this,$=[];for(var le in O)for(var me=0,Ae=O[le];me<Ae.length;me+=1)$.push({stack:le,id:Ae[me]});r.asyncAll($,function(Le,Qe){var rt=Le.stack,dt=Le.id,Pt=U.entries[rt];Pt||(Pt=U.entries[rt]={glyphs:{},requests:{},ranges:{}});var Nt=Pt.glyphs[dt];if(void 0===Nt){if(Nt=U._tinySDF(Pt,rt,dt))return Pt.glyphs[dt]=Nt,void Qe(null,{stack:rt,id:dt,glyph:Nt});var Rt=Math.floor(dt/256);if(256*Rt>65535)Qe(new Error("glyphs > 65535 not supported"));else if(Pt.ranges[Rt])Qe(null,{stack:rt,id:dt,glyph:Nt});else{var Ft=Pt.requests[Rt];Ft||(Ft=Pt.requests[Rt]=[],A.loadGlyphRange(rt,Rt,U.url,U.requestManager,function(It,Xt){if(Xt){for(var $t in Xt)U._doesCharSupportLocalGlyph(+$t)||(Pt.glyphs[+$t]=Xt[+$t]);Pt.ranges[Rt]=!0}for(var en=0,bn=Ft;en<bn.length;en+=1)(0,bn[en])(It,Xt);delete Pt.requests[Rt]})),Ft.push(function(It,Xt){It?Qe(It):Xt&&Qe(null,{stack:rt,id:dt,glyph:Xt[dt]||null})})}}else Qe(null,{stack:rt,id:dt,glyph:Nt})},function(Le,Qe){if(Le)j(Le);else if(Qe){for(var rt={},dt=0,Pt=Qe;dt<Pt.length;dt+=1){var Nt=Pt[dt],Rt=Nt.stack,Ft=Nt.id,It=Nt.glyph;(rt[Rt]||(rt[Rt]={}))[Ft]=It&&{id:It.id,bitmap:It.bitmap.clone(),metrics:It.metrics}}j(null,rt)}})},A.prototype._doesCharSupportLocalGlyph=function(O){return!!this.localIdeographFontFamily&&(r.isChar["CJK Unified Ideographs"](O)||r.isChar["Hangul Syllables"](O)||r.isChar.Hiragana(O)||r.isChar.Katakana(O))},A.prototype._tinySDF=function(O,j,U){var $=this.localIdeographFontFamily;if($&&this._doesCharSupportLocalGlyph(U)){var le=O.tinySDF;if(!le){var me="400";/bold/i.test(j)?me="900":/medium/i.test(j)?me="500":/light/i.test(j)&&(me="200"),le=O.tinySDF=new A.TinySDF(24,3,8,.25,$,me)}return{id:U,bitmap:new r.AlphaImage({width:30,height:30},le.draw(String.fromCharCode(U))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},A.loadGlyphRange=function(O,j,U,$,le){var me=256*j,Ae=me+255,De=$.transformRequest($.normalizeGlyphsURL(U).replace("{fontstack}",O).replace("{range}",me+"-"+Ae),r.ResourceType.Glyphs);r.getArrayBuffer(De,function(Le,Qe){if(Le)le(Le);else if(Qe){for(var rt={},dt=0,Pt=r.parseGlyphPBF(Qe);dt<Pt.length;dt+=1){var Nt=Pt[dt];rt[Nt.id]=Nt}le(null,rt)}})},A.TinySDF=x;var I=function(){this.specification=r.styleSpec.light.position};I.prototype.possiblyEvaluate=function(O,j){return r.sphericalToCartesian(O.expression.evaluate(j))},I.prototype.interpolate=function(O,j,U){return{x:r.number(O.x,j.x,U),y:r.number(O.y,j.y,U),z:r.number(O.z,j.z,U)}};var D=new r.Properties({anchor:new r.DataConstantProperty(r.styleSpec.light.anchor),position:new I,color:new r.DataConstantProperty(r.styleSpec.light.color),intensity:new r.DataConstantProperty(r.styleSpec.light.intensity)}),R=function(O){function j(U){O.call(this),this._transitionable=new r.Transitionable(D),this.setLight(U),this._transitioning=this._transitionable.untransitioned()}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getLight=function(){return this._transitionable.serialize()},j.prototype.setLight=function(U,$){if(void 0===$&&($={}),!this._validate(r.validateLight,U,$))for(var le in U){var me=U[le];r.endsWith(le,"-transition")?this._transitionable.setTransition(le.slice(0,-"-transition".length),me):this._transitionable.setValue(le,me)}},j.prototype.updateTransitions=function(U){this._transitioning=this._transitionable.transitioned(U,this._transitioning)},j.prototype.hasTransition=function(){return this._transitioning.hasTransition()},j.prototype.recalculate=function(U){this.properties=this._transitioning.possiblyEvaluate(U)},j.prototype._validate=function(U,$,le){return(!le||!1!==le.validate)&&r.emitValidationErrors(this,U.call(r.validateStyle,r.extend({value:$,style:{glyphs:!0,sprite:!0},styleSpec:r.styleSpec})))},j}(r.Evented),S=function(O,j){this.width=O,this.height=j,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};S.prototype.getDash=function(O,j){var U=O.join(",")+String(j);return this.dashEntry[U]||(this.dashEntry[U]=this.addDash(O,j)),this.dashEntry[U]},S.prototype.getDashRanges=function(O,j,U){var $=[],le=O.length%2==1?-O[O.length-1]*U:0,me=O[0]*U,Ae=!0;$.push({left:le,right:me,isDash:Ae,zeroLength:0===O[0]});for(var De=O[0],Le=1;Le<O.length;Le++){var Qe=O[Le];le=De*U,me=(De+=Qe)*U,$.push({left:le,right:me,isDash:Ae=!Ae,zeroLength:0===Qe})}return $},S.prototype.addRoundDash=function(O,j,U){for(var $=j/2,le=-U;le<=U;le++)for(var Ae=this.width*(this.nextRow+U+le),De=0,Le=O[De],Qe=0;Qe<this.width;Qe++){Qe/Le.right>1&&(Le=O[++De]);var rt=Math.abs(Qe-Le.left),dt=Math.abs(Qe-Le.right),Pt=Math.min(rt,dt),Nt=void 0,Rt=le/U*($+1);if(Le.isDash){var Ft=$-Math.abs(Rt);Nt=Math.sqrt(Pt*Pt+Ft*Ft)}else Nt=$-Math.sqrt(Pt*Pt+Rt*Rt);this.data[Ae+Qe]=Math.max(0,Math.min(255,Nt+128))}},S.prototype.addRegularDash=function(O){for(var j=O.length-1;j>=0;--j){var U=O[j],$=O[j+1];U.zeroLength?O.splice(j,1):$&&$.isDash===U.isDash&&($.left=U.left,O.splice(j,1))}var le=O[0],me=O[O.length-1];le.isDash===me.isDash&&(le.left=me.left-this.width,me.right=le.right+this.width);for(var Ae=this.width*this.nextRow,De=0,Le=O[De],Qe=0;Qe<this.width;Qe++){Qe/Le.right>1&&(Le=O[++De]);var rt=Math.abs(Qe-Le.left),dt=Math.abs(Qe-Le.right),Pt=Math.min(rt,dt);this.data[Ae+Qe]=Math.max(0,Math.min(255,(Le.isDash?Pt:-Pt)+128))}},S.prototype.addDash=function(O,j){var U=j?7:0,$=2*U+1;if(this.nextRow+$>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var le=0,me=0;me<O.length;me++)le+=O[me];if(0!==le){var Ae=this.width/le,De=this.getDashRanges(O,this.width,Ae);j?this.addRoundDash(De,Ae,U):this.addRegularDash(De)}var Le={y:(this.nextRow+U+.5)/this.height,height:2*U/this.height,width:le};return this.nextRow+=$,this.dirty=!0,Le},S.prototype.bind=function(O){var j=O.gl;this.texture?(j.bindTexture(j.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,j.texSubImage2D(j.TEXTURE_2D,0,0,0,this.width,this.height,j.ALPHA,j.UNSIGNED_BYTE,this.data))):(this.texture=j.createTexture(),j.bindTexture(j.TEXTURE_2D,this.texture),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.REPEAT),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.REPEAT),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,j.LINEAR),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,j.LINEAR),j.texImage2D(j.TEXTURE_2D,0,j.ALPHA,this.width,this.height,0,j.ALPHA,j.UNSIGNED_BYTE,this.data))};var N=function O(j,U){this.workerPool=j,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var $=this.workerPool.acquire(this.id),le=0;le<$.length;le++){var Ae=new O.Actor($[le],U,this.id);Ae.name="Worker "+le,this.actors.push(Ae)}};function B(O,j,U){var $=function(le,me){if(le)return U(le);if(me){var Ae=r.pick(r.extend(me,O),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);me.vector_layers&&(Ae.vectorLayers=me.vector_layers,Ae.vectorLayerIds=Ae.vectorLayers.map(function(De){return De.id})),Ae.tiles=j.canonicalizeTileset(Ae,O.url),U(null,Ae)}};return O.url?r.getJSON(j.transformRequest(j.normalizeSourceURL(O.url),r.ResourceType.Source),$):r.browser.frame(function(){return $(null,O)})}N.prototype.broadcast=function(O,j,U){r.asyncAll(this.actors,function($,le){$.send(O,j,le)},U=U||function(){})},N.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},N.prototype.remove=function(){this.actors.forEach(function(O){O.remove()}),this.actors=[],this.workerPool.release(this.id)},N.Actor=r.Actor;var H=function(O,j,U){this.bounds=r.LngLatBounds.convert(this.validateBounds(O)),this.minzoom=j||0,this.maxzoom=U||24};H.prototype.validateBounds=function(O){return Array.isArray(O)&&4===O.length?[Math.max(-180,O[0]),Math.max(-90,O[1]),Math.min(180,O[2]),Math.min(90,O[3])]:[-180,-90,180,90]},H.prototype.contains=function(O){var j=Math.pow(2,O.z),U=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*j),$=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*j),le=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*j),me=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*j);return O.x>=U&&O.x<le&&O.y>=$&&O.y<me};var Y=function(O){function j(U,$,le,me){if(O.call(this),this.id=U,this.dispatcher=le,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick($,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},$),this._collectResourceTiming=$.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(me)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.load=function(){var U=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=B(this._options,this.map._requestManager,function($,le){U._tileJSONRequest=null,U._loaded=!0,$?U.fire(new r.ErrorEvent($)):le&&(r.extend(U,le),le.bounds&&(U.tileBounds=new H(le.bounds,U.minzoom,U.maxzoom)),r.postTurnstileEvent(le.tiles,U.map._requestManager._customAccessToken),r.postMapLoadEvent(le.tiles,U.map._getMapId(),U.map._requestManager._skuToken,U.map._requestManager._customAccessToken),U.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),U.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})},j.prototype.loaded=function(){return this._loaded},j.prototype.hasTile=function(U){return!this.tileBounds||this.tileBounds.contains(U.canonical)},j.prototype.onAdd=function(U){this.map=U,this.load()},j.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},j.prototype.serialize=function(){return r.extend({},this._options)},j.prototype.loadTile=function(U,$){var le=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme)),me={request:this.map._requestManager.transformRequest(le,r.ResourceType.Tile),uid:U.uid,tileID:U.tileID,zoom:U.tileID.overscaledZ,tileSize:this.tileSize*U.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:r.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function Ae(De,Le){return delete U.request,U.aborted?$(null):De&&404!==De.status?$(De):(Le&&Le.resourceTiming&&(U.resourceTiming=Le.resourceTiming),this.map._refreshExpiredTiles&&Le&&U.setExpiryData(Le),U.loadVectorData(Le,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),$(null),void(U.reloadCallback&&(this.loadTile(U,U.reloadCallback),U.reloadCallback=null)))}me.request.collectResourceTiming=this._collectResourceTiming,U.actor&&"expired"!==U.state?"loading"===U.state?U.reloadCallback=$:U.request=U.actor.send("reloadTile",me,Ae.bind(this)):(U.actor=this.dispatcher.getActor(),U.request=U.actor.send("loadTile",me,Ae.bind(this)))},j.prototype.abortTile=function(U){U.request&&(U.request.cancel(),delete U.request),U.actor&&U.actor.send("abortTile",{uid:U.uid,type:this.type,source:this.id},void 0)},j.prototype.unloadTile=function(U){U.unloadVectorData(),U.actor&&U.actor.send("removeTile",{uid:U.uid,type:this.type,source:this.id},void 0)},j.prototype.hasTransition=function(){return!1},j}(r.Evented),Q=function(O){function j(U,$,le,me){O.call(this),this.id=U,this.dispatcher=le,this.setEventedParent(me),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},$),r.extend(this,r.pick($,["url","scheme","tileSize"]))}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.load=function(){var U=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=B(this._options,this.map._requestManager,function($,le){U._tileJSONRequest=null,U._loaded=!0,$?U.fire(new r.ErrorEvent($)):le&&(r.extend(U,le),le.bounds&&(U.tileBounds=new H(le.bounds,U.minzoom,U.maxzoom)),r.postTurnstileEvent(le.tiles),r.postMapLoadEvent(le.tiles,U.map._getMapId(),U.map._requestManager._skuToken),U.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),U.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})},j.prototype.loaded=function(){return this._loaded},j.prototype.onAdd=function(U){this.map=U,this.load()},j.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},j.prototype.serialize=function(){return r.extend({},this._options)},j.prototype.hasTile=function(U){return!this.tileBounds||this.tileBounds.contains(U.canonical)},j.prototype.loadTile=function(U,$){var le=this,me=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);U.request=r.getImage(this.map._requestManager.transformRequest(me,r.ResourceType.Tile),function(Ae,De){if(delete U.request,U.aborted)U.state="unloaded",$(null);else if(Ae)U.state="errored",$(Ae);else if(De){le.map._refreshExpiredTiles&&U.setExpiryData(De),delete De.cacheControl,delete De.expires;var Le=le.map.painter.context,Qe=Le.gl;U.texture=le.map.painter.getTileTexture(De.width),U.texture?U.texture.update(De,{useMipmap:!0}):(U.texture=new r.Texture(Le,De,Qe.RGBA,{useMipmap:!0}),U.texture.bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE,Qe.LINEAR_MIPMAP_NEAREST),Le.extTextureFilterAnisotropic&&Qe.texParameterf(Qe.TEXTURE_2D,Le.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Le.extTextureFilterAnisotropicMax)),U.state="loaded",r.cacheEntryPossiblyAdded(le.dispatcher),$(null)}})},j.prototype.abortTile=function(U,$){U.request&&(U.request.cancel(),delete U.request),$()},j.prototype.unloadTile=function(U,$){U.texture&&this.map.painter.saveTileTexture(U.texture),$()},j.prototype.hasTransition=function(){return!1},j}(r.Evented),ne=function(O){function j(U,$,le,me){O.call(this,U,$,le,me),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},$),this.encoding=$.encoding||"mapbox"}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},j.prototype.loadTile=function(U,$){var le=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function me(Ae,De){Ae&&(U.state="errored",$(Ae)),De&&(U.dem=De,U.needsHillshadePrepare=!0,U.state="loaded",$(null))}U.request=r.getImage(this.map._requestManager.transformRequest(le,r.ResourceType.Tile),function(Ae,De){if(delete U.request,U.aborted)U.state="unloaded",$(null);else if(Ae)U.state="errored",$(Ae);else if(De){this.map._refreshExpiredTiles&&U.setExpiryData(De),delete De.cacheControl,delete De.expires;var Le=r.window.ImageBitmap&&De instanceof r.window.ImageBitmap&&r.offscreenCanvasSupported()?De:r.browser.getImageData(De,1),Qe={uid:U.uid,coord:U.tileID,source:this.id,rawImageData:Le,encoding:this.encoding};U.actor&&"expired"!==U.state||(U.actor=this.dispatcher.getActor(),U.actor.send("loadDEMTile",Qe,me.bind(this)))}}.bind(this)),U.neighboringTiles=this._getNeighboringTiles(U.tileID)},j.prototype._getNeighboringTiles=function(U){var $=U.canonical,le=Math.pow(2,$.z),me=($.x-1+le)%le,Ae=0===$.x?U.wrap-1:U.wrap,De=($.x+1+le)%le,Le=$.x+1===le?U.wrap+1:U.wrap,Qe={};return Qe[new r.OverscaledTileID(U.overscaledZ,Ae,$.z,me,$.y).key]={backfilled:!1},Qe[new r.OverscaledTileID(U.overscaledZ,Le,$.z,De,$.y).key]={backfilled:!1},$.y>0&&(Qe[new r.OverscaledTileID(U.overscaledZ,Ae,$.z,me,$.y-1).key]={backfilled:!1},Qe[new r.OverscaledTileID(U.overscaledZ,U.wrap,$.z,$.x,$.y-1).key]={backfilled:!1},Qe[new r.OverscaledTileID(U.overscaledZ,Le,$.z,De,$.y-1).key]={backfilled:!1}),$.y+1<le&&(Qe[new r.OverscaledTileID(U.overscaledZ,Ae,$.z,me,$.y+1).key]={backfilled:!1},Qe[new r.OverscaledTileID(U.overscaledZ,U.wrap,$.z,$.x,$.y+1).key]={backfilled:!1},Qe[new r.OverscaledTileID(U.overscaledZ,Le,$.z,De,$.y+1).key]={backfilled:!1}),Qe},j.prototype.unloadTile=function(U){U.demTexture&&this.map.painter.saveTileTexture(U.demTexture),U.fbo&&(U.fbo.destroy(),delete U.fbo),U.dem&&delete U.dem,delete U.neighboringTiles,U.state="unloaded",U.actor&&U.actor.send("removeDEMTile",{uid:U.uid,source:this.id})},j}(Q),ae=function(O){function j(U,$,le,me){O.call(this),this.id=U,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=le.getActor(),this.setEventedParent(me),this._data=$.data,this._options=r.extend({},$),this._collectResourceTiming=$.collectResourceTiming,this._resourceTiming=[],void 0!==$.maxzoom&&(this.maxzoom=$.maxzoom),$.type&&(this.type=$.type),$.attribution&&(this.attribution=$.attribution),this.promoteId=$.promoteId;var Ae=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:$.cluster||!1,geojsonVtOptions:{buffer:(void 0!==$.buffer?$.buffer:128)*Ae,tolerance:(void 0!==$.tolerance?$.tolerance:.375)*Ae,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:$.lineMetrics||!1,generateId:$.generateId||!1},superclusterOptions:{maxZoom:void 0!==$.clusterMaxZoom?Math.min($.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:r.EXTENT,radius:($.clusterRadius||50)*Ae,log:!1,generateId:$.generateId||!1},clusterProperties:$.clusterProperties},$.workerOptions)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.load=function(){var U=this;this.fire(new r.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function($){if($)U.fire(new r.ErrorEvent($));else{var le={dataType:"source",sourceDataType:"metadata"};U._collectResourceTiming&&U._resourceTiming&&U._resourceTiming.length>0&&(le.resourceTiming=U._resourceTiming,U._resourceTiming=[]),U.fire(new r.Event("data",le))}})},j.prototype.onAdd=function(U){this.map=U,this.load()},j.prototype.setData=function(U){var $=this;return this._data=U,this.fire(new r.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(le){if(le)$.fire(new r.ErrorEvent(le));else{var me={dataType:"source",sourceDataType:"content"};$._collectResourceTiming&&$._resourceTiming&&$._resourceTiming.length>0&&(me.resourceTiming=$._resourceTiming,$._resourceTiming=[]),$.fire(new r.Event("data",me))}}),this},j.prototype.getClusterExpansionZoom=function(U,$){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:U,source:this.id},$),this},j.prototype.getClusterChildren=function(U,$){return this.actor.send("geojson.getClusterChildren",{clusterId:U,source:this.id},$),this},j.prototype.getClusterLeaves=function(U,$,le,me){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:U,limit:$,offset:le},me),this},j.prototype._updateWorkerData=function(U){var $=this;this._loaded=!1;var le=r.extend({},this.workerOptions),me=this._data;"string"==typeof me?(le.request=this.map._requestManager.transformRequest(r.browser.resolveURL(me),r.ResourceType.Source),le.request.collectResourceTiming=this._collectResourceTiming):le.data=JSON.stringify(me),this.actor.send(this.type+".loadData",le,function(Ae,De){$._removed||De&&De.abandoned||($._loaded=!0,De&&De.resourceTiming&&De.resourceTiming[$.id]&&($._resourceTiming=De.resourceTiming[$.id].slice(0)),$.actor.send($.type+".coalesce",{source:le.source},null),U(Ae))})},j.prototype.loaded=function(){return this._loaded},j.prototype.loadTile=function(U,$){var le=this,me=U.actor?"reloadTile":"loadTile";U.actor=this.actor,U.request=this.actor.send(me,{type:this.type,uid:U.uid,tileID:U.tileID,zoom:U.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:r.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(De,Le){return delete U.request,U.unloadVectorData(),U.aborted?$(null):De?$(De):(U.loadVectorData(Le,le.map.painter,"reloadTile"===me),$(null))})},j.prototype.abortTile=function(U){U.request&&(U.request.cancel(),delete U.request),U.aborted=!0},j.prototype.unloadTile=function(U){U.unloadVectorData(),this.actor.send("removeTile",{uid:U.uid,type:this.type,source:this.id})},j.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},j.prototype.serialize=function(){return r.extend({},this._options,{type:this.type,data:this._data})},j.prototype.hasTransition=function(){return!1},j}(r.Evented),te=r.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),K=function(O){function j(U,$,le,me){O.call(this),this.id=U,this.dispatcher=le,this.coordinates=$.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(me),this.options=$}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.load=function(U,$){var le=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),function(me,Ae){le._loaded=!0,me?le.fire(new r.ErrorEvent(me)):Ae&&(le.image=Ae,U&&(le.coordinates=U),$&&$(),le._finishLoading())})},j.prototype.loaded=function(){return this._loaded},j.prototype.updateImage=function(U){var $=this;return this.image&&U.url?(this.options.url=U.url,this.load(U.coordinates,function(){$.texture=null}),this):this},j.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))},j.prototype.onAdd=function(U){this.map=U,this.load()},j.prototype.setCoordinates=function(U){var $=this;this.coordinates=U;var le=U.map(r.MercatorCoordinate.fromLngLat);this.tileID=function(Ae){for(var De=1/0,Le=1/0,Qe=-1/0,rt=-1/0,dt=0,Pt=Ae;dt<Pt.length;dt+=1){var Nt=Pt[dt];De=Math.min(De,Nt.x),Le=Math.min(Le,Nt.y),Qe=Math.max(Qe,Nt.x),rt=Math.max(rt,Nt.y)}var It=Math.max(Qe-De,rt-Le),Xt=Math.max(0,Math.floor(-Math.log(It)/Math.LN2)),$t=Math.pow(2,Xt);return new r.CanonicalTileID(Xt,Math.floor((De+Qe)/2*$t),Math.floor((Le+rt)/2*$t))}(le),this.minzoom=this.maxzoom=this.tileID.z;var me=le.map(function(Ae){return $.tileID.getTilePoint(Ae)._round()});return this._boundsArray=new r.StructArrayLayout4i8,this._boundsArray.emplaceBack(me[0].x,me[0].y,0,0),this._boundsArray.emplaceBack(me[1].x,me[1].y,r.EXTENT,0),this._boundsArray.emplaceBack(me[3].x,me[3].y,0,r.EXTENT),this._boundsArray.emplaceBack(me[2].x,me[2].y,r.EXTENT,r.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this},j.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var U=this.map.painter.context,$=U.gl;for(var le in this.boundsBuffer||(this.boundsBuffer=U.createVertexBuffer(this._boundsArray,te.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new r.Texture(U,this.image,$.RGBA),this.texture.bind($.LINEAR,$.CLAMP_TO_EDGE)),this.tiles){var me=this.tiles[le];"loaded"!==me.state&&(me.state="loaded",me.texture=this.texture)}}},j.prototype.loadTile=function(U,$){this.tileID&&this.tileID.equals(U.tileID.canonical)?(this.tiles[String(U.tileID.wrap)]=U,U.buckets={},$(null)):(U.state="errored",$(null))},j.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},j.prototype.hasTransition=function(){return!1},j}(r.Evented),q=function(O){function j(U,$,le,me){O.call(this,U,$,le,me),this.roundZoom=!0,this.type="video",this.options=$}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.load=function(){var U=this;this._loaded=!1;var $=this.options;this.urls=[];for(var le=0,me=$.urls;le<me.length;le+=1)this.urls.push(this.map._requestManager.transformRequest(me[le],r.ResourceType.Source).url);r.getVideo(this.urls,function(De,Le){U._loaded=!0,De?U.fire(new r.ErrorEvent(De)):Le&&(U.video=Le,U.video.loop=!0,U.video.addEventListener("playing",function(){U.map.triggerRepaint()}),U.map&&U.video.play(),U._finishLoading())})},j.prototype.pause=function(){this.video&&this.video.pause()},j.prototype.play=function(){this.video&&this.video.play()},j.prototype.seek=function(U){if(this.video){var $=this.video.seekable;U<$.start(0)||U>$.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+$.start(0)+" and "+$.end(0)+"-second mark."))):this.video.currentTime=U}},j.prototype.getVideo=function(){return this.video},j.prototype.onAdd=function(U){this.map||(this.map=U,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},j.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var U=this.map.painter.context,$=U.gl;for(var le in this.boundsBuffer||(this.boundsBuffer=U.createVertexBuffer(this._boundsArray,te.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind($.LINEAR,$.CLAMP_TO_EDGE),$.texSubImage2D($.TEXTURE_2D,0,0,0,$.RGBA,$.UNSIGNED_BYTE,this.video)):(this.texture=new r.Texture(U,this.video,$.RGBA),this.texture.bind($.LINEAR,$.CLAMP_TO_EDGE)),this.tiles){var me=this.tiles[le];"loaded"!==me.state&&(me.state="loaded",me.texture=this.texture)}}},j.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},j.prototype.hasTransition=function(){return this.video&&!this.video.paused},j}(K),re=function(O){function j(U,$,le,me){O.call(this,U,$,le,me),$.coordinates?Array.isArray($.coordinates)&&4===$.coordinates.length&&!$.coordinates.some(function(Ae){return!Array.isArray(Ae)||2!==Ae.length||Ae.some(function(De){return"number"!=typeof De})})||this.fire(new r.ErrorEvent(new r.ValidationError("sources."+U,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError("sources."+U,null,'missing required property "coordinates"'))),$.animate&&"boolean"!=typeof $.animate&&this.fire(new r.ErrorEvent(new r.ValidationError("sources."+U,null,'optional "animate" property must be a boolean value'))),$.canvas?"string"==typeof $.canvas||$.canvas instanceof r.window.HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError("sources."+U,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError("sources."+U,null,'missing required property "canvas"'))),this.options=$,this.animate=void 0===$.animate||$.animate}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof r.window.HTMLCanvasElement?this.options.canvas:r.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},j.prototype.getCanvas=function(){return this.canvas},j.prototype.onAdd=function(U){this.map=U,this.load(),this.canvas&&this.animate&&this.play()},j.prototype.onRemove=function(){this.pause()},j.prototype.prepare=function(){var U=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,U=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,U=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var $=this.map.painter.context,le=$.gl;for(var me in this.boundsBuffer||(this.boundsBuffer=$.createVertexBuffer(this._boundsArray,te.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(U||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new r.Texture($,this.canvas,le.RGBA,{premultiply:!0}),this.tiles){var Ae=this.tiles[me];"loaded"!==Ae.state&&(Ae.state="loaded",Ae.texture=this.texture)}}},j.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},j.prototype.hasTransition=function(){return this._playing},j.prototype._hasInvalidDimensions=function(){for(var U=0,$=[this.canvas.width,this.canvas.height];U<$.length;U+=1){var le=$[U];if(isNaN(le)||le<=0)return!0}return!1},j}(K),V={vector:Y,raster:Q,"raster-dem":ne,geojson:ae,video:q,image:K,canvas:re};function W(O,j){var U=r.identity([]);return r.translate(U,U,[1,1,0]),r.scale(U,U,[.5*O.width,.5*O.height,1]),r.multiply(U,U,O.calculatePosMatrix(j.toUnwrapped()))}function Z(O,j,U,$,le,me){var Ae=function(Ft,It,Xt){if(Ft)for(var $t=0,en=Ft;$t<en.length;$t+=1){var bn=It[en[$t]];if(bn&&bn.source===Xt&&"fill-extrusion"===bn.type)return!0}else for(var Cn in It){var $n=It[Cn];if($n.source===Xt&&"fill-extrusion"===$n.type)return!0}return!1}(le&&le.layers,j,O.id),De=me.maxPitchScaleFactor(),Le=O.tilesIn($,De,Ae);Le.sort(oe);for(var Qe=[],rt=0,dt=Le;rt<dt.length;rt+=1){var Pt=dt[rt];Qe.push({wrappedTileID:Pt.tileID.wrapped().key,queryResults:Pt.tile.queryRenderedFeatures(j,U,O._state,Pt.queryGeometry,Pt.cameraQueryGeometry,Pt.scale,le,me,De,W(O.transform,Pt.tileID))})}var Nt=function(Ft){for(var It={},Xt={},$t=0,en=Ft;$t<en.length;$t+=1){var bn=en[$t],Cn=bn.queryResults,$n=bn.wrappedTileID,Gn=Xt[$n]=Xt[$n]||{};for(var pr in Cn)for(var dr=Cn[pr],Er=Gn[pr]=Gn[pr]||{},wr=It[pr]=It[pr]||[],fi=0,Mi=dr;fi<Mi.length;fi+=1){var Wi=Mi[fi];Er[Wi.featureIndex]||(Er[Wi.featureIndex]=!0,wr.push(Wi))}}return It}(Qe);for(var Rt in Nt)Nt[Rt].forEach(function(Ft){var It=Ft.feature,Xt=O.getFeatureState(It.layer["source-layer"],It.id);It.source=It.layer.source,It.layer["source-layer"]&&(It.sourceLayer=It.layer["source-layer"]),It.state=Xt});return Nt}function oe(O,j){var U=O.tileID,$=j.tileID;return U.overscaledZ-$.overscaledZ||U.canonical.y-$.canonical.y||U.wrap-$.wrap||U.canonical.x-$.canonical.x}var ie=function(O,j){this.max=O,this.onRemove=j,this.reset()};ie.prototype.reset=function(){for(var O in this.data)for(var j=0,U=this.data[O];j<U.length;j+=1){var $=U[j];$.timeout&&clearTimeout($.timeout),this.onRemove($.value)}return this.data={},this.order=[],this},ie.prototype.add=function(O,j,U){var $=this,le=O.wrapped().key;void 0===this.data[le]&&(this.data[le]=[]);var me={value:j,timeout:void 0};if(void 0!==U&&(me.timeout=setTimeout(function(){$.remove(O,me)},U)),this.data[le].push(me),this.order.push(le),this.order.length>this.max){var Ae=this._getAndRemoveByKey(this.order[0]);Ae&&this.onRemove(Ae)}return this},ie.prototype.has=function(O){return O.wrapped().key in this.data},ie.prototype.getAndRemove=function(O){return this.has(O)?this._getAndRemoveByKey(O.wrapped().key):null},ie.prototype._getAndRemoveByKey=function(O){var j=this.data[O].shift();return j.timeout&&clearTimeout(j.timeout),0===this.data[O].length&&delete this.data[O],this.order.splice(this.order.indexOf(O),1),j.value},ie.prototype.getByKey=function(O){var j=this.data[O];return j?j[0].value:null},ie.prototype.get=function(O){return this.has(O)?this.data[O.wrapped().key][0].value:null},ie.prototype.remove=function(O,j){if(!this.has(O))return this;var U=O.wrapped().key,$=void 0===j?0:this.data[U].indexOf(j),le=this.data[U][$];return this.data[U].splice($,1),le.timeout&&clearTimeout(le.timeout),0===this.data[U].length&&delete this.data[U],this.onRemove(le.value),this.order.splice(this.order.indexOf(U),1),this},ie.prototype.setMaxSize=function(O){for(this.max=O;this.order.length>this.max;){var j=this._getAndRemoveByKey(this.order[0]);j&&this.onRemove(j)}return this},ie.prototype.filter=function(O){var j=[];for(var U in this.data)for(var $=0,le=this.data[U];$<le.length;$+=1){var me=le[$];O(me.value)||j.push(me)}for(var Ae=0,De=j;Ae<De.length;Ae+=1){var Le=De[Ae];this.remove(Le.value.tileID,Le)}};var ue=function(O,j,U){this.context=O;var $=O.gl;this.buffer=$.createBuffer(),this.dynamicDraw=Boolean(U),this.context.unbindVAO(),O.bindElementBuffer.set(this.buffer),$.bufferData($.ELEMENT_ARRAY_BUFFER,j.arrayBuffer,this.dynamicDraw?$.DYNAMIC_DRAW:$.STATIC_DRAW),this.dynamicDraw||delete j.arrayBuffer};ue.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ue.prototype.updateData=function(O){var j=this.context.gl;this.context.unbindVAO(),this.bind(),j.bufferSubData(j.ELEMENT_ARRAY_BUFFER,0,O.arrayBuffer)},ue.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var fe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},he=function(O,j,U,$){this.length=j.length,this.attributes=U,this.itemSize=j.bytesPerElement,this.dynamicDraw=$,this.context=O;var le=O.gl;this.buffer=le.createBuffer(),O.bindVertexBuffer.set(this.buffer),le.bufferData(le.ARRAY_BUFFER,j.arrayBuffer,this.dynamicDraw?le.DYNAMIC_DRAW:le.STATIC_DRAW),this.dynamicDraw||delete j.arrayBuffer};he.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},he.prototype.updateData=function(O){var j=this.context.gl;this.bind(),j.bufferSubData(j.ARRAY_BUFFER,0,O.arrayBuffer)},he.prototype.enableAttributes=function(O,j){for(var U=0;U<this.attributes.length;U++){var le=j.attributes[this.attributes[U].name];void 0!==le&&O.enableVertexAttribArray(le)}},he.prototype.setVertexAttribPointers=function(O,j,U){for(var $=0;$<this.attributes.length;$++){var le=this.attributes[$],me=j.attributes[le.name];void 0!==me&&O.vertexAttribPointer(me,le.components,O[fe[le.type]],!1,this.itemSize,le.offset+this.itemSize*(U||0))}},he.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var de=function(O){this.gl=O.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};de.prototype.get=function(){return this.current},de.prototype.set=function(O){},de.prototype.getDefault=function(){return this.default},de.prototype.setDefault=function(){this.set(this.default)};var be=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return r.Color.transparent},j.prototype.set=function(U){var $=this.current;(U.r!==$.r||U.g!==$.g||U.b!==$.b||U.a!==$.a||this.dirty)&&(this.gl.clearColor(U.r,U.g,U.b,U.a),this.current=U,this.dirty=!1)},j}(de),pe=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return 1},j.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.clearDepth(U),this.current=U,this.dirty=!1)},j}(de),Te=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return 0},j.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.clearStencil(U),this.current=U,this.dirty=!1)},j}(de),ye=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return[!0,!0,!0,!0]},j.prototype.set=function(U){var $=this.current;(U[0]!==$[0]||U[1]!==$[1]||U[2]!==$[2]||U[3]!==$[3]||this.dirty)&&(this.gl.colorMask(U[0],U[1],U[2],U[3]),this.current=U,this.dirty=!1)},j}(de),ke=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return!0},j.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.depthMask(U),this.current=U,this.dirty=!1)},j}(de),ze=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return 255},j.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.stencilMask(U),this.current=U,this.dirty=!1)},j}(de),je=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},j.prototype.set=function(U){var $=this.current;(U.func!==$.func||U.ref!==$.ref||U.mask!==$.mask||this.dirty)&&(this.gl.stencilFunc(U.func,U.ref,U.mask),this.current=U,this.dirty=!1)},j}(de),Ie=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){var U=this.gl;return[U.KEEP,U.KEEP,U.KEEP]},j.prototype.set=function(U){var $=this.current;(U[0]!==$[0]||U[1]!==$[1]||U[2]!==$[2]||this.dirty)&&(this.gl.stencilOp(U[0],U[1],U[2]),this.current=U,this.dirty=!1)},j}(de),Ce=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return!1},j.prototype.set=function(U){if(U!==this.current||this.dirty){var $=this.gl;U?$.enable($.STENCIL_TEST):$.disable($.STENCIL_TEST),this.current=U,this.dirty=!1}},j}(de),_e=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return[0,1]},j.prototype.set=function(U){var $=this.current;(U[0]!==$[0]||U[1]!==$[1]||this.dirty)&&(this.gl.depthRange(U[0],U[1]),this.current=U,this.dirty=!1)},j}(de),we=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return!1},j.prototype.set=function(U){if(U!==this.current||this.dirty){var $=this.gl;U?$.enable($.DEPTH_TEST):$.disable($.DEPTH_TEST),this.current=U,this.dirty=!1}},j}(de),Se=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return this.gl.LESS},j.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.depthFunc(U),this.current=U,this.dirty=!1)},j}(de),Oe=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return!1},j.prototype.set=function(U){if(U!==this.current||this.dirty){var $=this.gl;U?$.enable($.BLEND):$.disable($.BLEND),this.current=U,this.dirty=!1}},j}(de),Be=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){var U=this.gl;return[U.ONE,U.ZERO]},j.prototype.set=function(U){var $=this.current;(U[0]!==$[0]||U[1]!==$[1]||this.dirty)&&(this.gl.blendFunc(U[0],U[1]),this.current=U,this.dirty=!1)},j}(de),He=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return r.Color.transparent},j.prototype.set=function(U){var $=this.current;(U.r!==$.r||U.g!==$.g||U.b!==$.b||U.a!==$.a||this.dirty)&&(this.gl.blendColor(U.r,U.g,U.b,U.a),this.current=U,this.dirty=!1)},j}(de),Xe=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return this.gl.FUNC_ADD},j.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.blendEquation(U),this.current=U,this.dirty=!1)},j}(de),nt=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return!1},j.prototype.set=function(U){if(U!==this.current||this.dirty){var $=this.gl;U?$.enable($.CULL_FACE):$.disable($.CULL_FACE),this.current=U,this.dirty=!1}},j}(de),et=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return this.gl.BACK},j.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.cullFace(U),this.current=U,this.dirty=!1)},j}(de),qe=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return this.gl.CCW},j.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.frontFace(U),this.current=U,this.dirty=!1)},j}(de),Ye=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return null},j.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.useProgram(U),this.current=U,this.dirty=!1)},j}(de),ot=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return this.gl.TEXTURE0},j.prototype.set=function(U){(U!==this.current||this.dirty)&&(this.gl.activeTexture(U),this.current=U,this.dirty=!1)},j}(de),at=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){var U=this.gl;return[0,0,U.drawingBufferWidth,U.drawingBufferHeight]},j.prototype.set=function(U){var $=this.current;(U[0]!==$[0]||U[1]!==$[1]||U[2]!==$[2]||U[3]!==$[3]||this.dirty)&&(this.gl.viewport(U[0],U[1],U[2],U[3]),this.current=U,this.dirty=!1)},j}(de),ct=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return null},j.prototype.set=function(U){if(U!==this.current||this.dirty){var $=this.gl;$.bindFramebuffer($.FRAMEBUFFER,U),this.current=U,this.dirty=!1}},j}(de),_t=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return null},j.prototype.set=function(U){if(U!==this.current||this.dirty){var $=this.gl;$.bindRenderbuffer($.RENDERBUFFER,U),this.current=U,this.dirty=!1}},j}(de),xt=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return null},j.prototype.set=function(U){if(U!==this.current||this.dirty){var $=this.gl;$.bindTexture($.TEXTURE_2D,U),this.current=U,this.dirty=!1}},j}(de),Ht=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return null},j.prototype.set=function(U){if(U!==this.current||this.dirty){var $=this.gl;$.bindBuffer($.ARRAY_BUFFER,U),this.current=U,this.dirty=!1}},j}(de),At=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return null},j.prototype.set=function(U){var $=this.gl;$.bindBuffer($.ELEMENT_ARRAY_BUFFER,U),this.current=U,this.dirty=!1},j}(de),ht=function(O){function j(U){O.call(this,U),this.vao=U.extVertexArrayObject}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return null},j.prototype.set=function(U){this.vao&&(U!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(U),this.current=U,this.dirty=!1)},j}(de),st=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return 4},j.prototype.set=function(U){if(U!==this.current||this.dirty){var $=this.gl;$.pixelStorei($.UNPACK_ALIGNMENT,U),this.current=U,this.dirty=!1}},j}(de),Bt=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return!1},j.prototype.set=function(U){if(U!==this.current||this.dirty){var $=this.gl;$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U),this.current=U,this.dirty=!1}},j}(de),gn=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return!1},j.prototype.set=function(U){if(U!==this.current||this.dirty){var $=this.gl;$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,U),this.current=U,this.dirty=!1}},j}(de),hn=function(O){function j(U,$){O.call(this,U),this.context=U,this.parent=$}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getDefault=function(){return null},j}(de),We=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.setDirty=function(){this.dirty=!0},j.prototype.set=function(U){if(U!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var $=this.gl;$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,U,0),this.current=U,this.dirty=!1}},j}(hn),it=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.set=function(U){if(U!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var $=this.gl;$.framebufferRenderbuffer($.FRAMEBUFFER,$.DEPTH_ATTACHMENT,$.RENDERBUFFER,U),this.current=U,this.dirty=!1}},j}(hn),qt=function(O,j,U,$){this.context=O,this.width=j,this.height=U;var me=this.framebuffer=O.gl.createFramebuffer();this.colorAttachment=new We(O,me),$&&(this.depthAttachment=new it(O,me))};qt.prototype.destroy=function(){var O=this.context.gl,j=this.colorAttachment.get();if(j&&O.deleteTexture(j),this.depthAttachment){var U=this.depthAttachment.get();U&&O.deleteRenderbuffer(U)}O.deleteFramebuffer(this.framebuffer)};var Ge=function(O,j,U){this.func=O,this.mask=j,this.range=U};Ge.ReadOnly=!1,Ge.ReadWrite=!0,Ge.disabled=new Ge(519,Ge.ReadOnly,[0,1]);var Pe=function(O,j,U,$,le,me){this.test=O,this.ref=j,this.mask=U,this.fail=$,this.depthFail=le,this.pass=me};Pe.disabled=new Pe({func:519,mask:0},0,0,7680,7680,7680);var Ee=function(O,j,U){this.blendFunction=O,this.blendColor=j,this.mask=U};Ee.disabled=new Ee(Ee.Replace=[1,0],r.Color.transparent,[!1,!1,!1,!1]),Ee.unblended=new Ee(Ee.Replace,r.Color.transparent,[!0,!0,!0,!0]),Ee.alphaBlended=new Ee([1,771],r.Color.transparent,[!0,!0,!0,!0]);var Ne=function(O,j,U){this.enable=O,this.mode=j,this.frontFace=U};Ne.disabled=new Ne(!1,1029,2305),Ne.backCCW=new Ne(!0,1029,2305);var Ve=function(O){this.gl=O,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new be(this),this.clearDepth=new pe(this),this.clearStencil=new Te(this),this.colorMask=new ye(this),this.depthMask=new ke(this),this.stencilMask=new ze(this),this.stencilFunc=new je(this),this.stencilOp=new Ie(this),this.stencilTest=new Ce(this),this.depthRange=new _e(this),this.depthTest=new we(this),this.depthFunc=new Se(this),this.blend=new Oe(this),this.blendFunc=new Be(this),this.blendColor=new He(this),this.blendEquation=new Xe(this),this.cullFace=new nt(this),this.cullFaceSide=new et(this),this.frontFace=new qe(this),this.program=new Ye(this),this.activeTexture=new ot(this),this.viewport=new at(this),this.bindFramebuffer=new ct(this),this.bindRenderbuffer=new _t(this),this.bindTexture=new xt(this),this.bindVertexBuffer=new Ht(this),this.bindElementBuffer=new At(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ht(this),this.pixelStoreUnpack=new st(this),this.pixelStoreUnpackPremultiplyAlpha=new Bt(this),this.pixelStoreUnpackFlipY=new gn(this),this.extTextureFilterAnisotropic=O.getExtension("EXT_texture_filter_anisotropic")||O.getExtension("MOZ_EXT_texture_filter_anisotropic")||O.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=O.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=O.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(O.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=O.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=O.getExtension("EXT_disjoint_timer_query")};Ve.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ve.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ve.prototype.createIndexBuffer=function(O,j){return new ue(this,O,j)},Ve.prototype.createVertexBuffer=function(O,j,U){return new he(this,O,j,U)},Ve.prototype.createRenderbuffer=function(O,j,U){var $=this.gl,le=$.createRenderbuffer();return this.bindRenderbuffer.set(le),$.renderbufferStorage($.RENDERBUFFER,O,j,U),this.bindRenderbuffer.set(null),le},Ve.prototype.createFramebuffer=function(O,j,U){return new qt(this,O,j,U)},Ve.prototype.clear=function(O){var j=O.color,U=O.depth,$=this.gl,le=0;j&&(le|=$.COLOR_BUFFER_BIT,this.clearColor.set(j),this.colorMask.set([!0,!0,!0,!0])),void 0!==U&&(le|=$.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(U),this.depthMask.set(!0)),$.clear(le)},Ve.prototype.setCullFace=function(O){!1===O.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(O.mode),this.frontFace.set(O.frontFace))},Ve.prototype.setDepthMode=function(O){O.func!==this.gl.ALWAYS||O.mask?(this.depthTest.set(!0),this.depthFunc.set(O.func),this.depthMask.set(O.mask),this.depthRange.set(O.range)):this.depthTest.set(!1)},Ve.prototype.setStencilMode=function(O){O.test.func!==this.gl.ALWAYS||O.mask?(this.stencilTest.set(!0),this.stencilMask.set(O.mask),this.stencilOp.set([O.fail,O.depthFail,O.pass]),this.stencilFunc.set({func:O.test.func,ref:O.ref,mask:O.test.mask})):this.stencilTest.set(!1)},Ve.prototype.setColorMode=function(O){r.deepEqual(O.blendFunction,Ee.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(O.blendFunction),this.blendColor.set(O.blendColor)),this.colorMask.set(O.mask)},Ve.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ke=function(O){function j(U,$,le){var me=this;O.call(this),this.id=U,this.dispatcher=le,this.on("data",function(Ae){"source"===Ae.dataType&&"metadata"===Ae.sourceDataType&&(me._sourceLoaded=!0),me._sourceLoaded&&!me._paused&&"source"===Ae.dataType&&"content"===Ae.sourceDataType&&(me.reload(),me.transform&&me.update(me.transform))}),this.on("error",function(){me._sourceErrored=!0}),this._source=function(Ae,De,Le,Qe){var rt=new V[De.type](Ae,De,Le,Qe);if(rt.id!==Ae)throw new Error("Expected Source id to be "+Ae+" instead of "+rt.id);return r.bindAll(["load","abort","unload","serialize","prepare"],rt),rt}(U,$,le,this),this._tiles={},this._cache=new ie(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new r.SourceFeatureState}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.onAdd=function(U){this.map=U,this._maxTileCacheSize=U?U._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(U)},j.prototype.onRemove=function(U){this._source&&this._source.onRemove&&this._source.onRemove(U)},j.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var U in this._tiles){var $=this._tiles[U];if("loaded"!==$.state&&"errored"!==$.state)return!1}return!0},j.prototype.getSource=function(){return this._source},j.prototype.pause=function(){this._paused=!0},j.prototype.resume=function(){if(this._paused){var U=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,U&&this.reload(),this.transform&&this.update(this.transform)}},j.prototype._loadTile=function(U,$){return this._source.loadTile(U,$)},j.prototype._unloadTile=function(U){if(this._source.unloadTile)return this._source.unloadTile(U,function(){})},j.prototype._abortTile=function(U){if(this._source.abortTile)return this._source.abortTile(U,function(){})},j.prototype.serialize=function(){return this._source.serialize()},j.prototype.prepare=function(U){for(var $ in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var le=this._tiles[$];le.upload(U),le.prepare(this.map.style.imageManager)}},j.prototype.getIds=function(){return r.values(this._tiles).map(function(U){return U.tileID}).sort(bt).map(function(U){return U.key})},j.prototype.getRenderableIds=function(U){var $=this,le=[];for(var me in this._tiles)this._isIdRenderable(me,U)&&le.push(this._tiles[me]);return U?le.sort(function(Ae,De){var Le=Ae.tileID,Qe=De.tileID,rt=new r.Point(Le.canonical.x,Le.canonical.y)._rotate($.transform.angle),dt=new r.Point(Qe.canonical.x,Qe.canonical.y)._rotate($.transform.angle);return Le.overscaledZ-Qe.overscaledZ||dt.y-rt.y||dt.x-rt.x}).map(function(Ae){return Ae.tileID.key}):le.map(function(Ae){return Ae.tileID}).sort(bt).map(function(Ae){return Ae.key})},j.prototype.hasRenderableParent=function(U){var $=this.findLoadedParent(U,0);return!!$&&this._isIdRenderable($.tileID.key)},j.prototype._isIdRenderable=function(U,$){return this._tiles[U]&&this._tiles[U].hasData()&&!this._coveredTiles[U]&&($||!this._tiles[U].holdingForFade())},j.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var U in this._cache.reset(),this._tiles)"errored"!==this._tiles[U].state&&this._reloadTile(U,"reloading")},j.prototype._reloadTile=function(U,$){var le=this._tiles[U];le&&("loading"!==le.state&&(le.state=$),this._loadTile(le,this._tileLoaded.bind(this,le,U,$)))},j.prototype._tileLoaded=function(U,$,le,me){if(me)return U.state="errored",void(404!==me.status?this._source.fire(new r.ErrorEvent(me,{tile:U})):this.update(this.transform));U.timeAdded=r.browser.now(),"expired"===le&&(U.refreshedUponExpiration=!0),this._setTileReloadTimer($,U),"raster-dem"===this.getSource().type&&U.dem&&this._backfillDEM(U),this._state.initializeTileState(U,this.map?this.map.painter:null),this._source.fire(new r.Event("data",{dataType:"source",tile:U,coord:U.tileID}))},j.prototype._backfillDEM=function(U){for(var $=this.getRenderableIds(),le=0;le<$.length;le++){var me=$[le];if(U.neighboringTiles&&U.neighboringTiles[me]){var Ae=this.getTileByID(me);De(U,Ae),De(Ae,U)}}function De(Le,Qe){Le.needsHillshadePrepare=!0;var rt=Qe.tileID.canonical.x-Le.tileID.canonical.x,dt=Qe.tileID.canonical.y-Le.tileID.canonical.y,Pt=Math.pow(2,Le.tileID.canonical.z),Nt=Qe.tileID.key;0===rt&&0===dt||Math.abs(dt)>1||(Math.abs(rt)>1&&(1===Math.abs(rt+Pt)?rt+=Pt:1===Math.abs(rt-Pt)&&(rt-=Pt)),Qe.dem&&Le.dem&&(Le.dem.backfillBorder(Qe.dem,rt,dt),Le.neighboringTiles&&Le.neighboringTiles[Nt]&&(Le.neighboringTiles[Nt].backfilled=!0)))}},j.prototype.getTile=function(U){return this.getTileByID(U.key)},j.prototype.getTileByID=function(U){return this._tiles[U]},j.prototype._retainLoadedChildren=function(U,$,le,me){for(var Ae in this._tiles){var De=this._tiles[Ae];if(!(me[Ae]||!De.hasData()||De.tileID.overscaledZ<=$||De.tileID.overscaledZ>le)){for(var Le=De.tileID;De&&De.tileID.overscaledZ>$+1;){var Qe=De.tileID.scaledTo(De.tileID.overscaledZ-1);(De=this._tiles[Qe.key])&&De.hasData()&&(Le=Qe)}for(var rt=Le;rt.overscaledZ>$;)if(U[(rt=rt.scaledTo(rt.overscaledZ-1)).key]){me[Le.key]=Le;break}}}},j.prototype.findLoadedParent=function(U,$){if(U.key in this._loadedParentTiles){var le=this._loadedParentTiles[U.key];return le&&le.tileID.overscaledZ>=$?le:null}for(var me=U.overscaledZ-1;me>=$;me--){var Ae=U.scaledTo(me),De=this._getLoadedTile(Ae);if(De)return De}},j.prototype._getLoadedTile=function(U){var $=this._tiles[U.key];return $&&$.hasData()?$:this._cache.getByKey(U.wrapped().key)},j.prototype.updateCacheSize=function(U){var $=(Math.ceil(U.width/this._source.tileSize)+1)*(Math.ceil(U.height/this._source.tileSize)+1),le=Math.floor(5*$),me="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,le):le;this._cache.setMaxSize(me)},j.prototype.handleWrapJump=function(U){var le=Math.round((U-(void 0===this._prevLng?U:this._prevLng))/360);if(this._prevLng=U,le){var me={};for(var Ae in this._tiles){var De=this._tiles[Ae];De.tileID=De.tileID.unwrapTo(De.tileID.wrap+le),me[De.tileID.key]=De}for(var Le in this._tiles=me,this._timers)clearTimeout(this._timers[Le]),delete this._timers[Le];for(var Qe in this._tiles)this._setTileReloadTimer(Qe,this._tiles[Qe])}},j.prototype.update=function(U){var $=this;if(this.transform=U,this._sourceLoaded&&!this._paused){var le;this.updateCacheSize(U),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?le=U.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Gn){return new r.OverscaledTileID(Gn.canonical.z,Gn.wrap,Gn.canonical.z,Gn.canonical.x,Gn.canonical.y)}):(le=U.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(le=le.filter(function(Gn){return $._source.hasTile(Gn)}))):le=[];var me=U.coveringZoomLevel(this._source),Ae=Math.max(me-j.maxOverzooming,this._source.minzoom),De=Math.max(me+j.maxUnderzooming,this._source.minzoom),Le=this._updateRetainedTiles(le,me);if(gt(this._source.type)){for(var Qe={},rt={},dt=0,Pt=Object.keys(Le);dt<Pt.length;dt+=1){var Nt=Pt[dt],Rt=Le[Nt],Ft=this._tiles[Nt];if(Ft&&!(Ft.fadeEndTime&&Ft.fadeEndTime<=r.browser.now())){var It=this.findLoadedParent(Rt,Ae);It&&(this._addTile(It.tileID),Qe[It.tileID.key]=It.tileID),rt[Nt]=Rt}}for(var Xt in this._retainLoadedChildren(rt,me,De,Le),Qe)Le[Xt]||(this._coveredTiles[Xt]=!0,Le[Xt]=Qe[Xt])}for(var $t in Le)this._tiles[$t].clearFadeHold();for(var en=0,bn=r.keysDifference(this._tiles,Le);en<bn.length;en+=1){var Cn=bn[en],$n=this._tiles[Cn];$n.hasSymbolBuckets&&!$n.holdingForFade()?$n.setHoldDuration(this.map._fadeDuration):$n.hasSymbolBuckets&&!$n.symbolFadeFinished()||this._removeTile(Cn)}this._updateLoadedParentTileCache()}},j.prototype.releaseSymbolFadeTiles=function(){for(var U in this._tiles)this._tiles[U].holdingForFade()&&this._removeTile(U)},j.prototype._updateRetainedTiles=function(U,$){for(var le={},me={},Ae=Math.max($-j.maxOverzooming,this._source.minzoom),De=Math.max($+j.maxUnderzooming,this._source.minzoom),Le={},Qe=0,rt=U;Qe<rt.length;Qe+=1){var dt=rt[Qe],Pt=this._addTile(dt);le[dt.key]=dt,Pt.hasData()||$<this._source.maxzoom&&(Le[dt.key]=dt)}this._retainLoadedChildren(Le,$,De,le);for(var Nt=0,Rt=U;Nt<Rt.length;Nt+=1){var Ft=Rt[Nt],It=this._tiles[Ft.key];if(!It.hasData()){if($+1>this._source.maxzoom){var Xt=Ft.children(this._source.maxzoom)[0],$t=this.getTile(Xt);if($t&&$t.hasData()){le[Xt.key]=Xt;continue}}else{var en=Ft.children(this._source.maxzoom);if(le[en[0].key]&&le[en[1].key]&&le[en[2].key]&&le[en[3].key])continue}for(var bn=It.wasRequested(),Cn=Ft.overscaledZ-1;Cn>=Ae;--Cn){var $n=Ft.scaledTo(Cn);if(me[$n.key]||(me[$n.key]=!0,!(It=this.getTile($n))&&bn&&(It=this._addTile($n)),It&&(le[$n.key]=$n,bn=It.wasRequested(),It.hasData())))break}}}return le},j.prototype._updateLoadedParentTileCache=function(){for(var U in this._loadedParentTiles={},this._tiles){for(var $=[],le=void 0,me=this._tiles[U].tileID;me.overscaledZ>0;){if(me.key in this._loadedParentTiles){le=this._loadedParentTiles[me.key];break}$.push(me.key);var Ae=me.scaledTo(me.overscaledZ-1);if(le=this._getLoadedTile(Ae))break;me=Ae}for(var De=0,Le=$;De<Le.length;De+=1)this._loadedParentTiles[Le[De]]=le}},j.prototype._addTile=function(U){var $=this._tiles[U.key];if($)return $;($=this._cache.getAndRemove(U))&&(this._setTileReloadTimer(U.key,$),$.tileID=U,this._state.initializeTileState($,this.map?this.map.painter:null),this._cacheTimers[U.key]&&(clearTimeout(this._cacheTimers[U.key]),delete this._cacheTimers[U.key],this._setTileReloadTimer(U.key,$)));var le=Boolean($);return le||($=new r.Tile(U,this._source.tileSize*U.overscaleFactor()),this._loadTile($,this._tileLoaded.bind(this,$,U.key,$.state))),$?($.uses++,this._tiles[U.key]=$,le||this._source.fire(new r.Event("dataloading",{tile:$,coord:$.tileID,dataType:"source"})),$):null},j.prototype._setTileReloadTimer=function(U,$){var le=this;U in this._timers&&(clearTimeout(this._timers[U]),delete this._timers[U]);var me=$.getExpiryTimeout();me&&(this._timers[U]=setTimeout(function(){le._reloadTile(U,"expired"),delete le._timers[U]},me))},j.prototype._removeTile=function(U){var $=this._tiles[U];$&&($.uses--,delete this._tiles[U],this._timers[U]&&(clearTimeout(this._timers[U]),delete this._timers[U]),$.uses>0||($.hasData()&&"reloading"!==$.state?this._cache.add($.tileID,$,$.getExpiryTimeout()):($.aborted=!0,this._abortTile($),this._unloadTile($))))},j.prototype.clearTiles=function(){for(var U in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(U);this._cache.reset()},j.prototype.tilesIn=function(U,$,le){var me=this,Ae=[],De=this.transform;if(!De)return Ae;for(var Le=le?De.getCameraQueryGeometry(U):U,Qe=U.map(function(Cn){return De.pointCoordinate(Cn)}),rt=Le.map(function(Cn){return De.pointCoordinate(Cn)}),dt=this.getIds(),Pt=1/0,Nt=1/0,Rt=-1/0,Ft=-1/0,It=0,Xt=rt;It<Xt.length;It+=1){var $t=Xt[It];Pt=Math.min(Pt,$t.x),Nt=Math.min(Nt,$t.y),Rt=Math.max(Rt,$t.x),Ft=Math.max(Ft,$t.y)}for(var en=function(Cn){var $n=me._tiles[dt[Cn]];if(!$n.holdingForFade()){var Gn=$n.tileID,pr=Math.pow(2,De.zoom-$n.tileID.overscaledZ),dr=$*$n.queryPadding*r.EXTENT/$n.tileSize/pr,Er=[Gn.getTilePoint(new r.MercatorCoordinate(Pt,Nt)),Gn.getTilePoint(new r.MercatorCoordinate(Rt,Ft))];if(Er[0].x-dr<r.EXTENT&&Er[0].y-dr<r.EXTENT&&Er[1].x+dr>=0&&Er[1].y+dr>=0){var wr=Qe.map(function(Mi){return Gn.getTilePoint(Mi)}),fi=rt.map(function(Mi){return Gn.getTilePoint(Mi)});Ae.push({tile:$n,tileID:Gn,queryGeometry:wr,cameraQueryGeometry:fi,scale:pr})}}},bn=0;bn<dt.length;bn++)en(bn);return Ae},j.prototype.getVisibleCoordinates=function(U){for(var $=this,le=this.getRenderableIds(U).map(function(Le){return $._tiles[Le].tileID}),me=0,Ae=le;me<Ae.length;me+=1){var De=Ae[me];De.posMatrix=this.transform.calculatePosMatrix(De.toUnwrapped())}return le},j.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(gt(this._source.type))for(var U in this._tiles){var $=this._tiles[U];if(void 0!==$.fadeEndTime&&$.fadeEndTime>=r.browser.now())return!0}return!1},j.prototype.setFeatureState=function(U,$,le){this._state.updateState(U=U||"_geojsonTileLayer",$,le)},j.prototype.removeFeatureState=function(U,$,le){this._state.removeFeatureState(U=U||"_geojsonTileLayer",$,le)},j.prototype.getFeatureState=function(U,$){return this._state.getState(U=U||"_geojsonTileLayer",$)},j.prototype.setDependencies=function(U,$,le){var me=this._tiles[U];me&&me.setDependencies($,le)},j.prototype.reloadTilesForDependencies=function(U,$){for(var le in this._tiles)this._tiles[le].hasDependency(U,$)&&this._reloadTile(le,"reloading");this._cache.filter(function(me){return!me.hasDependency(U,$)})},j}(r.Evented);function bt(O,j){var U=Math.abs(2*O.wrap)-+(O.wrap<0),$=Math.abs(2*j.wrap)-+(j.wrap<0);return O.overscaledZ-j.overscaledZ||$-U||j.canonical.y-O.canonical.y||j.canonical.x-O.canonical.x}function gt(O){return"raster"===O||"image"===O||"video"===O}function pt(){return new r.window.Worker(ge.workerUrl)}Ke.maxOverzooming=10,Ke.maxUnderzooming=3;var St="mapboxgl_preloaded_worker_pool",jt=function(){this.active={}};jt.prototype.acquire=function(O){if(!this.workers)for(this.workers=[];this.workers.length<jt.workerCount;)this.workers.push(new pt);return this.active[O]=!0,this.workers.slice()},jt.prototype.release=function(O){delete this.active[O],0===this.numActive()&&(this.workers.forEach(function(j){j.terminate()}),this.workers=null)},jt.prototype.isPreloaded=function(){return!!this.active[St]},jt.prototype.numActive=function(){return Object.keys(this.active).length};var Lt,Vt=Math.floor(r.browser.hardwareConcurrency/2);function mt(){return Lt||(Lt=new jt),Lt}function Wt(O,j){var U={};for(var $ in O)"ref"!==$&&(U[$]=O[$]);return r.refProperties.forEach(function(le){le in j&&(U[le]=j[le])}),U}function Kt(O){O=O.slice();for(var j=Object.create(null),U=0;U<O.length;U++)j[O[U].id]=O[U];for(var $=0;$<O.length;$++)"ref"in O[$]&&(O[$]=Wt(O[$],j[O[$].ref]));return O}jt.workerCount=Math.max(Math.min(Vt,6),1);var rn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Yt(O,j,U){U.push({command:rn.addSource,args:[O,j[O]]})}function Ue(O,j,U){j.push({command:rn.removeSource,args:[O]}),U[O]=!0}function wt(O,j,U,$){Ue(O,U,$),Yt(O,j,U)}function Ut(O,j,U){var $;for($ in O[U])if(O[U].hasOwnProperty($)&&"data"!==$&&!r.deepEqual(O[U][$],j[U][$]))return!1;for($ in j[U])if(j[U].hasOwnProperty($)&&"data"!==$&&!r.deepEqual(O[U][$],j[U][$]))return!1;return!0}function Zt(O,j,U,$,le,me){var Ae;for(Ae in j=j||{},O=O||{})O.hasOwnProperty(Ae)&&(r.deepEqual(O[Ae],j[Ae])||U.push({command:me,args:[$,Ae,j[Ae],le]}));for(Ae in j)j.hasOwnProperty(Ae)&&!O.hasOwnProperty(Ae)&&(r.deepEqual(O[Ae],j[Ae])||U.push({command:me,args:[$,Ae,j[Ae],le]}))}function tn(O){return O.id}function un(O,j){return O[j.id]=j,O}var Qt=function(O,j){this.reset(O,j)};Qt.prototype.reset=function(O,j){this.points=O||[],this._distances=[0];for(var U=1;U<this.points.length;U++)this._distances[U]=this._distances[U-1]+this.points[U].dist(this.points[U-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(j||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Qt.prototype.lerp=function(O){if(1===this.points.length)return this.points[0];O=r.clamp(O,0,1);for(var j=1,U=this._distances[j],$=O*this.paddedLength+this.padding;U<$&&j<this._distances.length;)U=this._distances[++j];var le=j-1,me=this._distances[le],Ae=U-me,De=Ae>0?($-me)/Ae:0;return this.points[le].mult(1-De).add(this.points[j].mult(De))};var yn=function(O,j,U){var $=this.boxCells=[],le=this.circleCells=[];this.xCellCount=Math.ceil(O/U),this.yCellCount=Math.ceil(j/U);for(var me=0;me<this.xCellCount*this.yCellCount;me++)$.push([]),le.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=O,this.height=j,this.xScale=this.xCellCount/O,this.yScale=this.yCellCount/j,this.boxUid=0,this.circleUid=0};function Mn(O,j,U,$,le){var me=r.create();return j?(r.scale(me,me,[1/le,1/le,1]),U||r.rotateZ(me,me,$.angle)):r.multiply(me,$.labelPlaneMatrix,O),me}function Pn(O,j,U,$,le){if(j){var me=r.clone(O);return r.scale(me,me,[le,le,1]),U||r.rotateZ(me,me,-$.angle),me}return $.glCoordMatrix}function sn(O,j){var U=[O.x,O.y,0,1];Xr(U,U,j);var $=U[3];return{point:new r.Point(U[0]/$,U[1]/$),signedDistanceFromCamera:$}}function In(O,j){return.5+O/j*.5}function Rn(O,j){var U=O[0]/O[3],$=O[1]/O[3];return U>=-j[0]&&U<=j[0]&&$>=-j[1]&&$<=j[1]}function Ln(O,j,U,$,le,me,Ae,De){var Le=$?O.textSizeData:O.iconSizeData,Qe=r.evaluateSizeForZoom(Le,U.transform.zoom),rt=[256/U.width*2+1,256/U.height*2+1],dt=$?O.text.dynamicLayoutVertexArray:O.icon.dynamicLayoutVertexArray;dt.clear();for(var Pt=O.lineVertexArray,Nt=$?O.text.placedSymbolArray:O.icon.placedSymbolArray,Rt=U.transform.width/U.transform.height,Ft=!1,It=0;It<Nt.length;It++){var Xt=Nt.get(It);if(Xt.hidden||Xt.writingMode===r.WritingMode.vertical&&!Ft)er(Xt.numGlyphs,dt);else{Ft=!1;var $t=[Xt.anchorX,Xt.anchorY,0,1];if(r.transformMat4($t,$t,j),Rn($t,rt)){var bn=In(U.transform.cameraToCenterDistance,$t[3]),Cn=r.evaluateSizeForFeature(Le,Qe,Xt),$n=Ae?Cn/bn:Cn*bn,Gn=new r.Point(Xt.anchorX,Xt.anchorY),pr=sn(Gn,le).point,dr={},Er=rr(Xt,$n,!1,De,j,le,me,O.glyphOffsetArray,Pt,dt,pr,Gn,dr,Rt);Ft=Er.useVertical,(Er.notEnoughRoom||Ft||Er.needsFlipping&&rr(Xt,$n,!0,De,j,le,me,O.glyphOffsetArray,Pt,dt,pr,Gn,dr,Rt).notEnoughRoom)&&er(Xt.numGlyphs,dt)}else er(Xt.numGlyphs,dt)}}$?O.text.dynamicLayoutVertexBuffer.updateData(dt):O.icon.dynamicLayoutVertexBuffer.updateData(dt)}function qn(O,j,U,$,le,me,Ae,De,Le,Qe,rt){var dt=De.glyphStartIndex+De.numGlyphs,Pt=De.lineStartIndex,Nt=De.lineStartIndex+De.lineLength,Rt=j.getoffsetX(De.glyphStartIndex),Ft=j.getoffsetX(dt-1),It=jr(O*Rt,U,$,le,me,Ae,De.segment,Pt,Nt,Le,Qe,rt);if(!It)return null;var Xt=jr(O*Ft,U,$,le,me,Ae,De.segment,Pt,Nt,Le,Qe,rt);return Xt?{first:It,last:Xt}:null}function nr(O,j,U,$){return O===r.WritingMode.horizontal&&Math.abs(U.y-j.y)>Math.abs(U.x-j.x)*$?{useVertical:!0}:(O===r.WritingMode.vertical?j.y<U.y:j.x>U.x)?{needsFlipping:!0}:null}function rr(O,j,U,$,le,me,Ae,De,Le,Qe,rt,dt,Pt,Nt){var Rt,Ft=j/24,It=O.lineOffsetX*Ft,Xt=O.lineOffsetY*Ft;if(O.numGlyphs>1){var $t=O.glyphStartIndex+O.numGlyphs,en=O.lineStartIndex,bn=O.lineStartIndex+O.lineLength,Cn=qn(Ft,De,It,Xt,U,rt,dt,O,Le,me,Pt);if(!Cn)return{notEnoughRoom:!0};var $n=sn(Cn.first.point,Ae).point,Gn=sn(Cn.last.point,Ae).point;if($&&!U){var pr=nr(O.writingMode,$n,Gn,Nt);if(pr)return pr}Rt=[Cn.first];for(var dr=O.glyphStartIndex+1;dr<$t-1;dr++)Rt.push(jr(Ft*De.getoffsetX(dr),It,Xt,U,rt,dt,O.segment,en,bn,Le,me,Pt));Rt.push(Cn.last)}else{if($&&!U){var Er=sn(dt,le).point,wr=O.lineStartIndex+O.segment+1,fi=new r.Point(Le.getx(wr),Le.gety(wr)),Mi=sn(fi,le),Wi=Mi.signedDistanceFromCamera>0?Mi.point:gr(dt,fi,Er,1,le),lr=nr(O.writingMode,Er,Wi,Nt);if(lr)return lr}var Ur=jr(Ft*De.getoffsetX(O.glyphStartIndex),It,Xt,U,rt,dt,O.segment,O.lineStartIndex,O.lineStartIndex+O.lineLength,Le,me,Pt);if(!Ur)return{notEnoughRoom:!0};Rt=[Ur]}for(var ki=0,vi=Rt;ki<vi.length;ki+=1){var Oi=vi[ki];r.addDynamicAttributes(Qe,Oi.point,Oi.angle)}return{}}function gr(O,j,U,$,le){var me=sn(O.add(O.sub(j)._unit()),le).point,Ae=U.sub(me);return U.add(Ae._mult($/Ae.mag()))}function jr(O,j,U,$,le,me,Ae,De,Le,Qe,rt,dt){var Pt=$?O-j:O+j,Nt=Pt>0?1:-1,Rt=0;$&&(Nt*=-1,Rt=Math.PI),Nt<0&&(Rt+=Math.PI);for(var Ft=Nt>0?De+Ae:De+Ae+1,It=le,Xt=le,$t=0,en=0,bn=Math.abs(Pt),Cn=[];$t+en<=bn;){if((Ft+=Nt)<De||Ft>=Le)return null;if(Xt=It,Cn.push(It),void 0===(It=dt[Ft])){var $n=new r.Point(Qe.getx(Ft),Qe.gety(Ft)),Gn=sn($n,rt);if(Gn.signedDistanceFromCamera>0)It=dt[Ft]=Gn.point;else{var pr=Ft-Nt;It=gr(0===$t?me:new r.Point(Qe.getx(pr),Qe.gety(pr)),$n,Xt,bn-$t+1,rt)}}$t+=en,en=Xt.dist(It)}var dr=(bn-$t)/en,Er=It.sub(Xt),wr=Er.mult(dr)._add(Xt);wr._add(Er._unit()._perp()._mult(U*Nt));var fi=Rt+Math.atan2(It.y-Xt.y,It.x-Xt.x);return Cn.push(wr),{point:wr,angle:fi,path:Cn}}yn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},yn.prototype.insert=function(O,j,U,$,le){this._forEachCell(j,U,$,le,this._insertBoxCell,this.boxUid++),this.boxKeys.push(O),this.bboxes.push(j),this.bboxes.push(U),this.bboxes.push($),this.bboxes.push(le)},yn.prototype.insertCircle=function(O,j,U,$){this._forEachCell(j-$,U-$,j+$,U+$,this._insertCircleCell,this.circleUid++),this.circleKeys.push(O),this.circles.push(j),this.circles.push(U),this.circles.push($)},yn.prototype._insertBoxCell=function(O,j,U,$,le,me){this.boxCells[le].push(me)},yn.prototype._insertCircleCell=function(O,j,U,$,le,me){this.circleCells[le].push(me)},yn.prototype._query=function(O,j,U,$,le,me){if(U<0||O>this.width||$<0||j>this.height)return!le&&[];var Ae=[];if(O<=0&&j<=0&&this.width<=U&&this.height<=$){if(le)return!0;for(var De=0;De<this.boxKeys.length;De++)Ae.push({key:this.boxKeys[De],x1:this.bboxes[4*De],y1:this.bboxes[4*De+1],x2:this.bboxes[4*De+2],y2:this.bboxes[4*De+3]});for(var Le=0;Le<this.circleKeys.length;Le++){var Qe=this.circles[3*Le],rt=this.circles[3*Le+1],dt=this.circles[3*Le+2];Ae.push({key:this.circleKeys[Le],x1:Qe-dt,y1:rt-dt,x2:Qe+dt,y2:rt+dt})}return me?Ae.filter(me):Ae}return this._forEachCell(O,j,U,$,this._queryCell,Ae,{hitTest:le,seenUids:{box:{},circle:{}}},me),le?Ae.length>0:Ae},yn.prototype._queryCircle=function(O,j,U,$,le){var me=O-U,Ae=O+U,De=j-U,Le=j+U;if(Ae<0||me>this.width||Le<0||De>this.height)return!$&&[];var Qe=[];return this._forEachCell(me,De,Ae,Le,this._queryCellCircle,Qe,{hitTest:$,circle:{x:O,y:j,radius:U},seenUids:{box:{},circle:{}}},le),$?Qe.length>0:Qe},yn.prototype.query=function(O,j,U,$,le){return this._query(O,j,U,$,!1,le)},yn.prototype.hitTest=function(O,j,U,$,le){return this._query(O,j,U,$,!0,le)},yn.prototype.hitTestCircle=function(O,j,U,$){return this._queryCircle(O,j,U,!0,$)},yn.prototype._queryCell=function(O,j,U,$,le,me,Ae,De){var Le=Ae.seenUids,Qe=this.boxCells[le];if(null!==Qe)for(var rt=this.bboxes,dt=0,Pt=Qe;dt<Pt.length;dt+=1){var Nt=Pt[dt];if(!Le.box[Nt]){Le.box[Nt]=!0;var Rt=4*Nt;if(O<=rt[Rt+2]&&j<=rt[Rt+3]&&U>=rt[Rt+0]&&$>=rt[Rt+1]&&(!De||De(this.boxKeys[Nt]))){if(Ae.hitTest)return me.push(!0),!0;me.push({key:this.boxKeys[Nt],x1:rt[Rt],y1:rt[Rt+1],x2:rt[Rt+2],y2:rt[Rt+3]})}}}var Ft=this.circleCells[le];if(null!==Ft)for(var It=this.circles,Xt=0,$t=Ft;Xt<$t.length;Xt+=1){var en=$t[Xt];if(!Le.circle[en]){Le.circle[en]=!0;var bn=3*en;if(this._circleAndRectCollide(It[bn],It[bn+1],It[bn+2],O,j,U,$)&&(!De||De(this.circleKeys[en]))){if(Ae.hitTest)return me.push(!0),!0;var Cn=It[bn],$n=It[bn+1],Gn=It[bn+2];me.push({key:this.circleKeys[en],x1:Cn-Gn,y1:$n-Gn,x2:Cn+Gn,y2:$n+Gn})}}}},yn.prototype._queryCellCircle=function(O,j,U,$,le,me,Ae,De){var Le=Ae.circle,Qe=Ae.seenUids,rt=this.boxCells[le];if(null!==rt)for(var dt=this.bboxes,Pt=0,Nt=rt;Pt<Nt.length;Pt+=1){var Rt=Nt[Pt];if(!Qe.box[Rt]){Qe.box[Rt]=!0;var Ft=4*Rt;if(this._circleAndRectCollide(Le.x,Le.y,Le.radius,dt[Ft+0],dt[Ft+1],dt[Ft+2],dt[Ft+3])&&(!De||De(this.boxKeys[Rt])))return me.push(!0),!0}}var It=this.circleCells[le];if(null!==It)for(var Xt=this.circles,$t=0,en=It;$t<en.length;$t+=1){var bn=en[$t];if(!Qe.circle[bn]){Qe.circle[bn]=!0;var Cn=3*bn;if(this._circlesCollide(Xt[Cn],Xt[Cn+1],Xt[Cn+2],Le.x,Le.y,Le.radius)&&(!De||De(this.circleKeys[bn])))return me.push(!0),!0}}},yn.prototype._forEachCell=function(O,j,U,$,le,me,Ae,De){for(var Le=this._convertToXCellCoord(O),Qe=this._convertToYCellCoord(j),rt=this._convertToXCellCoord(U),dt=this._convertToYCellCoord($),Pt=Le;Pt<=rt;Pt++)for(var Nt=Qe;Nt<=dt;Nt++)if(le.call(this,O,j,U,$,this.xCellCount*Nt+Pt,me,Ae,De))return},yn.prototype._convertToXCellCoord=function(O){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(O*this.xScale)))},yn.prototype._convertToYCellCoord=function(O){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(O*this.yScale)))},yn.prototype._circlesCollide=function(O,j,U,$,le,me){var Ae=$-O,De=le-j,Le=U+me;return Le*Le>Ae*Ae+De*De},yn.prototype._circleAndRectCollide=function(O,j,U,$,le,me,Ae){var De=(me-$)/2,Le=Math.abs(O-($+De));if(Le>De+U)return!1;var Qe=(Ae-le)/2,rt=Math.abs(j-(le+Qe));if(rt>Qe+U)return!1;if(Le<=De||rt<=Qe)return!0;var dt=Le-De,Pt=rt-Qe;return dt*dt+Pt*Pt<=U*U};var kr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function er(O,j){for(var U=0;U<O;U++){var $=j.length;j.resize($+4),j.float32.set(kr,3*$)}}function Xr(O,j,U){var $=j[0],le=j[1];return O[0]=U[0]*$+U[4]*le+U[12],O[1]=U[1]*$+U[5]*le+U[13],O[3]=U[3]*$+U[7]*le+U[15],O}var ir=function(O,j,U){void 0===j&&(j=new yn(O.width+200,O.height+200,25)),void 0===U&&(U=new yn(O.width+200,O.height+200,25)),this.transform=O,this.grid=j,this.ignoredGrid=U,this.pitchfactor=Math.cos(O._pitch)*O.cameraToCenterDistance,this.screenRightBoundary=O.width+100,this.screenBottomBoundary=O.height+100,this.gridRightBoundary=O.width+200,this.gridBottomBoundary=O.height+200};function Bn(O,j,U){return j*(r.EXTENT/(O.tileSize*Math.pow(2,U-O.tileID.overscaledZ)))}ir.prototype.placeCollisionBox=function(O,j,U,$,le){var me=this.projectAndGetPerspectiveRatio($,O.anchorPointX,O.anchorPointY),Ae=U*me.perspectiveRatio,De=O.x1*Ae+me.point.x,Le=O.y1*Ae+me.point.y,Qe=O.x2*Ae+me.point.x,rt=O.y2*Ae+me.point.y;return!this.isInsideGrid(De,Le,Qe,rt)||!j&&this.grid.hitTest(De,Le,Qe,rt,le)?{box:[],offscreen:!1}:{box:[De,Le,Qe,rt],offscreen:this.isOffscreen(De,Le,Qe,rt)}},ir.prototype.placeCollisionCircles=function(O,j,U,$,le,me,Ae,De,Le,Qe,rt,dt,Pt){var Nt=[],Rt=new r.Point(j.anchorX,j.anchorY),Ft=sn(Rt,me),It=In(this.transform.cameraToCenterDistance,Ft.signedDistanceFromCamera),Xt=(Qe?le/It:le*It)/r.ONE_EM,$t=sn(Rt,Ae).point,en=qn(Xt,$,j.lineOffsetX*Xt,j.lineOffsetY*Xt,!1,$t,Rt,j,U,Ae,{}),bn=!1,Cn=!1,$n=!0;if(en){for(var Gn=.5*dt*It+Pt,pr=new r.Point(-100,-100),dr=new r.Point(this.screenRightBoundary,this.screenBottomBoundary),Er=new Qt,wr=en.first,fi=en.last,Mi=[],Wi=wr.path.length-1;Wi>=1;Wi--)Mi.push(wr.path[Wi]);for(var lr=1;lr<fi.path.length;lr++)Mi.push(fi.path[lr]);var Ur=2.5*Gn;if(De){var ki=Mi.map(function(wl){return sn(wl,De)});Mi=ki.some(function(wl){return wl.signedDistanceFromCamera<=0})?[]:ki.map(function(wl){return wl.point})}var vi=[];if(Mi.length>0){for(var Oi=Mi[0].clone(),$i=Mi[0].clone(),da=1;da<Mi.length;da++)Oi.x=Math.min(Oi.x,Mi[da].x),Oi.y=Math.min(Oi.y,Mi[da].y),$i.x=Math.max($i.x,Mi[da].x),$i.y=Math.max($i.y,Mi[da].y);vi=Oi.x>=pr.x&&$i.x<=dr.x&&Oi.y>=pr.y&&$i.y<=dr.y?[Mi]:$i.x<pr.x||Oi.x>dr.x||$i.y<pr.y||Oi.y>dr.y?[]:r.clipLine([Mi],pr.x,pr.y,dr.x,dr.y)}for(var Ii=0,sa=vi;Ii<sa.length;Ii+=1){Er.reset(sa[Ii],.25*Gn);var na;na=Er.length<=.5*Gn?1:Math.ceil(Er.paddedLength/Ur)+1;for(var aa=0;aa<na;aa++){var ha=aa/Math.max(na-1,1),Ca=Er.lerp(ha),fo=Ca.x+100,Oo=Ca.y+100;Nt.push(fo,Oo,Gn,0);var No=fo-Gn,xo=Oo-Gn,wo=fo+Gn,$o=Oo+Gn;if($n=$n&&this.isOffscreen(No,xo,wo,$o),Cn=Cn||this.isInsideGrid(No,xo,wo,$o),!O&&this.grid.hitTestCircle(fo,Oo,Gn,rt)&&(bn=!0,!Le))return{circles:[],offscreen:!1,collisionDetected:bn}}}}return{circles:!Le&&bn||!Cn?[]:Nt,offscreen:$n,collisionDetected:bn}},ir.prototype.queryRenderedSymbols=function(O){if(0===O.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var j=[],U=1/0,$=1/0,le=-1/0,me=-1/0,Ae=0,De=O;Ae<De.length;Ae+=1){var Le=De[Ae],Qe=new r.Point(Le.x+100,Le.y+100);U=Math.min(U,Qe.x),$=Math.min($,Qe.y),le=Math.max(le,Qe.x),me=Math.max(me,Qe.y),j.push(Qe)}for(var rt={},dt={},Pt=0,Nt=this.grid.query(U,$,le,me).concat(this.ignoredGrid.query(U,$,le,me));Pt<Nt.length;Pt+=1){var Rt=Nt[Pt],Ft=Rt.key;if(void 0===rt[Ft.bucketInstanceId]&&(rt[Ft.bucketInstanceId]={}),!rt[Ft.bucketInstanceId][Ft.featureIndex]){var It=[new r.Point(Rt.x1,Rt.y1),new r.Point(Rt.x2,Rt.y1),new r.Point(Rt.x2,Rt.y2),new r.Point(Rt.x1,Rt.y2)];r.polygonIntersectsPolygon(j,It)&&(rt[Ft.bucketInstanceId][Ft.featureIndex]=!0,void 0===dt[Ft.bucketInstanceId]&&(dt[Ft.bucketInstanceId]=[]),dt[Ft.bucketInstanceId].push(Ft.featureIndex))}}return dt},ir.prototype.insertCollisionBox=function(O,j,U,$,le){(j?this.ignoredGrid:this.grid).insert({bucketInstanceId:U,featureIndex:$,collisionGroupID:le},O[0],O[1],O[2],O[3])},ir.prototype.insertCollisionCircles=function(O,j,U,$,le){for(var me=j?this.ignoredGrid:this.grid,Ae={bucketInstanceId:U,featureIndex:$,collisionGroupID:le},De=0;De<O.length;De+=4)me.insertCircle(Ae,O[De],O[De+1],O[De+2])},ir.prototype.projectAndGetPerspectiveRatio=function(O,j,U){var $=[j,U,0,1];return Xr($,$,O),{point:new r.Point(($[0]/$[3]+1)/2*this.transform.width+100,(-$[1]/$[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/$[3]*.5}},ir.prototype.isOffscreen=function(O,j,U,$){return U<100||O>=this.screenRightBoundary||$<100||j>this.screenBottomBoundary},ir.prototype.isInsideGrid=function(O,j,U,$){return U>=0&&O<this.gridRightBoundary&&$>=0&&j<this.gridBottomBoundary},ir.prototype.getViewportMatrix=function(){var O=r.identity([]);return r.translate(O,O,[-100,-100,0]),O};var mr=function(O,j,U,$){this.opacity=O?Math.max(0,Math.min(1,O.opacity+(O.placed?j:-j))):$&&U?1:0,this.placed=U};mr.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var zr=function(O,j,U,$,le){this.text=new mr(O?O.text:null,j,U,le),this.icon=new mr(O?O.icon:null,j,$,le)};zr.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var br=function(O,j,U){this.text=O,this.icon=j,this.skipFade=U},Dr=function(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]},di=function(O,j,U,$,le){this.bucketInstanceId=O,this.featureIndex=j,this.sourceLayerIndex=U,this.bucketIndex=$,this.tileID=le},ni=function(O){this.crossSourceCollisions=O,this.maxGroupID=0,this.collisionGroups={}};function pi(O,j,U,$,le){var me=r.getAnchorAlignment(O),Ae=-(me.horizontalAlign-.5)*j,De=-(me.verticalAlign-.5)*U,Le=r.evaluateVariableOffset(O,$);return new r.Point(Ae+Le[0]*le,De+Le[1]*le)}function qi(O,j,U,$,le,me){var Ae=O.x1,De=O.x2,Le=O.y1,Qe=O.y2,rt=O.anchorPointX,dt=O.anchorPointY,Pt=new r.Point(j,U);return $&&Pt._rotate(le?me:-me),{x1:Ae+Pt.x,y1:Le+Pt.y,x2:De+Pt.x,y2:Qe+Pt.y,anchorPointX:rt,anchorPointY:dt}}ni.prototype.get=function(O){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[O]){var j=++this.maxGroupID;this.collisionGroups[O]={ID:j,predicate:function(U){return U.collisionGroupID===j}}}return this.collisionGroups[O]};var Ct=function(O,j,U,$){this.transform=O.clone(),this.collisionIndex=new ir(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=j,this.retainedQueryData={},this.collisionGroups=new ni(U),this.collisionCircleArrays={},this.prevPlacement=$,$&&($.prevPlacement=void 0),this.placedOrientations={}};function mn(O,j,U,$,le){O.emplaceBack(j?1:0,U?1:0,$||0,le||0),O.emplaceBack(j?1:0,U?1:0,$||0,le||0),O.emplaceBack(j?1:0,U?1:0,$||0,le||0),O.emplaceBack(j?1:0,U?1:0,$||0,le||0)}Ct.prototype.getBucketParts=function(O,j,U,$){var le=U.getBucket(j),me=U.latestFeatureIndex;if(le&&me&&j.id===le.layerIds[0]){var Ae=U.collisionBoxArray,De=le.layers[0].layout,Le=Math.pow(2,this.transform.zoom-U.tileID.overscaledZ),Qe=U.tileSize/r.EXTENT,rt=this.transform.calculatePosMatrix(U.tileID.toUnwrapped()),dt="map"===De.get("text-pitch-alignment"),Pt="map"===De.get("text-rotation-alignment"),Nt=Bn(U,1,this.transform.zoom),Rt=Mn(rt,dt,Pt,this.transform,Nt),Ft=null;if(dt){var It=Pn(rt,dt,Pt,this.transform,Nt);Ft=r.multiply([],this.transform.labelPlaneMatrix,It)}this.retainedQueryData[le.bucketInstanceId]=new di(le.bucketInstanceId,me,le.sourceLayerIndex,le.index,U.tileID);var Xt={bucket:le,layout:De,posMatrix:rt,textLabelPlaneMatrix:Rt,labelToScreenMatrix:Ft,scale:Le,textPixelRatio:Qe,holdingForFade:U.holdingForFade(),collisionBoxArray:Ae,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(le.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(le.sourceID)};if($)for(var $t=0,en=le.sortKeyRanges;$t<en.length;$t+=1){var bn=en[$t];O.push({sortKey:bn.sortKey,symbolInstanceStart:bn.symbolInstanceStart,symbolInstanceEnd:bn.symbolInstanceEnd,parameters:Xt})}else O.push({symbolInstanceStart:0,symbolInstanceEnd:le.symbolInstances.length,parameters:Xt})}},Ct.prototype.attemptAnchorPlacement=function(O,j,U,$,le,me,Ae,De,Le,Qe,rt,dt,Pt,Nt,Rt){var Ft,It=[dt.textOffset0,dt.textOffset1],Xt=pi(O,U,$,It,le),$t=this.collisionIndex.placeCollisionBox(qi(j,Xt.x,Xt.y,me,Ae,this.transform.angle),rt,De,Le,Qe.predicate);if((!Rt||0!==this.collisionIndex.placeCollisionBox(qi(Rt,Xt.x,Xt.y,me,Ae,this.transform.angle),rt,De,Le,Qe.predicate).box.length)&&$t.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[dt.crossTileID]&&this.prevPlacement.placements[dt.crossTileID]&&this.prevPlacement.placements[dt.crossTileID].text&&(Ft=this.prevPlacement.variableOffsets[dt.crossTileID].anchor),this.variableOffsets[dt.crossTileID]={textOffset:It,width:U,height:$,anchor:O,textBoxScale:le,prevAnchor:Ft},this.markUsedJustification(Pt,O,dt,Nt),Pt.allowVerticalPlacement&&(this.markUsedOrientation(Pt,Nt,dt),this.placedOrientations[dt.crossTileID]=Nt),{shift:Xt,placedGlyphBoxes:$t}},Ct.prototype.placeLayerBucketPart=function(O,j,U){var $=this,le=O.parameters,me=le.bucket,Ae=le.layout,De=le.posMatrix,Le=le.textLabelPlaneMatrix,Qe=le.labelToScreenMatrix,rt=le.textPixelRatio,dt=le.holdingForFade,Pt=le.collisionBoxArray,Nt=le.partiallyEvaluatedTextSize,Rt=le.collisionGroup,Ft=Ae.get("text-optional"),It=Ae.get("icon-optional"),Xt=Ae.get("text-allow-overlap"),$t=Ae.get("icon-allow-overlap"),en="map"===Ae.get("text-rotation-alignment"),bn="map"===Ae.get("text-pitch-alignment"),Cn="none"!==Ae.get("icon-text-fit"),$n="viewport-y"===Ae.get("symbol-z-order"),Gn=Xt&&($t||!me.hasIconData()||It),pr=$t&&(Xt||!me.hasTextData()||Ft);!me.collisionArrays&&Pt&&me.deserializeCollisionBoxes(Pt);var dr=function(lr,Ur){if(!j[lr.crossTileID])if(dt)$.placements[lr.crossTileID]=new br(!1,!1,!1);else{var ki,vi=!1,Oi=!1,$i=!0,da=null,Ii={box:null,offscreen:null},sa={box:null,offscreen:null},ta=null,na=null,aa=0,ha=0,Ca=0;Ur.textFeatureIndex?aa=Ur.textFeatureIndex:lr.useRuntimeCollisionCircles&&(aa=lr.featureIndex),Ur.verticalTextFeatureIndex&&(ha=Ur.verticalTextFeatureIndex);var fo=Ur.textBox;if(fo){var Oo=function(gs){var Rl=r.WritingMode.horizontal;if(me.allowVerticalPlacement&&!gs&&$.prevPlacement){var Fl=$.prevPlacement.placedOrientations[lr.crossTileID];Fl&&($.placedOrientations[lr.crossTileID]=Fl,$.markUsedOrientation(me,Rl=Fl,lr))}return Rl},No=function(gs,Rl){if(me.allowVerticalPlacement&&lr.numVerticalGlyphVertices>0&&Ur.verticalTextBox)for(var Fl=0,qc=me.writingModes;Fl<qc.length&&(qc[Fl]===r.WritingMode.vertical?(Ii=Rl(),sa=Ii):Ii=gs(),!(Ii&&Ii.box&&Ii.box.length));Fl+=1);else Ii=gs()};if(Ae.get("text-variable-anchor")){var xo=Ae.get("text-variable-anchor");if($.prevPlacement&&$.prevPlacement.variableOffsets[lr.crossTileID]){var wo=$.prevPlacement.variableOffsets[lr.crossTileID];xo.indexOf(wo.anchor)>0&&(xo=xo.filter(function(gs){return gs!==wo.anchor})).unshift(wo.anchor)}var $o=function(gs,Rl,Fl){for(var qc=gs.x2-gs.x1,by=gs.y2-gs.y1,Io=lr.textBoxScale,Uf=Cn&&!$t?Rl:null,Wc={box:[],offscreen:!1},_y=Xt?2*xo.length:xo.length,$c=0;$c<_y;++$c){var Cc=$.attemptAnchorPlacement(xo[$c%xo.length],gs,qc,by,Io,en,bn,rt,De,Rt,$c>=xo.length,lr,me,Fl,Uf);if(Cc&&(Wc=Cc.placedGlyphBoxes)&&Wc.box&&Wc.box.length){vi=!0,da=Cc.shift;break}}return Wc};No(function(){return $o(fo,Ur.iconBox,r.WritingMode.horizontal)},function(){var gs=Ur.verticalTextBox;return me.allowVerticalPlacement&&!(Ii&&Ii.box&&Ii.box.length)&&lr.numVerticalGlyphVertices>0&&gs?$o(gs,Ur.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null}}),Ii&&(vi=Ii.box,$i=Ii.offscreen);var wl=Oo(Ii&&Ii.box);if(!vi&&$.prevPlacement){var Ns=$.prevPlacement.variableOffsets[lr.crossTileID];Ns&&($.variableOffsets[lr.crossTileID]=Ns,$.markUsedJustification(me,Ns.anchor,lr,wl))}}else{var Wl=function(gs,Rl){var Fl=$.collisionIndex.placeCollisionBox(gs,Xt,rt,De,Rt.predicate);return Fl&&Fl.box&&Fl.box.length&&($.markUsedOrientation(me,Rl,lr),$.placedOrientations[lr.crossTileID]=Rl),Fl};No(function(){return Wl(fo,r.WritingMode.horizontal)},function(){var gs=Ur.verticalTextBox;return me.allowVerticalPlacement&&lr.numVerticalGlyphVertices>0&&gs?Wl(gs,r.WritingMode.vertical):{box:null,offscreen:null}}),Oo(Ii&&Ii.box&&Ii.box.length)}}if(vi=(ki=Ii)&&ki.box&&ki.box.length>0,$i=ki&&ki.offscreen,lr.useRuntimeCollisionCircles){var fc=me.text.placedSymbolArray.get(lr.centerJustifiedTextSymbolIndex),Ta=r.evaluateSizeForFeature(me.textSizeData,Nt,fc),uh=Ae.get("text-padding");ta=$.collisionIndex.placeCollisionCircles(Xt,fc,me.lineVertexArray,me.glyphOffsetArray,Ta,De,Le,Qe,U,bn,Rt.predicate,lr.collisionCircleDiameter,uh),vi=Xt||ta.circles.length>0&&!ta.collisionDetected,$i=$i&&ta.offscreen}if(Ur.iconFeatureIndex&&(Ca=Ur.iconFeatureIndex),Ur.iconBox){var ch=function(gs){var Rl=Cn&&da?qi(gs,da.x,da.y,en,bn,$.transform.angle):gs;return $.collisionIndex.placeCollisionBox(Rl,$t,rt,De,Rt.predicate)};Oi=sa&&sa.box&&sa.box.length&&Ur.verticalIconBox?(na=ch(Ur.verticalIconBox)).box.length>0:(na=ch(Ur.iconBox)).box.length>0,$i=$i&&na.offscreen}var Tl=Ft||0===lr.numHorizontalGlyphVertices&&0===lr.numVerticalGlyphVertices,Vf=It||0===lr.numIconVertices;if(Tl||Vf?Vf?Tl||(Oi=Oi&&vi):vi=Oi&&vi:Oi=vi=Oi&&vi,vi&&ki&&ki.box&&$.collisionIndex.insertCollisionBox(ki.box,Ae.get("text-ignore-placement"),me.bucketInstanceId,sa&&sa.box&&ha?ha:aa,Rt.ID),Oi&&na&&$.collisionIndex.insertCollisionBox(na.box,Ae.get("icon-ignore-placement"),me.bucketInstanceId,Ca,Rt.ID),ta&&(vi&&$.collisionIndex.insertCollisionCircles(ta.circles,Ae.get("text-ignore-placement"),me.bucketInstanceId,aa,Rt.ID),U)){var Lh=me.bucketInstanceId,zu=$.collisionCircleArrays[Lh];void 0===zu&&(zu=$.collisionCircleArrays[Lh]=new Dr);for(var Rh=0;Rh<ta.circles.length;Rh+=4)zu.circles.push(ta.circles[Rh+0]),zu.circles.push(ta.circles[Rh+1]),zu.circles.push(ta.circles[Rh+2]),zu.circles.push(ta.collisionDetected?1:0)}$.placements[lr.crossTileID]=new br(vi||Gn,Oi||pr,$i||me.justReloaded),j[lr.crossTileID]=!0}};if($n)for(var Er=me.getSortedSymbolIndexes(this.transform.angle),wr=Er.length-1;wr>=0;--wr){var fi=Er[wr];dr(me.symbolInstances.get(fi),me.collisionArrays[fi])}else for(var Mi=O.symbolInstanceStart;Mi<O.symbolInstanceEnd;Mi++)dr(me.symbolInstances.get(Mi),me.collisionArrays[Mi]);if(U&&me.bucketInstanceId in this.collisionCircleArrays){var Wi=this.collisionCircleArrays[me.bucketInstanceId];r.invert(Wi.invProjMatrix,De),Wi.viewportMatrix=this.collisionIndex.getViewportMatrix()}me.justReloaded=!1},Ct.prototype.markUsedJustification=function(O,j,U,$){var le;le=$===r.WritingMode.vertical?U.verticalPlacedTextSymbolIndex:{left:U.leftJustifiedTextSymbolIndex,center:U.centerJustifiedTextSymbolIndex,right:U.rightJustifiedTextSymbolIndex}[r.getAnchorJustification(j)];for(var Ae=0,De=[U.leftJustifiedTextSymbolIndex,U.centerJustifiedTextSymbolIndex,U.rightJustifiedTextSymbolIndex,U.verticalPlacedTextSymbolIndex];Ae<De.length;Ae+=1){var Le=De[Ae];Le>=0&&(O.text.placedSymbolArray.get(Le).crossTileID=le>=0&&Le!==le?0:U.crossTileID)}},Ct.prototype.markUsedOrientation=function(O,j,U){for(var $=j===r.WritingMode.horizontal||j===r.WritingMode.horizontalOnly?j:0,le=j===r.WritingMode.vertical?j:0,me=0,Ae=[U.leftJustifiedTextSymbolIndex,U.centerJustifiedTextSymbolIndex,U.rightJustifiedTextSymbolIndex];me<Ae.length;me+=1)O.text.placedSymbolArray.get(Ae[me]).placedOrientation=$;U.verticalPlacedTextSymbolIndex&&(O.text.placedSymbolArray.get(U.verticalPlacedTextSymbolIndex).placedOrientation=le)},Ct.prototype.commit=function(O){this.commitTime=O,this.zoomAtLastRecencyCheck=this.transform.zoom;var j=this.prevPlacement,U=!1;this.prevZoomAdjustment=j?j.zoomAdjustment(this.transform.zoom):0;var $=j?j.symbolFadeChange(O):1,le=j?j.opacities:{},me=j?j.variableOffsets:{},Ae=j?j.placedOrientations:{};for(var De in this.placements){var Le=this.placements[De],Qe=le[De];Qe?(this.opacities[De]=new zr(Qe,$,Le.text,Le.icon),U=U||Le.text!==Qe.text.placed||Le.icon!==Qe.icon.placed):(this.opacities[De]=new zr(null,$,Le.text,Le.icon,Le.skipFade),U=U||Le.text||Le.icon)}for(var rt in le){var dt=le[rt];if(!this.opacities[rt]){var Pt=new zr(dt,$,!1,!1);Pt.isHidden()||(this.opacities[rt]=Pt,U=U||dt.text.placed||dt.icon.placed)}}for(var Nt in me)this.variableOffsets[Nt]||!this.opacities[Nt]||this.opacities[Nt].isHidden()||(this.variableOffsets[Nt]=me[Nt]);for(var Rt in Ae)this.placedOrientations[Rt]||!this.opacities[Rt]||this.opacities[Rt].isHidden()||(this.placedOrientations[Rt]=Ae[Rt]);U?this.lastPlacementChangeTime=O:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=j?j.lastPlacementChangeTime:O)},Ct.prototype.updateLayerOpacities=function(O,j){for(var U={},$=0,le=j;$<le.length;$+=1){var me=le[$],Ae=me.getBucket(O);Ae&&me.latestFeatureIndex&&O.id===Ae.layerIds[0]&&this.updateBucketOpacities(Ae,U,me.collisionBoxArray)}},Ct.prototype.updateBucketOpacities=function(O,j,U){var $=this;O.hasTextData()&&O.text.opacityVertexArray.clear(),O.hasIconData()&&O.icon.opacityVertexArray.clear(),O.hasIconCollisionBoxData()&&O.iconCollisionBox.collisionVertexArray.clear(),O.hasTextCollisionBoxData()&&O.textCollisionBox.collisionVertexArray.clear();var le=O.layers[0].layout,me=new zr(null,0,!1,!1,!0),Ae=le.get("text-allow-overlap"),De=le.get("icon-allow-overlap"),Le=le.get("text-variable-anchor"),Qe="map"===le.get("text-rotation-alignment"),rt="map"===le.get("text-pitch-alignment"),dt="none"!==le.get("icon-text-fit"),Pt=new zr(null,0,Ae&&(De||!O.hasIconData()||le.get("icon-optional")),De&&(Ae||!O.hasTextData()||le.get("text-optional")),!0);!O.collisionArrays&&U&&(O.hasIconCollisionBoxData()||O.hasTextCollisionBoxData())&&O.deserializeCollisionBoxes(U);for(var Nt=function(Xt,$t,en){for(var bn=0;bn<$t/4;bn++)Xt.opacityVertexArray.emplaceBack(en)},Rt=function(Xt){var $t=O.symbolInstances.get(Xt),en=$t.numHorizontalGlyphVertices,bn=$t.numVerticalGlyphVertices,Cn=$t.crossTileID,Gn=$.opacities[Cn];j[Cn]?Gn=me:Gn||($.opacities[Cn]=Gn=Pt),j[Cn]=!0;var dr=$t.numIconVertices>0,Er=$.placedOrientations[$t.crossTileID],wr=Er===r.WritingMode.vertical,fi=Er===r.WritingMode.horizontal||Er===r.WritingMode.horizontalOnly;if(en>0||bn>0){var Mi=Nn(Gn.text);Nt(O.text,en,wr?Un:Mi),Nt(O.text,bn,fi?Un:Mi);var Ur=Gn.text.isHidden();[$t.rightJustifiedTextSymbolIndex,$t.centerJustifiedTextSymbolIndex,$t.leftJustifiedTextSymbolIndex].forEach(function(Ca){Ca>=0&&(O.text.placedSymbolArray.get(Ca).hidden=Ur||wr?1:0)}),$t.verticalPlacedTextSymbolIndex>=0&&(O.text.placedSymbolArray.get($t.verticalPlacedTextSymbolIndex).hidden=Ur||fi?1:0);var ki=$.variableOffsets[$t.crossTileID];ki&&$.markUsedJustification(O,ki.anchor,$t,Er);var vi=$.placedOrientations[$t.crossTileID];vi&&($.markUsedJustification(O,"left",$t,vi),$.markUsedOrientation(O,vi,$t))}if(dr){var Oi=Nn(Gn.icon),$i=!(dt&&$t.verticalPlacedIconSymbolIndex&&wr);$t.placedIconSymbolIndex>=0&&(Nt(O.icon,$t.numIconVertices,$i?Oi:Un),O.icon.placedSymbolArray.get($t.placedIconSymbolIndex).hidden=Gn.icon.isHidden()),$t.verticalPlacedIconSymbolIndex>=0&&(Nt(O.icon,$t.numVerticalIconVertices,$i?Un:Oi),O.icon.placedSymbolArray.get($t.verticalPlacedIconSymbolIndex).hidden=Gn.icon.isHidden())}if(O.hasIconCollisionBoxData()||O.hasTextCollisionBoxData()){var sa=O.collisionArrays[Xt];if(sa){var ta=new r.Point(0,0);if(sa.textBox||sa.verticalTextBox){var na=!0;if(Le){var aa=$.variableOffsets[Cn];aa?(ta=pi(aa.anchor,aa.width,aa.height,aa.textOffset,aa.textBoxScale),Qe&&ta._rotate(rt?$.transform.angle:-$.transform.angle)):na=!1}sa.textBox&&mn(O.textCollisionBox.collisionVertexArray,Gn.text.placed,!na||wr,ta.x,ta.y),sa.verticalTextBox&&mn(O.textCollisionBox.collisionVertexArray,Gn.text.placed,!na||fi,ta.x,ta.y)}var ha=Boolean(!fi&&sa.verticalIconBox);sa.iconBox&&mn(O.iconCollisionBox.collisionVertexArray,Gn.icon.placed,ha,dt?ta.x:0,dt?ta.y:0),sa.verticalIconBox&&mn(O.iconCollisionBox.collisionVertexArray,Gn.icon.placed,!ha,dt?ta.x:0,dt?ta.y:0)}}},Ft=0;Ft<O.symbolInstances.length;Ft++)Rt(Ft);if(O.sortFeatures(this.transform.angle),this.retainedQueryData[O.bucketInstanceId]&&(this.retainedQueryData[O.bucketInstanceId].featureSortOrder=O.featureSortOrder),O.hasTextData()&&O.text.opacityVertexBuffer&&O.text.opacityVertexBuffer.updateData(O.text.opacityVertexArray),O.hasIconData()&&O.icon.opacityVertexBuffer&&O.icon.opacityVertexBuffer.updateData(O.icon.opacityVertexArray),O.hasIconCollisionBoxData()&&O.iconCollisionBox.collisionVertexBuffer&&O.iconCollisionBox.collisionVertexBuffer.updateData(O.iconCollisionBox.collisionVertexArray),O.hasTextCollisionBoxData()&&O.textCollisionBox.collisionVertexBuffer&&O.textCollisionBox.collisionVertexBuffer.updateData(O.textCollisionBox.collisionVertexArray),O.bucketInstanceId in this.collisionCircleArrays){var It=this.collisionCircleArrays[O.bucketInstanceId];O.placementInvProjMatrix=It.invProjMatrix,O.placementViewportMatrix=It.viewportMatrix,O.collisionCircleArray=It.circles,delete this.collisionCircleArrays[O.bucketInstanceId]}},Ct.prototype.symbolFadeChange=function(O){return 0===this.fadeDuration?1:(O-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Ct.prototype.zoomAdjustment=function(O){return Math.max(0,(this.transform.zoom-O)/1.5)},Ct.prototype.hasTransitions=function(O){return this.stale||O-this.lastPlacementChangeTime<this.fadeDuration},Ct.prototype.stillRecent=function(O,j){var U=this.zoomAtLastRecencyCheck===j?1-this.zoomAdjustment(j):1;return this.zoomAtLastRecencyCheck=j,this.commitTime+this.fadeDuration*U>O},Ct.prototype.setStale=function(){this.stale=!0};var pn=Math.pow(2,25),Sn=Math.pow(2,24),Zn=Math.pow(2,17),fr=Math.pow(2,16),Hn=Math.pow(2,9),Dn=Math.pow(2,8),Jn=Math.pow(2,1);function Nn(O){if(0===O.opacity&&!O.placed)return 0;if(1===O.opacity&&O.placed)return 4294967295;var j=O.placed?1:0,U=Math.floor(127*O.opacity);return U*pn+j*Sn+U*Zn+j*fr+U*Hn+j*Dn+U*Jn+j}var Un=0,sr=function(O){this._sortAcrossTiles="viewport-y"!==O.layout.get("symbol-z-order")&&void 0!==O.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};sr.prototype.continuePlacement=function(O,j,U,$,le){for(var me=this._bucketParts;this._currentTileIndex<O.length;)if(j.getBucketParts(me,$,O[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,le())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,me.sort(function(Le,Qe){return Le.sortKey-Qe.sortKey}));this._currentPartIndex<me.length;)if(j.placeLayerBucketPart(me[this._currentPartIndex],this._seenCrossTileIDs,U),this._currentPartIndex++,le())return!0;return!1};var Wr=function(O,j,U,$,le,me,Ae){this.placement=new Ct(O,le,me,Ae),this._currentPlacementIndex=j.length-1,this._forceFullPlacement=U,this._showCollisionBoxes=$,this._done=!1};Wr.prototype.isDone=function(){return this._done},Wr.prototype.continuePlacement=function(O,j,U){for(var $=this,le=r.browser.now(),me=function(){var Le=r.browser.now()-le;return!$._forceFullPlacement&&Le>2};this._currentPlacementIndex>=0;){var Ae=j[O[this._currentPlacementIndex]],De=this.placement.collisionIndex.transform.zoom;if("symbol"===Ae.type&&(!Ae.minzoom||Ae.minzoom<=De)&&(!Ae.maxzoom||Ae.maxzoom>De)){if(this._inProgressLayer||(this._inProgressLayer=new sr(Ae)),this._inProgressLayer.continuePlacement(U[Ae.source],this.placement,this._showCollisionBoxes,Ae,me))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Wr.prototype.commit=function(O){return this.placement.commit(O),this.placement};var Vr=512/r.EXTENT/2,Zr=function(O,j,U){this.tileID=O,this.indexedSymbolInstances={},this.bucketInstanceId=U;for(var $=0;$<j.length;$++){var le=j.get($),me=le.key;this.indexedSymbolInstances[me]||(this.indexedSymbolInstances[me]=[]),this.indexedSymbolInstances[me].push({crossTileID:le.crossTileID,coord:this.getScaledCoordinates(le,O)})}};Zr.prototype.getScaledCoordinates=function(O,j){var $=Vr/Math.pow(2,j.canonical.z-this.tileID.canonical.z);return{x:Math.floor((j.canonical.x*r.EXTENT+O.anchorX)*$),y:Math.floor((j.canonical.y*r.EXTENT+O.anchorY)*$)}},Zr.prototype.findMatches=function(O,j,U){for(var $=this.tileID.canonical.z<j.canonical.z?1:Math.pow(2,this.tileID.canonical.z-j.canonical.z),le=0;le<O.length;le++){var me=O.get(le);if(!me.crossTileID){var Ae=this.indexedSymbolInstances[me.key];if(Ae)for(var De=this.getScaledCoordinates(me,j),Le=0,Qe=Ae;Le<Qe.length;Le+=1){var rt=Qe[Le];if(Math.abs(rt.coord.x-De.x)<=$&&Math.abs(rt.coord.y-De.y)<=$&&!U[rt.crossTileID]){U[rt.crossTileID]=!0,me.crossTileID=rt.crossTileID;break}}}}};var Or=function(){this.maxCrossTileID=0};Or.prototype.generate=function(){return++this.maxCrossTileID};var $r=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};$r.prototype.handleWrapJump=function(O){var j=Math.round((O-this.lng)/360);if(0!==j)for(var U in this.indexes){var $=this.indexes[U],le={};for(var me in $){var Ae=$[me];Ae.tileID=Ae.tileID.unwrapTo(Ae.tileID.wrap+j),le[Ae.tileID.key]=Ae}this.indexes[U]=le}this.lng=O},$r.prototype.addBucket=function(O,j,U){if(this.indexes[O.overscaledZ]&&this.indexes[O.overscaledZ][O.key]){if(this.indexes[O.overscaledZ][O.key].bucketInstanceId===j.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(O.overscaledZ,this.indexes[O.overscaledZ][O.key])}for(var $=0;$<j.symbolInstances.length;$++)j.symbolInstances.get($).crossTileID=0;this.usedCrossTileIDs[O.overscaledZ]||(this.usedCrossTileIDs[O.overscaledZ]={});var le=this.usedCrossTileIDs[O.overscaledZ];for(var me in this.indexes){var Ae=this.indexes[me];if(Number(me)>O.overscaledZ)for(var De in Ae){var Le=Ae[De];Le.tileID.isChildOf(O)&&Le.findMatches(j.symbolInstances,O,le)}else{var Qe=Ae[O.scaledTo(Number(me)).key];Qe&&Qe.findMatches(j.symbolInstances,O,le)}}for(var rt=0;rt<j.symbolInstances.length;rt++){var dt=j.symbolInstances.get(rt);dt.crossTileID||(dt.crossTileID=U.generate(),le[dt.crossTileID]=!0)}return void 0===this.indexes[O.overscaledZ]&&(this.indexes[O.overscaledZ]={}),this.indexes[O.overscaledZ][O.key]=new Zr(O,j.symbolInstances,j.bucketInstanceId),!0},$r.prototype.removeBucketCrossTileIDs=function(O,j){for(var U in j.indexedSymbolInstances)for(var $=0,le=j.indexedSymbolInstances[U];$<le.length;$+=1)delete this.usedCrossTileIDs[O][le[$].crossTileID]},$r.prototype.removeStaleBuckets=function(O){var j=!1;for(var U in this.indexes){var $=this.indexes[U];for(var le in $)O[$[le].bucketInstanceId]||(this.removeBucketCrossTileIDs(U,$[le]),delete $[le],j=!0)}return j};var Ji=function(){this.layerIndexes={},this.crossTileIDs=new Or,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ji.prototype.addLayer=function(O,j,U){var $=this.layerIndexes[O.id];void 0===$&&($=this.layerIndexes[O.id]=new $r);var le=!1,me={};$.handleWrapJump(U);for(var Ae=0,De=j;Ae<De.length;Ae+=1){var Le=De[Ae],Qe=Le.getBucket(O);Qe&&O.id===Qe.layerIds[0]&&(Qe.bucketInstanceId||(Qe.bucketInstanceId=++this.maxBucketInstanceId),$.addBucket(Le.tileID,Qe,this.crossTileIDs)&&(le=!0),me[Qe.bucketInstanceId]=!0)}return $.removeStaleBuckets(me)&&(le=!0),le},Ji.prototype.pruneUnusedLayers=function(O){var j={};for(var U in O.forEach(function($){j[$]=!0}),this.layerIndexes)j[U]||delete this.layerIndexes[U]};var Bi=function(O,j){return r.emitValidationErrors(O,j&&j.filter(function(U){return"source.canvas"!==U.identifier}))},ci=r.pick(rn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ai=r.pick(rn,["setCenter","setZoom","setBearing","setPitch"]),wi=function(){var O={},j=r.styleSpec.$version;for(var U in r.styleSpec.$root){var $=r.styleSpec.$root[U];if($.required){var le;null!=(le="version"===U?j:"array"===$.type?[]:{})&&(O[U]=le)}}return O}(),Ri=function(O){function j(U,$){var le=this;void 0===$&&($={}),O.call(this),this.map=U,this.dispatcher=new N(mt(),this),this.imageManager=new w,this.imageManager.setEventedParent(this),this.glyphManager=new A(U._requestManager,$.localIdeographFontFamily),this.lineAtlas=new S(256,512),this.crossTileSymbolIndex=new Ji,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());var me=this;this._rtlTextPluginCallback=j.registerForPluginStateChange(function(Ae){me.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Ae.pluginStatus,pluginURL:Ae.pluginURL},function(Le,Qe){if(r.triggerPluginCompletionEvent(Le),Qe&&Qe.every(function(dt){return dt}))for(var rt in me.sourceCaches)me.sourceCaches[rt].reload()})}),this.on("data",function(Ae){if("source"===Ae.dataType&&"metadata"===Ae.sourceDataType){var De=le.sourceCaches[Ae.sourceId];if(De){var Le=De.getSource();if(Le&&Le.vectorLayerIds)for(var Qe in le._layers){var rt=le._layers[Qe];rt.source===Le.id&&le._validateLayer(rt)}}}})}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.loadURL=function(U,$){var le=this;void 0===$&&($={}),this.fire(new r.Event("dataloading",{dataType:"style"}));var me="boolean"==typeof $.validate?$.validate:!r.isMapboxURL(U);U=this.map._requestManager.normalizeStyleURL(U,$.accessToken);var Ae=this.map._requestManager.transformRequest(U,r.ResourceType.Style);this._request=r.getJSON(Ae,function(De,Le){le._request=null,De?le.fire(new r.ErrorEvent(De)):Le&&le._load(Le,me)})},j.prototype.loadJSON=function(U,$){var le=this;void 0===$&&($={}),this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.browser.frame(function(){le._request=null,le._load(U,!1!==$.validate)})},j.prototype.loadEmpty=function(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(wi,!1)},j.prototype._load=function(U,$){if(!$||!Bi(this,r.validateStyle(U))){for(var le in this._loaded=!0,this.stylesheet=U,U.sources)this.addSource(le,U.sources[le],{validate:!1});U.sprite?this._loadSprite(U.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(U.glyphs);var me=Kt(this.stylesheet.layers);this._order=me.map(function(Qe){return Qe.id}),this._layers={},this._serializedLayers={};for(var Ae=0,De=me;Ae<De.length;Ae+=1){var Le=De[Ae];(Le=r.createStyleLayer(Le)).setEventedParent(this,{layer:{id:Le.id}}),this._layers[Le.id]=Le,this._serializedLayers[Le.id]=Le.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new R(this.stylesheet.light),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}},j.prototype._loadSprite=function(U){var $=this;this._spriteRequest=function(le,me,Ae){var De,Le,Qe,rt=r.browser.devicePixelRatio>1?"@2x":"",dt=r.getJSON(me.transformRequest(me.normalizeSpriteURL(le,rt,".json"),r.ResourceType.SpriteJSON),function(Rt,Ft){dt=null,Qe||(Qe=Rt,De=Ft,Nt())}),Pt=r.getImage(me.transformRequest(me.normalizeSpriteURL(le,rt,".png"),r.ResourceType.SpriteImage),function(Rt,Ft){Pt=null,Qe||(Qe=Rt,Le=Ft,Nt())});function Nt(){if(Qe)Ae(Qe);else if(De&&Le){var Rt=r.browser.getImageData(Le),Ft={};for(var It in De){var Xt=De[It],$t=Xt.width,en=Xt.height,bn=Xt.x,Cn=Xt.y,$n=Xt.sdf,Gn=Xt.pixelRatio,pr=Xt.stretchX,dr=Xt.stretchY,Er=Xt.content,wr=new r.RGBAImage({width:$t,height:en});r.RGBAImage.copy(Rt,wr,{x:bn,y:Cn},{x:0,y:0},{width:$t,height:en}),Ft[It]={data:wr,pixelRatio:Gn,sdf:$n,stretchX:pr,stretchY:dr,content:Er}}Ae(null,Ft)}}return{cancel:function(){dt&&(dt.cancel(),dt=null),Pt&&(Pt.cancel(),Pt=null)}}}(U,this.map._requestManager,function(le,me){if($._spriteRequest=null,le)$.fire(new r.ErrorEvent(le));else if(me)for(var Ae in me)$.imageManager.addImage(Ae,me[Ae]);$.imageManager.setLoaded(!0),$._availableImages=$.imageManager.listImages(),$.dispatcher.broadcast("setImages",$._availableImages),$.fire(new r.Event("data",{dataType:"style"}))})},j.prototype._validateLayer=function(U){var $=this.sourceCaches[U.source];if($){var le=U.sourceLayer;if(le){var me=$.getSource();("geojson"===me.type||me.vectorLayerIds&&-1===me.vectorLayerIds.indexOf(le))&&this.fire(new r.ErrorEvent(new Error('Source layer "'+le+'" does not exist on source "'+me.id+'" as specified by style layer "'+U.id+'"')))}}},j.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var U in this.sourceCaches)if(!this.sourceCaches[U].loaded())return!1;return!!this.imageManager.isLoaded()},j.prototype._serializeLayers=function(U){for(var $=[],le=0,me=U;le<me.length;le+=1){var De=this._layers[me[le]];"custom"!==De.type&&$.push(De.serialize())}return $},j.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var U in this.sourceCaches)if(this.sourceCaches[U].hasTransition())return!0;for(var $ in this._layers)if(this._layers[$].hasTransition())return!0;return!1},j.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},j.prototype.update=function(U){if(this._loaded){var $=this._changed;if(this._changed){var le=Object.keys(this._updatedLayers),me=Object.keys(this._removedLayers);for(var Ae in(le.length||me.length)&&this._updateWorkerLayers(le,me),this._updatedSources){var De=this._updatedSources[Ae];"reload"===De?this._reloadSource(Ae):"clear"===De&&this._clearSource(Ae)}for(var Le in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Le].updateTransitions(U);this.light.updateTransitions(U),this._resetUpdates()}for(var Qe in this.sourceCaches)this.sourceCaches[Qe].used=!1;for(var rt=0,dt=this._order;rt<dt.length;rt+=1){var Nt=this._layers[dt[rt]];Nt.recalculate(U,this._availableImages),!Nt.isHidden(U.zoom)&&Nt.source&&(this.sourceCaches[Nt.source].used=!0)}this.light.recalculate(U),this.z=U.zoom,$&&this.fire(new r.Event("data",{dataType:"style"}))}},j.prototype._updateTilesForChangedImages=function(){var U=Object.keys(this._changedImages);if(U.length){for(var $ in this.sourceCaches)this.sourceCaches[$].reloadTilesForDependencies(["icons","patterns"],U);this._changedImages={}}},j.prototype._updateWorkerLayers=function(U,$){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(U),removedIds:$})},j.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},j.prototype.setState=function(U){var $=this;if(this._checkLoaded(),Bi(this,r.validateStyle(U)))return!1;(U=r.clone$1(U)).layers=Kt(U.layers);var le=function(O,j){if(!O)return[{command:rn.setStyle,args:[j]}];var U=[];try{if(!r.deepEqual(O.version,j.version))return[{command:rn.setStyle,args:[j]}];r.deepEqual(O.center,j.center)||U.push({command:rn.setCenter,args:[j.center]}),r.deepEqual(O.zoom,j.zoom)||U.push({command:rn.setZoom,args:[j.zoom]}),r.deepEqual(O.bearing,j.bearing)||U.push({command:rn.setBearing,args:[j.bearing]}),r.deepEqual(O.pitch,j.pitch)||U.push({command:rn.setPitch,args:[j.pitch]}),r.deepEqual(O.sprite,j.sprite)||U.push({command:rn.setSprite,args:[j.sprite]}),r.deepEqual(O.glyphs,j.glyphs)||U.push({command:rn.setGlyphs,args:[j.glyphs]}),r.deepEqual(O.transition,j.transition)||U.push({command:rn.setTransition,args:[j.transition]}),r.deepEqual(O.light,j.light)||U.push({command:rn.setLight,args:[j.light]});var $={},le=[];!function(Ae,De,Le,Qe){var rt;for(rt in De=De||{},Ae=Ae||{})Ae.hasOwnProperty(rt)&&(De.hasOwnProperty(rt)||Ue(rt,Le,Qe));for(rt in De)De.hasOwnProperty(rt)&&(Ae.hasOwnProperty(rt)?r.deepEqual(Ae[rt],De[rt])||("geojson"===Ae[rt].type&&"geojson"===De[rt].type&&Ut(Ae,De,rt)?Le.push({command:rn.setGeoJSONSourceData,args:[rt,De[rt].data]}):wt(rt,De,Le,Qe)):Yt(rt,De,Le))}(O.sources,j.sources,le,$);var me=[];O.layers&&O.layers.forEach(function(Ae){$[Ae.source]?U.push({command:rn.removeLayer,args:[Ae.id]}):me.push(Ae)}),U=U.concat(le),function(Ae,De,Le){De=De||[];var Qe,rt,dt,Pt,Nt,Rt,Ft,It=(Ae=Ae||[]).map(tn),Xt=De.map(tn),$t=Ae.reduce(un,{}),en=De.reduce(un,{}),bn=It.slice(),Cn=Object.create(null);for(Qe=0,rt=0;Qe<It.length;Qe++)en.hasOwnProperty(dt=It[Qe])?rt++:(Le.push({command:rn.removeLayer,args:[dt]}),bn.splice(bn.indexOf(dt,rt),1));for(Qe=0,rt=0;Qe<Xt.length;Qe++)bn[bn.length-1-Qe]!==(dt=Xt[Xt.length-1-Qe])&&($t.hasOwnProperty(dt)?(Le.push({command:rn.removeLayer,args:[dt]}),bn.splice(bn.lastIndexOf(dt,bn.length-rt),1)):rt++,Le.push({command:rn.addLayer,args:[en[dt],Rt=bn[bn.length-Qe]]}),bn.splice(bn.length-Qe,0,dt),Cn[dt]=!0);for(Qe=0;Qe<Xt.length;Qe++)if(Pt=$t[dt=Xt[Qe]],Nt=en[dt],!Cn[dt]&&!r.deepEqual(Pt,Nt))if(r.deepEqual(Pt.source,Nt.source)&&r.deepEqual(Pt["source-layer"],Nt["source-layer"])&&r.deepEqual(Pt.type,Nt.type)){for(Ft in Zt(Pt.layout,Nt.layout,Le,dt,null,rn.setLayoutProperty),Zt(Pt.paint,Nt.paint,Le,dt,null,rn.setPaintProperty),r.deepEqual(Pt.filter,Nt.filter)||Le.push({command:rn.setFilter,args:[dt,Nt.filter]}),r.deepEqual(Pt.minzoom,Nt.minzoom)&&r.deepEqual(Pt.maxzoom,Nt.maxzoom)||Le.push({command:rn.setLayerZoomRange,args:[dt,Nt.minzoom,Nt.maxzoom]}),Pt)Pt.hasOwnProperty(Ft)&&"layout"!==Ft&&"paint"!==Ft&&"filter"!==Ft&&"metadata"!==Ft&&"minzoom"!==Ft&&"maxzoom"!==Ft&&(0===Ft.indexOf("paint.")?Zt(Pt[Ft],Nt[Ft],Le,dt,Ft.slice(6),rn.setPaintProperty):r.deepEqual(Pt[Ft],Nt[Ft])||Le.push({command:rn.setLayerProperty,args:[dt,Ft,Nt[Ft]]}));for(Ft in Nt)Nt.hasOwnProperty(Ft)&&!Pt.hasOwnProperty(Ft)&&"layout"!==Ft&&"paint"!==Ft&&"filter"!==Ft&&"metadata"!==Ft&&"minzoom"!==Ft&&"maxzoom"!==Ft&&(0===Ft.indexOf("paint.")?Zt(Pt[Ft],Nt[Ft],Le,dt,Ft.slice(6),rn.setPaintProperty):r.deepEqual(Pt[Ft],Nt[Ft])||Le.push({command:rn.setLayerProperty,args:[dt,Ft,Nt[Ft]]}))}else Le.push({command:rn.removeLayer,args:[dt]}),Rt=bn[bn.lastIndexOf(dt)+1],Le.push({command:rn.addLayer,args:[Nt,Rt]})}(me,j.layers,U)}catch(Ae){console.warn("Unable to compute style diff:",Ae),U=[{command:rn.setStyle,args:[j]}]}return U}(this.serialize(),U).filter(function(Ae){return!(Ae.command in Ai)});if(0===le.length)return!1;var me=le.filter(function(Ae){return!(Ae.command in ci)});if(me.length>0)throw new Error("Unimplemented: "+me.map(function(Ae){return Ae.command}).join(", ")+".");return le.forEach(function(Ae){"setTransition"!==Ae.command&&$[Ae.command].apply($,Ae.args)}),this.stylesheet=U,!0},j.prototype.addImage=function(U,$){if(this.getImage(U))return this.fire(new r.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(U,$),this._availableImages=this.imageManager.listImages(),this._changedImages[U]=!0,this._changed=!0,this.fire(new r.Event("data",{dataType:"style"}))},j.prototype.updateImage=function(U,$){this.imageManager.updateImage(U,$)},j.prototype.getImage=function(U){return this.imageManager.getImage(U)},j.prototype.removeImage=function(U){if(!this.getImage(U))return this.fire(new r.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(U),this._availableImages=this.imageManager.listImages(),this._changedImages[U]=!0,this._changed=!0,this.fire(new r.Event("data",{dataType:"style"}))},j.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},j.prototype.addSource=function(U,$,le){var me=this;if(void 0===le&&(le={}),this._checkLoaded(),void 0!==this.sourceCaches[U])throw new Error("There is already a source with this ID");if(!$.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys($).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf($.type)>=0&&this._validate(r.validateStyle.source,"sources."+U,$,null,le))){this.map&&this.map._collectResourceTiming&&($.collectResourceTiming=!0);var Ae=this.sourceCaches[U]=new Ke(U,$,this.dispatcher);Ae.style=this,Ae.setEventedParent(this,function(){return{isSourceLoaded:me.loaded(),source:Ae.serialize(),sourceId:U}}),Ae.onAdd(this.map),this._changed=!0}},j.prototype.removeSource=function(U){if(this._checkLoaded(),void 0===this.sourceCaches[U])throw new Error("There is no source with this ID");for(var $ in this._layers)if(this._layers[$].source===U)return this.fire(new r.ErrorEvent(new Error('Source "'+U+'" cannot be removed while layer "'+$+'" is using it.')));var le=this.sourceCaches[U];delete this.sourceCaches[U],delete this._updatedSources[U],le.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:U})),le.setEventedParent(null),le.clearTiles(),le.onRemove&&le.onRemove(this.map),this._changed=!0},j.prototype.setGeoJSONSourceData=function(U,$){this._checkLoaded(),this.sourceCaches[U].getSource().setData($),this._changed=!0},j.prototype.getSource=function(U){return this.sourceCaches[U]&&this.sourceCaches[U].getSource()},j.prototype.addLayer=function(U,$,le){void 0===le&&(le={}),this._checkLoaded();var me=U.id;if(this.getLayer(me))this.fire(new r.ErrorEvent(new Error('Layer with id "'+me+'" already exists on this map')));else{var Ae;if("custom"===U.type){if(Bi(this,r.validateCustomStyleLayer(U)))return;Ae=r.createStyleLayer(U)}else{if("object"==typeof U.source&&(this.addSource(me,U.source),U=r.clone$1(U),U=r.extend(U,{source:me})),this._validate(r.validateStyle.layer,"layers."+me,U,{arrayIndex:-1},le))return;Ae=r.createStyleLayer(U),this._validateLayer(Ae),Ae.setEventedParent(this,{layer:{id:me}}),this._serializedLayers[Ae.id]=Ae.serialize()}var De=$?this._order.indexOf($):this._order.length;if($&&-1===De)this.fire(new r.ErrorEvent(new Error('Layer with id "'+$+'" does not exist on this map.')));else{if(this._order.splice(De,0,me),this._layerOrderChanged=!0,this._layers[me]=Ae,this._removedLayers[me]&&Ae.source&&"custom"!==Ae.type){var Le=this._removedLayers[me];delete this._removedLayers[me],Le.type!==Ae.type?this._updatedSources[Ae.source]="clear":(this._updatedSources[Ae.source]="reload",this.sourceCaches[Ae.source].pause())}this._updateLayer(Ae),Ae.onAdd&&Ae.onAdd(this.map)}}},j.prototype.moveLayer=function(U,$){if(this._checkLoaded(),this._changed=!0,this._layers[U]){if(U!==$){var le=this._order.indexOf(U);this._order.splice(le,1);var me=$?this._order.indexOf($):this._order.length;$&&-1===me?this.fire(new r.ErrorEvent(new Error('Layer with id "'+$+'" does not exist on this map.'))):(this._order.splice(me,0,U),this._layerOrderChanged=!0)}}else this.fire(new r.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be moved.")))},j.prototype.removeLayer=function(U){this._checkLoaded();var $=this._layers[U];if($){$.setEventedParent(null);var le=this._order.indexOf(U);this._order.splice(le,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[U]=$,delete this._layers[U],delete this._serializedLayers[U],delete this._updatedLayers[U],delete this._updatedPaintProps[U],$.onRemove&&$.onRemove(this.map)}else this.fire(new r.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be removed.")))},j.prototype.getLayer=function(U){return this._layers[U]},j.prototype.hasLayer=function(U){return U in this._layers},j.prototype.setLayerZoomRange=function(U,$,le){this._checkLoaded();var me=this.getLayer(U);me?me.minzoom===$&&me.maxzoom===le||(null!=$&&(me.minzoom=$),null!=le&&(me.maxzoom=le),this._updateLayer(me)):this.fire(new r.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot have zoom extent.")))},j.prototype.setFilter=function(U,$,le){void 0===le&&(le={}),this._checkLoaded();var me=this.getLayer(U);if(me){if(!r.deepEqual(me.filter,$))return null==$?(me.filter=void 0,void this._updateLayer(me)):void(this._validate(r.validateStyle.filter,"layers."+me.id+".filter",$,null,le)||(me.filter=r.clone$1($),this._updateLayer(me)))}else this.fire(new r.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be filtered.")))},j.prototype.getFilter=function(U){return r.clone$1(this.getLayer(U).filter)},j.prototype.setLayoutProperty=function(U,$,le,me){void 0===me&&(me={}),this._checkLoaded();var Ae=this.getLayer(U);Ae?r.deepEqual(Ae.getLayoutProperty($),le)||(Ae.setLayoutProperty($,le,me),this._updateLayer(Ae)):this.fire(new r.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be styled.")))},j.prototype.getLayoutProperty=function(U,$){var le=this.getLayer(U);if(le)return le.getLayoutProperty($);this.fire(new r.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style.")))},j.prototype.setPaintProperty=function(U,$,le,me){void 0===me&&(me={}),this._checkLoaded();var Ae=this.getLayer(U);Ae?r.deepEqual(Ae.getPaintProperty($),le)||(Ae.setPaintProperty($,le,me)&&this._updateLayer(Ae),this._changed=!0,this._updatedPaintProps[U]=!0):this.fire(new r.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be styled.")))},j.prototype.getPaintProperty=function(U,$){return this.getLayer(U).getPaintProperty($)},j.prototype.setFeatureState=function(U,$){this._checkLoaded();var le=U.source,me=U.sourceLayer,Ae=this.sourceCaches[le];if(void 0!==Ae){var De=Ae.getSource().type;"geojson"===De&&me?this.fire(new r.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==De||me?(void 0===U.id&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),Ae.setFeatureState(me,U.id,$)):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+le+"' does not exist in the map's style.")))},j.prototype.removeFeatureState=function(U,$){this._checkLoaded();var le=U.source,me=this.sourceCaches[le];if(void 0!==me){var Ae=me.getSource().type,De="vector"===Ae?U.sourceLayer:void 0;"vector"!==Ae||De?$&&"string"!=typeof U.id&&"number"!=typeof U.id?this.fire(new r.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):me.removeFeatureState(De,U.id,$):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+le+"' does not exist in the map's style.")))},j.prototype.getFeatureState=function(U){this._checkLoaded();var $=U.source,le=U.sourceLayer,me=this.sourceCaches[$];if(void 0!==me){if("vector"!==me.getSource().type||le)return void 0===U.id&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),me.getFeatureState(le,U.id);this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+$+"' does not exist in the map's style.")))},j.prototype.getTransition=function(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},j.prototype.serialize=function(){return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:r.mapObject(this.sourceCaches,function(U){return U.serialize()}),layers:this._serializeLayers(this._order)},function(U){return void 0!==U})},j.prototype._updateLayer=function(U){this._updatedLayers[U.id]=!0,U.source&&!this._updatedSources[U.source]&&"raster"!==this.sourceCaches[U.source].getSource().type&&(this._updatedSources[U.source]="reload",this.sourceCaches[U.source].pause()),this._changed=!0},j.prototype._flattenAndSortRenderedFeatures=function(U){for(var $=this,le=function(Er){return"fill-extrusion"===$._layers[Er].type},me={},Ae=[],De=this._order.length-1;De>=0;De--){var Le=this._order[De];if(le(Le)){me[Le]=De;for(var Qe=0,rt=U;Qe<rt.length;Qe+=1){var dt=rt[Qe][Le];if(dt)for(var Pt=0,Nt=dt;Pt<Nt.length;Pt+=1)Ae.push(Nt[Pt])}}}Ae.sort(function(Er,wr){return wr.intersectionZ-Er.intersectionZ});for(var Ft=[],It=this._order.length-1;It>=0;It--){var Xt=this._order[It];if(le(Xt))for(var $t=Ae.length-1;$t>=0;$t--){var en=Ae[$t].feature;if(me[en.layer.id]<It)break;Ft.push(en),Ae.pop()}else for(var bn=0,Cn=U;bn<Cn.length;bn+=1){var $n=Cn[bn][Xt];if($n)for(var Gn=0,pr=$n;Gn<pr.length;Gn+=1)Ft.push(pr[Gn].feature)}}return Ft},j.prototype.queryRenderedFeatures=function(U,$,le){$&&$.filter&&this._validate(r.validateStyle.filter,"queryRenderedFeatures.filter",$.filter,null,$);var me={};if($&&$.layers){if(!Array.isArray($.layers))return this.fire(new r.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Ae=0,De=$.layers;Ae<De.length;Ae+=1){var Le=De[Ae],Qe=this._layers[Le];if(!Qe)return this.fire(new r.ErrorEvent(new Error("The layer '"+Le+"' does not exist in the map's style and cannot be queried for features."))),[];me[Qe.source]=!0}}var rt=[];for(var dt in $.availableImages=this._availableImages,this.sourceCaches)$.layers&&!me[dt]||rt.push(Z(this.sourceCaches[dt],this._layers,this._serializedLayers,U,$,le));return this.placement&&rt.push(function(Pt,Nt,Rt,Ft,It,Xt,$t){for(var en={},bn=Xt.queryRenderedSymbols(Ft),Cn=[],$n=0,Gn=Object.keys(bn).map(Number);$n<Gn.length;$n+=1)Cn.push($t[Gn[$n]]);Cn.sort(oe);for(var dr=function(){var Wi=wr[Er],lr=Wi.featureIndex.lookupSymbolFeatures(bn[Wi.bucketInstanceId],Nt,Wi.bucketIndex,Wi.sourceLayerIndex,It.filter,It.layers,It.availableImages,Pt);for(var Ur in lr){var ki=en[Ur]=en[Ur]||[],vi=lr[Ur];vi.sort(function(Ii,sa){var ta=Wi.featureSortOrder;if(ta){var na=ta.indexOf(Ii.featureIndex);return ta.indexOf(sa.featureIndex)-na}return sa.featureIndex-Ii.featureIndex});for(var Oi=0,$i=vi;Oi<$i.length;Oi+=1)ki.push($i[Oi])}},Er=0,wr=Cn;Er<wr.length;Er+=1)dr();var fi=function(Wi){en[Wi].forEach(function(lr){var Ur=lr.feature,vi=Rt[Pt[Wi].source].getFeatureState(Ur.layer["source-layer"],Ur.id);Ur.source=Ur.layer.source,Ur.layer["source-layer"]&&(Ur.sourceLayer=Ur.layer["source-layer"]),Ur.state=vi})};for(var Mi in en)fi(Mi);return en}(this._layers,this._serializedLayers,this.sourceCaches,U,$,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(rt)},j.prototype.querySourceFeatures=function(U,$){$&&$.filter&&this._validate(r.validateStyle.filter,"querySourceFeatures.filter",$.filter,null,$);var le=this.sourceCaches[U];return le?function(me,Ae){for(var De=me.getRenderableIds().map(function(Nt){return me.getTileByID(Nt)}),Le=[],Qe={},rt=0;rt<De.length;rt++){var dt=De[rt],Pt=dt.tileID.canonical.key;Qe[Pt]||(Qe[Pt]=!0,dt.querySourceFeatures(Le,Ae))}return Le}(le,$):[]},j.prototype.addSourceType=function(U,$,le){return j.getSourceType(U)?le(new Error('A source type called "'+U+'" already exists.')):(j.setSourceType(U,$),$.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:U,url:$.workerSourceURL},le):le(null,null))},j.prototype.getLight=function(){return this.light.getLight()},j.prototype.setLight=function(U,$){void 0===$&&($={}),this._checkLoaded();var le=this.light.getLight(),me=!1;for(var Ae in U)if(!r.deepEqual(U[Ae],le[Ae])){me=!0;break}if(me){var De={now:r.browser.now(),transition:r.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(U,$),this.light.updateTransitions(De)}},j.prototype._validate=function(U,$,le,me,Ae){return void 0===Ae&&(Ae={}),(!Ae||!1!==Ae.validate)&&Bi(this,U.call(r.validateStyle,r.extend({key:$,style:this.serialize(),value:le,styleSpec:r.styleSpec},me)))},j.prototype._remove=function(){for(var U in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[U].setEventedParent(null);for(var $ in this.sourceCaches)this.sourceCaches[$].clearTiles(),this.sourceCaches[$].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},j.prototype._clearSource=function(U){this.sourceCaches[U].clearTiles()},j.prototype._reloadSource=function(U){this.sourceCaches[U].resume(),this.sourceCaches[U].reload()},j.prototype._updateSources=function(U){for(var $ in this.sourceCaches)this.sourceCaches[$].update(U)},j.prototype._generateCollisionBoxes=function(){for(var U in this.sourceCaches)this._reloadSource(U)},j.prototype._updatePlacement=function(U,$,le,me,Ae){void 0===Ae&&(Ae=!1);for(var De=!1,Le=!1,Qe={},rt=0,dt=this._order;rt<dt.length;rt+=1){var Nt=this._layers[dt[rt]];if("symbol"===Nt.type){if(!Qe[Nt.source]){var Rt=this.sourceCaches[Nt.source];Qe[Nt.source]=Rt.getRenderableIds(!0).map(function(bn){return Rt.getTileByID(bn)}).sort(function(bn,Cn){return Cn.tileID.overscaledZ-bn.tileID.overscaledZ||(bn.tileID.isLessThan(Cn.tileID)?-1:1)})}var Ft=this.crossTileSymbolIndex.addLayer(Nt,Qe[Nt.source],U.center.lng);De=De||Ft}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Ae=Ae||this._layerOrderChanged||0===le)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.browser.now(),U.zoom))&&(this.pauseablePlacement=new Wr(U,this._order,Ae,$,le,me,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Qe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.browser.now()),Le=!0),De&&this.pauseablePlacement.placement.setStale()),Le||De)for(var It=0,Xt=this._order;It<Xt.length;It+=1){var en=this._layers[Xt[It]];"symbol"===en.type&&this.placement.updateLayerOpacities(en,Qe[en.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.browser.now())},j.prototype._releaseSymbolFadeTiles=function(){for(var U in this.sourceCaches)this.sourceCaches[U].releaseSymbolFadeTiles()},j.prototype.getImages=function(U,$,le){this.imageManager.getImages($.icons,le),this._updateTilesForChangedImages();var me=this.sourceCaches[$.source];me&&me.setDependencies($.tileID.key,$.type,$.icons)},j.prototype.getGlyphs=function(U,$,le){this.glyphManager.getGlyphs($.stacks,le)},j.prototype.getResource=function(U,$,le){return r.makeRequest($,le)},j}(r.Evented);Ri.getSourceType=function(O){return V[O]},Ri.setSourceType=function(O,j){V[O]=j},Ri.registerForPluginStateChange=r.registerForPluginStateChange;var Lr=r.createLayout([{name:"a_pos",type:"Int16",components:2}]),vr=xa("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Fi=xa("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ga=xa("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Do=xa("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Ha=xa("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Xa=xa("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),_a=xa("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ya=xa("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ti=xa("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),pa=xa("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Qa=xa("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),go=xa("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ts=xa("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Eo=xa("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Pa=xa("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),eo=xa("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Ss=xa("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Co=xa("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ra=xa("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Us=xa("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Is=xa("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),hs=xa("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),mo=xa("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),uo=xa("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),nu=xa("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),ru=xa("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function xa(O,j){var U=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,$={};return{fragmentSource:O=O.replace(U,function(le,me,Ae,De,Le){return $[Le]=!0,"define"===me?"\n#ifndef HAS_UNIFORM_u_"+Le+"\nvarying "+Ae+" "+De+" "+Le+";\n#else\nuniform "+Ae+" "+De+" u_"+Le+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Le+"\n    "+Ae+" "+De+" "+Le+" = u_"+Le+";\n#endif\n"}),vertexSource:j=j.replace(U,function(le,me,Ae,De,Le){var Qe="float"===De?"vec2":"vec4",rt=Le.match(/color/)?"color":Qe;return $[Le]?"define"===me?"\n#ifndef HAS_UNIFORM_u_"+Le+"\nuniform lowp float u_"+Le+"_t;\nattribute "+Ae+" "+Qe+" a_"+Le+";\nvarying "+Ae+" "+De+" "+Le+";\n#else\nuniform "+Ae+" "+De+" u_"+Le+";\n#endif\n":"vec4"===rt?"\n#ifndef HAS_UNIFORM_u_"+Le+"\n    "+Le+" = a_"+Le+";\n#else\n    "+Ae+" "+De+" "+Le+" = u_"+Le+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Le+"\n    "+Le+" = unpack_mix_"+rt+"(a_"+Le+", u_"+Le+"_t);\n#else\n    "+Ae+" "+De+" "+Le+" = u_"+Le+";\n#endif\n":"define"===me?"\n#ifndef HAS_UNIFORM_u_"+Le+"\nuniform lowp float u_"+Le+"_t;\nattribute "+Ae+" "+Qe+" a_"+Le+";\n#else\nuniform "+Ae+" "+De+" u_"+Le+";\n#endif\n":"vec4"===rt?"\n#ifndef HAS_UNIFORM_u_"+Le+"\n    "+Ae+" "+De+" "+Le+" = a_"+Le+";\n#else\n    "+Ae+" "+De+" "+Le+" = u_"+Le+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Le+"\n    "+Ae+" "+De+" "+Le+" = unpack_mix_"+rt+"(a_"+Le+", u_"+Le+"_t);\n#else\n    "+Ae+" "+De+" "+Le+" = u_"+Le+";\n#endif\n"})}}var ao=Object.freeze({__proto__:null,prelude:vr,background:Fi,backgroundPattern:ga,circle:Do,clippingMask:Ha,heatmap:Xa,heatmapTexture:_a,collisionBox:ya,collisionCircle:Ti,debug:pa,fill:Qa,fillOutline:go,fillOutlinePattern:ts,fillPattern:Eo,fillExtrusion:Pa,fillExtrusionPattern:eo,hillshadePrepare:Ss,hillshade:Co,line:ra,lineGradient:Us,linePattern:Is,lineSDF:hs,raster:mo,symbolIcon:uo,symbolSDF:nu,symbolTextAndIcon:ru}),gu=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};gu.prototype.bind=function(O,j,U,$,le,me,Ae,De){this.context=O;for(var Le=this.boundPaintVertexBuffers.length!==$.length,Qe=0;!Le&&Qe<$.length;Qe++)this.boundPaintVertexBuffers[Qe]!==$[Qe]&&(Le=!0);O.extVertexArrayObject&&this.vao&&this.boundProgram===j&&this.boundLayoutVertexBuffer===U&&!Le&&this.boundIndexBuffer===le&&this.boundVertexOffset===me&&this.boundDynamicVertexBuffer===Ae&&this.boundDynamicVertexBuffer2===De?(O.bindVertexArrayOES.set(this.vao),Ae&&Ae.bind(),le&&le.dynamicDraw&&le.bind(),De&&De.bind()):this.freshBind(j,U,$,le,me,Ae,De)},gu.prototype.freshBind=function(O,j,U,$,le,me,Ae){var De,Le=O.numAttributes,Qe=this.context,rt=Qe.gl;if(Qe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Qe.extVertexArrayObject.createVertexArrayOES(),Qe.bindVertexArrayOES.set(this.vao),De=0,this.boundProgram=O,this.boundLayoutVertexBuffer=j,this.boundPaintVertexBuffers=U,this.boundIndexBuffer=$,this.boundVertexOffset=le,this.boundDynamicVertexBuffer=me,this.boundDynamicVertexBuffer2=Ae;else{De=Qe.currentNumAttributes||0;for(var dt=Le;dt<De;dt++)rt.disableVertexAttribArray(dt)}j.enableAttributes(rt,O);for(var Pt=0,Nt=U;Pt<Nt.length;Pt+=1)Nt[Pt].enableAttributes(rt,O);me&&me.enableAttributes(rt,O),Ae&&Ae.enableAttributes(rt,O),j.bind(),j.setVertexAttribPointers(rt,O,le);for(var Rt=0,Ft=U;Rt<Ft.length;Rt+=1){var It=Ft[Rt];It.bind(),It.setVertexAttribPointers(rt,O,le)}me&&(me.bind(),me.setVertexAttribPointers(rt,O,le)),$&&$.bind(),Ae&&(Ae.bind(),Ae.setVertexAttribPointers(rt,O,le)),Qe.currentNumAttributes=Le},gu.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var xc=function(O,j,U,$,le){var me=O.gl;this.program=me.createProgram();var Ae=U?U.defines():[];le&&Ae.push("#define OVERDRAW_INSPECTOR;");var De=Ae.concat(vr.fragmentSource,j.fragmentSource).join("\n"),Le=Ae.concat(vr.vertexSource,j.vertexSource).join("\n"),Qe=me.createShader(me.FRAGMENT_SHADER);if(me.isContextLost())this.failedToCreate=!0;else{me.shaderSource(Qe,De),me.compileShader(Qe),me.attachShader(this.program,Qe);var rt=me.createShader(me.VERTEX_SHADER);if(me.isContextLost())this.failedToCreate=!0;else{me.shaderSource(rt,Le),me.compileShader(rt),me.attachShader(this.program,rt);for(var dt=U?U.layoutAttributes:[],Pt=0;Pt<dt.length;Pt++)me.bindAttribLocation(this.program,Pt,dt[Pt].name);me.linkProgram(this.program),me.deleteShader(rt),me.deleteShader(Qe),this.numAttributes=me.getProgramParameter(this.program,me.ACTIVE_ATTRIBUTES),this.attributes={};for(var Nt={},Rt=0;Rt<this.numAttributes;Rt++){var Ft=me.getActiveAttrib(this.program,Rt);Ft&&(this.attributes[Ft.name]=me.getAttribLocation(this.program,Ft.name))}for(var It=me.getProgramParameter(this.program,me.ACTIVE_UNIFORMS),Xt=0;Xt<It;Xt++){var $t=me.getActiveUniform(this.program,Xt);$t&&(Nt[$t.name]=me.getUniformLocation(this.program,$t.name))}this.fixedUniforms=$(O,Nt),this.binderUniforms=U?U.getUniforms(O,Nt):[]}}};function Lu(O,j,U){var $=1/Bn(U,1,j.transform.tileZoom),le=Math.pow(2,U.tileID.overscaledZ),me=U.tileSize*Math.pow(2,j.transform.tileZoom)/le,Ae=me*(U.tileID.canonical.x+U.tileID.wrap*le),De=me*U.tileID.canonical.y;return{u_image:0,u_texsize:U.imageAtlasTexture.size,u_scale:[$,O.fromScale,O.toScale],u_fade:O.t,u_pixel_coord_upper:[Ae>>16,De>>16],u_pixel_coord_lower:[65535&Ae,65535&De]}}xc.prototype.draw=function(O,j,U,$,le,me,Ae,De,Le,Qe,rt,dt,Pt,Nt,Rt,Ft){var It,Xt=O.gl;if(!this.failedToCreate){for(var $t in O.program.set(this.program),O.setDepthMode(U),O.setStencilMode($),O.setColorMode(le),O.setCullFace(me),this.fixedUniforms)this.fixedUniforms[$t].set(Ae[$t]);Nt&&Nt.setUniforms(O,this.binderUniforms,dt,{zoom:Pt});for(var en=(It={},It[Xt.LINES]=2,It[Xt.TRIANGLES]=3,It[Xt.LINE_STRIP]=1,It)[j],bn=0,Cn=rt.get();bn<Cn.length;bn+=1){var $n=Cn[bn],Gn=$n.vaos||($n.vaos={});(Gn[De]||(Gn[De]=new gu)).bind(O,this,Le,Nt?Nt.getPaintVertexBuffers():[],Qe,$n.vertexOffset,Rt,Ft),Xt.drawElements(j,$n.primitiveLength*en,Xt.UNSIGNED_SHORT,$n.primitiveOffset*en*2)}}};var Ru=function(O,j,U,$){var le=j.style.light,me=le.properties.get("position"),Ae=[me.x,me.y,me.z],De=r.create$1();"viewport"===le.properties.get("anchor")&&r.fromRotation(De,-j.transform.angle),r.transformMat3(Ae,Ae,De);var Le=le.properties.get("color");return{u_matrix:O,u_lightpos:Ae,u_lightintensity:le.properties.get("intensity"),u_lightcolor:[Le.r,Le.g,Le.b],u_vertical_gradient:+U,u_opacity:$}},mu=function(O,j,U,$,le,me,Ae){return r.extend(Ru(O,j,U,$),Lu(me,j,Ae),{u_height_factor:-Math.pow(2,le.overscaledZ)/Ae.tileSize/8})},sl=function(O){return{u_matrix:O}},Ps=function(O,j,U,$){return r.extend(sl(O),Lu(U,j,$))},Fo=function(O,j){return{u_matrix:O,u_world:j}},Gl=function(O,j,U,$,le){return r.extend(Ps(O,j,U,$),{u_world:le})},Ds=function(O,j,U,$){var le,me,Ae=O.transform;if("map"===$.paint.get("circle-pitch-alignment")){var De=Bn(U,1,Ae.zoom);le=!0,me=[De,De]}else le=!1,me=Ae.pixelsToGLUnits;return{u_camera_to_center_distance:Ae.cameraToCenterDistance,u_scale_with_map:+("map"===$.paint.get("circle-pitch-scale")),u_matrix:O.translatePosMatrix(j.posMatrix,U,$.paint.get("circle-translate"),$.paint.get("circle-translate-anchor")),u_pitch_with_map:+le,u_device_pixel_ratio:r.browser.devicePixelRatio,u_extrude_scale:me}},Os=function(O,j,U){var $=Bn(U,1,j.zoom),le=Math.pow(2,j.zoom-U.tileID.overscaledZ),me=U.tileID.overscaleFactor();return{u_matrix:O,u_camera_to_center_distance:j.cameraToCenterDistance,u_pixels_to_tile_units:$,u_extrude_scale:[j.pixelsToGLUnits[0]/($*le),j.pixelsToGLUnits[1]/($*le)],u_overscale_factor:me}},Zs=function(O,j,U){return{u_matrix:O,u_inv_matrix:j,u_camera_to_center_distance:U.cameraToCenterDistance,u_viewport_size:[U.width,U.height]}},iu=function(O,j,U){return void 0===U&&(U=1),{u_matrix:O,u_color:j,u_overlay:0,u_overlay_scale:U}},Ls=function(O){return{u_matrix:O}},Ts=function(O,j,U,$){return{u_matrix:O,u_extrude_scale:Bn(j,1,U),u_intensity:$}};function Zu(O,j){var U=Math.pow(2,j.canonical.z),$=j.canonical.y;return[new r.MercatorCoordinate(0,$/U).toLngLat().lat,new r.MercatorCoordinate(0,($+1)/U).toLngLat().lat]}var Ol=function(O,j,U){var $=O.transform;return{u_matrix:vt(O,j,U),u_ratio:1/Bn(j,1,$.zoom),u_device_pixel_ratio:r.browser.devicePixelRatio,u_units_to_pixels:[1/$.pixelsToGLUnits[0],1/$.pixelsToGLUnits[1]]}},Wa=function(O,j,U){return r.extend(Ol(O,j,U),{u_image:0})},Je=function(O,j,U,$){var le=O.transform,me=ut(j,le);return{u_matrix:vt(O,j,U),u_texsize:j.imageAtlasTexture.size,u_ratio:1/Bn(j,1,le.zoom),u_device_pixel_ratio:r.browser.devicePixelRatio,u_image:0,u_scale:[me,$.fromScale,$.toScale],u_fade:$.t,u_units_to_pixels:[1/le.pixelsToGLUnits[0],1/le.pixelsToGLUnits[1]]}},tt=function(O,j,U,$,le){var Ae=O.lineAtlas,De=ut(j,O.transform),Le="round"===U.layout.get("line-cap"),Qe=Ae.getDash($.from,Le),rt=Ae.getDash($.to,Le),dt=Qe.width*le.fromScale,Pt=rt.width*le.toScale;return r.extend(Ol(O,j,U),{u_patternscale_a:[De/dt,-Qe.height/2],u_patternscale_b:[De/Pt,-rt.height/2],u_sdfgamma:Ae.width/(256*Math.min(dt,Pt)*r.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Qe.y,u_tex_y_b:rt.y,u_mix:le.t})};function ut(O,j){return 1/Bn(O,1,j.tileZoom)}function vt(O,j,U){return O.translatePosMatrix(j.tileID.posMatrix,j,U.paint.get("line-translate"),U.paint.get("line-translate-anchor"))}var Et=function(O,j,U,$,le){return{u_matrix:O,u_tl_parent:j,u_scale_parent:U,u_buffer_scale:1,u_fade_t:$.mix,u_opacity:$.opacity*le.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:le.paint.get("raster-brightness-min"),u_brightness_high:le.paint.get("raster-brightness-max"),u_saturation_factor:(Ae=le.paint.get("raster-saturation"),Ae>0?1-1/(1.001-Ae):-Ae),u_contrast_factor:(me=le.paint.get("raster-contrast"),me>0?1/(1-me):1+me),u_spin_weights:kt(le.paint.get("raster-hue-rotate"))};var me,Ae};function kt(O){O*=Math.PI/180;var j=Math.sin(O),U=Math.cos(O);return[(2*U+1)/3,(-Math.sqrt(3)*j-U+1)/3,(Math.sqrt(3)*j-U+1)/3]}var zt,fn=function(O,j,U,$,le,me,Ae,De,Le,Qe){var rt=le.transform;return{u_is_size_zoom_constant:+("constant"===O||"source"===O),u_is_size_feature_constant:+("constant"===O||"camera"===O),u_size_t:j?j.uSizeT:0,u_size:j?j.uSize:0,u_camera_to_center_distance:rt.cameraToCenterDistance,u_pitch:rt.pitch/360*2*Math.PI,u_rotate_symbol:+U,u_aspect_ratio:rt.width/rt.height,u_fade_change:le.options.fadeDuration?le.symbolFadeChange:1,u_matrix:me,u_label_plane_matrix:Ae,u_coord_matrix:De,u_is_text:+Le,u_pitch_with_map:+$,u_texsize:Qe,u_texture:0}},dn=function(O,j,U,$,le,me,Ae,De,Le,Qe,rt){var dt=le.transform;return r.extend(fn(O,j,U,$,le,me,Ae,De,Le,Qe),{u_gamma_scale:$?Math.cos(dt._pitch)*dt.cameraToCenterDistance:1,u_device_pixel_ratio:r.browser.devicePixelRatio,u_is_halo:+rt})},cn=function(O,j,U,$,le,me,Ae,De,Le,Qe){return r.extend(dn(O,j,U,$,le,me,Ae,De,!0,Le,!0),{u_texsize_icon:Qe,u_texture_icon:1})},wn=function(O,j,U){return{u_matrix:O,u_opacity:j,u_color:U}},En=function(O,j,U,$,le,me){return r.extend((De=me,Qe=le,rt=(Le=U).imageManager.getPattern((Ae=$).from.toString()),dt=Le.imageManager.getPattern(Ae.to.toString()),Nt=(Pt=Le.imageManager.getPixelSize()).width,Rt=Pt.height,Ft=Math.pow(2,Qe.tileID.overscaledZ),Xt=(It=Qe.tileSize*Math.pow(2,Le.transform.tileZoom)/Ft)*(Qe.tileID.canonical.x+Qe.tileID.wrap*Ft),$t=It*Qe.tileID.canonical.y,{u_image:0,u_pattern_tl_a:rt.tl,u_pattern_br_a:rt.br,u_pattern_tl_b:dt.tl,u_pattern_br_b:dt.br,u_texsize:[Nt,Rt],u_mix:De.t,u_pattern_size_a:rt.displaySize,u_pattern_size_b:dt.displaySize,u_scale_a:De.fromScale,u_scale_b:De.toScale,u_tile_units_to_pixels:1/Bn(Qe,1,Le.transform.tileZoom),u_pixel_coord_upper:[Xt>>16,$t>>16],u_pixel_coord_lower:[65535&Xt,65535&$t]}),{u_matrix:O,u_opacity:j});var Ae,De,Le,Qe,rt,dt,Pt,Nt,Rt,Ft,It,Xt,$t},Fn={fillExtrusion:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_lightpos:new r.Uniform3f(O,j.u_lightpos),u_lightintensity:new r.Uniform1f(O,j.u_lightintensity),u_lightcolor:new r.Uniform3f(O,j.u_lightcolor),u_vertical_gradient:new r.Uniform1f(O,j.u_vertical_gradient),u_opacity:new r.Uniform1f(O,j.u_opacity)}},fillExtrusionPattern:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_lightpos:new r.Uniform3f(O,j.u_lightpos),u_lightintensity:new r.Uniform1f(O,j.u_lightintensity),u_lightcolor:new r.Uniform3f(O,j.u_lightcolor),u_vertical_gradient:new r.Uniform1f(O,j.u_vertical_gradient),u_height_factor:new r.Uniform1f(O,j.u_height_factor),u_image:new r.Uniform1i(O,j.u_image),u_texsize:new r.Uniform2f(O,j.u_texsize),u_pixel_coord_upper:new r.Uniform2f(O,j.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(O,j.u_pixel_coord_lower),u_scale:new r.Uniform3f(O,j.u_scale),u_fade:new r.Uniform1f(O,j.u_fade),u_opacity:new r.Uniform1f(O,j.u_opacity)}},fill:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix)}},fillPattern:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_image:new r.Uniform1i(O,j.u_image),u_texsize:new r.Uniform2f(O,j.u_texsize),u_pixel_coord_upper:new r.Uniform2f(O,j.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(O,j.u_pixel_coord_lower),u_scale:new r.Uniform3f(O,j.u_scale),u_fade:new r.Uniform1f(O,j.u_fade)}},fillOutline:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_world:new r.Uniform2f(O,j.u_world)}},fillOutlinePattern:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_world:new r.Uniform2f(O,j.u_world),u_image:new r.Uniform1i(O,j.u_image),u_texsize:new r.Uniform2f(O,j.u_texsize),u_pixel_coord_upper:new r.Uniform2f(O,j.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(O,j.u_pixel_coord_lower),u_scale:new r.Uniform3f(O,j.u_scale),u_fade:new r.Uniform1f(O,j.u_fade)}},circle:function(O,j){return{u_camera_to_center_distance:new r.Uniform1f(O,j.u_camera_to_center_distance),u_scale_with_map:new r.Uniform1i(O,j.u_scale_with_map),u_pitch_with_map:new r.Uniform1i(O,j.u_pitch_with_map),u_extrude_scale:new r.Uniform2f(O,j.u_extrude_scale),u_device_pixel_ratio:new r.Uniform1f(O,j.u_device_pixel_ratio),u_matrix:new r.UniformMatrix4f(O,j.u_matrix)}},collisionBox:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_camera_to_center_distance:new r.Uniform1f(O,j.u_camera_to_center_distance),u_pixels_to_tile_units:new r.Uniform1f(O,j.u_pixels_to_tile_units),u_extrude_scale:new r.Uniform2f(O,j.u_extrude_scale),u_overscale_factor:new r.Uniform1f(O,j.u_overscale_factor)}},collisionCircle:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_inv_matrix:new r.UniformMatrix4f(O,j.u_inv_matrix),u_camera_to_center_distance:new r.Uniform1f(O,j.u_camera_to_center_distance),u_viewport_size:new r.Uniform2f(O,j.u_viewport_size)}},debug:function(O,j){return{u_color:new r.UniformColor(O,j.u_color),u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_overlay:new r.Uniform1i(O,j.u_overlay),u_overlay_scale:new r.Uniform1f(O,j.u_overlay_scale)}},clippingMask:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix)}},heatmap:function(O,j){return{u_extrude_scale:new r.Uniform1f(O,j.u_extrude_scale),u_intensity:new r.Uniform1f(O,j.u_intensity),u_matrix:new r.UniformMatrix4f(O,j.u_matrix)}},heatmapTexture:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_world:new r.Uniform2f(O,j.u_world),u_image:new r.Uniform1i(O,j.u_image),u_color_ramp:new r.Uniform1i(O,j.u_color_ramp),u_opacity:new r.Uniform1f(O,j.u_opacity)}},hillshade:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_image:new r.Uniform1i(O,j.u_image),u_latrange:new r.Uniform2f(O,j.u_latrange),u_light:new r.Uniform2f(O,j.u_light),u_shadow:new r.UniformColor(O,j.u_shadow),u_highlight:new r.UniformColor(O,j.u_highlight),u_accent:new r.UniformColor(O,j.u_accent)}},hillshadePrepare:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_image:new r.Uniform1i(O,j.u_image),u_dimension:new r.Uniform2f(O,j.u_dimension),u_zoom:new r.Uniform1f(O,j.u_zoom),u_maxzoom:new r.Uniform1f(O,j.u_maxzoom),u_unpack:new r.Uniform4f(O,j.u_unpack)}},line:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_ratio:new r.Uniform1f(O,j.u_ratio),u_device_pixel_ratio:new r.Uniform1f(O,j.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(O,j.u_units_to_pixels)}},lineGradient:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_ratio:new r.Uniform1f(O,j.u_ratio),u_device_pixel_ratio:new r.Uniform1f(O,j.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(O,j.u_units_to_pixels),u_image:new r.Uniform1i(O,j.u_image)}},linePattern:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_texsize:new r.Uniform2f(O,j.u_texsize),u_ratio:new r.Uniform1f(O,j.u_ratio),u_device_pixel_ratio:new r.Uniform1f(O,j.u_device_pixel_ratio),u_image:new r.Uniform1i(O,j.u_image),u_units_to_pixels:new r.Uniform2f(O,j.u_units_to_pixels),u_scale:new r.Uniform3f(O,j.u_scale),u_fade:new r.Uniform1f(O,j.u_fade)}},lineSDF:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_ratio:new r.Uniform1f(O,j.u_ratio),u_device_pixel_ratio:new r.Uniform1f(O,j.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(O,j.u_units_to_pixels),u_patternscale_a:new r.Uniform2f(O,j.u_patternscale_a),u_patternscale_b:new r.Uniform2f(O,j.u_patternscale_b),u_sdfgamma:new r.Uniform1f(O,j.u_sdfgamma),u_image:new r.Uniform1i(O,j.u_image),u_tex_y_a:new r.Uniform1f(O,j.u_tex_y_a),u_tex_y_b:new r.Uniform1f(O,j.u_tex_y_b),u_mix:new r.Uniform1f(O,j.u_mix)}},raster:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_tl_parent:new r.Uniform2f(O,j.u_tl_parent),u_scale_parent:new r.Uniform1f(O,j.u_scale_parent),u_buffer_scale:new r.Uniform1f(O,j.u_buffer_scale),u_fade_t:new r.Uniform1f(O,j.u_fade_t),u_opacity:new r.Uniform1f(O,j.u_opacity),u_image0:new r.Uniform1i(O,j.u_image0),u_image1:new r.Uniform1i(O,j.u_image1),u_brightness_low:new r.Uniform1f(O,j.u_brightness_low),u_brightness_high:new r.Uniform1f(O,j.u_brightness_high),u_saturation_factor:new r.Uniform1f(O,j.u_saturation_factor),u_contrast_factor:new r.Uniform1f(O,j.u_contrast_factor),u_spin_weights:new r.Uniform3f(O,j.u_spin_weights)}},symbolIcon:function(O,j){return{u_is_size_zoom_constant:new r.Uniform1i(O,j.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(O,j.u_is_size_feature_constant),u_size_t:new r.Uniform1f(O,j.u_size_t),u_size:new r.Uniform1f(O,j.u_size),u_camera_to_center_distance:new r.Uniform1f(O,j.u_camera_to_center_distance),u_pitch:new r.Uniform1f(O,j.u_pitch),u_rotate_symbol:new r.Uniform1i(O,j.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(O,j.u_aspect_ratio),u_fade_change:new r.Uniform1f(O,j.u_fade_change),u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(O,j.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(O,j.u_coord_matrix),u_is_text:new r.Uniform1i(O,j.u_is_text),u_pitch_with_map:new r.Uniform1i(O,j.u_pitch_with_map),u_texsize:new r.Uniform2f(O,j.u_texsize),u_texture:new r.Uniform1i(O,j.u_texture)}},symbolSDF:function(O,j){return{u_is_size_zoom_constant:new r.Uniform1i(O,j.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(O,j.u_is_size_feature_constant),u_size_t:new r.Uniform1f(O,j.u_size_t),u_size:new r.Uniform1f(O,j.u_size),u_camera_to_center_distance:new r.Uniform1f(O,j.u_camera_to_center_distance),u_pitch:new r.Uniform1f(O,j.u_pitch),u_rotate_symbol:new r.Uniform1i(O,j.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(O,j.u_aspect_ratio),u_fade_change:new r.Uniform1f(O,j.u_fade_change),u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(O,j.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(O,j.u_coord_matrix),u_is_text:new r.Uniform1i(O,j.u_is_text),u_pitch_with_map:new r.Uniform1i(O,j.u_pitch_with_map),u_texsize:new r.Uniform2f(O,j.u_texsize),u_texture:new r.Uniform1i(O,j.u_texture),u_gamma_scale:new r.Uniform1f(O,j.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(O,j.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(O,j.u_is_halo)}},symbolTextAndIcon:function(O,j){return{u_is_size_zoom_constant:new r.Uniform1i(O,j.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(O,j.u_is_size_feature_constant),u_size_t:new r.Uniform1f(O,j.u_size_t),u_size:new r.Uniform1f(O,j.u_size),u_camera_to_center_distance:new r.Uniform1f(O,j.u_camera_to_center_distance),u_pitch:new r.Uniform1f(O,j.u_pitch),u_rotate_symbol:new r.Uniform1i(O,j.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(O,j.u_aspect_ratio),u_fade_change:new r.Uniform1f(O,j.u_fade_change),u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(O,j.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(O,j.u_coord_matrix),u_is_text:new r.Uniform1i(O,j.u_is_text),u_pitch_with_map:new r.Uniform1i(O,j.u_pitch_with_map),u_texsize:new r.Uniform2f(O,j.u_texsize),u_texsize_icon:new r.Uniform2f(O,j.u_texsize_icon),u_texture:new r.Uniform1i(O,j.u_texture),u_texture_icon:new r.Uniform1i(O,j.u_texture_icon),u_gamma_scale:new r.Uniform1f(O,j.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(O,j.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(O,j.u_is_halo)}},background:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_opacity:new r.Uniform1f(O,j.u_opacity),u_color:new r.UniformColor(O,j.u_color)}},backgroundPattern:function(O,j){return{u_matrix:new r.UniformMatrix4f(O,j.u_matrix),u_opacity:new r.Uniform1f(O,j.u_opacity),u_image:new r.Uniform1i(O,j.u_image),u_pattern_tl_a:new r.Uniform2f(O,j.u_pattern_tl_a),u_pattern_br_a:new r.Uniform2f(O,j.u_pattern_br_a),u_pattern_tl_b:new r.Uniform2f(O,j.u_pattern_tl_b),u_pattern_br_b:new r.Uniform2f(O,j.u_pattern_br_b),u_texsize:new r.Uniform2f(O,j.u_texsize),u_mix:new r.Uniform1f(O,j.u_mix),u_pattern_size_a:new r.Uniform2f(O,j.u_pattern_size_a),u_pattern_size_b:new r.Uniform2f(O,j.u_pattern_size_b),u_scale_a:new r.Uniform1f(O,j.u_scale_a),u_scale_b:new r.Uniform1f(O,j.u_scale_b),u_pixel_coord_upper:new r.Uniform2f(O,j.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(O,j.u_pixel_coord_lower),u_tile_units_to_pixels:new r.Uniform1f(O,j.u_tile_units_to_pixels)}}};function zn(O,j,U,$,le,me,Ae){for(var De=O.context,Le=De.gl,Qe=O.useProgram("collisionBox"),rt=[],dt=0,Pt=0,Nt=0;Nt<$.length;Nt++){var Rt=$[Nt],Ft=j.getTile(Rt),It=Ft.getBucket(U);if(It){var Xt=Rt.posMatrix;0===le[0]&&0===le[1]||(Xt=O.translatePosMatrix(Rt.posMatrix,Ft,le,me));var $t=Ae?It.textCollisionBox:It.iconCollisionBox,en=It.collisionCircleArray;if(en.length>0){var bn=r.create(),Cn=Xt;r.mul(bn,It.placementInvProjMatrix,O.transform.glCoordMatrix),r.mul(bn,bn,It.placementViewportMatrix),rt.push({circleArray:en,circleOffset:Pt,transform:Cn,invTransform:bn}),Pt=dt+=en.length/4}$t&&Qe.draw(De,Le.LINES,Ge.disabled,Pe.disabled,O.colorModeForRenderPass(),Ne.disabled,Os(Xt,O.transform,Ft),U.id,$t.layoutVertexBuffer,$t.indexBuffer,$t.segments,null,O.transform.zoom,null,null,$t.collisionVertexBuffer)}}if(Ae&&rt.length){var $n=O.useProgram("collisionCircle"),Gn=new r.StructArrayLayout2f1f2i16;Gn.resize(4*dt),Gn._trim();for(var pr=0,dr=0,Er=rt;dr<Er.length;dr+=1)for(var wr=Er[dr],fi=0;fi<wr.circleArray.length/4;fi++){var Mi=4*fi,Wi=wr.circleArray[Mi+0],lr=wr.circleArray[Mi+1],Ur=wr.circleArray[Mi+2],ki=wr.circleArray[Mi+3];Gn.emplace(pr++,Wi,lr,Ur,ki,0),Gn.emplace(pr++,Wi,lr,Ur,ki,1),Gn.emplace(pr++,Wi,lr,Ur,ki,2),Gn.emplace(pr++,Wi,lr,Ur,ki,3)}(!zt||zt.length<2*dt)&&(zt=function(ta){var na=2*ta,aa=new r.StructArrayLayout3ui6;aa.resize(na),aa._trim();for(var ha=0;ha<na;ha++){var Ca=6*ha;aa.uint16[Ca+0]=4*ha+0,aa.uint16[Ca+1]=4*ha+1,aa.uint16[Ca+2]=4*ha+2,aa.uint16[Ca+3]=4*ha+2,aa.uint16[Ca+4]=4*ha+3,aa.uint16[Ca+5]=4*ha+0}return aa}(dt));for(var vi=De.createIndexBuffer(zt,!0),Oi=De.createVertexBuffer(Gn,r.collisionCircleLayout.members,!0),$i=0,da=rt;$i<da.length;$i+=1){var Ii=da[$i],sa=Zs(Ii.transform,Ii.invTransform,O.transform);$n.draw(De,Le.TRIANGLES,Ge.disabled,Pe.disabled,O.colorModeForRenderPass(),Ne.disabled,sa,U.id,Oi,vi,r.SegmentVector.simpleSegment(0,2*Ii.circleOffset,Ii.circleArray.length,Ii.circleArray.length/2),null,O.transform.zoom,null,null,null)}Oi.destroy(),vi.destroy()}}var Qn=r.identity(new Float32Array(16));function _r(O,j,U,$,le,me){var Ae=r.getAnchorAlignment(O),De=-(Ae.horizontalAlign-.5)*j,Le=-(Ae.verticalAlign-.5)*U,Qe=r.evaluateVariableOffset(O,$);return new r.Point((De/le+Qe[0])*me,(Le/le+Qe[1])*me)}function Cr(O,j,U,$,le,me,Ae,De,Le,Qe,rt){var dt=O.text.placedSymbolArray,Pt=O.text.dynamicLayoutVertexArray,Nt=O.icon.dynamicLayoutVertexArray,Rt={};Pt.clear();for(var Ft=0;Ft<dt.length;Ft++){var It=dt.get(Ft),$t=It.hidden||!It.crossTileID||O.allowVerticalPlacement&&!It.placedOrientation?null:$[It.crossTileID];if($t){var en=new r.Point(It.anchorX,It.anchorY),bn=sn(en,U?De:Ae),Cn=In(me.cameraToCenterDistance,bn.signedDistanceFromCamera),$n=le.evaluateSizeForFeature(O.textSizeData,Qe,It)*Cn/r.ONE_EM;U&&($n*=O.tilePixelRatio/Le);for(var dr=_r($t.anchor,$t.width,$t.height,$t.textOffset,$t.textBoxScale,$n),Er=U?sn(en.add(dr),Ae).point:bn.point.add(j?dr.rotate(-me.angle):dr),wr=O.allowVerticalPlacement&&It.placedOrientation===r.WritingMode.vertical?Math.PI/2:0,fi=0;fi<It.numGlyphs;fi++)r.addDynamicAttributes(Pt,Er,wr);rt&&It.associatedIconIndex>=0&&(Rt[It.associatedIconIndex]={shiftedAnchor:Er,angle:wr})}else er(It.numGlyphs,Pt)}if(rt){Nt.clear();for(var Mi=O.icon.placedSymbolArray,Wi=0;Wi<Mi.length;Wi++){var lr=Mi.get(Wi);if(lr.hidden)er(lr.numGlyphs,Nt);else{var Ur=Rt[Wi];if(Ur)for(var ki=0;ki<lr.numGlyphs;ki++)r.addDynamicAttributes(Nt,Ur.shiftedAnchor,Ur.angle);else er(lr.numGlyphs,Nt)}}O.icon.dynamicLayoutVertexBuffer.updateData(Nt)}O.text.dynamicLayoutVertexBuffer.updateData(Pt)}function Qr(O,j,U){return U.iconsInText&&j?"symbolTextAndIcon":O?"symbolSDF":"symbolIcon"}function oi(O,j,U,$,le,me,Ae,De,Le,Qe,rt,dt){for(var Pt=O.context,Nt=Pt.gl,Rt=O.transform,Ft="map"===De,It="map"===Le,Xt=Ft&&"point"!==U.layout.get("symbol-placement"),$t=Ft&&!It&&!Xt,en=void 0!==U.layout.get("symbol-sort-key").constantOr(1),bn=O.depthModeForSublayer(0,Ge.ReadOnly),Cn=U.layout.get("text-variable-anchor"),$n=[],Gn=0,pr=$;Gn<pr.length;Gn+=1){var dr=pr[Gn],Er=j.getTile(dr),wr=Er.getBucket(U);if(wr){var fi=le?wr.text:wr.icon;if(fi&&fi.segments.get().length){var Mi=fi.programConfigurations.get(U.id),Wi=le||wr.sdfIcons,lr=le?wr.textSizeData:wr.iconSizeData,Ur=It||0!==Rt.pitch,ki=O.useProgram(Qr(Wi,le,wr),Mi),vi=r.evaluateSizeForZoom(lr,Rt.zoom),Oi=void 0,$i=[0,0],da=void 0,Ii=void 0,sa=null,ta=void 0;if(le)da=Er.glyphAtlasTexture,Ii=Nt.LINEAR,Oi=Er.glyphAtlasTexture.size,wr.iconsInText&&($i=Er.imageAtlasTexture.size,sa=Er.imageAtlasTexture,ta=Ur||O.options.rotating||O.options.zooming||"composite"===lr.kind||"camera"===lr.kind?Nt.LINEAR:Nt.NEAREST);else{var aa=1!==U.layout.get("icon-size").constantOr(0)||wr.iconsNeedLinear;da=Er.imageAtlasTexture,Ii=Wi||O.options.rotating||O.options.zooming||aa||Ur?Nt.LINEAR:Nt.NEAREST,Oi=Er.imageAtlasTexture.size}var ha=Bn(Er,1,O.transform.zoom),Ca=Mn(dr.posMatrix,It,Ft,O.transform,ha),fo=Pn(dr.posMatrix,It,Ft,O.transform,ha),Oo=Cn&&wr.hasTextData(),No="none"!==U.layout.get("icon-text-fit")&&Oo&&wr.hasIconData();Xt&&Ln(wr,dr.posMatrix,O,le,Ca,fo,It,Qe);var xo=O.translatePosMatrix(dr.posMatrix,Er,me,Ae),wo=Xt||le&&Cn||No?Qn:Ca,$o=O.translatePosMatrix(fo,Er,me,Ae,!0),wl=Wi&&0!==U.paint.get(le?"text-halo-width":"icon-halo-width").constantOr(1),Ns={program:ki,buffers:fi,uniformValues:Wi?wr.iconsInText?cn(lr.kind,vi,$t,It,O,xo,wo,$o,Oi,$i):dn(lr.kind,vi,$t,It,O,xo,wo,$o,le,Oi,!0):fn(lr.kind,vi,$t,It,O,xo,wo,$o,le,Oi),atlasTexture:da,atlasTextureIcon:sa,atlasInterpolation:Ii,atlasInterpolationIcon:ta,isSDF:Wi,hasHalo:wl};if(en)for(var Wl=0,fc=fi.segments.get();Wl<fc.length;Wl+=1){var Ta=fc[Wl];$n.push({segments:new r.SegmentVector([Ta]),sortKey:Ta.sortKey,state:Ns})}else $n.push({segments:fi.segments,sortKey:0,state:Ns})}}}en&&$n.sort(function(Lh,zu){return Lh.sortKey-zu.sortKey});for(var uh=0,yf=$n;uh<yf.length;uh+=1){var ch=yf[uh],Tl=ch.state;if(Pt.activeTexture.set(Nt.TEXTURE0),Tl.atlasTexture.bind(Tl.atlasInterpolation,Nt.CLAMP_TO_EDGE),Tl.atlasTextureIcon&&(Pt.activeTexture.set(Nt.TEXTURE1),Tl.atlasTextureIcon&&Tl.atlasTextureIcon.bind(Tl.atlasInterpolationIcon,Nt.CLAMP_TO_EDGE)),Tl.isSDF){var Vf=Tl.uniformValues;Tl.hasHalo&&(Vf.u_is_halo=1,yi(Tl.buffers,ch.segments,U,O,Tl.program,bn,rt,dt,Vf)),Vf.u_is_halo=0}yi(Tl.buffers,ch.segments,U,O,Tl.program,bn,rt,dt,Tl.uniformValues)}}function yi(O,j,U,$,le,me,Ae,De,Le){var Qe=$.context;le.draw(Qe,Qe.gl.TRIANGLES,me,Ae,De,Ne.disabled,Le,U.id,O.layoutVertexBuffer,O.indexBuffer,j,U.paint,$.transform.zoom,O.programConfigurations.get(U.id),O.dynamicLayoutVertexBuffer,O.opacityVertexBuffer)}function ei(O,j,U,$,le,me,Ae){var De,Le,Qe,rt,dt,Pt=O.context.gl,Nt=U.paint.get("fill-pattern"),Rt=Nt&&Nt.constantOr(1),Ft=U.getCrossfadeParameters();Ae?(Le=Rt&&!U.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",De=Pt.LINES):(Le=Rt?"fillPattern":"fill",De=Pt.TRIANGLES);for(var It=0,Xt=$;It<Xt.length;It+=1){var $t=Xt[It],en=j.getTile($t);if(!Rt||en.patternsLoaded()){var bn=en.getBucket(U);if(bn){var Cn=bn.programConfigurations.get(U.id),$n=O.useProgram(Le,Cn);Rt&&(O.context.activeTexture.set(Pt.TEXTURE0),en.imageAtlasTexture.bind(Pt.LINEAR,Pt.CLAMP_TO_EDGE),Cn.updatePaintBuffers(Ft));var Gn=Nt.constantOr(null);if(Gn&&en.imageAtlas){var pr=en.imageAtlas,dr=pr.patternPositions[Gn.to.toString()],Er=pr.patternPositions[Gn.from.toString()];dr&&Er&&Cn.setConstantPatternPositions(dr,Er)}var wr=O.translatePosMatrix($t.posMatrix,en,U.paint.get("fill-translate"),U.paint.get("fill-translate-anchor"));if(Ae){rt=bn.indexBuffer2,dt=bn.segments2;var fi=[Pt.drawingBufferWidth,Pt.drawingBufferHeight];Qe="fillOutlinePattern"===Le&&Rt?Gl(wr,O,Ft,en,fi):Fo(wr,fi)}else rt=bn.indexBuffer,dt=bn.segments,Qe=Rt?Ps(wr,O,Ft,en):sl(wr);$n.draw(O.context,De,le,O.stencilModeForClipping($t),me,Ne.disabled,Qe,U.id,bn.layoutVertexBuffer,rt,dt,U.paint,O.transform.zoom,Cn)}}}}function Qi(O,j,U,$,le,me,Ae){for(var De=O.context,Le=De.gl,Qe=U.paint.get("fill-extrusion-pattern"),rt=Qe.constantOr(1),dt=U.getCrossfadeParameters(),Pt=U.paint.get("fill-extrusion-opacity"),Nt=0,Rt=$;Nt<Rt.length;Nt+=1){var Ft=Rt[Nt],It=j.getTile(Ft),Xt=It.getBucket(U);if(Xt){var $t=Xt.programConfigurations.get(U.id),en=O.useProgram(rt?"fillExtrusionPattern":"fillExtrusion",$t);rt&&(O.context.activeTexture.set(Le.TEXTURE0),It.imageAtlasTexture.bind(Le.LINEAR,Le.CLAMP_TO_EDGE),$t.updatePaintBuffers(dt));var bn=Qe.constantOr(null);if(bn&&It.imageAtlas){var Cn=It.imageAtlas,$n=Cn.patternPositions[bn.to.toString()],Gn=Cn.patternPositions[bn.from.toString()];$n&&Gn&&$t.setConstantPatternPositions($n,Gn)}var pr=O.translatePosMatrix(Ft.posMatrix,It,U.paint.get("fill-extrusion-translate"),U.paint.get("fill-extrusion-translate-anchor")),dr=U.paint.get("fill-extrusion-vertical-gradient"),Er=rt?mu(pr,O,dr,Pt,Ft,dt,It):Ru(pr,O,dr,Pt);en.draw(De,De.gl.TRIANGLES,le,me,Ae,Ne.backCCW,Er,U.id,Xt.layoutVertexBuffer,Xt.indexBuffer,Xt.segments,U.paint,O.transform.zoom,$t)}}}function Ci(O,j,U,$,le,me){var Ae=O.context,De=Ae.gl,Le=j.fbo;if(Le){var Qe=O.useProgram("hillshade");Ae.activeTexture.set(De.TEXTURE0),De.bindTexture(De.TEXTURE_2D,Le.colorAttachment.get());var rt=function(dt,Pt,Nt){var Rt=Nt.paint.get("hillshade-shadow-color"),Ft=Nt.paint.get("hillshade-highlight-color"),It=Nt.paint.get("hillshade-accent-color"),Xt=Nt.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Nt.paint.get("hillshade-illumination-anchor")&&(Xt-=dt.transform.angle);var $t=!dt.options.moving;return{u_matrix:dt.transform.calculatePosMatrix(Pt.tileID.toUnwrapped(),$t),u_image:0,u_latrange:Zu(0,Pt.tileID),u_light:[Nt.paint.get("hillshade-exaggeration"),Xt],u_shadow:Rt,u_highlight:Ft,u_accent:It}}(O,j,U);Qe.draw(Ae,De.TRIANGLES,$,le,me,Ne.disabled,rt,U.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments)}}function La(O,j,U,$,le,me,Ae){var It,Xt,$t,en,bn,De=O.context,Le=De.gl,Qe=j.dem;if(Qe&&Qe.data){var rt=Qe.dim,dt=Qe.stride,Pt=Qe.getPixels();if(De.activeTexture.set(Le.TEXTURE1),De.pixelStoreUnpackPremultiplyAlpha.set(!1),j.demTexture=j.demTexture||O.getTileTexture(dt),j.demTexture){var Nt=j.demTexture;Nt.update(Pt,{premultiply:!1}),Nt.bind(Le.NEAREST,Le.CLAMP_TO_EDGE)}else j.demTexture=new r.Texture(De,Pt,Le.RGBA,{premultiply:!1}),j.demTexture.bind(Le.NEAREST,Le.CLAMP_TO_EDGE);De.activeTexture.set(Le.TEXTURE0);var Rt=j.fbo;if(!Rt){var Ft=new r.Texture(De,{width:rt,height:rt,data:null},Le.RGBA);Ft.bind(Le.LINEAR,Le.CLAMP_TO_EDGE),(Rt=j.fbo=De.createFramebuffer(rt,rt,!0)).colorAttachment.set(Ft.texture)}De.bindFramebuffer.set(Rt.framebuffer),De.viewport.set([0,0,rt,rt]),O.useProgram("hillshadePrepare").draw(De,Le.TRIANGLES,le,me,Ae,Ne.disabled,(It=j.tileID,$t=$,en=(Xt=Qe).stride,bn=r.create(),r.ortho(bn,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(bn,bn,[0,-r.EXTENT,0]),{u_matrix:bn,u_image:1,u_dimension:[en,en],u_zoom:It.overscaledZ,u_maxzoom:$t,u_unpack:Xt.getUnpackVector()}),U.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments),j.needsHillshadePrepare=!1}}function Ra(O,j,U,$,le){var me=$.paint.get("raster-fade-duration");if(me>0){var Ae=r.browser.now(),De=(Ae-O.timeAdded)/me,Le=j?(Ae-j.timeAdded)/me:-1,Qe=U.getSource(),rt=le.coveringZoomLevel({tileSize:Qe.tileSize,roundZoom:Qe.roundZoom}),dt=!j||Math.abs(j.tileID.overscaledZ-rt)>Math.abs(O.tileID.overscaledZ-rt),Pt=dt&&O.refreshedUponExpiration?1:r.clamp(dt?De:1-Le,0,1);return O.refreshedUponExpiration&&De>=1&&(O.refreshedUponExpiration=!1),j?{opacity:1,mix:1-Pt}:{opacity:Pt,mix:0}}return{opacity:1,mix:0}}var Ba=new r.Color(1,0,0,1),Go=new r.Color(0,1,0,1),jo=new r.Color(0,0,1,1),yo=new r.Color(1,0,1,1),oo=new r.Color(0,1,1,1);function co(O,j,U,$){Gs(O,0,j+U/2,O.transform.width,U,$)}function Hs(O,j,U,$){Gs(O,j-U/2,0,U,O.transform.height,$)}function Gs(O,j,U,$,le,me){var Ae=O.context,De=Ae.gl;De.enable(De.SCISSOR_TEST),De.scissor(j*r.browser.devicePixelRatio,U*r.browser.devicePixelRatio,$*r.browser.devicePixelRatio,le*r.browser.devicePixelRatio),Ae.clear({color:me}),De.disable(De.SCISSOR_TEST)}function Rs(O,j,U){var $=O.context,le=$.gl,me=U.posMatrix,Ae=O.useProgram("debug"),De=Ge.disabled,Le=Pe.disabled,Qe=O.colorModeForRenderPass();$.activeTexture.set(le.TEXTURE0),O.emptyTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE),Ae.draw($,le.LINE_STRIP,De,Le,Qe,Ne.disabled,iu(me,r.Color.red),"$debug",O.debugBuffer,O.tileBorderIndexBuffer,O.debugSegments);var rt=j.getTileByID(U.key).latestRawTileData,Pt=Math.floor((rt&&rt.byteLength||0)/1024),Nt=j.getTile(U).tileSize,Rt=512/Math.min(Nt,512)*(U.overscaledZ/O.transform.zoom)*.5,Ft=U.canonical.toString();U.overscaledZ!==U.canonical.z&&(Ft+=" => "+U.overscaledZ),function(It,Xt){It.initDebugOverlayCanvas();var $t=It.debugOverlayCanvas,en=It.context.gl,bn=It.debugOverlayCanvas.getContext("2d");bn.clearRect(0,0,$t.width,$t.height),bn.shadowColor="white",bn.shadowBlur=2,bn.lineWidth=1.5,bn.strokeStyle="white",bn.textBaseline="top",bn.font="bold 36px Open Sans, sans-serif",bn.fillText(Xt,5,5),bn.strokeText(Xt,5,5),It.debugOverlayTexture.update($t),It.debugOverlayTexture.bind(en.LINEAR,en.CLAMP_TO_EDGE)}(O,Ft+" "+Pt+"kb"),Ae.draw($,le.TRIANGLES,De,Le,Ee.alphaBlended,Ne.disabled,iu(me,r.Color.transparent,Rt),"$debug",O.debugBuffer,O.quadTriangleIndexBuffer,O.debugSegments)}var Xs={symbol:function(O,j,U,$,le){if("translucent"===O.renderPass){var me=Pe.disabled,Ae=O.colorModeForRenderPass();U.layout.get("text-variable-anchor")&&function(De,Le,Qe,rt,dt,Pt,Nt){for(var Rt=Le.transform,Ft="map"===dt,It="map"===Pt,Xt=0,$t=De;Xt<$t.length;Xt+=1){var en=$t[Xt],bn=rt.getTile(en),Cn=bn.getBucket(Qe);if(Cn&&Cn.text&&Cn.text.segments.get().length){var Gn=r.evaluateSizeForZoom(Cn.textSizeData,Rt.zoom),pr=Bn(bn,1,Le.transform.zoom),dr=Mn(en.posMatrix,It,Ft,Le.transform,pr),Er="none"!==Qe.layout.get("icon-text-fit")&&Cn.hasIconData();if(Gn){var wr=Math.pow(2,Rt.zoom-bn.tileID.overscaledZ);Cr(Cn,Ft,It,Nt,r.symbolSize,Rt,dr,en.posMatrix,wr,Gn,Er)}}}}($,O,U,j,U.layout.get("text-rotation-alignment"),U.layout.get("text-pitch-alignment"),le),0!==U.paint.get("icon-opacity").constantOr(1)&&oi(O,j,U,$,!1,U.paint.get("icon-translate"),U.paint.get("icon-translate-anchor"),U.layout.get("icon-rotation-alignment"),U.layout.get("icon-pitch-alignment"),U.layout.get("icon-keep-upright"),me,Ae),0!==U.paint.get("text-opacity").constantOr(1)&&oi(O,j,U,$,!0,U.paint.get("text-translate"),U.paint.get("text-translate-anchor"),U.layout.get("text-rotation-alignment"),U.layout.get("text-pitch-alignment"),U.layout.get("text-keep-upright"),me,Ae),j.map.showCollisionBoxes&&(zn(O,j,U,$,U.paint.get("text-translate"),U.paint.get("text-translate-anchor"),!0),zn(O,j,U,$,U.paint.get("icon-translate"),U.paint.get("icon-translate-anchor"),!1))}},circle:function(O,j,U,$){if("translucent"===O.renderPass){var le=U.paint.get("circle-opacity"),me=U.paint.get("circle-stroke-width"),Ae=U.paint.get("circle-stroke-opacity"),De=void 0!==U.layout.get("circle-sort-key").constantOr(1);if(0!==le.constantOr(1)||0!==me.constantOr(1)&&0!==Ae.constantOr(1)){for(var Le=O.context,Qe=Le.gl,rt=O.depthModeForSublayer(0,Ge.ReadOnly),dt=Pe.disabled,Pt=O.colorModeForRenderPass(),Nt=[],Rt=0;Rt<$.length;Rt++){var Ft=$[Rt],It=j.getTile(Ft),Xt=It.getBucket(U);if(Xt){var $t=Xt.programConfigurations.get(U.id),en={programConfiguration:$t,program:O.useProgram("circle",$t),layoutVertexBuffer:Xt.layoutVertexBuffer,indexBuffer:Xt.indexBuffer,uniformValues:Ds(O,Ft,It,U)};if(De)for(var bn=0,Cn=Xt.segments.get();bn<Cn.length;bn+=1){var $n=Cn[bn];Nt.push({segments:new r.SegmentVector([$n]),sortKey:$n.sortKey,state:en})}else Nt.push({segments:Xt.segments,sortKey:0,state:en})}}De&&Nt.sort(function(ki,vi){return ki.sortKey-vi.sortKey});for(var Gn=0,pr=Nt;Gn<pr.length;Gn+=1){var dr=pr[Gn],Er=dr.state;Er.program.draw(Le,Qe.TRIANGLES,rt,dt,Pt,Ne.disabled,Er.uniformValues,U.id,Er.layoutVertexBuffer,Er.indexBuffer,dr.segments,U.paint,O.transform.zoom,Er.programConfiguration)}}}},heatmap:function(O,j,U,$){if(0!==U.paint.get("heatmap-opacity"))if("offscreen"===O.renderPass){var le=O.context,me=le.gl,Ae=Pe.disabled,De=new Ee([me.ONE,me.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(Ft,It,Xt){var $t=Ft.gl;Ft.activeTexture.set($t.TEXTURE1),Ft.viewport.set([0,0,It.width/4,It.height/4]);var Cn,$n,Gn,pr,dr,en=Xt.heatmapFbo;if(en)$t.bindTexture($t.TEXTURE_2D,en.colorAttachment.get()),Ft.bindFramebuffer.set(en.framebuffer);else{var bn=$t.createTexture();$t.bindTexture($t.TEXTURE_2D,bn),$t.texParameteri($t.TEXTURE_2D,$t.TEXTURE_WRAP_S,$t.CLAMP_TO_EDGE),$t.texParameteri($t.TEXTURE_2D,$t.TEXTURE_WRAP_T,$t.CLAMP_TO_EDGE),$t.texParameteri($t.TEXTURE_2D,$t.TEXTURE_MIN_FILTER,$t.LINEAR),$t.texParameteri($t.TEXTURE_2D,$t.TEXTURE_MAG_FILTER,$t.LINEAR),Gn=bn,pr=en=Xt.heatmapFbo=Ft.createFramebuffer(It.width/4,It.height/4,!1),(dr=(Cn=Ft).gl).texImage2D(dr.TEXTURE_2D,0,dr.RGBA,($n=It).width/4,$n.height/4,0,dr.RGBA,Cn.extRenderToTextureHalfFloat?Cn.extTextureHalfFloat.HALF_FLOAT_OES:dr.UNSIGNED_BYTE,null),pr.colorAttachment.set(Gn)}})(le,O,U),le.clear({color:r.Color.transparent});for(var Le=0;Le<$.length;Le++){var Qe=$[Le];if(!j.hasRenderableParent(Qe)){var rt=j.getTile(Qe),dt=rt.getBucket(U);if(dt){var Pt=dt.programConfigurations.get(U.id);O.useProgram("heatmap",Pt).draw(le,me.TRIANGLES,Ge.disabled,Ae,De,Ne.disabled,Ts(Qe.posMatrix,rt,O.transform.zoom,U.paint.get("heatmap-intensity")),U.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,U.paint,O.transform.zoom,Pt)}}}le.viewport.set([0,0,O.width,O.height])}else"translucent"===O.renderPass&&(O.context.setColorMode(O.colorModeForRenderPass()),function(Ft,It){var Xt=Ft.context,$t=Xt.gl,en=It.heatmapFbo;if(en){Xt.activeTexture.set($t.TEXTURE0),$t.bindTexture($t.TEXTURE_2D,en.colorAttachment.get()),Xt.activeTexture.set($t.TEXTURE1);var bn=It.colorRampTexture;bn||(bn=It.colorRampTexture=new r.Texture(Xt,It.colorRamp,$t.RGBA)),bn.bind($t.LINEAR,$t.CLAMP_TO_EDGE),Ft.useProgram("heatmapTexture").draw(Xt,$t.TRIANGLES,Ge.disabled,Pe.disabled,Ft.colorModeForRenderPass(),Ne.disabled,function(Cn,$n,Gn,pr){var dr=r.create();r.ortho(dr,0,Cn.width,Cn.height,0,0,1);var Er=Cn.context.gl;return{u_matrix:dr,u_world:[Er.drawingBufferWidth,Er.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:$n.paint.get("heatmap-opacity")}}(Ft,It),It.id,Ft.viewportBuffer,Ft.quadTriangleIndexBuffer,Ft.viewportSegments,It.paint,Ft.transform.zoom)}}(O,U))},line:function(O,j,U,$){if("translucent"===O.renderPass){var le=U.paint.get("line-opacity"),me=U.paint.get("line-width");if(0!==le.constantOr(1)&&0!==me.constantOr(1)){var Ae=O.depthModeForSublayer(0,Ge.ReadOnly),De=O.colorModeForRenderPass(),Le=U.paint.get("line-dasharray"),Qe=U.paint.get("line-pattern"),rt=Qe.constantOr(1),dt=U.paint.get("line-gradient"),Pt=U.getCrossfadeParameters(),Nt=rt?"linePattern":Le?"lineSDF":dt?"lineGradient":"line",Rt=O.context,Ft=Rt.gl,It=!0;if(dt){Rt.activeTexture.set(Ft.TEXTURE0);var Xt=U.gradientTexture;if(!U.gradient)return;Xt||(Xt=U.gradientTexture=new r.Texture(Rt,U.gradient,Ft.RGBA)),Xt.bind(Ft.LINEAR,Ft.CLAMP_TO_EDGE)}for(var $t=0,en=$;$t<en.length;$t+=1){var bn=en[$t],Cn=j.getTile(bn);if(!rt||Cn.patternsLoaded()){var $n=Cn.getBucket(U);if($n){var Gn=$n.programConfigurations.get(U.id),pr=O.context.program.get(),dr=O.useProgram(Nt,Gn),Er=It||dr.program!==pr,wr=Qe.constantOr(null);if(wr&&Cn.imageAtlas){var fi=Cn.imageAtlas,Mi=fi.patternPositions[wr.to.toString()],Wi=fi.patternPositions[wr.from.toString()];Mi&&Wi&&Gn.setConstantPatternPositions(Mi,Wi)}var lr=rt?Je(O,Cn,U,Pt):Le?tt(O,Cn,U,Le,Pt):dt?Wa(O,Cn,U):Ol(O,Cn,U);rt?(Rt.activeTexture.set(Ft.TEXTURE0),Cn.imageAtlasTexture.bind(Ft.LINEAR,Ft.CLAMP_TO_EDGE),Gn.updatePaintBuffers(Pt)):Le&&(Er||O.lineAtlas.dirty)&&(Rt.activeTexture.set(Ft.TEXTURE0),O.lineAtlas.bind(Rt)),dr.draw(Rt,Ft.TRIANGLES,Ae,O.stencilModeForClipping(bn),De,Ne.disabled,lr,U.id,$n.layoutVertexBuffer,$n.indexBuffer,$n.segments,U.paint,O.transform.zoom,Gn),It=!1}}}}}},fill:function(O,j,U,$){var le=U.paint.get("fill-color"),me=U.paint.get("fill-opacity");if(0!==me.constantOr(1)){var Ae=O.colorModeForRenderPass(),De=U.paint.get("fill-pattern"),Le=O.opaquePassEnabledForLayer()&&!De.constantOr(1)&&1===le.constantOr(r.Color.transparent).a&&1===me.constantOr(0)?"opaque":"translucent";if(O.renderPass===Le){var Qe=O.depthModeForSublayer(1,"opaque"===O.renderPass?Ge.ReadWrite:Ge.ReadOnly);ei(O,j,U,$,Qe,Ae,!1)}if("translucent"===O.renderPass&&U.paint.get("fill-antialias")){var rt=O.depthModeForSublayer(U.getPaintProperty("fill-outline-color")?2:0,Ge.ReadOnly);ei(O,j,U,$,rt,Ae,!0)}}},"fill-extrusion":function(O,j,U,$){var le=U.paint.get("fill-extrusion-opacity");if(0!==le&&"translucent"===O.renderPass){var me=new Ge(O.context.gl.LEQUAL,Ge.ReadWrite,O.depthRangeFor3D);if(1!==le||U.paint.get("fill-extrusion-pattern").constantOr(1))Qi(O,j,U,$,me,Pe.disabled,Ee.disabled),Qi(O,j,U,$,me,O.stencilModeFor3D(),O.colorModeForRenderPass());else{var Ae=O.colorModeForRenderPass();Qi(O,j,U,$,me,Pe.disabled,Ae)}}},hillshade:function(O,j,U,$){if("offscreen"===O.renderPass||"translucent"===O.renderPass){for(var le=O.context,me=j.getSource().maxzoom,Ae=O.depthModeForSublayer(0,Ge.ReadOnly),De=O.colorModeForRenderPass(),Le="translucent"===O.renderPass?O.stencilConfigForOverlap($):[{},$],Qe=Le[0],rt=0,dt=Le[1];rt<dt.length;rt+=1){var Pt=dt[rt],Nt=j.getTile(Pt);Nt.needsHillshadePrepare&&"offscreen"===O.renderPass?La(O,Nt,U,me,Ae,Pe.disabled,De):"translucent"===O.renderPass&&Ci(O,Nt,U,Ae,Qe[Pt.overscaledZ],De)}le.viewport.set([0,0,O.width,O.height])}},raster:function(O,j,U,$){if("translucent"===O.renderPass&&0!==U.paint.get("raster-opacity")&&$.length)for(var le=O.context,me=le.gl,Ae=j.getSource(),De=O.useProgram("raster"),Le=O.colorModeForRenderPass(),Qe=Ae instanceof K?[{},$]:O.stencilConfigForOverlap($),rt=Qe[0],dt=Qe[1],Pt=dt[dt.length-1].overscaledZ,Nt=!O.options.moving,Rt=0,Ft=dt;Rt<Ft.length;Rt+=1){var It=Ft[Rt],Xt=O.depthModeForSublayer(It.overscaledZ-Pt,1===U.paint.get("raster-opacity")?Ge.ReadWrite:Ge.ReadOnly,me.LESS),$t=j.getTile(It),en=O.transform.calculatePosMatrix(It.toUnwrapped(),Nt);$t.registerFadeDuration(U.paint.get("raster-fade-duration"));var bn=j.findLoadedParent(It,0),Cn=Ra($t,bn,j,U,O.transform),$n=void 0,Gn=void 0,pr="nearest"===U.paint.get("raster-resampling")?me.NEAREST:me.LINEAR;le.activeTexture.set(me.TEXTURE0),$t.texture.bind(pr,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST),le.activeTexture.set(me.TEXTURE1),bn?(bn.texture.bind(pr,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST),$n=Math.pow(2,bn.tileID.overscaledZ-$t.tileID.overscaledZ),Gn=[$t.tileID.canonical.x*$n%1,$t.tileID.canonical.y*$n%1]):$t.texture.bind(pr,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST);var dr=Et(en,Gn||[0,0],$n||1,Cn,U);Ae instanceof K?De.draw(le,me.TRIANGLES,Xt,Pe.disabled,Le,Ne.disabled,dr,U.id,Ae.boundsBuffer,O.quadTriangleIndexBuffer,Ae.boundsSegments):De.draw(le,me.TRIANGLES,Xt,rt[It.overscaledZ],Le,Ne.disabled,dr,U.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments)}},background:function(O,j,U){var $=U.paint.get("background-color"),le=U.paint.get("background-opacity");if(0!==le){var me=O.context,Ae=me.gl,De=O.transform,Le=De.tileSize,Qe=U.paint.get("background-pattern");if(!O.isPatternMissing(Qe)){var rt=!Qe&&1===$.a&&1===le&&O.opaquePassEnabledForLayer()?"opaque":"translucent";if(O.renderPass===rt){var dt=Pe.disabled,Pt=O.depthModeForSublayer(0,"opaque"===rt?Ge.ReadWrite:Ge.ReadOnly),Nt=O.colorModeForRenderPass(),Rt=O.useProgram(Qe?"backgroundPattern":"background"),Ft=De.coveringTiles({tileSize:Le});Qe&&(me.activeTexture.set(Ae.TEXTURE0),O.imageManager.bind(O.context));for(var It=U.getCrossfadeParameters(),Xt=0,$t=Ft;Xt<$t.length;Xt+=1){var en=$t[Xt],bn=O.transform.calculatePosMatrix(en.toUnwrapped()),Cn=Qe?En(bn,le,O,Qe,{tileID:en,tileSize:Le},It):wn(bn,le,$);Rt.draw(me,Ae.TRIANGLES,Pt,dt,Nt,Ne.disabled,Cn,U.id,O.tileExtentBuffer,O.quadTriangleIndexBuffer,O.tileExtentSegments)}}}}},debug:function(O,j,U){for(var $=0;$<U.length;$++)Rs(O,j,U[$])},custom:function(O,j,U){var $=O.context,le=U.implementation;if("offscreen"===O.renderPass){var me=le.prerender;me&&(O.setCustomLayerDefaults(),$.setColorMode(O.colorModeForRenderPass()),me.call(le,$.gl,O.transform.customLayerMatrix()),$.setDirty(),O.setBaseState())}else if("translucent"===O.renderPass){O.setCustomLayerDefaults(),$.setColorMode(O.colorModeForRenderPass()),$.setStencilMode(Pe.disabled);var Ae="3d"===le.renderingMode?new Ge(O.context.gl.LEQUAL,Ge.ReadWrite,O.depthRangeFor3D):O.depthModeForSublayer(0,Ge.ReadOnly);$.setDepthMode(Ae),le.render($.gl,O.transform.customLayerMatrix()),$.setDirty(),O.setBaseState(),$.bindFramebuffer.set(null)}}},Ma=function(O,j){this.context=new Ve(O),this.transform=j,this._tileTextures={},this.setup(),this.numSublayers=Ke.maxUnderzooming+Ke.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ji,this.gpuTimers={}};Ma.prototype.resize=function(O,j){if(this.width=O*r.browser.devicePixelRatio,this.height=j*r.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var U=0,$=this.style._order;U<$.length;U+=1)this.style._layers[$[U]].resize()},Ma.prototype.setup=function(){var O=this.context,j=new r.StructArrayLayout2i4;j.emplaceBack(0,0),j.emplaceBack(r.EXTENT,0),j.emplaceBack(0,r.EXTENT),j.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=O.createVertexBuffer(j,Lr.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);var U=new r.StructArrayLayout2i4;U.emplaceBack(0,0),U.emplaceBack(r.EXTENT,0),U.emplaceBack(0,r.EXTENT),U.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=O.createVertexBuffer(U,Lr.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);var $=new r.StructArrayLayout4i8;$.emplaceBack(0,0,0,0),$.emplaceBack(r.EXTENT,0,r.EXTENT,0),$.emplaceBack(0,r.EXTENT,0,r.EXTENT),$.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.rasterBoundsBuffer=O.createVertexBuffer($,te.members),this.rasterBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);var le=new r.StructArrayLayout2i4;le.emplaceBack(0,0),le.emplaceBack(1,0),le.emplaceBack(0,1),le.emplaceBack(1,1),this.viewportBuffer=O.createVertexBuffer(le,Lr.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);var me=new r.StructArrayLayout1ui2;me.emplaceBack(0),me.emplaceBack(1),me.emplaceBack(3),me.emplaceBack(2),me.emplaceBack(0),this.tileBorderIndexBuffer=O.createIndexBuffer(me);var Ae=new r.StructArrayLayout3ui6;Ae.emplaceBack(0,1,2),Ae.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=O.createIndexBuffer(Ae),this.emptyTexture=new r.Texture(O,{width:1,height:1,data:new Uint8Array([0,0,0,0])},O.gl.RGBA);var De=this.context.gl;this.stencilClearMode=new Pe({func:De.ALWAYS,mask:0},0,255,De.ZERO,De.ZERO,De.ZERO)},Ma.prototype.clearStencil=function(){var O=this.context,j=O.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var U=r.create();r.ortho(U,0,this.width,this.height,0,0,1),r.scale(U,U,[j.drawingBufferWidth,j.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(O,j.TRIANGLES,Ge.disabled,this.stencilClearMode,Ee.disabled,Ne.disabled,Ls(U),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ma.prototype._renderTileClippingMasks=function(O,j){if(this.currentStencilSource!==O.source&&O.isTileClipped()&&j&&j.length){this.currentStencilSource=O.source;var U=this.context,$=U.gl;this.nextStencilID+j.length>256&&this.clearStencil(),U.setColorMode(Ee.disabled),U.setDepthMode(Ge.disabled);var le=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var me=0,Ae=j;me<Ae.length;me+=1){var De=Ae[me],Le=this._tileClippingMaskIDs[De.key]=this.nextStencilID++;le.draw(U,$.TRIANGLES,Ge.disabled,new Pe({func:$.ALWAYS,mask:0},Le,255,$.KEEP,$.KEEP,$.REPLACE),Ee.disabled,Ne.disabled,Ls(De.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ma.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var O=this.nextStencilID++,j=this.context.gl;return new Pe({func:j.NOTEQUAL,mask:255},O,255,j.KEEP,j.KEEP,j.REPLACE)},Ma.prototype.stencilModeForClipping=function(O){var j=this.context.gl;return new Pe({func:j.EQUAL,mask:255},this._tileClippingMaskIDs[O.key],0,j.KEEP,j.KEEP,j.REPLACE)},Ma.prototype.stencilConfigForOverlap=function(O){var j,U=this.context.gl,$=O.sort(function(Le,Qe){return Qe.overscaledZ-Le.overscaledZ}),le=$[$.length-1].overscaledZ,me=$[0].overscaledZ-le+1;if(me>1){this.currentStencilSource=void 0,this.nextStencilID+me>256&&this.clearStencil();for(var Ae={},De=0;De<me;De++)Ae[De+le]=new Pe({func:U.GEQUAL,mask:255},De+this.nextStencilID,255,U.KEEP,U.KEEP,U.REPLACE);return this.nextStencilID+=me,[Ae,$]}return[(j={},j[le]=Pe.disabled,j),$]},Ma.prototype.colorModeForRenderPass=function(){var O=this.context.gl;return this._showOverdrawInspector?new Ee([O.CONSTANT_COLOR,O.ONE],new r.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ee.unblended:Ee.alphaBlended},Ma.prototype.depthModeForSublayer=function(O,j,U){if(!this.opaquePassEnabledForLayer())return Ge.disabled;var $=1-((1+this.currentLayer)*this.numSublayers+O)*this.depthEpsilon;return new Ge(U||this.context.gl.LEQUAL,j,[$,$])},Ma.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ma.prototype.render=function(O,j){var U=this;this.style=O,this.options=j,this.lineAtlas=O.lineAtlas,this.imageManager=O.imageManager,this.glyphManager=O.glyphManager,this.symbolFadeChange=O.placement.symbolFadeChange(r.browser.now()),this.imageManager.beginFrame();var $=this.style._order,le=this.style.sourceCaches;for(var me in le){var Ae=le[me];Ae.used&&Ae.prepare(this.context)}var De,Le,Qe={},rt={},dt={};for(var Pt in le){var Nt=le[Pt];Qe[Pt]=Nt.getVisibleCoordinates(),rt[Pt]=Qe[Pt].slice().reverse(),dt[Pt]=Nt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Rt=0;Rt<$.length;Rt++)if(this.style._layers[$[Rt]].is3D()){this.opaquePassCutoff=Rt;break}this.renderPass="offscreen";for(var It=0,Xt=$;It<Xt.length;It+=1){var en=this.style._layers[Xt[It]];if(en.hasOffscreenPass()&&!en.isHidden(this.transform.zoom)){var bn=rt[en.source];("custom"===en.type||bn.length)&&this.renderLayer(this,le[en.source],en,bn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:j.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=j.showOverdrawInspector,this.depthRangeFor3D=[0,1-(O._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=$.length-1;this.currentLayer>=0;this.currentLayer--){var Cn=this.style._layers[$[this.currentLayer]],$n=le[Cn.source],Gn=Qe[Cn.source];this._renderTileClippingMasks(Cn,Gn),this.renderLayer(this,$n,Cn,Gn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<$.length;this.currentLayer++){var pr=this.style._layers[$[this.currentLayer]],dr=le[pr.source],Er=("symbol"===pr.type?dt:rt)[pr.source];this._renderTileClippingMasks(pr,Qe[pr.source]),this.renderLayer(this,dr,pr,Er)}this.options.showTileBoundaries&&(r.values(this.style._layers).forEach(function(wr){wr.source&&!wr.isHidden(U.transform.zoom)&&(wr.source!==(Le&&Le.id)&&(Le=U.style.sourceCaches[wr.source]),(!De||De.getSource().maxzoom<Le.getSource().maxzoom)&&(De=Le))}),De&&Xs.debug(this,De,De.getVisibleCoordinates())),this.options.showPadding&&function(O){var j=O.transform.padding;co(O,O.transform.height-(j.top||0),3,Ba),co(O,j.bottom||0,3,Go),Hs(O,j.left||0,3,jo),Hs(O,O.transform.width-(j.right||0),3,yo);var $,le,me,Ae,U=O.transform.centerPoint;Gs($=O,(le=U.x)-1,(me=O.transform.height-U.y)-10,2,20,Ae=oo),Gs($,le-10,me-1,20,2,Ae)}(this),this.context.setDefault()},Ma.prototype.renderLayer=function(O,j,U,$){U.isHidden(this.transform.zoom)||("background"===U.type||"custom"===U.type||$.length)&&(this.id=U.id,this.gpuTimingStart(U),Xs[U.type](O,j,U,$,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ma.prototype.gpuTimingStart=function(O){if(this.options.gpuTiming){var j=this.context.extTimerQuery,U=this.gpuTimers[O.id];U||(U=this.gpuTimers[O.id]={calls:0,cpuTime:0,query:j.createQueryEXT()}),U.calls++,j.beginQueryEXT(j.TIME_ELAPSED_EXT,U.query)}},Ma.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var O=this.context.extTimerQuery;O.endQueryEXT(O.TIME_ELAPSED_EXT)}},Ma.prototype.collectGpuTimers=function(){var O=this.gpuTimers;return this.gpuTimers={},O},Ma.prototype.queryGpuTimers=function(O){var j={};for(var U in O){var $=O[U],le=this.context.extTimerQuery,me=le.getQueryObjectEXT($.query,le.QUERY_RESULT_EXT)/1e6;le.deleteQueryEXT($.query),j[U]=me}return j},Ma.prototype.translatePosMatrix=function(O,j,U,$,le){if(!U[0]&&!U[1])return O;var me=le?"map"===$?this.transform.angle:0:"viewport"===$?-this.transform.angle:0;if(me){var Ae=Math.sin(me),De=Math.cos(me);U=[U[0]*De-U[1]*Ae,U[0]*Ae+U[1]*De]}var Le=[le?U[0]:Bn(j,U[0],this.transform.zoom),le?U[1]:Bn(j,U[1],this.transform.zoom),0],Qe=new Float32Array(16);return r.translate(Qe,O,Le),Qe},Ma.prototype.saveTileTexture=function(O){var j=this._tileTextures[O.size[0]];j?j.push(O):this._tileTextures[O.size[0]]=[O]},Ma.prototype.getTileTexture=function(O){var j=this._tileTextures[O];return j&&j.length>0?j.pop():null},Ma.prototype.isPatternMissing=function(O){if(!O)return!1;if(!O.from||!O.to)return!0;var j=this.imageManager.getPattern(O.from.toString()),U=this.imageManager.getPattern(O.to.toString());return!j||!U},Ma.prototype.useProgram=function(O,j){this.cache=this.cache||{};var U=""+O+(j?j.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[U]||(this.cache[U]=new xc(this.context,ao[O],j,Fn[O],this._showOverdrawInspector)),this.cache[U]},Ma.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ma.prototype.setBaseState=function(){var O=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(O.FUNC_ADD)},Ma.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=r.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new r.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ma.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Mt=function(O,j){this.points=O,this.planes=j};Mt.fromInvProjectionMatrix=function(O,j,U){var $=Math.pow(2,U),le=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Ae){return r.transformMat4([],Ae,O)}).map(function(Ae){return r.scale$1([],Ae,1/Ae[3]/j*$)}),me=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Ae){var De=r.sub([],le[Ae[0]],le[Ae[1]]),Le=r.sub([],le[Ae[2]],le[Ae[1]]),Qe=r.normalize([],r.cross([],De,Le)),rt=-r.dot(Qe,le[Ae[1]]);return Qe.concat(rt)});return new Mt(le,me)};var Gt=function(O,j){this.min=O,this.max=j,this.center=r.scale$2([],r.add([],this.min,this.max),.5)};Gt.prototype.quadrant=function(O){for(var j=[O%2==0,O<2],U=r.clone$2(this.min),$=r.clone$2(this.max),le=0;le<j.length;le++)U[le]=j[le]?this.min[le]:this.center[le],$[le]=j[le]?this.center[le]:this.max[le];return $[2]=this.max[2],new Gt(U,$)},Gt.prototype.distanceX=function(O){return Math.max(Math.min(this.max[0],O[0]),this.min[0])-O[0]},Gt.prototype.distanceY=function(O){return Math.max(Math.min(this.max[1],O[1]),this.min[1])-O[1]},Gt.prototype.intersects=function(O){for(var j=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],U=!0,$=0;$<O.planes.length;$++){for(var le=O.planes[$],me=0,Ae=0;Ae<j.length;Ae++)me+=r.dot$1(le,j[Ae])>=0;if(0===me)return 0;me!==j.length&&(U=!1)}if(U)return 2;for(var De=0;De<3;De++){for(var Le=Number.MAX_VALUE,Qe=-Number.MAX_VALUE,rt=0;rt<O.points.length;rt++){var dt=O.points[rt][De]-this.min[De];Le=Math.min(Le,dt),Qe=Math.max(Qe,dt)}if(Qe<0||Le>this.max[De]-this.min[De])return 0}return 1};var Tn=function(O,j,U,$){if(void 0===O&&(O=0),void 0===j&&(j=0),void 0===U&&(U=0),void 0===$&&($=0),isNaN(O)||O<0||isNaN(j)||j<0||isNaN(U)||U<0||isNaN($)||$<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=O,this.bottom=j,this.left=U,this.right=$};Tn.prototype.interpolate=function(O,j,U){return null!=j.top&&null!=O.top&&(this.top=r.number(O.top,j.top,U)),null!=j.bottom&&null!=O.bottom&&(this.bottom=r.number(O.bottom,j.bottom,U)),null!=j.left&&null!=O.left&&(this.left=r.number(O.left,j.left,U)),null!=j.right&&null!=O.right&&(this.right=r.number(O.right,j.right,U)),this},Tn.prototype.getCenter=function(O,j){var U=r.clamp((this.left+O-this.right)/2,0,O),$=r.clamp((this.top+j-this.bottom)/2,0,j);return new r.Point(U,$)},Tn.prototype.equals=function(O){return this.top===O.top&&this.bottom===O.bottom&&this.left===O.left&&this.right===O.right},Tn.prototype.clone=function(){return new Tn(this.top,this.bottom,this.left,this.right)},Tn.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var on=function(O,j,U,$,le){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===le||le,this._minZoom=O||0,this._maxZoom=j||22,this._minPitch=null==U?0:U,this._maxPitch=null==$?60:$,this.setMaxBounds(),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Tn,this._posMatrixCache={},this._alignedPosMatrixCache={}},An={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};on.prototype.clone=function(){var O=new on(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return O.tileSize=this.tileSize,O.latRange=this.latRange,O.width=this.width,O.height=this.height,O._center=this._center,O.zoom=this.zoom,O.angle=this.angle,O._fov=this._fov,O._pitch=this._pitch,O._unmodified=this._unmodified,O._edgeInsets=this._edgeInsets.clone(),O._calcMatrices(),O},An.minZoom.get=function(){return this._minZoom},An.minZoom.set=function(O){this._minZoom!==O&&(this._minZoom=O,this.zoom=Math.max(this.zoom,O))},An.maxZoom.get=function(){return this._maxZoom},An.maxZoom.set=function(O){this._maxZoom!==O&&(this._maxZoom=O,this.zoom=Math.min(this.zoom,O))},An.minPitch.get=function(){return this._minPitch},An.minPitch.set=function(O){this._minPitch!==O&&(this._minPitch=O,this.pitch=Math.max(this.pitch,O))},An.maxPitch.get=function(){return this._maxPitch},An.maxPitch.set=function(O){this._maxPitch!==O&&(this._maxPitch=O,this.pitch=Math.min(this.pitch,O))},An.renderWorldCopies.get=function(){return this._renderWorldCopies},An.renderWorldCopies.set=function(O){void 0===O?O=!0:null===O&&(O=!1),this._renderWorldCopies=O},An.worldSize.get=function(){return this.tileSize*this.scale},An.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},An.size.get=function(){return new r.Point(this.width,this.height)},An.bearing.get=function(){return-this.angle/Math.PI*180},An.bearing.set=function(O){var j=-r.wrap(O,-180,180)*Math.PI/180;this.angle!==j&&(this._unmodified=!1,this.angle=j,this._calcMatrices(),this.rotationMatrix=r.create$2(),r.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},An.pitch.get=function(){return this._pitch/Math.PI*180},An.pitch.set=function(O){var j=r.clamp(O,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==j&&(this._unmodified=!1,this._pitch=j,this._calcMatrices())},An.fov.get=function(){return this._fov/Math.PI*180},An.fov.set=function(O){O=Math.max(.01,Math.min(60,O)),this._fov!==O&&(this._unmodified=!1,this._fov=O/180*Math.PI,this._calcMatrices())},An.zoom.get=function(){return this._zoom},An.zoom.set=function(O){var j=Math.min(Math.max(O,this.minZoom),this.maxZoom);this._zoom!==j&&(this._unmodified=!1,this._zoom=j,this.scale=this.zoomScale(j),this.tileZoom=Math.floor(j),this.zoomFraction=j-this.tileZoom,this._constrain(),this._calcMatrices())},An.center.get=function(){return this._center},An.center.set=function(O){O.lat===this._center.lat&&O.lng===this._center.lng||(this._unmodified=!1,this._center=O,this._constrain(),this._calcMatrices())},An.padding.get=function(){return this._edgeInsets.toJSON()},An.padding.set=function(O){this._edgeInsets.equals(O)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,O,1),this._calcMatrices())},An.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},on.prototype.isPaddingEqual=function(O){return this._edgeInsets.equals(O)},on.prototype.interpolatePadding=function(O,j,U){this._unmodified=!1,this._edgeInsets.interpolate(O,j,U),this._constrain(),this._calcMatrices()},on.prototype.coveringZoomLevel=function(O){var j=(O.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/O.tileSize));return Math.max(0,j)},on.prototype.getVisibleUnwrappedCoordinates=function(O){var j=[new r.UnwrappedTileID(0,O)];if(this._renderWorldCopies)for(var U=this.pointCoordinate(new r.Point(0,0)),$=this.pointCoordinate(new r.Point(this.width,0)),le=this.pointCoordinate(new r.Point(this.width,this.height)),me=this.pointCoordinate(new r.Point(0,this.height)),Ae=Math.floor(Math.min(U.x,$.x,le.x,me.x)),De=Math.floor(Math.max(U.x,$.x,le.x,me.x)),Le=Ae-1;Le<=De+1;Le++)0!==Le&&j.push(new r.UnwrappedTileID(Le,O));return j},on.prototype.coveringTiles=function(O){var j=this.coveringZoomLevel(O),U=j;if(void 0!==O.minzoom&&j<O.minzoom)return[];void 0!==O.maxzoom&&j>O.maxzoom&&(j=O.maxzoom);var $=r.MercatorCoordinate.fromLngLat(this.center),le=Math.pow(2,j),me=[le*$.x,le*$.y,0],Ae=Mt.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,j),De=O.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(De=j);var Le=function(Er){return{aabb:new Gt([Er*le,0,0],[(Er+1)*le,le,0]),zoom:0,x:0,y:0,wrap:Er,fullyVisible:!1}},Qe=[],rt=[],dt=j,Pt=O.reparseOverscaled?U:j;if(this._renderWorldCopies)for(var Nt=1;Nt<=3;Nt++)Qe.push(Le(-Nt)),Qe.push(Le(Nt));for(Qe.push(Le(0));Qe.length>0;){var Rt=Qe.pop(),Ft=Rt.x,It=Rt.y,Xt=Rt.fullyVisible;if(!Xt){var $t=Rt.aabb.intersects(Ae);if(0===$t)continue;Xt=2===$t}var en=Rt.aabb.distanceX(me),bn=Rt.aabb.distanceY(me),Cn=Math.max(Math.abs(en),Math.abs(bn));if(Rt.zoom===dt||Cn>3+(1<<dt-Rt.zoom)-2&&Rt.zoom>=De)rt.push({tileID:new r.OverscaledTileID(Rt.zoom===dt?Pt:Rt.zoom,Rt.wrap,Rt.zoom,Ft,It),distanceSq:r.sqrLen([me[0]-.5-Ft,me[1]-.5-It])});else for(var Gn=0;Gn<4;Gn++){var pr=(Ft<<1)+Gn%2,dr=(It<<1)+(Gn>>1);Qe.push({aabb:Rt.aabb.quadrant(Gn),zoom:Rt.zoom+1,x:pr,y:dr,wrap:Rt.wrap,fullyVisible:Xt})}}return rt.sort(function(Er,wr){return Er.distanceSq-wr.distanceSq}).map(function(Er){return Er.tileID})},on.prototype.resize=function(O,j){this.width=O,this.height=j,this.pixelsToGLUnits=[2/O,-2/j],this._constrain(),this._calcMatrices()},An.unmodified.get=function(){return this._unmodified},on.prototype.zoomScale=function(O){return Math.pow(2,O)},on.prototype.scaleZoom=function(O){return Math.log(O)/Math.LN2},on.prototype.project=function(O){var j=r.clamp(O.lat,-this.maxValidLatitude,this.maxValidLatitude);return new r.Point(r.mercatorXfromLng(O.lng)*this.worldSize,r.mercatorYfromLat(j)*this.worldSize)},on.prototype.unproject=function(O){return new r.MercatorCoordinate(O.x/this.worldSize,O.y/this.worldSize).toLngLat()},An.point.get=function(){return this.project(this.center)},on.prototype.setLocationAtPoint=function(O,j){var U=this.pointCoordinate(j),$=this.pointCoordinate(this.centerPoint),le=this.locationCoordinate(O),me=new r.MercatorCoordinate(le.x-(U.x-$.x),le.y-(U.y-$.y));this.center=this.coordinateLocation(me),this._renderWorldCopies&&(this.center=this.center.wrap())},on.prototype.locationPoint=function(O){return this.coordinatePoint(this.locationCoordinate(O))},on.prototype.pointLocation=function(O){return this.coordinateLocation(this.pointCoordinate(O))},on.prototype.locationCoordinate=function(O){return r.MercatorCoordinate.fromLngLat(O)},on.prototype.coordinateLocation=function(O){return O.toLngLat()},on.prototype.pointCoordinate=function(O){var j=[O.x,O.y,0,1],U=[O.x,O.y,1,1];r.transformMat4(j,j,this.pixelMatrixInverse),r.transformMat4(U,U,this.pixelMatrixInverse);var $=j[3],le=U[3],De=j[1]/$,Le=U[1]/le,Qe=j[2]/$,rt=U[2]/le,dt=Qe===rt?0:(0-Qe)/(rt-Qe);return new r.MercatorCoordinate(r.number(j[0]/$,U[0]/le,dt)/this.worldSize,r.number(De,Le,dt)/this.worldSize)},on.prototype.coordinatePoint=function(O){var j=[O.x*this.worldSize,O.y*this.worldSize,0,1];return r.transformMat4(j,j,this.pixelMatrix),new r.Point(j[0]/j[3],j[1]/j[3])},on.prototype.getBounds=function(){return(new r.LngLatBounds).extend(this.pointLocation(new r.Point(0,0))).extend(this.pointLocation(new r.Point(this.width,0))).extend(this.pointLocation(new r.Point(this.width,this.height))).extend(this.pointLocation(new r.Point(0,this.height)))},on.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new r.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},on.prototype.setMaxBounds=function(O){O?(this.lngRange=[O.getWest(),O.getEast()],this.latRange=[O.getSouth(),O.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},on.prototype.calculatePosMatrix=function(O,j){void 0===j&&(j=!1);var U=O.key,$=j?this._alignedPosMatrixCache:this._posMatrixCache;if($[U])return $[U];var le=O.canonical,me=this.worldSize/this.zoomScale(le.z),Ae=le.x+Math.pow(2,le.z)*O.wrap,De=r.identity(new Float64Array(16));return r.translate(De,De,[Ae*me,le.y*me,0]),r.scale(De,De,[me/r.EXTENT,me/r.EXTENT,1]),r.multiply(De,j?this.alignedProjMatrix:this.projMatrix,De),$[U]=new Float32Array(De),$[U]},on.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},on.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var O,j,U,$,le=-90,me=90,Ae=-180,De=180,Le=this.size,Qe=this._unmodified;if(this.latRange){var rt=this.latRange;le=r.mercatorYfromLat(rt[1])*this.worldSize,O=(me=r.mercatorYfromLat(rt[0])*this.worldSize)-le<Le.y?Le.y/(me-le):0}if(this.lngRange){var dt=this.lngRange;Ae=r.mercatorXfromLng(dt[0])*this.worldSize,j=(De=r.mercatorXfromLng(dt[1])*this.worldSize)-Ae<Le.x?Le.x/(De-Ae):0}var Pt=this.point,Nt=Math.max(j||0,O||0);if(Nt)return this.center=this.unproject(new r.Point(j?(De+Ae)/2:Pt.x,O?(me+le)/2:Pt.y)),this.zoom+=this.scaleZoom(Nt),this._unmodified=Qe,void(this._constraining=!1);if(this.latRange){var Rt=Pt.y,Ft=Le.y/2;Rt-Ft<le&&($=le+Ft),Rt+Ft>me&&($=me-Ft)}if(this.lngRange){var It=Pt.x,Xt=Le.x/2;It-Xt<Ae&&(U=Ae+Xt),It+Xt>De&&(U=De-Xt)}void 0===U&&void 0===$||(this.center=this.unproject(new r.Point(void 0!==U?U:Pt.x,void 0!==$?$:Pt.y))),this._unmodified=Qe,this._constraining=!1}},on.prototype._calcMatrices=function(){if(this.height){var j=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var U=Math.PI/2+this._pitch,$=this._fov*(.5+j.y/this.height),le=Math.sin($)*this.cameraToCenterDistance/Math.sin(r.clamp(Math.PI-U-$,.01,Math.PI-.01)),me=this.point,Ae=me.x,De=me.y,Le=1.01*(Math.cos(Math.PI/2-this._pitch)*le+this.cameraToCenterDistance),Qe=this.height/50,rt=new Float64Array(16);r.perspective(rt,this._fov,this.width/this.height,Qe,Le),rt[8]=2*-j.x/this.width,rt[9]=2*j.y/this.height,r.scale(rt,rt,[1,-1,1]),r.translate(rt,rt,[0,0,-this.cameraToCenterDistance]),r.rotateX(rt,rt,this._pitch),r.rotateZ(rt,rt,this.angle),r.translate(rt,rt,[-Ae,-De,0]),this.mercatorMatrix=r.scale([],rt,[this.worldSize,this.worldSize,this.worldSize]),r.scale(rt,rt,[1,1,r.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=rt,this.invProjMatrix=r.invert([],this.projMatrix);var dt=this.width%2/2,Pt=this.height%2/2,Nt=Math.cos(this.angle),Rt=Math.sin(this.angle),Ft=Ae-Math.round(Ae)+Nt*dt+Rt*Pt,It=De-Math.round(De)+Nt*Pt+Rt*dt,Xt=new Float64Array(rt);if(r.translate(Xt,Xt,[Ft>.5?Ft-1:Ft,It>.5?It-1:It,0]),this.alignedProjMatrix=Xt,rt=r.create(),r.scale(rt,rt,[this.width/2,-this.height/2,1]),r.translate(rt,rt,[1,-1,0]),this.labelPlaneMatrix=rt,rt=r.create(),r.scale(rt,rt,[1,-1,1]),r.translate(rt,rt,[-1,-1,0]),r.scale(rt,rt,[2/this.width,2/this.height,1]),this.glCoordMatrix=rt,this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(rt=r.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=rt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},on.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var O=this.pointCoordinate(new r.Point(0,0)),j=[O.x*this.worldSize,O.y*this.worldSize,0,1];return r.transformMat4(j,j,this.pixelMatrix)[3]/this.cameraToCenterDistance},on.prototype.getCameraPoint=function(){var j=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.Point(0,j))},on.prototype.getCameraQueryGeometry=function(O){var j=this.getCameraPoint();if(1===O.length)return[O[0],j];for(var U=j.x,$=j.y,le=j.x,me=j.y,Ae=0,De=O;Ae<De.length;Ae+=1){var Le=De[Ae];U=Math.min(U,Le.x),$=Math.min($,Le.y),le=Math.max(le,Le.x),me=Math.max(me,Le.y)}return[new r.Point(U,$),new r.Point(le,$),new r.Point(le,me),new r.Point(U,me),new r.Point(U,$)]},Object.defineProperties(on.prototype,An);var Vn=function(O){var j,$,le,me;this._hashName=O&&encodeURIComponent(O),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(j=this._updateHashUnthrottled.bind(this),300,$=!1,le=null,me=function(){le=null,$&&(j(),le=setTimeout(me,300),$=!1)},function(){return $=!0,le||me(),le})};Vn.prototype.addTo=function(O){return this._map=O,r.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Vn.prototype.remove=function(){return r.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Vn.prototype.getHashString=function(O){var j=this._map.getCenter(),U=Math.round(100*this._map.getZoom())/100,$=Math.ceil((U*Math.LN2+Math.log(512/360/.5))/Math.LN10),le=Math.pow(10,$),me=Math.round(j.lng*le)/le,Ae=Math.round(j.lat*le)/le,De=this._map.getBearing(),Le=this._map.getPitch(),Qe="";if(Qe+=O?"/"+me+"/"+Ae+"/"+U:U+"/"+Ae+"/"+me,(De||Le)&&(Qe+="/"+Math.round(10*De)/10),Le&&(Qe+="/"+Math.round(Le)),this._hashName){var rt=this._hashName,dt=!1,Pt=r.window.location.hash.slice(1).split("&").map(function(Nt){var Rt=Nt.split("=")[0];return Rt===rt?(dt=!0,Rt+"="+Qe):Nt}).filter(function(Nt){return Nt});return dt||Pt.push(rt+"="+Qe),"#"+Pt.join("&")}return"#"+Qe},Vn.prototype._getCurrentHash=function(){var O,j=this,U=r.window.location.hash.replace("#","");return this._hashName?(U.split("&").map(function($){return $.split("=")}).forEach(function($){$[0]===j._hashName&&(O=$)}),(O&&O[1]||"").split("/")):U.split("/")},Vn.prototype._onHashChange=function(){var O=this._getCurrentHash();if(O.length>=3&&!O.some(function(U){return isNaN(U)})){var j=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(O[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+O[2],+O[1]],zoom:+O[0],bearing:j,pitch:+(O[4]||0)}),!0}return!1},Vn.prototype._updateHashUnthrottled=function(){var O=this.getHashString();try{r.window.history.replaceState(r.window.history.state,"",O)}catch(j){}};var tr={linearity:.3,easing:r.bezier(0,0,.3,1)},hr=r.extend({deceleration:2500,maxSpeed:1400},tr),Tr=r.extend({deceleration:20,maxSpeed:1400},tr),yr=r.extend({deceleration:1e3,maxSpeed:360},tr),Ir=r.extend({deceleration:1e3,maxSpeed:90},tr),Br=function(O){this._map=O,this.clear()};function xr(O,j){(!O.duration||O.duration<j.duration)&&(O.duration=j.duration,O.easing=j.easing)}function Pr(O,j,U){var $=U.maxSpeed,le=U.linearity,me=U.deceleration,Ae=r.clamp(O*le/(j/1e3),-$,$),De=Math.abs(Ae)/(me*le);return{easing:U.easing,duration:1e3*De,amount:Ae*(De/2)}}Br.prototype.clear=function(){this._inertiaBuffer=[]},Br.prototype.record=function(O){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.browser.now(),settings:O})},Br.prototype._drainInertiaBuffer=function(){for(var O=this._inertiaBuffer,j=r.browser.now();O.length>0&&j-O[0].time>160;)O.shift()},Br.prototype._onMoveEnd=function(O){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var j={zoom:0,bearing:0,pitch:0,pan:new r.Point(0,0),pinchAround:void 0,around:void 0},U=0,$=this._inertiaBuffer;U<$.length;U+=1){var le=$[U].settings;j.zoom+=le.zoomDelta||0,j.bearing+=le.bearingDelta||0,j.pitch+=le.pitchDelta||0,le.panDelta&&j.pan._add(le.panDelta),le.around&&(j.around=le.around),le.pinchAround&&(j.pinchAround=le.pinchAround)}var me=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Ae={};if(j.pan.mag()){var De=Pr(j.pan.mag(),me,r.extend({},hr,O||{}));Ae.offset=j.pan.mult(De.amount/j.pan.mag()),Ae.center=this._map.transform.center,xr(Ae,De)}if(j.zoom){var Le=Pr(j.zoom,me,Tr);Ae.zoom=this._map.transform.zoom+Le.amount,xr(Ae,Le)}if(j.bearing){var Qe=Pr(j.bearing,me,yr);Ae.bearing=this._map.transform.bearing+r.clamp(Qe.amount,-179,179),xr(Ae,Qe)}if(j.pitch){var rt=Pr(j.pitch,me,Ir);Ae.pitch=this._map.transform.pitch+rt.amount,xr(Ae,rt)}if(Ae.zoom||Ae.bearing){var dt=void 0===j.pinchAround?j.around:j.pinchAround;Ae.around=dt?this._map.unproject(dt):this._map.getCenter()}return this.clear(),r.extend(Ae,{noMoveStart:!0})}};var ai=function(O){function j($,le,me,Ae){void 0===Ae&&(Ae={});var De=c.mousePos(le.getCanvasContainer(),me),Le=le.unproject(De);O.call(this,$,r.extend({point:De,lngLat:Le,originalEvent:me},Ae)),this._defaultPrevented=!1,this.target=le}O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j;var U={defaultPrevented:{configurable:!0}};return j.prototype.preventDefault=function(){this._defaultPrevented=!0},U.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(j.prototype,U),j}(r.Event),gi=function(O){function j($,le,me){var Ae="touchend"===$?me.changedTouches:me.touches,De=c.touchPos(le.getCanvasContainer(),Ae),Le=De.map(function(dt){return le.unproject(dt)}),Qe=De.reduce(function(dt,Pt,Nt,Rt){return dt.add(Pt.div(Rt.length))},new r.Point(0,0)),rt=le.unproject(Qe);O.call(this,$,{points:De,point:Qe,lngLats:Le,lngLat:rt,originalEvent:me}),this._defaultPrevented=!1}O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j;var U={defaultPrevented:{configurable:!0}};return j.prototype.preventDefault=function(){this._defaultPrevented=!0},U.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(j.prototype,U),j}(r.Event),ji=function(O){function j($,le,me){O.call(this,$,{originalEvent:me}),this._defaultPrevented=!1}O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j;var U={defaultPrevented:{configurable:!0}};return j.prototype.preventDefault=function(){this._defaultPrevented=!0},U.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(j.prototype,U),j}(r.Event),ur=function(O,j){this._map=O,this._clickTolerance=j.clickTolerance};ur.prototype.reset=function(){delete this._mousedownPos},ur.prototype.wheel=function(O){return this._firePreventable(new ji(O.type,this._map,O))},ur.prototype.mousedown=function(O,j){return this._mousedownPos=j,this._firePreventable(new ai(O.type,this._map,O))},ur.prototype.mouseup=function(O){this._map.fire(new ai(O.type,this._map,O))},ur.prototype.click=function(O,j){this._mousedownPos&&this._mousedownPos.dist(j)>=this._clickTolerance||this._map.fire(new ai(O.type,this._map,O))},ur.prototype.dblclick=function(O){return this._firePreventable(new ai(O.type,this._map,O))},ur.prototype.mouseover=function(O){this._map.fire(new ai(O.type,this._map,O))},ur.prototype.mouseout=function(O){this._map.fire(new ai(O.type,this._map,O))},ur.prototype.touchstart=function(O){return this._firePreventable(new gi(O.type,this._map,O))},ur.prototype.touchmove=function(O){this._map.fire(new gi(O.type,this._map,O))},ur.prototype.touchend=function(O){this._map.fire(new gi(O.type,this._map,O))},ur.prototype.touchcancel=function(O){this._map.fire(new gi(O.type,this._map,O))},ur.prototype._firePreventable=function(O){if(this._map.fire(O),O.defaultPrevented)return{}},ur.prototype.isEnabled=function(){return!0},ur.prototype.isActive=function(){return!1},ur.prototype.enable=function(){},ur.prototype.disable=function(){};var Ni=function(O){this._map=O};Ni.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ni.prototype.mousemove=function(O){this._map.fire(new ai(O.type,this._map,O))},Ni.prototype.mousedown=function(){this._delayContextMenu=!0},Ni.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ai("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ni.prototype.contextmenu=function(O){this._delayContextMenu?this._contextMenuEvent=O:this._map.fire(new ai(O.type,this._map,O)),this._map.listens("contextmenu")&&O.preventDefault()},Ni.prototype.isEnabled=function(){return!0},Ni.prototype.isActive=function(){return!1},Ni.prototype.enable=function(){},Ni.prototype.disable=function(){};var Jr=function(O,j){this._map=O,this._el=O.getCanvasContainer(),this._container=O.getContainer(),this._clickTolerance=j.clickTolerance||1};function Mr(O,j){for(var U={},$=0;$<O.length;$++)U[O[$].identifier]=j[$];return U}Jr.prototype.isEnabled=function(){return!!this._enabled},Jr.prototype.isActive=function(){return!!this._active},Jr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Jr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Jr.prototype.mousedown=function(O,j){this.isEnabled()&&O.shiftKey&&0===O.button&&(c.disableDrag(),this._startPos=this._lastPos=j,this._active=!0)},Jr.prototype.mousemoveWindow=function(O,j){if(this._active){var U=j;if(!(this._lastPos.equals(U)||!this._box&&U.dist(this._startPos)<this._clickTolerance)){var $=this._startPos;this._lastPos=U,this._box||(this._box=c.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",O));var le=Math.min($.x,U.x),me=Math.max($.x,U.x),Ae=Math.min($.y,U.y),De=Math.max($.y,U.y);c.setTransform(this._box,"translate("+le+"px,"+Ae+"px)"),this._box.style.width=me-le+"px",this._box.style.height=De-Ae+"px"}}},Jr.prototype.mouseupWindow=function(O,j){var U=this;if(this._active&&0===O.button){var $=this._startPos,le=j;if(this.reset(),c.suppressClick(),$.x!==le.x||$.y!==le.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:O})),{cameraAnimation:function(me){return me.fitScreenCoordinates($,le,U._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",O)}},Jr.prototype.keydown=function(O){this._active&&27===O.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",O))},Jr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(c.remove(this._box),this._box=null),c.enableDrag(),delete this._startPos,delete this._lastPos},Jr.prototype._fireEvent=function(O,j){return this._map.fire(new r.Event(O,{originalEvent:j}))};var zi=function(O){this.reset(),this.numTouches=O.numTouches};zi.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},zi.prototype.touchstart=function(O,j,U){(this.centroid||U.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=O.timeStamp),U.length===this.numTouches&&(this.centroid=function($){for(var le=new r.Point(0,0),me=0,Ae=$;me<Ae.length;me+=1)le._add(Ae[me]);return le.div($.length)}(j),this.touches=Mr(U,j)))},zi.prototype.touchmove=function(O,j,U){if(!this.aborted&&this.centroid){var $=Mr(U,j);for(var le in this.touches){var Ae=$[le];(!Ae||Ae.dist(this.touches[le])>30)&&(this.aborted=!0)}}},zi.prototype.touchend=function(O,j,U){if((!this.centroid||O.timeStamp-this.startTime>500)&&(this.aborted=!0),0===U.length){var $=!this.aborted&&this.centroid;if(this.reset(),$)return $}};var fa=function(O){this.singleTap=new zi(O),this.numTaps=O.numTaps,this.reset()};fa.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},fa.prototype.touchstart=function(O,j,U){this.singleTap.touchstart(O,j,U)},fa.prototype.touchmove=function(O,j,U){this.singleTap.touchmove(O,j,U)},fa.prototype.touchend=function(O,j,U){var $=this.singleTap.touchend(O,j,U);if($){var le=O.timeStamp-this.lastTime<500,me=!this.lastTap||this.lastTap.dist($)<30;if(le&&me||this.reset(),this.count++,this.lastTime=O.timeStamp,this.lastTap=$,this.count===this.numTaps)return this.reset(),$}};var wa=function(){this._zoomIn=new fa({numTouches:1,numTaps:2}),this._zoomOut=new fa({numTouches:2,numTaps:1}),this.reset()};wa.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},wa.prototype.touchstart=function(O,j,U){this._zoomIn.touchstart(O,j,U),this._zoomOut.touchstart(O,j,U)},wa.prototype.touchmove=function(O,j,U){this._zoomIn.touchmove(O,j,U),this._zoomOut.touchmove(O,j,U)},wa.prototype.touchend=function(O,j,U){var $=this,le=this._zoomIn.touchend(O,j,U),me=this._zoomOut.touchend(O,j,U);return le?(this._active=!0,O.preventDefault(),setTimeout(function(){return $.reset()},0),{cameraAnimation:function(Ae){return Ae.easeTo({duration:300,zoom:Ae.getZoom()+1,around:Ae.unproject(le)},{originalEvent:O})}}):me?(this._active=!0,O.preventDefault(),setTimeout(function(){return $.reset()},0),{cameraAnimation:function(Ae){return Ae.easeTo({duration:300,zoom:Ae.getZoom()-1,around:Ae.unproject(me)},{originalEvent:O})}}):void 0},wa.prototype.touchcancel=function(){this.reset()},wa.prototype.enable=function(){this._enabled=!0},wa.prototype.disable=function(){this._enabled=!1,this.reset()},wa.prototype.isEnabled=function(){return this._enabled},wa.prototype.isActive=function(){return this._active};var Yr=function(O){this.reset(),this._clickTolerance=O.clickTolerance||1};Yr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Yr.prototype._correctButton=function(O,j){return!1},Yr.prototype._move=function(O,j){return{}},Yr.prototype.mousedown=function(O,j){if(!this._lastPoint){var U=c.mouseButton(O);this._correctButton(O,U)&&(this._lastPoint=j,this._eventButton=U)}},Yr.prototype.mousemoveWindow=function(O,j){var U=this._lastPoint;if(U&&(O.preventDefault(),this._moved||!(j.dist(U)<this._clickTolerance)))return this._moved=!0,this._lastPoint=j,this._move(U,j)},Yr.prototype.mouseupWindow=function(O){c.mouseButton(O)===this._eventButton&&(this._moved&&c.suppressClick(),this.reset())},Yr.prototype.enable=function(){this._enabled=!0},Yr.prototype.disable=function(){this._enabled=!1,this.reset()},Yr.prototype.isEnabled=function(){return this._enabled},Yr.prototype.isActive=function(){return this._active};var Ea=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.mousedown=function(U,$){O.prototype.mousedown.call(this,U,$),this._lastPoint&&(this._active=!0)},j.prototype._correctButton=function(U,$){return 0===$&&!U.ctrlKey},j.prototype._move=function(U,$){return{around:$,panDelta:$.sub(U)}},j}(Yr),va=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype._correctButton=function(U,$){return 0===$&&U.ctrlKey||2===$},j.prototype._move=function(U,$){var le=.8*($.x-U.x);if(le)return this._active=!0,{bearingDelta:le}},j.prototype.contextmenu=function(U){U.preventDefault()},j}(Yr),Ki=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype._correctButton=function(U,$){return 0===$&&U.ctrlKey||2===$},j.prototype._move=function(U,$){var le=-.5*($.y-U.y);if(le)return this._active=!0,{pitchDelta:le}},j.prototype.contextmenu=function(U){U.preventDefault()},j}(Yr),Ar=function(O){this._minTouches=1,this._clickTolerance=O.clickTolerance||1,this.reset()};Ar.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new r.Point(0,0)},Ar.prototype.touchstart=function(O,j,U){return this._calculateTransform(O,j,U)},Ar.prototype.touchmove=function(O,j,U){if(this._active)return O.preventDefault(),this._calculateTransform(O,j,U)},Ar.prototype.touchend=function(O,j,U){this._calculateTransform(O,j,U),this._active&&U.length<this._minTouches&&this.reset()},Ar.prototype.touchcancel=function(){this.reset()},Ar.prototype._calculateTransform=function(O,j,U){U.length>0&&(this._active=!0);var $=Mr(U,j),le=new r.Point(0,0),me=new r.Point(0,0),Ae=0;for(var De in $){var Le=$[De],Qe=this._touches[De];Qe&&(le._add(Le),me._add(Le.sub(Qe)),Ae++,$[De]=Le)}if(this._touches=$,!(Ae<this._minTouches)&&me.mag()){var rt=me.div(Ae);if(this._sum._add(rt),!(this._sum.mag()<this._clickTolerance))return{around:le.div(Ae),panDelta:rt}}},Ar.prototype.enable=function(){this._enabled=!0},Ar.prototype.disable=function(){this._enabled=!1,this.reset()},Ar.prototype.isEnabled=function(){return this._enabled},Ar.prototype.isActive=function(){return this._active};var Di=function(){this.reset()};function ea(O,j,U){for(var $=0;$<O.length;$++)if(O[$].identifier===U)return j[$]}function mi(O,j){return Math.log(O/j)/Math.LN2}Di.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Di.prototype._start=function(O){},Di.prototype._move=function(O,j,U){return{}},Di.prototype.touchstart=function(O,j,U){this._firstTwoTouches||U.length<2||(this._firstTwoTouches=[U[0].identifier,U[1].identifier],this._start([j[0],j[1]]))},Di.prototype.touchmove=function(O,j,U){if(this._firstTwoTouches){O.preventDefault();var $=this._firstTwoTouches,me=$[1],Ae=ea(U,j,$[0]),De=ea(U,j,me);if(Ae&&De){var Le=this._aroundCenter?null:Ae.add(De).div(2);return this._move([Ae,De],Le,O)}}},Di.prototype.touchend=function(O,j,U){if(this._firstTwoTouches){var $=this._firstTwoTouches,me=$[1],Ae=ea(U,j,$[0]),De=ea(U,j,me);Ae&&De||(this._active&&c.suppressClick(),this.reset())}},Di.prototype.touchcancel=function(){this.reset()},Di.prototype.enable=function(O){this._enabled=!0,this._aroundCenter=!!O&&"center"===O.around},Di.prototype.disable=function(){this._enabled=!1,this.reset()},Di.prototype.isEnabled=function(){return this._enabled},Di.prototype.isActive=function(){return this._active};var $a=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.reset=function(){O.prototype.reset.call(this),delete this._distance,delete this._startDistance},j.prototype._start=function(U){this._startDistance=this._distance=U[0].dist(U[1])},j.prototype._move=function(U,$){var le=this._distance;if(this._distance=U[0].dist(U[1]),this._active||!(Math.abs(mi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:mi(this._distance,le),pinchAround:$}},j}(Di);function Wo(O,j){return 180*O.angleWith(j)/Math.PI}var Fs=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.reset=function(){O.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},j.prototype._start=function(U){this._startVector=this._vector=U[0].sub(U[1]),this._minDiameter=U[0].dist(U[1])},j.prototype._move=function(U,$){var le=this._vector;if(this._vector=U[0].sub(U[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Wo(this._vector,le),pinchAround:$}},j.prototype._isBelowThreshold=function(U){this._minDiameter=Math.min(this._minDiameter,U.mag());var $=25/(Math.PI*this._minDiameter)*360,le=Wo(U,this._startVector);return Math.abs(le)<$},j}(Di);function bl(O){return Math.abs(O.y)>Math.abs(O.x)}var Js=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.reset=function(){O.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},j.prototype._start=function(U){this._lastPoints=U,bl(U[0].sub(U[1]))&&(this._valid=!1)},j.prototype._move=function(U,$,le){var me=U[0].sub(this._lastPoints[0]),Ae=U[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(me,Ae,le.timeStamp),this._valid)return this._lastPoints=U,this._active=!0,{pitchDelta:(me.y+Ae.y)/2*-.5}},j.prototype.gestureBeginsVertically=function(U,$,le){if(void 0!==this._valid)return this._valid;var me=U.mag()>=2,Ae=$.mag()>=2;if(me||Ae){if(!me||!Ae)return void 0===this._firstMove&&(this._firstMove=le),le-this._firstMove<100&&void 0;var De=U.y>0==$.y>0;return bl(U)&&bl($)&&De}},j}(Di),la={panStep:100,bearingStep:15,pitchStep:10},Vo=function(){var O=la;this._panStep=O.panStep,this._bearingStep=O.bearingStep,this._pitchStep=O.pitchStep};function qs(O){return O*(2-O)}Vo.prototype.reset=function(){this._active=!1},Vo.prototype.keydown=function(O){var j=this;if(!(O.altKey||O.ctrlKey||O.metaKey)){var U=0,$=0,le=0,me=0,Ae=0;switch(O.keyCode){case 61:case 107:case 171:case 187:U=1;break;case 189:case 109:case 173:U=-1;break;case 37:O.shiftKey?$=-1:(O.preventDefault(),me=-1);break;case 39:O.shiftKey?$=1:(O.preventDefault(),me=1);break;case 38:O.shiftKey?le=1:(O.preventDefault(),Ae=-1);break;case 40:O.shiftKey?le=-1:(O.preventDefault(),Ae=1);break;default:return}return{cameraAnimation:function(De){var Le=De.getZoom();De.easeTo({duration:300,easeId:"keyboardHandler",easing:qs,zoom:U?Math.round(Le)+U*(O.shiftKey?2:1):Le,bearing:De.getBearing()+$*j._bearingStep,pitch:De.getPitch()+le*j._pitchStep,offset:[-me*j._panStep,-Ae*j._panStep],center:De.getCenter()},{originalEvent:O})}}}},Vo.prototype.enable=function(){this._enabled=!0},Vo.prototype.disable=function(){this._enabled=!1,this.reset()},Vo.prototype.isEnabled=function(){return this._enabled},Vo.prototype.isActive=function(){return this._active};var ja=function(O,j){this._map=O,this._el=O.getCanvasContainer(),this._handler=j,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,r.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};ja.prototype.setZoomRate=function(O){this._defaultZoomRate=O},ja.prototype.setWheelZoomRate=function(O){this._wheelZoomRate=O},ja.prototype.isEnabled=function(){return!!this._enabled},ja.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},ja.prototype.isZooming=function(){return!!this._zooming},ja.prototype.enable=function(O){this.isEnabled()||(this._enabled=!0,this._aroundCenter=O&&"center"===O.around)},ja.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ja.prototype.wheel=function(O){if(this.isEnabled()){var j=O.deltaMode===r.window.WheelEvent.DOM_DELTA_LINE?40*O.deltaY:O.deltaY,U=r.browser.now(),$=U-(this._lastWheelEventTime||0);this._lastWheelEventTime=U,0!==j&&j%4.000244140625==0?this._type="wheel":0!==j&&Math.abs(j)<4?this._type="trackpad":$>400?(this._type=null,this._lastValue=j,this._timeout=setTimeout(this._onTimeout,40,O)):this._type||(this._type=Math.abs($*j)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,j+=this._lastValue)),O.shiftKey&&j&&(j/=4),this._type&&(this._lastWheelEvent=O,this._delta-=j,this._active||this._start(O)),O.preventDefault()}},ja.prototype._onTimeout=function(O){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(O)},ja.prototype._start=function(O){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var j=c.mousePos(this._el,O);this._around=r.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(j)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ja.prototype.renderFrame=function(){return this._onScrollFrame()},ja.prototype._onScrollFrame=function(){var O=this;if(this._frameId&&(this._frameId=null,this.isActive())){var j=this._map.transform;if(0!==this._delta){var U="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,$=2/(1+Math.exp(-Math.abs(this._delta*U)));this._delta<0&&0!==$&&($=1/$);var le="number"==typeof this._targetZoom?j.zoomScale(this._targetZoom):j.scale;this._targetZoom=Math.min(j.maxZoom,Math.max(j.minZoom,j.scaleZoom(le*$))),"wheel"===this._type&&(this._startZoom=j.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var me,Ae="number"==typeof this._targetZoom?this._targetZoom:j.zoom,De=this._startZoom,Le=this._easing,Qe=!1;if("wheel"===this._type&&De&&Le){var rt=Math.min((r.browser.now()-this._lastWheelEventTime)/200,1),dt=Le(rt);me=r.number(De,Ae,dt),rt<1?this._frameId||(this._frameId=!0):Qe=!0}else me=Ae,Qe=!0;return this._active=!0,Qe&&(this._active=!1,this._finishTimeout=setTimeout(function(){O._zooming=!1,O._handler._triggerRenderFrame(),delete O._targetZoom,delete O._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Qe,zoomDelta:me-j.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ja.prototype._smoothOutEasing=function(O){var j=r.ease;if(this._prevEase){var U=this._prevEase,$=(r.browser.now()-U.start)/U.duration,le=U.easing($+.01)-U.easing($),me=.27/Math.sqrt(le*le+1e-4)*.01,Ae=Math.sqrt(.0729-me*me);j=r.bezier(me,Ae,.25,1)}return this._prevEase={start:r.browser.now(),duration:O,easing:j},j},ja.prototype.reset=function(){this._active=!1};var Va=function(O,j){this._clickZoom=O,this._tapZoom=j};Va.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Va.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Va.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Va.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var So=function(){this.reset()};So.prototype.reset=function(){this._active=!1},So.prototype.dblclick=function(O,j){return O.preventDefault(),{cameraAnimation:function(U){U.easeTo({duration:300,zoom:U.getZoom()+(O.shiftKey?-1:1),around:U.unproject(j)},{originalEvent:O})}}},So.prototype.enable=function(){this._enabled=!0},So.prototype.disable=function(){this._enabled=!1,this.reset()},So.prototype.isEnabled=function(){return this._enabled},So.prototype.isActive=function(){return this._active};var so=function(){this._tap=new fa({numTouches:1,numTaps:1}),this.reset()};so.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},so.prototype.touchstart=function(O,j,U){this._swipePoint||(this._tapTime&&O.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?U.length>0&&(this._swipePoint=j[0],this._swipeTouch=U[0].identifier):this._tap.touchstart(O,j,U))},so.prototype.touchmove=function(O,j,U){if(this._tapTime){if(this._swipePoint){if(U[0].identifier!==this._swipeTouch)return;var $=j[0],le=$.y-this._swipePoint.y;return this._swipePoint=$,O.preventDefault(),this._active=!0,{zoomDelta:le/128}}}else this._tap.touchmove(O,j,U)},so.prototype.touchend=function(O,j,U){this._tapTime?this._swipePoint&&0===U.length&&this.reset():this._tap.touchend(O,j,U)&&(this._tapTime=O.timeStamp)},so.prototype.touchcancel=function(){this.reset()},so.prototype.enable=function(){this._enabled=!0},so.prototype.disable=function(){this._enabled=!1,this.reset()},so.prototype.isEnabled=function(){return this._enabled},so.prototype.isActive=function(){return this._active};var As=function(O,j,U){this._el=O,this._mousePan=j,this._touchPan=U};As.prototype.enable=function(O){this._inertiaOptions=O||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},As.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},As.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},As.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Fa=function(O,j,U){this._pitchWithRotate=O.pitchWithRotate,this._mouseRotate=j,this._mousePitch=U};Fa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Fa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Fa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Fa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ks=function(O,j,U,$){this._el=O,this._touchZoom=j,this._touchRotate=U,this._tapDragZoom=$,this._rotationDisabled=!1,this._enabled=!0};Ks.prototype.enable=function(O){this._touchZoom.enable(O),this._rotationDisabled||this._touchRotate.enable(O),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ks.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ks.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ks.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ks.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ks.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var yu=function(O){return O.zoom||O.drag||O.pitch||O.rotate},vu=function(O){function j(){O.apply(this,arguments)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j}(r.Event);function Uc(O){return O.panDelta&&O.panDelta.mag()||O.zoomDelta||O.bearingDelta||O.pitchDelta}var ns=function(O,j){this._map=O,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Br(O),this._bearingSnap=j.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(j),r.bindAll(["handleEvent","handleWindowEvent"],this);var U=this._el;this._listeners=[[U,"touchstart",{passive:!1}],[U,"touchmove",{passive:!1}],[U,"touchend",void 0],[U,"touchcancel",void 0],[U,"mousedown",void 0],[U,"mousemove",void 0],[U,"mouseup",void 0],[r.window.document,"mousemove",{capture:!0}],[r.window.document,"mouseup",void 0],[U,"mouseover",void 0],[U,"mouseout",void 0],[U,"dblclick",void 0],[U,"click",void 0],[U,"keydown",{capture:!1}],[U,"keyup",void 0],[U,"wheel",{passive:!1}],[U,"contextmenu",void 0],[r.window,"blur",void 0]];for(var $=0,le=this._listeners;$<le.length;$+=1){var me=le[$],Ae=me[0];c.addEventListener(Ae,me[1],Ae===r.window.document?this.handleWindowEvent:this.handleEvent,me[2])}};ns.prototype.destroy=function(){for(var O=0,j=this._listeners;O<j.length;O+=1){var U=j[O],$=U[0];c.removeEventListener($,U[1],$===r.window.document?this.handleWindowEvent:this.handleEvent,U[2])}},ns.prototype._addDefaultHandlers=function(O){var j=this._map,U=j.getCanvasContainer();this._add("mapEvent",new ur(j,O));var $=j.boxZoom=new Jr(j,O);this._add("boxZoom",$);var le=new wa,me=new So;j.doubleClickZoom=new Va(me,le),this._add("tapZoom",le),this._add("clickZoom",me);var Ae=new so;this._add("tapDragZoom",Ae);var De=j.touchPitch=new Js;this._add("touchPitch",De);var Le=new va(O),Qe=new Ki(O);j.dragRotate=new Fa(O,Le,Qe),this._add("mouseRotate",Le,["mousePitch"]),this._add("mousePitch",Qe,["mouseRotate"]);var rt=new Ea(O),dt=new Ar(O);j.dragPan=new As(U,rt,dt),this._add("mousePan",rt),this._add("touchPan",dt,["touchZoom","touchRotate"]);var Pt=new Fs,Nt=new $a;j.touchZoomRotate=new Ks(U,Nt,Pt,Ae),this._add("touchRotate",Pt,["touchPan","touchZoom"]),this._add("touchZoom",Nt,["touchPan","touchRotate"]);var Rt=j.scrollZoom=new ja(j,this);this._add("scrollZoom",Rt,["mousePan"]);var Ft=j.keyboard=new Vo;this._add("keyboard",Ft),this._add("blockableMapEvent",new Ni(j));for(var It=0,Xt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];It<Xt.length;It+=1){var $t=Xt[It];O.interactive&&O[$t]&&j[$t].enable(O[$t])}},ns.prototype._add=function(O,j,U){this._handlers.push({handlerName:O,handler:j,allowed:U}),this._handlersById[O]=j},ns.prototype.stop=function(){if(!this._updatingCamera){for(var O=0,j=this._handlers;O<j.length;O+=1)j[O].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ns.prototype.isActive=function(){for(var O=0,j=this._handlers;O<j.length;O+=1)if(j[O].handler.isActive())return!0;return!1},ns.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ns.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ns.prototype.isMoving=function(){return Boolean(yu(this._eventsInProgress))||this.isZooming()},ns.prototype._blockedByActive=function(O,j,U){for(var $ in O)if($!==U&&(!j||j.indexOf($)<0))return!0;return!1},ns.prototype.handleWindowEvent=function(O){this.handleEvent(O,O.type+"Window")},ns.prototype._getMapTouches=function(O){for(var j=[],U=0,$=O;U<$.length;U+=1){var le=$[U];this._el.contains(le.target)&&j.push(le)}return j},ns.prototype.handleEvent=function(O,j){if("blur"!==O.type){this._updatingCamera=!0;for(var U="renderFrame"===O.type?void 0:O,$={needsRenderFrame:!1},le={},me={},Ae=O.touches?this._getMapTouches(O.touches):void 0,De=Ae?c.touchPos(this._el,Ae):c.mousePos(this._el,O),Le=0,Qe=this._handlers;Le<Qe.length;Le+=1){var rt=Qe[Le],dt=rt.handlerName,Pt=rt.handler,Nt=rt.allowed;if(Pt.isEnabled()){var Rt=void 0;this._blockedByActive(me,Nt,dt)?Pt.reset():Pt[j||O.type]&&(Rt=Pt[j||O.type](O,De,Ae),this.mergeHandlerResult($,le,Rt,dt,U),Rt&&Rt.needsRenderFrame&&this._triggerRenderFrame()),(Rt||Pt.isActive())&&(me[dt]=Pt)}}var Ft={};for(var It in this._previousActiveHandlers)me[It]||(Ft[It]=U);this._previousActiveHandlers=me,(Object.keys(Ft).length||Uc($))&&(this._changes.push([$,le,Ft]),this._triggerRenderFrame()),(Object.keys(me).length||Uc($))&&this._map._stop(!0),this._updatingCamera=!1;var Xt=$.cameraAnimation;Xt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Xt(this._map))}else this.stop()},ns.prototype.mergeHandlerResult=function(O,j,U,$,le){if(U){r.extend(O,U);var me={handlerName:$,originalEvent:U.originalEvent||le};void 0!==U.zoomDelta&&(j.zoom=me),void 0!==U.panDelta&&(j.drag=me),void 0!==U.pitchDelta&&(j.pitch=me),void 0!==U.bearingDelta&&(j.rotate=me)}},ns.prototype._applyChanges=function(){for(var O={},j={},U={},$=0,le=this._changes;$<le.length;$+=1){var me=le[$],Ae=me[0],De=me[1],Le=me[2];Ae.panDelta&&(O.panDelta=(O.panDelta||new r.Point(0,0))._add(Ae.panDelta)),Ae.zoomDelta&&(O.zoomDelta=(O.zoomDelta||0)+Ae.zoomDelta),Ae.bearingDelta&&(O.bearingDelta=(O.bearingDelta||0)+Ae.bearingDelta),Ae.pitchDelta&&(O.pitchDelta=(O.pitchDelta||0)+Ae.pitchDelta),void 0!==Ae.around&&(O.around=Ae.around),void 0!==Ae.pinchAround&&(O.pinchAround=Ae.pinchAround),Ae.noInertia&&(O.noInertia=Ae.noInertia),r.extend(j,De),r.extend(U,Le)}this._updateMapTransform(O,j,U),this._changes=[]},ns.prototype._updateMapTransform=function(O,j,U){var $=this._map,le=$.transform;if(!Uc(O))return this._fireEvents(j,U);var me=O.panDelta,Ae=O.zoomDelta,De=O.bearingDelta,Le=O.pitchDelta,Qe=O.around,rt=O.pinchAround;void 0!==rt&&(Qe=rt),$._stop(!0),Qe=Qe||$.transform.centerPoint;var dt=le.pointLocation(me?Qe.sub(me):Qe);De&&(le.bearing+=De),Le&&(le.pitch+=Le),Ae&&(le.zoom+=Ae),le.setLocationAtPoint(dt,Qe),this._map._update(),O.noInertia||this._inertia.record(O),this._fireEvents(j,U)},ns.prototype._fireEvents=function(O,j){var U=this,$=yu(this._eventsInProgress),le=yu(O),me={};for(var Ae in O)this._eventsInProgress[Ae]||(me[Ae+"start"]=O[Ae].originalEvent),this._eventsInProgress[Ae]=O[Ae];for(var Le in!$&&le&&this._fireEvent("movestart",le.originalEvent),me)this._fireEvent(Le,me[Le]);for(var Qe in O.rotate&&(this._bearingChanged=!0),le&&this._fireEvent("move",le.originalEvent),O)this._fireEvent(Qe,O[Qe].originalEvent);var dt,Pt={};for(var Nt in this._eventsInProgress){var Rt=this._eventsInProgress[Nt],Ft=Rt.handlerName,It=Rt.originalEvent;this._handlersById[Ft].isActive()||(delete this._eventsInProgress[Nt],Pt[Nt+"end"]=dt=j[Ft]||It)}for(var Xt in Pt)this._fireEvent(Xt,Pt[Xt]);var $t=yu(this._eventsInProgress);if(($||le)&&!$t){this._updatingCamera=!0;var en=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),bn=function(Cn){return 0!==Cn&&-U._bearingSnap<Cn&&Cn<U._bearingSnap};en?(bn(en.bearing||this._map.getBearing())&&(en.bearing=0),this._map.easeTo(en,{originalEvent:dt})):(this._map.fire(new r.Event("moveend",{originalEvent:dt})),bn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ns.prototype._fireEvent=function(O,j){this._map.fire(new r.Event(O,j?{originalEvent:j}:{}))},ns.prototype._triggerRenderFrame=function(){var O=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(j){delete O._frameId,O.handleEvent(new vu("renderFrame",{timeStamp:j})),O._applyChanges()}))};var lc=function(O){function j(U,$){O.call(this),this._moving=!1,this._zooming=!1,this.transform=U,this._bearingSnap=$.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.getCenter=function(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)},j.prototype.setCenter=function(U,$){return this.jumpTo({center:U},$)},j.prototype.panBy=function(U,$,le){return U=r.Point.convert(U).mult(-1),this.panTo(this.transform.center,r.extend({offset:U},$),le)},j.prototype.panTo=function(U,$,le){return this.easeTo(r.extend({center:U},$),le)},j.prototype.getZoom=function(){return this.transform.zoom},j.prototype.setZoom=function(U,$){return this.jumpTo({zoom:U},$),this},j.prototype.zoomTo=function(U,$,le){return this.easeTo(r.extend({zoom:U},$),le)},j.prototype.zoomIn=function(U,$){return this.zoomTo(this.getZoom()+1,U,$),this},j.prototype.zoomOut=function(U,$){return this.zoomTo(this.getZoom()-1,U,$),this},j.prototype.getBearing=function(){return this.transform.bearing},j.prototype.setBearing=function(U,$){return this.jumpTo({bearing:U},$),this},j.prototype.getPadding=function(){return this.transform.padding},j.prototype.setPadding=function(U,$){return this.jumpTo({padding:U},$),this},j.prototype.rotateTo=function(U,$,le){return this.easeTo(r.extend({bearing:U},$),le)},j.prototype.resetNorth=function(U,$){return this.rotateTo(0,r.extend({duration:1e3},U),$),this},j.prototype.resetNorthPitch=function(U,$){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},U),$),this},j.prototype.snapToNorth=function(U,$){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(U,$):this},j.prototype.getPitch=function(){return this.transform.pitch},j.prototype.setPitch=function(U,$){return this.jumpTo({pitch:U},$),this},j.prototype.cameraForBounds=function(U,$){return U=r.LngLatBounds.convert(U),this._cameraForBoxAndBearing(U.getNorthWest(),U.getSouthEast(),0,$)},j.prototype._cameraForBoxAndBearing=function(U,$,le,me){var Ae={top:0,bottom:0,right:0,left:0};if("number"==typeof(me=r.extend({padding:Ae,offset:[0,0],maxZoom:this.transform.maxZoom},me)).padding){var De=me.padding;me.padding={top:De,bottom:De,right:De,left:De}}me.padding=r.extend(Ae,me.padding);var Le=this.transform,Qe=Le.padding,rt=Le.project(r.LngLat.convert(U)),dt=Le.project(r.LngLat.convert($)),Pt=rt.rotate(-le*Math.PI/180),Nt=dt.rotate(-le*Math.PI/180),Rt=new r.Point(Math.max(Pt.x,Nt.x),Math.max(Pt.y,Nt.y)),Ft=new r.Point(Math.min(Pt.x,Nt.x),Math.min(Pt.y,Nt.y)),It=Rt.sub(Ft),Xt=(Le.width-(Qe.left+Qe.right+me.padding.left+me.padding.right))/It.x,$t=(Le.height-(Qe.top+Qe.bottom+me.padding.top+me.padding.bottom))/It.y;if(!($t<0||Xt<0)){var en=Math.min(Le.scaleZoom(Le.scale*Math.min(Xt,$t)),me.maxZoom),bn=r.Point.convert(me.offset),Gn=new r.Point(bn.x+(me.padding.left-me.padding.right)/2,bn.y+(me.padding.top-me.padding.bottom)/2).mult(Le.scale/Le.zoomScale(en));return{center:Le.unproject(rt.add(dt).div(2).sub(Gn)),zoom:en,bearing:le}}r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},j.prototype.fitBounds=function(U,$,le){return this._fitInternal(this.cameraForBounds(U,$),$,le)},j.prototype.fitScreenCoordinates=function(U,$,le,me,Ae){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(r.Point.convert(U)),this.transform.pointLocation(r.Point.convert($)),le,me),me,Ae)},j.prototype._fitInternal=function(U,$,le){return U?(delete($=r.extend(U,$)).padding,$.linear?this.easeTo($,le):this.flyTo($,le)):this},j.prototype.jumpTo=function(U,$){this.stop();var le=this.transform,me=!1,Ae=!1,De=!1;return"zoom"in U&&le.zoom!==+U.zoom&&(me=!0,le.zoom=+U.zoom),void 0!==U.center&&(le.center=r.LngLat.convert(U.center)),"bearing"in U&&le.bearing!==+U.bearing&&(Ae=!0,le.bearing=+U.bearing),"pitch"in U&&le.pitch!==+U.pitch&&(De=!0,le.pitch=+U.pitch),null==U.padding||le.isPaddingEqual(U.padding)||(le.padding=U.padding),this.fire(new r.Event("movestart",$)).fire(new r.Event("move",$)),me&&this.fire(new r.Event("zoomstart",$)).fire(new r.Event("zoom",$)).fire(new r.Event("zoomend",$)),Ae&&this.fire(new r.Event("rotatestart",$)).fire(new r.Event("rotate",$)).fire(new r.Event("rotateend",$)),De&&this.fire(new r.Event("pitchstart",$)).fire(new r.Event("pitch",$)).fire(new r.Event("pitchend",$)),this.fire(new r.Event("moveend",$))},j.prototype.easeTo=function(U,$){var le=this;this._stop(!1,U.easeId),(!1===(U=r.extend({offset:[0,0],duration:500,easing:r.ease},U)).animate||!U.essential&&r.browser.prefersReducedMotion)&&(U.duration=0);var me=this.transform,Ae=this.getZoom(),De=this.getBearing(),Le=this.getPitch(),Qe=this.getPadding(),rt="zoom"in U?+U.zoom:Ae,dt="bearing"in U?this._normalizeBearing(U.bearing,De):De,Pt="pitch"in U?+U.pitch:Le,Nt="padding"in U?U.padding:me.padding,Rt=r.Point.convert(U.offset),Ft=me.centerPoint.add(Rt),It=me.pointLocation(Ft),Xt=r.LngLat.convert(U.center||It);this._normalizeCenter(Xt);var $t,en,bn=me.project(It),Cn=me.project(Xt).sub(bn),$n=me.zoomScale(rt-Ae);U.around&&($t=r.LngLat.convert(U.around),en=me.locationPoint($t));var Gn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||rt!==Ae,this._rotating=this._rotating||De!==dt,this._pitching=this._pitching||Pt!==Le,this._padding=!me.isPaddingEqual(Nt),this._easeId=U.easeId,this._prepareEase($,U.noMoveStart,Gn),clearTimeout(this._easeEndTimeoutID),this._ease(function(pr){if(le._zooming&&(me.zoom=r.number(Ae,rt,pr)),le._rotating&&(me.bearing=r.number(De,dt,pr)),le._pitching&&(me.pitch=r.number(Le,Pt,pr)),le._padding&&(me.interpolatePadding(Qe,Nt,pr),Ft=me.centerPoint.add(Rt)),$t)me.setLocationAtPoint($t,en);else{var dr=me.zoomScale(me.zoom-Ae),Er=rt>Ae?Math.min(2,$n):Math.max(.5,$n),wr=Math.pow(Er,1-pr),fi=me.unproject(bn.add(Cn.mult(pr*wr)).mult(dr));me.setLocationAtPoint(me.renderWorldCopies?fi.wrap():fi,Ft)}le._fireMoveEvents($)},function(pr){le._afterEase($,pr)},U),this},j.prototype._prepareEase=function(U,$,le){void 0===le&&(le={}),this._moving=!0,$||le.moving||this.fire(new r.Event("movestart",U)),this._zooming&&!le.zooming&&this.fire(new r.Event("zoomstart",U)),this._rotating&&!le.rotating&&this.fire(new r.Event("rotatestart",U)),this._pitching&&!le.pitching&&this.fire(new r.Event("pitchstart",U))},j.prototype._fireMoveEvents=function(U){this.fire(new r.Event("move",U)),this._zooming&&this.fire(new r.Event("zoom",U)),this._rotating&&this.fire(new r.Event("rotate",U)),this._pitching&&this.fire(new r.Event("pitch",U))},j.prototype._afterEase=function(U,$){if(!this._easeId||!$||this._easeId!==$){delete this._easeId;var le=this._zooming,me=this._rotating,Ae=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,le&&this.fire(new r.Event("zoomend",U)),me&&this.fire(new r.Event("rotateend",U)),Ae&&this.fire(new r.Event("pitchend",U)),this.fire(new r.Event("moveend",U))}},j.prototype.flyTo=function(U,$){var le=this;if(!U.essential&&r.browser.prefersReducedMotion){var me=r.pick(U,["center","zoom","bearing","pitch","around"]);return this.jumpTo(me,$)}this.stop(),U=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},U);var Ae=this.transform,De=this.getZoom(),Le=this.getBearing(),Qe=this.getPitch(),rt=this.getPadding(),dt="zoom"in U?r.clamp(+U.zoom,Ae.minZoom,Ae.maxZoom):De,Pt="bearing"in U?this._normalizeBearing(U.bearing,Le):Le,Nt="pitch"in U?+U.pitch:Qe,Rt="padding"in U?U.padding:Ae.padding,Ft=Ae.zoomScale(dt-De),It=r.Point.convert(U.offset),Xt=Ae.centerPoint.add(It),$t=Ae.pointLocation(Xt),en=r.LngLat.convert(U.center||$t);this._normalizeCenter(en);var bn=Ae.project($t),Cn=Ae.project(en).sub(bn),$n=U.curve,Gn=Math.max(Ae.width,Ae.height),pr=Gn/Ft,dr=Cn.mag();if("minZoom"in U){var Er=r.clamp(Math.min(U.minZoom,De,dt),Ae.minZoom,Ae.maxZoom),wr=Gn/Ae.zoomScale(Er-De);$n=Math.sqrt(wr/dr*2)}var fi=$n*$n;function Mi(Ii){var sa=(pr*pr-Gn*Gn+(Ii?-1:1)*fi*fi*dr*dr)/(2*(Ii?pr:Gn)*fi*dr);return Math.log(Math.sqrt(sa*sa+1)-sa)}function Wi(Ii){return(Math.exp(Ii)-Math.exp(-Ii))/2}function lr(Ii){return(Math.exp(Ii)+Math.exp(-Ii))/2}var Ur=Mi(0),ki=function(Ii){return lr(Ur)/lr(Ur+$n*Ii)},vi=function(Ii){return Gn*((lr(Ur)*(Wi(sa=Ur+$n*Ii)/lr(sa))-Wi(Ur))/fi)/dr;var sa},Oi=(Mi(1)-Ur)/$n;if(Math.abs(dr)<1e-6||!isFinite(Oi)){if(Math.abs(Gn-pr)<1e-6)return this.easeTo(U,$);var $i=pr<Gn?-1:1;Oi=Math.abs(Math.log(pr/Gn))/$n,vi=function(){return 0},ki=function(Ii){return Math.exp($i*$n*Ii)}}return U.duration="duration"in U?+U.duration:1e3*Oi/("screenSpeed"in U?+U.screenSpeed/$n:+U.speed),U.maxDuration&&U.duration>U.maxDuration&&(U.duration=0),this._zooming=!0,this._rotating=Le!==Pt,this._pitching=Nt!==Qe,this._padding=!Ae.isPaddingEqual(Rt),this._prepareEase($,!1),this._ease(function(Ii){var sa=Ii*Oi,ta=1/ki(sa);Ae.zoom=1===Ii?dt:De+Ae.scaleZoom(ta),le._rotating&&(Ae.bearing=r.number(Le,Pt,Ii)),le._pitching&&(Ae.pitch=r.number(Qe,Nt,Ii)),le._padding&&(Ae.interpolatePadding(rt,Rt,Ii),Xt=Ae.centerPoint.add(It));var na=1===Ii?en:Ae.unproject(bn.add(Cn.mult(vi(sa))).mult(ta));Ae.setLocationAtPoint(Ae.renderWorldCopies?na.wrap():na,Xt),le._fireMoveEvents($)},function(){return le._afterEase($)},U),this},j.prototype.isEasing=function(){return!!this._easeFrameId},j.prototype.stop=function(){return this._stop()},j.prototype._stop=function(U,$){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var le=this._onEaseEnd;delete this._onEaseEnd,le.call(this,$)}if(!U){var me=this.handlers;me&&me.stop()}return this},j.prototype._ease=function(U,$,le){!1===le.animate||0===le.duration?(U(1),$()):(this._easeStart=r.browser.now(),this._easeOptions=le,this._onEaseFrame=U,this._onEaseEnd=$,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},j.prototype._renderFrameCallback=function(){var U=Math.min((r.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(U)),U<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},j.prototype._normalizeBearing=function(U,$){U=r.wrap(U,-180,180);var le=Math.abs(U-$);return Math.abs(U-360-$)<le&&(U-=360),Math.abs(U+360-$)<le&&(U+=360),U},j.prototype._normalizeCenter=function(U){var $=this.transform;if($.renderWorldCopies&&!$.lngRange){var le=U.lng-$.center.lng;U.lng+=le>180?-360:le<-180?360:0}},j}(r.Evented),ds=function(O){void 0===O&&(O={}),this.options=O,r.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};ds.prototype.getDefaultPosition=function(){return"bottom-right"},ds.prototype.onAdd=function(O){var j=this.options&&this.options.compact;return this._map=O,this._container=c.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=c.create("div","mapboxgl-ctrl-attrib-inner",this._container),j&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===j&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},ds.prototype.onRemove=function(){c.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},ds.prototype._updateEditLink=function(){var O=this._editLink;O||(O=this._editLink=this._container.querySelector(".mapbox-improve-map"));var j=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||r.config.ACCESS_TOKEN}];if(O){var U=j.reduce(function($,le,me){return le.value&&($+=le.key+"="+le.value+(me<j.length-1?"&":"")),$},"?");O.href=r.config.FEEDBACK_URL+"/"+U+(this._map._hash?this._map._hash.getHashString(!0):""),O.rel="noopener nofollow"}},ds.prototype._updateData=function(O){!O||"metadata"!==O.sourceDataType&&"style"!==O.dataType||(this._updateAttributions(),this._updateEditLink())},ds.prototype._updateAttributions=function(){if(this._map.style){var O=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?O=O.concat(this.options.customAttribution.map(function(De){return"string"!=typeof De?"":De})):"string"==typeof this.options.customAttribution&&O.push(this.options.customAttribution)),this._map.style.stylesheet){var j=this._map.style.stylesheet;this.styleOwner=j.owner,this.styleId=j.id}var U=this._map.style.sourceCaches;for(var $ in U){var le=U[$];if(le.used){var me=le.getSource();me.attribution&&O.indexOf(me.attribution)<0&&O.push(me.attribution)}}O.sort(function(De,Le){return De.length-Le.length});var Ae=(O=O.filter(function(De,Le){for(var Qe=Le+1;Qe<O.length;Qe++)if(O[Qe].indexOf(De)>=0)return!1;return!0})).join(" | ");Ae!==this._attribHTML&&(this._attribHTML=Ae,O.length?(this._innerContainer.innerHTML=Ae,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},ds.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var ql=function(){r.bindAll(["_updateLogo"],this),r.bindAll(["_updateCompact"],this)};ql.prototype.onAdd=function(O){this._map=O,this._container=c.create("div","mapboxgl-ctrl");var j=c.create("a","mapboxgl-ctrl-logo");return j.target="_blank",j.rel="noopener nofollow",j.href="https://www.mapbox.com/",j.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),j.setAttribute("rel","noopener nofollow"),this._container.appendChild(j),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ql.prototype.onRemove=function(){c.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ql.prototype.getDefaultPosition=function(){return"bottom-left"},ql.prototype._updateLogo=function(O){O&&"metadata"!==O.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},ql.prototype._logoRequired=function(){if(this._map.style){var O=this._map.style.sourceCaches;for(var j in O)if(O[j].getSource().mapbox_logo)return!0;return!1}},ql.prototype._updateCompact=function(){var O=this._container.children;if(O.length){var j=O[0];this._map.getCanvasContainer().offsetWidth<250?j.classList.add("mapboxgl-compact"):j.classList.remove("mapboxgl-compact")}};var Gi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Gi.prototype.add=function(O){var j=++this._id;return this._queue.push({callback:O,id:j,cancelled:!1}),j},Gi.prototype.remove=function(O){for(var j=this._currentlyRunning,U=0,$=j?this._queue.concat(j):this._queue;U<$.length;U+=1){var le=$[U];if(le.id===O)return void(le.cancelled=!0)}},Gi.prototype.run=function(O){void 0===O&&(O=0);var j=this._currentlyRunning=this._queue;this._queue=[];for(var U=0,$=j;U<$.length;U+=1){var le=$[U];if(!le.cancelled&&(le.callback(O),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Gi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ia={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Xu=r.window.HTMLImageElement,wc=r.window.HTMLElement,au=r.window.ImageBitmap,_l={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ll=function(O){function j($){var le=this;if(null!=($=r.extend({},_l,$)).minZoom&&null!=$.maxZoom&&$.minZoom>$.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=$.minPitch&&null!=$.maxPitch&&$.minPitch>$.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=$.minPitch&&$.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=$.maxPitch&&$.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var me=new on($.minZoom,$.maxZoom,$.minPitch,$.maxPitch,$.renderWorldCopies);if(O.call(this,me,$),this._interactive=$.interactive,this._maxTileCacheSize=$.maxTileCacheSize,this._failIfMajorPerformanceCaveat=$.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=$.preserveDrawingBuffer,this._antialias=$.antialias,this._trackResize=$.trackResize,this._bearingSnap=$.bearingSnap,this._refreshExpiredTiles=$.refreshExpiredTiles,this._fadeDuration=$.fadeDuration,this._crossSourceCollisions=$.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=$.collectResourceTiming,this._renderTaskQueue=new Gi,this._controls=[],this._mapId=r.uniqueId(),this._locale=r.extend({},ia,$.locale),this._requestManager=new r.RequestManager($.transformRequest,$.accessToken),"string"==typeof $.container){if(this._container=r.window.document.getElementById($.container),!this._container)throw new Error("Container '"+$.container+"' not found.")}else{if(!($.container instanceof wc))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=$.container}if($.maxBounds&&this.setMaxBounds($.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return le._update(!1)}),this.on("moveend",function(){return le._update(!1)}),this.on("zoom",function(){return le._update(!0)}),void 0!==r.window&&(r.window.addEventListener("online",this._onWindowOnline,!1),r.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ns(this,$),this._hash=$.hash&&new Vn("string"==typeof $.hash&&$.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:$.center,zoom:$.zoom,bearing:$.bearing,pitch:$.pitch}),$.bounds&&(this.resize(),this.fitBounds($.bounds,r.extend({},$.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=$.localIdeographFontFamily,$.style&&this.setStyle($.style,{localIdeographFontFamily:$.localIdeographFontFamily}),$.attributionControl&&this.addControl(new ds({customAttribution:$.customAttribution})),this.addControl(new ql,$.logoPosition),this.on("style.load",function(){le.transform.unmodified&&le.jumpTo(le.style.stylesheet)}),this.on("data",function(De){le._update("style"===De.dataType),le.fire(new r.Event(De.dataType+"data",De))}),this.on("dataloading",function(De){le.fire(new r.Event(De.dataType+"dataloading",De))})}O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j;var U={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return j.prototype._getMapId=function(){return this._mapId},j.prototype.addControl=function($,le){if(void 0===le&&$.getDefaultPosition&&(le=$.getDefaultPosition()),void 0===le&&(le="top-right"),!$||!$.onAdd)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var me=$.onAdd(this);this._controls.push($);var Ae=this._controlPositions[le];return-1!==le.indexOf("bottom")?Ae.insertBefore(me,Ae.firstChild):Ae.appendChild(me),this},j.prototype.removeControl=function($){if(!$||!$.onRemove)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var le=this._controls.indexOf($);return le>-1&&this._controls.splice(le,1),$.onRemove(this),this},j.prototype.resize=function($){var le=this._containerDimensions(),me=le[0],Ae=le[1];this._resizeCanvas(me,Ae),this.transform.resize(me,Ae),this.painter.resize(me,Ae);var De=!this._moving;return De&&(this.stop(),this.fire(new r.Event("movestart",$)).fire(new r.Event("move",$))),this.fire(new r.Event("resize",$)),De&&this.fire(new r.Event("moveend",$)),this},j.prototype.getBounds=function(){return this.transform.getBounds()},j.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},j.prototype.setMaxBounds=function($){return this.transform.setMaxBounds(r.LngLatBounds.convert($)),this._update()},j.prototype.setMinZoom=function($){if(($=null==$?-2:$)>=-2&&$<=this.transform.maxZoom)return this.transform.minZoom=$,this._update(),this.getZoom()<$&&this.setZoom($),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},j.prototype.getMinZoom=function(){return this.transform.minZoom},j.prototype.setMaxZoom=function($){if(($=null==$?22:$)>=this.transform.minZoom)return this.transform.maxZoom=$,this._update(),this.getZoom()>$&&this.setZoom($),this;throw new Error("maxZoom must be greater than the current minZoom")},j.prototype.getMaxZoom=function(){return this.transform.maxZoom},j.prototype.setMinPitch=function($){if(($=null==$?0:$)<0)throw new Error("minPitch must be greater than or equal to 0");if($>=0&&$<=this.transform.maxPitch)return this.transform.minPitch=$,this._update(),this.getPitch()<$&&this.setPitch($),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},j.prototype.getMinPitch=function(){return this.transform.minPitch},j.prototype.setMaxPitch=function($){if(($=null==$?60:$)>60)throw new Error("maxPitch must be less than or equal to 60");if($>=this.transform.minPitch)return this.transform.maxPitch=$,this._update(),this.getPitch()>$&&this.setPitch($),this;throw new Error("maxPitch must be greater than the current minPitch")},j.prototype.getMaxPitch=function(){return this.transform.maxPitch},j.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},j.prototype.setRenderWorldCopies=function($){return this.transform.renderWorldCopies=$,this._update()},j.prototype.project=function($){return this.transform.locationPoint(r.LngLat.convert($))},j.prototype.unproject=function($){return this.transform.pointLocation(r.Point.convert($))},j.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},j.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},j.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},j.prototype._createDelegatedListener=function($,le,me){var Ae,De=this;if("mouseenter"===$||"mouseover"===$){var Le=!1;return{layer:le,listener:me,delegates:{mousemove:function(rt){var dt=De.getLayer(le)?De.queryRenderedFeatures(rt.point,{layers:[le]}):[];dt.length?Le||(Le=!0,me.call(De,new ai($,De,rt.originalEvent,{features:dt}))):Le=!1},mouseout:function(){Le=!1}}}}if("mouseleave"===$||"mouseout"===$){var Qe=!1;return{layer:le,listener:me,delegates:{mousemove:function(rt){(De.getLayer(le)?De.queryRenderedFeatures(rt.point,{layers:[le]}):[]).length?Qe=!0:Qe&&(Qe=!1,me.call(De,new ai($,De,rt.originalEvent)))},mouseout:function(rt){Qe&&(Qe=!1,me.call(De,new ai($,De,rt.originalEvent)))}}}}return{layer:le,listener:me,delegates:(Ae={},Ae[$]=function(rt){var dt=De.getLayer(le)?De.queryRenderedFeatures(rt.point,{layers:[le]}):[];dt.length&&(rt.features=dt,me.call(De,rt),delete rt.features)},Ae)}},j.prototype.on=function($,le,me){if(void 0===me)return O.prototype.on.call(this,$,le);var Ae=this._createDelegatedListener($,le,me);for(var De in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[$]=this._delegatedListeners[$]||[],this._delegatedListeners[$].push(Ae),Ae.delegates)this.on(De,Ae.delegates[De]);return this},j.prototype.once=function($,le,me){if(void 0===me)return O.prototype.once.call(this,$,le);var Ae=this._createDelegatedListener($,le,me);for(var De in Ae.delegates)this.once(De,Ae.delegates[De]);return this},j.prototype.off=function($,le,me){var Ae=this;return void 0===me?O.prototype.off.call(this,$,le):(this._delegatedListeners&&this._delegatedListeners[$]&&function(De){for(var Le=De[$],Qe=0;Qe<Le.length;Qe++){var rt=Le[Qe];if(rt.layer===le&&rt.listener===me){for(var dt in rt.delegates)Ae.off(dt,rt.delegates[dt]);return Le.splice(Qe,1),Ae}}}(this._delegatedListeners),this)},j.prototype.queryRenderedFeatures=function($,le){if(!this.style)return[];var me;if(void 0!==le||void 0===$||$ instanceof r.Point||Array.isArray($)||(le=$,$=void 0),le=le||{},($=$||[[0,0],[this.transform.width,this.transform.height]])instanceof r.Point||"number"==typeof $[0])me=[r.Point.convert($)];else{var Ae=r.Point.convert($[0]),De=r.Point.convert($[1]);me=[Ae,new r.Point(De.x,Ae.y),De,new r.Point(Ae.x,De.y),Ae]}return this.style.queryRenderedFeatures(me,le,this.transform)},j.prototype.querySourceFeatures=function($,le){return this.style.querySourceFeatures($,le)},j.prototype.setStyle=function($,le){return!1!==(le=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},le)).diff&&le.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&$?(this._diffStyle($,le),this):(this._localIdeographFontFamily=le.localIdeographFontFamily,this._updateStyle($,le))},j.prototype._getUIString=function($){var le=this._locale[$];if(null==le)throw new Error("Missing UI string '"+$+"'");return le},j.prototype._updateStyle=function($,le){return this.style&&(this.style.setEventedParent(null),this.style._remove()),$?(this.style=new Ri(this,le||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof $?this.style.loadURL($):this.style.loadJSON($),this):(delete this.style,this)},j.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ri(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},j.prototype._diffStyle=function($,le){var me=this;if("string"==typeof $){var Ae=this._requestManager.normalizeStyleURL($),De=this._requestManager.transformRequest(Ae,r.ResourceType.Style);r.getJSON(De,function(Le,Qe){Le?me.fire(new r.ErrorEvent(Le)):Qe&&me._updateDiff(Qe,le)})}else"object"==typeof $&&this._updateDiff($,le)},j.prototype._updateDiff=function($,le){try{this.style.setState($)&&this._update(!0)}catch(me){r.warnOnce("Unable to perform style diff: "+(me.message||me.error||me)+".  Rebuilding the style from scratch."),this._updateStyle($,le)}},j.prototype.getStyle=function(){if(this.style)return this.style.serialize()},j.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():r.warnOnce("There is no style added to the map.")},j.prototype.addSource=function($,le){return this._lazyInitEmptyStyle(),this.style.addSource($,le),this._update(!0)},j.prototype.isSourceLoaded=function($){var le=this.style&&this.style.sourceCaches[$];if(void 0!==le)return le.loaded();this.fire(new r.ErrorEvent(new Error("There is no source with ID '"+$+"'")))},j.prototype.areTilesLoaded=function(){var $=this.style&&this.style.sourceCaches;for(var le in $){var me=$[le]._tiles;for(var Ae in me){var De=me[Ae];if("loaded"!==De.state&&"errored"!==De.state)return!1}}return!0},j.prototype.addSourceType=function($,le,me){return this._lazyInitEmptyStyle(),this.style.addSourceType($,le,me)},j.prototype.removeSource=function($){return this.style.removeSource($),this._update(!0)},j.prototype.getSource=function($){return this.style.getSource($)},j.prototype.addImage=function($,le,me){void 0===me&&(me={});var Ae=me.pixelRatio;void 0===Ae&&(Ae=1);var De=me.sdf;void 0===De&&(De=!1);var Le=me.stretchX,Qe=me.stretchY,rt=me.content;if(this._lazyInitEmptyStyle(),le instanceof Xu||au&&le instanceof au){var dt=r.browser.getImageData(le);this.style.addImage($,{data:new r.RGBAImage({width:dt.width,height:dt.height},dt.data),pixelRatio:Ae,stretchX:Le,stretchY:Qe,content:rt,sdf:De,version:0})}else{if(void 0===le.width||void 0===le.height)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var $t=le;this.style.addImage($,{data:new r.RGBAImage({width:le.width,height:le.height},new Uint8Array(le.data)),pixelRatio:Ae,stretchX:Le,stretchY:Qe,content:rt,sdf:De,version:0,userImage:$t}),$t.onAdd&&$t.onAdd(this,$)}},j.prototype.updateImage=function($,le){var me=this.style.getImage($);if(!me)return this.fire(new r.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Ae=le instanceof Xu||au&&le instanceof au?r.browser.getImageData(le):le,De=Ae.width,Le=Ae.height,Qe=Ae.data;return void 0===De||void 0===Le?this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):De!==me.data.width||Le!==me.data.height?this.fire(new r.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(me.data.replace(Qe,!(le instanceof Xu||au&&le instanceof au)),void this.style.updateImage($,me))},j.prototype.hasImage=function($){return $?!!this.style.getImage($):(this.fire(new r.ErrorEvent(new Error("Missing required image id"))),!1)},j.prototype.removeImage=function($){this.style.removeImage($)},j.prototype.loadImage=function($,le){r.getImage(this._requestManager.transformRequest($,r.ResourceType.Image),le)},j.prototype.listImages=function(){return this.style.listImages()},j.prototype.addLayer=function($,le){return this._lazyInitEmptyStyle(),this.style.addLayer($,le),this._update(!0)},j.prototype.moveLayer=function($,le){return this.style.moveLayer($,le),this._update(!0)},j.prototype.removeLayer=function($){return this.style.removeLayer($),this._update(!0)},j.prototype.getLayer=function($){return this.style.getLayer($)},j.prototype.setLayerZoomRange=function($,le,me){return this.style.setLayerZoomRange($,le,me),this._update(!0)},j.prototype.setFilter=function($,le,me){return void 0===me&&(me={}),this.style.setFilter($,le,me),this._update(!0)},j.prototype.getFilter=function($){return this.style.getFilter($)},j.prototype.setPaintProperty=function($,le,me,Ae){return void 0===Ae&&(Ae={}),this.style.setPaintProperty($,le,me,Ae),this._update(!0)},j.prototype.getPaintProperty=function($,le){return this.style.getPaintProperty($,le)},j.prototype.setLayoutProperty=function($,le,me,Ae){return void 0===Ae&&(Ae={}),this.style.setLayoutProperty($,le,me,Ae),this._update(!0)},j.prototype.getLayoutProperty=function($,le){return this.style.getLayoutProperty($,le)},j.prototype.setLight=function($,le){return void 0===le&&(le={}),this._lazyInitEmptyStyle(),this.style.setLight($,le),this._update(!0)},j.prototype.getLight=function(){return this.style.getLight()},j.prototype.setFeatureState=function($,le){return this.style.setFeatureState($,le),this._update()},j.prototype.removeFeatureState=function($,le){return this.style.removeFeatureState($,le),this._update()},j.prototype.getFeatureState=function($){return this.style.getFeatureState($)},j.prototype.getContainer=function(){return this._container},j.prototype.getCanvasContainer=function(){return this._canvasContainer},j.prototype.getCanvas=function(){return this._canvas},j.prototype._containerDimensions=function(){var $=0,le=0;return this._container&&($=this._container.clientWidth||400,le=this._container.clientHeight||300),[$,le]},j.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==r.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&r.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},j.prototype._setupContainer=function(){var $=this._container;$.classList.add("mapboxgl-map"),(this._missingCSSCanary=c.create("div","mapboxgl-canary",$)).style.visibility="hidden",this._detectMissingCSS();var le=this._canvasContainer=c.create("div","mapboxgl-canvas-container",$);this._interactive&&le.classList.add("mapboxgl-interactive"),this._canvas=c.create("canvas","mapboxgl-canvas",le),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var me=this._containerDimensions();this._resizeCanvas(me[0],me[1]);var Ae=this._controlContainer=c.create("div","mapboxgl-control-container",$),De=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Le){De[Le]=c.create("div","mapboxgl-ctrl-"+Le,Ae)})},j.prototype._resizeCanvas=function($,le){var me=r.browser.devicePixelRatio||1;this._canvas.width=me*$,this._canvas.height=me*le,this._canvas.style.width=$+"px",this._canvas.style.height=le+"px"},j.prototype._setupPainter=function(){var $=r.extend({},u.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),le=this._canvas.getContext("webgl",$)||this._canvas.getContext("experimental-webgl",$);le?(this.painter=new Ma(le,this.transform),r.webpSupported.testSupport(le)):this.fire(new r.ErrorEvent(new Error("Failed to initialize WebGL")))},j.prototype._contextLost=function($){$.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:$}))},j.prototype._contextRestored=function($){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:$}))},j.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},j.prototype._update=function($){return this.style?(this._styleDirty=this._styleDirty||$,this._sourcesDirty=!0,this.triggerRepaint(),this):this},j.prototype._requestRenderFrame=function($){return this._update(),this._renderTaskQueue.add($)},j.prototype._cancelRenderFrame=function($){this._renderTaskQueue.remove($)},j.prototype._render=function($){var le,me=this,Ae=0,De=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(le=De.createQueryEXT(),De.beginQueryEXT(De.TIME_ELAPSED_EXT,le),Ae=r.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run($),!this._removed){var Le=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Qe=this.transform.zoom,rt=r.browser.now();this.style.zoomHistory.update(Qe,rt);var dt=new r.EvaluationParameters(Qe,{now:rt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Pt=dt.crossFadingFactor();1===Pt&&Pt===this._crossFadingFactor||(Le=!0,this._crossFadingFactor=Pt),this.style.update(dt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||Le)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Nt=r.browser.now()-Ae;De.endQueryEXT(De.TIME_ELAPSED_EXT,le),setTimeout(function(){var Ft=De.getQueryObjectEXT(le,De.QUERY_RESULT_EXT)/1e6;De.deleteQueryEXT(le),me.fire(new r.Event("gpu-timing-frame",{cpuTime:Nt,gpuTime:Ft}))},50)}if(this.listens("gpu-timing-layer")){var Rt=this.painter.collectGpuTimers();setTimeout(function(){var Ft=me.painter.queryGpuTimers(Rt);me.fire(new r.Event("gpu-timing-layer",{layerTimes:Ft}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new r.Event("idle"))),this}},j.prototype.remove=function(){this._hash&&this._hash.remove();for(var $=0,le=this._controls;$<le.length;$+=1)le[$].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==r.window&&(r.window.removeEventListener("resize",this._onWindowResize,!1),r.window.removeEventListener("online",this._onWindowOnline,!1));var me=this.painter.context.gl.getExtension("WEBGL_lose_context");me&&me.loseContext(),Tc(this._canvasContainer),Tc(this._controlContainer),Tc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new r.Event("remove"))},j.prototype.triggerRepaint=function(){var $=this;this.style&&!this._frame&&(this._frame=r.browser.frame(function(le){$._frame=null,$._render(le)}))},j.prototype._onWindowOnline=function(){this._update()},j.prototype._onWindowResize=function($){this._trackResize&&this.resize({originalEvent:$})._update()},U.showTileBoundaries.get=function(){return!!this._showTileBoundaries},U.showTileBoundaries.set=function($){this._showTileBoundaries!==$&&(this._showTileBoundaries=$,this._update())},U.showPadding.get=function(){return!!this._showPadding},U.showPadding.set=function($){this._showPadding!==$&&(this._showPadding=$,this._update())},U.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},U.showCollisionBoxes.set=function($){this._showCollisionBoxes!==$&&(this._showCollisionBoxes=$,$?this.style._generateCollisionBoxes():this._update())},U.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},U.showOverdrawInspector.set=function($){this._showOverdrawInspector!==$&&(this._showOverdrawInspector=$,this._update())},U.repaint.get=function(){return!!this._repaint},U.repaint.set=function($){this._repaint!==$&&(this._repaint=$,this.triggerRepaint())},U.vertices.get=function(){return!!this._vertices},U.vertices.set=function($){this._vertices=$,this._update()},j.prototype._setCacheLimits=function($,le){r.setCacheLimits($,le)},U.version.get=function(){return r.version},Object.defineProperties(j.prototype,U),j}(lc);function Tc(O){O.parentNode&&O.parentNode.removeChild(O)}var Ac={showCompass:!0,showZoom:!0,visualizePitch:!1},Ja=function(O){var j=this;this.options=r.extend({},Ac,O),this._container=c.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(U){return U.preventDefault()}),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(U){return j._map.zoomIn({},{originalEvent:U})}),c.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(U){return j._map.zoomOut({},{originalEvent:U})}),c.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(U){j.options.visualizePitch?j._map.resetNorthPitch({},{originalEvent:U}):j._map.resetNorth({},{originalEvent:U})}),this._compassIcon=c.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ja.prototype._updateZoomButtons=function(){var O=this._map.getZoom();this._zoomInButton.disabled=O===this._map.getMaxZoom(),this._zoomOutButton.disabled=O===this._map.getMinZoom()},Ja.prototype._rotateCompassArrow=function(){var O=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=O},Ja.prototype.onAdd=function(O){return this._map=O,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ba(this._map,this._compass,this.options.visualizePitch)),this._container},Ja.prototype.onRemove=function(){c.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ja.prototype._createButton=function(O,j){var U=c.create("button",O,this._container);return U.type="button",U.addEventListener("click",j),U},Ja.prototype._setButtonTitle=function(O,j){var U=this._map._getUIString("NavigationControl."+j);O.title=U,O.setAttribute("aria-label",U)};var ba=function(O,j,U){void 0===U&&(U=!1),this._clickTolerance=10,this.element=j,this.mouseRotate=new va({clickTolerance:O.dragRotate._mouseRotate._clickTolerance}),this.map=O,U&&(this.mousePitch=new Ki({clickTolerance:O.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),c.addEventListener(j,"mousedown",this.mousedown),c.addEventListener(j,"touchstart",this.touchstart,{passive:!1}),c.addEventListener(j,"touchmove",this.touchmove),c.addEventListener(j,"touchend",this.touchend),c.addEventListener(j,"touchcancel",this.reset)};function xl(O,j,U){if(O=new r.LngLat(O.lng,O.lat),j){var $=new r.LngLat(O.lng-360,O.lat),le=new r.LngLat(O.lng+360,O.lat),me=U.locationPoint(O).distSqr(j);U.locationPoint($).distSqr(j)<me?O=$:U.locationPoint(le).distSqr(j)<me&&(O=le)}for(;Math.abs(O.lng-U.center.lng)>180;){var Ae=U.locationPoint(O);if(Ae.x>=0&&Ae.y>=0&&Ae.x<=U.width&&Ae.y<=U.height)break;O.lng>U.center.lng?O.lng-=360:O.lng+=360}return O}ba.prototype.down=function(O,j){this.mouseRotate.mousedown(O,j),this.mousePitch&&this.mousePitch.mousedown(O,j),c.disableDrag()},ba.prototype.move=function(O,j){var U=this.map,$=this.mouseRotate.mousemoveWindow(O,j);if($&&$.bearingDelta&&U.setBearing(U.getBearing()+$.bearingDelta),this.mousePitch){var le=this.mousePitch.mousemoveWindow(O,j);le&&le.pitchDelta&&U.setPitch(U.getPitch()+le.pitchDelta)}},ba.prototype.off=function(){var O=this.element;c.removeEventListener(O,"mousedown",this.mousedown),c.removeEventListener(O,"touchstart",this.touchstart,{passive:!1}),c.removeEventListener(O,"touchmove",this.touchmove),c.removeEventListener(O,"touchend",this.touchend),c.removeEventListener(O,"touchcancel",this.reset),this.offTemp()},ba.prototype.offTemp=function(){c.enableDrag(),c.removeEventListener(r.window,"mousemove",this.mousemove),c.removeEventListener(r.window,"mouseup",this.mouseup)},ba.prototype.mousedown=function(O){this.down(r.extend({},O,{ctrlKey:!0,preventDefault:function(){return O.preventDefault()}}),c.mousePos(this.element,O)),c.addEventListener(r.window,"mousemove",this.mousemove),c.addEventListener(r.window,"mouseup",this.mouseup)},ba.prototype.mousemove=function(O){this.move(O,c.mousePos(this.element,O))},ba.prototype.mouseup=function(O){this.mouseRotate.mouseupWindow(O),this.mousePitch&&this.mousePitch.mouseupWindow(O),this.offTemp()},ba.prototype.touchstart=function(O){1!==O.targetTouches.length?this.reset():(this._startPos=this._lastPos=c.touchPos(this.element,O.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return O.preventDefault()}},this._startPos))},ba.prototype.touchmove=function(O){1!==O.targetTouches.length?this.reset():(this._lastPos=c.touchPos(this.element,O.targetTouches)[0],this.move({preventDefault:function(){return O.preventDefault()}},this._lastPos))},ba.prototype.touchend=function(O){0===O.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},ba.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var _o={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ps(O,j,U){var $=O.classList;for(var le in _o)$.remove("mapboxgl-"+U+"-anchor-"+le);$.add("mapboxgl-"+U+"-anchor-"+j)}var Ju,Mc=function(O){function j(U,$){var le=this;if(O.call(this),(U instanceof r.window.HTMLElement||$)&&(U=r.extend({element:U},$)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=U&&U.anchor||"center",this._color=U&&U.color||"#3FB1CE",this._draggable=U&&U.draggable||!1,this._state="inactive",this._rotation=U&&U.rotation||0,this._rotationAlignment=U&&U.rotationAlignment||"auto",this._pitchAlignment=U&&U.pitchAlignment&&"auto"!==U.pitchAlignment?U.pitchAlignment:this._rotationAlignment,U&&U.element)this._element=U.element,this._offset=r.Point.convert(U&&U.offset||[0,0]);else{this._defaultMarker=!0,this._element=c.create("div"),this._element.setAttribute("aria-label","Map marker");var me=c.createNS("http://www.w3.org/2000/svg","svg");me.setAttributeNS(null,"display","block"),me.setAttributeNS(null,"height","41px"),me.setAttributeNS(null,"width","27px"),me.setAttributeNS(null,"viewBox","0 0 27 41");var Ae=c.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"stroke","none"),Ae.setAttributeNS(null,"stroke-width","1"),Ae.setAttributeNS(null,"fill","none"),Ae.setAttributeNS(null,"fill-rule","evenodd");var De=c.createNS("http://www.w3.org/2000/svg","g");De.setAttributeNS(null,"fill-rule","nonzero");var Le=c.createNS("http://www.w3.org/2000/svg","g");Le.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Le.setAttributeNS(null,"fill","#000000");for(var Qe=0,rt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Qe<rt.length;Qe+=1){var dt=rt[Qe],Pt=c.createNS("http://www.w3.org/2000/svg","ellipse");Pt.setAttributeNS(null,"opacity","0.04"),Pt.setAttributeNS(null,"cx","10.5"),Pt.setAttributeNS(null,"cy","5.80029008"),Pt.setAttributeNS(null,"rx",dt.rx),Pt.setAttributeNS(null,"ry",dt.ry),Le.appendChild(Pt)}var Nt=c.createNS("http://www.w3.org/2000/svg","g");Nt.setAttributeNS(null,"fill",this._color);var Rt=c.createNS("http://www.w3.org/2000/svg","path");Rt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Nt.appendChild(Rt);var Ft=c.createNS("http://www.w3.org/2000/svg","g");Ft.setAttributeNS(null,"opacity","0.25"),Ft.setAttributeNS(null,"fill","#000000");var It=c.createNS("http://www.w3.org/2000/svg","path");It.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ft.appendChild(It);var Xt=c.createNS("http://www.w3.org/2000/svg","g");Xt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Xt.setAttributeNS(null,"fill","#FFFFFF");var $t=c.createNS("http://www.w3.org/2000/svg","g");$t.setAttributeNS(null,"transform","translate(8.0, 8.0)");var en=c.createNS("http://www.w3.org/2000/svg","circle");en.setAttributeNS(null,"fill","#000000"),en.setAttributeNS(null,"opacity","0.25"),en.setAttributeNS(null,"cx","5.5"),en.setAttributeNS(null,"cy","5.5"),en.setAttributeNS(null,"r","5.4999962");var bn=c.createNS("http://www.w3.org/2000/svg","circle");bn.setAttributeNS(null,"fill","#FFFFFF"),bn.setAttributeNS(null,"cx","5.5"),bn.setAttributeNS(null,"cy","5.5"),bn.setAttributeNS(null,"r","5.4999962"),$t.appendChild(en),$t.appendChild(bn),De.appendChild(Le),De.appendChild(Nt),De.appendChild(Ft),De.appendChild(Xt),De.appendChild($t),me.appendChild(De),this._element.appendChild(me),this._offset=r.Point.convert(U&&U.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Cn){Cn.preventDefault()}),this._element.addEventListener("mousedown",function(Cn){Cn.preventDefault()}),this._element.addEventListener("focus",function(){var Cn=le._map.getContainer();Cn.scrollTop=0,Cn.scrollLeft=0}),ps(this._element,this._anchor,"marker"),this._popup=null}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.addTo=function(U){return this.remove(),this._map=U,U.getCanvasContainer().appendChild(this._element),U.on("move",this._update),U.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},j.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),c.remove(this._element),this._popup&&this._popup.remove(),this},j.prototype.getLngLat=function(){return this._lngLat},j.prototype.setLngLat=function(U){return this._lngLat=r.LngLat.convert(U),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},j.prototype.getElement=function(){return this._element},j.prototype.setPopup=function(U){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),U){if(!("offset"in U.options)){var $=Math.sqrt(Math.pow(13.5,2)/2);U.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[$,-1*(24.6+$)],"bottom-right":[-$,-1*(24.6+$)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=U,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},j.prototype._onKeyPress=function(U){var $=U.code,le=U.charCode||U.keyCode;"Space"!==$&&"Enter"!==$&&32!==le&&13!==le||this.togglePopup()},j.prototype._onMapClick=function(U){var $=U.originalEvent.target,le=this._element;this._popup&&($===le||le.contains($))&&this.togglePopup()},j.prototype.getPopup=function(){return this._popup},j.prototype.togglePopup=function(){var U=this._popup;return U?(U.isOpen()?U.remove():U.addTo(this._map),this):this},j.prototype._update=function(U){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=xl(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var $="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?$="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&($="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var le="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?le="rotateX(0deg)":"map"===this._pitchAlignment&&(le="rotateX("+this._map.getPitch()+"deg)"),U&&"moveend"!==U.type||(this._pos=this._pos.round()),c.setTransform(this._element,_o[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+le+" "+$)}},j.prototype.getOffset=function(){return this._offset},j.prototype.setOffset=function(U){return this._offset=r.Point.convert(U),this._update(),this},j.prototype._onMove=function(U){this._pos=U.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag"))},j.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new r.Event("dragend")),this._state="inactive"},j.prototype._addDragHandler=function(U){this._element.contains(U.originalEvent.target)&&(U.preventDefault(),this._positionDelta=U.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},j.prototype.setDraggable=function(U){return this._draggable=!!U,this._map&&(U?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},j.prototype.isDraggable=function(){return this._draggable},j.prototype.setRotation=function(U){return this._rotation=U||0,this._update(),this},j.prototype.getRotation=function(){return this._rotation},j.prototype.setRotationAlignment=function(U){return this._rotationAlignment=U||"auto",this._update(),this},j.prototype.getRotationAlignment=function(){return this._rotationAlignment},j.prototype.setPitchAlignment=function(U){return this._pitchAlignment=U&&"auto"!==U?U:this._rotationAlignment,this._update(),this},j.prototype.getPitchAlignment=function(){return this._pitchAlignment},j}(r.Evented),uc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},kc=0,Fu=!1,Dc=function(O){function j(U){O.call(this),this.options=r.extend({},uc,U),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.onAdd=function(U){var $;return this._map=U,this._container=c.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),$=this._setupUI,void 0!==Ju?$(Ju):void 0!==r.window.navigator.permissions?r.window.navigator.permissions.query({name:"geolocation"}).then(function(le){$(Ju="denied"!==le.state)}):$(Ju=!!r.window.navigator.geolocation),this._container},j.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(r.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),c.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,kc=0,Fu=!1},j.prototype._isOutOfMapMaxBounds=function(U){var $=this._map.getMaxBounds(),le=U.coords;return $&&(le.longitude<$.getWest()||le.longitude>$.getEast()||le.latitude<$.getSouth()||le.latitude>$.getNorth())},j.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},j.prototype._onSuccess=function(U){if(this._map){if(this._isOutOfMapMaxBounds(U))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",U)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=U,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(U),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(U),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",U)),this._finish()}},j.prototype._updateCamera=function(U){var $=new r.LngLat(U.coords.longitude,U.coords.latitude),le=U.coords.accuracy,me=this._map.getBearing(),Ae=r.extend({bearing:me},this.options.fitBoundsOptions);this._map.fitBounds($.toBounds(le),Ae,{geolocateSource:!0})},j.prototype._updateMarker=function(U){if(U){var $=new r.LngLat(U.coords.longitude,U.coords.latitude);this._accuracyCircleMarker.setLngLat($).addTo(this._map),this._userLocationDotMarker.setLngLat($).addTo(this._map),this._accuracy=U.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},j.prototype._updateCircleRadius=function(){var U=this._map._container.clientHeight/2,$=this._map.unproject([0,U]),le=this._map.unproject([1,U]),me=$.distanceTo(le),Ae=Math.ceil(2*this._accuracy/me);this._circleElement.style.width=Ae+"px",this._circleElement.style.height=Ae+"px"},j.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},j.prototype._onError=function(U){if(this._map){if(this.options.trackUserLocation)if(1===U.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var $=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=$,this._geolocateButton.setAttribute("aria-label",$),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===U.code&&Fu)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",U)),this._finish()}},j.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},j.prototype._setupUI=function(U){var $=this;if(this._container.addEventListener("contextmenu",function(Ae){return Ae.preventDefault()}),this._geolocateButton=c.create("button","mapboxgl-ctrl-geolocate",this._container),c.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===U){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var le=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=le,this._geolocateButton.setAttribute("aria-label",le)}else{var me=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=me,this._geolocateButton.setAttribute("aria-label",me)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=c.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Mc(this._dotElement),this._circleElement=c.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Mc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Ae){Ae.geolocateSource||"ACTIVE_LOCK"!==$._watchState||Ae.originalEvent&&"resize"===Ae.originalEvent.type||($._watchState="BACKGROUND",$._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),$._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),$.fire(new r.Event("trackuserlocationend")))})},j.prototype.trigger=function(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":kc--,Fu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var U;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++kc>1?(U={maximumAge:6e5,timeout:0},Fu=!0):(U=this.options.positionOptions,Fu=!1),this._geolocationWatchID=r.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,U)}}else r.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},j.prototype._clearWatch=function(){r.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},j}(r.Evented),Hc={maxWidth:100,unit:"metric"},ou=function(O){this.options=r.extend({},Hc,O),r.bindAll(["_onMove","setUnit"],this)};function Gc(O,j,U){var $=U&&U.maxWidth||100,le=O._container.clientHeight/2,me=O.unproject([0,le]),Ae=O.unproject([$,le]),De=me.distanceTo(Ae);if(U&&"imperial"===U.unit){var Le=3.2808*De;Le>5280?cc(j,$,Le/5280,O._getUIString("ScaleControl.Miles")):cc(j,$,Le,O._getUIString("ScaleControl.Feet"))}else U&&"nautical"===U.unit?cc(j,$,De/1852,O._getUIString("ScaleControl.NauticalMiles")):De>=1e3?cc(j,$,De/1e3,O._getUIString("ScaleControl.Kilometers")):cc(j,$,De,O._getUIString("ScaleControl.Meters"))}function cc(O,j,U,$){var le,me,Ae,Qe,rt,De=(le=U,(me=Math.pow(10,(""+Math.floor(le)).length-1))*(Ae=(Ae=le/me)>=10?10:Ae>=5?5:Ae>=3?3:Ae>=2?2:Ae>=1?1:(Qe=Ae,rt=Math.pow(10,Math.ceil(-Math.log(Qe)/Math.LN10)),Math.round(Qe*rt)/rt)));O.style.width=j*(De/U)+"px",O.innerHTML=De+"&nbsp;"+$}ou.prototype.getDefaultPosition=function(){return"bottom-left"},ou.prototype._onMove=function(){Gc(this._map,this._container,this.options)},ou.prototype.onAdd=function(O){return this._map=O,this._container=c.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",O.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ou.prototype.onRemove=function(){c.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ou.prototype.setUnit=function(O){this.options.unit=O,Gc(this._map,this._container,this.options)};var Qs=function(O){this._fullscreen=!1,O&&O.container&&(O.container instanceof r.window.HTMLElement?this._container=O.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in r.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in r.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in r.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in r.window.document&&(this._fullscreenchange="MSFullscreenChange")};Qs.prototype.onAdd=function(O){return this._map=O,this._container||(this._container=this._map.getContainer()),this._controlContainer=c.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Qs.prototype.onRemove=function(){c.remove(this._controlContainer),this._map=null,r.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Qs.prototype._checkFullscreenSupport=function(){return!!(r.window.document.fullscreenEnabled||r.window.document.mozFullScreenEnabled||r.window.document.msFullscreenEnabled||r.window.document.webkitFullscreenEnabled)},Qs.prototype._setupUI=function(){var O=this._fullscreenButton=c.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);c.create("span","mapboxgl-ctrl-icon",O).setAttribute("aria-hidden",!0),O.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),r.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Qs.prototype._updateTitle=function(){var O=this._getTitle();this._fullscreenButton.setAttribute("aria-label",O),this._fullscreenButton.title=O},Qs.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Qs.prototype._isFullscreen=function(){return this._fullscreen},Qs.prototype._changeIcon=function(){(r.window.document.fullscreenElement||r.window.document.mozFullScreenElement||r.window.document.webkitFullscreenElement||r.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Qs.prototype._onClickFullscreen=function(){this._isFullscreen()?r.window.document.exitFullscreen?r.window.document.exitFullscreen():r.window.document.mozCancelFullScreen?r.window.document.mozCancelFullScreen():r.window.document.msExitFullscreen?r.window.document.msExitFullscreen():r.window.document.webkitCancelFullScreen&&r.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Nu={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Ec=function(O){function j(U){O.call(this),this.options=r.extend(Object.create(Nu),U),r.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return O&&(j.__proto__=O),(j.prototype=Object.create(O&&O.prototype)).constructor=j,j.prototype.addTo=function(U){return this._map&&this.remove(),this._map=U,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new r.Event("open")),this},j.prototype.isOpen=function(){return!!this._map},j.prototype.remove=function(){return this._content&&c.remove(this._content),this._container&&(c.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new r.Event("close")),this},j.prototype.getLngLat=function(){return this._lngLat},j.prototype.setLngLat=function(U){return this._lngLat=r.LngLat.convert(U),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},j.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},j.prototype.getElement=function(){return this._container},j.prototype.setText=function(U){return this.setDOMContent(r.window.document.createTextNode(U))},j.prototype.setHTML=function(U){var $,le=r.window.document.createDocumentFragment(),me=r.window.document.createElement("body");for(me.innerHTML=U;$=me.firstChild;)le.appendChild($);return this.setDOMContent(le)},j.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},j.prototype.setMaxWidth=function(U){return this.options.maxWidth=U,this._update(),this},j.prototype.setDOMContent=function(U){return this._createContent(),this._content.appendChild(U),this._update(),this},j.prototype.addClassName=function(U){this._container&&this._container.classList.add(U)},j.prototype.removeClassName=function(U){this._container&&this._container.classList.remove(U)},j.prototype.toggleClassName=function(U){if(this._container)return this._container.classList.toggle(U)},j.prototype._createContent=function(){this._content&&c.remove(this._content),this._content=c.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=c.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},j.prototype._onMouseUp=function(U){this._update(U.point)},j.prototype._onMouseMove=function(U){this._update(U.point)},j.prototype._onDrag=function(U){this._update(U.point)},j.prototype._update=function(U){var $=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=c.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=c.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Pt){return $._container.classList.add(Pt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=xl(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||U)){var me=this._pos=this._trackPointer&&U?U:this._map.project(this._lngLat),Ae=this.options.anchor,De=function Pt(Nt){if(Nt){if("number"==typeof Nt){var Rt=Math.round(Math.sqrt(.5*Math.pow(Nt,2)));return{center:new r.Point(0,0),top:new r.Point(0,Nt),"top-left":new r.Point(Rt,Rt),"top-right":new r.Point(-Rt,Rt),bottom:new r.Point(0,-Nt),"bottom-left":new r.Point(Rt,-Rt),"bottom-right":new r.Point(-Rt,-Rt),left:new r.Point(Nt,0),right:new r.Point(-Nt,0)}}if(Nt instanceof r.Point||Array.isArray(Nt)){var Ft=r.Point.convert(Nt);return{center:Ft,top:Ft,"top-left":Ft,"top-right":Ft,bottom:Ft,"bottom-left":Ft,"bottom-right":Ft,left:Ft,right:Ft}}return{center:r.Point.convert(Nt.center||[0,0]),top:r.Point.convert(Nt.top||[0,0]),"top-left":r.Point.convert(Nt["top-left"]||[0,0]),"top-right":r.Point.convert(Nt["top-right"]||[0,0]),bottom:r.Point.convert(Nt.bottom||[0,0]),"bottom-left":r.Point.convert(Nt["bottom-left"]||[0,0]),"bottom-right":r.Point.convert(Nt["bottom-right"]||[0,0]),left:r.Point.convert(Nt.left||[0,0]),right:r.Point.convert(Nt.right||[0,0])}}return Pt(new r.Point(0,0))}(this.options.offset);if(!Ae){var Le,Qe=this._container.offsetWidth,rt=this._container.offsetHeight;Le=me.y+De.bottom.y<rt?["top"]:me.y>this._map.transform.height-rt?["bottom"]:[],me.x<Qe/2?Le.push("left"):me.x>this._map.transform.width-Qe/2&&Le.push("right"),Ae=0===Le.length?"bottom":Le.join("-")}var dt=me.add(De[Ae]).round();c.setTransform(this._container,_o[Ae]+" translate("+dt.x+"px,"+dt.y+"px)"),ps(this._container,Ae,"popup")}},j.prototype._onClose=function(){this.remove()},j}(r.Evented),ge={version:r.version,supported:u,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:Ll,NavigationControl:Ja,GeolocateControl:Dc,AttributionControl:ds,ScaleControl:ou,FullscreenControl:Qs,Popup:Ec,Marker:Mc,Style:Ri,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.Point,MercatorCoordinate:r.MercatorCoordinate,Evented:r.Evented,config:r.config,prewarm:function(){mt().acquire(St)},clearPrewarmedResources:function(){var O=Lt;O&&(O.isPreloaded()&&1===O.numActive()?(O.release(St),Lt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return r.config.ACCESS_TOKEN},set accessToken(O){r.config.ACCESS_TOKEN=O},get baseApiUrl(){return r.config.API_URL},set baseApiUrl(O){r.config.API_URL=O},get workerCount(){return jt.workerCount},set workerCount(O){jt.workerCount=O},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(O){r.config.MAX_PARALLEL_IMAGE_REQUESTS=O},clearStorage:function(O){r.clearTileCache(O)},workerUrl:""};return ge}),b},"object"==typeof X&&void 0!==G?G.exports=m():(i=i||self).mapboxgl=m()},{}],462:[function(h,G,X){"use strict";G.exports=function(p){for(var r=1<<p+1,u=new Array(r),c=0;c<r;++c)u[c]=b(p,c);return u};var i=h("convex-hull");function m(p,r,u){for(var c=new Array(p),l=0;l<p;++l)c[l]=0,l===r&&(c[l]+=.5),l===u&&(c[l]+=.5);return c}function b(p,r){if(0===r||r===(1<<p+1)-1)return[];for(var u=[],c=[],l=0;l<=p;++l)if(r&1<<l){u.push(m(p,l-1,l-1)),c.push(null);for(var f=0;f<=p;++f)~r&1<<f&&(u.push(m(p,l-1,f-1)),c.push([l,f]))}var s=i(u),o=[];e:for(l=0;l<s.length;++l){var d=s[l],g=[];for(f=0;f<d.length;++f){if(!c[d[f]])continue e;g.push(c[d[f]].slice())}o.push(g)}return o}},{"convex-hull":141}],463:[function(h,G,X){var i=h("./normalize"),m=h("gl-mat4/create"),b=h("gl-mat4/clone"),p=h("gl-mat4/determinant"),r=h("gl-mat4/invert"),u=h("gl-mat4/transpose"),c={length:h("gl-vec3/length"),normalize:h("gl-vec3/normalize"),dot:h("gl-vec3/dot"),cross:h("gl-vec3/cross")},l=m(),f=m(),s=[0,0,0,0],o=[[0,0,0],[0,0,0],[0,0,0]],d=[0,0,0];function g(y,v,_,w,x){y[0]=v[0]*w+_[0]*x,y[1]=v[1]*w+_[1]*x,y[2]=v[2]*w+_[2]*x}G.exports=function(y,v,_,w,x,E){if(v||(v=[0,0,0]),_||(_=[0,0,0]),w||(w=[0,0,0]),x||(x=[0,0,0,1]),E||(E=[0,0,0,1]),!i(l,y)||(b(f,l),f[3]=0,f[7]=0,f[11]=0,f[15]=1,Math.abs(p(f)<1e-8)))return!1;var k,C,L,P,A,I,D,ae,te,R=l[3],S=l[7],N=l[11],B=l[12],H=l[13],Y=l[14],Q=l[15];if(0!==R||0!==S||0!==N){if(s[0]=R,s[1]=S,s[2]=N,s[3]=Q,!r(f,f))return!1;u(f,f),P=(C=s)[0],(k=x)[0]=(L=f)[0]*P+L[4]*(A=C[1])+L[8]*(I=C[2])+L[12]*(D=C[3]),k[1]=L[1]*P+L[5]*A+L[9]*I+L[13]*D,k[2]=L[2]*P+L[6]*A+L[10]*I+L[14]*D,k[3]=L[3]*P+L[7]*A+L[11]*I+L[15]*D}else x[0]=x[1]=x[2]=0,x[3]=1;if(v[0]=B,v[1]=H,v[2]=Y,(ae=o)[0][0]=(te=l)[0],ae[0][1]=te[1],ae[0][2]=te[2],ae[1][0]=te[4],ae[1][1]=te[5],ae[1][2]=te[6],ae[2][0]=te[8],ae[2][1]=te[9],ae[2][2]=te[10],_[0]=c.length(o[0]),c.normalize(o[0],o[0]),w[0]=c.dot(o[0],o[1]),g(o[1],o[1],o[0],1,-w[0]),_[1]=c.length(o[1]),c.normalize(o[1],o[1]),w[0]/=_[1],w[1]=c.dot(o[0],o[2]),g(o[2],o[2],o[0],1,-w[1]),w[2]=c.dot(o[1],o[2]),g(o[2],o[2],o[1],1,-w[2]),_[2]=c.length(o[2]),c.normalize(o[2],o[2]),w[1]/=_[2],w[2]/=_[2],c.cross(d,o[1],o[2]),c.dot(o[0],d)<0)for(var ne=0;ne<3;ne++)_[ne]*=-1,o[ne][0]*=-1,o[ne][1]*=-1,o[ne][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+o[0][0]-o[1][1]-o[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-o[0][0]+o[1][1]-o[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-o[0][0]-o[1][1]+o[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+o[0][0]+o[1][1]+o[2][2],0)),o[2][1]>o[1][2]&&(E[0]=-E[0]),o[0][2]>o[2][0]&&(E[1]=-E[1]),o[1][0]>o[0][1]&&(E[2]=-E[2]),!0}},{"./normalize":464,"gl-mat4/clone":284,"gl-mat4/create":286,"gl-mat4/determinant":287,"gl-mat4/invert":299,"gl-mat4/transpose":312,"gl-vec3/cross":368,"gl-vec3/dot":373,"gl-vec3/length":383,"gl-vec3/normalize":390}],464:[function(h,G,X){G.exports=function(i,m){var b=m[15];if(0===b)return!1;for(var p=1/b,r=0;r<16;r++)i[r]=m[r]*p;return!0}},{}],465:[function(h,G,X){var i=h("gl-vec3/lerp"),m=h("mat4-recompose"),b=h("mat4-decompose"),p=h("gl-mat4/determinant"),r=h("quat-slerp"),u=f(),c=f(),l=f();function f(){return{translate:s(),scale:s(1),skew:s(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function s(o){return[o||0,o||0,o||0]}G.exports=function(o,d,g,y){if(0===p(d)||0===p(g))return!1;var v=b(d,u.translate,u.scale,u.skew,u.perspective,u.quaternion),_=b(g,c.translate,c.scale,c.skew,c.perspective,c.quaternion);return!(!v||!_||(i(l.translate,u.translate,c.translate,y),i(l.skew,u.skew,c.skew,y),i(l.scale,u.scale,c.scale,y),i(l.perspective,u.perspective,c.perspective,y),r(l.quaternion,u.quaternion,c.quaternion,y),m(o,l.translate,l.scale,l.skew,l.perspective,l.quaternion),0))}},{"gl-mat4/determinant":287,"gl-vec3/lerp":384,"mat4-decompose":463,"mat4-recompose":466,"quat-slerp":529}],466:[function(h,G,X){var i={identity:h("gl-mat4/identity"),translate:h("gl-mat4/translate"),multiply:h("gl-mat4/multiply"),create:h("gl-mat4/create"),scale:h("gl-mat4/scale"),fromRotationTranslation:h("gl-mat4/fromRotationTranslation")},m=(i.create(),i.create());G.exports=function(b,p,r,u,c,l){return i.identity(b),i.fromRotationTranslation(b,l,p),b[3]=c[0],b[7]=c[1],b[11]=c[2],b[15]=c[3],i.identity(m),0!==u[2]&&(m[9]=u[2],i.multiply(b,b,m)),0!==u[1]&&(m[9]=0,m[8]=u[1],i.multiply(b,b,m)),0!==u[0]&&(m[8]=0,m[4]=u[0],i.multiply(b,b,m)),i.scale(b,b,r),b}},{"gl-mat4/create":286,"gl-mat4/fromRotationTranslation":290,"gl-mat4/identity":297,"gl-mat4/multiply":301,"gl-mat4/scale":309,"gl-mat4/translate":311}],467:[function(h,G,X){"use strict";G.exports=Math.log2||function(i){return Math.log(i)*Math.LOG2E}},{}],468:[function(h,G,X){"use strict";var i=h("binary-search-bounds"),m=h("mat4-interpolate"),b=h("gl-mat4/invert"),p=h("gl-mat4/rotateX"),r=h("gl-mat4/rotateY"),u=h("gl-mat4/rotateZ"),c=h("gl-mat4/lookAt"),l=h("gl-mat4/translate"),f=(h("gl-mat4/scale"),h("gl-vec3/normalize")),s=[0,0,0];function o(y){this._components=y.slice(),this._time=[0],this.prevMatrix=y.slice(),this.nextMatrix=y.slice(),this.computedMatrix=y.slice(),this.computedInverse=y.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}G.exports=function(y){return new o((y=y||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var d=o.prototype;d.recalcMatrix=function(y){var v=this._time,_=i.le(v,y),w=this.computedMatrix;if(!(_<0)){var x=this._components;if(_===v.length-1)for(var E=16*_,k=0;k<16;++k)w[k]=x[E++];else{var C=v[_+1]-v[_],L=(E=16*_,this.prevMatrix),P=!0;for(k=0;k<16;++k)L[k]=x[E++];var A=this.nextMatrix;for(k=0;k<16;++k)A[k]=x[E++],P=P&&L[k]===A[k];if(C<1e-6||P)for(k=0;k<16;++k)w[k]=L[k];else m(w,L,A,(y-v[_])/C)}var I=this.computedUp;I[0]=w[1],I[1]=w[5],I[2]=w[9],f(I,I);var D=this.computedInverse;b(D,w);var R=this.computedEye,S=D[15];R[0]=D[12]/S,R[1]=D[13]/S,R[2]=D[14]/S;var N=this.computedCenter,B=Math.exp(this.computedRadius[0]);for(k=0;k<3;++k)N[k]=R[k]-w[2+4*k]*B}},d.idle=function(y){if(!(y<this.lastT())){for(var v=this._components,_=v.length-16,w=0;w<16;++w)v.push(v[_++]);this._time.push(y)}},d.flush=function(y){var v=i.gt(this._time,y)-2;v<0||(this._time.splice(0,v),this._components.splice(0,16*v))},d.lastT=function(){return this._time[this._time.length-1]},d.lookAt=function(y,v,_,w){this.recalcMatrix(y),this.setMatrix(y,c(this.computedMatrix,v=v||this.computedEye,_=_||s,w=w||this.computedUp));for(var x=0,E=0;E<3;++E)x+=Math.pow(_[E]-v[E],2);x=Math.log(Math.sqrt(x)),this.computedRadius[0]=x},d.rotate=function(y,v,_,w){this.recalcMatrix(y);var x=this.computedInverse;v&&r(x,x,v),_&&p(x,x,_),w&&u(x,x,w),this.setMatrix(y,b(this.computedMatrix,x))};var g=[0,0,0];d.pan=function(y,v,_,w){g[0]=-(v||0),g[1]=-(_||0),g[2]=-(w||0),this.recalcMatrix(y);var x=this.computedInverse;l(x,x,g),this.setMatrix(y,b(x,x))},d.translate=function(y,v,_,w){g[0]=v||0,g[1]=_||0,g[2]=w||0,this.recalcMatrix(y);var x=this.computedMatrix;l(x,x,g),this.setMatrix(y,x)},d.setMatrix=function(y,v){if(!(y<this.lastT())){this._time.push(y);for(var _=0;_<16;++_)this._components.push(v[_])}},d.setDistance=function(y,v){this.computedRadius[0]=v},d.setDistanceLimits=function(y,v){var _=this._limits;_[0]=y,_[1]=v},d.getDistanceLimits=function(y){var v=this._limits;return y?(y[0]=v[0],y[1]=v[1],y):v}},{"binary-search-bounds":103,"gl-mat4/invert":299,"gl-mat4/lookAt":300,"gl-mat4/rotateX":306,"gl-mat4/rotateY":307,"gl-mat4/rotateZ":308,"gl-mat4/scale":309,"gl-mat4/translate":311,"gl-vec3/normalize":390,"mat4-interpolate":465}],469:[function(h,G,X){"use strict";G.exports=function(m){var b=m.length;if(b<3){for(var p=new Array(b),r=0;r<b;++r)p[r]=r;return 2===b&&m[0][0]===m[1][0]&&m[0][1]===m[1][1]?[0]:p}var u=new Array(b);for(r=0;r<b;++r)u[r]=r;u.sort(function(v,_){return m[v][0]-m[_][0]||m[v][1]-m[_][1]});var c=[u[0],u[1]],l=[u[0],u[1]];for(r=2;r<b;++r){for(var f=u[r],s=m[f],o=c.length;o>1&&i(m[c[o-2]],m[c[o-1]],s)<=0;)o-=1,c.pop();for(c.push(f),o=l.length;o>1&&i(m[l[o-2]],m[l[o-1]],s)>=0;)o-=1,l.pop();l.push(f)}p=new Array(l.length+c.length-2);for(var d=0,g=(r=0,c.length);r<g;++r)p[d++]=c[r];for(var y=l.length-2;y>0;--y)p[d++]=l[y];return p};var i=h("robust-orientation")[3]},{"robust-orientation":548}],470:[function(h,G,X){"use strict";G.exports=function(m,b){b||(b=m,m=window);var p=0,r=0,u=0,c={shift:!1,alt:!1,control:!1,meta:!1},l=!1;function f(E){var k=!1;return"altKey"in E&&(k=k||E.altKey!==c.alt,c.alt=!!E.altKey),"shiftKey"in E&&(k=k||E.shiftKey!==c.shift,c.shift=!!E.shiftKey),"ctrlKey"in E&&(k=k||E.ctrlKey!==c.control,c.control=!!E.ctrlKey),"metaKey"in E&&(k=k||E.metaKey!==c.meta,c.meta=!!E.metaKey),k}function s(E,k){var C=i.x(k),L=i.y(k);"buttons"in k&&(E=0|k.buttons),(E!==p||C!==r||L!==u||f(k))&&(p=0|E,r=C||0,u=L||0,b&&b(p,r,u,c))}function o(E){s(0,E)}function d(){(p||r||u||c.shift||c.alt||c.meta||c.control)&&(r=u=0,p=0,c.shift=c.alt=c.control=c.meta=!1,b&&b(0,0,0,c))}function g(E){f(E)&&b&&b(p,r,u,c)}function y(E){0===i.buttons(E)?s(0,E):s(p,E)}function v(E){s(p|i.buttons(E),E)}function _(E){s(p&~i.buttons(E),E)}function w(){l||(l=!0,m.addEventListener("mousemove",y),m.addEventListener("mousedown",v),m.addEventListener("mouseup",_),m.addEventListener("mouseleave",o),m.addEventListener("mouseenter",o),m.addEventListener("mouseout",o),m.addEventListener("mouseover",o),m.addEventListener("blur",d),m.addEventListener("keyup",g),m.addEventListener("keydown",g),m.addEventListener("keypress",g),m!==window&&(window.addEventListener("blur",d),window.addEventListener("keyup",g),window.addEventListener("keydown",g),window.addEventListener("keypress",g)))}w();var x={element:m};return Object.defineProperties(x,{enabled:{get:function(){return l},set:function(E){E?w():!l||(l=!1,m.removeEventListener("mousemove",y),m.removeEventListener("mousedown",v),m.removeEventListener("mouseup",_),m.removeEventListener("mouseleave",o),m.removeEventListener("mouseenter",o),m.removeEventListener("mouseout",o),m.removeEventListener("mouseover",o),m.removeEventListener("blur",d),m.removeEventListener("keyup",g),m.removeEventListener("keydown",g),m.removeEventListener("keypress",g),m!==window&&(window.removeEventListener("blur",d),window.removeEventListener("keyup",g),window.removeEventListener("keydown",g),window.removeEventListener("keypress",g)))},enumerable:!0},buttons:{get:function(){return p},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return c},enumerable:!0}}),x};var i=h("mouse-event")},{"mouse-event":472}],471:[function(h,G,X){var i={left:0,top:0};G.exports=function(m,b,p){b=b||m.currentTarget||m.srcElement,Array.isArray(p)||(p=[0,0]);var l,r=m.clientX||0,u=m.clientY||0,c=(l=b)===window||l===document||l===document.body?i:l.getBoundingClientRect();return p[0]=r-c.left,p[1]=u-c.top,p}},{}],472:[function(h,G,X){"use strict";function i(m){return m.target||m.srcElement||window}X.buttons=function(m){if("object"==typeof m){if("buttons"in m)return m.buttons;if("which"in m){if(2===(b=m.which))return 4;if(3===b)return 2;if(b>0)return 1<<b-1}else if("button"in m){var b;if(1===(b=m.button))return 4;if(2===b)return 2;if(b>=0)return 1<<b}}return 0},X.element=i,X.x=function(m){if("object"==typeof m){if("offsetX"in m)return m.offsetX;var b=i(m).getBoundingClientRect();return m.clientX-b.left}return 0},X.y=function(m){if("object"==typeof m){if("offsetY"in m)return m.offsetY;var b=i(m).getBoundingClientRect();return m.clientY-b.top}return 0}},{}],473:[function(h,G,X){"use strict";var i=h("to-px");G.exports=function(m,b,p){"function"==typeof m&&(p=!!b,b=m,m=window);var r=i("ex",m),u=function(c){p&&c.preventDefault();var l=c.deltaX||0,f=c.deltaY||0,s=c.deltaZ||0,o=1;switch(c.deltaMode){case 1:o=r;break;case 2:o=window.innerHeight}if(f*=o,s*=o,(l*=o)||f||s)return b(l,f,s,c)};return m.addEventListener("wheel",u),u}},{"to-px":600}],474:[function(h,G,X){(function(i,m){(function(){var b,p,r;r=function(){"use strict";var b,p,r,u=Object.prototype.toString,c=void 0!==m?function(E){return m(E)}:setTimeout;try{Object.defineProperty({},"x",{}),b=function(E,k,C,L){return Object.defineProperty(E,k,{value:C,writable:!0,configurable:!1!==L})}}catch(E){b=function(k,C,L){return k[C]=L,k}}function l(E,k){r.add(E,k),p||(p=c(r.drain))}function f(E){var k,C=typeof E;return null==E||"object"!=C&&"function"!=C||(k=E.then),"function"==typeof k&&k}function s(){for(var E=0;E<this.chain.length;E++)o(this,1===this.state?this.chain[E].success:this.chain[E].failure,this.chain[E]);this.chain.length=0}function o(E,k,C){var L,P;try{!1===k?C.reject(E.msg):(L=!0===k?E.msg:k.call(void 0,E.msg))===C.promise?C.reject(TypeError("Promise-chain cycle")):(P=f(L))?P.call(L,C.resolve,C.reject):C.resolve(L)}catch(A){C.reject(A)}}function d(E){var k,C=this;if(!C.triggered){C.triggered=!0,C.def&&(C=C.def);try{(k=f(E))?l(function(){var L=new v(C);try{k.call(E,function(){d.apply(L,arguments)},function(){g.apply(L,arguments)})}catch(P){g.call(L,P)}}):(C.msg=E,C.state=1,C.chain.length>0&&l(s,C))}catch(L){g.call(new v(C),L)}}}function g(E){var k=this;k.triggered||(k.triggered=!0,k.def&&(k=k.def),k.msg=E,k.state=2,k.chain.length>0&&l(s,k))}function y(E,k,C,L){for(var P=0;P<k.length;P++)!function(A){E.resolve(k[A]).then(function(I){C(A,I)},L)}(P)}function v(E){this.def=E,this.triggered=!1}function _(E){this.promise=E,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function w(E){if("function"!=typeof E)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var k=new _(this);this.then=function(C,L){var P={success:"function"!=typeof C||C,failure:"function"==typeof L&&L};return P.promise=new this.constructor(function(A,I){if("function"!=typeof A||"function"!=typeof I)throw TypeError("Not a function");P.resolve=A,P.reject=I}),k.chain.push(P),0!==k.state&&l(s,k),P.promise},this.catch=function(C){return this.then(void 0,C)};try{E.call(void 0,function(C){d.call(k,C)},function(C){g.call(k,C)})}catch(C){g.call(k,C)}}r=function(){var E,k,C;function L(P,A){this.fn=P,this.self=A,this.next=void 0}return{add:function(P,A){C=new L(P,A),k?k.next=C:E=C,k=C,C=void 0},drain:function(){var P=E;for(E=k=p=void 0;P;)P.fn.call(P.self),P=P.next}}}();var x=b({},"constructor",w,!1);return w.prototype=x,b(x,"__NPO__",0,!1),b(w,"resolve",function(E){return E&&"object"==typeof E&&1===E.__NPO__?E:new this(function(k,C){if("function"!=typeof k||"function"!=typeof C)throw TypeError("Not a function");k(E)})}),b(w,"reject",function(E){return new this(function(k,C){if("function"!=typeof k||"function"!=typeof C)throw TypeError("Not a function");C(E)})}),b(w,"all",function(E){var k=this;return"[object Array]"!=u.call(E)?k.reject(TypeError("Not an array")):0===E.length?k.resolve([]):new k(function(C,L){if("function"!=typeof C||"function"!=typeof L)throw TypeError("Not a function");var P=E.length,A=Array(P),I=0;y(k,E,function(D,R){A[D]=R,++I===P&&C(A)},L)})}),b(w,"race",function(E){var k=this;return"[object Array]"!=u.call(E)?k.reject(TypeError("Not an array")):new k(function(C,L){if("function"!=typeof C||"function"!=typeof L)throw TypeError("Not a function");y(k,E,function(P,A){C(A)},L)})}),w},(p=void 0!==i?i:this)[b="Promise"]=p[b]||r(),void 0!==G&&G.exports&&(G.exports=p[b])}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},h("timers").setImmediate)},{timers:597}],475:[function(h,G,X){"use strict";var i=h("typedarray-pool");function m(x){return"a"+x}function b(x){return"d"+x}function p(x,E){return"c"+x+"_"+E}function r(x){return"s"+x}function u(x,E){return"t"+x+"_"+E}function c(x){return"o"+x}function l(x){return"x"+x}function f(x){return"p"+x}function s(x,E){return"d"+x+"_"+E}function o(x){return"i"+x}function d(x,E){return"u"+x+"_"+E}function g(x){return"b"+x}function y(x){return"y"+x}function v(x){return"e"+x}function _(x){return"v"+x}function w(x,E,k){for(var C=0,L=0;L<x;++L)E&1<<L&&(C|=1<<k[L]);return C}G.exports=function(x){function E(D){throw new Error("ndarray-extract-contour: "+D)}"object"!=typeof x&&E("Must specify arguments");var k=x.order;Array.isArray(k)||E("Must specify order");var C=x.arrayArguments||1;C<1&&E("Must have at least one array argument");var L=x.scalarArguments||0;L<0&&E("Scalar arg count must be > 0"),"function"!=typeof x.vertex&&E("Must specify vertex creation function"),"function"!=typeof x.cell&&E("Must specify cell creation function"),"function"!=typeof x.phase&&E("Must specify phase function");for(var P=x.getters||[],A=new Array(C),I=0;I<C;++I)A[I]=P.indexOf(I)>=0;return function(D,R,S,N,B,H){var Y=H.length,Q=B.length;if(Q<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var ne="extractContour"+B.join("_"),ae=[],te=[],K=[],q=0;q<Y;++q)K.push(m(q));for(q=0;q<N;++q)K.push(l(q));for(q=0;q<Q;++q)te.push(r(q)+"="+m(0)+".shape["+q+"]|0");for(q=0;q<Y;++q){te.push(b(q)+"="+m(q)+".data",c(q)+"="+m(q)+".offset|0");for(var re=0;re<Q;++re)te.push(u(q,re)+"="+m(q)+".stride["+re+"]|0")}for(q=0;q<Y;++q)for(te.push(f(q)+"="+c(q)),te.push(p(q,0)),re=1;re<1<<Q;++re){for(var V=[],W=0;W<Q;++W)re&1<<W&&V.push("-"+u(q,W));te.push(s(q,re)+"=("+V.join("")+")|0"),te.push(p(q,re)+"=0")}for(q=0;q<Y;++q)for(re=0;re<Q;++re){var Z=[u(q,B[re])];re>0&&Z.push(u(q,B[re-1])+"*"+r(B[re-1])),te.push(d(q,B[re])+"=("+Z.join("-")+")|0")}for(q=0;q<Q;++q)te.push(o(q)+"=0");te.push("N=0");var oe=["2"];for(q=Q-2;q>=0;--q)oe.push(r(B[q]));for(te.push("Q=("+oe.join("*")+")|0","P=mallocUint32(Q)","V=mallocUint32(Q)","X=0"),te.push(g(0)+"=0"),re=1;re<1<<Q;++re){var ie=[],ue=[];for(W=0;W<Q;++W)re&1<<W&&(0===ue.length?ie.push("1"):ie.unshift(ue.join("*"))),ue.push(r(B[W]));var fe="";ie[0].indexOf(r(B[Q-2]))<0&&(fe="-");var he=w(Q,re,B);te.push(v(he)+"=(-"+ie.join("-")+")|0",y(he)+"=("+fe+ie.join("-")+")|0",g(he)+"=0")}function de(ye,ke){ae.push("for(",o(B[ye]),"=",ke,";",o(B[ye]),"<",r(B[ye]),";","++",o(B[ye]),"){")}function be(ye){for(var ke=0;ke<Y;++ke)ae.push(f(ke),"+=",d(ke,B[ye]),";");ae.push("}")}function pe(){for(var ye=1;ye<1<<Q;++ye)ae.push("T","=",v(ye),";",v(ye),"=",y(ye),";",y(ye),"=","T",";")}te.push(_(0)+"=0","T=0"),function ye(ke,ze){if(ke<0)!function(Ie){for(var Ce=0;Ce<Y;++Ce)H[Ce]?ae.push(p(Ce,0),"=",b(Ce),".get(",f(Ce),");"):ae.push(p(Ce,0),"=",b(Ce),"[",f(Ce),"];");var _e=[];for(Ce=0;Ce<Y;++Ce)_e.push(p(Ce,0));for(Ce=0;Ce<N;++Ce)_e.push(l(Ce));ae.push(g(0),"=","P","[","X","]=phase(",_e.join(),");");for(var we=1;we<1<<Q;++we)ae.push(g(we),"=","P","[","X","+",v(we),"];");var Se=[];for(we=1;we<1<<Q;++we)Se.push("("+g(0)+"!=="+g(we)+")");ae.push("if(",Se.join("||"),"){");var Oe=[];for(Ce=0;Ce<Q;++Ce)Oe.push(o(Ce));for(Ce=0;Ce<Y;++Ce)for(Oe.push(p(Ce,0)),we=1;we<1<<Q;++we)H[Ce]?ae.push(p(Ce,we),"=",b(Ce),".get(",f(Ce),"+",s(Ce,we),");"):ae.push(p(Ce,we),"=",b(Ce),"[",f(Ce),"+",s(Ce,we),"];"),Oe.push(p(Ce,we));for(Ce=0;Ce<1<<Q;++Ce)Oe.push(g(Ce));for(Ce=0;Ce<N;++Ce)Oe.push(l(Ce));ae.push("vertex(",Oe.join(),");",_(0),"=","V","[","X","]=","N","++;");var Be=(1<<Q)-1,He=g(Be);for(we=0;we<Q;++we)if(0==(Ie&~(1<<we))){for(var Xe=Be^1<<we,nt=g(Xe),et=[],qe=Xe;qe>0;qe=qe-1&Xe)et.push("V[X+"+v(qe)+"]");for(et.push(_(0)),qe=0;qe<Y;++qe)1&we?et.push(p(qe,Be),p(qe,Xe)):et.push(p(qe,Xe),p(qe,Be));for(1&we?et.push(He,nt):et.push(nt,He),qe=0;qe<N;++qe)et.push(l(qe));ae.push("if(",He,"!==",nt,"){","face(",et.join(),")}")}ae.push("}","X","+=1;")}(ze);else{(function(Ie){for(var Ce=Ie-1;Ce>=0;--Ce)de(Ce,0);var _e=[];for(Ce=0;Ce<Y;++Ce)_e.push(H[Ce]?b(Ce)+".get("+f(Ce)+")":b(Ce)+"["+f(Ce)+"]");for(Ce=0;Ce<N;++Ce)_e.push(l(Ce));for(ae.push("P","[","X","++]=phase(",_e.join(),");"),Ce=0;Ce<Ie;++Ce)be(Ce);for(var we=0;we<Y;++we)ae.push(f(we),"+=",d(we,B[Ie]),";")})(ke),ae.push("if(",r(B[ke]),">0){",o(B[ke]),"=1;"),ye(ke-1,ze|1<<B[ke]);for(var je=0;je<Y;++je)ae.push(f(je),"+=",d(je,B[ke]),";");ke===Q-1&&(ae.push("X","=0;"),pe()),de(ke,2),ye(ke-1,ze),ke===Q-1&&(ae.push("if(",o(B[Q-1]),"&1){","X","=0;}"),pe()),be(ke),ae.push("}")}}(Q-1,0),ae.push("freeUint32(","V",");freeUint32(","P",");");var Te=["'use strict';","function ",ne,"(",K.join(),"){","var ",te.join(),";",ae.join(""),"}","return ",ne].join("");return new Function("vertex","face","phase","mallocUint32","freeUint32",Te)(D,R,S,i.mallocUint32,i.freeUint32)}(x.vertex,x.cell,x.phase,L,k,A)}},{"typedarray-pool":617}],476:[function(h,G,X){"use strict";G.exports=function(f,s,o){if(Array.isArray(o)){if(o.length!==s.dimension)throw new Error("ndarray-gradient: invalid boundary conditions")}else o=i(s.dimension,"string"==typeof o?o:"clamp");if(f.dimension!==s.dimension+1)throw new Error("ndarray-gradient: output dimension must be +1 input dimension");if(f.shape[s.dimension]!==s.dimension)throw new Error("ndarray-gradient: output shape must match input shape");for(var d=0;d<s.dimension;++d)if(f.shape[d]!==s.shape[d])throw new Error("ndarray-gradient: shape mismatch");return 0===s.size?f:s.dimension<=0?(f.set(0),f):function(g){var y=g.join();if(I=p[y])return I;var v=g.length,_=["function gradient(dst,src){var s=src.shape.slice();"];function w(D){for(var R=v-D.length,S=[],N=[],B=[],H=0;H<v;++H)D.indexOf(H+1)>=0?B.push("0"):D.indexOf(-(H+1))>=0?B.push("s["+H+"]-1"):(B.push("-1"),S.push("1"),N.push("s["+H+"]-2"));var Y=".lo("+S.join()+").hi("+N.join()+")";if(0===S.length&&(Y=""),R>0){for(_.push("if(1"),H=0;H<v;++H)D.indexOf(H+1)>=0||D.indexOf(-(H+1))>=0||_.push("&&s[",H,"]>2");for(_.push("){grad",R,"(src.pick(",B.join(),")",Y),H=0;H<v;++H)D.indexOf(H+1)>=0||D.indexOf(-(H+1))>=0||_.push(",dst.pick(",B.join(),",",H,")",Y);_.push(");")}for(H=0;H<D.length;++H){var Q=Math.abs(D[H])-1,ne="dst.pick("+B.join()+","+Q+")"+Y;switch(g[Q]){case"clamp":var ae=B.slice(),te=B.slice();D[H]<0?ae[Q]="s["+Q+"]-2":te[Q]="1",0===R?_.push("if(s[",Q,"]>1){dst.set(",B.join(),",",Q,",0.5*(src.get(",ae.join(),")-src.get(",te.join(),")))}else{dst.set(",B.join(),",",Q,",0)};"):_.push("if(s[",Q,"]>1){diff(",ne,",src.pick(",ae.join(),")",Y,",src.pick(",te.join(),")",Y,");}else{zero(",ne,");};");break;case"mirror":0===R?_.push("dst.set(",B.join(),",",Q,",0);"):_.push("zero(",ne,");");break;case"wrap":var K=B.slice(),q=B.slice();D[H]<0?(K[Q]="s["+Q+"]-2",q[Q]="0"):(K[Q]="s["+Q+"]-1",q[Q]="1"),0===R?_.push("if(s[",Q,"]>2){dst.set(",B.join(),",",Q,",0.5*(src.get(",K.join(),")-src.get(",q.join(),")))}else{dst.set(",B.join(),",",Q,",0)};"):_.push("if(s[",Q,"]>2){diff(",ne,",src.pick(",K.join(),")",Y,",src.pick(",q.join(),")",Y,");}else{zero(",ne,");};");break;default:throw new Error("ndarray-gradient: Invalid boundary condition")}}R>0&&_.push("};")}for(var x=0;x<1<<v;++x){for(var E=[],k=0;k<v;++k)x&1<<k&&E.push(k+1);for(var C=0;C<1<<E.length;++C){var L=E.slice();for(k=0;k<E.length;++k)C&1<<k&&(L[k]=-L[k]);w(L)}}_.push("return dst;};return gradient");var P=["diff","zero"],A=[u,c];for(x=1;x<=v;++x)P.push("grad"+x),A.push(l(x));P.push(_.join(""));var I=Function.apply(void 0,P).apply(void 0,A);return b[y]=I,I}(o)(f,s)};var i=h("dup"),m=h("cwise-compiler"),b={},p={},r={body:"",args:[],thisVars:[],localVars:[]},u=m({args:["array","array","array"],pre:r,post:r,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),c=m({args:["array"],pre:r,post:r,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"});function l(f){if(f in b)return b[f];for(var s=[],o=0;o<f;++o)s.push("out",o,"s=0.5*(inp",o,"l-inp",o,"r);");var d=["array"],g=["junk"];for(o=0;o<f;++o){d.push("array"),g.push("out"+o+"s");var y=i(f);y[o]=-1,d.push({array:0,offset:y.slice()}),y[o]=1,d.push({array:0,offset:y.slice()}),g.push("inp"+o+"l","inp"+o+"r")}return b[f]=m({args:d,pre:r,post:r,body:{body:s.join(""),args:g.map(function(v){return{name:v,lvalue:0===v.indexOf("out"),rvalue:0===v.indexOf("inp"),count:"junk"!==v|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+f})}},{"cwise-compiler":157,dup:185}],477:[function(h,G,X){"use strict";function i(r,u){var c=Math.floor(u),l=u-c,s=0<=c+1&&c+1<r.shape[0];return(1-l)*(0<=c&&c<r.shape[0]?+r.get(c):0)+l*(s?+r.get(c+1):0)}function m(r,u,c){var l=Math.floor(u),f=u-l,s=0<=l&&l<r.shape[0],o=0<=l+1&&l+1<r.shape[0],d=Math.floor(c),g=c-d,y=0<=d&&d<r.shape[1],v=0<=d+1&&d+1<r.shape[1],_=s&&y?r.get(l,d):0,w=s&&v?r.get(l,d+1):0;return(1-g)*((1-f)*_+f*(o&&y?r.get(l+1,d):0))+g*((1-f)*w+f*(o&&v?r.get(l+1,d+1):0))}function b(r,u,c,l){var f=Math.floor(u),s=u-f,o=0<=f&&f<r.shape[0],d=0<=f+1&&f+1<r.shape[0],g=Math.floor(c),y=c-g,v=0<=g&&g<r.shape[1],_=0<=g+1&&g+1<r.shape[1],w=Math.floor(l),x=l-w,E=0<=w&&w<r.shape[2],k=0<=w+1&&w+1<r.shape[2],C=o&&v&&E?r.get(f,g,w):0,L=o&&_&&E?r.get(f,g+1,w):0,P=d&&v&&E?r.get(f+1,g,w):0,A=d&&_&&E?r.get(f+1,g+1,w):0,I=o&&v&&k?r.get(f,g,w+1):0,D=o&&_&&k?r.get(f,g+1,w+1):0;return(1-x)*((1-y)*((1-s)*C+s*P)+y*((1-s)*L+s*A))+x*((1-y)*((1-s)*I+s*(d&&v&&k?r.get(f+1,g,w+1):0))+y*((1-s)*D+s*(d&&_&&k?r.get(f+1,g+1,w+1):0)))}function p(r){var u,c,l=0|r.shape.length,f=new Array(l),s=new Array(l),o=new Array(l),d=new Array(l);for(u=0;u<l;++u)c=+arguments[u+1],f[u]=Math.floor(c),s[u]=c-f[u],o[u]=0<=f[u]&&f[u]<r.shape[u],d[u]=0<=f[u]+1&&f[u]+1<r.shape[u];var g,y,v,_=0;e:for(u=0;u<1<<l;++u){for(y=1,v=r.offset,g=0;g<l;++g)if(u&1<<g){if(!d[g])continue e;y*=s[g],v+=r.stride[g]*(f[g]+1)}else{if(!o[g])continue e;y*=1-s[g],v+=r.stride[g]*f[g]}_+=y*r.data[v]}return _}G.exports=function(r,u,c,l){switch(r.shape.length){case 0:return 0;case 1:return i(r,u);case 2:return m(r,u,c);case 3:return b(r,u,c,l);default:return p.apply(void 0,arguments)}},G.exports.d1=i,G.exports.d2=m,G.exports.d3=b},{}],478:[function(h,G,X){"use strict";var i=h("cwise-compiler"),m={body:"",args:[],thisVars:[],localVars:[]};function b(o){if(!o)return m;for(var d=0;d<o.args.length;++d){var g=o.args[d];o.args[d]=0===d?{name:g,lvalue:!0,rvalue:!!o.rvalue,count:o.count||1}:{name:g,lvalue:!1,rvalue:!0,count:1}}return o.thisVars||(o.thisVars=[]),o.localVars||(o.localVars=[]),o}function p(o){for(var d=[],g=0;g<o.args.length;++g)d.push("a"+g);return new Function("P",["return function ",o.funcName,"_ndarrayops(",d.join(","),") {P(",d.join(","),");return a0}"].join(""))(i({args:(y=o).args,pre:b(y.pre),body:b(y.body),post:b(y.proc),funcName:y.funcName}));var y}var r={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var o in r){var d=r[o];X[o]=p({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+d+"c"},funcName:o}),X[o+"eq"]=p({args:["array","array"],body:{args:["a","b"],body:"a"+d+"=b"},rvalue:!0,funcName:o+"eq"}),X[o+"s"]=p({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+d+"s"},funcName:o+"s"}),X[o+"seq"]=p({args:["array","scalar"],body:{args:["a","s"],body:"a"+d+"=s"},rvalue:!0,funcName:o+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var o in u){var d=u[o];X[o]=p({args:["array","array"],body:{args:["a","b"],body:"a="+d+"b"},funcName:o}),X[o+"eq"]=p({args:["array"],body:{args:["a"],body:"a="+d+"a"},rvalue:!0,count:2,funcName:o+"eq"})}}();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var o in c){var d=c[o];X[o]=p({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+d+"c"},funcName:o}),X[o+"s"]=p({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+d+"s"},funcName:o+"s"}),X[o+"eq"]=p({args:["array","array"],body:{args:["a","b"],body:"a=a"+d+"b"},rvalue:!0,count:2,funcName:o+"eq"}),X[o+"seq"]=p({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+d+"s"},rvalue:!0,count:2,funcName:o+"seq"})}}();var l=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var o=0;o<l.length;++o){var d=l[o];X[d]=p({args:["array","array"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:d}),X[d+"eq"]=p({args:["array"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"eq"})}}();var f=["max","min","atan2","pow"];!function(){for(var o=0;o<f.length;++o){var d=f[o];X[d]=p({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:d}),X[d+"s"]=p({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:d+"s"}),X[d+"eq"]=p({args:["array","array"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"eq"}),X[d+"seq"]=p({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"seq"})}}();var s=["atan2","pow"];(function(){for(var o=0;o<s.length;++o){var d=s[o];X[d+"op"]=p({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:d+"op"}),X[d+"ops"]=p({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:d+"ops"}),X[d+"opeq"]=p({args:["array","array"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"opeq"}),X[d+"opseq"]=p({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+d,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"opseq"})}})(),X.any=i({args:["array"],pre:m,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),X.all=i({args:["array"],pre:m,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),X.sum=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),X.prod=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),X.norm2squared=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),X.norm2=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),X.norminf=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),X.norm1=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),X.sup=i({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),X.inf=i({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),X.argmin=i({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),X.argmax=i({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),X.random=p({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),X.assign=p({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),X.assigns=p({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),X.equals=i({args:["array","array"],pre:m,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":157}],479:[function(h,G,X){"use strict";var i=h("ndarray"),m=h("./doConvert.js");G.exports=function(b,p){for(var r=[],u=b,c=1;Array.isArray(u);)r.push(u.length),c*=u.length,u=u[0];return 0===r.length?i():(p||(p=i(new Float64Array(c),r)),m(p,b),p)}},{"./doConvert.js":480,ndarray:483}],480:[function(h,G,X){G.exports=h("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":157}],481:[function(h,G,X){"use strict";var i=h("typedarray-pool"),m=32;function b(r){switch(r){case"uint8":return[i.mallocUint8,i.freeUint8];case"uint16":return[i.mallocUint16,i.freeUint16];case"uint32":return[i.mallocUint32,i.freeUint32];case"int8":return[i.mallocInt8,i.freeInt8];case"int16":return[i.mallocInt16,i.freeInt16];case"int32":return[i.mallocInt32,i.freeInt32];case"float32":return[i.mallocFloat,i.freeFloat];case"float64":return[i.mallocDouble,i.freeDouble];default:return null}}function p(r){for(var u=[],c=0;c<r;++c)u.push("s"+c);for(c=0;c<r;++c)u.push("n"+c);for(c=1;c<r;++c)u.push("d"+c);for(c=1;c<r;++c)u.push("e"+c);for(c=1;c<r;++c)u.push("f"+c);return u}G.exports=function(r,u){var c=["'use strict'"],l=["ndarraySortWrapper",r.join("d"),u].join("");c.push(["function ",l,"(",["array"].join(","),"){"].join(""));for(var f=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],s=0;s<r.length;++s)f.push(["s",s,"=stride[",s,"]|0,n",s,"=shape[",s,"]|0"].join(""));var o=new Array(r.length),d=[];for(s=0;s<r.length;++s)0!==(v=r[s])&&(o[v]=0===d.length?"1":d.join("*"),d.push("n"+v));var g=-1,y=-1;for(s=0;s<r.length;++s){var v,_=r[s];0!==_&&(f.push(g>0?["d",_,"=s",_,"-d",g,"*n",g].join(""):["d",_,"=s",_].join("")),g=_),0!=(v=r.length-1-s)&&(f.push(y>0?["e",v,"=s",v,"-e",y,"*n",y,",f",v,"=",o[v],"-f",y,"*n",y].join(""):["e",v,"=s",v,",f",v,"=",o[v]].join("")),y=v)}c.push("var "+f.join(","));var w=["0","n0-1","data","offset"].concat(p(r.length));c.push(["if(n0<=",m,"){","insertionSort(",w.join(","),")}else{","quickSort(",w.join(","),")}"].join("")),c.push("}return "+l);var x=new Function("insertionSort","quickSort",c.join("\n")),E=function(C,L){var P=["'use strict'"],A=["ndarrayInsertionSort",C.join("d"),L].join(""),I=["left","right","data","offset"].concat(p(C.length)),D=b(L),R=["i,j,cptr,ptr=left*s0+offset"];if(C.length>1){for(var S=[],N=1;N<C.length;++N)R.push("i"+N),S.push("n"+N);R.push(D?"scratch=malloc("+S.join("*")+")":"scratch=new Array("+S.join("*")+")"),R.push("dptr","sptr","a","b")}else R.push("scratch");function B(Q){return"generic"===L?["data.get(",Q,")"].join(""):["data[",Q,"]"].join("")}function H(Q,ne){return"generic"===L?["data.set(",Q,",",ne,")"].join(""):["data[",Q,"]=",ne].join("")}if(P.push(["function ",A,"(",I.join(","),"){var ",R.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),C.length>1){for(P.push("dptr=0;sptr=ptr"),N=C.length-1;N>=0;--N)0!==(Y=C[N])&&P.push(["for(i",Y,"=0;i",Y,"<n",Y,";++i",Y,"){"].join(""));for(P.push("scratch[dptr++]=",B("sptr")),N=0;N<C.length;++N)0!==(Y=C[N])&&P.push("sptr+=d"+Y,"}");for(P.push("__g:while(j--\x3eleft){","dptr=0","sptr=cptr-s0"),N=1;N<C.length;++N)1===N&&P.push("__l:"),P.push(["for(i",N,"=0;i",N,"<n",N,";++i",N,"){"].join(""));for(P.push(["a=",B("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join("")),N=C.length-1;N>=1;--N)P.push("sptr+=e"+N,"dptr+=f"+N,"}");for(P.push("dptr=cptr;sptr=cptr-s0"),N=C.length-1;N>=0;--N)0!==(Y=C[N])&&P.push(["for(i",Y,"=0;i",Y,"<n",Y,";++i",Y,"){"].join(""));for(P.push(H("dptr",B("sptr"))),N=0;N<C.length;++N)0!==(Y=C[N])&&P.push(["dptr+=d",Y,";sptr+=d",Y].join(""),"}");for(P.push("cptr-=s0\n}"),P.push("dptr=cptr;sptr=0"),N=C.length-1;N>=0;--N)0!==(Y=C[N])&&P.push(["for(i",Y,"=0;i",Y,"<n",Y,";++i",Y,"){"].join(""));for(P.push(H("dptr","scratch[sptr++]")),N=0;N<C.length;++N){var Y;0!==(Y=C[N])&&P.push("dptr+=d"+Y,"}")}}else P.push("scratch="+B("ptr"),"while((j--\x3eleft)&&("+B("cptr-s0")+">scratch)){",H("cptr",B("cptr-s0")),"cptr-=s0","}",H("cptr","scratch"));return P.push("}"),C.length>1&&D&&P.push("free(scratch)"),P.push("} return "+A),D?new Function("malloc","free",P.join("\n"))(D[0],D[1]):new Function(P.join("\n"))()}(r,u);return x(E,function(C,L,P){var A=["'use strict'"],I=["ndarrayQuickSort",C.join("d"),L].join(""),D=["left","right","data","offset"].concat(p(C.length)),R=b(L),S=0;A.push(["function ",I,"(",D.join(","),"){"].join(""));var N=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(C.length>1){for(var B=[],H=1;H<C.length;++H)B.push("n"+H),N.push("i"+H);for(H=0;H<8;++H)N.push("b_ptr"+H);N.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+B.join("*")),R?N.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):N.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else N.push("pivot1","pivot2");function Y(he){return["(offset+",he,"*s0)"].join("")}function Q(he){return"generic"===L?["data.get(",he,")"].join(""):["data[",he,"]"].join("")}function ne(he,de){return"generic"===L?["data.set(",he,",",de,")"].join(""):["data[",he,"]=",de].join("")}function ae(he,de,be){if(1===he.length)A.push("ptr0="+Y(he[0]));else for(var pe=0;pe<he.length;++pe)A.push(["b_ptr",pe,"=s0*",he[pe]].join(""));for(de&&A.push("pivot_ptr=0"),A.push("ptr_shift=offset"),pe=C.length-1;pe>=0;--pe)0!==(Te=C[pe])&&A.push(["for(i",Te,"=0;i",Te,"<n",Te,";++i",Te,"){"].join(""));if(he.length>1)for(pe=0;pe<he.length;++pe)A.push(["ptr",pe,"=b_ptr",pe,"+ptr_shift"].join(""));for(A.push(be),de&&A.push("++pivot_ptr"),pe=0;pe<C.length;++pe){var Te;0!==(Te=C[pe])&&(A.push(he.length>1?"ptr_shift+=d"+Te:"ptr0+=d"+Te),A.push("}"))}}function te(he,de,be,pe){if(1===de.length)A.push("ptr0="+Y(de[0]));else{for(var Te=0;Te<de.length;++Te)A.push(["b_ptr",Te,"=s0*",de[Te]].join(""));A.push("ptr_shift=offset")}for(be&&A.push("pivot_ptr=0"),he&&A.push(he+":"),Te=1;Te<C.length;++Te)A.push(["for(i",Te,"=0;i",Te,"<n",Te,";++i",Te,"){"].join(""));if(de.length>1)for(Te=0;Te<de.length;++Te)A.push(["ptr",Te,"=b_ptr",Te,"+ptr_shift"].join(""));for(A.push(pe),Te=C.length-1;Te>=1;--Te)be&&A.push("pivot_ptr+=f"+Te),A.push(de.length>1?"ptr_shift+=e"+Te:"ptr0+=e"+Te),A.push("}")}function K(){C.length>1&&R&&A.push("free(pivot1)","free(pivot2)")}function q(he,de){var be="el"+he,pe="el"+de;if(C.length>1){var Te="__l"+ ++S;te(Te,[be,pe],!1,["comp=",Q("ptr0"),"-",Q("ptr1"),"\n","if(comp>0){tmp0=",be,";",be,"=",pe,";",pe,"=tmp0;break ",Te,"}\n","if(comp<0){break ",Te,"}"].join(""))}else A.push(["if(",Q(Y(be)),">",Q(Y(pe)),"){tmp0=",be,";",be,"=",pe,";",pe,"=tmp0}"].join(""))}function re(he,de){C.length>1?ae([he,de],!1,ne("ptr0",Q("ptr1"))):A.push(ne(Y(he),Q(Y(de))))}function V(he,de,be){if(C.length>1){var pe="__l"+ ++S;te(pe,[de],!0,[he,"=",Q("ptr0"),"-pivot",be,"[pivot_ptr]\n","if(",he,"!==0){break ",pe,"}"].join(""))}else A.push([he,"=",Q(Y(de)),"-pivot",be].join(""))}function W(he,de){C.length>1?ae([he,de],!1,["tmp=",Q("ptr0"),"\n",ne("ptr0",Q("ptr1")),"\n",ne("ptr1","tmp")].join("")):A.push(["ptr0=",Y(he),"\n","ptr1=",Y(de),"\n","tmp=",Q("ptr0"),"\n",ne("ptr0",Q("ptr1")),"\n",ne("ptr1","tmp")].join(""))}function Z(he,de,be){C.length>1?(ae([he,de,be],!1,["tmp=",Q("ptr0"),"\n",ne("ptr0",Q("ptr1")),"\n",ne("ptr1",Q("ptr2")),"\n",ne("ptr2","tmp")].join("")),A.push("++"+de,"--"+be)):A.push(["ptr0=",Y(he),"\n","ptr1=",Y(de),"\n","ptr2=",Y(be),"\n","++",de,"\n","--",be,"\n","tmp=",Q("ptr0"),"\n",ne("ptr0",Q("ptr1")),"\n",ne("ptr1",Q("ptr2")),"\n",ne("ptr2","tmp")].join(""))}function oe(he,de){W(he,de),A.push("--"+de)}function ie(he,de,be){C.length>1?ae([he,de],!0,[ne("ptr0",Q("ptr1")),"\n",ne("ptr1",["pivot",be,"[pivot_ptr]"].join(""))].join("")):A.push(ne(Y(he),Q(Y(de))),ne(Y(de),"pivot"+be))}function ue(he,de){A.push(["if((",de,"-",he,")<=",m,"){\n","insertionSort(",he,",",de,",data,offset,",p(C.length).join(","),")\n","}else{\n",I,"(",he,",",de,",data,offset,",p(C.length).join(","),")\n","}"].join(""))}function fe(he,de,be){C.length>1?(A.push(["__l",++S,":while(true){"].join("")),ae([he],!0,["if(",Q("ptr0"),"!==pivot",de,"[pivot_ptr]){break __l",S,"}"].join("")),A.push(be,"}")):A.push(["while(",Q(Y(he)),"===pivot",de,"){",be,"}"].join(""))}return A.push("var "+N.join(",")),q(1,2),q(4,5),q(1,3),q(2,3),q(1,4),q(3,4),q(2,5),q(2,3),q(4,5),C.length>1?ae(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",Q("ptr1"),"\n","pivot2[pivot_ptr]=",Q("ptr3"),"\n","pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\n","x=",Q("ptr0"),"\n","y=",Q("ptr2"),"\n","z=",Q("ptr4"),"\n",ne("ptr5","x"),"\n",ne("ptr6","y"),"\n",ne("ptr7","z")].join("")):A.push(["pivot1=",Q(Y("el2")),"\n","pivot2=",Q(Y("el4")),"\n","pivots_are_equal=pivot1===pivot2\n","x=",Q(Y("el1")),"\n","y=",Q(Y("el3")),"\n","z=",Q(Y("el5")),"\n",ne(Y("index1"),"x"),"\n",ne(Y("index3"),"y"),"\n",ne(Y("index5"),"z")].join("")),re("index2","left"),re("index4","right"),A.push("if(pivots_are_equal){"),A.push("for(k=less;k<=great;++k){"),V("comp","k",1),A.push("if(comp===0){continue}"),A.push("if(comp<0){"),A.push("if(k!==less){"),W("k","less"),A.push("}"),A.push("++less"),A.push("}else{"),A.push("while(true){"),V("comp","great",1),A.push("if(comp>0){"),A.push("great--"),A.push("}else if(comp<0){"),Z("k","less","great"),A.push("break"),A.push("}else{"),oe("k","great"),A.push("break"),A.push("}"),A.push("}"),A.push("}"),A.push("}"),A.push("}else{"),A.push("for(k=less;k<=great;++k){"),V("comp_pivot1","k",1),A.push("if(comp_pivot1<0){"),A.push("if(k!==less){"),W("k","less"),A.push("}"),A.push("++less"),A.push("}else{"),V("comp_pivot2","k",2),A.push("if(comp_pivot2>0){"),A.push("while(true){"),V("comp","great",2),A.push("if(comp>0){"),A.push("if(--great<k){break}"),A.push("continue"),A.push("}else{"),V("comp","great",1),A.push("if(comp<0){"),Z("k","less","great"),A.push("}else{"),oe("k","great"),A.push("}"),A.push("break"),A.push("}"),A.push("}"),A.push("}"),A.push("}"),A.push("}"),A.push("}"),ie("left","(less-1)",1),ie("right","(great+1)",2),ue("left","(less-2)"),ue("(great+2)","right"),A.push("if(pivots_are_equal){"),K(),A.push("return"),A.push("}"),A.push("if(less<index1&&great>index5){"),fe("less",1,"++less"),fe("great",2,"--great"),A.push("for(k=less;k<=great;++k){"),V("comp_pivot1","k",1),A.push("if(comp_pivot1===0){"),A.push("if(k!==less){"),W("k","less"),A.push("}"),A.push("++less"),A.push("}else{"),V("comp_pivot2","k",2),A.push("if(comp_pivot2===0){"),A.push("while(true){"),V("comp","great",2),A.push("if(comp===0){"),A.push("if(--great<k){break}"),A.push("continue"),A.push("}else{"),V("comp","great",1),A.push("if(comp<0){"),Z("k","less","great"),A.push("}else{"),oe("k","great"),A.push("}"),A.push("break"),A.push("}"),A.push("}"),A.push("}"),A.push("}"),A.push("}"),A.push("}"),K(),ue("less","great"),A.push("}return "+I),C.length>1&&R?new Function("insertionSort","malloc","free",A.join("\n"))(P,R[0],R[1]):new Function("insertionSort",A.join("\n"))(P)}(r,u,E))}},{"typedarray-pool":617}],482:[function(h,G,X){"use strict";var i=h("./lib/compile_sort.js"),m={};G.exports=function(b){var p=b.order,r=b.dtype,u=[p,r].join(":"),c=m[u];return c||(m[u]=c=i(p,r)),c(b),b}},{"./lib/compile_sort.js":481}],483:[function(h,G,X){var i=h("iota-array"),m=h("is-buffer"),b="undefined"!=typeof Float64Array;function p(l,f){return l[0]-f[0]}function r(){var l,f=this.stride,s=new Array(f.length);for(l=0;l<s.length;++l)s[l]=[Math.abs(f[l]),l];s.sort(p);var o=new Array(s.length);for(l=0;l<o.length;++l)o[l]=s[l][1];return o}function u(l,f){var s=["View",f,"d",l].join("");f<0&&(s="View_Nil"+l);var o="generic"===l;if(-1===f){var d="function "+s+"(a){this.data=a;};var proto="+s+".prototype;proto.dtype='"+l+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+s+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+s+"(a){return new "+s+"(a);}";return new Function(d)()}if(0===f)return d="function "+s+"(a,d) {this.data = a;this.offset = d};var proto="+s+".prototype;proto.dtype='"+l+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+s+"_copy() {return new "+s+"(this.data,this.offset)};proto.pick=function "+s+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+s+"_get(){return "+(o?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+s+"_set(v){return "+(o?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+s+"(a,b,c,d){return new "+s+"(a,d)}",new Function("TrivialArray",d)(c[l][0]);d=["'use strict'"];var g=i(f),y=g.map(function(P){return"i"+P}),v="this.offset+"+g.map(function(P){return"this.stride["+P+"]*i"+P}).join("+"),_=g.map(function(P){return"b"+P}).join(","),w=g.map(function(P){return"c"+P}).join(",");d.push("function "+s+"(a,"+_+","+w+",d){this.data=a","this.shape=["+_+"]","this.stride=["+w+"]","this.offset=d|0}","var proto="+s+".prototype","proto.dtype='"+l+"'","proto.dimension="+f),d.push("Object.defineProperty(proto,'size',{get:function "+s+"_size(){return "+g.map(function(P){return"this.shape["+P+"]"}).join("*"),"}})"),1===f?d.push("proto.order=[0]"):(d.push("Object.defineProperty(proto,'order',{get:"),f<4?(d.push("function "+s+"_order(){"),2===f?d.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===f&&d.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):d.push("ORDER})")),d.push("proto.set=function "+s+"_set("+y.join(",")+",v){"),d.push(o?"return this.data.set("+v+",v)}":"return this.data["+v+"]=v}"),d.push("proto.get=function "+s+"_get("+y.join(",")+"){"),d.push(o?"return this.data.get("+v+")}":"return this.data["+v+"]}"),d.push("proto.index=function "+s+"_index(",y.join(),"){return "+v+"}"),d.push("proto.hi=function "+s+"_hi("+y.join(",")+"){return new "+s+"(this.data,"+g.map(function(P){return["(typeof i",P,"!=='number'||i",P,"<0)?this.shape[",P,"]:i",P,"|0"].join("")}).join(",")+","+g.map(function(P){return"this.stride["+P+"]"}).join(",")+",this.offset)}");var x=g.map(function(P){return"a"+P+"=this.shape["+P+"]"}),E=g.map(function(P){return"c"+P+"=this.stride["+P+"]"});d.push("proto.lo=function "+s+"_lo("+y.join(",")+"){var b=this.offset,d=0,"+x.join(",")+","+E.join(","));for(var k=0;k<f;++k)d.push("if(typeof i"+k+"==='number'&&i"+k+">=0){d=i"+k+"|0;b+=c"+k+"*d;a"+k+"-=d}");for(d.push("return new "+s+"(this.data,"+g.map(function(P){return"a"+P}).join(",")+","+g.map(function(P){return"c"+P}).join(",")+",b)}"),d.push("proto.step=function "+s+"_step("+y.join(",")+"){var "+g.map(function(P){return"a"+P+"=this.shape["+P+"]"}).join(",")+","+g.map(function(P){return"b"+P+"=this.stride["+P+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil"),k=0;k<f;++k)d.push("if(typeof i"+k+"==='number'){d=i"+k+"|0;if(d<0){c+=b"+k+"*(a"+k+"-1);a"+k+"=ceil(-a"+k+"/d)}else{a"+k+"=ceil(a"+k+"/d)}b"+k+"*=d}");d.push("return new "+s+"(this.data,"+g.map(function(P){return"a"+P}).join(",")+","+g.map(function(P){return"b"+P}).join(",")+",c)}");var C=new Array(f),L=new Array(f);for(k=0;k<f;++k)C[k]="a[i"+k+"]",L[k]="b[i"+k+"]";for(d.push("proto.transpose=function "+s+"_transpose("+y+"){"+y.map(function(P,A){return P+"=("+P+"===undefined?"+A+":"+P+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+s+"(this.data,"+C.join(",")+","+L.join(",")+",this.offset)}"),d.push("proto.pick=function "+s+"_pick("+y+"){var a=[],b=[],c=this.offset"),k=0;k<f;++k)d.push("if(typeof i"+k+"==='number'&&i"+k+">=0){c=(c+this.stride["+k+"]*i"+k+")|0}else{a.push(this.shape["+k+"]);b.push(this.stride["+k+"])}");return d.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),d.push("return function construct_"+s+"(data,shape,stride,offset){return new "+s+"(data,"+g.map(function(P){return"shape["+P+"]"}).join(",")+","+g.map(function(P){return"stride["+P+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",d.join("\n"))(c[l],r)}var c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};G.exports=function(l,f,s,o){if(void 0===l)return(0,c.array[0])([]);"number"==typeof l&&(l=[l]),void 0===f&&(f=[l.length]);var d=f.length;if(void 0===s){s=new Array(d);for(var g=d-1,y=1;g>=0;--g)s[g]=y,y*=f[g]}if(void 0===o)for(o=0,g=0;g<d;++g)s[g]<0&&(o-=(f[g]-1)*s[g]);for(var v=function(w){if(m(w))return"buffer";if(b)switch(Object.prototype.toString.call(w)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(w)?"array":"generic"}(l),_=c[v];_.length<=d+1;)_.push(u(v,_.length-1));return(0,_[d+1])(l,f,s,o)}},{"iota-array":451,"is-buffer":453}],484:[function(h,G,X){"use strict";var i=h("double-bits"),m=Math.pow(2,-1074);G.exports=function(b,p){if(isNaN(b)||isNaN(p))return NaN;if(b===p)return b;if(0===b)return p<0?-m:m;var r=i.hi(b),u=i.lo(b);return p>b==b>0?u===-1>>>0?(r+=1,u=0):u+=1:0===u?(u=-1>>>0,r-=1):u-=1,i.pack(u,r)}},{"double-bits":182}],485:[function(h,G,X){var i=Math.PI,m=c(120);function b(l,f,s,o){return["C",l,f,s,o,s,o]}function p(l,f,s,o,d,g){return["C",l/3+2/3*s,f/3+2/3*o,d/3+2/3*s,g/3+2/3*o,d,g]}function r(l,f,s,o,d,g,y,v,_,w){if(w)R=w[0],S=w[1],I=w[2],D=w[3];else{var x=u(l,f,-d);f=x.y;var E=((l=x.x)-(v=(x=u(v,_,-d)).x))/2,k=(f-(_=x.y))/2,C=E*E/(s*s)+k*k/(o*o);C>1&&(s*=C=Math.sqrt(C),o*=C);var L=s*s,P=o*o,A=(g==y?-1:1)*Math.sqrt(Math.abs((L*P-L*k*k-P*E*E)/(L*k*k+P*E*E)));A==1/0&&(A=1);var I=A*s*k/o+(l+v)/2,D=A*-o*E/s+(f+_)/2,R=Math.asin(((f-D)/o).toFixed(9)),S=Math.asin(((_-D)/o).toFixed(9));(R=l<I?i-R:R)<0&&(R=2*i+R),(S=v<I?i-S:S)<0&&(S=2*i+S),y&&R>S&&(R-=2*i),!y&&S>R&&(S-=2*i)}if(Math.abs(S-R)>m){var N=S,B=v,H=_;S=R+m*(y&&S>R?1:-1);var Y=r(v=I+s*Math.cos(S),_=D+o*Math.sin(S),s,o,d,0,y,B,H,[S,N,I,D])}var Q=Math.tan((S-R)/4),ne=4/3*s*Q,ae=4/3*o*Q,te=[2*l-(l+ne*Math.sin(R)),2*f-(f-ae*Math.cos(R)),v+ne*Math.sin(S),_-ae*Math.cos(S),v,_];if(w)return te;Y&&(te=te.concat(Y));for(var K=0;K<te.length;){var q=u(te[K],te[K+1],d);te[K++]=q.x,te[K++]=q.y}return te}function u(l,f,s){return{x:l*Math.cos(s)-f*Math.sin(s),y:l*Math.sin(s)+f*Math.cos(s)}}function c(l){return l*(i/180)}G.exports=function(l){for(var f,s=[],o=0,d=0,g=0,y=0,v=null,_=null,w=0,x=0,E=0,k=l.length;E<k;E++){var C=l[E],L=C[0];switch(L){case"M":g=C[1],y=C[2];break;case"A":(C=r(w,x,C[1],C[2],c(C[3]),C[4],C[5],C[6],C[7])).unshift("C"),C.length>7&&(s.push(C.splice(0,7)),C.unshift("C"));break;case"S":var P=w,A=x;"C"!=f&&"S"!=f||(P+=P-o,A+=A-d),C=["C",P,A,C[1],C[2],C[3],C[4]];break;case"T":"Q"==f||"T"==f?(v=2*w-v,_=2*x-_):(v=w,_=x),C=p(w,x,v,_,C[1],C[2]);break;case"Q":v=C[1],_=C[2],C=p(w,x,C[1],C[2],C[3],C[4]);break;case"L":C=b(w,x,C[1],C[2]);break;case"H":C=b(w,x,C[1],x);break;case"V":C=b(w,x,w,C[1]);break;case"Z":C=b(w,x,g,y)}f=L,w=C[C.length-2],x=C[C.length-1],C.length>4?(o=C[C.length-4],d=C[C.length-3]):(o=w,d=x),s.push(C)}return s}},{}],486:[function(h,G,X){X.vertexNormals=function(i,m,b){for(var p=m.length,r=new Array(p),u=void 0===b?1e-6:b,c=0;c<p;++c)r[c]=[0,0,0];for(c=0;c<i.length;++c)for(var l=i[c],s=l[l.length-1],o=l[0],d=0;d<l.length;++d){for(var g=m[s],y=m[s=o],v=m[o=l[(d+1)%l.length]],_=new Array(3),w=0,x=new Array(3),E=0,k=0;k<3;++k)_[k]=g[k]-y[k],w+=_[k]*_[k],x[k]=v[k]-y[k],E+=x[k]*x[k];if(w*E>u){var C=r[s],L=1/Math.sqrt(w*E);for(k=0;k<3;++k){var P=(k+1)%3,A=(k+2)%3;C[k]+=L*(x[P]*_[A]-x[A]*_[P])}}}for(c=0;c<p;++c){C=r[c];var I=0;for(k=0;k<3;++k)I+=C[k]*C[k];if(I>u)for(L=1/Math.sqrt(I),k=0;k<3;++k)C[k]*=L;else for(k=0;k<3;++k)C[k]=0}return r},X.faceNormals=function(i,m,b){for(var p=i.length,r=new Array(p),u=void 0===b?1e-6:b,c=0;c<p;++c){for(var l=i[c],f=new Array(3),s=0;s<3;++s)f[s]=m[l[s]];var o=new Array(3),d=new Array(3);for(s=0;s<3;++s)o[s]=f[1][s]-f[0][s],d[s]=f[2][s]-f[0][s];var g=new Array(3),y=0;for(s=0;s<3;++s){var v=(s+1)%3,_=(s+2)%3;g[s]=o[v]*d[_]-o[_]*d[v],y+=g[s]*g[s]}for(y=y>u?1/Math.sqrt(y):0,s=0;s<3;++s)g[s]*=y;r[c]=g}return r}},{}],487:[function(h,G,X){"use strict";var i=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;function p(r){if(null==r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}G.exports=function(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var u={},c=0;c<10;c++)u["_"+String.fromCharCode(c)]=c;if("0123456789"!==Object.getOwnPropertyNames(u).map(function(f){return u[f]}).join(""))return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(f){l[f]=f}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},l)).join("")}catch(f){return!1}}()?Object.assign:function(r,u){for(var c,l,f=p(r),s=1;s<arguments.length;s++){for(var o in c=Object(arguments[s]))m.call(c,o)&&(f[o]=c[o]);if(i){l=i(c);for(var d=0;d<l.length;d++)b.call(c,l[d])&&(f[l[d]]=c[l[d]])}}return f}},{}],488:[function(h,G,X){"use strict";G.exports=function(i,m,b,p,r,u,c,l,f,s){var o=m+u+s;if(d>0){var d=Math.sqrt(o+1);i[0]=.5*(c-f)/d,i[1]=.5*(l-p)/d,i[2]=.5*(b-u)/d,i[3]=.5*d}else{var g=Math.max(m,u,s);d=Math.sqrt(2*g-o+1),m>=g?(i[0]=.5*d,i[1]=.5*(r+b)/d,i[2]=.5*(l+p)/d,i[3]=.5*(c-f)/d):u>=g?(i[0]=.5*(b+r)/d,i[1]=.5*d,i[2]=.5*(f+c)/d,i[3]=.5*(l-p)/d):(i[0]=.5*(p+l)/d,i[1]=.5*(c+f)/d,i[2]=.5*d,i[3]=.5*(b-r)/d)}return i}},{}],489:[function(h,G,X){"use strict";G.exports=function(o){var d=(o=o||{}).center||[0,0,0],g=o.rotation||[0,0,0,1],y=o.radius||1;d=[].slice.call(d,0,3),l(g=[].slice.call(g,0,4),g);var v=new f(g,d,Math.log(y));return v.setDistanceLimits(o.zoomMin,o.zoomMax),("eye"in o||"up"in o)&&v.lookAt(0,o.eye,o.center,o.up),v};var i=h("filtered-vector"),m=h("gl-mat4/lookAt"),b=h("gl-mat4/fromQuat"),p=h("gl-mat4/invert"),r=h("./lib/quatFromFrame");function u(o,d,g){return Math.sqrt(Math.pow(o,2)+Math.pow(d,2)+Math.pow(g,2))}function c(o,d,g,y){return Math.sqrt(Math.pow(o,2)+Math.pow(d,2)+Math.pow(g,2)+Math.pow(y,2))}function l(o,d){var g=d[0],y=d[1],v=d[2],_=d[3],w=c(g,y,v,_);w>1e-6?(o[0]=g/w,o[1]=y/w,o[2]=v/w,o[3]=_/w):(o[0]=o[1]=o[2]=0,o[3]=1)}function f(o,d,g){this.radius=i([g]),this.center=i(d),this.rotation=i(o),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var s=f.prototype;s.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},s.recalcMatrix=function(o){this.radius.curve(o),this.center.curve(o),this.rotation.curve(o);var d=this.computedRotation;l(d,d);var g=this.computedMatrix;b(g,d);var y=this.computedCenter,v=this.computedEye,_=this.computedUp,w=Math.exp(this.computedRadius[0]);v[0]=y[0]+w*g[2],v[1]=y[1]+w*g[6],v[2]=y[2]+w*g[10],_[0]=g[1],_[1]=g[5],_[2]=g[9];for(var x=0;x<3;++x){for(var E=0,k=0;k<3;++k)E+=g[x+4*k]*v[k];g[12+x]=-E}},s.getMatrix=function(o,d){this.recalcMatrix(o);var g=this.computedMatrix;if(d){for(var y=0;y<16;++y)d[y]=g[y];return d}return g},s.idle=function(o){this.center.idle(o),this.radius.idle(o),this.rotation.idle(o)},s.flush=function(o){this.center.flush(o),this.radius.flush(o),this.rotation.flush(o)},s.pan=function(o,d,g,y){d=d||0,g=g||0,y=y||0,this.recalcMatrix(o);var v=this.computedMatrix,_=v[1],w=v[5],x=v[9],E=u(_,w,x),k=v[0],C=v[4],L=v[8],P=k*(_/=E)+C*(w/=E)+L*(x/=E),A=u(k-=_*P,C-=w*P,L-=x*P),I=v[2],D=v[6],R=v[10],S=I*_+D*w+R*x,N=I*(k/=A)+D*(C/=A)+R*(L/=A),B=u(I-=S*_+N*k,D-=S*w+N*C,R-=S*x+N*L);I/=B,D/=B,R/=B,this.center.move(o,k*d+_*g,C*d+w*g,L*d+x*g);var ne=Math.exp(this.computedRadius[0]);ne=Math.max(1e-4,ne+y),this.radius.set(o,Math.log(ne))},s.rotate=function(o,d,g,y){this.recalcMatrix(o);var v=this.computedMatrix,L=v[2],P=v[6],A=v[10],I=(d=d||0)*v[0]+(g=g||0)*v[1],D=d*v[4]+g*v[5],R=d*v[8]+g*v[9],S=-(P*R-A*D),N=-(A*I-L*R),B=-(L*D-P*I),H=Math.sqrt(Math.max(0,1-Math.pow(S,2)-Math.pow(N,2)-Math.pow(B,2))),Y=c(S,N,B,H);Y>1e-6?(S/=Y,N/=Y,B/=Y,H/=Y):(S=N=B=0,H=1);var Q=this.computedRotation,ne=Q[0],ae=Q[1],te=Q[2],K=Q[3],q=ne*H+K*S+ae*B-te*N,re=ae*H+K*N+te*S-ne*B,V=te*H+K*B+ne*N-ae*S,W=K*H-ne*S-ae*N-te*B;if(y){S=L,N=P,B=A;var Z=Math.sin(y)/u(S,N,B);S*=Z,N*=Z,B*=Z,W=W*(H=Math.cos(d))-(q=q*H+W*S+re*B-V*N)*S-(re=re*H+W*N+V*S-q*B)*N-(V=V*H+W*B+q*N-re*S)*B}var oe=c(q,re,V,W);oe>1e-6?(q/=oe,re/=oe,V/=oe,W/=oe):(q=re=V=0,W=1),this.rotation.set(o,q,re,V,W)},s.lookAt=function(o,d,g,y){this.recalcMatrix(o);var v=this.computedMatrix;m(v,d=d||this.computedEye,g=g||this.computedCenter,y=y||this.computedUp);var _=this.computedRotation;r(_,v[0],v[1],v[2],v[4],v[5],v[6],v[8],v[9],v[10]),l(_,_),this.rotation.set(o,_[0],_[1],_[2],_[3]);for(var w=0,x=0;x<3;++x)w+=Math.pow(g[x]-d[x],2);this.radius.set(o,.5*Math.log(Math.max(w,1e-6))),this.center.set(o,g[0],g[1],g[2])},s.translate=function(o,d,g,y){this.center.move(o,d||0,g||0,y||0)},s.setMatrix=function(o,d){var g=this.computedRotation;r(g,d[0],d[1],d[2],d[4],d[5],d[6],d[8],d[9],d[10]),l(g,g),this.rotation.set(o,g[0],g[1],g[2],g[3]);var y=this.computedMatrix;p(y,d);var v=y[15];if(Math.abs(v)>1e-6){var _=y[12]/v,w=y[13]/v,x=y[14]/v;this.recalcMatrix(o);var E=Math.exp(this.computedRadius[0]);this.center.set(o,_-y[2]*E,w-y[6]*E,x-y[10]*E),this.radius.idle(o)}else this.center.idle(o),this.radius.idle(o)},s.setDistance=function(o,d){d>0&&this.radius.set(o,Math.log(d))},s.setDistanceLimits=function(o,d){o=o>0?Math.log(o):-1/0,d=d>0?Math.log(d):1/0,d=Math.max(d,o),this.radius.bounds[0][0]=o,this.radius.bounds[1][0]=d},s.getDistanceLimits=function(o){var d=this.radius.bounds;return o?(o[0]=Math.exp(d[0][0]),o[1]=Math.exp(d[1][0]),o):[Math.exp(d[0][0]),Math.exp(d[1][0])]},s.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},s.fromJSON=function(o){var d=this.lastT(),g=o.center;g&&this.center.set(d,g[0],g[1],g[2]);var y=o.rotation;y&&this.rotation.set(d,y[0],y[1],y[2],y[3]);var v=o.distance;v&&v>0&&this.radius.set(d,Math.log(v)),this.setDistanceLimits(o.zoomMin,o.zoomMax)}},{"./lib/quatFromFrame":488,"filtered-vector":250,"gl-mat4/fromQuat":288,"gl-mat4/invert":299,"gl-mat4/lookAt":300}],490:[function(h,G,X){"use strict";var i=h("repeat-string");G.exports=function(m,b,p){return i(p=void 0!==p?p+"":" ",b)+m}},{"repeat-string":541}],491:[function(h,G,X){"use strict";function i(p,r){if("string"!=typeof p)return[p];var u=[p];"string"==typeof r||Array.isArray(r)?r={brackets:r}:r||(r={});var c=r.brackets?Array.isArray(r.brackets)?r.brackets:[r.brackets]:["{}","[]","()"],l=r.escape||"___",f=!!r.flat;c.forEach(function(o){var d=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),g=[];function y(v,_,w){var x=u.push(v.slice(o[0].length,-o[1].length))-1;return g.push(x),l+x+l}u.forEach(function(v,_){for(var w,x=0;v!=w;)if(w=v,v=v.replace(d,y),x++>1e4)throw Error("References have circular dependency. Please, check them.");u[_]=v}),g=g.reverse(),u=u.map(function(v){return g.forEach(function(_){v=v.replace(new RegExp("(\\"+l+_+"\\"+l+")","g"),o[0]+"$1"+o[1])}),v})});var s=new RegExp("\\"+l+"([0-9]+)\\"+l);return f?u:function o(d,g,y){for(var v,_=[],w=0;v=s.exec(d);){if(w++>1e4)throw Error("Circular references in parenthesis");_.push(d.slice(0,v.index)),_.push(o(g[v[1]],g)),d=d.slice(v.index+v[0].length)}return _.push(d),_}(u[0],u)}function m(p,r){if(r&&r.flat){var u,c=r&&r.escape||"___",l=p[0];if(!l)return"";for(var f=new RegExp("\\"+c+"([0-9]+)\\"+c),s=0;l!=u;){if(s++>1e4)throw Error("Circular references in "+p);u=l,l=l.replace(f,o)}return l}return p.reduce(function d(g,y){return Array.isArray(y)&&(y=y.reduce(d,"")),g+y},"");function o(d,g){if(null==p[g])throw Error("Reference "+g+"is undefined");return p[g]}}function b(p,r){return Array.isArray(p)?m(p,r):i(p,r)}b.parse=i,b.stringify=m,G.exports=b},{}],492:[function(h,G,X){"use strict";var i=h("pick-by-alias");G.exports=function(m){var b;return arguments.length>1&&(m=arguments),"string"==typeof m?m=m.split(/\s/).map(parseFloat):"number"==typeof m&&(m=[m]),m.length&&"number"==typeof m[0]?b=1===m.length?{width:m[0],height:m[0],x:0,y:0}:2===m.length?{width:m[0],height:m[1],x:0,y:0}:{x:m[0],y:m[1],width:m[2]-m[0]||0,height:m[3]-m[1]||0}:m&&((b={x:(m=i(m,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:m.top||0}).width=null==m.width?m.right?m.right-b.x:0:m.width,b.height=null==m.height?m.bottom?m.bottom-b.y:0:m.height),b}},{"pick-by-alias":498}],493:[function(h,G,X){G.exports=function(p){var r=[];return p.replace(m,function(u,c,l){var o,f=c.toLowerCase();for(o=void 0,l=(o=l.match(b))?o.map(Number):[],"m"==f&&l.length>2&&(r.push([c].concat(l.splice(0,2))),f="l",c="m"==c?"l":"L");;){if(l.length==i[f])return l.unshift(c),r.push(l);if(l.length<i[f])throw new Error("malformed path data");r.push([c].concat(l.splice(0,i[f])))}}),r};var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},m=/([astvzqmhlc])([^astvzqmhlc]*)/gi,b=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],494:[function(h,G,X){G.exports=function(i,m){m||(m=[0,""]),i=String(i);var b=parseFloat(i,10);return m[0]=b,m[1]=i.match(/[\d.\-\+]*\s*(.*)/)[1]||"",m}},{}],495:[function(h,G,X){(function(i){(function(){(function(){var m,b,p,r,u,c;"undefined"!=typeof performance&&null!==performance&&performance.now?G.exports=function(){return performance.now()}:null!=i&&i.hrtime?(G.exports=function(){return(m()-u)/1e6},b=i.hrtime,r=(m=function(){var l;return 1e9*(l=b())[0]+l[1]})(),c=1e9*i.uptime(),u=r-c):Date.now?(G.exports=function(){return Date.now()-p},p=Date.now()):(G.exports=function(){return(new Date).getTime()-p},p=(new Date).getTime())}).call(this)}).call(this)}).call(this,h("_process"))},{_process:528}],496:[function(h,G,X){"use strict";G.exports=function(m){var b=m.length;if(b<32){for(var p=1,r=0;r<b;++r)for(var u=0;u<r;++u)if(m[r]<m[u])p=-p;else if(m[r]===m[u])return 0;return p}var c=i.mallocUint8(b);for(r=0;r<b;++r)c[r]=0;for(p=1,r=0;r<b;++r)if(!c[r]){var l=1;for(c[r]=1,u=m[r];u!==r;u=m[u]){if(c[u])return i.freeUint8(c),0;l+=1,c[u]=1}1&l||(p=-p)}return i.freeUint8(c),p};var i=h("typedarray-pool")},{"typedarray-pool":617}],497:[function(h,G,X){"use strict";var i=h("typedarray-pool"),m=h("invert-permutation");X.rank=function(b){var p=b.length;switch(p){case 0:case 1:return 0;case 2:return b[1]}var r,u,c,l=i.mallocUint32(p),f=i.mallocUint32(p),s=0;for(m(b,f),c=0;c<p;++c)l[c]=b[c];for(c=p-1;c>0;--c)r=l[c],l[c]=l[u=f[c]],l[u]=r,f[c]=f[r],f[r]=u,s=(s+r)*c;return i.freeUint32(f),i.freeUint32(l),s},X.unrank=function(b,p,r){switch(b){case 0:return r||[];case 1:return r?(r[0]=0,r):[0];case 2:return r?(p?(r[0]=0,r[1]=1):(r[0]=1,r[1]=0),r):p?[0,1]:[1,0]}var u,c,l,f=1;for((r=r||new Array(b))[0]=0,l=1;l<b;++l)r[l]=l,f=f*l|0;for(l=b-1;l>0;--l)p=p-(u=p/f|0)*f|0,f=f/l|0,c=0|r[l],r[l]=0|r[u],r[u]=0|c;return r}},{"invert-permutation":450,"typedarray-pool":617}],498:[function(h,G,X){"use strict";G.exports=function(b,p,r){var u,c,l={};if("string"==typeof p&&(p=m(p)),Array.isArray(p)){var f={};for(c=0;c<p.length;c++)f[p[c]]=!0;p=f}for(u in p)p[u]=m(p[u]);var s={};for(u in p){var o=p[u];if(Array.isArray(o))for(c=0;c<o.length;c++){var d=o[c];if(r&&(s[d]=!0),d in b){if(l[u]=b[d],r)for(var g=c;g<o.length;g++)s[o[g]]=!0;break}}else u in b&&(p[u]&&(l[u]=b[u]),r&&(s[u]=!0))}if(r)for(u in b)s[u]||(l[u]=b[u]);return l};var i={};function m(b){return i[b]?i[b]:("string"==typeof b&&(b=i[b]=b.split(/\s*,\s*|\s+/)),b)}},{}],499:[function(h,G,X){"use strict";G.exports=function(m,b){for(var p=0|b.length,r=m.length,u=[new Array(p),new Array(p)],c=0;c<p;++c)u[0][c]=[],u[1][c]=[];for(c=0;c<r;++c){var l=m[c];u[0][l[0]].push(l),u[1][l[1]].push(l)}var x,f=[];for(c=0;c<p;++c)u[0][c].length+u[1][c].length===0&&f.push([c]);function s(w,x){var E=u[x][w[x]];E.splice(E.indexOf(w),1)}function o(w,x,E){for(var k,C,L,P=0;P<2;++P)if(u[P][x].length>0){k=u[P][x][0],L=P;break}C=k[1^L];for(var A=0;A<2;++A)for(var I=u[A][x],D=0;D<I.length;++D){var R=I[D],S=R[1^A];i(b[w],b[x],b[C],b[S])>0&&(k=R,C=S,L=A)}return E||k&&s(k,L),C}function d(w,x){var E=u[x][w][0],k=[w];s(E,x);for(var C=E[1^x];;){for(;C!==w;)k.push(C),C=o(k[k.length-2],C,!1);if(u[0][w].length+u[1][w].length===0)break;var L=k[k.length-1],P=w,A=k[1],I=o(L,P,!0);if(i(b[L],b[P],b[A],b[I])<0)break;k.push(w),C=o(L,P)}return k}for(c=0;c<p;++c)for(var y=0;y<2;++y){for(var v=[];u[y][c].length>0;){var _=d(c,y);(x=_)[1]===x[x.length-1]?v.push.apply(v,_):(v.length>0&&f.push(v),v=_)}v.length>0&&f.push(v)}return f};var i=h("compare-angle")},{"compare-angle":138}],500:[function(h,G,X){"use strict";G.exports=function(m,b){for(var p=i(m,b.length),r=new Array(b.length),u=new Array(b.length),c=[],l=0;l<b.length;++l){var f=p[l].length;u[l]=f,r[l]=!0,f<=1&&c.push(l)}for(;c.length>0;){var s=c.pop();r[s]=!1;var o=p[s];for(l=0;l<o.length;++l){var d=o[l];0==--u[d]&&c.push(d)}}var g=new Array(b.length),y=[];for(l=0;l<b.length;++l)r[l]?(g[l]=s=y.length,y.push(b[l])):g[l]=-1;var v=[];for(l=0;l<m.length;++l){var _=m[l];r[_[0]]&&r[_[1]]&&v.push([g[_[0]],g[_[1]]])}return[v,y]};var i=h("edges-to-adjacency-list")},{"edges-to-adjacency-list":187}],501:[function(h,G,X){"use strict";G.exports=function(f,s){for(var o=c(f,s),d=(s=o[1]).length,g=i(f=o[0],s.length),y=0;y<d;++y)if(g[y].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var v=m(f,s),_=(v=v.filter(function(fe){for(var he=fe.length,de=[0],be=0;be<he;++be){var pe=s[fe[be]],Te=s[fe[(be+1)%he]],ye=p(-pe[0],pe[1]),ke=p(-pe[0],Te[1]),ze=p(Te[0],pe[1]),je=p(Te[0],Te[1]);de=r(de,r(r(ye,ke),r(ze,je)))}return de[de.length-1]>0})).length,w=new Array(_),x=new Array(_);for(y=0;y<_;++y){w[y]=y;var E=new Array(_),k=v[y].map(function(fe){return s[fe]}),C=b([k]),L=0;e:for(var P=0;P<_;++P)if(E[P]=0,y!==P){for(var A=(ie=v[P]).length,I=0;I<A;++I){var D=C(s[ie[I]]);if(0!==D){D<0&&(E[P]=1,L+=1);continue e}}E[P]=1,L+=1}x[y]=[L,y,E]}for(x.sort(function(fe,he){return he[0]-fe[0]}),y=0;y<_;++y){var R=(E=x[y])[1],S=E[2];for(P=0;P<_;++P)S[P]&&(w[P]=R)}var N=function(fe){for(var he=new Array(fe),de=0;de<fe;++de)he[de]=[];return he}(_);for(y=0;y<_;++y)N[y].push(w[y]),N[w[y]].push(y);var B={},H=l(d,!1);for(y=0;y<_;++y)for(A=(ie=v[y]).length,P=0;P<A;++P){var Y=ie[P],Q=ie[(P+1)%A],ne=Math.min(Y,Q)+":"+Math.max(Y,Q);if(ne in B){var ae=B[ne];N[ae].push(y),N[y].push(ae),H[Y]=H[Q]=!0}else B[ne]=y}function te(fe){for(var he=fe.length,de=0;de<he;++de)if(!H[fe[de]])return!1;return!0}var K=[],q=l(_,-1);for(y=0;y<_;++y)w[y]!==y||te(v[y])?q[y]=-1:(K.push(y),q[y]=0);for(o=[];K.length>0;){var re=K.pop(),V=N[re];u(V,function(fe,he){return fe-he});var W,Z=V.length,oe=q[re];if(0===oe){var ie=v[re];W=[ie]}for(y=0;y<Z;++y){var ue=V[y];q[ue]>=0||(q[ue]=1^oe,K.push(ue),0===oe&&(te(ie=v[ue])||(ie.reverse(),W.push(ie))))}0===oe&&o.push(W)}return o};var i=h("edges-to-adjacency-list"),m=h("planar-dual"),b=h("point-in-big-polygon"),p=h("two-product"),r=h("robust-sum"),u=h("uniq"),c=h("./lib/trim-leaves");function l(f,s){for(var o=new Array(f),d=0;d<f;++d)o[d]=s;return o}},{"./lib/trim-leaves":500,"edges-to-adjacency-list":187,"planar-dual":499,"point-in-big-polygon":503,"robust-sum":553,"two-product":604,uniq:619}],502:[function(h,G,X){arguments[4][251][0].apply(X,arguments)},{dup:251}],503:[function(h,G,X){G.exports=function(l){for(var f=l.length,s=[],o=[],d=0;d<f;++d)for(var g=l[d],y=g.length,v=y-1,_=0;_<y;v=_++){var w=g[v],x=g[_];w[0]===x[0]?o.push([w,x]):s.push([w,x])}if(0===s.length)return 0===o.length?c:(E=u(o),function(L){return E(L[0],L[1])?0:1});var E,L,P,k=m(s),C=(L=k.slabs,P=k.coordinates,function(A){var I=p.le(P,A[0]);if(I<0)return 1;var D=L[I];if(!D){if(!(I>0&&P[I]===A[0]))return 1;D=L[I-1]}for(var R=1;D;){var S=D.key,N=i(A,S[0],S[1]);if(S[0][0]<S[1][0])if(N<0)D=D.left;else{if(!(N>0))return 0;R=-1,D=D.right}else if(N>0)D=D.left;else{if(!(N<0))return 0;R=1,D=D.right}}return R});return 0===o.length?C:function(L,P){return function(A){return L(A[0],A[1])?0:P(A)}}(u(o),C)};var i=h("robust-orientation")[3],m=h("slab-decomposition"),b=h("interval-tree-1d"),p=h("binary-search-bounds");function r(){return!0}function u(l){for(var f={},s=0;s<l.length;++s){var o=l[s],d=o[0][0],g=o[0][1],y=o[1][1],v=[Math.min(g,y),Math.max(g,y)];d in f?f[d].push(v):f[d]=[v]}var E,_={},w=Object.keys(f);for(s=0;s<w.length;++s)_[w[s]]=b(f[w[s]]);return E=_,function(k,C){var L=E[k];return!!L&&!!L.queryPoint(C,r)}}function c(l){return 1}},{"binary-search-bounds":502,"interval-tree-1d":448,"robust-orientation":548,"slab-decomposition":566}],504:[function(h,G,X){var i,m=h("./lib/build-log"),b=h("./lib/epsilon"),p=h("./lib/intersecter"),r=h("./lib/segment-chainer"),u=h("./lib/segment-selector"),c=h("./lib/geojson"),l=!1,f=b();function s(o,d,g){var y=i.segments(o),v=i.segments(d),_=g(i.combine(y,v));return i.polygon(_)}i={buildLog:function(o){return!0===o?l=m():!1===o&&(l=!1),!1!==l&&l.list},epsilon:function(o){return f.epsilon(o)},segments:function(o){var d=p(!0,f,l);return o.regions.forEach(d.addRegion),{segments:d.calculate(o.inverted),inverted:o.inverted}},combine:function(o,d){return{combined:p(!1,f,l).calculate(o.segments,o.inverted,d.segments,d.inverted),inverted1:o.inverted,inverted2:d.inverted}},selectUnion:function(o){return{segments:u.union(o.combined,l),inverted:o.inverted1||o.inverted2}},selectIntersect:function(o){return{segments:u.intersect(o.combined,l),inverted:o.inverted1&&o.inverted2}},selectDifference:function(o){return{segments:u.difference(o.combined,l),inverted:o.inverted1&&!o.inverted2}},selectDifferenceRev:function(o){return{segments:u.differenceRev(o.combined,l),inverted:!o.inverted1&&o.inverted2}},selectXor:function(o){return{segments:u.xor(o.combined,l),inverted:o.inverted1!==o.inverted2}},polygon:function(o){return{regions:r(o.segments,f,l),inverted:o.inverted}},polygonFromGeoJSON:function(o){return c.toPolygon(i,o)},polygonToGeoJSON:function(o){return c.fromPolygon(i,f,o)},union:function(o,d){return s(o,d,i.selectUnion)},intersect:function(o,d){return s(o,d,i.selectIntersect)},difference:function(o,d){return s(o,d,i.selectDifference)},differenceRev:function(o,d){return s(o,d,i.selectDifferenceRev)},xor:function(o,d){return s(o,d,i.selectXor)}},"object"==typeof window&&(window.PolyBool=i),G.exports=i},{"./lib/build-log":505,"./lib/epsilon":506,"./lib/geojson":507,"./lib/intersecter":508,"./lib/segment-chainer":510,"./lib/segment-selector":511}],505:[function(h,G,X){G.exports=function(){var i,m=0,b=!1;function p(r,u){return i.list.push({type:r,data:u?JSON.parse(JSON.stringify(u)):void 0}),i}return i={list:[],segmentId:function(){return m++},checkIntersection:function(r,u){return p("check",{seg1:r,seg2:u})},segmentChop:function(r,u){return p("div_seg",{seg:r,pt:u}),p("chop",{seg:r,pt:u})},statusRemove:function(r){return p("pop_seg",{seg:r})},segmentUpdate:function(r){return p("seg_update",{seg:r})},segmentNew:function(r,u){return p("new_seg",{seg:r,primary:u})},segmentRemove:function(r){return p("rem_seg",{seg:r})},tempStatus:function(r,u,c){return p("temp_status",{seg:r,above:u,below:c})},rewind:function(r){return p("rewind",{seg:r})},status:function(r,u,c){return p("status",{seg:r,above:u,below:c})},vert:function(r){return r===b?i:(b=r,p("vert",{x:r}))},log:function(r){return"string"!=typeof r&&(r=JSON.stringify(r,!1,"  ")),p("log",{txt:r})},reset:function(){return p("reset")},selected:function(r){return p("selected",{segs:r})},chainStart:function(r){return p("chain_start",{seg:r})},chainRemoveHead:function(r,u){return p("chain_rem_head",{index:r,pt:u})},chainRemoveTail:function(r,u){return p("chain_rem_tail",{index:r,pt:u})},chainNew:function(r,u){return p("chain_new",{pt1:r,pt2:u})},chainMatch:function(r){return p("chain_match",{index:r})},chainClose:function(r){return p("chain_close",{index:r})},chainAddHead:function(r,u){return p("chain_add_head",{index:r,pt:u})},chainAddTail:function(r,u){return p("chain_add_tail",{index:r,pt:u})},chainConnect:function(r,u){return p("chain_con",{index1:r,index2:u})},chainReverse:function(r){return p("chain_rev",{index:r})},chainJoin:function(r,u){return p("chain_join",{index1:r,index2:u})},done:function(){return p("done")}}}},{}],506:[function(h,G,X){G.exports=function(i){"number"!=typeof i&&(i=1e-10);var m={epsilon:function(b){return"number"==typeof b&&(i=b),i},pointAboveOrOnLine:function(b,p,r){var u=p[0],c=p[1];return(r[0]-u)*(b[1]-c)-(r[1]-c)*(b[0]-u)>=-i},pointBetween:function(b,p,r){var c=r[0]-p[0],f=r[1]-p[1],s=(b[0]-p[0])*c+(b[1]-p[1])*f;return!(s<i||s-(c*c+f*f)>-i)},pointsSameX:function(b,p){return Math.abs(b[0]-p[0])<i},pointsSameY:function(b,p){return Math.abs(b[1]-p[1])<i},pointsSame:function(b,p){return m.pointsSameX(b,p)&&m.pointsSameY(b,p)},pointsCompare:function(b,p){return m.pointsSameX(b,p)?m.pointsSameY(b,p)?0:b[1]<p[1]?-1:1:b[0]<p[0]?-1:1},pointsCollinear:function(b,p,r){return Math.abs((b[0]-p[0])*(p[1]-r[1])-(p[0]-r[0])*(b[1]-p[1]))<i},linesIntersect:function(b,p,r,u){var c=p[0]-b[0],l=p[1]-b[1],f=u[0]-r[0],s=u[1]-r[1],o=c*s-l*f;if(Math.abs(o)<i)return!1;var d=b[0]-r[0],g=b[1]-r[1],y=(f*g-s*d)/o,v=(c*g-l*d)/o,_={alongA:0,alongB:0,pt:[b[0]+y*c,b[1]+y*l]};return _.alongA=y<=-i?-2:y<i?-1:y-1<=-i?0:y-1<i?1:2,_.alongB=v<=-i?-2:v<i?-1:v-1<=-i?0:v-1<i?1:2,_},pointInsideRegion:function(b,p){for(var r=b[0],u=b[1],c=p[p.length-1][0],l=p[p.length-1][1],f=!1,s=0;s<p.length;s++){var o=p[s][0],d=p[s][1];d-u>i!=l-u>i&&(c-o)*(u-d)/(l-d)+o-r>i&&(f=!f),c=o,l=d}return f}};return m}},{}],507:[function(h,G,X){G.exports={toPolygon:function(m,b){function p(c){if(c.length<=0)return m.segments({inverted:!1,regions:[]});function l(o){var d=o.slice(0,o.length-1);return m.segments({inverted:!1,regions:[d]})}for(var f=l(c[0]),s=1;s<c.length;s++)f=m.selectDifference(m.combine(f,l(c[s])));return f}if("Polygon"===b.type)return m.polygon(p(b.coordinates));if("MultiPolygon"===b.type){for(var r=m.segments({inverted:!1,regions:[]}),u=0;u<b.coordinates.length;u++)r=m.selectUnion(m.combine(r,p(b.coordinates[u])));return m.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(m,b,p){function r(v,_){return b.pointInsideRegion([.5*(v[0][0]+v[1][0]),.5*(v[0][1]+v[1][1])],_)}function u(v){return{region:v,children:[]}}p=m.polygon(m.segments(p));var c=u(null);function l(v,_){for(var w=0;w<v.children.length;w++)if(r(_,(E=v.children[w]).region))return void l(E,_);var x=u(_);for(w=0;w<v.children.length;w++){var E;r((E=v.children[w]).region,_)&&(x.children.push(E),v.children.splice(w,1),w--)}v.children.push(x)}for(var f=0;f<p.regions.length;f++){var s=p.regions[f];s.length<3||l(c,s)}function o(v,_){for(var w=0,x=v[v.length-1][0],E=v[v.length-1][1],k=[],C=0;C<v.length;C++){var L=v[C][0],P=v[C][1];k.push([L,P]),w+=P*x-L*E,x=L,E=P}return w<0!==_&&k.reverse(),k.push([k[0][0],k[0][1]]),k}var d=[];function g(v){var _=[o(v.region,!1)];d.push(_);for(var w=0;w<v.children.length;w++)_.push(y(v.children[w]))}function y(v){for(var _=0;_<v.children.length;_++)g(v.children[_]);return o(v.region,!0)}for(f=0;f<c.children.length;f++)g(c.children[f]);return d.length<=0?{type:"Polygon",coordinates:[]}:1==d.length?{type:"Polygon",coordinates:d[0]}:{type:"MultiPolygon",coordinates:d}}}},{}],508:[function(h,G,X){var i=h("./linked-list");G.exports=function(m,b,p){function r(o,d,g){return{id:p?p.segmentId():-1,start:o,end:d,myFill:{above:g.myFill.above,below:g.myFill.below},otherFill:null}}var u=i.create();function c(o,d){u.insertBefore(o,function(g){return y=o.isStart,_=d,w=g.isStart,E=g.other.pt,(0!==(k=b.pointsCompare(o.pt,x=g.pt))?k:b.pointsSame(_,E)?0:y!==w?y?1:-1:b.pointAboveOrOnLine(_,w?x:E,w?E:x)?1:-1)<0;var y,_,w,x,E,k})}function l(o,d){var y,_,g=(c(_=i.node({isStart:!0,pt:(y=o).start,seg:y,primary:d,other:null,status:null}),y.end),_);return function(y,v,_){var w=i.node({isStart:!1,pt:v.end,seg:v,primary:_,other:y,status:null});y.other=w,c(w,y.pt)}(g,o,d),g}function f(o,d){var y,v,g=r(d,o.seg.end,o.seg);return y=o,v=d,p&&p.segmentChop(y.seg,v),y.other.remove(),y.seg.end=v,y.other.pt=v,c(y.other,y.pt),l(g,o.primary)}function s(o,d){var g=i.create();function y(R){return g.findTransition(function(S){var N,B,H,Y,Q,ne;return Y=(N=R).seg.end,(b.pointsCollinear(H=N.seg.start,Q=(B=S.ev).seg.start,ne=B.seg.end)?b.pointsCollinear(Y,Q,ne)||b.pointAboveOrOnLine(Y,Q,ne)?1:-1:b.pointAboveOrOnLine(H,Q,ne)?1:-1)>0})}function v(R,S){var N=R.seg,B=S.seg,H=N.start,Y=N.end,Q=B.start,ne=B.end;p&&p.checkIntersection(N,B);var ae=b.linesIntersect(H,Y,Q,ne);if(!1===ae){if(!b.pointsCollinear(H,Y,Q)||b.pointsSame(H,ne)||b.pointsSame(Y,Q))return!1;var te=b.pointsSame(H,Q),K=b.pointsSame(Y,ne);if(te&&K)return S;var q=!te&&b.pointBetween(H,Q,ne),re=!K&&b.pointBetween(Y,Q,ne);if(te)return re?f(S,Y):f(R,ne),S;q&&(K||(re?f(S,Y):f(R,ne)),f(S,H))}else 0===ae.alongA&&(-1===ae.alongB?f(R,Q):0===ae.alongB?f(R,ae.pt):1===ae.alongB&&f(R,ne)),0===ae.alongB&&(-1===ae.alongA?f(S,H):0===ae.alongA?f(S,ae.pt):1===ae.alongA&&f(S,Y));return!1}for(var _=[];!u.isEmpty();){var w=u.getHead();if(p&&p.vert(w.pt[0]),w.isStart){let R=function(){if(E){var S=v(w,E);if(S)return S}return!!k&&v(w,k)};p&&p.segmentNew(w.seg,w.primary);var x=y(w),E=x.before?x.before.ev:null,k=x.after?x.after.ev:null;p&&p.tempStatus(w.seg,!!E&&E.seg,!!k&&k.seg);var C,P,L=R();if(L&&(m?(P=null===w.seg.myFill.below||w.seg.myFill.above!==w.seg.myFill.below)&&(L.seg.myFill.above=!L.seg.myFill.above):L.seg.otherFill=w.seg.myFill,p&&p.segmentUpdate(L.seg),w.other.remove(),w.remove()),u.getHead()!==w){p&&p.rewind(w.seg);continue}m?(P=null===w.seg.myFill.below||w.seg.myFill.above!==w.seg.myFill.below,w.seg.myFill.below=k?k.seg.myFill.above:o,w.seg.myFill.above=P?!w.seg.myFill.below:w.seg.myFill.below):null===w.seg.otherFill&&(w.seg.otherFill={above:C=k?w.primary===k.primary?k.seg.otherFill.above:k.seg.myFill.above:w.primary?d:o,below:C}),p&&p.status(w.seg,!!E&&E.seg,!!k&&k.seg),w.other.status=x.insert(i.node({ev:w}))}else{var A=w.status;if(null===A)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(g.exists(A.prev)&&g.exists(A.next)&&v(A.prev.ev,A.next.ev),p&&p.statusRemove(A.ev.seg),A.remove(),!w.primary){var I=w.seg.myFill;w.seg.myFill=w.seg.otherFill,w.seg.otherFill=I}_.push(w.seg)}u.getHead().remove()}return p&&p.done(),_}return m?{addRegion:function(o){for(var d,g,y,v=o[o.length-1],_=0;_<o.length;_++){var w=b.pointsCompare(d=v,v=o[_]);0!==w&&l((g=w<0?d:v,y=w<0?v:d,{id:p?p.segmentId():-1,start:g,end:y,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(o){return s(o,!1)}}:{calculate:function(o,d,g,y){return o.forEach(function(v){l(r(v.start,v.end,v),!0)}),g.forEach(function(v){l(r(v.start,v.end,v),!1)}),s(d,y)}}}},{"./linked-list":509}],509:[function(h,G,X){G.exports={create:function(){var i={root:{root:!0,next:null},exists:function(m){return null!==m&&m!==i.root},isEmpty:function(){return null===i.root.next},getHead:function(){return i.root.next},insertBefore:function(m,b){for(var p=i.root,r=i.root.next;null!==r;){if(b(r))return m.prev=r.prev,m.next=r,r.prev.next=m,void(r.prev=m);p=r,r=r.next}p.next=m,m.prev=p,m.next=null},findTransition:function(m){for(var b=i.root,p=i.root.next;null!==p&&!m(p);)b=p,p=p.next;return{before:b===i.root?null:b,after:p,insert:function(r){return r.prev=b,r.next=p,b.next=r,null!==p&&(p.prev=r),r}}}};return i},node:function(i){return i.prev=null,i.next=null,i.remove=function(){i.prev.next=i.next,i.next&&(i.next.prev=i.prev),i.prev=null,i.next=null},i}}},{}],510:[function(h,G,X){G.exports=function(i,m,b){var p=[],r=[];return i.forEach(function(u){var c=u.start,l=u.end;if(m.pointsSame(c,l))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{b&&b.chainStart(u);for(var f={index:0,matches_head:!1,matches_pt1:!1},s={index:0,matches_head:!1,matches_pt1:!1},o=f,d=0;d<p.length;d++){var g=(x=p[d])[0],y=x[x.length-1];if(m.pointsSame(g,c)){if(D(d,!0,!0))break}else if(m.pointsSame(g,l)){if(D(d,!0,!1))break}else if(m.pointsSame(y,c)){if(D(d,!1,!0))break}else if(m.pointsSame(y,l)&&D(d,!1,!1))break}if(o===f)return p.push([c,l]),void(b&&b.chainNew(c,l));if(o===s){b&&b.chainMatch(f.index);var v=f.index,_=f.matches_pt1?l:c,w=f.matches_head,x=p[v],E=w?x[0]:x[x.length-1],k=w?x[1]:x[x.length-2],C=w?x[x.length-1]:x[0],L=w?x[x.length-2]:x[1];return m.pointsCollinear(k,E,_)&&(w?(b&&b.chainRemoveHead(f.index,_),x.shift()):(b&&b.chainRemoveTail(f.index,_),x.pop()),E=k),m.pointsSame(C,_)?(p.splice(v,1),m.pointsCollinear(L,C,E)&&(w?(b&&b.chainRemoveTail(f.index,E),x.pop()):(b&&b.chainRemoveHead(f.index,E),x.shift())),b&&b.chainClose(f.index),void r.push(x)):void(w?(b&&b.chainAddHead(f.index,_),x.unshift(_)):(b&&b.chainAddTail(f.index,_),x.push(_)))}var P=f.index,A=s.index;b&&b.chainConnect(P,A);var I=p[P].length<p[A].length;f.matches_head?s.matches_head?I?(R(P),S(P,A)):(R(A),S(A,P)):S(A,P):s.matches_head?S(P,A):I?(R(P),S(A,P)):(R(A),S(P,A))}function D(N,B,H){return o.index=N,o.matches_head=B,o.matches_pt1=H,o===f?(o=s,!1):(o=null,!0)}function R(N){b&&b.chainReverse(N),p[N].reverse()}function S(N,B){var H=p[N],Y=p[B],Q=H[H.length-1],ne=H[H.length-2],ae=Y[0],te=Y[1];m.pointsCollinear(ne,Q,ae)&&(b&&b.chainRemoveTail(N,Q),H.pop(),Q=ne),m.pointsCollinear(Q,ae,te)&&(b&&b.chainRemoveHead(B,ae),Y.shift()),b&&b.chainJoin(N,B),p[N]=H.concat(Y),p.splice(B,1)}}),r}},{}],511:[function(h,G,X){function i(b,p,r){var u=[];return b.forEach(function(c){var l=(c.myFill.above?8:0)+(c.myFill.below?4:0)+(c.otherFill&&c.otherFill.above?2:0)+(c.otherFill&&c.otherFill.below?1:0);0!==p[l]&&u.push({id:r?r.segmentId():-1,start:c.start,end:c.end,myFill:{above:1===p[l],below:2===p[l]},otherFill:null})}),r&&r.selected(u),u}G.exports={union:function(b,p){return i(b,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],p)},intersect:function(b,p){return i(b,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],p)},difference:function(b,p){return i(b,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],p)},differenceRev:function(b,p){return i(b,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],p)},xor:function(b,p){return i(b,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],p)}}},{}],512:[function(h,G,X){"use strict";var i=new Float64Array(4),m=new Float64Array(4),b=new Float64Array(4);G.exports=function(p,r,u,c,l){i.length<c.length&&(i=new Float64Array(c.length),m=new Float64Array(c.length),b=new Float64Array(c.length));for(var f=0;f<c.length;++f)i[f]=p[f]-c[f],m[f]=r[f]-p[f],b[f]=u[f]-p[f];var s=0,o=0,d=0,g=0,y=0,v=0;for(f=0;f<c.length;++f){var _=m[f],w=b[f],x=i[f];s+=_*_,o+=_*w,d+=w*w,g+=x*_,y+=x*w,v+=x*x}var E,k,C,L,P,A=Math.abs(s*d-o*o),I=o*y-d*g,D=o*g-s*y;if(I+D<=A)if(I<0)D<0&&g<0?(D=0,-g>=s?(I=1,E=s+2*g+v):E=g*(I=-g/s)+v):(I=0,y>=0?(D=0,E=v):-y>=d?(D=1,E=d+2*y+v):E=y*(D=-y/d)+v);else if(D<0)D=0,g>=0?(I=0,E=v):-g>=s?(I=1,E=s+2*g+v):E=g*(I=-g/s)+v;else{var R=1/A;E=(I*=R)*(s*I+o*(D*=R)+2*g)+D*(o*I+d*D+2*y)+v}else I<0?(C=d+y)>(k=o+g)?(L=C-k)>=(P=s-2*o+d)?(I=1,D=0,E=s+2*g+v):E=(I=L/P)*(s*I+o*(D=1-I)+2*g)+D*(o*I+d*D+2*y)+v:(I=0,C<=0?(D=1,E=d+2*y+v):y>=0?(D=0,E=v):E=y*(D=-y/d)+v):D<0?(C=s+g)>(k=o+y)?(L=C-k)>=(P=s-2*o+d)?(D=1,I=0,E=d+2*y+v):E=(I=1-(D=L/P))*(s*I+o*D+2*g)+D*(o*I+d*D+2*y)+v:(D=0,C<=0?(I=1,E=s+2*g+v):g>=0?(I=0,E=v):E=g*(I=-g/s)+v):(L=d+y-o-g)<=0?(I=0,D=1,E=d+2*y+v):L>=(P=s-2*o+d)?(I=1,D=0,E=s+2*g+v):E=(I=L/P)*(s*I+o*(D=1-I)+2*g)+D*(o*I+d*D+2*y)+v;var S=1-I-D;for(f=0;f<c.length;++f)l[f]=S*p[f]+I*r[f]+D*u[f];return E<0?0:E}},{}],513:[function(h,G,X){"use strict";var i=h("stream").Transform,m=h("stream-parser");function b(){i.call(this,{readableObjectMode:!0})}function p(r,u,c){Error.call(this),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=r,u&&(this.code=u),c&&(this.statusCode=c)}(b.prototype=Object.create(i.prototype)).constructor=b,m(b.prototype),X.ParserStream=b,X.sliceEq=function(r,u,c){for(var l=u,f=0;f<c.length;)if(r[l++]!==c[f++])return!1;return!0},X.str2arr=function(r,u){var c=[],l=0;if(u&&"hex"===u)for(;l<r.length;)c.push(parseInt(r.slice(l,l+2),16)),l+=2;else for(;l<r.length;l++)c.push(255&r.charCodeAt(l));return c},X.readUInt16LE=function(r,u){return r[u]|r[u+1]<<8},X.readUInt16BE=function(r,u){return r[u+1]|r[u]<<8},X.readUInt32LE=function(r,u){return r[u]|r[u+1]<<8|r[u+2]<<16|16777216*r[u+3]},X.readUInt32BE=function(r,u){return r[u+3]|r[u+2]<<8|r[u+1]<<16|16777216*r[u]},(p.prototype=Object.create(Error.prototype)).constructor=p,X.ProbeError=p},{stream:569,"stream-parser":585}],514:[function(h,G,X){"use strict";function i(p,r){var u=new Error(p);return u.code=r,u}function m(p){try{return decodeURIComponent(escape(p))}catch(r){return p}}function b(p,r,u){this.input=p.subarray(r,u),this.start=r;var c=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==c&&"MM\0*"!==c)throw i("invalid TIFF signature","EBADDATA");this.big_endian="M"===c[0]}b.prototype.each=function(p){this.aborted=!1;var r=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:r}];this.ifds_to_read.length>0&&!this.aborted;){var u=this.ifds_to_read.shift();u.offset&&this.scan_ifd(u.id,u.offset,p)}},b.prototype.read_uint16=function(p){var r=this.input;if(p+2>r.length)throw i("unexpected EOF","EBADDATA");return this.big_endian?256*r[p]+r[p+1]:r[p]+256*r[p+1]},b.prototype.read_uint32=function(p){var r=this.input;if(p+4>r.length)throw i("unexpected EOF","EBADDATA");return this.big_endian?16777216*r[p]+65536*r[p+1]+256*r[p+2]+r[p+3]:r[p]+256*r[p+1]+65536*r[p+2]+16777216*r[p+3]},b.prototype.is_subifd_link=function(p,r){return 0===p&&34665===r||0===p&&34853===r||34665===p&&40965===r},b.prototype.exif_format_length=function(p){switch(p){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},b.prototype.exif_format_read=function(p,r){var u;switch(p){case 1:case 2:return this.input[r];case 6:return(u=this.input[r])|33554430*(128&u);case 3:return this.read_uint16(r);case 8:return(u=this.read_uint16(r))|131070*(32768&u);case 4:return this.read_uint32(r);case 9:return 0|this.read_uint32(r);case 5:case 10:case 11:case 12:case 7:default:return null}},b.prototype.scan_ifd=function(p,r,u){var c=this.read_uint16(r);r+=2;for(var l=0;l<c;l++){var f=this.read_uint16(r),s=this.read_uint16(r+2),o=this.read_uint32(r+4),d=this.exif_format_length(s),g=o*d,y=g<=4?r+8:this.read_uint32(r+8),v=!1;if(y+g>this.input.length)throw i("unexpected EOF","EBADDATA");for(var _=[],w=y,x=0;x<o;x++,w+=d){var E=this.exif_format_read(s,w);if(null===E){_=null;break}_.push(E)}if(Array.isArray(_)&&2===s&&(_=m(String.fromCharCode.apply(null,_)))&&"\0"===_[_.length-1]&&(_=_.slice(0,-1)),this.is_subifd_link(p,f)&&Array.isArray(_)&&Number.isInteger(_[0])&&_[0]>0&&(this.ifds_to_read.push({id:f,offset:_[0]}),v=!0),!1===u({is_big_endian:this.big_endian,ifd:p,tag:f,format:s,count:o,entry_offset:r+this.start,data_length:g,data_offset:y+this.start,value:_,is_subifd_link:v}))return void(this.aborted=!0);r+=12}0===p&&this.ifds_to_read.push({id:1,offset:this.read_uint32(r)})},G.exports.ExifParser=b,G.exports.get_orientation=function(p){var r=0;try{return new b(p,0,p.length).each(function(u){if(0===u.ifd&&274===u.tag&&Array.isArray(u.value))return r=u.value[0],!1}),r}catch(u){return-1}}},{}],515:[function(h,G,X){"use strict";var i=h("./common").readUInt16BE,m=h("./common").readUInt32BE;function b(f,s){if(f.length<4+s)return null;var o=m(f,s);return f.length<o+s||o<8?null:{boxtype:String.fromCharCode.apply(null,f.slice(s+4,s+8)),data:f.slice(s+8,s+o),end:s+o}}function p(f,s){for(var o=0;;){var d=b(f,o);if(!d)break;switch(d.boxtype){case"ispe":s.sizes.push({width:m(d.data,4),height:m(d.data,8)});break;case"irot":s.transforms.push({type:"irot",value:3&d.data[0]});break;case"imir":s.transforms.push({type:"imir",value:1&d.data[0]})}o=d.end}}function r(f,s,o){for(var d=0,g=0;g<o;g++)d=256*d+(f[s+g]||0);return d}function u(f,s){for(var o=f[4]>>4&15,d=15&f[4],g=f[5]>>4&15,y=i(f,6),v=8,_=0;_<y;_++){var w=i(f,v),x=i(f,v+=2),E=r(f,v+=2,g),k=i(f,v+=g);if(v+=2,0===x&&1===k){var C=r(f,v,o),L=r(f,v+o,d);s.item_loc[w]={length:L,offset:C+E}}v+=k*(o+d)}}function c(f,s){for(var o=i(f,4),d=6,g=0;g<o;g++){var y=b(f,d);if(!y)break;if("infe"===y.boxtype){for(var v=i(y.data,4),_="",w=8;w<y.data.length&&y.data[w];w++)_+=String.fromCharCode(y.data[w]);s.item_inf[_]=v}d=y.end}}function l(f,s){for(var o=0;;){var d=b(f,o);if(!d)break;"ipco"===d.boxtype&&p(d.data,s),o=d.end}}G.exports.unbox=b,G.exports.readSizeFromMeta=function(f){var s={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(w,x){for(var E=4;;){var k=b(w,E);if(!k)break;"iprp"===k.boxtype&&l(k.data,x),"iloc"===k.boxtype&&u(k.data,x),"iinf"===k.boxtype&&c(k.data,x),E=k.end}}(f,s),s.sizes.length){var o,d,g,y=(d=(o=s.sizes).reduce(function(w,x){return w.width>x.width||w.width===x.width&&w.height>x.height?w:x}),g=o.reduce(function(w,x){return w.height>x.height||w.height===x.height&&w.width>x.width?w:x}),d.width>g.height||d.width===g.height&&d.height>g.width?d:g),v=1;s.transforms.forEach(function(w){var x={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},E={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===w.type&&(v=0===w.value?E[v]:x[v=x[v=E[v]]]),"irot"===w.type)for(var k=0;k<w.value;k++)v=x[v]});var _=null;return s.item_inf.Exif&&(_=s.item_loc[s.item_inf.Exif]),{width:y.width,height:y.height,orientation:s.transforms.length?v:null,variants:s.sizes,exif_location:_}}},G.exports.getMimeType=function(f){var s=String.fromCharCode.apply(null,f.slice(0,4)),o={};o[s]=!0;for(var d=8;d<f.length;d+=4)o[String.fromCharCode.apply(null,f.slice(d,d+4))]=!0;if(o.mif1||o.msf1||o.miaf)return"avif"===s||"avis"===s||"avio"===s?{type:"avif",mime:"image/avif"}:"heic"===s||"heix"===s?{type:"heic",mime:"image/heic"}:"hevc"===s||"hevx"===s?{type:"heic",mime:"image/heic-sequence"}:o.avif||o.avis?{type:"avif",mime:"image/avif"}:o.heic||o.heix||o.hevc||o.hevx||o.heis?o.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":513}],516:[function(h,G,X){"use strict";var i=h("../common").str2arr,m=h("../common").sliceEq,b=h("../common").readUInt32BE,p=h("../miaf_utils"),r=h("../exif_utils"),u=i("ftyp");G.exports=function(c){if(m(c,4,u)){var l=p.unbox(c,0);if(l){var f=p.getMimeType(l.data);if(f){for(var s,o=l.end;;){var d=p.unbox(c,o);if(!d)break;if(o=d.end,"mdat"===d.boxtype)return;if("meta"===d.boxtype){s=d.data;break}}if(s){var g=p.readSizeFromMeta(s);if(g){var y={width:g.width,height:g.height,type:f.type,mime:f.mime,wUnits:"px",hUnits:"px"};if(g.variants.length>1&&(y.variants=g.variants),g.orientation&&(y.orientation=g.orientation),g.exif_location&&g.exif_location.offset+g.exif_location.length<=c.length){var v=b(c,g.exif_location.offset),_=c.slice(g.exif_location.offset+v+4,g.exif_location.offset+g.exif_location.length),w=r.get_orientation(_);w>0&&(y.orientation=w)}return y}}}}}}},{"../common":513,"../exif_utils":514,"../miaf_utils":515}],517:[function(h,G,X){"use strict";var i=h("../common").str2arr,m=h("../common").sliceEq,b=h("../common").readUInt16LE,p=i("BM");G.exports=function(r){if(!(r.length<26)&&m(r,0,p))return{width:b(r,18),height:b(r,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":513}],518:[function(h,G,X){"use strict";var i=h("../common").str2arr,m=h("../common").sliceEq,b=h("../common").readUInt16LE,p=i("GIF87a"),r=i("GIF89a");G.exports=function(u){if(!(u.length<10)&&(m(u,0,p)||m(u,0,r)))return{width:b(u,6),height:b(u,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":513}],519:[function(h,G,X){"use strict";var i=h("../common").readUInt16LE;G.exports=function(m){var b=i(m,0),p=i(m,2),r=i(m,4);if(0===b&&1===p&&r){for(var u=[],c={width:0,height:0},l=0;l<r;l++){var f=m[6+16*l]||256,s=m[6+16*l+1]||256,o={width:f,height:s};u.push(o),(f>c.width||s>c.height)&&(c=o)}return{width:c.width,height:c.height,variants:u,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":513}],520:[function(h,G,X){"use strict";var i=h("../common").readUInt16BE,m=h("../common").str2arr,b=h("../common").sliceEq,p=h("../exif_utils"),r=m("Exif\0\0");G.exports=function(u){if(!(u.length<2)&&255===u[0]&&216===u[1])for(var c=2;;){if(u.length-c<2||255!==u[c++])return;for(var l,f,s=u[c++];255===s;)s=u[c++];if(208<=s&&s<=217||1===s)l=0;else{if(!(192<=s&&s<=254)||u.length-c<2)return;l=i(u,c)-2,c+=2}if(217===s||218===s)return;if(225===s&&l>=10&&b(u,c,r)&&(f=p.get_orientation(u.slice(c+6,c+l))),l>=5&&192<=s&&s<=207&&196!==s&&200!==s&&204!==s){if(u.length-c<l)return;var o={width:i(u,c+3),height:i(u,c+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return f>0&&(o.orientation=f),o}c+=l}}},{"../common":513,"../exif_utils":514}],521:[function(h,G,X){"use strict";var i=h("../common").str2arr,m=h("../common").sliceEq,b=h("../common").readUInt32BE,p=i("\x89PNG\r\n\x1a\n"),r=i("IHDR");G.exports=function(u){if(!(u.length<24)&&m(u,0,p)&&m(u,12,r))return{width:b(u,16),height:b(u,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":513}],522:[function(h,G,X){"use strict";var i=h("../common").str2arr,m=h("../common").sliceEq,b=h("../common").readUInt32BE,p=i("8BPS\0\x01");G.exports=function(r){if(!(r.length<22)&&m(r,0,p))return{width:b(r,18),height:b(r,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":513}],523:[function(h,G,X){"use strict";function i(f){return"number"==typeof f&&isFinite(f)&&f>0}var m=/<[-_.:a-zA-Z0-9][^>]*>/,b=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,p=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,r=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,u=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,c=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function l(f){return c.test(f)?f.match(c)[0]:"px"}G.exports=function(f){if(function(C){var L,P=0,A=C.length;for(239===C[0]&&187===C[1]&&191===C[2]&&(P=3);P<A&&(32===(L=C[P])||9===L||13===L||10===L);)P++;return P!==A&&60===C[P]}(f)){for(var s="",o=0;o<f.length;o++)s+=String.fromCharCode(f[o]);var d=(s.match(m)||[""])[0];if(b.test(d)){var g=(L=(C=d).match(p),P=C.match(r),A=C.match(u),{width:L&&(L[1]||L[2]),height:P&&(P[1]||P[2]),viewbox:A&&(A[1]||A[2])}),y=parseFloat(g.width),v=parseFloat(g.height);if(g.width&&g.height)return i(y)&&i(v)?{width:y,height:v,type:"svg",mime:"image/svg+xml",wUnits:l(g.width),hUnits:l(g.height)}:void 0;var _=(g.viewbox||"").split(" "),w={width:_[2],height:_[3]},x=parseFloat(w.width),E=parseFloat(w.height);if(i(x)&&i(E)&&l(w.width)===l(w.height)){var k=x/E;return g.width?i(y)?{width:y,height:y/k,type:"svg",mime:"image/svg+xml",wUnits:l(g.width),hUnits:l(g.width)}:void 0:g.height?i(v)?{width:v*k,height:v,type:"svg",mime:"image/svg+xml",wUnits:l(g.height),hUnits:l(g.height)}:void 0:{width:x,height:E,type:"svg",mime:"image/svg+xml",wUnits:l(w.width),hUnits:l(w.height)}}}}var C,L,P,A}},{}],524:[function(h,G,X){"use strict";var i=h("../common").str2arr,m=h("../common").sliceEq,b=h("../common").readUInt16LE,p=h("../common").readUInt16BE,r=h("../common").readUInt32LE,u=h("../common").readUInt32BE,c=i("II*\0"),l=i("MM\0*");function f(d,g,y){return y?p(d,g):b(d,g)}function s(d,g,y){return y?u(d,g):r(d,g)}function o(d,g,y){var v=f(d,g+2,y);return 1!==s(d,g+4,y)||3!==v&&4!==v?null:3===v?f(d,g+8,y):s(d,g+8,y)}G.exports=function(d){if(!(d.length<8)&&(m(d,0,c)||m(d,0,l))){var g=77===d[0],y=s(d,4,g)-8;if(!(y<0)){var v=y+8;if(!(d.length-v<2)){var _=12*f(d,v+0,g);if(!(_<=0||(v+=2,d.length-v<_))){var w,x,E,k;for(w=0;w<_;w+=12)256===(k=f(d,v+w,g))?x=o(d,v+w,g):257===k&&(E=o(d,v+w,g));return x&&E?{width:x,height:E,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":513}],525:[function(h,G,X){"use strict";var i=h("../common").str2arr,m=h("../common").sliceEq,b=h("../common").readUInt16LE,p=h("../common").readUInt32LE,r=h("../exif_utils"),u=i("RIFF"),c=i("WEBP");function l(o,d){if(157===o[d+3]&&1===o[d+4]&&42===o[d+5])return{width:16383&b(o,d+6),height:16383&b(o,d+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function f(o,d){if(47===o[d]){var g=p(o,d+1);return{width:1+(16383&g),height:1+(g>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function s(o,d){return{width:1+(o[d+6]<<16|o[d+5]<<8|o[d+4]),height:1+(o[d+9]<<d|o[d+8]<<8|o[d+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}G.exports=function(o){if(!(o.length<16)&&(m(o,0,u)||m(o,8,c))){var d=12,g=null,y=0,v=p(o,4)+8;if(!(v>o.length)){for(;d+8<v;)if(0!==o[d]){var _=String.fromCharCode.apply(null,o.slice(d,d+4)),w=p(o,d+4);"VP8 "===_&&w>=10?g=g||l(o,d+8):"VP8L"===_&&w>=9?g=g||f(o,d+8):"VP8X"===_&&w>=10?g=g||s(o,d+8):"EXIF"===_&&(y=r.get_orientation(o.slice(d+8,d+8+w)),d=1/0),d+=8+w}else d++;if(g)return y>0&&(g.orientation=y),g}}}},{"../common":513,"../exif_utils":514}],526:[function(h,G,X){"use strict";G.exports={avif:h("./parse_sync/avif"),bmp:h("./parse_sync/bmp"),gif:h("./parse_sync/gif"),ico:h("./parse_sync/ico"),jpeg:h("./parse_sync/jpeg"),png:h("./parse_sync/png"),psd:h("./parse_sync/psd"),svg:h("./parse_sync/svg"),tiff:h("./parse_sync/tiff"),webp:h("./parse_sync/webp")}},{"./parse_sync/avif":516,"./parse_sync/bmp":517,"./parse_sync/gif":518,"./parse_sync/ico":519,"./parse_sync/jpeg":520,"./parse_sync/png":521,"./parse_sync/psd":522,"./parse_sync/svg":523,"./parse_sync/tiff":524,"./parse_sync/webp":525}],527:[function(h,G,X){"use strict";var i=h("./lib/parsers_sync");G.exports=function(m){return function(b){for(var p=Object.keys(i),r=0;r<p.length;r++){var u=i[p[r]](b);if(u)return u}return null}(m)},G.exports.parsers=i},{"./lib/parsers_sync":526}],528:[function(h,G,X){var i,m,b=G.exports={};function p(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function u(v){if(i===setTimeout)return setTimeout(v,0);if((i===p||!i)&&setTimeout)return i=setTimeout,setTimeout(v,0);try{return i(v,0)}catch(_){try{return i.call(null,v,0)}catch(w){return i.call(this,v,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:p}catch(v){i=p}try{m="function"==typeof clearTimeout?clearTimeout:r}catch(v){m=r}}();var c,l=[],f=!1,s=-1;function o(){f&&c&&(f=!1,c.length?l=c.concat(l):s=-1,l.length&&d())}function d(){if(!f){var v=u(o);f=!0;for(var _=l.length;_;){for(c=l,l=[];++s<_;)c&&c[s].run();s=-1,_=l.length}c=null,f=!1,function(w){if(m===clearTimeout)return clearTimeout(w);if((m===r||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(w);try{m(w)}catch(x){try{return m.call(null,w)}catch(E){return m.call(this,w)}}}(v)}}function g(v,_){this.fun=v,this.array=_}function y(){}b.nextTick=function(v){var _=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)_[w-1]=arguments[w];l.push(new g(v,_)),1!==l.length||f||u(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={},b.on=y,b.addListener=y,b.once=y,b.off=y,b.removeListener=y,b.removeAllListeners=y,b.emit=y,b.prependListener=y,b.prependOnceListener=y,b.listeners=function(v){return[]},b.binding=function(v){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(v){throw new Error("process.chdir is not supported")},b.umask=function(){return 0}},{}],529:[function(h,G,X){G.exports=h("gl-quat/slerp")},{"gl-quat/slerp":329}],530:[function(h,G,X){(function(i){(function(){for(var m=h("performance-now"),b="undefined"==typeof window?i:window,p=["moz","webkit"],r="AnimationFrame",u=b["request"+r],c=b["cancel"+r]||b["cancelRequest"+r],l=0;!u&&l<p.length;l++)u=b[p[l]+"Request"+r],c=b[p[l]+"Cancel"+r]||b[p[l]+"CancelRequest"+r];if(!u||!c){var f=0,s=0,o=[];u=function(d){if(0===o.length){var g=m(),y=Math.max(0,1e3/60-(g-f));f=y+g,setTimeout(function(){var v=o.slice(0);o.length=0;for(var _=0;_<v.length;_++)if(!v[_].cancelled)try{v[_].callback(f)}catch(w){setTimeout(function(){throw w},0)}},Math.round(y))}return o.push({handle:++s,callback:d,cancelled:!1}),s},c=function(d){for(var g=0;g<o.length;g++)o[g].handle===d&&(o[g].cancelled=!0)}}G.exports=function(d){return u.call(b,d)},G.exports.cancel=function(){c.apply(b,arguments)},G.exports.polyfill=function(d){d||(d=b),d.requestAnimationFrame=u,d.cancelAnimationFrame=c}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":495}],531:[function(h,G,X){"use strict";var i=h("big-rat/add");G.exports=function(m,b){for(var p=m.length,r=new Array(p),u=0;u<p;++u)r[u]=i(m[u],b[u]);return r}},{"big-rat/add":87}],532:[function(h,G,X){"use strict";G.exports=function(m){for(var b=new Array(m.length),p=0;p<m.length;++p)b[p]=i(m[p]);return b};var i=h("big-rat")},{"big-rat":90}],533:[function(h,G,X){"use strict";var i=h("big-rat"),m=h("big-rat/mul");G.exports=function(b,p){for(var r=i(p),u=b.length,c=new Array(u),l=0;l<u;++l)c[l]=m(b[l],r);return c}},{"big-rat":90,"big-rat/mul":99}],534:[function(h,G,X){"use strict";var i=h("big-rat/sub");G.exports=function(m,b){for(var p=m.length,r=new Array(p),u=0;u<p;++u)r[u]=i(m[u],b[u]);return r}},{"big-rat/sub":101}],535:[function(h,G,X){"use strict";var i=h("compare-cell"),m=h("compare-oriented-cell"),b=h("cell-orientation");G.exports=function(p){p.sort(m);for(var r=p.length,u=0,c=0;c<r;++c){var l=p[c],f=b(l);if(0!==f){if(u>0){var s=p[u-1];if(0===i(l,s)&&b(s)!==f){u-=1;continue}}p[u++]=l}}return p.length=u,p}},{"cell-orientation":123,"compare-cell":139,"compare-oriented-cell":140}],536:[function(h,G,X){"use strict";var i=h("array-bounds"),m=h("color-normalize"),b=h("update-diff"),p=h("pick-by-alias"),r=h("object-assign"),u=h("flatten-vertex-data"),c=h("to-float32"),l=c.float32,f=c.fract32;G.exports=function(o,d){if("function"==typeof o?(d||(d={}),d.regl=o):d=o,d.length&&(d.positions=d),!(o=d.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var g,y,v,_,w,x,E=o._gl,k={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},C=[];return _=o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),y=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),v=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),w=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=o.buffer({usage:"static",type:"float",data:s}),I(d),g=o({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:o.prop("range"),lineWidth:o.prop("lineWidth"),capSize:o.prop("capSize"),opacity:o.prop("opacity"),scale:o.prop("scale"),translate:o.prop("translate"),scaleFract:o.prop("scaleFract"),translateFract:o.prop("translateFract"),viewport:function(R,S){return[S.viewport.x,S.viewport.y,R.viewportWidth,R.viewportHeight]}},attributes:{color:{buffer:_,offset:function(R,S){return 4*S.offset},divisor:1},position:{buffer:y,offset:function(R,S){return 8*S.offset},divisor:1},positionFract:{buffer:v,offset:function(R,S){return 8*S.offset},divisor:1},error:{buffer:w,offset:function(R,S){return 16*S.offset},divisor:1},direction:{buffer:x,stride:24,offset:0},lineOffset:{buffer:x,stride:24,offset:8},capOffset:{buffer:x,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:o.prop("viewport")},viewport:o.prop("viewport"),stencil:!1,instances:o.prop("count"),count:s.length}),r(L,{update:I,draw:P,destroy:D,regl:o,gl:E,canvas:E.canvas,groups:C}),L;function L(R){R?I(R):null===R&&D(),P()}function P(R){if("number"==typeof R)return A(R);R&&!Array.isArray(R)&&(R=[R]),o._refresh(),C.forEach(function(S,N){S&&(R&&(S.draw=!!R[N]),S.draw?A(N):S.draw=!0)})}function A(R){"number"==typeof R&&(R=C[R]),null!=R&&R&&R.count&&R.color&&R.opacity&&R.positions&&R.positions.length>1&&(R.scaleRatio=[R.scale[0]*R.viewport.width,R.scale[1]*R.viewport.height],g(R),R.after&&R.after(R))}function I(R){if(R){null!=R.length?"number"==typeof R[0]&&(R=[{positions:R}]):Array.isArray(R)||(R=[R]);var S=0,N=0;if(L.groups=C=R.map(function(te,K){var q=C[K];return te&&("function"==typeof te?te={after:te}:"number"==typeof te[0]&&(te={positions:te}),te=p(te,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),q||(C[K]=q={id:K,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},te=r({},k,te)),b(q,te,[{lineWidth:function(re){return.5*+re},capSize:function(re){return.5*+re},opacity:parseFloat,errors:function(re){return re=u(re),N+=re.length,re},positions:function(re,V){return re=u(re,"float64"),V.count=Math.floor(re.length/2),V.bounds=i(re,2),V.offset=S,S+=V.count,re}},{color:function(re,V){var W=V.count;if(re||(re="transparent"),!Array.isArray(re)||"number"==typeof re[0]){var Z=re;re=Array(W);for(var oe=0;oe<W;oe++)re[oe]=Z}if(re.length<W)throw Error("Not enough colors");for(var ie=new Uint8Array(4*W),ue=0;ue<W;ue++){var fe=m(re[ue],"uint8");ie.set(fe,4*ue)}return ie},range:function(re,V,W){return re||(re=V.bounds),V.scale=[1/(re[2]-re[0]),1/(re[3]-re[1])],V.translate=[-re[0],-re[1]],V.scaleFract=f(V.scale),V.translateFract=f(V.translate),re},viewport:function(re){var V;return Array.isArray(re)?V={x:re[0],y:re[1],width:re[2]-re[0],height:re[3]-re[1]}:re?((V={x:re.x||re.left||0,y:re.y||re.top||0}).width=re.right?re.right-V.x:re.w||re.width||0,V.height=re.bottom?re.bottom-V.y:re.h||re.height||0):V={x:0,y:0,width:E.drawingBufferWidth,height:E.drawingBufferHeight},V}}])),q}),S||N){var B=C.reduce(function(te,K,q){return te+(K?K.count:0)},0),H=new Float64Array(2*B),Y=new Uint8Array(4*B),Q=new Float32Array(4*B);C.forEach(function(te,K){if(te){var q=te.positions,V=te.offset,Z=te.errors;te.count&&(Y.set(te.color,4*V),Q.set(Z,4*V),H.set(q,2*V))}});var ne=l(H);y(ne);var ae=f(H,ne);v(ae),_(Y),w(Q)}}}function D(){y.destroy(),v.destroy(),_.destroy(),w.destroy(),x.destroy()}};var s=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":76,"color-normalize":131,"flatten-vertex-data":252,"object-assign":487,"pick-by-alias":498,"to-float32":599,"update-diff":621}],537:[function(h,G,X){"use strict";var i=h("color-normalize"),m=h("array-bounds"),b=h("object-assign"),p=h("glslify"),r=h("pick-by-alias"),u=h("flatten-vertex-data"),c=h("earcut"),l=h("array-normalize"),f=h("to-float32"),s=f.float32,o=f.fract32,d=h("es6-weak-map"),g=h("parse-rect"),y=h("array-find-index");function v(_,w){if(!(this instanceof v))return new v(_,w);if("function"==typeof _?(w||(w={}),w.regl=_):w=_,w.length&&(w.positions=w),!(_=w.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=_._gl,this.regl=_,this.passes=[],this.shaders=v.shaders.has(_)?v.shaders.get(_):v.shaders.set(_,v.createShaders(_)).get(_),this.update(w)}G.exports=v,v.dashMult=2,v.maxPatternLength=256,v.precisionThreshold=3e6,v.maxPoints=1e4,v.maxLines=2048,v.shaders=new d,v.createShaders=function(_){var w,x=_.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),E={primitive:"triangle strip",instances:_.prop("count"),count:4,offset:0,uniforms:{miterMode:function(C,L){return"round"===L.join?2:1},miterLimit:_.prop("miterLimit"),scale:_.prop("scale"),scaleFract:_.prop("scaleFract"),translateFract:_.prop("translateFract"),translate:_.prop("translate"),thickness:_.prop("thickness"),dashPattern:_.prop("dashTexture"),opacity:_.prop("opacity"),pixelRatio:_.context("pixelRatio"),id:_.prop("id"),dashSize:_.prop("dashLength"),viewport:function(C,L){return[L.viewport.x,L.viewport.y,C.viewportWidth,C.viewportHeight]},depth:_.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(C,L){return!L.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:_.prop("viewport")},viewport:_.prop("viewport")},k=_(b({vert:p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:p(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aCoord:{buffer:_.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:_.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:_.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:_.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:_.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},E));try{w=_(b({cull:{enable:!0,face:"back"},vert:p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:p(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aColor:{buffer:_.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:_.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:_.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:_.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:_.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:_.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},E))}catch(C){w=k}return{fill:_({primitive:"triangle",elements:function(C,L){return L.triangles},offset:0,vert:p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:p(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:_.prop("scale"),color:_.prop("fill"),scaleFract:_.prop("scaleFract"),translateFract:_.prop("translateFract"),translate:_.prop("translate"),opacity:_.prop("opacity"),pixelRatio:_.context("pixelRatio"),id:_.prop("id"),viewport:function(C,L){return[L.viewport.x,L.viewport.y,C.viewportWidth,C.viewportHeight]}},attributes:{position:{buffer:_.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:_.prop("positionFractBuffer"),stride:8,offset:8}},blend:E.blend,depth:{enable:!1},scissor:E.scissor,stencil:E.stencil,viewport:E.viewport}),rect:k,miter:w}},v.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},v.prototype.render=function(){for(var _,w=[],x=arguments.length;x--;)w[x]=arguments[x];w.length&&(_=this).update.apply(_,w),this.draw()},v.prototype.draw=function(){for(var _=this,w=[],x=arguments.length;x--;)w[x]=arguments[x];return(w.length?w:this.passes).forEach(function(E,k){var C;if(E&&Array.isArray(E))return(C=_).draw.apply(C,E);"number"==typeof E&&(E=_.passes[E]),E&&E.count>1&&E.opacity&&(_.regl._refresh(),E.fill&&E.triangles&&E.triangles.length>2&&_.shaders.fill(E),E.thickness&&(E.scale[0]*E.viewport.width>v.precisionThreshold||E.scale[1]*E.viewport.height>v.precisionThreshold||"rect"===E.join||!E.join&&(E.thickness<=2||E.count>=v.maxPoints)?_.shaders.rect(E):_.shaders.miter(E)))}),this},v.prototype.update=function(_){var w=this;if(_){null!=_.length?"number"==typeof _[0]&&(_=[{positions:_}]):Array.isArray(_)||(_=[_]);var x=this.regl,E=this.gl;if(_.forEach(function(A,I){var D=w.passes[I];if(void 0!==A)if(null!==A){if("number"==typeof A[0]&&(A={positions:A}),A=r(A,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),D||(w.passes[I]=D={id:I,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:x.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:x.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},A=b({},v.defaults,A)),null!=A.thickness&&(D.thickness=parseFloat(A.thickness)),null!=A.opacity&&(D.opacity=parseFloat(A.opacity)),null!=A.miterLimit&&(D.miterLimit=parseFloat(A.miterLimit)),null!=A.overlay&&(D.overlay=!!A.overlay,I<v.maxLines&&(D.depth=2*(v.maxLines-1-I%v.maxLines)/v.maxLines-1)),null!=A.join&&(D.join=A.join),null!=A.hole&&(D.hole=A.hole),null!=A.fill&&(D.fill=A.fill?i(A.fill,"uint8"):null),null!=A.viewport&&(D.viewport=g(A.viewport)),D.viewport||(D.viewport=g([E.drawingBufferWidth,E.drawingBufferHeight])),null!=A.close&&(D.close=A.close),null===A.positions&&(A.positions=[]),A.positions){var R,S;if(A.positions.x&&A.positions.y){var N=A.positions.x,B=A.positions.y;S=D.count=Math.max(N.length,B.length),R=new Float64Array(2*S);for(var H=0;H<S;H++)R[2*H]=N[H],R[2*H+1]=B[H]}else R=u(A.positions,"float64"),S=D.count=Math.floor(R.length/2);var Y=D.bounds=m(R,2);if(D.fill){for(var Q=[],ne={},ae=0,te=0,K=0,q=D.count;te<q;te++){var re=R[2*te],V=R[2*te+1];isNaN(re)||isNaN(V)||null==re||null==V?(re=R[2*ae],V=R[2*ae+1],ne[te]=ae):ae=te,Q[K++]=re,Q[K++]=V}if(A.splitNull){D.count-1 in ne||(ne[D.count]=D.count-1);var W=Object.keys(ne).map(Number).sort(function(Bt,gn){return Bt-gn}),Z=[],oe=0,ie=null!=D.hole?D.hole[0]:null;if(null!=ie){var ue=y(W,function(Bt){return Bt>=ie});(W=W.slice(0,ue)).push(ie)}for(var fe=function(Bt){var gn=Q.slice(2*oe,2*W[Bt]).concat(ie?Q.slice(2*ie):[]),hn=(D.hole||[]).map(function(it){return it-ie+(W[Bt]-oe)}),We=c(gn,hn);We=We.map(function(it){return it+oe+(it+oe<W[Bt]?0:ie-W[Bt])}),Z.push.apply(Z,We),oe=W[Bt]+1},he=0;he<W.length;he++)fe(he);for(var de=0,be=Z.length;de<be;de++)null!=ne[Z[de]]&&(Z[de]=ne[Z[de]]);D.triangles=Z}else{for(var pe=c(Q,D.hole||[]),Te=0,ye=pe.length;Te<ye;Te++)null!=ne[pe[Te]]&&(pe[Te]=ne[pe[Te]]);D.triangles=pe}}var ke=new Float64Array(R);l(ke,2,Y);var ze=new Float64Array(2*S+6);D.close?R[0]===R[2*S-2]&&R[1]===R[2*S-1]?(ze[0]=ke[2*S-4],ze[1]=ke[2*S-3]):(ze[0]=ke[2*S-2],ze[1]=ke[2*S-1]):(ze[0]=ke[0],ze[1]=ke[1]),ze.set(ke,2),D.close?R[0]===R[2*S-2]&&R[1]===R[2*S-1]?(ze[2*S+2]=ke[2],ze[2*S+3]=ke[3],D.count-=1):(ze[2*S+2]=ke[0],ze[2*S+3]=ke[1],ze[2*S+4]=ke[2],ze[2*S+5]=ke[3]):(ze[2*S+2]=ke[2*S-2],ze[2*S+3]=ke[2*S-1],ze[2*S+4]=ke[2*S-2],ze[2*S+5]=ke[2*S-1]);var je=s(ze);D.positionBuffer(je);var Ie=o(ze,je);D.positionFractBuffer(Ie)}if(A.range?D.range=A.range:D.range||(D.range=D.bounds),(A.range||A.positions)&&D.count){var Ce=D.bounds,Se=D.range[2]-D.range[0],Oe=D.range[3]-D.range[1];D.scale=[(Ce[2]-Ce[0])/Se,(Ce[3]-Ce[1])/Oe],D.translate=[-D.range[0]/Se+Ce[0]/Se||0,-D.range[1]/Oe+Ce[1]/Oe||0],D.scaleFract=o(D.scale),D.translateFract=o(D.translate)}if(A.dashes){var Be,He=0;if(!A.dashes||A.dashes.length<2)He=1,Be=new Uint8Array([255,255,255,255,255,255,255,255]);else{He=0;for(var Xe=0;Xe<A.dashes.length;++Xe)He+=A.dashes[Xe];Be=new Uint8Array(He*v.dashMult);for(var nt=0,et=255,qe=0;qe<2;qe++)for(var Ye=0;Ye<A.dashes.length;++Ye){for(var ot=0,at=A.dashes[Ye]*v.dashMult*.5;ot<at;++ot)Be[nt++]=et;et^=255}}D.dashLength=He,D.dashTexture({channels:1,data:Be,width:Be.length,height:1,mag:"linear",min:"linear"},0,0)}if(A.color){var ct=D.count,_t=A.color;_t||(_t="transparent");var xt=new Uint8Array(4*ct+4);if(Array.isArray(_t)&&"number"!=typeof _t[0]){for(var Ht=0;Ht<ct;Ht++){var At=i(_t[Ht],"uint8");xt.set(At,4*Ht)}xt.set(i(_t[0],"uint8"),4*ct)}else for(var ht=i(_t,"uint8"),st=0;st<ct+1;st++)xt.set(ht,4*st);D.colorBuffer({usage:"dynamic",type:"uint8",data:xt})}}else w.passes[I]=null}),_.length<this.passes.length){for(var k=_.length;k<this.passes.length;k++){var C=this.passes[k];C&&(C.colorBuffer.destroy(),C.positionBuffer.destroy(),C.dashTexture.destroy())}this.passes.length=_.length}for(var L=[],P=0;P<this.passes.length;P++)null!==this.passes[P]&&L.push(this.passes[P]);return this.passes=L,this}},v.prototype.destroy=function(){return this.passes.forEach(function(_){_.colorBuffer.destroy(),_.positionBuffer.destroy(),_.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":76,"array-find-index":77,"array-normalize":78,"color-normalize":131,earcut:186,"es6-weak-map":241,"flatten-vertex-data":252,glslify:442,"object-assign":487,"parse-rect":492,"pick-by-alias":498,"to-float32":599}],538:[function(h,G,X){"use strict";function i(k,C){return function(L){if(Array.isArray(L))return L}(k)||function(L,P){var A=null==L?null:"undefined"!=typeof Symbol&&L[Symbol.iterator]||L["@@iterator"];if(null!=A){var I,D,R=[],S=!0,N=!1;try{for(A=A.call(L);!(S=(I=A.next()).done)&&(R.push(I.value),!P||R.length!==P);S=!0);}catch(B){N=!0,D=B}finally{try{S||null==A.return||A.return()}finally{if(N)throw D}}return R}}(k,C)||b(k,C)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(k){return function(C){if(Array.isArray(C))return p(C)}(k)||function(C){if("undefined"!=typeof Symbol&&null!=C[Symbol.iterator]||null!=C["@@iterator"])return Array.from(C)}(k)||b(k)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(k,C){if(k){if("string"==typeof k)return p(k,C);var L=Object.prototype.toString.call(k).slice(8,-1);return"Object"===L&&k.constructor&&(L=k.constructor.name),"Map"===L||"Set"===L?Array.from(k):"Arguments"===L||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L)?p(k,C):void 0}}function p(k,C){(null==C||C>k.length)&&(C=k.length);for(var L=0,P=new Array(C);L<C;L++)P[L]=k[L];return P}var r=h("color-normalize"),u=h("array-bounds"),c=h("color-id"),l=h("@plotly/point-cluster"),f=h("object-assign"),s=h("glslify"),o=h("pick-by-alias"),d=h("update-diff"),g=h("flatten-vertex-data"),y=h("is-iexplorer"),v=h("to-float32"),_=h("parse-rect"),w=x;function x(k,C){var L=this;if(!(this instanceof x))return new x(k,C);"function"==typeof k?(C||(C={}),C.regl=k):(C=k,k=null),C&&C.length&&(C.positions=C);var P,A=(k=C.regl)._gl,I=[];this.tooManyColors=y,P=k.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),f(this,{regl:k,gl:A,groups:[],markerCache:[null],markerTextures:[null],palette:I,paletteIds:{},paletteTexture:P,maxColors:255,maxSize:100,canvas:A.canvas}),this.update(C);var D={uniforms:{constPointSize:!!C.constPointSize,pixelRatio:k.context("pixelRatio"),palette:P,paletteSize:function(N,B){return[L.tooManyColors?0:255,P.height]},scale:k.prop("scale"),scaleFract:k.prop("scaleFract"),translate:k.prop("translate"),translateFract:k.prop("translateFract"),opacity:k.prop("opacity"),marker:k.prop("markerTexture")},attributes:{x:function(N,B){return B.xAttr||{buffer:B.positionBuffer,stride:8,offset:0}},y:function(N,B){return B.yAttr||{buffer:B.positionBuffer,stride:8,offset:4}},xFract:function(N,B){return B.xAttr?{constant:[0,0]}:{buffer:B.positionFractBuffer,stride:8,offset:0}},yFract:function(N,B){return B.yAttr?{constant:[0,0]}:{buffer:B.positionFractBuffer,stride:8,offset:4}},size:function(N,B){return B.size.length?{buffer:B.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*B.size/L.maxSize)]}},borderSize:function(N,B){return B.borderSize.length?{buffer:B.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*B.borderSize/L.maxSize)]}},colorId:function(N,B){return B.color.length?{buffer:B.colorBuffer,stride:L.tooManyColors?8:4,offset:0}:{constant:L.tooManyColors?I.slice(4*B.color,4*B.color+4):[B.color]}},borderColorId:function(N,B){return B.borderColor.length?{buffer:B.colorBuffer,stride:L.tooManyColors?8:4,offset:L.tooManyColors?4:2}:{constant:L.tooManyColors?I.slice(4*B.borderColor,4*B.borderColor+4):[B.borderColor]}},isActive:function(N,B){return!0===B.activation?{constant:[1]}:B.activation?B.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:k.prop("viewport")},viewport:k.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:k.prop("elements"),count:k.prop("count"),offset:k.prop("offset"),primitive:"points"},R=f({},D);R.frag=s(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(marker, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),R.vert=s(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=k(R);var S=f({},D);S.frag=s(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),S.vert=s(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),y&&(S.frag=S.frag.replace("smoothstep","smoothStep"),R.frag=R.frag.replace("smoothstep","smoothStep")),this.drawCircle=k(S)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var k=this,C=arguments.length,L=new Array(C),P=0;P<C;P++)L[P]=arguments[P];var A=this.groups;if(1===L.length&&Array.isArray(L[0])&&(null===L[0][0]||Array.isArray(L[0][0]))&&(L=L[0]),this.regl._refresh(),L.length)for(var I=0;I<L.length;I++)this.drawItem(I,L[I]);else A.forEach(function(D,R){k.drawItem(R)});return this},x.prototype.drawItem=function(k,C){var L=this.groups,P=L[k];if("number"==typeof C&&(k=C,P=L[C],C=null),P&&P.count&&P.opacity){P.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,P,C));for(var A=[],I=1;I<P.activation.length;I++)P.activation[I]&&(!0===P.activation[I]||P.activation[I].data.length)&&A.push.apply(A,m(this.getMarkerDrawOptions(I,P,C)));A.length&&this.drawMarker(A)}},x.prototype.getMarkerDrawOptions=function(k,C,L){var P=C.range,A=C.tree,I=C.viewport,D=C.activation,R=C.selectionBuffer,S=C.count;if(!A)return L?[f({},C,{markerTexture:this.markerTextures[k],activation:D[k],count:L.length,elements:L,offset:0})]:[f({},C,{markerTexture:this.markerTextures[k],activation:D[k],offset:0})];var N=[],B=A.range(P,{lod:!0,px:[(P[2]-P[0])/I.width,(P[3]-P[1])/I.height]});if(L){for(var H=D[k].data,Y=new Uint8Array(S),Q=0;Q<L.length;Q++){var ne=L[Q];Y[ne]=H?H[ne]:1}R.subdata(Y)}for(var ae=B.length;ae--;){var te=i(B[ae],2),K=te[0];N.push(f({},C,{markerTexture:this.markerTextures[k],activation:L?R:D[k],offset:K,count:te[1]-K}))}return N},x.prototype.update=function(){for(var k=this,C=arguments.length,L=new Array(C),P=0;P<C;P++)L[P]=arguments[P];if(L.length){1===L.length&&Array.isArray(L[0])&&(L=L[0]);var A=this.groups,I=this.gl,D=this.regl,R=this.maxSize,S=this.maxColors,N=this.palette;this.groups=A=L.map(function(B,H){var Y=A[H];if(void 0===B)return Y;null===B?B={positions:null}:"function"==typeof B?B={ondraw:B}:"number"==typeof B[0]&&(B={positions:B}),null===(B=o(B,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(B.positions=[]),null!=B.tooManyColors&&(k.tooManyColors=B.tooManyColors),Y||(A[H]=Y={id:H,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:D.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},B=f({},x.defaults,B)),B.positions&&!("marker"in B)&&(B.marker=Y.marker,delete Y.marker),B.marker&&!("positions"in B)&&(B.positions=Y.positions,delete Y.positions);var Q=0,ne=0;if(d(Y,B,[{snap:!0,size:function(ye,ke){return null==ye&&(ye=x.defaults.size),Q+=ye&&ye.length?1:0,ye},borderSize:function(ye,ke){return null==ye&&(ye=x.defaults.borderSize),Q+=ye&&ye.length?1:0,ye},opacity:parseFloat,color:function(ye,ke){return null==ye&&(ye=x.defaults.color),ye=k.updateColor(ye),ne++,ye},borderColor:function(ye,ke){return null==ye&&(ye=x.defaults.borderColor),ye=k.updateColor(ye),ne++,ye},bounds:function(ye,ke,ze){return"range"in ze||(ze.range=null),ye},positions:function(ye,ke,ze){var je=ke.snap,Ie=ke.positionBuffer,Ce=ke.positionFractBuffer,_e=ke.selectionBuffer;if(ye.x||ye.y)return ke.xAttr=ye.x.length?{buffer:D.buffer(ye.x),offset:0,stride:4,count:ye.x.length}:{buffer:ye.x.buffer,offset:4*ye.x.offset||0,stride:4*(ye.x.stride||1),count:ye.x.count},ke.yAttr=ye.y.length?{buffer:D.buffer(ye.y),offset:0,stride:4,count:ye.y.length}:{buffer:ye.y.buffer,offset:4*ye.y.offset||0,stride:4*(ye.y.stride||1),count:ye.y.count},ke.count=Math.max(ke.xAttr.count,ke.yAttr.count),ye;ye=g(ye,"float64");var we=ke.count=Math.floor(ye.length/2),Se=ke.bounds=we?u(ye,2):null;if(ze.range||ke.range||(delete ke.range,ze.range=Se),ze.marker||ke.marker||(delete ke.marker,ze.marker=null),je&&(!0===je||we>je)?ke.tree=l(ye,{bounds:Se}):je&&je.length&&(ke.tree=je),ke.tree){var Oe={primitive:"points",usage:"static",data:ke.tree,type:"uint32"};ke.elements?ke.elements(Oe):ke.elements=D.elements(Oe)}var Be=v.float32(ye);return Ie({data:Be,usage:"dynamic"}),Ce({data:v.fract32(ye,Be),usage:"dynamic"}),_e({data:new Uint8Array(we),type:"uint8",usage:"stream"}),ye}},{marker:function(ye,ke,ze){var je=ke.activation;if(je.forEach(function(Be){return Be&&Be.destroy&&Be.destroy()}),je.length=0,ye&&"number"!=typeof ye[0]){for(var Ie=[],Ce=0,_e=Math.min(ye.length,ke.count);Ce<_e;Ce++){var we=k.addMarker(ye[Ce]);Ie[we]||(Ie[we]=new Uint8Array(ke.count)),Ie[we][Ce]=1}for(var Se=0;Se<Ie.length;Se++)if(Ie[Se]){var Oe={data:Ie[Se],type:"uint8",usage:"static"};je[Se]?je[Se](Oe):je[Se]=D.buffer(Oe),je[Se].data=Ie[Se]}}else je[k.addMarker(ye)]=!0;return ye},range:function(ye,ke,ze){var je=ke.bounds;if(je)return ye||(ye=je),ke.scale=[1/(ye[2]-ye[0]),1/(ye[3]-ye[1])],ke.translate=[-ye[0],-ye[1]],ke.scaleFract=v.fract(ke.scale),ke.translateFract=v.fract(ke.translate),ye},viewport:function(ye){return _(ye||[I.drawingBufferWidth,I.drawingBufferHeight])}}]),Q){var te=Y.count,K=Y.size,q=Y.borderSize,re=Y.sizeBuffer,V=new Uint8Array(2*te);if(K.length||q.length)for(var W=0;W<te;W++)V[2*W]=Math.round(255*(null==K[W]?K:K[W])/R),V[2*W+1]=Math.round(255*(null==q[W]?q:q[W])/R);re({data:V,usage:"dynamic"})}if(ne){var Z,ie=Y.count,ue=Y.color,fe=Y.borderColor,he=Y.colorBuffer;if(k.tooManyColors){if(ue.length||fe.length){Z=new Uint8Array(8*ie);for(var de=0;de<ie;de++){var be=ue[de];Z[8*de]=N[4*be],Z[8*de+1]=N[4*be+1],Z[8*de+2]=N[4*be+2],Z[8*de+3]=N[4*be+3];var pe=fe[de];Z[8*de+4]=N[4*pe],Z[8*de+5]=N[4*pe+1],Z[8*de+6]=N[4*pe+2],Z[8*de+7]=N[4*pe+3]}}}else if(ue.length||fe.length){Z=new Uint8Array(4*ie+2);for(var Te=0;Te<ie;Te++)null!=ue[Te]&&(Z[4*Te]=ue[Te]%S,Z[4*Te+1]=Math.floor(ue[Te]/S)),null!=fe[Te]&&(Z[4*Te+2]=fe[Te]%S,Z[4*Te+3]=Math.floor(fe[Te]/S))}he({data:Z||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return Y})}},x.prototype.addMarker=function(k){var C,L=this.markerTextures,P=this.regl,A=this.markerCache,I=null==k?0:A.indexOf(k);if(I>=0)return I;if(k instanceof Uint8Array||k instanceof Uint8ClampedArray)C=k;else{C=new Uint8Array(k.length);for(var D=0,R=k.length;D<R;D++)C[D]=255*k[D]}var S=Math.floor(Math.sqrt(C.length));return I=L.length,A.push(k),L.push(P.texture({channels:1,data:C,radius:S,mag:"linear",min:"linear"})),I},x.prototype.updateColor=function(k){var C=this.paletteIds,L=this.palette,P=this.maxColors;Array.isArray(k)||(k=[k]);var A=[];if("number"==typeof k[0]){var I=[];if(Array.isArray(k))for(var D=0;D<k.length;D+=4)I.push(k.slice(D,D+4));else for(var R=0;R<k.length;R+=4)I.push(k.subarray(R,R+4));k=I}for(var S=0;S<k.length;S++){var N=k[S];N=r(N,"uint8");var B=c(N,!1);if(null==C[B]){var H=L.length;C[B]=Math.floor(H/4),L[H]=N[0],L[H+1]=N[1],L[H+2]=N[2],L[H+3]=N[3]}A[S]=C[B]}return!this.tooManyColors&&L.length>4*P&&(this.tooManyColors=!0),this.updatePalette(L),1===A.length?A[0]:A},x.prototype.updatePalette=function(k){if(!this.tooManyColors){var C=this.maxColors,L=this.paletteTexture,P=Math.ceil(.25*k.length/C);if(P>1)for(var A=.25*(k=k.slice()).length%C;A<P*C;A++)k.push(0,0,0,0);L.height<P&&L.resize(C,P),L.subimage({width:Math.min(.25*k.length,C),height:P,data:k},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(k){k.sizeBuffer.destroy(),k.positionBuffer.destroy(),k.positionFractBuffer.destroy(),k.colorBuffer.destroy(),k.activation.forEach(function(C){return C&&C.destroy&&C.destroy()}),k.selectionBuffer.destroy(),k.elements&&k.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(k){return k&&k.destroy&&k.destroy()}),this};var E=h("object-assign");G.exports=function(k,C){var L=new w(k,C),P=L.render.bind(L);return E(P,{render:P,update:L.update.bind(L),draw:L.draw.bind(L),destroy:L.destroy.bind(L),regl:L.regl,gl:L.gl,canvas:L.gl.canvas,groups:L.groups,markers:L.markerCache,palette:L.palette}),P}},{"@plotly/point-cluster":59,"array-bounds":76,"color-id":129,"color-normalize":131,"flatten-vertex-data":252,glslify:442,"is-iexplorer":454,"object-assign":487,"parse-rect":492,"pick-by-alias":498,"to-float32":599,"update-diff":621}],539:[function(h,G,X){"use strict";var i=h("regl-scatter2d"),m=h("pick-by-alias"),b=h("array-bounds"),p=h("raf"),r=h("array-range"),u=h("parse-rect"),c=h("flatten-vertex-data");function l(d,g){if(!(this instanceof l))return new l(d,g);this.traces=[],this.passes={},this.regl=d,this.scatter=i(d),this.canvas=this.scatter.canvas}function f(d,g,y){return(null!=d.id?d.id:d)<<16|(255&g)<<8|255&y}function s(d,g,y){var v,_,w,x,E=d[g],k=d[y];return E.length>2?(v=E[1],_=E[3]):E.length?(v=E[0],_=E[1]):(v=E.y,_=E.y+E.height),k.length>2?(w=k[0],x=k[2]):k.length?(w=k[0],x=k[1]):(w=k.x,x=k.x+k.width),[w,v,x,_]}function o(d){if("number"==typeof d)return[d,d,d,d];if(2===d.length)return[d[0],d[1],d[0],d[1]];var g=u(d);return[g.x,g.y,g.x+g.width,g.y+g.height]}G.exports=l,l.prototype.render=function(){for(var d,g=this,y=[],v=arguments.length;v--;)y[v]=arguments[v];return y.length&&(d=this).update.apply(d,y),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=p(function(){g.draw(),g.dirty=!0,g.planned=null})):(this.draw(),this.dirty=!0,p(function(){g.dirty=!1})),this)},l.prototype.update=function(){for(var d,g=[],y=arguments.length;y--;)g[y]=arguments[y];if(g.length){for(var v=0;v<g.length;v++)this.updateItem(v,g[v]);this.traces=this.traces.filter(Boolean);for(var _=[],w=0,x=0;x<this.traces.length;x++){for(var E=this.traces[x],k=this.traces[x].passes,C=0;C<k.length;C++)_.push(this.passes[k[C]]);E.passOffset=w,w+=E.passes.length}return(d=this.scatter).update.apply(d,_),this}},l.prototype.updateItem=function(d,g){var y=this.regl;if(null===g)return this.traces[d]=null,this;if(!g)return this;var v,_=m(g,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),w=this.traces[d]||(this.traces[d]={id:d,buffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:u([y._gl.drawingBufferWidth,y._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=_.color&&(w.color=_.color),null!=_.size&&(w.size=_.size),null!=_.marker&&(w.marker=_.marker),null!=_.borderColor&&(w.borderColor=_.borderColor),null!=_.borderSize&&(w.borderSize=_.borderSize),null!=_.opacity&&(w.opacity=_.opacity),_.viewport&&(w.viewport=u(_.viewport)),null!=_.diagonal&&(w.diagonal=_.diagonal),null!=_.upper&&(w.upper=_.upper),null!=_.lower&&(w.lower=_.lower),_.data){w.buffer(c(_.data)),w.columns=_.data.length,w.count=_.data[0].length,w.bounds=[];for(var x=0;x<w.columns;x++)w.bounds[x]=b(_.data[x],1)}_.range&&(w.range=_.range,v=w.range&&"number"!=typeof w.range[0]),_.domain&&(w.domain=_.domain);var E=!1;null!=_.padding&&(Array.isArray(_.padding)&&_.padding.length===w.columns&&"number"==typeof _.padding[_.padding.length-1]?(w.padding=_.padding.map(o),E=!0):w.padding=o(_.padding));var k=w.columns,C=w.count,L=w.viewport.width,P=w.viewport.height,A=w.viewport.x,I=w.viewport.y,D=L/k,R=P/k;w.passes=[];for(var S=0;S<k;S++)for(var N=0;N<k;N++)if((w.diagonal||N!==S)&&(w.upper||!(S>N))&&(w.lower||!(S<N))){var B=f(w.id,S,N),H=this.passes[B]||(this.passes[B]={});if(_.data&&(H.positions=_.transpose?{x:{buffer:w.buffer,offset:N,count:C,stride:k},y:{buffer:w.buffer,offset:S,count:C,stride:k}}:{x:{buffer:w.buffer,offset:N*C,count:C},y:{buffer:w.buffer,offset:S*C,count:C}},H.bounds=s(w.bounds,S,N)),_.domain||_.viewport||_.data){var Y=E?s(w.padding,S,N):w.padding;if(w.domain){var Q=s(w.domain,S,N);H.viewport=[A+Q[0]*L+Y[0],I+Q[1]*P+Y[1],A+Q[2]*L-Y[2],I+Q[3]*P-Y[3]]}else H.viewport=[A+N*D+D*Y[0],I+S*R+R*Y[1],A+(N+1)*D-D*Y[2],I+(S+1)*R-R*Y[3]]}_.color&&(H.color=w.color),_.size&&(H.size=w.size),_.marker&&(H.marker=w.marker),_.borderSize&&(H.borderSize=w.borderSize),_.borderColor&&(H.borderColor=w.borderColor),_.opacity&&(H.opacity=w.opacity),_.range&&(H.range=v?s(w.range,S,N):w.range||H.bounds),w.passes.push(B)}return this},l.prototype.draw=function(){for(var d,g=[],y=arguments.length;y--;)g[y]=arguments[y];if(g.length){for(var v=[],_=0;_<g.length;_++)if("number"==typeof g[_]){var w=this.traces[g[_]],E=w.passOffset;v.push.apply(v,r(E,E+w.passes.length))}else if(g[_].length){var k=g[_],C=this.traces[_],L=C.passes,P=C.passOffset;L=L.map(function(A,I){v[P+I]=k})}(d=this.scatter).draw.apply(d,v)}else this.scatter.draw();return this},l.prototype.destroy=function(){return this.traces.forEach(function(d){d.buffer&&d.buffer.destroy&&d.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":76,"array-range":79,"flatten-vertex-data":252,"parse-rect":492,"pick-by-alias":498,raf:530,"regl-scatter2d":538}],540:[function(h,G,X){var m;m=function(){function i(Ge,Pe){this.id=oe++,this.type=Ge,this.data=Pe}function m(Ge){return"["+function Pe(Ee){if(0===Ee.length)return[];var Ne=Ee.charAt(0),Ve=Ee.charAt(Ee.length-1);if(1<Ee.length&&Ne===Ve&&('"'===Ne||"'"===Ne))return['"'+Ee.substr(1,Ee.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Ne=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ee))return Pe(Ee.substr(0,Ne.index)).concat(Pe(Ne[1])).concat(Pe(Ee.substr(Ne.index+Ne[0].length)));if(1===(Ne=Ee.split(".")).length)return['"'+Ee.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ee=[],Ve=0;Ve<Ne.length;++Ve)Ee=Ee.concat(Pe(Ne[Ve]));return Ee}(Ge).join("][")+"]"}function b(Ge){return"string"==typeof Ge?Ge.split():Ge}function p(Ge){return"string"==typeof Ge?document.querySelector(Ge):Ge}function u(Ge,Pe){for(var Ee=Array(Ge),Ne=0;Ne<Ge;++Ne)Ee[Ne]=Pe(Ne);return Ee}function c(Ge){var Pe,Ee;return Pe=(65535<Ge)<<4,Pe|=Ee=(255<(Ge>>>=Pe))<<3,(Pe|=Ee=(15<(Ge>>>=Ee))<<2)|(Ee=(3<(Ge>>>=Ee))<<1)|Ge>>>Ee>>1}function l(){function Ge(Ne){e:{for(var Ve=16;268435456>=Ve;Ve*=16)if(Ne<=Ve){Ne=Ve;break e}Ne=0}return 0<(Ve=Ee[c(Ne)>>2]).length?Ve.pop():new ArrayBuffer(Ne)}function Pe(Ne){Ee[c(Ne.byteLength)>>2].push(Ne)}var Ee=u(8,function(){return[]});return{alloc:Ge,free:Pe,allocType:function(Ne,Ve){var Ke=null;switch(Ne){case 5120:Ke=new Int8Array(Ge(Ve),0,Ve);break;case 5121:Ke=new Uint8Array(Ge(Ve),0,Ve);break;case 5122:Ke=new Int16Array(Ge(2*Ve),0,Ve);break;case 5123:Ke=new Uint16Array(Ge(2*Ve),0,Ve);break;case 5124:Ke=new Int32Array(Ge(4*Ve),0,Ve);break;case 5125:Ke=new Uint32Array(Ge(4*Ve),0,Ve);break;case 5126:Ke=new Float32Array(Ge(4*Ve),0,Ve);break;default:return null}return Ke.length!==Ve?Ke.subarray(0,Ve):Ke},freeType:function(Ne){Pe(Ne.buffer)}}}function f(Ge){return!!Ge&&"object"==typeof Ge&&Array.isArray(Ge.shape)&&Array.isArray(Ge.stride)&&"number"==typeof Ge.offset&&Ge.shape.length===Ge.stride.length&&(Array.isArray(Ge.data)||be(Ge.data))}function s(Ge,Pe,Ee,Ne,Ve,Ke){for(var bt=0;bt<Pe;++bt)for(var gt=Ge[bt],pt=0;pt<Ee;++pt)for(var St=gt[pt],jt=0;jt<Ne;++jt)Ve[Ke++]=St[jt]}function o(Ge){return 0|ye[Object.prototype.toString.call(Ge)]}function d(Ge,Pe){for(var Ee=0;Ee<Pe.length;++Ee)Ge[Ee]=Pe[Ee]}function g(Ge,Pe,Ee,Ne,Ve,Ke,bt){for(var gt=0,pt=0;pt<Ee;++pt)for(var St=0;St<Ne;++St)Ge[gt++]=Pe[Ve*pt+Ke*St+bt]}function _(Ge){for(var Pe=he.allocType(5123,Ge.length),Ee=0;Ee<Ge.length;++Ee)if(isNaN(Ge[Ee]))Pe[Ee]=65535;else if(1/0===Ge[Ee])Pe[Ee]=31744;else if(-1/0===Ge[Ee])Pe[Ee]=64512;else{we[0]=Ge[Ee];var Ne=(Ke=Se[0])>>>31<<15,Ve=(Ke<<1>>>24)-127,Ke=Ke>>13&1023;Pe[Ee]=-24>Ve?Ne:-14>Ve?Ne+(Ke+1024>>-14-Ve):15<Ve?Ne+31744:Ne+(Ve+15<<10)+Ke}return Pe}function w(Ge){return Array.isArray(Ge)||be(Ge)}function x(Ge){return"[object "+Ge+"]"}function E(Ge){return Array.isArray(Ge)&&(0===Ge.length||"number"==typeof Ge[0])}function k(Ge){return!(!Array.isArray(Ge)||0===Ge.length||!w(Ge[0]))}function C(Ge){return Object.prototype.toString.call(Ge)}function L(Ge){if(!Ge)return!1;var Pe=C(Ge);return 0<=at.indexOf(Pe)||E(Ge)||k(Ge)||f(Ge)}function P(Ge,Pe){36193===Ge.type?(Ge.data=_(Pe),he.freeType(Pe)):Ge.data=Pe}function A(Ge,Pe,Ee,Ne,Ve,Ke){if(Ge=void 0!==_t[Ge]?_t[Ge]:He[Ge]*ct[Pe],Ke&&(Ge*=6),Ve){for(Ne=0;1<=Ee;)Ne+=Ge*Ee*Ee,Ee/=2;return Ne}return Ge*Ee*Ne}function R(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function H(Ge){return Array.prototype.slice.call(Ge)}function Y(Ge){return H(Ge).join("")}function ne(Ge){return Array.isArray(Ge)||be(Ge)||f(Ge)}function ae(Ge){return Ge.sort(function(Pe,Ee){return"viewport"===Pe?-1:"viewport"===Ee?1:Pe<Ee?-1:1})}function te(Ge,Pe,Ee,Ne){this.thisDep=Ge,this.contextDep=Pe,this.propDep=Ee,this.append=Ne}function K(Ge){return Ge&&!(Ge.thisDep||Ge.contextDep||Ge.propDep)}function q(Ge){return new te(!1,!1,!1,Ge)}function re(Ge,Pe){var Ee=Ge.type;return 0===Ee?new te(!0,1<=(Ee=Ge.data.length),2<=Ee,Pe):4===Ee?new te((Ee=Ge.data).thisDep,Ee.contextDep,Ee.propDep,Pe):new te(3===Ee,2===Ee,1===Ee,Pe)}function V(Ge,Pe,Ee,Ne,Ve,Ke,bt,gt,pt,St,jt,Lt,Vt,mt,Wt){function Kt(Ct){return Ct.replace(".","_")}function rn(Ct,mn,pn){var Sn=Kt(Ct);br.push(Ct),zr[Sn]=mr[Sn]=!!pn,Dr[Sn]=mn}function Yt(Ct,mn,pn){var Sn=Kt(Ct);br.push(Ct),Array.isArray(pn)?(mr[Sn]=pn.slice(),zr[Sn]=pn.slice()):mr[Sn]=zr[Sn]=pn,di[Sn]=mn}function Ue(){var Ct=function(){function Ge(){var gt=[],pt=[];return Z(function(){gt.push.apply(gt,H(arguments))},{def:function(){var St="v"+Ee++;return pt.push(St),0<arguments.length&&(gt.push(St,"="),gt.push.apply(gt,H(arguments)),gt.push(";")),St},toString:function(){return Y([0<pt.length?"var "+pt.join(",")+";":"",Y(gt)])}})}function Pe(){function gt(Vt,mt){St(Vt,mt,"=",pt.def(Vt,mt),";")}var pt=Ge(),St=Ge(),jt=pt.toString,Lt=St.toString;return Z(function(){pt.apply(pt,H(arguments))},{def:pt.def,entry:pt,exit:St,save:gt,set:function(Vt,mt,Wt){gt(Vt,mt),pt(Vt,mt,"=",Wt,";")},toString:function(){return jt()+Lt()}})}var Ee=0,Ne=[],Ve=[],Ke=Ge(),bt={};return{global:Ke,link:function(gt){for(var pt=0;pt<Ve.length;++pt)if(Ve[pt]===gt)return Ne[pt];return pt="g"+Ee++,Ne.push(pt),Ve.push(gt),pt},block:Ge,proc:function(gt,pt){function St(){var mt="a"+jt.length;return jt.push(mt),mt}var jt=[];pt=pt||0;for(var Lt=0;Lt<pt;++Lt)St();var Vt=(Lt=Pe()).toString;return bt[gt]=Z(Lt,{arg:St,toString:function(){return Y(["function(",jt.join(),"){",Vt(),"}"])}})},scope:Pe,cond:function(){var gt=Y(arguments),pt=Pe(),St=Pe(),jt=pt.toString,Lt=St.toString;return Z(pt,{then:function(){return pt.apply(pt,H(arguments)),this},else:function(){return St.apply(St,H(arguments)),this},toString:function(){var Vt=Lt();return Vt&&(Vt="else{"+Vt+"}"),Y(["if(",gt,"){",jt(),"}",Vt])}})},compile:function(){var gt=['"use strict";',Ke,"return {"];Object.keys(bt).forEach(function(St){gt.push('"',St,'":',bt[St].toString(),",")}),gt.push("}");var pt=Y(gt).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,Ne.concat(pt)).apply(null,Ve)}}}(),mn=Ct.link,pn=Ct.global;Ct.id=qi++,Ct.batchId="0";var Sn=mn(ni),Zn=Ct.shared={props:"a0"};Object.keys(ni).forEach(function(Nn){Zn[Nn]=pn.def(Sn,".",Nn)});var fr=Ct.next={},Hn=Ct.current={};Object.keys(di).forEach(function(Nn){Array.isArray(mr[Nn])&&(fr[Nn]=pn.def(Zn.next,".",Nn),Hn[Nn]=pn.def(Zn.current,".",Nn))});var Dn=Ct.constants={};Object.keys(pi).forEach(function(Nn){Dn[Nn]=pn.def(JSON.stringify(pi[Nn]))}),Ct.invoke=function(Nn,Un){switch(Un.type){case 0:var sr=["this",Zn.context,Zn.props,Ct.batchId];return Nn.def(mn(Un.data),".call(",sr.slice(0,Math.max(Un.data.length+1,4)),")");case 1:return Nn.def(Zn.props,Un.data);case 2:return Nn.def(Zn.context,Un.data);case 3:return Nn.def("this",Un.data);case 4:return Un.data.append(Ct,Nn),Un.data.ref}},Ct.attribCache={};var Jn={};return Ct.scopeAttrib=function(Nn){if((Nn=Pe.id(Nn))in Jn)return Jn[Nn];var Un=St.scope[Nn];return Un||(Un=St.scope[Nn]=new er),Jn[Nn]=mn(Un)},Ct}function un(Ct,mn,pn,Sn,Zn){function fr(Or){var $r=Dn[Or];$r&&(Nn[Or]=$r)}var Or,Ji,Bi,ci,Hn=function(Or,$r){if("string"==typeof(Ji=Or.static).frag&&"string"==typeof Ji.vert){if(0<Object.keys($r.dynamic).length)return null;var Ji=$r.static,Bi=Object.keys(Ji);if(0<Bi.length&&"number"==typeof Ji[Bi[0]]){for(var ci=[],Ai=0;Ai<Bi.length;++Ai)ci.push([0|Ji[Bi[Ai]],Bi[Ai]]);return ci}}return null}(Ct,mn),Dn=function(Or,$r,Ji){function Bi(Ri){if(Ri in ci){var Lr=ci[Ri];Ri=!0;var vr,Fi,ga=0|Lr.x,Do=0|Lr.y;return"width"in Lr?vr=0|Lr.width:Ri=!1,"height"in Lr?Fi=0|Lr.height:Ri=!1,new te(!Ri&&$r&&$r.thisDep,!Ri&&$r&&$r.contextDep,!Ri&&$r&&$r.propDep,function(Xa,_a){var ya=Xa.shared.context,Ti=vr;"width"in Lr||(Ti=_a.def(ya,".","framebufferWidth","-",ga));var pa=Fi;return"height"in Lr||(pa=_a.def(ya,".","framebufferHeight","-",Do)),[ga,Do,Ti,pa]})}if(Ri in Ai){var Ha=Ai[Ri];return Ri=re(Ha,function(Xa,_a){var ya=Xa.invoke(_a,Ha),Ti=Xa.shared.context,pa=_a.def(ya,".x|0"),Qa=_a.def(ya,".y|0");return[pa,Qa,_a.def('"width" in ',ya,"?",ya,".width|0:","(",Ti,".","framebufferWidth","-",pa,")"),ya=_a.def('"height" in ',ya,"?",ya,".height|0:","(",Ti,".","framebufferHeight","-",Qa,")")]}),$r&&(Ri.thisDep=Ri.thisDep||$r.thisDep,Ri.contextDep=Ri.contextDep||$r.contextDep,Ri.propDep=Ri.propDep||$r.propDep),Ri}return $r?new te($r.thisDep,$r.contextDep,$r.propDep,function(Xa,_a){var ya=Xa.shared.context;return[0,0,_a.def(ya,".","framebufferWidth"),_a.def(ya,".","framebufferHeight")]}):null}var ci=Or.static,Ai=Or.dynamic;if(Or=Bi("viewport")){var wi=Or;Or=new te(Or.thisDep,Or.contextDep,Or.propDep,function(Ri,Lr){var vr=wi.append(Ri,Lr),Fi=Ri.shared.context;return Lr.set(Fi,".viewportWidth",vr[2]),Lr.set(Fi,".viewportHeight",vr[3]),vr})}return{viewport:Or,scissor_box:Bi("scissor.box")}}(Ct,sr=function(Ct,mn){var pn=Ct.static,Sn=Ct.dynamic;if("framebuffer"in pn){var Zn=pn.framebuffer;return Zn?(Zn=gt.getFramebuffer(Zn),q(function(Hn,Dn){var Jn=Hn.link(Zn),Nn=Hn.shared;return Dn.set(Nn.framebuffer,".next",Jn),Dn.set(Nn=Nn.context,".framebufferWidth",Jn+".width"),Dn.set(Nn,".framebufferHeight",Jn+".height"),Jn})):q(function(Hn,Dn){var Jn=Hn.shared;return Dn.set(Jn.framebuffer,".next","null"),Dn.set(Jn=Jn.context,".framebufferWidth",Jn+".drawingBufferWidth"),Dn.set(Jn,".framebufferHeight",Jn+".drawingBufferHeight"),"null"})}if("framebuffer"in Sn){var fr=Sn.framebuffer;return re(fr,function(Hn,Dn){var Jn=Hn.invoke(Dn,fr),Nn=Hn.shared,Un=Nn.framebuffer;return Jn=Dn.def(Un,".getFramebuffer(",Jn,")"),Dn.set(Un,".next",Jn),Dn.set(Nn=Nn.context,".framebufferWidth",Jn+"?"+Jn+".width:"+Nn+".drawingBufferWidth"),Dn.set(Nn,".framebufferHeight",Jn+"?"+Jn+".height:"+Nn+".drawingBufferHeight"),Jn})}return null}(Ct)),Jn=function(Ct,mn){function pn(Dn,Jn){if(Dn in Sn){var Nn=0|Sn[Dn];return q(function(sr,Wr){return Jn&&(sr.OFFSET=Nn),Nn})}if(Dn in Zn){var Un=Zn[Dn];return re(Un,function(sr,Wr){var Vr=sr.invoke(Wr,Un);return Jn&&(sr.OFFSET=Vr),Vr})}return Jn&&fr?q(function(sr,Wr){return sr.OFFSET="0",0}):null}var Sn=Ct.static,Zn=Ct.dynamic,fr=function(){if("elements"in Sn){var Dn=Sn.elements;ne(Dn)?Dn=Ke.getElements(Ke.create(Dn,!0)):Dn&&(Dn=Ke.getElements(Dn));var Jn=q(function(Un,sr){if(Dn){var Wr=Un.link(Dn);return Un.ELEMENTS=Wr}return Un.ELEMENTS=null});return Jn.value=Dn,Jn}if("elements"in Zn){var Nn=Zn.elements;return re(Nn,function(Un,sr){var Wr=(Vr=Un.shared).isBufferArgs,Vr=Vr.elements,Zr=Un.invoke(sr,Nn),Or=sr.def("null");return Wr=sr.def(Wr,"(",Zr,")"),Zr=Un.cond(Wr).then(Or,"=",Vr,".createStream(",Zr,");").else(Or,"=",Vr,".getElements(",Zr,");"),sr.entry(Zr),sr.exit(Un.cond(Wr).then(Vr,".destroyStream(",Or,");")),Un.ELEMENTS=Or})}return null}(),Hn=pn("offset",!0);return{elements:fr,primitive:function(){if("primitive"in Sn){var Dn=Sn.primitive;return q(function(Nn,Un){return _e[Dn]})}if("primitive"in Zn){var Jn=Zn.primitive;return re(Jn,function(Nn,Un){var sr=Nn.constants.primTypes,Wr=Nn.invoke(Un,Jn);return Un.def(sr,"[",Wr,"]")})}return fr?K(fr)?q(fr.value?function(Nn,Un){return Un.def(Nn.ELEMENTS,".primType")}:function(){return 4}):new te(fr.thisDep,fr.contextDep,fr.propDep,function(Nn,Un){var sr=Nn.ELEMENTS;return Un.def(sr,"?",sr,".primType:",4)}):null}(),count:function(){if("count"in Sn){var Dn=0|Sn.count;return q(function(){return Dn})}if("count"in Zn){var Jn=Zn.count;return re(Jn,function(Nn,Un){return Nn.invoke(Un,Jn)})}return fr?K(fr)?fr?Hn?new te(Hn.thisDep,Hn.contextDep,Hn.propDep,function(Nn,Un){return Un.def(Nn.ELEMENTS,".vertCount-",Nn.OFFSET)}):q(function(Nn,Un){return Un.def(Nn.ELEMENTS,".vertCount")}):q(function(){return-1}):new te(fr.thisDep||Hn.thisDep,fr.contextDep||Hn.contextDep,fr.propDep||Hn.propDep,function(Nn,Un){var sr=Nn.ELEMENTS;return Nn.OFFSET?Un.def(sr,"?",sr,".vertCount-",Nn.OFFSET,":-1"):Un.def(sr,"?",sr,".vertCount:-1")}):null}(),instances:pn("instances",!1),offset:Hn}}(Ct),Nn=(Ji=(Or=Ct).static,Bi=Or.dynamic,ci={},br.forEach(function(Ai){function wi(Lr,vr){if(Ai in Ji){var Fi=Lr(Ji[Ai]);ci[Ri]=q(function(){return Fi})}else if(Ai in Bi){var ga=Bi[Ai];ci[Ri]=re(ga,function(Do,Ha){return vr(Do,Ha,Do.invoke(Ha,ga))})}}var Ri=Kt(Ai);switch(Ai){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return wi(function(Lr){return Lr},function(Lr,vr,Fi){return Fi});case"depth.func":return wi(function(Lr){return hn[Lr]},function(Lr,vr,Fi){return vr.def(Lr.constants.compareFuncs,"[",Fi,"]")});case"depth.range":return wi(function(Lr){return Lr},function(Lr,vr,Fi){return[vr.def("+",Fi,"[0]"),vr=vr.def("+",Fi,"[1]")]});case"blend.func":return wi(function(Lr){return[gn["srcRGB"in Lr?Lr.srcRGB:Lr.src],gn["dstRGB"in Lr?Lr.dstRGB:Lr.dst],gn["srcAlpha"in Lr?Lr.srcAlpha:Lr.src],gn["dstAlpha"in Lr?Lr.dstAlpha:Lr.dst]]},function(Lr,vr,Fi){function ga(_a,ya){return vr.def('"',_a,ya,'" in ',Fi,"?",Fi,".",_a,ya,":",Fi,".",_a)}Lr=Lr.constants.blendFuncs;var Do=ga("src","RGB"),Ha=ga("dst","RGB"),Xa=(Do=vr.def(Lr,"[",Do,"]"),vr.def(Lr,"[",ga("src","Alpha"),"]"));return[Do,Ha=vr.def(Lr,"[",Ha,"]"),Xa,Lr=vr.def(Lr,"[",ga("dst","Alpha"),"]")]});case"blend.equation":return wi(function(Lr){return"string"==typeof Lr?[Xr[Lr],Xr[Lr]]:"object"==typeof Lr?[Xr[Lr.rgb],Xr[Lr.alpha]]:void 0},function(Lr,vr,Fi){var ga=Lr.constants.blendEquations,Do=vr.def(),Ha=vr.def();return(Lr=Lr.cond("typeof ",Fi,'==="string"')).then(Do,"=",Ha,"=",ga,"[",Fi,"];"),Lr.else(Do,"=",ga,"[",Fi,".rgb];",Ha,"=",ga,"[",Fi,".alpha];"),vr(Lr),[Do,Ha]});case"blend.color":return wi(function(Lr){return u(4,function(vr){return+Lr[vr]})},function(Lr,vr,Fi){return u(4,function(ga){return vr.def("+",Fi,"[",ga,"]")})});case"stencil.mask":return wi(function(Lr){return 0|Lr},function(Lr,vr,Fi){return vr.def(Fi,"|0")});case"stencil.func":return wi(function(Lr){return[hn[Lr.cmp||"keep"],Lr.ref||0,"mask"in Lr?Lr.mask:-1]},function(Lr,vr,Fi){return[Lr=vr.def('"cmp" in ',Fi,"?",Lr.constants.compareFuncs,"[",Fi,".cmp]",":",7680),vr.def(Fi,".ref|0"),vr=vr.def('"mask" in ',Fi,"?",Fi,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return wi(function(Lr){return["stencil.opBack"===Ai?1029:1028,We[Lr.fail||"keep"],We[Lr.zfail||"keep"],We[Lr.zpass||"keep"]]},function(Lr,vr,Fi){function ga(Ha){return vr.def('"',Ha,'" in ',Fi,"?",Do,"[",Fi,".",Ha,"]:",7680)}var Do=Lr.constants.stencilOps;return["stencil.opBack"===Ai?1029:1028,ga("fail"),ga("zfail"),ga("zpass")]});case"polygonOffset.offset":return wi(function(Lr){return[0|Lr.factor,0|Lr.units]},function(Lr,vr,Fi){return[vr.def(Fi,".factor|0"),vr=vr.def(Fi,".units|0")]});case"cull.face":return wi(function(Lr){var vr=0;return"front"===Lr?vr=1028:"back"===Lr&&(vr=1029),vr},function(Lr,vr,Fi){return vr.def(Fi,'==="front"?',1028,":",1029)});case"lineWidth":return wi(function(Lr){return Lr},function(Lr,vr,Fi){return Fi});case"frontFace":return wi(function(Lr){return it[Lr]},function(Lr,vr,Fi){return vr.def(Fi+'==="cw"?2304:2305')});case"colorMask":return wi(function(Lr){return Lr.map(function(vr){return!!vr})},function(Lr,vr,Fi){return u(4,function(ga){return"!!"+Fi+"["+ga+"]"})});case"sample.coverage":return wi(function(Lr){return["value"in Lr?Lr.value:1,!!Lr.invert]},function(Lr,vr,Fi){return[vr.def('"value" in ',Fi,"?+",Fi,".value:1"),vr=vr.def("!!",Fi,".invert")]})}}),ci),Un=function(Ct,mn,pn){function Sn(Nn){if(Nn in Zn){var Un=Pe.id(Zn[Nn]);return(Nn=q(function(){return Un})).id=Un,Nn}if(Nn in fr){var sr=fr[Nn];return re(sr,function(Wr,Vr){var Zr=Wr.invoke(Vr,sr);return Vr.def(Wr.shared.strings,".id(",Zr,")")})}return null}var Zn=Ct.static,fr=Ct.dynamic,Hn=Sn("frag"),Dn=Sn("vert"),Jn=null;return K(Hn)&&K(Dn)?(Jn=jt.program(Dn.id,Hn.id,null,pn),Ct=q(function(Nn,Un){return Nn.link(Jn)})):Ct=new te(Hn&&Hn.thisDep||Dn&&Dn.thisDep,Hn&&Hn.contextDep||Dn&&Dn.contextDep,Hn&&Hn.propDep||Dn&&Dn.propDep,function(Nn,Un){var sr,Wr,Vr=Nn.shared.shader;return sr=Hn?Hn.append(Nn,Un):Un.def(Vr,".","frag"),Wr=Dn?Dn.append(Nn,Un):Un.def(Vr,".","vert"),Un.def(Vr+".program("+Wr+","+sr+")")}),{frag:Hn,vert:Dn,progVar:Ct,program:Jn}}(Ct,0,Hn);fr("viewport"),fr(Kt("scissor.box"));var sr,Wr=0<Object.keys(Nn).length;if((sr={framebuffer:sr,draw:Jn,shader:Un,state:Nn,dirty:Wr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Or){var $r,Ji=Or.static;if(Or=Or.dynamic,"profile"in Ji){var Bi=!!Ji.profile;($r=q(function(Ai,wi){return Bi})).enable=Bi}else if("profile"in Or){var ci=Or.profile;$r=re(ci,function(Ai,wi){return Ai.invoke(wi,ci)})}return $r}(Ct),sr.uniforms=function(Or,$r){var Ji=Or.static,Bi=Or.dynamic,ci={};return Object.keys(Ji).forEach(function(Ai){var wi,Ri=Ji[Ai];if("number"==typeof Ri||"boolean"==typeof Ri)wi=q(function(){return Ri});else if("function"==typeof Ri){var Lr=Ri._reglType;"texture2d"===Lr||"textureCube"===Lr?wi=q(function(vr){return vr.link(Ri)}):"framebuffer"!==Lr&&"framebufferCube"!==Lr||(wi=q(function(vr){return vr.link(Ri.color[0])}))}else w(Ri)&&(wi=q(function(vr){return vr.global.def("[",u(Ri.length,function(Fi){return Ri[Fi]}),"]")}));wi.value=Ri,ci[Ai]=wi}),Object.keys(Bi).forEach(function(Ai){var wi=Bi[Ai];ci[Ai]=re(wi,function(Ri,Lr){return Ri.invoke(Lr,wi)})}),ci}(pn),sr.drawVAO=sr.scopeVAO=function(Or,$r){var Ji=Or.static,Bi=Or.dynamic;if("vao"in Ji){var ci=Ji.vao;return null!==ci&&null===St.getVAO(ci)&&(ci=St.createVAO(ci)),q(function(wi){return wi.link(St.getVAO(ci))})}if("vao"in Bi){var Ai=Bi.vao;return re(Ai,function(wi,Ri){var Lr=wi.invoke(Ri,Ai);return Ri.def(wi.shared.vao+".getVAO("+Lr+")")})}return null}(Ct),!sr.drawVAO&&Un.program&&!Hn&&Ee.angle_instanced_arrays){var Vr=!0;if(Ct=Un.program.attributes.map(function(Or){return Or=mn.static[Or],Vr=Vr&&!!Or,Or}),Vr&&0<Ct.length){var Zr=St.getVAO(St.createVAO(Ct));sr.drawVAO=new te(null,null,null,function(Or,$r){return Or.link(Zr)}),sr.useVAO=!0}}return Hn?sr.useVAO=!0:sr.attributes=function(Ct,mn){var pn=Ct.static,Sn=Ct.dynamic,Zn={};return Object.keys(pn).forEach(function(fr){var Hn=pn[fr],Dn=Pe.id(fr),Jn=new er;if(ne(Hn))Jn.state=1,Jn.buffer=Ve.getBuffer(Ve.create(Hn,34962,!1,!0)),Jn.type=0;else if(Un=Ve.getBuffer(Hn))Jn.state=1,Jn.buffer=Un,Jn.type=0;else if("constant"in Hn){var Nn=Hn.constant;Jn.buffer="null",Jn.state=2,"number"==typeof Nn?Jn.x=Nn:st.forEach(function($r,Ji){Ji<Nn.length&&(Jn[$r]=Nn[Ji])})}else{var Un=ne(Hn.buffer)?Ve.getBuffer(Ve.create(Hn.buffer,34962,!1,!0)):Ve.getBuffer(Hn.buffer),sr=0|Hn.offset,Wr=0|Hn.stride,Vr=0|Hn.size,Zr=!!Hn.normalized,Or=0;"type"in Hn&&(Or=ke[Hn.type]),Hn=0|Hn.divisor,Jn.buffer=Un,Jn.state=1,Jn.size=Vr,Jn.normalized=Zr,Jn.type=Or||Un.dtype,Jn.offset=sr,Jn.stride=Wr,Jn.divisor=Hn}Zn[fr]=q(function($r,Ji){var Bi=$r.attribCache;if(Dn in Bi)return Bi[Dn];var ci={isStream:!1};return Object.keys(Jn).forEach(function(Ai){ci[Ai]=Jn[Ai]}),Jn.buffer&&(ci.buffer=$r.link(Jn.buffer),ci.type=ci.type||ci.buffer+".dtype"),Bi[Dn]=ci})}),Object.keys(Sn).forEach(function(fr){var Hn=Sn[fr];Zn[fr]=re(Hn,function(Dn,Jn){function Nn(Bi){Jn(Zr[Bi],"=",Un,".",Bi,"|0;")}var Un=Dn.invoke(Jn,Hn),sr=Dn.shared,Wr=Dn.constants,Vr=sr.isBufferArgs,Zr=(sr=sr.buffer,{isStream:Jn.def(!1)}),Or=new er;Or.state=1,Object.keys(Or).forEach(function(Bi){Zr[Bi]=Jn.def(""+Or[Bi])});var $r=Zr.buffer,Ji=Zr.type;return Jn("if(",Vr,"(",Un,")){",Zr.isStream,"=true;",$r,"=",sr,".createStream(",34962,",",Un,");",Ji,"=",$r,".dtype;","}else{",$r,"=",sr,".getBuffer(",Un,");","if(",$r,"){",Ji,"=",$r,".dtype;",'}else if("constant" in ',Un,"){",Zr.state,"=",2,";","if(typeof "+Un+'.constant === "number"){',Zr[st[0]],"=",Un,".constant;",st.slice(1).map(function(Bi){return Zr[Bi]}).join("="),"=0;","}else{",st.map(function(Bi,ci){return Zr[Bi]+"="+Un+".constant.length>"+ci+"?"+Un+".constant["+ci+"]:0;"}).join(""),"}}else{","if(",Vr,"(",Un,".buffer)){",$r,"=",sr,".createStream(",34962,",",Un,".buffer);","}else{",$r,"=",sr,".getBuffer(",Un,".buffer);","}",Ji,'="type" in ',Un,"?",Wr.glTypes,"[",Un,".type]:",$r,".dtype;",Zr.normalized,"=!!",Un,".normalized;"),Nn("size"),Nn("offset"),Nn("stride"),Nn("divisor"),Jn("}}"),Jn.exit("if(",Zr.isStream,"){",sr,".destroyStream(",$r,");","}"),Zr})}),Zn}(mn),sr.context=function(Or){var $r=Or.static,Ji=Or.dynamic,Bi={};return Object.keys($r).forEach(function(ci){var Ai=$r[ci];Bi[ci]=q(function(wi,Ri){return"number"==typeof Ai||"boolean"==typeof Ai?""+Ai:wi.link(Ai)})}),Object.keys(Ji).forEach(function(ci){var Ai=Ji[ci];Bi[ci]=re(Ai,function(wi,Ri){return wi.invoke(Ri,Ai)})}),Bi}(Sn),sr}function vn(Ct,mn,pn){var Sn=Ct.shared.context,Zn=Ct.scope();Object.keys(pn).forEach(function(fr){mn.save(Sn,"."+fr),Zn(Sn,".",fr,"=",pn[fr].append(Ct,mn),";")}),mn(Zn)}function Qt(Ct,mn,pn,Sn){var Zn,fr=(Dn=Ct.shared).gl,Hn=Dn.framebuffer;Bn&&(Zn=mn.def(Dn.extensions,".webgl_draw_buffers"));var Dn=(Jn=Ct.constants).drawBuffer,Jn=Jn.backBuffer;Ct=pn?pn.append(Ct,mn):mn.def(Hn,".next"),Sn||mn("if(",Ct,"!==",Hn,".cur){"),mn("if(",Ct,"){",fr,".bindFramebuffer(",36160,",",Ct,".framebuffer);"),Bn&&mn(Zn,".drawBuffersWEBGL(",Dn,"[",Ct,".colorAttachments.length]);"),mn("}else{",fr,".bindFramebuffer(",36160,",null);"),Bn&&mn(Zn,".drawBuffersWEBGL(",Jn,");"),mn("}",Hn,".cur=",Ct,";"),Sn||mn("}")}function yn(Ct,mn,pn){var Sn=Ct.shared,Zn=Sn.gl,fr=Ct.current,Hn=Ct.next,Dn=Sn.current,Jn=Sn.next,Nn=Ct.cond(Dn,".dirty");br.forEach(function(Un){var sr,Wr;if(!((Un=Kt(Un))in pn.state))if(Un in Hn){sr=Hn[Un],Wr=fr[Un];var Vr=u(mr[Un].length,function(Zr){return Nn.def(sr,"[",Zr,"]")});Nn(Ct.cond(Vr.map(function(Zr,Or){return Zr+"!=="+Wr+"["+Or+"]"}).join("||")).then(Zn,".",di[Un],"(",Vr,");",Vr.map(function(Zr,Or){return Wr+"["+Or+"]="+Zr}).join(";"),";"))}else sr=Nn.def(Jn,".",Un),Vr=Ct.cond(sr,"!==",Dn,".",Un),Nn(Vr),Un in Dr?Vr(Ct.cond(sr).then(Zn,".enable(",Dr[Un],");").else(Zn,".disable(",Dr[Un],");"),Dn,".",Un,"=",sr,";"):Vr(Zn,".",di[Un],"(",sr,");",Dn,".",Un,"=",sr,";")}),0===Object.keys(pn.state).length&&Nn(Dn,".dirty=false;"),mn(Nn)}function Mn(Ct,mn,pn,Sn){var Zn=Ct.shared,fr=Ct.current,Hn=Zn.current,Dn=Zn.gl;ae(Object.keys(pn)).forEach(function(Jn){var Nn=pn[Jn];if(!Sn||Sn(Nn)){var Un=Nn.append(Ct,mn);if(Dr[Jn]){var sr=Dr[Jn];K(Nn)?mn(Dn,Un?".enable(":".disable(",sr,");"):mn(Ct.cond(Un).then(Dn,".enable(",sr,");").else(Dn,".disable(",sr,");")),mn(Hn,".",Jn,"=",Un,";")}else if(w(Un)){var Wr=fr[Jn];mn(Dn,".",di[Jn],"(",Un,");",Un.map(function(Vr,Zr){return Wr+"["+Zr+"]="+Vr}).join(";"),";")}else mn(Dn,".",di[Jn],"(",Un,");",Hn,".",Jn,"=",Un,";")}})}function Pn(Ct,mn){ir&&(Ct.instancing=mn.def(Ct.shared.extensions,".angle_instanced_arrays"))}function sn(Ct,mn,pn,Sn,Zn){function fr(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function Hn(Or){Or(Nn=mn.def(),"=",fr(),";"),"string"==typeof Zn?Or(Wr,".count+=",Zn,";"):Or(Wr,".count++;"),mt&&(Sn?Or(Un=mn.def(),"=",Zr,".getNumPendingQueries();"):Or(Zr,".beginQuery(",Wr,");"))}function Dn(Or){Or(Wr,".cpuTime+=",fr(),"-",Nn,";"),mt&&(Sn?Or(Zr,".pushScopeStats(",Un,",",Zr,".getNumPendingQueries(),",Wr,");"):Or(Zr,".endQuery();"))}function Jn(Or){var $r=mn.def(Vr,".profile");mn(Vr,".profile=",Or,";"),mn.exit(Vr,".profile=",$r,";")}var Nn,Un,sr=Ct.shared,Wr=Ct.stats,Vr=sr.current,Zr=sr.timer;if(pn=pn.profile){if(K(pn))return void(pn.enable?(Hn(mn),Dn(mn.exit),Jn("true")):Jn("false"));Jn(pn=pn.append(Ct,mn))}else pn=mn.def(Vr,".profile");Hn(sr=Ct.block()),mn("if(",pn,"){",sr,"}"),Dn(Ct=Ct.block()),mn.exit("if(",pn,"){",Ct,"}")}function In(Ct,mn,pn,Sn,Zn){var Hn=Ct.shared;Sn.forEach(function(Dn){var Jn,Nn=Dn.name,Un=pn.attributes[Nn];if(Un){if(!Zn(Un))return;Jn=Un.append(Ct,mn)}else{if(!Zn(qt))return;var sr=Ct.scopeAttrib(Nn);Jn={},Object.keys(new er).forEach(function(Wr){Jn[Wr]=mn.def(sr,".",Wr)})}!function(Dn,Jn,Nn){function Un(){mn("if(!",Zr,".buffer){",Wr,".enableVertexAttribArray(",Vr,");}");var Bi,ci=Nn.type;Bi=Nn.size?mn.def(Nn.size,"||",Jn):Jn,mn("if(",Zr,".type!==",ci,"||",Zr,".size!==",Bi,"||",Ji.map(function(Ai){return Zr+"."+Ai+"!=="+Nn[Ai]}).join("||"),"){",Wr,".bindBuffer(",34962,",",Or,".buffer);",Wr,".vertexAttribPointer(",[Vr,Bi,ci,Nn.normalized,Nn.stride,Nn.offset],");",Zr,".type=",ci,";",Zr,".size=",Bi,";",Ji.map(function(Ai){return Zr+"."+Ai+"="+Nn[Ai]+";"}).join(""),"}"),ir&&mn("if(",Zr,".divisor!==",ci=Nn.divisor,"){",Ct.instancing,".vertexAttribDivisorANGLE(",[Vr,ci],");",Zr,".divisor=",ci,";}")}function sr(){mn("if(",Zr,".buffer){",Wr,".disableVertexAttribArray(",Vr,");",Zr,".buffer=null;","}if(",st.map(function(Bi,ci){return Zr+"."+Bi+"!=="+$r[ci]}).join("||"),"){",Wr,".vertexAttrib4f(",Vr,",",$r,");",st.map(function(Bi,ci){return Zr+"."+Bi+"="+$r[ci]+";"}).join(""),"}")}var Wr=Hn.gl,Vr=mn.def(Dn,".location"),Zr=mn.def(Hn.attributes,"[",Vr,"]"),Or=Nn.buffer,$r=[Nn.x,Nn.y,Nn.z,Nn.w],Ji=["buffer","normalized","offset","stride"];1===(Dn=Nn.state)?Un():2===Dn?sr():(mn("if(",Dn,"===",1,"){"),Un(),mn("}else{"),sr(),mn("}"))}(Ct.link(Dn),function(Wr){switch(Wr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Dn.info.type),Jn)})}function Rn(Ct,mn,pn,Sn,Zn){for(var fr,Hn=Ct.shared,Dn=Hn.gl,Jn=0;Jn<Sn.length;++Jn){var Nn,Un=(Vr=Sn[Jn]).name,sr=Vr.info.type,Wr=pn.uniforms[Un],Vr=Ct.link(Vr)+".location";if(Wr){if(!Zn(Wr))continue;if(K(Wr)){if(Un=Wr.value,35678===sr||35680===sr)mn(Dn,".uniform1i(",Vr,",",(sr=Ct.link(Un._texture||Un.color[0]._texture))+".bind());"),mn.exit(sr,".unbind();");else if(35674===sr||35675===sr||35676===sr)Wr=2,35675===sr?Wr=3:35676===sr&&(Wr=4),mn(Dn,".uniformMatrix",Wr,"fv(",Vr,",false,",Un=Ct.global.def("new Float32Array(["+Array.prototype.slice.call(Un)+"])"),");");else{switch(sr){case 5126:fr="1f";break;case 35664:fr="2f";break;case 35665:fr="3f";break;case 35666:fr="4f";break;case 35670:case 5124:fr="1i";break;case 35671:case 35667:fr="2i";break;case 35672:case 35668:fr="3i";break;case 35673:fr="4i";break;case 35669:fr="4i"}mn(Dn,".uniform",fr,"(",Vr,",",w(Un)?Array.prototype.slice.call(Un):Un,");")}continue}Nn=Wr.append(Ct,mn)}else{if(!Zn(qt))continue;Nn=mn.def(Hn.uniforms,"[",Pe.id(Un),"]")}switch(35678===sr?mn("if(",Nn,"&&",Nn,'._reglType==="framebuffer"){',Nn,"=",Nn,".color[0];","}"):35680===sr&&mn("if(",Nn,"&&",Nn,'._reglType==="framebufferCube"){',Nn,"=",Nn,".color[0];","}"),Un=1,sr){case 35678:case 35680:sr=mn.def(Nn,"._texture"),mn(Dn,".uniform1i(",Vr,",",sr,".bind());"),mn.exit(sr,".unbind();");continue;case 5124:case 35670:fr="1i";break;case 35667:case 35671:fr="2i",Un=2;break;case 35668:case 35672:fr="3i",Un=3;break;case 35669:case 35673:fr="4i",Un=4;break;case 5126:fr="1f";break;case 35664:fr="2f",Un=2;break;case 35665:fr="3f",Un=3;break;case 35666:fr="4f",Un=4;break;case 35674:fr="Matrix2fv";break;case 35675:fr="Matrix3fv";break;case 35676:fr="Matrix4fv"}if(mn(Dn,".uniform",fr,"(",Vr,","),"M"===fr.charAt(0)){Vr=Math.pow(sr-35674+2,2);var Zr=Ct.global.def("new Float32Array(",Vr,")");mn("false,(Array.isArray(",Nn,")||",Nn," instanceof Float32Array)?",Nn,":(",u(Vr,function(Or){return Zr+"["+Or+"]="+Nn+"["+Or+"]"}),",",Zr,")")}else mn(1<Un?u(Un,function(Or){return Nn+"["+Or+"]"}):Nn);mn(");")}}function Ln(Ct,mn,pn,Sn){function Zn(ci){var Ai=Wr[ci];return Ai?Ai.append(Ct,Ai.contextDep&&Sn.contextDynamic||Ai.propDep?pn:mn):mn.def(sr,".",ci)}function fr(){function ci(){pn(Jn,".drawElementsInstancedANGLE(",[Zr,$r,Ji,Or+"<<(("+Ji+"-5121)>>1)",Dn],");")}function Ai(){pn(Jn,".drawArraysInstancedANGLE(",[Zr,Or,$r,Dn],");")}Vr?Bi?ci():(pn("if(",Vr,"){"),ci(),pn("}else{"),Ai(),pn("}")):Ai()}function Hn(){function ci(){pn(Un+".drawElements("+[Zr,$r,Ji,Or+"<<(("+Ji+"-5121)>>1)"]+");")}function Ai(){pn(Un+".drawArrays("+[Zr,Or,$r]+");")}Vr?Bi?ci():(pn("if(",Vr,"){"),ci(),pn("}else{"),Ai(),pn("}")):Ai()}var Dn,Jn,ci,Ai,Nn=Ct.shared,Un=Nn.gl,sr=Nn.draw,Wr=Sn.draw,Vr=(Ai=mn,(ci=Wr.elements)?((ci.contextDep&&Sn.contextDynamic||ci.propDep)&&(Ai=pn),ci=ci.append(Ct,Ai)):ci=Ai.def(sr,".","elements"),ci&&Ai("if("+ci+")"+Un+".bindBuffer(34963,"+ci+".buffer.buffer);"),ci),Zr=Zn("primitive"),Or=Zn("offset"),$r=function(){var ci=Wr.count,Ai=mn;return ci?((ci.contextDep&&Sn.contextDynamic||ci.propDep)&&(Ai=pn),ci=ci.append(Ct,Ai)):ci=Ai.def(sr,".","count"),ci}();if("number"==typeof $r){if(0===$r)return}else pn("if(",$r,"){"),pn.exit("}");ir&&(Dn=Zn("instances"),Jn=Ct.instancing);var Ji=Vr+".type",Bi=Wr.elements&&K(Wr.elements);ir&&("number"!=typeof Dn||0<=Dn)?"string"==typeof Dn?(pn("if(",Dn,">0){"),fr(),pn("}else if(",Dn,"<0){"),Hn(),pn("}")):fr():Hn()}function qn(Ct,mn,pn,Sn,Zn){return Zn=(mn=Ue()).proc("body",Zn),ir&&(mn.instancing=Zn.def(mn.shared.extensions,".angle_instanced_arrays")),Ct(mn,Zn,pn,Sn),mn.compile().body}function nr(Ct,mn,pn,Sn){Pn(Ct,mn),pn.useVAO?pn.drawVAO?mn(Ct.shared.vao,".setVAO(",pn.drawVAO.append(Ct,mn),");"):mn(Ct.shared.vao,".setVAO(",Ct.shared.vao,".targetVAO);"):(mn(Ct.shared.vao,".setVAO(null);"),In(Ct,mn,pn,Sn.attributes,function(){return!0})),Rn(Ct,mn,pn,Sn.uniforms,function(){return!0}),Ln(Ct,mn,mn,pn)}function rr(Ct,mn,pn,Sn){function Zn(){return!0}Ct.batchId="a1",Pn(Ct,mn),In(Ct,mn,pn,Sn.attributes,Zn),Rn(Ct,mn,pn,Sn.uniforms,Zn),Ln(Ct,mn,mn,pn)}function gr(Ct,mn,pn,Sn){function Zn(sr){return sr.contextDep&&Hn||sr.propDep}function fr(sr){return!Zn(sr)}Pn(Ct,mn);var Hn=pn.contextDep,Dn=mn.def(),Jn=mn.def();Ct.shared.props=Jn,Ct.batchId=Dn;var Nn=Ct.scope(),Un=Ct.scope();mn(Nn.entry,"for(",Dn,"=0;",Dn,"<","a1",";++",Dn,"){",Jn,"=","a0","[",Dn,"];",Un,"}",Nn.exit),pn.needsContext&&vn(Ct,Un,pn.context),pn.needsFramebuffer&&Qt(Ct,Un,pn.framebuffer),Mn(Ct,Un,pn.state,Zn),pn.profile&&Zn(pn.profile)&&sn(Ct,Un,pn,!1,!0),Sn?(pn.useVAO?pn.drawVAO?Zn(pn.drawVAO)?Un(Ct.shared.vao,".setVAO(",pn.drawVAO.append(Ct,Un),");"):Nn(Ct.shared.vao,".setVAO(",pn.drawVAO.append(Ct,Nn),");"):Nn(Ct.shared.vao,".setVAO(",Ct.shared.vao,".targetVAO);"):(Nn(Ct.shared.vao,".setVAO(null);"),In(Ct,Nn,pn,Sn.attributes,fr),In(Ct,Un,pn,Sn.attributes,Zn)),Rn(Ct,Nn,pn,Sn.uniforms,fr),Rn(Ct,Un,pn,Sn.uniforms,Zn),Ln(Ct,Nn,Un,pn)):(mn=Ct.global.def("{}"),Sn=pn.shader.progVar.append(Ct,Un),Jn=Un.def(Sn,".id"),Nn=Un.def(mn,"[",Jn,"]"),Un(Ct.shared.gl,".useProgram(",Sn,".program);","if(!",Nn,"){",Nn,"=",mn,"[",Jn,"]=",Ct.link(function(sr){return qn(rr,Ct,pn,sr,2)}),"(",Sn,");}",Nn,".call(this,a0[",Dn,"],",Dn,");"))}function kr(Ct,mn,pn){var Sn=mn.static[pn];if(Sn&&function(Un){if("object"==typeof Un&&!w(Un)){for(var sr=Object.keys(Un),Wr=0;Wr<sr.length;++Wr)if(ie.isDynamic(Un[sr[Wr]]))return!0;return!1}}(Sn)){var Zn=Ct.global,fr=Object.keys(Sn),Hn=!1,Dn=!1,Jn=!1,Nn=Ct.global.def("{}");fr.forEach(function(Un){var sr=Sn[Un];if(ie.isDynamic(sr))"function"==typeof sr&&(sr=Sn[Un]=ie.unbox(sr)),Un=re(sr,null),Hn=Hn||Un.thisDep,Jn=Jn||Un.propDep,Dn=Dn||Un.contextDep;else{switch(Zn(Nn,".",Un,"="),typeof sr){case"number":Zn(sr);break;case"string":Zn('"',sr,'"');break;case"object":Array.isArray(sr)&&Zn("[",sr.join(),"]");break;default:Zn(Ct.link(sr))}Zn(";")}}),mn.dynamic[pn]=new ie.DynamicVariable(4,{thisDep:Hn,contextDep:Dn,propDep:Jn,ref:Nn,append:function(Un,sr){fr.forEach(function(Wr){var Vr=Sn[Wr];ie.isDynamic(Vr)&&(Vr=Un.invoke(sr,Vr),sr(Nn,".",Wr,"=",Vr,";"))})}}),delete mn.static[pn]}}var er=St.Record,Xr={add:32774,subtract:32778,"reverse subtract":32779};Ee.ext_blend_minmax&&(Xr.min=32775,Xr.max=32776);var ir=Ee.angle_instanced_arrays,Bn=Ee.webgl_draw_buffers,mr={dirty:!0,profile:Wt.profile},zr={},br=[],Dr={},di={};rn("dither",3024),rn("blend.enable",3042),Yt("blend.color","blendColor",[0,0,0,0]),Yt("blend.equation","blendEquationSeparate",[32774,32774]),Yt("blend.func","blendFuncSeparate",[1,0,1,0]),rn("depth.enable",2929,!0),Yt("depth.func","depthFunc",513),Yt("depth.range","depthRange",[0,1]),Yt("depth.mask","depthMask",!0),Yt("colorMask","colorMask",[!0,!0,!0,!0]),rn("cull.enable",2884),Yt("cull.face","cullFace",1029),Yt("frontFace","frontFace",2305),Yt("lineWidth","lineWidth",1),rn("polygonOffset.enable",32823),Yt("polygonOffset.offset","polygonOffset",[0,0]),rn("sample.alpha",32926),rn("sample.enable",32928),Yt("sample.coverage","sampleCoverage",[1,!1]),rn("stencil.enable",2960),Yt("stencil.mask","stencilMask",-1),Yt("stencil.func","stencilFunc",[519,0,-1]),Yt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Yt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),rn("scissor.enable",3089),Yt("scissor.box","scissor",[0,0,Ge.drawingBufferWidth,Ge.drawingBufferHeight]),Yt("viewport","viewport",[0,0,Ge.drawingBufferWidth,Ge.drawingBufferHeight]);var ni={gl:Ge,context:Vt,strings:Pe,next:zr,current:mr,draw:Lt,elements:Ke,buffer:Ve,shader:jt,attributes:St.state,vao:St,uniforms:pt,framebuffer:gt,extensions:Ee,timer:mt,isBufferArgs:ne},pi={primTypes:_e,compareFuncs:hn,blendFuncs:gn,blendEquations:Xr,stencilOps:We,glTypes:ke,orientationType:it};Bn&&(pi.backBuffer=[1029],pi.drawBuffer=u(Ne.maxDrawbuffers,function(Ct){return 0===Ct?[0]:u(Ct,function(mn){return 36064+mn})}));var qi=0;return{next:zr,current:mr,procs:function(){var Ct=Ue(),mn=Ct.proc("poll"),pn=Ct.proc("refresh"),Sn=Ct.block();mn(Sn),pn(Sn);var Zn,fr=Ct.shared,Hn=fr.gl,Dn=fr.next,Jn=fr.current;Sn(Jn,".dirty=false;"),Qt(Ct,mn),Qt(Ct,pn,null,!0),ir&&(Zn=Ct.link(ir)),Ee.oes_vertex_array_object&&pn(Ct.link(Ee.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Nn=0;Nn<Ne.maxAttributes;++Nn){var Un=pn.def(fr.attributes,"[",Nn,"]"),sr=Ct.cond(Un,".buffer");sr.then(Hn,".enableVertexAttribArray(",Nn,");",Hn,".bindBuffer(",34962,",",Un,".buffer.buffer);",Hn,".vertexAttribPointer(",Nn,",",Un,".size,",Un,".type,",Un,".normalized,",Un,".stride,",Un,".offset);").else(Hn,".disableVertexAttribArray(",Nn,");",Hn,".vertexAttrib4f(",Nn,",",Un,".x,",Un,".y,",Un,".z,",Un,".w);",Un,".buffer=null;"),pn(sr),ir&&pn(Zn,".vertexAttribDivisorANGLE(",Nn,",",Un,".divisor);")}return pn(Ct.shared.vao,".currentVAO=null;",Ct.shared.vao,".setVAO(",Ct.shared.vao,".targetVAO);"),Object.keys(Dr).forEach(function(Wr){var Vr=Dr[Wr],Zr=Sn.def(Dn,".",Wr),Or=Ct.block();Or("if(",Zr,"){",Hn,".enable(",Vr,")}else{",Hn,".disable(",Vr,")}",Jn,".",Wr,"=",Zr,";"),pn(Or),mn("if(",Zr,"!==",Jn,".",Wr,"){",Or,"}")}),Object.keys(di).forEach(function(Wr){var Vr,Zr,Or=di[Wr],$r=mr[Wr],Ji=Ct.block();Ji(Hn,".",Or,"("),w($r)?(Or=$r.length,Vr=Ct.global.def(Dn,".",Wr),Zr=Ct.global.def(Jn,".",Wr),Ji(u(Or,function(Bi){return Vr+"["+Bi+"]"}),");",u(Or,function(Bi){return Zr+"["+Bi+"]="+Vr+"["+Bi+"];"}).join("")),mn("if(",u(Or,function(Bi){return Vr+"["+Bi+"]!=="+Zr+"["+Bi+"]"}).join("||"),"){",Ji,"}")):(Vr=Sn.def(Dn,".",Wr),Zr=Sn.def(Jn,".",Wr),Ji(Vr,");",Jn,".",Wr,"=",Vr,";"),mn("if(",Vr,"!==",Zr,"){",Ji,"}")),pn(Ji)}),Ct.compile()}(),compile:function(Ct,mn,pn,Sn,Zn){var fr=Ue();return fr.stats=fr.link(Zn),Object.keys(mn.static).forEach(function(Hn){kr(fr,mn,Hn)}),Bt.forEach(function(Hn){kr(fr,Ct,Hn)}),pn=un(Ct,mn,pn,Sn),function(Hn,Dn){var Jn=Hn.proc("draw",1);Pn(Hn,Jn),vn(Hn,Jn,Dn.context),Qt(Hn,Jn,Dn.framebuffer),yn(Hn,Jn,Dn),Mn(Hn,Jn,Dn.state),sn(Hn,Jn,Dn,!1,!0);var Nn=Dn.shader.progVar.append(Hn,Jn);if(Jn(Hn.shared.gl,".useProgram(",Nn,".program);"),Dn.shader.program)nr(Hn,Jn,Dn,Dn.shader.program);else{Jn(Hn.shared.vao,".setVAO(null);");var Un=Hn.global.def("{}"),sr=Jn.def(Nn,".id"),Wr=Jn.def(Un,"[",sr,"]");Jn(Hn.cond(Wr).then(Wr,".call(this,a0);").else(Wr,"=",Un,"[",sr,"]=",Hn.link(function(Vr){return qn(nr,Hn,Dn,Vr,1)}),"(",Nn,");",Wr,".call(this,a0);"))}0<Object.keys(Dn.state).length&&Jn(Hn.shared.current,".dirty=true;")}(fr,pn),function(Ct,mn){function pn(Hn){var Dn=mn.shader[Hn];Dn&&Sn.set(Zn.shader,"."+Hn,Dn.append(Ct,Sn))}var Sn=Ct.proc("scope",3);Ct.batchId="a2";var Zn=Ct.shared,fr=Zn.current;vn(Ct,Sn,mn.context),mn.framebuffer&&mn.framebuffer.append(Ct,Sn),ae(Object.keys(mn.state)).forEach(function(Hn){var Dn=mn.state[Hn].append(Ct,Sn);w(Dn)?Dn.forEach(function(Jn,Nn){Sn.set(Ct.next[Hn],"["+Nn+"]",Jn)}):Sn.set(Zn.next,"."+Hn,Dn)}),sn(Ct,Sn,mn,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Hn){var Dn=mn.draw[Hn];Dn&&Sn.set(Zn.draw,"."+Hn,""+Dn.append(Ct,Sn))}),Object.keys(mn.uniforms).forEach(function(Hn){Sn.set(Zn.uniforms,"["+Pe.id(Hn)+"]",mn.uniforms[Hn].append(Ct,Sn))}),Object.keys(mn.attributes).forEach(function(Hn){var Dn=mn.attributes[Hn].append(Ct,Sn),Jn=Ct.scopeAttrib(Hn);Object.keys(new er).forEach(function(Nn){Sn.set(Jn,"."+Nn,Dn[Nn])})}),mn.scopeVAO&&Sn.set(Zn.vao,".targetVAO",mn.scopeVAO.append(Ct,Sn)),pn("vert"),pn("frag"),0<Object.keys(mn.state).length&&(Sn(fr,".dirty=true;"),Sn.exit(fr,".dirty=true;")),Sn("a1(",Ct.shared.context,",a0,",Ct.batchId,");")}(fr,pn),function(Hn,Dn){function Jn(Or){return Or.contextDep&&Un||Or.propDep}var Nn=Hn.proc("batch",2);Hn.batchId="0",Pn(Hn,Nn);var Un=!1,sr=!0;Object.keys(Dn.context).forEach(function(Or){Un=Un||Dn.context[Or].propDep}),Un||(vn(Hn,Nn,Dn.context),sr=!1);var Wr=!1;if((Vr=Dn.framebuffer)?(Vr.propDep?Un=Wr=!0:Vr.contextDep&&Un&&(Wr=!0),Wr||Qt(Hn,Nn,Vr)):Qt(Hn,Nn,null),Dn.state.viewport&&Dn.state.viewport.propDep&&(Un=!0),yn(Hn,Nn,Dn),Mn(Hn,Nn,Dn.state,function(Or){return!Jn(Or)}),Dn.profile&&Jn(Dn.profile)||sn(Hn,Nn,Dn,!1,"a1"),Dn.contextDep=Un,Dn.needsContext=sr,Dn.needsFramebuffer=Wr,(sr=Dn.shader.progVar).contextDep&&Un||sr.propDep)gr(Hn,Nn,Dn,null);else if(sr=sr.append(Hn,Nn),Nn(Hn.shared.gl,".useProgram(",sr,".program);"),Dn.shader.program)gr(Hn,Nn,Dn,Dn.shader.program);else{Nn(Hn.shared.vao,".setVAO(null);");var Vr=Hn.global.def("{}"),Zr=(Wr=Nn.def(sr,".id"),Nn.def(Vr,"[",Wr,"]"));Nn(Hn.cond(Zr).then(Zr,".call(this,a0,a1);").else(Zr,"=",Vr,"[",Wr,"]=",Hn.link(function(Or){return qn(gr,Hn,Dn,Or,2)}),"(",sr,");",Zr,".call(this,a0,a1);"))}0<Object.keys(Dn.state).length&&Nn(Hn.shared.current,".dirty=true;")}(fr,pn),fr.compile()}}}function W(Ge,Pe){for(var Ee=0;Ee<Ge.length;++Ee)if(Ge[Ee]===Pe)return Ee;return-1}var Z=function(Ge,Pe){for(var Ee=Object.keys(Pe),Ne=0;Ne<Ee.length;++Ne)Ge[Ee[Ne]]=Pe[Ee[Ne]];return Ge},oe=0,ie={DynamicVariable:i,define:function(Ge,Pe){return new i(Ge,m(Pe+""))},isDynamic:function(Ge){return"function"==typeof Ge&&!Ge._reglType||Ge instanceof i},unbox:function(Ge,Pe){return"function"==typeof Ge?new i(0,Ge):Ge},accessor:m},ue={next:"function"==typeof requestAnimationFrame?function(Ge){return requestAnimationFrame(Ge)}:function(Ge){return setTimeout(Ge,16)},cancel:"function"==typeof cancelAnimationFrame?function(Ge){return cancelAnimationFrame(Ge)}:clearTimeout},fe="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},he=l();he.zero=l();var be=function(Ge){return Ge instanceof Uint8Array||Ge instanceof Uint16Array||Ge instanceof Uint32Array||Ge instanceof Int8Array||Ge instanceof Int16Array||Ge instanceof Int32Array||Ge instanceof Float32Array||Ge instanceof Float64Array||Ge instanceof Uint8ClampedArray},pe=function(Ge){return Object.keys(Ge).map(function(Pe){return Ge[Pe]})},Te={shape:function(Ge){for(var Pe=[];Ge.length;Ge=Ge[0])Pe.push(Ge.length);return Pe},flatten:function(Ge,Pe,Ee,Ne){var Ve=1;if(Pe.length)for(var Ke=0;Ke<Pe.length;++Ke)Ve*=Pe[Ke];else Ve=0;switch(Ee=Ne||he.allocType(Ee,Ve),Pe.length){case 0:break;case 1:for(Ne=Pe[0],Pe=0;Pe<Ne;++Pe)Ee[Pe]=Ge[Pe];break;case 2:for(Ne=Pe[0],Pe=Pe[1],Ke=Ve=0;Ke<Ne;++Ke)for(var bt=Ge[Ke],gt=0;gt<Pe;++gt)Ee[Ve++]=bt[gt];break;case 3:s(Ge,Pe[0],Pe[1],Pe[2],Ee,0);break;default:!function pt(St,jt,Lt,Vt,mt){for(var Wt=1,Kt=Lt+1;Kt<jt.length;++Kt)Wt*=jt[Kt];var rn=jt[Lt];if(jt.length-Lt==4){var Yt=jt[Lt+1],Ue=jt[Lt+2];for(jt=jt[Lt+3],Kt=0;Kt<rn;++Kt)s(St[Kt],Yt,Ue,jt,Vt,mt),mt+=Wt}else for(Kt=0;Kt<rn;++Kt)pt(St[Kt],jt,Lt+1,Vt,mt),mt+=Wt}(Ge,Pe,0,Ee,0)}return Ee}},ye={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ke={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ze={dynamic:35048,stream:35040,static:35044},je=Te.flatten,Ie=Te.shape,Ce=[];Ce[5120]=1,Ce[5122]=2,Ce[5124]=4,Ce[5121]=1,Ce[5123]=2,Ce[5125]=4,Ce[5126]=4;var _e={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},we=new Float32Array(1),Se=new Uint32Array(we.buffer),Oe=[9984,9986,9985,9987],Be=[0,6409,6410,6407,6408],He={};He[6409]=He[6406]=He[6402]=1,He[34041]=He[6410]=2,He[6407]=He[35904]=3,He[6408]=He[35906]=4;var Xe=x("HTMLCanvasElement"),nt=x("OffscreenCanvas"),et=x("CanvasRenderingContext2D"),qe=x("ImageBitmap"),Ye=x("HTMLImageElement"),ot=x("HTMLVideoElement"),at=Object.keys(ye).concat([Xe,nt,et,qe,Ye,ot]),ct=[];ct[5121]=1,ct[5126]=4,ct[36193]=2,ct[5123]=2,ct[5125]=4;var _t=[];_t[32854]=2,_t[32855]=2,_t[36194]=2,_t[34041]=4,_t[33776]=.5,_t[33777]=.5,_t[33778]=1,_t[33779]=1,_t[35986]=.5,_t[35987]=1,_t[34798]=1,_t[35840]=.5,_t[35841]=.25,_t[35842]=.5,_t[35843]=.25,_t[36196]=.5;var xt=[];xt[32854]=2,xt[32855]=2,xt[36194]=2,xt[33189]=2,xt[36168]=1,xt[34041]=4,xt[35907]=4,xt[34836]=16,xt[34842]=8,xt[34843]=6;var At=[];At[6408]=4,At[6407]=3;var ht=[];ht[5121]=1,ht[5126]=4,ht[36193]=2;var st=["x","y","z","w"],Bt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),gn={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},hn={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},We={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},it={cw:2304,ccw:2305},qt=new te(!1,!1,!1,function(){});return function(Ge){function Pe(){if(0===rr.length)wt&&wt.update(),er=null;else{er=ue.next(Pe),jt();for(var ir=rr.length-1;0<=ir;--ir){var Bn=rr[ir];Bn&&Bn(un,null,0)}mt.flush(),wt&&wt.update()}}function Ee(){!er&&0<rr.length&&(er=ue.next(Pe))}function Ne(){er&&(ue.cancel(Pe),er=null)}function Ve(ir){ir.preventDefault(),Ne(),gr.forEach(function(Bn){Bn()})}function Ke(ir){mt.getError(),Kt.restore(),Pn.restore(),Qt.restore(),sn.restore(),In.restore(),Rn.restore(),yn.restore(),wt&&wt.restore(),Ln.procs.refresh(),Ee(),jr.forEach(function(Bn){Bn()})}function bt(ir){function Bn(Ct){var mn={},pn={};return Object.keys(Ct).forEach(function(Sn){var Zn=Ct[Sn];ie.isDynamic(Zn)?pn[Sn]=ie.unbox(Zn,Sn):mn[Sn]=Zn}),{dynamic:pn,static:mn}}var mr=Bn(ir.context||{}),zr=Bn(ir.uniforms||{}),br=Bn(ir.attributes||{}),Dr=Bn(function(Ct){function mn(Sn){if(Sn in pn){var Zn=pn[Sn];delete pn[Sn],Object.keys(Zn).forEach(function(fr){pn[Sn+"."+fr]=Zn[fr]})}}var pn=Z({},Ct);return delete pn.uniforms,delete pn.attributes,delete pn.context,delete pn.vao,"stencil"in pn&&pn.stencil.op&&(pn.stencil.opBack=pn.stencil.opFront=pn.stencil.op,delete pn.stencil.op),mn("blend"),mn("depth"),mn("cull"),mn("stencil"),mn("polygonOffset"),mn("scissor"),mn("sample"),"vao"in Ct&&(pn.vao=Ct.vao),pn}(ir)),di=(mr=Ln.compile(Dr,br,zr,mr,ir={gpuTime:0,cpuTime:0,count:0})).draw,ni=mr.batch,pi=mr.scope,qi=[];return Z(function(Ct,mn){var pn;if("function"==typeof Ct)return pi.call(this,null,Ct,0);if("function"==typeof mn)if("number"==typeof Ct)for(pn=0;pn<Ct;++pn)pi.call(this,null,mn,pn);else{if(!Array.isArray(Ct))return pi.call(this,Ct,mn,0);for(pn=0;pn<Ct.length;++pn)pi.call(this,Ct[pn],mn,pn)}else if("number"==typeof Ct){if(0<Ct)return ni.call(this,function(Sn){for(;qi.length<Sn;)qi.push(null);return qi}(0|Ct),0|Ct)}else{if(!Array.isArray(Ct))return di.call(this,Ct);if(Ct.length)return ni.call(this,Ct,Ct.length)}},{stats:ir})}function gt(ir,Bn){var mr=0;Ln.procs.poll();var zr=Bn.color;zr&&(mt.clearColor(+zr[0]||0,+zr[1]||0,+zr[2]||0,+zr[3]||0),mr|=16384),"depth"in Bn&&(mt.clearDepth(+Bn.depth),mr|=256),"stencil"in Bn&&(mt.clearStencil(0|Bn.stencil),mr|=1024),mt.clear(mr)}function pt(ir){return rr.push(ir),Ee(),{cancel:function(){var Bn=W(rr,ir);rr[Bn]=function mr(){var zr=W(rr,mr);rr[zr]=rr[rr.length-1],--rr.length,0>=rr.length&&Ne()}}}}function St(){var ir=qn.viewport,Bn=qn.scissor_box;ir[0]=ir[1]=Bn[0]=Bn[1]=0,un.viewportWidth=un.framebufferWidth=un.drawingBufferWidth=ir[2]=Bn[2]=mt.drawingBufferWidth,un.viewportHeight=un.framebufferHeight=un.drawingBufferHeight=ir[3]=Bn[3]=mt.drawingBufferHeight}function jt(){un.tick+=1,un.time=Vt(),St(),Ln.procs.poll()}function Lt(){St(),Ln.procs.refresh(),wt&&wt.update()}function Vt(){return(fe()-Ut)/1e3}if(!(Ge=function(Ge){var Pe,Ee,Ne,Ve,Ke=Ge||{};Ge={};var bt=[],gt=[],pt="undefined"==typeof window?1:window.devicePixelRatio,St=!1,jt=function(Vt){},Lt=function(){};if("string"==typeof Ke?Pe=document.querySelector(Ke):"object"==typeof Ke&&("string"==typeof Ke.nodeName&&"function"==typeof Ke.appendChild&&"function"==typeof Ke.getBoundingClientRect?Pe=Ke:"function"==typeof Ke.drawArrays||"function"==typeof Ke.drawElements?Ne=(Ve=Ke).canvas:("gl"in Ke?Ve=Ke.gl:"canvas"in Ke?Ne=p(Ke.canvas):"container"in Ke&&(Ee=p(Ke.container)),"attributes"in Ke&&(Ge=Ke.attributes),"extensions"in Ke&&(bt=b(Ke.extensions)),"optionalExtensions"in Ke&&(gt=b(Ke.optionalExtensions)),"onDone"in Ke&&(jt=Ke.onDone),"profile"in Ke&&(St=!!Ke.profile),"pixelRatio"in Ke&&(pt=+Ke.pixelRatio))),Pe&&("canvas"===Pe.nodeName.toLowerCase()?Ne=Pe:Ee=Pe),!Ve){if(!Ne){if(!(Pe=function(Vt,mt,Wt){function Kt(){var Ue=window.innerWidth,wt=window.innerHeight;Vt!==document.body&&(Ue=(wt=Vt.getBoundingClientRect()).right-wt.left,wt=wt.bottom-wt.top),Yt.width=Wt*Ue,Yt.height=Wt*wt,Z(Yt.style,{width:Ue+"px",height:wt+"px"})}var rn,Yt=document.createElement("canvas");return Z(Yt.style,{border:0,margin:0,padding:0,top:0,left:0}),Vt.appendChild(Yt),Vt===document.body&&(Yt.style.position="absolute",Z(Vt.style,{margin:0,padding:0})),Vt!==document.body&&"function"==typeof ResizeObserver?(rn=new ResizeObserver(function(){setTimeout(Kt)})).observe(Vt):window.addEventListener("resize",Kt,!1),Kt(),{canvas:Yt,onDestroy:function(){rn?rn.disconnect():window.removeEventListener("resize",Kt),Vt.removeChild(Yt)}}}(Ee||document.body,0,pt)))return null;Ne=Pe.canvas,Lt=Pe.onDestroy}void 0===Ge.premultipliedAlpha&&(Ge.premultipliedAlpha=!0),Ve=function(Vt,mt){function Wt(Kt){try{return Vt.getContext(Kt,mt)}catch(rn){return null}}return Wt("webgl")||Wt("experimental-webgl")||Wt("webgl-experimental")}(Ne,Ge)}return Ve?{gl:Ve,canvas:Ne,container:Ee,extensions:bt,optionalExtensions:gt,pixelRatio:pt,profile:St,onDone:jt,onDestroy:Lt}:(Lt(),jt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(Ge)))return null;var mt=Ge.gl,Wt=mt.getContextAttributes();mt.isContextLost();var Kt=function(ir,Bn){function mr(di){var ni;di=di.toLowerCase();try{ni=zr[di]=ir.getExtension(di)}catch(pi){}return!!ni}for(var zr={},br=0;br<Bn.extensions.length;++br){var Dr=Bn.extensions[br];if(!mr(Dr))return Bn.onDestroy(),Bn.onDone('"'+Dr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Bn.optionalExtensions.forEach(mr),{extensions:zr,restore:function(){Object.keys(zr).forEach(function(di){if(zr[di]&&!mr(di))throw Error("(regl): error restoring extension "+di)})}}}(mt,Ge);if(!Kt)return null;var ir,Bn,rn=(ir={"":0},Bn=[""],{id:function(mr){var zr=ir[mr];return zr||(zr=ir[mr]=Bn.length,Bn.push(mr),zr)},str:function(mr){return Bn[mr]}}),Yt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Ue=Kt.extensions,wt=function(ir,Bn){function mr(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function zr(Ct,mn,pn){var Sn=di.pop()||new mr;Sn.startQueryIndex=Ct,Sn.endQueryIndex=mn,Sn.sum=0,Sn.stats=pn,ni.push(Sn)}if(!Bn.ext_disjoint_timer_query)return null;var br=[],Dr=[],di=[],ni=[],pi=[],qi=[];return{beginQuery:function(Ct){var mn=br.pop()||Bn.ext_disjoint_timer_query.createQueryEXT();Bn.ext_disjoint_timer_query.beginQueryEXT(35007,mn),Dr.push(mn),zr(Dr.length-1,Dr.length,Ct)},endQuery:function(){Bn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:zr,update:function(){var Ct,mn;if(0!==(Ct=Dr.length)){qi.length=Math.max(qi.length,Ct+1),pi.length=Math.max(pi.length,Ct+1),pi[0]=0;var pn=qi[0]=0;for(mn=Ct=0;mn<Dr.length;++mn){var Sn=Dr[mn];Bn.ext_disjoint_timer_query.getQueryObjectEXT(Sn,34919)?(pn+=Bn.ext_disjoint_timer_query.getQueryObjectEXT(Sn,34918),br.push(Sn)):Dr[Ct++]=Sn,pi[mn+1]=pn,qi[mn+1]=Ct}for(Dr.length=Ct,mn=Ct=0;mn<ni.length;++mn){var Zn=(pn=ni[mn]).startQueryIndex;pn.sum+=pi[Sn=pn.endQueryIndex]-pi[Zn],(Sn=qi[Sn])===(Zn=qi[Zn])?(pn.stats.gpuTime+=pn.sum/1e6,di.push(pn)):(pn.startQueryIndex=Zn,pn.endQueryIndex=Sn,ni[Ct++]=pn)}ni.length=Ct}},getNumPendingQueries:function(){return Dr.length},clear:function(){br.push.apply(br,Dr);for(var Ct=0;Ct<br.length;Ct++)Bn.ext_disjoint_timer_query.deleteQueryEXT(br[Ct]);Dr.length=0,br.length=0},restore:function(){Dr.length=0,br.length=0}}}(0,Ue),Ut=fe(),Zt=mt.drawingBufferWidth,tn=mt.drawingBufferHeight,un={tick:0,time:0,viewportWidth:Zt,viewportHeight:tn,framebufferWidth:Zt,framebufferHeight:tn,drawingBufferWidth:Zt,drawingBufferHeight:tn,pixelRatio:Ge.pixelRatio},vn=function(Ge,Pe){var Ee=1;Pe.ext_texture_filter_anisotropic&&(Ee=Ge.getParameter(34047));var Ne=1,Ve=1;Pe.webgl_draw_buffers&&(Ne=Ge.getParameter(34852),Ve=Ge.getParameter(36063));var Ke=!!Pe.oes_texture_float;if(Ke){Ke=Ge.createTexture(),Ge.bindTexture(3553,Ke),Ge.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var bt=Ge.createFramebuffer();if(Ge.bindFramebuffer(36160,bt),Ge.framebufferTexture2D(36160,36064,3553,Ke,0),Ge.bindTexture(3553,null),36053!==Ge.checkFramebufferStatus(36160))Ke=!1;else{Ge.viewport(0,0,1,1),Ge.clearColor(1,0,0,1),Ge.clear(16384);var gt=he.allocType(5126,4);Ge.readPixels(0,0,1,1,6408,5126,gt),Ge.getError()?Ke=!1:(Ge.deleteFramebuffer(bt),Ge.deleteTexture(Ke),Ke=1===gt[0]),he.freeType(gt)}}return gt=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(gt=Ge.createTexture(),bt=he.allocType(5121,36),Ge.activeTexture(33984),Ge.bindTexture(34067,gt),Ge.texImage2D(34069,0,6408,3,3,0,6408,5121,bt),he.freeType(bt),Ge.bindTexture(34067,null),Ge.deleteTexture(gt),gt=!Ge.getError()),{colorBits:[Ge.getParameter(3410),Ge.getParameter(3411),Ge.getParameter(3412),Ge.getParameter(3413)],depthBits:Ge.getParameter(3414),stencilBits:Ge.getParameter(3415),subpixelBits:Ge.getParameter(3408),extensions:Object.keys(Pe).filter(function(pt){return!!Pe[pt]}),maxAnisotropic:Ee,maxDrawbuffers:Ne,maxColorAttachments:Ve,pointSizeDims:Ge.getParameter(33901),lineWidthDims:Ge.getParameter(33902),maxViewportDims:Ge.getParameter(3386),maxCombinedTextureUnits:Ge.getParameter(35661),maxCubeMapSize:Ge.getParameter(34076),maxRenderbufferSize:Ge.getParameter(34024),maxTextureUnits:Ge.getParameter(34930),maxTextureSize:Ge.getParameter(3379),maxAttributes:Ge.getParameter(34921),maxVertexUniforms:Ge.getParameter(36347),maxVertexTextureUnits:Ge.getParameter(35660),maxVaryingVectors:Ge.getParameter(36348),maxFragmentUniforms:Ge.getParameter(36349),glsl:Ge.getParameter(35724),renderer:Ge.getParameter(7937),vendor:Ge.getParameter(7936),version:Ge.getParameter(7938),readFloat:Ke,npotTextureCube:gt}}(mt,Ue),Qt=function(Ge,Pe,Ee,Ne){function Ve(Lt){this.id=pt++,this.buffer=Ge.createBuffer(),this.type=Lt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Ee.profile&&(this.stats={size:0})}function Ke(Lt,Vt,mt){Lt.byteLength=Vt.byteLength,Ge.bufferData(Lt.type,Vt,mt)}function bt(Lt,Vt,mt,Wt,Kt,rn){if(Lt.usage=mt,Array.isArray(Vt)){if(Lt.dtype=Wt||5126,0<Vt.length)if(Array.isArray(Vt[0])){Kt=Ie(Vt);for(var Yt=Wt=1;Yt<Kt.length;++Yt)Wt*=Kt[Yt];Lt.dimension=Wt,Ke(Lt,Vt=je(Vt,Kt,Lt.dtype),mt),rn?Lt.persistentData=Vt:he.freeType(Vt)}else"number"==typeof Vt[0]?(Lt.dimension=Kt,d(Kt=he.allocType(Lt.dtype,Vt.length),Vt),Ke(Lt,Kt,mt),rn?Lt.persistentData=Kt:he.freeType(Kt)):be(Vt[0])&&(Lt.dimension=Vt[0].length,Lt.dtype=Wt||o(Vt[0])||5126,Ke(Lt,Vt=je(Vt,[Vt.length,Vt[0].length],Lt.dtype),mt),rn?Lt.persistentData=Vt:he.freeType(Vt))}else if(be(Vt))Lt.dtype=Wt||o(Vt),Lt.dimension=Kt,Ke(Lt,Vt,mt),rn&&(Lt.persistentData=new Uint8Array(new Uint8Array(Vt.buffer)));else if(f(Vt)){var Ue=Vt.stride,wt=(Yt=Vt.offset,0),Ut=0,Zt=0,tn=0;1===(Kt=Vt.shape).length?(wt=Kt[0],Ut=1,Zt=Ue[0],tn=0):2===Kt.length&&(wt=Kt[0],Ut=Kt[1],Zt=Ue[0],tn=Ue[1]),Lt.dtype=Wt||o(Vt.data)||5126,Lt.dimension=Ut,g(Kt=he.allocType(Lt.dtype,wt*Ut),Vt.data,wt,Ut,Zt,tn,Yt),Ke(Lt,Kt,mt),rn?Lt.persistentData=Kt:he.freeType(Kt)}else Vt instanceof ArrayBuffer&&(Lt.dtype=5121,Lt.dimension=Kt,Ke(Lt,Vt,mt),rn&&(Lt.persistentData=new Uint8Array(new Uint8Array(Vt))))}function gt(Lt){Pe.bufferCount--,Ne(Lt),Ge.deleteBuffer(Lt.buffer),Lt.buffer=null,delete St[Lt.id]}var pt=0,St={};Ve.prototype.bind=function(){Ge.bindBuffer(this.type,this.buffer)},Ve.prototype.destroy=function(){gt(this)};var jt=[];return Ee.profile&&(Pe.getTotalBufferSize=function(){var Lt=0;return Object.keys(St).forEach(function(Vt){Lt+=St[Vt].stats.size}),Lt}),{create:function(Lt,Vt,mt,Wt){function Kt(Yt){var Ue=35044,wt=null,Ut=0,Zt=0,tn=1;return Array.isArray(Yt)||be(Yt)||f(Yt)||Yt instanceof ArrayBuffer?wt=Yt:"number"==typeof Yt?Ut=0|Yt:Yt&&("data"in Yt&&(wt=Yt.data),"usage"in Yt&&(Ue=ze[Yt.usage]),"type"in Yt&&(Zt=ke[Yt.type]),"dimension"in Yt&&(tn=0|Yt.dimension),"length"in Yt&&(Ut=0|Yt.length)),rn.bind(),wt?bt(rn,wt,Ue,Zt,tn,Wt):(Ut&&Ge.bufferData(rn.type,Ut,Ue),rn.dtype=Zt||5121,rn.usage=Ue,rn.dimension=tn,rn.byteLength=Ut),Ee.profile&&(rn.stats.size=rn.byteLength*Ce[rn.dtype]),Kt}Pe.bufferCount++;var rn=new Ve(Vt);return St[rn.id]=rn,mt||Kt(Lt),Kt._reglType="buffer",Kt._buffer=rn,Kt.subdata=function(Yt,Ue){var wt,Ut=0|(Ue||0);if(rn.bind(),be(Yt)||Yt instanceof ArrayBuffer)Ge.bufferSubData(rn.type,Ut,Yt);else if(Array.isArray(Yt)){if(0<Yt.length)if("number"==typeof Yt[0]){var Zt=he.allocType(rn.dtype,Yt.length);d(Zt,Yt),Ge.bufferSubData(rn.type,Ut,Zt),he.freeType(Zt)}else(Array.isArray(Yt[0])||be(Yt[0]))&&(wt=Ie(Yt),Zt=je(Yt,wt,rn.dtype),Ge.bufferSubData(rn.type,Ut,Zt),he.freeType(Zt))}else if(f(Yt)){var tn=Yt.stride,un=Zt=0,vn=0,Qt=0;1===(wt=Yt.shape).length?(Zt=wt[0],un=1,vn=tn[0],Qt=0):2===wt.length&&(Zt=wt[0],un=wt[1],vn=tn[0],Qt=tn[1]),wt=Array.isArray(Yt.data)?rn.dtype:o(Yt.data),g(wt=he.allocType(wt,Zt*un),Yt.data,Zt,un,vn,Qt,Yt.offset),Ge.bufferSubData(rn.type,Ut,wt),he.freeType(wt)}return Kt},Ee.profile&&(Kt.stats=rn.stats),Kt.destroy=function(){gt(rn)},Kt},createStream:function(Lt,Vt){var mt=jt.pop();return mt||(mt=new Ve(Lt)),mt.bind(),bt(mt,Vt,35040,0,1,!1),mt},destroyStream:function(Lt){jt.push(Lt)},clear:function(){pe(St).forEach(gt),jt.forEach(gt)},getBuffer:function(Lt){return Lt&&Lt._buffer instanceof Ve?Lt._buffer:null},restore:function(){pe(St).forEach(function(Lt){Lt.buffer=Ge.createBuffer(),Ge.bindBuffer(Lt.type,Lt.buffer),Ge.bufferData(Lt.type,Lt.persistentData||Lt.byteLength,Lt.usage)})},_initBuffer:bt}}(mt,Yt,Ge,function(ir){return yn.destroyBuffer(ir)}),yn=function(Ge,Pe,Ee,Ne,Ve){function Ke(){this.id=++pt,this.attributes=[];var Lt=Pe.oes_vertex_array_object;this.vao=Lt?Lt.createVertexArrayOES():null,St[this.id]=this,this.buffers=[]}var bt=Ee.maxAttributes,gt=Array(bt);for(Ee=0;Ee<bt;++Ee)gt[Ee]=new R;var pt=0,St={},jt={Record:R,scope:{},state:gt,currentVAO:null,targetVAO:null,restore:Pe.oes_vertex_array_object?function(){Pe.oes_vertex_array_object&&pe(St).forEach(function(Lt){Lt.refresh()})}:function(){},createVAO:function(Lt){function Vt(Wt){for(var Kt=0;Kt<mt.buffers.length;++Kt)mt.buffers[Kt].destroy();mt.buffers.length=0,(Kt=mt.attributes).length=Wt.length;for(var rn=0;rn<Wt.length;++rn){var Yt=Wt[rn],Ue=Kt[rn]=new R;Array.isArray(Yt)||be(Yt)||f(Yt)?(Yt=Ve.create(Yt,34962,!1,!0),Ue.buffer=Ve.getBuffer(Yt),Ue.size=0|Ue.buffer.dimension,Ue.normalized=!1,Ue.type=Ue.buffer.dtype,Ue.offset=0,Ue.stride=0,Ue.divisor=0,Ue.state=1,mt.buffers.push(Yt)):Ve.getBuffer(Yt)?(Ue.buffer=Ve.getBuffer(Yt),Ue.size=0|Ue.buffer.dimension,Ue.normalized=!1,Ue.type=Ue.buffer.dtype,Ue.offset=0,Ue.stride=0,Ue.divisor=0,Ue.state=1):Ve.getBuffer(Yt.buffer)?(Ue.buffer=Ve.getBuffer(Yt.buffer),Ue.size=0|(+Yt.size||Ue.buffer.dimension),Ue.normalized=!!Yt.normalized||!1,Ue.type="type"in Yt?ke[Yt.type]:Ue.buffer.dtype,Ue.offset=0|(Yt.offset||0),Ue.stride=0|(Yt.stride||0),Ue.divisor=0|(Yt.divisor||0),Ue.state=1):"x"in Yt&&(Ue.x=+Yt.x||0,Ue.y=+Yt.y||0,Ue.z=+Yt.z||0,Ue.w=+Yt.w||0,Ue.state=2)}return mt.refresh(),Vt}var mt=new Ke;return Ne.vaoCount+=1,Vt.destroy=function(){mt.destroy()},Vt._vao=mt,Vt._reglType="vao",Vt(Lt)},getVAO:function(Lt){return"function"==typeof Lt&&Lt._vao?Lt._vao:null},destroyBuffer:function(Lt){for(var Vt=0;Vt<gt.length;++Vt){var mt=gt[Vt];mt.buffer===Lt&&(Ge.disableVertexAttribArray(Vt),mt.buffer=null)}},setVAO:Pe.oes_vertex_array_object?function(Lt){Lt!==jt.currentVAO&&(Pe.oes_vertex_array_object.bindVertexArrayOES(Lt?Lt.vao:null),jt.currentVAO=Lt)}:function(Lt){if(Lt!==jt.currentVAO){if(Lt)Lt.bindAttrs();else for(var Vt=Pe.angle_instanced_arrays,mt=0;mt<gt.length;++mt){var Wt=gt[mt];Wt.buffer?(Ge.enableVertexAttribArray(mt),Ge.vertexAttribPointer(mt,Wt.size,Wt.type,Wt.normalized,Wt.stride,Wt.offfset),Vt&&Vt.vertexAttribDivisorANGLE(mt,Wt.divisor)):(Ge.disableVertexAttribArray(mt),Ge.vertexAttrib4f(mt,Wt.x,Wt.y,Wt.z,Wt.w))}jt.currentVAO=Lt}},clear:Pe.oes_vertex_array_object?function(){pe(St).forEach(function(Lt){Lt.destroy()})}:function(){}};return Ke.prototype.bindAttrs=function(){for(var Lt=Pe.angle_instanced_arrays,Vt=this.attributes,mt=0;mt<Vt.length;++mt){var Wt=Vt[mt];Wt.buffer?(Ge.enableVertexAttribArray(mt),Ge.bindBuffer(34962,Wt.buffer.buffer),Ge.vertexAttribPointer(mt,Wt.size,Wt.type,Wt.normalized,Wt.stride,Wt.offset),Lt&&Lt.vertexAttribDivisorANGLE(mt,Wt.divisor)):(Ge.disableVertexAttribArray(mt),Ge.vertexAttrib4f(mt,Wt.x,Wt.y,Wt.z,Wt.w))}for(Lt=Vt.length;Lt<bt;++Lt)Ge.disableVertexAttribArray(Lt)},Ke.prototype.refresh=function(){var Lt=Pe.oes_vertex_array_object;Lt&&(Lt.bindVertexArrayOES(this.vao),this.bindAttrs(),jt.currentVAO=this)},Ke.prototype.destroy=function(){if(this.vao){var Lt=Pe.oes_vertex_array_object;this===jt.currentVAO&&(jt.currentVAO=null,Lt.bindVertexArrayOES(null)),Lt.deleteVertexArrayOES(this.vao),this.vao=null}St[this.id]&&(delete St[this.id],--Ne.vaoCount)},jt}(mt,Ue,vn,Yt,Qt),Mn=function(Ge,Pe,Ee,Ne){function Ve(Lt){this.id=pt++,gt[this.id]=this,this.buffer=Lt,this.primType=4,this.type=this.vertCount=0}function Ke(Lt,Vt,mt,Wt,Kt,rn,Yt){var Ue;if(Lt.buffer.bind(),Vt?((Ue=Yt)||be(Vt)&&(!f(Vt)||be(Vt.data))||(Ue=Pe.oes_element_index_uint?5125:5123),Ee._initBuffer(Lt.buffer,Vt,mt,Ue,3)):(Ge.bufferData(34963,rn,mt),Lt.buffer.dtype=Ue||5121,Lt.buffer.usage=mt,Lt.buffer.dimension=3,Lt.buffer.byteLength=rn),Ue=Yt,!Yt){switch(Lt.buffer.dtype){case 5121:case 5120:Ue=5121;break;case 5123:case 5122:Ue=5123;break;case 5125:case 5124:Ue=5125}Lt.buffer.dtype=Ue}Lt.type=Ue,0>(Vt=Kt)&&(Vt=Lt.buffer.byteLength,5123===Ue?Vt>>=1:5125===Ue&&(Vt>>=2)),Lt.vertCount=Vt,Vt=Wt,0>Wt&&(Vt=4,1===(Wt=Lt.buffer.dimension)&&(Vt=0),2===Wt&&(Vt=1),3===Wt&&(Vt=4)),Lt.primType=Vt}function bt(Lt){Ne.elementsCount--,delete gt[Lt.id],Lt.buffer.destroy(),Lt.buffer=null}var gt={},pt=0,St={uint8:5121,uint16:5123};Pe.oes_element_index_uint&&(St.uint32=5125),Ve.prototype.bind=function(){this.buffer.bind()};var jt=[];return{create:function(Lt,Vt){function mt(rn){if(rn)if("number"==typeof rn)Wt(rn),Kt.primType=4,Kt.vertCount=0|rn,Kt.type=5121;else{var Yt=null,Ue=35044,wt=-1,Ut=-1,Zt=0,tn=0;Array.isArray(rn)||be(rn)||f(rn)?Yt=rn:("data"in rn&&(Yt=rn.data),"usage"in rn&&(Ue=ze[rn.usage]),"primitive"in rn&&(wt=_e[rn.primitive]),"count"in rn&&(Ut=0|rn.count),"type"in rn&&(tn=St[rn.type]),"length"in rn?Zt=0|rn.length:(Zt=Ut,5123===tn||5122===tn?Zt*=2:5125!==tn&&5124!==tn||(Zt*=4))),Ke(Kt,Yt,Ue,wt,Ut,Zt,tn)}else Wt(),Kt.primType=4,Kt.vertCount=0,Kt.type=5121;return mt}var Wt=Ee.create(null,34963,!0),Kt=new Ve(Wt._buffer);return Ne.elementsCount++,mt(Lt),mt._reglType="elements",mt._elements=Kt,mt.subdata=function(rn,Yt){return Wt.subdata(rn,Yt),mt},mt.destroy=function(){bt(Kt)},mt},createStream:function(Lt){var Vt=jt.pop();return Vt||(Vt=new Ve(Ee.create(null,34963,!0,!1)._buffer)),Ke(Vt,Lt,35040,-1,-1,0,0),Vt},destroyStream:function(Lt){jt.push(Lt)},getElements:function(Lt){return"function"==typeof Lt&&Lt._elements instanceof Ve?Lt._elements:null},clear:function(){pe(gt).forEach(bt)}}}(mt,Ue,Qt,Yt),Pn=function(Ge,Pe,Ee,Ne){function Ve(Wt,Kt,rn,Yt){this.name=Wt,this.id=Kt,this.location=rn,this.info=Yt}function Ke(Wt,Kt){for(var rn=0;rn<Wt.length;++rn)if(Wt[rn].id===Kt.id)return void(Wt[rn].location=Kt.location);Wt.push(Kt)}function bt(Wt,Kt,rn){if(!(Ue=(rn=35632===Wt?St:jt)[Kt])){var Yt=Pe.str(Kt),Ue=Ge.createShader(Wt);Ge.shaderSource(Ue,Yt),Ge.compileShader(Ue),rn[Kt]=Ue}return Ue}function gt(Wt,Kt){this.id=mt++,this.fragId=Wt,this.vertId=Kt,this.program=null,this.uniforms=[],this.attributes=[],Ne.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function pt(Wt,Kt,rn){var Yt;Yt=bt(35632,Wt.fragId);var Ue=bt(35633,Wt.vertId);if(Kt=Wt.program=Ge.createProgram(),Ge.attachShader(Kt,Yt),Ge.attachShader(Kt,Ue),rn)for(Yt=0;Yt<rn.length;++Yt)Ge.bindAttribLocation(Kt,(Ue=rn[Yt])[0],Ue[1]);Ge.linkProgram(Kt),Ue=Ge.getProgramParameter(Kt,35718),Ne.profile&&(Wt.stats.uniformsCount=Ue);var wt=Wt.uniforms;for(Yt=0;Yt<Ue;++Yt)if(rn=Ge.getActiveUniform(Kt,Yt))if(1<rn.size)for(var Ut=0;Ut<rn.size;++Ut){var Zt=rn.name.replace("[0]","["+Ut+"]");Ke(wt,new Ve(Zt,Pe.id(Zt),Ge.getUniformLocation(Kt,Zt),rn))}else Ke(wt,new Ve(rn.name,Pe.id(rn.name),Ge.getUniformLocation(Kt,rn.name),rn));for(Ue=Ge.getProgramParameter(Kt,35721),Ne.profile&&(Wt.stats.attributesCount=Ue),Wt=Wt.attributes,Yt=0;Yt<Ue;++Yt)(rn=Ge.getActiveAttrib(Kt,Yt))&&Ke(Wt,new Ve(rn.name,Pe.id(rn.name),Ge.getAttribLocation(Kt,rn.name),rn))}var St={},jt={},Lt={},Vt=[],mt=0;return Ne.profile&&(Ee.getMaxUniformsCount=function(){var Wt=0;return Vt.forEach(function(Kt){Kt.stats.uniformsCount>Wt&&(Wt=Kt.stats.uniformsCount)}),Wt},Ee.getMaxAttributesCount=function(){var Wt=0;return Vt.forEach(function(Kt){Kt.stats.attributesCount>Wt&&(Wt=Kt.stats.attributesCount)}),Wt}),{clear:function(){var Wt=Ge.deleteShader.bind(Ge);pe(St).forEach(Wt),St={},pe(jt).forEach(Wt),jt={},Vt.forEach(function(Kt){Ge.deleteProgram(Kt.program)}),Vt.length=0,Lt={},Ee.shaderCount=0},program:function(Wt,Kt,rn,Yt){var Ue=Lt[Kt];Ue||(Ue=Lt[Kt]={});var wt=Ue[Wt];return wt&&!Yt?wt:(Kt=new gt(Kt,Wt),Ee.shaderCount++,pt(Kt,rn,Yt),wt||(Ue[Wt]=Kt),Vt.push(Kt),Kt)},restore:function(){St={},jt={};for(var Wt=0;Wt<Vt.length;++Wt)pt(Vt[Wt],null,Vt[Wt].attributes.map(function(Kt){return[Kt.location,Kt.name]}))},shader:bt,frag:-1,vert:-1}}(mt,rn,Yt,Ge),sn=function(Ge,Pe,Ee,Ne,Ve,Ke,bt){function gt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function pt(Ct,mn){Ct.internalformat=mn.internalformat,Ct.format=mn.format,Ct.type=mn.type,Ct.compressed=mn.compressed,Ct.premultiplyAlpha=mn.premultiplyAlpha,Ct.flipY=mn.flipY,Ct.unpackAlignment=mn.unpackAlignment,Ct.colorSpace=mn.colorSpace,Ct.width=mn.width,Ct.height=mn.height,Ct.channels=mn.channels}function St(Ct,mn){if("object"==typeof mn&&mn){"premultiplyAlpha"in mn&&(Ct.premultiplyAlpha=mn.premultiplyAlpha),"flipY"in mn&&(Ct.flipY=mn.flipY),"alignment"in mn&&(Ct.unpackAlignment=mn.alignment),"colorSpace"in mn&&(Ct.colorSpace=qn[mn.colorSpace]),"type"in mn&&(Ct.type=nr[mn.type]);var pn=Ct.width,Sn=Ct.height,Zn=Ct.channels,fr=!1;"shape"in mn?(pn=mn.shape[0],Sn=mn.shape[1],3===mn.shape.length&&(Zn=mn.shape[2],fr=!0)):("radius"in mn&&(pn=Sn=mn.radius),"width"in mn&&(pn=mn.width),"height"in mn&&(Sn=mn.height),"channels"in mn&&(Zn=mn.channels,fr=!0)),Ct.width=0|pn,Ct.height=0|Sn,Ct.channels=0|Zn,pn=!1,"format"in mn&&(Sn=Ct.internalformat=rr[pn=mn.format],Ct.format=zr[Sn],pn in nr&&!("type"in mn)&&(Ct.type=nr[pn]),pn in gr&&(Ct.compressed=!0),pn=!0),!fr&&pn?Ct.channels=He[Ct.format]:fr&&!pn&&Ct.channels!==Be[Ct.format]&&(Ct.format=Ct.internalformat=Be[Ct.channels])}}function jt(Ct){Ge.pixelStorei(37440,Ct.flipY),Ge.pixelStorei(37441,Ct.premultiplyAlpha),Ge.pixelStorei(37443,Ct.colorSpace),Ge.pixelStorei(3317,Ct.unpackAlignment)}function Lt(){gt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Vt(Ct,mn){var pn=null;if(L(mn)?pn=mn:mn&&(St(Ct,mn),"x"in mn&&(Ct.xOffset=0|mn.x),"y"in mn&&(Ct.yOffset=0|mn.y),L(mn.data)&&(pn=mn.data)),mn.copy){var Sn=Ve.viewportWidth,Zn=Ve.viewportHeight;Ct.width=Ct.width||Sn-Ct.xOffset,Ct.height=Ct.height||Zn-Ct.yOffset,Ct.needsCopy=!0}else if(pn){if(be(pn))Ct.channels=Ct.channels||4,Ct.data=pn,"type"in mn||5121!==Ct.type||(Ct.type=0|ye[Object.prototype.toString.call(pn)]);else if(E(pn)){switch(Ct.channels=Ct.channels||4,Zn=(Sn=pn).length,Ct.type){case 5121:case 5123:case 5125:case 5126:(Zn=he.allocType(Ct.type,Zn)).set(Sn),Ct.data=Zn;break;case 36193:Ct.data=_(Sn)}Ct.alignment=1,Ct.needsFree=!0}else if(f(pn)){Sn=pn.data,Array.isArray(Sn)||5121!==Ct.type||(Ct.type=0|ye[Object.prototype.toString.call(Sn)]);var fr,Hn,Dn,Jn,Nn=pn.stride;3===(Zn=pn.shape).length?(Dn=Zn[2],Jn=Nn[2]):Jn=Dn=1,fr=Zn[0],Hn=Zn[1],Zn=Nn[0],Nn=Nn[1],Ct.alignment=1,Ct.width=fr,Ct.height=Hn,Ct.channels=Dn,Ct.format=Ct.internalformat=Be[Dn],Ct.needsFree=!0,fr=Jn,pn=pn.offset;for(var Un=he.allocType(36193===Ct.type?5126:Ct.type,(Dn=Ct.width)*(Jn=Ct.height)*(Hn=Ct.channels)),sr=0,Wr=0;Wr<Jn;++Wr)for(var Vr=0;Vr<Dn;++Vr)for(var Zr=0;Zr<Hn;++Zr)Un[sr++]=Sn[Zn*Vr+Nn*Wr+fr*Zr+pn];P(Ct,Un)}else if(C(pn)===Xe||C(pn)===nt||C(pn)===et)Ct.element=C(pn)===Xe||C(pn)===nt?pn:pn.canvas,Ct.width=Ct.element.width,Ct.height=Ct.element.height,Ct.channels=4;else if(C(pn)===qe)Ct.element=pn,Ct.width=pn.width,Ct.height=pn.height,Ct.channels=4;else if(C(pn)===Ye)Ct.element=pn,Ct.width=pn.naturalWidth,Ct.height=pn.naturalHeight,Ct.channels=4;else if(C(pn)===ot)Ct.element=pn,Ct.width=pn.videoWidth,Ct.height=pn.videoHeight,Ct.channels=4;else if(k(pn)){for(Sn=Ct.width||pn[0].length,Zn=Ct.height||pn.length,Nn=Ct.channels,Nn=w(pn[0][0])?Nn||pn[0][0].length:Nn||1,fr=Te.shape(pn),Dn=1,Jn=0;Jn<fr.length;++Jn)Dn*=fr[Jn];Dn=he.allocType(36193===Ct.type?5126:Ct.type,Dn),Te.flatten(pn,fr,"",Dn),P(Ct,Dn),Ct.alignment=1,Ct.width=Sn,Ct.height=Zn,Ct.channels=Nn,Ct.format=Ct.internalformat=Be[Nn],Ct.needsFree=!0}}else Ct.width=Ct.width||1,Ct.height=Ct.height||1,Ct.channels=Ct.channels||4}function mt(Ct,mn,pn,Sn,Zn){var fr=Ct.element,Hn=Ct.data,Dn=Ct.internalformat,Jn=Ct.format,Nn=Ct.type,Un=Ct.width,sr=Ct.height;jt(Ct),fr?Ge.texSubImage2D(mn,Zn,pn,Sn,Jn,Nn,fr):Ct.compressed?Ge.compressedTexSubImage2D(mn,Zn,pn,Sn,Dn,Un,sr,Hn):Ct.needsCopy?(Ne(),Ge.copyTexSubImage2D(mn,Zn,pn,Sn,Ct.xOffset,Ct.yOffset,Un,sr)):Ge.texSubImage2D(mn,Zn,pn,Sn,Un,sr,Jn,Nn,Hn)}function Wt(){return br.pop()||new Lt}function Kt(Ct){Ct.needsFree&&he.freeType(Ct.data),Lt.call(Ct),br.push(Ct)}function rn(){gt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Yt(Ct,mn,pn){var Sn=Ct.images[0]=Wt();Ct.mipmask=1,Sn.width=Ct.width=mn,Sn.height=Ct.height=pn,Sn.channels=Ct.channels=4}function Ue(Ct,mn){var pn=null;if(L(mn))pt(pn=Ct.images[0]=Wt(),Ct),Vt(pn,mn),Ct.mipmask=1;else if(St(Ct,mn),Array.isArray(mn.mipmap))for(var Sn=mn.mipmap,Zn=0;Zn<Sn.length;++Zn)pt(pn=Ct.images[Zn]=Wt(),Ct),pn.width>>=Zn,pn.height>>=Zn,Vt(pn,Sn[Zn]),Ct.mipmask|=1<<Zn;else pt(pn=Ct.images[0]=Wt(),Ct),Vt(pn,mn),Ct.mipmask=1;pt(Ct,Ct.images[0])}function wt(Ct,mn){for(var pn=Ct.images,Sn=0;Sn<pn.length&&pn[Sn];++Sn){var Zn=pn[Sn],fr=mn,Hn=Sn,Dn=Zn.element,Jn=Zn.data,Nn=Zn.internalformat,Un=Zn.format,sr=Zn.type,Wr=Zn.width,Vr=Zn.height;jt(Zn),Dn?Ge.texImage2D(fr,Hn,Un,Un,sr,Dn):Zn.compressed?Ge.compressedTexImage2D(fr,Hn,Nn,Wr,Vr,0,Jn):Zn.needsCopy?(Ne(),Ge.copyTexImage2D(fr,Hn,Un,Zn.xOffset,Zn.yOffset,Wr,Vr,0)):Ge.texImage2D(fr,Hn,Un,Wr,Vr,0,Un,sr,Jn||null)}}function Ut(){var Ct=Dr.pop()||new rn;gt.call(Ct);for(var mn=Ct.mipmask=0;16>mn;++mn)Ct.images[mn]=null;return Ct}function Zt(Ct){for(var mn=Ct.images,pn=0;pn<mn.length;++pn)mn[pn]&&Kt(mn[pn]),mn[pn]=null;Dr.push(Ct)}function tn(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function un(Ct,mn){"min"in mn&&(Ct.minFilter=Ln[mn.min],0<=Oe.indexOf(Ct.minFilter)&&!("faces"in mn)&&(Ct.genMipmaps=!0)),"mag"in mn&&(Ct.magFilter=Rn[mn.mag]);var pn=Ct.wrapS,Sn=Ct.wrapT;if("wrap"in mn){var Zn=mn.wrap;"string"==typeof Zn?pn=Sn=In[Zn]:Array.isArray(Zn)&&(pn=In[Zn[0]],Sn=In[Zn[1]])}else"wrapS"in mn&&(pn=In[mn.wrapS]),"wrapT"in mn&&(Sn=In[mn.wrapT]);if(Ct.wrapS=pn,Ct.wrapT=Sn,"anisotropic"in mn&&(Ct.anisotropic=mn.anisotropic),"mipmap"in mn){switch(pn=!1,typeof mn.mipmap){case"string":Ct.mipmapHint=sn[mn.mipmap],pn=Ct.genMipmaps=!0;break;case"boolean":pn=Ct.genMipmaps=mn.mipmap;break;case"object":Ct.genMipmaps=!1,pn=!0}!pn||"min"in mn||(Ct.minFilter=9984)}}function vn(Ct,mn){Ge.texParameteri(mn,10241,Ct.minFilter),Ge.texParameteri(mn,10240,Ct.magFilter),Ge.texParameteri(mn,10242,Ct.wrapS),Ge.texParameteri(mn,10243,Ct.wrapT),Pe.ext_texture_filter_anisotropic&&Ge.texParameteri(mn,34046,Ct.anisotropic),Ct.genMipmaps&&(Ge.hint(33170,Ct.mipmapHint),Ge.generateMipmap(mn))}function Qt(Ct){gt.call(this),this.mipmask=0,this.internalformat=6408,this.id=di++,this.refCount=1,this.target=Ct,this.texture=Ge.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new tn,bt.profile&&(this.stats={size:0})}function yn(Ct){Ge.activeTexture(33984),Ge.bindTexture(Ct.target,Ct.texture)}function Mn(){var Ct=qi[0];Ct?Ge.bindTexture(Ct.target,Ct.texture):Ge.bindTexture(3553,null)}function Pn(Ct){var mn=Ct.texture,pn=Ct.unit,Sn=Ct.target;0<=pn&&(Ge.activeTexture(33984+pn),Ge.bindTexture(Sn,null),qi[pn]=null),Ge.deleteTexture(mn),Ct.texture=null,Ct.params=null,Ct.pixels=null,Ct.refCount=0,delete ni[Ct.id],Ke.textureCount--}var sn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},In={repeat:10497,clamp:33071,mirror:33648},Rn={nearest:9728,linear:9729},Ln=Z({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Rn),qn={none:0,browser:37444},nr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},rr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},gr={};Pe.ext_srgb&&(rr.srgb=35904,rr.srgba=35906),Pe.oes_texture_float&&(nr.float32=nr.float=5126),Pe.oes_texture_half_float&&(nr.float16=nr["half float"]=36193),Pe.webgl_depth_texture&&(Z(rr,{depth:6402,"depth stencil":34041}),Z(nr,{uint16:5123,uint32:5125,"depth stencil":34042})),Pe.webgl_compressed_texture_s3tc&&Z(gr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Pe.webgl_compressed_texture_atc&&Z(gr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Pe.webgl_compressed_texture_pvrtc&&Z(gr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Pe.webgl_compressed_texture_etc1&&(gr["rgb etc1"]=36196);var jr=Array.prototype.slice.call(Ge.getParameter(34467));Object.keys(gr).forEach(function(Ct){var mn=gr[Ct];0<=jr.indexOf(mn)&&(rr[Ct]=mn)});var kr=Object.keys(rr);Ee.textureFormats=kr;var er=[];Object.keys(rr).forEach(function(Ct){er[rr[Ct]]=Ct});var Xr=[];Object.keys(nr).forEach(function(Ct){Xr[nr[Ct]]=Ct});var ir=[];Object.keys(Rn).forEach(function(Ct){ir[Rn[Ct]]=Ct});var Bn=[];Object.keys(Ln).forEach(function(Ct){Bn[Ln[Ct]]=Ct});var mr=[];Object.keys(In).forEach(function(Ct){mr[In[Ct]]=Ct});var zr=kr.reduce(function(Ct,mn){var pn=rr[mn];return Ct[pn]=6409===pn||6406===pn||6409===pn||6410===pn||6402===pn||34041===pn||Pe.ext_srgb&&(35904===pn||35906===pn)?pn:32855===pn||0<=mn.indexOf("rgba")?6408:6407,Ct},{}),br=[],Dr=[],di=0,ni={},pi=Ee.maxTextureUnits,qi=Array(pi).map(function(){return null});return Z(Qt.prototype,{bind:function(){this.bindCount+=1;var Ct=this.unit;if(0>Ct){for(var mn=0;mn<pi;++mn){var pn=qi[mn];if(pn){if(0<pn.bindCount)continue;pn.unit=-1}qi[mn]=this,Ct=mn;break}bt.profile&&Ke.maxTextureUnits<Ct+1&&(Ke.maxTextureUnits=Ct+1),this.unit=Ct,Ge.activeTexture(33984+Ct),Ge.bindTexture(this.target,this.texture)}return Ct},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Pn(this)}}),bt.profile&&(Ke.getTotalTextureSize=function(){var Ct=0;return Object.keys(ni).forEach(function(mn){Ct+=ni[mn].stats.size}),Ct}),{create2D:function(Ct,mn){function pn(Zn,fr){var Hn=Sn.texInfo;tn.call(Hn);var Dn=Ut();return"number"==typeof Zn?Yt(Dn,0|Zn,"number"==typeof fr?0|fr:0|Zn):Zn?(un(Hn,Zn),Ue(Dn,Zn)):Yt(Dn,1,1),Hn.genMipmaps&&(Dn.mipmask=(Dn.width<<1)-1),Sn.mipmask=Dn.mipmask,pt(Sn,Dn),Sn.internalformat=Dn.internalformat,pn.width=Dn.width,pn.height=Dn.height,yn(Sn),wt(Dn,3553),vn(Hn,3553),Mn(),Zt(Dn),bt.profile&&(Sn.stats.size=A(Sn.internalformat,Sn.type,Dn.width,Dn.height,Hn.genMipmaps,!1)),pn.format=er[Sn.internalformat],pn.type=Xr[Sn.type],pn.mag=ir[Hn.magFilter],pn.min=Bn[Hn.minFilter],pn.wrapS=mr[Hn.wrapS],pn.wrapT=mr[Hn.wrapT],pn}var Sn=new Qt(3553);return ni[Sn.id]=Sn,Ke.textureCount++,pn(Ct,mn),pn.subimage=function(Zn,fr,Hn,Dn){fr|=0,Hn|=0,Dn|=0;var Jn=Wt();return pt(Jn,Sn),Jn.width=0,Jn.height=0,Vt(Jn,Zn),Jn.width=Jn.width||(Sn.width>>Dn)-fr,Jn.height=Jn.height||(Sn.height>>Dn)-Hn,yn(Sn),mt(Jn,3553,fr,Hn,Dn),Mn(),Kt(Jn),pn},pn.resize=function(Zn,fr){var Hn=0|Zn,Dn=0|fr||Hn;if(Hn===Sn.width&&Dn===Sn.height)return pn;pn.width=Sn.width=Hn,pn.height=Sn.height=Dn,yn(Sn);for(var Jn=0;Sn.mipmask>>Jn;++Jn){var Nn=Hn>>Jn,Un=Dn>>Jn;if(!Nn||!Un)break;Ge.texImage2D(3553,Jn,Sn.format,Nn,Un,0,Sn.format,Sn.type,null)}return Mn(),bt.profile&&(Sn.stats.size=A(Sn.internalformat,Sn.type,Hn,Dn,!1,!1)),pn},pn._reglType="texture2d",pn._texture=Sn,bt.profile&&(pn.stats=Sn.stats),pn.destroy=function(){Sn.decRef()},pn},createCube:function(Ct,mn,pn,Sn,Zn,fr){function Hn(Nn,Un,sr,Wr,Vr,Zr){var Or,$r=Dn.texInfo;for(tn.call($r),Or=0;6>Or;++Or)Jn[Or]=Ut();if("number"!=typeof Nn&&Nn){if("object"==typeof Nn)if(Un)Ue(Jn[0],Nn),Ue(Jn[1],Un),Ue(Jn[2],sr),Ue(Jn[3],Wr),Ue(Jn[4],Vr),Ue(Jn[5],Zr);else if(un($r,Nn),St(Dn,Nn),"faces"in Nn)for(Nn=Nn.faces,Or=0;6>Or;++Or)pt(Jn[Or],Dn),Ue(Jn[Or],Nn[Or]);else for(Or=0;6>Or;++Or)Ue(Jn[Or],Nn)}else for(Nn=0|Nn||1,Or=0;6>Or;++Or)Yt(Jn[Or],Nn,Nn);for(pt(Dn,Jn[0]),Dn.mipmask=$r.genMipmaps?(Jn[0].width<<1)-1:Jn[0].mipmask,Dn.internalformat=Jn[0].internalformat,Hn.width=Jn[0].width,Hn.height=Jn[0].height,yn(Dn),Or=0;6>Or;++Or)wt(Jn[Or],34069+Or);for(vn($r,34067),Mn(),bt.profile&&(Dn.stats.size=A(Dn.internalformat,Dn.type,Hn.width,Hn.height,$r.genMipmaps,!0)),Hn.format=er[Dn.internalformat],Hn.type=Xr[Dn.type],Hn.mag=ir[$r.magFilter],Hn.min=Bn[$r.minFilter],Hn.wrapS=mr[$r.wrapS],Hn.wrapT=mr[$r.wrapT],Or=0;6>Or;++Or)Zt(Jn[Or]);return Hn}var Dn=new Qt(34067);ni[Dn.id]=Dn,Ke.cubeCount++;var Jn=Array(6);return Hn(Ct,mn,pn,Sn,Zn,fr),Hn.subimage=function(Nn,Un,sr,Wr,Vr){sr|=0,Wr|=0,Vr|=0;var Zr=Wt();return pt(Zr,Dn),Zr.width=0,Zr.height=0,Vt(Zr,Un),Zr.width=Zr.width||(Dn.width>>Vr)-sr,Zr.height=Zr.height||(Dn.height>>Vr)-Wr,yn(Dn),mt(Zr,34069+Nn,sr,Wr,Vr),Mn(),Kt(Zr),Hn},Hn.resize=function(Nn){if((Nn|=0)!==Dn.width){Hn.width=Dn.width=Nn,Hn.height=Dn.height=Nn,yn(Dn);for(var Un=0;6>Un;++Un)for(var sr=0;Dn.mipmask>>sr;++sr)Ge.texImage2D(34069+Un,sr,Dn.format,Nn>>sr,Nn>>sr,0,Dn.format,Dn.type,null);return Mn(),bt.profile&&(Dn.stats.size=A(Dn.internalformat,Dn.type,Hn.width,Hn.height,!1,!0)),Hn}},Hn._reglType="textureCube",Hn._texture=Dn,bt.profile&&(Hn.stats=Dn.stats),Hn.destroy=function(){Dn.decRef()},Hn},clear:function(){for(var Ct=0;Ct<pi;++Ct)Ge.activeTexture(33984+Ct),Ge.bindTexture(3553,null),qi[Ct]=null;pe(ni).forEach(Pn),Ke.cubeCount=0,Ke.textureCount=0},getTexture:function(Ct){return null},restore:function(){for(var Ct=0;Ct<pi;++Ct){var mn=qi[Ct];mn&&(mn.bindCount=0,mn.unit=-1,qi[Ct]=null)}pe(ni).forEach(function(pn){pn.texture=Ge.createTexture(),Ge.bindTexture(pn.target,pn.texture);for(var Sn=0;32>Sn;++Sn)if(0!=(pn.mipmask&1<<Sn))if(3553===pn.target)Ge.texImage2D(3553,Sn,pn.internalformat,pn.width>>Sn,pn.height>>Sn,0,pn.internalformat,pn.type,null);else for(var Zn=0;6>Zn;++Zn)Ge.texImage2D(34069+Zn,Sn,pn.internalformat,pn.width>>Sn,pn.height>>Sn,0,pn.internalformat,pn.type,null);vn(pn.texInfo,pn.target)})}}}(mt,Ue,vn,function(){Ln.procs.poll()},un,Yt,Ge),In=function(Ge,Pe,Ee,Ne,Ve){function Ke(Lt){this.id=St++,this.refCount=1,this.renderbuffer=Lt,this.format=32854,this.height=this.width=0,Ve.profile&&(this.stats={size:0})}function bt(Lt){var Vt=Lt.renderbuffer;Ge.bindRenderbuffer(36161,null),Ge.deleteRenderbuffer(Vt),Lt.renderbuffer=null,Lt.refCount=0,delete jt[Lt.id],Ne.renderbufferCount--}var gt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Pe.ext_srgb&&(gt.srgba=35907),Pe.ext_color_buffer_half_float&&(gt.rgba16f=34842,gt.rgb16f=34843),Pe.webgl_color_buffer_float&&(gt.rgba32f=34836);var pt=[];Object.keys(gt).forEach(function(Lt){pt[gt[Lt]]=Lt});var St=0,jt={};return Ke.prototype.decRef=function(){0>=--this.refCount&&bt(this)},Ve.profile&&(Ne.getTotalRenderbufferSize=function(){var Lt=0;return Object.keys(jt).forEach(function(Vt){Lt+=jt[Vt].stats.size}),Lt}),{create:function(Lt,Vt){function mt(Kt,rn){var Yt=0,Ue=0,wt=32854;if("object"==typeof Kt&&Kt?("shape"in Kt?(Yt=0|(Ue=Kt.shape)[0],Ue=0|Ue[1]):("radius"in Kt&&(Yt=Ue=0|Kt.radius),"width"in Kt&&(Yt=0|Kt.width),"height"in Kt&&(Ue=0|Kt.height)),"format"in Kt&&(wt=gt[Kt.format])):"number"==typeof Kt?(Yt=0|Kt,Ue="number"==typeof rn?0|rn:Yt):Kt||(Yt=Ue=1),Yt!==Wt.width||Ue!==Wt.height||wt!==Wt.format)return mt.width=Wt.width=Yt,mt.height=Wt.height=Ue,Wt.format=wt,Ge.bindRenderbuffer(36161,Wt.renderbuffer),Ge.renderbufferStorage(36161,wt,Yt,Ue),Ve.profile&&(Wt.stats.size=xt[Wt.format]*Wt.width*Wt.height),mt.format=pt[Wt.format],mt}var Wt=new Ke(Ge.createRenderbuffer());return jt[Wt.id]=Wt,Ne.renderbufferCount++,mt(Lt,Vt),mt.resize=function(Kt,rn){var Yt=0|Kt,Ue=0|rn||Yt;return Yt===Wt.width&&Ue===Wt.height||(mt.width=Wt.width=Yt,mt.height=Wt.height=Ue,Ge.bindRenderbuffer(36161,Wt.renderbuffer),Ge.renderbufferStorage(36161,Wt.format,Yt,Ue),Ve.profile&&(Wt.stats.size=xt[Wt.format]*Wt.width*Wt.height)),mt},mt._reglType="renderbuffer",mt._renderbuffer=Wt,Ve.profile&&(mt.stats=Wt.stats),mt.destroy=function(){Wt.decRef()},mt},clear:function(){pe(jt).forEach(bt)},restore:function(){pe(jt).forEach(function(Lt){Lt.renderbuffer=Ge.createRenderbuffer(),Ge.bindRenderbuffer(36161,Lt.renderbuffer),Ge.renderbufferStorage(36161,Lt.format,Lt.width,Lt.height)}),Ge.bindRenderbuffer(36161,null)}}}(mt,Ue,0,Yt,Ge),Rn=function(Ge,Pe,Ee,Ne,Ve,Ke){function bt(Qt,yn,Mn){this.target=Qt,this.texture=yn,this.renderbuffer=Mn;var Pn=Qt=0;yn?(Qt=yn.width,Pn=yn.height):Mn&&(Qt=Mn.width,Pn=Mn.height),this.width=Qt,this.height=Pn}function gt(Qt){Qt&&(Qt.texture&&Qt.texture._texture.decRef(),Qt.renderbuffer&&Qt.renderbuffer._renderbuffer.decRef())}function pt(Qt,yn,Mn){Qt&&(Qt.texture?Qt.texture._texture.refCount+=1:Qt.renderbuffer._renderbuffer.refCount+=1)}function St(Qt,yn){yn&&(yn.texture?Ge.framebufferTexture2D(36160,Qt,yn.target,yn.texture._texture.texture,0):Ge.framebufferRenderbuffer(36160,Qt,36161,yn.renderbuffer._renderbuffer.renderbuffer))}function jt(Qt){var yn=3553,Mn=null,Pn=null,sn=Qt;return"object"==typeof Qt&&(sn=Qt.data,"target"in Qt&&(yn=0|Qt.target)),"texture2d"===(Qt=sn._reglType)||"textureCube"===Qt?Mn=sn:"renderbuffer"===Qt&&(Pn=sn,yn=36161),new bt(yn,Mn,Pn)}function Lt(Qt,yn,Mn,Pn,sn){return Mn?((Qt=Ne.create2D({width:Qt,height:yn,format:Pn,type:sn}))._texture.refCount=0,new bt(3553,Qt,null)):((Qt=Ve.create({width:Qt,height:yn,format:Pn}))._renderbuffer.refCount=0,new bt(36161,null,Qt))}function Vt(Qt){return Qt&&(Qt.texture||Qt.renderbuffer)}function mt(Qt,yn,Mn){Qt&&(Qt.texture?Qt.texture.resize(yn,Mn):Qt.renderbuffer&&Qt.renderbuffer.resize(yn,Mn),Qt.width=yn,Qt.height=Mn)}function Wt(){this.id=un++,vn[this.id]=this,this.framebuffer=Ge.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Kt(Qt){Qt.colorAttachments.forEach(gt),gt(Qt.depthAttachment),gt(Qt.stencilAttachment),gt(Qt.depthStencilAttachment)}function rn(Qt){Ge.deleteFramebuffer(Qt.framebuffer),Qt.framebuffer=null,Ke.framebufferCount--,delete vn[Qt.id]}function Yt(Qt){var yn;Ge.bindFramebuffer(36160,Qt.framebuffer);var Mn=Qt.colorAttachments;for(yn=0;yn<Mn.length;++yn)St(36064+yn,Mn[yn]);for(yn=Mn.length;yn<Ee.maxColorAttachments;++yn)Ge.framebufferTexture2D(36160,36064+yn,3553,null,0);Ge.framebufferTexture2D(36160,33306,3553,null,0),Ge.framebufferTexture2D(36160,36096,3553,null,0),Ge.framebufferTexture2D(36160,36128,3553,null,0),St(36096,Qt.depthAttachment),St(36128,Qt.stencilAttachment),St(33306,Qt.depthStencilAttachment),Ge.checkFramebufferStatus(36160),Ge.isContextLost(),Ge.bindFramebuffer(36160,wt.next?wt.next.framebuffer:null),wt.cur=wt.next,Ge.getError()}function Ue(Qt,yn){function Mn(sn,In){var Rn,Ln=0,qn=0,nr=!0,rr=!0;Rn=null;var gr=!0,jr="rgba",kr="uint8",er=1,Xr=null,ir=null,Bn=null,mr=!1;"number"==typeof sn?(Ln=0|sn,qn=0|In||Ln):sn?("shape"in sn?(Ln=(qn=sn.shape)[0],qn=qn[1]):("radius"in sn&&(Ln=qn=sn.radius),"width"in sn&&(Ln=sn.width),"height"in sn&&(qn=sn.height)),("color"in sn||"colors"in sn)&&(Rn=sn.color||sn.colors,Array.isArray(Rn)),Rn||("colorCount"in sn&&(er=0|sn.colorCount),"colorTexture"in sn&&(gr=!!sn.colorTexture,jr="rgba4"),"colorType"in sn&&(kr=sn.colorType,!gr)&&("half float"===kr||"float16"===kr?jr="rgba16f":"float"!==kr&&"float32"!==kr||(jr="rgba32f")),"colorFormat"in sn&&(0<=Ut.indexOf(jr=sn.colorFormat)?gr=!0:0<=Zt.indexOf(jr)&&(gr=!1))),("depthTexture"in sn||"depthStencilTexture"in sn)&&(mr=!(!sn.depthTexture&&!sn.depthStencilTexture)),"depth"in sn&&("boolean"==typeof sn.depth?nr=sn.depth:(Xr=sn.depth,rr=!1)),"stencil"in sn&&("boolean"==typeof sn.stencil?rr=sn.stencil:(ir=sn.stencil,nr=!1)),"depthStencil"in sn&&("boolean"==typeof sn.depthStencil?nr=rr=sn.depthStencil:(Bn=sn.depthStencil,rr=nr=!1))):Ln=qn=1;var zr=null,br=null,Dr=null,di=null;if(Array.isArray(Rn))zr=Rn.map(jt);else if(Rn)zr=[jt(Rn)];else for(zr=Array(er),Rn=0;Rn<er;++Rn)zr[Rn]=Lt(Ln,qn,gr,jr,kr);for(Ln=Ln||zr[0].width,qn=qn||zr[0].height,Xr?br=jt(Xr):nr&&!rr&&(br=Lt(Ln,qn,mr,"depth","uint32")),ir?Dr=jt(ir):rr&&!nr&&(Dr=Lt(Ln,qn,!1,"stencil","uint8")),Bn?di=jt(Bn):!Xr&&!ir&&rr&&nr&&(di=Lt(Ln,qn,mr,"depth stencil","depth stencil")),nr=null,Rn=0;Rn<zr.length;++Rn)pt(zr[Rn]),zr[Rn]&&zr[Rn].texture&&(rr=At[zr[Rn].texture._texture.format]*ht[zr[Rn].texture._texture.type],null===nr&&(nr=rr));return pt(br),pt(Dr),pt(di),Kt(Pn),Pn.width=Ln,Pn.height=qn,Pn.colorAttachments=zr,Pn.depthAttachment=br,Pn.stencilAttachment=Dr,Pn.depthStencilAttachment=di,Mn.color=zr.map(Vt),Mn.depth=Vt(br),Mn.stencil=Vt(Dr),Mn.depthStencil=Vt(di),Mn.width=Pn.width,Mn.height=Pn.height,Yt(Pn),Mn}var Pn=new Wt;return Ke.framebufferCount++,Mn(Qt,yn),Z(Mn,{resize:function(sn,In){var Rn=Math.max(0|sn,1),Ln=Math.max(0|In||Rn,1);if(Rn===Pn.width&&Ln===Pn.height)return Mn;for(var qn=Pn.colorAttachments,nr=0;nr<qn.length;++nr)mt(qn[nr],Rn,Ln);return mt(Pn.depthAttachment,Rn,Ln),mt(Pn.stencilAttachment,Rn,Ln),mt(Pn.depthStencilAttachment,Rn,Ln),Pn.width=Mn.width=Rn,Pn.height=Mn.height=Ln,Yt(Pn),Mn},_reglType:"framebuffer",_framebuffer:Pn,destroy:function(){rn(Pn),Kt(Pn)},use:function(sn){wt.setFBO({framebuffer:Mn},sn)}})}var wt={cur:null,next:null,dirty:!1,setFBO:null},Ut=["rgba"],Zt=["rgba4","rgb565","rgb5 a1"];Pe.ext_srgb&&Zt.push("srgba"),Pe.ext_color_buffer_half_float&&Zt.push("rgba16f","rgb16f"),Pe.webgl_color_buffer_float&&Zt.push("rgba32f");var tn=["uint8"];Pe.oes_texture_half_float&&tn.push("half float","float16"),Pe.oes_texture_float&&tn.push("float","float32");var un=0,vn={};return Z(wt,{getFramebuffer:function(Qt){return"function"==typeof Qt&&"framebuffer"===Qt._reglType&&(Qt=Qt._framebuffer)instanceof Wt?Qt:null},create:Ue,createCube:function(Qt){function yn(Pn){var sn,In={color:null},Rn=0,Ln=null;sn="rgba";var qn="uint8",nr=1;if("number"==typeof Pn?Rn=0|Pn:Pn?("shape"in Pn?Rn=Pn.shape[0]:("radius"in Pn&&(Rn=0|Pn.radius),"width"in Pn?Rn=0|Pn.width:"height"in Pn&&(Rn=0|Pn.height)),("color"in Pn||"colors"in Pn)&&(Ln=Pn.color||Pn.colors,Array.isArray(Ln)),Ln||("colorCount"in Pn&&(nr=0|Pn.colorCount),"colorType"in Pn&&(qn=Pn.colorType),"colorFormat"in Pn&&(sn=Pn.colorFormat)),"depth"in Pn&&(In.depth=Pn.depth),"stencil"in Pn&&(In.stencil=Pn.stencil),"depthStencil"in Pn&&(In.depthStencil=Pn.depthStencil)):Rn=1,Ln)if(Array.isArray(Ln))for(Pn=[],sn=0;sn<Ln.length;++sn)Pn[sn]=Ln[sn];else Pn=[Ln];else for(Pn=Array(nr),Ln={radius:Rn,format:sn,type:qn},sn=0;sn<nr;++sn)Pn[sn]=Ne.createCube(Ln);for(In.color=Array(Pn.length),sn=0;sn<Pn.length;++sn)nr=Pn[sn],Rn=Rn||nr.width,In.color[sn]={target:34069,data:Pn[sn]};for(sn=0;6>sn;++sn){for(nr=0;nr<Pn.length;++nr)In.color[nr].target=34069+sn;0<sn&&(In.depth=Mn[0].depth,In.stencil=Mn[0].stencil,In.depthStencil=Mn[0].depthStencil),Mn[sn]?Mn[sn](In):Mn[sn]=Ue(In)}return Z(yn,{width:Rn,height:Rn,color:Pn})}var Mn=Array(6);return yn(Qt),Z(yn,{faces:Mn,resize:function(Pn){var sn=0|Pn;if(sn===yn.width)return yn;var In=yn.color;for(Pn=0;Pn<In.length;++Pn)In[Pn].resize(sn);for(Pn=0;6>Pn;++Pn)Mn[Pn].resize(sn);return yn.width=yn.height=sn,yn},_reglType:"framebufferCube",destroy:function(){Mn.forEach(function(Pn){Pn.destroy()})}})},clear:function(){pe(vn).forEach(rn)},restore:function(){wt.cur=null,wt.next=null,wt.dirty=!0,pe(vn).forEach(function(Qt){Qt.framebuffer=Ge.createFramebuffer(),Yt(Qt)})}})}(mt,Ue,vn,sn,In,Yt),Ln=V(mt,rn,Ue,vn,Qt,Mn,0,Rn,{},yn,Pn,{elements:null,primitive:4,count:-1,offset:0,instances:-1},un,wt,Ge),qn=(rn=function(Ge,Pe,Ee,Ne,Ve,Ke,bt){function gt(pt){var St;St=null===Pe.next?5121:Pe.next.colorAttachments[0].texture._texture.type;var jt=0,Lt=0,Vt=Ne.framebufferWidth,mt=Ne.framebufferHeight,Wt=null;return be(pt)?Wt=pt:pt&&(jt=0|pt.x,Lt=0|pt.y,Vt=0|(pt.width||Ne.framebufferWidth-jt),mt=0|(pt.height||Ne.framebufferHeight-Lt),Wt=pt.data||null),Ee(),pt=Vt*mt*4,Wt||(5121===St?Wt=new Uint8Array(pt):5126===St&&(Wt=Wt||new Float32Array(pt))),Ge.pixelStorei(3333,4),Ge.readPixels(jt,Lt,Vt,mt,6408,St,Wt),Wt}return function(pt){return pt&&"framebuffer"in pt?(Pe.setFBO({framebuffer:(St=pt).framebuffer},function(){jt=gt(St)}),jt):gt(pt);var St,jt}}(mt,Rn,Ln.procs.poll,un),Ln.next),nr=mt.canvas,rr=[],gr=[],jr=[],kr=[Ge.onDestroy],er=null;nr&&(nr.addEventListener("webglcontextlost",Ve,!1),nr.addEventListener("webglcontextrestored",Ke,!1));var Xr=Rn.setFBO=bt({framebuffer:ie.define.call(null,1,"framebuffer")});return Lt(),Wt=Z(bt,{clear:function(ir){if("framebuffer"in ir)if(ir.framebuffer&&"framebufferCube"===ir.framebuffer_reglType)for(var Bn=0;6>Bn;++Bn)Xr(Z({framebuffer:ir.framebuffer.faces[Bn]},ir),gt);else Xr(ir,gt);else gt(0,ir)},prop:ie.define.bind(null,1),context:ie.define.bind(null,2),this:ie.define.bind(null,3),draw:bt({}),buffer:function(ir){return Qt.create(ir,34962,!1,!1)},elements:function(ir){return Mn.create(ir,!1)},texture:sn.create2D,cube:sn.createCube,renderbuffer:In.create,framebuffer:Rn.create,framebufferCube:Rn.createCube,vao:yn.createVAO,attributes:Wt,frame:pt,on:function(ir,Bn){var mr;switch(ir){case"frame":return pt(Bn);case"lost":mr=gr;break;case"restore":mr=jr;break;case"destroy":mr=kr}return mr.push(Bn),{cancel:function(){for(var zr=0;zr<mr.length;++zr)if(mr[zr]===Bn){mr[zr]=mr[mr.length-1],mr.pop();break}}}},limits:vn,hasExtension:function(ir){return 0<=vn.extensions.indexOf(ir.toLowerCase())},read:rn,destroy:function(){rr.length=0,Ne(),nr&&(nr.removeEventListener("webglcontextlost",Ve),nr.removeEventListener("webglcontextrestored",Ke)),Pn.clear(),Rn.clear(),In.clear(),sn.clear(),Mn.clear(),Qt.clear(),yn.clear(),wt&&wt.clear(),kr.forEach(function(ir){ir()})},_gl:mt,_refresh:Lt,poll:function(){jt(),wt&&wt.update()},now:Vt,stats:Yt}),Ge.onDone(null,Wt),Wt}},"object"==typeof X&&void 0!==G?G.exports=m():this.createREGL=m()},{}],541:[function(h,G,X){"use strict";var i,m="";G.exports=function(b,p){if("string"!=typeof b)throw new TypeError("expected a string");if(1===p)return b;if(2===p)return b+b;var r=b.length*p;if(i!==b||void 0===i)i=b,m="";else if(m.length>=r)return m.substr(0,r);for(;r>m.length&&p>1;)1&p&&(m+=b),p>>=1,b+=b;return m=(m+=b).substr(0,r)}},{}],542:[function(h,G,X){(function(i){(function(){G.exports=i.performance&&i.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],543:[function(h,G,X){"use strict";G.exports=function(i){for(var m=i.length,b=i[i.length-1],p=m,r=m-2;r>=0;--r){var u=b,c=i[r];(f=c-((b=u+c)-u))&&(i[--p]=b,b=f)}var l=0;for(r=p;r<m;++r){var f;(f=(c=b)-((b=(u=i[r])+c)-u))&&(i[l++]=f)}return i[l++]=b,i.length=l,i}},{}],544:[function(h,G,X){"use strict";var i=h("two-product"),m=h("robust-sum"),b=h("robust-scale"),p=h("robust-compress");function r(s,o){for(var d=new Array(s.length-1),g=1;g<s.length;++g)for(var y=d[g-1]=new Array(s.length-1),v=0,_=0;v<s.length;++v)v!==o&&(y[_++]=s[g][v]);return d}function u(s){for(var o=new Array(s),d=0;d<s;++d){o[d]=new Array(s);for(var g=0;g<s;++g)o[d][g]=["m[",d,"][",g,"]"].join("")}return o}function c(s){if(2===s.length)return["sum(prod(",s[0][0],",",s[1][1],"),prod(-",s[0][1],",",s[1][0],"))"].join("");for(var o=[],d=0;d<s.length;++d)o.push(["scale(",c(r(s,d)),",",(g=d,1&g?"-":""),s[0][d],")"].join(""));return function y(v){if(1===v.length)return v[0];if(2===v.length)return["sum(",v[0],",",v[1],")"].join("");var _=v.length>>1;return["sum(",y(v.slice(0,_)),",",y(v.slice(_)),")"].join("")}(o);var g}function l(s){return new Function("sum","scale","prod","compress",["function robustDeterminant",s,"(m){return compress(",c(u(s)),")};return robustDeterminant",s].join(""))(m,b,i,p)}var f=[function(){return[0]},function(s){return[s[0][0]]}];!function(){for(;f.length<6;)f.push(l(f.length));for(var s=[],o=["function robustDeterminant(m){switch(m.length){"],d=0;d<6;++d)s.push("det"+d),o.push("case ",d,":return det",d,"(m);");o.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),s.push("CACHE","gen",o.join(""));var g=Function.apply(void 0,s);for(G.exports=g.apply(void 0,f.concat([f,l])),d=0;d<f.length;++d)G.exports[d]=f[d]}()},{"robust-compress":543,"robust-scale":550,"robust-sum":553,"two-product":604}],545:[function(h,G,X){"use strict";var i=h("two-product"),m=h("robust-sum");G.exports=function(b,p){for(var r=i(b[0],p[0]),u=1;u<b.length;++u)r=m(r,i(b[u],p[u]));return r}},{"robust-sum":553,"two-product":604}],546:[function(h,G,X){"use strict";var i=h("two-product"),m=h("robust-sum"),b=h("robust-subtract"),p=h("robust-scale");function r(g,y){for(var v=new Array(g.length-1),_=1;_<g.length;++_)for(var w=v[_-1]=new Array(g.length-1),x=0,E=0;x<g.length;++x)x!==y&&(w[E++]=g[_][x]);return v}function u(g){if(1===g.length)return g[0];if(2===g.length)return["sum(",g[0],",",g[1],")"].join("");var y=g.length>>1;return["sum(",u(g.slice(0,y)),",",u(g.slice(y)),")"].join("")}function c(g,y){if("m"===g.charAt(0)){if("w"===y.charAt(0)){var v=g.split("[");return["w",y.substr(1),"m",v[0].substr(1)].join("")}return["prod(",g,",",y,")"].join("")}return c(y,g)}function l(g){if(2===g.length)return[["diff(",c(g[0][0],g[1][1]),",",c(g[1][0],g[0][1]),")"].join("")];for(var y=[],v=0;v<g.length;++v)y.push(["scale(",u(l(r(g,v))),",",(_=v,!0&_?"-":""),g[0][v],")"].join(""));return y;var _}function f(g,y){for(var v=[],_=0;_<y-2;++_)v.push(["prod(m",g,"[",_,"],m",g,"[",_,"])"].join(""));return u(v)}function s(g){for(var y=[],v=[],_=function(A){for(var I=new Array(A),D=0;D<A;++D){I[D]=new Array(A);for(var R=0;R<A;++R)I[D][R]=["m",R,"[",A-D-2,"]"].join("")}return I}(g),w=0;w<g;++w)_[0][w]="1",_[g-1][w]="w"+w;for(w=0;w<g;++w)0==(1&w)?y.push.apply(y,l(r(_,w))):v.push.apply(v,l(r(_,w)));var x=u(y),E=u(v),k="exactInSphere"+g,C=[];for(w=0;w<g;++w)C.push("m"+w);var L=["function ",k,"(",C.join(),"){"];for(w=0;w<g;++w){L.push("var w",w,"=",f(w,g),";");for(var P=0;P<g;++P)P!==w&&L.push("var w",w,"m",P,"=scale(w",w,",m",P,"[0]);")}return L.push("var p=",x,",n=",E,",d=diff(p,n);return d[d.length-1];}return ",k),new Function("sum","diff","prod","scale",L.join(""))(m,b,i,p)}var o=[function(){return 0},function(){return 0},function(){return 0}];function d(g){var y=o[g.length];return y||(y=o[g.length]=s(g.length)),y.apply(void 0,g)}!function(){for(;o.length<=6;)o.push(s(o.length));for(var g=[],y=["slow"],v=0;v<=6;++v)g.push("a"+v),y.push("o"+v);var _=["function testInSphere(",g.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(v=2;v<=6;++v)_.push("case ",v,":return o",v,"(",g.slice(0,v).join(),");");_.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),y.push(_.join(""));var w=Function.apply(void 0,y);for(G.exports=w.apply(void 0,[d].concat(o)),v=0;v<=6;++v)G.exports[v]=o[v]}()},{"robust-scale":550,"robust-subtract":552,"robust-sum":553,"two-product":604}],547:[function(h,G,X){"use strict";var i=h("robust-determinant");function m(p){for(var r="robustLinearSolve"+p+"d",u=["function ",r,"(A,b){return ["],c=0;c<p;++c){u.push("det([");for(var l=0;l<p;++l){l>0&&u.push(","),u.push("[");for(var f=0;f<p;++f)f>0&&u.push(","),f===c?u.push("+b[",l,"]"):u.push("+A[",l,"][",f,"]");u.push("]")}u.push("]),")}return u.push("det(A)]}return ",r),new Function("det",u.join(""))(p<6?i[p]:i)}var b=[function(){return[0]},function(p,r){return[[r[0]],[p[0][0]]]}];!function(){for(;b.length<6;)b.push(m(b.length));for(var p=[],r=["function dispatchLinearSolve(A,b){switch(A.length){"],u=0;u<6;++u)p.push("s"+u),r.push("case ",u,":return s",u,"(A,b);");r.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),p.push("CACHE","g",r.join(""));var c=Function.apply(void 0,p);for(G.exports=c.apply(void 0,b.concat([b,m])),u=0;u<6;++u)G.exports[u]=b[u]}()},{"robust-determinant":544}],548:[function(h,G,X){"use strict";var i=h("two-product"),m=h("robust-sum"),b=h("robust-scale"),p=h("robust-subtract");function r(g,y){for(var v=new Array(g.length-1),_=1;_<g.length;++_)for(var w=v[_-1]=new Array(g.length-1),x=0,E=0;x<g.length;++x)x!==y&&(w[E++]=g[_][x]);return v}function u(g){if(1===g.length)return g[0];if(2===g.length)return["sum(",g[0],",",g[1],")"].join("");var y=g.length>>1;return["sum(",u(g.slice(0,y)),",",u(g.slice(y)),")"].join("")}function c(g){if(2===g.length)return[["sum(prod(",g[0][0],",",g[1][1],"),prod(-",g[0][1],",",g[1][0],"))"].join("")];for(var y=[],v=0;v<g.length;++v)y.push(["scale(",u(c(r(g,v))),",",(_=v,1&_?"-":""),g[0][v],")"].join(""));return y;var _}function l(g){for(var y=[],v=[],_=function(P){for(var A=new Array(P),I=0;I<P;++I){A[I]=new Array(P);for(var D=0;D<P;++D)A[I][D]=["m",D,"[",P-I-1,"]"].join("")}return A}(g),w=[],x=0;x<g;++x)0==(1&x)?y.push.apply(y,c(r(_,x))):v.push.apply(v,c(r(_,x))),w.push("m"+x);var E=u(y),k=u(v),C="orientation"+g+"Exact",L=["function ",C,"(",w.join(),"){var p=",E,",n=",k,",d=sub(p,n);return d[d.length-1];};return ",C].join("");return new Function("sum","prod","scale","sub",L)(m,i,b,p)}var f=l(3),s=l(4),o=[function(){return 0},function(){return 0},function(g,y){return y[0]-g[0]},function(g,y,v){var _,w=(g[1]-v[1])*(y[0]-v[0]),x=(g[0]-v[0])*(y[1]-v[1]),E=w-x;if(w>0){if(x<=0)return E;_=w+x}else{if(!(w<0)||x>=0)return E;_=-(w+x)}var k=33306690738754716e-32*_;return E>=k||E<=-k?E:f(g,y,v)},function(g,y,v,_){var w=g[0]-_[0],x=y[0]-_[0],E=v[0]-_[0],k=g[1]-_[1],C=y[1]-_[1],L=v[1]-_[1],P=g[2]-_[2],A=y[2]-_[2],I=v[2]-_[2],D=x*L,R=E*C,S=E*k,N=w*L,B=w*C,H=x*k,Y=P*(D-R)+A*(S-N)+I*(B-H),Q=7771561172376103e-31*((Math.abs(D)+Math.abs(R))*Math.abs(P)+(Math.abs(S)+Math.abs(N))*Math.abs(A)+(Math.abs(B)+Math.abs(H))*Math.abs(I));return Y>Q||-Y>Q?Y:s(g,y,v,_)}];function d(g){var y=o[g.length];return y||(y=o[g.length]=l(g.length)),y.apply(void 0,g)}!function(){for(;o.length<=5;)o.push(l(o.length));for(var g=[],y=["slow"],v=0;v<=5;++v)g.push("a"+v),y.push("o"+v);var _=["function getOrientation(",g.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(v=2;v<=5;++v)_.push("case ",v,":return o",v,"(",g.slice(0,v).join(),");");_.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),y.push(_.join(""));var w=Function.apply(void 0,y);for(G.exports=w.apply(void 0,[d].concat(o)),v=0;v<=5;++v)G.exports[v]=o[v]}()},{"robust-scale":550,"robust-subtract":552,"robust-sum":553,"two-product":604}],549:[function(h,G,X){"use strict";var i=h("robust-sum"),m=h("robust-scale");G.exports=function(b,p){if(1===b.length)return m(p,b[0]);if(1===p.length)return m(b,p[0]);if(0===b.length||0===p.length)return[0];var r=[0];if(b.length<p.length)for(var u=0;u<b.length;++u)r=i(r,m(p,b[u]));else for(u=0;u<p.length;++u)r=i(r,m(b,p[u]));return r}},{"robust-scale":550,"robust-sum":553}],550:[function(h,G,X){"use strict";var i=h("two-product"),m=h("two-sum");G.exports=function(b,p){var r=b.length;if(1===r){var u=i(b[0],p);return u[0]?u:[u[1]]}var c=new Array(2*r),l=[.1,.1],f=[.1,.1],s=0;i(b[0],p,l),l[0]&&(c[s++]=l[0]);for(var o=1;o<r;++o){i(b[o],p,f),m(l[1],f[0],l),l[0]&&(c[s++]=l[0]);var g=f[1],y=l[1],v=g+y,_=y-(v-g);l[1]=v,_&&(c[s++]=_)}return l[1]&&(c[s++]=l[1]),0===s&&(c[s++]=0),c.length=s,c}},{"two-product":604,"two-sum":605}],551:[function(h,G,X){"use strict";G.exports=function(m,b,p,r){var u=i(m,p,r),c=i(b,p,r);if(u>0&&c>0||u<0&&c<0)return!1;var l=i(p,m,b),f=i(r,m,b);return!(l>0&&f>0||l<0&&f<0)&&(0!==u||0!==c||0!==l||0!==f||function(s,o,d,g){for(var y=0;y<2;++y){var v=s[y],_=o[y],w=Math.min(v,_),x=Math.max(v,_),E=d[y],k=g[y],C=Math.min(E,k);if(Math.max(E,k)<w||x<C)return!1}return!0}(m,b,p,r))};var i=h("robust-orientation")[3]},{"robust-orientation":548}],552:[function(h,G,X){"use strict";G.exports=function(i,m){var P,A,I,D,R,b=0|i.length,p=0|m.length;if(1===b&&1===p)return(R=(P=i[0])-((I=P+(A=-m[0]))-(D=I-P))+(A-D))?[R,I]:[I];var r,u,c=new Array(b+p),l=0,f=0,s=0,o=Math.abs,d=i[f],g=o(d),y=-m[s],v=o(y);g<v?(u=d,(f+=1)<b&&(g=o(d=i[f]))):(u=y,(s+=1)<p&&(v=o(y=-m[s]))),f<b&&g<v||s>=p?(r=d,(f+=1)<b&&(g=o(d=i[f]))):(r=y,(s+=1)<p&&(v=o(y=-m[s])));for(var _,w,x=r+u,E=x-r,k=u-E,C=k,L=x;f<b&&s<p;)g<v?(r=d,(f+=1)<b&&(g=o(d=i[f]))):(r=y,(s+=1)<p&&(v=o(y=-m[s]))),(k=(u=C)-(E=(x=r+u)-r))&&(c[l++]=k),C=L-((_=L+x)-(w=_-L))+(x-w),L=_;for(;f<b;)(k=(u=C)-(E=(x=(r=d)+u)-r))&&(c[l++]=k),C=L-((_=L+x)-(w=_-L))+(x-w),L=_,(f+=1)<b&&(d=i[f]);for(;s<p;)(k=(u=C)-(E=(x=(r=y)+u)-r))&&(c[l++]=k),C=L-((_=L+x)-(w=_-L))+(x-w),L=_,(s+=1)<p&&(y=-m[s]);return C&&(c[l++]=C),L&&(c[l++]=L),l||(c[l++]=0),c.length=l,c}},{}],553:[function(h,G,X){"use strict";G.exports=function(i,m){var P,A,I,D,R,b=0|i.length,p=0|m.length;if(1===b&&1===p)return(R=(P=i[0])-((I=P+(A=m[0]))-(D=I-P))+(A-D))?[R,I]:[I];var r,u,c=new Array(b+p),l=0,f=0,s=0,o=Math.abs,d=i[f],g=o(d),y=m[s],v=o(y);g<v?(u=d,(f+=1)<b&&(g=o(d=i[f]))):(u=y,(s+=1)<p&&(v=o(y=m[s]))),f<b&&g<v||s>=p?(r=d,(f+=1)<b&&(g=o(d=i[f]))):(r=y,(s+=1)<p&&(v=o(y=m[s])));for(var _,w,x=r+u,E=x-r,k=u-E,C=k,L=x;f<b&&s<p;)g<v?(r=d,(f+=1)<b&&(g=o(d=i[f]))):(r=y,(s+=1)<p&&(v=o(y=m[s]))),(k=(u=C)-(E=(x=r+u)-r))&&(c[l++]=k),C=L-((_=L+x)-(w=_-L))+(x-w),L=_;for(;f<b;)(k=(u=C)-(E=(x=(r=d)+u)-r))&&(c[l++]=k),C=L-((_=L+x)-(w=_-L))+(x-w),L=_,(f+=1)<b&&(d=i[f]);for(;s<p;)(k=(u=C)-(E=(x=(r=y)+u)-r))&&(c[l++]=k),C=L-((_=L+x)-(w=_-L))+(x-w),L=_,(s+=1)<p&&(y=m[s]);return C&&(c[l++]=C),L&&(c[l++]=L),l||(c[l++]=0),c.length=l,c}},{}],554:[function(h,G,X){var i=h("buffer"),m=i.Buffer;function b(r,u){for(var c in r)u[c]=r[c]}function p(r,u,c){return m(r,u,c)}m.from&&m.alloc&&m.allocUnsafe&&m.allocUnsafeSlow?G.exports=i:(b(i,X),X.Buffer=p),p.prototype=Object.create(m.prototype),b(m,p),p.from=function(r,u,c){if("number"==typeof r)throw new TypeError("Argument must not be a number");return m(r,u,c)},p.alloc=function(r,u,c){if("number"!=typeof r)throw new TypeError("Argument must be a number");var l=m(r);return void 0!==u?"string"==typeof c?l.fill(u,c):l.fill(u):l.fill(0),l},p.allocUnsafe=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return m(r)},p.allocUnsafeSlow=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return i.SlowBuffer(r)}},{buffer:117}],555:[function(h,G,X){"use strict";G.exports=function(i){return i<0?-1:i>0?1:0}},{}],556:[function(h,G,X){"use strict";G.exports=function(b){return m(i(b))};var i=h("boundary-cells"),m=h("reduce-simplicial-complex")},{"boundary-cells":107,"reduce-simplicial-complex":535}],557:[function(h,G,X){"use strict";G.exports=function(r,u,c,l){if(c=c||0,void 0===l&&(l=function(_){for(var w=_.length,x=0,E=0;E<w;++E)x=0|Math.max(x,_[E].length);return x-1}(r)),0===r.length||l<1)return{cells:[],vertexIds:[],vertexWeights:[]};var f=function(_,w){for(var x=_.length,E=m.mallocUint8(x),k=0;k<x;++k)E[k]=_[k]<w|0;return E}(u,+c),s=function(_,w){for(var x=_.length,k=m.mallocUint32(2*(w*(w+1)/2*x|0)),C=0,L=0;L<x;++L)for(var P=_[L],A=(w=P.length,0);A<w;++A)for(var I=0;I<A;++I){var D=P[I],R=P[A];k[C++]=0|Math.min(D,R),k[C++]=0|Math.max(D,R)}b(i(k,[C/2|0,2]));var S=2;for(L=2;L<C;L+=2)k[L-2]===k[L]&&k[L-1]===k[L+1]||(k[S++]=k[L],k[S++]=k[L+1]);return i(k,[S/2|0,2])}(r,l),o=function(_,w,x,E){for(var k=_.data,C=_.shape[0],L=m.mallocDouble(C),P=0,A=0;A<C;++A){var I=k[2*A],D=k[2*A+1];if(x[I]!==x[D]){var R=w[I],S=w[D];k[2*P]=I,k[2*P+1]=D,L[P++]=(S-E)/(S-R)}}return _.shape[0]=P,i(L,[P])}(s,u,f,+c),d=function(_,w){var x=m.mallocInt32(2*w),E=_.shape[0],k=_.data;x[0]=0;for(var C=0,L=0;L<E;++L){var P=k[2*L];if(P!==C){for(x[2*C+1]=L;++C<P;)x[2*C]=L,x[2*C+1]=L;x[2*C]=L}}for(x[2*C+1]=E;++C<w;)x[2*C]=x[2*C+1]=E;return x}(s,0|u.length),g=p(l)(r,s.data,d,f),y=function(_){for(var w=0|_.shape[0],x=_.data,E=new Array(w),k=0;k<w;++k)E[k]=[x[2*k],x[2*k+1]];return E}(s),v=[].slice.call(o.data,0,o.shape[0]);return m.free(f),m.free(s.data),m.free(o.data),m.free(d),{cells:g,vertexIds:y,vertexWeights:v}};var i=h("ndarray"),m=h("typedarray-pool"),b=h("ndarray-sort"),p=h("./lib/codegen")},{"./lib/codegen":558,ndarray:483,"ndarray-sort":482,"typedarray-pool":617}],558:[function(h,G,X){"use strict";G.exports=function(p){var r=b[p];return r||(r=b[p]=function(u){var c=0,l=new Array(u+1);l[0]=[[]];for(var f=1;f<=u;++f)for(var s=l[f]=m(f),o=0;o<s.length;++o)c=Math.max(c,s[f].length);var d=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",u,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"];function g(v){if(!(v.length<=0)){d.push("R.push(");for(var _=0;_<v.length;++_){var w=v[_];_>0&&d.push(","),d.push("[");for(var x=0;x<w.length;++x){var E=w[x];x>0&&d.push(","),d.push("B(C,E,c[",E[0],"],c[",E[1],"])")}d.push("]")}d.push(");")}}for(f=u+1;f>1;--f){f<u+1&&d.push("else "),d.push("if(l===",f,"){");var y=[];for(o=0;o<f;++o)y.push("(S[c["+o+"]]<<"+o+")");for(d.push("var M=",y.join("+"),";if(M===0||M===",(1<<f)-1,"){continue}switch(M){"),s=l[f-1],o=0;o<s.length;++o)d.push("case ",o,":"),g(s[o]),d.push("break;");d.push("}}")}return d.push("}return R;};return getContour",u,"d"),new Function("pool",d.join(""))(i)}(p)),r};var i=h("typedarray-pool"),m=h("marching-simplex-table"),b={}},{"marching-simplex-table":462,"typedarray-pool":617}],559:[function(h,G,X){"use strict";var i=h("bit-twiddle"),m=h("union-find");function b(s,o){var d=s.length,g=s.length-o.length,y=Math.min;if(g)return g;switch(d){case 0:return 0;case 1:return s[0]-o[0];case 2:return(w=s[0]+s[1]-o[0]-o[1])||y(s[0],s[1])-y(o[0],o[1]);case 3:var v=s[0]+s[1],_=o[0]+o[1];if(w=v+s[2]-(_+o[2]))return w;var w,x=y(s[0],s[1]),E=y(o[0],o[1]);return(w=y(x,s[2])-y(E,o[2]))||y(x+s[2],v)-y(E+o[2],_);default:var k=s.slice(0);k.sort();var C=o.slice(0);C.sort();for(var L=0;L<d;++L)if(g=k[L]-C[L])return g;return 0}}function p(s,o){return b(s[0],o[0])}function r(s,o){if(o){for(var d=s.length,g=new Array(d),y=0;y<d;++y)g[y]=[s[y],o[y]];for(g.sort(p),y=0;y<d;++y)s[y]=g[y][0],o[y]=g[y][1];return s}return s.sort(b),s}function u(s){if(0===s.length)return[];for(var o=1,d=s.length,g=1;g<d;++g){var y=s[g];if(b(y,s[g-1])){if(g===o){o++;continue}s[o++]=y}}return s.length=o,s}function c(s,o){for(var d=0,g=s.length-1,y=-1;d<=g;){var v=d+g>>1,_=b(s[v],o);_<=0?(0===_&&(y=v),d=v+1):_>0&&(g=v-1)}return y}function l(s,o){for(var d=new Array(s.length),g=0,y=d.length;g<y;++g)d[g]=[];for(var v=[],_=(g=0,o.length);g<_;++g)for(var w=o[g],x=w.length,E=1,k=1<<x;E<k;++E){v.length=i.popCount(E);for(var C=0,L=0;L<x;++L)E&1<<L&&(v[C++]=w[L]);var P=c(s,v);if(!(P<0))for(;d[P++].push(g),!(P>=s.length||0!==b(s[P],v)););}return d}function f(s,o){if(o<0)return[];for(var d=[],g=(1<<o+1)-1,y=0;y<s.length;++y)for(var v=s[y],_=g;_<1<<v.length;_=i.nextCombination(_)){for(var w=new Array(o+1),x=0,E=0;E<v.length;++E)_&1<<E&&(w[x++]=v[E]);d.push(w)}return r(d)}X.dimension=function(s){for(var o=0,d=Math.max,g=0,y=s.length;g<y;++g)o=d(o,s[g].length);return o-1},X.countVertices=function(s){for(var o=-1,d=Math.max,g=0,y=s.length;g<y;++g)for(var v=s[g],_=0,w=v.length;_<w;++_)o=d(o,v[_]);return o+1},X.cloneCells=function(s){for(var o=new Array(s.length),d=0,g=s.length;d<g;++d)o[d]=s[d].slice(0);return o},X.compareCells=b,X.normalize=r,X.unique=u,X.findCell=c,X.incidence=l,X.dual=function(s,o){if(!o)return l(u(f(s,0)),s);for(var d=new Array(o),g=0;g<o;++g)d[g]=[];g=0;for(var y=s.length;g<y;++g)for(var v=s[g],_=0,w=v.length;_<w;++_)d[v[_]].push(g);return d},X.explode=function(s){for(var o=[],d=0,g=s.length;d<g;++d)for(var y=s[d],v=0|y.length,_=1,w=1<<v;_<w;++_){for(var x=[],E=0;E<v;++E)_>>>E&1&&x.push(y[E]);o.push(x)}return r(o)},X.skeleton=f,X.boundary=function(s){for(var o=[],d=0,g=s.length;d<g;++d)for(var y=s[d],v=0,_=y.length;v<_;++v){for(var w=new Array(y.length-1),x=0,E=0;x<_;++x)x!==v&&(w[E++]=y[x]);o.push(w)}return r(o)},X.connectedComponents=function(s,o){return o?function(d,g){for(var y=new m(g),v=0;v<d.length;++v)for(var _=d[v],w=0;w<_.length;++w)for(var x=w+1;x<_.length;++x)y.link(_[w],_[x]);var E=[],k=y.ranks;for(v=0;v<k.length;++v)k[v]=-1;for(v=0;v<d.length;++v){var C=y.find(d[v][0]);k[C]<0?(k[C]=E.length,E.push([d[v].slice(0)])):E[k[C]].push(d[v].slice(0))}return E}(s,o):function(d){for(var g=u(r(f(d,0))),y=new m(g.length),v=0;v<d.length;++v)for(var _=d[v],w=0;w<_.length;++w)for(var x=c(g,[_[w]]),E=w+1;E<_.length;++E)y.link(x,c(g,[_[E]]));var k=[],C=y.ranks;for(v=0;v<C.length;++v)C[v]=-1;for(v=0;v<d.length;++v){var L=y.find(c(g,[d[v][0]]));C[L]<0?(C[L]=k.length,k.push([d[v].slice(0)])):k[C[L]].push(d[v].slice(0))}return k}(s)}},{"bit-twiddle":104,"union-find":618}],560:[function(h,G,X){arguments[4][104][0].apply(X,arguments)},{dup:104}],561:[function(h,G,X){arguments[4][559][0].apply(X,arguments)},{"bit-twiddle":560,dup:559,"union-find":562}],562:[function(h,G,X){"use strict";function i(m){this.roots=new Array(m),this.ranks=new Array(m);for(var b=0;b<m;++b)this.roots[b]=b,this.ranks[b]=0}G.exports=i,i.prototype.length=function(){return this.roots.length},i.prototype.makeSet=function(){var m=this.roots.length;return this.roots.push(m),this.ranks.push(0),m},i.prototype.find=function(m){for(var b=this.roots;b[m]!==m;){var p=b[m];b[m]=b[p],m=p}return m},i.prototype.link=function(m,b){var p=this.find(m),r=this.find(b);if(p!==r){var u=this.ranks,c=this.roots,l=u[p],f=u[r];l<f?c[p]=r:f<l?c[r]=p:(c[r]=p,++u[p])}}},{}],563:[function(h,G,X){"use strict";G.exports=function(b,p,r){for(var u=p.length,c=b.length,l=new Array(u),f=new Array(u),s=new Array(u),o=new Array(u),d=0;d<u;++d)l[d]=f[d]=-1,s[d]=1/0,o[d]=!1;for(d=0;d<c;++d){var g=b[d];if(2!==g.length)throw new Error("Input must be a graph");var y=g[1],v=g[0];f[v]=-1!==f[v]?-2:y,l[y]=-1!==l[y]?-2:v}function _(Y){if(o[Y])return 1/0;var ne,ae,q=l[Y],re=f[Y];return q<0||re<0?1/0:(ne=p[q],ae=p[re],Math.abs(i(p[Y],ne,ae))/Math.sqrt(Math.pow(ne[0]-ae[0],2)+Math.pow(ne[1]-ae[1],2)))}function w(Y,Q){var ne=I[Y],ae=I[Q];I[Y]=ae,I[Q]=ne,D[ne]=Q,D[ae]=Y}function x(Y){return s[I[Y]]}function E(Y){return 1&Y?Y-1>>1:(Y>>1)-1}function k(Y){for(var Q=x(Y);;){var ne=Q,ae=2*Y+1,te=2*(Y+1),K=Y;if(ae<R){var q=x(ae);q<ne&&(K=ae,ne=q)}if(te<R&&x(te)<ne&&(K=te),K===Y)return Y;w(Y,K),Y=K}}function C(Y){for(var Q=x(Y);Y>0;){var ne=E(Y);if(!(ne>=0&&Q<x(ne)))return Y;w(Y,ne),Y=ne}}function L(){if(R>0){var Y=I[0];return w(0,R-1),R-=1,k(0),Y}return-1}function P(Y,Q){var ne=I[Y];return s[ne]===Q?Y:(s[ne]=-1/0,C(Y),L(),s[ne]=Q,C((R+=1)-1))}function A(Y){if(!o[Y]){o[Y]=!0;var Q=l[Y],ne=f[Y];l[ne]>=0&&(l[ne]=Q),f[Q]>=0&&(f[Q]=ne),D[Q]>=0&&P(D[Q],_(Q)),D[ne]>=0&&P(D[ne],_(ne))}}var I=[],D=new Array(u);for(d=0;d<u;++d)(s[d]=_(d))<1/0?(D[d]=I.length,I.push(d)):D[d]=-1;var R=I.length;for(d=R>>1;d>=0;--d)k(d);for(;;){var S=L();if(S<0||s[S]>r)break;A(S)}var N=[];for(d=0;d<u;++d)o[d]||(D[d]=N.length,N.push(p[d].slice()));function B(Y,Q){if(Y[Q]<0)return Q;var ne=Q,ae=Q;do{var te=Y[ae];if(!o[ae]||te<0||te===ae||(te=Y[ae=te],!o[ae]||te<0||te===ae))break;ae=te,ne=Y[ne]}while(ne!==ae);for(var K=Q;K!==ae;K=Y[K])Y[K]=ae;return ae}var H=[];return b.forEach(function(Y){var Q=B(l,Y[0]),ne=B(f,Y[1]);if(Q>=0&&ne>=0&&Q!==ne){var ae=D[Q],te=D[ne];ae!==te&&H.push([ae,te])}}),m.unique(m.normalize(H)),{positions:N,edges:H}};var i=h("robust-orientation"),m=h("simplicial-complex")},{"robust-orientation":548,"simplicial-complex":561}],564:[function(h,G,X){"use strict";G.exports=function(b,p){var r,u,c,l;if(p[0][0]<p[1][0])r=p[0],u=p[1];else{if(!(p[0][0]>p[1][0]))return m(p,b);r=p[1],u=p[0]}if(b[0][0]<b[1][0])c=b[0],l=b[1];else{if(!(b[0][0]>b[1][0]))return-m(b,p);c=b[1],l=b[0]}var f=i(r,u,l),s=i(r,u,c);if(f<0){if(s<=0)return f}else if(f>0){if(s>=0)return f}else if(s)return s;if(f=i(l,c,u),s=i(l,c,r),f<0){if(s<=0)return f}else if(f>0){if(s>=0)return f}else if(s)return s;return u[0]-l[0]};var i=h("robust-orientation");function m(b,p){var r,u,c,l;if(p[0][0]<p[1][0])r=p[0],u=p[1];else{if(!(p[0][0]>p[1][0])){var f=Math.min(b[0][1],b[1][1]),s=Math.max(b[0][1],b[1][1]),o=Math.min(p[0][1],p[1][1]),d=Math.max(p[0][1],p[1][1]);return s<o?s-o:f>d?f-d:s-d}r=p[1],u=p[0]}b[0][1]<b[1][1]?(c=b[0],l=b[1]):(c=b[1],l=b[0]);var g=i(u,r,c);return g||(g=i(u,r,l))||l-u}},{"robust-orientation":548}],565:[function(h,G,X){arguments[4][251][0].apply(X,arguments)},{dup:251}],566:[function(h,G,X){"use strict";G.exports=function(s){for(var o=s.length,d=2*o,g=new Array(d),y=0;y<o;++y){var v=s[y],_=v[0][0]<v[1][0];g[2*y]=new f(v[0][0],v,_,y),g[2*y+1]=new f(v[1][0],v,!_,y)}g.sort(function(A,I){var D=A.x-I.x;return D||(D=A.create-I.create)||Math.min(A.segment[0][1],A.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});var w=m(p),x=[],E=[],k=[];for(y=0;y<d;){for(var C=g[y].x,L=[];y<d;){var P=g[y];if(P.x!==C)break;y+=1,P.segment[0][0]===P.x&&P.segment[1][0]===P.x?P.create&&(P.segment[0][1]<P.segment[1][1]?(L.push(new l(P.segment[0][1],P.index,!0,!0)),L.push(new l(P.segment[1][1],P.index,!1,!1))):(L.push(new l(P.segment[1][1],P.index,!0,!1)),L.push(new l(P.segment[0][1],P.index,!1,!0)))):w=P.create?w.insert(P.segment,P.index):w.remove(P.segment)}x.push(w.root),E.push(C),k.push(L)}return new r(x,E,k)};var i=h("binary-search-bounds"),m=h("functional-red-black-tree"),b=h("robust-orientation"),p=h("./lib/order-segments");function r(s,o,d){this.slabs=s,this.coordinates=o,this.horizontal=d}function u(s,o){return s.y-o}function c(s,o){for(var d=null;s;){var g,y,v=s.key;v[0][0]<v[1][0]?(g=v[0],y=v[1]):(g=v[1],y=v[0]);var _=b(g,y,o);if(_<0)s=s.left;else if(_>0)if(o[0]!==v[1][0])d=s,s=s.right;else{if(w=c(s.right,o))return w;s=s.left}else{if(o[0]!==v[1][0])return s;var w;if(w=c(s.right,o))return w;s=s.left}}return d}function l(s,o,d,g){this.y=s,this.index=o,this.start=d,this.closed=g}function f(s,o,d,g){this.x=s,this.segment=o,this.create=d,this.index=g}r.prototype.castUp=function(s){var o=i.le(this.coordinates,s[0]);if(o<0)return-1;var d=c(this.slabs[o],s),g=-1;if(d&&(g=d.value),this.coordinates[o]===s[0]){var y=null;if(d&&(y=d.key),o>0){var v=c(this.slabs[o-1],s);v&&(y?p(v.key,y)>0&&(y=v.key,g=v.value):(g=v.value,y=v.key))}var _=this.horizontal[o];if(_.length>0){var w=i.ge(_,s[1],u);if(w<_.length){var x=_[w];if(s[1]===x.y){if(x.closed)return x.index;for(;w<_.length-1&&_[w+1].y===s[1];)if((x=_[w+=1]).closed)return x.index;if(x.y===s[1]&&!x.start){if((w+=1)>=_.length)return g;x=_[w]}}if(x.start)if(y){var E=b(y[0],y[1],[s[0],x.y]);y[0][0]>y[1][0]&&(E=-E),E>0&&(g=x.index)}else g=x.index;else x.y!==s[1]&&(g=x.index)}}}return g}},{"./lib/order-segments":564,"binary-search-bounds":565,"functional-red-black-tree":255,"robust-orientation":548}],567:[function(h,G,X){"use strict";var i=h("robust-dot-product"),m=h("robust-sum");function b(r,u){var c=m(i(r,u),[u[u.length-1]]);return c[c.length-1]}function p(r,u,c,l){var f=-u/(l-u);f<0?f=0:f>1&&(f=1);for(var s=1-f,o=r.length,d=new Array(o),g=0;g<o;++g)d[g]=f*r[g]+s*c[g];return d}G.exports=function(r,u){for(var c=[],l=[],f=b(r[r.length-1],u),s=r[r.length-1],o=r[0],d=0;d<r.length;++d,s=o){var g=b(o=r[d],u);if(f<0&&g>0||f>0&&g<0){var y=p(s,g,o,f);c.push(y),l.push(y.slice())}g<0?l.push(o.slice()):g>0?c.push(o.slice()):(c.push(o.slice()),l.push(o.slice())),f=g}return{positive:c,negative:l}},G.exports.positive=function(r,u){for(var c=[],l=b(r[r.length-1],u),f=r[r.length-1],s=r[0],o=0;o<r.length;++o,f=s){var d=b(s=r[o],u);(l<0&&d>0||l>0&&d<0)&&c.push(p(f,d,s,l)),d>=0&&c.push(s.slice()),l=d}return c},G.exports.negative=function(r,u){for(var c=[],l=b(r[r.length-1],u),f=r[r.length-1],s=r[0],o=0;o<r.length;++o,f=s){var d=b(s=r[o],u);(l<0&&d>0||l>0&&d<0)&&c.push(p(f,d,s,l)),d<=0&&c.push(s.slice()),l=d}return c}},{"robust-dot-product":545,"robust-sum":553}],568:[function(h,G,X){!function(){"use strict";var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function m(c){return p(u(c),arguments)}function b(c,l){return m.apply(null,[c].concat(l||[]))}function p(c,l){var f,s,o,d,g,y,v,_,w,x=1,E=c.length,k="";for(s=0;s<E;s++)if("string"==typeof c[s])k+=c[s];else if("object"==typeof c[s]){if((d=c[s]).keys)for(f=l[x],o=0;o<d.keys.length;o++){if(null==f)throw new Error(m('[sprintf] Cannot access property "%s" of undefined value "%s"',d.keys[o],d.keys[o-1]));f=f[d.keys[o]]}else f=d.param_no?l[d.param_no]:l[x++];if(i.not_type.test(d.type)&&i.not_primitive.test(d.type)&&f instanceof Function&&(f=f()),i.numeric_arg.test(d.type)&&"number"!=typeof f&&isNaN(f))throw new TypeError(m("[sprintf] expecting number but found %T",f));switch(i.number.test(d.type)&&(_=f>=0),d.type){case"b":f=parseInt(f,10).toString(2);break;case"c":f=String.fromCharCode(parseInt(f,10));break;case"d":case"i":f=parseInt(f,10);break;case"j":f=JSON.stringify(f,null,d.width?parseInt(d.width):0);break;case"e":f=d.precision?parseFloat(f).toExponential(d.precision):parseFloat(f).toExponential();break;case"f":f=d.precision?parseFloat(f).toFixed(d.precision):parseFloat(f);break;case"g":f=d.precision?String(Number(f.toPrecision(d.precision))):parseFloat(f);break;case"o":f=(parseInt(f,10)>>>0).toString(8);break;case"s":f=String(f),f=d.precision?f.substring(0,d.precision):f;break;case"t":f=String(!!f),f=d.precision?f.substring(0,d.precision):f;break;case"T":f=Object.prototype.toString.call(f).slice(8,-1).toLowerCase(),f=d.precision?f.substring(0,d.precision):f;break;case"u":f=parseInt(f,10)>>>0;break;case"v":f=f.valueOf(),f=d.precision?f.substring(0,d.precision):f;break;case"x":f=(parseInt(f,10)>>>0).toString(16);break;case"X":f=(parseInt(f,10)>>>0).toString(16).toUpperCase()}i.json.test(d.type)?k+=f:(!i.number.test(d.type)||_&&!d.sign?w="":(w=_?"+":"-",f=f.toString().replace(i.sign,"")),y=d.pad_char?"0"===d.pad_char?"0":d.pad_char.charAt(1):" ",v=d.width-(w+f).length,g=d.width&&v>0?y.repeat(v):"",k+=d.align?w+f+g:"0"===y?w+g+f:g+w+f)}return k}var r=Object.create(null);function u(c){if(r[c])return r[c];for(var l,f=c,s=[],o=0;f;){if(null!==(l=i.text.exec(f)))s.push(l[0]);else if(null!==(l=i.modulo.exec(f)))s.push("%");else{if(null===(l=i.placeholder.exec(f)))throw new SyntaxError("[sprintf] unexpected placeholder");if(l[2]){o|=1;var d=[],g=l[2],y=[];if(null===(y=i.key.exec(g)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(d.push(y[1]);""!==(g=g.substring(y[0].length));)if(null!==(y=i.key_access.exec(g)))d.push(y[1]);else{if(null===(y=i.index_access.exec(g)))throw new SyntaxError("[sprintf] failed to parse named argument key");d.push(y[1])}l[2]=d}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");s.push({placeholder:l[0],param_no:l[1],keys:l[2],sign:l[3],pad_char:l[4],align:l[5],width:l[6],precision:l[7],type:l[8]})}f=f.substring(l[0].length)}return r[c]=s}void 0!==X&&(X.sprintf=m,X.vsprintf=b),"undefined"!=typeof window&&(window.sprintf=m,window.vsprintf=b)}()},{}],569:[function(h,G,X){G.exports=m;var i=h("events").EventEmitter;function m(){i.call(this)}h("inherits")(m,i),m.Readable=h("readable-stream/lib/_stream_readable.js"),m.Writable=h("readable-stream/lib/_stream_writable.js"),m.Duplex=h("readable-stream/lib/_stream_duplex.js"),m.Transform=h("readable-stream/lib/_stream_transform.js"),m.PassThrough=h("readable-stream/lib/_stream_passthrough.js"),m.finished=h("readable-stream/lib/internal/streams/end-of-stream.js"),m.pipeline=h("readable-stream/lib/internal/streams/pipeline.js"),m.Stream=m,m.prototype.pipe=function(b,p){var r=this;function u(g){b.writable&&!1===b.write(g)&&r.pause&&r.pause()}function c(){r.readable&&r.resume&&r.resume()}r.on("data",u),b.on("drain",c),b._isStdio||p&&!1===p.end||(r.on("end",f),r.on("close",s));var l=!1;function f(){l||(l=!0,b.end())}function s(){l||(l=!0,"function"==typeof b.destroy&&b.destroy())}function o(g){if(d(),0===i.listenerCount(this,"error"))throw g}function d(){r.removeListener("data",u),b.removeListener("drain",c),r.removeListener("end",f),r.removeListener("close",s),r.removeListener("error",o),b.removeListener("error",o),r.removeListener("end",d),r.removeListener("close",d),b.removeListener("close",d)}return r.on("error",o),b.on("error",o),r.on("end",d),r.on("close",d),b.on("close",d),b.emit("pipe",r),b}},{events:116,inherits:447,"readable-stream/lib/_stream_duplex.js":571,"readable-stream/lib/_stream_passthrough.js":572,"readable-stream/lib/_stream_readable.js":573,"readable-stream/lib/_stream_transform.js":574,"readable-stream/lib/_stream_writable.js":575,"readable-stream/lib/internal/streams/end-of-stream.js":579,"readable-stream/lib/internal/streams/pipeline.js":581}],570:[function(h,G,X){"use strict";var i={};function m(p,r,u){u||(u=Error);var c=function(l){var f,s;function o(d,g,y){return l.call(this,"string"==typeof r?r:r(d,g,y))||this}return s=l,(f=o).prototype=Object.create(s.prototype),f.prototype.constructor=f,f.__proto__=s,o}(u);c.prototype.name=u.name,c.prototype.code=p,i[p]=c}function b(p,r){if(Array.isArray(p)){var u=p.length;return p=p.map(function(c){return String(c)}),u>2?"one of ".concat(r," ").concat(p.slice(0,u-1).join(", "),", or ")+p[u-1]:2===u?"one of ".concat(r," ").concat(p[0]," or ").concat(p[1]):"of ".concat(r," ").concat(p[0])}return"of ".concat(r," ").concat(String(p))}m("ERR_INVALID_OPT_VALUE",function(p,r){return'The value "'+r+'" is invalid for option "'+p+'"'},TypeError),m("ERR_INVALID_ARG_TYPE",function(p,r,u){var c,s,d,y;if("string"==typeof r&&"not "===r.substr(0,"not ".length)?(c="must not be",r=r.replace(/^not /,"")):c="must be",d=p,(void 0===y||y>d.length)&&(y=d.length)," argument"===d.substring(y-" argument".length,y))s="The ".concat(p," ").concat(c," ").concat(b(r,"type"));else{var o=function(d,g,y){return"number"!=typeof y&&(y=0),!(y+".".length>d.length)&&-1!==d.indexOf(".",y)}(p)?"property":"argument";s='The "'.concat(p,'" ').concat(o," ").concat(c," ").concat(b(r,"type"))}return s+". Received type ".concat(typeof u)},TypeError),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),m("ERR_METHOD_NOT_IMPLEMENTED",function(p){return"The "+p+" method is not implemented"}),m("ERR_STREAM_PREMATURE_CLOSE","Premature close"),m("ERR_STREAM_DESTROYED",function(p){return"Cannot call "+p+" after a stream was destroyed"}),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),m("ERR_STREAM_WRITE_AFTER_END","write after end"),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_UNKNOWN_ENCODING",function(p){return"Unknown encoding: "+p},TypeError),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),G.exports.codes=i},{}],571:[function(h,G,X){(function(i){(function(){"use strict";var m=Object.keys||function(o){var d=[];for(var g in o)d.push(g);return d};G.exports=l;var b=h("./_stream_readable"),p=h("./_stream_writable");h("inherits")(l,b);for(var r=m(p.prototype),u=0;u<r.length;u++){var c=r[u];l.prototype[c]||(l.prototype[c]=p.prototype[c])}function l(o){if(!(this instanceof l))return new l(o);b.call(this,o),p.call(this,o),this.allowHalfOpen=!0,o&&(!1===o.readable&&(this.readable=!1),!1===o.writable&&(this.writable=!1),!1===o.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",f)))}function f(){this._writableState.ended||i.nextTick(s,this)}function s(o){o.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(o){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=o,this._writableState.destroyed=o)}})}).call(this)}).call(this,h("_process"))},{"./_stream_readable":573,"./_stream_writable":575,_process:528,inherits:447}],572:[function(h,G,X){"use strict";G.exports=m;var i=h("./_stream_transform");function m(b){if(!(this instanceof m))return new m(b);i.call(this,b)}h("inherits")(m,i),m.prototype._transform=function(b,p,r){r(null,b)}},{"./_stream_transform":574,inherits:447}],573:[function(h,G,X){(function(i,m){(function(){"use strict";var b;G.exports=A,A.ReadableState=P,h("events");var l,p=function(V,W){return V.listeners(W).length},r=h("./internal/streams/stream"),u=h("buffer").Buffer,c=m.Uint8Array||function(){},f=h("util");l=f&&f.debuglog?f.debuglog("stream"):function(){};var s,o,d,g=h("./internal/streams/buffer_list"),y=h("./internal/streams/destroy"),v=h("./internal/streams/state").getHighWaterMark,_=h("../errors").codes,w=_.ERR_INVALID_ARG_TYPE,x=_.ERR_STREAM_PUSH_AFTER_EOF,E=_.ERR_METHOD_NOT_IMPLEMENTED,k=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;h("inherits")(A,r);var C=y.errorOrDestroy,L=["error","close","destroy","pause","resume"];function P(V,W,Z){b=b||h("./_stream_duplex"),"boolean"!=typeof Z&&(Z=W instanceof b),this.objectMode=!!(V=V||{}).objectMode,Z&&(this.objectMode=this.objectMode||!!V.readableObjectMode),this.highWaterMark=v(this,V,"readableHighWaterMark",Z),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==V.emitClose,this.autoDestroy=!!V.autoDestroy,this.destroyed=!1,this.defaultEncoding=V.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,V.encoding&&(s||(s=h("string_decoder/").StringDecoder),this.decoder=new s(V.encoding),this.encoding=V.encoding)}function A(V){if(b=b||h("./_stream_duplex"),!(this instanceof A))return new A(V);this._readableState=new P(V,this,this instanceof b),this.readable=!0,V&&("function"==typeof V.read&&(this._read=V.read),"function"==typeof V.destroy&&(this._destroy=V.destroy)),r.call(this)}function I(V,W,Z,oe,ie){l("readableAddChunk",W);var ue,he,de,be,pe,fe=V._readableState;if(null===W)fe.reading=!1,function(he,de){if(l("onEofChunk"),!de.ended){if(de.decoder){var be=de.decoder.end();be&&be.length&&(de.buffer.push(be),de.length+=de.objectMode?1:be.length)}de.ended=!0,de.sync?S(he):(de.needReadable=!1,de.emittedReadable||(de.emittedReadable=!0,N(he)))}}(V,fe);else if(ie||(he=fe,u.isBuffer(pe=de=W)||pe instanceof c||"string"==typeof de||void 0===de||he.objectMode||(be=new w("chunk",["string","Buffer","Uint8Array"],de)),ue=be),ue)C(V,ue);else if(fe.objectMode||W&&W.length>0)if("string"==typeof W||fe.objectMode||Object.getPrototypeOf(W)===u.prototype||(W=function(he){return u.from(he)}(W)),oe)fe.endEmitted?C(V,new k):D(V,fe,W,!0);else if(fe.ended)C(V,new x);else{if(fe.destroyed)return!1;fe.reading=!1,fe.decoder&&!Z?(W=fe.decoder.write(W),fe.objectMode||0!==W.length?D(V,fe,W,!1):B(V,fe)):D(V,fe,W,!1)}else oe||(fe.reading=!1,B(V,fe));return!fe.ended&&(fe.length<fe.highWaterMark||0===fe.length)}function D(V,W,Z,oe){W.flowing&&0===W.length&&!W.sync?(W.awaitDrain=0,V.emit("data",Z)):(W.length+=W.objectMode?1:Z.length,oe?W.buffer.unshift(Z):W.buffer.push(Z),W.needReadable&&S(V)),B(V,W)}function R(V,W){return V<=0||0===W.length&&W.ended?0:W.objectMode?1:V!=V?W.flowing&&W.length?W.buffer.head.data.length:W.length:(V>W.highWaterMark&&(W.highWaterMark=((Z=V)>=1073741824?Z=1073741824:(Z--,Z|=Z>>>1,Z|=Z>>>2,Z|=Z>>>4,Z|=Z>>>8,Z|=Z>>>16,Z++),Z)),V<=W.length?V:W.ended?W.length:(W.needReadable=!0,0));var Z}function S(V){var W=V._readableState;l("emitReadable",W.needReadable,W.emittedReadable),W.needReadable=!1,W.emittedReadable||(l("emitReadable",W.flowing),W.emittedReadable=!0,i.nextTick(N,V))}function N(V){var W=V._readableState;l("emitReadable_",W.destroyed,W.length,W.ended),W.destroyed||!W.length&&!W.ended||(V.emit("readable"),W.emittedReadable=!1),W.needReadable=!W.flowing&&!W.ended&&W.length<=W.highWaterMark,ae(V)}function B(V,W){W.readingMore||(W.readingMore=!0,i.nextTick(H,V,W))}function H(V,W){for(;!W.reading&&!W.ended&&(W.length<W.highWaterMark||W.flowing&&0===W.length);){var Z=W.length;if(l("maybeReadMore read 0"),V.read(0),Z===W.length)break}W.readingMore=!1}function Y(V){var W=V._readableState;W.readableListening=V.listenerCount("readable")>0,W.resumeScheduled&&!W.paused?W.flowing=!0:V.listenerCount("data")>0&&V.resume()}function Q(V){l("readable nexttick read 0"),V.read(0)}function ne(V,W){l("resume",W.reading),W.reading||V.read(0),W.resumeScheduled=!1,V.emit("resume"),ae(V),W.flowing&&!W.reading&&V.read(0)}function ae(V){var W=V._readableState;for(l("flow",W.flowing);W.flowing&&null!==V.read(););}function te(V,W){return 0===W.length?null:(W.objectMode?Z=W.buffer.shift():!V||V>=W.length?(Z=W.decoder?W.buffer.join(""):1===W.buffer.length?W.buffer.first():W.buffer.concat(W.length),W.buffer.clear()):Z=W.buffer.consume(V,W.decoder),Z);var Z}function K(V){var W=V._readableState;l("endReadable",W.endEmitted),W.endEmitted||(W.ended=!0,i.nextTick(q,W,V))}function q(V,W){if(l("endReadableNT",V.endEmitted,V.length),!V.endEmitted&&0===V.length&&(V.endEmitted=!0,W.readable=!1,W.emit("end"),V.autoDestroy)){var Z=W._writableState;(!Z||Z.autoDestroy&&Z.finished)&&W.destroy()}}function re(V,W){for(var Z=0,oe=V.length;Z<oe;Z++)if(V[Z]===W)return Z;return-1}Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(V){this._readableState&&(this._readableState.destroyed=V)}}),A.prototype.destroy=y.destroy,A.prototype._undestroy=y.undestroy,A.prototype._destroy=function(V,W){W(V)},A.prototype.push=function(V,W){var Z,oe=this._readableState;return oe.objectMode?Z=!0:"string"==typeof V&&((W=W||oe.defaultEncoding)!==oe.encoding&&(V=u.from(V,W),W=""),Z=!0),I(this,V,W,!1,Z)},A.prototype.unshift=function(V){return I(this,V,null,!0,!1)},A.prototype.isPaused=function(){return!1===this._readableState.flowing},A.prototype.setEncoding=function(V){s||(s=h("string_decoder/").StringDecoder);var W=new s(V);this._readableState.decoder=W,this._readableState.encoding=this._readableState.decoder.encoding;for(var Z=this._readableState.buffer.head,oe="";null!==Z;)oe+=W.write(Z.data),Z=Z.next;return this._readableState.buffer.clear(),""!==oe&&this._readableState.buffer.push(oe),this._readableState.length=oe.length,this},A.prototype.read=function(V){l("read",V),V=parseInt(V,10);var W=this._readableState,Z=V;if(0!==V&&(W.emittedReadable=!1),0===V&&W.needReadable&&((0!==W.highWaterMark?W.length>=W.highWaterMark:W.length>0)||W.ended))return l("read: emitReadable",W.length,W.ended),0===W.length&&W.ended?K(this):S(this),null;if(0===(V=R(V,W))&&W.ended)return 0===W.length&&K(this),null;var oe,ie=W.needReadable;return l("need readable",ie),(0===W.length||W.length-V<W.highWaterMark)&&l("length less than watermark",ie=!0),W.ended||W.reading?l("reading or ended",ie=!1):ie&&(l("do read"),W.reading=!0,W.sync=!0,0===W.length&&(W.needReadable=!0),this._read(W.highWaterMark),W.sync=!1,W.reading||(V=R(Z,W))),null===(oe=V>0?te(V,W):null)?(W.needReadable=W.length<=W.highWaterMark,V=0):(W.length-=V,W.awaitDrain=0),0===W.length&&(W.ended||(W.needReadable=!0),Z!==V&&W.ended&&K(this)),null!==oe&&this.emit("data",oe),oe},A.prototype._read=function(V){C(this,new E("_read()"))},A.prototype.pipe=function(V,W){var Z=this,oe=this._readableState;switch(oe.pipesCount){case 0:oe.pipes=V;break;case 1:oe.pipes=[oe.pipes,V];break;default:oe.pipes.push(V)}oe.pipesCount+=1,l("pipe count=%d opts=%j",oe.pipesCount,W);var ie=W&&!1===W.end||V===i.stdout||V===i.stderr?ke:fe;function fe(){l("onend"),V.end()}oe.endEmitted?i.nextTick(ie):Z.once("end",ie),V.on("unpipe",function ue(ze,je){l("onunpipe"),ze===Z&&je&&!1===je.hasUnpiped&&(je.hasUnpiped=!0,l("cleanup"),V.removeListener("close",Te),V.removeListener("finish",ye),V.removeListener("drain",he),V.removeListener("error",pe),V.removeListener("unpipe",ue),Z.removeListener("end",fe),Z.removeListener("end",ke),Z.removeListener("data",be),de=!0,!oe.awaitDrain||V._writableState&&!V._writableState.needDrain||he())});var ze,he=(ze=Z,function(){var je=ze._readableState;l("pipeOnDrain",je.awaitDrain),je.awaitDrain&&je.awaitDrain--,0===je.awaitDrain&&p(ze,"data")&&(je.flowing=!0,ae(ze))});V.on("drain",he);var de=!1;function be(ze){l("ondata");var je=V.write(ze);l("dest.write",je),!1===je&&((1===oe.pipesCount&&oe.pipes===V||oe.pipesCount>1&&-1!==re(oe.pipes,V))&&!de&&(l("false write response, pause",oe.awaitDrain),oe.awaitDrain++),Z.pause())}function pe(ze){l("onerror",ze),ke(),V.removeListener("error",pe),0===p(V,"error")&&C(V,ze)}function Te(){V.removeListener("finish",ye),ke()}function ye(){l("onfinish"),V.removeListener("close",Te),ke()}function ke(){l("unpipe"),Z.unpipe(V)}return Z.on("data",be),function(ze,je,Ie){if("function"==typeof ze.prependListener)return ze.prependListener(je,Ie);ze._events&&ze._events[je]?Array.isArray(ze._events[je])?ze._events[je].unshift(Ie):ze._events[je]=[Ie,ze._events[je]]:ze.on(je,Ie)}(V,"error",pe),V.once("close",Te),V.once("finish",ye),V.emit("pipe",Z),oe.flowing||(l("pipe resume"),Z.resume()),V},A.prototype.unpipe=function(V){var W=this._readableState,Z={hasUnpiped:!1};if(0===W.pipesCount)return this;if(1===W.pipesCount)return V&&V!==W.pipes||(V||(V=W.pipes),W.pipes=null,W.pipesCount=0,W.flowing=!1,V&&V.emit("unpipe",this,Z)),this;if(!V){var oe=W.pipes,ie=W.pipesCount;W.pipes=null,W.pipesCount=0,W.flowing=!1;for(var ue=0;ue<ie;ue++)oe[ue].emit("unpipe",this,{hasUnpiped:!1});return this}var fe=re(W.pipes,V);return-1===fe||(W.pipes.splice(fe,1),W.pipesCount-=1,1===W.pipesCount&&(W.pipes=W.pipes[0]),V.emit("unpipe",this,Z)),this},A.prototype.addListener=A.prototype.on=function(V,W){var Z=r.prototype.on.call(this,V,W),oe=this._readableState;return"data"===V?(oe.readableListening=this.listenerCount("readable")>0,!1!==oe.flowing&&this.resume()):"readable"===V&&(oe.endEmitted||oe.readableListening||(oe.readableListening=oe.needReadable=!0,oe.flowing=!1,oe.emittedReadable=!1,l("on readable",oe.length,oe.reading),oe.length?S(this):oe.reading||i.nextTick(Q,this))),Z},A.prototype.removeListener=function(V,W){var Z=r.prototype.removeListener.call(this,V,W);return"readable"===V&&i.nextTick(Y,this),Z},A.prototype.removeAllListeners=function(V){var W=r.prototype.removeAllListeners.apply(this,arguments);return"readable"!==V&&void 0!==V||i.nextTick(Y,this),W},A.prototype.resume=function(){var Z,V=this._readableState;return V.flowing||(l("resume"),V.flowing=!V.readableListening,this,(Z=V).resumeScheduled||(Z.resumeScheduled=!0,i.nextTick(ne,this,Z))),V.paused=!1,this},A.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},A.prototype.wrap=function(V){var W=this,Z=this._readableState,oe=!1;for(var ie in V.on("end",function(){if(l("wrapped end"),Z.decoder&&!Z.ended){var fe=Z.decoder.end();fe&&fe.length&&W.push(fe)}W.push(null)}),V.on("data",function(fe){l("wrapped data"),Z.decoder&&(fe=Z.decoder.write(fe)),Z.objectMode&&null==fe||(Z.objectMode||fe&&fe.length)&&(W.push(fe)||(oe=!0,V.pause()))}),V)void 0===this[ie]&&"function"==typeof V[ie]&&(this[ie]=function(fe){return function(){return V[fe].apply(V,arguments)}}(ie));for(var ue=0;ue<L.length;ue++)V.on(L[ue],this.emit.bind(this,L[ue]));return this._read=function(fe){l("wrapped _read",fe),oe&&(oe=!1,V.resume())},this},"function"==typeof Symbol&&(A.prototype[Symbol.asyncIterator]=function(){return void 0===o&&(o=h("./internal/streams/async_iterator")),o(this)}),Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(A.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(A.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(V){this._readableState&&(this._readableState.flowing=V)}}),A._fromList=te,Object.defineProperty(A.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(A.from=function(V,W){return void 0===d&&(d=h("./internal/streams/from")),d(A,V,W)})}).call(this)}).call(this,h("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":570,"./_stream_duplex":571,"./internal/streams/async_iterator":576,"./internal/streams/buffer_list":577,"./internal/streams/destroy":578,"./internal/streams/from":580,"./internal/streams/state":582,"./internal/streams/stream":583,_process:528,buffer:117,events:116,inherits:447,"string_decoder/":584,util:115}],574:[function(h,G,X){"use strict";G.exports=l;var i=h("../errors").codes,m=i.ERR_METHOD_NOT_IMPLEMENTED,b=i.ERR_MULTIPLE_CALLBACK,p=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,r=i.ERR_TRANSFORM_WITH_LENGTH_0,u=h("./_stream_duplex");function c(o,d){var g=this._transformState;g.transforming=!1;var y=g.writecb;if(null===y)return this.emit("error",new b);g.writechunk=null,g.writecb=null,null!=d&&this.push(d),y(o);var v=this._readableState;v.reading=!1,(v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}function l(o){if(!(this instanceof l))return new l(o);u.call(this,o),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,o&&("function"==typeof o.transform&&(this._transform=o.transform),"function"==typeof o.flush&&(this._flush=o.flush)),this.on("prefinish",f)}function f(){var o=this;"function"!=typeof this._flush||this._readableState.destroyed?s(this,null,null):this._flush(function(d,g){s(o,d,g)})}function s(o,d,g){if(d)return o.emit("error",d);if(null!=g&&o.push(g),o._writableState.length)throw new r;if(o._transformState.transforming)throw new p;return o.push(null)}h("inherits")(l,u),l.prototype.push=function(o,d){return this._transformState.needTransform=!1,u.prototype.push.call(this,o,d)},l.prototype._transform=function(o,d,g){g(new m("_transform()"))},l.prototype._write=function(o,d,g){var y=this._transformState;if(y.writecb=g,y.writechunk=o,y.writeencoding=d,!y.transforming){var v=this._readableState;(y.needTransform||v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}},l.prototype._read=function(o){var d=this._transformState;null===d.writechunk||d.transforming?d.needTransform=!0:(d.transforming=!0,this._transform(d.writechunk,d.writeencoding,d.afterTransform))},l.prototype._destroy=function(o,d){u.prototype._destroy.call(this,o,function(g){d(g)})}},{"../errors":570,"./_stream_duplex":571,inherits:447}],575:[function(h,G,X){(function(i,m){(function(){"use strict";function b(H){var Y=this;this.next=null,this.entry=null,this.finish=function(){!function(Q,ne,ae){var te=Q.entry;for(Q.entry=null;te;){var K=te.callback;ne.pendingcb--,K(undefined),te=te.next}ne.corkedRequestsFree.next=Q}(Y,H)}}var p;G.exports=A,A.WritableState=P;var f,r={deprecate:h("util-deprecate")},u=h("./internal/streams/stream"),c=h("buffer").Buffer,l=m.Uint8Array||function(){},s=h("./internal/streams/destroy"),o=h("./internal/streams/state").getHighWaterMark,d=h("../errors").codes,g=d.ERR_INVALID_ARG_TYPE,y=d.ERR_METHOD_NOT_IMPLEMENTED,v=d.ERR_MULTIPLE_CALLBACK,_=d.ERR_STREAM_CANNOT_PIPE,w=d.ERR_STREAM_DESTROYED,x=d.ERR_STREAM_NULL_VALUES,E=d.ERR_STREAM_WRITE_AFTER_END,k=d.ERR_UNKNOWN_ENCODING,C=s.errorOrDestroy;function L(){}function P(H,Y,Q){p=p||h("./_stream_duplex"),"boolean"!=typeof Q&&(Q=Y instanceof p),this.objectMode=!!(H=H||{}).objectMode,Q&&(this.objectMode=this.objectMode||!!H.writableObjectMode),this.highWaterMark=o(this,H,"writableHighWaterMark",Q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===H.decodeStrings),this.defaultEncoding=H.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ae){!function(te,K){var Z,q=te._writableState,re=q.sync,V=q.writecb;if("function"!=typeof V)throw new v;if((Z=q).writing=!1,Z.writecb=null,Z.length-=Z.writelen,Z.writelen=0,K)!function(Z,oe,ie,ue,fe){--oe.pendingcb,ie?(i.nextTick(fe,ue),i.nextTick(B,Z,oe),Z._writableState.errorEmitted=!0,C(Z,ue)):(fe(ue),Z._writableState.errorEmitted=!0,C(Z,ue),B(Z,oe))}(te,q,re,K,V);else{var W=S(q)||te.destroyed;W||q.corked||q.bufferProcessing||!q.bufferedRequest||R(te,q),re?i.nextTick(D,te,q,W,V):D(te,q,W,V)}}(Y,ae)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==H.emitClose,this.autoDestroy=!!H.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new b(this)}function A(H){var Y=this instanceof(p=p||h("./_stream_duplex"));if(!Y&&!f.call(A,this))return new A(H);this._writableState=new P(H,this,Y),this.writable=!0,H&&("function"==typeof H.write&&(this._write=H.write),"function"==typeof H.writev&&(this._writev=H.writev),"function"==typeof H.destroy&&(this._destroy=H.destroy),"function"==typeof H.final&&(this._final=H.final)),u.call(this)}function I(H,Y,Q,ne,ae,te,K){Y.writelen=ne,Y.writecb=K,Y.writing=!0,Y.sync=!0,Y.destroyed?Y.onwrite(new w("write")):Q?H._writev(ae,Y.onwrite):H._write(ae,te,Y.onwrite),Y.sync=!1}function D(H,Y,Q,ne){var ae,te;Q||(ae=H,0===(te=Y).length&&te.needDrain&&(te.needDrain=!1,ae.emit("drain"))),Y.pendingcb--,ne(),B(H,Y)}function R(H,Y){Y.bufferProcessing=!0;var Q=Y.bufferedRequest;if(H._writev&&Q&&Q.next){var ae=new Array(Y.bufferedRequestCount),te=Y.corkedRequestsFree;te.entry=Q;for(var K=0,q=!0;Q;)ae[K]=Q,Q.isBuf||(q=!1),Q=Q.next,K+=1;ae.allBuffers=q,I(H,Y,!0,Y.length,ae,"",te.finish),Y.pendingcb++,Y.lastBufferedRequest=null,te.next?(Y.corkedRequestsFree=te.next,te.next=null):Y.corkedRequestsFree=new b(Y),Y.bufferedRequestCount=0}else{for(;Q;){var re=Q.chunk;if(I(H,Y,!1,Y.objectMode?1:re.length,re,Q.encoding,Q.callback),Q=Q.next,Y.bufferedRequestCount--,Y.writing)break}null===Q&&(Y.lastBufferedRequest=null)}Y.bufferedRequest=Q,Y.bufferProcessing=!1}function S(H){return H.ending&&0===H.length&&null===H.bufferedRequest&&!H.finished&&!H.writing}function N(H,Y){H._final(function(Q){Y.pendingcb--,Q&&C(H,Q),Y.prefinished=!0,H.emit("prefinish"),B(H,Y)})}function B(H,Y){var ae,te,Q=S(Y);if(Q&&(ae=H,(te=Y).prefinished||te.finalCalled||("function"!=typeof ae._final||te.destroyed?(te.prefinished=!0,ae.emit("prefinish")):(te.pendingcb++,te.finalCalled=!0,i.nextTick(N,ae,te))),0===Y.pendingcb&&(Y.finished=!0,H.emit("finish"),Y.autoDestroy))){var ne=H._readableState;(!ne||ne.autoDestroy&&ne.endEmitted)&&H.destroy()}return Q}h("inherits")(A,u),P.prototype.getBuffer=function(){for(var H=this.bufferedRequest,Y=[];H;)Y.push(H),H=H.next;return Y},function(){try{Object.defineProperty(P.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(H){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(H){return!!f.call(this,H)||this===A&&H&&H._writableState instanceof P}})):f=function(H){return H instanceof this},A.prototype.pipe=function(){C(this,new _)},A.prototype.write=function(H,Y,Q){var ne,q,re,V,ae=this._writableState,te=!1,K=!ae.objectMode&&(c.isBuffer(ne=H)||ne instanceof l);return K&&!c.isBuffer(H)&&(H=c.from(H)),"function"==typeof Y&&(Q=Y,Y=null),K?Y="buffer":Y||(Y=ae.defaultEncoding),"function"!=typeof Q&&(Q=L),ae.ending?(q=this,re=Q,V=new E,C(q,V),i.nextTick(re,V)):(K||function(q,re,V,W){var Z;return null===V?Z=new x:"string"==typeof V||re.objectMode||(Z=new g("chunk",["string","Buffer"],V)),!Z||(C(q,Z),i.nextTick(W,Z),!1)}(this,ae,H,Q))&&(ae.pendingcb++,te=function(q,re,V,W,Z,oe){if(!V){var ie=(be=W,(de=re).objectMode||!1===de.decodeStrings||"string"!=typeof be||(be=c.from(be,Z)),be);W!==ie&&(V=!0,Z="buffer",W=ie)}var de,be,ue=re.objectMode?1:W.length;re.length+=ue;var fe=re.length<re.highWaterMark;if(fe||(re.needDrain=!0),re.writing||re.corked){var he=re.lastBufferedRequest;re.lastBufferedRequest={chunk:W,encoding:Z,isBuf:V,callback:oe,next:null},he?he.next=re.lastBufferedRequest:re.bufferedRequest=re.lastBufferedRequest,re.bufferedRequestCount+=1}else I(q,re,!1,ue,W,Z,oe);return fe}(this,ae,K,H,Y,Q)),te},A.prototype.cork=function(){this._writableState.corked++},A.prototype.uncork=function(){var H=this._writableState;H.corked&&(H.corked--,H.writing||H.corked||H.bufferProcessing||!H.bufferedRequest||R(this,H))},A.prototype.setDefaultEncoding=function(H){if("string"==typeof H&&(H=H.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((H+"").toLowerCase())>-1))throw new k(H);return this._writableState.defaultEncoding=H,this},Object.defineProperty(A.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(A.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),A.prototype._write=function(H,Y,Q){Q(new y("_write()"))},A.prototype._writev=null,A.prototype.end=function(H,Y,Q){var te,K,ne=this._writableState;return"function"==typeof H?(Q=H,H=null,Y=null):"function"==typeof Y&&(Q=Y,Y=null),null!=H&&this.write(H,Y),ne.corked&&(ne.corked=1,this.uncork()),ne.ending||(this,K=Q,(te=ne).ending=!0,B(this,te),K&&(te.finished?i.nextTick(K):this.once("finish",K)),te.ended=!0,this.writable=!1),this},Object.defineProperty(A.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(H){this._writableState&&(this._writableState.destroyed=H)}}),A.prototype.destroy=s.destroy,A.prototype._undestroy=s.undestroy,A.prototype._destroy=function(H,Y){Y(H)}}).call(this)}).call(this,h("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":570,"./_stream_duplex":571,"./internal/streams/destroy":578,"./internal/streams/state":582,"./internal/streams/stream":583,_process:528,buffer:117,inherits:447,"util-deprecate":622}],576:[function(h,G,X){(function(i){(function(){"use strict";var m;function b(w,x,E){return x in w?Object.defineProperty(w,x,{value:E,enumerable:!0,configurable:!0,writable:!0}):w[x]=E,w}var p=h("./end-of-stream"),r=Symbol("lastResolve"),u=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),f=Symbol("lastPromise"),s=Symbol("handlePromise"),o=Symbol("stream");function d(w,x){return{value:w,done:x}}function g(w){var x=w[r];if(null!==x){var E=w[o].read();null!==E&&(w[f]=null,w[r]=null,w[u]=null,x(d(E,!1)))}}function y(w){i.nextTick(g,w)}var v=Object.getPrototypeOf(function(){}),_=Object.setPrototypeOf((b(m={get stream(){return this[o]},next:function(){var w=this,x=this[c];if(null!==x)return Promise.reject(x);if(this[l])return Promise.resolve(d(void 0,!0));if(this[o].destroyed)return new Promise(function(L,P){i.nextTick(function(){w[c]?P(w[c]):L(d(void 0,!0))})});var E,L,P,k=this[f];if(k)E=new Promise((L=k,P=this,function(A,I){L.then(function(){P[l]?A(d(void 0,!0)):P[s](A,I)},I)}));else{var C=this[o].read();if(null!==C)return Promise.resolve(d(C,!1));E=new Promise(this[s])}return this[f]=E,E}},Symbol.asyncIterator,function(){return this}),b(m,"return",function(){var w=this;return new Promise(function(x,E){w[o].destroy(null,function(k){k?E(k):x(d(void 0,!0))})})}),m),v);G.exports=function(w){var x,E=Object.create(_,(b(x={},o,{value:w,writable:!0}),b(x,r,{value:null,writable:!0}),b(x,u,{value:null,writable:!0}),b(x,c,{value:null,writable:!0}),b(x,l,{value:w._readableState.endEmitted,writable:!0}),b(x,s,{value:function(k,C){var L=E[o].read();L?(E[f]=null,E[r]=null,E[u]=null,k(d(L,!1))):(E[r]=k,E[u]=C)},writable:!0}),x));return E[f]=null,p(w,function(k){if(k&&"ERR_STREAM_PREMATURE_CLOSE"!==k.code){var C=E[u];return null!==C&&(E[f]=null,E[r]=null,E[u]=null,C(k)),void(E[c]=k)}var L=E[r];null!==L&&(E[f]=null,E[r]=null,E[u]=null,L(d(void 0,!0))),E[l]=!0}),w.on("readable",y.bind(null,E)),E}}).call(this)}).call(this,h("_process"))},{"./end-of-stream":579,_process:528}],577:[function(h,G,X){"use strict";function i(c,l){var f=Object.keys(c);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(c);l&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(c,o).enumerable})),f.push.apply(f,s)}return f}function m(c,l,f){return l in c?Object.defineProperty(c,l,{value:f,enumerable:!0,configurable:!0,writable:!0}):c[l]=f,c}function b(c,l){for(var f=0;f<l.length;f++){var s=l[f];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(c,s.key,s)}}var p=h("buffer").Buffer,r=h("util").inspect,u=r&&r.custom||"inspect";G.exports=function(){function c(){(function(o,d){if(!(o instanceof d))throw new TypeError("Cannot call a class as a function")})(this,c),this.head=null,this.tail=null,this.length=0}var l,f;return l=c,(f=[{key:"push",value:function(o){var d={data:o,next:null};this.length>0?this.tail.next=d:this.head=d,this.tail=d,++this.length}},{key:"unshift",value:function(o){var d={data:o,next:this.head};0===this.length&&(this.tail=d),this.head=d,++this.length}},{key:"shift",value:function(){if(0!==this.length){var o=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,o}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(o){if(0===this.length)return"";for(var d=this.head,g=""+d.data;d=d.next;)g+=o+d.data;return g}},{key:"concat",value:function(o){if(0===this.length)return p.alloc(0);for(var v=p.allocUnsafe(o>>>0),_=this.head,w=0;_;)p.prototype.copy.call(_.data,v,w),w+=_.data.length,_=_.next;return v}},{key:"consume",value:function(o,d){var g;return o<this.head.data.length?(g=this.head.data.slice(0,o),this.head.data=this.head.data.slice(o)):g=o===this.head.data.length?this.shift():d?this._getString(o):this._getBuffer(o),g}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(o){var d=this.head,g=1,y=d.data;for(o-=y.length;d=d.next;){var v=d.data,_=o>v.length?v.length:o;if(y+=_===v.length?v:v.slice(0,o),0==(o-=_)){_===v.length?(++g,this.head=d.next?d.next:this.tail=null):(this.head=d,d.data=v.slice(_));break}++g}return this.length-=g,y}},{key:"_getBuffer",value:function(o){var d=p.allocUnsafe(o),g=this.head,y=1;for(g.data.copy(d),o-=g.data.length;g=g.next;){var v=g.data,_=o>v.length?v.length:o;if(v.copy(d,d.length-o,0,_),0==(o-=_)){_===v.length?(++y,this.head=g.next?g.next:this.tail=null):(this.head=g,g.data=v.slice(_));break}++y}return this.length-=y,d}},{key:u,value:function(o,d){return r(this,function(g){for(var y=1;y<arguments.length;y++){var v=null!=arguments[y]?arguments[y]:{};y%2?i(Object(v),!0).forEach(function(_){m(g,_,v[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(v)):i(Object(v)).forEach(function(_){Object.defineProperty(g,_,Object.getOwnPropertyDescriptor(v,_))})}return g}({},d,{depth:0,customInspect:!1}))}}])&&b(l.prototype,f),c}()},{buffer:117,util:115}],578:[function(h,G,X){(function(i){(function(){"use strict";function m(r,u){p(r,u),b(r)}function b(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function p(r,u){r.emit("error",u)}G.exports={destroy:function(r,u){var c=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(u?u(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(p,this,r)):i.nextTick(p,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(s){!u&&s?c._writableState?c._writableState.errorEmitted?i.nextTick(b,c):(c._writableState.errorEmitted=!0,i.nextTick(m,c,s)):i.nextTick(m,c,s):u?(i.nextTick(b,c),u(s)):i.nextTick(b,c)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(r,u){var c=r._readableState,l=r._writableState;c&&c.autoDestroy||l&&l.autoDestroy?r.destroy(u):r.emit("error",u)}}}).call(this)}).call(this,h("_process"))},{_process:528}],579:[function(h,G,X){"use strict";var i=h("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function m(){}G.exports=function b(p,r,u){if("function"==typeof r)return b(p,null,r);var w,x;r||(r={}),w=u||m,x=!1,u=function(){if(!x){x=!0;for(var E=arguments.length,k=new Array(E),C=0;C<E;C++)k[C]=arguments[C];w.apply(this,k)}};var c=r.readable||!1!==r.readable&&p.readable,l=r.writable||!1!==r.writable&&p.writable,f=function(){p.writable||o()},s=p._writableState&&p._writableState.finished,o=function(){l=!1,s=!0,c||u.call(p)},d=p._readableState&&p._readableState.endEmitted,g=function(){c=!1,d=!0,l||u.call(p)},y=function(w){u.call(p,w)},v=function(){var w;return c&&!d?(p._readableState&&p._readableState.ended||(w=new i),u.call(p,w)):l&&!s?(p._writableState&&p._writableState.ended||(w=new i),u.call(p,w)):void 0},_=function(){p.req.on("finish",o)};return function(w){return w.setHeader&&"function"==typeof w.abort}(p)?(p.on("complete",o),p.on("abort",v),p.req?_():p.on("request",_)):l&&!p._writableState&&(p.on("end",f),p.on("close",f)),p.on("end",g),p.on("finish",o),!1!==r.error&&p.on("error",y),p.on("close",v),function(){p.removeListener("complete",o),p.removeListener("abort",v),p.removeListener("request",_),p.req&&p.req.removeListener("finish",o),p.removeListener("end",f),p.removeListener("close",f),p.removeListener("finish",o),p.removeListener("end",g),p.removeListener("error",y),p.removeListener("close",v)}}},{"../../../errors":570}],580:[function(h,G,X){G.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],581:[function(h,G,X){"use strict";var i,m=h("../../../errors").codes,b=m.ERR_MISSING_ARGS,p=m.ERR_STREAM_DESTROYED;function r(s){if(s)throw s}function u(s,o,d,g){var _,w;_=g,w=!1,g=function(){w||(w=!0,_.apply(void 0,arguments))};var y=!1;s.on("close",function(){y=!0}),void 0===i&&(i=h("./end-of-stream")),i(s,{readable:o,writable:d},function(_){if(_)return g(_);y=!0,g()});var v=!1;return function(_){if(!y&&!v)return v=!0,function(w){return w.setHeader&&"function"==typeof w.abort}(s)?s.abort():"function"==typeof s.destroy?s.destroy():void g(_||new p("pipe"))}}function c(s){s()}function l(s,o){return s.pipe(o)}function f(s){return s.length?"function"!=typeof s[s.length-1]?r:s.pop():r}G.exports=function(){for(var s=arguments.length,o=new Array(s),d=0;d<s;d++)o[d]=arguments[d];var g,y=f(o);if(Array.isArray(o[0])&&(o=o[0]),o.length<2)throw new b("streams");var v=o.map(function(_,w){var x=w<o.length-1;return u(_,x,w>0,function(E){g||(g=E),E&&v.forEach(c),x||(v.forEach(c),y(g))})});return o.reduce(l)}},{"../../../errors":570,"./end-of-stream":579}],582:[function(h,G,X){"use strict";var i=h("../../../errors").codes.ERR_INVALID_OPT_VALUE;G.exports={getHighWaterMark:function(m,b,p,r){var c,u=null!=(c=b).highWaterMark?c.highWaterMark:r?c[p]:null;if(null!=u){if(!isFinite(u)||Math.floor(u)!==u||u<0)throw new i(r?p:"highWaterMark",u);return Math.floor(u)}return m.objectMode?16:16384}}},{"../../../errors":570}],583:[function(h,G,X){G.exports=h("events").EventEmitter},{events:116}],584:[function(h,G,X){"use strict";var i=h("safe-buffer").Buffer,m=i.isEncoding||function(d){switch((d=""+d)&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function b(d){var g;switch(this.encoding=function(y){var v=function(_){if(!_)return"utf8";for(var w;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(w)return;_=(""+_).toLowerCase(),w=!0}}(y);if("string"!=typeof v&&(i.isEncoding===m||!m(y)))throw new Error("Unknown encoding: "+y);return v||y}(d),this.encoding){case"utf16le":this.text=u,this.end=c,g=4;break;case"utf8":this.fillLast=r,g=4;break;case"base64":this.text=l,this.end=f,g=3;break;default:return this.write=s,void(this.end=o)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(g)}function p(d){return d<=127?0:d>>5==6?2:d>>4==14?3:d>>3==30?4:d>>6==2?-1:-2}function r(d){var g=this.lastTotal-this.lastNeed,y=function(v,_,w){if(128!=(192&_[0]))return v.lastNeed=0,"\ufffd";if(v.lastNeed>1&&_.length>1){if(128!=(192&_[1]))return v.lastNeed=1,"\ufffd";if(v.lastNeed>2&&_.length>2&&128!=(192&_[2]))return v.lastNeed=2,"\ufffd"}}(this,d);return void 0!==y?y:this.lastNeed<=d.length?(d.copy(this.lastChar,g,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(d.copy(this.lastChar,g,0,d.length),void(this.lastNeed-=d.length))}function u(d,g){if((d.length-g)%2==0){var y=d.toString("utf16le",g);if(y){var v=y.charCodeAt(y.length-1);if(v>=55296&&v<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],y.slice(0,-1)}return y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",g,d.length-1)}function c(d){var g=d&&d.length?this.write(d):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function l(d,g){var y=(d.length-g)%3;return 0===y?d.toString("base64",g):(this.lastNeed=3-y,this.lastTotal=3,1===y?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",g,d.length-y))}function f(d){var g=d&&d.length?this.write(d):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function s(d){return d.toString(this.encoding)}function o(d){return d&&d.length?this.write(d):""}X.StringDecoder=b,b.prototype.write=function(d){if(0===d.length)return"";var g,y;if(this.lastNeed){if(void 0===(g=this.fillLast(d)))return"";y=this.lastNeed,this.lastNeed=0}else y=0;return y<d.length?g?g+this.text(d,y):this.text(d,y):g||""},b.prototype.end=function(d){var g=d&&d.length?this.write(d):"";return this.lastNeed?g+"\ufffd":g},b.prototype.text=function(d,g){var y=function(_,w,x){var E=w.length-1;if(E<x)return 0;var k=p(w[E]);return k>=0?(k>0&&(_.lastNeed=k-1),k):--E<x||-2===k?0:(k=p(w[E]))>=0?(k>0&&(_.lastNeed=k-2),k):--E<x||-2===k?0:(k=p(w[E]))>=0?(k>0&&(2===k?k=0:_.lastNeed=k-3),k):0}(this,d,g);if(!this.lastNeed)return d.toString("utf8",g);this.lastTotal=y;var v=d.length-(y-this.lastNeed);return d.copy(this.lastChar,0,v),d.toString("utf8",g,v)},b.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length),this.lastNeed-=d.length}},{"safe-buffer":554}],585:[function(h,G,X){(function(i,m){(function(){var b=h("assert"),p=h("debug")("stream-parser");function r(y){p("initializing parser stream"),y._parserBytesLeft=0,y._parserBuffers=[],y._parserBuffered=0,y._parserState=-1,y._parserCallback=null,"function"==typeof y.push&&(y._parserOutput=y.push.bind(y)),y._parserInit=!0}function u(y,v){b(!this._parserCallback,'there is already a "callback" set!'),b(isFinite(y)&&y>0,'can only buffer a finite number of bytes > 0, got "'+y+'"'),this._parserInit||r(this),p("buffering %o bytes",y),this._parserBytesLeft=y,this._parserCallback=v,this._parserState=0}function c(y,v){b(!this._parserCallback,'there is already a "callback" set!'),b(y>0,'can only skip > 0 bytes, got "'+y+'"'),this._parserInit||r(this),p("skipping %o bytes",y),this._parserBytesLeft=y,this._parserCallback=v,this._parserState=1}function l(y,v){b(!this._parserCallback,'There is already a "callback" set!'),b(y>0,'can only pass through > 0 bytes, got "'+y+'"'),this._parserInit||r(this),p("passing through %o bytes",y),this._parserBytesLeft=y,this._parserCallback=v,this._parserState=2}function f(y,v,_){this._parserInit||r(this),p("write(%o bytes)",y.length),"function"==typeof v&&(_=v),d(this,y,null,_)}function s(y,v,_){this._parserInit||r(this),p("transform(%o bytes)",y.length),"function"!=typeof v&&(v=this._parserOutput),d(this,y,v,_)}function o(y,v,_,w){if(y._parserBytesLeft-=v.length,p("%o bytes left for stream piece",y._parserBytesLeft),0===y._parserState?(y._parserBuffers.push(v),y._parserBuffered+=v.length):2===y._parserState&&_(v),0!==y._parserBytesLeft)return w;var x=y._parserCallback;if(x&&0===y._parserState&&y._parserBuffers.length>1&&(v=m.concat(y._parserBuffers,y._parserBuffered)),0!==y._parserState&&(v=null),y._parserCallback=null,y._parserBuffered=0,y._parserState=-1,y._parserBuffers.splice(0),x){var E=[];v&&E.push(v),_&&E.push(_);var k=x.length>E.length;k&&E.push(g(w));var C=x.apply(y,E);if(!k||w===C)return w}}G.exports=function(y){var v=y&&"function"==typeof y._transform;if(!(v||y&&"function"==typeof y._write))throw new Error("must pass a Writable or Transform stream in");p("extending Parser into stream"),y._bytes=u,y._skipBytes=c,v&&(y._passthrough=l),v?y._transform=s:y._write=f};var d=g(function y(v,_,w,x){return v._parserBytesLeft<=0?x(new Error("got data but not currently parsing anything")):_.length<=v._parserBytesLeft?function(){return o(v,_,w,x)}:function(){var E=_.slice(0,v._parserBytesLeft);return o(v,E,w,function(k){return k?x(k):_.length>E.length?function(){return y(v,_.slice(E.length),w,x)}:void 0})}});function g(y){return function(){for(var v=y.apply(this,arguments);"function"==typeof v;)v=v();return v}}}).call(this)}).call(this,h("_process"),h("buffer").Buffer)},{_process:528,assert:80,buffer:117,debug:586}],586:[function(h,G,X){(function(i){(function(){function m(){var b;try{b=X.storage.debug}catch(p){}return!b&&void 0!==i&&"env"in i&&(b=i.env.DEBUG),b}(X=G.exports=h("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},X.formatArgs=function(b){var p=this.useColors;if(b[0]=(p?"%c":"")+this.namespace+(p?" %c":" ")+b[0]+(p?"%c ":" ")+"+"+X.humanize(this.diff),p){var r="color: "+this.color;b.splice(1,0,r,"color: inherit");var u=0,c=0;b[0].replace(/%[a-zA-Z%]/g,function(l){"%%"!==l&&(u++,"%c"===l&&(c=u))}),b.splice(c,0,r)}},X.save=function(b){try{null==b?X.storage.removeItem("debug"):X.storage.debug=b}catch(p){}},X.load=m,X.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},X.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(b){}}(),X.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],X.formatters.j=function(b){try{return JSON.stringify(b)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}},X.enable(m())}).call(this)}).call(this,h("_process"))},{"./debug":587,_process:528}],587:[function(h,G,X){var i;function m(b){function p(){if(p.enabled){var r=p,u=+new Date;r.diff=u-(i||u),r.prev=i,r.curr=u,i=u;for(var l=new Array(arguments.length),f=0;f<l.length;f++)l[f]=arguments[f];l[0]=X.coerce(l[0]),"string"!=typeof l[0]&&l.unshift("%O");var s=0;l[0]=l[0].replace(/%([a-zA-Z%])/g,function(d,g){if("%%"===d)return d;s++;var y=X.formatters[g];return"function"==typeof y&&(d=y.call(r,l[s]),l.splice(s,1),s--),d}),X.formatArgs.call(r,l),(p.log||X.log||console.log.bind(console)).apply(r,l)}}return p.namespace=b,p.enabled=X.enabled(b),p.useColors=X.useColors(),p.color=function(r){var u,c=0;for(u in r)c=(c<<5)-c+r.charCodeAt(u),c|=0;return X.colors[Math.abs(c)%X.colors.length]}(b),"function"==typeof X.init&&X.init(p),p}(X=G.exports=m.debug=m.default=m).coerce=function(b){return b instanceof Error?b.stack||b.message:b},X.disable=function(){X.enable("")},X.enable=function(b){X.save(b),X.names=[],X.skips=[];for(var p=("string"==typeof b?b:"").split(/[\s,]+/),r=p.length,u=0;u<r;u++)p[u]&&("-"===(b=p[u].replace(/\*/g,".*?"))[0]?X.skips.push(new RegExp("^"+b.substr(1)+"$")):X.names.push(new RegExp("^"+b+"$")))},X.enabled=function(b){var p,r;for(p=0,r=X.skips.length;p<r;p++)if(X.skips[p].test(b))return!1;for(p=0,r=X.names.length;p<r;p++)if(X.names[p].test(b))return!0;return!1},X.humanize=h("ms"),X.names=[],X.skips=[],X.formatters={}},{ms:588}],588:[function(h,G,X){var i=1e3,m=6e4,b=60*m,p=24*b;function r(u,c,l){if(!(u<c))return u<1.5*c?Math.floor(u/c)+" "+l:Math.ceil(u/c)+" "+l+"s"}G.exports=function(u,c){c=c||{};var l,s,f=typeof u;if("string"===f&&u.length>0)return function(s){if(!((s=String(s)).length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(s);if(o){var d=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*d;case"days":case"day":case"d":return d*p;case"hours":case"hour":case"hrs":case"hr":case"h":return d*b;case"minutes":case"minute":case"mins":case"min":case"m":return d*m;case"seconds":case"second":case"secs":case"sec":case"s":return d*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}(u);if("number"===f&&!1===isNaN(u))return c.long?r(l=u,p,"day")||r(l,b,"hour")||r(l,m,"minute")||r(l,i,"second")||l+" ms":(s=u)>=p?Math.round(s/p)+"d":s>=b?Math.round(s/b)+"h":s>=m?Math.round(s/m)+"m":s>=i?Math.round(s/i)+"s":s+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}},{}],589:[function(h,G,X){"use strict";var i=h("parenthesis");G.exports=function(m,b,p){if(null==m)throw Error("First argument should be a string");if(null==b)throw Error("Separator should be a string or a RegExp");p?("string"==typeof p||Array.isArray(p))&&(p={ignore:p}):p={},null==p.escape&&(p.escape=!0),null==p.ignore?p.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof p.ignore&&(p.ignore=[p.ignore]),p.ignore=p.ignore.map(function(o){return 1===o.length&&(o+=o),o}));var r=i.parse(m,{flat:!0,brackets:p.ignore}),u=r[0].split(b);if(p.escape){for(var c=[],l=0;l<u.length;l++){var f=u[l];"\\"===f[f.length-1]&&"\\"!==f[f.length-2]?(c.push(f+b+u[l+1]),l++):c.push(f)}u=c}for(l=0;l<u.length;l++)r[0]=u[l],u[l]=i.stringify(r,{flat:!0});return u}},{parenthesis:491}],590:[function(h,G,X){"use strict";G.exports=function(i){for(var m=i.length,b=new Array(m),p=new Array(m),r=new Array(m),u=new Array(m),c=new Array(m),l=new Array(m),f=0;f<m;++f)b[f]=-1,p[f]=0,r[f]=!1,u[f]=0,c[f]=-1,l[f]=[];var s,o=0,d=[],g=[];function y(w){var x=[w],E=[w];for(b[w]=p[w]=o,r[w]=!0,o+=1;E.length>0;){var k=i[w=E[E.length-1]];if(u[w]<k.length){for(var C=u[w];C<k.length;++C){var L=k[C];if(b[L]<0){b[L]=p[L]=o,r[L]=!0,o+=1,x.push(L),E.push(L);break}r[L]&&(p[w]=0|Math.min(p[w],p[L])),c[L]>=0&&l[w].push(c[L])}u[w]=C}else{if(p[w]===b[w]){var P=[],A=[],I=0;for(C=x.length-1;C>=0;--C){var D=x[C];if(r[D]=!1,P.push(D),A.push(l[D]),I+=l[D].length,c[D]=d.length,D===w){x.length=C;break}}d.push(P);var R=new Array(I);for(C=0;C<A.length;C++)for(var S=0;S<A[C].length;S++)R[--I]=A[C][S];g.push(R)}E.pop()}}}for(f=0;f<m;++f)b[f]<0&&y(f);for(f=0;f<g.length;f++){var v=g[f];if(0!==v.length){v.sort(function(w,x){return w-x}),s=[v[0]];for(var _=1;_<v.length;_++)v[_]!==v[_-1]&&s.push(v[_]);g[f]=s}}return{components:d,adjacencyList:g}}},{}],591:[function(h,G,X){"use strict";G.exports=function(r,u){if(r.dimension<=0)return{positions:[],cells:[]};if(1===r.dimension)return function(f,s){for(var o=b(f,s),d=o.length,g=new Array(d),y=new Array(d),v=0;v<d;++v)g[v]=[o[v]],y[v]=[v];return{positions:g,cells:y}}(r,u);var c=r.order.join()+"-"+r.dtype,l=p[c];return u=+u||0,l||(l=p[c]=function(f,s){var o=f.length,d=["'use strict';"],g="surfaceNets"+f.join("_")+"d"+s;d.push("var contour=genContour({","order:[",f.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===s&&d.push("getters:[0],");for(var y=[],v=[],_=0;_<o;++_)y.push("d"+_),v.push("d"+_);for(_=0;_<1<<o;++_)y.push("v"+_),v.push("v"+_);for(_=0;_<1<<o;++_)y.push("p"+_),v.push("p"+_);y.push("a","b","c"),v.push("a","c"),d.push("vertex:function vertexFunc(",y.join(),"){");var w=[];for(_=0;_<1<<o;++_)w.push("(p"+_+"<<"+_+")");d.push("var m=(",w.join("+"),")|0;if(m===0||m===",(1<<(1<<o))-1,"){return}");var x=[],E=[];for(1<<(1<<o)<=128?(d.push("switch(m){"),E=d):d.push("switch(m>>>7){"),_=0;_<1<<(1<<o);++_){if(1<<(1<<o)>128&&_%128==0){x.length>0&&E.push("}}");var k="vExtra"+x.length;d.push("case ",_>>>7,":",k,"(m&0x7f,",v.join(),");break;"),E=["function ",k,"(m,",v.join(),"){switch(m){"],x.push(E)}E.push("case ",127&_,":");for(var C=new Array(o),L=new Array(o),P=new Array(o),A=new Array(o),I=0,D=0;D<o;++D)C[D]=[],L[D]=[],P[D]=0,A[D]=0;for(D=0;D<1<<o;++D)for(var R=0;R<o;++R){var S=D^1<<R;if(!(S>D)&&!(_&1<<S)!=!(_&1<<D)){var N=1;_&1<<S?L[R].push("v"+S+"-v"+D):(L[R].push("v"+D+"-v"+S),N=-N),N<0?(C[R].push("-v"+D+"-v"+S),P[R]+=2):(C[R].push("v"+D+"+v"+S),P[R]-=2),I+=1;for(var B=0;B<o;++B)B!==R&&(S&1<<B?A[B]+=1:A[B]-=1)}}var H=[];for(R=0;R<o;++R)if(0===C[R].length)H.push("d"+R+"-0.5");else{var Y="";P[R]<0?Y=P[R]+"*c":P[R]>0&&(Y="+"+P[R]+"*c"),H.push("d"+R+"-"+(.5+A[R]/I*.5)+"-"+C[R].length/I*.5+"*("+C[R].join("+")+Y+")/("+L[R].join("+")+")")}E.push("a.push([",H.join(),"]);","break;")}d.push("}},"),x.length>0&&E.push("}}");var ae=[];for(_=0;_<1<<o-1;++_)ae.push("v"+_);ae.push("c0","c1","p0","p1","a","b","c"),d.push("cell:function cellFunc(",ae.join(),"){");var te=m(o-1);for(d.push("if(p0){b.push(",te.map(function(K){return"["+K.map(function(q){return"v"+q})+"]"}).join(),")}else{b.push(",te.map(function(K){var q=K.slice();return q.reverse(),"["+q.map(function(re){return"v"+re})+"]"}).join(),")}}});function ",g,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",g,";"),_=0;_<x.length;++_)d.push(x[_].join(""));return new Function("genContour",d.join(""))(i)}(r.order,r.dtype)),l(r,u)};var i=h("ndarray-extract-contour"),m=h("triangulate-hypercube"),b=h("zero-crossings"),p={}},{"ndarray-extract-contour":475,"triangulate-hypercube":602,"zero-crossings":647}],592:[function(h,G,X){"use strict";Object.defineProperty(X,"__esModule",{value:!0});var m=2*Math.PI,b=function(u,c,l,f,s,o,d){var g=u.x,y=u.y;return{x:f*(g*=c)-s*(y*=l)+o,y:s*g+f*y+d}},p=function(u,c){var l=1.5707963267948966===c?.551915024494:-1.5707963267948966===c?-.551915024494:4/3*Math.tan(c/4),f=Math.cos(u),s=Math.sin(u),o=Math.cos(u+c),d=Math.sin(u+c);return[{x:f-s*l,y:s+f*l},{x:o+d*l,y:d-o*l},{x:o,y:d}]},r=function(u,c,l,f){var s=u*l+c*f;return s>1&&(s=1),s<-1&&(s=-1),(u*f-c*l<0?-1:1)*Math.acos(s)};X.default=function(u){var c=u.px,l=u.py,f=u.cx,s=u.cy,o=u.rx,d=u.ry,g=u.xAxisRotation,y=void 0===g?0:g,v=u.largeArcFlag,_=void 0===v?0:v,w=u.sweepFlag,x=void 0===w?0:w,E=[];if(0===o||0===d)return[];var k=Math.sin(y*m/360),C=Math.cos(y*m/360),L=C*(c-f)/2+k*(l-s)/2,P=-k*(c-f)/2+C*(l-s)/2;if(0===L&&0===P)return[];o=Math.abs(o),d=Math.abs(d);var A=Math.pow(L,2)/Math.pow(o,2)+Math.pow(P,2)/Math.pow(d,2);A>1&&(o*=Math.sqrt(A),d*=Math.sqrt(A));var D=function(u,c){if(Array.isArray(u))return u;if(Symbol.iterator in Object(u))return function(l,f){var s=[],o=!0,d=!1,g=void 0;try{for(var y,v=l[Symbol.iterator]();!(o=(y=v.next()).done)&&(s.push(y.value),!f||s.length!==f);o=!0);}catch(_){d=!0,g=_}finally{try{!o&&v.return&&v.return()}finally{if(d)throw g}}return s}(u,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(ne,ae,te,K,q,re,V,W,Z,oe,ie,ue){var fe=Math.pow(q,2),he=Math.pow(re,2),de=Math.pow(ie,2),be=Math.pow(ue,2),pe=fe*he-fe*be-he*de;pe<0&&(pe=0),pe/=fe*be+he*de;var Te=(pe=Math.sqrt(pe)*(V===W?-1:1))*q/re*ue,ye=pe*-re/q*ie,ke=oe*Te-Z*ye+(ne+te)/2,ze=Z*Te+oe*ye+(ae+K)/2,je=(ie-Te)/q,Ie=(ue-ye)/re,Ce=(-ie-Te)/q,_e=(-ue-ye)/re,we=r(1,0,je,Ie),Se=r(je,Ie,Ce,_e);return 0===W&&Se>0&&(Se-=m),1===W&&Se<0&&(Se+=m),[ke,ze,we,Se]}(c,l,f,s,o,d,_,x,k,C,L,P),4),R=D[0],S=D[1],N=D[2],B=D[3],H=Math.abs(B)/(m/4);Math.abs(1-H)<1e-7&&(H=1);var Y=Math.max(Math.ceil(H),1);B/=Y;for(var Q=0;Q<Y;Q++)E.push(p(N,B)),N+=B;return E.map(function(ne){var ae=b(ne[0],o,d,C,k,R,S),te=ae.x,K=ae.y,q=b(ne[1],o,d,C,k,R,S),re=q.x,V=q.y,W=b(ne[2],o,d,C,k,R,S);return{x1:te,y1:K,x2:re,y2:V,x:W.x,y:W.y}})},G.exports=X.default},{}],593:[function(h,G,X){"use strict";var i=h("parse-svg-path"),m=h("abs-svg-path"),b=h("normalize-svg-path"),p=h("is-svg-path"),r=h("assert");G.exports=function(u){if(Array.isArray(u)&&1===u.length&&"string"==typeof u[0]&&(u=u[0]),"string"==typeof u&&(r(p(u),"String is not an SVG path."),u=i(u)),r(Array.isArray(u),"Argument should be a string or an array of path segments."),u=m(u),!(u=b(u)).length)return[0,0,0,0];for(var c=[1/0,1/0,-1/0,-1/0],l=0,f=u.length;l<f;l++)for(var s=u[l].slice(1),o=0;o<s.length;o+=2)s[o+0]<c[0]&&(c[0]=s[o+0]),s[o+1]<c[1]&&(c[1]=s[o+1]),s[o+0]>c[2]&&(c[2]=s[o+0]),s[o+1]>c[3]&&(c[3]=s[o+1]);return c}},{"abs-svg-path":71,assert:80,"is-svg-path":459,"normalize-svg-path":594,"parse-svg-path":493}],594:[function(h,G,X){"use strict";G.exports=function(p){for(var r,u=[],c=0,l=0,f=0,s=0,o=null,d=null,g=0,y=0,v=0,_=p.length;v<_;v++){var w=p[v],x=w[0];switch(x){case"M":f=w[1],s=w[2];break;case"A":var E=i({px:g,py:y,cx:w[6],cy:w[7],rx:w[1],ry:w[2],xAxisRotation:w[3],largeArcFlag:w[4],sweepFlag:w[5]});if(!E.length)continue;for(var k,C=0;C<E.length;C++)w=["C",(k=E[C]).x1,k.y1,k.x2,k.y2,k.x,k.y],C<E.length-1&&u.push(w);break;case"S":var L=g,P=y;"C"!=r&&"S"!=r||(L+=L-c,P+=P-l),w=["C",L,P,w[1],w[2],w[3],w[4]];break;case"T":"Q"==r||"T"==r?(o=2*g-o,d=2*y-d):(o=g,d=y),w=b(g,y,o,d,w[1],w[2]);break;case"Q":o=w[1],d=w[2],w=b(g,y,w[1],w[2],w[3],w[4]);break;case"L":w=m(g,y,w[1],w[2]);break;case"H":w=m(g,y,w[1],y);break;case"V":w=m(g,y,g,w[1]);break;case"Z":w=m(g,y,f,s)}r=x,g=w[w.length-2],y=w[w.length-1],w.length>4?(c=w[w.length-4],l=w[w.length-3]):(c=g,l=y),u.push(w)}return u};var i=h("svg-arc-to-cubic-bezier");function m(p,r,u,c){return["C",p,r,u,c,u,c]}function b(p,r,u,c,l,f){return["C",p/3+2/3*u,r/3+2/3*c,l/3+2/3*u,f/3+2/3*c,l,f]}},{"svg-arc-to-cubic-bezier":592}],595:[function(h,G,X){"use strict";var i,m=h("svg-path-bounds"),b=h("parse-svg-path"),p=h("draw-svg-path"),r=h("is-svg-path"),u=h("bitmap-sdf"),c=document.createElement("canvas"),l=c.getContext("2d");G.exports=function(f,s){if(!r(f))throw Error("Argument should be valid svg path string");var o,d;s||(s={}),s.shape?(o=s.shape[0],d=s.shape[1]):(o=c.width=s.w||s.width||200,d=c.height=s.h||s.height||200);var g=Math.min(o,d),y=s.stroke||0,v=s.viewbox||s.viewBox||m(f),_=[o/(v[2]-v[0]),d/(v[3]-v[1])],w=Math.min(_[0]||0,_[1]||0)/2;if(l.fillStyle="black",l.fillRect(0,0,o,d),l.fillStyle="white",y&&("number"!=typeof y&&(y=1),l.strokeStyle=y>0?"white":"black",l.lineWidth=Math.abs(y)),l.translate(.5*o,.5*d),l.scale(w,w),function(){if(null!=i)return i;var k=document.createElement("canvas").getContext("2d");if(k.canvas.width=k.canvas.height=1,!window.Path2D)return i=!1;var C=new Path2D("M0,0h1v1h-1v-1Z");k.fillStyle="black",k.fill(C);var L=k.getImageData(0,0,1,1);return i=L&&L.data&&255===L.data[3]}()){var x=new Path2D(f);l.fill(x),y&&l.stroke(x)}else{var E=b(f);p(l,E),l.fill(),y&&l.stroke()}return l.setTransform(1,0,0,1,0,0),u(l,{cutoff:null!=s.cutoff?s.cutoff:.5,radius:null!=s.radius?s.radius:.5*g})}},{"bitmap-sdf":105,"draw-svg-path":183,"is-svg-path":459,"parse-svg-path":493,"svg-path-bounds":593}],596:[function(h,G,X){(function(i){(function(){"use strict";G.exports=function r(u,c,l){l=l||{};var f=p[u];f||(f=p[u]={" ":{data:new Float32Array(0),shape:.2}});var s=f[c];if(!s)if(c.length<=1||!/\d/.test(c))s=f[c]=function(C){for(var L=C.cells,P=C.positions,A=new Float32Array(6*L.length),I=0,D=0,R=0;R<L.length;++R)for(var S=L[R],N=0;N<3;++N){var B=P[S[N]];A[I++]=B[0],A[I++]=B[1]+1.4,D=Math.max(B[0],D)}return{data:A,shape:D}}(m(c,{triangles:!0,font:u,textAlign:l.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var o=c.split(/(\d|\s)/),d=new Array(o.length),g=0,y=0,v=0;v<o.length;++v)d[v]=r(u,o[v]),g+=d[v].data.length,y+=d[v].shape,v>0&&(y+=.02);var _=new Float32Array(g),w=0,x=-.5*y;for(v=0;v<d.length;++v){for(var E=d[v].data,k=0;k<E.length;k+=2)_[w++]=E[k]+x,_[w++]=E[k+1];x+=d[v].shape+.02}s=f[c]={data:_,shape:y}}return s};var m=h("vectorize-text"),b=window||i.global||{},p=b.__TEXT_CACHE||{};b.__TEXT_CACHE={}}).call(this)}).call(this,h("_process"))},{_process:528,"vectorize-text":623}],597:[function(h,G,X){(function(i,m){(function(){var b=h("process/browser.js").nextTick,p=Function.prototype.apply,r=Array.prototype.slice,u={},c=0;function l(f,s){this._id=f,this._clearFn=s}X.setTimeout=function(){return new l(p.call(setTimeout,window,arguments),clearTimeout)},X.setInterval=function(){return new l(p.call(setInterval,window,arguments),clearInterval)},X.clearTimeout=X.clearInterval=function(f){f.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},X.enroll=function(f,s){clearTimeout(f._idleTimeoutId),f._idleTimeout=s},X.unenroll=function(f){clearTimeout(f._idleTimeoutId),f._idleTimeout=-1},X._unrefActive=X.active=function(f){clearTimeout(f._idleTimeoutId);var s=f._idleTimeout;s>=0&&(f._idleTimeoutId=setTimeout(function(){f._onTimeout&&f._onTimeout()},s))},X.setImmediate="function"==typeof i?i:function(f){var s=c++,o=!(arguments.length<2)&&r.call(arguments,1);return u[s]=!0,b(function(){u[s]&&(o?f.apply(null,o):f.call(null),X.clearImmediate(s))}),s},X.clearImmediate="function"==typeof m?m:function(f){delete u[f]}}).call(this)}).call(this,h("timers").setImmediate,h("timers").clearImmediate)},{"process/browser.js":528,timers:597}],598:[function(h,G,X){!function(i){var m=/^\s+/,b=/\s+$/,p=0,r=i.round,u=i.min,c=i.max,l=i.random;function f(Z,oe){if(oe=oe||{},(Z=Z||"")instanceof f)return Z;if(!(this instanceof f))return new f(Z,oe);var ue,ze,je,fe,he,de,be,pe,Te,ye,ie=(fe={r:0,g:0,b:0},he=1,de=null,be=null,pe=null,Te=!1,ye=!1,"string"==typeof(ue=Z)&&(ue=function(Ie){Ie=Ie.replace(m,"").replace(b,"").toLowerCase();var Ce,_e=!1;if(R[Ie])Ie=R[Ie],_e=!0;else if("transparent"==Ie)return{r:0,g:0,b:0,a:0,format:"name"};return(Ce=V.rgb.exec(Ie))?{r:Ce[1],g:Ce[2],b:Ce[3]}:(Ce=V.rgba.exec(Ie))?{r:Ce[1],g:Ce[2],b:Ce[3],a:Ce[4]}:(Ce=V.hsl.exec(Ie))?{h:Ce[1],s:Ce[2],l:Ce[3]}:(Ce=V.hsla.exec(Ie))?{h:Ce[1],s:Ce[2],l:Ce[3],a:Ce[4]}:(Ce=V.hsv.exec(Ie))?{h:Ce[1],s:Ce[2],v:Ce[3]}:(Ce=V.hsva.exec(Ie))?{h:Ce[1],s:Ce[2],v:Ce[3],a:Ce[4]}:(Ce=V.hex8.exec(Ie))?{r:Y(Ce[1]),g:Y(Ce[2]),b:Y(Ce[3]),a:te(Ce[4]),format:_e?"name":"hex8"}:(Ce=V.hex6.exec(Ie))?{r:Y(Ce[1]),g:Y(Ce[2]),b:Y(Ce[3]),format:_e?"name":"hex"}:(Ce=V.hex4.exec(Ie))?{r:Y(Ce[1]+""+Ce[1]),g:Y(Ce[2]+""+Ce[2]),b:Y(Ce[3]+""+Ce[3]),a:te(Ce[4]+""+Ce[4]),format:_e?"name":"hex8"}:!!(Ce=V.hex3.exec(Ie))&&{r:Y(Ce[1]+""+Ce[1]),g:Y(Ce[2]+""+Ce[2]),b:Y(Ce[3]+""+Ce[3]),format:_e?"name":"hex"}}(ue)),"object"==typeof ue&&(W(ue.r)&&W(ue.g)&&W(ue.b)?(ze=ue.g,je=ue.b,fe={r:255*B(ue.r,255),g:255*B(ze,255),b:255*B(je,255)},Te=!0,ye="%"===String(ue.r).substr(-1)?"prgb":"rgb"):W(ue.h)&&W(ue.s)&&W(ue.v)?(de=ne(ue.s),be=ne(ue.v),fe=function(Ie,Ce,_e){Ie=6*B(Ie,360),Ce=B(Ce,100),_e=B(_e,100);var we=i.floor(Ie),Se=Ie-we,Oe=_e*(1-Ce),Be=_e*(1-Se*Ce),He=_e*(1-(1-Se)*Ce),Xe=we%6;return{r:255*[_e,Be,Oe,Oe,He,_e][Xe],g:255*[He,_e,_e,Be,Oe,Oe][Xe],b:255*[Oe,Oe,He,_e,_e,Be][Xe]}}(ue.h,de,be),Te=!0,ye="hsv"):W(ue.h)&&W(ue.s)&&W(ue.l)&&(de=ne(ue.s),pe=ne(ue.l),fe=function(Ie,Ce,_e){var we,Se,Oe;function Be(nt,et,qe){return qe<0&&(qe+=1),qe>1&&(qe-=1),qe<1/6?nt+6*(et-nt)*qe:qe<.5?et:qe<2/3?nt+(et-nt)*(2/3-qe)*6:nt}if(Ie=B(Ie,360),Ce=B(Ce,100),_e=B(_e,100),0===Ce)we=Se=Oe=_e;else{var He=_e<.5?_e*(1+Ce):_e+Ce-_e*Ce,Xe=2*_e-He;we=Be(Xe,He,Ie+1/3),Se=Be(Xe,He,Ie),Oe=Be(Xe,He,Ie-1/3)}return{r:255*we,g:255*Se,b:255*Oe}}(ue.h,de,pe),Te=!0,ye="hsl"),ue.hasOwnProperty("a")&&(he=ue.a)),he=N(he),{ok:Te,format:ue.format||ye,r:u(255,c(fe.r,0)),g:u(255,c(fe.g,0)),b:u(255,c(fe.b,0)),a:he});this._originalInput=Z,this._r=ie.r,this._g=ie.g,this._b=ie.b,this._a=ie.a,this._roundA=r(100*this._a)/100,this._format=oe.format||ie.format,this._gradientType=oe.gradientType,this._r<1&&(this._r=r(this._r)),this._g<1&&(this._g=r(this._g)),this._b<1&&(this._b=r(this._b)),this._ok=ie.ok,this._tc_id=p++}function s(Z,oe,ie){Z=B(Z,255),oe=B(oe,255),ie=B(ie,255);var ue,fe,he=c(Z,oe,ie),de=u(Z,oe,ie),be=(he+de)/2;if(he==de)ue=fe=0;else{var pe=he-de;switch(fe=be>.5?pe/(2-he-de):pe/(he+de),he){case Z:ue=(oe-ie)/pe+(oe<ie?6:0);break;case oe:ue=(ie-Z)/pe+2;break;case ie:ue=(Z-oe)/pe+4}ue/=6}return{h:ue,s:fe,l:be}}function o(Z,oe,ie){Z=B(Z,255),oe=B(oe,255),ie=B(ie,255);var ue,fe,he=c(Z,oe,ie),de=u(Z,oe,ie),be=he,pe=he-de;if(fe=0===he?0:pe/he,he==de)ue=0;else{switch(he){case Z:ue=(oe-ie)/pe+(oe<ie?6:0);break;case oe:ue=(ie-Z)/pe+2;break;case ie:ue=(Z-oe)/pe+4}ue/=6}return{h:ue,s:fe,v:be}}function d(Z,oe,ie,ue){var fe=[Q(r(Z).toString(16)),Q(r(oe).toString(16)),Q(r(ie).toString(16))];return ue&&fe[0].charAt(0)==fe[0].charAt(1)&&fe[1].charAt(0)==fe[1].charAt(1)&&fe[2].charAt(0)==fe[2].charAt(1)?fe[0].charAt(0)+fe[1].charAt(0)+fe[2].charAt(0):fe.join("")}function g(Z,oe,ie,ue){return[Q(ae(ue)),Q(r(Z).toString(16)),Q(r(oe).toString(16)),Q(r(ie).toString(16))].join("")}function y(Z,oe){oe=0===oe?0:oe||10;var ie=f(Z).toHsl();return ie.s-=oe/100,ie.s=H(ie.s),f(ie)}function v(Z,oe){oe=0===oe?0:oe||10;var ie=f(Z).toHsl();return ie.s+=oe/100,ie.s=H(ie.s),f(ie)}function _(Z){return f(Z).desaturate(100)}function w(Z,oe){oe=0===oe?0:oe||10;var ie=f(Z).toHsl();return ie.l+=oe/100,ie.l=H(ie.l),f(ie)}function x(Z,oe){oe=0===oe?0:oe||10;var ie=f(Z).toRgb();return ie.r=c(0,u(255,ie.r-r(-oe/100*255))),ie.g=c(0,u(255,ie.g-r(-oe/100*255))),ie.b=c(0,u(255,ie.b-r(-oe/100*255))),f(ie)}function E(Z,oe){oe=0===oe?0:oe||10;var ie=f(Z).toHsl();return ie.l-=oe/100,ie.l=H(ie.l),f(ie)}function k(Z,oe){var ie=f(Z).toHsl(),ue=(ie.h+oe)%360;return ie.h=ue<0?360+ue:ue,f(ie)}function C(Z){var oe=f(Z).toHsl();return oe.h=(oe.h+180)%360,f(oe)}function L(Z){var oe=f(Z).toHsl(),ie=oe.h;return[f(Z),f({h:(ie+120)%360,s:oe.s,l:oe.l}),f({h:(ie+240)%360,s:oe.s,l:oe.l})]}function P(Z){var oe=f(Z).toHsl(),ie=oe.h;return[f(Z),f({h:(ie+90)%360,s:oe.s,l:oe.l}),f({h:(ie+180)%360,s:oe.s,l:oe.l}),f({h:(ie+270)%360,s:oe.s,l:oe.l})]}function A(Z){var oe=f(Z).toHsl(),ie=oe.h;return[f(Z),f({h:(ie+72)%360,s:oe.s,l:oe.l}),f({h:(ie+216)%360,s:oe.s,l:oe.l})]}function I(Z,oe,ie){oe=oe||6,ie=ie||30;var ue=f(Z).toHsl(),fe=360/ie,he=[f(Z)];for(ue.h=(ue.h-(fe*oe>>1)+720)%360;--oe;)ue.h=(ue.h+fe)%360,he.push(f(ue));return he}function D(Z,oe){oe=oe||6;for(var ie=f(Z).toHsv(),ue=ie.h,fe=ie.s,he=ie.v,de=[],be=1/oe;oe--;)de.push(f({h:ue,s:fe,v:he})),he=(he+be)%1;return de}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Z=this.toRgb();return(299*Z.r+587*Z.g+114*Z.b)/1e3},getLuminance:function(){var Z,oe,ie,ue=this.toRgb();return oe=ue.g/255,ie=ue.b/255,.2126*((Z=ue.r/255)<=.03928?Z/12.92:i.pow((Z+.055)/1.055,2.4))+.7152*(oe<=.03928?oe/12.92:i.pow((oe+.055)/1.055,2.4))+.0722*(ie<=.03928?ie/12.92:i.pow((ie+.055)/1.055,2.4))},setAlpha:function(Z){return this._a=N(Z),this._roundA=r(100*this._a)/100,this},toHsv:function(){var Z=o(this._r,this._g,this._b);return{h:360*Z.h,s:Z.s,v:Z.v,a:this._a}},toHsvString:function(){var Z=o(this._r,this._g,this._b),oe=r(360*Z.h),ie=r(100*Z.s),ue=r(100*Z.v);return 1==this._a?"hsv("+oe+", "+ie+"%, "+ue+"%)":"hsva("+oe+", "+ie+"%, "+ue+"%, "+this._roundA+")"},toHsl:function(){var Z=s(this._r,this._g,this._b);return{h:360*Z.h,s:Z.s,l:Z.l,a:this._a}},toHslString:function(){var Z=s(this._r,this._g,this._b),oe=r(360*Z.h),ie=r(100*Z.s),ue=r(100*Z.l);return 1==this._a?"hsl("+oe+", "+ie+"%, "+ue+"%)":"hsla("+oe+", "+ie+"%, "+ue+"%, "+this._roundA+")"},toHex:function(Z){return d(this._r,this._g,this._b,Z)},toHexString:function(Z){return"#"+this.toHex(Z)},toHex8:function(Z){return ie=this._g,ue=this._b,fe=this._a,he=Z,de=[Q(r(this._r).toString(16)),Q(r(ie).toString(16)),Q(r(ue).toString(16)),Q(ae(fe))],he&&de[0].charAt(0)==de[0].charAt(1)&&de[1].charAt(0)==de[1].charAt(1)&&de[2].charAt(0)==de[2].charAt(1)&&de[3].charAt(0)==de[3].charAt(1)?de[0].charAt(0)+de[1].charAt(0)+de[2].charAt(0)+de[3].charAt(0):de.join("");var ie,ue,fe,he,de},toHex8String:function(Z){return"#"+this.toHex8(Z)},toRgb:function(){return{r:r(this._r),g:r(this._g),b:r(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+r(this._r)+", "+r(this._g)+", "+r(this._b)+")":"rgba("+r(this._r)+", "+r(this._g)+", "+r(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:r(100*B(this._r,255))+"%",g:r(100*B(this._g,255))+"%",b:r(100*B(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+r(100*B(this._r,255))+"%, "+r(100*B(this._g,255))+"%, "+r(100*B(this._b,255))+"%)":"rgba("+r(100*B(this._r,255))+"%, "+r(100*B(this._g,255))+"%, "+r(100*B(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(S[d(this._r,this._g,this._b,!0)]||!1)},toFilter:function(Z){var oe="#"+g(this._r,this._g,this._b,this._a),ie=oe,ue=this._gradientType?"GradientType = 1, ":"";if(Z){var fe=f(Z);ie="#"+g(fe._r,fe._g,fe._b,fe._a)}return"progid:DXImageTransform.Microsoft.gradient("+ue+"startColorstr="+oe+",endColorstr="+ie+")"},toString:function(Z){var oe=!!Z;Z=Z||this._format;var ie=!1;return oe||!(this._a<1&&this._a>=0)||"hex"!==Z&&"hex6"!==Z&&"hex3"!==Z&&"hex4"!==Z&&"hex8"!==Z&&"name"!==Z?("rgb"===Z&&(ie=this.toRgbString()),"prgb"===Z&&(ie=this.toPercentageRgbString()),"hex"!==Z&&"hex6"!==Z||(ie=this.toHexString()),"hex3"===Z&&(ie=this.toHexString(!0)),"hex4"===Z&&(ie=this.toHex8String(!0)),"hex8"===Z&&(ie=this.toHex8String()),"name"===Z&&(ie=this.toName()),"hsl"===Z&&(ie=this.toHslString()),"hsv"===Z&&(ie=this.toHsvString()),ie||this.toHexString()):"name"===Z&&0===this._a?this.toName():this.toRgbString()},clone:function(){return f(this.toString())},_applyModification:function(Z,oe){var ie=Z.apply(null,[this].concat([].slice.call(oe)));return this._r=ie._r,this._g=ie._g,this._b=ie._b,this.setAlpha(ie._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(E,arguments)},desaturate:function(){return this._applyModification(y,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(_,arguments)},spin:function(){return this._applyModification(k,arguments)},_applyCombination:function(Z,oe){return Z.apply(null,[this].concat([].slice.call(oe)))},analogous:function(){return this._applyCombination(I,arguments)},complement:function(){return this._applyCombination(C,arguments)},monochromatic:function(){return this._applyCombination(D,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(L,arguments)},tetrad:function(){return this._applyCombination(P,arguments)}},f.fromRatio=function(Z,oe){if("object"==typeof Z){var ie={};for(var ue in Z)Z.hasOwnProperty(ue)&&(ie[ue]="a"===ue?Z[ue]:ne(Z[ue]));Z=ie}return f(Z,oe)},f.equals=function(Z,oe){return!(!Z||!oe)&&f(Z).toRgbString()==f(oe).toRgbString()},f.random=function(){return f.fromRatio({r:l(),g:l(),b:l()})},f.mix=function(Z,oe,ie){ie=0===ie?0:ie||50;var ue=f(Z).toRgb(),fe=f(oe).toRgb(),he=ie/100;return f({r:(fe.r-ue.r)*he+ue.r,g:(fe.g-ue.g)*he+ue.g,b:(fe.b-ue.b)*he+ue.b,a:(fe.a-ue.a)*he+ue.a})},f.readability=function(Z,oe){var ie=f(Z),ue=f(oe);return(i.max(ie.getLuminance(),ue.getLuminance())+.05)/(i.min(ie.getLuminance(),ue.getLuminance())+.05)},f.isReadable=function(Z,oe,ie){var ue,fe,de,be,pe,he=f.readability(Z,oe);switch(fe=!1,(de=ie,"AA"!==(be=((de=de||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==be&&(be="AA"),"small"!==(pe=(de.size||"small").toLowerCase())&&"large"!==pe&&(pe="small"),ue={level:be,size:pe}).level+ue.size){case"AAsmall":case"AAAlarge":fe=he>=4.5;break;case"AAlarge":fe=he>=3;break;case"AAAsmall":fe=he>=7}return fe},f.mostReadable=function(Z,oe,ie){var ue,fe,he,de,be=null,pe=0;fe=(ie=ie||{}).includeFallbackColors,he=ie.level,de=ie.size;for(var Te=0;Te<oe.length;Te++)(ue=f.readability(Z,oe[Te]))>pe&&(pe=ue,be=f(oe[Te]));return f.isReadable(Z,be,{level:he,size:de})||!fe?be:(ie.includeFallbackColors=!1,f.mostReadable(Z,["#fff","#000"],ie))};var R=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=f.hexNames=function(Z){var oe={};for(var ie in Z)Z.hasOwnProperty(ie)&&(oe[Z[ie]]=ie);return oe}(R);function N(Z){return Z=parseFloat(Z),(isNaN(Z)||Z<0||Z>1)&&(Z=1),Z}function B(Z,oe){var ue;"string"==typeof(ue=Z)&&-1!=ue.indexOf(".")&&1===parseFloat(ue)&&(Z="100%");var ie=function(ue){return"string"==typeof ue&&-1!=ue.indexOf("%")}(Z);return Z=u(oe,c(0,parseFloat(Z))),ie&&(Z=parseInt(Z*oe,10)/100),i.abs(Z-oe)<1e-6?1:Z%oe/parseFloat(oe)}function H(Z){return u(1,c(0,Z))}function Y(Z){return parseInt(Z,16)}function Q(Z){return 1==Z.length?"0"+Z:""+Z}function ne(Z){return Z<=1&&(Z=100*Z+"%"),Z}function ae(Z){return i.round(255*parseFloat(Z)).toString(16)}function te(Z){return Y(Z)/255}var K,q,re,V=(q="[\\s|\\(]+("+(K="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+K+")[,|\\s]+("+K+")\\s*\\)?",re="[\\s|\\(]+("+K+")[,|\\s]+("+K+")[,|\\s]+("+K+")[,|\\s]+("+K+")\\s*\\)?",{CSS_UNIT:new RegExp(K),rgb:new RegExp("rgb"+q),rgba:new RegExp("rgba"+re),hsl:new RegExp("hsl"+q),hsla:new RegExp("hsla"+re),hsv:new RegExp("hsv"+q),hsva:new RegExp("hsva"+re),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function W(Z){return!!V.CSS_UNIT.exec(Z)}void 0!==G&&G.exports?G.exports=f:window.tinycolor=f}(Math)},{}],599:[function(h,G,X){"use strict";G.exports=m,G.exports.float32=G.exports.float=m,G.exports.fract32=G.exports.fract=function(b,p){if(b.length){if(b instanceof Float32Array)return new Float32Array(b.length);p instanceof Float32Array||(p=m(b));for(var r=0,u=p.length;r<u;r++)p[r]=b[r]-p[r];return p}return m(b-m(b))};var i=new Float32Array(1);function m(b){return b.length?b instanceof Float32Array?b:new Float32Array(b):(i[0]=b,i[0])}},{}],600:[function(h,G,X){"use strict";var i=h("parse-unit");function m(p,r){var u=i(getComputedStyle(p).getPropertyValue(r));return u[0]*b(u[1],p)}function b(p,r){switch(r=r||document.body,p=(p||"px").trim().toLowerCase(),r!==window&&r!==document||(r=document.body),p){case"%":return r.clientHeight/100;case"ch":case"ex":return function(u,c){var l=document.createElement("div");l.style["font-size"]="128"+u,c.appendChild(l);var f=m(l,"font-size")/128;return c.removeChild(l),f}(p,r);case"em":return m(r,"font-size");case"rem":return m(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}G.exports=b},{"parse-unit":494}],601:[function(h,G,X){var i;i=this,function(i){"use strict";function m(g){return g}function b(g){if(null==g)return m;var y,v,_=g.scale[0],w=g.scale[1],x=g.translate[0],E=g.translate[1];return function(k,C){C||(y=v=0);var L=2,P=k.length,A=new Array(P);for(A[0]=(y+=k[0])*_+x,A[1]=(v+=k[1])*w+E;L<P;)A[L]=k[L],++L;return A}}function p(g){var y,v=b(g.transform),_=1/0,w=_,x=-_,E=-_;function k(L){(L=v(L))[0]<_&&(_=L[0]),L[0]>x&&(x=L[0]),L[1]<w&&(w=L[1]),L[1]>E&&(E=L[1])}function C(L){switch(L.type){case"GeometryCollection":L.geometries.forEach(C);break;case"Point":k(L.coordinates);break;case"MultiPoint":L.coordinates.forEach(k)}}for(y in g.arcs.forEach(function(L){for(var P,A=-1,I=L.length;++A<I;)(P=v(L[A],A))[0]<_&&(_=P[0]),P[0]>x&&(x=P[0]),P[1]<w&&(w=P[1]),P[1]>E&&(E=P[1])}),g.objects)C(g.objects[y]);return[_,w,x,E]}function r(g,y){var v=y.id,_=y.bbox,w=null==y.properties?{}:y.properties,x=u(g,y);return null==v&&null==_?{type:"Feature",properties:w,geometry:x}:null==_?{type:"Feature",id:v,properties:w,geometry:x}:{type:"Feature",id:v,bbox:_,properties:w,geometry:x}}function u(g,y){var v=b(g.transform),_=g.arcs;function w(L,P){P.length&&P.pop();for(var A=_[L<0?~L:L],I=0,D=A.length;I<D;++I)P.push(v(A[I],I));L<0&&function(R,S){for(var N,B=R.length,H=B-S;H<--B;)N=R[H],R[H++]=R[B],R[B]=N}(P,D)}function x(L){return v(L)}function E(L){for(var P=[],A=0,I=L.length;A<I;++A)w(L[A],P);return P.length<2&&P.push(P[0]),P}function k(L){for(var P=E(L);P.length<4;)P.push(P[0]);return P}function C(L){return L.map(k)}return function L(P){var A,I=P.type;switch(I){case"GeometryCollection":return{type:I,geometries:P.geometries.map(L)};case"Point":A=x(P.coordinates);break;case"MultiPoint":A=P.coordinates.map(x);break;case"LineString":A=E(P.arcs);break;case"MultiLineString":A=P.arcs.map(E);break;case"Polygon":A=C(P.arcs);break;case"MultiPolygon":A=P.arcs.map(C);break;default:return null}return{type:I,coordinates:A}}(y)}function c(g,y){var v={},_={},w={},x=[],E=-1;function k(C,L){for(var P in C){var A=C[P];delete L[A.start],delete A.start,delete A.end,A.forEach(function(I){v[I<0?~I:I]=1}),x.push(A)}}return y.forEach(function(C,L){var P,A=g.arcs[C<0?~C:C];A.length<3&&!A[1][0]&&!A[1][1]&&(P=y[++E],y[E]=C,y[L]=P)}),y.forEach(function(C){var L,P,N,B,H,Y,A=(Y=(H=g.arcs[(N=C)<0?~N:N])[0],g.transform?(B=[0,0],H.forEach(function(Q){B[0]+=Q[0],B[1]+=Q[1]})):B=H[H.length-1],N<0?[B,Y]:[Y,B]),I=A[0],D=A[1];if(L=w[I])if(delete w[L.end],L.push(C),L.end=D,P=_[D]){delete _[P.start];var R=P===L?L:L.concat(P);_[R.start=L.start]=w[R.end=P.end]=R}else _[L.start]=w[L.end]=L;else if(L=_[D])if(delete _[L.start],L.unshift(C),L.start=I,P=w[I]){delete w[P.end];var S=P===L?L:P.concat(L);_[S.start=P.start]=w[S.end=L.end]=S}else _[L.start]=w[L.end]=L;else _[(L=[C]).start=I]=w[L.end=D]=L}),k(w,_),k(_,w),y.forEach(function(C){v[C<0?~C:C]||x.push([C])}),x}function l(g,y,v){var _,w,x;if(arguments.length>1)_=f(0,y,v);else for(w=0,_=new Array(x=g.arcs.length);w<x;++w)_[w]=w;return{type:"MultiLineString",arcs:c(g,_)}}function f(g,y,v){var _,w=[],x=[];function E(L){var P=L<0?~L:L;(x[P]||(x[P]=[])).push({i:L,g:_})}function k(L){L.forEach(E)}function C(L){L.forEach(k)}return function L(P){switch(_=P,P.type){case"GeometryCollection":P.geometries.forEach(L);break;case"LineString":k(P.arcs);break;case"MultiLineString":case"Polygon":C(P.arcs);break;case"MultiPolygon":P.arcs.forEach(C)}}(y),x.forEach(null==v?function(L){w.push(L[0].i)}:function(L){v(L[0].g,L[L.length-1].g)&&w.push(L[0].i)}),w}function s(g,y){var v={},_=[],w=[];function x(k){k.forEach(function(C){C.forEach(function(L){(v[L=L<0?~L:L]||(v[L]=[])).push(k)})}),_.push(k)}function E(k){return function(C){for(var L,P=-1,A=C.length,I=C[A-1],D=0;++P<A;)D+=(L=I)[0]*(I=C[P])[1]-L[1]*I[0];return Math.abs(D)}(u(g,{type:"Polygon",arcs:[k]}).coordinates[0])}return y.forEach(function k(C){switch(C.type){case"GeometryCollection":C.geometries.forEach(k);break;case"Polygon":x(C.arcs);break;case"MultiPolygon":C.arcs.forEach(x)}}),_.forEach(function(k){if(!k._){var C=[],L=[k];for(k._=1,w.push(C);k=L.pop();)C.push(k),k.forEach(function(P){P.forEach(function(A){v[A<0?~A:A].forEach(function(I){I._||(I._=1,L.push(I))})})})}}),_.forEach(function(k){delete k._}),{type:"MultiPolygon",arcs:w.map(function(k){var C,L=[];if(k.forEach(function(R){R.forEach(function(S){S.forEach(function(N){v[N<0?~N:N].length<2&&L.push(N)})})}),(C=(L=c(g,L)).length)>1)for(var P,A,I=1,D=E(L[0]);I<C;++I)(P=E(L[I]))>D&&(A=L[0],L[0]=L[I],L[I]=A,D=P);return L}).filter(function(k){return k.length>0})}}function o(g,y){for(var v=0,_=g.length;v<_;){var w=v+_>>>1;g[w]<y?v=w+1:_=w}return v}function d(g){if(null==g)return m;var y,v,_=g.scale[0],w=g.scale[1],x=g.translate[0],E=g.translate[1];return function(k,C){C||(y=v=0);var L=2,P=k.length,A=new Array(P),I=Math.round((k[0]-x)/_),D=Math.round((k[1]-E)/w);for(A[0]=I-y,y=I,A[1]=D-v,v=D;L<P;)A[L]=k[L],++L;return A}}i.bbox=p,i.feature=function(g,y){return"string"==typeof y&&(y=g.objects[y]),"GeometryCollection"===y.type?{type:"FeatureCollection",features:y.geometries.map(function(v){return r(g,v)})}:r(g,y)},i.merge=function(g){return u(g,s.apply(this,arguments))},i.mergeArcs=s,i.mesh=function(g){return u(g,l.apply(this,arguments))},i.meshArcs=l,i.neighbors=function(g){var y={},v=g.map(function(){return[]});function _(R,S){R.forEach(function(N){N<0&&(N=~N);var B=y[N];B?B.push(S):y[N]=[S]})}function w(R,S){R.forEach(function(N){_(N,S)})}var x={LineString:_,MultiLineString:w,Polygon:w,MultiPolygon:function(R,S){R.forEach(function(N){w(N,S)})}};for(var E in g.forEach(function R(S,N){"GeometryCollection"===S.type?S.geometries.forEach(function(B){R(B,N)}):S.type in x&&x[S.type](S.arcs,N)}),y)for(var k=y[E],C=k.length,L=0;L<C;++L)for(var P=L+1;P<C;++P){var A,I=k[L],D=k[P];(A=v[I])[E=o(A,D)]!==D&&A.splice(E,0,D),(A=v[D])[E=o(A,I)]!==I&&A.splice(E,0,I)}return v},i.quantize=function(g,y){if(g.transform)throw new Error("already quantized");if(y&&y.scale)k=g.bbox;else{if(!((v=Math.floor(y))>=2))throw new Error("n must be \u22652");var v,_=(k=g.bbox||p(g))[0],w=k[1],x=k[2],E=k[3];y={scale:[x-_?(x-_)/(v-1):1,E-w?(E-w)/(v-1):1],translate:[_,w]}}var k,C,L=d(y),P=g.objects,A={};function I(R){return L(R)}function D(R){var S;switch(R.type){case"GeometryCollection":S={type:"GeometryCollection",geometries:R.geometries.map(D)};break;case"Point":S={type:"Point",coordinates:I(R.coordinates)};break;case"MultiPoint":S={type:"MultiPoint",coordinates:R.coordinates.map(I)};break;default:return R}return null!=R.id&&(S.id=R.id),null!=R.bbox&&(S.bbox=R.bbox),null!=R.properties&&(S.properties=R.properties),S}for(C in P)A[C]=D(P[C]);return{type:"Topology",bbox:k,transform:y,objects:A,arcs:g.arcs.map(function(R){var S,N=0,B=1,H=R.length,Y=new Array(H);for(Y[0]=L(R[0],0);++N<H;)((S=L(R[N],N))[0]||S[1])&&(Y[B++]=S);return 1===B&&(Y[B++]=[0,0]),Y.length=B,Y})}},i.transform=b,i.untransform=d,Object.defineProperty(i,"__esModule",{value:!0})}("object"==typeof X&&void 0!==G?X:(i=i||self).topojson=i.topojson||{})},{}],602:[function(h,G,X){"use strict";G.exports=function(p){if(p<0)return[];if(0===p)return[[0]];for(var r=0|Math.round(b(p+1)),u=[],c=0;c<r;++c){for(var l=i.unrank(p,c),f=[0],s=0,o=0;o<l.length;++o)f.push(s+=1<<l[o]);m(l)<1&&(f[0]=s,f[p]=0),u.push(f)}return u};var i=h("permutation-rank"),m=h("permutation-parity"),b=h("gamma")},{gamma:256,"permutation-parity":496,"permutation-rank":497}],603:[function(h,G,X){"use strict";G.exports=function(g){var y=(g=g||{}).center||[0,0,0],v=g.up||[0,1,0],_=g.right||f(v),w=g.radius||1,x=g.theta||0,E=g.phi||0;if(y=[].slice.call(y,0,3),v=[].slice.call(v,0,3),r(v,v),_=[].slice.call(_,0,3),r(_,_),"eye"in g){var k=g.eye,C=[k[0]-y[0],k[1]-y[1],k[2]-y[2]];p(_,C,v),c(_[0],_[1],_[2])<1e-6?_=f(v):r(_,_),w=c(C[0],C[1],C[2]);var L=u(v,C)/w,P=u(_,C)/w;E=Math.acos(L),x=Math.acos(P)}return w=Math.log(w),new s(g.zoomMin,g.zoomMax,y,v,_,w,x,E)};var i=h("filtered-vector"),m=h("gl-mat4/invert"),b=h("gl-mat4/rotate"),p=h("gl-vec3/cross"),r=h("gl-vec3/normalize"),u=h("gl-vec3/dot");function c(g,y,v){return Math.sqrt(Math.pow(g,2)+Math.pow(y,2)+Math.pow(v,2))}function l(g){return Math.min(1,Math.max(-1,g))}function f(g){var y=Math.abs(g[0]),v=Math.abs(g[1]),_=Math.abs(g[2]),w=[0,0,0];y>Math.max(v,_)?w[2]=1:v>Math.max(y,_)?w[0]=1:w[1]=1;for(var x=0,E=0,k=0;k<3;++k)x+=g[k]*g[k],E+=w[k]*g[k];for(k=0;k<3;++k)w[k]-=E/x*g[k];return r(w,w),w}function s(g,y,v,_,w,x,E,k){this.center=i(v),this.up=i(_),this.right=i(w),this.radius=i([x]),this.angle=i([E,k]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(g,y),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var o=s.prototype;o.setDistanceLimits=function(g,y){g=g>0?Math.log(g):-1/0,y=y>0?Math.log(y):1/0,y=Math.max(y,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=y},o.getDistanceLimits=function(g){var y=this.radius.bounds[0];return g?(g[0]=Math.exp(y[0][0]),g[1]=Math.exp(y[1][0]),g):[Math.exp(y[0][0]),Math.exp(y[1][0])]},o.recalcMatrix=function(g){this.center.curve(g),this.up.curve(g),this.right.curve(g),this.radius.curve(g),this.angle.curve(g);for(var y=this.computedUp,v=this.computedRight,_=0,w=0,x=0;x<3;++x)w+=y[x]*v[x],_+=y[x]*y[x];var E=Math.sqrt(_),k=0;for(x=0;x<3;++x)v[x]-=y[x]*w/_,k+=v[x]*v[x],y[x]/=E;var C=Math.sqrt(k);for(x=0;x<3;++x)v[x]/=C;var L=this.computedToward;p(L,y,v),r(L,L);var P=Math.exp(this.computedRadius[0]),A=this.computedAngle[0],I=this.computedAngle[1],D=Math.cos(A),R=Math.sin(A),S=Math.cos(I),N=Math.sin(I),B=this.computedCenter,H=D*S,Y=R*S,Q=N,ne=-D*N,ae=-R*N,te=S,K=this.computedEye,q=this.computedMatrix;for(x=0;x<3;++x){var re=H*v[x]+Y*L[x]+Q*y[x];q[4*x+1]=ne*v[x]+ae*L[x]+te*y[x],q[4*x+2]=re,q[4*x+3]=0}var V=q[1],W=q[5],Z=q[9],oe=q[2],ie=q[6],ue=q[10],fe=W*ue-Z*ie,he=Z*oe-V*ue,de=V*ie-W*oe,be=c(fe,he,de);for(he/=be,de/=be,q[0]=fe/=be,q[4]=he,q[8]=de,x=0;x<3;++x)K[x]=B[x]+q[2+4*x]*P;for(x=0;x<3;++x){k=0;for(var pe=0;pe<3;++pe)k+=q[x+4*pe]*K[pe];q[12+x]=-k}q[15]=1},o.getMatrix=function(g,y){this.recalcMatrix(g);var v=this.computedMatrix;if(y){for(var _=0;_<16;++_)y[_]=v[_];return y}return v};var d=[0,0,0];o.rotate=function(g,y,v,_){if(this.angle.move(g,y,v),_){this.recalcMatrix(g);var w=this.computedMatrix;d[0]=w[2],d[1]=w[6],d[2]=w[10];for(var x=this.computedUp,E=this.computedRight,k=this.computedToward,C=0;C<3;++C)w[4*C]=x[C],w[4*C+1]=E[C],w[4*C+2]=k[C];for(b(w,w,_,d),C=0;C<3;++C)x[C]=w[4*C],E[C]=w[4*C+1];this.up.set(g,x[0],x[1],x[2]),this.right.set(g,E[0],E[1],E[2])}},o.pan=function(g,y,v,_){y=y||0,v=v||0,_=_||0,this.recalcMatrix(g);var w=this.computedMatrix,x=(Math.exp(this.computedRadius[0]),w[1]),E=w[5],k=w[9],C=c(x,E,k),L=w[0],P=w[4],A=w[8],I=L*(x/=C)+P*(E/=C)+A*(k/=C),D=c(L-=x*I,P-=E*I,A-=k*I),R=(L/=D)*y+x*v,S=(P/=D)*y+E*v,N=(A/=D)*y+k*v;this.center.move(g,R,S,N);var B=Math.exp(this.computedRadius[0]);B=Math.max(1e-4,B+_),this.radius.set(g,Math.log(B))},o.translate=function(g,y,v,_){this.center.move(g,y||0,v||0,_||0)},o.setMatrix=function(g,y,v,_){var w=1;"number"==typeof v&&(w=0|v),(w<0||w>3)&&(w=1);var x=(w+2)%3;y||(this.recalcMatrix(g),y=this.computedMatrix);var E=y[w],k=y[w+4],C=y[w+8];if(_){var L=Math.abs(E),P=Math.abs(k),A=Math.abs(C),I=Math.max(L,P,A);L===I?(E=E<0?-1:1,k=C=0):A===I?(C=C<0?-1:1,E=k=0):(k=k<0?-1:1,E=C=0)}else{var D=c(E,k,C);E/=D,k/=D,C/=D}var R,S,N=y[x],B=y[x+4],H=y[x+8],Y=N*E+B*k+H*C,Q=c(N-=E*Y,B-=k*Y,H-=C*Y),ne=k*(H/=Q)-C*(B/=Q),ae=C*(N/=Q)-E*H,te=E*B-k*N,K=c(ne,ae,te);if(ne/=K,ae/=K,te/=K,this.center.jump(g,ze,je,Ie),this.radius.idle(g),this.up.jump(g,E,k,C),this.right.jump(g,N,B,H),2===w){var q=y[1],re=y[5],V=y[9];R=fe<0?-Math.PI/2:Math.PI/2,S=Math.atan2(q*ne+re*ae+V*te,q*N+re*B+V*H)}else{var oe=y[2],ie=y[6],ue=y[10],fe=oe*E+ie*k+ue*C,he=oe*N+ie*B+ue*H,de=oe*ne+ie*ae+ue*te;R=Math.asin(l(fe)),S=Math.atan2(de,he)}this.angle.jump(g,S,R),this.recalcMatrix(g);var be=y[2],pe=y[6],Te=y[10],ye=this.computedMatrix;m(ye,y);var ke=ye[15],ze=ye[12]/ke,je=ye[13]/ke,Ie=ye[14]/ke,Ce=Math.exp(this.computedRadius[0]);this.center.jump(g,ze-be*Ce,je-pe*Ce,Ie-Te*Ce)},o.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},o.idle=function(g){this.center.idle(g),this.up.idle(g),this.right.idle(g),this.radius.idle(g),this.angle.idle(g)},o.flush=function(g){this.center.flush(g),this.up.flush(g),this.right.flush(g),this.radius.flush(g),this.angle.flush(g)},o.setDistance=function(g,y){y>0&&this.radius.set(g,Math.log(y))},o.lookAt=function(g,y,v,_){this.recalcMatrix(g),y=y||this.computedEye,v=v||this.computedCenter;var w=(_=_||this.computedUp)[0],x=_[1],E=_[2],k=c(w,x,E);if(!(k<1e-6)){w/=k,x/=k,E/=k;var C=y[0]-v[0],L=y[1]-v[1],P=y[2]-v[2],A=c(C,L,P);if(!(A<1e-6)){C/=A,L/=A,P/=A;var I=this.computedRight,D=I[0],R=I[1],S=I[2],N=w*D+x*R+E*S,B=c(D-=N*w,R-=N*x,S-=N*E);if(!(B<.01&&(B=c(D=x*P-E*L,R=E*C-w*P,S=w*L-x*C))<1e-6)){D/=B,R/=B,S/=B,this.up.set(g,w,x,E),this.right.set(g,D,R,S),this.center.set(g,v[0],v[1],v[2]),this.radius.set(g,Math.log(A));var H=x*S-E*R,Y=E*D-w*S,Q=w*R-x*D,ne=c(H,Y,Q),te=D*C+R*L+S*P,K=(H/=ne)*C+(Y/=ne)*L+(Q/=ne)*P,q=Math.asin(l(w*C+x*L+E*P)),re=Math.atan2(K,te),V=this.angle._state,W=V[V.length-1],Z=V[V.length-2];W%=2*Math.PI;var oe=Math.abs(W+2*Math.PI-re),ie=Math.abs(W-re),ue=Math.abs(W-2*Math.PI-re);oe<ie&&(W+=2*Math.PI),ue<ie&&(W-=2*Math.PI),this.angle.jump(this.angle.lastT(),W,Z),this.angle.set(g,re,q)}}}}},{"filtered-vector":250,"gl-mat4/invert":299,"gl-mat4/rotate":305,"gl-vec3/cross":368,"gl-vec3/dot":373,"gl-vec3/normalize":390}],604:[function(h,G,X){"use strict";G.exports=function(m,b,p){var r=m*b,u=i*m,c=u-(u-m),l=m-c,f=i*b,s=f-(f-b),o=b-s,d=l*o-(r-c*s-l*s-c*o);return p?(p[0]=d,p[1]=r,p):[d,r]};var i=+(Math.pow(2,27)+1)},{}],605:[function(h,G,X){"use strict";G.exports=function(i,m,b){var p=i+m,r=p-i,u=m-r,c=i-(p-r);return b?(b[0]=c+u,b[1]=p,b):[c+u,p]}},{}],606:[function(h,G,X){"use strict";var i=h("../prototype/is");G.exports=function(m){if("function"!=typeof m||!hasOwnProperty.call(m,"length"))return!1;try{if("number"!=typeof m.length||"function"!=typeof m.call||"function"!=typeof m.apply)return!1}catch(b){return!1}return!i(m)}},{"../prototype/is":613}],607:[function(h,G,X){"use strict";var i=h("../value/is"),m=h("../object/is"),b=h("../string/coerce"),p=h("./to-short-string"),r=function(u,c){return u.replace("%v",p(c))};G.exports=function(u,c,l){if(!m(l))throw new TypeError(r(c,u));if(!i(u)){if("default"in l)return l.default;if(l.isOptional)return null}var f=b(l.errorMessage);throw i(f)||(f=c),new TypeError(r(f,u))}},{"../object/is":610,"../string/coerce":614,"../value/is":616,"./to-short-string":609}],608:[function(h,G,X){"use strict";G.exports=function(i){try{return i.toString()}catch(m){try{return String(i)}catch(b){return null}}}},{}],609:[function(h,G,X){"use strict";var i=h("./safe-to-string"),m=/[\n\r\u2028\u2029]/g;G.exports=function(b){var p=i(b);return null===p?"<Non-coercible to string value>":(p.length>100&&(p=p.slice(0,99)+"\u2026"),p=p.replace(m,function(r){switch(r){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":608}],610:[function(h,G,X){"use strict";var i=h("../value/is"),m={object:!0,function:!0,undefined:!0};G.exports=function(b){return!!i(b)&&hasOwnProperty.call(m,typeof b)}},{"../value/is":616}],611:[function(h,G,X){"use strict";var i=h("../lib/resolve-exception"),m=h("./is");G.exports=function(b){return m(b)?b:i(b,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":607,"./is":612}],612:[function(h,G,X){"use strict";var i=h("../function/is"),m=/^\s*class[\s{/}]/,b=Function.prototype.toString;G.exports=function(p){return!!i(p)&&!m.test(b.call(p))}},{"../function/is":606}],613:[function(h,G,X){"use strict";var i=h("../object/is");G.exports=function(m){if(!i(m))return!1;try{return!!m.constructor&&m.constructor.prototype===m}catch(b){return!1}}},{"../object/is":610}],614:[function(h,G,X){"use strict";var i=h("../value/is"),m=h("../object/is"),b=Object.prototype.toString;G.exports=function(p){if(!i(p))return null;if(m(p)){var r=p.toString;if("function"!=typeof r||r===b)return null}try{return""+p}catch(u){return null}}},{"../object/is":610,"../value/is":616}],615:[function(h,G,X){"use strict";var i=h("../lib/resolve-exception"),m=h("./is");G.exports=function(b){return m(b)?b:i(b,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":607,"./is":616}],616:[function(h,G,X){"use strict";G.exports=function(i){return null!=i}},{}],617:[function(h,G,X){(function(i){(function(){"use strict";var m=h("bit-twiddle"),b=h("dup"),p=h("buffer").Buffer;i.__TYPEDARRAY_POOL||(i.__TYPEDARRAY_POOL={UINT8:b([32,0]),UINT16:b([32,0]),UINT32:b([32,0]),BIGUINT64:b([32,0]),INT8:b([32,0]),INT16:b([32,0]),INT32:b([32,0]),BIGINT64:b([32,0]),FLOAT:b([32,0]),DOUBLE:b([32,0]),DATA:b([32,0]),UINT8C:b([32,0]),BUFFER:b([32,0])});var r="undefined"!=typeof Uint8ClampedArray,u="undefined"!=typeof BigUint64Array,c="undefined"!=typeof BigInt64Array,l=i.__TYPEDARRAY_POOL;l.UINT8C||(l.UINT8C=b([32,0])),l.BIGUINT64||(l.BIGUINT64=b([32,0])),l.BIGINT64||(l.BIGINT64=b([32,0])),l.BUFFER||(l.BUFFER=b([32,0]));var f=l.DATA,s=l.BUFFER;function o(D){if(D){var S=m.log2(D.length||D.byteLength);f[S].push(D)}}function d(D){D=m.nextPow2(D);var R=m.log2(D),S=f[R];return S.length>0?S.pop():new ArrayBuffer(D)}function g(D){return new Uint8Array(d(D),0,D)}function y(D){return new Uint16Array(d(2*D),0,D)}function v(D){return new Uint32Array(d(4*D),0,D)}function _(D){return new Int8Array(d(D),0,D)}function w(D){return new Int16Array(d(2*D),0,D)}function x(D){return new Int32Array(d(4*D),0,D)}function E(D){return new Float32Array(d(4*D),0,D)}function k(D){return new Float64Array(d(8*D),0,D)}function C(D){return r?new Uint8ClampedArray(d(D),0,D):g(D)}function L(D){return u?new BigUint64Array(d(8*D),0,D):null}function P(D){return c?new BigInt64Array(d(8*D),0,D):null}function A(D){return new DataView(d(D),0,D)}function I(D){D=m.nextPow2(D);var R=m.log2(D),S=s[R];return S.length>0?S.pop():new p(D)}X.free=function(D){if(p.isBuffer(D))s[m.log2(D.length)].push(D);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(D)&&(D=D.buffer),!D)return;var S=0|m.log2(D.length||D.byteLength);f[S].push(D)}},X.freeUint8=X.freeUint16=X.freeUint32=X.freeBigUint64=X.freeInt8=X.freeInt16=X.freeInt32=X.freeBigInt64=X.freeFloat32=X.freeFloat=X.freeFloat64=X.freeDouble=X.freeUint8Clamped=X.freeDataView=function(D){o(D.buffer)},X.freeArrayBuffer=o,X.freeBuffer=function(D){s[m.log2(D.length)].push(D)},X.malloc=function(D,R){if(void 0===R||"arraybuffer"===R)return d(D);switch(R){case"uint8":return g(D);case"uint16":return y(D);case"uint32":return v(D);case"int8":return _(D);case"int16":return w(D);case"int32":return x(D);case"float":case"float32":return E(D);case"double":case"float64":return k(D);case"uint8_clamped":return C(D);case"bigint64":return P(D);case"biguint64":return L(D);case"buffer":return I(D);case"data":case"dataview":return A(D);default:return null}return null},X.mallocArrayBuffer=d,X.mallocUint8=g,X.mallocUint16=y,X.mallocUint32=v,X.mallocInt8=_,X.mallocInt16=w,X.mallocInt32=x,X.mallocFloat32=X.mallocFloat=E,X.mallocFloat64=X.mallocDouble=k,X.mallocUint8Clamped=C,X.mallocBigUint64=L,X.mallocBigInt64=P,X.mallocDataView=A,X.mallocBuffer=I,X.clearCache=function(){for(var D=0;D<32;++D)l.UINT8[D].length=0,l.UINT16[D].length=0,l.UINT32[D].length=0,l.INT8[D].length=0,l.INT16[D].length=0,l.INT32[D].length=0,l.FLOAT[D].length=0,l.DOUBLE[D].length=0,l.BIGUINT64[D].length=0,l.BIGINT64[D].length=0,l.UINT8C[D].length=0,f[D].length=0,s[D].length=0}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":104,buffer:117,dup:185}],618:[function(h,G,X){"use strict";function i(b){this.roots=new Array(b),this.ranks=new Array(b);for(var p=0;p<b;++p)this.roots[p]=p,this.ranks[p]=0}G.exports=i;var m=i.prototype;Object.defineProperty(m,"length",{get:function(){return this.roots.length}}),m.makeSet=function(){var b=this.roots.length;return this.roots.push(b),this.ranks.push(0),b},m.find=function(b){for(var p=b,r=this.roots;r[b]!==b;)b=r[b];for(;r[p]!==b;){var u=r[p];r[p]=b,p=u}return b},m.link=function(b,p){var r=this.find(b),u=this.find(p);if(r!==u){var c=this.ranks,l=this.roots,f=c[r],s=c[u];f<s?l[r]=u:s<f?l[u]=r:(l[u]=r,++c[r])}}},{}],619:[function(h,G,X){"use strict";G.exports=function(i,m,b){return 0===i.length?i:m?(b||i.sort(m),function(p,r){for(var u=1,c=p.length,l=p[0],f=p[0],s=1;s<c;++s)if(f=l,r(l=p[s],f)){if(s===u){u++;continue}p[u++]=l}return p.length=u,p}(i,m)):(b||i.sort(),function(p){for(var r=1,u=p.length,c=p[0],l=p[0],f=1;f<u;++f,l=c)if(l=c,(c=p[f])!==l){if(f===r){r++;continue}p[r++]=c}return p.length=r,p}(i))}},{}],620:[function(h,G,X){var i=/[\'\"]/;G.exports=function(m){return m?(i.test(m.charAt(0))&&(m=m.substr(1)),i.test(m.charAt(m.length-1))&&(m=m.substr(0,m.length-1)),m):""}},{}],621:[function(h,G,X){"use strict";G.exports=function(i,m,b){Array.isArray(b)||(b=[].slice.call(arguments,2));for(var p=0,r=b.length;p<r;p++){var u=b[p];for(var c in u)if((void 0===m[c]||Array.isArray(m[c])||i[c]!==m[c])&&c in m){var l;if(!0===u[c])l=m[c];else if(!1===u[c]||"function"==typeof u[c]&&void 0===(l=u[c](m[c],i,m)))continue;i[c]=l}}return i}},{}],622:[function(h,G,X){(function(i){(function(){function m(b){try{if(!i.localStorage)return!1}catch(r){return!1}var p=i.localStorage[b];return null!=p&&"true"===String(p).toLowerCase()}G.exports=function(b,p){if(m("noDeprecation"))return b;var r=!1;return function(){if(!r){if(m("throwDeprecation"))throw new Error(p);m("traceDeprecation")?console.trace(p):console.warn(p),r=!0}return b.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],623:[function(h,G,X){"use strict";G.exports=function(p,r){return"object"==typeof r&&null!==r||(r={}),i(p,r.canvas||m,r.context||b,r)};var i=h("./lib/vtext"),m=null,b=null;"undefined"!=typeof document&&((m=document.createElement("canvas")).width=8192,m.height=1024,b=m.getContext("2d"))},{"./lib/vtext":624}],624:[function(h,G,X){G.exports=function(o,d,g,y){var v=64,_=1.25,w={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return y&&(y.size&&y.size>0&&(v=y.size),y.lineSpacing&&y.lineSpacing>0&&(_=y.lineSpacing),y.styletags&&y.styletags.breaklines&&(w.breaklines=!!y.styletags.breaklines),y.styletags&&y.styletags.bolds&&(w.bolds=!!y.styletags.bolds),y.styletags&&y.styletags.italics&&(w.italics=!!y.styletags.italics),y.styletags&&y.styletags.subscripts&&(w.subscripts=!!y.styletags.subscripts),y.styletags&&y.styletags.superscripts&&(w.superscripts=!!y.styletags.superscripts)),g.font=[y.fontStyle,y.fontVariant,y.fontWeight,v+"px",y.font].filter(function(x){return x}).join(" "),g.textAlign="start",g.textBaseline="alphabetic",g.direction="ltr",s(function(x,E,k,C,L,P){k=(k=k.replace(/\n/g,"")).replace(/\<br\>/g,!0===P.breaklines?"\n":" ");var A="",I=[];for(N=0;N<k.length;++N)I[N]=A;!0===P.bolds&&(I=c("b","b|",k,I)),!0===P.italics&&(I=c("i","i|",k,I)),!0===P.superscripts&&(I=c("sup","+1",k,I)),!0===P.subscripts&&(I=c("sub","-1",k,I));var D=[],R="";for(N=0;N<k.length;++N)null!==I[N]&&(R+=k[N],D.push(I[N]));var S,N,B,H,Y,Q=R.split("\n"),ne=Q.length,ae=Math.round(L*C),te=C,K=2*C,q=0,re=ne*ae+K;x.height<re&&(x.height=re),E.fillStyle="#000",E.fillRect(0,0,x.width,x.height),E.fillStyle="#fff";var V=0,W="";function Z(){if(""!==W){var pe=E.measureText(W).width;E.fillText(W,te+B,K+H),B+=pe}}function oe(){return Math.round(Y)+"px "}function ie(pe,Te){var ye=""+E.font;if(!0===P.subscripts){var ke=pe.indexOf("-"),ze=Te.indexOf("-"),je=ke>-1?parseInt(pe[1+ke]):0,Ie=ze>-1?parseInt(Te[1+ze]):0;je!==Ie&&(ye=ye.replace(oe(),"?px "),Y*=Math.pow(.75,Ie-je),ye=ye.replace("?px ",oe())),H+=.25*ae*(Ie-je)}if(!0===P.superscripts){var Ce=pe.indexOf("+"),_e=Te.indexOf("+"),we=Ce>-1?parseInt(pe[1+Ce]):0,Se=_e>-1?parseInt(Te[1+_e]):0;we!==Se&&(ye=ye.replace(oe(),"?px "),Y*=Math.pow(.75,Se-we),ye=ye.replace("?px ",oe())),H-=.25*ae*(Se-we)}if(!0===P.bolds){var Oe=pe.indexOf("b|")>-1,Be=Te.indexOf("b|")>-1;!Oe&&Be&&(ye=He?ye.replace("italic ","italic bold "):"bold "+ye),Oe&&!Be&&(ye=ye.replace("bold ",""))}if(!0===P.italics){var He=pe.indexOf("i|")>-1,Xe=Te.indexOf("i|")>-1;!He&&Xe&&(ye="italic "+ye),He&&!Xe&&(ye=ye.replace("italic ",""))}E.font=ye}for(S=0;S<ne;++S){var ue=Q[S]+"\n";for(B=0,H=S*ae,Y=C,W="",N=0;N<ue.length;++N){var fe=N+V<D.length?D[N+V]:D[D.length-1];A===fe?W+=ue[N]:(Z(),W=ue[N],void 0!==fe&&(ie(A,fe),A=fe))}Z(),V+=ue.length;var he=0|Math.round(B+2*te);q<he&&(q=he)}var de=q,be=K+ae*ne;return m(E.getImageData(0,0,de,be).data,[be,de,4]).pick(-1,-1,0).transpose(1,0)}(d,g,o,v,_,w),y,v)},G.exports.processPixels=s;var i=h("surface-nets"),m=h("ndarray"),b=h("simplify-planar-graph"),p=h("clean-pslg"),r=h("cdt2d"),u=h("planar-graph-to-polyline");function c(o,d,g,y){for(var v="<"+o+">",_="</"+o+">",w=v.length,x=_.length,E="+"===d[0]||"-"===d[0],k=0,C=-x;k>-1&&-1!==(k=g.indexOf(v,k))&&-1!==(C=g.indexOf(_,k+w))&&!(C<=k);){for(var L=k;L<C+x;++L)if(L<k+w||L>=C)y[L]=null,g=g.substr(0,L)+" "+g.substr(L+1);else if(null!==y[L]){var P=y[L].indexOf(d[0]);-1===P?y[L]+=d:E&&(y[L]=y[L].substr(0,P+1)+(1+parseInt(y[L][P+1]))+y[L].substr(P+2))}var A=k+w,I=g.substr(A,C-A).indexOf(v);k=-1!==I?I:C+x}return y}function f(o,d,g,y){var v=function(o,d){var g=i(o,128);return d?b(g.cells,g.positions,.25):{edges:g.cells,positions:g.positions}}(o,y),_=function(S,N,B){for(var H=N.textAlign||"start",Y=N.textBaseline||"alphabetic",Q=[1<<30,1<<30],ne=[0,0],ae=S.length,te=0;te<ae;++te)for(var K=S[te],q=0;q<2;++q)Q[q]=0|Math.min(Q[q],K[q]),ne[q]=0|Math.max(ne[q],K[q]);var re=0;switch(H){case"center":re=-.5*(Q[0]+ne[0]);break;case"right":case"end":re=-ne[0];break;case"left":case"start":re=-Q[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+H+"'")}var V=0;switch(Y){case"hanging":case"top":V=-Q[1];break;case"middle":V=-.5*(Q[1]+ne[1]);break;case"alphabetic":case"ideographic":V=-3*B;break;case"bottom":V=-ne[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+Y+"'")}var W=1/B;return"lineHeight"in N?W*=+N.lineHeight:"width"in N?W=N.width/(ne[0]-Q[0]):"height"in N&&(W=N.height/(ne[1]-Q[1])),S.map(function(Z){return[W*(Z[0]+re),W*(Z[1]+V)]})}(v.positions,d,g),w=v.edges,x="ccw"===d.orientation;if(p(_,w),d.polygons||d.polygon||d.polyline){for(var E=u(w,_),k=new Array(E.length),C=0;C<E.length;++C){for(var L=E[C],P=new Array(L.length),A=0;A<L.length;++A){for(var I=L[A],D=new Array(I.length),R=0;R<I.length;++R)D[R]=_[I[R]].slice();x&&D.reverse(),P[A]=D}k[C]=P}return k}return d.triangles||d.triangulate||d.triangle?{cells:r(_,w,{delaunay:!1,exterior:!1,interior:!0}),positions:_}:{edges:w,positions:_}}function s(o,d,g){try{return f(o,d,g,!0)}catch(y){}try{return f(o,d,g,!1)}catch(y){}return d.polygons||d.polyline||d.polygon?[]:d.triangles||d.triangulate||d.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:118,"clean-pslg":127,ndarray:483,"planar-graph-to-polyline":501,"simplify-planar-graph":563,"surface-nets":591}],625:[function(h,G,X){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=v);var i=!1;if("function"==typeof WeakMap){var m=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var b=new m,p=Object.freeze({});if(b.set(p,1),1===b.get(p))return void(G.exports=WeakMap);i=!0}}var r=Object.getOwnPropertyNames,u=Object.defineProperty,c=Object.isExtensible,l="weakmap:ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var f=new ArrayBuffer(25),s=new Uint8Array(f);crypto.getRandomValues(s),l="weakmap:rand:"+Array.prototype.map.call(s,function(k){return(k%36).toString(36)}).join("")+"___"}if(u(Object,"getOwnPropertyNames",{value:function(k){return r(k).filter(_)}}),"getPropertyNames"in Object){var o=Object.getPropertyNames;u(Object,"getPropertyNames",{value:function(k){return o(k).filter(_)}})}!function(){var k=Object.freeze;u(Object,"freeze",{value:function(P){return w(P),k(P)}});var C=Object.seal;u(Object,"seal",{value:function(P){return w(P),C(P)}});var L=Object.preventExtensions;u(Object,"preventExtensions",{value:function(P){return w(P),L(P)}})}();var d=!1,g=0,y=function(){this instanceof y||E();var k=[],C=[],L=g++;return Object.create(y.prototype,{get___:{value:x(function(P,A){var I,D=w(P);return D?L in D?D[L]:A:(I=k.indexOf(P))>=0?C[I]:A})},has___:{value:x(function(P){var A=w(P);return A?L in A:k.indexOf(P)>=0})},set___:{value:x(function(P,A){var I,D=w(P);return D?D[L]=A:(I=k.indexOf(P))>=0?C[I]=A:(C[I=k.length]=A,k[I]=P),this})},delete___:{value:x(function(P){var A,I,D=w(P);return D?L in D&&delete D[L]:!((A=k.indexOf(P))<0||(I=k.length-1,k[A]=void 0,C[A]=C[I],k[A]=k[I],k.length=I,C.length=I,0))})}})};y.prototype=Object.create(Object.prototype,{get:{value:function(k,C){return this.get___(k,C)},writable:!0,configurable:!0},has:{value:function(k){return this.has___(k)},writable:!0,configurable:!0},set:{value:function(k,C){return this.set___(k,C)},writable:!0,configurable:!0},delete:{value:function(k){return this.delete___(k)},writable:!0,configurable:!0}}),"function"==typeof m?function(){function k(){this instanceof y||E();var C,L=new m,P=void 0,A=!1;return C=i?function(I,D){return L.set(I,D),L.has(I)||(P||(P=new y),P.set(I,D)),this}:function(I,D){if(A)try{L.set(I,D)}catch(R){P||(P=new y),P.set___(I,D)}else L.set(I,D);return this},Object.create(y.prototype,{get___:{value:x(function(I,D){return P?L.has(I)?L.get(I):P.get___(I,D):L.get(I,D)})},has___:{value:x(function(I){return L.has(I)||!!P&&P.has___(I)})},set___:{value:x(C)},delete___:{value:x(function(I){var D=!!L.delete(I);return P&&P.delete___(I)||D})},permitHostObjects___:{value:x(function(I){if(I!==v)throw new Error("bogus call to permitHostObjects___");A=!0})}})}i&&"undefined"!=typeof Proxy&&(Proxy=void 0),k.prototype=y.prototype,G.exports=k,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),G.exports=y)}function v(k){k.permitHostObjects___&&k.permitHostObjects___(v)}function _(k){return!("weakmap:"==k.substr(0,"weakmap:".length)&&"___"===k.substr(k.length-3))}function w(k){if(k!==Object(k))throw new TypeError("Not an object: "+k);var C=k[l];if(C&&C.key===k)return C;if(c(k)){C={key:k};try{return u(k,l,{value:C,writable:!1,enumerable:!1,configurable:!1}),C}catch(L){return}}}function x(k){return k.prototype=null,Object.freeze(k)}function E(){d||"undefined"==typeof console||(d=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],626:[function(h,G,X){var i=h("./hidden-store.js");G.exports=function(){var m={};return function(b){if(("object"!=typeof b||null===b)&&"function"!=typeof b)throw new Error("Weakmap-shim: Key must be object");var p=b.valueOf(m);return p&&p.identity===m?p:i(b,m)}}},{"./hidden-store.js":627}],627:[function(h,G,X){G.exports=function(i,m){var b={identity:m},p=i.valueOf;return Object.defineProperty(i,"valueOf",{value:function(r){return r!==m?p.apply(this,arguments):b},writable:!0}),b}},{}],628:[function(h,G,X){var i=h("./create-store.js");G.exports=function(){var m=i();return{get:function(b,p){var r=m(b);return r.hasOwnProperty("value")?r.value:p},set:function(b,p){return m(b).value=p,this},has:function(b){return"value"in m(b)},delete:function(b){return delete m(b).value}}}},{"./create-store.js":626}],629:[function(h,G,X){var i=h("get-canvas-context");G.exports=function(m){return i("webgl",m)}},{"get-canvas-context":257}],630:[function(h,G,X){var i=h("../main"),m=h("object-assign"),b=i.instance();function p(o){this.local=this.regionalOptions[o||""]||this.regionalOptions[""]}m(p.prototype=new i.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(o,d){if("string"==typeof o){var g=o.match(u);return g?g[0]:""}var y=this._validateYear(o),v=o.month(),_=""+this.toChineseMonth(y,v);return d&&_.length<2&&(_="0"+_),this.isIntercalaryMonth(y,v)&&(_+="i"),_},monthNames:function(o){if("string"==typeof o){var d=o.match(c);return d?d[0]:""}var g=this._validateYear(o),y=o.month(),v=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(g,y)-1];return this.isIntercalaryMonth(g,y)&&(v="\u95f0"+v),v},monthNamesShort:function(o){if("string"==typeof o){var d=o.match(l);return d?d[0]:""}var g=this._validateYear(o),y=o.month(),v=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(g,y)-1];return this.isIntercalaryMonth(g,y)&&(v="\u95f0"+v),v},parseMonth:function(o,d){o=this._validateYear(o);var g,y=parseInt(d);if(isNaN(y))"\u95f0"===d[0]&&(g=!0,d=d.substring(1)),"\u6708"===d[d.length-1]&&(d=d.substring(0,d.length-1)),y=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(d);else{var v=d[d.length-1];g="i"===v||"I"===v}return this.toMonthIndex(o,y,g)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(o,d){if(o.year&&(o=o.year()),"number"!=typeof o||o<1888||o>2111)throw d.replace(/\{0\}/,this.local.name);return o},toMonthIndex:function(o,d,g){var y=this.intercalaryMonth(o);if(g&&d!==y||d<1||d>12)throw i.local.invalidMonth.replace(/\{0\}/,this.local.name);return y?!g&&d<=y?d-1:d:d-1},toChineseMonth:function(o,d){o.year&&(d=(o=o.year()).month());var g=this.intercalaryMonth(o);if(d<0||d>(g?12:11))throw i.local.invalidMonth.replace(/\{0\}/,this.local.name);return g?d<g?d+1:d:d+1},intercalaryMonth:function(o){return o=this._validateYear(o),f[o-f[0]]>>13},isIntercalaryMonth:function(o,d){o.year&&(d=(o=o.year()).month());var g=this.intercalaryMonth(o);return!!g&&g===d},leapYear:function(o){return 0!==this.intercalaryMonth(o)},weekOfYear:function(o,d,g){var y,v=this._validateYear(o,i.local.invalidyear),_=s[v-s[0]];(y=b.newDate(_>>9&4095,_>>5&15,31&_)).add(4-(y.dayOfWeek()||7),"d");var k=this.toJD(o,d,g)-y.toJD();return 1+Math.floor(k/7)},monthsInYear:function(o){return this.leapYear(o)?13:12},daysInMonth:function(o,d){o.year&&(d=o.month(),o=o.year()),o=this._validateYear(o);var g=f[o-f[0]];if(d>(g>>13?12:11))throw i.local.invalidMonth.replace(/\{0\}/,this.local.name);return g&1<<12-d?30:29},weekDay:function(o,d,g){return(this.dayOfWeek(o,d,g)||7)<6},toJD:function(o,d,g){var y=this._validate(o,_,g,i.local.invalidDate);o=this._validateYear(y.year()),d=y.month(),g=y.day();var v=this.isIntercalaryMonth(o,d),_=this.toChineseMonth(o,d),w=function(x,E,k,C,L){var P,A,I;if("object"==typeof x)A=x,P=E||{};else{var D;if(!("number"==typeof x&&x>=1888&&x<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof E&&E>=1&&E<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof k&&k>=1&&k<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof C?(D=!1,P=C):(D=!!C,P={}),A={year:x,month:E,day:k,isIntercalary:D}}I=A.day-1;var R,S=f[A.year-f[0]],N=S>>13;R=N&&(A.month>N||A.isIntercalary)?A.month:A.month-1;for(var B=0;B<R;B++)I+=S&1<<12-B?30:29;var H=s[A.year-s[0]],Y=new Date(H>>9&4095,(H>>5&15)-1,(31&H)+I);return P.year=Y.getFullYear(),P.month=1+Y.getMonth(),P.day=Y.getDate(),P}(o,_,g,v);return b.toJD(w.year,w.month,w.day)},fromJD:function(o){var d=b.fromJD(o),g=function(v,_,w,x){var E,k;if("object"==typeof v)E=v,k=_||{};else{if(!("number"==typeof v&&v>=1888&&v<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof _&&_>=1&&_<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof w&&w>=1&&w<=31))throw new Error("Solar day outside range 1 - 31");E={year:v,month:_,day:w},k={}}var C=s[E.year-s[0]];k.year=(E.year<<9|E.month<<5|E.day)>=C?E.year:E.year-1,C=s[k.year-s[0]];var P,A=new Date(C>>9&4095,(C>>5&15)-1,31&C),I=new Date(E.year,E.month-1,E.day);P=Math.round((I-A)/864e5);var D,R=f[k.year-f[0]];for(D=0;D<13;D++){var S=R&1<<12-D?30:29;if(P<S)break;P-=S}var N=R>>13;return!N||D<N?(k.isIntercalary=!1,k.month=1+D):D===N?(k.isIntercalary=!0,k.month=D):(k.isIntercalary=!1,k.month=D),k.day=1+P,k}(d.year(),d.month(),d.day()),y=this.toMonthIndex(g.year,g.month,g.isIntercalary);return this.newDate(g.year,y,g.day)},fromString:function(o){var d=o.match(r),g=this._validateYear(+d[1]),_=this.toMonthIndex(g,+d[2],!!d[3]);return this.newDate(g,_,+d[4])},add:function(o,d,g){var y=o.year(),v=o.month(),_=this.isIntercalaryMonth(y,v),w=this.toChineseMonth(y,v),x=Object.getPrototypeOf(p.prototype).add.call(this,o,d,g);if("y"===g){var E=x.year(),k=x.month(),C=this.isIntercalaryMonth(E,w),L=this.toMonthIndex(E,w,!(!_||!C));L!==k&&x.month(L)}return x}});var r=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,u=/^\d?\d[iI]?/m,c=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,l=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;i.calendars.chinese=p;var f=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],s=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":644,"object-assign":487}],631:[function(h,G,X){var i=h("../main");function b(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}h("object-assign")(b.prototype=new i.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){var r=this._validate(p,this.minMonth,this.minDay,i.local.invalidYear);return(p=r.year()+(r.year()<0?1:0))%4==3||p%4==-1},monthsInYear:function(p){return this._validate(p,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),13},weekOfYear:function(p,r,u){var c=this.newDate(p,r,u);return c.add(-c.dayOfWeek(),"d"),Math.floor((c.dayOfYear()-1)/7)+1},daysInMonth:function(p,r){var u=this._validate(p,r,this.minDay,i.local.invalidMonth);return this.daysPerMonth[u.month()-1]+(13===u.month()&&this.leapYear(u.year())?1:0)},weekDay:function(p,r,u){return(this.dayOfWeek(p,r,u)||7)<6},toJD:function(p,r,u){var c=this._validate(p,r,u,i.local.invalidDate);return(p=c.year())<0&&p++,c.day()+30*(c.month()-1)+365*(p-1)+Math.floor(p/4)+this.jdEpoch-1},fromJD:function(p){var r=Math.floor(p)+.5-this.jdEpoch,u=Math.floor((r-Math.floor((r+366)/1461))/365)+1;u<=0&&u--,r=Math.floor(p)+.5-this.newDate(u,1,1).toJD();var c=Math.floor(r/30)+1;return this.newDate(u,c,r-30*(c-1)+1)}}),i.calendars.coptic=b},{"../main":644,"object-assign":487}],632:[function(h,G,X){var i=h("../main");function b(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}h("object-assign")(b.prototype=new i.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(r){return this._validate(r,this.minMonth,this.minDay,i.local.invalidYear),!1},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,i.local.invalidYear),13},daysInYear:function(r){return this._validate(r,this.minMonth,this.minDay,i.local.invalidYear),400},weekOfYear:function(r,u,c){var l=this.newDate(r,u,c);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/8)+1},daysInMonth:function(r,u){var c=this._validate(r,u,this.minDay,i.local.invalidMonth);return this.daysPerMonth[c.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(r,u,c){return(this._validate(r,u,c,i.local.invalidDate).day()+1)%8},weekDay:function(r,u,c){var l=this.dayOfWeek(r,u,c);return l>=2&&l<=6},extraInfo:function(r,u,c){var l=this._validate(r,u,c,i.local.invalidDate);return{century:p[Math.floor((l.year()-1)/100)+1]||""}},toJD:function(r,u,c){var l=this._validate(r,u,c,i.local.invalidDate);return r=l.year()+(l.year()<0?1:0),u=l.month(),(c=l.day())+(u>1?16:0)+(u>2?32*(u-2):0)+400*(r-1)+this.jdEpoch-1},fromJD:function(r){r=Math.floor(r+.5)-Math.floor(this.jdEpoch)-1;var u=Math.floor(r/400)+1;r-=400*(u-1),r+=r>15?16:0;var c=Math.floor(r/32)+1;return this.newDate(u<=0?u-1:u,c,r-32*(c-1)+1)}});var p={20:"Fruitbat",21:"Anchovy"};i.calendars.discworld=b},{"../main":644,"object-assign":487}],633:[function(h,G,X){var i=h("../main");function b(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}h("object-assign")(b.prototype=new i.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){var r=this._validate(p,this.minMonth,this.minDay,i.local.invalidYear);return(p=r.year()+(r.year()<0?1:0))%4==3||p%4==-1},monthsInYear:function(p){return this._validate(p,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),13},weekOfYear:function(p,r,u){var c=this.newDate(p,r,u);return c.add(-c.dayOfWeek(),"d"),Math.floor((c.dayOfYear()-1)/7)+1},daysInMonth:function(p,r){var u=this._validate(p,r,this.minDay,i.local.invalidMonth);return this.daysPerMonth[u.month()-1]+(13===u.month()&&this.leapYear(u.year())?1:0)},weekDay:function(p,r,u){return(this.dayOfWeek(p,r,u)||7)<6},toJD:function(p,r,u){var c=this._validate(p,r,u,i.local.invalidDate);return(p=c.year())<0&&p++,c.day()+30*(c.month()-1)+365*(p-1)+Math.floor(p/4)+this.jdEpoch-1},fromJD:function(p){var r=Math.floor(p)+.5-this.jdEpoch,u=Math.floor((r-Math.floor((r+366)/1461))/365)+1;u<=0&&u--,r=Math.floor(p)+.5-this.newDate(u,1,1).toJD();var c=Math.floor(r/30)+1;return this.newDate(u,c,r-30*(c-1)+1)}}),i.calendars.ethiopian=b},{"../main":644,"object-assign":487}],634:[function(h,G,X){var i=h("../main");function b(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}function p(r,u){return r-u*Math.floor(r/u)}h("object-assign")(b.prototype=new i.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var u=this._validate(r,this.minMonth,this.minDay,i.local.invalidYear);return this._leapYear(u.year())},_leapYear:function(r){return p(7*(r=r<0?r+1:r)+1,19)<7},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,i.local.invalidYear),this._leapYear(r.year?r.year():r)?13:12},weekOfYear:function(r,u,c){var l=this.newDate(r,u,c);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(r){return r=this._validate(r,this.minMonth,this.minDay,i.local.invalidYear).year(),this.toJD(-1===r?1:r+1,7,1)-this.toJD(r,7,1)},daysInMonth:function(r,u){return r.year&&(u=r.month(),r=r.year()),this._validate(r,u,this.minDay,i.local.invalidMonth),12===u&&this.leapYear(r)||8===u&&5===p(this.daysInYear(r),10)?30:9===u&&3===p(this.daysInYear(r),10)?29:this.daysPerMonth[u-1]},weekDay:function(r,u,c){return 6!==this.dayOfWeek(r,u,c)},extraInfo:function(r,u,c){var l=this._validate(r,u,c,i.local.invalidDate);return{yearType:(this.leapYear(l)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(l)%10-3]}},toJD:function(r,u,c){var l=this._validate(r,u,c,i.local.invalidDate);r=l.year(),u=l.month(),c=l.day();var f=r<=0?r+1:r,s=this.jdEpoch+this._delay1(f)+this._delay2(f)+c+1;if(u<7){for(var o=7;o<=this.monthsInYear(r);o++)s+=this.daysInMonth(r,o);for(o=1;o<u;o++)s+=this.daysInMonth(r,o)}else for(o=7;o<u;o++)s+=this.daysInMonth(r,o);return s},_delay1:function(r){var u=Math.floor((235*r-234)/19),l=29*u+Math.floor((12084+13753*u)/25920);return p(3*(l+1),7)<3&&l++,l},_delay2:function(r){var u=this._delay1(r-1),c=this._delay1(r);return this._delay1(r+1)-c==356?2:c-u==382?1:0},fromJD:function(r){r=Math.floor(r)+.5;for(var u=Math.floor(98496*(r-this.jdEpoch)/35975351)-1;r>=this.toJD(-1===u?1:u+1,7,1);)u++;for(var c=r<this.toJD(u,1,1)?7:1;r>this.toJD(u,c,this.daysInMonth(u,c));)c++;var l=r-this.toJD(u,c,1)+1;return this.newDate(u,c,l)}}),i.calendars.hebrew=b},{"../main":644,"object-assign":487}],635:[function(h,G,X){var i=h("../main");function b(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}h("object-assign")(b.prototype=new i.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(p){return(11*this._validate(p,this.minMonth,this.minDay,i.local.invalidYear).year()+14)%30<11},weekOfYear:function(p,r,u){var c=this.newDate(p,r,u);return c.add(-c.dayOfWeek(),"d"),Math.floor((c.dayOfYear()-1)/7)+1},daysInYear:function(p){return this.leapYear(p)?355:354},daysInMonth:function(p,r){var u=this._validate(p,r,this.minDay,i.local.invalidMonth);return this.daysPerMonth[u.month()-1]+(12===u.month()&&this.leapYear(u.year())?1:0)},weekDay:function(p,r,u){return 5!==this.dayOfWeek(p,r,u)},toJD:function(p,r,u){var c=this._validate(p,r,u,i.local.invalidDate);return p=c.year(),r=c.month(),p=p<=0?p+1:p,(u=c.day())+Math.ceil(29.5*(r-1))+354*(p-1)+Math.floor((3+11*p)/30)+this.jdEpoch-1},fromJD:function(p){p=Math.floor(p)+.5;var r=Math.floor((30*(p-this.jdEpoch)+10646)/10631);r=r<=0?r-1:r;var u=Math.min(12,Math.ceil((p-29-this.toJD(r,1,1))/29.5)+1),c=p-this.toJD(r,u,1)+1;return this.newDate(r,u,c)}}),i.calendars.islamic=b},{"../main":644,"object-assign":487}],636:[function(h,G,X){var i=h("../main");function b(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}h("object-assign")(b.prototype=new i.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){var r=this._validate(p,this.minMonth,this.minDay,i.local.invalidYear);return(p=r.year()<0?r.year()+1:r.year())%4==0},weekOfYear:function(p,r,u){var c=this.newDate(p,r,u);return c.add(4-(c.dayOfWeek()||7),"d"),Math.floor((c.dayOfYear()-1)/7)+1},daysInMonth:function(p,r){var u=this._validate(p,r,this.minDay,i.local.invalidMonth);return this.daysPerMonth[u.month()-1]+(2===u.month()&&this.leapYear(u.year())?1:0)},weekDay:function(p,r,u){return(this.dayOfWeek(p,r,u)||7)<6},toJD:function(p,r,u){var c=this._validate(p,r,u,i.local.invalidDate);return p=c.year(),r=c.month(),u=c.day(),p<0&&p++,r<=2&&(p--,r+=12),Math.floor(365.25*(p+4716))+Math.floor(30.6001*(r+1))+u-1524.5},fromJD:function(p){var r=Math.floor(p+.5)+1524,u=Math.floor((r-122.1)/365.25),c=Math.floor(365.25*u),l=Math.floor((r-c)/30.6001),f=l-Math.floor(l<14?1:13),s=u-Math.floor(f>2?4716:4715),o=r-c-Math.floor(30.6001*l);return s<=0&&s--,this.newDate(s,f,o)}}),i.calendars.julian=b},{"../main":644,"object-assign":487}],637:[function(h,G,X){var i=h("../main");function b(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}function p(u,c){return u-c*Math.floor(u/c)}function r(u,c){return p(u-1,c)+1}h("object-assign")(b.prototype=new i.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(u){return this._validate(u,this.minMonth,this.minDay,i.local.invalidYear),!1},formatYear:function(u){u=this._validate(u,this.minMonth,this.minDay,i.local.invalidYear).year();var c=Math.floor(u/400);return u%=400,u+=u<0?400:0,c+"."+Math.floor(u/20)+"."+u%20},forYear:function(u){if((u=u.split(".")).length<3)throw"Invalid Mayan year";for(var c=0,l=0;l<u.length;l++){var f=parseInt(u[l],10);if(Math.abs(f)>19||l>0&&f<0)throw"Invalid Mayan year";c=20*c+f}return c},monthsInYear:function(u){return this._validate(u,this.minMonth,this.minDay,i.local.invalidYear),18},weekOfYear:function(u,c,l){return this._validate(u,c,l,i.local.invalidDate),0},daysInYear:function(u){return this._validate(u,this.minMonth,this.minDay,i.local.invalidYear),360},daysInMonth:function(u,c){return this._validate(u,c,this.minDay,i.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(u,c,l){return this._validate(u,c,l,i.local.invalidDate).day()},weekDay:function(u,c,l){return this._validate(u,c,l,i.local.invalidDate),!0},extraInfo:function(u,c,l){var f=this._validate(u,c,l,i.local.invalidDate).toJD(),s=this._toHaab(f),o=this._toTzolkin(f);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(u){var c=p(8+(u-=this.jdEpoch)+340,365);return[Math.floor(c/20)+1,p(c,20)]},_toTzolkin:function(u){return[r(20+(u-=this.jdEpoch),20),r(u+4,13)]},toJD:function(u,c,l){var f=this._validate(u,c,l,i.local.invalidDate);return f.day()+20*f.month()+360*f.year()+this.jdEpoch},fromJD:function(u){u=Math.floor(u)+.5-this.jdEpoch;var c=Math.floor(u/360);u%=360,u+=u<0?360:0;var l=Math.floor(u/20);return this.newDate(c,l,u%20)}}),i.calendars.mayan=b},{"../main":644,"object-assign":487}],638:[function(h,G,X){var i=h("../main"),m=h("object-assign");function b(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}b.prototype=new i.baseCalendar;var p=i.instance("gregorian");m(b.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var u=this._validate(r,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return p.leapYear(u.year()+(u.year()<1?1:0)+1469)},weekOfYear:function(r,u,c){var l=this.newDate(r,u,c);return l.add(1-(l.dayOfWeek()||7),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(r,u){var c=this._validate(r,u,this.minDay,i.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(12===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(r,u,c){return(this.dayOfWeek(r,u,c)||7)<6},toJD:function(r,u,c){var l=this._validate(r,u,c,i.local.invalidMonth);(r=l.year())<0&&r++;for(var f=l.day(),s=1;s<l.month();s++)f+=this.daysPerMonth[s-1];return f+p.toJD(r+1468,3,13)},fromJD:function(r){r=Math.floor(r+.5);for(var u=Math.floor((r-(this.jdEpoch-1))/366);r>=this.toJD(u+1,1,1);)u++;for(var c=r-Math.floor(this.toJD(u,1,1)+.5)+1,l=1;c>this.daysInMonth(u,l);)c-=this.daysInMonth(u,l),l++;return this.newDate(u,l,c)}}),i.calendars.nanakshahi=b},{"../main":644,"object-assign":487}],639:[function(h,G,X){var i=h("../main");function b(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}h("object-assign")(b.prototype=new i.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(p){return this.daysInYear(p)!==this.daysPerYear},weekOfYear:function(p,r,u){var c=this.newDate(p,r,u);return c.add(-c.dayOfWeek(),"d"),Math.floor((c.dayOfYear()-1)/7)+1},daysInYear:function(p){if(p=this._validate(p,this.minMonth,this.minDay,i.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[p])return this.daysPerYear;for(var r=0,u=this.minMonth;u<=12;u++)r+=this.NEPALI_CALENDAR_DATA[p][u];return r},daysInMonth:function(p,r){return p.year&&(r=p.month(),p=p.year()),this._validate(p,r,this.minDay,i.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[p]?this.daysPerMonth[r-1]:this.NEPALI_CALENDAR_DATA[p][r]},weekDay:function(p,r,u){return 6!==this.dayOfWeek(p,r,u)},toJD:function(p,r,u){var c=this._validate(p,r,u,i.local.invalidDate);p=c.year(),r=c.month(),u=c.day();var l=i.instance(),f=0,s=r,o=p;this._createMissingCalendarData(p);var d=p-(s>9||9===s&&u>=this.NEPALI_CALENDAR_DATA[o][0]?56:57);for(9!==r&&(f=u,s--);9!==s;)s<=0&&(s=12,o--),f+=this.NEPALI_CALENDAR_DATA[o][s],s--;return 9===r?(f+=u-this.NEPALI_CALENDAR_DATA[o][0])<0&&(f+=l.daysInYear(d)):f+=this.NEPALI_CALENDAR_DATA[o][9]-this.NEPALI_CALENDAR_DATA[o][0],l.newDate(d,1,1).add(f,"d").toJD()},fromJD:function(p){var r=i.instance().fromJD(p),u=r.year(),c=r.dayOfYear(),l=u+56;this._createMissingCalendarData(l);for(var f=9,o=this.NEPALI_CALENDAR_DATA[l][f]-this.NEPALI_CALENDAR_DATA[l][0]+1;c>o;)++f>12&&(f=1,l++),o+=this.NEPALI_CALENDAR_DATA[l][f];return this.newDate(l,f,this.NEPALI_CALENDAR_DATA[l][f]-(o-c))},_createMissingCalendarData:function(p){var r=this.daysPerMonth.slice(0);r.unshift(17);for(var u=p-1;u<p+2;u++)void 0===this.NEPALI_CALENDAR_DATA[u]&&(this.NEPALI_CALENDAR_DATA[u]=r)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),i.calendars.nepali=b},{"../main":644,"object-assign":487}],640:[function(h,G,X){var i=h("../main");function b(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}function p(r,u){return r-u*Math.floor(r/u)}h("object-assign")(b.prototype=new i.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(r){var u=this._validate(r,this.minMonth,this.minDay,i.local.invalidYear);return 682*((u.year()-(u.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(r,u,c){var l=this.newDate(r,u,c);return l.add(-(l.dayOfWeek()+1)%7,"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(r,u){var c=this._validate(r,u,this.minDay,i.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(12===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(r,u,c){return 5!==this.dayOfWeek(r,u,c)},toJD:function(r,u,c){var l=this._validate(r,u,c,i.local.invalidDate);r=l.year(),u=l.month(),c=l.day();var f=r-(r>=0?474:473),s=474+p(f,2820);return c+(u<=7?31*(u-1):30*(u-1)+6)+Math.floor((682*s-110)/2816)+365*(s-1)+1029983*Math.floor(f/2820)+this.jdEpoch-1},fromJD:function(r){var u=(r=Math.floor(r)+.5)-this.toJD(475,1,1),c=Math.floor(u/1029983),l=p(u,1029983),f=2820;if(1029982!==l){var s=Math.floor(l/366),o=p(l,366);f=Math.floor((2134*s+2816*o+2815)/1028522)+s+1}var d=f+2820*c+474,g=r-this.toJD(d=d<=0?d-1:d,1,1)+1,y=g<=186?Math.ceil(g/31):Math.ceil((g-6)/30),v=r-this.toJD(d,y,1)+1;return this.newDate(d,y,v)}}),i.calendars.persian=b,i.calendars.jalali=b},{"../main":644,"object-assign":487}],641:[function(h,G,X){var i=h("../main"),m=h("object-assign"),b=i.instance();function p(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}m(p.prototype=new i.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(r){var u=this._validate(r,this.minMonth,this.minDay,i.local.invalidYear);return r=this._t2gYear(u.year()),b.leapYear(r)},weekOfYear:function(r,u,c){var l=this._validate(r,this.minMonth,this.minDay,i.local.invalidYear);return r=this._t2gYear(l.year()),b.weekOfYear(r,l.month(),l.day())},daysInMonth:function(r,u){var c=this._validate(r,u,this.minDay,i.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(2===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(r,u,c){return(this.dayOfWeek(r,u,c)||7)<6},toJD:function(r,u,c){var l=this._validate(r,u,c,i.local.invalidDate);return r=this._t2gYear(l.year()),b.toJD(r,l.month(),l.day())},fromJD:function(r){var u=b.fromJD(r),c=this._g2tYear(u.year());return this.newDate(c,u.month(),u.day())},_t2gYear:function(r){return r+this.yearsOffset+(r>=-this.yearsOffset&&r<=-1?1:0)},_g2tYear:function(r){return r-this.yearsOffset-(r>=1&&r<=this.yearsOffset?1:0)}}),i.calendars.taiwan=p},{"../main":644,"object-assign":487}],642:[function(h,G,X){var i=h("../main"),m=h("object-assign"),b=i.instance();function p(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}m(p.prototype=new i.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var u=this._validate(r,this.minMonth,this.minDay,i.local.invalidYear);return r=this._t2gYear(u.year()),b.leapYear(r)},weekOfYear:function(r,u,c){var l=this._validate(r,this.minMonth,this.minDay,i.local.invalidYear);return r=this._t2gYear(l.year()),b.weekOfYear(r,l.month(),l.day())},daysInMonth:function(r,u){var c=this._validate(r,u,this.minDay,i.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(2===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(r,u,c){return(this.dayOfWeek(r,u,c)||7)<6},toJD:function(r,u,c){var l=this._validate(r,u,c,i.local.invalidDate);return r=this._t2gYear(l.year()),b.toJD(r,l.month(),l.day())},fromJD:function(r){var u=b.fromJD(r),c=this._g2tYear(u.year());return this.newDate(c,u.month(),u.day())},_t2gYear:function(r){return r-this.yearsOffset-(r>=1&&r<=this.yearsOffset?1:0)},_g2tYear:function(r){return r+this.yearsOffset+(r>=-this.yearsOffset&&r<=-1?1:0)}}),i.calendars.thai=p},{"../main":644,"object-assign":487}],643:[function(h,G,X){var i=h("../main");function b(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}h("object-assign")(b.prototype=new i.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(r){var u=this._validate(r,this.minMonth,this.minDay,i.local.invalidYear);return 355===this.daysInYear(u.year())},weekOfYear:function(r,u,c){var l=this.newDate(r,u,c);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(r){for(var u=0,c=1;c<=12;c++)u+=this.daysInMonth(r,c);return u},daysInMonth:function(r,u){for(var c=this._validate(r,u,this.minDay,i.local.invalidMonth).toJD()-24e5+.5,l=0,f=0;f<p.length;f++){if(p[f]>c)return p[l]-p[l-1];l++}return 30},weekDay:function(r,u,c){return 5!==this.dayOfWeek(r,u,c)},toJD:function(r,u,c){var l=this._validate(r,u,c,i.local.invalidDate),f=12*(l.year()-1)+l.month()-15292;return l.day()+p[f-1]-1+24e5-.5},fromJD:function(r){for(var u=r-24e5+.5,c=0,l=0;l<p.length&&!(p[l]>u);l++)c++;var f=c+15292,s=Math.floor((f-1)/12);return this.newDate(s+1,f-12*s,u-p[c-1]+1)},isValid:function(r,u,c){var l=i.baseCalendar.prototype.isValid.apply(this,arguments);return l&&(l=(r=null!=r.year?r.year:r)>=1276&&r<=1500),l},_validate:function(r,u,c,l){var f=i.baseCalendar.prototype._validate.apply(this,arguments);if(f.year<1276||f.year>1500)throw l.replace(/\{0\}/,this.local.name);return f}}),i.calendars.ummalqura=b;var p=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":644,"object-assign":487}],644:[function(h,G,X){var i=h("object-assign");function m(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function b(l,f,s,o){if(this._calendar=l,this._year=f,this._month=s,this._day=o,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(c.local.invalidDate||c.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function p(l,f){return"000000".substring(0,f-(l=""+l).length)+l}function r(){this.shortYearCutoff="+10"}function u(l){this.local=this.regionalOptions[l]||this.regionalOptions[""]}i(m.prototype,{instance:function(l,f){l=(l||"gregorian").toLowerCase();var s=this._localCals[l+"-"+(f=f||"")];if(!s&&this.calendars[l]&&(s=new this.calendars[l](f),this._localCals[l+"-"+f]=s),!s)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,l);return s},newDate:function(l,f,s,o,d){return(o=(null!=l&&l.year?l.calendar():"string"==typeof o?this.instance(o,d):o)||this.instance()).newDate(l,f,s)},substituteDigits:function(l){return function(f){return(f+"").replace(/[0-9]/g,function(s){return l[s]})}},substituteChineseDigits:function(l,f){return function(s){for(var o="",d=0;s>0;){var g=s%10;o=(0===g?"":l[g]+f[d])+o,d++,s=Math.floor(s/10)}return 0===o.indexOf(l[1]+f[1])&&(o=o.substr(1)),o||l[0]}}}),i(b.prototype,{newDate:function(l,f,s){return this._calendar.newDate(null==l?this:l,f,s)},year:function(l){return 0===arguments.length?this._year:this.set(l,"y")},month:function(l){return 0===arguments.length?this._month:this.set(l,"m")},day:function(l){return 0===arguments.length?this._day:this.set(l,"d")},date:function(l,f,s){if(!this._calendar.isValid(l,f,s))throw(c.local.invalidDate||c.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=l,this._month=f,this._day=s,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(l,f){return this._calendar.add(this,l,f)},set:function(l,f){return this._calendar.set(this,l,f)},compareTo:function(l){if(this._calendar.name!==l._calendar.name)throw(c.local.differentCalendars||c.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,l._calendar.local.name);var f=this._year!==l._year?this._year-l._year:this._month!==l._month?this.monthOfYear()-l.monthOfYear():this._day-l._day;return 0===f?0:f<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(l){return this._calendar.fromJD(l)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(l){return this._calendar.fromJSDate(l)},toString:function(){return(this.year()<0?"-":"")+p(Math.abs(this.year()),4)+"-"+p(this.month(),2)+"-"+p(this.day(),2)}}),i(r.prototype,{_validateLevel:0,newDate:function(l,f,s){return null==l?this.today():(l.year&&(this._validate(l,f,s,c.local.invalidDate||c.regionalOptions[""].invalidDate),s=l.day(),f=l.month(),l=l.year()),new b(this,l,f,s))},today:function(){return this.fromJSDate(new Date)},epoch:function(l){return this._validate(l,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(l){var f=this._validate(l,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return(f.year()<0?"-":"")+p(Math.abs(f.year()),4)},monthsInYear:function(l){return this._validate(l,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear),12},monthOfYear:function(l,f){var s=this._validate(l,f,this.minDay,c.local.invalidMonth||c.regionalOptions[""].invalidMonth);return(s.month()+this.monthsInYear(s)-this.firstMonth)%this.monthsInYear(s)+this.minMonth},fromMonthOfYear:function(l,f){var s=(f+this.firstMonth-2*this.minMonth)%this.monthsInYear(l)+this.minMonth;return this._validate(l,s,this.minDay,c.local.invalidMonth||c.regionalOptions[""].invalidMonth),s},daysInYear:function(l){var f=this._validate(l,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return this.leapYear(f)?366:365},dayOfYear:function(l,f,s){var o=this._validate(l,f,s,c.local.invalidDate||c.regionalOptions[""].invalidDate);return o.toJD()-this.newDate(o.year(),this.fromMonthOfYear(o.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(l,f,s){var o=this._validate(l,f,s,c.local.invalidDate||c.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(o))+2)%this.daysInWeek()},extraInfo:function(l,f,s){return this._validate(l,f,s,c.local.invalidDate||c.regionalOptions[""].invalidDate),{}},add:function(l,f,s){return this._validate(l,this.minMonth,this.minDay,c.local.invalidDate||c.regionalOptions[""].invalidDate),this._correctAdd(l,this._add(l,f,s),f,s)},_add:function(l,f,s){if(this._validateLevel++,"d"===s||"w"===s){var o=l.toJD()+f*("w"===s?this.daysInWeek():1),d=l.calendar().fromJD(o);return this._validateLevel--,[d.year(),d.month(),d.day()]}try{var g=l.year()+("y"===s?f:0),y=l.monthOfYear()+("m"===s?f:0);d=l.day(),"y"===s?(l.month()!==this.fromMonthOfYear(g,y)&&(y=this.newDate(g,l.month(),this.minDay).monthOfYear()),y=Math.min(y,this.monthsInYear(g)),d=Math.min(d,this.daysInMonth(g,this.fromMonthOfYear(g,y)))):"m"===s&&(function(_){for(;y<_.minMonth;)g--,y+=_.monthsInYear(g);for(var w=_.monthsInYear(g);y>w-1+_.minMonth;)g++,y-=w,w=_.monthsInYear(g)}(this),d=Math.min(d,this.daysInMonth(g,this.fromMonthOfYear(g,y))));var v=[g,this.fromMonthOfYear(g,y),d];return this._validateLevel--,v}catch(_){throw this._validateLevel--,_}},_correctAdd:function(l,f,s,o){if(!(this.hasYearZero||"y"!==o&&"m"!==o||0!==f[0]&&l.year()>0==f[0]>0)){var d={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[o];f=this._add(l,s*d[0]+(s<0?-1:1)*d[1],d[2])}return l.date(f[0],f[1],f[2])},set:function(l,f,s){this._validate(l,this.minMonth,this.minDay,c.local.invalidDate||c.regionalOptions[""].invalidDate);var o="y"===s?f:l.year(),d="m"===s?f:l.month(),g="d"===s?f:l.day();return"y"!==s&&"m"!==s||(g=Math.min(g,this.daysInMonth(o,d))),l.date(o,d,g)},isValid:function(l,f,s){this._validateLevel++;var o=this.hasYearZero||0!==l;if(o){var d=this.newDate(l,f,this.minDay);o=f>=this.minMonth&&f-this.minMonth<this.monthsInYear(d)&&s>=this.minDay&&s-this.minDay<this.daysInMonth(d)}return this._validateLevel--,o},toJSDate:function(l,f,s){var o=this._validate(l,f,s,c.local.invalidDate||c.regionalOptions[""].invalidDate);return c.instance().fromJD(this.toJD(o)).toJSDate()},fromJSDate:function(l){return this.fromJD(c.instance().fromJSDate(l).toJD())},_validate:function(l,f,s,o){if(l.year){if(0===this._validateLevel&&this.name!==l.calendar().name)throw(c.local.differentCalendars||c.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,l.calendar().local.name);return l}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(l,f,s))throw o.replace(/\{0\}/,this.local.name);var d=this.newDate(l,f,s);return this._validateLevel--,d}catch(g){throw this._validateLevel--,g}}}),i(u.prototype=new r,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){var f=this._validate(l,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return(l=f.year()+(f.year()<0?1:0))%4==0&&(l%100!=0||l%400==0)},weekOfYear:function(l,f,s){var o=this.newDate(l,f,s);return o.add(4-(o.dayOfWeek()||7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(l,f){var s=this._validate(l,f,this.minDay,c.local.invalidMonth||c.regionalOptions[""].invalidMonth);return this.daysPerMonth[s.month()-1]+(2===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(l,f,s){return(this.dayOfWeek(l,f,s)||7)<6},toJD:function(l,f,s){var o=this._validate(l,f,s,c.local.invalidDate||c.regionalOptions[""].invalidDate);l=o.year(),f=o.month(),s=o.day(),l<0&&l++,f<3&&(f+=12,l--);var d=Math.floor(l/100),g=2-d+Math.floor(d/4);return Math.floor(365.25*(l+4716))+Math.floor(30.6001*(f+1))+s+g-1524.5},fromJD:function(l){var f=Math.floor(l+.5),s=Math.floor((f-1867216.25)/36524.25),o=1524+(s=f+1+s-Math.floor(s/4)),d=Math.floor((o-122.1)/365.25),g=Math.floor(365.25*d),y=Math.floor((o-g)/30.6001),v=o-g-Math.floor(30.6001*y),_=y-(y>13.5?13:1),w=d-(_>2.5?4716:4715);return w<=0&&w--,this.newDate(w,_,v)},toJSDate:function(l,f,s){var o=this._validate(l,f,s,c.local.invalidDate||c.regionalOptions[""].invalidDate),d=new Date(o.year(),o.month()-1,o.day());return d.setHours(0),d.setMinutes(0),d.setSeconds(0),d.setMilliseconds(0),d.setHours(d.getHours()>12?d.getHours()+2:0),d},fromJSDate:function(l){return this.newDate(l.getFullYear(),l.getMonth()+1,l.getDate())}});var c=G.exports=new m;c.cdate=b,c.baseCalendar=r,c.calendars.gregorian=u},{"object-assign":487}],645:[function(h,G,X){var i=h("object-assign"),m=h("./main");i(m.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),m.local=m.regionalOptions[""],i(m.cdate.prototype,{formatDate:function(b,p){return"string"!=typeof b&&(p=b,b=""),this._calendar.formatDate(b||"",this,p)}}),i(m.baseCalendar.prototype,{UNIX_EPOCH:m.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:m.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(b,p,r){if("string"!=typeof b&&(r=p,p=b,b=""),!p)return"";if(p.calendar()!==this)throw m.local.invalidFormat||m.regionalOptions[""].invalidFormat;b=b||this.local.dateFormat;for(var c,l,f,s=(r=r||{}).dayNamesShort||this.local.dayNamesShort,o=r.dayNames||this.local.dayNames,d=r.monthNumbers||this.local.monthNumbers,g=r.monthNamesShort||this.local.monthNamesShort,y=r.monthNames||this.local.monthNames,v=function(I,D){for(var R=1;A+R<b.length&&b.charAt(A+R)===I;)R++;return A+=R-1,Math.floor(R/(D||1))>1},_=function(I,D,R,S){var N=""+D;if(v(I,S))for(;N.length<R;)N="0"+N;return N},w=this,E=function(I,D){return D?"function"==typeof y?y.call(w,I):y[I.month()-w.minMonth]:"function"==typeof g?g.call(w,I):g[I.month()-w.minMonth]},k=this.local.digits,C=function(I){return r.localNumbers&&k?k(I):I},L="",P=!1,A=0;A<b.length;A++)if(P)"'"!==b.charAt(A)||v("'")?L+=b.charAt(A):P=!1;else switch(b.charAt(A)){case"d":L+=C(_("d",p.day(),2));break;case"D":L+=("D",c=p.dayOfWeek(),l=s,f=o,v("D")?f[c]:l[c]);break;case"o":L+=_("o",p.dayOfYear(),3);break;case"w":L+=_("w",p.weekOfYear(),2);break;case"m":L+=(I=p,"function"==typeof d?d.call(w,I,v("m")):C(_("m",I.month(),2)));break;case"M":L+=E(p,v("M"));break;case"y":L+=v("y",2)?p.year():(p.year()%100<10?"0":"")+p.year()%100;break;case"Y":v("Y",2),L+=p.formatYear();break;case"J":L+=p.toJD();break;case"@":L+=(p.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":L+=(p.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":v("'")?L+="'":P=!0;break;default:L+=b.charAt(A)}var I;return L},parseDate:function(b,p,r){if(null==p)throw m.local.invalidArguments||m.regionalOptions[""].invalidArguments;if(""===(p="object"==typeof p?p.toString():p+""))return null;b=b||this.local.dateFormat;var u=(r=r||{}).shortYearCutoff||this.shortYearCutoff;u="string"!=typeof u?u:this.today().year()%100+parseInt(u,10);for(var c=r.dayNamesShort||this.local.dayNamesShort,l=r.dayNames||this.local.dayNames,f=r.parseMonth||this.local.parseMonth,s=r.monthNumbers||this.local.monthNumbers,o=r.monthNamesShort||this.local.monthNamesShort,d=r.monthNames||this.local.monthNames,g=-1,y=-1,v=-1,_=-1,w=-1,x=!1,E=!1,k=function(H,Y){for(var Q=1;S+Q<b.length&&b.charAt(S+Q)===H;)Q++;return S+=Q-1,Math.floor(Q/(Y||1))>1},C=function(H,Y){var Q=k(H,Y),ne=[2,3,Q?4:2,Q?4:2,10,11,20]["oyYJ@!".indexOf(H)+1],ae=new RegExp("^-?\\d{1,"+ne+"}"),te=p.substring(R).match(ae);if(!te)throw(m.local.missingNumberAt||m.regionalOptions[""].missingNumberAt).replace(/\{0\}/,R);return R+=te[0].length,parseInt(te[0],10)},L=this,P=function(){if("function"==typeof s){k("m");var H=s.call(L,p.substring(R));return R+=H.length,H}return C("m")},A=function(H,Y,Q,ne){for(var ae=k(H,ne)?Q:Y,te=0;te<ae.length;te++)if(p.substr(R,ae[te].length).toLowerCase()===ae[te].toLowerCase())return R+=ae[te].length,te+L.minMonth;throw(m.local.unknownNameAt||m.regionalOptions[""].unknownNameAt).replace(/\{0\}/,R)},I=function(){if("function"==typeof d){var H=k("M")?d.call(L,p.substring(R)):o.call(L,p.substring(R));return R+=H.length,H}return A("M",o,d)},D=function(){if(p.charAt(R)!==b.charAt(S))throw(m.local.unexpectedLiteralAt||m.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,R);R++},R=0,S=0;S<b.length;S++)if(E)"'"!==b.charAt(S)||k("'")?D():E=!1;else switch(b.charAt(S)){case"d":_=C("d");break;case"D":A("D",c,l);break;case"o":w=C("o");break;case"w":C("w");break;case"m":v=P();break;case"M":v=I();break;case"y":var N=S;x=!k("y",2),S=N,y=C("y",2);break;case"Y":y=C("Y",2);break;case"J":g=C("J")+.5,"."===p.charAt(R)&&(R++,C("J"));break;case"@":g=C("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":g=C("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":R=p.length;break;case"'":k("'")?D():E=!0;break;default:D()}if(R<p.length)throw m.local.unexpectedText||m.regionalOptions[""].unexpectedText;if(-1===y?y=this.today().year():y<100&&x&&(y+=-1===u?1900:this.today().year()-this.today().year()%100-(y<=u?0:100)),"string"==typeof v&&(v=f.call(this,y,v)),w>-1){_=w;for(var B=this.daysInMonth(y,v=1);_>B;B=this.daysInMonth(y,v))v++,_-=B}return g>-1?this.fromJD(g):this.newDate(y,v,_)},determineDate:function(b,p,r,u,c){r&&"object"!=typeof r&&(c=u,u=r,r=null),"string"!=typeof u&&(c=u,u="");var l=this;return p=p?p.newDate():null,null==b?p:"string"==typeof b?function(f){try{return l.parseDate(u,f,c)}catch(g){}for(var s=((f=f.toLowerCase()).match(/^c/)&&r?r.newDate():null)||l.today(),o=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,d=o.exec(f);d;)s.add(parseInt(d[1],10),d[2]||"d"),d=o.exec(f);return s}(b):"number"==typeof b?isNaN(b)||b===1/0||b===-1/0?p:l.today().add(b,"d"):l.newDate(b)}})},{"./main":644,"object-assign":487}],646:[function(h,G,X){G.exports=h("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":157}],647:[function(h,G,X){"use strict";G.exports=function(m,b){var p=[];return b=+b||0,i(m.hi(m.shape[0]-1),p,b),p};var i=h("./lib/zc-core")},{"./lib/zc-core":646}],648:[function(h,G,X){"use strict";G.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],649:[function(h,G,X){"use strict";var i=h("./arrow_paths"),m=h("../../plots/font_attributes"),b=h("../../plots/cartesian/constants"),p=h("../../plot_api/plot_template").templatedArray;h("../../constants/axis_placeable_objects"),G.exports=p("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:m({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:i.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:i.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",b.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",b.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",b.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",b.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:m({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":772,"../../plot_api/plot_template":843,"../../plots/cartesian/constants":861,"../../plots/font_attributes":883,"./arrow_paths":648}],650:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/cartesian/axes"),b=h("./draw").draw;function p(u){i.filterVisible(u._fullLayout.annotations).forEach(function(l){var f=m.getFromId(u,l.xref),s=m.getFromId(u,l.yref),o=m.getRefType(l.xref),d=m.getRefType(l.yref);l._extremes={},"range"===o&&r(l,f),"range"===d&&r(l,s)})}function r(u,c){var l,f=c._id,s=f.charAt(0),o=u[s],d=u["a"+s],v=u["_"+s+"padplus"],_=u["_"+s+"padminus"],w={x:1,y:-1}[s]*u[s+"shift"],x=3*u.arrowsize*u.arrowwidth||0,E=x+w,k=x-w,C=3*u.startarrowsize*u.arrowwidth||0,L=C+w,P=C-w;if(u["a"+s+"ref"]===u[s+"ref"]){var A=m.findExtremes(c,[c.r2c(o)],{ppadplus:E,ppadminus:k}),I=m.findExtremes(c,[c.r2c(d)],{ppadplus:Math.max(v,L),ppadminus:Math.max(_,P)});l={min:[A.min[0],I.min[0]],max:[A.max[0],I.max[0]]}}else L=d?L+d:L,P=d?P-d:P,l=m.findExtremes(c,[c.r2c(o)],{ppadplus:Math.max(v,E,L),ppadminus:Math.max(_,k,P)});u._extremes[f]=l}G.exports=function(u){if(i.filterVisible(u._fullLayout.annotations).length&&u._fullData.length)return i.syncOrAsync([b,p],u)}},{"../../lib":803,"../../plots/cartesian/axes":854,"./draw":655}],651:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../registry"),b=h("../../plot_api/plot_template").arrayEditor;function p(u,c){var l,f,s,o,d,g,y,v=u._fullLayout.annotations,_=[],w=[],x=[],E=(c||[]).length;for(l=0;l<v.length;l++)if(o=(s=v[l]).clicktoshow){for(f=0;f<E;f++)if(g=(d=c[f]).xaxis,y=d.yaxis,g._id===s.xref&&y._id===s.yref&&g.d2r(d.x)===r(s._xclick,g)&&y.d2r(d.y)===r(s._yclick,y)){(s.visible?"onout"===o?w:x:_).push(l);break}f===E&&s.visible&&"onout"===o&&w.push(l)}return{on:_,off:w,explicitOff:x}}function r(u,c){return"log"===c.type?c.l2r(u):c.d2r(u)}G.exports={hasClickToShow:function(u,c){var l=p(u,c);return l.on.length>0||l.explicitOff.length>0},onClick:function(u,c){var l,f,s=p(u,c),o=s.on,d=s.off.concat(s.explicitOff),g={},y=u._fullLayout.annotations;if(o.length||d.length){for(l=0;l<o.length;l++)(f=b(u.layout,"annotations",y[o[l]])).modifyItem("visible",!0),i.extendFlat(g,f.getUpdateObj());for(l=0;l<d.length;l++)(f=b(u.layout,"annotations",y[d[l]])).modifyItem("visible",!1),i.extendFlat(g,f.getUpdateObj());return m.call("update",u,{},g)}}}},{"../../lib":803,"../../plot_api/plot_template":843,"../../registry":931}],652:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../color");G.exports=function(b,p,r,u){u("opacity");var c=u("bgcolor"),l=u("bordercolor"),f=m.opacity(l);u("borderpad");var s=u("borderwidth"),o=u("showarrow");if(u("text",o?" ":r._dfltTitle.annotation),u("textangle"),i.coerceFont(u,"font",r.font),u("width"),u("align"),u("height")&&u("valign"),o){var d,g,y=u("arrowside");-1!==y.indexOf("end")&&(d=u("arrowhead"),g=u("arrowsize")),-1!==y.indexOf("start")&&(u("startarrowhead",d),u("startarrowsize",g)),u("arrowcolor",f?p.bordercolor:m.defaultLine),u("arrowwidth",2*(f&&s||1)),u("standoff"),u("startstandoff")}var v=u("hovertext"),_=r.hoverlabel||{};if(v){var w=u("hoverlabel.bgcolor",_.bgcolor||(m.opacity(c)?m.rgb(c):m.defaultLine)),x=u("hoverlabel.bordercolor",_.bordercolor||m.contrast(w));i.coerceFont(u,"hoverlabel.font",{family:_.font.family,size:_.font.size,color:_.font.color||x})}u("captureevents",!!v)}},{"../../lib":803,"../color":666}],653:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib/to_log_range");G.exports=function(b,p,r,u){p=p||{};var c="log"===r&&"linear"===p.type;if(c||"linear"===r&&"log"===p.type)for(var f,s,o=b._fullLayout.annotations,d=p._id.charAt(0),g=0;g<o.length;g++)s="annotations["+g+"].",(f=o[g])[d+"ref"]===p._id&&y(d),f["a"+d+"ref"]===p._id&&y("a"+d);function y(v){var _=f[v],w=null;w=c?m(_,p.range):Math.pow(10,_),i(w)||(w=null),u(s+v,w)}}},{"../../lib/to_log_range":831,"fast-isnumeric":249}],654:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/cartesian/axes"),b=h("../../plots/array_container_defaults"),p=h("./common_defaults"),r=h("./attributes");function u(c,l,f){function s(I,D){return i.coerce(c,l,r,I,D)}var o=s("visible"),d=s("clicktoshow");if(o||d){p(c,l,f,s);for(var g=l.showarrow,y=["x","y"],v=[-10,-30],_={_fullLayout:f},w=0;w<2;w++){var x=y[w],E=m.coerceRef(c,l,_,x,"","paper");if("paper"!==E&&m.getFromId(_,E)._annIndices.push(l._index),m.coercePosition(l,_,s,E,x,.5),g){var k="a"+x,C=m.coerceRef(c,l,_,k,"pixel",["pixel","paper"]);"pixel"!==C&&C!==E&&(C=l[k]="pixel"),m.coercePosition(l,_,s,C,k,"pixel"===C?v[w]:.4)}s(x+"anchor"),s(x+"shift")}if(i.noneOrAll(c,l,["x","y"]),g&&i.noneOrAll(c,l,["ax","ay"]),d){var P=s("xclick"),A=s("yclick");l._xclick=void 0===P?l.x:m.cleanPosition(P,_,l.xref),l._yclick=void 0===A?l.y:m.cleanPosition(A,_,l.yref)}}}G.exports=function(c,l){b(c,l,{name:"annotations",handleItemDefaults:u})}},{"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/cartesian/axes":854,"./attributes":649,"./common_defaults":652}],655:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../registry"),b=h("../../plots/plots"),p=h("../../lib"),r=p.strTranslate,u=h("../../plots/cartesian/axes"),c=h("../color"),l=h("../drawing"),f=h("../fx"),s=h("../../lib/svg_text_utils"),o=h("../../lib/setcursor"),d=h("../dragelement"),g=h("../../plot_api/plot_template").arrayEditor,y=h("./draw_arrow_head");function v(x,E){var k=x._fullLayout.annotations[E]||{},C=u.getFromId(x,k.xref),L=u.getFromId(x,k.yref);C&&C.setScale(),L&&L.setScale(),w(x,k,E,!1,C,L)}function _(x,E,k,C,L){var P=L[k],A=L[k+"ref"],I=-1!==k.indexOf("y"),D="domain"===u.getRefType(A),R=I?C.h:C.w;return x?D?P+(I?-E:E)/x._length:x.p2r(x.r2p(P)+E):P+(I?-E:E)/R}function w(x,E,k,C,L,P){var A,I,D=x._fullLayout,R=x._fullLayout._size,S=x._context.edits;C?(A="annotation-"+C,I=C+".annotations"):(A="annotation",I="annotations");var N=g(x.layout,I,E),B=N.modifyBase,H=N.modifyItem,Y=N.getUpdateObj;D._infolayer.selectAll("."+A+'[data-index="'+k+'"]').remove();var Q="clip"+D._uid+"_ann"+k;if(E._input&&!1!==E.visible){var ne={x:{},y:{}},ae=+E.textangle||0,te=D._infolayer.append("g").classed(A,!0).attr("data-index",String(k)).style("opacity",E.opacity),K=te.append("g").classed("annotation-text-g",!0),q=S[E.showarrow?"annotationTail":"annotationPosition"],re=E.captureevents||S.annotationText||q,V=K.append("g").style("pointer-events",re?"all":null).call(o,"pointer").on("click",function(){x._dragging=!1,x.emit("plotly_clickannotation",pe(i.event))});E.hovertext&&V.on("mouseover",function(){var ke=E.hoverlabel,ze=ke.font,je=this.getBoundingClientRect(),Ie=x.getBoundingClientRect();f.loneHover({x0:je.left-Ie.left,x1:je.right-Ie.left,y:(je.top+je.bottom)/2-Ie.top,text:E.hovertext,color:ke.bgcolor,borderColor:ke.bordercolor,fontFamily:ze.family,fontSize:ze.size,fontColor:ze.color},{container:D._hoverlayer.node(),outerContainer:D._paper.node(),gd:x})}).on("mouseout",function(){f.loneUnhover(D._hoverlayer.node())});var W=E.borderwidth,oe=W+E.borderpad,ie=V.append("rect").attr("class","bg").style("stroke-width",W+"px").call(c.stroke,E.bordercolor).call(c.fill,E.bgcolor),ue=E.width||E.height,fe=D._topclips.selectAll("#"+Q).data(ue?[0]:[]);fe.enter().append("clipPath").classed("annclip",!0).attr("id",Q).append("rect"),fe.exit().remove();var he=E.font,de=D._meta?p.templateString(E.text,D._meta):E.text,be=V.append("text").classed("annotation-text",!0).text(de);S.annotationText?be.call(s.makeEditable,{delegate:V,gd:x}).call(Te).on("edit",function(ke){E.text=ke,this.call(Te),H("text",ke),L&&L.autorange&&B(L._name+".autorange",!0),P&&P.autorange&&B(P._name+".autorange",!0),m.call("_guiRelayout",x,Y())}):be.call(Te)}else i.selectAll("#"+Q).remove();function pe(ke){var ze={index:k,annotation:E._input,fullAnnotation:E,event:ke};return C&&(ze.subplotId=C),ze}function Te(ke){return ke.call(l.font,he).attr({"text-anchor":{left:"start",right:"end"}[E.align]||"middle"}),s.convertToTspans(ke,x,ye),ke}function ye(){var ke=be.selectAll("a");1===ke.size()&&ke.text()===be.text()&&V.insert("a",":first-child").attr({"xlink:xlink:href":ke.attr("xlink:href"),"xlink:xlink:show":ke.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(ie.node());var ze=V.select(".annotation-text-math-group"),je=!ze.empty(),Ie=l.bBox((je?ze:be).node()),Ce=Ie.width,_e=Ie.height,we=E.width||Ce,Se=E.height||_e,Oe=Math.round(we+2*oe),Be=Math.round(Se+2*oe);function He(mt,Wt){return"auto"===Wt&&(Wt=mt<1/3?"left":mt>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Wt]}for(var Xe=!1,nt=["x","y"],et=0;et<nt.length;et++){var qe,Ye,ot,at,ct,_t=nt[et],xt=E[_t+"ref"]||_t,Ht=E["a"+_t+"ref"],At={x:L,y:P}[_t],ht=(ae+("x"===_t?0:-90))*Math.PI/180,st=Oe*Math.cos(ht),Bt=Be*Math.sin(ht),gn=Math.abs(st)+Math.abs(Bt),hn=E[_t+"anchor"],We=E[_t+"shift"]*("x"===_t?1:-1),it=ne[_t],qt=u.getRefType(xt);if(At&&"domain"!==qt){var Ge=At.r2fraction(E[_t]);(Ge<0||Ge>1)&&(Ht===xt?((Ge=At.r2fraction(E["a"+_t]))<0||Ge>1)&&(Xe=!0):Xe=!0),qe=At._offset+At.r2p(E[_t]),at=.5}else{var Pe="domain"===qt;"x"===_t?(ot=E[_t],qe=Pe?At._offset+At._length*ot:qe=R.l+R.w*ot):(ot=1-E[_t],qe=Pe?At._offset+At._length*ot:qe=R.t+R.h*ot),at=E.showarrow?.5:ot}if(E.showarrow){it.head=qe;var Ee=E["a"+_t];if(ct=st*He(.5,E.xanchor)-Bt*He(.5,E.yanchor),Ht===xt){var Ne=u.getRefType(Ht);"domain"===Ne?("y"===_t&&(Ee=1-Ee),it.tail=At._offset+At._length*Ee):it.tail="paper"===Ne?"y"===_t?R.t+R.h*(Ee=1-Ee):R.l+R.w*Ee:At._offset+At.r2p(Ee),Ye=ct}else it.tail=qe+Ee,Ye=ct+Ee;it.text=it.tail+ct;var Ve=D["x"===_t?"width":"height"];if("paper"===xt&&(it.head=p.constrain(it.head,1,Ve-1)),"pixel"===Ht){var Ke=-Math.max(it.tail-3,it.text),bt=Math.min(it.tail+3,it.text)-Ve;Ke>0?(it.tail+=Ke,it.text+=Ke):bt>0&&(it.tail-=bt,it.text-=bt)}it.tail+=We,it.head+=We}else Ye=ct=gn*He(at,hn),it.text=qe+ct;it.text+=We,ct+=We,E["_"+_t+"padplus"]=gn/2+(Ye+=We),E["_"+_t+"padminus"]=gn/2-Ye,E["_"+_t+"size"]=gn,E["_"+_t+"shift"]=ct}if(Xe)V.remove();else{var gt=0,pt=0;"left"!==E.align&&(gt=(we-Ce)*("center"===E.align?.5:1)),"top"!==E.valign&&(pt=(Se-_e)*("middle"===E.valign?.5:1)),je?ze.select("svg").attr({x:oe+gt-1,y:oe+pt}).call(l.setClipUrl,ue?Q:null,x):be.call(s.positionText,oe+gt-Ie.left,oe+pt-Ie.top).call(l.setClipUrl,ue?Q:null,x),fe.select("rect").call(l.setRect,oe,oe,we,Se),ie.call(l.setRect,W/2,W/2,Oe-W,Be-W),V.call(l.setTranslate,Math.round(ne.x.text-Oe/2),Math.round(ne.y.text-Be/2)),K.attr({transform:"rotate("+ae+","+ne.x.text+","+ne.y.text+")"});var Lt,Vt=function(mt,Wt){te.selectAll(".annotation-arrow-g").remove();var Kt=ne.x.head,rn=ne.y.head,Yt=ne.x.tail+mt,Ue=ne.y.tail+Wt,wt=ne.x.text+mt,Ut=ne.y.text+Wt,Zt=p.rotationXYMatrix(ae,wt,Ut),tn=p.apply2DTransform(Zt),un=p.apply2DTransform2(Zt),vn=+ie.attr("width"),Qt=+ie.attr("height"),yn=wt-.5*vn,Mn=yn+vn,Pn=Ut-.5*Qt,sn=Pn+Qt,In=[[yn,Pn,yn,sn],[yn,sn,Mn,sn],[Mn,sn,Mn,Pn],[Mn,Pn,yn,Pn]].map(un);if(!In.reduce(function(Bn,mr){return Bn^!!p.segmentsIntersect(Kt,rn,Kt+1e6,rn+1e6,mr[0],mr[1],mr[2],mr[3])},!1)){In.forEach(function(Bn){var mr=p.segmentsIntersect(Yt,Ue,Kt,rn,Bn[0],Bn[1],Bn[2],Bn[3]);mr&&(Yt=mr.x,Ue=mr.y)});var Rn=E.arrowwidth,Ln=E.arrowcolor,qn=E.arrowside,nr=te.append("g").style({opacity:c.opacity(Ln)}).classed("annotation-arrow-g",!0),rr=nr.append("path").attr("d","M"+Yt+","+Ue+"L"+Kt+","+rn).style("stroke-width",Rn+"px").call(c.stroke,c.rgb(Ln));if(y(rr,qn,E),S.annotationPosition&&rr.node().parentNode&&!C){var gr=Kt,jr=rn;if(E.standoff){var kr=Math.sqrt(Math.pow(Kt-Yt,2)+Math.pow(rn-Ue,2));gr+=E.standoff*(Yt-Kt)/kr,jr+=E.standoff*(Ue-rn)/kr}var er,Xr,ir=nr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Yt-gr)+","+(Ue-jr),transform:r(gr,jr)}).style("stroke-width",Rn+6+"px").call(c.stroke,"rgba(0,0,0,0)").call(c.fill,"rgba(0,0,0,0)");d.init({element:ir.node(),gd:x,prepFn:function(){var Bn=l.getTranslate(V);er=Bn.x,Xr=Bn.y,L&&L.autorange&&B(L._name+".autorange",!0),P&&P.autorange&&B(P._name+".autorange",!0)},moveFn:function(Bn,mr){var zr=tn(er,Xr),br=zr[0]+Bn,Dr=zr[1]+mr;V.call(l.setTranslate,br,Dr),H("x",_(L,Bn,"x",R,E)),H("y",_(P,mr,"y",R,E)),E.axref===E.xref&&H("ax",_(L,Bn,"ax",R,E)),E.ayref===E.yref&&H("ay",_(P,mr,"ay",R,E)),nr.attr("transform",r(Bn,mr)),K.attr({transform:"rotate("+ae+","+br+","+Dr+")"})},doneFn:function(){m.call("_guiRelayout",x,Y());var Bn=document.querySelector(".js-notes-box-panel");Bn&&Bn.redraw(Bn.selectedObj)}})}}};E.showarrow&&Vt(0,0),q&&d.init({element:V.node(),gd:x,prepFn:function(){Lt=K.attr("transform")},moveFn:function(mt,Wt){var Kt="pointer";if(E.showarrow)H("ax",E.axref===E.xref?_(L,mt,"ax",R,E):E.ax+mt),H("ay",E.ayref===E.yref?_(P,Wt,"ay",R.w,E):E.ay+Wt),Vt(mt,Wt);else{if(C)return;var rn,Yt;if(L)rn=_(L,mt,"x",R,E);else{var Ue=E._xsize/R.w;rn=d.align(E.x+(E._xshift-E.xshift)/R.w-Ue/2+mt/R.w,Ue,0,1,E.xanchor)}if(P)Yt=_(P,Wt,"y",R,E);else{var Ut=E._ysize/R.h;Yt=d.align(E.y-(E._yshift+E.yshift)/R.h-Ut/2-Wt/R.h,Ut,0,1,E.yanchor)}H("x",rn),H("y",Yt),L&&P||(Kt=d.getCursor(L?.5:rn,P?.5:Yt,E.xanchor,E.yanchor))}K.attr({transform:r(mt,Wt)+Lt}),o(V,Kt)},clickFn:function(mt,Wt){E.captureevents&&x.emit("plotly_clickannotation",pe(Wt))},doneFn:function(){o(V),m.call("_guiRelayout",x,Y());var mt=document.querySelector(".js-notes-box-panel");mt&&mt.redraw(mt.selectedObj)}})}}}G.exports={draw:function(x){var E=x._fullLayout;E._infolayer.selectAll(".annotation").remove();for(var k=0;k<E.annotations.length;k++)E.annotations[k].visible&&v(x,k);return b.previousPromises(x)},drawOne:v,drawRaw:w}},{"../../lib":803,"../../lib/setcursor":824,"../../lib/svg_text_utils":829,"../../plot_api/plot_template":843,"../../plots/cartesian/axes":854,"../../plots/plots":917,"../../registry":931,"../color":666,"../dragelement":685,"../drawing":688,"../fx":706,"./draw_arrow_head":656,"@plotly/d3":58}],656:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../color"),b=h("./arrow_paths"),p=h("../../lib"),r=p.strScale,u=p.strRotate,c=p.strTranslate;G.exports=function(l,f,s){var o,d,g,y,v=l.node(),_=b[s.arrowhead||0],w=b[s.startarrowhead||0],x=(s.arrowwidth||1)*(s.arrowsize||1),E=(s.arrowwidth||1)*(s.startarrowsize||1),k=f.indexOf("start")>=0,C=f.indexOf("end")>=0,L=_.backoff*x+s.standoff,P=w.backoff*E+s.startstandoff;if("line"===v.nodeName){o={x:+l.attr("x1"),y:+l.attr("y1")},d={x:+l.attr("x2"),y:+l.attr("y2")};var A=o.x-d.x,I=o.y-d.y;if(y=(g=Math.atan2(I,A))+Math.PI,L&&P&&L+P>Math.sqrt(A*A+I*I))return void te();if(L){if(L*L>A*A+I*I)return void te();var D=L*Math.cos(g),R=L*Math.sin(g);d.x+=D,d.y+=R,l.attr({x2:d.x,y2:d.y})}if(P){if(P*P>A*A+I*I)return void te();var S=P*Math.cos(g),N=P*Math.sin(g);o.x-=S,o.y-=N,l.attr({x1:o.x,y1:o.y})}}else if("path"===v.nodeName){var B=v.getTotalLength(),H="";if(B<L+P)return void te();var Y=v.getPointAtLength(0),Q=v.getPointAtLength(.1);g=Math.atan2(Y.y-Q.y,Y.x-Q.x),o=v.getPointAtLength(Math.min(P,B)),H="0px,"+P+"px,";var ne=v.getPointAtLength(B),ae=v.getPointAtLength(B-.1);y=Math.atan2(ne.y-ae.y,ne.x-ae.x),d=v.getPointAtLength(Math.max(0,B-L)),l.style("stroke-dasharray",H+=B-(H?P+L:L)+"px,"+B+"px")}function te(){l.style("stroke-dasharray","0px,100px")}function K(q,re,V,W){q.path&&(q.noRotate&&(V=0),i.select(v.parentNode).append("path").attr({class:l.attr("class"),d:q.path,transform:c(re.x,re.y)+u(180*V/Math.PI)+r(W)}).style({fill:m.rgb(s.arrowcolor),"stroke-width":0}))}k&&K(w,o,g,E),C&&K(_,d,y,x)}},{"../../lib":803,"../color":666,"./arrow_paths":648,"@plotly/d3":58}],657:[function(h,G,X){"use strict";var i=h("./draw"),m=h("./click");G.exports={moduleType:"component",name:"annotations",layoutAttributes:h("./attributes"),supplyLayoutDefaults:h("./defaults"),includeBasePlot:h("../../plots/cartesian/include_components")("annotations"),calcAutorange:h("./calc_autorange"),draw:i.draw,drawOne:i.drawOne,drawRaw:i.drawRaw,hasClickToShow:m.hasClickToShow,onClick:m.onClick,convertCoords:h("./convert_coords")}},{"../../plots/cartesian/include_components":867,"./attributes":649,"./calc_autorange":650,"./click":651,"./convert_coords":653,"./defaults":654,"./draw":655}],658:[function(h,G,X){"use strict";var i=h("../annotations/attributes"),m=h("../../plot_api/edit_types").overrideAll,b=h("../../plot_api/plot_template").templatedArray;G.exports=m(b("annotation",{visible:i.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:i.xanchor,xshift:i.xshift,yanchor:i.yanchor,yshift:i.yshift,text:i.text,textangle:i.textangle,font:i.font,width:i.width,height:i.height,opacity:i.opacity,align:i.align,valign:i.valign,bgcolor:i.bgcolor,bordercolor:i.bordercolor,borderpad:i.borderpad,borderwidth:i.borderwidth,showarrow:i.showarrow,arrowcolor:i.arrowcolor,arrowhead:i.arrowhead,startarrowhead:i.startarrowhead,arrowside:i.arrowside,arrowsize:i.arrowsize,startarrowsize:i.startarrowsize,arrowwidth:i.arrowwidth,standoff:i.standoff,startstandoff:i.startstandoff,hovertext:i.hovertext,hoverlabel:i.hoverlabel,captureevents:i.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../annotations/attributes":649}],659:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/cartesian/axes");function b(p,r){var u=r.fullSceneLayout.domain,c=r.fullLayout._size,l={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};p._xa={},i.extendFlat(p._xa,l),m.setConvert(p._xa),p._xa._offset=c.l+u.x[0]*c.w,p._xa.l2p=function(){return.5*(1+p._pdata[0]/p._pdata[3])*c.w*(u.x[1]-u.x[0])},p._ya={},i.extendFlat(p._ya,l),m.setConvert(p._ya),p._ya._offset=c.t+(1-u.y[1])*c.h,p._ya.l2p=function(){return.5*(1-p._pdata[1]/p._pdata[3])*c.h*(u.y[1]-u.y[0])}}G.exports=function(p){for(var r=p.fullSceneLayout.annotations,u=0;u<r.length;u++)b(r[u],p);p.fullLayout._infolayer.selectAll(".annotation-"+p.id).remove()}},{"../../lib":803,"../../plots/cartesian/axes":854}],660:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/cartesian/axes"),b=h("../../plots/array_container_defaults"),p=h("../annotations/common_defaults"),r=h("./attributes");function u(c,l,f,s){function o(g,y){return i.coerce(c,l,r,g,y)}function d(g){var y=g+"axis",v={_fullLayout:{}};return v._fullLayout[y]=f[y],m.coercePosition(l,v,o,g,g,.5)}o("visible")&&(p(c,l,s.fullLayout,o),d("x"),d("y"),d("z"),i.noneOrAll(c,l,["x","y","z"]),l.xref="x",l.yref="y",l.zref="z",o("xanchor"),o("yanchor"),o("xshift"),o("yshift"),l.showarrow&&(l.axref="pixel",l.ayref="pixel",o("ax",-10),o("ay",-30),i.noneOrAll(c,l,["ax","ay"])))}G.exports=function(c,l,f){b(c,l,{name:"annotations",handleItemDefaults:u,fullLayout:f.fullLayout})}},{"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/cartesian/axes":854,"../annotations/common_defaults":652,"./attributes":658}],661:[function(h,G,X){"use strict";var i=h("../annotations/draw").drawRaw,m=h("../../plots/gl3d/project"),b=["x","y","z"];G.exports=function(p){for(var r=p.fullSceneLayout,u=p.dataScale,c=r.annotations,l=0;l<c.length;l++){for(var f=c[l],s=!1,o=0;o<3;o++){var d=b[o],y=r[d+"axis"].r2fraction(f[d]);if(y<0||y>1){s=!0;break}}s?p.fullLayout._infolayer.select(".annotation-"+p.id+'[data-index="'+l+'"]').remove():(f._pdata=m(p.glplot.cameraParams,[r.xaxis.r2l(f.x)*u[0],r.yaxis.r2l(f.y)*u[1],r.zaxis.r2l(f.z)*u[2]]),i(p.graphDiv,f,l,p.id,f._xa,f._ya))}}},{"../../plots/gl3d/project":905,"../annotations/draw":655}],662:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../lib");G.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:h("./attributes")}}},layoutAttributes:h("./attributes"),handleDefaults:h("./defaults"),includeBasePlot:function(b,p){var r=i.subplotsRegistry.gl3d;if(r)for(var u=r.attrRegex,c=Object.keys(b),l=0;l<c.length;l++){var f=c[l];u.test(f)&&(b[f].annotations||[]).length&&(m.pushUnique(p._basePlotModules,r),m.pushUnique(p._subplots.gl3d,f))}},convert:h("./convert"),draw:h("./draw")}},{"../../lib":803,"../../registry":931,"./attributes":658,"./convert":659,"./defaults":660,"./draw":661}],663:[function(h,G,X){"use strict";G.exports=h("world-calendars/dist/main"),h("world-calendars/dist/plus"),h("world-calendars/dist/calendars/chinese"),h("world-calendars/dist/calendars/coptic"),h("world-calendars/dist/calendars/discworld"),h("world-calendars/dist/calendars/ethiopian"),h("world-calendars/dist/calendars/hebrew"),h("world-calendars/dist/calendars/islamic"),h("world-calendars/dist/calendars/julian"),h("world-calendars/dist/calendars/mayan"),h("world-calendars/dist/calendars/nanakshahi"),h("world-calendars/dist/calendars/nepali"),h("world-calendars/dist/calendars/persian"),h("world-calendars/dist/calendars/taiwan"),h("world-calendars/dist/calendars/thai"),h("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":630,"world-calendars/dist/calendars/coptic":631,"world-calendars/dist/calendars/discworld":632,"world-calendars/dist/calendars/ethiopian":633,"world-calendars/dist/calendars/hebrew":634,"world-calendars/dist/calendars/islamic":635,"world-calendars/dist/calendars/julian":636,"world-calendars/dist/calendars/mayan":637,"world-calendars/dist/calendars/nanakshahi":638,"world-calendars/dist/calendars/nepali":639,"world-calendars/dist/calendars/persian":640,"world-calendars/dist/calendars/taiwan":641,"world-calendars/dist/calendars/thai":642,"world-calendars/dist/calendars/ummalqura":643,"world-calendars/dist/main":644,"world-calendars/dist/plus":645}],664:[function(h,G,X){"use strict";var i=h("./calendars"),m=h("../../lib"),b=h("../../constants/numerical"),p=b.EPOCHJD,r=b.ONEDAY,u={valType:"enumerated",values:m.sortObjectKeys(i.calendars),editType:"calc",dflt:"gregorian"},c=function(w,x,E,k){var C={};return C[E]=u,m.coerce(w,x,C,E,k)},l={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},f={};function s(w){return f[w]||(f[w]=i.instance(w))}function o(w){return m.extendFlat({},u,{description:w})}function d(w){return"Sets the calendar system to use with `"+w+"` date data."}var g={xcalendar:o(d("x"))},y=m.extendFlat({},g,{ycalendar:o(d("y"))}),v=m.extendFlat({},y,{zcalendar:o(d("z"))}),_=o(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));G.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:y,bar:y,box:y,heatmap:y,contour:y,histogram:y,histogram2d:y,histogram2dcontour:y,scatter3d:v,surface:v,mesh3d:v,scattergl:y,ohlc:g,candlestick:g},layout:{calendar:o(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:_},yaxis:{calendar:_},scene:{xaxis:{calendar:_},yaxis:{calendar:_},zaxis:{calendar:_}},polar:{radialaxis:{calendar:_}}},transforms:{filter:{valuecalendar:o(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:o(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:u,handleDefaults:c,handleTraceDefaults:function(w,x,E,k){for(var C=0;C<E.length;C++)c(w,x,E[C]+"calendar",k.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:s,worldCalFmt:function(w,x,E){for(var k,C,L,P,A,I=Math.floor((x+.05)/r)+p,D=s(E).fromJD(I),R=0;-1!==(R=w.indexOf("%",R));)"0"===(k=w.charAt(R+1))||"-"===k||"_"===k?(L=3,C=w.charAt(R+2),"_"===k&&(k="-")):(C=k,k="0",L=2),(P=l[C])?(A="##"===P?"##":D.formatDate(P[k]),w=w.substr(0,R)+A+w.substr(R+L),R+=A.length):R+=L;return w}}},{"../../constants/numerical":779,"../../lib":803,"./calendars":663}],665:[function(h,G,X){"use strict";X.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],X.defaultLine="#444",X.lightLine="#eee",X.background="#fff",X.borderLine="#BEC8D9",X.lightFraction=1e3/11},{}],666:[function(h,G,X){"use strict";var i=h("tinycolor2"),m=h("fast-isnumeric"),b=h("../../lib/array").isTypedArray,p=G.exports={},r=h("./attributes");p.defaults=r.defaults;var u=p.defaultLine=r.defaultLine;p.lightLine=r.lightLine;var c=p.background=r.background;function l(f){if(m(f)||"string"!=typeof f)return f;var s=f.trim();if("rgb"!==s.substr(0,3))return f;var o=s.match(/^rgba?\s*\(([^()]*)\)$/);if(!o)return f;var d=o[1].trim().split(/\s*[\s,]\s*/),g="a"===s.charAt(3)&&4===d.length;if(!g&&3!==d.length)return f;for(var y=0;y<d.length;y++){if(!(d[y].length&&(d[y]=Number(d[y]),d[y]>=0)))return f;if(3===y)d[y]>1&&(d[y]=1);else if(d[y]>=1)return f}var v=Math.round(255*d[0])+", "+Math.round(255*d[1])+", "+Math.round(255*d[2]);return g?"rgba("+v+", "+d[3]+")":"rgb("+v+")"}p.tinyRGB=function(f){var s=f.toRgb();return"rgb("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+")"},p.rgb=function(f){return p.tinyRGB(i(f))},p.opacity=function(f){return f?i(f).getAlpha():0},p.addOpacity=function(f,s){var o=i(f).toRgb();return"rgba("+Math.round(o.r)+", "+Math.round(o.g)+", "+Math.round(o.b)+", "+s+")"},p.combine=function(f,s){var o=i(f).toRgb();if(1===o.a)return i(f).toRgbString();var d=i(s||c).toRgb(),g=1===d.a?d:{r:255*(1-d.a)+d.r*d.a,g:255*(1-d.a)+d.g*d.a,b:255*(1-d.a)+d.b*d.a};return i({r:g.r*(1-o.a)+o.r*o.a,g:g.g*(1-o.a)+o.g*o.a,b:g.b*(1-o.a)+o.b*o.a}).toRgbString()},p.contrast=function(f,s,o){var d=i(f);return 1!==d.getAlpha()&&(d=i(p.combine(f,c))),(d.isDark()?s?d.lighten(s):c:o?d.darken(o):u).toString()},p.stroke=function(f,s){var o=i(s);f.style({stroke:p.tinyRGB(o),"stroke-opacity":o.getAlpha()})},p.fill=function(f,s){var o=i(s);f.style({fill:p.tinyRGB(o),"fill-opacity":o.getAlpha()})},p.clean=function(f){if(f&&"object"==typeof f){var s,o,d,g,y=Object.keys(f);for(s=0;s<y.length;s++)if(g=f[d=y[s]],"color"===d.substr(d.length-5))if(Array.isArray(g))for(o=0;o<g.length;o++)g[o]=l(g[o]);else f[d]=l(g);else if("colorscale"===d.substr(d.length-10)&&Array.isArray(g))for(o=0;o<g.length;o++)Array.isArray(g[o])&&(g[o][1]=l(g[o][1]));else if(Array.isArray(g)){var v=g[0];if(!Array.isArray(v)&&v&&"object"==typeof v)for(o=0;o<g.length;o++)p.clean(g[o])}else g&&"object"==typeof g&&!b(g)&&p.clean(g)}}},{"../../lib/array":785,"./attributes":665,"fast-isnumeric":249,tinycolor2:598}],667:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/layout_attributes"),m=h("../../plots/font_attributes"),b=h("../../lib/extend").extendFlat,p=h("../../plot_api/edit_types").overrideAll;G.exports=p({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:i.linecolor,outlinewidth:i.linewidth,bordercolor:i.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:b({},i.ticks,{dflt:""}),ticklabeloverflow:b({},i.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside bottom","inside bottom"],dflt:"outside"},ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,showticklabels:i.showticklabels,tickfont:m({}),tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,separatethousands:i.separatethousands,exponentformat:i.exponentformat,minexponent:i.minexponent,showexponent:i.showexponent,title:{text:{valType:"string"},font:m({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:m({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/cartesian/layout_attributes":869,"../../plots/font_attributes":883}],668:[function(h,G,X){"use strict";G.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],669:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plot_api/plot_template"),b=h("../../plots/cartesian/tick_value_defaults"),p=h("../../plots/cartesian/tick_mark_defaults"),r=h("../../plots/cartesian/tick_label_defaults"),u=h("./attributes");G.exports=function(c,l,f){var s=m.newContainer(l,"colorbar"),o=c.colorbar||{};function d(k,C){return i.coerce(o,s,u,k,C)}var g=d("thicknessmode");d("thickness","fraction"===g?30/(f.width-f.margin.l-f.margin.r):30);var y=d("lenmode");d("len","fraction"===y?1:f.height-f.margin.t-f.margin.b),d("x"),d("xanchor"),d("xpad"),d("y"),d("yanchor"),d("ypad"),i.noneOrAll(o,s,["x","y"]),d("outlinecolor"),d("outlinewidth"),d("bordercolor"),d("borderwidth"),d("bgcolor");var v=d("ticklabelposition");d("ticklabeloverflow",-1!==v.indexOf("inside")?"hide past domain":"hide past div"),b(o,s,d,"linear");var _=f.font,w={outerTicks:!1,font:_};-1!==v.indexOf("inside")&&(w.bgColor="black"),r(o,s,d,"linear",w),p(o,s,d,"linear",w),d("title.text",f._dfltTitle.colorbar);var x=s.tickfont,E=i.extendFlat({},x,{color:_.color,size:i.bigFont(x.size)});i.coerceFont(d,"title.font",E),d("title.side")}},{"../../lib":803,"../../plot_api/plot_template":843,"../../plots/cartesian/tick_label_defaults":876,"../../plots/cartesian/tick_mark_defaults":877,"../../plots/cartesian/tick_value_defaults":878,"./attributes":667}],670:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("tinycolor2"),b=h("../../plots/plots"),p=h("../../registry"),r=h("../../plots/cartesian/axes"),u=h("../dragelement"),c=h("../../lib"),l=c.strTranslate,f=h("../../lib/extend").extendFlat,s=h("../../lib/setcursor"),o=h("../drawing"),d=h("../color"),g=h("../titles"),y=h("../../lib/svg_text_utils"),v=h("../colorscale/helpers").flipScale,_=h("../../plots/cartesian/axis_defaults"),w=h("../../plots/cartesian/position_defaults"),x=h("../../plots/cartesian/layout_attributes"),E=h("../../constants/alignment"),k=E.LINE_SPACING,C=E.FROM_TL,L=E.FROM_BR,P=h("./constants").cn;G.exports={draw:function(A){var I=A._fullLayout._infolayer.selectAll("g."+P.colorbar).data(function(D){var R,S,N,B,H=D._fullLayout,Y=D.calcdata,Q=[];function ne(ue){return f(ue,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function ae(){"function"==typeof B.calc?B.calc(D,N,R):(R._fillgradient=S.reversescale?v(S.colorscale):S.colorscale,R._zrange=[S[B.min],S[B.max]])}for(var te=0;te<Y.length;te++){var q=(N=Y[te][0].trace)._module.colorbar;if(!0===N.visible&&q)for(var re=Array.isArray(q),V=re?q:[q],W=0;W<V.length;W++){var Z=(B=V[W]).container;(S=Z?N[Z]:N)&&S.showscale&&((R=ne(S.colorbar))._id="cb"+N.uid+(re&&Z?"-"+Z:""),R._traceIndex=N.index,R._propPrefix=(Z?Z+".":"")+"colorbar.",R._meta=N._meta,ae(),Q.push(R))}}for(var oe in H._colorAxes)if((S=H[oe]).showscale){var ie=H._colorAxes[oe];(R=ne(S.colorbar))._id="cb"+oe,R._propPrefix=oe+".colorbar.",R._meta=H._meta,B={min:"cmin",max:"cmax"},"heatmap"!==ie[0]&&(B.calc=(N=ie[1])._module.colorbar.calc),ae(),Q.push(R)}return Q}(A),function(D){return D._id});I.enter().append("g").attr("class",function(D){return D._id}).classed(P.colorbar,!0),I.each(function(D){var R=i.select(this);c.ensureSingle(R,"rect",P.cbbg),c.ensureSingle(R,"g",P.cbfills),c.ensureSingle(R,"g",P.cblines),c.ensureSingle(R,"g",P.cbaxis,function(N){N.classed(P.crisp,!0)}),c.ensureSingle(R,"g",P.cbtitleunshift,function(N){N.append("g").classed(P.cbtitle,!0)}),c.ensureSingle(R,"rect",P.cboutline);var N,B,H,Y,Q,ne,ae,S=function(N,B,H){var Y=H._fullLayout,Q=Y._size,ne=B._fillcolor,ae=B._line,te=B.title,K=te.side,q=B._zrange||i.extent(("function"==typeof ne?ne:ae.color).domain()),re="function"==typeof ae.color?ae.color:function(){return ae.color},V="function"==typeof ne?ne:function(){return ne},W=B._levels,Z=function(qe,Ye,ot){var at,ct,_t=Ye._levels,xt=[],Ht=[],At=_t.end+_t.size/100,ht=_t.size,st=1.001*ot[0]-.001*ot[1],Bt=1.001*ot[1]-.001*ot[0];for(ct=0;ct<1e5&&(at=_t.start+ct*ht,!(ht>0?at>=At:at<=At));ct++)at>st&&at<Bt&&xt.push(at);if(Ye._fillgradient)Ht=[0];else if("function"==typeof Ye._fillcolor){var gn=Ye._filllevels;if(gn)for(At=gn.end+gn.size/100,ht=gn.size,ct=0;ct<1e5&&(at=gn.start+ct*ht,!(ht>0?at>=At:at<=At));ct++)at>ot[0]&&at<ot[1]&&Ht.push(at);else(Ht=xt.map(function(hn){return hn-_t.size/2})).push(Ht[Ht.length-1]+_t.size)}else Ye._fillcolor&&"string"==typeof Ye._fillcolor&&(Ht=[0]);return _t.size<0&&(xt.reverse(),Ht.reverse()),{line:xt,fill:Ht}}(0,B,q),oe=Z.fill,ie=Z.line,ue=Math.round(B.thickness*("fraction"===B.thicknessmode?Q.w:1)),fe=ue/Q.w,he=Math.round(B.len*("fraction"===B.lenmode?Q.h:1)),de=he/Q.h,be=B.xpad/Q.w,pe=(B.borderwidth+B.outlinewidth)/2,Te=B.ypad/Q.h,ye=Math.round(B.x*Q.w+B.xpad),ke=B.x-fe*({middle:.5,right:1}[B.xanchor]||0),ze=B.y+de*(({top:-.5,bottom:.5}[B.yanchor]||0)-.5),je=Math.round(Q.h*(1-ze)),Ie=je-he;B._lenFrac=de,B._thickFrac=fe,B._xLeftFrac=ke,B._yBottomFrac=ze;var Ce=B._axis=function(qe,Ye,ot){var at=qe._fullLayout,ct={type:"linear",range:ot,tickmode:Ye.tickmode,nticks:Ye.nticks,tick0:Ye.tick0,dtick:Ye.dtick,tickvals:Ye.tickvals,ticktext:Ye.ticktext,ticks:Ye.ticks,ticklen:Ye.ticklen,tickwidth:Ye.tickwidth,tickcolor:Ye.tickcolor,showticklabels:Ye.showticklabels,ticklabelposition:Ye.ticklabelposition,ticklabeloverflow:Ye.ticklabeloverflow,tickfont:Ye.tickfont,tickangle:Ye.tickangle,tickformat:Ye.tickformat,exponentformat:Ye.exponentformat,minexponent:Ye.minexponent,separatethousands:Ye.separatethousands,showexponent:Ye.showexponent,showtickprefix:Ye.showtickprefix,tickprefix:Ye.tickprefix,showticksuffix:Ye.showticksuffix,ticksuffix:Ye.ticksuffix,title:Ye.title,showline:!0,anchor:"free",side:"right",position:1},_t={type:"linear",_id:"y"+Ye._id},xt={letter:"y",font:at.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:at.calendar};function Ht(At,ht){return c.coerce(ct,_t,x,At,ht)}return _(ct,_t,Ht,xt,at),w(ct,_t,Ht,xt),_t}(H,B,q);if(Ce.position=B.x+be+fe,-1!==["top","bottom"].indexOf(K)&&(Ce.title.side=K,Ce.titlex=B.x+be,Ce.titley=ze+("top"===te.side?de-Te:Te)),ae.color&&"auto"===B.tickmode){Ce.tickmode="linear",Ce.tick0=W.start;var _e=W.size,we=c.constrain((je-Ie)/50,4,15)+1,Se=(q[1]-q[0])/((B.nticks||we)*_e);if(Se>1){var Oe=Math.pow(10,Math.floor(Math.log(Se)/Math.LN10));_e*=Oe*c.roundUp(Se/Oe,[2,5,10]),(Math.abs(W.start)/W.size+1e-6)%1<2e-6&&(Ce.tick0=0)}Ce.dtick=_e}Ce.domain=[ze+Te,ze+de-Te],Ce.setScale(),N.attr("transform",l(Math.round(Q.l),Math.round(Q.t)));var Be,He=N.select("."+P.cbtitleunshift).attr("transform",l(-Math.round(Q.l),-Math.round(Q.t))),Xe=N.select("."+P.cbaxis),nt=0;function et(qe,Ye){var ot={propContainer:Ce,propName:B._propPrefix+"title",traceIndex:B._traceIndex,_meta:B._meta,placeholder:Y._dfltTitle.colorbar,containerGroup:N.select("."+P.cbtitle)},at="h"===qe.charAt(0)?qe.substr(1):"h"+qe;N.selectAll("."+at+",."+at+"-math-group").remove(),g.draw(H,qe,f(ot,Ye||{}))}return c.syncOrAsync([b.previousPromises,function(){if(-1!==["top","bottom"].indexOf(K)){var ot=Ce.title.font.size;et(Ce._id+"title",{attributes:{x:Q.l+(B.x+be)*Q.w,y:"top"===K?(1-(ze+de-Te))*Q.h+Q.t+3+.75*ot:(1-(ze+Te))*Q.h+Q.t-3-.25*ot,"text-anchor":"start"}})}},function(){if(-1!==["top","bottom"].indexOf(K)){var qe=N.select("."+P.cbtitle),Ye=qe.select("text"),ot=[-B.outlinewidth/2,B.outlinewidth/2],at=qe.select(".h"+Ce._id+"title-math-group").node(),ct=15.6;if(Ye.node()&&(ct=parseInt(Ye.node().style.fontSize,10)*k),at?(nt=o.bBox(at).height)>ct&&(ot[1]-=(nt-ct)/2):Ye.node()&&!Ye.classed(P.jsPlaceholder)&&(nt=o.bBox(Ye.node()).height),nt){if(nt+=5,"top"===K)Ce.domain[1]-=nt/Q.h,ot[1]*=-1;else{Ce.domain[0]+=nt/Q.h;var _t=y.lineCount(Ye);ot[1]+=(1-_t)*ct}qe.attr("transform",l(ot[0],ot[1])),Ce.setScale()}}N.selectAll("."+P.cbfills+",."+P.cblines).attr("transform",l(0,Math.round(Q.h*(1-Ce.domain[1])))),Xe.attr("transform",l(0,Math.round(-Q.t)));var xt=N.select("."+P.cbfills).selectAll("rect."+P.cbfill).attr("style","").data(oe);xt.enter().append("rect").classed(P.cbfill,!0).style("stroke","none"),xt.exit().remove();var Ht=q.map(Ce.c2p).map(Math.round).sort(function(gn,hn){return gn-hn});xt.each(function(gn,hn){var We=[0===hn?q[0]:(oe[hn]+oe[hn-1])/2,hn===oe.length-1?q[1]:(oe[hn]+oe[hn+1])/2].map(Ce.c2p).map(Math.round);We[1]=c.constrain(We[1]+(We[1]>We[0])?1:-1,Ht[0],Ht[1]);var it=i.select(this).attr({x:ye,width:Math.max(ue,2),y:i.min(We),height:Math.max(i.max(We)-i.min(We),2)});if(B._fillgradient)o.gradient(it,H,B._id,"vertical",B._fillgradient,"fill");else{var qt=V(gn).replace("e-","");it.attr("fill",m(qt).toHexString())}});var At=N.select("."+P.cblines).selectAll("path."+P.cbline).data(ae.color&&ae.width?ie:[]);At.enter().append("path").classed(P.cbline,!0),At.exit().remove(),At.each(function(gn){i.select(this).attr("d","M"+ye+","+(Math.round(Ce.c2p(gn))+ae.width/2%1)+"h"+ue).call(o.lineGroupStyle,ae.width,re(gn),ae.dash)}),Xe.selectAll("g."+Ce._id+"tick,path").remove();var ht=ye+ue+(B.outlinewidth||0)/2-("outside"===B.ticks?1:0),st=r.calcTicks(Ce),Bt=r.getTickSigns(Ce)[2];return r.drawTicks(H,Ce,{vals:"inside"===Ce.ticks?r.clipEnds(Ce,st):st,layer:Xe,path:r.makeTickPath(Ce,ht,Bt),transFn:r.makeTransTickFn(Ce)}),r.drawLabels(H,Ce,{vals:st,layer:Xe,transFn:r.makeTransTickLabelFn(Ce),labelFns:r.makeLabelFns(Ce,ht)})},function(){if(-1===["top","bottom"].indexOf(K)){var qe=Ce.title.font.size,Ye=Ce._offset+Ce._length/2,ot=Q.l+(Ce.position||0)*Q.w+("right"===Ce.side?10+qe*(Ce.showticklabels?1:.5):-10-qe*(Ce.showticklabels?.5:0));et("h"+Ce._id+"title",{avoid:{selection:i.select(H).selectAll("g."+Ce._id+"tick"),side:K,offsetLeft:Q.l,offsetTop:0,maxShift:Y.width},attributes:{x:ot,y:Ye,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}},b.previousPromises,function(){var qe=ue+B.outlinewidth/2;if(-1===Ce.ticklabelposition.indexOf("inside")&&(qe+=o.bBox(Xe.node()).width),(Be=He.select("text")).node()&&!Be.classed(P.jsPlaceholder)){var Ye,ot=He.select(".h"+Ce._id+"title-math-group").node();Ye=ot&&-1!==["top","bottom"].indexOf(K)?o.bBox(ot).width:o.bBox(He.node()).right-ye-Q.l,qe=Math.max(qe,Ye)}var at=2*B.xpad+qe+B.borderwidth+B.outlinewidth/2,ct=je-Ie;N.select("."+P.cbbg).attr({x:ye-B.xpad-(B.borderwidth+B.outlinewidth)/2,y:Ie-pe,width:Math.max(at,2),height:Math.max(ct+2*pe,2)}).call(d.fill,B.bgcolor).call(d.stroke,B.bordercolor).style("stroke-width",B.borderwidth),N.selectAll("."+P.cboutline).attr({x:ye,y:Ie+B.ypad+("top"===K?nt:0),width:Math.max(ue,2),height:Math.max(ct-2*B.ypad-nt,2)}).call(d.stroke,B.outlinecolor).style({fill:"none","stroke-width":B.outlinewidth}),N.attr("transform",l(Q.l-({center:.5,right:1}[B.xanchor]||0)*at,Q.t));var xt={},Ht=C[B.yanchor],At=L[B.yanchor];"pixels"===B.lenmode?(xt.y=B.y,xt.t=ct*Ht,xt.b=ct*At):(xt.t=xt.b=0,xt.yt=B.y+B.len*Ht,xt.yb=B.y-B.len*At);var ht=C[B.xanchor],st=L[B.xanchor];if("pixels"===B.thicknessmode)xt.x=B.x,xt.l=at*ht,xt.r=at*st;else{var Bt=at-ue;xt.l=Bt*ht,xt.r=Bt*st,xt.xl=B.x-B.thickness*ht,xt.xr=B.x+B.thickness*st}b.autoMargin(H,B._id,xt)}],H)}(R,D,A);S&&S.then&&(A._promises||[]).push(S),A._context.edits.colorbarPosition&&(B=D,ae=(H=A)._fullLayout._size,u.init({element:(N=R).node(),gd:H,prepFn:function(){Y=N.attr("transform"),s(N)},moveFn:function(te,K){N.attr("transform",Y+l(te,K)),Q=u.align(B._xLeftFrac+te/ae.w,B._thickFrac,0,1,B.xanchor),ne=u.align(B._yBottomFrac-K/ae.h,B._lenFrac,0,1,B.yanchor);var q=u.getCursor(Q,ne,B.xanchor,B.yanchor);s(N,q)},doneFn:function(){if(s(N),void 0!==Q&&void 0!==ne){var te={};te[B._propPrefix+"x"]=Q,te[B._propPrefix+"y"]=ne,void 0!==B._traceIndex?p.call("_guiRestyle",H,te,B._traceIndex):p.call("_guiRelayout",H,te)}}}))}),I.exit().each(function(D){b.autoMargin(A,D._id)}).remove(),I.order()}}},{"../../constants/alignment":771,"../../lib":803,"../../lib/extend":793,"../../lib/setcursor":824,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"../../plots/cartesian/axis_defaults":856,"../../plots/cartesian/layout_attributes":869,"../../plots/cartesian/position_defaults":872,"../../plots/plots":917,"../../registry":931,"../color":666,"../colorscale/helpers":677,"../dragelement":685,"../drawing":688,"../titles":764,"./constants":668,"@plotly/d3":58,tinycolor2:598}],671:[function(h,G,X){"use strict";var i=h("../../lib");G.exports=function(m){return i.isPlainObject(m.colorbar)}},{"../../lib":803}],672:[function(h,G,X){"use strict";G.exports={moduleType:"component",name:"colorbar",attributes:h("./attributes"),supplyDefaults:h("./defaults"),draw:h("./draw").draw,hasColorbar:h("./has_colorbar")}},{"./attributes":667,"./defaults":669,"./draw":670,"./has_colorbar":671}],673:[function(h,G,X){"use strict";var i=h("../colorbar/attributes"),m=h("../../lib/regex").counter,b=h("../../lib/sort_object_keys"),p=h("./scales.js").scales;function r(u){return"`"+u+"`"}b(p),G.exports=function(u,c){u=u||"";var l,f=(c=c||{}).cLetter||"c",s=("onlyIfNumerical"in c||Boolean(u),"noScale"in c?c.noScale:"marker.line"===u),o="showScaleDflt"in c?c.showScaleDflt:"z"===f,d="string"==typeof c.colorscaleDflt?p[c.colorscaleDflt]:null,g=c.editTypeOverride||"",y=u?u+".":"";"colorAttr"in c?l=c.colorAttr:r(y+(l={z:"z",c:"color"}[f]));var v=f+"auto",_=f+"min",w=f+"max",x=f+"mid",E=(r(y+v),r(y+_),r(y+w),{});E[_]=E[w]=void 0;var k={};k[v]=!1;var C={};return"color"===l&&(C.color={valType:"color",arrayOk:!0,editType:g||"style"},c.anim&&(C.color.anim=!0)),C[v]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:E},C[_]={valType:"number",dflt:null,editType:g||"plot",impliedEdits:k},C[w]={valType:"number",dflt:null,editType:g||"plot",impliedEdits:k},C[x]={valType:"number",dflt:null,editType:"calc",impliedEdits:E},C.colorscale={valType:"colorscale",editType:"calc",dflt:d,impliedEdits:{autocolorscale:!1}},C.autocolorscale={valType:"boolean",dflt:!1!==c.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},C.reversescale={valType:"boolean",dflt:!1,editType:"plot"},s||(C.showscale={valType:"boolean",dflt:o,editType:"calc"},C.colorbar=i),c.noColorAxis||(C.coloraxis={valType:"subplotid",regex:m("coloraxis"),dflt:null,editType:"calc"}),C}},{"../../lib/regex":820,"../../lib/sort_object_keys":826,"../colorbar/attributes":667,"./scales.js":681}],674:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib"),b=h("./helpers").extractOpts;G.exports=function(p,r,u){var l=p._fullLayout,f=u.vals,s=u.containerStr,o=s?m.nestedProperty(r,s).get():r,d=b(o),g=!1!==d.auto,y=d.min,v=d.max,_=d.mid,w=function(){return m.aggNums(Math.min,null,f)},x=function(){return m.aggNums(Math.max,null,f)};void 0===y?y=w():g&&(y=o._colorAx&&i(y)?Math.min(y,w()):w()),void 0===v?v=x():g&&(v=o._colorAx&&i(v)?Math.max(v,x()):x()),g&&void 0!==_&&(v-_>_-y?y=_-(v-_):v-_<_-y&&(v=_+(_-y))),y===v&&(y-=.5,v+=.5),d._sync("min",y),d._sync("max",v),d.autocolorscale&&d._sync("colorscale",y*v<0?l.colorscale.diverging:y>=0?l.colorscale.sequential:l.colorscale.sequentialminus)}},{"../../lib":803,"./helpers":677,"fast-isnumeric":249}],675:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./helpers").hasColorscale,b=h("./helpers").extractOpts;G.exports=function(p,r){function u(g,y){var v=g["_"+y];void 0!==v&&(g[y]=v)}function c(g,y){var v=y.container?i.nestedProperty(g,y.container).get():g;if(v)if(v.coloraxis)v._colorAx=r[v.coloraxis];else{var _=b(v),w=_.auto;(w||void 0===_.min)&&u(v,y.min),(w||void 0===_.max)&&u(v,y.max),_.autocolorscale&&u(v,"colorscale")}}for(var l=0;l<p.length;l++){var f=p[l],s=f._module.colorbar;if(s)if(Array.isArray(s))for(var o=0;o<s.length;o++)c(f,s[o]);else c(f,s);m(f,"marker.line")&&c(f,{container:"marker.line",min:"cmin",max:"cmax"})}for(var d in r._colorAxes)c(r[d],{min:"cmin",max:"cmax"})}},{"../../lib":803,"./helpers":677}],676:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib"),b=h("../colorbar/has_colorbar"),p=h("../colorbar/defaults"),r=h("./scales").isValid,u=h("../../registry").traceIs;function c(l,f){var s=f.slice(0,f.length-1);return f?m.nestedProperty(l,s).get()||{}:l}G.exports=function l(f,s,o,d,g){var y=g.prefix,v=g.cLetter,_="_module"in s,w=c(f,y),x=c(s,y),E=c(s._template||{},y)||{},k=function(){return delete f.coloraxis,delete s.coloraxis,l(f,s,o,d,g)};if(_){var C=o._colorAxes||{},L=d(y+"coloraxis");if(L){var P=u(s,"contour")&&m.nestedProperty(s,"contours.coloring").get()||"heatmap",A=C[L];return void(A?(A[2].push(k),A[0]!==P&&(A[0]=!1,m.warn(["Ignoring coloraxis:",L,"setting","as it is linked to incompatible colorscales."].join(" ")))):C[L]=[P,s,[k]])}}var I=w[v+"min"],D=w[v+"max"],R=i(I)&&i(D)&&I<D;d(y+v+"auto",!R)?d(y+v+"mid"):(d(y+v+"min"),d(y+v+"max"));var S,N,B=w.colorscale,H=E.colorscale;void 0!==B&&(S=!r(B)),void 0!==H&&(S=!r(H)),d(y+"autocolorscale",S),d(y+"colorscale"),d(y+"reversescale"),"marker.line."!==y&&(y&&_&&(N=b(w)),d(y+"showscale",N)&&(y&&E&&(x._template=E),p(w,x,o)))}},{"../../lib":803,"../../registry":931,"../colorbar/defaults":669,"../colorbar/has_colorbar":671,"./scales":681,"fast-isnumeric":249}],677:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("tinycolor2"),b=h("fast-isnumeric"),p=h("../../lib"),r=h("../color"),u=h("./scales").isValid,c=["showscale","autocolorscale","colorscale","reversescale","colorbar"],l=["min","max","mid","auto"];function f(y){var v,_,w,x=y._colorAx,E=x||y,k={};for(_=0;_<c.length;_++)k[w=c[_]]=E[w];if(x)for(v="c",_=0;_<l.length;_++)k[w=l[_]]=E["c"+w];else{var C;for(_=0;_<l.length;_++)((C="c"+(w=l[_]))in E||(C="z"+w)in E)&&(k[w]=E[C]);v=C.charAt(0)}return k._sync=function(L,P){var A=-1!==l.indexOf(L)?v+L:L;E[A]=E["_"+A]=P},k}function s(y){for(var v=f(y),_=v.min,w=v.max,x=v.reversescale?o(v.colorscale):v.colorscale,E=x.length,k=new Array(E),C=new Array(E),L=0;L<E;L++){var P=x[L];k[L]=_+P[0]*(w-_),C[L]=P[1]}return{domain:k,range:C}}function o(y){for(var v=y.length,_=new Array(v),w=v-1,x=0;w>=0;w--,x++){var E=y[w];_[x]=[1-E[0],E[1]]}return _}function d(y,v){v=v||{};for(var _=y.domain,w=y.range,x=w.length,E=new Array(x),k=0;k<x;k++){var C=m(w[k]).toRgb();E[k]=[C.r,C.g,C.b,C.a]}var L,P=i.scale.linear().domain(_).range(E).clamp(!0),A=v.noNumericCheck,I=v.returnArray;return(L=A&&I?P:A?function(D){return g(P(D))}:I?function(D){return b(D)?P(D):m(D).isValid()?D:r.defaultLine}:function(D){return b(D)?g(P(D)):m(D).isValid()?D:r.defaultLine}).domain=P.domain,L.range=function(){return w},L}function g(y){return m({r:y[0],g:y[1],b:y[2],a:y[3]}).toRgbString()}G.exports={hasColorscale:function(y,v,_){var w=v?p.nestedProperty(y,v).get()||{}:y,x=w[_||"color"],E=!1;if(p.isArrayOrTypedArray(x))for(var k=0;k<x.length;k++)if(b(x[k])){E=!0;break}return p.isPlainObject(w)&&(E||!0===w.showscale||b(w.cmin)&&b(w.cmax)||u(w.colorscale)||p.isPlainObject(w.colorbar))},extractOpts:f,extractScale:s,flipScale:o,makeColorScaleFunc:d,makeColorScaleFuncFromTrace:function(y,v){return d(s(y),v)}}},{"../../lib":803,"../color":666,"./scales":681,"@plotly/d3":58,"fast-isnumeric":249,tinycolor2:598}],678:[function(h,G,X){"use strict";var i=h("./scales"),m=h("./helpers");G.exports={moduleType:"component",name:"colorscale",attributes:h("./attributes"),layoutAttributes:h("./layout_attributes"),supplyLayoutDefaults:h("./layout_defaults"),handleDefaults:h("./defaults"),crossTraceDefaults:h("./cross_trace_defaults"),calc:h("./calc"),scales:i.scales,defaultScale:i.defaultScale,getScale:i.get,isValidScale:i.isValid,hasColorscale:m.hasColorscale,extractOpts:m.extractOpts,extractScale:m.extractScale,flipScale:m.flipScale,makeColorScaleFunc:m.makeColorScaleFunc,makeColorScaleFuncFromTrace:m.makeColorScaleFuncFromTrace}},{"./attributes":673,"./calc":674,"./cross_trace_defaults":675,"./defaults":676,"./helpers":677,"./layout_attributes":679,"./layout_defaults":680,"./scales":681}],679:[function(h,G,X){"use strict";var i=h("../../lib/extend").extendFlat,m=h("./attributes"),b=h("./scales").scales;G.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:b.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:b.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:b.RdBu,editType:"calc"}},coloraxis:i({_isSubplotObj:!0,editType:"calc"},m("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":793,"./attributes":673,"./scales":681}],680:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plot_api/plot_template"),b=h("./layout_attributes"),p=h("./defaults");G.exports=function(r,u){function c(v,_){return i.coerce(r,u,b,v,_)}c("colorscale.sequential"),c("colorscale.sequentialminus"),c("colorscale.diverging");var l,f,s=u._colorAxes;function o(v,_){return i.coerce(l,f,b.coloraxis,v,_)}for(var d in s){var g=s[d];if(g[0])l=r[d]||{},(f=m.newContainer(u,d,"coloraxis"))._name=d,p(l,f,u,o,{prefix:"",cLetter:"c"});else{for(var y=0;y<g[2].length;y++)g[2][y]();delete u._colorAxes[d]}}}},{"../../lib":803,"../../plot_api/plot_template":843,"./defaults":676,"./layout_attributes":679}],681:[function(h,G,X){"use strict";var i=h("tinycolor2"),m={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},b=m.RdBu;function p(r){var u=0;if(!Array.isArray(r)||r.length<2||!r[0]||!r[r.length-1]||0!=+r[0][0]||1!=+r[r.length-1][0])return!1;for(var c=0;c<r.length;c++){var l=r[c];if(2!==l.length||+l[0]<u||!i(l[1]).isValid())return!1;u=+l[0]}return!0}G.exports={scales:m,defaultScale:b,get:function(r,u){if(u||(u=b),!r)return u;function c(){try{r=m[r]||JSON.parse(r)}catch(l){r=u}}return"string"==typeof r&&(c(),"string"==typeof r&&c()),p(r)?r:u},isValid:function(r){return void 0!==m[r]||p(r)}}},{tinycolor2:598}],682:[function(h,G,X){"use strict";G.exports=function(i,m,b,p,r){var u=(i-b)/(p-b),c=u+m/(p-b),l=(u+c)/2;return"left"===r||"bottom"===r?u:"center"===r||"middle"===r?l:"right"===r||"top"===r?c:u<2/3-l?u:c>4/3-l?c:l}},{}],683:[function(h,G,X){"use strict";var i=h("../../lib"),m=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];G.exports=function(b,p,r,u){return b="left"===r?0:"center"===r?1:"right"===r?2:i.constrain(Math.floor(3*b),0,2),p="bottom"===u?0:"middle"===u?1:"top"===u?2:i.constrain(Math.floor(3*p),0,2),m[p][b]}},{"../../lib":803}],684:[function(h,G,X){"use strict";X.selectMode=function(i){return"lasso"===i||"select"===i},X.drawMode=function(i){return"drawclosedpath"===i||"drawopenpath"===i||"drawline"===i||"drawrect"===i||"drawcircle"===i},X.openMode=function(i){return"drawline"===i||"drawopenpath"===i},X.rectMode=function(i){return"select"===i||"drawline"===i||"drawrect"===i||"drawcircle"===i},X.freeMode=function(i){return"lasso"===i||"drawclosedpath"===i||"drawopenpath"===i},X.selectingOrDrawing=function(i){return X.freeMode(i)||X.rectMode(i)}},{}],685:[function(h,G,X){"use strict";var i=h("mouse-event-offset"),m=h("has-hover"),b=h("has-passive-events"),p=h("../../lib").removeElement,r=h("../../plots/cartesian/constants"),u=G.exports={};u.align=h("./align"),u.getCursor=h("./cursor");var c=h("./unhover");function l(){var s=document.createElement("div");s.className="dragcover";var o=s.style;return o.position="fixed",o.left=0,o.right=0,o.top=0,o.bottom=0,o.zIndex=999999999,o.background="none",document.body.appendChild(s),s}function f(s){return i(s.changedTouches?s.changedTouches[0]:s,document.body)}u.unhover=c.wrapped,u.unhoverRaw=c.raw,u.init=function(s){var o,d,g,y,v,_,w,x,E=s.gd,k=1,C=E._context.doubleClickDelay,L=s.element;E._mouseDownTime||(E._mouseDownTime=0),L.style.pointerEvents="all",L.onmousedown=A,b?(L._ontouchstart&&L.removeEventListener("touchstart",L._ontouchstart),L._ontouchstart=A,L.addEventListener("touchstart",A,{passive:!1})):L.ontouchstart=A;var P=s.clampFn||function(R,S,N){return Math.abs(R)<N&&(R=0),Math.abs(S)<N&&(S=0),[R,S]};function A(R){E._dragged=!1,E._dragging=!0;var S=f(R);o=S[0],d=S[1],w=R.target,_=R,x=2===R.buttons||R.ctrlKey,void 0===R.clientX&&void 0===R.clientY&&(R.clientX=o,R.clientY=d),(g=(new Date).getTime())-E._mouseDownTime<C?k+=1:(k=1,E._mouseDownTime=g),s.prepFn&&s.prepFn(R,o,d),m&&!x?(v=l()).style.cursor=window.getComputedStyle(L).cursor:m||(v=document,y=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(L).cursor),document.addEventListener("mouseup",D),document.addEventListener("touchend",D),!1!==s.dragmode&&(R.preventDefault(),document.addEventListener("mousemove",I),document.addEventListener("touchmove",I,{passive:!1}))}function I(R){R.preventDefault();var S=f(R),B=P(S[0]-o,S[1]-d,s.minDrag||r.MINDRAG),H=B[0],Y=B[1];(H||Y)&&(E._dragged=!0,u.unhover(E,R)),E._dragged&&s.moveFn&&!x&&(E._dragdata={element:L,dx:H,dy:Y},s.moveFn(H,Y))}function D(R){if(delete E._dragdata,!1!==s.dragmode&&(R.preventDefault(),document.removeEventListener("mousemove",I),document.removeEventListener("touchmove",I)),document.removeEventListener("mouseup",D),document.removeEventListener("touchend",D),m?p(v):y&&(v.documentElement.style.cursor=y,y=null),E._dragging){if(E._dragging=!1,(new Date).getTime()-E._mouseDownTime>C&&(k=Math.max(k-1,1)),E._dragged)s.doneFn&&s.doneFn();else if(s.clickFn&&s.clickFn(k,_),!x){var S;try{S=new MouseEvent("click",R)}catch(B){var N=f(R);(S=document.createEvent("MouseEvents")).initMouseEvent("click",R.bubbles,R.cancelable,R.view,R.detail,R.screenX,R.screenY,N[0],N[1],R.ctrlKey,R.altKey,R.shiftKey,R.metaKey,R.button,R.relatedTarget)}w.dispatchEvent(S)}E._dragging=!1,E._dragged=!1}else E._dragged=!1}},u.coverSlip=l},{"../../lib":803,"../../plots/cartesian/constants":861,"./align":682,"./cursor":683,"./unhover":686,"has-hover":443,"has-passive-events":444,"mouse-event-offset":471}],686:[function(h,G,X){"use strict";var i=h("../../lib/events"),m=h("../../lib/throttle"),b=h("../../lib/dom").getGraphDiv,p=h("../fx/constants"),r=G.exports={};r.wrapped=function(u,c,l){(u=b(u))._fullLayout&&m.clear(u._fullLayout._uid+p.HOVERID),r.raw(u,c,l)},r.raw=function(u,c){var l=u._fullLayout,f=u._hoverdata;c||(c={}),c.target&&!u._dragged&&!1===i.triggerHandler(u,"plotly_beforehover",c)||(l._hoverlayer.selectAll("g").remove(),l._hoverlayer.selectAll("line").remove(),l._hoverlayer.selectAll("circle").remove(),u._hoverdata=void 0,c.target&&f&&u.emit("plotly_unhover",{event:c,points:f}))}},{"../../lib/dom":791,"../../lib/events":792,"../../lib/throttle":830,"../fx/constants":700}],687:[function(h,G,X){"use strict";X.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},X.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],688:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=m.numberFormat,p=h("fast-isnumeric"),r=h("tinycolor2"),u=h("../../registry"),c=h("../color"),l=h("../colorscale"),f=m.strTranslate,s=h("../../lib/svg_text_utils"),o=h("../../constants/xmlns_namespaces"),d=h("../../constants/alignment").LINE_SPACING,g=h("../../constants/interactions").DESELECTDIM,y=h("../../traces/scatter/subtypes"),v=h("../../traces/scatter/make_bubble_size_func"),_=h("../../components/fx/helpers").appendArrayPointValue,w=G.exports={};w.font=function(te,K,q,re){m.isPlainObject(K)&&(re=K.color,q=K.size,K=K.family),K&&te.style("font-family",K),q+1&&te.style("font-size",q+"px"),re&&te.call(c.fill,re)},w.setPosition=function(te,K,q){te.attr("x",K).attr("y",q)},w.setSize=function(te,K,q){te.attr("width",K).attr("height",q)},w.setRect=function(te,K,q,re,V){te.call(w.setPosition,K,q).call(w.setSize,re,V)},w.translatePoint=function(te,K,q,re){var V=q.c2p(te.x),W=re.c2p(te.y);return!!(p(V)&&p(W)&&K.node())&&("text"===K.node().nodeName?K.attr("x",V).attr("y",W):K.attr("transform",f(V,W)),!0)},w.translatePoints=function(te,K,q){te.each(function(re){var V=i.select(this);w.translatePoint(re,V,K,q)})},w.hideOutsideRangePoint=function(te,K,q,re,V,W){K.attr("display",q.isPtWithinRange(te,V)&&re.isPtWithinRange(te,W)?null:"none")},w.hideOutsideRangePoints=function(te,K){if(K._hasClipOnAxisFalse){var q=K.xaxis,re=K.yaxis;te.each(function(V){var W=V[0].trace,Z=W.xcalendar,oe=W.ycalendar,ie=u.traceIs(W,"bar-like")?".bartext":".point,.textpoint";te.selectAll(ie).each(function(ue){w.hideOutsideRangePoint(ue,i.select(this),q,re,Z,oe)})})}},w.crispRound=function(te,K,q){return K&&p(K)?te._context.staticPlot?K:K<1?1:Math.round(K):q||0},w.singleLineStyle=function(te,K,q,re,V){K.style("fill","none");var W=(((te||[])[0]||{}).trace||{}).line||{},Z=q||W.width||0,oe=V||W.dash||"";c.stroke(K,re||W.color),w.dashLine(K,oe,Z)},w.lineGroupStyle=function(te,K,q,re){te.style("fill","none").each(function(V){var W=(((V||[])[0]||{}).trace||{}).line||{},Z=K||W.width||0,oe=re||W.dash||"";i.select(this).call(c.stroke,q||W.color).call(w.dashLine,oe,Z)})},w.dashLine=function(te,K,q){K=w.dashStyle(K,q=+q||0),te.style({"stroke-dasharray":K,"stroke-width":q+"px"})},w.dashStyle=function(te,K){K=+K||1;var q=Math.max(K,3);return"solid"===te?te="":"dot"===te?te=q+"px,"+q+"px":"dash"===te?te=3*q+"px,"+3*q+"px":"longdash"===te?te=5*q+"px,"+5*q+"px":"dashdot"===te?te=3*q+"px,"+q+"px,"+q+"px,"+q+"px":"longdashdot"===te&&(te=5*q+"px,"+2*q+"px,"+q+"px,"+2*q+"px"),te},w.singleFillStyle=function(te){var K=(((i.select(te.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;K&&te.call(c.fill,K)},w.fillGroupStyle=function(te){te.style("stroke-width",0).each(function(K){var q=i.select(this);K[0].trace&&q.call(c.fill,K[0].trace.fillcolor)})};var x=h("./symbol_defs");w.symbolNames=[],w.symbolFuncs=[],w.symbolNeedLines={},w.symbolNoDot={},w.symbolNoFill={},w.symbolList=[],Object.keys(x).forEach(function(te){var K=x[te],q=K.n;w.symbolList.push(q,String(q),te,q+100,String(q+100),te+"-open"),w.symbolNames[q]=te,w.symbolFuncs[q]=K.f,K.needLine&&(w.symbolNeedLines[q]=!0),K.noDot?w.symbolNoDot[q]=!0:w.symbolList.push(q+200,String(q+200),te+"-dot",q+300,String(q+300),te+"-open-dot"),K.noFill&&(w.symbolNoFill[q]=!0)});var E=w.symbolNames.length;function k(te,K){return w.symbolFuncs[te%100](K)+(te>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}w.symbolNumber=function(te){if(p(te))te=+te;else if("string"==typeof te){var K=0;te.indexOf("-open")>0&&(K=100,te=te.replace("-open","")),te.indexOf("-dot")>0&&(K+=200,te=te.replace("-dot","")),(te=w.symbolNames.indexOf(te))>=0&&(te+=K)}return te%100>=E||te>=400?0:Math.floor(Math.max(te,0))};var C={x1:1,x2:0,y1:0,y2:0},L={x1:0,x2:0,y1:1,y2:0},P=b("~f"),A={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:C},horizontalreversed:{node:"linearGradient",attrs:C,reversed:!0},vertical:{node:"linearGradient",attrs:L},verticalreversed:{node:"linearGradient",attrs:L,reversed:!0}};w.gradient=function(te,K,q,re,V,W){for(var Z=V.length,oe=A[re],ie=new Array(Z),ue=0;ue<Z;ue++)oe.reversed?ie[Z-1-ue]=[P(100*(1-V[ue][0])),V[ue][1]]:ie[ue]=[P(100*V[ue][0]),V[ue][1]];var fe=K._fullLayout,he="g"+fe._uid+"-"+q,de=fe._defs.select(".gradients").selectAll("#"+he).data([re+ie.join(";")],m.identity);de.exit().remove(),de.enter().append(oe.node).each(function(){var Te=i.select(this);oe.attrs&&Te.attr(oe.attrs),Te.attr("id",he);var ye=Te.selectAll("stop").data(ie);ye.exit().remove(),ye.enter().append("stop"),ye.each(function(ke){var ze=r(ke[1]);i.select(this).attr({offset:ke[0]+"%","stop-color":c.tinyRGB(ze),"stop-opacity":ze.getAlpha()})})}),te.style(W,Q(he,K)).style(W+"-opacity",null);var be=function(Te){return"."+Te.attr("class").replace(/\s/g,".")},pe=be(i.select(te.node().parentNode))+">"+be(te);fe._gradientUrlQueryParts[pe]=1},w.pattern=function(te,K,q,re,V,W,Z,oe,ie,ue,fe,he){var de="legend"===K;oe&&("overlay"===ie?fe=c.contrast(ue=oe):(ue=void 0,fe=oe));var be,pe,Te,ye,ke,ze,je,Ie,_e,Se=q._fullLayout,Oe="p"+Se._uid+"-"+re,Be={};switch(V){case"/":be=W*Math.sqrt(2),pe=W*Math.sqrt(2),ze="path",Be={d:Te="M-"+be/4+","+pe/4+"l"+be/2+",-"+pe/2+"M0,"+pe+"L"+be+",0M"+be/4*3+","+pe/4*5+"l"+be/2+",-"+pe/2,opacity:he,stroke:fe,"stroke-width":(ye=Z*W)+"px"};break;case"\\":be=W*Math.sqrt(2),pe=W*Math.sqrt(2),ze="path",Be={d:Te="M"+be/4*3+",-"+pe/4+"l"+be/2+","+pe/2+"M0,0L"+be+","+pe+"M-"+be/4+","+pe/4*3+"l"+be/2+","+pe/2,opacity:he,stroke:fe,"stroke-width":(ye=Z*W)+"px"};break;case"x":be=W*Math.sqrt(2),pe=W*Math.sqrt(2),Te="M-"+be/4+","+pe/4+"l"+be/2+",-"+pe/2+"M0,"+pe+"L"+be+",0M"+be/4*3+","+pe/4*5+"l"+be/2+",-"+pe/2+"M"+be/4*3+",-"+pe/4+"l"+be/2+","+pe/2+"M0,0L"+be+","+pe+"M-"+be/4+","+pe/4*3+"l"+be/2+","+pe/2,ye=W-W*Math.sqrt(1-Z),ze="path",Be={d:Te,opacity:he,stroke:fe,"stroke-width":ye+"px"};break;case"|":ze="path",ze="path",Be={d:Te="M"+(be=W)/2+",0L"+be/2+","+(pe=W),opacity:he,stroke:fe,"stroke-width":(ye=Z*W)+"px"};break;case"-":ze="path",ze="path",Be={d:Te="M0,"+(pe=W)/2+"L"+(be=W)+","+pe/2,opacity:he,stroke:fe,"stroke-width":(ye=Z*W)+"px"};break;case"+":ze="path",Te="M"+(be=W)/2+",0L"+be/2+","+(pe=W)+"M0,"+pe/2+"L"+be+","+pe/2,ye=W-W*Math.sqrt(1-Z),ze="path",Be={d:Te,opacity:he,stroke:fe,"stroke-width":ye+"px"};break;case".":be=W,pe=W,Z<Math.PI/4?ke=Math.sqrt(Z*W*W/Math.PI):(je=Z,Ie=Math.PI/4,1,ke=(_e=W/2)+(W/Math.sqrt(2)-_e)*(je-Ie)/(1-Ie)),ze="circle",Be={cx:be/2,cy:pe/2,r:ke,opacity:he,fill:fe}}var He=[V||"noSh",ue||"noBg",fe||"noFg",W,Z].join(";"),Xe=Se._defs.select(".patterns").selectAll("#"+Oe).data([He],m.identity);Xe.exit().remove(),Xe.enter().append("pattern").each(function(){var et=i.select(this);if(et.attr({id:Oe,width:be+"px",height:pe+"px",patternUnits:"userSpaceOnUse",patternTransform:de?"scale(0.8)":""}),ue){var qe=et.selectAll("rect").data([0]);qe.exit().remove(),qe.enter().append("rect").attr({width:be+"px",height:pe+"px",fill:ue})}var Ye=et.selectAll(ze).data([0]);Ye.exit().remove(),Ye.enter().append(ze).attr(Be)}),te.style("fill",Q(Oe,q)).style("fill-opacity",null),te.classed("pattern_filled",!0);var nt="."+i.select(te.node().parentNode).attr("class").replace(/\s/g,".")+">.pattern_filled";Se._patternUrlQueryParts[nt]=1},w.initGradients=function(te){var K=te._fullLayout;m.ensureSingle(K._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),K._gradientUrlQueryParts={}},w.initPatterns=function(te){var K=te._fullLayout;m.ensureSingle(K._defs,"g","patterns").selectAll("pattern").remove(),K._patternUrlQueryParts={}},w.getPatternAttr=function(te,K,q){return te&&m.isArrayOrTypedArray(te)?K<te.length?te[K]:q:te},w.pointStyle=function(te,K,q){if(te.size()){var re=w.makePointStyleFns(K);te.each(function(V){w.singlePointStyle(V,i.select(this),K,re,q)})}},w.singlePointStyle=function(te,K,q,re,V){var W=q.marker,Z=W.line;if(K.style("opacity",re.selectedOpacityFn?re.selectedOpacityFn(te):void 0===te.mo?W.opacity:te.mo),re.ms2mrc){var oe;oe="various"===te.ms||"various"===W.size?3:re.ms2mrc(te.ms),te.mrc=oe,re.selectedSizeFn&&(oe=te.mrc=re.selectedSizeFn(te));var ie=w.symbolNumber(te.mx||W.symbol)||0;te.om=ie%200>=100,K.attr("d",k(ie,oe))}var ue,fe,he,de=!1;if(te.so?(he=Z.outlierwidth,fe=Z.outliercolor,ue=W.outliercolor):(he=(te.mlw+1||(Z||{}).width+1||(te.trace?(te.trace.marker.line||{}).width:0)+1)-1||0,fe="mlc"in te?te.mlcc=re.lineScale(te.mlc):m.isArrayOrTypedArray(Z.color)?c.defaultLine:Z.color,m.isArrayOrTypedArray(W.color)&&(ue=c.defaultLine,de=!0),ue="mc"in te?te.mcc=re.markerScale(te.mc):W.color||"rgba(0,0,0,0)",re.selectedColorFn&&(ue=re.selectedColorFn(te))),te.om)K.call(c.stroke,ue).style({"stroke-width":(he||1)+"px",fill:"none"});else{K.style("stroke-width",(te.isBlank?0:he)+"px");var pe=W.gradient,Te=te.mgt;Te?de=!0:Te=pe&&pe.type,m.isArrayOrTypedArray(Te)&&(A[Te=Te[0]]||(Te=0));var ye=W.pattern,ke=ye&&w.getPatternAttr(ye.shape,te.i,"");if(Te&&"none"!==Te){var ze=te.mgc;ze?de=!0:ze=pe.color;var je=q.uid;de&&(je+="-"+te.i),w.gradient(K,V,je,Te,[[0,ze],[1,ue]],"fill")}else if(ke){var Ie=w.getPatternAttr(ye.bgcolor,te.i,null),Ce=w.getPatternAttr(ye.fgcolor,te.i,null),_e=ye.fgopacity,we=w.getPatternAttr(ye.size,te.i,8),Se=w.getPatternAttr(ye.solidity,te.i,.3),Oe=te.mcc||m.isArrayOrTypedArray(ye.shape)||m.isArrayOrTypedArray(ye.bgcolor)||m.isArrayOrTypedArray(ye.size)||m.isArrayOrTypedArray(ye.solidity),Be=q.uid;Oe&&(Be+="-"+te.i),w.pattern(K,"point",V,Be,ke,we,Se,te.mcc,ye.fillmode,Ie,Ce,_e)}else c.fill(K,ue);he&&c.stroke(K,fe)}},w.makePointStyleFns=function(te){var K={},q=te.marker;return K.markerScale=w.tryColorscale(q,""),K.lineScale=w.tryColorscale(q,"line"),u.traceIs(te,"symbols")&&(K.ms2mrc=y.isBubble(te)?v(te):function(){return(q.size||6)/2}),te.selectedpoints&&m.extendFlat(K,w.makeSelectedPointStyleFns(te)),K},w.makeSelectedPointStyleFns=function(te){var K={},V=te.marker||{},W=(te.selected||{}).marker||{},Z=(te.unselected||{}).marker||{},ie=W.opacity,ue=Z.opacity,fe=void 0!==ie,he=void 0!==ue;(m.isArrayOrTypedArray(V.opacity)||fe||he)&&(K.selectedOpacityFn=function(Ie){var Ce=void 0===Ie.mo?V.opacity:Ie.mo;return Ie.selected?fe?ie:Ce:he?ue:g*Ce});var de=V.color,be=W.color,pe=Z.color;(be||pe)&&(K.selectedColorFn=function(Ie){var Ce=Ie.mcc||de;return Ie.selected?be||Ce:pe||Ce});var Te=V.size,ye=W.size,ke=Z.size,ze=void 0!==ye,je=void 0!==ke;return u.traceIs(te,"symbols")&&(ze||je)&&(K.selectedSizeFn=function(Ie){var Ce=Ie.mrc||Te/2;return Ie.selected?ze?ye/2:Ce:je?ke/2:Ce}),K},w.makeSelectedTextStyleFns=function(te){var K={},oe=(te.textfont||{}).color,ie=((te.selected||{}).textfont||{}).color,ue=((te.unselected||{}).textfont||{}).color;return K.selectedTextColorFn=function(fe){var he=fe.tc||oe;return fe.selected?ie||he:ue||(ie?he:c.addOpacity(he,g))},K},w.selectedPointStyle=function(te,K){if(te.size()&&K.selectedpoints){var q=w.makeSelectedPointStyleFns(K),re=K.marker||{},V=[];q.selectedOpacityFn&&V.push(function(W,Z){W.style("opacity",q.selectedOpacityFn(Z))}),q.selectedColorFn&&V.push(function(W,Z){c.fill(W,q.selectedColorFn(Z))}),q.selectedSizeFn&&V.push(function(W,Z){var oe=Z.mx||re.symbol||0,ie=q.selectedSizeFn(Z);W.attr("d",k(w.symbolNumber(oe),ie)),Z.mrc2=ie}),V.length&&te.each(function(W){for(var Z=i.select(this),oe=0;oe<V.length;oe++)V[oe](Z,W)})}},w.tryColorscale=function(te,K){var q=K?m.nestedProperty(te,K).get():te;return q&&(q.colorscale||q._colorAx)&&m.isArrayOrTypedArray(q.color)?l.makeColorScaleFuncFromTrace(q):m.identity};var I={start:1,end:-1,middle:0,bottom:1,top:-1};function D(te,K,q,re){var V=i.select(te.node().parentNode),W=-1!==K.indexOf("top")?"top":-1!==K.indexOf("bottom")?"bottom":"middle",Z=-1!==K.indexOf("left")?"end":-1!==K.indexOf("right")?"start":"middle",oe=re?re/.8+1:0,ie=(s.lineCount(te)-1)*d+1,ue=I[Z]*oe,fe=.75*q+I[W]*oe+(I[W]-1)*ie*q/2;te.attr("text-anchor",Z),V.attr("transform",f(ue,fe))}function R(te,K){var q=te.ts||K.textfont.size;return p(q)&&q>0?q:0}function S(te,K,q,re){var V=te[0]-K[0],W=te[1]-K[1],Z=q[0]-K[0],oe=q[1]-K[1],ie=Math.pow(V*V+W*W,.25),ue=Math.pow(Z*Z+oe*oe,.25),fe=(ue*ue*V-ie*ie*Z)*re,he=(ue*ue*W-ie*ie*oe)*re,de=3*ue*(ie+ue),be=3*ie*(ie+ue);return[[i.round(K[0]+(de&&fe/de),2),i.round(K[1]+(de&&he/de),2)],[i.round(K[0]-(be&&fe/be),2),i.round(K[1]-(be&&he/be),2)]]}w.textPointStyle=function(te,K,q){if(te.size()){var re;if(K.selectedpoints){var V=w.makeSelectedTextStyleFns(K);re=V.selectedTextColorFn}var W=K.texttemplate,Z=q._fullLayout;te.each(function(oe){var ie=i.select(this),ue=W?m.extractOption(oe,K,"txt","texttemplate"):m.extractOption(oe,K,"tx","text");if(ue||0===ue){if(W){var fe=K._module.formatLabels,he=fe?fe(oe,K,Z):{},de={};_(de,K,oe.i),ue=m.texttemplateString(ue,he,Z._d3locale,de,oe,K._meta||{})}var pe=oe.tp||K.textposition,Te=R(oe,K),ye=re?re(oe):oe.tc||K.textfont.color;ie.call(w.font,oe.tf||K.textfont.family,Te,ye).text(ue).call(s.convertToTspans,q).call(D,pe,Te,oe.mrc)}else ie.remove()})}},w.selectedTextStyle=function(te,K){if(te.size()&&K.selectedpoints){var q=w.makeSelectedTextStyleFns(K);te.each(function(re){var V=i.select(this),W=q.selectedTextColorFn(re),Z=re.tp||K.textposition,oe=R(re,K);c.fill(V,W),D(V,Z,oe,re.mrc2||re.mrc)})}},w.smoothopen=function(te,K){if(te.length<3)return"M"+te.join("L");var q,re="M"+te[0],V=[];for(q=1;q<te.length-1;q++)V.push(S(te[q-1],te[q],te[q+1],K));for(re+="Q"+V[0][0]+" "+te[1],q=2;q<te.length-1;q++)re+="C"+V[q-2][1]+" "+V[q-1][0]+" "+te[q];return re+"Q"+V[te.length-3][1]+" "+te[te.length-1]},w.smoothclosed=function(te,K){if(te.length<3)return"M"+te.join("L")+"Z";var q,re="M"+te[0],V=te.length-1,W=[S(te[V],te[0],te[1],K)];for(q=1;q<V;q++)W.push(S(te[q-1],te[q],te[q+1],K));for(W.push(S(te[V-1],te[V],te[0],K)),q=1;q<=V;q++)re+="C"+W[q-1][1]+" "+W[q][0]+" "+te[q];return re+"C"+W[V][1]+" "+W[0][0]+" "+te[0]+"Z"};var N={hv:function(te,K){return"H"+i.round(K[0],2)+"V"+i.round(K[1],2)},vh:function(te,K){return"V"+i.round(K[1],2)+"H"+i.round(K[0],2)},hvh:function(te,K){return"H"+i.round((te[0]+K[0])/2,2)+"V"+i.round(K[1],2)+"H"+i.round(K[0],2)},vhv:function(te,K){return"V"+i.round((te[1]+K[1])/2,2)+"H"+i.round(K[0],2)+"V"+i.round(K[1],2)}},B=function(te,K){return"L"+i.round(K[0],2)+","+i.round(K[1],2)};w.steps=function(te){var K=N[te]||B;return function(q){for(var re="M"+i.round(q[0][0],2)+","+i.round(q[0][1],2),V=1;V<q.length;V++)re+=K(q[V-1],q[V]);return re}},w.makeTester=function(){var te=m.ensureSingleById(i.select("body"),"svg","js-plotly-tester",function(q){q.attr(o.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),K=m.ensureSingle(te,"path","js-reference-point",function(q){q.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});w.tester=te,w.testref=K},w.savedBBoxes={};var H=0;function Y(te){var K=te.getAttribute("data-unformatted");if(null!==K)return K+te.getAttribute("data-math")+te.getAttribute("text-anchor")+te.getAttribute("style")}function Q(te,K){if(!te)return null;var q=K._context,re=q._exportedPlot?"":q._baseUrl||"";return re?"url('"+re+"#"+te+"')":"url(#"+te+")"}w.bBox=function(te,K,q){var re,V,W;if(q||(q=Y(te)),q){if(re=w.savedBBoxes[q])return m.extendFlat({},re)}else if(1===te.childNodes.length){var Z=te.childNodes[0];if(q=Y(Z)){var oe=+Z.getAttribute("x")||0,ie=+Z.getAttribute("y")||0,ue=Z.getAttribute("transform");if(!ue){var fe=w.bBox(Z,!1,q);return oe&&(fe.left+=oe,fe.right+=oe),ie&&(fe.top+=ie,fe.bottom+=ie),fe}if(re=w.savedBBoxes[q+="~"+oe+"~"+ie+"~"+ue])return m.extendFlat({},re)}}K?V=te:(W=w.tester.node(),V=te.cloneNode(!0),W.appendChild(V)),i.select(V).attr("transform",null).call(s.positionText,0,0);var he=V.getBoundingClientRect(),de=w.testref.node().getBoundingClientRect();K||W.removeChild(V);var be={height:he.height,width:he.width,left:he.left-de.left,top:he.top-de.top,right:he.right-de.left,bottom:he.bottom-de.top};return H>=1e4&&(w.savedBBoxes={},H=0),q&&(w.savedBBoxes[q]=be),H++,m.extendFlat({},be)},w.setClipUrl=function(te,K,q){te.attr("clip-path",Q(K,q))},w.getTranslate=function(te){var K=(te[te.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(q,re,V){return[re,V].join(" ")}).split(" ");return{x:+K[0]||0,y:+K[1]||0}},w.setTranslate=function(te,K,q){var V=te.attr?"attr":"setAttribute",W=te[te.attr?"attr":"getAttribute"]("transform")||"";return K=K||0,q=q||0,W=W.replace(/(\btranslate\(.*?\);?)/,"").trim(),W=(W+=f(K,q)).trim(),te[V]("transform",W),W},w.getScale=function(te){var K=(te[te.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(q,re,V){return[re,V].join(" ")}).split(" ");return{x:+K[0]||1,y:+K[1]||1}},w.setScale=function(te,K,q){var V=te.attr?"attr":"setAttribute",W=te[te.attr?"attr":"getAttribute"]("transform")||"";return K=K||1,q=q||1,W=W.replace(/(\bscale\(.*?\);?)/,"").trim(),W=(W+="scale("+K+","+q+")").trim(),te[V]("transform",W),W};var ne=/\s*sc.*/;w.setPointGroupScale=function(te,K,q){if(K=K||1,q=q||1,te){var re=1===K&&1===q?"":"scale("+K+","+q+")";te.each(function(){var V=(this.getAttribute("transform")||"").replace(ne,"");V=(V+=re).trim(),this.setAttribute("transform",V)})}};var ae=/translate\([^)]*\)\s*$/;w.setTextPointsScale=function(te,K,q){te&&te.each(function(){var re,V=i.select(this),W=V.select("text");if(W.node()){var Z=parseFloat(W.attr("x")||0),oe=parseFloat(W.attr("y")||0),ie=(V.attr("transform")||"").match(ae);re=1===K&&1===q?[]:[f(Z,oe),"scale("+K+","+q+")",f(-Z,-oe)],ie&&re.push(ie),V.attr("transform",re.join(""))}})}},{"../../components/fx/helpers":702,"../../constants/alignment":771,"../../constants/interactions":778,"../../constants/xmlns_namespaces":780,"../../lib":803,"../../lib/svg_text_utils":829,"../../registry":931,"../../traces/scatter/make_bubble_size_func":1235,"../../traces/scatter/subtypes":1243,"../color":666,"../colorscale":678,"./symbol_defs":689,"@plotly/d3":58,"fast-isnumeric":249,tinycolor2:598}],689:[function(h,G,X){"use strict";var i=h("@plotly/d3");G.exports={circle:{n:0,f:function(m){var b=i.round(m,2);return"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"}},square:{n:1,f:function(m){var b=i.round(m,2);return"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"}},diamond:{n:2,f:function(m){var b=i.round(1.3*m,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"Z"}},cross:{n:3,f:function(m){var b=i.round(.4*m,2),p=i.round(1.2*m,2);return"M"+p+","+b+"H"+b+"V"+p+"H-"+b+"V"+b+"H-"+p+"V-"+b+"H-"+b+"V-"+p+"H"+b+"V-"+b+"H"+p+"Z"}},x:{n:4,f:function(m){var b=i.round(.8*m/Math.sqrt(2),2),p="l"+b+","+b,r="l"+b+",-"+b,u="l-"+b+",-"+b,c="l-"+b+","+b;return"M0,"+b+p+r+u+r+u+c+u+c+p+c+p+"Z"}},"triangle-up":{n:5,f:function(m){var b=i.round(2*m/Math.sqrt(3),2);return"M-"+b+","+i.round(m/2,2)+"H"+b+"L0,-"+i.round(m,2)+"Z"}},"triangle-down":{n:6,f:function(m){var b=i.round(2*m/Math.sqrt(3),2);return"M-"+b+",-"+i.round(m/2,2)+"H"+b+"L0,"+i.round(m,2)+"Z"}},"triangle-left":{n:7,f:function(m){var b=i.round(2*m/Math.sqrt(3),2);return"M"+i.round(m/2,2)+",-"+b+"V"+b+"L-"+i.round(m,2)+",0Z"}},"triangle-right":{n:8,f:function(m){var b=i.round(2*m/Math.sqrt(3),2);return"M-"+i.round(m/2,2)+",-"+b+"V"+b+"L"+i.round(m,2)+",0Z"}},"triangle-ne":{n:9,f:function(m){var b=i.round(.6*m,2),p=i.round(1.2*m,2);return"M-"+p+",-"+b+"H"+b+"V"+p+"Z"}},"triangle-se":{n:10,f:function(m){var b=i.round(.6*m,2),p=i.round(1.2*m,2);return"M"+b+",-"+p+"V"+b+"H-"+p+"Z"}},"triangle-sw":{n:11,f:function(m){var b=i.round(.6*m,2),p=i.round(1.2*m,2);return"M"+p+","+b+"H-"+b+"V-"+p+"Z"}},"triangle-nw":{n:12,f:function(m){var b=i.round(.6*m,2),p=i.round(1.2*m,2);return"M-"+b+","+p+"V-"+b+"H"+p+"Z"}},pentagon:{n:13,f:function(m){var b=i.round(.951*m,2),p=i.round(.588*m,2),r=i.round(-m,2),u=i.round(-.309*m,2);return"M"+b+","+u+"L"+p+","+i.round(.809*m,2)+"H-"+p+"L-"+b+","+u+"L0,"+r+"Z"}},hexagon:{n:14,f:function(m){var b=i.round(m,2),p=i.round(m/2,2),r=i.round(m*Math.sqrt(3)/2,2);return"M"+r+",-"+p+"V"+p+"L0,"+b+"L-"+r+","+p+"V-"+p+"L0,-"+b+"Z"}},hexagon2:{n:15,f:function(m){var b=i.round(m,2),p=i.round(m/2,2),r=i.round(m*Math.sqrt(3)/2,2);return"M-"+p+","+r+"H"+p+"L"+b+",0L"+p+",-"+r+"H-"+p+"L-"+b+",0Z"}},octagon:{n:16,f:function(m){var b=i.round(.924*m,2),p=i.round(.383*m,2);return"M-"+p+",-"+b+"H"+p+"L"+b+",-"+p+"V"+p+"L"+p+","+b+"H-"+p+"L-"+b+","+p+"V-"+p+"Z"}},star:{n:17,f:function(m){var b=1.4*m,p=i.round(.225*b,2),r=i.round(.951*b,2),u=i.round(.363*b,2),c=i.round(.588*b,2),l=i.round(-b,2),f=i.round(-.309*b,2),s=i.round(.118*b,2),o=i.round(.809*b,2);return"M"+p+","+f+"H"+r+"L"+u+","+s+"L"+c+","+o+"L0,"+i.round(.382*b,2)+"L-"+c+","+o+"L-"+u+","+s+"L-"+r+","+f+"H-"+p+"L0,"+l+"Z"}},hexagram:{n:18,f:function(m){var b=i.round(.66*m,2),p=i.round(.38*m,2),r=i.round(.76*m,2);return"M-"+r+",0l-"+p+",-"+b+"h"+r+"l"+p+",-"+b+"l"+p+","+b+"h"+r+"l-"+p+","+b+"l"+p+","+b+"h-"+r+"l-"+p+","+b+"l-"+p+",-"+b+"h-"+r+"Z"}},"star-triangle-up":{n:19,f:function(m){var b=i.round(m*Math.sqrt(3)*.8,2),p=i.round(.8*m,2),r=i.round(1.6*m,2),u=i.round(4*m,2),c="A "+u+","+u+" 0 0 1 ";return"M-"+b+","+p+c+b+","+p+c+"0,-"+r+c+"-"+b+","+p+"Z"}},"star-triangle-down":{n:20,f:function(m){var b=i.round(m*Math.sqrt(3)*.8,2),p=i.round(.8*m,2),r=i.round(1.6*m,2),u=i.round(4*m,2),c="A "+u+","+u+" 0 0 1 ";return"M"+b+",-"+p+c+"-"+b+",-"+p+c+"0,"+r+c+b+",-"+p+"Z"}},"star-square":{n:21,f:function(m){var b=i.round(1.1*m,2),p=i.round(2*m,2),r="A "+p+","+p+" 0 0 1 ";return"M-"+b+",-"+b+r+"-"+b+","+b+r+b+","+b+r+b+",-"+b+r+"-"+b+",-"+b+"Z"}},"star-diamond":{n:22,f:function(m){var b=i.round(1.4*m,2),p=i.round(1.9*m,2),r="A "+p+","+p+" 0 0 1 ";return"M-"+b+",0"+r+"0,"+b+r+b+",0"+r+"0,-"+b+r+"-"+b+",0Z"}},"diamond-tall":{n:23,f:function(m){var b=i.round(.7*m,2),p=i.round(1.4*m,2);return"M0,"+p+"L"+b+",0L0,-"+p+"L-"+b+",0Z"}},"diamond-wide":{n:24,f:function(m){var b=i.round(1.4*m,2),p=i.round(.7*m,2);return"M0,"+p+"L"+b+",0L0,-"+p+"L-"+b+",0Z"}},hourglass:{n:25,f:function(m){var b=i.round(m,2);return"M"+b+","+b+"H-"+b+"L"+b+",-"+b+"H-"+b+"Z"},noDot:!0},bowtie:{n:26,f:function(m){var b=i.round(m,2);return"M"+b+","+b+"V-"+b+"L-"+b+","+b+"V-"+b+"Z"},noDot:!0},"circle-cross":{n:27,f:function(m){var b=i.round(m,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(m){var b=i.round(m,2),p=i.round(m/Math.sqrt(2),2);return"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(m){var b=i.round(m,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(m){var b=i.round(m,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(m){var b=i.round(1.3*m,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM0,-"+b+"V"+b+"M-"+b+",0H"+b},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(m){var b=i.round(1.3*m,2),p=i.round(.65*m,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM-"+p+",-"+p+"L"+p+","+p+"M-"+p+","+p+"L"+p+",-"+p},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(m){var b=i.round(1.4*m,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(m){var b=i.round(m,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(m){var b=i.round(1.2*m,2),p=i.round(.85*m,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(m){var b=i.round(m/2,2),p=i.round(m,2);return"M"+b+","+p+"V-"+p+"m-"+p+",0V"+p+"M"+p+","+b+"H-"+p+"m0,-"+p+"H"+p},needLine:!0,noFill:!0},"y-up":{n:37,f:function(m){var b=i.round(1.2*m,2),p=i.round(1.6*m,2),r=i.round(.8*m,2);return"M-"+b+","+r+"L0,0M"+b+","+r+"L0,0M0,-"+p+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(m){var b=i.round(1.2*m,2),p=i.round(1.6*m,2),r=i.round(.8*m,2);return"M-"+b+",-"+r+"L0,0M"+b+",-"+r+"L0,0M0,"+p+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(m){var b=i.round(1.2*m,2),p=i.round(1.6*m,2),r=i.round(.8*m,2);return"M"+r+","+b+"L0,0M"+r+",-"+b+"L0,0M-"+p+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(m){var b=i.round(1.2*m,2),p=i.round(1.6*m,2),r=i.round(.8*m,2);return"M-"+r+","+b+"L0,0M-"+r+",-"+b+"L0,0M"+p+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(m){var b=i.round(1.4*m,2);return"M"+b+",0H-"+b},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(m){var b=i.round(1.4*m,2);return"M0,"+b+"V-"+b},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(m){var b=i.round(m,2);return"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(m){var b=i.round(m,2);return"M"+b+","+b+"L-"+b+",-"+b},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(m){var b=i.round(m,2);return"M0,0L-"+b+","+i.round(2*m,2)+"H"+b+"Z"},noDot:!0},"arrow-down":{n:46,f:function(m){var b=i.round(m,2);return"M0,0L-"+b+",-"+i.round(2*m,2)+"H"+b+"Z"},noDot:!0},"arrow-left":{n:47,f:function(m){var b=i.round(2*m,2),p=i.round(m,2);return"M0,0L"+b+",-"+p+"V"+p+"Z"},noDot:!0},"arrow-right":{n:48,f:function(m){var b=i.round(2*m,2),p=i.round(m,2);return"M0,0L-"+b+",-"+p+"V"+p+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(m){var b=i.round(m,2);return"M-"+b+",0H"+b+"M0,0L-"+b+","+i.round(2*m,2)+"H"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(m){var b=i.round(m,2);return"M-"+b+",0H"+b+"M0,0L-"+b+",-"+i.round(2*m,2)+"H"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(m){var b=i.round(2*m,2),p=i.round(m,2);return"M0,-"+p+"V"+p+"M0,0L"+b+",-"+p+"V"+p+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(m){var b=i.round(2*m,2),p=i.round(m,2);return"M0,-"+p+"V"+p+"M0,0L-"+b+",-"+p+"V"+p+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],690:[function(h,G,X){"use strict";G.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],691:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../registry"),b=h("../../plots/cartesian/axes"),p=h("../../lib"),r=h("./compute_error");function u(c,l,f,s){var o=l["error_"+s]||{},d=[];if(o.visible&&-1!==["linear","log"].indexOf(f.type)){for(var g=r(o),y=0;y<c.length;y++){var v=c[y],_=v.i;if(void 0===_)_=y;else if(null===_)continue;var w=v[s];if(i(f.c2l(w))){var x=g(w,_);if(i(x[0])&&i(x[1])){var E=v[s+"s"]=w-x[0],k=v[s+"h"]=w+x[1];d.push(E,k)}}}var L=l._extremes[f._id],P=b.findExtremes(f,d,p.extendFlat({tozero:L.opts.tozero},{padded:!0}));L.min=L.min.concat(P.min),L.max=L.max.concat(P.max)}}G.exports=function(c){for(var l=c.calcdata,f=0;f<l.length;f++){var s=l[f],o=s[0].trace;if(!0===o.visible&&m.traceIs(o,"errorBarsOK")){var d=b.getFromId(c,o.xaxis),g=b.getFromId(c,o.yaxis);u(s,o,d,"x"),u(s,o,g,"y")}}}},{"../../lib":803,"../../plots/cartesian/axes":854,"../../registry":931,"./compute_error":692,"fast-isnumeric":249}],692:[function(h,G,X){"use strict";function i(m,b){return"percent"===m?function(p){return Math.abs(p*b/100)}:"constant"===m?function(){return Math.abs(b)}:"sqrt"===m?function(p){return Math.sqrt(Math.abs(p))}:void 0}G.exports=function(m){var b=m.type,p=m.symmetric;if("data"===b){var r=m.array||[];if(p)return function(f,s){var o=+r[s];return[o,o]};var u=m.arrayminus||[];return function(f,s){var o=+r[s],d=+u[s];return isNaN(o)&&isNaN(d)?[NaN,NaN]:[d||0,o||0]}}var c=i(b,m.value),l=i(b,m.valueminus);return p||void 0===m.valueminus?function(f){var s=c(f);return[s,s]}:function(f){return[l(f),c(f)]}}},{}],693:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../registry"),b=h("../../lib"),p=h("../../plot_api/plot_template"),r=h("./attributes");G.exports=function(u,c,l,f){var s="error_"+f.axis,o=p.newContainer(c,s),d=u[s]||{};function g(w,x){return b.coerce(d,o,r,w,x)}if(!1!==g("visible",void 0!==d.array||void 0!==d.value||"sqrt"===d.type)){var y=g("type","array"in d?"data":"percent"),v=!0;"sqrt"!==y&&(v=g("symmetric",!(("data"===y?"arrayminus":"valueminus")in d))),"data"===y?(g("array"),g("traceref"),v||(g("arrayminus"),g("tracerefminus"))):"percent"!==y&&"constant"!==y||(g("value"),v||g("valueminus"));var _="copy_"+f.inherit+"style";f.inherit&&(c["error_"+f.inherit]||{}).visible&&g(_,!(d.color||i(d.thickness)||i(d.width))),f.inherit&&o[_]||(g("color",l),g("thickness"),g("width",m.traceIs(c,"gl3d")?0:4))}}},{"../../lib":803,"../../plot_api/plot_template":843,"../../registry":931,"./attributes":690,"fast-isnumeric":249}],694:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plot_api/edit_types").overrideAll,b=h("./attributes"),p={error_x:i.extendFlat({},b),error_y:i.extendFlat({},b)};delete p.error_x.copy_zstyle,delete p.error_y.copy_zstyle,delete p.error_y.copy_ystyle;var r={error_x:i.extendFlat({},b),error_y:i.extendFlat({},b),error_z:i.extendFlat({},b)};delete r.error_x.copy_ystyle,delete r.error_y.copy_ystyle,delete r.error_z.copy_ystyle,delete r.error_z.copy_zstyle,G.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:p,bar:p,histogram:p,scatter3d:m(r,"calc","nested"),scattergl:m(p,"calc","nested")}},supplyDefaults:h("./defaults"),calc:h("./calc"),makeComputeError:h("./compute_error"),plot:h("./plot"),style:h("./style"),hoverInfo:function(u,c,l){(c.error_y||{}).visible&&(l.yerr=u.yh-u.y,c.error_y.symmetric||(l.yerrneg=u.y-u.ys)),(c.error_x||{}).visible&&(l.xerr=u.xh-u.x,c.error_x.symmetric||(l.xerrneg=u.x-u.xs))}}},{"../../lib":803,"../../plot_api/edit_types":836,"./attributes":690,"./calc":691,"./compute_error":692,"./defaults":693,"./plot":695,"./style":696}],695:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("fast-isnumeric"),b=h("../drawing"),p=h("../../traces/scatter/subtypes");G.exports=function(r,u,c,l){var f=c.xaxis,s=c.yaxis,o=l&&l.duration>0;u.each(function(d){var g,y=d[0].trace,v=y.error_x||{},_=y.error_y||{};y.ids&&(g=function(k){return k.id});var w=p.hasMarkers(y)&&y.marker.maxdisplayed>0;_.visible||v.visible||(d=[]);var x=i.select(this).selectAll("g.errorbar").data(d,g);if(x.exit().remove(),d.length){v.visible||x.selectAll("path.xerror").remove(),_.visible||x.selectAll("path.yerror").remove(),x.style("opacity",1);var E=x.enter().append("g").classed("errorbar",!0);o&&E.style("opacity",0).transition().duration(l.duration).style("opacity",1),b.setClipUrl(x,c.layerClipId,r),x.each(function(k){var S,N,B,H,C=i.select(this),L=(B=s,H={x:(N=f).c2p((S=k).x),y:B.c2p(S.y)},void 0!==S.yh&&(H.yh=B.c2p(S.yh),H.ys=B.c2p(S.ys),m(H.ys)||(H.noYS=!0,H.ys=B.c2p(S.ys,!0))),void 0!==S.xh&&(H.xh=N.c2p(S.xh),H.xs=N.c2p(S.xs),m(H.xs)||(H.noXS=!0,H.xs=N.c2p(S.xs,!0))),H);if(!w||k.vis){var P,A=C.select("path.yerror");if(_.visible&&m(L.x)&&m(L.yh)&&m(L.ys)){var I=_.width;P="M"+(L.x-I)+","+L.yh+"h"+2*I+"m-"+I+",0V"+L.ys,L.noYS||(P+="m-"+I+",0h"+2*I),A.size()?o&&(A=A.transition().duration(l.duration).ease(l.easing)):A=C.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),A.attr("d",P)}else A.remove();var D=C.select("path.xerror");if(v.visible&&m(L.y)&&m(L.xh)&&m(L.xs)){var R=(v.copy_ystyle?_:v).width;P="M"+L.xh+","+(L.y-R)+"v"+2*R+"m0,-"+R+"H"+L.xs,L.noXS||(P+="m0,-"+R+"v"+2*R),D.size()?o&&(D=D.transition().duration(l.duration).ease(l.easing)):D=C.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),D.attr("d",P)}else D.remove()}})}})}},{"../../traces/scatter/subtypes":1243,"../drawing":688,"@plotly/d3":58,"fast-isnumeric":249}],696:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../color");G.exports=function(b){b.each(function(p){var r=p[0].trace,u=r.error_y||{},c=r.error_x||{},l=i.select(this);l.selectAll("path.yerror").style("stroke-width",u.thickness+"px").call(m.stroke,u.color),c.copy_ystyle&&(c=u),l.selectAll("path.xerror").style("stroke-width",c.thickness+"px").call(m.stroke,c.color)})}},{"../color":666,"@plotly/d3":58}],697:[function(h,G,X){"use strict";var i=h("../../plots/font_attributes"),m=h("./layout_attributes").hoverlabel,b=h("../../lib/extend").extendFlat;G.exports={hoverlabel:{bgcolor:b({},m.bgcolor,{arrayOk:!0}),bordercolor:b({},m.bordercolor,{arrayOk:!0}),font:i({arrayOk:!0,editType:"none"}),align:b({},m.align,{arrayOk:!0}),namelength:b({},m.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":793,"../../plots/font_attributes":883,"./layout_attributes":707}],698:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../registry");function b(p,r,u,c){c=c||i.identity,Array.isArray(p)&&(r[0][u]=c(p))}G.exports=function(p){var r=p.calcdata,u=p._fullLayout;function c(d){return function(g){return i.coerceHoverinfo({hoverinfo:g},{_module:d._module},u)}}for(var l=0;l<r.length;l++){var f=r[l],s=f[0].trace;if(!m.traceIs(s,"pie-like")){var o=m.traceIs(s,"2dMap")?b:i.fillArray;o(s.hoverinfo,f,"hi",c(s)),s.hovertemplate&&o(s.hovertemplate,f,"ht"),s.hoverlabel&&(o(s.hoverlabel.bgcolor,f,"hbg"),o(s.hoverlabel.bordercolor,f,"hbc"),o(s.hoverlabel.font.size,f,"hts"),o(s.hoverlabel.font.color,f,"htc"),o(s.hoverlabel.font.family,f,"htf"),o(s.hoverlabel.namelength,f,"hnl"),o(s.hoverlabel.align,f,"hta"))}}}},{"../../lib":803,"../../registry":931}],699:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("./hover").hover;G.exports=function(b,p,r){var u=i.getComponentMethod("annotations","onClick")(b,b._hoverdata);function c(){b.emit("plotly_click",{points:b._hoverdata,event:p})}void 0!==r&&m(b,p,r,!0),b._hoverdata&&p&&p.target&&(u&&u.then?u.then(c):c(),p.stopImmediatePropagation&&p.stopImmediatePropagation())}},{"../../registry":931,"./hover":703}],700:[function(h,G,X){"use strict";G.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],701:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./attributes"),b=h("./hoverlabel_defaults");G.exports=function(p,r,u,c){var l=i.extendFlat({},c.hoverlabel);r.hovertemplate&&(l.namelength=-1),b(p,r,function(f,s){return i.coerce(p,r,m,f,s)},l)}},{"../../lib":803,"./attributes":697,"./hoverlabel_defaults":704}],702:[function(h,G,X){"use strict";var i=h("../../lib");X.getSubplot=function(c){return c.subplot||c.xaxis+c.yaxis||c.geo},X.isTraceInSubplots=function(c,l){if("splom"===c.type){for(var f=c.xaxes||[],s=c.yaxes||[],o=0;o<f.length;o++)for(var d=0;d<s.length;d++)if(-1!==l.indexOf(f[o]+s[d]))return!0;return!1}return-1!==l.indexOf(X.getSubplot(c))},X.flat=function(c,l){for(var f=new Array(c.length),s=0;s<c.length;s++)f[s]=l;return f},X.p2c=function(c,l){for(var f=new Array(c.length),s=0;s<c.length;s++)f[s]=c[s].p2c(l);return f},X.getDistanceFunction=function(c,l,f,s){return"closest"===c?s||X.quadrature(l,f):"x"===c.charAt(0)?l:f},X.getClosest=function(c,l,f){if(!1!==f.index)f.index>=0&&f.index<c.length?f.distance=0:f.index=!1;else for(var s=0;s<c.length;s++){var o=l(c[s]);o<=f.distance&&(f.index=s,f.distance=o)}return f},X.inbox=function(c,l,f){return c*l<0||0===c?f:1/0},X.quadrature=function(c,l){return function(f){var s=c(f),o=l(f);return Math.sqrt(s*s+o*o)}},X.makeEventData=function(c,l,f){var s="index"in c?c.index:c.pointNumber,o={data:l._input,fullData:l,curveNumber:l.index,pointNumber:s};if(l._indexToPoints){var d=l._indexToPoints[s];1===d.length?o.pointIndex=d[0]:o.pointIndices=d}else o.pointIndex=s;return l._module.eventData?o=l._module.eventData(o,c,l,f,s):("xVal"in c?o.x=c.xVal:"x"in c&&(o.x=c.x),"yVal"in c?o.y=c.yVal:"y"in c&&(o.y=c.y),c.xa&&(o.xaxis=c.xa),c.ya&&(o.yaxis=c.ya),void 0!==c.zLabelVal&&(o.z=c.zLabelVal)),X.appendArrayPointValue(o,l,s),o},X.appendArrayPointValue=function(c,l,f){var s=l._arrayAttrs;if(s)for(var o=0;o<s.length;o++){var d=s[o],g=b(d);if(void 0===c[g]){var y=p(i.nestedProperty(l,d).get(),f);void 0!==y&&(c[g]=y)}}},X.appendArrayMultiPointValues=function(c,l,f){var s=l._arrayAttrs;if(s)for(var o=0;o<s.length;o++){var d=s[o],g=b(d);if(void 0===c[g]){for(var y=i.nestedProperty(l,d).get(),v=new Array(f.length),_=0;_<f.length;_++)v[_]=p(y,f[_]);c[g]=v}}};var m={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function b(c){return m[c]||c}function p(c,l){return Array.isArray(l)?Array.isArray(c)&&Array.isArray(c[l[0]])?c[l[0]][l[1]]:void 0:c[l]}var r={x:!0,y:!0},u={"x unified":!0,"y unified":!0};X.isUnifiedHover=function(c){return"string"==typeof c&&!!u[c]},X.isXYhover=function(c){return"string"==typeof c&&!!r[c]}},{"../../lib":803}],703:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("fast-isnumeric"),b=h("tinycolor2"),p=h("../../lib"),r=p.strTranslate,u=p.strRotate,c=h("../../lib/events"),l=h("../../lib/svg_text_utils"),f=h("../../lib/override_cursor"),s=h("../drawing"),o=h("../color"),d=h("../dragelement"),g=h("../../plots/cartesian/axes"),y=h("../../registry"),v=h("./helpers"),_=h("./constants"),w=h("../legend/defaults"),x=h("../legend/draw"),E=_.YANGLE,k=Math.PI*E/180,C=1/Math.sin(k),L=Math.cos(k),P=Math.sin(k),A=_.HOVERARROWSIZE,I=_.HOVERTEXTPAD,D={box:!0,ohlc:!0,violin:!0,candlestick:!0},R={scatter:!0,scattergl:!0,splom:!0};function S(q){return[q.trace.index,q.index,q.x0,q.y0,q.name,q.attr,q.xa?q.xa._id:"",q.ya?q.ya._id:""].join(",")}X.hover=function(q,re,V,W){q=p.getGraphDiv(q),p.throttle(q._fullLayout._uid+_.HOVERID,_.HOVERMINTIME,function(){!function(Z,oe,ie,ue){ie||(ie="xy");var fe=Array.isArray(ie)?ie:[ie],he=Z._fullLayout,de=he._plots||[],be=de[ie],pe=he._has("cartesian");if(be){var Te=be.overlays.map(function(Ln){return Ln.id});fe=fe.concat(Te)}for(var ye=fe.length,ke=new Array(ye),ze=new Array(ye),je=!1,Ie=0;Ie<ye;Ie++){var Ce=fe[Ie];if(de[Ce])je=!0,ke[Ie]=de[Ce].xaxis,ze[Ie]=de[Ce].yaxis;else{if(!he[Ce]||!he[Ce]._subplot)return void p.warn("Unrecognized subplot: "+Ce);var _e=he[Ce]._subplot;ke[Ie]=_e.xaxis,ze[Ie]=_e.yaxis}}var we=oe.hovermode||he.hovermode;if(we&&!je&&(we="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(we)||!Z.calcdata||Z.querySelector(".zoombox")||Z._dragging)return d.unhoverRaw(Z,oe);var Se=he.hoverdistance;-1===Se&&(Se=1/0);var Oe=he.spikedistance;-1===Oe&&(Oe=1/0);var Be,He,Xe,nt,et,qe,Ye,ot,at,ct,_t,xt,Ht,At=[],ht=[],st={hLinePoint:null,vLinePoint:null},Bt=!1;if(Array.isArray(oe))for(we="array",Xe=0;Xe<oe.length;Xe++)(et=Z.calcdata[oe[Xe].curveNumber||0])&&(qe=et[0].trace,"skip"!==et[0].trace.hoverinfo&&(ht.push(et),"h"===qe.orientation&&(Bt=!0)));else{for(nt=0;nt<Z.calcdata.length;nt++)"skip"!==(qe=(et=Z.calcdata[nt])[0].trace).hoverinfo&&v.isTraceInSubplots(qe,fe)&&(ht.push(et),"h"===qe.orientation&&(Bt=!0));var gn,hn;if(oe.target){if(!1===c.triggerHandler(Z,"plotly_beforehover",oe))return;var We=oe.composedPath&&oe.composedPath()[0];We||(We=oe.target);var it=We.getBoundingClientRect();gn=oe.clientX-it.left,hn=oe.clientY-it.top,he._calcInverseTransform(Z);var qt=p.apply3DTransform(he._invTransform)(gn,hn);if(hn=qt[1],(gn=qt[0])<0||gn>ke[0]._length||hn<0||hn>ze[0]._length)return d.unhoverRaw(Z,oe)}else gn="xpx"in oe?oe.xpx:ke[0]._length/2,hn="ypx"in oe?oe.ypx:ze[0]._length/2;if(oe.pointerX=gn+ke[0]._offset,oe.pointerY=hn+ze[0]._offset,Be="xval"in oe?v.flat(fe,oe.xval):v.p2c(ke,gn),He="yval"in oe?v.flat(fe,oe.yval):v.p2c(ze,hn),!m(Be[0])||!m(He[0]))return p.warn("Fx.hover failed",oe,Z),d.unhoverRaw(Z,oe)}var Ge=1/0;function Pe(Ln,qn){for(nt=0;nt<ht.length;nt++)if((et=ht[nt])&&et[0]&&et[0].trace&&!0===(qe=et[0].trace).visible&&0!==qe._length&&-1===["carpet","contourcarpet"].indexOf(qe._module.name)){if("splom"===qe.type?Ye=fe[ot=0]:(Ye=v.getSubplot(qe),ot=fe.indexOf(Ye)),v.isUnifiedHover(at=we)&&(at=at.charAt(0)),xt={cd:et,trace:qe,xa:ke[ot],ya:ze[ot],maxHoverDistance:Se,maxSpikeDistance:Oe,index:!1,distance:Math.min(Ge,Se),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:o.defaultLine,name:qe.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},he[Ye]&&(xt.subplot=he[Ye]._subplot),he._splomScenes&&he._splomScenes[qe.uid]&&(xt.scene=he._splomScenes[qe.uid]),Ht=At.length,"array"===at){var nr=oe[nt];"pointNumber"in nr?(xt.index=nr.pointNumber,at="closest"):(at="","xval"in nr&&(ct=nr.xval,at="x"),"yval"in nr&&(_t=nr.yval,at=at?"closest":"y"))}else void 0!==Ln&&void 0!==qn?(ct=Ln,_t=qn):(ct=Be[ot],_t=He[ot]);if(0!==Se)if(qe._module&&qe._module.hoverPoints){var rr=qe._module.hoverPoints(xt,ct,_t,at,{finiteRange:!0,hoverLayer:he._hoverlayer});if(rr)for(var gr,jr=0;jr<rr.length;jr++)m((gr=rr[jr]).x0)&&m(gr.y0)&&At.push(Q(gr,we))}else p.log("Unrecognized trace type in hover:",qe);if("closest"===we&&At.length>Ht&&(At.splice(0,Ht),Ge=At[0].distance),pe&&0!==Oe&&0===At.length){xt.distance=Oe,xt.index=!1;var kr=qe._module.hoverPoints(xt,ct,_t,"closest",{hoverLayer:he._hoverlayer});if(kr&&(kr=kr.filter(function(zr){return zr.spikeDistance<=Oe})),kr&&kr.length){var er,Xr=kr.filter(function(zr){return zr.xa.showspikes&&"hovered data"!==zr.xa.spikesnap});if(Xr.length){var ir=Xr[0];m(ir.x0)&&m(ir.y0)&&(er=Ne(ir),(!st.vLinePoint||st.vLinePoint.spikeDistance>er.spikeDistance)&&(st.vLinePoint=er))}var Bn=kr.filter(function(zr){return zr.ya.showspikes&&"hovered data"!==zr.ya.spikesnap});if(Bn.length){var mr=Bn[0];m(mr.x0)&&m(mr.y0)&&(er=Ne(mr),(!st.hLinePoint||st.hLinePoint.spikeDistance>er.spikeDistance)&&(st.hLinePoint=er))}}}}}function Ee(Ln,qn,nr){for(var rr,gr=null,jr=1/0,kr=0;kr<Ln.length;kr++)rr=Ln[kr].spikeDistance,nr&&0===kr&&(rr=-1/0),rr<=jr&&rr<=qn&&(gr=Ln[kr],jr=rr);return gr}function Ne(Ln){return Ln?{xa:Ln.xa,ya:Ln.ya,x:void 0!==Ln.xSpike?Ln.xSpike:(Ln.x0+Ln.x1)/2,y:void 0!==Ln.ySpike?Ln.ySpike:(Ln.y0+Ln.y1)/2,distance:Ln.distance,spikeDistance:Ln.spikeDistance,curveNumber:Ln.trace.index,color:Ln.color,pointNumber:Ln.index}:null}Pe();var Ve={fullLayout:he,container:he._hoverlayer,outerContainer:he._paperdiv,event:oe},Ke=Z._spikepoints;Z._spikepoints={vLinePoint:st.vLinePoint,hLinePoint:st.hLinePoint};var gt=function(){At.sort(function(Ln,qn){return Ln.distance-qn.distance}),At=function(Ln,qn){for(var nr=qn.charAt(0),rr=[],gr=[],jr=[],kr=0;kr<Ln.length;kr++){var er=Ln[kr];y.traceIs(er.trace,"bar-like")||y.traceIs(er.trace,"box-violin")?jr.push(er):er.trace[nr+"period"]?gr.push(er):rr.push(er)}return rr.concat(gr).concat(jr)}(At,we)};gt();var pt=we.charAt(0),St=("x"===pt||"y"===pt)&&At[0]&&R[At[0].trace.type];if(pe&&0!==Oe&&0!==At.length){var jt=Ee(At.filter(function(Ln){return Ln.ya.showspikes}),Oe,St);st.hLinePoint=Ne(jt);var Lt=Ee(At.filter(function(Ln){return Ln.xa.showspikes}),Oe,St);st.vLinePoint=Ne(Lt)}if(0===At.length){var Vt=d.unhoverRaw(Z,oe);return!pe||null===st.hLinePoint&&null===st.vLinePoint||ae(Ke)&&ne(Z,st,Ve),Vt}if(pe&&ae(Ke)&&ne(Z,st,Ve),v.isXYhover(at)&&0!==At[0].length&&"splom"!==At[0].trace.type){var mt=At[0],Wt=(At=D[mt.trace.type]?At.filter(function(Ln){return Ln.trace.index===mt.trace.index}):[mt]).length;Pe(K("x",mt,he),K("y",mt,he));var Yt,Ue=[],wt={},Ut=0,Zt=function(Ln){var qn=D[Ln.trace.type]?S(Ln):Ln.trace.index;if(wt[qn]){var nr=wt[qn]-1,rr=Ue[nr];nr>0&&Math.abs(Ln.distance)<Math.abs(rr.distance)&&(Ue[nr]=Ln)}else Ut++,wt[qn]=Ut,Ue.push(Ln)};for(Yt=0;Yt<Wt;Yt++)Zt(At[Yt]);for(Yt=At.length-1;Yt>Wt-1;Yt--)Zt(At[Yt]);At=Ue,gt()}var tn=Z._hoverdata,un=[];for(Xe=0;Xe<At.length;Xe++){var vn=At[Xe],Qt=v.makeEventData(vn,vn.trace,vn.cd);if(!1!==vn.hovertemplate){var yn=!1;vn.cd[vn.index]&&vn.cd[vn.index].ht&&(yn=vn.cd[vn.index].ht),vn.hovertemplate=yn||vn.trace.hovertemplate||!1}vn.eventData=[Qt],un.push(Qt)}Z._hoverdata=un;var Mn="y"===we&&(ht.length>1||At.length>1)||"closest"===we&&Bt&&At.length>1,Pn=o.combine(he.plot_bgcolor||o.background,he.paper_bgcolor),In=B(At,{hovermode:we,rotateLabels:Mn,bgColor:Pn,container:he._hoverlayer,outerContainer:he._paperdiv,commonLabelOpts:he.hoverlabel,hoverdistance:he.hoverdistance},Z);if(v.isUnifiedHover(we)||(function(Ln,qn,nr){var rr,gr,jr,kr,er,Xr,ir,Bn=0,mr=1,zr=Ln.size(),br=new Array(zr),Dr=0;function di(Zn){var fr=Zn[0],Hn=Zn[Zn.length-1];if(jr=Hn.pos+Hn.dp+Hn.size-fr.pmax,(gr=fr.pmin-fr.pos-fr.dp+fr.size)>.01){for(er=Zn.length-1;er>=0;er--)Zn[er].dp+=gr;rr=!1}if(!(jr<.01)){if(gr<-.01){for(er=Zn.length-1;er>=0;er--)Zn[er].dp-=jr;rr=!1}if(rr){var Dn=0;for(kr=0;kr<Zn.length;kr++)(Xr=Zn[kr]).pos+Xr.dp+Xr.size>fr.pmax&&Dn++;for(kr=Zn.length-1;kr>=0&&!(Dn<=0);kr--)(Xr=Zn[kr]).pos>fr.pmax-1&&(Xr.del=!0,Dn--);for(kr=0;kr<Zn.length&&!(Dn<=0);kr++)if((Xr=Zn[kr]).pos<fr.pmin+1)for(Xr.del=!0,Dn--,jr=2*Xr.size,er=Zn.length-1;er>=0;er--)Zn[er].dp-=jr;for(kr=Zn.length-1;kr>=0&&!(Dn<=0);kr--)(Xr=Zn[kr]).pos+Xr.dp+Xr.size>fr.pmax&&(Xr.del=!0,Dn--)}}}for(Ln.each(function(Zn){var fr=Zn[qn],Hn="x"===fr._id.charAt(0),Dn=fr.range;0===Dr&&Dn&&Dn[0]>Dn[1]!==Hn&&(mr=-1),br[Dr++]=[{datum:Zn,traceIndex:Zn.trace.index,dp:0,pos:Zn.pos,posref:Zn.posref,size:Zn.by*(Hn?C:1)/2,pmin:0,pmax:Hn?nr.width:nr.height}]}),br.sort(function(Zn,fr){return Zn[0].posref-fr[0].posref||mr*(fr[0].traceIndex-Zn[0].traceIndex)});!rr&&Bn<=zr;){for(Bn++,rr=!0,kr=0;kr<br.length-1;){var ni=br[kr],pi=br[kr+1],qi=ni[ni.length-1],Ct=pi[0];if((gr=qi.pos+qi.dp+qi.size-Ct.pos-Ct.dp+Ct.size)>.01&&qi.pmin===Ct.pmin&&qi.pmax===Ct.pmax){for(er=pi.length-1;er>=0;er--)pi[er].dp+=gr;for(ni.push.apply(ni,pi),br.splice(kr+1,1),ir=0,er=ni.length-1;er>=0;er--)ir+=ni[er].dp;for(jr=ir/ni.length,er=ni.length-1;er>=0;er--)ni[er].dp-=jr;rr=!1}else kr++}br.forEach(di)}for(kr=br.length-1;kr>=0;kr--){var mn=br[kr];for(er=mn.length-1;er>=0;er--){var pn=mn[er],Sn=pn.datum;Sn.offset=pn.dp,Sn.del=pn.del}}}(In,Mn?"xa":"ya",he),Y(In,Mn,he._invScaleX,he._invScaleY)),oe.target&&oe.target.tagName){var Rn=y.getComponentMethod("annotations","hasClickToShow")(Z,un);f(i.select(oe.target),Rn?"pointer":"")}!oe.target||ue||!function(Ln,qn,nr){if(!nr||nr.length!==Ln._hoverdata.length)return!0;for(var rr=nr.length-1;rr>=0;rr--){var gr=nr[rr],jr=Ln._hoverdata[rr];if(gr.curveNumber!==jr.curveNumber||String(gr.pointNumber)!==String(jr.pointNumber)||String(gr.pointNumbers)!==String(jr.pointNumbers))return!0}return!1}(Z,0,tn)||(tn&&Z.emit("plotly_unhover",{event:oe,points:tn}),Z.emit("plotly_hover",{event:oe,points:Z._hoverdata,xaxes:ke,yaxes:ze,xvals:Be,yvals:He}))}(q,re,V,W)})},X.loneHover=function(q,re){var V=!0;Array.isArray(q)||(V=!1,q=[q]);var W=q.map(function(pe){return{color:pe.color||o.defaultLine,x0:pe.x0||pe.x||0,x1:pe.x1||pe.x||0,y0:pe.y0||pe.y||0,y1:pe.y1||pe.y||0,xLabel:pe.xLabel,yLabel:pe.yLabel,zLabel:pe.zLabel,text:pe.text,name:pe.name,idealAlign:pe.idealAlign,borderColor:pe.borderColor,fontFamily:pe.fontFamily,fontSize:pe.fontSize,fontColor:pe.fontColor,nameLength:pe.nameLength,textAlign:pe.textAlign,trace:pe.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:pe.hovertemplate||!1,eventData:pe.eventData||!1,hovertemplateLabels:pe.hovertemplateLabels||!1}}),Z=i.select(re.container),oe=re.outerContainer?i.select(re.outerContainer):Z,ie={hovermode:"closest",rotateLabels:!1,bgColor:re.bgColor||o.background,container:Z,outerContainer:oe},ue=B(W,ie,re.gd),fe=0,he=0;return ue.sort(function(pe,Te){return pe.y0-Te.y0}).each(function(pe,Te){var ye=pe.y0-pe.by/2;pe.offset=ye-5<fe?fe-ye+5:0,fe=ye+pe.by+pe.offset,Te===re.anchorIndex&&(he=pe.offset)}).each(function(pe){pe.offset-=he}),Y(ue,ie.rotateLabels,re.gd._fullLayout._invScaleX,re.gd._fullLayout._invScaleY),V?ue:ue.node()};var N=/<extra>([\s\S]*)<\/extra>/;function B(q,re,V){var W=V._fullLayout,Z=re.hovermode,oe=re.rotateLabels,ie=re.bgColor,ue=re.container,fe=re.outerContainer,he=re.commonLabelOpts||{},de=re.fontFamily||_.HOVERFONT,be=re.fontSize||_.HOVERFONTSIZE,pe=q[0],Te=pe.xa,ye=pe.ya,ke=Z.charAt(0),ze=pe[ke+"Label"],je=fe.node().getBoundingClientRect(),Ie=je.top,Ce=je.width,_e=je.height,we=void 0!==ze&&pe.distance<=re.hoverdistance&&("x"===Z||"y"===Z);if(we){var Se,Oe,Be=!0;for(Se=0;Se<q.length;Se++)if(Be&&void 0===q[Se].zLabel&&(Be=!1),Oe=q[Se].hoverinfo||q[Se].trace.hoverinfo){var He=Array.isArray(Oe)?Oe:Oe.split("+");if(-1===He.indexOf("all")&&-1===He.indexOf(Z)){we=!1;break}}Be&&(we=!1)}var Xe=ue.selectAll("g.axistext").data(we?[0]:[]);if(Xe.enter().append("g").classed("axistext",!0),Xe.exit().remove(),Xe.each(function(){var gt=i.select(this),pt=p.ensureSingle(gt,"path","",function(Pn){Pn.style({"stroke-width":"1px"})}),St=p.ensureSingle(gt,"text","",function(Pn){Pn.attr("data-notex",1)}),jt=he.bgcolor||o.defaultLine,Lt=he.bordercolor||o.contrast(jt),Vt=o.contrast(jt),mt={family:he.font.family||de,size:he.font.size||be,color:he.font.color||Vt};pt.style({fill:jt,stroke:Lt}),St.text(ze).call(s.font,mt).call(l.positionText,0,0).call(l.convertToTspans,V),gt.attr("transform","");var Wt,Kt,rn=St.node().getBoundingClientRect();if("x"===Z){var Yt="top"===Te.side?"-":"";St.attr("text-anchor","middle").call(l.positionText,0,"top"===Te.side?Ie-rn.bottom-A-I:Ie-rn.top+A+I),Kt=ye._offset+("top"===Te.side?0:ye._length);var Ue=rn.width/2+I;(Wt=Te._offset+(pe.x0+pe.x1)/2)<Ue?(Wt=Ue,pt.attr("d","M-"+(Ue-A)+",0L-"+(Ue-2*A)+","+Yt+A+"H"+(I+rn.width/2)+"v"+Yt+(2*I+rn.height)+"H-"+Ue+"V"+Yt+A+"Z")):Wt>W.width-Ue?(Wt=W.width-Ue,pt.attr("d","M"+(Ue-A)+",0L"+Ue+","+Yt+A+"v"+Yt+(2*I+rn.height)+"H-"+Ue+"V"+Yt+A+"H"+(Ue-2*A)+"Z")):pt.attr("d","M0,0L"+A+","+Yt+A+"H"+(I+rn.width/2)+"v"+Yt+(2*I+rn.height)+"H-"+(I+rn.width/2)+"V"+Yt+A+"H-"+A+"Z")}else{var wt,Ut,Zt;"right"===ye.side?(wt="start",Ut=1,Zt="",Wt=Te._offset+Te._length):(wt="end",Ut=-1,Zt="-",Wt=Te._offset),Kt=ye._offset+(pe.y0+pe.y1)/2,St.attr("text-anchor",wt),pt.attr("d","M0,0L"+Zt+A+","+A+"V"+(I+rn.height/2)+"h"+Zt+(2*I+rn.width)+"V-"+(I+rn.height/2)+"H"+Zt+A+"V-"+A+"Z");var tn,un=rn.height/2,vn=Ie-rn.top-un,Qt="clip"+W._uid+"commonlabel"+ye._id;if(Wt<rn.width+2*I+A){tn="M-"+(A+I)+"-"+un+"h-"+(rn.width-I)+"V"+un+"h"+(rn.width-I)+"Z";var yn=rn.width-Wt+I;l.positionText(St,yn,vn),"end"===wt&&St.selectAll("tspan").each(function(){var Pn=i.select(this),sn=s.tester.append("text").text(Pn.text()).call(s.font,mt),In=sn.node().getBoundingClientRect();Math.round(In.width)<Math.round(rn.width)&&Pn.attr("x",yn-In.width),sn.remove()})}else l.positionText(St,Ut*(I+A),vn),tn=null;var Mn=W._topclips.selectAll("#"+Qt).data(tn?[0]:[]);Mn.enter().append("clipPath").attr("id",Qt).append("path"),Mn.exit().remove(),Mn.select("path").attr("d",tn),s.setClipUrl(St,tn?Qt:null,V)}gt.attr("transform",r(Wt,Kt))}),v.isUnifiedHover(Z)){if(ue.selectAll("g.hovertext").remove(),0===q.length)return;var et={};w({showlegend:!0,legend:{title:{text:ze,font:W.hoverlabel.font},font:W.hoverlabel.font,bgcolor:W.hoverlabel.bgcolor,bordercolor:W.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:W.legend?W.legend.traceorder:void 0,orientation:"v"}},et,V._fullData);var qe=et.legend;qe.entries=[];for(var Ye=0;Ye<q.length;Ye++){var ot=H(q[Ye],!0,Z,W,ze),at=ot[0],ct=ot[1],_t=q[Ye];_t.name=ct,_t.text=""!==ct?ct+" : "+at:at;var xt=_t.cd[_t.index];xt&&(xt.mc&&(_t.mc=xt.mc),xt.mcc&&(_t.mc=xt.mcc),xt.mlc&&(_t.mlc=xt.mlc),xt.mlcc&&(_t.mlc=xt.mlcc),xt.mlw&&(_t.mlw=xt.mlw),xt.mrc&&(_t.mrc=xt.mrc),xt.dir&&(_t.dir=xt.dir)),_t._distinct=!0,qe.entries.push([_t])}qe.entries.sort(function(gt,pt){return gt[0].trace.index-pt[0].trace.index}),qe.layer=ue,qe._inHover=!0,x(V,qe);var Ht,At,ht,st,Bt=ue.select("g.legend"),gn=Bt.node().getBoundingClientRect(),hn=gn.width+2*I,We=gn.height+2*I,it=q[0],qt=(it.x0+it.x1)/2,Ge=(it.y0+it.y1)/2,Pe=!(y.traceIs(it.trace,"bar-like")||y.traceIs(it.trace,"box-violin"));"y"===ke?Pe?(At=Ge-I,Ht=Ge+I):(At=Math.min.apply(null,q.map(function(gt){return Math.min(gt.y0,gt.y1)})),Ht=Math.max.apply(null,q.map(function(gt){return Math.max(gt.y0,gt.y1)}))):At=Ht=p.mean(q.map(function(gt){return(gt.y0+gt.y1)/2}))-We/2,"x"===ke?Pe?(ht=qt+I,st=qt-I):(ht=Math.max.apply(null,q.map(function(gt){return Math.max(gt.x0,gt.x1)})),st=Math.min.apply(null,q.map(function(gt){return Math.min(gt.x0,gt.x1)}))):ht=st=p.mean(q.map(function(gt){return(gt.x0+gt.x1)/2}))-hn/2;var Ee,Ne,Ve=Te._offset,Ke=ye._offset;return st+=Ve-hn,At+=Ke-We,Ee=(ht+=Ve)+hn<Ce&&ht>=0?ht:st+hn<Ce&&st>=0?st:Ve+hn<Ce?Ve:ht-qt<qt-st+hn?Ce-hn:0,Ne=(Ht+=Ke)+We<_e&&Ht>=0?Ht:At+We<_e&&At>=0?At:Ke+We<_e?Ke:Ht-Ge<Ge-At+We?_e-We:0,Bt.attr("transform",r((Ee+=I)-1,(Ne+=I)-1)),Bt}var bt=ue.selectAll("g.hovertext").data(q,function(gt){return S(gt)});return bt.enter().append("g").classed("hovertext",!0).each(function(){var gt=i.select(this);gt.append("rect").call(o.fill,o.addOpacity(ie,.8)),gt.append("text").classed("name",!0),gt.append("path").style("stroke-width","1px"),gt.append("text").classed("nums",!0).call(s.font,de,be)}),bt.exit().remove(),bt.each(function(gt){var pt=i.select(this).attr("transform",""),St=gt.color;Array.isArray(St)&&(St=St[gt.eventData[0].pointNumber]);var jt=gt.bgcolor||St,Lt=o.combine(o.opacity(jt)?jt:o.defaultLine,ie),Vt=o.combine(o.opacity(St)?St:o.defaultLine,ie),mt=gt.borderColor||o.contrast(Lt),Wt=H(gt,we,Z,W,ze,pt),Kt=Wt[0],rn=Wt[1],Yt=pt.select("text.nums").call(s.font,gt.fontFamily||de,gt.fontSize||be,gt.fontColor||mt).text(Kt).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,V),Ue=pt.select("text.name"),wt=0,Ut=0;if(rn&&rn!==Kt){Ue.call(s.font,gt.fontFamily||de,gt.fontSize||be,Vt).text(rn).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,V);var Zt=Ue.node().getBoundingClientRect();wt=Zt.width+2*I,Ut=Zt.height+2*I}else Ue.remove(),pt.select("rect").remove();pt.select("path").style({fill:Lt,stroke:mt});var tn,un,vn=Yt.node().getBoundingClientRect(),Qt=gt.xa._offset+(gt.x0+gt.x1)/2,yn=gt.ya._offset+(gt.y0+gt.y1)/2,Mn=Math.abs(gt.x1-gt.x0),Pn=Math.abs(gt.y1-gt.y0),sn=vn.width+A+I+wt;if(gt.ty0=Ie-vn.top,gt.bx=vn.width+2*I,gt.by=Math.max(vn.height+2*I,Ut),gt.anchor="start",gt.txwidth=vn.width,gt.tx2width=wt,gt.offset=0,oe)gt.pos=Qt,tn=yn+Pn/2+sn<=_e,un=yn-Pn/2-sn>=0,"top"!==gt.idealAlign&&tn||!un?tn?(yn+=Pn/2,gt.anchor="start"):gt.anchor="middle":(yn-=Pn/2,gt.anchor="end");else if(gt.pos=yn,tn=Qt+Mn/2+sn<=Ce,un=Qt-Mn/2-sn>=0,"left"!==gt.idealAlign&&tn||!un)if(tn)Qt+=Mn/2,gt.anchor="start";else{gt.anchor="middle";var In=sn/2,Rn=Qt+In-Ce,Ln=Qt-In;Rn>0&&(Qt-=Rn),Ln<0&&(Qt+=-Ln)}else Qt-=Mn/2,gt.anchor="end";Yt.attr("text-anchor",gt.anchor),wt&&Ue.attr("text-anchor",gt.anchor),pt.attr("transform",r(Qt,yn)+(oe?u(E):""))}),bt}function H(q,re,V,W,Z,oe){var ie="",ue="";void 0!==q.nameOverride&&(q.name=q.nameOverride),q.name&&(q.trace._meta&&(q.name=p.templateString(q.name,q.trace._meta)),ie=te(q.name,q.nameLength));var fe=V.charAt(0);void 0!==q.zLabel?(void 0!==q.xLabel&&(ue+="x: "+q.xLabel+"<br>"),void 0!==q.yLabel&&(ue+="y: "+q.yLabel+"<br>"),"choropleth"!==q.trace.type&&"choroplethmapbox"!==q.trace.type&&(ue+=(ue?"z: ":"")+q.zLabel)):re&&q[fe+"Label"]===Z?ue=q[("x"===fe?"y":"x")+"Label"]||"":void 0===q.xLabel?void 0!==q.yLabel&&"scattercarpet"!==q.trace.type&&(ue=q.yLabel):ue=void 0===q.yLabel?q.xLabel:"("+q.xLabel+", "+q.yLabel+")",!q.text&&0!==q.text||Array.isArray(q.text)||(ue+=(ue?"<br>":"")+q.text),void 0!==q.extraText&&(ue+=(ue?"<br>":"")+q.extraText),oe&&""===ue&&!q.hovertemplate&&(""===ie&&oe.remove(),ue=ie);var de=q.hovertemplate||!1;if(de){var be=q.hovertemplateLabels||q;q[fe+"Label"]!==Z&&(be[fe+"other"]=be[fe+"Val"],be[fe+"otherLabel"]=be[fe+"Label"]),ue=(ue=p.hovertemplateString(de,be,W._d3locale,q.eventData[0]||{},q.trace._meta)).replace(N,function(pe,Te){return ie=te(Te,q.nameLength),""})}return[ue,ie]}function Y(q,re,V,W){var Z=function(ie){return ie*V},oe=function(ie){return ie*W};q.each(function(ie){var ue=i.select(this);if(ie.del)return ue.remove();var fe=ue.select("text.nums"),he=ie.anchor,de="end"===he?-1:1,be={start:1,end:-1,middle:0}[he],pe=be*(A+I),Te=pe+be*(ie.txwidth+I),ye=0,ke=ie.offset,ze="middle"===he;ze&&(pe-=ie.tx2width/2,Te+=ie.txwidth/2+I),re&&(ke*=-P,ye=ie.offset*L),ue.select("path").attr("d",ze?"M-"+Z(ie.bx/2+ie.tx2width/2)+","+oe(ke-ie.by/2)+"h"+Z(ie.bx)+"v"+oe(ie.by)+"h-"+Z(ie.bx)+"Z":"M0,0L"+Z(de*A+ye)+","+oe(A+ke)+"v"+oe(ie.by/2-A)+"h"+Z(de*ie.bx)+"v-"+oe(ie.by)+"H"+Z(de*A+ye)+"V"+oe(ke-A)+"Z");var je=ye+pe,Ie=ke+ie.ty0-ie.by/2+I,Ce=ie.textAlign||"auto";"auto"!==Ce&&("left"===Ce&&"start"!==he?(fe.attr("text-anchor","start"),je=ze?-ie.bx/2-ie.tx2width/2+I:-ie.bx-I):"right"===Ce&&"end"!==he&&(fe.attr("text-anchor","end"),je=ze?ie.bx/2-ie.tx2width/2-I:ie.bx+I)),fe.call(l.positionText,Z(je),oe(Ie)),ie.tx2width&&(ue.select("text.name").call(l.positionText,Z(Te+be*I+ye),oe(ke+ie.ty0-ie.by/2+I)),ue.select("rect").call(s.setRect,Z(Te+(be-1)*ie.tx2width/2+ye),oe(ke-ie.by/2-1),Z(ie.tx2width),oe(ie.by+2)))})}function Q(q,re){var V=q.index,W=q.trace||{},Z=q.cd[0],oe=q.cd[V]||{};function ie(pe){return pe||m(pe)&&0===pe}var ue=Array.isArray(V)?function(pe,Te){var ye=p.castOption(Z,V,pe);return ie(ye)?ye:p.extractOption({},W,"",Te)}:function(pe,Te){return p.extractOption(oe,W,pe,Te)};function fe(pe,Te,ye){var ke=ue(Te,ye);ie(ke)&&(q[pe]=ke)}if(fe("hoverinfo","hi","hoverinfo"),fe("bgcolor","hbg","hoverlabel.bgcolor"),fe("borderColor","hbc","hoverlabel.bordercolor"),fe("fontFamily","htf","hoverlabel.font.family"),fe("fontSize","hts","hoverlabel.font.size"),fe("fontColor","htc","hoverlabel.font.color"),fe("nameLength","hnl","hoverlabel.namelength"),fe("textAlign","hta","hoverlabel.align"),q.posref="y"===re||"closest"===re&&"h"===W.orientation?q.xa._offset+(q.x0+q.x1)/2:q.ya._offset+(q.y0+q.y1)/2,q.x0=p.constrain(q.x0,0,q.xa._length),q.x1=p.constrain(q.x1,0,q.xa._length),q.y0=p.constrain(q.y0,0,q.ya._length),q.y1=p.constrain(q.y1,0,q.ya._length),void 0!==q.xLabelVal&&(q.xLabel="xLabel"in q?q.xLabel:g.hoverLabelText(q.xa,q.xLabelVal,W.xhoverformat),q.xVal=q.xa.c2d(q.xLabelVal)),void 0!==q.yLabelVal&&(q.yLabel="yLabel"in q?q.yLabel:g.hoverLabelText(q.ya,q.yLabelVal,W.yhoverformat),q.yVal=q.ya.c2d(q.yLabelVal)),void 0!==q.zLabelVal&&void 0===q.zLabel&&(q.zLabel=String(q.zLabelVal)),!(isNaN(q.xerr)||"log"===q.xa.type&&q.xerr<=0)){var he=g.tickText(q.xa,q.xa.c2l(q.xerr),"hover").text;q.xLabel+=void 0!==q.xerrneg?" +"+he+" / -"+g.tickText(q.xa,q.xa.c2l(q.xerrneg),"hover").text:" \xb1 "+he,"x"===re&&(q.distance+=1)}if(!(isNaN(q.yerr)||"log"===q.ya.type&&q.yerr<=0)){var de=g.tickText(q.ya,q.ya.c2l(q.yerr),"hover").text;q.yLabel+=void 0!==q.yerrneg?" +"+de+" / -"+g.tickText(q.ya,q.ya.c2l(q.yerrneg),"hover").text:" \xb1 "+de,"y"===re&&(q.distance+=1)}var be=q.hoverinfo||q.trace.hoverinfo;return be&&"all"!==be&&(-1===(be=Array.isArray(be)?be:be.split("+")).indexOf("x")&&(q.xLabel=void 0),-1===be.indexOf("y")&&(q.yLabel=void 0),-1===be.indexOf("z")&&(q.zLabel=void 0),-1===be.indexOf("text")&&(q.text=void 0),-1===be.indexOf("name")&&(q.name=void 0)),q}function ne(q,re,V){var W,Z,oe=V.container,ie=V.fullLayout,ue=ie._size,fe=V.event,he=!!re.hLinePoint,de=!!re.vLinePoint;if(oe.selectAll(".spikeline").remove(),de||he){var be=o.combine(ie.plot_bgcolor,ie.paper_bgcolor);if(he){var pe,Te,ye=re.hLinePoint;W=ye&&ye.xa,"cursor"===(Z=ye&&ye.ya).spikesnap?(pe=fe.pointerX,Te=fe.pointerY):(pe=W._offset+ye.x,Te=Z._offset+ye.y);var ke,ze,je=b.readability(ye.color,be)<1.5?o.contrast(be):ye.color,Ie=Z.spikemode,Ce=Z.spikethickness,_e=Z.spikecolor||je,we=g.getPxPosition(q,Z);if(-1!==Ie.indexOf("toaxis")||-1!==Ie.indexOf("across")){if(-1!==Ie.indexOf("toaxis")&&(ke=we,ze=pe),-1!==Ie.indexOf("across")){var Se=Z._counterDomainMin,Oe=Z._counterDomainMax;"free"===Z.anchor&&(Se=Math.min(Se,Z.position),Oe=Math.max(Oe,Z.position)),ke=ue.l+Se*ue.w,ze=ue.l+Oe*ue.w}oe.insert("line",":first-child").attr({x1:ke,x2:ze,y1:Te,y2:Te,"stroke-width":Ce,stroke:_e,"stroke-dasharray":s.dashStyle(Z.spikedash,Ce)}).classed("spikeline",!0).classed("crisp",!0),oe.insert("line",":first-child").attr({x1:ke,x2:ze,y1:Te,y2:Te,"stroke-width":Ce+2,stroke:be}).classed("spikeline",!0).classed("crisp",!0)}-1!==Ie.indexOf("marker")&&oe.insert("circle",":first-child").attr({cx:we+("right"!==Z.side?Ce:-Ce),cy:Te,r:Ce,fill:_e}).classed("spikeline",!0)}if(de){var Be,He,Xe=re.vLinePoint;Z=Xe&&Xe.ya,"cursor"===(W=Xe&&Xe.xa).spikesnap?(Be=fe.pointerX,He=fe.pointerY):(Be=W._offset+Xe.x,He=Z._offset+Xe.y);var nt,et,qe=b.readability(Xe.color,be)<1.5?o.contrast(be):Xe.color,Ye=W.spikemode,ot=W.spikethickness,at=W.spikecolor||qe,ct=g.getPxPosition(q,W);if(-1!==Ye.indexOf("toaxis")||-1!==Ye.indexOf("across")){if(-1!==Ye.indexOf("toaxis")&&(nt=ct,et=He),-1!==Ye.indexOf("across")){var _t=W._counterDomainMin,xt=W._counterDomainMax;"free"===W.anchor&&(_t=Math.min(_t,W.position),xt=Math.max(xt,W.position)),nt=ue.t+(1-xt)*ue.h,et=ue.t+(1-_t)*ue.h}oe.insert("line",":first-child").attr({x1:Be,x2:Be,y1:nt,y2:et,"stroke-width":ot,stroke:at,"stroke-dasharray":s.dashStyle(W.spikedash,ot)}).classed("spikeline",!0).classed("crisp",!0),oe.insert("line",":first-child").attr({x1:Be,x2:Be,y1:nt,y2:et,"stroke-width":ot+2,stroke:be}).classed("spikeline",!0).classed("crisp",!0)}-1!==Ye.indexOf("marker")&&oe.insert("circle",":first-child").attr({cx:Be,cy:ct-("top"!==W.side?ot:-ot),r:ot,fill:at}).classed("spikeline",!0)}}}function ae(q,re){return!re||re.vLinePoint!==q._spikepoints.vLinePoint||re.hLinePoint!==q._spikepoints.hLinePoint}function te(q,re){return l.plainText(q||"",{len:re,allowedTags:["br","sub","sup","b","i","em"]})}function K(q,re,V){var W=re[q+"a"],Z=re[q+"Val"],oe=re.cd[0];if("category"===W.type)Z=W._categoriesMap[Z];else if("date"===W.type){var ie=re.trace[q+"periodalignment"];if(ie){var ue=re.cd[re.index],fe=ue[q+"Start"];void 0===fe&&(fe=ue[q]);var he=ue[q+"End"];void 0===he&&(he=ue[q]);var de=he-fe;"end"===ie?Z+=de:"middle"===ie&&(Z+=de/2)}Z=W.d2c(Z)}return oe&&oe.t&&oe.t.posLetter===W._id&&("group"!==V.boxmode&&"group"!==V.violinmode||(Z+=oe.t.dPos)),Z}},{"../../lib":803,"../../lib/events":792,"../../lib/override_cursor":814,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"../../registry":931,"../color":666,"../dragelement":685,"../drawing":688,"../legend/defaults":718,"../legend/draw":719,"./constants":700,"./helpers":702,"@plotly/d3":58,"fast-isnumeric":249,tinycolor2:598}],704:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../color"),b=h("./helpers").isUnifiedHover;G.exports=function(p,r,u,c){function l(f){c.font[f]||(c.font[f]=r.legend?r.legend.font[f]:r.font[f])}c=c||{},r&&b(r.hovermode)&&(c.font||(c.font={}),l("size"),l("family"),l("color"),r.legend?(c.bgcolor||(c.bgcolor=m.combine(r.legend.bgcolor,r.paper_bgcolor)),c.bordercolor||(c.bordercolor=r.legend.bordercolor)):c.bgcolor||(c.bgcolor=r.paper_bgcolor)),u("hoverlabel.bgcolor",c.bgcolor),u("hoverlabel.bordercolor",c.bordercolor),u("hoverlabel.namelength",c.namelength),i.coerceFont(u,"hoverlabel.font",c.font),u("hoverlabel.align",c.align)}},{"../../lib":803,"../color":666,"./helpers":702}],705:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./layout_attributes");G.exports=function(b,p){function r(u,c){return void 0!==p[u]?p[u]:i.coerce(b,p,m,u,c)}return r("clickmode"),r("hovermode")}},{"../../lib":803,"./layout_attributes":707}],706:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=h("../dragelement"),p=h("./helpers"),r=h("./layout_attributes"),u=h("./hover");G.exports={moduleType:"component",name:"fx",constants:h("./constants"),schema:{layout:r},attributes:h("./attributes"),layoutAttributes:r,supplyLayoutGlobalDefaults:h("./layout_global_defaults"),supplyDefaults:h("./defaults"),supplyLayoutDefaults:h("./layout_defaults"),calc:h("./calc"),getDistanceFunction:p.getDistanceFunction,getClosest:p.getClosest,inbox:p.inbox,quadrature:p.quadrature,appendArrayPointValue:p.appendArrayPointValue,castHoverOption:function(c,l,f){return m.castOption(c,l,"hoverlabel."+f)},castHoverinfo:function(c,l,f){return m.castOption(c,f,"hoverinfo",function(s){return m.coerceHoverinfo({hoverinfo:s},{_module:c._module},l)})},hover:u.hover,unhover:b.unhover,loneHover:u.loneHover,loneUnhover:function(c){var l=m.isD3Selection(c)?c:i.select(c);l.selectAll("g.hovertext").remove(),l.selectAll(".spikeline").remove()},click:h("./click")}},{"../../lib":803,"../dragelement":685,"./attributes":697,"./calc":698,"./click":699,"./constants":700,"./defaults":701,"./helpers":702,"./hover":703,"./layout_attributes":707,"./layout_defaults":708,"./layout_global_defaults":709,"@plotly/d3":58}],707:[function(h,G,X){"use strict";var i=h("./constants"),m=h("../../plots/font_attributes")({editType:"none"});m.family.dflt=i.HOVERFONT,m.size.dflt=i.HOVERFONTSIZE,G.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:m,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":883,"./constants":700}],708:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./layout_attributes"),b=h("./hovermode_defaults"),p=h("./hoverlabel_defaults");G.exports=function(r,u){function c(o,d){return i.coerce(r,u,m,o,d)}b(r,u)&&(c("hoverdistance"),c("spikedistance")),"select"===c("dragmode")&&c("selectdirection");var l=u._has("mapbox"),f=u._has("geo"),s=u._basePlotModules.length;"zoom"===u.dragmode&&((l||f)&&1===s||l&&f&&2===s)&&(u.dragmode="pan"),p(r,u,c)}},{"../../lib":803,"./hoverlabel_defaults":704,"./hovermode_defaults":705,"./layout_attributes":707}],709:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./hoverlabel_defaults"),b=h("./layout_attributes");G.exports=function(p,r){m(p,r,function(u,c){return i.coerce(p,r,b,u,c)})}},{"../../lib":803,"./hoverlabel_defaults":704,"./layout_attributes":707}],710:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../lib/regex").counter,b=h("../../plots/domain").attributes,p=h("../../plots/cartesian/constants").idRegex,r=h("../../plot_api/plot_template"),u={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[m("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[p.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[p.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:b({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function c(s,o,d){var g=o[d+"axes"],y=Object.keys((s._splomAxes||{})[d]||{});return Array.isArray(g)?g:y.length?y:void 0}function l(s,o,d,g,y,v){var _=o(s+"gap",d),w=o("domain."+s);o(s+"side",g);for(var x=new Array(y),E=w[0],k=(w[1]-E)/(y-_),C=k*(1-_),L=0;L<y;L++){var P=E+k*L;x[v?y-1-L:L]=[P,P+C]}return x}function f(s,o,d,g,y){var v,_=new Array(d);function w(x,E){-1!==o.indexOf(E)&&void 0===g[E]?(_[x]=E,g[E]=x):_[x]=""}if(Array.isArray(s))for(v=0;v<d;v++)w(v,s[v]);else for(w(0,y),v=1;v<d;v++)w(v,y+(v+1));return _}G.exports={moduleType:"component",name:"grid",schema:{layout:{grid:u}},layoutAttributes:u,sizeDefaults:function(s,o){var d=s.grid||{},g=c(o,d,"x"),y=c(o,d,"y");if(s.grid||g||y){var v,_,w=Array.isArray(d.subplots)&&Array.isArray(d.subplots[0]),x=Array.isArray(g),E=Array.isArray(y),k=x&&g!==d.xaxes&&E&&y!==d.yaxes;w?(v=d.subplots.length,_=d.subplots[0].length):(E&&(v=y.length),x&&(_=g.length));var C=r.newContainer(o,"grid"),L=N("rows",v),P=N("columns",_);if(L*P>1){!w&&!x&&!E&&"independent"===N("pattern")&&(w=!0),C._hasSubplotGrid=w;var A,I,D="top to bottom"===N("roworder"),S=w?.3:.1;k&&o._splomGridDflt&&(A=o._splomGridDflt.xside,I=o._splomGridDflt.yside),C._domains={x:l("x",N,w?.2:.1,A,P),y:l("y",N,S,I,L,D)}}else delete o.grid}function N(B,H){return i.coerce(d,C,u,B,H)}},contentDefaults:function(s,o){var d=o.grid;if(d&&d._domains){var g,y,v,_,w,x,E,k=s.grid||{},C=o._subplots,L=d._hasSubplotGrid,P=d.rows,A=d.columns,I="independent"===d.pattern,D=d._axisMap={};if(L){var R=k.subplots||[];x=d.subplots=new Array(P);var S=1;for(g=0;g<P;g++){var N=x[g]=new Array(A),B=R[g]||[];for(y=0;y<A;y++)if(I?(w=1===S?"xy":"x"+S+"y"+S,S++):w=B[y],N[y]="",-1!==C.cartesian.indexOf(w)){if(E=w.indexOf("y"),v=w.slice(0,E),_=w.slice(E),void 0!==D[v]&&D[v]!==y||void 0!==D[_]&&D[_]!==g)continue;N[y]=w,D[v]=y,D[_]=g}}}else{var H=c(o,k,"x"),Y=c(o,k,"y");d.xaxes=f(H,C.xaxis,A,D,"x"),d.yaxes=f(Y,C.yaxis,P,D,"y")}var Q=d._anchors={},ne="top to bottom"===d.roworder;for(var ae in D){var te,K,q,re=ae.charAt(0),V=d[re+"side"];if(V.length<8)Q[ae]="free";else if("x"===re){if("t"===V.charAt(0)===ne?(te=0,K=1,q=P):(te=P-1,K=-1,q=-1),L){var W=D[ae];for(g=te;g!==q;g+=K)if((w=x[g][W])&&(E=w.indexOf("y"),w.slice(0,E)===ae)){Q[ae]=w.slice(E);break}}else for(g=te;g!==q;g+=K)if(-1!==C.cartesian.indexOf(ae+(_=d.yaxes[g]))){Q[ae]=_;break}}else if("l"===V.charAt(0)?(te=0,K=1,q=A):(te=A-1,K=-1,q=-1),L){var Z=D[ae];for(g=te;g!==q;g+=K)if((w=x[Z][g])&&(E=w.indexOf("y"),w.slice(E)===ae)){Q[ae]=w.slice(0,E);break}}else for(g=te;g!==q;g+=K)if(-1!==C.cartesian.indexOf((v=d.xaxes[g])+ae)){Q[ae]=v;break}}}}}},{"../../lib":803,"../../lib/regex":820,"../../plot_api/plot_template":843,"../../plots/cartesian/constants":861,"../../plots/domain":882}],711:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/constants"),m=h("../../plot_api/plot_template").templatedArray;h("../../constants/axis_placeable_objects"),G.exports=m("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":772,"../../plot_api/plot_template":843,"../../plots/cartesian/constants":861}],712:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib/to_log_range");G.exports=function(b,p,r,u){p=p||{};var c="log"===r&&"linear"===p.type;if(c||"linear"===r&&"log"===p.type)for(var f,s,o=b._fullLayout.images,d=p._id.charAt(0),g=0;g<o.length;g++)if(s="images["+g+"].",(f=o[g])[d+"ref"]===p._id){var y=f[d],v=f["size"+d],_=null,w=null;if(c){_=m(y,p.range);var x=v/Math.pow(10,_)/2;w=2*Math.log(x+Math.sqrt(1+x*x))/Math.LN10}else w=(_=Math.pow(10,y))*(Math.pow(10,v/2)-Math.pow(10,-v/2));i(_)?i(w)||(w=null):(_=null,w=null),u(s+d,_),u(s+"size"+d,w)}}},{"../../lib/to_log_range":831,"fast-isnumeric":249}],713:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/cartesian/axes"),b=h("../../plots/array_container_defaults"),p=h("./attributes");function r(u,c,l){function f(_,w){return i.coerce(u,c,p,_,w)}var s=f("source");if(!f("visible",!!s))return c;f("layer"),f("xanchor"),f("yanchor"),f("sizex"),f("sizey"),f("sizing"),f("opacity");for(var o={_fullLayout:l},d=["x","y"],g=0;g<2;g++){var y=d[g],v=m.coerceRef(u,c,o,y,"paper",void 0);"paper"!==v&&m.getFromId(o,v)._imgIndices.push(c._index),m.coercePosition(c,o,f,v,y,0)}return c}G.exports=function(u,c){b(u,c,{name:"images",handleItemDefaults:r})}},{"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/cartesian/axes":854,"./attributes":711}],714:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../drawing"),b=h("../../plots/cartesian/axes"),p=h("../../plots/cartesian/axis_ids"),r=h("../../constants/xmlns_namespaces");G.exports=function(u){var c,l,f=u._fullLayout,s=[],o={},d=[];for(l=0;l<f.images.length;l++){var g=f.images[l];if(g.visible)if("below"===g.layer&&"paper"!==g.xref&&"paper"!==g.yref){c=p.ref2id(g.xref)+p.ref2id(g.yref);var y=f._plots[c];if(!y){d.push(g);continue}y.mainplot&&(c=y.mainplot.id),o[c]||(o[c]=[]),o[c].push(g)}else"above"===g.layer?s.push(g):d.push(g)}var v={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},_={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function w(A){var I=i.select(this);if(this._imgSrc!==A.source)if(I.attr("xmlns",r.svg),A.source&&"data:"===A.source.slice(0,5))I.attr("xlink:href",A.source),this._imgSrc=A.source;else{var D=new Promise(function(R){var S=new Image;function N(){I.remove(),R()}this.img=S,S.setAttribute("crossOrigin","anonymous"),S.onerror=N,S.onload=function(){var B=document.createElement("canvas");B.width=this.width,B.height=this.height,B.getContext("2d").drawImage(this,0,0);var H=B.toDataURL("image/png");I.attr("xlink:href",H),R()},I.on("error",N),S.src=A.source,this._imgSrc=A.source}.bind(this));u._promises.push(D)}}function x(A){var I,D,R=i.select(this),S=b.getFromId(u,A.xref),N=b.getFromId(u,A.yref),B="domain"===b.getRefType(A.xref),H="domain"===b.getRefType(A.yref),Y=f._size;I=void 0!==S?"string"==typeof A.xref&&B?S._length*A.sizex:Math.abs(S.l2p(A.sizex)-S.l2p(0)):A.sizex*Y.w,D=void 0!==N?"string"==typeof A.yref&&H?N._length*A.sizey:Math.abs(N.l2p(A.sizey)-N.l2p(0)):A.sizey*Y.h;var Q,ne,ae=I*v[A.xanchor].offset,te=D*_[A.yanchor].offset,K=v[A.xanchor].sizing+_[A.yanchor].sizing;switch(Q=void 0!==S?"string"==typeof A.xref&&B?S._length*A.x+S._offset:S.r2p(A.x)+S._offset:A.x*Y.w+Y.l,Q+=ae,ne=void 0!==N?"string"==typeof A.yref&&H?N._length*(1-A.y)+N._offset:N.r2p(A.y)+N._offset:Y.h-A.y*Y.h+Y.t,ne+=te,A.sizing){case"fill":K+=" slice";break;case"stretch":K="none"}R.attr({x:Q,y:ne,width:I,height:D,preserveAspectRatio:K,opacity:A.opacity});var q=(S&&"domain"!==b.getRefType(A.xref)?S._id:"")+(N&&"domain"!==b.getRefType(A.yref)?N._id:"");m.setClipUrl(R,q?"clip"+f._uid+q:null,u)}var E=f._imageLowerLayer.selectAll("image").data(d),k=f._imageUpperLayer.selectAll("image").data(s);E.enter().append("image"),k.enter().append("image"),E.exit().remove(),k.exit().remove(),E.each(function(A){w.bind(this)(A),x.bind(this)(A)}),k.each(function(A){w.bind(this)(A),x.bind(this)(A)});var C=Object.keys(f._plots);for(l=0;l<C.length;l++){var L=f._plots[c=C[l]];if(L.imagelayer){var P=L.imagelayer.selectAll("image").data(o[c]||[]);P.enter().append("image"),P.exit().remove(),P.each(function(A){w.bind(this)(A),x.bind(this)(A)})}}}},{"../../constants/xmlns_namespaces":780,"../../plots/cartesian/axes":854,"../../plots/cartesian/axis_ids":858,"../drawing":688,"@plotly/d3":58}],715:[function(h,G,X){"use strict";G.exports={moduleType:"component",name:"images",layoutAttributes:h("./attributes"),supplyLayoutDefaults:h("./defaults"),includeBasePlot:h("../../plots/cartesian/include_components")("images"),draw:h("./draw"),convertCoords:h("./convert_coords")}},{"../../plots/cartesian/include_components":867,"./attributes":711,"./convert_coords":712,"./defaults":713,"./draw":714}],716:[function(h,G,X){"use strict";var i=h("../../plots/font_attributes"),m=h("../color/attributes");G.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:i({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:i({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":883,"../color/attributes":665}],717:[function(h,G,X){"use strict";G.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],718:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../lib"),b=h("../../plot_api/plot_template"),p=h("./attributes"),r=h("../../plots/layout_attributes"),u=h("./helpers");G.exports=function(c,l,f){for(var s=c.legend||{},o=0,d=!1,g="normal",y=0;y<f.length;y++){var v=f[y];v.visible&&((v.showlegend||v._dfltShowLegend&&!(v._module&&v._module.attributes&&v._module.attributes.showlegend&&!1===v._module.attributes.showlegend.dflt))&&(o++,v.showlegend&&(d=!0,(i.traceIs(v,"pie-like")||!0===v._input.showlegend)&&o++)),(i.traceIs(v,"bar")&&"stack"===l.barmode||-1!==["tonextx","tonexty"].indexOf(v.fill))&&(g=u.isGrouped({traceorder:g})?"grouped+reversed":"reversed"),void 0!==v.legendgroup&&""!==v.legendgroup&&(g=u.isReversed({traceorder:g})?"reversed+grouped":"grouped"))}var _=m.coerce(c,l,r,"showlegend",d&&o>1);if(!1!==_||s.uirevision){var w=b.newContainer(l,"legend");if(A("uirevision",l.uirevision),!1!==_){A("bgcolor",l.paper_bgcolor),A("bordercolor"),A("borderwidth");var x,E,k,C=m.coerceFont(A,"font",l.font),L="h"===A("orientation");if(L?(x=0,i.getComponentMethod("rangeslider","isVisible")(c.xaxis)?(E=1.1,k="bottom"):(E=-.1,k="top")):(x=1.02,E=1,k="auto"),A("traceorder",g),u.isGrouped(l.legend)&&A("tracegroupgap"),A("itemsizing"),A("itemwidth"),A("itemclick"),A("itemdoubleclick"),A("x",x),A("xanchor"),A("y",E),A("yanchor",k),A("valign"),m.noneOrAll(s,w,["x","y"]),A("title.text")){A("title.side",L?"left":"top");var P=m.extendFlat({},C,{size:m.bigFont(C.size)});m.coerceFont(A,"title.font",P)}}}function A(I,D){return m.coerce(s,w,p,I,D)}}},{"../../lib":803,"../../plot_api/plot_template":843,"../../plots/layout_attributes":908,"../../registry":931,"./attributes":716,"./helpers":722}],719:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=h("../../plots/plots"),p=h("../../registry"),r=h("../../lib/events"),u=h("../dragelement"),c=h("../drawing"),l=h("../color"),f=h("../../lib/svg_text_utils"),s=h("./handle_click"),o=h("./constants"),d=h("../../constants/alignment"),g=d.LINE_SPACING,y=d.FROM_TL,v=d.FROM_BR,_=h("./get_legend_data"),w=h("./style"),x=h("./helpers");function E(D,R,S,N,B){var H=S.data()[0][0].trace,Y={event:B,node:S.node(),curveNumber:H.index,expandedIndex:H._expandedIndex,data:D.data,layout:D.layout,frames:D._transitionData._frames,config:D._context,fullData:D._fullData,fullLayout:D._fullLayout};H._group&&(Y.group=H._group),p.traceIs(H,"pie-like")&&(Y.label=S.datum()[0].label),!1!==r.triggerHandler(D,"plotly_legendclick",Y)&&(1===N?R._clickTimeout=setTimeout(function(){D._fullLayout&&s(S,D,N)},D._context.doubleClickDelay):2===N&&(R._clickTimeout&&clearTimeout(R._clickTimeout),D._legendMouseDownTime=0,!1!==r.triggerHandler(D,"plotly_legenddoubleclick",Y)&&s(S,D,N)))}function k(D,R,S){var N,B,H=D.data()[0][0],Y=H.trace,Q=p.traceIs(Y,"pie-like"),ne=!S._inHover&&R._context.edits.legendText&&!Q,ae=S._maxNameLength;H.groupTitle?(N=H.groupTitle.text,B=H.groupTitle.font):(B=S.font,S.entries?N=H.text:(N=Q?H.label:Y.name,Y._meta&&(N=m.templateString(N,Y._meta))));var te=m.ensureSingle(D,"text","legendtext");te.attr("text-anchor","start").call(c.font,B).text(ne?C(N,ae):N),f.positionText(te,S.itemwidth+2*o.itemGap,0),ne?te.call(f.makeEditable,{gd:R,text:N}).call(P,D,R,S).on("edit",function(q){this.text(C(q,ae)).call(P,D,R,S);var re=H.trace._fullInput||{},V={};if(p.hasTransform(re,"groupby")){var W=p.getTransformIndices(re,"groupby"),oe=m.keyedContainer(re,"transforms["+W[W.length-1]+"].styles","target","value.name");oe.set(H.trace._group,q),V=oe.constructUpdate()}else V.name=q;return p.call("_guiRestyle",R,V,Y.index)}):P(te,D,R,S)}function C(D,R){var S=Math.max(4,R);if(D&&D.trim().length>=S/2)return D;for(var N=S-(D=D||"").length;N>0;N--)D+=" ";return D}function L(D,R){var S,N=R._context.doubleClickDelay,B=1,H=m.ensureSingle(D,"rect","legendtoggle",function(Y){R._context.staticPlot||Y.style("cursor","pointer").attr("pointer-events","all"),Y.call(l.fill,"rgba(0,0,0,0)")});R._context.staticPlot||(H.on("mousedown",function(){(S=(new Date).getTime())-R._legendMouseDownTime<N?B+=1:(B=1,R._legendMouseDownTime=S)}),H.on("mouseup",function(){if(!R._dragged&&!R._editing){var Y=R._fullLayout.legend;(new Date).getTime()-R._legendMouseDownTime>N&&(B=Math.max(B-1,1)),E(R,Y,D,B,i.event)}}))}function P(D,R,S,N,B){N._inHover&&D.attr("data-notex",!0),f.convertToTspans(D,S,function(){!function(H,Y,Q,ne){var ae=H.data()[0][0];if(Q._inHover||!ae||ae.trace.showlegend){var te=H.select("g[class*=math-group]"),K=te.node();Q||(Q=Y._fullLayout.legend);var V,W,re=Q.borderwidth,Z=(1===ne?Q.title.font:ae.groupTitle?ae.groupTitle.font:Q.font).size*g;if(K){var oe=c.bBox(K);V=oe.height,W=oe.width,1===ne?c.setTranslate(te,re,re+.75*V):c.setTranslate(te,0,.25*V)}else{var ie=H.select(1===ne?".legendtitletext":".legendtext"),ue=f.lineCount(ie),fe=ie.node();if(V=Z*ue,W=fe?c.bBox(fe).width:0,1===ne)"left"===Q.title.side&&(W+=2*o.itemGap),f.positionText(ie,re+o.titlePad,re+Z);else{var he=2*o.itemGap+Q.itemwidth;ae.groupTitle&&(he=o.itemGap,W-=Q.itemwidth),f.positionText(ie,he,-Z*((ue-1)/2-.3))}}1===ne?(Q._titleWidth=W,Q._titleHeight=V):(ae.lineHeight=Z,ae.height=Math.max(V,16)+3,ae.width=W)}else H.remove()}(R,S,N,B)})}function A(D){return m.isRightAnchor(D)?"right":m.isCenterAnchor(D)?"center":"left"}function I(D){return m.isBottomAnchor(D)?"bottom":m.isMiddleAnchor(D)?"middle":"top"}G.exports=function(D,R){return R||(R=D._fullLayout.legend||{}),function(S,N){var B,H,Y=S._fullLayout,Q="legend"+Y._uid,ne=N._inHover;if(ne?(B=N.layer,Q+="-hover"):B=Y._infolayer,B){if(S._legendMouseDownTime||(S._legendMouseDownTime=0),ne){if(!N.entries)return;H=_(N.entries,N)}else{if(!S.calcdata)return;H=Y.showlegend&&_(S.calcdata,N)}var ae=Y.hiddenlabels||[];if(!(ne||Y.showlegend&&H.length))return B.selectAll(".legend").remove(),Y._topdefs.select("#"+Q).remove(),b.autoMargin(S,"legend");var te=m.ensureSingle(B,"g","legend",function(ue){ne||ue.attr("pointer-events","all")}),K=m.ensureSingleById(Y._topdefs,"clipPath",Q,function(ue){ue.append("rect")}),q=m.ensureSingle(te,"rect","bg",function(ue){ue.attr("shape-rendering","crispEdges")});q.call(l.stroke,N.bordercolor).call(l.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px");var re=m.ensureSingle(te,"g","scrollbox"),V=N.title;if(N._titleWidth=0,N._titleHeight=0,V.text){var W=m.ensureSingle(re,"text","legendtitletext");W.attr("text-anchor","start").call(c.font,V.font).text(V.text),P(W,re,S,N,1)}else re.selectAll(".legendtitletext").remove();var Z=m.ensureSingle(te,"rect","scrollbar",function(ue){ue.attr(o.scrollBarEnterAttrs).call(l.fill,o.scrollBarColor)}),oe=re.selectAll("g.groups").data(H);oe.enter().append("g").attr("class","groups"),oe.exit().remove();var ie=oe.selectAll("g.traces").data(m.identity);ie.enter().append("g").attr("class","traces"),ie.exit().remove(),ie.style("opacity",function(ue){var fe=ue[0].trace;return p.traceIs(fe,"pie-like")?-1!==ae.indexOf(ue[0].label)?.5:1:"legendonly"===fe.visible?.5:1}).each(function(){i.select(this).call(k,S,N)}).call(w,S,N).each(function(){ne||i.select(this).call(L,S)}),m.syncOrAsync([b.previousPromises,function(){return function(ue,fe,he,de){var be=ue._fullLayout;de||(de=be.legend);var pe=be._size,Te=x.isVertical(de),ye=x.isGrouped(de),ke=de.borderwidth,ze=2*ke,je=o.itemGap,Ie=de.itemwidth+2*je,Ce=2*(ke+je),_e=I(de),we=de.y<0||0===de.y&&"top"===_e,Se=de.y>1||1===de.y&&"bottom"===_e,Oe=de.tracegroupgap;de._maxHeight=Math.max(we||Se?be.height/2:pe.h,30);var Be=0;de._width=0,de._height=0;var qt,Ge,Pe,Ee,He=(Ge=0,Pe=0,(Ee=(qt=de).title.side)&&(-1!==Ee.indexOf("left")&&(Ge=qt._titleWidth),-1!==Ee.indexOf("top")&&(Pe=qt._titleHeight)),[Ge,Pe]);if(Te)he.each(function(qt){var Ge=qt[0].height;c.setTranslate(this,ke+He[0],ke+He[1]+de._height+Ge/2+je),de._height+=Ge,de._width=Math.max(de._width,qt[0].width)}),Be=Ie+de._width,de._width+=je+Ie+ze,de._height+=Ce,ye&&(fe.each(function(qt,Ge){c.setTranslate(this,0,Ge*de.tracegroupgap)}),de._height+=(de._lgroupsLength-1)*de.tracegroupgap);else{var Xe=A(de),qe=Se||we,Ye=be.width/2;de._maxWidth=Math.max(de.x<0||0===de.x&&"right"===Xe?qe&&"left"===Xe?pe.l+pe.w:Ye:de.x>1||1===de.x&&"left"===Xe?qe&&"right"===Xe?pe.r+pe.w:Ye:pe.w,2*Ie);var ot=0,at=0;he.each(function(qt){var Ge=qt[0].width+Ie;ot=Math.max(ot,Ge),at+=Ge}),Be=null;var ct=0;if(ye){var _t=0,xt=0,Ht=0;fe.each(function(){var qt=0,Ge=0;i.select(this).selectAll("g.traces").each(function(Ee){var Ne=Ee[0].height;c.setTranslate(this,He[0],He[1]+ke+je+Ne/2+Ge),Ge+=Ne,qt=Math.max(qt,Ie+Ee[0].width)}),_t=Math.max(_t,Ge);var Pe=qt+je;Pe+ke+xt>de._maxWidth&&(ct=Math.max(ct,xt),xt=0,Ht+=_t+Oe,_t=Ge),c.setTranslate(this,xt,Ht),xt+=Pe}),de._width=Math.max(ct,xt)+ke,de._height=Ht+_t+Ce}else{var At=he.size(),ht=at+ze+(At-1)*je<de._maxWidth,st=0,Bt=0,gn=0,hn=0;he.each(function(qt){var Ge=qt[0].height,Pe=Ie+qt[0].width,Ee=(ht?Pe:ot)+je;Ee+ke+Bt-je>=de._maxWidth&&(ct=Math.max(ct,hn),Bt=0,gn+=st,de._height+=st,st=0),c.setTranslate(this,He[0]+ke+Bt,He[1]+ke+gn+Ge/2+je),hn=Bt+Pe+je,Bt+=Ee,st=Math.max(st,Ge)}),ht?(de._width=Bt+ze,de._height=st+Ce):(de._width=Math.max(ct,hn)+ze,de._height+=st+Ce)}}de._width=Math.ceil(Math.max(de._width+He[0],de._titleWidth+2*(ke+o.titlePad))),de._height=Math.ceil(Math.max(de._height+He[1],de._titleHeight+2*(ke+o.itemGap))),de._effHeight=Math.min(de._height,de._maxHeight);var We=ue._context.edits,it=We.legendText||We.legendPosition;he.each(function(qt){var Ge=i.select(this).select(".legendtoggle"),Pe=qt[0].height,Ee=it?Ie:Be||Ie+qt[0].width;Te||(Ee+=je/2),c.setRect(Ge,0,-Pe/2,Ee,Pe)})}(S,oe,ie,N)},function(){if(ne||(ot=A(Ye=(qe=S)._fullLayout.legend),at=I(Ye),!b.autoMargin(qe,"legend",{x:Ye.x,y:Ye.y,l:Ye._width*y[ot],r:Ye._width*v[ot],b:Ye._effHeight*v[at],t:Ye._effHeight*y[at]}))){var ue,fe,he,de,be=Y._size,pe=N.borderwidth,Te=be.l+be.w*N.x-y[A(N)]*N._width,ye=be.t+be.h*(1-N.y)-y[I(N)]*N._effHeight;if(!ne&&Y.margin.autoexpand){var ke=Te,ze=ye;Te=m.constrain(Te,0,Y.width-N._width),ye=m.constrain(ye,0,Y.height-N._effHeight),Te!==ke&&m.log("Constrain legend.x to make legend fit inside graph"),ye!==ze&&m.log("Constrain legend.y to make legend fit inside graph")}if(ne||c.setTranslate(te,Te,ye),Z.on(".drag",null),te.on("wheel",null),ne||N._height<=N._maxHeight||S._context.staticPlot){var je=N._effHeight;ne&&(je=N._height),q.attr({width:N._width-pe,height:je-pe,x:pe/2,y:pe/2}),c.setTranslate(re,0,0),K.select("rect").attr({width:N._width-2*pe,height:je-2*pe,x:pe,y:pe}),c.setClipUrl(re,Q,S),c.setRect(Z,0,0,0,0),delete N._scrollY}else{var Ie,_e,we=Math.max(o.scrollBarMinHeight,N._effHeight*N._effHeight/N._height),Se=N._effHeight-we-2*o.scrollBarMargin,Oe=N._height-N._effHeight,Be=Se/Oe,He=Math.min(N._scrollY||0,Oe);q.attr({width:N._width-2*pe+o.scrollBarWidth+o.scrollBarMargin,height:N._effHeight-pe,x:pe/2,y:pe/2}),K.select("rect").attr({width:N._width-2*pe+o.scrollBarWidth+o.scrollBarMargin,height:N._effHeight-2*pe,x:pe,y:pe+He}),c.setClipUrl(re,Q,S),et(He,we,Be),te.on("wheel",function(){et(He=m.constrain(N._scrollY+i.event.deltaY/Se*Oe,0,Oe),we,Be),0!==He&&He!==Oe&&i.event.preventDefault()});var Xe=i.behavior.drag().on("dragstart",function(){var qe=i.event.sourceEvent;Ie="touchstart"===qe.type?qe.changedTouches[0].clientY:qe.clientY,_e=He}).on("drag",function(){var qe=i.event.sourceEvent;2===qe.buttons||qe.ctrlKey||et(He=function(Ye,ot,at){return m.constrain((at-ot)/Be+Ye,0,Oe)}(_e,Ie,"touchmove"===qe.type?qe.changedTouches[0].clientY:qe.clientY),we,Be)});Z.call(Xe);var nt=i.behavior.drag().on("dragstart",function(){var qe=i.event.sourceEvent;"touchstart"===qe.type&&(Ie=qe.changedTouches[0].clientY,_e=He)}).on("drag",function(){var qe=i.event.sourceEvent;"touchmove"===qe.type&&et(He=function(Ye,ot,at){return m.constrain((ot-at)/Be+Ye,0,Oe)}(_e,Ie,qe.changedTouches[0].clientY),we,Be)});re.call(nt)}S._context.edits.legendPosition&&(te.classed("cursor-move",!0),u.init({element:te.node(),gd:S,prepFn:function(){var qe=c.getTranslate(te);he=qe.x,de=qe.y},moveFn:function(qe,Ye){var ot=he+qe,at=de+Ye;c.setTranslate(te,ot,at),ue=u.align(ot,0,be.l,be.l+be.w,N.xanchor),fe=u.align(at,0,be.t+be.h,be.t,N.yanchor)},doneFn:function(){void 0!==ue&&void 0!==fe&&p.call("_guiRelayout",S,{"legend.x":ue,"legend.y":fe})},clickFn:function(qe,Ye){var ot=B.selectAll("g.traces").filter(function(){var at=this.getBoundingClientRect();return Ye.clientX>=at.left&&Ye.clientX<=at.right&&Ye.clientY>=at.top&&Ye.clientY<=at.bottom});ot.size()>0&&E(S,te,ot,qe,Ye)}}))}var qe,Ye,ot,at;function et(qe,Ye,ot){N._scrollY=S._fullLayout.legend._scrollY=qe,c.setTranslate(re,0,-qe),c.setRect(Z,N._width,o.scrollBarMargin+qe*ot,o.scrollBarWidth,Ye),K.select("rect").attr("y",pe+qe)}}],S)}}(D,R)}},{"../../constants/alignment":771,"../../lib":803,"../../lib/events":792,"../../lib/svg_text_utils":829,"../../plots/plots":917,"../../registry":931,"../color":666,"../dragelement":685,"../drawing":688,"./constants":717,"./get_legend_data":720,"./handle_click":721,"./helpers":722,"./style":724,"@plotly/d3":58}],720:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("./helpers");G.exports=function(b,p){var r,u,c=m.isGrouped(p),l=m.isReversed(p),f={},s=[],o=!1,d={},g=0,y=0;function v(H,Y){if(""!==H&&m.isGrouped(p))-1===s.indexOf(H)?(s.push(H),o=!0,f[H]=[Y]):f[H].push(Y);else{var Q="~~i"+g;s.push(Q),f[Q]=[Y],g++}}for(r=0;r<b.length;r++){var _=b[r],w=_[0],x=w.trace,E=x.legendgroup;if(p._inHover||x.visible&&x.showlegend)if(i.traceIs(x,"pie-like"))for(d[E]||(d[E]={}),u=0;u<_.length;u++){var k=_[u].label;d[E][k]||(v(E,{label:k,color:_[u].color,i:_[u].i,trace:x,pts:_[u].pts}),d[E][k]=!0,y=Math.max(y,(k||"").length))}else v(E,w),y=Math.max(y,(x.name||"").length)}if(!s.length)return[];var C=!o||!c,L=[];for(r=0;r<s.length;r++){var P=f[s[r]];L.push(C?P[0]:P)}for(C&&(L=[L]),r=0;r<L.length;r++){var A=1/0;for(u=0;u<L[r].length;u++){var I=L[r][u].trace.legendrank;A>I&&(A=I)}L[r][0]._groupMinRank=A,L[r][0]._preGroupSort=r}var D=function(H,Y){return H.trace.legendrank-Y.trace.legendrank||H._preSort-Y._preSort};for(L.forEach(function(H,Y){H[0]._preGroupSort=Y}),L.sort(function(H,Y){return H[0]._groupMinRank-Y[0]._groupMinRank||H[0]._preGroupSort-Y[0]._preGroupSort}),r=0;r<L.length;r++){L[r].forEach(function(H,Y){H._preSort=Y}),L[r].sort(D);var R=L[r][0].trace,S=null;for(u=0;u<L[r].length;u++){var N=L[r][u].trace.legendgrouptitle;if(N&&N.text){S=N;break}}if(l&&L[r].reverse(),S){var B=!1;for(u=0;u<L[r].length;u++)if(i.traceIs(L[r][u].trace,"pie-like")){B=!0;break}L[r].unshift({i:-1,groupTitle:S,noClick:B,trace:{showlegend:R.showlegend,legendgroup:R.legendgroup,visible:R.visible}})}for(u=0;u<L[r].length;u++)L[r][u]=[L[r][u]]}return p._lgroupsLength=L.length,p._maxNameLength=y,L}},{"../../registry":931,"./helpers":722}],721:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../registry"),b=!0;G.exports=function(p,r,u){var c=r._fullLayout;if(!r._dragged&&!r._editing){var l,f=c.legend.itemclick,s=c.legend.itemdoubleclick;if(1===u&&"toggle"===f&&"toggleothers"===s&&b&&r.data&&r._context.showTips&&i.notifier(i._(r,"Double-click on legend to isolate one trace"),"long"),b=!1,1===u?l=f:2===u&&(l=s),l){var o=c.hiddenlabels?c.hiddenlabels.slice():[],d=p.data()[0][0];if(!d.groupTitle||!d.noClick){var g,y,v,_,w,x=r._fullData,E=d.trace,k=E.legendgroup,C={},L=[],P=[],A=[];if(m.traceIs(E,"pie-like")){var I=d.label,D=o.indexOf(I);"toggle"===l?-1===D?o.push(I):o.splice(D,1):"toggleothers"===l&&(o=[],r.calcdata[0].forEach(function(V){I!==V.label&&o.push(V.label)}),r._fullLayout.hiddenlabels&&r._fullLayout.hiddenlabels.length===o.length&&-1===D&&(o=[])),m.call("_guiRelayout",r,"hiddenlabels",o)}else{var R,S=k&&k.length,N=[];if(S)for(g=0;g<x.length;g++)(R=x[g]).visible&&R.legendgroup===k&&N.push(g);if("toggle"===l){var B;switch(E.visible){case!0:B="legendonly";break;case!1:B=!1;break;case"legendonly":B=!0}if(S)for(g=0;g<x.length;g++)!1!==x[g].visible&&x[g].legendgroup===k&&re(x[g],B);else re(E,B)}else if("toggleothers"===l){var Q,ae=!0;for(g=0;g<x.length;g++)if(Q=!0!==x[g].showlegend,!(x[g]===E||Q||S&&x[g].legendgroup===k||!0!==x[g].visible||m.traceIs(x[g],"notLegendIsolatable"))){ae=!1;break}for(g=0;g<x.length;g++)if(!1!==x[g].visible&&!m.traceIs(x[g],"notLegendIsolatable"))switch(E.visible){case"legendonly":re(x[g],!0);break;case!0:Q=!0!==x[g].showlegend&&!x[g].legendgroup,re(x[g],!!(x[g]===E||S&&x[g].legendgroup===k||Q)||!!ae||"legendonly")}}for(g=0;g<P.length;g++)if(v=P[g]){var te=v.constructUpdate(),K=Object.keys(te);for(y=0;y<K.length;y++)(C[_=K[y]]=C[_]||[])[A[g]]=te[_]}for(w=Object.keys(C),g=0;g<w.length;g++)for(_=w[g],y=0;y<L.length;y++)C[_].hasOwnProperty(y)||(C[_][y]=void 0);m.call("_guiRestyle",r,C,L)}}}}function q(V,W,Z){var oe=L.indexOf(V),ie=C[W];return ie||(ie=C[W]=[]),-1===L.indexOf(V)&&(L.push(V),oe=L.length-1),ie[oe]=Z,oe}function re(V,W){var Z=V._fullInput;if(m.hasTransform(Z,"groupby")){var oe=P[Z.index];if(!oe){var ie=m.getTransformIndices(Z,"groupby");oe=i.keyedContainer(Z,"transforms["+ie[ie.length-1]+"].styles","target","value.visible"),P[Z.index]=oe}var fe=oe.get(V._group);void 0===fe&&(fe=!0),!1!==fe&&oe.set(V._group,W),A[Z.index]=q(Z.index,"visible",!1!==Z.visible)}else q(Z.index,"visible",!1!==Z.visible&&W)}}},{"../../lib":803,"../../registry":931}],722:[function(h,G,X){"use strict";X.isGrouped=function(i){return-1!==(i.traceorder||"").indexOf("grouped")},X.isVertical=function(i){return"h"!==i.orientation},X.isReversed=function(i){return-1!==(i.traceorder||"").indexOf("reversed")}},{}],723:[function(h,G,X){"use strict";G.exports={moduleType:"component",name:"legend",layoutAttributes:h("./attributes"),supplyLayoutDefaults:h("./defaults"),draw:h("./draw"),style:h("./style")}},{"./attributes":716,"./defaults":718,"./draw":719,"./style":724}],724:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../registry"),b=h("../../lib"),p=b.strTranslate,r=h("../drawing"),u=h("../color"),c=h("../colorscale/helpers").extractOpts,l=h("../../traces/scatter/subtypes"),f=h("../../traces/pie/style_one"),s=h("../../traces/pie/helpers").castOption,o=h("./constants");function d(v,_){return(_?"radial":"horizontal")+(v?"":"reversed")}function g(v){var _=v[0].trace,w=_.contours,x=l.hasLines(_),E=l.hasMarkers(_),k=_.visible&&_.fill&&"none"!==_.fill,C=!1,L=!1;if(w){var P=w.coloring;"lines"===P?C=!0:x="none"===P||"heatmap"===P||w.showlines,"constraint"===w.type?k="="!==w._operation:"fill"!==P&&"heatmap"!==P||(L=!0)}return{showMarker:E,showLine:x,showFill:k,showGradientLine:C,showGradientFill:L,anyLine:x||C,anyFill:k||L}}function y(v,_,w){return v&&b.isArrayOrTypedArray(v)?_:v>w?w:v}G.exports=function(v,_,w){w||(w=_._fullLayout.legend);var E="constant"===w.itemsizing,k=w.itemwidth,L=p((k+2*o.itemGap)/2,0),P=function(D,R,S,N){var B;if(D+1)B=D;else{if(!(R&&R.width>0))return 0;B=R.width}return E?N:Math.min(B,S)};function A(D,R,S){var N=D[0].trace,B=N.marker||{},H=B.line||{},Y=S?N.visible&&N.type===S:m.traceIs(N,"bar"),Q=i.select(R).select("g.legendpoints").selectAll("path.legend"+S).data(Y?[D]:[]);Q.enter().append("path").classed("legend"+S,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",L),Q.exit().remove(),Q.each(function(ne){var ae=i.select(this),te=ne[0],K=P(te.mlw,B.line,5,2);ae.style("stroke-width",K+"px");var q=te.mcc;if(!w._inHover&&"mc"in te){var re=c(B),V=re.mid;void 0===V&&(V=(re.max+re.min)/2),q=r.tryColorscale(B,"")(V)}var W=q||te.mc||B.color,Z=B.pattern,oe=Z&&r.getPatternAttr(Z.shape,0,"");if(oe){var ie=r.getPatternAttr(Z.bgcolor,0,null),ue=r.getPatternAttr(Z.fgcolor,0,null),fe=Z.fgopacity,he=y(Z.size,8,10),de=y(Z.solidity,.5,1);ae.call(r.pattern,"legend",_,"legend-"+N.uid,oe,he,de,q,Z.fillmode,ie,ue,fe)}else ae.call(u.fill,W);K&&u.stroke(ae,te.mlc||H.color)})}function I(D,R,S){var N=D[0],B=N.trace,H=S?B.visible&&B.type===S:m.traceIs(B,S),Y=i.select(R).select("g.legendpoints").selectAll("path.legend"+S).data(H?[D]:[]);if(Y.enter().append("path").classed("legend"+S,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",L),Y.exit().remove(),Y.size()){var Q=(B.marker||{}).line,ne=P(s(Q.width,N.pts),Q,5,2),ae=b.minExtend(B,{marker:{line:{width:ne}}});ae.marker.line.color=Q.color;var te=b.minExtend(N,{trace:ae});f(Y,te,ae)}}v.each(function(D){var R=i.select(this),S=b.ensureSingle(R,"g","layers");S.style("opacity",D[0].trace.opacity);var N=w.valign,B=D[0].lineHeight,H=D[0].height;S.attr("transform","middle"!==N&&B&&H?p(0,{top:1,bottom:-1}[N]*(.5*(B-H+3))):null),S.selectAll("g.legendfill").data([D]).enter().append("g").classed("legendfill",!0),S.selectAll("g.legendlines").data([D]).enter().append("g").classed("legendlines",!0);var Q=S.selectAll("g.legendsymbols").data([D]);Q.enter().append("g").classed("legendsymbols",!0),Q.selectAll("g.legendpoints").data([D]).enter().append("g").classed("legendpoints",!0)}).each(function(D){var R,S=D[0].trace,N=[];if(S.visible)switch(S.type){case"histogram2d":case"heatmap":N=[["M-15,-2V4H15V-2Z"]],R=!0;break;case"choropleth":case"choroplethmapbox":N=[["M-6,-6V6H6V-6Z"]],R=!0;break;case"densitymapbox":N=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],R="radial";break;case"cone":N=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],R=!1;break;case"streamtube":N=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],R=!1;break;case"surface":N=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],R=!0;break;case"mesh3d":N=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],R=!1;break;case"volume":N=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],R=!0;break;case"isosurface":N=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],R=!1}var B=i.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(N);B.enter().append("path").classed("legend3dandfriends",!0).attr("transform",L).style("stroke-miterlimit",1),B.exit().remove(),B.each(function(H,Y){var Q,ne=i.select(this),ae=c(S),te=ae.colorscale,K=ae.reversescale;if(te){if(!R){var q=te.length;Q=0===Y?te[K?q-1:0][1]:1===Y?te[K?0:q-1][1]:te[Math.floor((q-1)/2)][1]}}else{var re=S.vertexcolor||S.facecolor||S.color;Q=b.isArrayOrTypedArray(re)?re[Y]||re[0]:re}ne.attr("d",H[0]),Q?ne.call(u.fill,Q):ne.call(function(V){V.size()&&r.gradient(V,_,"legendfill-"+S.uid,d(K,"radial"===R),te,"fill")})})}).each(function(D){var R=D[0].trace,S="waterfall"===R.type;if(D[0]._distinct&&S){var N=D[0].trace[D[0].dir].marker;return D[0].mc=N.color,D[0].mlw=N.line.width,D[0].mlc=N.line.color,A(D,this,"waterfall")}var B=[];R.visible&&S&&(B=D[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var H=i.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(B);H.enter().append("path").classed("legendwaterfall",!0).attr("transform",L).style("stroke-miterlimit",1),H.exit().remove(),H.each(function(Y){var Q=i.select(this),ne=R[Y[0]].marker,ae=P(void 0,ne.line,5,2);Q.attr("d",Y[1]).style("stroke-width",ae+"px").call(u.fill,ne.color),ae&&Q.call(u.stroke,ne.line.color)})}).each(function(D){A(D,this,"funnel")}).each(function(D){A(D,this)}).each(function(D){var R=D[0].trace,S=i.select(this).select("g.legendpoints").selectAll("path.legendbox").data(R.visible&&m.traceIs(R,"box-violin")?[D]:[]);S.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",L),S.exit().remove(),S.each(function(){var N=i.select(this);if("all"!==R.boxpoints&&"all"!==R.points||0!==u.opacity(R.fillcolor)||0!==u.opacity((R.line||{}).color)){var B=P(void 0,R.line,5,2);N.style("stroke-width",B+"px").call(u.fill,R.fillcolor),B&&u.stroke(N,R.line.color)}else{var H=b.minExtend(R,{marker:{size:E?12:b.constrain(R.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});S.call(r.pointStyle,H,_)}})}).each(function(D){I(D,this,"funnelarea")}).each(function(D){I(D,this,"pie")}).each(function(D){var R,S,N=g(D),B=N.showFill,H=N.showLine,Y=N.showGradientLine,Q=N.showGradientFill,ne=N.anyFill,ae=N.anyLine,te=D[0],K=te.trace,q=c(K),re=q.colorscale,V=q.reversescale,W=l.hasMarkers(K)||!ne?"M5,0":ae?"M5,-2":"M5,-3",Z=i.select(this),oe=Z.select(".legendfill").selectAll("path").data(B||Q?[D]:[]);if(oe.enter().append("path").classed("js-fill",!0),oe.exit().remove(),oe.attr("d",W+"h"+k+"v6h-"+k+"z").call(B?r.fillGroupStyle:function(fe){fe.size()&&r.gradient(fe,_,"legendfill-"+K.uid,d(V),re,"fill")}),H||Y){var ie=P(void 0,K.line,10,5);S=b.minExtend(K,{line:{width:ie}}),R=[b.minExtend(te,{trace:S})]}var ue=Z.select(".legendlines").selectAll("path").data(H||Y?[R]:[]);ue.enter().append("path").classed("js-line",!0),ue.exit().remove(),ue.attr("d",W+(Y?"l"+k+",0.0001":"h"+k)).call(H?r.lineGroupStyle:function(fe){if(fe.size()){var he="legendline-"+K.uid;r.lineGroupStyle(fe),r.gradient(fe,_,he,d(V),re,"stroke")}})}).each(function(D){var R,S,N=g(D),Y=N.showLine,Q=N.showMarker,ne=D[0],ae=ne.trace,te=!Q&&!N.anyLine&&!N.anyFill&&l.hasText(ae);function K(ue,fe,he,de){var be=b.nestedProperty(ae,ue).get(),pe=b.isArrayOrTypedArray(be)&&fe?fe(be):be;if(E&&pe&&void 0!==de&&(pe=de),he){if(pe<he[0])return he[0];if(pe>he[1])return he[1]}return pe}function q(ue){return ne._distinct&&ne.index&&ue[ne.index]?ue[ne.index]:ue[0]}if(Q||te||Y){var re={},V={};if(Q){re.mc=K("marker.color",q),re.mx=K("marker.symbol",q),re.mo=K("marker.opacity",b.mean,[.2,1]),re.mlc=K("marker.line.color",q),re.mlw=K("marker.line.width",b.mean,[0,5],2),V.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var W=K("marker.size",b.mean,[2,16],12);re.ms=W,V.marker.size=W}Y&&(V.line={width:K("line.width",q,[0,10],5)}),te&&(re.tx="Aa",re.tp=K("textposition",q),re.ts=10,re.tc=K("textfont.color",q),re.tf=K("textfont.family",q)),R=[b.minExtend(ne,re)],(S=b.minExtend(ae,V)).selectedpoints=null,S.texttemplate=null}var Z=i.select(this).select("g.legendpoints"),oe=Z.selectAll("path.scatterpts").data(Q?R:[]);oe.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",L),oe.exit().remove(),oe.call(r.pointStyle,S,_),Q&&(R[0].mrc=3);var ie=Z.selectAll("g.pointtext").data(te?R:[]);ie.enter().append("g").classed("pointtext",!0).append("text").attr("transform",L),ie.exit().remove(),ie.selectAll("text").call(r.textPointStyle,S,_)}).each(function(D){var R=D[0].trace,S=i.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(R.visible&&"candlestick"===R.type?[D,D]:[]);S.enter().append("path").classed("legendcandle",!0).attr("d",function(N,B){return B?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",L).style("stroke-miterlimit",1),S.exit().remove(),S.each(function(N,B){var H=i.select(this),Y=R[B?"increasing":"decreasing"],Q=P(void 0,Y.line,5,2);H.style("stroke-width",Q+"px").call(u.fill,Y.fillcolor),Q&&u.stroke(H,Y.line.color)})}).each(function(D){var R=D[0].trace,S=i.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(R.visible&&"ohlc"===R.type?[D,D]:[]);S.enter().append("path").classed("legendohlc",!0).attr("d",function(N,B){return B?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",L).style("stroke-miterlimit",1),S.exit().remove(),S.each(function(N,B){var H=i.select(this),Y=R[B?"increasing":"decreasing"],Q=P(void 0,Y.line,5,2);H.style("fill","none").call(r.dashLine,Y.line.dash,Q),Q&&u.stroke(H,Y.line.color)})})}},{"../../lib":803,"../../registry":931,"../../traces/pie/helpers":1197,"../../traces/pie/style_one":1203,"../../traces/scatter/subtypes":1243,"../color":666,"../colorscale/helpers":677,"../drawing":688,"./constants":717,"@plotly/d3":58}],725:[function(h,G,X){"use strict";h("./constants"),G.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":727}],726:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../plots/plots"),b=h("../../plots/cartesian/axis_ids"),p=h("../../fonts/ploticon"),r=h("../shapes/draw").eraseActiveShape,u=h("../../lib"),c=u._,l=G.exports={};function f(x,E){var k,C,L=E.currentTarget,P=L.getAttribute("data-attr"),A=L.getAttribute("data-val")||!0,I=x._fullLayout,D={},R=b.list(x,null,!0),S=I._cartesianSpikesEnabled;if("zoom"===P){var N,B="in"===A?.5:2,H=(1+B)/2,Y=(1-B)/2;for(C=0;C<R.length;C++)if(!(k=R[C]).fixedrange)if(N=k._name,"auto"===A)D[N+".autorange"]=!0;else if("reset"===A){if(void 0===k._rangeInitial)D[N+".autorange"]=!0;else{var Q=k._rangeInitial.slice();D[N+".range[0]"]=Q[0],D[N+".range[1]"]=Q[1]}void 0!==k._showSpikeInitial&&(D[N+".showspikes"]=k._showSpikeInitial,"on"!==S||k._showSpikeInitial||(S="off"))}else{var ne=[k.r2l(k.range[0]),k.r2l(k.range[1])],ae=[H*ne[0]+Y*ne[1],H*ne[1]+Y*ne[0]];D[N+".range[0]"]=k.l2r(ae[0]),D[N+".range[1]"]=k.l2r(ae[1])}}else"hovermode"!==P||"x"!==A&&"y"!==A||L.setAttribute("data-val",A=I._isHoriz?"y":"x"),D[P]=A;I._cartesianSpikesEnabled=S,i.call("_guiRelayout",x,D)}function s(x,E){for(var k=E.currentTarget,C=k.getAttribute("data-attr"),L=k.getAttribute("data-val")||!0,P=x._fullLayout._subplots.gl3d||[],A={},I=C.split("."),D=0;D<P.length;D++)A[P[D]+"."+I[1]]=L;A.dragmode="pan"===L?L:"zoom",i.call("_guiRelayout",x,A)}function o(x,E){for(var k=E.currentTarget.getAttribute("data-attr"),C="resetLastSave"===k,L="resetDefault"===k,P=x._fullLayout,A=P._subplots.gl3d||[],I={},D=0;D<A.length;D++){var R,S=A[D],N=S+".camera",B=S+".aspectratio",H=S+".aspectmode",Y=P[S]._scene;C?(I[N+".up"]=Y.viewInitial.up,I[N+".eye"]=Y.viewInitial.eye,I[N+".center"]=Y.viewInitial.center,R=!0):L&&(I[N+".up"]=null,I[N+".eye"]=null,I[N+".center"]=null,R=!0),R&&(I[B+".x"]=Y.viewInitial.aspectratio.x,I[B+".y"]=Y.viewInitial.aspectratio.y,I[B+".z"]=Y.viewInitial.aspectratio.z,I[H]=Y.viewInitial.aspectmode)}i.call("_guiRelayout",x,I)}function d(x,E){var k=E.currentTarget,C=k._previousVal,L=x._fullLayout,P=L._subplots.gl3d||[],A=["xaxis","yaxis","zaxis"],I={},D={};if(C)D=C,k._previousVal=null;else{for(var R=0;R<P.length;R++){var S=P[R],N=L[S],B=S+".hovermode";I[B]=N.hovermode,D[B]=!1;for(var H=0;H<3;H++){var Y=A[H],Q=S+"."+Y+".showspikes";D[Q]=!1,I[Q]=N[Y].showspikes}}k._previousVal=I}return D}function g(x,E){for(var k=E.currentTarget,C=k.getAttribute("data-attr"),L=k.getAttribute("data-val")||!0,P=x._fullLayout,A=P._subplots.geo||[],I=0;I<A.length;I++){var D=A[I];if("zoom"===C){var S=P[D].projection.scale;i.call("_guiRelayout",x,D+".projection.scale","in"===L?2*S:.5*S)}}"reset"===C&&w(x,"geo")}function y(x){var E=x._fullLayout;return!E.hovermode&&(E._has("cartesian")?E._isHoriz?"y":"x":"closest")}function v(x){var E=y(x);i.call("_guiRelayout",x,"hovermode",E)}function _(x,E){for(var k=E.currentTarget.getAttribute("data-val"),C=x._fullLayout,L=C._subplots.mapbox||[],P={},A=0;A<L.length;A++){var I=L[A],D=C[I].zoom;P[I+".zoom"]="in"===k?1.05*D:D/1.05}i.call("_guiRelayout",x,P)}function w(x,E){for(var k=x._fullLayout,C=k._subplots[E]||[],L={},P=0;P<C.length;P++)for(var A=C[P],I=k[A]._subplot.viewInitial,D=Object.keys(I),R=0;R<D.length;R++){var S=D[R];L[A+"."+S]=I[S]}i.call("_guiRelayout",x,L)}l.toImage={name:"toImage",title:function(x){return c(x,"png"===((x._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:p.camera,click:function(x){var E=x._context.toImageButtonOptions,k={format:E.format||"png"};u.notifier(c(x,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==k.format&&u.isIE()&&(u.notifier(c(x,"IE only supports svg.  Changing format to svg."),"long"),k.format="svg"),["filename","width","height","scale"].forEach(function(C){C in E&&(k[C]=E[C])}),i.call("downloadImage",x,k).then(function(C){u.notifier(c(x,"Snapshot succeeded")+" - "+C,"long")}).catch(function(){u.notifier(c(x,"Sorry, there was a problem downloading your snapshot!"),"long")})}},l.sendDataToCloud={name:"sendDataToCloud",title:function(x){return c(x,"Edit in Chart Studio")},icon:p.disk,click:function(x){m.sendDataToCloud(x)}},l.editInChartStudio={name:"editInChartStudio",title:function(x){return c(x,"Edit in Chart Studio")},icon:p.pencil,click:function(x){m.sendDataToCloud(x)}},l.zoom2d={name:"zoom2d",_cat:"zoom",title:function(x){return c(x,"Zoom")},attr:"dragmode",val:"zoom",icon:p.zoombox,click:f},l.pan2d={name:"pan2d",_cat:"pan",title:function(x){return c(x,"Pan")},attr:"dragmode",val:"pan",icon:p.pan,click:f},l.select2d={name:"select2d",_cat:"select",title:function(x){return c(x,"Box Select")},attr:"dragmode",val:"select",icon:p.selectbox,click:f},l.lasso2d={name:"lasso2d",_cat:"lasso",title:function(x){return c(x,"Lasso Select")},attr:"dragmode",val:"lasso",icon:p.lasso,click:f},l.drawclosedpath={name:"drawclosedpath",title:function(x){return c(x,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:p.drawclosedpath,click:f},l.drawopenpath={name:"drawopenpath",title:function(x){return c(x,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:p.drawopenpath,click:f},l.drawline={name:"drawline",title:function(x){return c(x,"Draw line")},attr:"dragmode",val:"drawline",icon:p.drawline,click:f},l.drawrect={name:"drawrect",title:function(x){return c(x,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:p.drawrect,click:f},l.drawcircle={name:"drawcircle",title:function(x){return c(x,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:p.drawcircle,click:f},l.eraseshape={name:"eraseshape",title:function(x){return c(x,"Erase active shape")},icon:p.eraseshape,click:r},l.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(x){return c(x,"Zoom in")},attr:"zoom",val:"in",icon:p.zoom_plus,click:f},l.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(x){return c(x,"Zoom out")},attr:"zoom",val:"out",icon:p.zoom_minus,click:f},l.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(x){return c(x,"Autoscale")},attr:"zoom",val:"auto",icon:p.autoscale,click:f},l.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(x){return c(x,"Reset axes")},attr:"zoom",val:"reset",icon:p.home,click:f},l.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(x){return c(x,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:p.tooltip_basic,gravity:"ne",click:f},l.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(x){return c(x,"Compare data on hover")},attr:"hovermode",val:function(x){return x._fullLayout._isHoriz?"y":"x"},icon:p.tooltip_compare,gravity:"ne",click:f},l.zoom3d={name:"zoom3d",_cat:"zoom",title:function(x){return c(x,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:p.zoombox,click:s},l.pan3d={name:"pan3d",_cat:"pan",title:function(x){return c(x,"Pan")},attr:"scene.dragmode",val:"pan",icon:p.pan,click:s},l.orbitRotation={name:"orbitRotation",title:function(x){return c(x,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:p["3d_rotate"],click:s},l.tableRotation={name:"tableRotation",title:function(x){return c(x,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:p["z-axis"],click:s},l.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(x){return c(x,"Reset camera to default")},attr:"resetDefault",icon:p.home,click:o},l.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(x){return c(x,"Reset camera to last save")},attr:"resetLastSave",icon:p.movie,click:o},l.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(x){return c(x,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:p.tooltip_basic,gravity:"ne",click:function(x,E){var k=d(x,E);i.call("_guiRelayout",x,k)}},l.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(x){return c(x,"Zoom in")},attr:"zoom",val:"in",icon:p.zoom_plus,click:g},l.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(x){return c(x,"Zoom out")},attr:"zoom",val:"out",icon:p.zoom_minus,click:g},l.resetGeo={name:"resetGeo",_cat:"reset",title:function(x){return c(x,"Reset")},attr:"reset",val:null,icon:p.autoscale,click:g},l.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(x){return c(x,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:p.tooltip_basic,gravity:"ne",click:v},l.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(x){return c(x,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:p.tooltip_basic,gravity:"ne",click:v},l.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(x){return c(x,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:p.tooltip_basic,gravity:"ne",click:v},l.resetViewSankey={name:"resetSankeyGroup",title:function(x){return c(x,"Reset view")},icon:p.home,click:function(x){for(var E={"node.groups":[],"node.x":[],"node.y":[]},k=0;k<x._fullData.length;k++){var C=x._fullData[k]._viewInitial;E["node.groups"].push(C.node.groups.slice()),E["node.x"].push(C.node.x.slice()),E["node.y"].push(C.node.y.slice())}i.call("restyle",x,E)}},l.toggleHover={name:"toggleHover",title:function(x){return c(x,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:p.tooltip_basic,gravity:"ne",click:function(x,E){var k=d(x,E);k.hovermode=y(x),i.call("_guiRelayout",x,k)}},l.resetViews={name:"resetViews",title:function(x){return c(x,"Reset views")},icon:p.home,click:function(x,E){var k=E.currentTarget;k.setAttribute("data-attr","zoom"),k.setAttribute("data-val","reset"),f(x,E),k.setAttribute("data-attr","resetLastSave"),o(x,E),w(x,"geo"),w(x,"mapbox")}},l.toggleSpikelines={name:"toggleSpikelines",title:function(x){return c(x,"Toggle Spike Lines")},icon:p.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(x){var E=x._fullLayout;E._cartesianSpikesEnabled="on"===E._cartesianSpikesEnabled?"off":"on",i.call("_guiRelayout",x,function(C){for(var L="on"===C._fullLayout._cartesianSpikesEnabled,P=b.list(C,null,!0),A={},I=0;I<P.length;I++){var D=P[I];A[D._name+".showspikes"]=!!L||D._showSpikeInitial}return A}(x))}},l.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(x){return c(x,"Reset view")},attr:"reset",icon:p.home,click:function(x){w(x,"mapbox")}},l.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(x){return c(x,"Zoom in")},attr:"zoom",val:"in",icon:p.zoom_plus,click:_},l.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(x){return c(x,"Zoom out")},attr:"zoom",val:"out",icon:p.zoom_minus,click:_}},{"../../fonts/ploticon":782,"../../lib":803,"../../plots/cartesian/axis_ids":858,"../../plots/plots":917,"../../registry":931,"../shapes/draw":750}],727:[function(h,G,X){"use strict";var i=h("./buttons"),m=Object.keys(i),b=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],p=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(b),r=[];m.forEach(function(u){!function(c){if(-1===p.indexOf(c._cat||c.name)){var l=c.name,f=(c._cat||c.name).toLowerCase();-1===r.indexOf(l)&&r.push(l),-1===r.indexOf(f)&&r.push(f)}}(i[u])}),r.sort(),G.exports={DRAW_MODES:b,backButtons:p,foreButtons:r}},{"./buttons":726}],728:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../color"),b=h("../../plot_api/plot_template"),p=h("./attributes");G.exports=function(r,u){var c=r.modebar||{},l=b.newContainer(u,"modebar");function f(o,d){return i.coerce(c,l,p,o,d)}f("orientation"),f("bgcolor",m.addOpacity(u.paper_bgcolor,.5));var s=m.contrast(m.rgb(u.modebar.bgcolor));f("color",m.addOpacity(s,.3)),f("activecolor",m.addOpacity(s,.7)),f("uirevision",u.uirevision),f("add"),f("remove")}},{"../../lib":803,"../../plot_api/plot_template":843,"../color":666,"./attributes":725}],729:[function(h,G,X){"use strict";G.exports={moduleType:"component",name:"modebar",layoutAttributes:h("./attributes"),supplyLayoutDefaults:h("./defaults"),manage:h("./manage")}},{"./attributes":725,"./defaults":728,"./manage":730}],730:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axis_ids"),m=h("../../traces/scatter/subtypes"),b=h("../../registry"),p=h("../fx/helpers").isUnifiedHover,r=h("./modebar"),u=h("./buttons"),c=h("./constants").DRAW_MODES;G.exports=function(l){var f=l._fullLayout,s=l._context,o=f._modeBar;if(s.displayModeBar||s.watermark){if(!Array.isArray(s.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(s.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var d,g=s.modeBarButtons;d=Array.isArray(g)&&g.length?function(y){for(var v=0;v<y.length;v++)for(var _=y[v],w=0;w<_.length;w++){var x=_[w];if("string"==typeof x){if(void 0===u[x])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));y[v][w]=u[x]}}return y}(g):!s.displayModeBar&&s.watermark?[]:function(y){var v=y._fullLayout,_=y._fullData,w=y._context;function x(he,de){if("string"==typeof de){if(de.toLowerCase()===he.toLowerCase())return!0}else if(de.name===he||(de._cat||de.name)===he.toLowerCase())return!0;return!1}var E=v.modebar.add;"string"==typeof E&&(E=[E]);var k=v.modebar.remove;"string"==typeof k&&(k=[k]);var C=w.modeBarButtonsToAdd.concat(E.filter(function(he){for(var de=0;de<w.modeBarButtonsToRemove.length;de++)if(x(he,w.modeBarButtonsToRemove[de]))return!1;return!0})),L=w.modeBarButtonsToRemove.concat(k.filter(function(he){for(var de=0;de<w.modeBarButtonsToAdd.length;de++)if(x(he,w.modeBarButtonsToAdd[de]))return!1;return!0})),P=v._has("cartesian"),A=v._has("gl3d"),I=v._has("geo"),D=v._has("pie"),R=v._has("funnelarea"),S=v._has("gl2d"),N=v._has("ternary"),B=v._has("mapbox"),H=v._has("polar"),Y=v._has("sankey"),Q=function(he){for(var de=i.list({_fullLayout:he},null,!0),be=0;be<de.length;be++)if(!de[be].fixedrange)return!1;return!0}(v),ne=p(v.hovermode),ae=[];function te(he){if(he.length){for(var de=[],be=0;be<he.length;be++){for(var pe=he[be],Te=u[pe],ye=Te.name.toLowerCase(),ke=(Te._cat||Te.name).toLowerCase(),ze=!1,je=0;je<L.length;je++){var Ie=L[je].toLowerCase();if(Ie===ye||Ie===ke){ze=!0;break}}ze||de.push(u[pe])}ae.push(de)}}var K=["toImage"];w.showEditInChartStudio?K.push("editInChartStudio"):w.showSendToCloud&&K.push("sendDataToCloud"),te(K);var q=[],re=[],V=[],W=[];(P||S||D||R||N)+I+A+B+H>1?(re=["toggleHover"],V=["resetViews"]):I?(q=["zoomInGeo","zoomOutGeo"],re=["hoverClosestGeo"],V=["resetGeo"]):A?(re=["hoverClosest3d"],V=["resetCameraDefault3d","resetCameraLastSave3d"]):B?(q=["zoomInMapbox","zoomOutMapbox"],re=["toggleHover"],V=["resetViewMapbox"]):S?re=["hoverClosestGl2d"]:D?re=["hoverClosestPie"]:Y?(re=["hoverClosestCartesian","hoverCompareCartesian"],V=["resetViewSankey"]):re=["toggleHover"],P&&(re=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(he){for(var de=0;de<he.length;de++)if(!b.traceIs(he[de],"noHover"))return!1;return!0}(_)||ne)&&(re=[]),!P&&!S||Q||(q=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==V[0]&&(V=["resetScale2d"])),A?W=["zoom3d","pan3d","orbitRotation","tableRotation"]:(P||S)&&!Q||N?W=["zoom2d","pan2d"]:B||I?W=["pan2d"]:H&&(W=["zoom2d"]),function(he){for(var de=!1,be=0;be<he.length&&!de;be++){var pe=he[be];pe._module&&pe._module.selectPoints&&(b.traceIs(pe,"scatter-like")?(m.hasMarkers(pe)||m.hasText(pe))&&(de=!0):b.traceIs(pe,"box-violin")&&"all"!==pe.boxpoints&&"all"!==pe.points||(de=!0))}return de}(_)&&W.push("select2d","lasso2d");var Z=[],oe=function(he){-1===Z.indexOf(he)&&-1!==re.indexOf(he)&&Z.push(he)};if(Array.isArray(C)){for(var ie=[],ue=0;ue<C.length;ue++){var fe=C[ue];"string"==typeof fe?(fe=fe.toLowerCase(),-1!==c.indexOf(fe)?(v._has("mapbox")||v._has("cartesian"))&&W.push(fe):"togglespikelines"===fe?oe("toggleSpikelines"):"togglehover"===fe?oe("toggleHover"):"hovercompare"===fe?oe("hoverCompareCartesian"):"hoverclosest"===fe?(oe("hoverClosestCartesian"),oe("hoverClosestGeo"),oe("hoverClosest3d"),oe("hoverClosestGl2d"),oe("hoverClosestPie")):"v1hovermode"===fe&&(oe("toggleHover"),oe("hoverClosestCartesian"),oe("hoverCompareCartesian"),oe("hoverClosestGeo"),oe("hoverClosest3d"),oe("hoverClosestGl2d"),oe("hoverClosestPie"))):ie.push(fe)}C=ie}return te(W),te(q.concat(V)),te(Z),function(he,de){if(de.length)if(Array.isArray(de[0]))for(var be=0;be<de.length;be++)he.push(de[be]);else he.push(de);return he}(ae,C)}(l),o?o.update(l,d):f._modeBar=r(l,d)}else o&&(o.destroy(),delete f._modeBar)}},{"../../plots/cartesian/axis_ids":858,"../../registry":931,"../../traces/scatter/subtypes":1243,"../fx/helpers":702,"./buttons":726,"./constants":727,"./modebar":731}],731:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("fast-isnumeric"),b=h("../../lib"),p=h("../../fonts/ploticon"),r=new DOMParser;function u(l){this.container=l.container,this.element=document.createElement("div"),this.update(l.graphInfo,l.buttons),this.container.appendChild(this.element)}var c=u.prototype;c.update=function(l,f){this.graphInfo=l;var s=this.graphInfo._context,o=this.graphInfo._fullLayout,d="modebar-"+o._uid;this.element.setAttribute("id",d),this._uid=d,this.element.className="modebar","hover"===s.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===o.modebar.orientation&&(this.element.className+=" vertical",f=f.reverse());var g=o.modebar,y="hover"===s.displayModeBar?".js-plotly-plot .plotly:hover ":"";b.deleteRelatedStyleRule(d),b.addRelatedStyleRule(d,y+"#"+d+" .modebar-group","background-color: "+g.bgcolor),b.addRelatedStyleRule(d,"#"+d+" .modebar-btn .icon path","fill: "+g.color),b.addRelatedStyleRule(d,"#"+d+" .modebar-btn:hover .icon path","fill: "+g.activecolor),b.addRelatedStyleRule(d,"#"+d+" .modebar-btn.active .icon path","fill: "+g.activecolor);var v=!this.hasButtons(f),_=this.hasLogo!==s.displaylogo,w=this.locale!==s.locale;if(this.locale=s.locale,(v||_||w)&&(this.removeAllButtons(),this.updateButtons(f),s.watermark||s.displaylogo)){var x=this.getLogo();s.watermark&&(x.className=x.className+" watermark"),"v"===o.modebar.orientation?this.element.insertBefore(x,this.element.childNodes[0]):this.element.appendChild(x),this.hasLogo=!0}this.updateActiveButton()},c.updateButtons=function(l){var f=this;this.buttons=l,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(s){var o=f.createGroup();s.forEach(function(d){var g=d.name;if(!g)throw new Error("must provide button 'name' in button config");if(-1!==f.buttonsNames.indexOf(g))throw new Error("button name '"+g+"' is taken");f.buttonsNames.push(g);var y=f.createButton(d);f.buttonElements.push(y),o.appendChild(y)}),f.element.appendChild(o)})},c.createGroup=function(){var l=document.createElement("div");return l.className="modebar-group",l},c.createButton=function(l){var f=this,s=document.createElement("a");s.setAttribute("rel","tooltip"),s.className="modebar-btn";var o=l.title;void 0===o?o=l.name:"function"==typeof o&&(o=o(this.graphInfo)),(o||0===o)&&s.setAttribute("data-title",o),void 0!==l.attr&&s.setAttribute("data-attr",l.attr);var d=l.val;if(void 0!==d&&("function"==typeof d&&(d=d(this.graphInfo)),s.setAttribute("data-val",d)),"function"!=typeof l.click)throw new Error("must provide button 'click' function in button config");s.addEventListener("click",function(y){l.click(f.graphInfo,y),f.updateActiveButton(y.currentTarget)}),s.setAttribute("data-toggle",l.toggle||!1),l.toggle&&i.select(s).classed("active",!0);var g=l.icon;return s.appendChild("function"==typeof g?g():this.createIcon(g||p.question)),s.setAttribute("data-gravity",l.gravity||"n"),s},c.createIcon=function(l){var f,s=m(l.height)?Number(l.height):l.ascent-l.descent,o="http://www.w3.org/2000/svg";if(l.path){(f=document.createElementNS(o,"svg")).setAttribute("viewBox",[0,0,l.width,s].join(" ")),f.setAttribute("class","icon");var d=document.createElementNS(o,"path");d.setAttribute("d",l.path),l.transform?d.setAttribute("transform",l.transform):void 0!==l.ascent&&d.setAttribute("transform","matrix(1 0 0 -1 0 "+l.ascent+")"),f.appendChild(d)}return l.svg&&(f=r.parseFromString(l.svg,"application/xml").childNodes[0]),f.setAttribute("height","1em"),f.setAttribute("width","1em"),f},c.updateActiveButton=function(l){var f=this.graphInfo._fullLayout,s=void 0!==l?l.getAttribute("data-attr"):null;this.buttonElements.forEach(function(o){var d=o.getAttribute("data-val")||!0,g=o.getAttribute("data-attr"),y="true"===o.getAttribute("data-toggle"),v=i.select(o);if(y)g===s&&v.classed("active",!v.classed("active"));else{var _=null===g?g:b.nestedProperty(f,g).get();v.classed("active",_===d)}})},c.hasButtons=function(l){var f=this.buttons;if(!f||l.length!==f.length)return!1;for(var s=0;s<l.length;++s){if(l[s].length!==f[s].length)return!1;for(var o=0;o<l[s].length;o++)if(l[s][o].name!==f[s][o].name)return!1}return!0},c.getLogo=function(){var l=this.createGroup(),f=document.createElement("a");return f.href="https://plotly.com/",f.target="_blank",f.setAttribute("data-title",b._(this.graphInfo,"Produced with Plotly")),f.className="modebar-btn plotlyjsicon modebar-btn--logo",f.appendChild(this.createIcon(p.newplotlylogo)),l.appendChild(f),l},c.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},c.destroy=function(){b.removeElement(this.container.querySelector(".modebar")),b.deleteRelatedStyleRule(this._uid)},G.exports=function(l,f){var s=l._fullLayout,o=new u({graphInfo:l,container:s._modebardiv.node(),buttons:f});return s._privateplot&&i.select(o.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),o}},{"../../fonts/ploticon":782,"../../lib":803,"@plotly/d3":58,"fast-isnumeric":249}],732:[function(h,G,X){"use strict";var i=h("../../plots/font_attributes"),m=h("../color/attributes"),b=(0,h("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});G.exports={visible:{valType:"boolean",editType:"plot"},buttons:b,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:i({editType:"plot"}),bgcolor:{valType:"color",dflt:m.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":843,"../../plots/font_attributes":883,"../color/attributes":665}],733:[function(h,G,X){"use strict";G.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],734:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../color"),b=h("../../plot_api/plot_template"),p=h("../../plots/array_container_defaults"),r=h("./attributes"),u=h("./constants");function c(l,f,s,o){var d=o.calendar;function g(v,_){return i.coerce(l,f,r.buttons,v,_)}if(g("visible")){var y=g("step");"all"!==y&&(!d||"gregorian"===d||"month"!==y&&"year"!==y?g("stepmode"):f.stepmode="backward",g("count")),g("label")}}G.exports=function(l,f,s,o,d){var g=l.rangeselector||{},y=b.newContainer(f,"rangeselector");function v(x,E){return i.coerce(g,y,r,x,E)}if(v("visible",p(g,y,{name:"buttons",handleItemDefaults:c,calendar:d}).length>0)){var _=function(x,E,k){for(var C=k.filter(function(I){return E[I].anchor===x._id}),L=0,P=0;P<C.length;P++){var A=E[C[P]].domain;A&&(L=Math.max(A[1],L))}return[x.domain[0],L+u.yPad]}(f,s,o);v("x",_[0]),v("y",_[1]),i.noneOrAll(l,f,["x","y"]),v("xanchor"),v("yanchor"),i.coerceFont(v,"font",s.font);var w=v("bgcolor");v("activecolor",m.contrast(w,u.lightAmount,u.darkAmount)),v("bordercolor"),v("borderwidth")}}},{"../../lib":803,"../../plot_api/plot_template":843,"../../plots/array_container_defaults":849,"../color":666,"./attributes":732,"./constants":733}],735:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../registry"),b=h("../../plots/plots"),p=h("../color"),r=h("../drawing"),u=h("../../lib"),c=u.strTranslate,l=h("../../lib/svg_text_utils"),f=h("../../plots/cartesian/axis_ids"),s=h("../../constants/alignment"),o=s.LINE_SPACING,d=s.FROM_TL,g=s.FROM_BR,y=h("./constants"),v=h("./get_update_object");function _(E){return E._id}function w(E,k,C){var P,A,L=u.ensureSingle(E,"rect","selector-rect",function(P){P.attr("shape-rendering","crispEdges")});L.attr({rx:y.rx,ry:y.ry}),L.call(p.stroke,k.bordercolor).call(p.fill,(P=k,A=C,A._isActive||A._isHovered?P.activecolor:P.bgcolor)).style("stroke-width",k.borderwidth+"px")}function x(E,k,C,L){var P,A;u.ensureSingle(E,"text","selector-text",function(P){P.attr("text-anchor","middle")}).call(r.font,k.font).text((P=C,A=L._fullLayout._meta,P.label?A?u.templateString(P.label,A):P.label:"all"===P.step?"all":P.count+P.step.charAt(0))).call(function(P){l.convertToTspans(P,L)})}G.exports=function(E){var k=E._fullLayout._infolayer.selectAll(".rangeselector").data(function(C){for(var L=f.list(C,"x",!0),P=[],A=0;A<L.length;A++){var I=L[A];I.rangeselector&&I.rangeselector.visible&&P.push(I)}return P}(E),_);k.enter().append("g").classed("rangeselector",!0),k.exit().remove(),k.style({cursor:"pointer","pointer-events":"all"}),k.each(function(C){var L=i.select(this),P=C,A=P.rangeselector,I=L.selectAll("g.button").data(u.filterVisible(A.buttons));I.enter().append("g").classed("button",!0),I.exit().remove(),I.each(function(D){var R=i.select(this),S=v(P,D);D._isActive=function(N,B,H){if("all"===B.step)return!0===N.autorange;var Y=Object.keys(H);return N.range[0]===H[Y[0]]&&N.range[1]===H[Y[1]]}(P,D,S),R.call(w,A,D),R.call(x,A,D,E),R.on("click",function(){E._dragged||m.call("_guiRelayout",E,S)}),R.on("mouseover",function(){D._isHovered=!0,R.call(w,A,D)}),R.on("mouseout",function(){D._isHovered=!1,R.call(w,A,D)})}),function(D,R,S,N,B){var H=0,Y=0,Q=S.borderwidth;R.each(function(){var re=i.select(this).select(".selector-text"),W=Math.max(S.font.size*o*l.lineCount(re),16)+3;Y=Math.max(Y,W)}),R.each(function(){var re=i.select(this),V=re.select(".selector-rect"),W=re.select(".selector-text"),Z=W.node()&&r.bBox(W.node()).width,oe=S.font.size*o,ie=l.lineCount(W),ue=Math.max(Z+10,y.minButtonWidth);re.attr("transform",c(Q+H,Q)),V.attr({x:0,y:0,width:ue,height:Y}),l.positionText(W,ue/2,Y/2-(ie-1)*oe/2+3),H+=ue+5});var ne=D._fullLayout._size,ae=ne.l+ne.w*S.x,te=ne.t+ne.h*(1-S.y),K="left";u.isRightAnchor(S)&&(ae-=H,K="right"),u.isCenterAnchor(S)&&(ae-=H/2,K="center");var q="top";u.isBottomAnchor(S)&&(te-=Y,q="bottom"),u.isMiddleAnchor(S)&&(te-=Y/2,q="middle"),H=Math.ceil(H),Y=Math.ceil(Y),ae=Math.round(ae),te=Math.round(te),b.autoMargin(D,N+"-range-selector",{x:S.x,y:S.y,l:H*d[K],r:H*g[K],b:Y*g[q],t:Y*d[q]}),B.attr("transform",c(ae,te))}(E,I,A,P._name,L)})}},{"../../constants/alignment":771,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/cartesian/axis_ids":858,"../../plots/plots":917,"../../registry":931,"../color":666,"../drawing":688,"./constants":733,"./get_update_object":736,"@plotly/d3":58}],736:[function(h,G,X){"use strict";var i=h("d3-time"),m=h("../../lib").titleCase;G.exports=function(b,p){var r=b._name,u={};if("all"===p.step)u[r+".autorange"]=!0;else{var c=function(l,f){var s,o=l.range,d=new Date(l.r2l(o[1])),y=i["utc"+m(f.step)],v=f.count;switch(f.stepmode){case"backward":s=l.l2r(+y.offset(d,-v));break;case"todate":var _=y.offset(d,-v);s=l.l2r(+y.ceil(_))}return[s,o[1]]}(b,p);u[r+".range[0]"]=c[0],u[r+".range[1]"]=c[1]}return u}},{"../../lib":803,"d3-time":177}],737:[function(h,G,X){"use strict";G.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:h("./attributes")}}},layoutAttributes:h("./attributes"),handleDefaults:h("./defaults"),draw:h("./draw")}},{"./attributes":732,"./defaults":734,"./draw":735}],738:[function(h,G,X){"use strict";var i=h("../color/attributes");G.exports={bgcolor:{valType:"color",dflt:i.background,editType:"plot"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":665}],739:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axis_ids").list,m=h("../../plots/cartesian/autorange").getAutoRange,b=h("./constants");G.exports=function(p){for(var r=i(p,"x",!0),u=0;u<r.length;u++){var c=r[u],l=c[b.name];l&&l.visible&&l.autorange&&(l._input.autorange=!0,l._input.range=l.range=m(p,c))}}},{"../../plots/cartesian/autorange":853,"../../plots/cartesian/axis_ids":858,"./constants":740}],740:[function(h,G,X){"use strict";G.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],741:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plot_api/plot_template"),b=h("../../plots/cartesian/axis_ids"),p=h("./attributes"),r=h("./oppaxis_attributes");G.exports=function(u,c,l){var f=u[l],s=c[l];if(f.rangeslider||c._requestRangeslider[s._id]){i.isPlainObject(f.rangeslider)||(f.rangeslider={});var o,d,g=f.rangeslider,y=m.newContainer(s,"rangeslider");if(L("visible")){L("bgcolor",c.plot_bgcolor),L("bordercolor"),L("borderwidth"),L("thickness"),L("autorange",!s.isValidRange(g.range)),L("range");var v=c._subplots;if(v)for(var _=v.cartesian.filter(function(A){return A.substr(0,A.indexOf("y"))===b.name2id(l)}).map(function(A){return A.substr(A.indexOf("y"),A.length)}),w=i.simpleMap(_,b.id2name),x=0;x<w.length;x++){var E=w[x];o=g[E]||{},d=m.newContainer(y,E,"yaxis");var k,C=c[E];o.range&&C.isValidRange(o.range)&&(k="fixed"),"match"!==P("rangemode",k)&&P("range",C.range.slice())}y._input=g}}function L(A,I){return i.coerce(g,y,p,A,I)}function P(A,I){return i.coerce(o,d,r,A,I)}}},{"../../lib":803,"../../plot_api/plot_template":843,"../../plots/cartesian/axis_ids":858,"./attributes":738,"./oppaxis_attributes":745}],742:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../registry"),b=h("../../plots/plots"),p=h("../../lib"),r=p.strTranslate,u=h("../drawing"),c=h("../color"),l=h("../titles"),f=h("../../plots/cartesian"),s=h("../../plots/cartesian/axis_ids"),o=h("../dragelement"),d=h("../../lib/setcursor"),g=h("./constants");function y(k,C,L,P){var A=p.ensureSingle(k,"rect",g.bgClassName,function(S){S.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),I=P.borderwidth%2==0?P.borderwidth:P.borderwidth-1,D=-P._offsetShift,R=u.crispRound(C,P.borderwidth);A.attr({width:P._width+I,height:P._height+I,transform:r(D,D),fill:P.bgcolor,stroke:P.bordercolor,"stroke-width":R})}function v(k,C,L,P){p.ensureSingleById(C._fullLayout._topdefs,"clipPath",P._clipId,function(I){I.append("rect").attr({x:0,y:0})}).select("rect").attr({width:P._width,height:P._height})}function _(k,C,L,P){var A,I=C.calcdata,D=k.selectAll("g."+g.rangePlotClassName).data(L._subplotsWith,p.identity);D.enter().append("g").attr("class",function(R){return g.rangePlotClassName+" "+R}).call(u.setClipUrl,P._clipId,C),D.order(),D.exit().remove(),D.each(function(R,S){var N=i.select(this),B=0===S,H=s.getFromId(C,R,"y"),Y=H._name,Q=P[Y],ne={data:[],layout:{xaxis:{type:L.type,domain:[0,1],range:P.range.slice(),calendar:L.calendar},width:P._width,height:P._height,margin:{t:0,b:0,l:0,r:0}},_context:C._context};L.rangebreaks&&(ne.layout.xaxis.rangebreaks=L.rangebreaks),ne.layout[Y]={type:H.type,domain:[0,1],range:"match"!==Q.rangemode?Q.range.slice():H.range.slice(),calendar:H.calendar},H.rangebreaks&&(ne.layout[Y].rangebreaks=H.rangebreaks),b.supplyDefaults(ne);var ae=ne._fullLayout.xaxis,te=ne._fullLayout[Y];ae.clearCalc(),ae.setScale(),te.clearCalc(),te.setScale();var K={id:R,plotgroup:N,xaxis:ae,yaxis:te,isRangePlot:!0};B?A=K:(K.mainplot="xy",K.mainplotinfo=A),f.rangePlot(C,K,function(q,re){for(var V=[],W=0;W<q.length;W++){var Z=q[W],oe=Z[0].trace;oe.xaxis+oe.yaxis===re&&V.push(Z)}return V}(I,R))})}function w(k,C,L,P,A){p.ensureSingle(k,"rect",g.maskMinClassName,function(I){I.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",P._height).call(c.fill,g.maskColor),p.ensureSingle(k,"rect",g.maskMaxClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",P._height).call(c.fill,g.maskColor),"match"!==A.rangemode&&(p.ensureSingle(k,"rect",g.maskMinOppAxisClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",P._width).call(c.fill,g.maskOppAxisColor),p.ensureSingle(k,"rect",g.maskMaxOppAxisClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",P._width).style("border-top",g.maskOppBorder).call(c.fill,g.maskOppAxisColor))}function x(k,C,L,P){C._context.staticPlot||p.ensureSingle(k,"rect",g.slideBoxClassName,function(A){A.attr({y:0,cursor:g.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:P._height,fill:g.slideBoxFill})}function E(k,C,L,P){var A=p.ensureSingle(k,"g",g.grabberMinClassName),I=p.ensureSingle(k,"g",g.grabberMaxClassName),D={x:0,width:g.handleWidth,rx:g.handleRadius,fill:c.background,stroke:c.defaultLine,"stroke-width":g.handleStrokeWidth,"shape-rendering":"crispEdges"},R={y:Math.round(P._height/4),height:Math.round(P._height/2)};p.ensureSingle(A,"rect",g.handleMinClassName,function(N){N.attr(D)}).attr(R),p.ensureSingle(I,"rect",g.handleMaxClassName,function(N){N.attr(D)}).attr(R);var S={width:g.grabAreaWidth,x:0,y:0,fill:g.grabAreaFill,cursor:C._context.staticPlot?void 0:g.grabAreaCursor};p.ensureSingle(A,"rect",g.grabAreaMinClassName,function(N){N.attr(S)}).attr("height",P._height),p.ensureSingle(I,"rect",g.grabAreaMaxClassName,function(N){N.attr(S)}).attr("height",P._height)}G.exports=function(k){for(var C=k._fullLayout,L=C._rangeSliderData,P=0;P<L.length;P++){var A=L[P][g.name];A._clipId=A._id+"-"+C._uid}var I=C._infolayer.selectAll("g."+g.containerClassName).data(L,function(D){return D._name});I.exit().each(function(D){C._topdefs.select("#"+D[g.name]._clipId).remove()}).remove(),0!==L.length&&(I.enter().append("g").classed(g.containerClassName,!0).attr("pointer-events","all"),I.each(function(D){var R=i.select(this),S=D[g.name],N=C[s.id2name(D.anchor)],B=S[s.id2name(D.anchor)];if(S.range){var H,Y=p.simpleMap(S.range,D.r2l),Q=p.simpleMap(D.range,D.r2l);H=Q[0]<Q[1]?[Math.min(Y[0],Q[0]),Math.max(Y[1],Q[1])]:[Math.max(Y[0],Q[0]),Math.min(Y[1],Q[1])],S.range=S._input.range=p.simpleMap(H,D.l2r)}D.cleanRange("rangeslider.range");var ne=C._size,ae=D.domain;S._width=ne.w*(ae[1]-ae[0]);var te=Math.round(ne.l+ne.w*ae[0]),K=Math.round(ne.t+ne.h*(1-D._counterDomainMin)+("bottom"===D.side?D._depth:0)+S._offsetShift+g.extraPad);R.attr("transform",r(te,K)),S._rl=p.simpleMap(S.range,D.r2l);var q=S._rl[0],re=S._rl[1],V=re-q;if(S.p2d=function(be){return be/S._width*V+q},S.d2p=function(be){return(be-q)/V*S._width},D.rangebreaks){var W=D.locateBreaks(q,re);if(W.length){var Z,oe,ie=0;for(Z=0;Z<W.length;Z++)ie+=(oe=W[Z]).max-oe.min;var ue=S._width/(re-q-ie),fe=[-ue*q];for(Z=0;Z<W.length;Z++)fe.push(fe[fe.length-1]-ue*((oe=W[Z]).max-oe.min));for(S.d2p=function(be){for(var pe=fe[0],Te=0;Te<W.length;Te++){var ye=W[Te];if(be>=ye.max)pe=fe[Te+1];else if(be<ye.min)break}return pe+ue*be},Z=0;Z<W.length;Z++)(oe=W[Z]).pmin=S.d2p(oe.min),oe.pmax=S.d2p(oe.max);S.p2d=function(be){for(var pe=fe[0],Te=0;Te<W.length;Te++){var ye=W[Te];if(be>=ye.pmax)pe=fe[Te+1];else if(be<ye.pmin)break}return(be-pe)/ue}}}if("match"!==B.rangemode){var he=N.r2l(B.range[0]),de=N.r2l(B.range[1])-he;S.d2pOppAxis=function(be){return(be-he)/de*S._height}}R.call(y,k,D,S).call(v,k,D,S).call(_,k,D,S).call(w,k,D,S,B).call(x,k,D,S).call(E,k,D,S),function(be,pe,Te,ye){if(!pe._context.staticPlot){var ke=be.select("rect."+g.slideBoxClassName).node(),ze=be.select("rect."+g.grabAreaMinClassName).node(),je=be.select("rect."+g.grabAreaMaxClassName).node();be.on("mousedown",Ie),be.on("touchstart",Ie)}function Ie(){var Ce=i.event,_e=Ce.target,we=Ce.clientX||Ce.touches[0].clientX,Se=we-be.node().getBoundingClientRect().left,Oe=ye.d2p(Te._rl[0]),Be=ye.d2p(Te._rl[1]),He=o.coverSlip();function Xe(et){var qe,Ye,ot,at=+(et.clientX||et.touches[0].clientX)-we;switch(_e){case ke:ot="ew-resize",qe=Oe+at,Ye=Be+at;break;case ze:ot="col-resize",qe=Oe+at,Ye=Be;break;case je:ot="col-resize",qe=Oe,Ye=Be+at;break;default:ot="ew-resize",qe=Se,Ye=Se+at}if(Ye<qe){var ct=Ye;Ye=qe,qe=ct}ye._pixelMin=qe,ye._pixelMax=Ye,d(i.select(He),ot),function(_t,xt,Ht,At){function ht(gn){return Ht.l2r(p.constrain(gn,At._rl[0],At._rl[1]))}var st=ht(At.p2d(At._pixelMin)),Bt=ht(At.p2d(At._pixelMax));window.requestAnimationFrame(function(){m.call("_guiRelayout",xt,Ht._name+".range",[st,Bt])})}(0,pe,Te,ye)}function nt(){He.removeEventListener("mousemove",Xe),He.removeEventListener("mouseup",nt),this.removeEventListener("touchmove",Xe),this.removeEventListener("touchend",nt),p.removeElement(He)}this.addEventListener("touchmove",Xe),this.addEventListener("touchend",nt),He.addEventListener("mousemove",Xe),He.addEventListener("mouseup",nt)}}(R,k,D,S),function(be,pe,Te,ye,ke,ze){var je=g.handleWidth/2;function Ie(nt){return p.constrain(nt,0,ye._width)}function Ce(nt){return p.constrain(nt,0,ye._height)}function _e(nt){return p.constrain(nt,-je,ye._width+je)}var we=Ie(ye.d2p(Te._rl[0])),Se=Ie(ye.d2p(Te._rl[1]));if(be.select("rect."+g.slideBoxClassName).attr("x",we).attr("width",Se-we),be.select("rect."+g.maskMinClassName).attr("width",we),be.select("rect."+g.maskMaxClassName).attr("x",Se).attr("width",ye._width-Se),"match"!==ze.rangemode){var Oe=ye._height-Ce(ye.d2pOppAxis(ke._rl[1])),Be=ye._height-Ce(ye.d2pOppAxis(ke._rl[0]));be.select("rect."+g.maskMinOppAxisClassName).attr("x",we).attr("height",Oe).attr("width",Se-we),be.select("rect."+g.maskMaxOppAxisClassName).attr("x",we).attr("y",Be).attr("height",ye._height-Be).attr("width",Se-we),be.select("rect."+g.slideBoxClassName).attr("y",Oe).attr("height",Be-Oe)}var He=Math.round(_e(we-je))-.5,Xe=Math.round(_e(Se-je))+.5;be.select("g."+g.grabberMinClassName).attr("transform",r(He,.5)),be.select("g."+g.grabberMaxClassName).attr("transform",r(Xe,.5))}(R,0,D,S,N,B),"bottom"===D.side&&l.draw(k,D._id+"title",{propContainer:D,propName:D._name+".title",placeholder:C._dfltTitle.x,attributes:{x:D._offset+D._length/2,y:K+S._height+S._offsetShift+10+1.5*D.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":803,"../../lib/setcursor":824,"../../plots/cartesian":868,"../../plots/cartesian/axis_ids":858,"../../plots/plots":917,"../../registry":931,"../color":666,"../dragelement":685,"../drawing":688,"../titles":764,"./constants":740,"@plotly/d3":58}],743:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axis_ids"),m=h("../../lib/svg_text_utils"),b=h("./constants"),p=h("../../constants/alignment").LINE_SPACING,r=b.name;function u(c){var l=c&&c[r];return l&&l.visible}X.isVisible=u,X.makeData=function(c){var l=i.list({_fullLayout:c},"x",!0),f=c.margin,s=[];if(!c._has("gl2d"))for(var o=0;o<l.length;o++){var d=l[o];if(u(d)){s.push(d);var g=d[r];g._id=r+d._id,g._height=(c.height-f.b-f.t)*g.thickness,g._offsetShift=Math.floor(g.borderwidth/2)}}c._rangeSliderData=s},X.autoMarginOpts=function(c,l){var f=c._fullLayout,s=l[r],o=l._id.charAt(0),d=0,g=0;return"bottom"===l.side&&(d=l._depth,l.title.text!==f._dfltTitle[o]&&(g=1.5*l.title.font.size+10+s._offsetShift,g+=(l.title.text.match(m.BR_TAG_ALL)||[]).length*l.title.font.size*p)),{x:0,y:l._counterDomainMin,l:0,r:0,t:0,b:s._height+d+Math.max(f.margin.b,g),pad:b.extraPad+2*s._offsetShift}}},{"../../constants/alignment":771,"../../lib/svg_text_utils":829,"../../plots/cartesian/axis_ids":858,"./constants":740}],744:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./attributes"),b=h("./oppaxis_attributes"),p=h("./helpers");G.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:i.extendFlat({},m,{yaxis:b})}}},layoutAttributes:h("./attributes"),handleDefaults:h("./defaults"),calcAutorange:h("./calc_autorange"),draw:h("./draw"),isVisible:p.isVisible,makeData:p.makeData,autoMarginOpts:p.autoMarginOpts}},{"../../lib":803,"./attributes":738,"./calc_autorange":739,"./defaults":741,"./draw":742,"./helpers":743,"./oppaxis_attributes":745}],745:[function(h,G,X){"use strict";G.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],746:[function(h,G,X){"use strict";var i=h("../annotations/attributes"),m=h("../../traces/scatter/attributes").line,b=h("../drawing/attributes").dash,p=h("../../lib/extend").extendFlat,r=h("../../plot_api/plot_template").templatedArray;h("../../constants/axis_placeable_objects"),G.exports=r("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:p({},i.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:p({},i.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:p({},m.color,{editType:"arraydraw"}),width:p({},m.width,{editType:"calc+arraydraw"}),dash:p({},b,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":772,"../../lib/extend":793,"../../plot_api/plot_template":843,"../../traces/scatter/attributes":1218,"../annotations/attributes":649,"../drawing/attributes":687}],747:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/cartesian/axes"),b=h("./constants"),p=h("./helpers");function r(f){return c(f.line.width,f.xsizemode,f.x0,f.x1,f.path,!1)}function u(f){return c(f.line.width,f.ysizemode,f.y0,f.y1,f.path,!0)}function c(f,s,o,d,g,y){var v=f/2,_=y;if("pixel"===s){var w=g?p.extractPathCoords(g,y?b.paramIsY:b.paramIsX):[o,d],x=i.aggNums(Math.max,null,w),E=i.aggNums(Math.min,null,w),k=E<0?Math.abs(E)+v:v,C=x>0?x+v:v;return{ppad:v,ppadplus:_?k:C,ppadminus:_?C:k}}return{ppad:v}}function l(f,s,o,d,g){var y="category"===f.type||"multicategory"===f.type?f.r2c:f.d2c;if(void 0!==s)return[y(s),y(o)];if(d){var v,_,w,x,E=1/0,k=-1/0,C=d.match(b.segmentRE);for("date"===f.type&&(y=p.decodeDate(y)),v=0;v<C.length;v++)void 0!==(_=g[C[v].charAt(0)].drawn)&&(!(w=C[v].substr(1).match(b.paramRE))||w.length<_||((x=y(w[_]))<E&&(E=x),x>k&&(k=x)));return k>=E?[E,k]:void 0}}G.exports=function(f){var o=i.filterVisible(f._fullLayout.shapes);if(o.length&&f._fullData.length)for(var d=0;d<o.length;d++){var g,y,v=o[d];v._extremes={};var _=m.getRefType(v.xref),w=m.getRefType(v.yref);if("paper"!==v.xref&&"domain"!==_){var x="pixel"===v.xsizemode?v.xanchor:v.x0,E="pixel"===v.xsizemode?v.xanchor:v.x1;(y=l(g=m.getFromId(f,v.xref),x,E,v.path,b.paramIsX))&&(v._extremes[g._id]=m.findExtremes(g,y,r(v)))}if("paper"!==v.yref&&"domain"!==w){var k="pixel"===v.ysizemode?v.yanchor:v.y0,C="pixel"===v.ysizemode?v.yanchor:v.y1;(y=l(g=m.getFromId(f,v.yref),k,C,v.path,b.paramIsY))&&(v._extremes[g._id]=m.findExtremes(g,y,u(v)))}}}},{"../../lib":803,"../../plots/cartesian/axes":854,"./constants":748,"./helpers":757}],748:[function(h,G,X){"use strict";G.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],749:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/cartesian/axes"),b=h("../../plots/array_container_defaults"),p=h("./attributes"),r=h("./helpers");function u(c,l,f){function s(B,H){return i.coerce(c,l,p,B,H)}if(s("visible")){var o=s("path"),d=s("type",o?"path":"rect");"path"!==l.type&&delete l.path,s("editable"),s("layer"),s("opacity"),s("fillcolor"),s("fillrule"),s("line.width")&&(s("line.color"),s("line.dash"));for(var g=s("xsizemode"),y=s("ysizemode"),v=["x","y"],_=0;_<2;_++){var w,x,E,k=v[_],C=k+"anchor",L="x"===k?g:y,P={_fullLayout:f},A=m.coerceRef(c,l,P,k,void 0,"paper");if("range"===m.getRefType(A)?((w=m.getFromId(P,A))._shapeIndices.push(l._index),E=r.rangeToShapePosition(w),x=r.shapePositionToRange(w)):x=E=i.identity,"path"!==d){var I=k+"0",D=k+"1",R=c[I],S=c[D];c[I]=x(c[I],!0),c[D]=x(c[D],!0),"pixel"===L?(s(I,0),s(D,10)):(m.coercePosition(l,P,s,A,I,.25),m.coercePosition(l,P,s,A,D,.75)),l[I]=E(l[I]),l[D]=E(l[D]),c[I]=R,c[D]=S}if("pixel"===L){var N=c[C];c[C]=x(c[C],!0),m.coercePosition(l,P,s,A,C,.25),l[C]=E(l[C]),c[C]=N}}"path"===d?s("path"):i.noneOrAll(c,l,["x0","x1","y0","y1"])}}G.exports=function(c,l){b(c,l,{name:"shapes",handleItemDefaults:u})}},{"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/cartesian/axes":854,"./attributes":746,"./helpers":757}],750:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../lib"),b=h("../../plots/cartesian/axes"),p=h("./draw_newshape/helpers").readPaths,r=h("./draw_newshape/display_outlines"),u=h("../../plots/cartesian/handle_outline").clearOutlineControllers,c=h("../color"),l=h("../drawing"),f=h("../../plot_api/plot_template").arrayEditor,s=h("../dragelement"),o=h("../../lib/setcursor"),d=h("./constants"),g=h("./helpers");function y(L){var P=L._fullLayout;for(var A in P._shapeUpperLayer.selectAll("path").remove(),P._shapeLowerLayer.selectAll("path").remove(),P._plots){var I=P._plots[A].shapelayer;I&&I.selectAll("path").remove()}for(var D=0;D<P.shapes.length;D++)P.shapes[D].visible&&w(L,D)}function v(L){return!!L._fullLayout._drawing}function _(L){return!L._context.edits.shapePosition}function w(L,P){L._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+P+'"]').remove();var A=g.makeOptionsAndPlotinfo(L,P),I=A.options,D=A.plotinfo;I._input&&!1!==I.visible&&function(S){var N=E(L,I),B={"data-index":P,"fill-rule":I.fillrule,d:N},H=I.opacity,Y=I.fillcolor,Q=I.line.width?I.line.color:"rgba(0,0,0,0)",ne=I.line.width,ae=I.line.dash;ne||!0!==I.editable||(ne=5,ae="solid");var te="Z"!==N[N.length-1],K=_(L)&&I.editable&&L._fullLayout._activeShapeIndex===P;K&&(Y=te?"rgba(0,0,0,0)":L._fullLayout.activeshape.fillcolor,H=L._fullLayout.activeshape.opacity);var q,re=S.append("path").attr(B).style("opacity",H).call(c.stroke,Q).call(c.fill,Y).call(l.dashLine,ae,ne);if(x(re,L,I),(K||L._context.edits.shapePosition)&&(q=f(L.layout,"shapes",I)),K){re.style({cursor:"move"});var V={element:re.node(),plotinfo:D,gd:L,editHelpers:q,isActiveShape:!0},W=p(N,L);r(W,re,V)}else L._context.edits.shapePosition?function(Z,oe,ie,ue,fe,he){var de,be,pe,Te,ye,ke,ze,je,Ie,Ce,_e,we,Se,Oe,Be,He,Xe="pixel"===ie.xsizemode,nt="pixel"===ie.ysizemode,et="line"===ie.type,qe="path"===ie.type,Ye=he.modifyItem,ot=b.getFromId(Z,ie.xref),at=b.getRefType(ie.xref),ct=b.getFromId(Z,ie.yref),_t=b.getRefType(ie.yref),xt=g.getDataToPixel(Z,ot,!1,at),Ht=g.getDataToPixel(Z,ct,!0,_t),At=g.getPixelToData(Z,ot,!1,at),ht=g.getPixelToData(Z,ct,!0,_t),st=et?function(){var Ge=Math.max(ie.line.width,10),Pe=fe.append("g").attr("data-index",ue);Pe.append("path").attr("d",oe.attr("d")).style({cursor:"move","stroke-width":Ge,"stroke-opacity":"0"});var Ee={"fill-opacity":"0"},Ne=Math.max(Ge/2,10);return Pe.append("circle").attr({"data-line-point":"start-point",cx:Xe?xt(ie.xanchor)+ie.x0:xt(ie.x0),cy:nt?Ht(ie.yanchor)-ie.y0:Ht(ie.y0),r:Ne}).style(Ee).classed("cursor-grab",!0),Pe.append("circle").attr({"data-line-point":"end-point",cx:Xe?xt(ie.xanchor)+ie.x1:xt(ie.x1),cy:nt?Ht(ie.yanchor)-ie.y1:Ht(ie.y1),r:Ne}).style(Ee).classed("cursor-grab",!0),Pe}():oe,Bt={element:st.node(),gd:Z,prepFn:function(Ge){var Pe,Ee,Ne,Ve,Ke,bt,gt,pt;v(Z)||(Xe&&(ye=xt(ie.xanchor)),nt&&(ke=Ht(ie.yanchor)),"path"===ie.type?Be=ie.path:(de=Xe?ie.x0:xt(ie.x0),be=nt?ie.y0:Ht(ie.y0),pe=Xe?ie.x1:xt(ie.x1),Te=nt?ie.y1:Ht(ie.y1)),de<pe?(Ie=de,Se="x0",Ce=pe,Oe="x1"):(Ie=pe,Se="x1",Ce=de,Oe="x0"),!nt&&be<Te||nt&&be>Te?(ze=be,_e="y0",je=Te,we="y1"):(ze=Te,_e="y1",je=be,we="y0"),gn(Ge),it(fe,ie),Pe=oe,Ke=(Ee=ie).yref,bt=b.getFromId(Ne=Z,Ve=Ee.xref),gt=b.getFromId(Ne,Ke),pt="","paper"===Ve||bt.autorange||(pt+=Ve),"paper"===Ke||gt.autorange||(pt+=Ke),l.setClipUrl(Pe,pt?"clip"+Ne._fullLayout._uid+pt:null,Ne),Bt.moveFn="move"===He?hn:We,Bt.altKey=Ge.altKey)},doneFn:function(){v(Z)||(o(oe),qt(fe),x(oe,Z,ie),i.call("_guiRelayout",Z,he.getUpdateObj()))},clickFn:function(){v(Z)||qt(fe)}};function gn(Ge){if(v(Z))He=null;else if(et)He="path"===Ge.target.tagName?"move":"start-point"===Ge.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Pe=Bt.element.getBoundingClientRect(),Ee=Pe.right-Pe.left,Ne=Pe.bottom-Pe.top,bt=!qe&&Ee>10&&Ne>10&&!Ge.shiftKey?s.getCursor((Ge.clientX-Pe.left)/Ee,1-(Ge.clientY-Pe.top)/Ne):"move";o(oe,bt),He=bt.split("-")[0]}}function hn(Ge,Pe){if("path"===ie.type){var Ee=function(Ke){return Ke},Ne=Ee,Ve=Ee;Xe?Ye("xanchor",ie.xanchor=At(ye+Ge)):(Ne=function(Ke){return At(xt(Ke)+Ge)},ot&&"date"===ot.type&&(Ne=g.encodeDate(Ne))),nt?Ye("yanchor",ie.yanchor=ht(ke+Pe)):(Ve=function(Ke){return ht(Ht(Ke)+Pe)},ct&&"date"===ct.type&&(Ve=g.encodeDate(Ve))),Ye("path",ie.path=k(Be,Ne,Ve))}else Xe?Ye("xanchor",ie.xanchor=At(ye+Ge)):(Ye("x0",ie.x0=At(de+Ge)),Ye("x1",ie.x1=At(pe+Ge))),nt?Ye("yanchor",ie.yanchor=ht(ke+Pe)):(Ye("y0",ie.y0=ht(be+Pe)),Ye("y1",ie.y1=ht(Te+Pe)));oe.attr("d",E(Z,ie)),it(fe,ie)}function We(Ge,Pe){if(qe){var Ee=function(Ue){return Ue},Ne=Ee,Ve=Ee;Xe?Ye("xanchor",ie.xanchor=At(ye+Ge)):(Ne=function(Ue){return At(xt(Ue)+Ge)},ot&&"date"===ot.type&&(Ne=g.encodeDate(Ne))),nt?Ye("yanchor",ie.yanchor=ht(ke+Pe)):(Ve=function(Ue){return ht(Ht(Ue)+Pe)},ct&&"date"===ct.type&&(Ve=g.encodeDate(Ve))),Ye("path",ie.path=k(Be,Ne,Ve))}else if(et){if("resize-over-start-point"===He){var Ke=de+Ge,bt=nt?be-Pe:be+Pe;Ye("x0",ie.x0=Xe?Ke:At(Ke)),Ye("y0",ie.y0=nt?bt:ht(bt))}else if("resize-over-end-point"===He){var gt=pe+Ge,pt=nt?Te-Pe:Te+Pe;Ye("x1",ie.x1=Xe?gt:At(gt)),Ye("y1",ie.y1=nt?pt:ht(pt))}}else{var St=function(Ue){return-1!==He.indexOf(Ue)},jt=St("n"),Lt=St("s"),Vt=St("w"),mt=St("e"),Wt=jt?ze+Pe:ze,Kt=Lt?je+Pe:je,rn=Vt?Ie+Ge:Ie,Yt=mt?Ce+Ge:Ce;nt&&(jt&&(Wt=ze-Pe),Lt&&(Kt=je-Pe)),(!nt&&Kt-Wt>10||nt&&Wt-Kt>10)&&(Ye(_e,ie[_e]=nt?Wt:ht(Wt)),Ye(we,ie[we]=nt?Kt:ht(Kt))),Yt-rn>10&&(Ye(Se,ie[Se]=Xe?rn:At(rn)),Ye(Oe,ie[Oe]=Xe?Yt:At(Yt)))}oe.attr("d",E(Z,ie)),it(fe,ie)}function it(Ge,Pe){(Xe||nt)&&function(){var Ee="path"!==Pe.type,Ne=Ge.selectAll(".visual-cue").data([0]);Ne.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ve=xt(Xe?Pe.xanchor:m.midRange(Ee?[Pe.x0,Pe.x1]:g.extractPathCoords(Pe.path,d.paramIsX))),Ke=Ht(nt?Pe.yanchor:m.midRange(Ee?[Pe.y0,Pe.y1]:g.extractPathCoords(Pe.path,d.paramIsY)));Ve=g.roundPositionForSharpStrokeRendering(Ve,1),Ke=g.roundPositionForSharpStrokeRendering(Ke,1),Ne.attr("d",Xe&&nt?"M"+(Ve-1-1)+","+(Ke-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":Xe?"M"+(Ve-1-1)+","+(Ke-9-1)+"v18 h2 v-18 Z":"M"+(Ve-9-1)+","+(Ke-1-1)+"h18 v2 h-18 Z")}()}function qt(Ge){Ge.selectAll(".visual-cue").remove()}s.init(Bt),st.node().onmousemove=gn}(L,re,I,P,S,q):!0===I.editable&&re.style("pointer-events",te||c.opacity(Y)*H<=.5?"stroke":"all");re.node().addEventListener("click",function(){return function(Z,oe){if(_(Z)){var ie=+oe.node().getAttribute("data-index");if(ie>=0){if(ie===Z._fullLayout._activeShapeIndex)return void C(Z);Z._fullLayout._activeShapeIndex=ie,Z._fullLayout._deactivateShape=C,y(Z)}}}(L,re)})}("below"!==I.layer?L._fullLayout._shapeUpperLayer:"paper"===I.xref||"paper"===I.yref?L._fullLayout._shapeLowerLayer:D._hadPlotinfo?(D.mainplotinfo||D).shapelayer:L._fullLayout._shapeLowerLayer)}function x(L,P,A){var I=(A.xref+A.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");l.setClipUrl(L,I?"clip"+P._fullLayout._uid+I:null,P)}function E(L,P){var A,I,D,R,S,N,B,H,fe,he,de,pe,Te,ye,ke,Y=P.type,Q=b.getRefType(P.xref),ne=b.getRefType(P.yref),ae=b.getFromId(L,P.xref),te=b.getFromId(L,P.yref),K=L._fullLayout._size;if(ae?"domain"===Q?I=function(fe){return ae._offset+ae._length*fe}:(A=g.shapePositionToRange(ae),I=function(fe){return ae._offset+ae.r2p(A(fe,!0))}):I=function(fe){return K.l+K.w*fe},te?"domain"===ne?R=function(fe){return te._offset+te._length*(1-fe)}:(D=g.shapePositionToRange(te),R=function(fe){return te._offset+te.r2p(D(fe,!0))}):R=function(fe){return K.t+K.h*(1-fe)},"path"===Y)return ae&&"date"===ae.type&&(I=g.decodeDate(I)),te&&"date"===te.type&&(R=g.decodeDate(R)),he=I,de=R,pe=(fe=P).xsizemode,Te=fe.ysizemode,ye=fe.xanchor,ke=fe.yanchor,fe.path.replace(d.segmentRE,function(ze){var je=0,Ie=ze.charAt(0),Ce=d.paramIsX[Ie],_e=d.paramIsY[Ie],we=d.numParams[Ie],Se=ze.substr(1).replace(d.paramRE,function(Oe){return Ce[je]?Oe="pixel"===pe?he(ye)+Number(Oe):he(Oe):_e[je]&&(Oe="pixel"===Te?de(ke)-Number(Oe):de(Oe)),++je>we&&(Oe="X"),Oe});return je>we&&(Se=Se.replace(/[\s,]*X.*/,""),m.log("Ignoring extra params in segment "+ze)),Ie+Se});if("pixel"===P.xsizemode){var q=I(P.xanchor);S=q+P.x0,N=q+P.x1}else S=I(P.x0),N=I(P.x1);if("pixel"===P.ysizemode){var re=R(P.yanchor);B=re-P.y0,H=re-P.y1}else B=R(P.y0),H=R(P.y1);if("line"===Y)return"M"+S+","+B+"L"+N+","+H;if("rect"===Y)return"M"+S+","+B+"H"+N+"V"+H+"H"+S+"Z";var V=(S+N)/2,W=(B+H)/2,Z=Math.abs(V-S),oe=Math.abs(W-B),ie="A"+Z+","+oe,ue=V+Z+","+W;return"M"+ue+ie+" 0 1,1 "+V+","+(W-oe)+ie+" 0 0,1 "+ue+"Z"}function k(L,P,A){return L.replace(d.segmentRE,function(I){var D=0,R=I.charAt(0),S=d.paramIsX[R],N=d.paramIsY[R],B=d.numParams[R];return R+I.substr(1).replace(d.paramRE,function(H){return D>=B||(S[D]?H=P(H):N[D]&&(H=A(H)),D++),H})})}function C(L){_(L)&&L._fullLayout._activeShapeIndex>=0&&(u(L),delete L._fullLayout._activeShapeIndex,y(L))}G.exports={draw:y,drawOne:w,eraseActiveShape:function(L){if(_(L)){u(L);var P=L._fullLayout._activeShapeIndex,A=(L.layout||{}).shapes||[];if(P<A.length){for(var I=[],D=0;D<A.length;D++)D!==P&&I.push(A[D]);delete L._fullLayout._activeShapeIndex,i.call("_guiRelayout",L,{shapes:I})}}}}},{"../../lib":803,"../../lib/setcursor":824,"../../plot_api/plot_template":843,"../../plots/cartesian/axes":854,"../../plots/cartesian/handle_outline":865,"../../registry":931,"../color":666,"../dragelement":685,"../drawing":688,"./constants":748,"./draw_newshape/display_outlines":754,"./draw_newshape/helpers":755,"./helpers":757}],751:[function(h,G,X){"use strict";var i=h("../../drawing/attributes").dash,m=h("../../../lib/extend").extendFlat;G.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:m({},i,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":793,"../../drawing/attributes":687}],752:[function(h,G,X){"use strict";G.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],753:[function(h,G,X){"use strict";var i=h("../../color");G.exports=function(m,b,p){p("newshape.drawdirection"),p("newshape.layer"),p("newshape.fillcolor"),p("newshape.fillrule"),p("newshape.opacity"),p("newshape.line.width")&&(p("newshape.line.color",i.contrast((m||{}).plot_bgcolor||"#FFF")),p("newshape.line.dash")),p("activeshape.fillcolor"),p("activeshape.opacity")}},{"../../color":666}],754:[function(h,G,X){"use strict";var i=h("../../dragelement"),m=h("../../dragelement/helpers").drawMode,b=h("../../../registry"),p=h("./constants"),r=p.i000,u=p.i090,c=p.i180,l=p.i270,f=h("../../../plots/cartesian/handle_outline").clearOutlineControllers,s=h("./helpers"),o=s.pointsShapeRectangle,d=s.pointsShapeEllipse,g=s.writePaths,y=h("./newshapes");G.exports=function v(_,w,x,E){E||(E=0);var k=x.gd;function C(){v(_,w,x,E++),d(_[0])&&L({redrawing:!0})}function L(q){x.isActiveShape=!1;var re=y(w,x);Object.keys(re).length&&b.call((q||{}).redrawing?"relayout":"_guiRelayout",k,re)}var P,A,I,D,R,S=x.isActiveShape,N=k._fullLayout._zoomlayer;function H(q){I=+q.srcElement.getAttribute("data-i"),D=+q.srcElement.getAttribute("data-j"),P[I][D].moveFn=Y}function Y(q,re){if(_.length){var V=R[I][D][1],W=R[I][D][2],Z=_[I],oe=Z.length;if(o(Z)){for(var ie=0;ie<oe;ie++)if(ie!==D){var ue=Z[ie];ue[1]===Z[D][1]&&(ue[1]=V+q),ue[2]===Z[D][2]&&(ue[2]=W+re)}if(Z[D][1]=V+q,Z[D][2]=W+re,!o(Z))for(var fe=0;fe<oe;fe++)for(var he=0;he<Z[fe].length;he++)Z[fe][he]=R[I][fe][he]}else Z[D][1]=V+q,Z[D][2]=W+re;C()}}function Q(){L()}function ne(q,re){if(2===q){I=+re.srcElement.getAttribute("data-i"),D=+re.srcElement.getAttribute("data-j");var V=_[I];o(V)||d(V)||function(){if(_.length&&_[I]&&_[I].length){for(var W=[],Z=0;Z<_[I].length;Z++)Z!==D&&W.push(_[I][Z]);W.length>1&&(2!==W.length||"Z"!==W[1][0])&&(0===D&&(W[0][0]="M"),_[I]=W,C(),L())}}()}}function ae(q,re){(function(V,W){if(_.length)for(var Z=0;Z<_.length;Z++)for(var oe=0;oe<_[Z].length;oe++)for(var ie=0;ie+2<_[Z][oe].length;ie+=2)_[Z][oe][ie+1]=R[Z][oe][ie+1]+V,_[Z][oe][ie+2]=R[Z][oe][ie+2]+W})(q,re),C()}m(x.dragmode)?k._fullLayout._drawing=!0:k._fullLayout._activeShapeIndex>=0&&f(k),w.attr("d",g(_)),S&&!E&&(R=function(q,re){for(var V=0;V<re.length;V++){var W=re[V];q[V]=[];for(var Z=0;Z<W.length;Z++){q[V][Z]=[];for(var oe=0;oe<W[Z].length;oe++)q[V][Z][oe]=W[Z][oe]}}return q}([],_),function(q){P=[];for(var re=0;re<_.length;re++){var V=_[re],W=!o(V)&&d(V);P[re]=[];for(var Z=0;Z<V.length;Z++)if("Z"!==V[Z][0]&&(!W||Z===r||Z===u||Z===c||Z===l)){var oe=V[Z][1],ie=V[Z][2],ue=q.append("circle").classed("cursor-grab",!0).attr("data-i",re).attr("data-j",Z).attr("cx",oe).attr("cy",ie).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});P[re][Z]={element:ue.node(),gd:k,prepFn:H,doneFn:Q,clickFn:ne},i.init(P[re][Z])}}}(N.append("g").attr("class","outline-controllers")),A=[],_.length&&(A[0]={element:w[0][0],gd:k,prepFn:function(q){(I=+q.srcElement.getAttribute("data-i"))||(I=0),A[I].moveFn=ae},doneFn:function(){L()}},i.init(A[0])))}},{"../../../plots/cartesian/handle_outline":865,"../../../registry":931,"../../dragelement":685,"../../dragelement/helpers":684,"./constants":752,"./helpers":755,"./newshapes":756}],755:[function(h,G,X){"use strict";var i=h("parse-svg-path"),m=h("./constants"),b=m.CIRCLE_SIDES,p=m.SQRT2,r=h("../../../plots/cartesian/helpers"),u=r.p2r,c=r.r2p,l=[0,3,4,5,6,1,2],f=[0,3,4,1,2];function s(d,g){return Math.abs(d-g)<=1e-6}function o(d,g){var y=g[1]-d[1],v=g[2]-d[2];return Math.sqrt(y*y+v*v)}X.writePaths=function(d){var g=d.length;if(!g)return"M0,0Z";for(var y="",v=0;v<g;v++)for(var _=d[v].length,w=0;w<_;w++){var x=d[v][w][0];if("Z"===x)y+="Z";else for(var E=d[v][w].length,k=0;k<E;k++){var C=k;"Q"===x||"S"===x?C=f[k]:"C"===x&&(C=l[k]),y+=d[v][w][C],k>0&&k<E-1&&(y+=",")}}return y},X.readPaths=function(d,g,y,v){var _,w,x,E=i(d),k=[],C=-1,L=0,P=0,A=function(){w=L,x=P};A();for(var I=0;I<E.length;I++){var B=[],H=E[I][0],Y=H;switch(H){case"M":k[++C]=[],B.push([Y,L=+E[I][1],P=+E[I][2]]),A();break;case"Q":case"S":B.push([Y,L=+E[I][3],P=+E[I][4],+E[I][1],+E[I][2]]);break;case"C":B.push([Y,L=+E[I][5],P=+E[I][6],+E[I][1],+E[I][2],+E[I][3],+E[I][4]]);break;case"T":case"L":B.push([Y,L=+E[I][1],P=+E[I][2]]);break;case"H":B.push([Y="L",L=+E[I][1],P]);break;case"V":B.push([Y="L",L,P=+E[I][1]]);break;case"A":Y="L";var Q=+E[I][1],ne=+E[I][2];+E[I][4]||(Q=-Q,ne=-ne);var ae=L-Q,te=P;for(_=1;_<=b/2;_++){var K=2*Math.PI*_/b;B.push([Y,ae+Q*Math.cos(K),te+ne*Math.sin(K)])}break;case"Z":L===w&&P===x||B.push([Y,L=w,P=x])}for(var q=(y||{}).domain,re=g._fullLayout._size,V=y&&"pixel"===y.xsizemode,W=y&&"pixel"===y.ysizemode,Z=!1===v,oe=0;oe<B.length;oe++){for(_=0;_+2<7;_+=2){var ie=B[oe][_+1],ue=B[oe][_+2];void 0!==ie&&void 0!==ue&&(L=ie,P=ue,y&&(y.xaxis&&y.xaxis.p2r?(Z&&(ie-=y.xaxis._offset),ie=V?c(y.xaxis,y.xanchor)+ie:u(y.xaxis,ie)):(Z&&(ie-=re.l),q?ie=q.x[0]+ie/re.w:ie/=re.w),y.yaxis&&y.yaxis.p2r?(Z&&(ue-=y.yaxis._offset),ue=W?c(y.yaxis,y.yanchor)-ue:u(y.yaxis,ue)):(Z&&(ue-=re.t),ue=q?q.y[1]-ue/re.h:1-ue/re.h)),B[oe][_+1]=ie,B[oe][_+2]=ue)}k[C].push(B[oe].slice())}}return k},X.pointsShapeRectangle=function(d){if(5!==d.length)return!1;for(var g=1;g<3;g++)if(!s(d[0][g]-d[1][g],d[3][g]-d[2][g])||!s(d[0][g]-d[3][g],d[1][g]-d[2][g]))return!1;return!(!s(d[0][1],d[1][1])&&!s(d[0][1],d[3][1])||!(o(d[0],d[1])*o(d[0],d[3])))},X.pointsShapeEllipse=function(d){var g=d.length;if(g!==b+1)return!1;g=b;for(var y=0;y<g;y++){var v=(2*g-y)%g,_=(g/2+v)%g;if(!s(o(d[y],d[(g/2+y)%g]),o(d[v],d[_])))return!1}return!0},X.handleEllipse=function(d,g,y){if(!d)return[g,y];var v=X.ellipseOver({x0:g[0],y0:g[1],x1:y[0],y1:y[1]}),_=(v.x1+v.x0)/2,w=(v.y1+v.y0)/2,x=(v.x1-v.x0)/2,E=(v.y1-v.y0)/2;x||(x=E/=p),E||(E=x/=p);for(var k=[],C=0;C<b;C++){var L=2*C*Math.PI/b;k.push([_+x*Math.cos(L),w+E*Math.sin(L)])}return k},X.ellipseOver=function(d){var g=d.x0,y=d.y0,v=d.x1,_=d.y1,w=v-g,x=_-y,E=((g-=w)+v)/2,k=((y-=x)+_)/2;return{x0:E-(w*=p),y0:k-(x*=p),x1:E+w,y1:k+x}}},{"../../../plots/cartesian/helpers":866,"./constants":752,"parse-svg-path":493}],756:[function(h,G,X){"use strict";var i=h("../../dragelement/helpers"),m=i.drawMode,b=i.openMode,p=h("./constants"),r=p.i000,u=p.i090,c=p.i180,l=p.i270,f=p.cos45,s=p.sin45,o=h("../../../plots/cartesian/helpers"),d=o.p2r,g=o.r2p,y=h("../../../plots/cartesian/handle_outline").clearSelect,v=h("./helpers"),_=v.readPaths,w=v.writePaths,x=v.ellipseOver;G.exports=function(E,k){if(E.length){var C=E[0][0];if(C){var L=C.getAttribute("d"),P=k.gd,A=P._fullLayout.newshape,I=k.plotinfo,D=I.xaxis,R=I.yaxis,S=!!I.domain||!I.xaxis,N=!!I.domain||!I.yaxis,B=k.isActiveShape,H=k.dragmode,Y=(P.layout||{}).shapes||[];if(!m(H)&&void 0!==B){var Q=P._fullLayout._activeShapeIndex;if(Q<Y.length)switch(P._fullLayout.shapes[Q].type){case"rect":H="drawrect";break;case"circle":H="drawcircle";break;case"line":H="drawline";break;case"path":var ne=Y[Q].path||"";H="Z"===ne[ne.length-1]?"drawclosedpath":"drawopenpath"}}var ae,te=b(H),K=_(L,P,I,B),q={editable:!0,xref:S?"paper":D._id,yref:N?"paper":R._id,layer:A.layer,opacity:A.opacity,line:{color:A.line.color,width:A.line.width,dash:A.line.dash}};if(te||(q.fillcolor=A.fillcolor,q.fillrule=A.fillrule),1===K.length&&(ae=K[0]),ae&&"drawrect"===H)q.type="rect",q.x0=ae[0][1],q.y0=ae[0][2],q.x1=ae[2][1],q.y1=ae[2][2];else if(ae&&"drawline"===H)q.type="line",q.x0=ae[0][1],q.y0=ae[0][2],q.x1=ae[1][1],q.y1=ae[1][2];else if(ae&&"drawcircle"===H){q.type="circle";var re=ae[r][1],V=ae[u][1],W=ae[c][1],Z=ae[l][1],oe=ae[r][2],ie=ae[u][2],ue=ae[c][2],fe=ae[l][2],he=I.xaxis&&("date"===I.xaxis.type||"log"===I.xaxis.type),de=I.yaxis&&("date"===I.yaxis.type||"log"===I.yaxis.type);he&&(re=g(I.xaxis,re),V=g(I.xaxis,V),W=g(I.xaxis,W),Z=g(I.xaxis,Z)),de&&(oe=g(I.yaxis,oe),ie=g(I.yaxis,ie),ue=g(I.yaxis,ue),fe=g(I.yaxis,fe));var be=(V+Z)/2,pe=(oe+ue)/2,Te=x({x0:be,y0:pe,x1:be+(Z-V+W-re)/2*f,y1:pe+(fe-ie+ue-oe)/2*s});he&&(Te.x0=d(I.xaxis,Te.x0),Te.x1=d(I.xaxis,Te.x1)),de&&(Te.y0=d(I.yaxis,Te.y0),Te.y1=d(I.yaxis,Te.y1)),q.x0=Te.x0,q.y0=Te.y0,q.x1=Te.x1,q.y1=Te.y1}else q.type="path",D&&R&&function(_e,we,Se){var Oe="date"===we.type,Be="date"===Se.type;if(!Oe&&!Be)return _e;for(var He=0;He<_e.length;He++)for(var Xe=0;Xe<_e[He].length;Xe++)for(var nt=0;nt+2<_e[He][Xe].length;nt+=2)Oe&&(_e[He][Xe][nt+1]=_e[He][Xe][nt+1].replace(" ","_")),Be&&(_e[He][Xe][nt+2]=_e[He][Xe][nt+2].replace(" ","_"))}(K,D,R),q.path=w(K),ae=null;y(P);for(var ye=k.editHelpers,ke=(ye||{}).modifyItem,ze=[],je=0;je<Y.length;je++){var Ie=P._fullLayout.shapes[je];if(ze[je]=Ie._input,void 0!==B&&je===P._fullLayout._activeShapeIndex){var Ce=q;switch(Ie.type){case"line":case"rect":case"circle":ke("x0",Ce.x0),ke("x1",Ce.x1),ke("y0",Ce.y0),ke("y1",Ce.y1);break;case"path":ke("path",Ce.path)}}}return void 0===B?(ze.push(q),ze):ye?ye.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":865,"../../../plots/cartesian/helpers":866,"../../dragelement/helpers":684,"./constants":752,"./helpers":755}],757:[function(h,G,X){"use strict";var i=h("./constants"),m=h("../../lib");X.rangeToShapePosition=function(b){return"log"===b.type?b.r2d:function(p){return p}},X.shapePositionToRange=function(b){return"log"===b.type?b.d2r:function(p){return p}},X.decodeDate=function(b){return function(p){return p.replace&&(p=p.replace("_"," ")),b(p)}},X.encodeDate=function(b){return function(p){return b(p).replace(" ","_")}},X.extractPathCoords=function(b,p){var r=[];return b.match(i.segmentRE).forEach(function(u){var c=p[u.charAt(0)].drawn;if(void 0!==c){var l=u.substr(1).match(i.paramRE);!l||l.length<c||r.push(m.cleanNumber(l[c]))}}),r},X.getDataToPixel=function(b,p,r,u){var c,l=b._fullLayout._size;if(p)if("domain"===u)c=function(s){return p._length*(r?1-s:s)+p._offset};else{var f=X.shapePositionToRange(p);c=function(s){return p._offset+p.r2p(f(s,!0))},"date"===p.type&&(c=X.decodeDate(c))}else c=r?function(s){return l.t+l.h*(1-s)}:function(s){return l.l+l.w*s};return c},X.getPixelToData=function(b,p,r,u){var c,l=b._fullLayout._size;if(p)if("domain"===u)c=function(s){var o=(s-p._offset)/p._length;return r?1-o:o};else{var f=X.rangeToShapePosition(p);c=function(s){return f(p.p2r(s-p._offset))}}else c=r?function(s){return 1-(s-l.t)/l.h}:function(s){return(s-l.l)/l.w};return c},X.roundPositionForSharpStrokeRendering=function(b,p){var r=1===Math.round(p%2),u=Math.round(b);return r?u+.5:u},X.makeOptionsAndPlotinfo=function(b,p){var r=b._fullLayout.shapes[p]||{},u=b._fullLayout._plots[r.xref+r.yref];return u?u._hadPlotinfo=!0:(u={},r.xref&&"paper"!==r.xref&&(u.xaxis=b._fullLayout[r.xref+"axis"]),r.yref&&"paper"!==r.yref&&(u.yaxis=b._fullLayout[r.yref+"axis"])),u.xsizemode=r.xsizemode,u.ysizemode=r.ysizemode,u.xanchor=r.xanchor,u.yanchor=r.yanchor,{options:r,plotinfo:u}}},{"../../lib":803,"./constants":748}],758:[function(h,G,X){"use strict";var i=h("./draw");G.exports={moduleType:"component",name:"shapes",layoutAttributes:h("./attributes"),supplyLayoutDefaults:h("./defaults"),supplyDrawNewShapeDefaults:h("./draw_newshape/defaults"),includeBasePlot:h("../../plots/cartesian/include_components")("shapes"),calcAutorange:h("./calc_autorange"),draw:i.draw,drawOne:i.drawOne}},{"../../plots/cartesian/include_components":867,"./attributes":746,"./calc_autorange":747,"./defaults":749,"./draw":750,"./draw_newshape/defaults":753}],759:[function(h,G,X){"use strict";var i=h("../../plots/font_attributes"),m=h("../../plots/pad_attributes"),b=h("../../lib/extend").extendDeepAll,p=h("../../plot_api/edit_types").overrideAll,r=h("../../plots/animation_attributes"),u=h("../../plot_api/plot_template").templatedArray,c=h("./constants"),l=u("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});G.exports=p(u("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:l,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:b(m({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:r.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:i({})},font:i({}),activebgcolor:{valType:"color",dflt:c.gripBgActiveColor},bgcolor:{valType:"color",dflt:c.railBgColor},bordercolor:{valType:"color",dflt:c.railBorderColor},borderwidth:{valType:"number",min:0,dflt:c.railBorderWidth},ticklen:{valType:"number",min:0,dflt:c.tickLength},tickcolor:{valType:"color",dflt:c.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:c.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../../plots/animation_attributes":848,"../../plots/font_attributes":883,"../../plots/pad_attributes":916,"./constants":760}],760:[function(h,G,X){"use strict";G.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],761:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/array_container_defaults"),b=h("./attributes"),p=h("./constants").name,r=b.steps;function u(l,f,s){function o(_,w){return i.coerce(l,f,b,_,w)}for(var d=m(l,f,{name:"steps",handleItemDefaults:c}),g=0,y=0;y<d.length;y++)d[y].visible&&g++;if(g<2?f.visible=!1:o("visible")){f._stepCount=g;var v=f._visibleSteps=i.filterVisible(d);(d[o("active")]||{}).visible||(f.active=v[0]._index),o("x"),o("y"),i.noneOrAll(l,f,["x","y"]),o("xanchor"),o("yanchor"),o("len"),o("lenmode"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),i.coerceFont(o,"font",s.font),o("currentvalue.visible")&&(o("currentvalue.xanchor"),o("currentvalue.prefix"),o("currentvalue.suffix"),o("currentvalue.offset"),i.coerceFont(o,"currentvalue.font",f.font)),o("transition.duration"),o("transition.easing"),o("bgcolor"),o("activebgcolor"),o("bordercolor"),o("borderwidth"),o("ticklen"),o("tickwidth"),o("tickcolor"),o("minorticklen")}}function c(l,f){function s(d,g){return i.coerce(l,f,r,d,g)}if("skip"===l.method||Array.isArray(l.args)?s("visible"):f.visible=!1){s("method"),s("args");var o=s("label","step-"+f._index);s("value",o),s("execute")}}G.exports=function(l,f){m(l,f,{name:p,handleItemDefaults:u})}},{"../../lib":803,"../../plots/array_container_defaults":849,"./attributes":759,"./constants":760}],762:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../plots/plots"),b=h("../color"),p=h("../drawing"),r=h("../../lib"),u=r.strTranslate,c=h("../../lib/svg_text_utils"),l=h("../../plot_api/plot_template").arrayEditor,f=h("./constants"),s=h("../../constants/alignment"),o=s.LINE_SPACING,d=s.FROM_TL,g=s.FROM_BR;function y(B){return f.autoMarginIdRoot+B._index}function v(B){return B._index}function _(B,H){var Y=p.tester.selectAll("g."+f.labelGroupClass).data(H._visibleSteps);Y.enter().append("g").classed(f.labelGroupClass,!0);var Q=0,ne=0;Y.each(function(oe){var ie=E(i.select(this),{step:oe},H).node();if(ie){var ue=p.bBox(ie);ne=Math.max(ne,ue.height),Q=Math.max(Q,ue.width)}}),Y.remove();var ae=H._dims={};ae.inputAreaWidth=Math.max(f.railWidth,f.gripHeight);var te=B._fullLayout._size;if(ae.lx=te.l+te.w*H.x,ae.ly=te.t+te.h*(1-H.y),ae.outerLength="fraction"===H.lenmode?Math.round(te.w*H.len):H.len,ae.inputAreaStart=0,ae.inputAreaLength=Math.round(ae.outerLength-H.pad.l-H.pad.r),ae.labelStride=Math.max(1,Math.ceil((Q+f.labelPadding)/((ae.inputAreaLength-2*f.stepInset)/(H._stepCount-1)))),ae.labelHeight=ne,ae.currentValueMaxWidth=0,ae.currentValueHeight=0,ae.currentValueTotalHeight=0,ae.currentValueMaxLines=1,H.currentvalue.visible){var re=p.tester.append("g");Y.each(function(oe){var ie=w(re,H,oe.label),ue=ie.node()&&p.bBox(ie.node())||{width:0,height:0},fe=c.lineCount(ie);ae.currentValueMaxWidth=Math.max(ae.currentValueMaxWidth,Math.ceil(ue.width)),ae.currentValueHeight=Math.max(ae.currentValueHeight,Math.ceil(ue.height)),ae.currentValueMaxLines=Math.max(ae.currentValueMaxLines,fe)}),ae.currentValueTotalHeight=ae.currentValueHeight+H.currentvalue.offset,re.remove()}ae.height=ae.currentValueTotalHeight+f.tickOffset+H.ticklen+f.labelOffset+ae.labelHeight+H.pad.t+H.pad.b;var V="left";r.isRightAnchor(H)&&(ae.lx-=ae.outerLength,V="right"),r.isCenterAnchor(H)&&(ae.lx-=ae.outerLength/2,V="center");var W="top";r.isBottomAnchor(H)&&(ae.ly-=ae.height,W="bottom"),r.isMiddleAnchor(H)&&(ae.ly-=ae.height/2,W="middle"),ae.outerLength=Math.ceil(ae.outerLength),ae.height=Math.ceil(ae.height),ae.lx=Math.round(ae.lx),ae.ly=Math.round(ae.ly);var Z={y:H.y,b:ae.height*g[W],t:ae.height*d[W]};"fraction"===H.lenmode?(Z.l=0,Z.xl=H.x-H.len*d[V],Z.r=0,Z.xr=H.x+H.len*g[V]):(Z.x=H.x,Z.l=ae.outerLength*d[V],Z.r=ae.outerLength*g[V]),m.autoMargin(B,y(H),Z)}function w(B,H,Y){if(H.currentvalue.visible){var Q,ne,ae=H._dims;switch(H.currentvalue.xanchor){case"right":Q=ae.inputAreaLength-f.currentValueInset-ae.currentValueMaxWidth,ne="left";break;case"center":Q=.5*ae.inputAreaLength,ne="middle";break;default:Q=f.currentValueInset,ne="left"}var te=r.ensureSingle(B,"text",f.labelClass,function(Z){Z.attr({"text-anchor":ne,"data-notex":1})}),K=H.currentvalue.prefix?H.currentvalue.prefix:"";if("string"==typeof Y)K+=Y;else{var q=H.steps[H.active].label,re=H._gd._fullLayout._meta;re&&(q=r.templateString(q,re)),K+=q}H.currentvalue.suffix&&(K+=H.currentvalue.suffix),te.call(p.font,H.currentvalue.font).text(K).call(c.convertToTspans,H._gd);var V=c.lineCount(te);return c.positionText(te,Q,(ae.currentValueMaxLines+1-V)*H.currentvalue.font.size*o),te}}function x(B,H,Y){r.ensureSingle(B,"rect",f.gripRectClass,function(Q){Q.call(P,H,B,Y).style("pointer-events","all")}).attr({width:f.gripWidth,height:f.gripHeight,rx:f.gripRadius,ry:f.gripRadius}).call(b.stroke,Y.bordercolor).call(b.fill,Y.bgcolor).style("stroke-width",Y.borderwidth+"px")}function E(B,H,Y){var Q=r.ensureSingle(B,"text",f.labelClass,function(te){te.attr({"text-anchor":"middle","data-notex":1})}),ne=H.step.label,ae=Y._gd._fullLayout._meta;return ae&&(ne=r.templateString(ne,ae)),Q.call(p.font,Y.font).text(ne).call(c.convertToTspans,Y._gd),Q}function k(B,H){var Y=r.ensureSingle(B,"g",f.labelsClass),Q=H._dims,ne=Y.selectAll("g."+f.labelGroupClass).data(Q.labelSteps);ne.enter().append("g").classed(f.labelGroupClass,!0),ne.exit().remove(),ne.each(function(ae){var te=i.select(this);te.call(E,ae,H),p.setTranslate(te,D(H,ae.fraction),f.tickOffset+H.ticklen+H.font.size*o+f.labelOffset+Q.currentValueTotalHeight)})}function C(B,H,Y,Q,ne){var ae=Math.round(Q*(Y._stepCount-1)),te=Y._visibleSteps[ae]._index;te!==Y.active&&L(B,H,Y,te,!0,ne)}function L(B,H,Y,Q,ne,ae){var te=Y.active;Y.active=Q,l(B.layout,f.name,Y).applyUpdate("active",Q);var K=Y.steps[Y.active];H.call(I,Y,ae),H.call(w,Y),B.emit("plotly_sliderchange",{slider:Y,step:Y.steps[Y.active],interaction:ne,previousActive:te}),K&&K.method&&ne&&(H._nextMethod?(H._nextMethod.step=K,H._nextMethod.doCallback=ne,H._nextMethod.doTransition=ae):(H._nextMethod={step:K,doCallback:ne,doTransition:ae},H._nextMethodRaf=window.requestAnimationFrame(function(){var q=H._nextMethod.step;q.method&&(q.execute&&m.executeAPICommand(B,q.method,q.args),H._nextMethod=null,H._nextMethodRaf=null)})))}function P(B,H,Y){var Q=Y.node(),ne=i.select(H);function ae(){return Y.data()[0]}B.on("mousedown",function(){var te=ae();H.emit("plotly_sliderstart",{slider:te});var K=Y.select("."+f.gripRectClass);i.event.stopPropagation(),i.event.preventDefault(),K.call(b.fill,te.activebgcolor);var q=R(te,i.mouse(Q)[0]);C(H,Y,te,q,!0),te._dragging=!0,ne.on("mousemove",function(){var re=ae(),V=R(re,i.mouse(Q)[0]);C(H,Y,re,V,!1)}),ne.on("mouseup",function(){var re=ae();re._dragging=!1,K.call(b.fill,re.bgcolor),ne.on("mouseup",null),ne.on("mousemove",null),H.emit("plotly_sliderend",{slider:re,step:re.steps[re.active]})})})}function A(B,H){var Y=B.selectAll("rect."+f.tickRectClass).data(H._visibleSteps),Q=H._dims;Y.enter().append("rect").classed(f.tickRectClass,!0),Y.exit().remove(),Y.attr({width:H.tickwidth+"px","shape-rendering":"crispEdges"}),Y.each(function(ne,ae){var te=ae%Q.labelStride==0,K=i.select(this);K.attr({height:te?H.ticklen:H.minorticklen}).call(b.fill,H.tickcolor),p.setTranslate(K,D(H,ae/(H._stepCount-1))-.5*H.tickwidth,(te?f.tickOffset:f.minorTickOffset)+Q.currentValueTotalHeight)})}function I(B,H,Y){for(var Q=B.select("rect."+f.gripRectClass),ne=0,ae=0;ae<H._stepCount;ae++)if(H._visibleSteps[ae]._index===H.active){ne=ae;break}var te=D(H,ne/(H._stepCount-1));if(!H._invokingCommand){var K=Q;Y&&H.transition.duration>0&&(K=K.transition().duration(H.transition.duration).ease(H.transition.easing)),K.attr("transform",u(te-.5*f.gripWidth,H._dims.currentValueTotalHeight))}}function D(B,H){var Y=B._dims;return Y.inputAreaStart+f.stepInset+(Y.inputAreaLength-2*f.stepInset)*Math.min(1,Math.max(0,H))}function R(B,H){var Y=B._dims;return Math.min(1,Math.max(0,(H-f.stepInset-Y.inputAreaStart)/(Y.inputAreaLength-2*f.stepInset-2*Y.inputAreaStart)))}function S(B,H,Y){var Q=Y._dims,ne=r.ensureSingle(B,"rect",f.railTouchRectClass,function(ae){ae.call(P,H,B,Y).style("pointer-events","all")});ne.attr({width:Q.inputAreaLength,height:Math.max(Q.inputAreaWidth,f.tickOffset+Y.ticklen+Q.labelHeight)}).call(b.fill,Y.bgcolor).attr("opacity",0),p.setTranslate(ne,0,Q.currentValueTotalHeight)}function N(B,H){var Y=H._dims,Q=Y.inputAreaLength-2*f.railInset,ne=r.ensureSingle(B,"rect",f.railRectClass);ne.attr({width:Q,height:f.railWidth,rx:f.railRadius,ry:f.railRadius,"shape-rendering":"crispEdges"}).call(b.stroke,H.bordercolor).call(b.fill,H.bgcolor).style("stroke-width",H.borderwidth+"px"),p.setTranslate(ne,f.railInset,.5*(Y.inputAreaWidth-f.railWidth)+Y.currentValueTotalHeight)}G.exports=function(B){var H=B._fullLayout,Y=function(q,re){for(var V=q[f.name],W=[],Z=0;Z<V.length;Z++){var oe=V[Z];oe.visible&&(oe._gd=re,W.push(oe))}return W}(H,B),Q=H._infolayer.selectAll("g."+f.containerClassName).data(Y.length>0?[0]:[]);function ne(q){q._commandObserver&&(q._commandObserver.remove(),delete q._commandObserver),m.autoMargin(B,y(q))}if(Q.enter().append("g").classed(f.containerClassName,!0).style("cursor","ew-resize"),Q.exit().each(function(){i.select(this).selectAll("g."+f.groupClassName).each(ne)}).remove(),0!==Y.length){var ae=Q.selectAll("g."+f.groupClassName).data(Y,v);ae.enter().append("g").classed(f.groupClassName,!0),ae.exit().each(ne).remove();for(var te=0;te<Y.length;te++)_(B,Y[te]);ae.each(function(q){var re=i.select(this);(function(V){var W=V._dims;W.labelSteps=[];for(var Z=V._stepCount,oe=0;oe<Z;oe+=W.labelStride)W.labelSteps.push({fraction:oe/(Z-1),step:V._visibleSteps[oe]})})(q),m.manageCommandObserver(B,q,q._visibleSteps,function(V){var W=re.data()[0];W.active!==V.index&&(W._dragging||L(B,re,W,V.index,!1,!0))}),function(V,W,Z){(Z.steps[Z.active]||{}).visible||(Z.active=Z._visibleSteps[0]._index),W.call(w,Z).call(N,Z).call(k,Z).call(A,Z).call(S,V,Z).call(x,V,Z);var oe=Z._dims;p.setTranslate(W,oe.lx+Z.pad.l,oe.ly+Z.pad.t),W.call(I,Z,!1),W.call(w,Z)}(B,i.select(this),q)})}}},{"../../constants/alignment":771,"../../lib":803,"../../lib/svg_text_utils":829,"../../plot_api/plot_template":843,"../../plots/plots":917,"../color":666,"../drawing":688,"./constants":760,"@plotly/d3":58}],763:[function(h,G,X){"use strict";var i=h("./constants");G.exports={moduleType:"component",name:i.name,layoutAttributes:h("./attributes"),supplyLayoutDefaults:h("./defaults"),draw:h("./draw")}},{"./attributes":759,"./constants":760,"./defaults":761,"./draw":762}],764:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("fast-isnumeric"),b=h("../../plots/plots"),p=h("../../registry"),r=h("../../lib"),u=r.strTranslate,c=h("../drawing"),l=h("../color"),f=h("../../lib/svg_text_utils"),s=h("../../constants/interactions"),o=h("../../constants/alignment").OPPOSITE_SIDE,d=/ [XY][0-9]* /;G.exports={draw:function(g,y,v){var _,x=v.propName,E=v.placeholder,k=v.traceIndex,C=v.avoid||{},L=v.attributes,P=v.transform,A=v.containerGroup,I=g._fullLayout,D=1,R=!1,S=v.propContainer.title,N=(S&&S.text?S.text:"").trim(),B=S&&S.font?S.font:{},H=B.family,Y=B.size,Q=B.color;"title.text"===x?_="titleText":-1!==x.indexOf("axis")?_="axisTitleText":x.indexOf(!0)&&(_="colorbarTitleText");var ne=g._context.edits[_];""===N?D=0:N.replace(d," % ")===E.replace(d," % ")&&(D=.2,R=!0,ne||(N="")),v._meta?N=r.templateString(N,v._meta):I._meta&&(N=r.templateString(N,I._meta));var ae=N||ne;A||(A=r.ensureSingle(I._infolayer,"g","g-"+y));var te=A.selectAll("text").data(ae?[0]:[]);if(te.enter().append("text"),te.text(N).attr("class",y),te.exit().remove(),!ae)return A;function K(V){r.syncOrAsync([q,re],V)}function q(V){var W;return P?(W="",P.rotate&&(W+="rotate("+[P.rotate,L.x,L.y]+")"),P.offset&&(W+=u(0,P.offset))):W=null,V.attr("transform",W),V.style({"font-family":H,"font-size":i.round(Y,2)+"px",fill:l.rgb(Q),opacity:D*l.opacity(Q),"font-weight":b.fontWeight}).attr(L).call(f.convertToTspans,g),b.previousPromises(g)}function re(V){var W=i.select(V.node().parentNode);if(C&&C.selection&&C.side&&N){W.attr("transform",null);var Z=o[C.side],oe="left"===C.side||"top"===C.side?-1:1,ie=m(C.pad)?C.pad:2,ue=c.bBox(W.node()),he=C.maxShift||oe*({left:0,top:0,right:I.width,bottom:I.height}[C.side]-ue[C.side]),de=0;if(he<0)de=he;else{var be=C.offsetLeft||0,pe=C.offsetTop||0;ue.left-=be,ue.right-=be,ue.top-=pe,ue.bottom-=pe,C.selection.each(function(){var ye=c.bBox(this);r.bBoxIntersect(ue,ye,ie)&&(de=Math.max(de,oe*(ye[C.side]-ue[Z])+ie))}),de=Math.min(he,de)}if(de>0||he<0){var Te={left:[-de,0],right:[de,0],top:[0,-de],bottom:[0,de]}[C.side];W.attr("transform",u(Te[0],Te[1]))}}}return te.call(K),ne&&(N?te.on(".opacity",null):(D=0,R=!0,te.text(E).on("mouseover.opacity",function(){i.select(this).transition().duration(s.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){i.select(this).transition().duration(s.HIDE_PLACEHOLDER).style("opacity",0)})),te.call(f.makeEditable,{gd:g}).on("edit",function(V){void 0!==k?p.call("_guiRestyle",g,x,V,k):p.call("_guiRelayout",g,x,V)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(K)}).on("input",function(V){this.text(V||" ").call(f.positionText,L.x,L.y)})),te.classed("js-placeholder",R),A}}},{"../../constants/alignment":771,"../../constants/interactions":778,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/plots":917,"../../registry":931,"../color":666,"../drawing":688,"@plotly/d3":58,"fast-isnumeric":249}],765:[function(h,G,X){"use strict";var i=h("../../plots/font_attributes"),m=h("../color/attributes"),b=h("../../lib/extend").extendFlat,p=h("../../plot_api/edit_types").overrideAll,r=h("../../plots/pad_attributes"),u=h("../../plot_api/plot_template").templatedArray,c=u("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});G.exports=p(u("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:c,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:b(r({editType:"arraydraw"}),{}),font:i({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:m.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../../plots/font_attributes":883,"../../plots/pad_attributes":916,"../color/attributes":665}],766:[function(h,G,X){"use strict";G.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],767:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/array_container_defaults"),b=h("./attributes"),p=h("./constants").name,r=b.buttons;function u(l,f,s){function o(d,g){return i.coerce(l,f,b,d,g)}o("visible",m(l,f,{name:"buttons",handleItemDefaults:c}).length>0)&&(o("active"),o("direction"),o("type"),o("showactive"),o("x"),o("y"),i.noneOrAll(l,f,["x","y"]),o("xanchor"),o("yanchor"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),i.coerceFont(o,"font",s.font),o("bgcolor",s.paper_bgcolor),o("bordercolor"),o("borderwidth"))}function c(l,f){function s(o,d){return i.coerce(l,f,r,o,d)}s("visible","skip"===l.method||Array.isArray(l.args))&&(s("method"),s("args"),s("args2"),s("label"),s("execute"))}G.exports=function(l,f){m(l,f,{name:p,handleItemDefaults:u})}},{"../../lib":803,"../../plots/array_container_defaults":849,"./attributes":765,"./constants":766}],768:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../plots/plots"),b=h("../color"),p=h("../drawing"),r=h("../../lib"),u=h("../../lib/svg_text_utils"),c=h("../../plot_api/plot_template").arrayEditor,l=h("../../constants/alignment").LINE_SPACING,f=h("./constants"),s=h("./scrollbox");function o(D){return D._index}function d(D,R){return+D.attr(f.menuIndexAttrName)===R._index}function g(D,R,S,N,B,H,Y,Q){R.active=Y,c(D.layout,f.name,R).applyUpdate("active",Y),"buttons"===R.type?v(D,N,null,null,R):"dropdown"===R.type&&(B.attr(f.menuIndexAttrName,"-1"),y(D,N,B,H,R),Q||v(D,N,B,H,R))}function y(D,R,S,N,B){var H=r.ensureSingle(R,"g",f.headerClassName,function(K){K.style("pointer-events","all")}),Y=B._dims,ae={y:B.pad.t,yPad:0,x:B.pad.l,xPad:0,index:0},te={width:Y.headerWidth,height:Y.headerHeight};H.call(_,B,B.buttons[B.active]||f.blankHeaderOpts,D).call(A,B,ae,te),r.ensureSingle(R,"text",f.headerArrowClassName,function(K){K.attr("text-anchor","end").call(p.font,B.font).text(f.arrowSymbol[B.direction])}).attr({x:Y.headerWidth-f.arrowOffsetX+B.pad.l,y:Y.headerHeight/2+f.textOffsetY+B.pad.t}),H.on("click",function(){S.call(I,String(d(S,B)?-1:B._index)),v(D,R,S,N,B)}),H.on("mouseover",function(){H.call(k)}),H.on("mouseout",function(){H.call(C,B)}),p.setTranslate(R,Y.lx,Y.ly)}function v(D,R,S,N,B){S||(S=R).attr("pointer-events","all");var H=-1==+S.attr(f.menuIndexAttrName)&&"buttons"!==B.type?[]:B.buttons,Y="dropdown"===B.type?f.dropdownButtonClassName:f.buttonClassName,Q=S.selectAll("g."+Y).data(r.filterVisible(H)),ne=Q.enter().append("g").classed(Y,!0),ae=Q.exit();"dropdown"===B.type?(ne.attr("opacity","0").transition().attr("opacity","1"),ae.transition().attr("opacity","0").remove()):ae.remove();var te=0,K=0,q=B._dims,re=-1!==["up","down"].indexOf(B.direction);"dropdown"===B.type&&(re?K=q.headerHeight+f.gapButtonHeader:te=q.headerWidth+f.gapButtonHeader),"dropdown"===B.type&&"up"===B.direction&&(K=-f.gapButtonHeader+f.gapButton-q.openHeight),"dropdown"===B.type&&"left"===B.direction&&(te=-f.gapButtonHeader+f.gapButton-q.openWidth);var Z,oe,ie,V={x:q.lx+te+B.pad.l,y:q.ly+K+B.pad.t,yPad:f.gapButton,xPad:f.gapButton,index:0},W={l:V.x+B.borderwidth,t:V.y+B.borderwidth};Q.each(function(Z,oe){var ie=i.select(this);ie.call(_,B,Z,D).call(A,B,V),ie.on("click",function(){i.event.defaultPrevented||(Z.execute&&(Z.args2&&B.active===oe?(g(D,B,0,R,S,N,-1),m.executeAPICommand(D,Z.method,Z.args2)):(g(D,B,0,R,S,N,oe),m.executeAPICommand(D,Z.method,Z.args))),D.emit("plotly_buttonclicked",{menu:B,button:Z,active:B.active}))}),ie.on("mouseover",function(){ie.call(k)}),ie.on("mouseout",function(){ie.call(C,B),Q.call(E,B)})}),Q.call(E,B),re?(W.w=Math.max(q.openWidth,q.headerWidth),W.h=V.y-W.t):(W.w=V.x-W.l,W.h=Math.max(q.openHeight,q.headerHeight)),W.direction=B.direction,N&&(Q.size()?function(Z,oe,ie,ue,fe,he){var de,be,pe,Te=fe.direction,ke=fe._dims,ze=fe.active;if("up"===Te||"down"===Te)for(be=0,pe=0;pe<ze;pe++)be+=ke.heights[pe]+f.gapButton;else for(de=0,pe=0;pe<ze;pe++)de+=ke.widths[pe]+f.gapButton;ue.enable(he,de,be),ue.hbar&&ue.hbar.attr("opacity","0").transition().attr("opacity","1"),ue.vbar&&ue.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,N,B,W):(ie=!!(Z=N).vbar,(oe=!!Z.hbar)&&Z.hbar.transition().attr("opacity","0").each("end",function(){oe=!1,ie||Z.disable()}),ie&&Z.vbar.transition().attr("opacity","0").each("end",function(){ie=!1,oe||Z.disable()})))}function _(D,R,S,N){D.call(w,R).call(x,R,S,N)}function w(D,R){r.ensureSingle(D,"rect",f.itemRectClassName,function(S){S.attr({rx:f.rx,ry:f.ry,"shape-rendering":"crispEdges"})}).call(b.stroke,R.bordercolor).call(b.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px")}function x(D,R,S,N){var B=r.ensureSingle(D,"text",f.itemTextClassName,function(Q){Q.attr({"text-anchor":"start","data-notex":1})}),H=S.label,Y=N._fullLayout._meta;Y&&(H=r.templateString(H,Y)),B.call(p.font,R.font).text(H).call(u.convertToTspans,N)}function E(D,R){var S=R.active;D.each(function(N,B){var H=i.select(this);B===S&&R.showactive&&H.select("rect."+f.itemRectClassName).call(b.fill,f.activeColor)})}function k(D){D.select("rect."+f.itemRectClassName).call(b.fill,f.hoverColor)}function C(D,R){D.select("rect."+f.itemRectClassName).call(b.fill,R.bgcolor)}function L(D,R){var S=R._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},N=p.tester.selectAll("g."+f.dropdownButtonClassName).data(r.filterVisible(R.buttons));N.enter().append("g").classed(f.dropdownButtonClassName,!0);var B=-1!==["up","down"].indexOf(R.direction);N.each(function(te,K){var q=i.select(this);q.call(_,R,te,D);var re=q.select("."+f.itemTextClassName),V=re.node()&&p.bBox(re.node()).width,W=Math.max(V+f.textPadX,f.minWidth),Z=R.font.size*l,oe=u.lineCount(re),ie=Math.max(Z*oe,f.minHeight)+f.textOffsetY;ie=Math.ceil(ie),W=Math.ceil(W),S.widths[K]=W,S.heights[K]=ie,S.height1=Math.max(S.height1,ie),S.width1=Math.max(S.width1,W),B?(S.totalWidth=Math.max(S.totalWidth,W),S.openWidth=S.totalWidth,S.totalHeight+=ie+f.gapButton,S.openHeight+=ie+f.gapButton):(S.totalWidth+=W+f.gapButton,S.openWidth+=W+f.gapButton,S.totalHeight=Math.max(S.totalHeight,ie),S.openHeight=S.totalHeight)}),B?S.totalHeight-=f.gapButton:S.totalWidth-=f.gapButton,S.headerWidth=S.width1+f.arrowPadX,S.headerHeight=S.height1,"dropdown"===R.type&&(B?(S.width1+=f.arrowPadX,S.totalHeight=S.height1):S.totalWidth=S.width1,S.totalWidth+=f.arrowPadX),N.remove();var H=S.totalWidth+R.pad.l+R.pad.r,Y=S.totalHeight+R.pad.t+R.pad.b,Q=D._fullLayout._size;S.lx=Q.l+Q.w*R.x,S.ly=Q.t+Q.h*(1-R.y);var ne="left";r.isRightAnchor(R)&&(S.lx-=H,ne="right"),r.isCenterAnchor(R)&&(S.lx-=H/2,ne="center");var ae="top";r.isBottomAnchor(R)&&(S.ly-=Y,ae="bottom"),r.isMiddleAnchor(R)&&(S.ly-=Y/2,ae="middle"),S.totalWidth=Math.ceil(S.totalWidth),S.totalHeight=Math.ceil(S.totalHeight),S.lx=Math.round(S.lx),S.ly=Math.round(S.ly),m.autoMargin(D,P(R),{x:R.x,y:R.y,l:H*({right:1,center:.5}[ne]||0),r:H*({left:1,center:.5}[ne]||0),b:Y*({top:1,middle:.5}[ae]||0),t:Y*({bottom:1,middle:.5}[ae]||0)})}function P(D){return f.autoMarginIdRoot+D._index}function A(D,R,S,N){N=N||{};var B=D.select("."+f.itemRectClassName),H=D.select("."+f.itemTextClassName),Y=R.borderwidth,Q=S.index,ne=R._dims;p.setTranslate(D,Y+S.x,Y+S.y);var ae=-1!==["up","down"].indexOf(R.direction),te=N.height||(ae?ne.heights[Q]:ne.height1);B.attr({x:0,y:0,width:N.width||(ae?ne.width1:ne.widths[Q]),height:te});var K=R.font.size*l,q=(u.lineCount(H)-1)*K/2;u.positionText(H,f.textOffsetX,te/2-q+f.textOffsetY),ae?S.y+=ne.heights[Q]+S.yPad:S.x+=ne.widths[Q]+S.xPad,S.index++}function I(D,R){D.attr(f.menuIndexAttrName,R||"-1").selectAll("g."+f.dropdownButtonClassName).remove()}G.exports=function(D){var R=D._fullLayout,S=r.filterVisible(R[f.name]);function N(K){m.autoMargin(D,P(K))}var B=R._menulayer.selectAll("g."+f.containerClassName).data(S.length>0?[0]:[]);if(B.enter().append("g").classed(f.containerClassName,!0).style("cursor","pointer"),B.exit().each(function(){i.select(this).selectAll("g."+f.headerGroupClassName).each(N)}).remove(),0!==S.length){var H=B.selectAll("g."+f.headerGroupClassName).data(S,o);H.enter().append("g").classed(f.headerGroupClassName,!0);for(var Y=r.ensureSingle(B,"g",f.dropdownButtonGroupClassName,function(K){K.style("pointer-events","all")}),Q=0;Q<S.length;Q++)L(D,S[Q]);var te=new s(D,Y,"updatemenus"+R._uid);H.enter().size()&&(Y.node().parentNode.appendChild(Y.node()),Y.call(I)),H.exit().each(function(K){Y.call(I),N(K)}).remove(),H.each(function(K){var q=i.select(this),re="dropdown"===K.type?Y:null;m.manageCommandObserver(D,K,K.buttons,function(V){g(D,K,0,q,re,te,V.index,!0)}),"dropdown"===K.type?(y(D,q,Y,te,K),d(Y,K)&&v(D,q,Y,te,K)):v(D,q,null,null,K)})}}},{"../../constants/alignment":771,"../../lib":803,"../../lib/svg_text_utils":829,"../../plot_api/plot_template":843,"../../plots/plots":917,"../color":666,"../drawing":688,"./constants":766,"./scrollbox":770,"@plotly/d3":58}],769:[function(h,G,X){arguments[4][763][0].apply(X,arguments)},{"./attributes":765,"./constants":766,"./defaults":767,"./draw":768,dup:763}],770:[function(h,G,X){"use strict";G.exports=r;var i=h("@plotly/d3"),m=h("../color"),b=h("../drawing"),p=h("../../lib");function r(u,c,l){this.gd=u,this.container=c,this.id=l,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}r.barWidth=2,r.barLength=20,r.barRadius=2,r.barPad=1,r.barColor="#808BA4",r.prototype.enable=function(u,c,l){var f=this.gd._fullLayout,s=f.width,o=f.height;this.position=u;var d,g,y,v,_=this.position.l,w=this.position.w,x=this.position.t,E=this.position.h,k=this.position.direction,C="down"===k,L="left"===k,P="up"===k,A=w,I=E;C||L||"right"===k||P||(this.position.direction="down",C=!0),C||P?(g=(d=_)+A,C?(y=x,I=(v=Math.min(y+I,o))-y):I=(v=x+I)-(y=Math.max(v-I,0))):(v=(y=x)+I,L?A=(g=_+A)-(d=Math.max(g-A,0)):(d=_,A=(g=Math.min(d+A,s))-d)),this._box={l:d,t:y,w:A,h:I};var D=w>A,R=r.barLength+2*r.barPad,S=r.barWidth+2*r.barPad,N=_,B=x+E;B+S>o&&(B=o-S);var H=this.container.selectAll("rect.scrollbar-horizontal").data(D?[0]:[]);H.exit().on(".drag",null).remove(),H.enter().append("rect").classed("scrollbar-horizontal",!0).call(m.fill,r.barColor),D?(this.hbar=H.attr({rx:r.barRadius,ry:r.barRadius,x:N,y:B,width:R,height:S}),this._hbarXMin=N+R/2,this._hbarTranslateMax=A-R):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var Y=E>I,Q=r.barWidth+2*r.barPad,ne=r.barLength+2*r.barPad,ae=_+w,te=x;ae+Q>s&&(ae=s-Q);var K=this.container.selectAll("rect.scrollbar-vertical").data(Y?[0]:[]);K.exit().on(".drag",null).remove(),K.enter().append("rect").classed("scrollbar-vertical",!0).call(m.fill,r.barColor),Y?(this.vbar=K.attr({rx:r.barRadius,ry:r.barRadius,x:ae,y:te,width:Q,height:ne}),this._vbarYMin=te+ne/2,this._vbarTranslateMax=I-ne):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var q=this.id,re=d-.5,V=Y?g+Q+.5:g+.5,W=y-.5,Z=D?v+S+.5:v+.5,oe=f._topdefs.selectAll("#"+q).data(D||Y?[0]:[]);if(oe.exit().remove(),oe.enter().append("clipPath").attr("id",q).append("rect"),D||Y?(this._clipRect=oe.select("rect").attr({x:Math.floor(re),y:Math.floor(W),width:Math.ceil(V)-Math.floor(re),height:Math.ceil(Z)-Math.floor(W)}),this.container.call(b.setClipUrl,q,this.gd),this.bg.attr({x:_,y:x,width:w,height:E})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(b.setClipUrl,null),delete this._clipRect),D||Y){var ie=i.behavior.drag().on("dragstart",function(){i.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ie);var ue=i.behavior.drag().on("dragstart",function(){i.event.sourceEvent.preventDefault(),i.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));D&&this.hbar.on(".drag",null).call(ue),Y&&this.vbar.on(".drag",null).call(ue)}this.setTranslate(c,l)},r.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(b.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},r.prototype._onBoxDrag=function(){var u=this.translateX,c=this.translateY;this.hbar&&(u-=i.event.dx),this.vbar&&(c-=i.event.dy),this.setTranslate(u,c)},r.prototype._onBoxWheel=function(){var u=this.translateX,c=this.translateY;this.hbar&&(u+=i.event.deltaY),this.vbar&&(c+=i.event.deltaY),this.setTranslate(u,c)},r.prototype._onBarDrag=function(){var u=this.translateX,c=this.translateY;if(this.hbar){var l=u+this._hbarXMin,f=l+this._hbarTranslateMax;u=(p.constrain(i.event.x,l,f)-l)/(f-l)*(this.position.w-this._box.w)}if(this.vbar){var s=c+this._vbarYMin,o=s+this._vbarTranslateMax;c=(p.constrain(i.event.y,s,o)-s)/(o-s)*(this.position.h-this._box.h)}this.setTranslate(u,c)},r.prototype.setTranslate=function(u,c){var l=this.position.w-this._box.w,f=this.position.h-this._box.h;u=p.constrain(u||0,0,l),c=p.constrain(c||0,0,f),this.translateX=u,this.translateY=c,this.container.call(b.setTranslate,this._box.l-this.position.l-u,this._box.t-this.position.t-c),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+u-.5),y:Math.floor(this.position.t+c-.5)}),this.hbar&&this.hbar.call(b.setTranslate,u+u/l*this._hbarTranslateMax,c),this.vbar&&this.vbar.call(b.setTranslate,u,c+c/f*this._vbarTranslateMax)}},{"../../lib":803,"../color":666,"../drawing":688,"@plotly/d3":58}],771:[function(h,G,X){"use strict";G.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],772:[function(h,G,X){"use strict";G.exports={axisRefDescription:function(i,m,b){return["If set to a",i,"axis id (e.g. *"+i+"* or","*"+i+"2*), the `"+i+"` position refers to a",i,"coordinate. If set to *paper*, the `"+i+"`","position refers to the distance from the",m,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",m,"("+b+"). If set to a",i,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",m,"of the domain of that axis: e.g.,","*"+i+"2 domain* refers to the domain of the second",i," axis and a",i,"position of 0.5 refers to the","point between the",m,"and the",b,"of the domain of the","second",i,"axis."].join(" ")}}},{}],773:[function(h,G,X){"use strict";G.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},{}],774:[function(h,G,X){"use strict";G.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],775:[function(h,G,X){"use strict";G.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],776:[function(h,G,X){"use strict";G.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],777:[function(h,G,X){"use strict";G.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},{}],778:[function(h,G,X){"use strict";G.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],779:[function(h,G,X){"use strict";G.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],780:[function(h,G,X){"use strict";X.xmlns="http://www.w3.org/2000/xmlns/",X.svg="http://www.w3.org/2000/svg",X.xlink="http://www.w3.org/1999/xlink",X.svgAttrs={xmlns:X.svg,"xmlns:xlink":X.xlink}},{}],781:[function(h,G,X){"use strict";X.version=h("./version").version,h("native-promise-only"),h("../build/plotcss");for(var i=h("./registry"),m=X.register=i.register,b=h("./plot_api"),p=Object.keys(b),r=0;r<p.length;r++){var u=p[r];"_"!==u.charAt(0)&&(X[u]=b[u]),m({moduleType:"apiMethod",name:u,fn:b[u]})}m(h("./traces/scatter")),m([h("./components/legend"),h("./components/fx"),h("./components/annotations"),h("./components/annotations3d"),h("./components/shapes"),h("./components/images"),h("./components/updatemenus"),h("./components/sliders"),h("./components/rangeslider"),h("./components/rangeselector"),h("./components/grid"),h("./components/errorbars"),h("./components/colorscale"),h("./components/colorbar"),h("./components/modebar")]),m([h("./locale-en"),h("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(m(window.PlotlyLocales),delete window.PlotlyLocales),X.Icons=h("./fonts/ploticon");var c=h("./components/fx"),l=h("./plots/plots");X.Plots={resize:l.resize,graphJson:l.graphJson,sendDataToCloud:l.sendDataToCloud},X.Fx={hover:c.hover,unhover:c.unhover,loneHover:c.loneHover,loneUnhover:c.loneUnhover},X.Snapshot=h("./snapshot"),X.PlotSchema=h("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":657,"./components/annotations3d":662,"./components/colorbar":672,"./components/colorscale":678,"./components/errorbars":694,"./components/fx":706,"./components/grid":710,"./components/images":715,"./components/legend":723,"./components/modebar":729,"./components/rangeselector":737,"./components/rangeslider":744,"./components/shapes":758,"./components/sliders":763,"./components/updatemenus":769,"./fonts/ploticon":782,"./locale-en":834,"./locale-en-us":833,"./plot_api":838,"./plot_api/plot_schema":842,"./plots/plots":917,"./registry":931,"./snapshot":936,"./traces/scatter":1230,"./version":1404,"native-promise-only":474}],782:[function(h,G,X){"use strict";G.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],783:[function(h,G,X){"use strict";X.isLeftAnchor=function(i){return"left"===i.xanchor||"auto"===i.xanchor&&i.x<=1/3},X.isCenterAnchor=function(i){return"center"===i.xanchor||"auto"===i.xanchor&&i.x>1/3&&i.x<2/3},X.isRightAnchor=function(i){return"right"===i.xanchor||"auto"===i.xanchor&&i.x>=2/3},X.isTopAnchor=function(i){return"top"===i.yanchor||"auto"===i.yanchor&&i.y>=2/3},X.isMiddleAnchor=function(i){return"middle"===i.yanchor||"auto"===i.yanchor&&i.y>1/3&&i.y<2/3},X.isBottomAnchor=function(i){return"bottom"===i.yanchor||"auto"===i.yanchor&&i.y<=1/3}},{}],784:[function(h,G,X){"use strict";var i=h("./mod"),m=i.mod,b=i.modHalf,p=Math.PI,r=2*p;function u(s){return Math.abs(s[1]-s[0])>r-1e-14}function c(s,o){return b(o-s,r)}function l(s,o){if(u(o))return!0;var d,g;o[0]<o[1]?(d=o[0],g=o[1]):(d=o[1],g=o[0]),(d=m(d,r))>(g=m(g,r))&&(g+=r);var y=m(s,r),v=y+r;return y>=d&&y<=g||v>=d&&v<=g}function f(s,o,d,g,y,v,_){y=y||0,v=v||0;var w,x,E,k,C,L=u([d,g]);function P(R,S){return[R*Math.cos(S)+y,v-R*Math.sin(S)]}L?(w=0,x=p,E=r):d<g?(w=d,E=g):(w=g,E=d),s<o?(k=s,C=o):(k=o,C=s);var A,I=Math.abs(E-w)<=p?0:1;function D(R,S,N){return"A"+[R,R]+" "+[0,I,N]+" "+P(R,S)}return L?A=null===k?"M"+P(C,w)+D(C,x,0)+D(C,E,0)+"Z":"M"+P(k,w)+D(k,x,0)+D(k,E,0)+"ZM"+P(C,w)+D(C,x,1)+D(C,E,1)+"Z":null===k?(A="M"+P(C,w)+D(C,E,0),_&&(A+="L0,0Z")):A="M"+P(k,w)+"L"+P(C,w)+D(C,E,0)+"L"+P(k,E)+D(k,w,1)+"Z",A}G.exports={deg2rad:function(s){return s/180*p},rad2deg:function(s){return s/p*180},angleDelta:c,angleDist:function(s,o){return Math.abs(c(s,o))},isFullCircle:u,isAngleInsideSector:l,isPtInsideSector:function(s,o,d,g){return!!l(o,g)&&(d[0]<d[1]?(y=d[0],v=d[1]):(y=d[1],v=d[0]),s>=y&&s<=v);var y,v},pathArc:function(s,o,d,g,y){return f(null,s,o,d,g,y,0)},pathSector:function(s,o,d,g,y){return f(null,s,o,d,g,y,1)},pathAnnulus:function(s,o,d,g,y,v){return f(s,o,d,g,y,v,1)}}},{"./mod":810}],785:[function(h,G,X){"use strict";var i=Array.isArray,m=ArrayBuffer,b=DataView;function p(c){return m.isView(c)&&!(c instanceof b)}function r(c){return i(c)||p(c)}function u(c,l,f){if(r(c)){if(r(c[0])){for(var s=f,o=0;o<c.length;o++)s=l(s,c[o].length);return s}return c.length}return 0}X.isTypedArray=p,X.isArrayOrTypedArray=r,X.isArray1D=function(c){return!r(c[0])},X.ensureArray=function(c,l){return i(c)||(c=[]),c.length=l,c},X.concat=function(){var c,l,f,s,o,d,g,y,v=[],_=!0,w=0;for(f=0;f<arguments.length;f++)(d=(s=arguments[f]).length)&&(l?v.push(s):(l=s,o=d),i(s)?c=!1:(_=!1,w?c!==s.constructor&&(c=!1):c=s.constructor),w+=d);if(!w)return[];if(!v.length)return l;if(_)return l.concat.apply(l,v);if(c){for((g=new c(w)).set(l),f=0;f<v.length;f++)g.set(s=v[f],o),o+=s.length;return g}for(g=new Array(w),y=0;y<l.length;y++)g[y]=l[y];for(f=0;f<v.length;f++){for(s=v[f],y=0;y<s.length;y++)g[o+y]=s[y];o+=y}return g},X.maxRowLength=function(c){return u(c,Math.max,0)},X.minRowLength=function(c){return u(c,Math.min,1/0)}},{}],786:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../constants/numerical").BADNUM,b=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;G.exports=function(p){return"string"==typeof p&&(p=p.replace(b,"")),i(p)?Number(p):m}},{"../constants/numerical":779,"fast-isnumeric":249}],787:[function(h,G,X){"use strict";G.exports=function(i){var m=i._fullLayout;m._glcanvas&&m._glcanvas.size()&&m._glcanvas.each(function(b){b.regl&&b.regl.clear({color:!0,depth:!0})})}},{}],788:[function(h,G,X){"use strict";G.exports=function(i){i._responsiveChartHandler&&(window.removeEventListener("resize",i._responsiveChartHandler),delete i._responsiveChartHandler)}},{}],789:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("tinycolor2"),b=h("../plots/attributes"),p=h("../components/colorscale/scales"),r=h("../components/color"),u=h("../constants/interactions").DESELECTDIM,c=h("./nested_property"),l=h("./regex").counter,f=h("./mod").modHalf,s=h("./array").isArrayOrTypedArray;function o(d,g){var y=X.valObjectMeta[g.valType];if(g.arrayOk&&s(d))return!0;if(y.validateFunction)return y.validateFunction(d,g);var v={},_=v;return y.coerceFunction(d,{set:function(x){_=x}},v,g),_!==v}X.valObjectMeta={data_array:{coerceFunction:function(d,g,y){s(d)?g.set(d):void 0!==y&&g.set(y)}},enumerated:{coerceFunction:function(d,g,y,v){v.coerceNumber&&(d=+d),-1===v.values.indexOf(d)?g.set(y):g.set(d)},validateFunction:function(d,g){g.coerceNumber&&(d=+d);for(var y=g.values,v=0;v<y.length;v++){var _=String(y[v]);if("/"===_.charAt(0)&&"/"===_.charAt(_.length-1)){if(new RegExp(_.substr(1,_.length-2)).test(d))return!0}else if(d===y[v])return!0}return!1}},boolean:{coerceFunction:function(d,g,y){g.set(!0===d||!1===d?d:y)}},number:{coerceFunction:function(d,g,y,v){!i(d)||void 0!==v.min&&d<v.min||void 0!==v.max&&d>v.max?g.set(y):g.set(+d)}},integer:{coerceFunction:function(d,g,y,v){d%1||!i(d)||void 0!==v.min&&d<v.min||void 0!==v.max&&d>v.max?g.set(y):g.set(+d)}},string:{coerceFunction:function(d,g,y,v){g.set("string"!=typeof d?!0!==v.strict&&"number"==typeof d?String(d):y:v.noBlank&&!d?y:d)}},color:{coerceFunction:function(d,g,y){m(d).isValid()?g.set(d):g.set(y)}},colorlist:{coerceFunction:function(d,g,y){Array.isArray(d)&&d.length&&d.every(function(v){return m(v).isValid()})?g.set(d):g.set(y)}},colorscale:{coerceFunction:function(d,g,y){g.set(p.get(d,y))}},angle:{coerceFunction:function(d,g,y){"auto"===d?g.set("auto"):i(d)?g.set(f(+d,360)):g.set(y)}},subplotid:{coerceFunction:function(d,g,y,v){var _=v.regex||l(y);"string"==typeof d&&_.test(d)?g.set(d):g.set(y)},validateFunction:function(d,g){var y=g.dflt;return d===y||"string"==typeof d&&!!l(y).test(d)}},flaglist:{coerceFunction:function(d,g,y,v){if("string"==typeof d)if(-1===(v.extras||[]).indexOf(d)){for(var _=d.split("+"),w=0;w<_.length;){var x=_[w];-1===v.flags.indexOf(x)||_.indexOf(x)<w?_.splice(w,1):w++}g.set(_.length?_.join("+"):y)}else g.set(d);else g.set(y)}},any:{coerceFunction:function(d,g,y){g.set(void 0===d?y:d)}},info_array:{coerceFunction:function(d,g,y,v){function _(B,H,Y){var Q;return void 0===Y&&(Y=H.dflt),X.valObjectMeta[H.valType].coerceFunction(B,{set:function(ae){Q=ae}},Y,H),Q}var w=2===v.dimensions||"1-2"===v.dimensions&&Array.isArray(d)&&Array.isArray(d[0]);if(Array.isArray(d)){var x,E,k,L,P,A=v.items,I=[],D=Array.isArray(A),R=D&&w&&Array.isArray(A[0]),S=w&&D&&!R,N=D&&!S?A.length:d.length;if(y=Array.isArray(y)?y:[],w)for(x=0;x<N;x++)for(I[x]=[],k=Array.isArray(d[x])?d[x]:[],L=S?A.length:D?A[x].length:k.length,E=0;E<L;E++)void 0!==(P=_(k[E],S?A[E]:D?A[x][E]:A,(y[x]||[])[E]))&&(I[x][E]=P);else for(x=0;x<N;x++)void 0!==(P=_(d[x],D?A[x]:A,y[x]))&&(I[x]=P);g.set(I)}else g.set(y)},validateFunction:function(d,g){if(!Array.isArray(d))return!1;var y=g.items,v=Array.isArray(y),_=2===g.dimensions;if(!g.freeLength&&d.length!==y.length)return!1;for(var w=0;w<d.length;w++)if(_){if(!Array.isArray(d[w])||!g.freeLength&&d[w].length!==y[w].length)return!1;for(var x=0;x<d[w].length;x++)if(!o(d[w][x],v?y[w][x]:y))return!1}else if(!o(d[w],v?y[w]:y))return!1;return!0}}},X.coerce=function(d,g,y,v,_){var w=c(y,v).get(),x=c(d,v),E=c(g,v),k=x.get(),C=g._template;if(void 0===k&&C&&(k=c(C,v).get(),C=0),void 0===_&&(_=w.dflt),w.arrayOk&&s(k))return E.set(k),k;var L=X.valObjectMeta[w.valType].coerceFunction;L(k,E,_,w);var P=E.get();return C&&P===_&&!o(k,w)&&(L(k=c(C,v).get(),E,_,w),P=E.get()),P},X.coerce2=function(d,g,y,v,_){var w=c(d,v),x=X.coerce(d,g,y,v,_);return null!=w.get()&&x},X.coerceFont=function(d,g,y){var v={};return v.family=d(g+".family",(y=y||{}).family),v.size=d(g+".size",y.size),v.color=d(g+".color",y.color),v},X.coercePattern=function(d,g,y,v){if(d(g+".shape")){d(g+".solidity"),d(g+".size");var _="overlay"===d(g+".fillmode");if(!v){var w=d(g+".bgcolor",_?y:void 0);d(g+".fgcolor",_?r.contrast(w):y)}d(g+".fgopacity",_?.5:1)}},X.coerceHoverinfo=function(d,g,y){var v,_=g._module.attributes,w=_.hoverinfo?_:b,x=w.hoverinfo;if(1===y._dataLength){var E="all"===x.dflt?x.flags.slice():x.dflt.split("+");E.splice(E.indexOf("name"),1),v=E.join("+")}return X.coerce(d,g,w,"hoverinfo",v)},X.coerceSelectionMarkerOpacity=function(d,g){if(d.marker){var y,v,_=d.marker.opacity;void 0!==_&&(s(_)||d.selected||d.unselected||(y=_,v=u*_),g("selected.marker.opacity",y),g("unselected.marker.opacity",v))}},X.validate=o},{"../components/color":666,"../components/colorscale/scales":681,"../constants/interactions":778,"../plots/attributes":850,"./array":785,"./mod":810,"./nested_property":811,"./regex":820,"fast-isnumeric":249,tinycolor2:598}],790:[function(h,G,X){"use strict";var i,m,b=h("d3-time-format").timeFormat,p=h("fast-isnumeric"),r=h("./loggers"),u=h("./mod").mod,c=h("../constants/numerical"),l=c.BADNUM,f=c.ONEDAY,s=c.ONEHOUR,o=c.ONEMIN,d=c.ONESEC,g=c.EPOCHJD,y=h("../registry"),v=h("d3-time-format").utcFormat,_=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,w=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,x=(new Date).getFullYear()-70;function E(H){return H&&y.componentsRegistry.calendars&&"string"==typeof H&&"gregorian"!==H}function k(H,Y){return String(H+Math.pow(10,Y)).substr(1)}X.dateTick0=function(H,Y){var ae,te,Q=(te=!!Y,E(ae=H)?te?y.getComponentMethod("calendars","CANONICAL_SUNDAY")[ae]:y.getComponentMethod("calendars","CANONICAL_TICK")[ae]:te?"2000-01-02":"2000-01-01");if(Y<2)return Q;var ne=X.dateTime2ms(Q,H);return X.ms2DateTime(ne+=f*(Y-1),0,H)},X.dfltRange=function(H){return E(H)?y.getComponentMethod("calendars","DFLTRANGE")[H]:["2000-01-01","2001-01-01"]},X.isJSDate=function(H){return"object"==typeof H&&null!==H&&"function"==typeof H.getTime},X.dateTime2ms=function(H,Y){if(X.isJSDate(H)){var Q=H.getTimezoneOffset()*o,ne=(H.getUTCMinutes()-H.getMinutes())*o+(H.getUTCSeconds()-H.getSeconds())*d+(H.getUTCMilliseconds()-H.getMilliseconds());if(ne){var ae=3*o;Q=Q-ae/2+u(ne-Q+ae/2,ae)}return(H=Number(H)-Q)>=i&&H<=m?H:l}if("string"!=typeof H&&"number"!=typeof H)return l;H=String(H);var te=E(Y),K=H.charAt(0);!te||"G"!==K&&"g"!==K||(H=H.substr(1),Y="");var q=te&&"chinese"===Y.substr(0,7),re=H.match(q?w:_);if(!re)return l;var V=re[1],W=re[3]||"1",Z=Number(re[5]||1),oe=Number(re[7]||0),ie=Number(re[9]||0),ue=Number(re[11]||0);if(te){if(2===V.length)return l;var fe;V=Number(V);try{var he=y.getComponentMethod("calendars","getCal")(Y);if(q){var de="i"===W.charAt(W.length-1);W=parseInt(W,10),fe=he.newDate(V,he.toMonthIndex(V,W,de),Z)}else fe=he.newDate(V,Number(W),Z)}catch(pe){return l}return fe?(fe.toJD()-g)*f+oe*s+ie*o+ue*d:l}V=2===V.length?(Number(V)+2e3-x)%100+x:Number(V),W-=1;var be=new Date(Date.UTC(2e3,W,Z,oe,ie));return be.setUTCFullYear(V),be.getUTCMonth()!==W||be.getUTCDate()!==Z?l:be.getTime()+ue*d},i=X.MIN_MS=X.dateTime2ms("-9999"),m=X.MAX_MS=X.dateTime2ms("9999-12-31 23:59:59.9999"),X.isDateTime=function(H,Y){return X.dateTime2ms(H,Y)!==l};var C=90*f,L=3*s,P=5*o;function A(H,Y,Q,ne,ae){if((Y||Q||ne||ae)&&(H+=" "+k(Y,2)+":"+k(Q,2),(ne||ae)&&(H+=":"+k(ne,2),ae))){for(var te=4;ae%10==0;)te-=1,ae/=10;H+="."+k(ae,te)}return H}X.ms2DateTime=function(H,Y,Q){if("number"!=typeof H||!(H>=i&&H<=m))return l;Y||(Y=0);var ne,ae,te,K,q,re,V=Math.floor(10*u(H+.05,1)),W=Math.round(H-V/10);if(E(Q)){var Z=Math.floor(W/f)+g,oe=Math.floor(u(H,f));try{ne=y.getComponentMethod("calendars","getCal")(Q).fromJD(Z).formatDate("yyyy-mm-dd")}catch(ie){ne=v("G%Y-%m-%d")(new Date(W))}if("-"===ne.charAt(0))for(;ne.length<11;)ne="-0"+ne.substr(1);else for(;ne.length<10;)ne="0"+ne;ae=Y<C?Math.floor(oe/s):0,te=Y<C?Math.floor(oe%s/o):0,K=Y<L?Math.floor(oe%o/d):0,q=Y<P?oe%d*10+V:0}else re=new Date(W),ne=v("%Y-%m-%d")(re),ae=Y<C?re.getUTCHours():0,te=Y<C?re.getUTCMinutes():0,K=Y<L?re.getUTCSeconds():0,q=Y<P?10*re.getUTCMilliseconds()+V:0;return A(ne,ae,te,K,q)},X.ms2DateTimeLocal=function(H){if(!(H>=i+f&&H<=m-f))return l;var Y=Math.floor(10*u(H+.05,1)),Q=new Date(Math.round(H-Y/10));return A(b("%Y-%m-%d")(Q),Q.getHours(),Q.getMinutes(),Q.getSeconds(),10*Q.getUTCMilliseconds()+Y)},X.cleanDate=function(H,Y,Q){if(H===l)return Y;if(X.isJSDate(H)||"number"==typeof H&&isFinite(H)){if(E(Q))return r.error("JS Dates and milliseconds are incompatible with world calendars",H),Y;if(!(H=X.ms2DateTimeLocal(+H))&&void 0!==Y)return Y}else if(!X.isDateTime(H,Q))return r.error("unrecognized date",H),Y;return H};var I=/%\d?f/g,D=/%h/g,R={1:"1",2:"1",3:"2",4:"2"};function S(H,Y,Q,ne){H=H.replace(I,function(te){var K=Math.min(+te.charAt(1)||6,6);return(Y/1e3%1+2).toFixed(K).substr(2).replace(/0+$/,"")||"0"});var ae=new Date(Math.floor(Y+.05));if(H=H.replace(D,function(){return R[Q("%q")(ae)]}),E(ne))try{H=y.getComponentMethod("calendars","worldCalFmt")(H,Y,ne)}catch(te){return"Invalid"}return Q(H)(ae)}var N=[59,59.9,59.99,59.999,59.9999];X.formatDate=function(H,Y,Q,ne,ae,te){if(ae=E(ae)&&ae,!Y)if("y"===Q)Y=te.year;else if("m"===Q)Y=te.month;else{if("d"!==Q)return function(K,q){var re=u(K+.05,f),V=k(Math.floor(re/s),2)+":"+k(u(Math.floor(re/o),60),2);if("M"!==q){p(q)||(q=0);var W=(100+Math.min(u(K/d,60),N[q])).toFixed(q).substr(1);q>0&&(W=W.replace(/0+$/,"").replace(/[\.]$/,"")),V+=":"+W}return V}(H,Q)+"\n"+S(te.dayMonthYear,H,ne,ae);Y=te.dayMonth+"\n"+te.year}return S(Y,H,ne,ae)};var B=3*f;X.incrementMonth=function(H,Y,Q){Q=E(Q)&&Q;var ne=u(H,f);if(H=Math.round(H-ne),Q)try{var ae=Math.round(H/f)+g,te=y.getComponentMethod("calendars","getCal")(Q),K=te.fromJD(ae);return Y%12?te.add(K,Y,"m"):te.add(K,Y/12,"y"),(K.toJD()-g)*f+ne}catch(re){r.error("invalid ms "+H+" in calendar "+Q)}var q=new Date(H+B);return q.setUTCMonth(q.getUTCMonth()+Y)+ne-B},X.findExactDates=function(H,Y){for(var Q,ne,ae=0,te=0,K=0,q=0,re=E(Y)&&y.getComponentMethod("calendars","getCal")(Y),V=0;V<H.length;V++)if(p(ne=H[V])){if(!(ne%f))if(re)try{1===(Q=re.fromJD(ne/f+g)).day()?1===Q.month()?ae++:te++:K++}catch(Z){}else 1===(Q=new Date(ne)).getUTCDate()?0===Q.getUTCMonth()?ae++:te++:K++}else q++;K+=te+=ae;var W=H.length-q;return{exactYears:ae/W,exactMonths:te/W,exactDays:K/W}}},{"../constants/numerical":779,"../registry":931,"./loggers":807,"./mod":810,"d3-time-format":175,"fast-isnumeric":249}],791:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("./loggers"),b=h("./matrix"),p=h("gl-mat4");function r(s){var o=s&&s.parentNode;o&&o.removeChild(s)}function u(s,o,d){var g="plotly.js-style-"+s,y=document.getElementById(g);y||((y=document.createElement("style")).setAttribute("id",g),y.appendChild(document.createTextNode("")),document.head.appendChild(y));var v=y.sheet;v.insertRule?v.insertRule(o+"{"+d+"}",0):v.addRule?v.addRule(o,d,0):m.warn("addStyleRule failed")}function c(s){var o=window.getComputedStyle(s,null),d=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("-moz-transform")||o.getPropertyValue("-ms-transform")||o.getPropertyValue("-o-transform")||o.getPropertyValue("transform");return"none"===d?null:d.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(g){return+g})}function l(s){for(var o=[];f(s);)o.push(s),s=s.parentNode;return o}function f(s){return s&&(s instanceof Element||s instanceof HTMLElement)}G.exports={getGraphDiv:function(s){var o;if("string"==typeof s){if(null===(o=document.getElementById(s)))throw new Error("No DOM element with id '"+s+"' exists on the page.");return o}if(null==s)throw new Error("DOM element provided is null or undefined");return s},isPlotDiv:function(s){var o=i.select(s);return o.node()instanceof HTMLElement&&o.size()&&o.classed("js-plotly-plot")},removeElement:r,addStyleRule:function(s,o){u("global",s,o)},addRelatedStyleRule:u,deleteRelatedStyleRule:function(s){var d=document.getElementById("plotly.js-style-"+s);d&&r(d)},getFullTransformMatrix:function(s){var o=l(s),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return o.forEach(function(g){var y=c(g);if(y){var v=b.convertCssMatrix(y);d=p.multiply(d,d,v)}}),d},getElementTransformMatrix:c,getElementAndAncestors:l,equalDomRects:function(s,o){return s&&o&&s.x===o.x&&s.y===o.y&&s.top===o.top&&s.left===o.left&&s.right===o.right&&s.bottom===o.bottom}}},{"./loggers":807,"./matrix":809,"@plotly/d3":58,"gl-mat4":298}],792:[function(h,G,X){"use strict";var i=h("events").EventEmitter;G.exports={init:function(b){if(b._ev instanceof i)return b;var p=new i,r=new i;return b._ev=p,b._internalEv=r,b.on=p.on.bind(p),b.once=p.once.bind(p),b.removeListener=p.removeListener.bind(p),b.removeAllListeners=p.removeAllListeners.bind(p),b._internalOn=r.on.bind(r),b._internalOnce=r.once.bind(r),b._removeInternalListener=r.removeListener.bind(r),b._removeAllInternalListeners=r.removeAllListeners.bind(r),b.emit=function(u,c){"undefined"!=typeof jQuery&&jQuery(b).trigger(u,c),p.emit(u,c),r.emit(u,c)},b},triggerHandler:function(b,p,r){var u,c;"undefined"!=typeof jQuery&&(u=jQuery(b).triggerHandler(p,r));var l=b._ev;if(!l)return u;var f,s=l._events[p];if(!s)return u;function o(d){return d.listener?(l.removeListener(p,d.listener),d.fired?void 0:(d.fired=!0,d.listener.apply(l,[r]))):d.apply(l,[r])}for(s=Array.isArray(s)?s:[s],f=0;f<s.length-1;f++)o(s[f]);return c=o(s[f]),void 0!==u?u:c},purge:function(b){return delete b._ev,delete b.on,delete b.once,delete b.removeListener,delete b.removeAllListeners,delete b.emit,delete b._ev,delete b._internalEv,delete b._internalOn,delete b._internalOnce,delete b._removeInternalListener,delete b._removeAllInternalListeners,b}}},{events:116}],793:[function(h,G,X){"use strict";var i=h("./is_plain_object.js"),m=Array.isArray;function b(p,r,u,c){var l,f,s,o,d,g,y=p[0],v=p.length;if(2===v&&m(y)&&m(p[1])&&0===y.length){if(function(w,x){var E,k;for(E=0;E<w.length;E++){if(null!==(k=w[E])&&"object"==typeof k)return!1;void 0!==k&&(x[E]=k)}return!0}(p[1],y))return y;y.splice(0,y.length)}for(var _=1;_<v;_++)for(f in l=p[_])s=y[f],o=l[f],c&&m(o)?y[f]=o:r&&o&&(i(o)||(d=m(o)))?(d?(d=!1,g=s&&m(s)?s:[]):g=s&&i(s)?s:{},y[f]=b([g,o],r,u,c)):(void 0!==o||u)&&(y[f]=o);return y}X.extendFlat=function(){return b(arguments,!1,!1,!1)},X.extendDeep=function(){return b(arguments,!0,!1,!1)},X.extendDeepAll=function(){return b(arguments,!0,!0,!1)},X.extendDeepNoArrays=function(){return b(arguments,!0,!1,!0)}},{"./is_plain_object.js":804}],794:[function(h,G,X){"use strict";G.exports=function(i){for(var m={},b=[],p=0,r=0;r<i.length;r++){var u=i[r];1!==m[u]&&(m[u]=1,b[p++]=u)}return b}},{}],795:[function(h,G,X){"use strict";function i(b){return!0===b.visible}function m(b){var p=b[0].trace;return!0===p.visible&&0!==p._length}G.exports=function(b){for(var p,r=(p=b,Array.isArray(p)&&Array.isArray(p[0])&&p[0][0]&&p[0][0].trace?m:i),u=[],c=0;c<b.length;c++){var l=b[c];r(l)&&u.push(l)}return u}},{}],796:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("country-regex"),b=h("@turf/area"),p=h("@turf/centroid"),r=h("@turf/bbox"),u=h("./identity"),c=h("./loggers"),l=h("./is_plain_object"),f=h("./nested_property"),s=h("./polygon"),o=Object.keys(m),d={"ISO-3":u,"USA-states":u,"country names":function(y){for(var v=0;v<o.length;v++){var _=o[v];if(new RegExp(m[_]).test(y.trim().toLowerCase()))return _}return c.log("Unrecognized country name: "+y+"."),!1}};function g(y){var v=y.geojson,_=window.PlotlyGeoAssets||{},w="string"==typeof v?_[v]:v;return l(w)?w:(c.error("Oops ... something went wrong when fetching "+v),!1)}G.exports={locationToFeature:function(y,v,_){if(!v||"string"!=typeof v)return!1;var w,x,E,k=d[y](v);if(k){if("USA-states"===y)for(w=[],E=0;E<_.length;E++)(x=_[E]).properties&&x.properties.gu&&"USA"===x.properties.gu&&w.push(x);else w=_;for(E=0;E<w.length;E++)if((x=w[E]).id===k)return x;c.log(["Location with id",k,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(y){var v,_,w,x,E=y.geometry,k=E.coordinates,C=y.id,L=[];function P(A){for(var I=0;I<A.length-1;I++)if(A[I][0]>0&&A[I+1][0]<0)return I;return null}switch(v="RUS"===C||"FJI"===C?function(A){var I;if(null===P(A))I=A;else for(I=new Array(A.length),x=0;x<A.length;x++)I[x]=[A[x][0]<0?A[x][0]+360:A[x][0],A[x][1]];L.push(s.tester(I))}:"ATA"===C?function(A){var I=P(A);if(null===I)return L.push(s.tester(A));var D=new Array(A.length+1),R=0;for(x=0;x<A.length;x++)x>I?D[R++]=[A[x][0]+360,A[x][1]]:x===I?(D[R++]=A[x],D[R++]=[A[x][0],-90]):D[R++]=A[x];var S=s.tester(D);S.pts.pop(),L.push(S)}:function(A){L.push(s.tester(A))},E.type){case"MultiPolygon":for(_=0;_<k.length;_++)for(w=0;w<k[_].length;w++)v(k[_][w]);break;case"Polygon":for(_=0;_<k.length;_++)v(k[_])}return L},getTraceGeojson:g,extractTraceFeature:function(y){var v=y[0].trace,_=g(v);if(!_)return!1;var w,x={},E=[];for(w=0;w<v._length;w++){var k=y[w];(k.loc||0===k.loc)&&(x[k.loc]=k)}function C(A){var I=f(A,v.featureidkey||"id").get(),D=x[I];if(D){var R=A.geometry;if("Polygon"===R.type||"MultiPolygon"===R.type){var S={type:"Feature",id:I,geometry:R,properties:{}};S.properties.ct=function(N){var B,H=N.geometry;if("MultiPolygon"===H.type)for(var Y=H.coordinates,Q=0,ne=0;ne<Y.length;ne++){var ae={type:"Polygon",coordinates:Y[ne]},te=b.default(ae);te>Q&&(Q=te,B=ae)}else B=H;return p.default(B).geometry.coordinates}(S),D.fIn=A,D.fOut=S,E.push(S)}else c.log(["Location",D.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete x[I]}switch(_.type){case"FeatureCollection":var L=_.features;for(w=0;w<L.length;w++)C(L[w]);break;case"Feature":C(_);break;default:return c.warn(["Invalid GeoJSON type",(_.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var P in x)c.log(["Location *"+P+"*","does not have a matching feature with id-key","*"+v.featureidkey+"*."].join(" "));return E},fetchTraceGeoData:function(y){var v=window.PlotlyGeoAssets||{},_=[];function w(C){return new Promise(function(L,P){i.json(C,function(A,I){return A?(delete v[C],P(new Error(404===A.status?'GeoJSON at URL "'+C+'" does not exist.':"Unexpected error while fetching from "+C))):(v[C]=I,L(I))})})}function x(C){return new Promise(function(L,P){var A=0,I=setInterval(function(){return v[C]&&"pending"!==v[C]?(clearInterval(I),L(v[C])):A>100?(clearInterval(I),P("Unexpected error while fetching from "+C)):void A++},50)})}for(var E=0;E<y.length;E++){var k=y[E][0].trace.geojson;"string"==typeof k&&(v[k]?"pending"===v[k]&&_.push(x(k)):(v[k]="pending",_.push(w(k))))}return _},computeBbox:function(y){return r.default(y)}}},{"./identity":801,"./is_plain_object":804,"./loggers":807,"./nested_property":811,"./polygon":815,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":145}],797:[function(h,G,X){"use strict";var i=h("../constants/numerical").BADNUM;X.calcTraceToLineCoords=function(m){for(var b=m[0].trace.connectgaps,p=[],r=[],u=0;u<m.length;u++){var c=m[u].lonlat;c[0]!==i?r.push(c):!b&&r.length>0&&(p.push(r),r=[])}return r.length>0&&p.push(r),p},X.makeLine=function(m){return 1===m.length?{type:"LineString",coordinates:m[0]}:{type:"MultiLineString",coordinates:m}},X.makePolygon=function(m){if(1===m.length)return{type:"Polygon",coordinates:m};for(var b=new Array(m.length),p=0;p<m.length;p++)b[p]=[m[p]];return{type:"MultiPolygon",coordinates:b}},X.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":779}],798:[function(h,G,X){"use strict";var i,m,b,p=h("./mod").mod;function r(c,l,f,s,o,d,g,y){var v=f-c,_=o-c,w=g-o,x=s-l,E=d-l,k=y-d,C=v*k-w*x;if(0===C)return null;var L=(_*k-w*E)/C,P=(_*x-v*E)/C;return P<0||P>1||L<0||L>1?null:{x:c+v*L,y:l+x*L}}function u(c,l,f,s,o){var d=s*c+o*l;if(d<0)return s*s+o*o;if(d>f){var g=s-c,y=o-l;return g*g+y*y}var v=s*l-o*c;return v*v/f}X.segmentsIntersect=r,X.segmentDistance=function(c,l,f,s,o,d,g,y){if(r(c,l,f,s,o,d,g,y))return 0;var v=f-c,_=s-l,w=g-o,x=y-d,E=v*v+_*_,k=w*w+x*x,C=Math.min(u(v,_,E,o-c,d-l),u(v,_,E,g-c,y-l),u(w,x,k,c-o,l-d),u(w,x,k,f-o,s-d));return Math.sqrt(C)},X.getTextLocation=function(c,l,f,s){if(c===m&&s===b||(i={},m=c,b=s),i[f])return i[f];var o=c.getPointAtLength(p(f-s/2,l)),d=c.getPointAtLength(p(f+s/2,l)),g=Math.atan((d.y-o.y)/(d.x-o.x)),y=c.getPointAtLength(p(f,l)),v={x:(4*y.x+o.x+d.x)/6,y:(4*y.y+o.y+d.y)/6,theta:g};return i[f]=v,v},X.clearLocationCache=function(){m=null},X.getVisibleSegment=function(c,l,f){var s,o,d=l.left,g=l.right,y=l.top,v=l.bottom,_=0,w=c.getTotalLength(),x=w;function E(C){var L=c.getPointAtLength(C);0===C?s=L:C===w&&(o=L);var P=L.x<d?d-L.x:L.x>g?L.x-g:0,A=L.y<y?y-L.y:L.y>v?L.y-v:0;return Math.sqrt(P*P+A*A)}for(var k=E(_);k;){if((_+=k+f)>x)return;k=E(_)}for(k=E(x);k;){if(_>(x-=k+f))return;k=E(x)}return{min:_,max:x,len:x-_,total:w,isClosed:0===_&&x===w&&Math.abs(s.x-o.x)<.1&&Math.abs(s.y-o.y)<.1}},X.findPointOnPath=function(c,l,f,s){for(var o,d,g,y=(s=s||{}).pathLength||c.getTotalLength(),v=s.tolerance||.001,_=s.iterationLimit||30,w=c.getPointAtLength(0)[f]>c.getPointAtLength(y)[f]?-1:1,x=0,E=0,k=y;x<_;){if(g=(d=c.getPointAtLength(o=(E+k)/2))[f]-l,Math.abs(g)<v)return d;w*g>0?k=o:E=o,x++}return d}},{"./mod":810}],799:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("tinycolor2"),b=h("color-normalize"),p=h("../components/colorscale"),r=h("../components/color/attributes").defaultLine,u=h("./array").isArrayOrTypedArray,c=b(r);function l(o,d){var g=o;return g[3]*=d,g}function f(o){if(i(o))return c;var d=b(o);return d.length?d:c}function s(o){return i(o)?o:1}G.exports={formatColor:function(o,d,g){var y,v,_,w,x,E=o.color,k=u(E),C=u(d),L=p.extractOpts(o),P=[];if(y=void 0!==L.colorscale?p.makeColorScaleFuncFromTrace(o):f,v=k?function(I,D){return void 0===I[D]?c:b(y(I[D]))}:f,_=C?function(I,D){return void 0===I[D]?1:s(I[D])}:s,k||C)for(var A=0;A<g;A++)w=v(E,A),x=_(d,A),P[A]=l(w,x);else P=l(b(E),d);return P},parseColorScale:function(o){var d=p.extractOpts(o),g=d.colorscale;return d.reversescale&&(g=p.flipScale(d.colorscale)),g.map(function(y){var v=y[0],_=m(y[1]).toRgb();return{index:v,rgb:[_.r,_.g,_.b,_.a]}})}}},{"../components/color/attributes":665,"../components/colorscale":678,"./array":785,"color-normalize":131,"fast-isnumeric":249,tinycolor2:598}],800:[function(h,G,X){"use strict";var i=h("./identity");function m(b){return[b]}G.exports={keyFun:function(b){return b.key},repeat:m,descend:i,wrap:m,unwrap:function(b){return b[0]}}},{"./identity":801}],801:[function(h,G,X){"use strict";G.exports=function(i){return i}},{}],802:[function(h,G,X){"use strict";G.exports=function(i,m){if(!m)return i;var b=1/Math.abs(m),p=b>1?(b*i+b*m)/b:i+m,r=String(p).length;if(r>16){var u=String(m).length;if(r>=String(i).length+u){var c=parseFloat(p).toPrecision(12);-1===c.indexOf("e+")&&(p=+c)}}return p}},{}],803:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("d3-time-format").utcFormat,b=h("d3-format").format,p=h("fast-isnumeric"),r=h("../constants/numerical"),u=r.FP_SAFE,c=-u,l=r.BADNUM,f=G.exports={};f.adjustFormat=function(V){return!V||/^\d[.]\df/.test(V)||/[.]\d%/.test(V)?V:"0.f"===V?"~f":/^\d%/.test(V)?"~%":/^\ds/.test(V)?"~s":!/^[~,.0$]/.test(V)&&/[&fps]/.test(V)?"~"+V:V};var s={};f.warnBadFormat=function(V){var W=String(V);s[W]||(s[W]=1,f.warn('encountered bad format: "'+W+'"'))},f.noFormat=function(V){return String(V)},f.numberFormat=function(V){var W;try{W=b(f.adjustFormat(V))}catch(Z){return f.warnBadFormat(V),f.noFormat}return W},f.nestedProperty=h("./nested_property"),f.keyedContainer=h("./keyed_container"),f.relativeAttr=h("./relative_attr"),f.isPlainObject=h("./is_plain_object"),f.toLogRange=h("./to_log_range"),f.relinkPrivateKeys=h("./relink_private");var o=h("./array");f.isTypedArray=o.isTypedArray,f.isArrayOrTypedArray=o.isArrayOrTypedArray,f.isArray1D=o.isArray1D,f.ensureArray=o.ensureArray,f.concat=o.concat,f.maxRowLength=o.maxRowLength,f.minRowLength=o.minRowLength;var d=h("./mod");f.mod=d.mod,f.modHalf=d.modHalf;var g=h("./coerce");f.valObjectMeta=g.valObjectMeta,f.coerce=g.coerce,f.coerce2=g.coerce2,f.coerceFont=g.coerceFont,f.coercePattern=g.coercePattern,f.coerceHoverinfo=g.coerceHoverinfo,f.coerceSelectionMarkerOpacity=g.coerceSelectionMarkerOpacity,f.validate=g.validate;var y=h("./dates");f.dateTime2ms=y.dateTime2ms,f.isDateTime=y.isDateTime,f.ms2DateTime=y.ms2DateTime,f.ms2DateTimeLocal=y.ms2DateTimeLocal,f.cleanDate=y.cleanDate,f.isJSDate=y.isJSDate,f.formatDate=y.formatDate,f.incrementMonth=y.incrementMonth,f.dateTick0=y.dateTick0,f.dfltRange=y.dfltRange,f.findExactDates=y.findExactDates,f.MIN_MS=y.MIN_MS,f.MAX_MS=y.MAX_MS;var v=h("./search");f.findBin=v.findBin,f.sorterAsc=v.sorterAsc,f.sorterDes=v.sorterDes,f.distinctVals=v.distinctVals,f.roundUp=v.roundUp,f.sort=v.sort,f.findIndexOfMin=v.findIndexOfMin,f.sortObjectKeys=h("./sort_object_keys");var _=h("./stats");f.aggNums=_.aggNums,f.len=_.len,f.mean=_.mean,f.median=_.median,f.midRange=_.midRange,f.variance=_.variance,f.stdev=_.stdev,f.interp=_.interp;var w=h("./matrix");f.init2dArray=w.init2dArray,f.transposeRagged=w.transposeRagged,f.dot=w.dot,f.translationMatrix=w.translationMatrix,f.rotationMatrix=w.rotationMatrix,f.rotationXYMatrix=w.rotationXYMatrix,f.apply3DTransform=w.apply3DTransform,f.apply2DTransform=w.apply2DTransform,f.apply2DTransform2=w.apply2DTransform2,f.convertCssMatrix=w.convertCssMatrix,f.inverseTransformMatrix=w.inverseTransformMatrix;var x=h("./angles");f.deg2rad=x.deg2rad,f.rad2deg=x.rad2deg,f.angleDelta=x.angleDelta,f.angleDist=x.angleDist,f.isFullCircle=x.isFullCircle,f.isAngleInsideSector=x.isAngleInsideSector,f.isPtInsideSector=x.isPtInsideSector,f.pathArc=x.pathArc,f.pathSector=x.pathSector,f.pathAnnulus=x.pathAnnulus;var E=h("./anchor_utils");f.isLeftAnchor=E.isLeftAnchor,f.isCenterAnchor=E.isCenterAnchor,f.isRightAnchor=E.isRightAnchor,f.isTopAnchor=E.isTopAnchor,f.isMiddleAnchor=E.isMiddleAnchor,f.isBottomAnchor=E.isBottomAnchor;var k=h("./geometry2d");f.segmentsIntersect=k.segmentsIntersect,f.segmentDistance=k.segmentDistance,f.getTextLocation=k.getTextLocation,f.clearLocationCache=k.clearLocationCache,f.getVisibleSegment=k.getVisibleSegment,f.findPointOnPath=k.findPointOnPath;var C=h("./extend");f.extendFlat=C.extendFlat,f.extendDeep=C.extendDeep,f.extendDeepAll=C.extendDeepAll,f.extendDeepNoArrays=C.extendDeepNoArrays;var L=h("./loggers");f.log=L.log,f.warn=L.warn,f.error=L.error;var P=h("./regex");f.counterRegex=P.counter;var A=h("./throttle");f.throttle=A.throttle,f.throttleDone=A.done,f.clearThrottle=A.clear;var I=h("./dom");function D(V){var W={};for(var Z in V)for(var oe=V[Z],ie=0;ie<oe.length;ie++)W[oe[ie]]=+Z;return W}f.getGraphDiv=I.getGraphDiv,f.isPlotDiv=I.isPlotDiv,f.removeElement=I.removeElement,f.addStyleRule=I.addStyleRule,f.addRelatedStyleRule=I.addRelatedStyleRule,f.deleteRelatedStyleRule=I.deleteRelatedStyleRule,f.getFullTransformMatrix=I.getFullTransformMatrix,f.getElementTransformMatrix=I.getElementTransformMatrix,f.getElementAndAncestors=I.getElementAndAncestors,f.equalDomRects=I.equalDomRects,f.clearResponsive=h("./clear_responsive"),f.preserveDrawingBuffer=h("./preserve_drawing_buffer"),f.makeTraceGroups=h("./make_trace_groups"),f._=h("./localize"),f.notifier=h("./notifier"),f.filterUnique=h("./filter_unique"),f.filterVisible=h("./filter_visible"),f.pushUnique=h("./push_unique"),f.increment=h("./increment"),f.cleanNumber=h("./clean_number"),f.ensureNumber=function(V){return p(V)?(V=Number(V))>u||V<c?l:V:l},f.isIndex=function(V,W){return!(void 0!==W&&V>=W)&&p(V)&&V>=0&&V%1==0},f.noop=h("./noop"),f.identity=h("./identity"),f.repeat=function(V,W){for(var Z=new Array(W),oe=0;oe<W;oe++)Z[oe]=V;return Z},f.swapAttrs=function(V,W,Z,oe){Z||(Z="x"),oe||(oe="y");for(var ie=0;ie<W.length;ie++){var ue=W[ie],fe=f.nestedProperty(V,ue.replace("?",Z)),he=f.nestedProperty(V,ue.replace("?",oe)),de=fe.get();fe.set(he.get()),he.set(de)}},f.raiseToTop=function(V){V.parentNode.appendChild(V)},f.cancelTransition=function(V){return V.transition().duration(0)},f.constrain=function(V,W,Z){return W>Z?Math.max(Z,Math.min(W,V)):Math.max(W,Math.min(Z,V))},f.bBoxIntersect=function(V,W,Z){return V.left<=W.right+(Z=Z||0)&&W.left<=V.right+Z&&V.top<=W.bottom+Z&&W.top<=V.bottom+Z},f.simpleMap=function(V,W,Z,oe,ie){for(var ue=V.length,fe=new Array(ue),he=0;he<ue;he++)fe[he]=W(V[he],Z,oe,ie);return fe},f.randstr=function V(W,Z,oe,ie){if(oe||(oe=16),void 0===Z&&(Z=24),Z<=0)return"0";var ue,fe,he=Math.log(Math.pow(2,Z))/Math.log(oe),de="";for(ue=2;he===1/0;ue*=2)he=Math.log(Math.pow(2,Z/ue))/Math.log(oe)*ue;var be=he-Math.floor(he);for(ue=0;ue<Math.floor(he);ue++)de=Math.floor(Math.random()*oe).toString(oe)+de;be&&(fe=Math.pow(oe,be),de=Math.floor(Math.random()*fe).toString(oe)+de);var pe=parseInt(de,oe);return W&&W[de]||pe!==1/0&&pe>=Math.pow(2,Z)?ie>10?(f.warn("randstr failed uniqueness"),de):V(W,Z,oe,(ie||0)+1):de},f.OptionControl=function(V,W){V||(V={}),W||(W="opt");var Z={optionList:[],_newoption:function(oe){oe[W]=V,Z[oe.name]=oe,Z.optionList.push(oe)}};return Z["_"+W]=V,Z},f.smooth=function(V,W){if((W=Math.round(W)||0)<2)return V;var Z,oe,ie,ue,fe=V.length,he=2*fe,de=2*W-1,be=new Array(de),pe=new Array(fe);for(Z=0;Z<de;Z++)be[Z]=(1-Math.cos(Math.PI*(Z+1)/W))/(2*W);for(Z=0;Z<fe;Z++){for(ue=0,oe=0;oe<de;oe++)(ie=Z+oe+1-W)<-fe?ie-=he*Math.round(ie/he):ie>=he&&(ie-=he*Math.floor(ie/he)),ie<0?ie=-1-ie:ie>=fe&&(ie=he-1-ie),ue+=V[ie]*be[oe];pe[Z]=ue}return pe},f.syncOrAsync=function(V,W,Z){var oe;function ie(){return f.syncOrAsync(V,W,Z)}for(;V.length;)if((oe=(0,V.splice(0,1)[0])(W))&&oe.then)return oe.then(ie).then(void 0,f.promiseError);return Z&&Z(W)},f.stripTrailingSlash=function(V){return"/"===V.substr(-1)?V.substr(0,V.length-1):V},f.noneOrAll=function(V,W,Z){if(V){var oe,ie=!1,ue=!0;for(oe=0;oe<Z.length;oe++)null!=V[Z[oe]]?ie=!0:ue=!1;if(ie&&!ue)for(oe=0;oe<Z.length;oe++)V[Z[oe]]=W[Z[oe]]}},f.mergeArray=function(V,W,Z,oe){var ie="function"==typeof oe;if(f.isArrayOrTypedArray(V))for(var ue=Math.min(V.length,W.length),fe=0;fe<ue;fe++){var he=V[fe];W[fe][Z]=ie?oe(he):he}},f.mergeArrayCastPositive=function(V,W,Z){return f.mergeArray(V,W,Z,function(oe){var ie=+oe;return isFinite(ie)&&ie>0?ie:0})},f.fillArray=function(V,W,Z,oe){if(oe=oe||f.identity,f.isArrayOrTypedArray(V))for(var ie=0;ie<W.length;ie++)W[ie][Z]=oe(V[ie])},f.castOption=function(V,W,Z,oe){oe=oe||f.identity;var ie=f.nestedProperty(V,Z).get();return f.isArrayOrTypedArray(ie)?Array.isArray(W)&&f.isArrayOrTypedArray(ie[W[0]])?oe(ie[W[0]][W[1]]):oe(ie[W]):ie},f.extractOption=function(V,W,Z,oe){if(Z in V)return V[Z];var ie=f.nestedProperty(W,oe).get();return Array.isArray(ie)?void 0:ie},f.tagSelected=function(V,W,Z){var oe,ie,ue=W.selectedpoints,fe=W._indexToPoints;fe&&(oe=D(fe));for(var he=0;he<ue.length;he++){var de=ue[he];if(f.isIndex(de)||f.isArrayOrTypedArray(de)&&f.isIndex(de[0])&&f.isIndex(de[1])){var be=oe?oe[de]:de,pe=Z?Z[be]:be;void 0!==(ie=pe)&&ie<V.length&&(V[pe].selected=1)}}},f.selIndices2selPoints=function(V){var W=V.selectedpoints,Z=V._indexToPoints;if(Z){for(var oe=D(Z),ie=[],ue=0;ue<W.length;ue++){var fe=W[ue];if(f.isIndex(fe)){var he=oe[fe];f.isIndex(he)&&ie.push(he)}}return ie}return W},f.getTargetArray=function(V,W){var Z=W.target;if("string"==typeof Z&&Z){var oe=f.nestedProperty(V,Z).get();return!!Array.isArray(oe)&&oe}return!!Array.isArray(Z)&&Z},f.minExtend=function(V,W){var Z={};"object"!=typeof W&&(W={});var oe,ie,ue,fe=Object.keys(V);for(oe=0;oe<fe.length;oe++)ue=V[ie=fe[oe]],"_"!==ie.charAt(0)&&"function"!=typeof ue&&(Z[ie]="module"===ie?ue:Array.isArray(ue)?"colorscale"===ie?ue.slice():ue.slice(0,3):f.isTypedArray(ue)?ue.subarray(0,3):ue&&"object"==typeof ue?f.minExtend(V[ie],W[ie]):ue);for(fe=Object.keys(W),oe=0;oe<fe.length;oe++)"object"==typeof(ue=W[ie=fe[oe]])&&ie in Z&&"object"==typeof Z[ie]||(Z[ie]=ue);return Z},f.titleCase=function(V){return V.charAt(0).toUpperCase()+V.substr(1)},f.containsAny=function(V,W){for(var Z=0;Z<W.length;Z++)if(-1!==V.indexOf(W[Z]))return!0;return!1},f.isIE=function(){return void 0!==window.navigator.msSaveBlob};var R=/Version\/[\d\.]+.*Safari/;f.isSafari=function(){return R.test(window.navigator.userAgent)};var S=/iPad|iPhone|iPod/;f.isIOS=function(){return S.test(window.navigator.userAgent)};var N=/Firefox\/(\d+)\.\d+/;f.getFirefoxVersion=function(){var V=N.exec(window.navigator.userAgent);if(V&&2===V.length){var W=parseInt(V[1]);if(!isNaN(W))return W}return null},f.isD3Selection=function(V){return V instanceof i.selection},f.ensureSingle=function(V,W,Z,oe){var ie=V.select(W+(Z?"."+Z:""));if(ie.size())return ie;var ue=V.append(W);return Z&&ue.classed(Z,!0),oe&&ue.call(oe),ue},f.ensureSingleById=function(V,W,Z,oe){var ie=V.select(W+"#"+Z);if(ie.size())return ie;var ue=V.append(W).attr("id",Z);return oe&&ue.call(oe),ue},f.objectFromPath=function(V,W){for(var Z,oe=V.split("."),ie=Z={},ue=0;ue<oe.length;ue++){var fe=oe[ue],he=null,de=oe[ue].match(/(.*)\[([0-9]+)\]/);de?(he=de[2],(Z=Z[fe=de[1]]=[])[he]=ue===oe.length-1?W:{},Z=Z[he]):(Z[fe]=ue===oe.length-1?W:{},Z=Z[fe])}return ie};var B=/^([^\[\.]+)\.(.+)?/,H=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;f.expandObjectPaths=function(V){var W,Z,oe,ie,ue,fe,he;if("object"==typeof V&&!Array.isArray(V))for(Z in V)V.hasOwnProperty(Z)&&((W=Z.match(B))?(ie=V[Z],oe=W[1],delete V[Z],V[oe]=f.extendDeepNoArrays(V[oe]||{},f.objectFromPath(Z,f.expandObjectPaths(ie))[oe])):(W=Z.match(H))?(ie=V[Z],oe=W[1],ue=parseInt(W[2]),delete V[Z],V[oe]=V[oe]||[],"."===W[3]?(he=W[4],fe=V[oe][ue]=V[oe][ue]||{},f.extendDeepNoArrays(fe,f.objectFromPath(he,f.expandObjectPaths(ie)))):V[oe][ue]=f.expandObjectPaths(ie)):V[Z]=f.expandObjectPaths(V[Z]));return V},f.numSeparate=function(V,W,Z){if(Z||(Z=!1),"string"!=typeof W||0===W.length)throw new Error("Separator string required for formatting!");"number"==typeof V&&(V=String(V));var oe=/(\d+)(\d{3})/,ie=W.charAt(0),ue=W.charAt(1),fe=V.split("."),he=fe[0],de=fe.length>1?ie+fe[1]:"";if(ue&&(fe.length>1||he.length>4||Z))for(;oe.test(he);)he=he.replace(oe,"$1"+ue+"$2");return he+de},f.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var Y=/^\w*$/;f.templateString=function(V,W){var Z={};return V.replace(f.TEMPLATE_STRING_REGEX,function(oe,ie){var ue;return Y.test(ie)?ue=W[ie]:(Z[ie]=Z[ie]||f.nestedProperty(W,ie).get,ue=Z[ie]()),f.isValidTextValue(ue)?ue:""})};var Q={max:10,count:0,name:"hovertemplate"};f.hovertemplateString=function(){return te.apply(Q,arguments)};var ne={max:10,count:0,name:"texttemplate"};f.texttemplateString=function(){return te.apply(ne,arguments)};var ae=/^[:|\|]/;function te(V,W,Z){var oe=this,ie=arguments;W||(W={});var ue={};return V.replace(f.TEMPLATE_STRING_REGEX,function(fe,he,de){var be,pe,Te,ye="_xother"===he||"_yother"===he,ke="_xother_"===he||"_yother_"===he,ze="xother_"===he||"yother_"===he,je="xother"===he||"yother"===he||ye||ze||ke,Ie=he;if((ye||ke)&&(Ie=Ie.substring(1)),(ze||ke)&&(Ie=Ie.substring(0,Ie.length-1)),je){if(void 0===(be=W[Ie]))return""}else for(Te=3;Te<ie.length;Te++)if(pe=ie[Te]){if(pe.hasOwnProperty(Ie)){be=pe[Ie];break}if(Y.test(Ie)||(be=f.nestedProperty(pe,Ie).get(),(be=ue[Ie]||f.nestedProperty(pe,Ie).get())&&(ue[Ie]=be)),void 0!==be)break}if(void 0===be&&oe)return oe.count<oe.max&&(f.warn("Variable '"+Ie+"' in "+oe.name+" could not be found!"),be=fe),oe.count===oe.max&&f.warn("Too many "+oe.name+" warnings - additional warnings will be suppressed"),oe.count++,fe;if(de){var Ce;if(":"===de[0]&&(be=(Ce=Z?Z.numberFormat:f.numberFormat)(de.replace(ae,""))(be)),"|"===de[0]){Ce=Z?Z.timeFormat:m;var _e=f.dateTime2ms(be);be=f.formatDate(_e,de.replace(ae,""),!1,Ce)}}else{var we=Ie+"Label";W.hasOwnProperty(we)&&(be=W[we])}return je&&(be="("+be+")",(ye||ke)&&(be=" "+be),(ze||ke)&&(be+=" ")),be})}f.subplotSort=function(V,W){for(var Z=Math.min(V.length,W.length)+1,oe=0,ie=0,ue=0;ue<Z;ue++){var fe=V.charCodeAt(ue)||0,he=W.charCodeAt(ue)||0,de=fe>=48&&fe<=57,be=he>=48&&he<=57;if(de&&(oe=10*oe+fe-48),be&&(ie=10*ie+he-48),!de||!be){if(oe!==ie)return oe-ie;if(fe!==he)return fe-he}}return ie-oe};var K=2e9;f.seedPseudoRandom=function(){K=2e9},f.pseudoRandom=function(){var V=K;return K=(69069*K+1)%4294967296,Math.abs(K-V)<429496729?f.pseudoRandom():K/4294967296},f.fillText=function(V,W,Z){var oe=Array.isArray(Z)?function(fe){Z.push(fe)}:function(fe){Z.text=fe},ie=f.extractOption(V,W,"htx","hovertext");if(f.isValidTextValue(ie))return oe(ie);var ue=f.extractOption(V,W,"tx","text");return f.isValidTextValue(ue)?oe(ue):void 0},f.isValidTextValue=function(V){return V||0===V},f.formatPercent=function(V,W){W=W||0;for(var Z=(Math.round(100*V*Math.pow(10,W))*Math.pow(.1,W)).toFixed(W)+"%",oe=0;oe<W;oe++)-1!==Z.indexOf(".")&&(Z=(Z=Z.replace("0%","%")).replace(".%","%"));return Z},f.isHidden=function(V){var W=window.getComputedStyle(V).display;return!W||"none"===W},f.strTranslate=function(V,W){return V||W?"translate("+V+","+W+")":""},f.strRotate=function(V){return V?"rotate("+V+")":""},f.strScale=function(V){return 1!==V?"scale("+V+")":""},f.getTextTransform=function(V){var W=V.noCenter,Z=V.textX,oe=V.textY,de=V.rotate,be=V.scale;return be?be>1&&(be=1):be=0,f.strTranslate(V.targetX-be*(Z+(V.anchorX||0)),V.targetY-be*(oe+(V.anchorY||0)))+f.strScale(be)+(de?"rotate("+de+(W?"":" "+Z+" "+oe)+")":"")},f.ensureUniformFontSize=function(V,W){var Z=f.extendFlat({},W);return Z.size=Math.max(W.size,V._fullLayout.uniformtext.minsize||0),Z},f.join2=function(V,W,Z){var oe=V.length;return oe>1?V.slice(0,-1).join(W)+Z+V[oe-1]:V.join(W)},f.bigFont=function(V){return Math.round(1.2*V)};var q=f.getFirefoxVersion(),re=null!==q&&q<86;f.getPositionFromD3Event=function(){return re?[i.event.layerX,i.event.layerY]:[i.event.offsetX,i.event.offsetY]}},{"../constants/numerical":779,"./anchor_utils":783,"./angles":784,"./array":785,"./clean_number":786,"./clear_responsive":788,"./coerce":789,"./dates":790,"./dom":791,"./extend":793,"./filter_unique":794,"./filter_visible":795,"./geometry2d":798,"./identity":801,"./increment":802,"./is_plain_object":804,"./keyed_container":805,"./localize":806,"./loggers":807,"./make_trace_groups":808,"./matrix":809,"./mod":810,"./nested_property":811,"./noop":812,"./notifier":813,"./preserve_drawing_buffer":817,"./push_unique":818,"./regex":820,"./relative_attr":821,"./relink_private":822,"./search":823,"./sort_object_keys":826,"./stats":827,"./throttle":830,"./to_log_range":831,"@plotly/d3":58,"d3-format":167,"d3-time-format":175,"fast-isnumeric":249}],804:[function(h,G,X){"use strict";G.exports=function(i){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(i):"[object Object]"===Object.prototype.toString.call(i)&&Object.getPrototypeOf(i).hasOwnProperty("hasOwnProperty")}},{}],805:[function(h,G,X){"use strict";var i=h("./nested_property"),m=/^\w*$/;G.exports=function(b,p,r,u){var c,l,f;r=r||"name",u=u||"value";var s={};p&&p.length?(f=i(b,p),l=f.get()):l=b,p=p||"";var o={};if(l)for(c=0;c<l.length;c++)o[l[c][r]]=c;var d=m.test(u),g={set:function(y,v){var _=null===v?4:0;if(!l){if(!f||4===_)return;f.set(l=[])}var w=o[y];if(void 0===w){if(4===_)return;_|=3,o[y]=w=l.length}else v!==(d?l[w][u]:i(l[w],u).get())&&(_|=2);var x=l[w]=l[w]||{};return x[r]=y,d?x[u]=v:i(x,u).set(v),null!==v&&(_&=-5),s[w]=s[w]|_,g},get:function(y){if(l){var v=o[y];return void 0===v?void 0:d?l[v][u]:i(l[v],u).get()}},rename:function(y,v){var _=o[y];return void 0===_||(s[_]=1|s[_],o[v]=_,delete o[y],l[_][r]=v),g},remove:function(y){var v=o[y];if(void 0===v)return g;var _=l[v];if(Object.keys(_).length>2)return s[v]=2|s[v],g.set(y,null);if(d){for(c=v;c<l.length;c++)s[c]=3|s[c];for(c=v;c<l.length;c++)o[l[c][r]]--;l.splice(v,1),delete o[y]}else i(_,u).set(null),s[v]=6|s[v];return g},constructUpdate:function(){for(var y,v,_={},w=Object.keys(s),x=0;x<w.length;x++)y=p+"["+(v=w[x])+"]",l[v]?(1&s[v]&&(_[y+"."+r]=l[v][r]),2&s[v]&&(_[y+"."+u]=d?4&s[v]?null:l[v][u]:4&s[v]?null:i(l[v],u).get())):_[y]=null;return _}};return g}},{"./nested_property":811}],806:[function(h,G,X){"use strict";var i=h("../registry");G.exports=function(m,b){for(var p=m._context.locale,r=0;r<2;r++){for(var u=m._context.locales,c=0;c<2;c++){var l=(u[p]||{}).dictionary;if(l){var f=l[b];if(f)return f}u=i.localeRegistry}var s=p.split("-")[0];if(s===p)break;p=s}return b}},{"../registry":931}],807:[function(h,G,X){"use strict";var i=h("../plot_api/plot_config").dfltConfig,m=h("./notifier"),b=G.exports={};b.log=function(){var p;if(i.logging>1){var r=["LOG:"];for(p=0;p<arguments.length;p++)r.push(arguments[p]);console.trace.apply(console,r)}if(i.notifyOnLogging>1){var u=[];for(p=0;p<arguments.length;p++)u.push(arguments[p]);m(u.join("<br>"),"long")}},b.warn=function(){var p;if(i.logging>0){var r=["WARN:"];for(p=0;p<arguments.length;p++)r.push(arguments[p]);console.trace.apply(console,r)}if(i.notifyOnLogging>0){var u=[];for(p=0;p<arguments.length;p++)u.push(arguments[p]);m(u.join("<br>"),"stick")}},b.error=function(){var p;if(i.logging>0){var r=["ERROR:"];for(p=0;p<arguments.length;p++)r.push(arguments[p]);console.error.apply(console,r)}if(i.notifyOnLogging>0){var u=[];for(p=0;p<arguments.length;p++)u.push(arguments[p]);m(u.join("<br>"),"stick")}}},{"../plot_api/plot_config":841,"./notifier":813}],808:[function(h,G,X){"use strict";var i=h("@plotly/d3");G.exports=function(m,b,p){var r=m.selectAll("g."+p.replace(/\s/g,".")).data(b,function(c){return c[0].trace.uid});r.exit().remove(),r.enter().append("g").attr("class",p),r.order();var u=m.classed("rangeplot")?"nodeRangePlot3":"node3";return r.each(function(c){c[0][u]=i.select(this)}),r}},{"@plotly/d3":58}],809:[function(h,G,X){"use strict";var i=h("gl-mat4");X.init2dArray=function(m,b){for(var p=new Array(m),r=0;r<m;r++)p[r]=new Array(b);return p},X.transposeRagged=function(m){var b,p,r=0,u=m.length;for(b=0;b<u;b++)r=Math.max(r,m[b].length);var c=new Array(r);for(b=0;b<r;b++)for(c[b]=new Array(u),p=0;p<u;p++)c[b][p]=m[p][b];return c},X.dot=function(m,b){if(!m.length||!b.length||m.length!==b.length)return null;var p,r,u=m.length;if(m[0].length)for(p=new Array(u),r=0;r<u;r++)p[r]=X.dot(m[r],b);else if(b[0].length){var c=X.transposeRagged(b);for(p=new Array(c.length),r=0;r<c.length;r++)p[r]=X.dot(m,c[r])}else for(p=0,r=0;r<u;r++)p+=m[r]*b[r];return p},X.translationMatrix=function(m,b){return[[1,0,m],[0,1,b],[0,0,1]]},X.rotationMatrix=function(m){var b=m*Math.PI/180;return[[Math.cos(b),-Math.sin(b),0],[Math.sin(b),Math.cos(b),0],[0,0,1]]},X.rotationXYMatrix=function(m,b,p){return X.dot(X.dot(X.translationMatrix(b,p),X.rotationMatrix(m)),X.translationMatrix(-b,-p))},X.apply3DTransform=function(m){return function(){var b=arguments,p=1===arguments.length?b[0]:[b[0],b[1],b[2]||0];return X.dot(m,[p[0],p[1],p[2],1]).slice(0,3)}},X.apply2DTransform=function(m){return function(){var b=arguments;3===b.length&&(b=b[0]);var p=1===arguments.length?b[0]:[b[0],b[1]];return X.dot(m,[p[0],p[1],1]).slice(0,2)}},X.apply2DTransform2=function(m){var b=X.apply2DTransform(m);return function(p){return b(p.slice(0,2)).concat(b(p.slice(2,4)))}},X.convertCssMatrix=function(m){if(m){var b=m.length;if(16===b)return m;if(6===b)return[m[0],m[1],0,0,m[2],m[3],0,0,0,0,1,0,m[4],m[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},X.inverseTransformMatrix=function(m){var b=[];return i.invert(b,m),[[b[0],b[1],b[2],b[3]],[b[4],b[5],b[6],b[7]],[b[8],b[9],b[10],b[11]],[b[12],b[13],b[14],b[15]]]}},{"gl-mat4":298}],810:[function(h,G,X){"use strict";G.exports={mod:function(i,m){var b=i%m;return b<0?b+m:b},modHalf:function(i,m){return Math.abs(i)>m/2?i-Math.round(i/m)*m:i}}},{}],811:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("./array").isArrayOrTypedArray;function b(s,o){return function(){var d,g,y,v,_,w=s;for(v=0;v<o.length-1;v++){if(-1===(d=o[v])){for(g=!0,y=[],_=0;_<w.length;_++)y[_]=b(w[_],o.slice(v+1))(),y[_]!==y[0]&&(g=!1);return g?y[0]:y}if("number"==typeof d&&!m(w)||"object"!=typeof(w=w[d])||null===w)return}if("object"==typeof w&&null!==w&&null!==(y=w[o[v]]))return y}}G.exports=function(s,o){if(i(o))o=String(o);else if("string"!=typeof o||"[-1]"===o.substr(o.length-4))throw"bad property string";for(var d,g,y,v=0,_=o.split(".");v<_.length;){if(d=String(_[v]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(d[1])_[v]=d[1];else{if(0!==v)throw"bad property string";_.splice(0,1)}for(g=d[2].substr(1,d[2].length-2).split("]["),y=0;y<g.length;y++)v++,_.splice(v,0,Number(g[y]))}v++}return"object"!=typeof s?{set:function(){throw"bad container"},get:function(){},astr:o,parts:_,obj:s}:{set:u(s,_,o),get:b(s,_),astr:o,parts:_,obj:s}};var p=/(^|\.)args\[/;function r(s,o){return void 0===s||null===s&&!o.match(p)}function u(s,o,d){return function(g){var y,v,_=s,w="",x=[[s,w]],E=r(g,d);for(v=0;v<o.length-1;v++){if("number"==typeof(y=o[v])&&!m(_))throw"array index but container is not an array";if(-1===y){if(E=!l(_,o.slice(v+1),g,d))break;return}if(!f(_,y,o[v+1],E))break;if("object"!=typeof(_=_[y])||null===_)throw"container is not an object";w=c(w,y),x.push([_,w])}if(E){if(v===o.length-1&&(delete _[o[v]],Array.isArray(_)&&+o[v]==_.length-1))for(;_.length&&void 0===_[_.length-1];)_.pop()}else _[o[v]]=g}}function c(s,o){var d=o;return i(o)?d="["+o+"]":s&&(d="."+o),s+d}function l(s,o,d,g){var y,v=m(d),_=!0,w=d,x=g.replace("-1",0),E=!v&&r(d,x),k=o[0];for(y=0;y<s.length;y++)x=g.replace("-1",y),v&&(E=r(w=d[y%d.length],x)),E&&(_=!1),f(s,y,k,E)&&u(s[y],o,g.replace("-1",y))(w);return _}function f(s,o,d,g){if(void 0===s[o]){if(g)return!1;s[o]="number"==typeof d?[]:{}}return!0}},{"./array":785,"fast-isnumeric":249}],812:[function(h,G,X){"use strict";G.exports=function(){}},{}],813:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("fast-isnumeric"),b=[];G.exports=function(p,r){if(-1===b.indexOf(p)){b.push(p);var u=1e3;m(r)?u=r:"long"===r&&(u=3e3);var c=i.select("body").selectAll(".plotly-notifier").data([0]);c.enter().append("div").classed("plotly-notifier",!0),c.selectAll(".notifier-note").data(b).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(f){var s=i.select(this);s.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){s.transition().call(l)});for(var o=s.append("p"),d=f.split(/<br\s*\/?>/g),g=0;g<d.length;g++)g&&o.append("br"),o.append("span").text(d[g]);"stick"===r?s.transition().duration(350).style("opacity",1):s.transition().duration(700).style("opacity",1).transition().delay(u).call(l)})}function l(f){f.duration(700).style("opacity",0).each("end",function(s){var o=b.indexOf(s);-1!==o&&b.splice(o,1),i.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":249}],814:[function(h,G,X){"use strict";var i=h("./setcursor"),m="data-savedcursor";G.exports=function(b,p){var r=b.attr(m);if(p){if(!r){for(var u=(b.attr("class")||"").split(" "),c=0;c<u.length;c++){var l=u[c];0===l.indexOf("cursor-")&&b.attr(m,l.substr(7)).classed(l,!1)}b.attr(m)||b.attr(m,"!!")}i(b,p)}else r&&(b.attr(m,null),"!!"===r?i(b):i(b,r))}},{"./setcursor":824}],815:[function(h,G,X){"use strict";var i=h("./matrix").dot,m=h("../constants/numerical").BADNUM,b=G.exports={};b.tester=function(p){var r,u=p.slice(),c=u[0][0],l=c,f=u[0][1],s=f;for(u.push(u[0]),r=1;r<u.length;r++)c=Math.min(c,u[r][0]),l=Math.max(l,u[r][0]),f=Math.min(f,u[r][1]),s=Math.max(s,u[r][1]);var o,d=!1;5===u.length&&(u[0][0]===u[1][0]?u[2][0]===u[3][0]&&u[0][1]===u[3][1]&&u[1][1]===u[2][1]&&(d=!0,o=function(v){return v[0]===u[0][0]}):u[0][1]===u[1][1]&&u[2][1]===u[3][1]&&u[0][0]===u[3][0]&&u[1][0]===u[2][0]&&(d=!0,o=function(v){return v[1]===u[0][1]}));var g=!0,y=u[0];for(r=1;r<u.length;r++)if(y[0]!==u[r][0]||y[1]!==u[r][1]){g=!1;break}return{xmin:c,xmax:l,ymin:f,ymax:s,pts:u,contains:d?function(v,_){var w=v[0],x=v[1];return!(w===m||w<c||w>l||x===m||x<f||x>s||_&&o(v))}:function(v,_){var w=v[0],x=v[1];if(w===m||w<c||w>l||x===m||x<f||x>s)return!1;var E,k,C,L,P,A=u.length,I=u[0][0],D=u[0][1],R=0;for(E=1;E<A;E++)if(k=I,C=D,I=u[E][0],D=u[E][1],!(w<(L=Math.min(k,I))||w>Math.max(k,I)||x>Math.max(C,D)))if(x<Math.min(C,D))w!==L&&R++;else{if(x===(P=I===k?x:C+(w-k)*(D-C)/(I-k)))return 1!==E||!_;x<=P&&w!==L&&R++}return R%2==1},isRect:d,degenerate:g}},b.isSegmentBent=function(p,r,u,c){var l,f,s,o=p[r],d=[p[u][0]-o[0],p[u][1]-o[1]],g=i(d,d),y=Math.sqrt(g),v=[-d[1]/y,d[0]/y];for(l=r+1;l<u;l++)if((s=i(f=[p[l][0]-o[0],p[l][1]-o[1]],d))<0||s>g||Math.abs(i(f,v))>c)return!0;return!1},b.filter=function(p,r){var u=[p[0]],c=0,l=0;function f(s){p.push(s);var o=u.length,d=c;u.splice(l+1);for(var g=d+1;g<p.length;g++)(g===p.length-1||b.isSegmentBent(p,d,g+1,r))&&(u.push(p[g]),u.length<o-2&&(c=g,l=u.length-1),d=g)}return p.length>1&&f(p.pop()),{addPt:f,raw:p,filtered:u}}},{"../constants/numerical":779,"./matrix":809}],816:[function(h,G,X){(function(i){(function(){"use strict";var m=h("./show_no_webgl_msg"),b=h("regl");G.exports=function(p,r){var u=p._fullLayout,c=!0;return u._glcanvas.each(function(l){if(!l.regl&&(!l.pick||u._has("parcoords"))){try{l.regl=b({canvas:this,attributes:{antialias:!l.pick,preserveDrawingBuffer:!0},pixelRatio:p._context.plotGlPixelRatio||i.devicePixelRatio,extensions:r||[]})}catch(f){c=!1}l.regl||(c=!1),c&&this.addEventListener("webglcontextlost",function(f){p&&p.emit&&p.emit("plotly_webglcontextlost",{event:f,layer:l.key})},!1)}}),c||m({container:u._glcontainer.node()}),c}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./show_no_webgl_msg":825,regl:540}],817:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("is-mobile");G.exports=function(b){var p,o;if("string"!=typeof(p=b&&b.hasOwnProperty("userAgent")?b.userAgent:("undefined"!=typeof navigator&&(o=navigator.userAgent),o&&o.headers&&"string"==typeof o.headers["user-agent"]&&(o=o.headers["user-agent"]),o)))return!0;var r=m({ua:{headers:{"user-agent":p}},tablet:!0,featureDetect:!1});if(!r)for(var u=p.split(" "),c=1;c<u.length;c++)if(-1!==u[c].indexOf("Safari"))for(var l=c-1;l>-1;l--){var f=u[l];if("Version/"===f.substr(0,8)){var s=f.substr(8).split(".")[0];if(i(s)&&(s=+s),s>=13)return!0}}return r}},{"fast-isnumeric":249,"is-mobile":455}],818:[function(h,G,X){"use strict";G.exports=function(i,m){if(m instanceof RegExp){for(var b=m.toString(),p=0;p<i.length;p++)if(i[p]instanceof RegExp&&i[p].toString()===b)return i;i.push(m)}else!m&&0!==m||-1!==i.indexOf(m)||i.push(m);return i}},{}],819:[function(h,G,X){"use strict";var i=h("../lib"),m=h("../plot_api/plot_config").dfltConfig,b={add:function(p,r,u,c,l){var f,s;p.undoQueue=p.undoQueue||{index:0,queue:[],sequence:!1},s=p.undoQueue.index,p.autoplay?p.undoQueue.inSequence||(p.autoplay=!1):(!p.undoQueue.sequence||p.undoQueue.beginSequence?(p.undoQueue.queue.splice(s,p.undoQueue.queue.length-s,f={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),p.undoQueue.index+=1):f=p.undoQueue.queue[s-1],p.undoQueue.beginSequence=!1,f&&(f.undo.calls.unshift(r),f.undo.args.unshift(u),f.redo.calls.push(c),f.redo.args.push(l)),p.undoQueue.queue.length>m.queueLength&&(p.undoQueue.queue.shift(),p.undoQueue.index--))},startSequence:function(p){p.undoQueue=p.undoQueue||{index:0,queue:[],sequence:!1},p.undoQueue.sequence=!0,p.undoQueue.beginSequence=!0},stopSequence:function(p){p.undoQueue=p.undoQueue||{index:0,queue:[],sequence:!1},p.undoQueue.sequence=!1,p.undoQueue.beginSequence=!1},undo:function(p){var r,u;if(!(void 0===p.undoQueue||isNaN(p.undoQueue.index)||p.undoQueue.index<=0)){for(p.undoQueue.index--,r=p.undoQueue.queue[p.undoQueue.index],p.undoQueue.inSequence=!0,u=0;u<r.undo.calls.length;u++)b.plotDo(p,r.undo.calls[u],r.undo.args[u]);p.undoQueue.inSequence=!1,p.autoplay=!1}},redo:function(p){var r,u;if(!(void 0===p.undoQueue||isNaN(p.undoQueue.index)||p.undoQueue.index>=p.undoQueue.queue.length)){for(r=p.undoQueue.queue[p.undoQueue.index],p.undoQueue.inSequence=!0,u=0;u<r.redo.calls.length;u++)b.plotDo(p,r.redo.calls[u],r.redo.args[u]);p.undoQueue.inSequence=!1,p.autoplay=!1,p.undoQueue.index++}},plotDo:function(p,r,u){p.autoplay=!0,u=function(c,l){for(var f,s=[],o=0;o<l.length;o++)s[o]=(f=l[o])===c?f:"object"==typeof f?Array.isArray(f)?i.extendDeep([],f):i.extendDeepAll({},f):f;return s}(p,u),r.apply(null,u)}};G.exports=b},{"../lib":803,"../plot_api/plot_config":841}],820:[function(h,G,X){"use strict";X.counter=function(i,m,b,p){var r=(m||"")+(b?"":"$"),u=!1===p?"":"^";return"xy"===i?new RegExp(u+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+r):new RegExp(u+i+"([2-9]|[1-9][0-9]+)?"+r)}},{}],821:[function(h,G,X){"use strict";var i=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,m=/^[^\.\[\]]+$/;G.exports=function(b,p){for(;p;){var r=b.match(i);if(r)b=r[1];else{if(!b.match(m))throw new Error("bad relativeAttr call:"+[b,p]);b=""}if("^"!==p.charAt(0))break;p=p.slice(1)}return b&&"["!==p.charAt(0)?b+"."+p:b+p}},{}],822:[function(h,G,X){"use strict";var i=h("./array").isArrayOrTypedArray,m=h("./is_plain_object");G.exports=function b(p,r){for(var u in r){var c=r[u],l=p[u];if(l!==c)if("_"===u.charAt(0)||"function"==typeof c){if(u in p)continue;p[u]=c}else if(i(c)&&i(l)&&m(c[0])){if("customdata"===u||"ids"===u)continue;for(var f=Math.min(c.length,l.length),s=0;s<f;s++)l[s]!==c[s]&&m(c[s])&&m(l[s])&&b(l[s],c[s])}else m(c)&&m(l)&&(b(l,c),Object.keys(l).length||delete p[u])}}},{"./array":785,"./is_plain_object":804}],823:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("./loggers"),b=h("./identity"),p=h("../constants/numerical").BADNUM;function r(f,s){return f<s}function u(f,s){return f<=s}function c(f,s){return f>s}function l(f,s){return f>=s}X.findBin=function(f,s,o){if(i(s.start))return o?Math.ceil((f-s.start)/s.size-1e-9)-1:Math.floor((f-s.start)/s.size+1e-9);var d,g,y=0,v=s.length,_=0,w=v>1?(s[v-1]-s[0])/(v-1):1;for(g=w>=0?o?r:u:o?l:c,f+=1e-9*w*(o?-1:1)*(w>=0?1:-1);y<v&&_++<100;)g(s[d=Math.floor((y+v)/2)],f)?y=d+1:v=d;return _>90&&m.log("Long binary search..."),y-1},X.sorterAsc=function(f,s){return f-s},X.sorterDes=function(f,s){return s-f},X.distinctVals=function(f){var s,o=f.slice();for(o.sort(X.sorterAsc),s=o.length-1;s>-1&&o[s]===p;s--);for(var d,g=o[s]-o[0]||1,y=g/(s||1)/1e4,v=[],_=0;_<=s;_++){var w=o[_],x=w-d;void 0===d?(v.push(w),d=w):x>y&&(g=Math.min(g,x),v.push(w),d=w)}return{vals:v,minDiff:g}},X.roundUp=function(f,s,o){for(var d,g=0,y=s.length-1,v=0,_=o?0:1,w=o?1:0,x=o?Math.ceil:Math.floor;g<y&&v++<100;)s[d=x((g+y)/2)]<=f?g=d+_:y=d-w;return s[g]},X.sort=function(f,s){for(var o=0,d=0,g=1;g<f.length;g++){var y=s(f[g],f[g-1]);if(y<0?o=1:y>0&&(d=1),o&&d)return f.sort(s)}return d?f:f.reverse()},X.findIndexOfMin=function(f,s){s=s||b;for(var o,d=1/0,g=0;g<f.length;g++){var y=s(f[g]);y<d&&(d=y,o=g)}return o}},{"../constants/numerical":779,"./identity":801,"./loggers":807,"fast-isnumeric":249}],824:[function(h,G,X){"use strict";G.exports=function(i,m){(i.attr("class")||"").split(" ").forEach(function(b){0===b.indexOf("cursor-")&&i.classed(b,!1)}),m&&i.classed("cursor-"+m,!0)}},{}],825:[function(h,G,X){"use strict";var i=h("../components/color"),m=function(){};G.exports=function(b){for(var p in b)"function"==typeof b[p]&&(b[p]=m);b.destroy=function(){b.container.parentNode.removeChild(b.container)};var r=document.createElement("div");r.className="no-webgl",r.style.cursor="pointer",r.style.fontSize="24px",r.style.color=i.defaults[0],r.style.position="absolute",r.style.left=r.style.top="0px",r.style.width=r.style.height="100%",r.style["background-color"]=i.lightLine,r.style["z-index"]=30;var u=document.createElement("p");return u.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",u.style.position="relative",u.style.top="50%",u.style.left="50%",u.style.height="30%",u.style.width="50%",u.style.margin="-15% 0 0 -25%",r.appendChild(u),b.container.appendChild(r),b.container.style.background="#FFFFFF",b.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":666}],826:[function(h,G,X){"use strict";G.exports=function(i){return Object.keys(i).sort()}},{}],827:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("./array").isArrayOrTypedArray;X.aggNums=function(b,p,r,u){var c,l;if((!u||u>r.length)&&(u=r.length),i(p)||(p=!1),m(r[0])){for(l=new Array(u),c=0;c<u;c++)l[c]=X.aggNums(b,p,r[c]);r=l}for(c=0;c<u;c++)i(p)?i(r[c])&&(p=b(+p,+r[c])):p=r[c];return p},X.len=function(b){return X.aggNums(function(p){return p+1},0,b)},X.mean=function(b,p){return p||(p=X.len(b)),X.aggNums(function(r,u){return r+u},0,b)/p},X.midRange=function(b){if(void 0!==b&&0!==b.length)return(X.aggNums(Math.max,null,b)+X.aggNums(Math.min,null,b))/2},X.variance=function(b,p,r){return p||(p=X.len(b)),i(r)||(r=X.mean(b,p)),X.aggNums(function(u,c){return u+Math.pow(c-r,2)},0,b)/p},X.stdev=function(b,p,r){return Math.sqrt(X.variance(b,p,r))},X.median=function(b){var p=b.slice().sort();return X.interp(p,.5)},X.interp=function(b,p){if(!i(p))throw"n should be a finite number";if((p=p*b.length-.5)<0)return b[0];if(p>b.length-1)return b[b.length-1];var r=p%1;return r*b[Math.ceil(p)]+(1-r)*b[Math.floor(p)]}},{"./array":785,"fast-isnumeric":249}],828:[function(h,G,X){"use strict";var i=h("color-normalize");G.exports=function(m){return m?i(m):[0,0,0,1]}},{"color-normalize":131}],829:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../lib"),b=m.strTranslate,p=h("../constants/xmlns_namespaces"),r=h("../constants/alignment").LINE_SPACING;function u(N,B){return N.node().getBoundingClientRect()[B]}var c=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;X.convertToTspans=function(N,B,H){var Y=N.text(),Q=!N.attr("data-notex")&&"undefined"!=typeof MathJax&&Y.match(c),ne=i.select(N.node().parentNode);if(!ne.empty()){var ae=N.attr("class")?N.attr("class").split(" ")[0]:"text";return ne.selectAll("svg."+(ae+="-math")).remove(),ne.selectAll("g."+ae+"-group").remove(),N.style("display",null).attr({"data-unformatted":Y,"data-math":"N"}),Q?(B&&B._promises||[]).push(new Promise(function(K){N.style("display","none");var V,W,Z,oe,ie,ue,fe,q=parseInt(N.node().style.fontSize,10);V=Q[2],W={fontSize:q},Z=function(V,W,Z){ne.selectAll("svg."+ae).remove(),ne.selectAll("g."+ae+"-group").remove();var oe=V&&V.select("svg");if(!oe||!oe.node())return te(),void K();var ie=ne.append("g").classed(ae+"-group",!0).attr({"pointer-events":"none","data-unformatted":Y,"data-math":"Y"});ie.node().appendChild(oe.node()),W&&W.node()&&oe.node().insertBefore(W.node().cloneNode(!0),oe.node().firstChild),oe.attr({class:ae,height:Z.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ue=N.node().style.fill||"black",fe=oe.select("g");fe.attr({fill:ue,stroke:ue});var he=u(fe,"width"),de=u(fe,"height"),be=+N.attr("x")-he*{start:0,middle:.5,end:1}[N.attr("text-anchor")||"start"],pe=-(q||u(N,"height"))/4;"y"===ae[0]?(ie.attr({transform:"rotate("+[-90,+N.attr("x"),+N.attr("y")]+")"+b(-he/2,pe-de/2)}),oe.attr({x:+N.attr("x"),y:+N.attr("y")})):"l"===ae[0]?oe.attr({x:N.attr("x"),y:pe-de/2}):"a"===ae[0]&&0!==ae.indexOf("atitle")?oe.attr({x:0,y:pe}):oe.attr({x:be,y:+N.attr("y")+pe-de/2}),H&&H.call(N,ie),K(ie)},MathJax.Hub.Queue(function(){return ie=m.extendDeepAll({},MathJax.Hub.config),ue=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(oe=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var he="math-output-"+m.randstr({},64);return fe=i.select("body").append("div").attr({id:he}).style({visibility:"hidden",position:"absolute"}).style({"font-size":W.fontSize+"px"}).text(V.replace(l,"\\lt ").replace(f,"\\gt ")),MathJax.Hub.Typeset(fe.node())},function(){var he=i.select("body").select("#MathJax_SVG_glyphs");if(fe.select(".MathJax_SVG").empty()||!fe.select("svg").node())m.log("There was an error in the tex syntax.",V),Z();else{var de=fe.select("svg").node().getBoundingClientRect();Z(fe.select(".MathJax_SVG"),he,de)}if(fe.remove(),"SVG"!==oe)return MathJax.Hub.setRenderer(oe)},function(){return void 0!==ue&&(MathJax.Hub.processSectionDelay=ue),MathJax.Hub.Config(ie)})})):te(),N}function te(){ne.empty()||(ae=N.attr("class")+"-math",ne.select("svg."+ae).remove()),N.text("").style("white-space","pre"),function(K,q){q=q.replace(y," ");var re,V=!1,W=[],Z=-1;function oe(){Z++;var _e=document.createElementNS(p.svg,"tspan");i.select(_e).attr({class:"line",dy:Z*r+"em"}),K.appendChild(_e),re=_e;var we=W;if(W=[{node:_e}],we.length>1)for(var Se=1;Se<we.length;Se++)ie(we[Se])}function ie(_e){var we,Se=_e.type,Oe={};if("a"===Se){we="a";var Be=_e.target,He=_e.href,Xe=_e.popup;He&&(Oe={"xlink:xlink:show":"_blank"===Be||"_"!==Be.charAt(0)?"new":"replace",target:Be,"xlink:xlink:href":He},Xe&&(Oe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Xe+'");return false;'))}else we="tspan";_e.style&&(Oe.style=_e.style);var nt=document.createElementNS(p.svg,we);if("sup"===Se||"sub"===Se){ue(re,"\u200b"),re.appendChild(nt);var et=document.createElementNS(p.svg,"tspan");ue(et,"\u200b"),i.select(et).attr("dy",d[Se]),Oe.dy=o[Se],re.appendChild(nt),re.appendChild(et)}else re.appendChild(nt);i.select(nt).attr(Oe),re=_e.node=nt,W.push(_e)}function ue(_e,we){_e.appendChild(document.createTextNode(we))}function fe(_e){if(1!==W.length){var we=W.pop();_e!==we.type&&m.log("Start tag <"+we.type+"> doesnt match end tag <"+_e+">. Pretending it did match.",q),re=W[W.length-1].node}else m.log("Ignoring unexpected end tag </"+_e+">.",q)}w.test(q)?oe():(re=K,W=[{node:K}]);for(var he=q.split(v),de=0;de<he.length;de++){var be=he[de],pe=be.match(_),Te=pe&&pe[2].toLowerCase(),ye=s[Te];if("br"===Te)oe();else if(void 0===ye)ue(re,D(be));else if(pe[1])fe(Te);else{var ke=pe[4],ze={type:Te},je=L(ke,x);if(je?(je=je.replace(P,"$1 fill:"),ye&&(je+=";"+ye)):ye&&(je=ye),je&&(ze.style=je),"a"===Te){V=!0;var Ie=L(ke,E);if(Ie){var Ce=R(Ie);Ce&&(ze.href=Ce,ze.target=L(ke,k)||"_blank",ze.popup=L(ke,C))}}ie(ze)}}return V}(N.node(),Y)&&N.style("pointer-events","all"),X.positionText(N),H&&H.call(N)}};var l=/(<|&lt;|&#60;)/g,f=/(>|&gt;|&#62;)/g,s={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},o={sub:"0.3em",sup:"-0.6em"},d={sub:"-0.21em",sup:"0.42em"},g=["http:","https:","mailto:","",void 0,":"],y=X.NEWLINES=/(\r\n?|\n)/g,v=/(<[^<>]*>)/,_=/<(\/?)([^ >]*)(\s+(.*))?>/i,w=/<br(\s+.*)?>/i;X.BR_TAG_ALL=/<br(\s+.*)?>/gi;var x=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,E=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,k=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,C=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function L(N,B){if(!N)return null;var H=N.match(B),Y=H&&(H[3]||H[4]);return Y&&D(Y)}var P=/(^|;)\s*color:/;X.plainText=function(N,B){for(var H=void 0!==(B=B||{}).len&&-1!==B.len?B.len:1/0,Y=void 0!==B.allowedTags?B.allowedTags:["br"],Q="...".length,ne=N.split(v),ae=[],te="",K=0,q=0;q<ne.length;q++){var re=ne[q],V=re.match(_),W=V&&V[2].toLowerCase();if(W)-1!==Y.indexOf(W)&&(ae.push(re),te=W);else{var Z=re.length;if(K+Z<H)ae.push(re),K+=Z;else if(K<H){var oe=H-K;te&&("br"!==te||oe<=Q||Z<=Q)&&ae.pop(),ae.push(H>Q?re.substr(0,oe-Q)+"...":re.substr(0,oe));break}te=""}}return ae.join("")};var A={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},I=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function D(N){return N.replace(I,function(B,H){return("#"===H.charAt(0)?function(Y){if(!(Y>1114111)){var Q=String.fromCodePoint;if(Q)return Q(Y);var ne=String.fromCharCode;return Y<=65535?ne(Y):ne(55232+(Y>>10),Y%1024+56320)}}("x"===H.charAt(1)?parseInt(H.substr(2),16):parseInt(H.substr(1),10)):A[H])||B})}function R(N){var B=encodeURI(decodeURI(N)),H=document.createElement("a"),Y=document.createElement("a");H.href=N,Y.href=B;var ne=Y.protocol;return-1!==g.indexOf(H.protocol)&&-1!==g.indexOf(ne)?B:""}function S(N,B,H){var Y,Q,ne,ae=H.horizontalAlign,te=H.verticalAlign||"top",K=N.node().getBoundingClientRect(),q=B.node().getBoundingClientRect();return Q="bottom"===te?function(){return K.bottom-Y.height}:"middle"===te?function(){return K.top+(K.height-Y.height)/2}:function(){return K.top},ne="right"===ae?function(){return K.right-Y.width}:"center"===ae?function(){return K.left+(K.width-Y.width)/2}:function(){return K.left},function(){Y=this.node().getBoundingClientRect();var re=ne()-q.left,V=Q()-q.top,W=H.gd||{};if(H.gd){W._fullLayout._calcInverseTransform(W);var Z=m.apply3DTransform(W._fullLayout._invTransform)(re,V);re=Z[0],V=Z[1]}return this.style({top:V+"px",left:re+"px","z-index":1e3}),this}}X.convertEntities=D,X.sanitizeHTML=function(N){N=N.replace(y," ");for(var B=document.createElement("p"),H=B,Y=[],Q=N.split(v),ne=0;ne<Q.length;ne++){var ae=Q[ne],te=ae.match(_),K=te&&te[2].toLowerCase();if(K in s)if(te[1])Y.length&&(H=Y.pop());else{var q=te[4],re=L(q,x),V=re?{style:re}:{};if("a"===K){var W=L(q,E);if(W){var Z=R(W);if(Z){V.href=Z;var oe=L(q,k);oe&&(V.target=oe)}}}var ie=document.createElement(K);H.appendChild(ie),i.select(ie).attr(V),H=ie,Y.push(ie)}else H.appendChild(document.createTextNode(D(ae)))}return B.innerHTML},X.lineCount=function(N){return N.selectAll("tspan.line").size()||1},X.positionText=function(N,B,H){return N.each(function(){var Y=i.select(this);function Q(te,K){return void 0===K?null===(K=Y.attr(te))&&(Y.attr(te,0),K=0):Y.attr(te,K),K}var ne=Q("x",B),ae=Q("y",H);"text"===this.nodeName&&Y.selectAll("tspan.line").attr({x:ne,y:ae})})},X.makeTextShadow=function(N){var B="1px ",H="1px ",Y="1px ";return B+H+Y+N+", -"+B+"-"+H+Y+N+", "+B+"-"+H+Y+N+", -"+B+H+Y+N},X.makeEditable=function(N,B){var H=B.gd,Y=B.delegate,Q=i.dispatch("edit","input","cancel"),ne=Y||N;if(N.style({"pointer-events":Y?"none":"all"}),1!==N.size())throw new Error("boo");function ae(){var re,V,W,Z,oe;re=i.select(H).select(".svg-container"),V=re.append("div"),W=N.node().style,Z=parseFloat(W.fontSize||12),void 0===(oe=B.text)&&(oe=N.attr("data-unformatted")),V.classed("plugin-editable editable",!0).style({position:"absolute","font-family":W.fontFamily||"Arial","font-size":Z,color:B.fill||W.fill||"black",opacity:1,"background-color":B.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Z/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(oe).call(S(N,re,B)).on("blur",function(){H._editing=!1,N.text(this.textContent).style({opacity:1});var ie,ue=i.select(this).attr("class");(ie=ue?"."+ue.split(" ")[0]+"-math-group":"[class*=-math-group]")&&i.select(N.node().parentNode).select(ie).style({opacity:0});var fe=this.textContent;i.select(this).transition().duration(0).remove(),i.select(document).on("mouseup",null),Q.edit.call(N,fe)}).on("focus",function(){var ie=this;H._editing=!0,i.select(document).on("mouseup",function(){if(i.event.target===ie)return!1;document.activeElement===V.node()&&V.node().blur()})}).on("keyup",function(){27===i.event.which?(H._editing=!1,N.style({opacity:1}),i.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Q.cancel.call(N,this.textContent)):(Q.input.call(N,this.textContent),i.select(this).call(S(N,re,B)))}).on("keydown",function(){13===i.event.which&&this.blur()}).call(te),N.style({opacity:0});var K,q=ne.attr("class");(K=q?"."+q.split(" ")[0]+"-math-group":"[class*=-math-group]")&&i.select(N.node().parentNode).select(K).style({opacity:0})}function te(K){var q=K.node(),re=document.createRange();re.selectNodeContents(q);var V=window.getSelection();V.removeAllRanges(),V.addRange(re),q.focus()}return B.immediate?ae():ne.on("click",ae),i.rebind(N,Q,"on")}},{"../constants/alignment":771,"../constants/xmlns_namespaces":780,"../lib":803,"@plotly/d3":58}],830:[function(h,G,X){"use strict";var i={};function m(b){b&&null!==b.timer&&(clearTimeout(b.timer),b.timer=null)}X.throttle=function(b,p,r){var u=i[b],c=Date.now();if(!u){for(var l in i)i[l].ts<c-6e4&&delete i[l];u=i[b]={ts:0,timer:null}}function f(){r(),u.ts=Date.now(),u.onDone&&(u.onDone(),u.onDone=null)}m(u),c>u.ts+p?f():u.timer=setTimeout(function(){f(),u.timer=null},p)},X.done=function(b){var p=i[b];return p&&p.timer?new Promise(function(r){var u=p.onDone;p.onDone=function(){u&&u(),r(),p.onDone=null}}):Promise.resolve()},X.clear=function(b){if(b)m(i[b]),delete i[b];else for(var p in i)X.clear(p)}},{}],831:[function(h,G,X){"use strict";var i=h("fast-isnumeric");G.exports=function(m,b){if(m>0)return Math.log(m)/Math.LN10;var p=Math.log(Math.min(b[0],b[1]))/Math.LN10;return i(p)||(p=Math.log(Math.max(b[0],b[1]))/Math.LN10-6),p}},{"fast-isnumeric":249}],832:[function(h,G,X){"use strict";var i=G.exports={},m=h("../plots/geo/constants").locationmodeToLayer,b=h("topojson-client").feature;i.getTopojsonName=function(p){return[p.scope.replace(/ /g,"-"),"_",p.resolution.toString(),"m"].join("")},i.getTopojsonPath=function(p,r){return p+r+".json"},i.getTopojsonFeatures=function(p,r){return b(r,r.objects[m[p.locationmode]]).features}},{"../plots/geo/constants":885,"topojson-client":601}],833:[function(h,G,X){"use strict";G.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],834:[function(h,G,X){"use strict";G.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],835:[function(h,G,X){"use strict";var i=h("../registry");G.exports=function(m){for(var b,p,r=i.layoutArrayContainers,u=i.layoutArrayRegexes,c=m.split("[")[0],l=0;l<u.length;l++)if((p=m.match(u[l]))&&0===p.index){b=p[0];break}if(b||(b=r[r.indexOf(c)]),!b)return!1;var f=m.substr(b.length);return f?!!(p=f.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:b,index:Number(p[1]),property:p[3]||""}:{array:b,index:"",property:""}}},{"../registry":931}],836:[function(h,G,X){"use strict";var i=h("../lib"),m=i.extendFlat,b=i.isPlainObject,p={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},r={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},u=p.flags.slice().concat(["fullReplot"]),c=r.flags.slice().concat("layoutReplot");function l(o){for(var d={},g=0;g<o.length;g++)d[o[g]]=!1;return d}function f(o,d,g){var y=m({},o);for(var v in y){var _=y[v];b(_)&&(y[v]=s(_,d,0,v))}return"from-root"===g&&(y.editType=d),y}function s(o,d,g,y){if(o.valType){var v=m({},o);if(v.editType=d,Array.isArray(o.items)){v.items=new Array(o.items.length);for(var _=0;_<o.items.length;_++)v.items[_]=s(o.items[_],d)}return v}return f(o,d,"_"===y.charAt(0)?"nested":"from-root")}G.exports={traces:p,layout:r,traceFlags:function(){return l(u)},layoutFlags:function(){return l(c)},update:function(o,d){var g=d.editType;if(g&&"none"!==g)for(var y=g.split("+"),v=0;v<y.length;v++)o[y[v]]=!0},overrideAll:f}},{"../lib":803}],837:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("gl-mat4/fromQuat"),b=h("../registry"),p=h("../lib"),r=h("../plots/plots"),u=h("../plots/cartesian/axis_ids"),c=h("../components/color"),l=u.cleanId,f=u.getFromTrace,s=b.traceIs;function o(k,C){var L=k[C],P=C.charAt(0);L&&"paper"!==L&&(k[C]=l(L,P,!0))}function d(k){function C(L,P){k[L]&&(!k.title||!k.title[P])&&(k.title||(k.title={}),k.title[P]=k[L],delete k[L])}k&&("string"!=typeof k.title&&"number"!=typeof k.title||(k.title={text:k.title}),C("titlefont","font"),C("titleposition","position"),C("titleside","side"),C("titleoffset","offset"))}function g(k){if(!p.isPlainObject(k))return!1;var C=k.name;return delete k.name,delete k.showlegend,("string"==typeof C||"number"==typeof C)&&String(C)}function y(k,C,L,P){if(L&&!P)return k;if(P&&!L||!k.trim())return C;if(!C.trim())return k;var A,I=Math.min(k.length,C.length);for(A=0;A<I&&k.charAt(A)===C.charAt(A);A++);return k.substr(0,A).trim()}function v(k){var C="middle",L="center";return"string"==typeof k&&(-1!==k.indexOf("top")?C="top":-1!==k.indexOf("bottom")&&(C="bottom"),-1!==k.indexOf("left")?L="left":-1!==k.indexOf("right")&&(L="right")),C+" "+L}function _(k,C){return C in k&&"object"==typeof k[C]&&0===Object.keys(k[C]).length}X.clearPromiseQueue=function(k){Array.isArray(k._promises)&&k._promises.length>0&&p.log("Clearing previous rejected promises from queue."),k._promises=[]},X.cleanLayout=function(k){var C,L;k||(k={}),k.xaxis1&&(k.xaxis||(k.xaxis=k.xaxis1),delete k.xaxis1),k.yaxis1&&(k.yaxis||(k.yaxis=k.yaxis1),delete k.yaxis1),k.scene1&&(k.scene||(k.scene=k.scene1),delete k.scene1);var P=(r.subplotsRegistry.cartesian||{}).attrRegex,A=(r.subplotsRegistry.polar||{}).attrRegex,I=(r.subplotsRegistry.ternary||{}).attrRegex,D=(r.subplotsRegistry.gl3d||{}).attrRegex,R=Object.keys(k);for(C=0;C<R.length;C++){var S=R[C];if(P&&P.test(S)){var N=k[S];N.anchor&&"free"!==N.anchor&&(N.anchor=l(N.anchor)),N.overlaying&&(N.overlaying=l(N.overlaying)),N.type||(N.isdate?N.type="date":N.islog?N.type="log":!1===N.isdate&&!1===N.islog&&(N.type="linear")),"withzero"!==N.autorange&&"tozero"!==N.autorange||(N.autorange=!0,N.rangemode="tozero"),delete N.islog,delete N.isdate,delete N.categories,_(N,"domain")&&delete N.domain,void 0!==N.autotick&&(void 0===N.tickmode&&(N.tickmode=N.autotick?"auto":"linear"),delete N.autotick),d(N)}else if(A&&A.test(S))d(k[S].radialaxis);else if(I&&I.test(S)){var B=k[S];d(B.aaxis),d(B.baxis),d(B.caxis)}else if(D&&D.test(S)){var H=k[S],Y=H.cameraposition;if(Array.isArray(Y)&&4===Y[0].length){var ne=Y[1],ae=Y[2],te=m([],Y[0]),K=[];for(L=0;L<3;++L)K[L]=ne[L]+ae*te[2+4*L];H.camera={eye:{x:K[0],y:K[1],z:K[2]},center:{x:ne[0],y:ne[1],z:ne[2]},up:{x:0,y:0,z:1}},delete H.cameraposition}d(H.xaxis),d(H.yaxis),d(H.zaxis)}}var q=Array.isArray(k.annotations)?k.annotations.length:0;for(C=0;C<q;C++){var re=k.annotations[C];p.isPlainObject(re)&&(re.ref&&("paper"===re.ref?(re.xref="paper",re.yref="paper"):"data"===re.ref&&(re.xref="x",re.yref="y"),delete re.ref),o(re,"xref"),o(re,"yref"))}var V=Array.isArray(k.shapes)?k.shapes.length:0;for(C=0;C<V;C++){var W=k.shapes[C];p.isPlainObject(W)&&(o(W,"xref"),o(W,"yref"))}var Z=Array.isArray(k.images)?k.images.length:0;for(C=0;C<Z;C++){var oe=k.images[C];p.isPlainObject(oe)&&(o(oe,"xref"),o(oe,"yref"))}var ie=k.legend;return ie&&(ie.x>3?(ie.x=1.02,ie.xanchor="left"):ie.x<-2&&(ie.x=-.02,ie.xanchor="right"),ie.y>3?(ie.y=1.02,ie.yanchor="bottom"):ie.y<-2&&(ie.y=-.02,ie.yanchor="top")),d(k),"rotate"===k.dragmode&&(k.dragmode="orbit"),c.clean(k),k.template&&k.template.layout&&X.cleanLayout(k.template.layout),k},X.cleanData=function(k){for(var C=0;C<k.length;C++){var L,P=k[C];if("histogramy"===P.type&&"xbins"in P&&!("ybins"in P)&&(P.ybins=P.xbins,delete P.xbins),P.error_y&&"opacity"in P.error_y){var A=c.defaults,I=P.error_y.color||(s(P,"bar")?c.defaultLine:A[C%A.length]);P.error_y.color=c.addOpacity(c.rgb(I),c.opacity(I)*P.error_y.opacity),delete P.error_y.opacity}if("bardir"in P&&("h"!==P.bardir||!s(P,"bar")&&"histogram"!==P.type.substr(0,9)||(P.orientation="h",X.swapXYData(P)),delete P.bardir),"histogramy"===P.type&&X.swapXYData(P),"histogramx"!==P.type&&"histogramy"!==P.type||(P.type="histogram"),"scl"in P&&!("colorscale"in P)&&(P.colorscale=P.scl,delete P.scl),"reversescl"in P&&!("reversescale"in P)&&(P.reversescale=P.reversescl,delete P.reversescl),P.xaxis&&(P.xaxis=l(P.xaxis,"x")),P.yaxis&&(P.yaxis=l(P.yaxis,"y")),s(P,"gl3d")&&P.scene&&(P.scene=r.subplotsRegistry.gl3d.cleanId(P.scene)),!s(P,"pie-like")&&!s(P,"bar-like"))if(Array.isArray(P.textposition))for(L=0;L<P.textposition.length;L++)P.textposition[L]=v(P.textposition[L]);else P.textposition&&(P.textposition=v(P.textposition));var D=b.getModule(P);if(D&&D.colorbar){var R=D.colorbar.container,S=R?P[R]:P;S&&S.colorscale&&("YIGnBu"===S.colorscale&&(S.colorscale="YlGnBu"),"YIOrRd"===S.colorscale&&(S.colorscale="YlOrRd"))}if("surface"===P.type&&p.isPlainObject(P.contours)){var N=["x","y","z"];for(L=0;L<N.length;L++){var B=P.contours[N[L]];p.isPlainObject(B)&&(B.highlightColor&&(B.highlightcolor=B.highlightColor,delete B.highlightColor),B.highlightWidth&&(B.highlightwidth=B.highlightWidth,delete B.highlightWidth))}}if("candlestick"===P.type||"ohlc"===P.type){var H=!1!==(P.increasing||{}).showlegend,Y=!1!==(P.decreasing||{}).showlegend,Q=g(P.increasing),ne=g(P.decreasing);if(!1!==Q&&!1!==ne){var ae=y(Q,ne,H,Y);ae&&(P.name=ae)}else!Q&&!ne||P.name||(P.name=Q||ne)}if(Array.isArray(P.transforms)){var te=P.transforms;for(L=0;L<te.length;L++){var K=te[L];if(p.isPlainObject(K))switch(K.type){case"filter":K.filtersrc&&(K.target=K.filtersrc,delete K.filtersrc),K.calendar&&(K.valuecalendar||(K.valuecalendar=K.calendar),delete K.calendar);break;case"groupby":if(K.styles=K.styles||K.style,K.styles&&!Array.isArray(K.styles)){var q=K.styles,re=Object.keys(q);K.styles=[];for(var V=0;V<re.length;V++)K.styles.push({target:re[V],value:q[re[V]]})}}}}_(P,"line")&&delete P.line,"marker"in P&&(_(P.marker,"line")&&delete P.marker.line,_(P,"marker")&&delete P.marker),c.clean(P),P.autobinx&&(delete P.autobinx,delete P.xbins),P.autobiny&&(delete P.autobiny,delete P.ybins),d(P),P.colorbar&&d(P.colorbar),P.marker&&P.marker.colorbar&&d(P.marker.colorbar),P.line&&P.line.colorbar&&d(P.line.colorbar),P.aaxis&&d(P.aaxis),P.baxis&&d(P.baxis)}},X.swapXYData=function(k){var C;if(p.swapAttrs(k,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(k.z)&&Array.isArray(k.z[0])&&(k.transpose?delete k.transpose:k.transpose=!0),k.error_x&&k.error_y){var L=k.error_y,P="copy_ystyle"in L?L.copy_ystyle:!(L.color||L.thickness||L.width);p.swapAttrs(k,["error_?.copy_ystyle"]),P&&p.swapAttrs(k,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof k.hoverinfo){var A=k.hoverinfo.split("+");for(C=0;C<A.length;C++)"x"===A[C]?A[C]="y":"y"===A[C]&&(A[C]="x");k.hoverinfo=A.join("+")}},X.coerceTraceIndices=function(k,C){if(i(C))return[C];if(!Array.isArray(C)||!C.length)return k.data.map(function(A,I){return I});if(Array.isArray(C)){for(var L=[],P=0;P<C.length;P++)p.isIndex(C[P],k.data.length)?L.push(C[P]):p.warn("trace index (",C[P],") is not a number or is out of bounds");return L}return C},X.manageArrayContainers=function(k,C,L){var P=k.obj,A=k.parts,I=A.length,D=A[I-1],R=i(D);if(R&&null===C){var S=A.slice(0,I-1).join(".");p.nestedProperty(P,S).get().splice(D,1)}else R&&void 0===k.get()&&void 0===k.get()&&(L[k.astr]=null),k.set(C)};var w=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function x(k){var C=k.search(w);if(C>0)return k.substr(0,C)}X.hasParent=function(k,C){for(var L=x(C);L;){if(L in k)return!0;L=x(L)}return!1};var E=["x","y","z"];X.clearAxisTypes=function(k,C,L){for(var P=0;P<C.length;P++)for(var A=k._fullData[P],I=0;I<3;I++){var D=f(k,A,E[I]);if(D&&"log"!==D.type){var R=D._name,S=D._id.substr(1);if("scene"===S.substr(0,5)){if(void 0!==L[S])continue;R=S+"."+R}var N=R+".type";void 0===L[R]&&void 0===L[N]&&p.nestedProperty(k.layout,N).set(null)}}}},{"../components/color":666,"../lib":803,"../plots/cartesian/axis_ids":858,"../plots/plots":917,"../registry":931,"fast-isnumeric":249,"gl-mat4/fromQuat":288}],838:[function(h,G,X){"use strict";var i=h("./plot_api");X._doPlot=i._doPlot,X.newPlot=i.newPlot,X.restyle=i.restyle,X.relayout=i.relayout,X.redraw=i.redraw,X.update=i.update,X._guiRestyle=i._guiRestyle,X._guiRelayout=i._guiRelayout,X._guiUpdate=i._guiUpdate,X._storeDirectGUIEdit=i._storeDirectGUIEdit,X.react=i.react,X.extendTraces=i.extendTraces,X.prependTraces=i.prependTraces,X.addTraces=i.addTraces,X.deleteTraces=i.deleteTraces,X.moveTraces=i.moveTraces,X.purge=i.purge,X.addFrames=i.addFrames,X.deleteFrames=i.deleteFrames,X.animate=i.animate,X.setPlotConfig=i.setPlotConfig,X.toImage=h("./to_image"),X.validate=h("./validate"),X.downloadImage=h("../snapshot/download");var m=h("./template_api");X.makeTemplate=m.makeTemplate,X.validateTemplate=m.validateTemplate},{"../snapshot/download":933,"./plot_api":840,"./template_api":845,"./to_image":846,"./validate":847}],839:[function(h,G,X){"use strict";var i=h("../lib/is_plain_object"),m=h("../lib/noop"),b=h("../lib/loggers"),p=h("../lib/search").sorterAsc,r=h("../registry");X.containerArrayMatch=h("./container_array_match");var u=X.isAddVal=function(l){return"add"===l||i(l)},c=X.isRemoveVal=function(l){return null===l||"remove"===l};X.applyContainerArrayChanges=function(l,f,s,o,d){var g=f.astr,y=r.getComponentMethod(g,"supplyLayoutDefaults"),v=r.getComponentMethod(g,"draw"),_=r.getComponentMethod(g,"drawOne"),w=o.replot||o.recalc||y===m||v===m,x=l.layout,E=l._fullLayout;if(s[""]){Object.keys(s).length>1&&b.warn("Full array edits are incompatible with other edits",g);var k=s[""][""];if(c(k))f.set(null);else{if(!Array.isArray(k))return b.warn("Unrecognized full array edit value",g,k),!0;f.set(k)}return!w&&(y(x,E),v(l),!0)}var C,L,P,A,I,D,R,N=Object.keys(s).map(Number).sort(p),B=f.get(),H=B||[],Y=d(E,g).get(),Q=[],ne=-1,ae=H.length;for(C=0;C<N.length;C++)if(A=s[P=N[C]],I=Object.keys(A),R=u(D=A[""]),P<0||P>H.length-(R?0:1))b.warn("index out of range",g,P);else if(void 0!==D)I.length>1&&b.warn("Insertion & removal are incompatible with edits to the same index.",g,P),c(D)?Q.push(P):R?("add"===D&&(D={}),H.splice(P,0,D),Y&&Y.splice(P,0,{})):b.warn("Unrecognized full object edit value",g,P,D),-1===ne&&(ne=P);else for(L=0;L<I.length;L++)d(H[P],I[L],g+"["+P+"].").set(A[I[L]]);for(C=Q.length-1;C>=0;C--)H.splice(Q[C],1),Y&&Y.splice(Q[C],1);if(H.length?B||f.set(H):f.set(null),w)return!1;if(y(x,E),_!==m){var te;if(-1===ne)te=N;else{for(ae=Math.max(H.length,ae),te=[],C=0;C<N.length&&!((P=N[C])>=ne);C++)te.push(P);for(C=ne;C<ae;C++)te.push(C)}for(C=0;C<te.length;C++)_(l,te[C])}else v(l);return!0}},{"../lib/is_plain_object":804,"../lib/loggers":807,"../lib/noop":812,"../lib/search":823,"../registry":931,"./container_array_match":835}],840:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("fast-isnumeric"),b=h("has-hover"),p=h("../lib"),r=p.nestedProperty,u=h("../lib/events"),c=h("../lib/queue"),l=h("../registry"),f=h("./plot_schema"),s=h("../plots/plots"),o=h("../plots/cartesian/axes"),d=h("../components/drawing"),g=h("../components/color"),y=h("../plots/cartesian/graph_interact").initInteractions,v=h("../constants/xmlns_namespaces"),_=h("../plots/cartesian/select").clearSelect,w=h("./plot_config").dfltConfig,x=h("./manage_arrays"),E=h("./helpers"),k=h("./subroutines"),C=h("./edit_types"),L=h("../plots/cartesian/constants").AX_NAME_PATTERN,P=0;function A(_e){var we=_e._fullLayout;we._redrawFromAutoMarginCount?we._redrawFromAutoMarginCount--:_e.emit("plotly_afterplot")}function I(_e,we){try{_e._fullLayout._paper.style("background",we)}catch(Se){p.error(Se)}}function D(_e,we){I(_e,g.combine(we,"white"))}function R(_e,we){if(!_e._context){_e._context=p.extendDeep({},w);var Se=i.select("base");_e._context._baseUrl=Se.size()&&Se.attr("href")?window.location.href.split("#")[0]:""}var Oe,Be,He,Xe=_e._context;if(we){for(Be=Object.keys(we),Oe=0;Oe<Be.length;Oe++)"editable"!==(He=Be[Oe])&&"edits"!==He&&He in Xe&&(Xe[He]="setBackground"===He&&"opaque"===we[He]?D:we[He]);we.plot3dPixelRatio&&!Xe.plotGlPixelRatio&&(Xe.plotGlPixelRatio=Xe.plot3dPixelRatio);var nt=we.editable;if(void 0!==nt)for(Xe.editable=nt,Be=Object.keys(Xe.edits),Oe=0;Oe<Be.length;Oe++)Xe.edits[Be[Oe]]=nt;if(we.edits)for(Be=Object.keys(we.edits),Oe=0;Oe<Be.length;Oe++)(He=Be[Oe])in Xe.edits&&(Xe.edits[He]=we.edits[He]);Xe._exportedPlot=we._exportedPlot}Xe.staticPlot&&(Xe.editable=!1,Xe.edits={},Xe.autosizable=!1,Xe.scrollZoom=!1,Xe.doubleClick=!1,Xe.showTips=!1,Xe.showLink=!1,Xe.displayModeBar=!1),"hover"!==Xe.displayModeBar||b||(Xe.displayModeBar=!0),"transparent"!==Xe.setBackground&&"function"==typeof Xe.setBackground||(Xe.setBackground=I),Xe._hasZeroHeight=Xe._hasZeroHeight||0===_e.clientHeight,Xe._hasZeroWidth=Xe._hasZeroWidth||0===_e.clientWidth;var et=Xe.scrollZoom,qe=Xe._scrollZoom={};if(!0===et)qe.cartesian=1,qe.gl3d=1,qe.geo=1,qe.mapbox=1;else if("string"==typeof et){var Ye=et.split("+");for(Oe=0;Oe<Ye.length;Oe++)qe[Ye[Oe]]=1}else!1!==et&&(qe.gl3d=1,qe.geo=1,qe.mapbox=1)}function S(_e,we){var Se,Oe,Be=we+1,He=[];for(Se=0;Se<_e.length;Se++)(Oe=_e[Se])<0?He.push(Be+Oe):He.push(Oe);return He}function N(_e,we,Se){var Oe,Be;for(Oe=0;Oe<we.length;Oe++){if((Be=we[Oe])!==parseInt(Be,10))throw new Error("all values in "+Se+" must be integers");if(Be>=_e.data.length||Be<-_e.data.length)throw new Error(Se+" must be valid indices for gd.data.");if(we.indexOf(Be,Oe+1)>-1||Be>=0&&we.indexOf(-_e.data.length+Be)>-1||Be<0&&we.indexOf(_e.data.length+Be)>-1)throw new Error("each index in "+Se+" must be unique.")}}function B(_e,we,Se){if(!Array.isArray(_e.data))throw new Error("gd.data must be an array.");if(void 0===we)throw new Error("currentIndices is a required argument.");if(Array.isArray(we)||(we=[we]),N(_e,we,"currentIndices"),void 0===Se||Array.isArray(Se)||(Se=[Se]),void 0!==Se&&N(_e,Se,"newIndices"),void 0!==Se&&we.length!==Se.length)throw new Error("current and new indices must be of equal length.")}function H(_e,we,Se,Oe,Be){!function(at,ct,_t,xt){var Ht=p.isPlainObject(xt);if(!Array.isArray(at.data))throw new Error("gd.data must be an array");if(!p.isPlainObject(ct))throw new Error("update must be a key:value object");if(void 0===_t)throw new Error("indices must be an integer or array of integers");for(var At in N(at,_t,"indices"),ct){if(!Array.isArray(ct[At])||ct[At].length!==_t.length)throw new Error("attribute "+At+" must be an array of length equal to indices array length");if(Ht&&(!(At in xt)||!Array.isArray(xt[At])||xt[At].length!==ct[At].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(_e,we,Se,Oe);for(var He=function(at,ct,_t,xt){var At,ht,st,Bt,gn=p.isPlainObject(xt),hn=[];for(var We in Array.isArray(_t)||(_t=[_t]),_t=S(_t,at.data.length-1),ct)for(var it=0;it<_t.length;it++){if(At=(ht=r(at.data[_t[it]],We)).get(),!p.isArrayOrTypedArray(st=ct[We][it]))throw new Error("attribute: "+We+" index: "+it+" must be an array");if(!p.isArrayOrTypedArray(At))throw new Error("cannot extend missing or non-array attribute: "+We);if(At.constructor!==st.constructor)throw new Error("cannot extend array with an array of a different type: "+We);m(Bt=gn?xt[We][it]:xt)||(Bt=-1),hn.push({prop:ht,target:At,insert:st,maxp:Math.floor(Bt)})}return hn}(_e,we,Se,Oe),Xe={},nt={},et=0;et<He.length;et++){var qe=He[et].prop,ot=Be(He[et].target,He[et].insert,He[et].maxp);qe.set(ot[0]),Array.isArray(Xe[qe.astr])||(Xe[qe.astr]=[]),Xe[qe.astr].push(ot[1]),Array.isArray(nt[qe.astr])||(nt[qe.astr]=[]),nt[qe.astr].push(He[et].target.length)}return{update:Xe,maxPoints:nt}}function Y(_e,we){var Se=new _e.constructor(_e.length+we.length);return Se.set(_e),Se.set(we,_e.length),Se}function Q(_e,we,Se,Oe){_e=p.getGraphDiv(_e),E.clearPromiseQueue(_e);var Be={};if("string"==typeof we)Be[we]=Se;else{if(!p.isPlainObject(we))return p.warn("Restyle fail.",we,Se,Oe),Promise.reject();Be=p.extendFlat({},we),void 0===Oe&&(Oe=Se)}Object.keys(Be).length&&(_e.changed=!0);var He=E.coerceTraceIndices(_e,Oe),Xe=K(_e,Be,He),nt=Xe.flags;nt.calc&&(_e.calcdata=void 0),nt.clearAxisTypes&&E.clearAxisTypes(_e,He,{});var et=[];nt.fullReplot?et.push(X._doPlot):(et.push(s.previousPromises),s.supplyDefaults(_e),nt.markerSize&&(s.doCalcdata(_e),W(et)),nt.style&&et.push(k.doTraceStyle),nt.colorbars&&et.push(k.doColorBars),et.push(A)),et.push(s.rehover,s.redrag),c.add(_e,Q,[_e,Xe.undoit,Xe.traces],Q,[_e,Xe.redoit,Xe.traces]);var qe=p.syncOrAsync(et,_e);return qe&&qe.then||(qe=Promise.resolve()),qe.then(function(){return _e.emit("plotly_restyle",Xe.eventData),_e})}function ne(_e){return void 0===_e?null:_e}function ae(_e,we){return we?function(Se,Oe,Be){var He=r(Se,Oe),Xe=He.set;return He.set=function(nt){te((Be||"")+Oe,He.get(),nt,_e),Xe(nt)},He}:r}function te(_e,we,Se,Oe){if(Array.isArray(we)||Array.isArray(Se))for(var Be=Array.isArray(we)?we:[],He=Array.isArray(Se)?Se:[],Xe=Math.max(Be.length,He.length),nt=0;nt<Xe;nt++)te(_e+"["+nt+"]",Be[nt],He[nt],Oe);else if(p.isPlainObject(we)||p.isPlainObject(Se)){var et=p.isPlainObject(we)?we:{},qe=p.isPlainObject(Se)?Se:{},Ye=p.extendFlat({},et,qe);for(var ot in Ye)te(_e+"."+ot,et[ot],qe[ot],Oe)}else void 0===Oe[_e]&&(Oe[_e]=ne(we))}function K(_e,we,Se){var Oe,Be=_e._fullLayout,He=_e._fullData,Xe=_e.data,nt=Be._guiEditing,et=ae(Be._preGUI,nt),qe=p.extendDeepAll({},we);q(we);var Ye,ot=C.traceFlags(),at={},ct={};function _t(){return Se.map(function(){})}function xt(Ut){var Zt=o.id2name(Ut);-1===Ye.indexOf(Zt)&&Ye.push(Zt)}function Ht(Ut){return"LAYOUT"+Ut+".autorange"}function At(Ut){return"LAYOUT"+Ut+".range"}function ht(Ut){for(var Zt=Ut;Zt<He.length;Zt++)if(He[Zt]._input===Xe[Ut])return He[Zt]}function st(Ut,Zt,tn){if(Array.isArray(Ut))Ut.forEach(function(Qt){st(Qt,Zt,tn)});else if(!(Ut in we)&&!E.hasParent(we,Ut)){var un;if("LAYOUT"===Ut.substr(0,6))un=et(_e.layout,Ut.replace("LAYOUT",""));else{var vn=Se[tn];un=ae(Be._tracePreGUI[ht(vn)._fullInput.uid],nt)(Xe[vn],Ut)}Ut in ct||(ct[Ut]=_t()),void 0===ct[Ut][tn]&&(ct[Ut][tn]=ne(un.get())),void 0!==Zt&&un.set(Zt)}}function Bt(Ut){return function(Zt){return He[Zt][Ut]}}function gn(Ut){return function(Zt,tn){return!1===Zt?He[Se[tn]][Ut]:null}}for(var hn in we){if(E.hasParent(we,hn))throw new Error("cannot set "+hn+" and a parent attribute simultaneously");var We,it,qt,Ge,Pe,Ee,Ne=we[hn];if("autobinx"!==hn&&"autobiny"!==hn||(hn=hn.charAt(hn.length-1)+"bins",Ne=Array.isArray(Ne)?Ne.map(gn(hn)):!1===Ne?Se.map(Bt(hn)):null),at[hn]=Ne,"LAYOUT"!==hn.substr(0,6)){for(ct[hn]=_t(),Oe=0;Oe<Se.length;Oe++)if(We=Xe[Se[Oe]],it=ht(Se[Oe]),Ge=(qt=ae(Be._tracePreGUI[it._fullInput.uid],nt)(We,hn)).get(),void 0!==(Pe=Array.isArray(Ne)?Ne[Oe%Ne.length]:Ne)){var Ve=qt.parts[qt.parts.length-1],Ke=hn.substr(0,hn.length-Ve.length-1),bt=Ke?Ke+".":"",gt=Ke?r(it,Ke).get():it;if((Ee=f.getTraceValObject(it,qt.parts))&&Ee.impliedEdits&&null!==Pe)for(var pt in Ee.impliedEdits)st(p.relativeAttr(hn,pt),Ee.impliedEdits[pt],Oe);else if("thicknessmode"!==Ve&&"lenmode"!==Ve||Ge===Pe||"fraction"!==Pe&&"pixels"!==Pe||!gt){if("type"===hn&&("pie"===Pe!=("pie"===Ge)||"funnelarea"===Pe!=("funnelarea"===Ge))){var St="x",jt="y";"bar"!==Pe&&"bar"!==Ge||"h"!==We.orientation||(St="y",jt="x"),p.swapAttrs(We,["?","?src"],"labels",St),p.swapAttrs(We,["d?","?0"],"label",St),p.swapAttrs(We,["?","?src"],"values",jt),"pie"===Ge||"funnelarea"===Ge?(r(We,"marker.color").set(r(We,"marker.colors").get()),Be._pielayer.selectAll("g.trace").remove()):l.traceIs(We,"cartesian")&&r(We,"marker.colors").set(r(We,"marker.color").get())}}else{var Lt=Be._size,Vt=gt.orient,mt="top"===Vt||"bottom"===Vt;if("thicknessmode"===Ve){var Wt=mt?Lt.h:Lt.w;st(bt+"thickness",gt.thickness*("fraction"===Pe?1/Wt:Wt),Oe)}else{var Kt=mt?Lt.w:Lt.h;st(bt+"len",gt.len*("fraction"===Pe?1/Kt:Kt),Oe)}}if(ct[hn][Oe]=ne(Ge),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(hn)){if("orientation"===hn){qt.set(Pe);var rn=We.x&&!We.y?"h":"v";if((qt.get()||rn)===it.orientation)continue}else"orientationaxes"===hn&&(We.orientation={v:"h",h:"v"}[it.orientation]);E.swapXYData(We),ot.calc=ot.clearAxisTypes=!0}else-1!==s.dataArrayContainers.indexOf(qt.parts[0])?(E.manageArrayContainers(qt,Pe,ct),ot.calc=!0):(Ee?Ee.arrayOk&&!l.traceIs(it,"regl")&&(p.isArrayOrTypedArray(Pe)||p.isArrayOrTypedArray(Ge))?ot.calc=!0:C.update(ot,Ee):ot.calc=!0,qt.set(Pe))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(hn)&&o.swap(_e,Se),"orientationaxes"===hn){var Yt=r(_e.layout,"hovermode"),Ue=Yt.get();"x"===Ue?Yt.set("y"):"y"===Ue?Yt.set("x"):"x unified"===Ue?Yt.set("y unified"):"y unified"===Ue&&Yt.set("x unified")}if(-1!==["orientation","type"].indexOf(hn)){for(Ye=[],Oe=0;Oe<Se.length;Oe++){var wt=Xe[Se[Oe]];l.traceIs(wt,"cartesian")&&(xt(wt.xaxis||"x"),xt(wt.yaxis||"y"))}st(Ye.map(Ht),!0,0),st(Ye.map(At),[0,1],0)}}else qt=et(_e.layout,hn.replace("LAYOUT","")),ct[hn]=[ne(qt.get())],qt.set(Array.isArray(Ne)?Ne[0]:Ne),ot.calc=!0}return(ot.calc||ot.plot)&&(ot.fullReplot=!0),{flags:ot,undoit:ct,redoit:at,traces:Se,eventData:p.extendDeepNoArrays([],[qe,Se])}}function q(_e){var we,Se,Oe,Be=p.counterRegex("axis",".title",!1,!1),He=/colorbar\.title$/,Xe=Object.keys(_e);for(we=0;we<Xe.length;we++)Oe=_e[Se=Xe[we]],"title"!==Se&&!Be.test(Se)&&!He.test(Se)||"string"!=typeof Oe&&"number"!=typeof Oe?Se.indexOf("titlefont")>-1?nt(Se,Se.replace("titlefont","title.font")):Se.indexOf("titleposition")>-1?nt(Se,Se.replace("titleposition","title.position")):Se.indexOf("titleside")>-1?nt(Se,Se.replace("titleside","title.side")):Se.indexOf("titleoffset")>-1&&nt(Se,Se.replace("titleoffset","title.offset")):nt(Se,Se.replace("title","title.text"));function nt(et,qe){_e[qe]=_e[et],delete _e[et]}}function re(_e,we,Se){_e=p.getGraphDiv(_e),E.clearPromiseQueue(_e);var Oe={};if("string"==typeof we)Oe[we]=Se;else{if(!p.isPlainObject(we))return p.warn("Relayout fail.",we,Se),Promise.reject();Oe=p.extendFlat({},we)}Object.keys(Oe).length&&(_e.changed=!0);var Be=ue(_e,Oe),He=Be.flags;He.calc&&(_e.calcdata=void 0);var Xe=[s.previousPromises];He.layoutReplot?Xe.push(k.layoutReplot):Object.keys(Oe).length&&(V(_e,He,Be)||s.supplyDefaults(_e),He.legend&&Xe.push(k.doLegend),He.layoutstyle&&Xe.push(k.layoutStyles),He.axrange&&W(Xe,Be.rangesAltered),He.ticks&&Xe.push(k.doTicksRelayout),He.modebar&&Xe.push(k.doModeBar),He.camera&&Xe.push(k.doCamera),He.colorbars&&Xe.push(k.doColorBars),Xe.push(A)),Xe.push(s.rehover,s.redrag),c.add(_e,re,[_e,Be.undoit],re,[_e,Be.redoit]);var nt=p.syncOrAsync(Xe,_e);return nt&&nt.then||(nt=Promise.resolve(_e)),nt.then(function(){return _e.emit("plotly_relayout",Be.eventData),_e})}function V(_e,we,Se){var Oe=_e._fullLayout;if(!we.axrange)return!1;for(var Be in we)if("axrange"!==Be&&we[Be])return!1;for(var He in Se.rangesAltered){var Xe=o.id2name(He),nt=_e.layout[Xe],et=Oe[Xe];if(et.autorange=nt.autorange,nt.range&&(et.range=nt.range.slice()),et.cleanRange(),et._matchGroup)for(var qe in et._matchGroup)if(qe!==He){var Ye=Oe[o.id2name(qe)];Ye.autorange=et.autorange,Ye.range=et.range.slice(),Ye._input.range=et.range.slice()}}return!0}function W(_e,we){_e.push(_,k.doAutoRangeAndConstraints,we?function(Oe){var Be=[],He=!0;for(var Xe in we){var nt=o.getFromId(Oe,Xe);if(Be.push(Xe),-1!==(nt.ticklabelposition||"").indexOf("inside")&&nt._anchorAxis&&Be.push(nt._anchorAxis._id),nt._matchGroup)for(var et in nt._matchGroup)we[et]||Be.push(et);nt.automargin&&(He=!1)}return o.draw(Oe,Be,{skipTitle:He})}:function(Oe){return o.draw(Oe,"redraw")},k.drawData,k.finalDraw)}var Z=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,oe=/^[xyz]axis[0-9]*\.autorange$/,ie=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ue(_e,we){var Se,Oe,Be,He=_e.layout,Xe=_e._fullLayout,et=ae(Xe._preGUI,Xe._guiEditing),qe=Object.keys(we),Ye=o.list(_e),ot=p.extendDeepAll({},we),at={};for(q(we),qe=Object.keys(we),Oe=0;Oe<qe.length;Oe++)if(0===qe[Oe].indexOf("allaxes")){for(Be=0;Be<Ye.length;Be++){var ct=Ye[Be]._id.substr(1),_t=-1!==ct.indexOf("scene")?ct+".":"",xt=qe[Oe].replace("allaxes",_t+Ye[Be]._name);we[xt]||(we[xt]=we[qe[Oe]])}delete we[qe[Oe]]}var Ht=C.layoutFlags(),At={},ht={};function st(vn,Qt){if(Array.isArray(vn))vn.forEach(function(Mn){st(Mn,Qt)});else if(!(vn in we)&&!E.hasParent(we,vn)){var yn=et(He,vn);vn in ht||(ht[vn]=ne(yn.get())),void 0!==Qt&&yn.set(Qt)}}var Bt,gn={};function hn(vn){var Qt=o.name2id(vn.split(".")[0]);return gn[Qt]=1,Qt}for(var We in we){if(E.hasParent(we,We))throw new Error("cannot set "+We+" and a parent attribute simultaneously");for(var it=et(He,We),qt=we[We],Ge=it.parts.length-1;Ge>0&&"string"!=typeof it.parts[Ge];)Ge--;var Pe=it.parts[Ge],Ee=it.parts[Ge-1]+"."+Pe,Ne=it.parts.slice(0,Ge).join("."),Ve=r(_e.layout,Ne).get(),Ke=r(Xe,Ne).get(),bt=it.get();if(void 0!==qt){At[We]=qt,ht[We]="reverse"===Pe?qt:ne(bt);var gt=f.getLayoutValObject(Xe,it.parts);if(gt&&gt.impliedEdits&&null!==qt)for(var pt in gt.impliedEdits)st(p.relativeAttr(We,pt),gt.impliedEdits[pt]);if(-1!==["width","height"].indexOf(We))if(qt){st("autosize",null);var St="height"===We?"width":"height";st(St,Xe[St])}else Xe[We]=_e._initialAutoSize[We];else if("autosize"===We)st("width",qt?null:Xe.width),st("height",qt?null:Xe.height);else if(Ee.match(Z))hn(Ee),r(Xe,Ne+"._inputRange").set(null);else if(Ee.match(oe)){hn(Ee),r(Xe,Ne+"._inputRange").set(null);var jt=r(Xe,Ne).get();jt._inputDomain&&(jt._input.domain=jt._inputDomain.slice())}else Ee.match(ie)&&r(Xe,Ne+"._inputDomain").set(null);if("type"===Pe){Bt=Ve;var Lt="linear"===Ke.type&&"log"===qt;if(Lt||"log"===Ke.type&&"linear"===qt){if(Bt&&Bt.range)if(Ke.autorange)Lt&&(Bt.range=Bt.range[1]>Bt.range[0]?[1,2]:[2,1]);else{var mt=Bt.range[0],Wt=Bt.range[1];Lt?(mt<=0&&Wt<=0&&st(Ne+".autorange",!0),mt<=0?mt=Wt/1e6:Wt<=0&&(Wt=mt/1e6),st(Ne+".range[0]",Math.log(mt)/Math.LN10),st(Ne+".range[1]",Math.log(Wt)/Math.LN10)):(st(Ne+".range[0]",Math.pow(10,mt)),st(Ne+".range[1]",Math.pow(10,Wt)))}else st(Ne+".autorange",!0);Array.isArray(Xe._subplots.polar)&&Xe._subplots.polar.length&&Xe[it.parts[0]]&&"radialaxis"===it.parts[1]&&delete Xe[it.parts[0]]._subplot.viewInitial["radialaxis.range"],l.getComponentMethod("annotations","convertCoords")(_e,Ke,qt,st),l.getComponentMethod("images","convertCoords")(_e,Ke,qt,st)}else st(Ne+".autorange",!0),st(Ne+".range",null);r(Xe,Ne+"._inputRange").set(null)}else if(Pe.match(L)){var Kt=r(Xe,We).get(),rn=(qt||{}).type;rn&&"-"!==rn||(rn="linear"),l.getComponentMethod("annotations","convertCoords")(_e,Kt,rn,st),l.getComponentMethod("images","convertCoords")(_e,Kt,rn,st)}var Yt=x.containerArrayMatch(We);if(Yt){Se=Yt.array;var Ue=Yt.property,wt=gt||{editType:"calc"};""!==(Oe=Yt.index)&&""===Ue&&(x.isAddVal(qt)?ht[We]=null:x.isRemoveVal(qt)?ht[We]=(r(He,Se).get()||[])[Oe]:p.warn("unrecognized full object value",we)),C.update(Ht,wt),at[Se]||(at[Se]={});var Ut=at[Se][Oe];Ut||(Ut=at[Se][Oe]={}),Ut[Ue]=qt,delete we[We]}else"reverse"===Pe?(Ve.range?Ve.range.reverse():(st(Ne+".autorange",!0),Ve.range=[1,0]),Ke.autorange?Ht.calc=!0:Ht.plot=!0):(Xe._has("scatter-like")&&Xe._has("regl")&&"dragmode"===We&&("lasso"===qt||"select"===qt)&&"lasso"!==bt&&"select"!==bt||Xe._has("gl2d")?Ht.plot=!0:gt?C.update(Ht,gt):Ht.calc=!0,it.set(qt))}}for(Se in at)x.applyContainerArrayChanges(_e,et(He,Se),at[Se],Ht,et)||(Ht.plot=!0);for(var Zt in gn){var tn=(Bt=o.getFromId(_e,Zt))&&Bt._constraintGroup;if(tn)for(var un in Ht.calc=!0,tn)gn[un]||(o.getFromId(_e,un)._constraintShrinkable=!0)}return(fe(_e)||we.height||we.width)&&(Ht.plot=!0),(Ht.plot||Ht.calc)&&(Ht.layoutReplot=!0),{flags:Ht,rangesAltered:gn,undoit:ht,redoit:At,eventData:ot}}function fe(_e){var we=_e._fullLayout,Se=we.width,Oe=we.height;return _e.layout.autosize&&s.plotAutoSize(_e,_e.layout,we),we.width!==Se||we.height!==Oe}function he(_e,we,Se,Oe){_e=p.getGraphDiv(_e),E.clearPromiseQueue(_e),p.isPlainObject(we)||(we={}),p.isPlainObject(Se)||(Se={}),Object.keys(we).length&&(_e.changed=!0),Object.keys(Se).length&&(_e.changed=!0);var Be=E.coerceTraceIndices(_e,Oe),He=K(_e,p.extendFlat({},we),Be),Xe=He.flags,nt=ue(_e,p.extendFlat({},Se)),et=nt.flags;(Xe.calc||et.calc)&&(_e.calcdata=void 0),Xe.clearAxisTypes&&E.clearAxisTypes(_e,Be,Se);var qe=[];et.layoutReplot?qe.push(k.layoutReplot):Xe.fullReplot?qe.push(X._doPlot):(qe.push(s.previousPromises),V(_e,et,nt)||s.supplyDefaults(_e),Xe.style&&qe.push(k.doTraceStyle),(Xe.colorbars||et.colorbars)&&qe.push(k.doColorBars),et.legend&&qe.push(k.doLegend),et.layoutstyle&&qe.push(k.layoutStyles),et.axrange&&W(qe,nt.rangesAltered),et.ticks&&qe.push(k.doTicksRelayout),et.modebar&&qe.push(k.doModeBar),et.camera&&qe.push(k.doCamera),qe.push(A)),qe.push(s.rehover,s.redrag),c.add(_e,he,[_e,He.undoit,nt.undoit,He.traces],he,[_e,He.redoit,nt.redoit,He.traces]);var Ye=p.syncOrAsync(qe,_e);return Ye&&Ye.then||(Ye=Promise.resolve(_e)),Ye.then(function(){return _e.emit("plotly_update",{data:He.eventData,layout:nt.eventData}),_e})}function de(_e){return function(we){we._fullLayout._guiEditing=!0;var Se=_e.apply(null,arguments);return we._fullLayout._guiEditing=!1,Se}}var be=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],pe=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Te(_e,we){for(var Se=0;Se<we.length;Se++){var Oe=we[Se],Be=_e.match(Oe.pattern);if(Be)return{head:Be[1],attr:Oe.attr}}}function ye(_e,we){var Se=r(we,_e).get();if(void 0!==Se)return Se;var Oe=_e.split(".");for(Oe.pop();Oe.length>1;)if(Oe.pop(),void 0!==(Se=r(we,Oe.join(".")+".uirevision").get()))return Se;return we.uirevision}function ke(_e,we){for(var Se=0;Se<we.length;Se++)if(we[Se]._fullInput.uid===_e)return Se;return-1}function ze(_e,we,Se){for(var Oe=0;Oe<we.length;Oe++)if(we[Oe].uid===_e)return Oe;return!we[Se]||we[Se].uid?-1:Se}function je(_e,we){var Se=p.isPlainObject(_e),Oe=Array.isArray(_e);return Se||Oe?(Se&&p.isPlainObject(we)||Oe&&Array.isArray(we))&&JSON.stringify(_e)===JSON.stringify(we):_e===we}function Ie(_e,we,Se,Oe){var Be,He,Xe,nt=Oe.getValObject,et=Oe.flags,qe=Oe.immutable,Ye=Oe.inArray,ot=Oe.arrayIndex;function at(){var Ve=Be.editType;Ye&&-1!==Ve.indexOf("arraydraw")?p.pushUnique(et.arrays[Ye],ot):(C.update(et,Be),"none"!==Ve&&et.nChanges++,Oe.transition&&Be.anim&&et.nChangesAnim++,(Z.test(Xe)||oe.test(Xe))&&(et.rangesAltered[Se[0]]=1),ie.test(Xe)&&r(we,"_inputDomain").set(null),"datarevision"===He&&(et.newDataRevision=1))}function ct(Ve){return"data_array"===Ve.valType||Ve.arrayOk}for(He in _e){if(et.calc&&!Oe.transition)return;var _t=_e[He],xt=we[He],Ht=Se.concat(He);if(Xe=Ht.join("."),"_"!==He.charAt(0)&&"function"!=typeof _t&&_t!==xt){if(("tick0"===He||"dtick"===He)&&"geo"!==Se[0]){var At=we.tickmode;if("auto"===At||"array"===At||!At)continue}if(("range"!==He||!we.autorange)&&("zmin"!==He&&"zmax"!==He||"contourcarpet"!==we.type)&&(Be=nt(Ht))&&(!Be._compareAsJSON||JSON.stringify(_t)!==JSON.stringify(xt))){var ht,st=Be.valType,Bt=ct(Be),gn=Array.isArray(_t),hn=Array.isArray(xt);if(gn&&hn){var We="_input_"+He,it=_e[We],qt=we[We];if(Array.isArray(it)&&it===qt)continue}if(void 0===xt)Bt&&gn?et.calc=!0:at();else if(Be._isLinkedToArray){var Ge=[],Pe=!1;Ye||(et.arrays[He]=Ge);var Ee=Math.min(_t.length,xt.length),Ne=Math.max(_t.length,xt.length);if(Ee!==Ne){if("arraydraw"!==Be.editType){at();continue}Pe=!0}for(ht=0;ht<Ee;ht++)Ie(_t[ht],xt[ht],Ht.concat(ht),p.extendFlat({inArray:He,arrayIndex:ht},Oe));if(Pe)for(ht=Ee;ht<Ne;ht++)Ge.push(ht)}else!st&&p.isPlainObject(_t)?Ie(_t,xt,Ht,Oe):Bt?gn&&hn?(qe&&(et.calc=!0),(qe||Oe.newDataRevision)&&at()):gn!==hn?et.calc=!0:at():gn&&hn&&_t.length===xt.length&&String(_t)===String(xt)||at()}}}for(He in we)if(!(He in _e)&&"_"!==He.charAt(0)&&"function"!=typeof we[He]){if(ct(Be=nt(Se.concat(He)))&&Array.isArray(we[He]))return void(et.calc=!0);at()}}function Ce(_e){var we=_e._fullLayout,Se=_e.getBoundingClientRect();if(!p.equalDomRects(Se,we._lastBBox)){var Oe=we._invTransform=p.inverseTransformMatrix(p.getFullTransformMatrix(_e));we._invScaleX=Math.sqrt(Oe[0][0]*Oe[0][0]+Oe[0][1]*Oe[0][1]+Oe[0][2]*Oe[0][2]),we._invScaleY=Math.sqrt(Oe[1][0]*Oe[1][0]+Oe[1][1]*Oe[1][1]+Oe[1][2]*Oe[1][2]),we._lastBBox=Se}}X.animate=function(_e,we,Se){if(_e=p.getGraphDiv(_e),!p.isPlotDiv(_e))throw new Error("This element is not a Plotly plot: "+_e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Oe=_e._transitionData;Oe._frameQueue||(Oe._frameQueue=[]);var Be=(Se=s.supplyAnimationDefaults(Se)).transition,He=Se.frame;function Xe(qe){return Array.isArray(Be)?qe>=Be.length?Be[0]:Be[qe]:Be}function nt(qe){return Array.isArray(He)?qe>=He.length?He[0]:He[qe]:He}function et(qe,Ye){var ot=0;return function(){if(qe&&++ot===Ye)return qe()}}return void 0===Oe._frameWaitingCnt&&(Oe._frameWaitingCnt=0),new Promise(function(qe,Ye){function at(){_e.emit("plotly_animating"),Oe._lastFrameAt=-1/0,Oe._timeToNext=0,Oe._runningTransitions=0,Oe._currentFrame=null;var it=function(){Oe._animationRaf=window.requestAnimationFrame(it),Date.now()-Oe._lastFrameAt>Oe._timeToNext&&function(){Oe._currentFrame&&Oe._currentFrame.onComplete&&Oe._currentFrame.onComplete();var it=Oe._currentFrame=Oe._frameQueue.shift();if(it){var qt=it.name?it.name.toString():null;_e._fullLayout._currentFrame=qt,Oe._lastFrameAt=Date.now(),Oe._timeToNext=it.frameOpts.duration,s.transition(_e,it.frame.data,it.frame.layout,E.coerceTraceIndices(_e,it.frame.traces),it.frameOpts,it.transitionOpts).then(function(){it.onComplete&&it.onComplete()}),_e.emit("plotly_animatingframe",{name:qt,frame:it.frame,animation:{frame:it.frameOpts,transition:it.transitionOpts}})}else _e.emit("plotly_animated"),window.cancelAnimationFrame(Oe._animationRaf),Oe._animationRaf=null}()};it()}var ct,_t,xt=0;function Ht(it){return it.transitionOpts=Array.isArray(Be)?xt>=Be.length?Be[xt]:Be[0]:Be,xt++,it}var At=[],ht=null==we,st=Array.isArray(we);if(ht||st||!p.isPlainObject(we)){if(ht||-1!==["string","number"].indexOf(typeof we))for(ct=0;ct<Oe._frames.length;ct++)(_t=Oe._frames[ct])&&(ht||String(_t.group)===String(we))&&At.push({type:"byname",name:String(_t.name),data:Ht({name:_t.name})});else if(st)for(ct=0;ct<we.length;ct++){var Bt=we[ct];-1!==["number","string"].indexOf(typeof Bt)?(Bt=String(Bt),At.push({type:"byname",name:Bt,data:Ht({name:Bt})})):p.isPlainObject(Bt)&&At.push({type:"object",data:Ht(p.extendFlat({},Bt))})}}else At.push({type:"object",data:Ht(p.extendFlat({},we))});for(ct=0;ct<At.length;ct++)if("byname"===(_t=At[ct]).type&&!Oe._frameHash[_t.data.name])return p.warn('animate failure: frame not found: "'+_t.data.name+'"'),void Ye();-1!==["next","immediate"].indexOf(Se.mode)&&function(){if(0!==Oe._frameQueue.length){for(;Oe._frameQueue.length;){var it=Oe._frameQueue.pop();it.onInterrupt&&it.onInterrupt()}_e.emit("plotly_animationinterrupted",[])}}(),"reverse"===Se.direction&&At.reverse();var gn=_e._fullLayout._currentFrame;if(gn&&Se.fromcurrent){var hn=-1;for(ct=0;ct<At.length;ct++)if("byname"===(_t=At[ct]).type&&_t.name===gn){hn=ct;break}if(hn>0&&hn<At.length-1){var We=[];for(ct=0;ct<At.length;ct++)_t=At[ct],("byname"!==At[ct].type||ct>hn)&&We.push(_t);At=We}}At.length>0?function(it){if(0!==it.length){for(var qt=0;qt<it.length;qt++){var Ge;Ge="byname"===it[qt].type?s.computeFrame(_e,it[qt].name):it[qt].data;var Pe=nt(qt),Ee=Xe(qt);Ee.duration=Math.min(Ee.duration,Pe.duration);var Ne={frame:Ge,name:it[qt].name,frameOpts:Pe,transitionOpts:Ee};qt===it.length-1&&(Ne.onComplete=et(qe,2),Ne.onInterrupt=Ye),Oe._frameQueue.push(Ne)}"immediate"===Se.mode&&(Oe._lastFrameAt=-1/0),Oe._animationRaf||at()}}(At):(_e.emit("plotly_animated"),qe())})},X.addFrames=function(_e,we,Se){if(_e=p.getGraphDiv(_e),null==we)return Promise.resolve();if(!p.isPlotDiv(_e))throw new Error("This element is not a Plotly plot: "+_e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Oe,Be,He,Xe,nt=_e._transitionData._frames,et=_e._transitionData._frameHash;if(!Array.isArray(we))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+we);var qe=nt.length+2*we.length,Ye=[],ot={};for(Oe=we.length-1;Oe>=0;Oe--)if(p.isPlainObject(we[Oe])){var at=we[Oe].name,ct=(et[at]||ot[at]||{}).name,_t=we[Oe].name;ct&&_t&&"number"==typeof _t&&(et[ct]||ot[ct])&&P<5&&(P++,p.warn('addFrames: overwriting frame "'+(et[ct]||ot[ct]).name+'" with a frame whose name of type "number" also equates to "'+ct+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===P&&p.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),ot[at]={name:at},Ye.push({frame:s.supplyFrameDefaults(we[Oe]),index:Se&&null!=Se[Oe]?Se[Oe]:qe+Oe})}Ye.sort(function(We,it){return We.index>it.index?-1:We.index<it.index?1:0});var Ht=[],At=[],ht=nt.length;for(Oe=Ye.length-1;Oe>=0;Oe--){if("number"==typeof(Be=Ye[Oe].frame).name&&p.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Be.name)for(;et[Be.name="frame "+_e._transitionData._counter++];);if(et[Be.name]){for(He=0;He<nt.length&&(nt[He]||{}).name!==Be.name;He++);Ht.push({type:"replace",index:He,value:Be}),At.unshift({type:"replace",index:He,value:nt[He]})}else Xe=Math.max(0,Math.min(Ye[Oe].index,ht)),Ht.push({type:"insert",index:Xe,value:Be}),At.unshift({type:"delete",index:Xe}),ht++}return c&&c.add(_e,s.modifyFrames,[_e,At],s.modifyFrames,[_e,Ht]),s.modifyFrames(_e,Ht)},X.deleteFrames=function(_e,we){if(_e=p.getGraphDiv(_e),!p.isPlotDiv(_e))throw new Error("This element is not a Plotly plot: "+_e);var Se,Oe,Be=_e._transitionData._frames,He=[],Xe=[];if(!we)for(we=[],Se=0;Se<Be.length;Se++)we.push(Se);for((we=we.slice()).sort(),Se=we.length-1;Se>=0;Se--)He.push({type:"delete",index:Oe=we[Se]}),Xe.unshift({type:"insert",index:Oe,value:Be[Oe]});return c&&c.add(_e,s.modifyFrames,[_e,Xe],s.modifyFrames,[_e,He]),s.modifyFrames(_e,He)},X.addTraces=function _e(we,Se,Oe){we=p.getGraphDiv(we);var Be,He,Xe=[],nt=X.deleteTraces,et=_e,qe=[we,Xe],Ye=[we,Se];for(function(ot,at,ct){var _t,xt;if(!Array.isArray(ot.data))throw new Error("gd.data must be an array.");if(void 0===at)throw new Error("traces must be defined.");for(Array.isArray(at)||(at=[at]),_t=0;_t<at.length;_t++)if("object"!=typeof(xt=at[_t])||Array.isArray(xt)||null===xt)throw new Error("all values in traces array must be non-array objects");if(void 0===ct||Array.isArray(ct)||(ct=[ct]),void 0!==ct&&ct.length!==at.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(we,Se,Oe),Array.isArray(Se)||(Se=[Se]),Se=Se.map(function(ot){return p.extendFlat({},ot)}),E.cleanData(Se),Be=0;Be<Se.length;Be++)we.data.push(Se[Be]);for(Be=0;Be<Se.length;Be++)Xe.push(-Se.length+Be);if(void 0===Oe)return He=X.redraw(we),c.add(we,nt,qe,et,Ye),He;Array.isArray(Oe)||(Oe=[Oe]);try{B(we,Xe,Oe)}catch(ot){throw we.data.splice(we.data.length-Se.length,Se.length),ot}return c.startSequence(we),c.add(we,nt,qe,et,Ye),He=X.moveTraces(we,Xe,Oe),c.stopSequence(we),He},X.deleteTraces=function _e(we,Se){we=p.getGraphDiv(we);var Oe,Be,He=[],Xe=X.addTraces,nt=_e,et=[we,He,Se],qe=[we,Se];if(void 0===Se)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Se)||(Se=[Se]),N(we,Se,"indices"),(Se=S(Se,we.data.length-1)).sort(p.sorterDes),Oe=0;Oe<Se.length;Oe+=1)Be=we.data.splice(Se[Oe],1)[0],He.push(Be);var Ye=X.redraw(we);return c.add(we,Xe,et,nt,qe),Ye},X.extendTraces=function _e(we,Se,Oe,Be){function He(qe,Ye,ot){var at,ct;if(p.isTypedArray(qe))if(ot<0){var _t=new qe.constructor(0),xt=Y(qe,Ye);ot<0?(at=xt,ct=_t):(at=_t,ct=xt)}else if(at=new qe.constructor(ot),ct=new qe.constructor(qe.length+Ye.length-ot),ot===Ye.length)at.set(Ye),ct.set(qe);else if(ot<Ye.length){var Ht=Ye.length-ot;at.set(Ye.subarray(Ht)),ct.set(qe),ct.set(Ye.subarray(0,Ht),qe.length)}else{var At=ot-Ye.length,ht=qe.length-At;at.set(qe.subarray(ht)),at.set(Ye,At),ct.set(qe.subarray(0,ht))}else at=qe.concat(Ye),ct=ot>=0&&ot<at.length?at.splice(0,at.length-ot):[];return[at,ct]}var Xe=H(we=p.getGraphDiv(we),Se,Oe,Be,He),nt=X.redraw(we);return c.add(we,X.prependTraces,[we,Xe.update,Oe,Xe.maxPoints],_e,arguments),nt},X.moveTraces=function _e(we,Se,Oe){var Be,He=[],Xe=[],nt=_e,et=_e,qe=[we=p.getGraphDiv(we),Oe,Se],Ye=[we,Se,Oe];if(B(we,Se,Oe),Se=Array.isArray(Se)?Se:[Se],void 0===Oe)for(Oe=[],Be=0;Be<Se.length;Be++)Oe.push(-Se.length+Be);for(Oe=Array.isArray(Oe)?Oe:[Oe],Se=S(Se,we.data.length-1),Oe=S(Oe,we.data.length-1),Be=0;Be<we.data.length;Be++)-1===Se.indexOf(Be)&&He.push(we.data[Be]);for(Be=0;Be<Se.length;Be++)Xe.push({newIndex:Oe[Be],trace:we.data[Se[Be]]});for(Xe.sort(function(at,ct){return at.newIndex-ct.newIndex}),Be=0;Be<Xe.length;Be+=1)He.splice(Xe[Be].newIndex,0,Xe[Be].trace);we.data=He;var ot=X.redraw(we);return c.add(we,nt,qe,et,Ye),ot},X.prependTraces=function _e(we,Se,Oe,Be){function He(qe,Ye,ot){var at,ct;if(p.isTypedArray(qe))if(ot<=0){var _t=new qe.constructor(0),xt=Y(Ye,qe);ot<0?(at=xt,ct=_t):(at=_t,ct=xt)}else if(at=new qe.constructor(ot),ct=new qe.constructor(qe.length+Ye.length-ot),ot===Ye.length)at.set(Ye),ct.set(qe);else if(ot<Ye.length){var Ht=Ye.length-ot;at.set(Ye.subarray(0,Ht)),ct.set(Ye.subarray(Ht)),ct.set(qe,Ht)}else{var At=ot-Ye.length;at.set(Ye),at.set(qe.subarray(0,At),Ye.length),ct.set(qe.subarray(At))}else at=Ye.concat(qe),ct=ot>=0&&ot<at.length?at.splice(ot,at.length):[];return[at,ct]}var Xe=H(we=p.getGraphDiv(we),Se,Oe,Be,He),nt=X.redraw(we);return c.add(we,X.extendTraces,[we,Xe.update,Oe,Xe.maxPoints],_e,arguments),nt},X.newPlot=function(_e,we,Se,Oe){return _e=p.getGraphDiv(_e),s.cleanPlot([],{},_e._fullData||[],_e._fullLayout||{}),s.purge(_e),X._doPlot(_e,we,Se,Oe)},X._doPlot=function(_e,we,Se,Oe){var Be;if(_e=p.getGraphDiv(_e),u.init(_e),p.isPlainObject(we)){var He=we;we=He.data,Se=He.layout,Oe=He.config,Be=He.frames}if(!1===u.triggerHandler(_e,"plotly_beforeplot",[we,Se,Oe]))return Promise.reject();we||Se||p.isPlotDiv(_e)||p.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",_e),R(_e,Oe),Se||(Se={}),i.select(_e).classed("js-plotly-plot",!0),d.makeTester(),Array.isArray(_e._promises)||(_e._promises=[]);var Xe=0===(_e.data||[]).length&&Array.isArray(we);Array.isArray(we)&&(E.cleanData(we),Xe?_e.data=we:_e.data.push.apply(_e.data,we),_e.empty=!1),_e.layout&&!Xe||(_e.layout=E.cleanLayout(Se)),s.supplyDefaults(_e);var nt=_e._fullLayout,et=nt._has("cartesian");nt._replotting=!0,(Xe||nt._shouldCreateBgLayer)&&(function(At){var ht=i.select(At),st=At._fullLayout;if(st._calcInverseTransform=Ce,st._calcInverseTransform(At),st._container=ht.selectAll(".plot-container").data([0]),st._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),st._paperdiv=st._container.selectAll(".svg-container").data([0]),st._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),st._glcontainer=st._paperdiv.selectAll(".gl-container").data([{}]),st._glcontainer.enter().append("div").classed("gl-container",!0),st._paperdiv.selectAll(".main-svg").remove(),st._paperdiv.select(".modebar-container").remove(),st._paper=st._paperdiv.insert("svg",":first-child").classed("main-svg",!0),st._toppaper=st._paperdiv.append("svg").classed("main-svg",!0),st._modebardiv=st._paperdiv.append("div"),delete st._modeBar,st._hoverpaper=st._paperdiv.append("svg").classed("main-svg",!0),!st._uid){var Bt={};i.selectAll("defs").each(function(){this.id&&(Bt[this.id.split("-")[1]]=1)}),st._uid=p.randstr(Bt)}st._paperdiv.selectAll(".main-svg").attr(v.svgAttrs),st._defs=st._paper.append("defs").attr("id","defs-"+st._uid),st._clips=st._defs.append("g").classed("clips",!0),st._topdefs=st._toppaper.append("defs").attr("id","topdefs-"+st._uid),st._topclips=st._topdefs.append("g").classed("clips",!0),st._bgLayer=st._paper.append("g").classed("bglayer",!0),st._draggers=st._paper.append("g").classed("draglayer",!0);var gn=st._paper.append("g").classed("layer-below",!0);st._imageLowerLayer=gn.append("g").classed("imagelayer",!0),st._shapeLowerLayer=gn.append("g").classed("shapelayer",!0),st._cartesianlayer=st._paper.append("g").classed("cartesianlayer",!0),st._polarlayer=st._paper.append("g").classed("polarlayer",!0),st._ternarylayer=st._paper.append("g").classed("ternarylayer",!0),st._geolayer=st._paper.append("g").classed("geolayer",!0),st._funnelarealayer=st._paper.append("g").classed("funnelarealayer",!0),st._pielayer=st._paper.append("g").classed("pielayer",!0),st._iciclelayer=st._paper.append("g").classed("iciclelayer",!0),st._treemaplayer=st._paper.append("g").classed("treemaplayer",!0),st._sunburstlayer=st._paper.append("g").classed("sunburstlayer",!0),st._indicatorlayer=st._toppaper.append("g").classed("indicatorlayer",!0),st._glimages=st._paper.append("g").classed("glimages",!0);var hn=st._toppaper.append("g").classed("layer-above",!0);st._imageUpperLayer=hn.append("g").classed("imagelayer",!0),st._shapeUpperLayer=hn.append("g").classed("shapelayer",!0),st._infolayer=st._toppaper.append("g").classed("infolayer",!0),st._menulayer=st._toppaper.append("g").classed("menulayer",!0),st._zoomlayer=st._toppaper.append("g").classed("zoomlayer",!0),st._hoverlayer=st._hoverpaper.append("g").classed("hoverlayer",!0),st._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),At.emit("plotly_framework")}(_e),nt._shouldCreateBgLayer&&delete nt._shouldCreateBgLayer),d.initGradients(_e),d.initPatterns(_e),Xe&&o.saveShowSpikeInitial(_e);var qe=!_e.calcdata||_e.calcdata.length!==(_e._fullData||[]).length;qe&&s.doCalcdata(_e);for(var Ye=0;Ye<_e.calcdata.length;Ye++)_e.calcdata[Ye][0].trace=_e._fullData[Ye];_e._context.responsive?_e._responsiveChartHandler||(_e._responsiveChartHandler=function(){p.isHidden(_e)||s.resize(_e)},window.addEventListener("resize",_e._responsiveChartHandler)):p.clearResponsive(_e);var ot=p.extendFlat({},nt._size),at=0;function ct(){if(s.clearAutoMarginIds(_e),k.drawMarginPushers(_e),o.allowAutoMargin(_e),nt._has("pie"))for(var At=_e._fullData,ht=0;ht<At.length;ht++){var st=At[ht];"pie"===st.type&&st.automargin&&s.allowAutoMargin(_e,"pie."+st.uid+".automargin")}return s.doAutoMargin(_e),s.previousPromises(_e)}function _t(){_e._transitioning||(k.doAutoRangeAndConstraints(_e),Xe&&o.saveRangeInitial(_e),l.getComponentMethod("rangeslider","calcAutorange")(_e))}var xt=[s.previousPromises,function(){if(Be)return X.addFrames(_e,Be)},function At(){for(var ht=nt._basePlotModules,st=0;st<ht.length;st++)ht[st].drawFramework&&ht[st].drawFramework(_e);!nt._glcanvas&&nt._has("gl")&&(nt._glcanvas=nt._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(We){return We.key}),nt._glcanvas.enter().append("canvas").attr("class",function(We){return"gl-canvas gl-canvas-"+We.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Bt=_e._context.plotGlPixelRatio;if(nt._glcanvas){nt._glcanvas.attr("width",nt.width*Bt).attr("height",nt.height*Bt).style("width",nt.width+"px").style("height",nt.height+"px");var gn=nt._glcanvas.data()[0].regl;if(gn&&(Math.floor(nt.width*Bt)!==gn._gl.drawingBufferWidth||Math.floor(nt.height*Bt)!==gn._gl.drawingBufferHeight)){var hn="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!at)return p.log(hn+" Clearing graph and plotting again."),s.cleanPlot([],{},_e._fullData,nt),s.supplyDefaults(_e),nt=_e._fullLayout,s.doCalcdata(_e),at++,At();p.error(hn)}}return"h"===nt.modebar.orientation?nt._modebardiv.style("height",null).style("width","100%"):nt._modebardiv.style("width",null).style("height",nt.height+"px"),s.previousPromises(_e)},ct,function(){if(s.didMarginChange(ot,nt._size))return p.syncOrAsync([ct,k.layoutStyles],_e)}];et&&xt.push(function(){if(qe)return p.syncOrAsync([l.getComponentMethod("shapes","calcAutorange"),l.getComponentMethod("annotations","calcAutorange"),_t],_e);_t()}),xt.push(k.layoutStyles),et&&xt.push(function(){return o.draw(_e,Xe?"":"redraw")},function(At){At._fullLayout._insideTickLabelsAutorange&&re(At,At._fullLayout._insideTickLabelsAutorange).then(function(){At._fullLayout._insideTickLabelsAutorange=void 0})}),xt.push(k.drawData,k.finalDraw,y,s.addLinks,s.rehover,s.redrag,s.doAutoMargin,function(At){At._fullLayout._insideTickLabelsAutorange&&Xe&&o.saveRangeInitial(At,!0)},s.previousPromises);var Ht=p.syncOrAsync(xt,_e);return Ht&&Ht.then||(Ht=Promise.resolve()),Ht.then(function(){return A(_e),_e})},X.purge=function(_e){var we=(_e=p.getGraphDiv(_e))._fullLayout||{};return s.cleanPlot([],{},_e._fullData||[],we),s.purge(_e),u.purge(_e),we._container&&we._container.remove(),delete _e._context,_e},X.react=function(_e,we,Se,Oe){var Be,He;_e=p.getGraphDiv(_e),E.clearPromiseQueue(_e);var Ne,Ve,Ke,bt,gt,pt,Xe=_e._fullData,nt=_e._fullLayout;if(p.isPlotDiv(_e)&&Xe&&nt){if(p.isPlainObject(we)){var et=we;we=et.data,Se=et.layout,Oe=et.config,Be=et.frames}var qe=!1;if(Oe){var Ye=p.extendDeep({},_e._context);_e._context=void 0,R(_e,Oe),qe=function Ne(Ve,Ke){var bt;for(bt in Ve)if("_"!==bt.charAt(0)){var gt=Ve[bt],pt=Ke[bt];if(gt!==pt)if(p.isPlainObject(gt)&&p.isPlainObject(pt)){if(Ne(gt,pt))return!0}else{if(!Array.isArray(gt)||!Array.isArray(pt)||gt.length!==pt.length)return!0;for(var St=0;St<gt.length;St++)if(gt[St]!==pt[St]&&(!p.isPlainObject(gt[St])||!p.isPlainObject(pt[St])||Ne(gt[St],pt[St])))return!0}}}(Ye,_e._context)}_e.data=we||[],E.cleanData(_e.data),_e.layout=Se||{},E.cleanLayout(_e.layout),function(Ne,Ve,Ke,bt){var gt,pt,St,jt,Lt,Vt,mt,Wt,Kt=bt._preGUI,rn=[],Yt={};for(gt in Kt){if(Lt=Te(gt,be)){if((jt=(St=r(bt,pt=Lt.attr||Lt.head+".uirevision").get())&&ye(pt,Ve))&&jt===St&&(null===(Vt=Kt[gt])&&(Vt=void 0),je(Wt=(mt=r(Ve,gt)).get(),Vt))){void 0===Wt&&"autorange"===gt.substr(gt.length-9)&&rn.push(gt.substr(0,gt.length-10)),mt.set(ne(r(bt,gt).get()));continue}}else p.warn("unrecognized GUI edit: "+gt);delete Kt[gt],"range["===gt.substr(gt.length-8,6)&&(Yt[gt.substr(0,gt.length-9)]=1)}for(var Ue=0;Ue<rn.length;Ue++){var wt=rn[Ue];if(Yt[wt]){var Ut=r(Ve,wt).get();Ut&&delete Ut.autorange}}var Zt=bt._tracePreGUI;for(var tn in Zt){var un,vn=Zt[tn],Qt=null;for(gt in vn){if(!Qt){var yn=ke(tn,Ke);if(yn<0){delete Zt[tn];break}var Mn=ze(tn,Ne,(un=Ke[yn]._fullInput).index);if(Mn<0){delete Zt[tn];break}Qt=Ne[Mn]}if(Lt=Te(gt,pe)){if(Lt.attr?jt=(St=r(bt,Lt.attr).get())&&ye(Lt.attr,Ve):(St=un.uirevision,void 0===(jt=Qt.uirevision)&&(jt=Ve.uirevision)),jt&&jt===St&&(null===(Vt=vn[gt])&&(Vt=void 0),je(Wt=(mt=r(Qt,gt)).get(),Vt))){mt.set(ne(r(un,gt).get()));continue}}else p.warn("unrecognized GUI edit: "+gt+" in trace uid "+tn);delete vn[gt]}}}(_e.data,_e.layout,Xe,nt),s.supplyDefaults(_e,{skipUpdateCalc:!0});var ot=_e._fullData,at=_e._fullLayout,ct=void 0===at.datarevision,_t=at.transition,xt=(Ne=_e,Ve=nt,Ke=at,bt=ct,gt=_t,(pt=C.layoutFlags()).arrays={},pt.rangesAltered={},pt.nChanges=0,pt.nChangesAnim=0,Ie(Ve,Ke,[],{getValObject:function(jt){return f.getLayoutValObject(Ke,jt)},flags:pt,immutable:bt,transition:gt,gd:Ne}),(pt.plot||pt.calc)&&(pt.layoutReplot=!0),gt&&pt.nChanges&&pt.nChangesAnim&&(pt.anim=pt.nChanges===pt.nChangesAnim?"all":"some"),pt),At=function(Ne,Ve,Ke,bt,gt,pt){var St=Ve.length===Ke.length;if(!gt&&!St)return{fullReplot:!0,calc:!0};var jt,Lt,Vt=C.traceFlags();Vt.arrays={},Vt.nChanges=0,Vt.nChangesAnim=0;var mt={getValObject:function(Kt){var rn=f.getTraceValObject(Lt,Kt);return!Lt._module.animatable&&rn.anim&&(rn.anim=!1),rn},flags:Vt,immutable:bt,transition:gt,newDataRevision:pt,gd:Ne},Wt={};for(jt=0;jt<Ve.length;jt++)if(Ke[jt]){if(s.hasMakesDataTransform(Lt=Ke[jt]._fullInput)&&(Lt=Ke[jt]),Wt[Lt.uid])continue;Wt[Lt.uid]=1,Ie(Ve[jt]._fullInput,Lt,[],mt)}return(Vt.calc||Vt.plot)&&(Vt.fullReplot=!0),gt&&Vt.nChanges&&Vt.nChangesAnim&&(Vt.anim=Vt.nChanges===Vt.nChangesAnim&&St?"all":"some"),Vt}(_e,Xe,ot,ct,_t,xt.newDataRevision);if(fe(_e)&&(xt.layoutReplot=!0),At.calc||xt.calc){_e.calcdata=void 0;for(var ht=Object.getOwnPropertyNames(at),st=0;st<ht.length;st++){var Bt=ht[st],gn=Bt.substring(0,5);if("xaxis"===gn||"yaxis"===gn){var hn=at[Bt]._emptyCategories;hn&&hn()}}}else s.supplyDefaultsUpdateCalc(_e.calcdata,ot);var We=[];if(Be&&(_e._transitionData={},s.createTransitionData(_e),We.push(function(){return X.addFrames(_e,Be)})),at.transition&&!qe&&(At.anim||xt.anim))xt.ticks&&We.push(k.doTicksRelayout),s.doCalcdata(_e),k.doAutoRangeAndConstraints(_e),We.push(function(){return s.transitionFromReact(_e,At,xt,nt)});else if(At.fullReplot||xt.layoutReplot||qe)_e._fullLayout._skipDefaults=!0,We.push(X._doPlot);else{for(var it in xt.arrays){var qt=xt.arrays[it];if(qt.length){var Ge=l.getComponentMethod(it,"drawOne");if(Ge!==p.noop)for(var Pe=0;Pe<qt.length;Pe++)Ge(_e,qt[Pe]);else{var Ee=l.getComponentMethod(it,"draw");if(Ee===p.noop)throw new Error("cannot draw components: "+it);Ee(_e)}}}We.push(s.previousPromises),At.style&&We.push(k.doTraceStyle),(At.colorbars||xt.colorbars)&&We.push(k.doColorBars),xt.legend&&We.push(k.doLegend),xt.layoutstyle&&We.push(k.layoutStyles),xt.axrange&&W(We),xt.ticks&&We.push(k.doTicksRelayout),xt.modebar&&We.push(k.doModeBar),xt.camera&&We.push(k.doCamera),We.push(A)}We.push(s.rehover,s.redrag),(He=p.syncOrAsync(We,_e))&&He.then||(He=Promise.resolve(_e))}else He=X.newPlot(_e,we,Se,Oe);return He.then(function(){return _e.emit("plotly_react",{data:we,layout:Se}),_e})},X.redraw=function(_e){if(_e=p.getGraphDiv(_e),!p.isPlotDiv(_e))throw new Error("This element is not a Plotly plot: "+_e);return E.cleanData(_e.data),E.cleanLayout(_e.layout),_e.calcdata=void 0,X._doPlot(_e).then(function(){return _e.emit("plotly_redraw"),_e})},X.relayout=re,X.restyle=Q,X.setPlotConfig=function(_e){return p.extendFlat(w,_e)},X.update=he,X._guiRelayout=de(re),X._guiRestyle=de(Q),X._guiUpdate=de(he),X._storeDirectGUIEdit=function(_e,we,Se){for(var Oe in Se)te(Oe,r(_e,Oe).get(),Se[Oe],we)}},{"../components/color":666,"../components/drawing":688,"../constants/xmlns_namespaces":780,"../lib":803,"../lib/events":792,"../lib/queue":819,"../plots/cartesian/axes":854,"../plots/cartesian/constants":861,"../plots/cartesian/graph_interact":864,"../plots/cartesian/select":874,"../plots/plots":917,"../registry":931,"./edit_types":836,"./helpers":837,"./manage_arrays":839,"./plot_config":841,"./plot_schema":842,"./subroutines":844,"@plotly/d3":58,"fast-isnumeric":249,"has-hover":443}],841:[function(h,G,X){"use strict";var i={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},m={};(function b(p,r){for(var u in p){var c=p[u];c.valType?r[u]=c.dflt:(r[u]||(r[u]={}),b(c,r[u]))}})(i,m),G.exports={configAttributes:i,dfltConfig:m}},{}],842:[function(h,G,X){"use strict";var i=h("../registry"),m=h("../lib"),b=h("../plots/attributes"),p=h("../plots/layout_attributes"),r=h("../plots/frame_attributes"),u=h("../plots/animation_attributes"),c=h("./plot_config").configAttributes,l=h("./edit_types"),f=m.extendDeepAll,s=m.isPlainObject,o=m.isArrayOrTypedArray,d=m.nestedProperty,g=m.valObjectMeta,y=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function v(L,P,A){if(!L)return!1;if(L._isLinkedToArray)if(_(P[A]))A++;else if(A<P.length)return!1;for(;A<P.length;A++){var I=L[P[A]];if(!s(I)||(L=I,A===P.length-1))break;if(L._isLinkedToArray){if(!_(P[++A]))return!1}else if("info_array"===L.valType){var D=P[++A];if(!_(D))return!1;var R=L.items;if(Array.isArray(R)){if(D>=R.length)return!1;if(2===L.dimensions){if(A++,P.length===A)return L;var S=P[A];if(!_(S))return!1;L=R[D][S]}else L=R[D]}else L=R}}return L}function _(L){return L===Math.round(L)&&L>=0}function w(){var L,P,A={};for(L in f(A,p),i.subplotsRegistry)if((P=i.subplotsRegistry[L]).layoutAttributes)if(Array.isArray(P.attr))for(var I=0;I<P.attr.length;I++)k(A,P,P.attr[I]);else k(A,P,"subplot"===P.attr?P.name:P.attr);for(L in i.componentsRegistry){var D=(P=i.componentsRegistry[L]).schema;if(D&&(D.subplots||D.layout)){var R=D.subplots;if(R&&R.xaxis&&!R.yaxis)for(var S in R.xaxis)delete A.yaxis[S]}else"colorscale"===P.name?f(A,P.layoutAttributes):P.layoutAttributes&&C(A,P.layoutAttributes,P.name)}return{layoutAttributes:E(A)}}function x(){var L={frames:f({},r)};return E(L),L.frames}function E(L){return X.crawl(L,function(A,I,D){X.isValObject(A)?!0!==A.arrayOk&&"data_array"!==A.valType||(D[I+"src"]={valType:"string",editType:"none"}):s(A)&&(A.role="object")}),X.crawl(L,function(A,I,D){if(A){var R=A._isLinkedToArray;R&&(delete A._isLinkedToArray,D[I]={items:{}},D[I].items[R]=A,D[I].role="object")}}),function(P){!function A(I){for(var D in I)if(s(I[D]))A(I[D]);else if(Array.isArray(I[D]))for(var R=0;R<I[D].length;R++)A(I[D][R]);else I[D]instanceof RegExp&&(I[D]=I[D].toString())}(P)}(L),L}function k(L,P,A){var I=d(L,A),D=f({},P.layoutAttributes);D._isSubplotObj=!0,I.set(D)}function C(L,P,A){var I=d(L,A);I.set(f(I.get()||{},P))}X.IS_SUBPLOT_OBJ="_isSubplotObj",X.IS_LINKED_TO_ARRAY="_isLinkedToArray",X.DEPRECATED="_deprecated",X.UNDERSCORE_ATTRS=y,X.get=function(){var L={};i.allTypes.forEach(function(A){L[A]=function(I){var D,R;R=(D=i.modules[I]._module).basePlotModule;var S={type:null},N=f({},b),B=f({},D.attributes);X.crawl(B,function(Q,ne,ae,te,K){d(N,K).set(void 0),void 0===Q&&d(B,K).set(void 0)}),f(S,N),i.traceIs(I,"noOpacity")&&delete S.opacity,i.traceIs(I,"showLegend")||(delete S.showlegend,delete S.legendgroup),i.traceIs(I,"noHover")&&(delete S.hoverinfo,delete S.hoverlabel),D.selectPoints||delete S.selectedpoints,f(S,B),R.attributes&&f(S,R.attributes),S.type=I;var H={meta:D.meta||{},categories:D.categories||{},animatable:Boolean(D.animatable),type:I,attributes:E(S)};if(D.layoutAttributes){var Y={};f(Y,D.layoutAttributes),H.layoutAttributes=E(Y)}return D.animatable||X.crawl(H,function(Q){X.isValObject(Q)&&"anim"in Q&&delete Q.anim}),H}(A)});var P={};return Object.keys(i.transformsRegistry).forEach(function(A){var I,R;P[A]=(R=f({},i.transformsRegistry[I=A].attributes),Object.keys(i.componentsRegistry).forEach(function(S){var N=i.componentsRegistry[S];N.schema&&N.schema.transforms&&N.schema.transforms[I]&&Object.keys(N.schema.transforms[I]).forEach(function(B){C(R,N.schema.transforms[I][B],B)})}),{attributes:E(R)})}),{defs:{valObjects:g,metaKeys:y.concat(["description","role","editType","impliedEdits"]),editType:{traces:l.traces,layout:l.layout},impliedEdits:{}},traces:L,layout:w(),transforms:P,frames:x(),animation:E(u),config:E(c)}},X.crawl=function(L,P,A,I){var D=A||0;I=I||"",Object.keys(L).forEach(function(R){var S=L[R];if(-1===y.indexOf(R)){var N=(I?I+".":"")+R;P(S,R,L,D,N),X.isValObject(S)||s(S)&&"impliedEdits"!==R&&X.crawl(S,P,D+1,N)}})},X.isValObject=function(L){return L&&void 0!==L.valType},X.findArrayAttributes=function(L){var P,A,I=[],D=[],R=[];function S(Q,ne,ae,te){D=D.slice(0,te).concat([ne]),R=R.slice(0,te).concat([Q&&Q._isLinkedToArray]),Q&&("data_array"===Q.valType||!0===Q.arrayOk)&&("colorbar"!==D[te-1]||"ticktext"!==ne&&"tickvals"!==ne)&&function K(q,re,V){var W=q[D[re]],Z=V+D[re];if(re===D.length-1)o(W)&&I.push(A+Z);else if(R[re]){if(Array.isArray(W))for(var oe=0;oe<W.length;oe++)s(W[oe])&&K(W[oe],re+1,Z+"["+oe+"].")}else s(W)&&K(W,re+1,Z+".")}(P,0,"")}P=L,A="",X.crawl(b,S),L._module&&L._module.attributes&&X.crawl(L._module.attributes,S);var N=L.transforms;if(N)for(var B=0;B<N.length;B++){var H=N[B],Y=H._module;Y&&(A="transforms["+B+"].",P=H,X.crawl(Y.attributes,S))}return I},X.getTraceValObject=function(L,P){var A,I,D=P[0],R=1;if("transforms"===D){if(1===P.length)return b.transforms;var S=L.transforms;if(!Array.isArray(S)||!S.length)return!1;var N=P[1];if(!_(N)||N>=S.length)return!1;I=(A=(i.transformsRegistry[S[N].type]||{}).attributes)&&A[P[2]],R=3}else{var B=L._module;if(B||(B=(i.modules[L.type||b.type.dflt]||{})._module),!B)return!1;if(!(I=(A=B.attributes)&&A[D])){var H=B.basePlotModule;H&&H.attributes&&(I=H.attributes[D])}I||(I=b[D])}return v(I,P,R)},X.getLayoutValObject=function(L,P){return v(function(A,I){var D,R,S,N,B=A._basePlotModules;if(B){var H;for(D=0;D<B.length;D++){if((S=B[D]).attrRegex&&S.attrRegex.test(I)){if(S.layoutAttrOverrides)return S.layoutAttrOverrides;!H&&S.layoutAttributes&&(H=S.layoutAttributes)}var Y=S.baseLayoutAttrOverrides;if(Y&&I in Y)return Y[I]}if(H)return H}var Q=A._modules;if(Q)for(D=0;D<Q.length;D++)if((N=Q[D].layoutAttributes)&&I in N)return N[I];for(R in i.componentsRegistry){if("colorscale"===(S=i.componentsRegistry[R]).name&&0===I.indexOf("coloraxis"))return S.layoutAttributes[I];if(!S.schema&&I===S.name)return S.layoutAttributes}return I in p&&p[I]}(L,P[0]),P,1)}},{"../lib":803,"../plots/animation_attributes":848,"../plots/attributes":850,"../plots/frame_attributes":884,"../plots/layout_attributes":908,"../registry":931,"./edit_types":836,"./plot_config":841}],843:[function(h,G,X){"use strict";var i=h("../lib"),m=h("../plots/attributes"),b={name:{valType:"string",editType:"none"}};function p(u){return u&&"string"==typeof u}function r(u){return"s"!==u.charAt(u.length-1)&&i.warn("bad argument to arrayDefaultKey: "+u),u.substr(0,u.length-1)+"defaults"}b.templateitemname={valType:"string",editType:"calc"},X.templatedArray=function(u,c){return c._isLinkedToArray=u,c.name=b.name,c.templateitemname=b.templateitemname,c},X.traceTemplater=function(u){var c,l,f={};for(c in u)l=u[c],Array.isArray(l)&&l.length&&(f[c]=0);return{newTrace:function(s){var o={type:c=i.coerce(s,{},m,"type"),_template:null};if(c in f){var d=f[c]%(l=u[c]).length;f[c]++,o._template=l[d]}return o}}},X.newContainer=function(u,c,l){var f=u._template,s=f&&(f[c]||l&&f[l]);return i.isPlainObject(s)||(s=null),u[c]={_template:s}},X.arrayTemplater=function(u,c,l){var f=u._template,s=f&&f[r(c)],o=f&&f[c];Array.isArray(o)&&o.length||(o=[]);var d={};return{newItem:function(g){var y={name:g.name,_input:g},v=y.templateitemname=g.templateitemname;if(!p(v))return y._template=s,y;for(var _=0;_<o.length;_++){var w=o[_];if(w.name===v)return d[v]=1,y._template=w,y}return y[l]=g[l]||!1,y._template=!1,y},defaultItems:function(){for(var g=[],y=0;y<o.length;y++){var v=o[y],_=v.name;if(p(_)&&!d[_]){var w={_template:v,name:_,_input:{_templateitemname:_}};w.templateitemname=v.templateitemname,g.push(w),d[_]=1}}return g}}},X.arrayDefaultKey=r,X.arrayEditor=function(u,c,l){var f=(i.nestedProperty(u,c).get()||[]).length,s=l._index,o=s>=f&&(l._input||{})._templateitemname;o&&(s=f);var d,g=c+"["+s+"]";function y(){d={},o&&(d[g]={},d[g].templateitemname=o)}function v(w,x){o?i.nestedProperty(d[g],w).set(x):d[g+"."+w]=x}function _(){var w=d;return y(),w}return y(),{modifyBase:function(w,x){d[w]=x},modifyItem:v,getUpdateObj:_,applyUpdate:function(w,x){w&&v(w,x);var E=_();for(var k in E)i.nestedProperty(u,k).set(E[k])}}}},{"../lib":803,"../plots/attributes":850}],844:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../registry"),b=h("../plots/plots"),p=h("../lib"),r=h("../lib/clear_gl_canvases"),u=h("../components/color"),c=h("../components/drawing"),l=h("../components/titles"),f=h("../components/modebar"),s=h("../plots/cartesian/axes"),o=h("../constants/alignment"),d=h("../plots/cartesian/constraints"),g=d.enforce,y=d.clean,v=h("../plots/cartesian/autorange").doAutoRange;function _(P,A,I){for(var D=0;D<I.length;D++){var R=I[D][0],S=I[D][1];if(!(R[0]>=P[1]||R[1]<=P[0])&&S[0]<A[1]&&S[1]>A[0])return!0}return!1}function w(P){var A,I,D,R,S,N,B=P._fullLayout,H=B._size,Y=H.p,Q=s.list(P,"",!0);if(B._paperdiv.style({width:P._context.responsive&&B.autosize&&!P._context._hasZeroWidth&&!P.layout.width?"100%":B.width+"px",height:P._context.responsive&&B.autosize&&!P._context._hasZeroHeight&&!P.layout.height?"100%":B.height+"px"}).selectAll(".main-svg").call(c.setSize,B.width,B.height),P._context.setBackground(P,B.paper_bgcolor),X.drawMainTitle(P),f.manage(P),!B._has("cartesian"))return b.previousPromises(P);function ne(at,ct,_t){var xt=at._lw/2;return"x"===at._id.charAt(0)?ct?"top"===_t?ct._offset-Y-xt:ct._offset+ct._length+Y+xt:H.t+H.h*(1-(at.position||0))+xt%1:ct?"right"===_t?ct._offset+ct._length+Y+xt:ct._offset-Y-xt:H.l+H.w*(at.position||0)+xt%1}for(A=0;A<Q.length;A++){var ae=(R=Q[A])._anchorAxis;R._linepositions={},R._lw=c.crispRound(P,R.linewidth,1),R._mainLinePosition=ne(R,ae,R.side),R._mainMirrorPosition=R.mirror&&ae?ne(R,ae,o.OPPOSITE_SIDE[R.side]):null}var te=[],K=[],q=[],re=1===u.opacity(B.paper_bgcolor)&&1===u.opacity(B.plot_bgcolor)&&B.paper_bgcolor===B.plot_bgcolor;for(I in B._plots)if((D=B._plots[I]).mainplot)D.bg&&D.bg.remove(),D.bg=void 0;else{var V=D.xaxis.domain,W=D.yaxis.domain,Z=D.plotgroup;if(_(V,W,q)){var oe=Z.node(),ie=D.bg=p.ensureSingle(Z,"rect","bg");oe.insertBefore(ie.node(),oe.childNodes[0]),K.push(I)}else Z.select("rect.bg").remove(),q.push([V,W]),re||(te.push(I),K.push(I))}var ue,fe,he,de,be,pe,Te,ye,ke,ze,je,Ie,Ce,_e=B._bgLayer.selectAll(".bg").data(te);for(_e.enter().append("rect").classed("bg",!0),_e.exit().remove(),_e.each(function(at){B._plots[at].bg=i.select(this)}),A=0;A<K.length;A++)S=(D=B._plots[K[A]]).xaxis,N=D.yaxis,D.bg&&void 0!==S._offset&&void 0!==N._offset&&D.bg.call(c.setRect,S._offset-Y,N._offset-Y,S._length+2*Y,N._length+2*Y).call(u.fill,B.plot_bgcolor).style("stroke-width",0);if(!B._hasOnlyLargeSploms)for(I in B._plots){S=(D=B._plots[I]).xaxis,N=D.yaxis;var we,Se,Oe=D.clipId="clip"+B._uid+I+"plot",Be=p.ensureSingleById(B._clips,"clipPath",Oe,function(at){at.classed("plotclip",!0).append("rect")});D.clipRect=Be.select("rect").attr({width:S._length,height:N._length}),c.setTranslate(D.plot,S._offset,N._offset),D._hasClipOnAxisFalse?(we=null,Se=Oe):(we=Oe,Se=null),c.setClipUrl(D.plot,we,P),D.layerClipId=Se}function He(at){return"M"+ue+","+at+"H"+fe}function Xe(at){return"M"+S._offset+","+at+"h"+S._length}function nt(at){return"M"+at+","+ye+"V"+Te}function et(at){return"M"+at+","+N._offset+"v"+N._length}function qe(at,ct,_t){if(!at.showline||I!==at._mainSubplot)return"";if(!at._anchorAxis)return _t(at._mainLinePosition);var xt=ct(at._mainLinePosition);return at.mirror&&(xt+=ct(at._mainMirrorPosition)),xt}for(I in B._plots){N=(D=B._plots[I]).yaxis;var Ye="M0,0";x(S=D.xaxis,I)&&(be=k(S,"left",N,Q),ue=S._offset-(be?Y+be:0),pe=k(S,"right",N,Q),fe=S._offset+S._length+(pe?Y+pe:0),he=ne(S,N,"bottom"),de=ne(S,N,"top"),!(Ce=!S._anchorAxis||I!==S._mainSubplot)||"allticks"!==S.mirror&&"all"!==S.mirror||(S._linepositions[I]=[he,de]),Ye=qe(S,He,Xe),Ce&&S.showline&&("all"===S.mirror||"allticks"===S.mirror)&&(Ye+=He(he)+He(de)),D.xlines.style("stroke-width",S._lw+"px").call(u.stroke,S.showline?S.linecolor:"rgba(0,0,0,0)")),D.xlines.attr("d",Ye);var ot="M0,0";x(N,I)&&(je=k(N,"bottom",S,Q),Te=N._offset+N._length+(je?Y:0),Ie=k(N,"top",S,Q),ye=N._offset-(Ie?Y:0),ke=ne(N,S,"left"),ze=ne(N,S,"right"),!(Ce=!N._anchorAxis||I!==N._mainSubplot)||"allticks"!==N.mirror&&"all"!==N.mirror||(N._linepositions[I]=[ke,ze]),ot=qe(N,nt,et),Ce&&N.showline&&("all"===N.mirror||"allticks"===N.mirror)&&(ot+=nt(ke)+nt(ze)),D.ylines.style("stroke-width",N._lw+"px").call(u.stroke,N.showline?N.linecolor:"rgba(0,0,0,0)")),D.ylines.attr("d",ot)}return s.makeClipPaths(P),b.previousPromises(P)}function x(P,A){return(P.ticks||P.showline)&&(A===P._mainSubplot||"all"===P.mirror||"allticks"===P.mirror)}function E(P,A,I){if(!I.showline||!I._lw)return!1;if("all"===I.mirror||"allticks"===I.mirror)return!0;var D=I._anchorAxis;if(!D)return!1;var R=o.FROM_BL[A];return I.side===A?D.domain[R]===P.domain[R]:I.mirror&&D.domain[1-R]===P.domain[1-R]}function k(P,A,I,D){if(E(P,A,I))return I._lw;for(var R=0;R<D.length;R++){var S=D[R];if(S._mainAxis===I._mainAxis&&E(P,A,S))return S._lw}return 0}function C(P,A){var I=P.title,D=P._size,R=0;switch("start"===A?R=I.pad.l:"end"===A&&(R=-I.pad.r),I.xref){case"paper":return D.l+D.w*I.x+R;case"container":default:return P.width*I.x+R}}function L(P,A){var I=P.title,D=P._size,R=0;if("0em"!==A&&A?A===o.CAP_SHIFT+"em"&&(R=I.pad.t):R=-I.pad.b,"auto"===I.y)return D.t/2;switch(I.yref){case"paper":return D.t+D.h-D.h*I.y+R;case"container":default:return P.height-P.height*I.y+R}}X.layoutStyles=function(P){return p.syncOrAsync([b.doAutoMargin,w],P)},X.drawMainTitle=function(P){var S,N,A=P._fullLayout,I=(N="middle",p.isRightAnchor(S=A.title)?N="end":p.isLeftAnchor(S)&&(N="start"),N),D=function(R){var S=R.title,N="0em";return p.isTopAnchor(S)?N=o.CAP_SHIFT+"em":p.isMiddleAnchor(S)&&(N=o.MID_SHIFT+"em"),N}(A);l.draw(P,"gtitle",{propContainer:A,propName:"title.text",placeholder:A._dfltTitle.plot,attributes:{x:C(A,I),y:L(A,D),"text-anchor":I,dy:D}})},X.doTraceStyle=function(P){var A,I=P.calcdata,D=[];for(A=0;A<I.length;A++){var R=I[A],S=R[0]||{},N=S.trace||{},B=N._module||{},H=B.arraysToCalcdata;H&&H(R,N);var Y=B.editStyle;Y&&D.push({fn:Y,cd0:S})}if(D.length){for(A=0;A<D.length;A++){var Q=D[A];Q.fn(P,Q.cd0)}r(P),X.redrawReglTraces(P)}return b.style(P),m.getComponentMethod("legend","draw")(P),b.previousPromises(P)},X.doColorBars=function(P){return m.getComponentMethod("colorbar","draw")(P),b.previousPromises(P)},X.layoutReplot=function(P){var A=P.layout;return P.layout=void 0,m.call("_doPlot",P,"",A)},X.doLegend=function(P){return m.getComponentMethod("legend","draw")(P),b.previousPromises(P)},X.doTicksRelayout=function(P){return s.draw(P,"redraw"),P._fullLayout._hasOnlyLargeSploms&&(m.subplotsRegistry.splom.updateGrid(P),r(P),X.redrawReglTraces(P)),X.drawMainTitle(P),b.previousPromises(P)},X.doModeBar=function(P){var A=P._fullLayout;f.manage(P);for(var I=0;I<A._basePlotModules.length;I++){var D=A._basePlotModules[I].updateFx;D&&D(P)}return b.previousPromises(P)},X.doCamera=function(P){for(var A=P._fullLayout,I=A._subplots.gl3d,D=0;D<I.length;D++){var R=A[I[D]];R._scene.setViewport(R)}},X.drawData=function(P){var A=P._fullLayout;r(P);for(var I=A._basePlotModules,D=0;D<I.length;D++)I[D].plot(P);return X.redrawReglTraces(P),b.style(P),m.getComponentMethod("shapes","draw")(P),m.getComponentMethod("annotations","draw")(P),m.getComponentMethod("images","draw")(P),A._replotting=!1,b.previousPromises(P)},X.redrawReglTraces=function(P){var A=P._fullLayout;if(A._has("regl")){var I,D,R=P._fullData,S=[],N=[];for(A._hasOnlyLargeSploms&&A._splomGrid.draw(),I=0;I<R.length;I++){var B=R[I];!0===B.visible&&0!==B._length&&("splom"===B.type?A._splomScenes[B.uid].draw():"scattergl"===B.type?p.pushUnique(S,B.xaxis+B.yaxis):"scatterpolargl"===B.type&&p.pushUnique(N,B.subplot))}for(I=0;I<S.length;I++)(D=A._plots[S[I]])._scene&&D._scene.draw();for(I=0;I<N.length;I++)(D=A[N[I]]._subplot)._scene&&D._scene.draw()}},X.doAutoRangeAndConstraints=function(P){for(var A,I=s.list(P,"",!0),D={},R=0;R<I.length;R++)if(!D[(A=I[R])._id]){D[A._id]=1,y(P,A),v(P,A);var S=A._matchGroup;if(S)for(var N in S){var B=s.getFromId(P,N);v(P,B,A.range),D[N]=1}}g(P)},X.finalDraw=function(P){m.getComponentMethod("rangeslider","draw")(P),m.getComponentMethod("rangeselector","draw")(P)},X.drawMarginPushers=function(P){m.getComponentMethod("legend","draw")(P),m.getComponentMethod("rangeselector","draw")(P),m.getComponentMethod("sliders","draw")(P),m.getComponentMethod("updatemenus","draw")(P),m.getComponentMethod("colorbar","draw")(P)}},{"../components/color":666,"../components/drawing":688,"../components/modebar":729,"../components/titles":764,"../constants/alignment":771,"../lib":803,"../lib/clear_gl_canvases":787,"../plots/cartesian/autorange":853,"../plots/cartesian/axes":854,"../plots/cartesian/constraints":862,"../plots/plots":917,"../registry":931,"@plotly/d3":58}],845:[function(h,G,X){"use strict";var i=h("../lib"),m=i.isPlainObject,b=h("./plot_schema"),p=h("../plots/plots"),r=h("../plots/attributes"),u=h("./plot_template"),c=h("./plot_config").dfltConfig;function l(_,w){_=i.extendDeep({},_);var x,E,k=Object.keys(_).sort();function C(D,R,S){if(m(R)&&m(D))l(D,R);else if(Array.isArray(R)&&Array.isArray(D)){var N=u.arrayTemplater({_template:_},S);for(E=0;E<R.length;E++){var B=R[E],H=N.newItem(B)._template;H&&l(H,B)}var Y=N.defaultItems();for(E=0;E<Y.length;E++)R.push(Y[E]._template);for(E=0;E<R.length;E++)delete R[E].templateitemname}}for(x=0;x<k.length;x++){var L=k[x],P=_[L];if(L in w?C(P,w[L],L):w[L]=P,f(L)===L)for(var A in w){var I=f(A);A===I||I!==L||A in _||C(P,w[A],L)}}}function f(_){return _.replace(/[0-9]+$/,"")}function s(_,w,x,E,k){var C=k&&x(k);for(var L in _){var P=_[L],A=g(_,L,E),I=g(_,L,k),D=x(I);if(!D){var R=f(L);R!==L&&(D=x(I=g(_,R,k)))}if(!(C&&C===D||!D||D._noTemplating||"data_array"===D.valType||D.arrayOk&&Array.isArray(P)))if(!D.valType&&m(P))s(P,w,x,A,I);else if(D._isLinkedToArray&&Array.isArray(P))for(var S=!1,N=0,B={},H=0;H<P.length;H++){var Y=P[H];if(m(Y)){var Q=Y.name;if(Q)B[Q]||(s(Y,w,x,g(P,N,A),g(P,N,I)),N++,B[Q]=1);else if(!S){var ne=g(_,u.arrayDefaultKey(L),E),ae=g(P,N,A);s(Y,w,x,ae,g(P,N,I));var te=i.nestedProperty(w,ae);i.nestedProperty(w,ne).set(te.get()),te.set(null),S=!0}}}else i.nestedProperty(w,A).set(P)}}function o(_,w){return b.getLayoutValObject(_,i.nestedProperty({},w).parts)}function d(_,w){return b.getTraceValObject(_,i.nestedProperty({},w).parts)}function g(_,w,x){return x?Array.isArray(_)?x+"["+w+"]":x+"."+w:w}function y(_){for(var w=0;w<_.length;w++)if(m(_[w]))return!0}function v(_){var w;switch(_.code){case"data":w="The template has no key data.";break;case"layout":w="The template has no key layout.";break;case"missing":w=_.path?"There are no templates for item "+_.path+" with name "+_.templateitemname:"There are no templates for trace "+_.index+", of type "+_.traceType+".";break;case"unused":w=_.path?"The template item at "+_.path+" was not used in constructing the plot.":_.dataCount?"Some of the templates of type "+_.traceType+" were not used. The template has "+_.templateCount+" traces, the data only has "+_.dataCount+" of this type.":"The template has "+_.templateCount+" traces of type "+_.traceType+" but there are none in the data.";break;case"reused":w="Some of the templates of type "+_.traceType+" were used more than once. The template has "+_.templateCount+" traces, the data has "+_.dataCount+" of this type."}return _.msg=w,_}X.makeTemplate=function(_){_=i.isPlainObject(_)?_:i.getGraphDiv(_),_=i.extendDeep({_context:c},{data:_.data,layout:_.layout}),p.supplyDefaults(_);var w=_.data||[],x=_.layout||{};x._basePlotModules=_._fullLayout._basePlotModules,x._modules=_._fullLayout._modules;var E={data:{},layout:{}};w.forEach(function(N){var B={};s(N,B,d.bind(null,N));var H=i.coerce(N,{},r,"type"),Y=E.data[H];Y||(Y=E.data[H]=[]),Y.push(B)}),s(x,E.layout,o.bind(null,x)),delete E.layout.template;var k=x.template;if(m(k)){var C,L,P,A,I,D,R=k.layout;m(R)&&l(R,E.layout);var S=k.data;if(m(S)){for(L in E.data)if(P=S[L],Array.isArray(P)){for(D=(I=E.data[L]).length,A=P.length,C=0;C<D;C++)l(P[C%A],I[C]);for(C=D;C<A;C++)I.push(i.extendDeep({},P[C]))}for(L in S)L in E.data||(E.data[L]=i.extendDeep([],S[L]))}}return E},X.validateTemplate=function(_,w){var x=i.extendDeep({},{_context:c,data:_.data,layout:_.layout}),E=x.layout||{};m(w)||(w=E.template||{});var k=w.layout,C=w.data,L=[];x.layout=E,x.layout.template=w,p.supplyDefaults(x);var P=x._fullLayout,A=x._fullData,I={};if(m(k)?(function Y(Q,ne){for(var ae in Q)if("_"!==ae.charAt(0)&&m(Q[ae])){var te,K=f(ae),q=[];for(te=0;te<ne.length;te++)q.push(g(Q,ae,ne[te])),K!==ae&&q.push(g(Q,K,ne[te]));for(te=0;te<q.length;te++)I[q[te]]=1;Y(Q[ae],q)}}(P,["layout"]),function Y(Q,ne){for(var ae in Q)if(-1===ae.indexOf("defaults")&&m(Q[ae])){var te=g(Q,ae,ne);I[te]?Y(Q[ae],te):L.push({code:"unused",path:te})}}(k,"layout")):L.push({code:"layout"}),m(C)){for(var D,R={},S=0;S<A.length;S++){var N=A[S];R[D=N.type]=(R[D]||0)+1,N._fullInput._template||L.push({code:"missing",index:N._fullInput.index,traceType:D})}for(D in C){var B=C[D].length,H=R[D]||0;B>H?L.push({code:"unused",traceType:D,templateCount:B,dataCount:H}):H>B&&L.push({code:"reused",traceType:D,templateCount:B,dataCount:H})}}else L.push({code:"data"});if(function Y(Q,ne){for(var ae in Q)if("_"!==ae.charAt(0)){var te=Q[ae],K=g(Q,ae,ne);m(te)?(Array.isArray(Q)&&!1===te._template&&te.templateitemname&&L.push({code:"missing",path:K,templateitemname:te.templateitemname}),Y(te,K)):Array.isArray(te)&&y(te)&&Y(te,K)}}({data:A,layout:P},""),L.length)return L.map(v)}},{"../lib":803,"../plots/attributes":850,"../plots/plots":917,"./plot_config":841,"./plot_schema":842,"./plot_template":843}],846:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("./plot_api"),b=h("../plots/plots"),p=h("../lib"),r=h("../snapshot/helpers"),u=h("../snapshot/tosvg"),c=h("../snapshot/svgtoimg"),l=h("../version").version,f={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};G.exports=function(s,o){var d,g,y,v;function _(H){return!(H in o)||p.validate(o[H],f[H])}if(o=o||{},p.isPlainObject(s)?(d=s.data||[],g=s.layout||{},y=s.config||{},v={}):(s=p.getGraphDiv(s),d=p.extendDeep([],s.data),g=p.extendDeep({},s.layout),y=s._context,v=s._fullLayout||{}),!_("width")&&null!==o.width||!_("height")&&null!==o.height)throw new Error("Height and width should be pixel values.");if(!_("format"))throw new Error("Export format is not "+p.join2(f.format.values,", "," or ")+".");var w={};function x(H,Y){return p.coerce(o,w,f,H,Y)}var E=x("format"),k=x("width"),C=x("height"),L=x("scale"),P=x("setBackground"),A=x("imageDataOnly"),I=document.createElement("div");I.style.position="absolute",I.style.left="-5000px",document.body.appendChild(I);var D=p.extendFlat({},g);k?D.width=k:null===o.width&&i(v.width)&&(D.width=v.width),C?D.height=C:null===o.height&&i(v.height)&&(D.height=v.height);var R=p.extendFlat({},y,{_exportedPlot:!0,staticPlot:!0,setBackground:P}),S=r.getRedrawFunc(I);function N(){return new Promise(function(H){setTimeout(H,r.getDelay(I._fullLayout))})}function B(){return new Promise(function(H,Y){var Q=u(I,E,L),ne=I._fullLayout.width,ae=I._fullLayout.height;function te(){m.purge(I),document.body.removeChild(I)}if("full-json"===E){var K=b.graphJson(I,!1,"keepdata","object",!0,!0);return K.version=l,K=JSON.stringify(K),te(),H(A?K:r.encodeJSON(K))}if(te(),"svg"===E)return H(A?Q:r.encodeSVG(Q));var q=document.createElement("canvas");q.id=p.randstr(),c({format:E,width:ne,height:ae,scale:L,canvas:q,svg:Q,promise:!0}).then(H).catch(Y)})}return new Promise(function(H,Y){m.newPlot(I,d,D,R).then(S).then(N).then(B).then(function(Q){var ne;H((ne=Q,A?ne.replace(r.IMAGE_URL_PREFIX,""):ne))}).catch(function(Q){Y(Q)})})}},{"../lib":803,"../plots/plots":917,"../snapshot/helpers":935,"../snapshot/svgtoimg":937,"../snapshot/tosvg":939,"../version":1404,"./plot_api":840,"fast-isnumeric":249}],847:[function(h,G,X){"use strict";var i=h("../lib"),m=h("../plots/plots"),b=h("./plot_schema"),p=h("./plot_config").dfltConfig,r=i.isPlainObject,u=Array.isArray,c=i.isArrayOrTypedArray;function l(w,x,E,k,C,L){L=L||[];for(var P=Object.keys(w),A=0;A<P.length;A++){var I=P[A];if("transforms"!==I){var D=L.slice();D.push(I);var R=w[I],S=x[I],N=y(E,I),B=(N||{}).valType,H="info_array"===B,Y="colorscale"===B,Q=(N||{}).items;if(g(E,I))if(r(R)&&r(S)&&"any"!==B)l(R,S,N,k,C,D);else if(H&&u(R)){R.length>S.length&&k.push(d("unused",C,D.concat(S.length)));var ne,ae,K,q,re=S.length,V=Array.isArray(Q);if(V&&(re=Math.min(re,Q.length)),2===N.dimensions)for(ae=0;ae<re;ae++)if(u(R[ae])){R[ae].length>S[ae].length&&k.push(d("unused",C,D.concat(ae,S[ae].length)));var W=S[ae].length;for(ne=0;ne<(V?Math.min(W,Q[ae].length):W);ne++)q=S[ae][ne],i.validate(K=R[ae][ne],V?Q[ae][ne]:Q)?q!==K&&q!==+K&&k.push(d("dynamic",C,D.concat(ae,ne),K,q)):k.push(d("value",C,D.concat(ae,ne),K))}else k.push(d("array",C,D.concat(ae),R[ae]));else for(ae=0;ae<re;ae++)q=S[ae],i.validate(K=R[ae],V?Q[ae]:Q)?q!==K&&q!==+K&&k.push(d("dynamic",C,D.concat(ae),K,q)):k.push(d("value",C,D.concat(ae),K))}else if(N.items&&!H&&u(R)){var Z,oe,ie=Q[Object.keys(Q)[0]],ue=[];for(Z=0;Z<S.length;Z++){var fe=S[Z]._index||Z;if((oe=D.slice()).push(fe),r(R[fe])&&r(S[Z])){ue.push(fe);var he=R[fe],de=S[Z];r(he)&&!1!==he.visible&&!1===de.visible?k.push(d("invisible",C,oe)):l(he,de,ie,k,C,oe)}}for(Z=0;Z<R.length;Z++)(oe=D.slice()).push(Z),r(R[Z])?-1===ue.indexOf(Z)&&k.push(d("unused",C,oe)):k.push(d("object",C,oe,R[Z]))}else!r(R)&&r(S)?k.push(d("object",C,D,R)):c(R)||!c(S)||H||Y?I in x?i.validate(R,N)?"enumerated"===N.valType&&(N.coerceNumber&&R!==+S||R!==S)&&k.push(d("dynamic",C,D,R,S)):k.push(d("value",C,D,R)):k.push(d("unused",C,D,R)):k.push(d("array",C,D,R));else k.push(d("schema",C,D))}}return k}function f(w,x){for(var E=w.layout.layoutAttributes,k=0;k<x.length;k++){var C=x[k],L=w.traces[C.type],P=L.layoutAttributes;P&&i.extendFlat(C.subplot?E[L.attributes.subplot.dflt]:E,P)}return E}G.exports=function(w,x){void 0===w&&(w=[]),void 0===x&&(x={});var E,k,C=b.get(),L=[],P={_context:i.extendFlat({},p)};u(w)?(P.data=i.extendDeep([],w),E=w):(P.data=[],E=[],L.push(d("array","data"))),r(x)?(P.layout=i.extendDeep({},x),k=x):(P.layout={},k={},arguments.length>1&&L.push(d("object","layout"))),m.supplyDefaults(P);for(var A=P._fullData,I=E.length,D=0;D<I;D++){var R=E[D],S=["data",D];if(r(R)){var N=A[D],B=N.type,H=C.traces[B].attributes;H.type={valType:"enumerated",values:[B]},!1===N.visible&&!1!==R.visible&&L.push(d("invisible",S)),l(R,N,H,L,S);var Y=R.transforms,Q=N.transforms;if(Y){u(Y)||L.push(d("array",S,["transforms"])),S.push("transforms");for(var ne=0;ne<Y.length;ne++){var ae=["transforms",ne],te=Y[ne].type;if(r(Y[ne])){var K=C.transforms[te]?C.transforms[te].attributes:{};K.type={valType:"enumerated",values:Object.keys(C.transforms)},l(Y[ne],Q[ne],K,L,S,ae)}else L.push(d("object",S,ae))}}}else L.push(d("object",S))}return l(k,P._fullLayout,f(C,A),L,"layout"),0===L.length?void 0:L};var s={object:function(w,x){return("layout"===w&&""===x?"The layout argument":"data"===w[0]&&""===x?"Trace "+w[1]+" in the data argument":o(w)+"key "+x)+" must be linked to an object container"},array:function(w,x){return("data"===w?"The data argument":o(w)+"key "+x)+" must be linked to an array container"},schema:function(w,x){return o(w)+"key "+x+" is not part of the schema"},unused:function(w,x,E){var k=r(E)?"container":"key";return o(w)+k+" "+x+" did not get coerced"},dynamic:function(w,x,E,k){return[o(w)+"key",x,"(set to '"+E+"')","got reset to","'"+k+"'","during defaults."].join(" ")},invisible:function(w,x){return(x?o(w)+"item "+x:"Trace "+w[1])+" got defaulted to be not visible"},value:function(w,x,E){return[o(w)+"key "+x,"is set to an invalid value ("+E+")"].join(" ")}};function o(w){return u(w)?"In data trace "+w[1]+", ":"In "+w+", "}function d(w,x,E,k,C){var L,P;E=E||"",u(x)?(L=x[0],P=x[1]):(L=x,P=null);var A=function(D){if(!u(D))return String(D);for(var R="",S=0;S<D.length;S++){var N=D[S];"number"==typeof N?R=R.substr(0,R.length-1)+"["+N+"]":R+=N,S<D.length-1&&(R+=".")}return R}(E),I=s[w](x,A,k,C);return i.log(I),{code:w,container:L,trace:P,path:E,astr:A,msg:I}}function g(w,x){var E=_(x),k=E.keyMinusId;return!!(k in w&&w[k]._isSubplotObj&&E.id)||x in w}function y(w,x){return x in w?w[x]:w[_(x).keyMinusId]}var v=i.counterRegex("([a-z]+)");function _(w){var x=w.match(v);return{keyMinusId:x&&x[1],id:x&&x[2]}}},{"../lib":803,"../plots/plots":917,"./plot_config":841,"./plot_schema":842}],848:[function(h,G,X){"use strict";G.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],849:[function(h,G,X){"use strict";var i=h("../lib"),m=h("../plot_api/plot_template");G.exports=function(b,p,r){var u,c,l=r.name,f=r.inclusionAttr||"visible",s=p[l],o=i.isArrayOrTypedArray(b[l])?b[l]:[],d=p[l]=[],g=m.arrayTemplater(p,l,f);for(u=0;u<o.length;u++){var y=o[u];i.isPlainObject(y)?c=g.newItem(y):(c=g.newItem({}))[f]=!1,c._index=u,!1!==c[f]&&r.handleItemDefaults(y,c,p,r),d.push(c)}var v=g.defaultItems();for(u=0;u<v.length;u++)(c=v[u])._index=d.length,r.handleItemDefaults({},c,p,r,{}),d.push(c);if(i.isArrayOrTypedArray(s)){var _=Math.min(s.length,d.length);for(u=0;u<_;u++)i.relinkPrivateKeys(d[u],s[u])}return d}},{"../lib":803,"../plot_api/plot_template":843}],850:[function(h,G,X){"use strict";var i=h("./font_attributes"),m=h("../components/fx/attributes");G.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:i({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:m.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":697,"./font_attributes":883}],851:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib"),b=m.dateTime2ms,p=m.incrementMonth,r=h("../../constants/numerical").ONEAVGMONTH;G.exports=function(u,c,l,f){if("date"!==c.type)return{vals:f};var s=u[l+"periodalignment"];if(!s)return{vals:f};var o,d=u[l+"period"];if(i(d)){if((d=+d)<=0)return{vals:f}}else if("string"==typeof d&&"M"===d.charAt(0)){var g=+d.substring(1);if(!(g>0&&Math.round(g)===g))return{vals:f};o=g}for(var y=c.calendar,v="start"===s,_="end"===s,x=b(u[l+"period0"],y)||0,E=[],k=[],C=[],L=f.length,P=0;P<L;P++){var A,I,D,R=f[P];if(o){for(A=Math.round((R-x)/(o*r)),D=p(x,o*A,y);D>R;)D=p(D,-o,y);for(;D<=R;)D=p(D,o,y);I=p(D,-o,y)}else{for(D=x+(A=Math.round((R-x)/d))*d;D>R;)D-=d;for(;D<=R;)D+=d;I=D-d}E[P]=v?I:_?D:(I+D)/2,k[P]=I,C[P]=D}return{vals:E,starts:k,ends:C}}},{"../../constants/numerical":779,"../../lib":803,"fast-isnumeric":249}],852:[function(h,G,X){"use strict";G.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],853:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("fast-isnumeric"),b=h("../../lib"),p=h("../../constants/numerical").FP_SAFE,r=h("../../registry"),u=h("../../components/drawing"),c=h("./axis_ids"),l=c.getFromId,f=c.isLinked;function s(k,C){var L,P,A=[],I=k._fullLayout,D=d(I,C,0),R=d(I,C,1),S=g(k,C),N=S.min,B=S.max;if(0===N.length||0===B.length)return b.simpleMap(C.range,C.r2l);var H=N[0].val,Y=B[0].val;for(L=1;L<N.length&&H===Y;L++)H=Math.min(H,N[L].val);for(L=1;L<B.length&&H===Y;L++)Y=Math.max(Y,B[L].val);var Q=!1;if(C.range){var ne=b.simpleMap(C.range,C.r2l);Q=ne[1]<ne[0]}"reversed"===C.autorange&&(Q=!0,C.autorange=!0);var ae,te,K,q,re,V,W=C.rangemode,Z="tozero"===W,oe="nonnegative"===W,ie=C._length,ue=ie/10,fe=0;for(L=0;L<N.length;L++)for(ae=N[L],P=0;P<B.length;P++)(V=(te=B[P]).val-ae.val-o(C,ae.val,te.val))>0&&((re=ie-D(ae)-R(te))>ue?V/re>fe&&(K=ae,q=te,fe=V/re):V/ie>fe&&(K={val:ae.val,nopad:1},q={val:te.val,nopad:1},fe=V/ie));if(H===Y){var he=H-1,de=H+1;if(Z)if(0===H)A=[0,1];else{var be=(H>0?B:N).reduce(function(Te,ye){return Math.max(Te,R(ye))},0),pe=H/(1-Math.min(.5,be/ie));A=H>0?[0,pe]:[pe,0]}else A=oe?[Math.max(0,he),Math.max(1,de)]:[he,de]}else Z?(K.val>=0&&(K={val:0,nopad:1}),q.val<=0&&(q={val:0,nopad:1})):oe&&(K.val-fe*D(K)<0&&(K={val:0,nopad:1}),q.val<=0&&(q={val:1,nopad:1})),fe=(q.val-K.val-o(C,ae.val,te.val))/(ie-D(K)-R(q)),A=[K.val-fe*D(K),q.val+fe*R(q)];return Q&&A.reverse(),b.simpleMap(A,C.l2r||Number)}function o(k,C,L){var P=0;if(k.rangebreaks)for(var A=k.locateBreaks(C,L),I=0;I<A.length;I++){var D=A[I];P+=D.max-D.min}return P}function d(k,C,L){var P=.05*C._length,A=C._anchorAxis||{};if(-1!==(C.ticklabelposition||"").indexOf("inside")||-1!==(A.ticklabelposition||"").indexOf("inside")){var I="reversed"===C.autorange;if(!I){var D=b.simpleMap(C.range,C.r2l);I=D[1]<D[0]}I&&(L=!L)}var R=0;return f(k,C._id)||(R=function(S,N,B){var H=0,Y="x"===N._id.charAt(0);for(var Q in S._plots){var ne=S._plots[Q];if(N._id===ne.xaxis._id||N._id===ne.yaxis._id){var ae=(Y?ne.yaxis:ne.xaxis)||{};if(-1!==(ae.ticklabelposition||"").indexOf("inside")&&(!B&&("left"===ae.side||"bottom"===ae.side)||B&&("top"===ae.side||"right"===ae.side))){if(ae._vals){var te=b.deg2rad(ae._tickAngles[ae._id+"tick"]||0),K=Math.abs(Math.cos(te)),q=Math.abs(Math.sin(te));ae._vals[0].bb||ae._selections[ae._id+"tick"].each(function(ie){var ue=i.select(this);ue.select(".text-math-group").empty()&&(ie.bb=u.bBox(ue.node()))});for(var V=0;V<ae._vals.length;V++){var W=ae._vals[V].bb;if(W){var Z=6+W.width,oe=6+W.height;H=Math.max(H,Y?Math.max(Z*K,oe*q):Math.max(oe*K,Z*q))}}}"inside"===ae.ticks&&"inside"===ae.ticklabelposition&&(H+=ae.ticklen||0)}}}return H}(k,C,L)),P=Math.max(R,P),"domain"===C.constrain&&C._inputDomain&&(P*=(C._inputDomain[1]-C._inputDomain[0])/(C.domain[1]-C.domain[0])),function(S){return S.nopad?0:S.pad+(S.extrapad?P:R)}}function g(k,C,L){var P,A,I,D=C._id,S=k._fullLayout,N=[],B=[];function H(te,K){for(P=0;P<K.length;P++){var q=te[K[P]],re=(q._extremes||{})[D];if(!0===q.visible&&re){for(A=0;A<re.min.length;A++)y(N,(I=re.min[A]).val,I.pad,{extrapad:I.extrapad});for(A=0;A<re.max.length;A++)v(B,(I=re.max[A]).val,I.pad,{extrapad:I.extrapad})}}}if(H(k._fullData,C._traceIndices),H(S.annotations||[],C._annIndices||[]),H(S.shapes||[],C._shapeIndices||[]),C._matchGroup&&!L)for(var Y in C._matchGroup)if(Y!==C._id){var Q=l(k,Y),ne=g(k,Q,!0),ae=C._length/Q._length;for(A=0;A<ne.min.length;A++)y(N,(I=ne.min[A]).val,I.pad*ae,{extrapad:I.extrapad});for(A=0;A<ne.max.length;A++)v(B,(I=ne.max[A]).val,I.pad*ae,{extrapad:I.extrapad})}return{min:N,max:B}}function y(k,C,L,P){_(k,C,L,P,x)}function v(k,C,L,P){_(k,C,L,P,E)}function _(k,C,L,P,A){for(var I=P.tozero,D=P.extrapad,R=!0,S=0;S<k.length&&R;S++){var N=k[S];if(A(N.val,C)&&N.pad>=L&&(N.extrapad||!D)){R=!1;break}A(C,N.val)&&N.pad<=L&&(D||!N.extrapad)&&(k.splice(S,1),S--)}if(R){var B=I&&0===C;k.push({val:C,pad:B?0:L,extrapad:!B&&D})}}function w(k){return m(k)&&Math.abs(k)<p}function x(k,C){return k<=C}function E(k,C){return k>=C}G.exports={getAutoRange:s,makePadFn:d,doAutoRange:function(k,C,L){if(C.setScale(),C.autorange){C.range=L?L.slice():s(k,C),C._r=C.range.slice(),C._rl=b.simpleMap(C._r,C.r2l);var P=C._input,A={};A[C._attr+".range"]=C.range,A[C._attr+".autorange"]=C.autorange,r.call("_storeDirectGUIEdit",k.layout,k._fullLayout._preGUI,A),P.range=C.range.slice(),P.autorange=C.autorange}var I=C._anchorAxis;if(I&&I.rangeslider){var D=I.rangeslider[C._name];D&&"auto"===D.rangemode&&(D.range=s(k,C)),I._input.rangeslider[C._name]=b.extendFlat({},D)}},findExtremes:function(k,C,L){L||(L={}),k._m||k.setScale();var P,A,I,D,R,S,N,B,H,Y=[],Q=[],ne=C.length,ae=L.padded||!1,te=L.tozero&&("linear"===k.type||"-"===k.type),K="log"===k.type,q=!1,re=L.vpadLinearized||!1;function V(de){if(Array.isArray(de))return q=!0,function(pe){return Math.max(Number(de[pe]||0),0)};var be=Math.max(Number(de||0),0);return function(){return be}}var W=V((k._m>0?L.ppadplus:L.ppadminus)||L.ppad||0),Z=V((k._m>0?L.ppadminus:L.ppadplus)||L.ppad||0),oe=V(L.vpadplus||L.vpad),ie=V(L.vpadminus||L.vpad);if(!q){if(B=1/0,H=-1/0,K)for(P=0;P<ne;P++)(A=C[P])<B&&A>0&&(B=A),A>H&&A<p&&(H=A);else for(P=0;P<ne;P++)(A=C[P])<B&&A>-p&&(B=A),A>H&&A<p&&(H=A);C=[B,H],ne=2}var ue={tozero:te,extrapad:ae};function fe(de){m(I=C[de])&&(S=W(de),N=Z(de),re?(D=k.c2l(I)-ie(de),R=k.c2l(I)+oe(de)):(B=I-ie(de),H=I+oe(de),K&&B<H/10&&(B=H/10),D=k.c2l(B),R=k.c2l(H)),te&&(D=Math.min(0,D),R=Math.max(0,R)),w(D)&&y(Y,D,N,ue),w(R)&&v(Q,R,S,ue))}var he=Math.min(6,ne);for(P=0;P<he;P++)fe(P);for(P=ne-1;P>=he;P--)fe(P);return{min:Y,max:Q,opts:L}},concatExtremes:g}},{"../../components/drawing":688,"../../constants/numerical":779,"../../lib":803,"../../registry":931,"./axis_ids":858,"@plotly/d3":58,"fast-isnumeric":249}],854:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("fast-isnumeric"),b=h("../../plots/plots"),p=h("../../registry"),r=h("../../lib"),u=r.strTranslate,c=h("../../lib/svg_text_utils"),l=h("../../components/titles"),f=h("../../components/color"),s=h("../../components/drawing"),o=h("./layout_attributes"),d=h("./clean_ticks"),g=h("../../constants/numerical"),y=g.ONEMAXYEAR,v=g.ONEAVGYEAR,_=g.ONEMINYEAR,w=g.ONEMAXQUARTER,x=g.ONEAVGQUARTER,E=g.ONEMINQUARTER,k=g.ONEMAXMONTH,C=g.ONEAVGMONTH,L=g.ONEMINMONTH,P=g.ONEWEEK,A=g.ONEDAY,I=A/2,D=g.ONEHOUR,R=g.ONEMIN,S=g.ONESEC,N=g.MINUS_SIGN,B=g.BADNUM,H={K:"zeroline"},Y={K:"gridline",L:"path"},Q={K:"tick",L:"path"},ne={K:"tick",L:"text"},ae=h("../../constants/alignment"),te=ae.MID_SHIFT,K=ae.CAP_SHIFT,q=ae.LINE_SPACING,re=ae.OPPOSITE_SIDE,V=G.exports={};V.setConvert=h("./set_convert");var W=h("./axis_autotype"),Z=h("./axis_ids"),oe=Z.idSort,ie=Z.isLinked;V.id2name=Z.id2name,V.name2id=Z.name2id,V.cleanId=Z.cleanId,V.list=Z.list,V.listIds=Z.listIds,V.getFromId=Z.getFromId,V.getFromTrace=Z.getFromTrace;var ue=h("./autorange");function fe(We){var it=1e-4*(We[1]-We[0]);return[We[0]-it,We[1]+it]}V.getAutoRange=ue.getAutoRange,V.findExtremes=ue.findExtremes,V.coerceRef=function(We,it,qt,Ge,Pe,Ee){var Ne=Ge.charAt(Ge.length-1),Ve=qt._fullLayout._subplots[Ne+"axis"],Ke=Ge+"ref",bt={};return Pe||(Pe=Ve[0]||("string"==typeof Ee?Ee:Ee[0])),Ee||(Ee=Pe),Ve=Ve.concat(Ve.map(function(gt){return gt+" domain"})),bt[Ke]={valType:"enumerated",values:Ve.concat(Ee?"string"==typeof Ee?[Ee]:Ee:[]),dflt:Pe},r.coerce(We,it,bt,Ke)},V.getRefType=function(We){return void 0===We?We:"paper"===We?"paper":"pixel"===We?"pixel":/( domain)$/.test(We)?"domain":"range"},V.coercePosition=function(We,it,qt,Ge,Pe,Ee){var Ne,Ve;if("range"!==V.getRefType(Ge))Ne=r.ensureNumber,Ve=qt(Pe,Ee);else{var Ke=V.getFromId(it,Ge);Ve=qt(Pe,Ee=Ke.fraction2r(Ee)),Ne=Ke.cleanPos}We[Pe]=Ne(Ve)},V.cleanPosition=function(We,it,qt){return("paper"===qt||"pixel"===qt?r.ensureNumber:V.getFromId(it,qt).cleanPos)(We)},V.redrawComponents=function(We,it){it=it||V.listIds(We);var qt=We._fullLayout;function Ge(Pe,Ee,Ne,Ve){for(var Ke=p.getComponentMethod(Pe,Ee),bt={},gt=0;gt<it.length;gt++)for(var pt=qt[V.id2name(it[gt])][Ne],St=0;St<pt.length;St++){var jt=pt[St];if(!bt[jt]&&(Ke(We,jt),bt[jt]=1,Ve))return}}Ge("annotations","drawOne","_annIndices"),Ge("shapes","drawOne","_shapeIndices"),Ge("images","draw","_imgIndices",!0)};var he=V.getDataConversions=function(We,it,qt,Ge){var Pe,Ee="x"===qt||"y"===qt||"z"===qt?qt:Ge;if(Array.isArray(Ee)){if(Pe={type:W(Ge,void 0,{autotypenumbers:We._fullLayout.autotypenumbers}),_categories:[]},V.setConvert(Pe),"category"===Pe.type)for(var Ne=0;Ne<Ge.length;Ne++)Pe.d2c(Ge[Ne])}else Pe=V.getFromTrace(We,it,Ee);return Pe?{d2c:Pe.d2c,c2d:Pe.c2d}:"ids"===Ee?{d2c:be,c2d:be}:{d2c:de,c2d:de}};function de(We){return+We}function be(We){return String(We)}function pe(We){return+We.substring(1)}V.getDataToCoordFunc=function(We,it,qt,Ge){return he(We,it,qt,Ge).d2c},V.counterLetter=function(We){var it=We.charAt(0);return"x"===it?"y":"y"===it?"x":void 0},V.minDtick=function(We,it,qt,Ge){-1===["log","category","multicategory"].indexOf(We.type)&&Ge?void 0===We._minDtick?(We._minDtick=it,We._forceTick0=qt):We._minDtick&&((We._minDtick/it+1e-6)%1<2e-6&&((qt-We._forceTick0)/it%1+1.000001)%1<2e-6?(We._minDtick=it,We._forceTick0=qt):((it/We._minDtick+1e-6)%1>2e-6||((qt-We._forceTick0)/We._minDtick%1+1.000001)%1>2e-6)&&(We._minDtick=0)):We._minDtick=0},V.saveRangeInitial=function(We,it){for(var qt=V.list(We,"",!0),Ge=!1,Pe=0;Pe<qt.length;Pe++){var Ee=qt[Pe],Ne=void 0===Ee._rangeInitial;(Ne&&!1===Ee.autorange||it&&(Ne||Ee.range[0]!==Ee._rangeInitial[0]||Ee.range[1]!==Ee._rangeInitial[1]))&&(Ee._rangeInitial=Ee.range.slice(),Ge=!0)}return Ge},V.saveShowSpikeInitial=function(We,it){for(var qt=V.list(We,"",!0),Ge=!1,Pe="on",Ee=0;Ee<qt.length;Ee++){var Ne=qt[Ee],Ve=void 0===Ne._showSpikeInitial;(Ve||it&&(Ve||Ne.showspikes!==Ne._showspikes))&&(Ne._showSpikeInitial=Ne.showspikes,Ge=!0),"on"!==Pe||Ne.showspikes||(Pe="off")}return We._fullLayout._cartesianSpikesEnabled=Pe,Ge},V.autoBin=function(We,it,qt,Ge,Pe,Ee){var Ne,Ve=r.aggNums(Math.min,null,We),Ke=r.aggNums(Math.max,null,We);if("category"===it.type||"multicategory"===it.type)return{start:Ve-.5,end:Ke+.5,size:Math.max(1,Math.round(Ee)||1),_dataSpan:Ke-Ve};if(Pe||(Pe=it.calendar),Ne="log"===it.type?{type:"linear",range:[Ve,Ke]}:{type:it.type,range:r.simpleMap([Ve,Ke],it.c2r,0,Pe),calendar:Pe},V.setConvert(Ne),Ee=Ee&&d.dtick(Ee,Ne.type))Ne.dtick=Ee,Ne.tick0=d.tick0(void 0,Ne.type,Pe);else{var bt;if(qt)bt=(Ke-Ve)/qt;else{var gt=r.distinctVals(We),pt=Math.pow(10,Math.floor(Math.log(gt.minDiff)/Math.LN10)),St=pt*r.roundUp(gt.minDiff/pt,[.9,1.9,4.9,9.9],!0);bt=Math.max(St,2*r.stdev(We)/Math.pow(We.length,Ge?.25:.4)),m(bt)||(bt=1)}V.autoTicks(Ne,bt)}var jt,Lt=Ne.dtick,Vt=V.tickIncrement(V.tickFirst(Ne),Lt,"reverse",Pe);if("number"==typeof Lt)jt=(Vt=function(mt,Wt,Kt,rn,Yt){var Ue=0,wt=0,Ut=0,Zt=0;function tn(yn){return(1+100*(yn-mt)/Kt.dtick)%100<2}for(var un=0;un<Wt.length;un++)Wt[un]%1==0?Ut++:m(Wt[un])||Zt++,tn(Wt[un])&&Ue++,tn(Wt[un]+Kt.dtick/2)&&wt++;var vn=Wt.length-Zt;if(Ut===vn&&"date"!==Kt.type)Kt.dtick<1?mt=rn-.5*Kt.dtick:(mt-=.5)+Kt.dtick<rn&&(mt+=Kt.dtick);else if(wt<.1*vn&&(Ue>.3*vn||tn(rn)||tn(Yt))){var Qt=Kt.dtick/2;mt+=mt+Qt<rn?Qt:-Qt}return mt}(Vt,We,Ne,Ve,Ke))+(1+Math.floor((Ke-Vt)/Lt))*Lt;else for("M"===Ne.dtick.charAt(0)&&(Vt=function(mt,Wt,Kt,rn,Yt){var Ue=r.findExactDates(Wt,Yt);if(Ue.exactDays>.8){var wt=Number(Kt.substr(1));Ue.exactYears>.8&&wt%12==0?mt=V.tickIncrement(mt,"M6","reverse")+1.5*A:Ue.exactMonths>.8?mt=V.tickIncrement(mt,"M1","reverse")+15.5*A:mt-=I;var Ut=V.tickIncrement(mt,Kt);if(Ut<=rn)return Ut}return mt}(Vt,We,Lt,Ve,Pe)),jt=Vt;jt<=Ke;)jt=V.tickIncrement(jt,Lt,!1,Pe);return{start:it.c2r(Vt,0,Pe),end:it.c2r(jt,0,Pe),size:Lt,_dataSpan:Ke-Ve}},V.prepTicks=function(We,it){var qt=r.simpleMap(We.range,We.r2l,void 0,void 0,it);if(We._dtickInit=We.dtick,We._tick0Init=We.tick0,"auto"===We.tickmode||!We.dtick){var Ge,Pe=We.nticks;Pe||("category"===We.type||"multicategory"===We.type?(Ge=We.tickfont?r.bigFont(We.tickfont.size||12):15,Pe=We._length/Ge):(Ge="y"===We._id.charAt(0)?40:80,Pe=r.constrain(We._length/Ge,4,9)+1),"radialaxis"===We._name&&(Pe*=2)),"array"===We.tickmode&&(Pe*=100),We._roughDTick=Math.abs(qt[1]-qt[0])/Pe,V.autoTicks(We,We._roughDTick),We._minDtick>0&&We.dtick<2*We._minDtick&&(We.dtick=We._minDtick,We.tick0=We.l2r(We._forceTick0))}"period"===We.ticklabelmode&&function(Ee){var Ne;function Ve(){return!(m(Ee.dtick)||"M"!==Ee.dtick.charAt(0))}var Ke=Ve(),bt=V.getTickFormat(Ee);if(bt){var gt=Ee._dtickInit!==Ee.dtick;/%[fLQsSMX]/.test(bt)||(/%[HI]/.test(bt)?(Ne=D,gt&&!Ke&&Ee.dtick<D&&(Ee.dtick=D)):/%p/.test(bt)?(Ne=I,gt&&!Ke&&Ee.dtick<I&&(Ee.dtick=I)):/%[Aadejuwx]/.test(bt)?(Ne=A,gt&&!Ke&&Ee.dtick<A&&(Ee.dtick=A)):/%[UVW]/.test(bt)?(Ne=P,gt&&!Ke&&Ee.dtick<P&&(Ee.dtick=P)):/%[Bbm]/.test(bt)?(Ne=C,gt&&(Ke?pe(Ee.dtick)<1:Ee.dtick<L)&&(Ee.dtick="M1")):/%[q]/.test(bt)?(Ne=x,gt&&(Ke?pe(Ee.dtick)<3:Ee.dtick<E)&&(Ee.dtick="M3")):/%[Yy]/.test(bt)&&(Ne=v,gt&&(Ke?pe(Ee.dtick)<12:Ee.dtick<_)&&(Ee.dtick="M12")))}(Ke=Ve())&&Ee.tick0===Ee._dowTick0&&(Ee.tick0=Ee._rawTick0),Ee._definedDelta=Ne}(We),We.tick0||(We.tick0="date"===We.type?"2000-01-01":0),"date"===We.type&&We.dtick<.1&&(We.dtick=.1),we(We)},V.calcTicks=function(We,it){V.prepTicks(We,it);var qt=r.simpleMap(We.range,We.r2l,void 0,void 0,it);if("array"===We.tickmode)return function(un){var vn=un.tickvals,Qt=un.ticktext,yn=new Array(vn.length),Mn=fe(r.simpleMap(un.range,un.r2l)),Pn=Math.min(Mn[0],Mn[1]),sn=Math.max(Mn[0],Mn[1]),In=0;Array.isArray(Qt)||(Qt=[]);var Rn="category"===un.type?un.d2l_noadd:un.d2l;"log"===un.type&&"L"!==String(un.dtick).charAt(0)&&(un.dtick="L"+Math.pow(10,Math.floor(Math.min(un.range[0],un.range[1]))-1));for(var Ln=0;Ln<vn.length;Ln++){var qn=Rn(vn[Ln]);qn>Pn&&qn<sn&&(yn[In]=void 0===Qt[Ln]?V.tickText(un,qn):Se(un,qn,String(Qt[Ln])),In++)}return In<vn.length&&yn.splice(In,vn.length-In),un.rangebreaks&&(yn=yn.filter(function(nr){return un.maskBreaks(nr.x)!==B})),yn}(We);var Ge=fe(qt),Pe=Ge[0],Ee=Ge[1],Ne=qt[1]<qt[0],Ve=Math.min(qt[0],qt[1]),Ke=Math.max(qt[0],qt[1]),bt="log"===We.type&&!(m(We.dtick)||"L"===We.dtick.charAt(0)),gt="period"===We.ticklabelmode;if(We._tmin=V.tickFirst(We,it),We._tmin<Pe!==Ne)return[];"category"!==We.type&&"multicategory"!==We.type||(Ee=Ne?Math.max(-.5,Ee):Math.min(We._categories.length-.5,Ee));var pt=We._tmin;We.rangebreaks&&We._tick0Init!==We.tick0&&(pt=Bt(pt,We),Ne||(pt=V.tickIncrement(pt,We.dtick,!Ne,We.calendar))),gt&&(pt=V.tickIncrement(pt,We.dtick,!Ne,We.calendar));for(var St,jt=Math.max(1e3,We._length||0),Lt=[],Vt=null;Ne?pt>=Ee:pt<=Ee;pt=V.tickIncrement(pt,We.dtick,Ne,We.calendar)){if(We.rangebreaks&&!Ne){if(pt<Pe)continue;if(We.maskBreaks(pt)===B&&Bt(pt,We)>=Ke)break}if(Lt.length>jt||pt===Vt)break;Vt=pt;var mt=!1;bt&&pt!==(0|pt)&&(mt=!0),Lt.push({minor:mt,value:pt})}if(gt&&function(un,vn,Qt){for(var yn=0;yn<un.length;yn++){var Mn=un[yn].value,Pn=yn,sn=yn+1;yn<un.length-1?(Pn=yn,sn=yn+1):yn>0?(Pn=yn-1,sn=yn):(Pn=yn,sn=yn);var In,qn=Math.abs(un[sn].value-un[Pn].value),nr=Qt||qn,rr=0;nr>=_?rr=qn>=_&&qn<=y?qn:v:Qt===x&&nr>=E?rr=qn>=E&&qn<=w?qn:x:nr>=L?rr=qn>=L&&qn<=k?qn:C:Qt===P&&nr>=P?rr=P:nr>=A?rr=A:Qt===I&&nr>=I?rr=I:Qt===D&&nr>=D&&(rr=D),rr>=qn&&(rr=qn,In=!0);var gr=Mn+rr;if(vn.rangebreaks&&rr>0){for(var jr=0,kr=0;kr<84;kr++){var er=(kr+.5)/84;vn.maskBreaks(Mn*(1-er)+er*gr)!==B&&jr++}(rr*=jr/84)||(un[yn].drop=!0),In&&qn>P&&(rr=qn)}(rr>0||0===yn)&&(un[yn].periodX=Mn+rr/2)}}(Lt,We,We._definedDelta),We.rangebreaks){var Wt="y"===We._id.charAt(0),Kt=1;"auto"===We.tickmode&&(Kt=We.tickfont?We.tickfont.size:12);var rn=NaN;for(St=Lt.length-1;St>-1;St--)if(Lt[St].drop)Lt.splice(St,1);else{Lt[St].value=Bt(Lt[St].value,We);var Yt=We.c2p(Lt[St].value);(Wt?rn>Yt-Kt:rn<Yt+Kt)?Lt.splice(Ne?St+1:St,1):rn=Yt}}st(We)&&360===Math.abs(qt[1]-qt[0])&&Lt.pop(),We._tmax=(Lt[Lt.length-1]||{}).value,We._prevDateHead="",We._inCalcTicks=!0;var Ue,wt,Ut=[];for(St=0;St<Lt.length;St++)Ue=V.tickText(We,Lt[St].value,!1,Lt[St].minor),void 0!==(wt=Lt[St].periodX)&&(Ue.periodX=wt,(wt>Ke||wt<Ve)&&(wt>Ke&&(Ue.periodX=Ke),wt<Ve&&(Ue.periodX=Ve),Ue.text=" ",We._prevDateHead="")),Ut.push(Ue);return We._inCalcTicks=!1,Ut};var Te=[2,5,10],ye=[1,2,3,6,12],ke=[1,2,5,10,15,30],ze=[1,2,3,7,14],je=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ie=[-.301,0,.301,.699,1],Ce=[15,30,45,90,180];function _e(We,it,qt){return it*r.roundUp(We/it,qt)}function we(We){var it=We.dtick;if(We._tickexponent=0,m(it)||"string"==typeof it||(it=1),"category"!==We.type&&"multicategory"!==We.type||(We._tickround=null),"date"===We.type){var qt=We.r2l(We.tick0),Ge=We.l2r(qt).replace(/(^-|i)/g,""),Pe=Ge.length;if("M"===String(it).charAt(0))We._tickround=Pe>10||"01-01"!==Ge.substr(5)?"d":+it.substr(1)%12==0?"y":"m";else if(it>=A&&Pe<=10||it>=15*A)We._tickround="d";else if(it>=R&&Pe<=16||it>=D)We._tickround="M";else if(it>=S&&Pe<=19||it>=R)We._tickround="S";else{var Ee=We.l2r(qt+it).replace(/^-/,"").length;We._tickround=Math.max(Pe,Ee)-20,We._tickround<0&&(We._tickround=4)}}else if(m(it)||"L"===it.charAt(0)){var Ne=We.range.map(We.r2d||Number);m(it)||(it=Number(it.substr(1))),We._tickround=2-Math.floor(Math.log(it)/Math.LN10+.01);var Ve=Math.max(Math.abs(Ne[0]),Math.abs(Ne[1])),Ke=Math.floor(Math.log(Ve)/Math.LN10+.01),bt=void 0===We.minexponent?3:We.minexponent;Math.abs(Ke)>bt&&(We._tickexponent=Be(We.exponentformat)&&!He(Ke)?3*Math.round((Ke-1)/3):Ke)}else We._tickround=null}function Se(We,it,qt){var Ge=We.tickfont||{};return{x:it,dx:0,dy:0,text:qt||"",fontSize:Ge.size,font:Ge.family,fontColor:Ge.color}}V.autoTicks=function(We,it){var qt;function Ge(gt){return Math.pow(gt,Math.floor(Math.log(it)/Math.LN10))}if("date"===We.type){We.tick0=r.dateTick0(We.calendar,0);var Pe=2*it;if(Pe>v)it/=v,qt=Ge(10),We.dtick="M"+12*_e(it,qt,Te);else if(Pe>C)We.dtick="M"+_e(it/=C,1,ye);else if(Pe>A){We.dtick=_e(it,A,We._hasDayOfWeekBreaks?[1,2,7,14]:ze);var Ee=V.getTickFormat(We),Ne="period"===We.ticklabelmode;Ne&&(We._rawTick0=We.tick0),We.tick0=/%[uVW]/.test(Ee)?r.dateTick0(We.calendar,2):r.dateTick0(We.calendar,1),Ne&&(We._dowTick0=We.tick0)}else Pe>D?We.dtick=_e(it,D,ye):Pe>R?We.dtick=_e(it,R,ke):Pe>S?We.dtick=_e(it,S,ke):(qt=Ge(10),We.dtick=_e(it,qt,Te))}else if("log"===We.type){We.tick0=0;var Ve=r.simpleMap(We.range,We.r2l);if(it>.7)We.dtick=Math.ceil(it);else if(Math.abs(Ve[1]-Ve[0])<1){var Ke=1.5*Math.abs((Ve[1]-Ve[0])/it);it=Math.abs(Math.pow(10,Ve[1])-Math.pow(10,Ve[0]))/Ke,qt=Ge(10),We.dtick="L"+_e(it,qt,Te)}else We.dtick=it>.3?"D2":"D1"}else"category"===We.type||"multicategory"===We.type?(We.tick0=0,We.dtick=Math.ceil(Math.max(it,1))):st(We)?(We.tick0=0,We.dtick=_e(it,qt=1,Ce)):(We.tick0=0,qt=Ge(10),We.dtick=_e(it,qt,Te));if(0===We.dtick&&(We.dtick=1),!m(We.dtick)&&"string"!=typeof We.dtick){var bt=We.dtick;throw We.dtick=1,"ax.dtick error: "+String(bt)}},V.tickIncrement=function(We,it,qt,Ge){var Pe=qt?-1:1;if(m(it))return r.increment(We,Pe*it);var Ee=it.charAt(0),Ne=Pe*Number(it.substr(1));if("M"===Ee)return r.incrementMonth(We,Ne,Ge);if("L"===Ee)return Math.log(Math.pow(10,We)+Ne)/Math.LN10;if("D"===Ee){var Ve="D2"===it?Ie:je,Ke=We+.01*Pe,bt=r.roundUp(r.mod(Ke,1),Ve,qt);return Math.floor(Ke)+Math.log(i.round(Math.pow(10,bt),1))/Math.LN10}throw"unrecognized dtick "+String(it)},V.tickFirst=function(We,it){var qt=We.r2l||Number,Ge=r.simpleMap(We.range,qt,void 0,void 0,it),Pe=Ge[1]<Ge[0],Ee=Pe?Math.floor:Math.ceil,Ne=fe(Ge)[0],Ve=We.dtick,Ke=qt(We.tick0);if(m(Ve)){var bt=Ee((Ne-Ke)/Ve)*Ve+Ke;return"category"!==We.type&&"multicategory"!==We.type||(bt=r.constrain(bt,0,We._categories.length-1)),bt}var gt=Ve.charAt(0),pt=Number(Ve.substr(1));if("M"===gt){for(var St,jt,Lt,Vt=0,mt=Ke;Vt<10;){if(((St=V.tickIncrement(mt,Ve,Pe,We.calendar))-Ne)*(mt-Ne)<=0)return Pe?Math.min(mt,St):Math.max(mt,St);jt=(Ne-(mt+St)/2)/(St-mt),Lt=gt+(Math.abs(Math.round(jt))||1)*pt,mt=V.tickIncrement(mt,Lt,jt<0?!Pe:Pe,We.calendar),Vt++}return r.error("tickFirst did not converge",We),mt}if("L"===gt)return Math.log(Ee((Math.pow(10,Ne)-Ke)/pt)*pt+Ke)/Math.LN10;if("D"===gt){var Wt="D2"===Ve?Ie:je,Kt=r.roundUp(r.mod(Ne,1),Wt,Pe);return Math.floor(Ne)+Math.log(i.round(Math.pow(10,Kt),1))/Math.LN10}throw"unrecognized dtick "+String(Ve)},V.tickText=function(We,it,qt,Ge){var Pe,Ee=Se(We,it),Ne="array"===We.tickmode,Ve=qt||Ne,Ke=We.type,bt="category"===Ke?We.d2l_noadd:We.d2l;if(Ne&&Array.isArray(We.ticktext)){var gt=r.simpleMap(We.range,We.r2l),pt=(Math.abs(gt[1]-gt[0])-(We._lBreaks||0))/1e4;for(Pe=0;Pe<We.ticktext.length&&!(Math.abs(it-bt(We.tickvals[Pe]))<pt);Pe++);if(Pe<We.ticktext.length)return Ee.text=String(We.ticktext[Pe]),Ee}function St(Vt){return void 0===Vt||(qt?"none"===Vt:"all"!==Vt&&it!=={first:We._tmin,last:We._tmax}[Vt])}var mt,Wt,jt=qt?"never":"none"!==We.exponentformat&&St(We.showexponent)?"hide":"";if("date"===Ke?function(Vt,mt,Wt,Kt){var rn=Vt._tickround,Yt=Wt&&Vt.hoverformat||V.getTickFormat(Vt);Kt&&(rn=m(rn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[rn]);var Ue,wt=r.formatDate(mt.x,Yt,rn,Vt._dateFormat,Vt.calendar,Vt._extraFormat),Ut=wt.indexOf("\n");if(-1!==Ut&&(Ue=wt.substr(Ut+1),wt=wt.substr(0,Ut)),Kt&&("00:00:00"===wt||"00:00"===wt?(wt=Ue,Ue=""):8===wt.length&&(wt=wt.replace(/:00$/,""))),Ue)if(Wt)"d"===rn?wt+=", "+Ue:wt=Ue+(wt?", "+wt:"");else if(Vt._inCalcTicks&&Vt._prevDateHead===Ue){var Zt=gn(Vt),tn=Vt._realSide||Vt.side;(!Zt&&"top"===tn||Zt&&"bottom"===tn)&&(wt+="<br> ")}else Vt._prevDateHead=Ue,wt+="<br>"+Ue;mt.text=wt}(We,Ee,qt,Ve):"log"===Ke?function(Vt,mt,Wt,Kt,rn){var Yt=Vt.dtick,Ue=mt.x,wt=Vt.tickformat,Ut="string"==typeof Yt&&Yt.charAt(0);if("never"===rn&&(rn=""),Kt&&"L"!==Ut&&(Yt="L3",Ut="L"),wt||"L"===Ut)mt.text=Xe(Math.pow(10,Ue),Vt,rn,Kt);else if(m(Yt)||"D"===Ut&&r.mod(Ue+.01,1)<.1){var Zt=Math.round(Ue),tn=Math.abs(Zt),un=Vt.exponentformat;"power"===un||Be(un)&&He(Zt)?(mt.text=0===Zt?1:1===Zt?"10":"10<sup>"+(Zt>1?"":N)+tn+"</sup>",mt.fontSize*=1.25):("e"===un||"E"===un)&&tn>2?mt.text="1"+un+(Zt>0?"+":N)+tn:(mt.text=Xe(Math.pow(10,Ue),Vt,"","fakehover"),"D1"===Yt&&"y"===Vt._id.charAt(0)&&(mt.dy-=mt.fontSize/6))}else{if("D"!==Ut)throw"unrecognized dtick "+String(Yt);mt.text=String(Math.round(Math.pow(10,r.mod(Ue,1)))),mt.fontSize*=.75}if("D1"===Vt.dtick){var vn=String(mt.text).charAt(0);"0"!==vn&&"1"!==vn||("y"===Vt._id.charAt(0)?mt.dx-=mt.fontSize/4:(mt.dy+=mt.fontSize/2,mt.dx+=(Vt.range[1]>Vt.range[0]?1:-1)*mt.fontSize*(Ue<0?.5:.25)))}}(We,Ee,0,Ve,jt):"category"===Ke?(mt=Ee,void 0===(Wt=We._categories[Math.round(mt.x)])&&(Wt=""),mt.text=String(Wt)):"multicategory"===Ke?function(Vt,mt,Wt){var Kt=Math.round(mt.x),rn=Vt._categories[Kt]||[],Yt=void 0===rn[1]?"":String(rn[1]),Ue=void 0===rn[0]?"":String(rn[0]);Wt?mt.text=Ue+" - "+Yt:(mt.text=Yt,mt.text2=Ue)}(We,Ee,qt):st(We)?function(Vt,mt,Wt,Kt,rn){if("radians"!==Vt.thetaunit||Wt)mt.text=Xe(mt.x,Vt,rn,Kt);else{var Yt=mt.x/180;if(0===Yt)mt.text="0";else{var Ue=function(Ut){function Zt(Qt,yn){return Math.abs(Qt-yn)<=1e-6}var tn=function(Qt){for(var yn=1;!Zt(Math.round(Qt*yn)/yn,Qt);)yn*=10;return yn}(Ut),un=Ut*tn,vn=Math.abs(function Qt(yn,Mn){return Zt(Mn,0)?yn:Qt(Mn,yn%Mn)}(un,tn));return[Math.round(un/vn),Math.round(tn/vn)]}(Yt);if(Ue[1]>=100)mt.text=Xe(r.deg2rad(mt.x),Vt,rn,Kt);else{var wt=mt.x<0;mt.text=1===Ue[1]?1===Ue[0]?"\u03c0":Ue[0]+"\u03c0":["<sup>",Ue[0],"</sup>","\u2044","<sub>",Ue[1],"</sub>","\u03c0"].join(""),wt&&(mt.text=N+mt.text)}}}}(We,Ee,qt,Ve,jt):function(Vt,mt,Wt,Kt,rn){"never"===rn?rn="":"all"===Vt.showexponent&&Math.abs(mt.x/Vt.dtick)<1e-6&&(rn="hide"),mt.text=Xe(mt.x,Vt,rn,Kt)}(We,Ee,0,Ve,jt),Ge||(We.tickprefix&&!St(We.showtickprefix)&&(Ee.text=We.tickprefix+Ee.text),We.ticksuffix&&!St(We.showticksuffix)&&(Ee.text+=We.ticksuffix)),"boundaries"===We.tickson||We.showdividers){var Lt=function(Vt){var mt=We.l2p(Vt);return mt>=0&&mt<=We._length?Vt:null};Ee.xbnd=[Lt(Ee.x-.5),Lt(Ee.x+We.dtick-.5)]}return Ee},V.hoverLabelText=function(We,it,qt){qt&&(We=r.extendFlat({},We,{hoverformat:qt}));var Ge=Array.isArray(it)?it[0]:it,Pe=Array.isArray(it)?it[1]:void 0;if(void 0!==Pe&&Pe!==Ge)return V.hoverLabelText(We,Ge,qt)+" - "+V.hoverLabelText(We,Pe,qt);var Ee="log"===We.type&&Ge<=0,Ne=V.tickText(We,We.c2l(Ee?-Ge:Ge),"hover").text;return Ee?0===Ge?"0":N+Ne:Ne};var Oe=["f","p","n","\u03bc","m","","k","M","G","T"];function Be(We){return"SI"===We||"B"===We}function He(We){return We>14||We<-15}function Xe(We,it,qt,Ge){var Pe=We<0,Ee=it._tickround,Ne=qt||it.exponentformat||"B",Ve=it._tickexponent,Ke=V.getTickFormat(it),bt=it.separatethousands;if(Ge){var gt={exponentformat:Ne,minexponent:it.minexponent,dtick:"none"===it.showexponent?it.dtick:m(We)&&Math.abs(We)||1,range:"none"===it.showexponent?it.range.map(it.r2d):[0,We||1]};we(gt),Ee=(Number(gt._tickround)||0)+4,Ve=gt._tickexponent,it.hoverformat&&(Ke=it.hoverformat)}if(Ke)return it._numFormat(Ke)(We).replace(/-/g,N);var pt,St=Math.pow(10,-Ee)/2;if("none"===Ne&&(Ve=0),(We=Math.abs(We))<St)We="0",Pe=!1;else{if(We+=St,Ve&&(We*=Math.pow(10,-Ve),Ee+=Ve),0===Ee)We=String(Math.floor(We));else if(Ee<0){We=(We=String(Math.round(We))).substr(0,We.length+Ee);for(var jt=Ee;jt<0;jt++)We+="0"}else{var Lt=(We=String(We)).indexOf(".")+1;Lt&&(We=We.substr(0,Lt+Ee).replace(/\.?0+$/,""))}We=r.numSeparate(We,it._separators,bt)}return Ve&&"hide"!==Ne&&(Be(Ne)&&He(Ve)&&(Ne="power"),pt=Ve<0?N+-Ve:"power"!==Ne?"+"+Ve:String(Ve),"e"===Ne||"E"===Ne?We+=Ne+pt:"power"===Ne?We+="\xd710<sup>"+pt+"</sup>":"B"===Ne&&9===Ve?We+="B":Be(Ne)&&(We+=Oe[Ve/3+5])),Pe?N+We:We}function nt(We,it){for(var qt=[],Ge={},Pe=0;Pe<it.length;Pe++){var Ee=it[Pe];Ge[Ee.text2]?Ge[Ee.text2].push(Ee.x):Ge[Ee.text2]=[Ee.x]}for(var Ne in Ge)qt.push(Se(We,r.interp(Ge[Ne],.5),Ne));return qt}function et(We){return void 0!==We.periodX?We.periodX:We.x}function qe(We){return[We.text,We.x,We.axInfo,We.font,We.fontSize,We.fontColor].join("_")}function Ye(We){var it=We.title.font.size,qt=(We.title.text.match(c.BR_TAG_ALL)||[]).length;return We.title.hasOwnProperty("standoff")?qt?it*(K+qt*q):it*K:qt?it*(qt+1)*q:it}function ot(We,it){var qt=We.l2p(it);return qt>1&&qt<We._length-1}function at(We){var it=i.select(We),qt=it.select(".text-math-group");return qt.empty()?it.select("text"):qt}function ct(We){return We._id+".automargin"}function _t(We){return ct(We)+".mirror"}function xt(We){return We._id+".rangeslider"}function Ht(We,it){for(var qt=0;qt<it.length;qt++)-1===We.indexOf(it[qt])&&We.push(it[qt])}function At(We,it,qt){var Ge,Pe,Ee=[],Ne=[],Ve=We.layout;for(Ge=0;Ge<it.length;Ge++)Ee.push(V.getFromId(We,it[Ge]));for(Ge=0;Ge<qt.length;Ge++)Ne.push(V.getFromId(We,qt[Ge]));var Ke=Object.keys(o),bt=["anchor","domain","overlaying","position","side","tickangle","editType"],gt=["linear","log"];for(Ge=0;Ge<Ke.length;Ge++){var pt=Ke[Ge],St=Ee[0][pt],jt=Ne[0][pt],Lt=!0,Vt=!1,mt=!1;if("_"!==pt.charAt(0)&&"function"!=typeof St&&-1===bt.indexOf(pt)){for(Pe=1;Pe<Ee.length&&Lt;Pe++){var Wt=Ee[Pe][pt];"type"===pt&&-1!==gt.indexOf(St)&&-1!==gt.indexOf(Wt)&&St!==Wt?Vt=!0:Wt!==St&&(Lt=!1)}for(Pe=1;Pe<Ne.length&&Lt;Pe++){var Kt=Ne[Pe][pt];"type"===pt&&-1!==gt.indexOf(jt)&&-1!==gt.indexOf(Kt)&&jt!==Kt?mt=!0:Ne[Pe][pt]!==jt&&(Lt=!1)}Lt&&(Vt&&(Ve[Ee[0]._name].type="linear"),mt&&(Ve[Ne[0]._name].type="linear"),ht(Ve,pt,Ee,Ne,We._fullLayout._dfltTitle))}}for(Ge=0;Ge<We._fullLayout.annotations.length;Ge++){var rn=We._fullLayout.annotations[Ge];-1!==it.indexOf(rn.xref)&&-1!==qt.indexOf(rn.yref)&&r.swapAttrs(Ve.annotations[Ge],["?"])}}function ht(We,it,qt,Ge,Pe){var Ee,Ne=r.nestedProperty,Ve=Ne(We[qt[0]._name],it).get(),Ke=Ne(We[Ge[0]._name],it).get();for("title"===it&&(Ve&&Ve.text===Pe.x&&(Ve.text=Pe.y),Ke&&Ke.text===Pe.y&&(Ke.text=Pe.x)),Ee=0;Ee<qt.length;Ee++)Ne(We,qt[Ee]._name+"."+it).set(Ke);for(Ee=0;Ee<Ge.length;Ee++)Ne(We,Ge[Ee]._name+"."+it).set(Ve)}function st(We){return"angularaxis"===We._id}function Bt(We,it){for(var qt=it._rangebreaks.length,Ge=0;Ge<qt;Ge++){var Pe=it._rangebreaks[Ge];if(We>=Pe.min&&We<Pe.max)return Pe.max}return We}function gn(We){return-1!==(We.ticklabelposition||"").indexOf("inside")}function hn(We,it){gn(We._anchorAxis||{})&&We._hideCounterAxisInsideTickLabels&&We._hideCounterAxisInsideTickLabels(it)}V.getTickFormat=function(We){var it,qt,Ge,Pe,Ee,Ne,Ve,Ke,St,jt,Lt,Vt,mt,Wt;function bt(St){return"string"!=typeof St?St:Number(St.replace("M",""))*C}function gt(St,jt){var Lt=["L","D"];if(typeof St==typeof jt){if("number"==typeof St)return St-jt;var Vt=Lt.indexOf(St.charAt(0)),mt=Lt.indexOf(jt.charAt(0));return Vt===mt?Number(St.replace(/(L|D)/g,""))-Number(jt.replace(/(L|D)/g,"")):Vt-mt}return"number"==typeof St?1:-1}if(We.tickformatstops&&We.tickformatstops.length>0)switch(We.type){case"date":case"linear":for(it=0;it<We.tickformatstops.length;it++)if((Ge=We.tickformatstops[it]).enabled&&(Pe=We.dtick,Ne=void 0,void 0,void 0,Ne=bt||function(St){return St},Ke=(Ee=Ge.dtickrange)[1],(!(Ve=Ee[0])&&"number"!=typeof Ve||Ne(Ve)<=Ne(Pe))&&(!Ke&&"number"!=typeof Ke||Ne(Ke)>=Ne(Pe)))){qt=Ge;break}break;case"log":for(it=0;it<We.tickformatstops.length;it++)if((Ge=We.tickformatstops[it]).enabled&&(Lt=void 0,Vt=void 0,mt=void 0,Wt=void 0,Lt=null===(jt=Ge.dtickrange)[0],Vt=null===jt[1],mt=gt(St=We.dtick,jt[0])>=0,Wt=gt(St,jt[1])<=0,(Lt||mt)&&(Vt||Wt))){qt=Ge;break}}return qt?qt.value:We.tickformat},V.getSubplots=function(We,it){var qt=We._fullLayout._subplots,Ge=qt.cartesian.concat(qt.gl2d||[]),Pe=it?V.findSubplotsWithAxis(Ge,it):Ge;return Pe.sort(function(Ee,Ne){var Ve=Ee.substr(1).split("y"),Ke=Ne.substr(1).split("y");return Ve[0]===Ke[0]?+Ve[1]-+Ke[1]:+Ve[0]-+Ke[0]}),Pe},V.findSubplotsWithAxis=function(We,it){for(var qt=new RegExp("x"===it._id.charAt(0)?"^"+it._id+"y":it._id+"$"),Ge=[],Pe=0;Pe<We.length;Pe++){var Ee=We[Pe];qt.test(Ee)&&Ge.push(Ee)}return Ge},V.makeClipPaths=function(We){var it=We._fullLayout;if(!it._hasOnlyLargeSploms){var qt,Ge,Pe={_offset:0,_length:it.width,_id:""},Ee={_offset:0,_length:it.height,_id:""},Ne=V.list(We,"x",!0),Ve=V.list(We,"y",!0),Ke=[];for(qt=0;qt<Ne.length;qt++)for(Ke.push({x:Ne[qt],y:Ee}),Ge=0;Ge<Ve.length;Ge++)0===qt&&Ke.push({x:Pe,y:Ve[Ge]}),Ke.push({x:Ne[qt],y:Ve[Ge]});var bt=it._clips.selectAll(".axesclip").data(Ke,function(gt){return gt.x._id+gt.y._id});bt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(gt){return"clip"+it._uid+gt.x._id+gt.y._id}).append("rect"),bt.exit().remove(),bt.each(function(gt){i.select(this).select("rect").attr({x:gt.x._offset||0,y:gt.y._offset||0,width:gt.x._length||1,height:gt.y._length||1})})}},V.draw=function(We,it,qt){var Ge=We._fullLayout;"redraw"===it&&Ge._paper.selectAll("g.subplot").each(function(Ee){var Ve=Ge._plots[Ee[0]];if(Ve){var Ke=Ve.xaxis,bt=Ve.yaxis;Ve.xaxislayer.selectAll("."+Ke._id+"tick").remove(),Ve.yaxislayer.selectAll("."+bt._id+"tick").remove(),Ve.xaxislayer.selectAll("."+Ke._id+"tick2").remove(),Ve.yaxislayer.selectAll("."+bt._id+"tick2").remove(),Ve.xaxislayer.selectAll("."+Ke._id+"divider").remove(),Ve.yaxislayer.selectAll("."+bt._id+"divider").remove(),Ve.gridlayer&&Ve.gridlayer.selectAll("path").remove(),Ve.zerolinelayer&&Ve.zerolinelayer.selectAll("path").remove(),Ge._infolayer.select(".g-"+Ke._id+"title").remove(),Ge._infolayer.select(".g-"+bt._id+"title").remove()}});var Pe=it&&"redraw"!==it?it:V.listIds(We);return r.syncOrAsync(Pe.map(function(Ee){return function(){if(Ee){var Ne=V.getFromId(We,Ee),Ve=V.drawOne(We,Ne,qt);return Ne._r=Ne.range.slice(),Ne._rl=r.simpleMap(Ne._r,Ne.r2l),Ve}}}))},V.drawOne=function(We,it,qt){var Ge,Pe,Ee;qt=qt||{},it.setScale();var Ne=We._fullLayout,Ve=it._id,Ke=Ve.charAt(0),bt=V.counterLetter(Ve),gt=Ne._plots[it._mainSubplot];if(gt){var pt=gt[Ke+"axislayer"],St=it._mainLinePosition,jt=it._mainMirrorPosition,Lt=it._vals=V.calcTicks(it),Vt=[it.mirror,St,jt].join("_");for(Ge=0;Ge<Lt.length;Ge++)Lt[Ge].axInfo=Vt;it._selections={},it._tickAngles&&(it._prevTickAngles=it._tickAngles),it._tickAngles={},it._depth=null;var mt={};if(it.visible){var Wt,Kt,rn=V.makeTransTickFn(it),Yt=V.makeTransTickLabelFn(it),Ue="inside"===it.ticks,wt="outside"===it.ticks;if("boundaries"===it.tickson){var Ut=function(ir,Bn){var mr,zr=[],br=function(Dr,di){var ni=Dr.xbnd[di];null!==ni&&zr.push(r.extendFlat({},Dr,{x:ni}))};if(Bn.length){for(mr=0;mr<Bn.length;mr++)br(Bn[mr],0);br(Bn[mr-1],1)}return zr}(0,Lt);Kt=V.clipEnds(it,Ut),Wt=Ue?Kt:Ut}else Kt=V.clipEnds(it,Lt),Wt=Ue&&"period"!==it.ticklabelmode?Kt:Lt;var Zt=it._gridVals=Kt,tn=function(ir,Bn){var mr,zr,br=[],Dr=Bn.length&&Bn[Bn.length-1].x<Bn[0].x,di=function(pi,qi){var Ct=pi.xbnd[qi];null!==Ct&&br.push(r.extendFlat({},pi,{x:Ct}))};if(ir.showdividers&&Bn.length){for(mr=0;mr<Bn.length;mr++){var ni=Bn[mr];ni.text2!==zr&&di(ni,Dr?1:0),zr=ni.text2}di(Bn[mr-1],Dr?0:1)}return br}(it,Lt);if(!Ne._hasOnlyLargeSploms){var un=it._subplotsWith,vn={};for(Ge=0;Ge<un.length;Ge++){var Qt=(Ee=Ne._plots[Pe=un[Ge]])[bt+"axis"],yn=Qt._mainAxis._id;if(!vn[yn]){vn[yn]=1;var Mn="x"===Ke?"M0,"+Qt._offset+"v"+Qt._length:"M"+Qt._offset+",0h"+Qt._length;V.drawGrid(We,it,{vals:Zt,counterAxis:Qt,layer:Ee.gridlayer.select("."+Ve),path:Mn,transFn:rn}),V.drawZeroLine(We,it,{counterAxis:Qt,layer:Ee.zerolinelayer,path:Mn,transFn:rn})}}}var Pn=V.getTickSigns(it),sn=[];if(it.ticks){var In,Rn,Ln,qn=V.makeTickPath(it,St,Pn[2]);if(it._anchorAxis&&it.mirror&&!0!==it.mirror?(In=V.makeTickPath(it,jt,Pn[3]),Rn=qn+In):(In="",Rn=qn),it.showdividers&&wt&&"boundaries"===it.tickson){var nr={};for(Ge=0;Ge<tn.length;Ge++)nr[tn[Ge].x]=1;Ln=function(ir){return nr[ir.x]?In:Rn}}else Ln=Rn;V.drawTicks(We,it,{vals:Wt,layer:pt,path:Ln,transFn:rn}),"allticks"===it.mirror&&(sn=Object.keys(it._linepositions||{}))}for(Ge=0;Ge<sn.length;Ge++){Ee=Ne._plots[Pe=sn[Ge]];var rr=it._linepositions[Pe]||[],gr=V.makeTickPath(it,rr[0],Pn[0])+V.makeTickPath(it,rr[1],Pn[1]);V.drawTicks(We,it,{vals:Wt,layer:Ee[Ke+"axislayer"],path:gr,transFn:rn})}var jr=[];if(jr.push(function(){return V.drawLabels(We,it,{vals:Lt,layer:pt,plotinfo:Ee,transFn:Yt,labelFns:V.makeLabelFns(it,St)})}),"multicategory"===it.type){var kr={x:2,y:10}[Ke];jr.push(function(){var ir={x:"height",y:"width"}[Ke],Bn=Xr()[ir]+kr+(it._tickAngles[Ve+"tick"]?it.tickfont.size*q:0);return V.drawLabels(We,it,{vals:nt(it,Lt),layer:pt,cls:Ve+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:rn,labelFns:V.makeLabelFns(it,St+Bn*Pn[4])})}),jr.push(function(){return it._depth=Pn[4]*(Xr("tick2")[it.side]-St),ir=We,Bn=it,br=(mr={vals:tn,layer:pt,path:V.makeTickPath(it,St,Pn[4],it._depth),transFn:rn}).vals,(Dr=mr.layer.selectAll("path."+(zr=Bn._id+"divider")).data(br,qe)).exit().remove(),Dr.enter().insert("path",":first-child").classed(zr,1).classed("crisp",1).call(f.stroke,Bn.dividercolor).style("stroke-width",s.crispRound(ir,Bn.dividerwidth,1)+"px"),void Dr.attr("transform",mr.transFn).attr("d",mr.path);var ir,Bn,mr,zr,br,Dr})}else it.title.hasOwnProperty("standoff")&&jr.push(function(){it._depth=Pn[4]*(Xr()[it.side]-St)});var er=p.getComponentMethod("rangeslider","isVisible")(it);return jr.push(function(){var ir,Bn,mr,zr,br=it.side.charAt(0),Dr=re[it.side].charAt(0),di=V.getPxPosition(We,it),ni=wt?it.ticklen:0;if((it.automargin||er)&&("multicategory"===it.type?ir=Xr("tick2"):(ir=Xr(),"x"===Ke&&"b"===br&&(it._depth=Math.max(ir.width>0?ir.bottom-di:0,ni)))),it.automargin){Bn={x:0,y:0,r:0,l:0,t:0,b:0};var pi=[0,1];if("x"===Ke){if("b"===br?Bn[br]=it._depth:(Bn[br]=it._depth=Math.max(ir.width>0?di-ir.top:0,ni),pi.reverse()),ir.width>0){var qi=ir.right-(it._offset+it._length);qi>0&&(Bn.xr=1,Bn.r=qi);var Ct=it._offset-ir.left;Ct>0&&(Bn.xl=0,Bn.l=Ct)}}else if("l"===br?Bn[br]=it._depth=Math.max(ir.height>0?di-ir.left:0,ni):(Bn[br]=it._depth=Math.max(ir.height>0?ir.right-di:0,ni),pi.reverse()),ir.height>0){var mn=ir.bottom-(it._offset+it._length);mn>0&&(Bn.yb=0,Bn.b=mn);var pn=it._offset-ir.top;pn>0&&(Bn.yt=1,Bn.t=pn)}Bn[bt]="free"===it.anchor?it.position:it._anchorAxis.domain[pi[0]],it.title.text!==Ne._dfltTitle[Ke]&&(Bn[br]+=Ye(it)+(it.title.standoff||0)),it.mirror&&"free"!==it.anchor&&((mr={x:0,y:0,r:0,l:0,t:0,b:0})[Dr]=it.linewidth,it.mirror&&!0!==it.mirror&&(mr[Dr]+=ni),!0===it.mirror||"ticks"===it.mirror?mr[bt]=it._anchorAxis.domain[pi[1]]:"all"!==it.mirror&&"allticks"!==it.mirror||(mr[bt]=[it._counterDomainMin,it._counterDomainMax][pi[1]]))}er&&(zr=p.getComponentMethod("rangeslider","autoMarginOpts")(We,it)),b.autoMargin(We,ct(it),Bn),b.autoMargin(We,_t(it),mr),b.autoMargin(We,xt(it),zr)}),qt.skipTitle||er&&"bottom"===it.side||jr.push(function(){return function(ir,Bn){var mr,zr=ir._fullLayout,br=Bn._id,Dr=br.charAt(0),di=Bn.title.font.size;if(Bn.title.hasOwnProperty("standoff"))mr=Bn._depth+Bn.title.standoff+Ye(Bn);else{var ni=gn(Bn);if("multicategory"===Bn.type)mr=Bn._depth;else{var pi=1.5*di;ni&&(pi=.5*di,"outside"===Bn.ticks&&(pi+=Bn.ticklen)),mr=10+pi+(Bn.linewidth?Bn.linewidth-1:0)}ni||(mr+="x"===Dr?"top"===Bn.side?di*(Bn.showticklabels?1:0):di*(Bn.showticklabels?1.5:.5):"right"===Bn.side?di*(Bn.showticklabels?1:.5):di*(Bn.showticklabels?.5:0))}var qi,Ct,mn,pn,Sn=V.getPxPosition(ir,Bn);if("x"===Dr?(Ct=Bn._offset+Bn._length/2,mn="top"===Bn.side?Sn-mr:Sn+mr):(mn=Bn._offset+Bn._length/2,Ct="right"===Bn.side?Sn+mr:Sn-mr,qi={rotate:"-90",offset:0}),"multicategory"!==Bn.type){var Zn=Bn._selections[Bn._id+"tick"];if(pn={selection:Zn,side:Bn.side},Zn&&Zn.node()&&Zn.node().parentNode){var fr=s.getTranslate(Zn.node().parentNode);pn.offsetLeft=fr.x,pn.offsetTop=fr.y}Bn.title.hasOwnProperty("standoff")&&(pn.pad=0)}return l.draw(ir,br+"title",{propContainer:Bn,propName:Bn._name+".title.text",placeholder:zr._dfltTitle[Dr],avoid:pn,transform:qi,attributes:{x:Ct,y:mn,"text-anchor":"middle"}})}(We,it)}),r.syncOrAsync(jr)}}function Xr(ir){var mr,zr,br,Dr,di,ni,Bn=Ve+(ir||"tick");return mt[Bn]||(mt[Bn]=((mr=it)._selections[zr=Bn].size()?(br=1/0,Dr=-1/0,di=1/0,ni=-1/0,mr._selections[zr].each(function(){var pi=at(this),qi=s.bBox(pi.node().parentNode);br=Math.min(br,qi.top),Dr=Math.max(Dr,qi.bottom),di=Math.min(di,qi.left),ni=Math.max(ni,qi.right)})):(br=0,Dr=0,di=0,ni=0),{top:br,bottom:Dr,left:di,right:ni,height:Dr-br,width:ni-di})),mt[Bn]}},V.getTickSigns=function(We){var it=We._id.charAt(0),Ge=We.side==={x:"top",y:"right"}[it]?1:-1,Pe=[-1,1,Ge,-Ge];return"inside"!==We.ticks==("x"===it)&&(Pe=Pe.map(function(Ee){return-Ee})),We.side&&Pe.push({l:-1,t:-1,r:1,b:1}[We.side.charAt(0)]),Pe},V.makeTransTickFn=function(We){return"x"===We._id.charAt(0)?function(it){return u(We._offset+We.l2p(it.x),0)}:function(it){return u(0,We._offset+We.l2p(it.x))}},V.makeTransTickLabelFn=function(We){var it=function(Pe){var Ee=Pe.ticklabelposition||"",Ne=function(Wt){return-1!==Ee.indexOf(Wt)},Ve=Ne("top"),Ke=Ne("left"),bt=Ne("right"),gt=Ne("bottom"),pt=Ne("inside"),St=gt||Ke||Ve||bt;if(!St&&!pt)return[0,0];var jt=Pe.side,Lt=St?(Pe.tickwidth||0)/2:0,Vt=3,mt=Pe.tickfont?Pe.tickfont.size:12;return(gt||Ve)&&(Lt+=mt*K,Vt+=(Pe.linewidth||0)/2),(Ke||bt)&&(Lt+=(Pe.linewidth||0)/2,Vt+=3),pt&&"top"===jt&&(Vt-=mt*(1-K)),(Ke||Ve)&&(Lt=-Lt),"bottom"!==jt&&"right"!==jt||(Vt=-Vt),[St?Lt:0,pt?Vt:0]}(We),qt=it[0],Ge=it[1];return"x"===We._id.charAt(0)?function(Pe){return u(qt+We._offset+We.l2p(et(Pe)),Ge)}:function(Pe){return u(Ge,qt+We._offset+We.l2p(et(Pe)))}},V.makeTickPath=function(We,it,qt,Ge){Ge=void 0!==Ge?Ge:We.ticklen;var Pe=We._id.charAt(0),Ee=(We.linewidth||1)/2;return"x"===Pe?"M0,"+(it+Ee*qt)+"v"+Ge*qt:"M"+(it+Ee*qt)+",0h"+Ge*qt},V.makeLabelFns=function(We,it,qt){var Ge=We.ticklabelposition||"",Pe=function(vn){return-1!==Ge.indexOf(vn)},Ee=Pe("top"),Ne=Pe("left"),Ve=Pe("right"),Ke=Pe("bottom")||Ne||Ee||Ve,bt=Pe("inside"),gt="inside"===Ge&&"inside"===We.ticks||!bt&&"outside"===We.ticks&&"boundaries"!==We.tickson,pt=0,St=0,jt=gt?We.ticklen:0;if(bt?jt*=-1:Ke&&(jt=0),gt&&(pt+=jt,qt)){var Lt=r.deg2rad(qt);pt=jt*Math.cos(Lt)+1,St=jt*Math.sin(Lt)}We.showticklabels&&(gt||We.showline)&&(pt+=.2*We.tickfont.size);var Vt,mt,Wt,Kt,rn,Yt={labelStandoff:pt+=(We.linewidth||1)/2*(bt?-1:1),labelShift:St},Ue=0,wt=We.side,Ut=We._id.charAt(0),Zt=We.tickangle;if("x"===Ut)Kt=(rn=!bt&&"bottom"===wt||bt&&"top"===wt)?1:-1,bt&&(Kt*=-1),Vt=St*Kt,mt=it+pt*Kt,Wt=rn?1:-.2,90===Math.abs(Zt)&&(bt?Wt+=te:Wt=-90===Zt&&"bottom"===wt?K:90===Zt&&"top"===wt?te:.5,Ue=te/2*(Zt/90)),Yt.xFn=function(vn){return vn.dx+Vt+Ue*vn.fontSize},Yt.yFn=function(vn){return vn.dy+mt+vn.fontSize*Wt},Yt.anchorFn=function(vn,Qt){if(Ke){if(Ne)return"end";if(Ve)return"start"}return m(Qt)&&0!==Qt&&180!==Qt?Qt*Kt<0!==bt?"end":"start":"middle"},Yt.heightFn=function(vn,Qt,yn){return Qt<-60||Qt>60?-.5*yn:"top"===We.side!==bt?-yn:0};else if("y"===Ut){if(Kt=(rn=!bt&&"left"===wt||bt&&"right"===wt)?1:-1,bt&&(Kt*=-1),Vt=pt,mt=St*Kt,Wt=0,bt||90!==Math.abs(Zt)||(Wt=-90===Zt&&"left"===wt||90===Zt&&"right"===wt?K:.5),bt){var tn=m(Zt)?+Zt:0;if(0!==tn){var un=r.deg2rad(tn);Ue=Math.abs(Math.sin(un))*K*Kt,Wt=0}}Yt.xFn=function(vn){return vn.dx+it-(Vt+vn.fontSize*Wt)*Kt+Ue*vn.fontSize},Yt.yFn=function(vn){return vn.dy+mt+vn.fontSize*te},Yt.anchorFn=function(vn,Qt){return m(Qt)&&90===Math.abs(Qt)?"middle":rn?"end":"start"},Yt.heightFn=function(vn,Qt,yn){return"right"===We.side&&(Qt*=-1),Qt<-30?-yn:Qt<30?-.5*yn:0}}return Yt},V.drawTicks=function(We,it,qt){var Ge=it._id+"tick",Pe=(qt=qt||{}).vals;"period"===it.ticklabelmode&&(Pe=Pe.slice()).shift();var Ee=qt.layer.selectAll("path."+Ge).data(it.ticks?Pe:[],qe);Ee.exit().remove(),Ee.enter().append("path").classed(Ge,1).classed("ticks",1).classed("crisp",!1!==qt.crisp).call(f.stroke,it.tickcolor).style("stroke-width",s.crispRound(We,it.tickwidth,1)+"px").attr("d",qt.path).style("display",null),hn(it,[Q]),Ee.attr("transform",qt.transFn)},V.drawGrid=function(We,it,qt){var Ge=it._id+"grid",Pe=(qt=qt||{}).vals,Ee=qt.counterAxis;if(!1===it.showgrid)Pe=[];else if(Ee&&V.shouldShowZeroLine(We,it,Ee))for(var Ne="array"===it.tickmode,Ve=0;Ve<Pe.length;Ve++){var Ke=Pe[Ve].x;if(Ne?!Ke:Math.abs(Ke)<it.dtick/100){if(Pe=Pe.slice(0,Ve).concat(Pe.slice(Ve+1)),!Ne)break;Ve--}}var bt=qt.layer.selectAll("path."+Ge).data(Pe,qe);bt.exit().remove(),bt.enter().append("path").classed(Ge,1).classed("crisp",!1!==qt.crisp),it._gw=s.crispRound(We,it.gridwidth,1),bt.attr("transform",qt.transFn).attr("d",qt.path).call(f.stroke,it.gridcolor||"#ddd").style("stroke-width",it._gw+"px").style("display",null),hn(it,[Y]),"function"==typeof qt.path&&bt.attr("d",qt.path)},V.drawZeroLine=function(We,it,qt){var Ge=it._id+"zl",Pe=V.shouldShowZeroLine(We,it,(qt=qt||qt).counterAxis),Ee=qt.layer.selectAll("path."+Ge).data(Pe?[{x:0,id:it._id}]:[]);Ee.exit().remove(),Ee.enter().append("path").classed(Ge,1).classed("zl",1).classed("crisp",!1!==qt.crisp).each(function(){qt.layer.selectAll("path").sort(function(Ne,Ve){return oe(Ne.id,Ve.id)})}),Ee.attr("transform",qt.transFn).attr("d",qt.path).call(f.stroke,it.zerolinecolor||f.defaultLine).style("stroke-width",s.crispRound(We,it.zerolinewidth,it._gw||1)+"px").style("display",null),hn(it,[H])},V.drawLabels=function(We,it,qt){qt=qt||{};var Ge=We._fullLayout,Pe=it._id,Ee=Pe.charAt(0),Ne=qt.cls||Pe+"tick",Ve=qt.vals,Ke=qt.labelFns,bt=qt.secondary?0:it.tickangle,gt=(it._prevTickAngles||{})[Ne],pt=qt.layer.selectAll("g."+Ne).data(it.showticklabels?Ve:[],qe),St=[];function jt(Kt,rn){Kt.each(function(Yt){var Ue=i.select(this),wt=Ue.select(".text-math-group"),Ut=Ke.anchorFn(Yt,rn),Zt=qt.transFn.call(Ue.node(),Yt)+(m(rn)&&0!=+rn?" rotate("+rn+","+Ke.xFn(Yt)+","+(Ke.yFn(Yt)-Yt.fontSize/2)+")":""),tn=c.lineCount(Ue),un=q*Yt.fontSize,vn=Ke.heightFn(Yt,m(rn)?+rn:0,(tn-1)*un);if(vn&&(Zt+=u(0,vn)),wt.empty()){var Qt=Ue.select("text");Qt.attr({transform:Zt,"text-anchor":Ut}),Qt.style("opacity",1),it._adjustTickLabelsOverflow&&it._adjustTickLabelsOverflow()}else{var yn=s.bBox(wt.node()).width*{end:-.5,start:.5}[Ut];wt.attr("transform",Zt+u(yn,0))}})}pt.enter().append("g").classed(Ne,1).append("text").attr("text-anchor","middle").each(function(Kt){var rn=i.select(this),Yt=We._promises.length;rn.call(c.positionText,Ke.xFn(Kt),Ke.yFn(Kt)).call(s.font,Kt.font,Kt.fontSize,Kt.fontColor).text(Kt.text).call(c.convertToTspans,We),We._promises[Yt]?St.push(We._promises.pop().then(function(){jt(rn,bt)})):jt(rn,bt)}),hn(it,[ne]),pt.exit().remove(),qt.repositionOnUpdate&&pt.each(function(Kt){i.select(this).select("text").call(c.positionText,Ke.xFn(Kt),Ke.yFn(Kt))}),it._adjustTickLabelsOverflow=function(){var Kt=it.ticklabeloverflow;if(Kt&&"allow"!==Kt){var rn=-1!==Kt.indexOf("hide"),Yt="x"===it._id.charAt(0),Ue=0,wt=Yt?We._fullLayout.width:We._fullLayout.height;if(-1!==Kt.indexOf("domain")){var Ut=r.simpleMap(it.range,it.r2l);Ue=it.l2p(Ut[0])+it._offset,wt=it.l2p(Ut[1])+it._offset}var Zt=Math.min(Ue,wt),tn=Math.max(Ue,wt),un=it.side,vn=1/0,Qt=-1/0;for(var yn in pt.each(function(sn){var In=i.select(this);if(In.select(".text-math-group").empty()){var Rn=s.bBox(In.node()),Ln=0;Yt?(Rn.right>tn||Rn.left<Zt)&&(Ln=1):(Rn.bottom>tn||Rn.top+(it.tickangle?0:sn.fontSize/4)<Zt)&&(Ln=1);var qn=In.select("text");Ln?rn&&qn.style("opacity",0):(qn.style("opacity",1),vn="bottom"===un||"right"===un?Math.min(vn,Yt?Rn.top:Rn.left):-1/0,Qt="top"===un||"left"===un?Math.max(Qt,Yt?Rn.bottom:Rn.right):1/0)}}),Ge._plots){var Mn=Ge._plots[yn];if(it._id===Mn.xaxis._id||it._id===Mn.yaxis._id){var Pn=Yt?Mn.yaxis:Mn.xaxis;Pn&&(Pn["_visibleLabelMin_"+it._id]=vn,Pn["_visibleLabelMax_"+it._id]=Qt)}}}},it._hideCounterAxisInsideTickLabels=function(Kt){var rn="x"===it._id.charAt(0),Yt=[];for(var Ue in Ge._plots){var wt=Ge._plots[Ue];it._id!==wt.xaxis._id&&it._id!==wt.yaxis._id||Yt.push(rn?wt.yaxis:wt.xaxis)}Yt.forEach(function(Ut,Zt){Ut&&gn(Ut)&&(Kt||[H,Y,Q,ne]).forEach(function(tn){var un="tick"===tn.K&&"text"===tn.L&&"period"===it.ticklabelmode,vn=Ge._plots[it._mainSubplot];(tn.K===H.K?vn.zerolinelayer.selectAll("."+it._id+"zl"):tn.K===Y.K?vn.gridlayer.selectAll("."+it._id):vn[it._id.charAt(0)+"axislayer"]).each(function(){var Qt=i.select(this);tn.L&&(Qt=Qt.selectAll(tn.L)),Qt.each(function(yn){var Mn=it.l2p(un?et(yn):yn.x)+it._offset,Pn=i.select(this);Mn<it["_visibleLabelMax_"+Ut._id]&&Mn>it["_visibleLabelMin_"+Ut._id]?Pn.style("display","none"):"tick"!==tn.K||Zt||Pn.style("display",null)})})})})},jt(pt,gt+1?gt:bt);var Lt=null;it._selections&&(it._selections[Ne]=pt);var Vt=[function(){return St.length&&Promise.all(St)}];it.automargin&&Ge._redrawFromAutoMarginCount&&90===gt?(Lt=90,Vt.push(function(){jt(pt,gt)})):Vt.push(function(){if(jt(pt,bt),Ve.length&&"x"===Ee&&!m(bt)&&("log"!==it.type||"D"!==String(it.dtick).charAt(0))){Lt=0;var Kt,rn=0,Yt=[];if(pt.each(function(In){rn=Math.max(rn,In.fontSize);var Rn=it.l2p(In.x),Ln=at(this),qn=s.bBox(Ln.node());Yt.push({top:0,bottom:10,height:10,left:Rn-qn.width/2,right:Rn+qn.width/2+2,width:qn.width+2})}),"boundaries"!==it.tickson&&!it.showdividers||qt.secondary){var Ue=Ve.length,wt=Math.abs((Ve[Ue-1].x-Ve[0].x)*it._m)/(Ue-1),Ut=it.ticklabelposition||"",Zt=function(In){return-1!==Ut.indexOf(In)},tn=Zt("top"),un=Zt("left"),vn=Zt("right"),Qt=Zt("bottom")||un||tn||vn?(it.tickwidth||0)+6:0,yn=wt<2.5*rn||"multicategory"===it.type;for(Kt=0;Kt<Yt.length-1;Kt++)if(r.bBoxIntersect(Yt[Kt],Yt[Kt+1],Qt)){Lt=yn?90:30;break}}else{var Mn=2;for(it.ticks&&(Mn+=it.tickwidth/2),Kt=0;Kt<Yt.length;Kt++){var Pn=Ve[Kt].xbnd,sn=Yt[Kt];if(null!==Pn[0]&&sn.left-it.l2p(Pn[0])<Mn||null!==Pn[1]&&it.l2p(Pn[1])-sn.right<Mn){Lt=90;break}}}Lt&&jt(pt,Lt)}}),it._tickAngles&&Vt.push(function(){it._tickAngles[Ne]=null===Lt?m(bt)?bt:0:Lt});var mt=it._anchorAxis;mt&&mt.autorange&&gn(it)&&!ie(Ge,it._id)&&(Ge._insideTickLabelsAutorange||(Ge._insideTickLabelsAutorange={}),Ge._insideTickLabelsAutorange[mt._name+".autorange"]=mt.autorange,Vt.push(function(){pt.each(function(Kt,rn){var Yt=at(this);Yt.select(".text-math-group").empty()&&(it._vals[rn].bb=s.bBox(Yt.node()))})}));var Wt=r.syncOrAsync(Vt);return Wt&&Wt.then&&We._promises.push(Wt),Wt},V.getPxPosition=function(We,it){var qt,Ge=We._fullLayout._size,Pe=it._id.charAt(0),Ee=it.side;return"free"!==it.anchor?qt=it._anchorAxis:"x"===Pe?qt={_offset:Ge.t+(1-(it.position||0))*Ge.h,_length:0}:"y"===Pe&&(qt={_offset:Ge.l+(it.position||0)*Ge.w,_length:0}),"top"===Ee||"left"===Ee?qt._offset:"bottom"===Ee||"right"===Ee?qt._offset+qt._length:void 0},V.shouldShowZeroLine=function(We,it,qt){var Ge=r.simpleMap(it.range,it.r2l);return Ge[0]*Ge[1]<=0&&it.zeroline&&("linear"===it.type||"-"===it.type)&&!(it.rangebreaks&&it.maskBreaks(0)===B)&&(ot(it,0)||!function(Pe,Ee,Ne,Ve){var Ke=Ne._mainAxis;if(Ke){var bt=Pe._fullLayout,gt=Ee._id.charAt(0),pt=V.counterLetter(Ee._id),St=Ee._offset+(Math.abs(Ve[0])<Math.abs(Ve[1])==("x"===gt)?0:Ee._length),Lt=bt._plots[Ne._mainSubplot];if(!(Lt.mainplotinfo||Lt).overlays.length)return jt(Ne);for(var Vt=V.list(Pe,pt),mt=0;mt<Vt.length;mt++){var Wt=Vt[mt];if(Wt._mainAxis===Ke&&jt(Wt))return!0}}function jt(Kt){if(!Kt.showline||!Kt.linewidth)return!1;var rn=Math.max((Kt.linewidth+Ee.zerolinewidth)/2,1);function Yt(Ut){return"number"==typeof Ut&&Math.abs(Ut-St)<rn}if(Yt(Kt._mainLinePosition)||Yt(Kt._mainMirrorPosition))return!0;var Ue=Kt._linepositions||{};for(var wt in Ue)if(Yt(Ue[wt][0])||Yt(Ue[wt][1]))return!0}}(We,it,qt,Ge)||function(Pe,Ee){for(var Ne=Pe._fullData,Ve=Ee._mainSubplot,Ke=Ee._id.charAt(0),bt=0;bt<Ne.length;bt++){var gt=Ne[bt];if(!0===gt.visible&&gt.xaxis+gt.yaxis===Ve&&(p.traceIs(gt,"bar-like")&&gt.orientation==={x:"h",y:"v"}[Ke]||gt.fill&&gt.fill.charAt(gt.fill.length-1)===Ke))return!0}return!1}(We,it))},V.clipEnds=function(We,it){return it.filter(function(qt){return ot(We,qt.x)})},V.allowAutoMargin=function(We){for(var it=V.list(We,"",!0),qt=0;qt<it.length;qt++){var Ge=it[qt];Ge.automargin&&(b.allowAutoMargin(We,ct(Ge)),Ge.mirror&&b.allowAutoMargin(We,_t(Ge))),p.getComponentMethod("rangeslider","isVisible")(Ge)&&b.allowAutoMargin(We,xt(Ge))}},V.swap=function(We,it){for(var qt=function(Pe,Ee){var Ne,Ve,Ke=[];for(Ne=0;Ne<Ee.length;Ne++){var bt=[],gt=Pe._fullData[Ee[Ne]].xaxis,pt=Pe._fullData[Ee[Ne]].yaxis;if(gt&&pt){for(Ve=0;Ve<Ke.length;Ve++)-1===Ke[Ve].x.indexOf(gt)&&-1===Ke[Ve].y.indexOf(pt)||bt.push(Ve);if(bt.length){var St,jt=Ke[bt[0]];if(bt.length>1)for(Ve=1;Ve<bt.length;Ve++)Ht(jt.x,(St=Ke[bt[Ve]]).x),Ht(jt.y,St.y);Ht(jt.x,[gt]),Ht(jt.y,[pt])}else Ke.push({x:[gt],y:[pt]})}}return Ke}(We,it),Ge=0;Ge<qt.length;Ge++)At(We,qt[Ge].x,qt[Ge].y)}},{"../../components/color":666,"../../components/drawing":688,"../../components/titles":764,"../../constants/alignment":771,"../../constants/numerical":779,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/plots":917,"../../registry":931,"./autorange":853,"./axis_autotype":855,"./axis_ids":858,"./clean_ticks":860,"./layout_attributes":869,"./set_convert":875,"@plotly/d3":58,"fast-isnumeric":249}],855:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib"),b=h("../../constants/numerical").BADNUM,p=m.isArrayOrTypedArray,r=m.isDateTime,u=m.cleanNumber,c=Math.round;function l(s,o){return o?i(s):"number"==typeof s}function f(s){return Math.max(1,(s-1)/1e3)}G.exports=function(s,o,d){var E,g=s,y=d.noMultiCategory;if(p(g)&&!g.length)return"-";if(!y&&p((E=g)[0])&&p(E[1]))return"multicategory";if(y&&Array.isArray(g[0])){for(var v=[],_=0;_<g.length;_++)if(p(g[_]))for(var w=0;w<g[_].length;w++)v.push(g[_][w]);g=v}if(function(E,k){for(var C=E.length,L=f(C),P=0,A=0,I={},D=0;D<C;D+=L){var S=E[c(D)],N=String(S);I[N]||(I[N]=1,r(S,k)&&P++,i(S)&&A++)}return P>2*A}(g,o))return"date";var x="strict"!==d.autotypenumbers;return function(E,k){for(var C=E.length,L=f(C),P=0,A=0,I={},D=0;D<C;D+=L){var S=E[c(D)],N=String(S);if(!I[N]){I[N]=1;var B=typeof S;"boolean"===B?A++:(k?u(S)!==b:"number"===B)?P++:"string"===B&&A++}}return A>2*P}(g,x)?"category":function(E,k){for(var C=E.length,L=0;L<C;L++)if(l(E[L],k))return!0;return!1}(g,x)?"linear":"-"}},{"../../constants/numerical":779,"../../lib":803,"fast-isnumeric":249}],856:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../registry"),b=h("../../lib"),p=h("../array_container_defaults"),r=h("./layout_attributes"),u=h("./tick_value_defaults"),c=h("./tick_mark_defaults"),l=h("./tick_label_defaults"),f=h("./category_order_defaults"),s=h("./line_grid_defaults"),o=h("./set_convert"),d=h("./constants").WEEKDAY_PATTERN,g=h("./constants").HOUR_PATTERN;function y(w,x,E){function k(S,N){return b.coerce(w,x,r.rangebreaks,S,N)}if(k("enabled")){var C=k("bounds");if(C&&C.length>=2){var L,P,A="";if(2===C.length)for(L=0;L<2;L++)if(P=_(C[L])){A=d;break}var I=k("pattern",A);if(I===d)for(L=0;L<2;L++)(P=_(C[L]))&&(x.bounds[L]=C[L]=P-1);if(I)for(L=0;L<2;L++)switch(P=C[L],I){case d:if(!i(P)||(P=+P)!==Math.floor(P)||P<0||P>=7)return void(x.enabled=!1);x.bounds[L]=C[L]=P;break;case g:if(!i(P)||(P=+P)<0||P>24)return void(x.enabled=!1);x.bounds[L]=C[L]=P}if(!1===E.autorange){var D=E.range;if(D[0]<D[1]){if(C[0]<D[0]&&C[1]>D[1])return void(x.enabled=!1)}else if(C[0]>D[0]&&C[1]<D[1])return void(x.enabled=!1)}}else{var R=k("values");if(!R||!R.length)return void(x.enabled=!1);k("dvalue")}}}G.exports=function(w,x,E,k,C){var L,P=k.letter,A=k.font||{},I=k.splomStash||{},D=E("visible",!k.visibleDflt),S=x.type||(x._template||{}).type||"-";"date"===S&&(m.getComponentMethod("calendars","handleDefaults")(w,x,"calendar",k.calendar),k.noTicklabelmode||(L=E("ticklabelmode")));var N="";k.noTicklabelposition&&"multicategory"!==S||(N=b.coerce(w,x,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===L?["outside","inside"]:"x"===P?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),k.noTicklabeloverflow||E("ticklabeloverflow",-1!==N.indexOf("inside")?"hide past domain":"category"===S||"multicategory"===S?"allow":"hide past div"),o(x,C);var B=!x.isValidRange(w.range);B&&k.reverseDflt&&(B="reversed"),!E("autorange",B)||"linear"!==S&&"-"!==S||E("rangemode"),E("range"),x.cleanRange(),f(w,x,E,k),"category"===S||k.noHover||E("hoverformat");var H=E("color"),Y=H!==r.color.dflt?H:A.color,Q=I.label||C._dfltTitle[P];if(l(w,x,E,S,k,{pass:1}),!D)return x;E("title.text",Q),b.coerceFont(E,"title.font",{family:A.family,size:b.bigFont(A.size),color:Y}),u(w,x,E,S),l(w,x,E,S,k,{pass:2}),c(w,x,E,k),s(w,x,E,{dfltColor:H,bgColor:k.bgColor,showGrid:k.showGrid,attributes:r}),(x.showline||x.ticks)&&E("mirror"),k.automargin&&E("automargin");var ne,ae="multicategory"===S;if(k.noTickson||"category"!==S&&!ae||!x.ticks&&!x.showgrid||(ae&&(ne="boundaries"),"boundaries"===E("tickson",ne)&&delete x.ticklabelposition),ae&&E("showdividers")&&(E("dividercolor"),E("dividerwidth")),"date"===S)if(p(w,x,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:y}),x.rangebreaks.length){for(var te=0;te<x.rangebreaks.length;te++)if(x.rangebreaks[te].pattern===d){x._hasDayOfWeekBreaks=!0;break}if(o(x,C),C._has("scattergl")||C._has("splom"))for(var K=0;K<k.data.length;K++){var q=k.data[K];"scattergl"!==q.type&&"splom"!==q.type||(q.visible=!1,b.warn(q.type+" traces do not work on axes with rangebreaks. Setting trace "+q.index+" to `visible: false`."))}}else delete x.rangebreaks;return x};var v={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function _(w){if("string"==typeof w)return v[w.substr(0,3).toLowerCase()]}},{"../../lib":803,"../../registry":931,"../array_container_defaults":849,"./category_order_defaults":859,"./constants":861,"./layout_attributes":869,"./line_grid_defaults":871,"./set_convert":875,"./tick_label_defaults":876,"./tick_mark_defaults":877,"./tick_value_defaults":878,"fast-isnumeric":249}],857:[function(h,G,X){"use strict";var i=h("../../constants/docs"),m=i.FORMAT_LINK,b=i.DATE_FORMAT_LINK;function p(u,c){return["Sets the "+u+" formatting rule"+(c?"for `"+c+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+m+"."].join(" ")}function r(u,c){return p(u,c)+[" And for dates see: "+b+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}G.exports={axisHoverFormat:function(u,c){return{valType:"string",dflt:"",editType:"none",description:(c?p:r)("hover text",u)+["By default the values are formatted using "+(c?"generic number format":"`"+u+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:p,descriptionWithDates:r}},{"../../constants/docs":774}],858:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("./constants");function b(p,r){if(r&&r.length)for(var u=0;u<r.length;u++)if(r[u][p])return!0;return!1}X.id2name=function(p){if("string"==typeof p&&p.match(m.AX_ID_PATTERN)){var r=p.split(" ")[0].substr(1);return"1"===r&&(r=""),p.charAt(0)+"axis"+r}},X.name2id=function(p){if(p.match(m.AX_NAME_PATTERN)){var r=p.substr(5);return"1"===r&&(r=""),p.charAt(0)+r}},X.cleanId=function(p,r,u){var c=/( domain)$/.test(p);if("string"==typeof p&&p.match(m.AX_ID_PATTERN)&&(!r||p.charAt(0)===r)&&(!c||u)){var l=p.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===l&&(l=""),p.charAt(0)+l+(c&&u?" domain":"")}},X.list=function(p,r,u){var c=p._fullLayout;if(!c)return[];var l,f=X.listIds(p,r),s=new Array(f.length);for(l=0;l<f.length;l++){var o=f[l];s[l]=c[o.charAt(0)+"axis"+o.substr(1)]}if(!u){var d=c._subplots.gl3d||[];for(l=0;l<d.length;l++){var g=c[d[l]];r?s.push(g[r+"axis"]):s.push(g.xaxis,g.yaxis,g.zaxis)}}return s},X.listIds=function(p,r){var u=p._fullLayout;if(!u)return[];var c=u._subplots;return r?c[r+"axis"]:c.xaxis.concat(c.yaxis)},X.getFromId=function(p,r,u){var c=p._fullLayout;return r=void 0===r||"string"!=typeof r?r:r.replace(" domain",""),"x"===u?r=r.replace(/y[0-9]*/,""):"y"===u&&(r=r.replace(/x[0-9]*/,"")),c[X.id2name(r)]},X.getFromTrace=function(p,r,u){var c=p._fullLayout,l=null;if(i.traceIs(r,"gl3d")){var f=r.scene;"scene"===f.substr(0,5)&&(l=c[f][u+"axis"])}else l=X.getFromId(p,r[u+"axis"]||u);return l},X.idSort=function(p,r){var u=p.charAt(0),c=r.charAt(0);return u!==c?u>c?1:-1:+(p.substr(1)||1)-+(r.substr(1)||1)},X.ref2id=function(p){return!!/^[xyz]/.test(p)&&p.split(" ")[0]},X.isLinked=function(p,r){return b(r,p._axisMatchGroups)||b(r,p._axisConstraintGroups)}},{"../../registry":931,"./constants":861}],859:[function(h,G,X){"use strict";G.exports=function(i,m,b,p){if("category"===m.type){var r,u=i.categoryarray,c=Array.isArray(u)&&u.length>0;c&&(r="array");var l,f=b("categoryorder",r);"array"===f&&(l=b("categoryarray")),c||"array"!==f||(f=m.categoryorder="trace"),"trace"===f?m._initialCategories=[]:"array"===f?m._initialCategories=l.slice():(l=function(s,o){var d,g,y,v=o.dataAttr||s._id.charAt(0),_={};if(o.axData)d=o.axData;else for(d=[],g=0;g<o.data.length;g++){var w=o.data[g];w[v+"axis"]===s._id&&d.push(w)}for(g=0;g<d.length;g++){var x=d[g][v];for(y=0;y<x.length;y++){var E=x[y];null!=E&&(_[E]=1)}}return Object.keys(_)}(m,p).sort(),"category ascending"===f?m._initialCategories=l:"category descending"===f&&(m._initialCategories=l.reverse()))}}},{}],860:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib"),b=h("../../constants/numerical"),p=b.ONEDAY,r=b.ONEWEEK;X.dtick=function(u,c){var l="log"===c,f="date"===c,s="category"===c,o=f?p:1;if(!u)return o;if(i(u))return(u=Number(u))<=0?o:s?Math.max(1,Math.round(u)):f?Math.max(.1,u):u;if("string"!=typeof u||!f&&!l)return o;var d=u.charAt(0),g=u.substr(1);return(g=i(g)?Number(g):0)<=0||!(f&&"M"===d&&g===Math.round(g)||l&&"L"===d||l&&"D"===d&&(1===g||2===g))?o:u},X.tick0=function(u,c,l,f){return"date"===c?m.cleanDate(u,m.dateTick0(l,f%r==0?1:0)):"D1"!==f&&"D2"!==f?i(u)?Number(u):0:void 0}},{"../../constants/numerical":779,"../../lib":803,"fast-isnumeric":249}],861:[function(h,G,X){"use strict";var i=h("../../lib/regex").counter;G.exports={idRegex:{x:i("x","( domain)?"),y:i("y","( domain)?")},attrRegex:i("[xy]axis"),xAxisMatch:i("xaxis"),yAxisMatch:i("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":820}],862:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./autorange"),b=h("./axis_ids").id2name,p=h("./layout_attributes"),r=h("./scale_zoom"),u=h("./set_convert"),c=h("../../constants/numerical").ALMOST_EQUAL,l=h("../../constants/alignment").FROM_BL;function f(_,w,x){var E=x.axIds,k=x.layoutOut,C=x.hasImage,L=k._axisConstraintGroups,P=k._axisMatchGroups,A=w._id,I=A.charAt(0),D=((k._splomAxes||{})[I]||{})[A]||{},R=w._id,S="x"===R.charAt(0);function N(oe,ie){return i.coerce(_,w,p,oe,ie)}w._matchGroup=null,w._constraintGroup=null,N("constrain",C?"domain":"range"),i.coerce(_,w,{constraintoward:{valType:"enumerated",values:S?["left","center","right"]:["bottom","middle","top"],dflt:S?"center":"middle"}},"constraintoward");var B,H,Y=w.type,Q=[];for(B=0;B<E.length;B++)(H=E[B])!==R&&k[b(H)].type===Y&&Q.push(H);var ne=o(L,R);if(ne){var ae=[];for(B=0;B<Q.length;B++)ne[H=Q[B]]||ae.push(H);Q=ae}var te,K,q=Q.length;q&&(_.matches||D.matches)&&(te=i.coerce(_,w,{matches:{valType:"enumerated",values:Q,dflt:-1!==Q.indexOf(D.matches)?D.matches:void 0}},"matches"));var re=C&&!S?w.anchor:void 0;if(q&&!te&&(_.scaleanchor||re)&&(K=i.coerce(_,w,{scaleanchor:{valType:"enumerated",values:Q}},"scaleanchor",re)),te){w._matchGroup=d(P,R,te,1);var V=k[b(te)],W=s(k,w)/s(k,V);S!==("x"===te.charAt(0))&&(W=(S?"x":"y")+W),d(L,R,te,W)}else _.matches&&-1!==E.indexOf(_.matches)&&i.warn("ignored "+w._name+'.matches: "'+_.matches+'" to avoid an infinite loop');if(K){var Z=N("scaleratio");Z||(Z=w.scaleratio=1),d(L,R,K,Z)}else _.scaleanchor&&-1!==E.indexOf(_.scaleanchor)&&i.warn("ignored "+w._name+'.scaleanchor: "'+_.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function s(_,w){var x=w.domain;return x||(x=_[b(w.overlaying)].domain),x[1]-x[0]}function o(_,w){for(var x=0;x<_.length;x++)if(_[x][w])return _[x];return null}function d(_,w,x,E){var k,C,L,P,A,I=o(_,w);null===I?((I={})[w]=1,A=_.length,_.push(I)):A=_.indexOf(I);var D=Object.keys(I);for(k=0;k<_.length;k++)if(L=_[k],k!==A&&L[x]){var R=L[x];for(C=0;C<D.length;C++)L[P=D[C]]=g(R,g(E,I[P]));return void _.splice(A,1)}if(1!==E)for(C=0;C<D.length;C++){var S=D[C];I[S]=g(E,I[S])}I[x]=1}function g(_,w){var x,E,k="",C="";"string"==typeof _&&(x=(k=_.match(/^[xy]*/)[0]).length,_=+_.substr(x)),"string"==typeof w&&(E=(C=w.match(/^[xy]*/)[0]).length,w=+w.substr(E));var L=_*w;return x||E?x&&E&&k.charAt(0)!==C.charAt(0)?x===E?L:(x>E?k.substr(E):C.substr(x))+L:k+C+_*w:L}function y(_,w){for(var x=w._size,E=x.h/x.w,k={},C=Object.keys(_),L=0;L<C.length;L++){var P=C[L],A=_[P];if("string"==typeof A){var I=A.match(/^[xy]*/)[0],D=I.length;A=+A.substr(D);for(var R="y"===I.charAt(0)?E:1/E,S=0;S<D;S++)A*=R}k[P]=A}return k}function v(_,w){var x=_._inputDomain,k=x[0]+(x[1]-x[0])*l[_.constraintoward];_.domain=_._input.domain=[k+(x[0]-k)/w,k+(x[1]-k)/w],_.setScale()}X.handleDefaults=function(_,w,x){var E,k,C,L,P,A,I,D,R=x.axIds,S=x.axHasImage,N=w._axisConstraintGroups=[],B=w._axisMatchGroups=[];for(E=0;E<R.length;E++)f(P=_[L=b(R[E])],A=w[L],{axIds:R,layoutOut:w,hasImage:S[L]});function H(V,W){for(E=0;E<V.length;E++)for(C in k=V[E])w[b(C)][W]=k}for(H(B,"_matchGroup"),E=0;E<N.length;E++)for(C in k=N[E])if((A=w[b(C)]).fixedrange){for(var Y in k){var Q=b(Y);!1===(_[Q]||{}).fixedrange&&i.warn("fixedrange was specified as false for axis "+Q+" but was overridden because another axis in its constraint group has fixedrange true"),w[Q].fixedrange=!0}break}for(E=0;E<N.length;){for(C in k=N[E]){(A=w[b(C)])._matchGroup&&Object.keys(A._matchGroup).length===Object.keys(k).length&&(N.splice(E,1),E--);break}E++}H(N,"_constraintGroup");var ne=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],ae=!1,te=!1;function K(){D=A[I],"rangebreaks"===I&&(te=A._hasDayOfWeekBreaks)}for(E=0;E<B.length;E++){k=B[E];for(var q=0;q<ne.length;q++){var re;for(C in I=ne[q],D=null,k)if(P=_[L=b(C)],I in(A=w[L])){if(!A.matches&&(re=A,I in P)){K();break}null===D&&I in P&&K()}if("range"===I&&D&&(ae=!0),"autorange"===I&&null===D&&ae&&(D=!1),null===D&&I in re&&(D=re[I]),null!==D)for(C in k)(A=w[b(C)])[I]="range"===I?D.slice():D,"rangebreaks"===I&&(A._hasDayOfWeekBreaks=te,u(A,w))}}},X.enforce=function(_){var w,x,E,k,C,L,P,A,I=_._fullLayout,D=I._axisConstraintGroups||[];for(w=0;w<D.length;w++){E=y(D[w],I);var R=Object.keys(E),S=1/0,N=0,B=1/0,H={},Y={},Q=!1;for(x=0;x<R.length;x++)Y[k=R[x]]=C=I[b(k)],C._inputDomain?C.domain=C._inputDomain.slice():C._inputDomain=C.domain.slice(),C._inputRange||(C._inputRange=C.range.slice()),C.setScale(),H[k]=L=Math.abs(C._m)/E[k],S=Math.min(S,L),"domain"!==C.constrain&&C._constraintShrinkable||(B=Math.min(B,L)),delete C._constraintShrinkable,N=Math.max(N,L),"domain"===C.constrain&&(Q=!0);if(!(S>c*N)||Q)for(x=0;x<R.length;x++)if(L=H[k=R[x]],P=(C=Y[k]).constrain,L!==B||"domain"===P)if(A=L/B,"range"===P)r(C,A);else{var ne=C._inputDomain,ae=(C.domain[1]-C.domain[0])/(ne[1]-ne[0]),te=(C.r2l(C.range[1])-C.r2l(C.range[0]))/(C.r2l(C._inputRange[1])-C.r2l(C._inputRange[0]));if((A/=ae)*te<1){C.domain=C._input.domain=ne.slice(),r(C,A);continue}if(te<1&&(C.range=C._input.range=C._inputRange.slice(),A*=te),C.autorange){var K=C.r2l(C.range[0]),q=C.r2l(C.range[1]),re=(K+q)/2,V=re,W=re,Z=Math.abs(q-re),oe=re-Z*A*1.0001,ie=re+Z*A*1.0001,ue=m.makePadFn(I,C,0),fe=m.makePadFn(I,C,1);v(C,A);var he,de,be=Math.abs(C._m),pe=m.concatExtremes(_,C),Te=pe.min,ye=pe.max;for(de=0;de<Te.length;de++)(he=Te[de].val-ue(Te[de])/be)>oe&&he<V&&(V=he);for(de=0;de<ye.length;de++)(he=ye[de].val+fe(ye[de])/be)<ie&&he>W&&(W=he);A/=(W-V)/(2*Z),V=C.l2r(V),W=C.l2r(W),C.range=C._input.range=K<q?[V,W]:[W,V]}v(C,A)}}},X.getAxisGroup=function(_,w){for(var x=_._axisMatchGroups,E=0;E<x.length;E++)if(x[E][w])return"g"+E;return w},X.clean=function(_,w){if(w._inputDomain){for(var x=!1,E=w._id,k=_._fullLayout._axisConstraintGroups,C=0;C<k.length;C++)if(k[C][E]){x=!0;break}x&&"domain"===w.constrain||(w._input.domain=w.domain=w._inputDomain,delete w._inputDomain)}}},{"../../constants/alignment":771,"../../constants/numerical":779,"../../lib":803,"./autorange":853,"./axis_ids":858,"./layout_attributes":869,"./scale_zoom":873,"./set_convert":875}],863:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=m.numberFormat,p=h("tinycolor2"),r=h("has-passive-events"),u=h("../../registry"),c=m.strTranslate,l=h("../../lib/svg_text_utils"),f=h("../../components/color"),s=h("../../components/drawing"),o=h("../../components/fx"),d=h("./axes"),g=h("../../lib/setcursor"),y=h("../../components/dragelement"),v=h("../../components/dragelement/helpers"),_=v.selectingOrDrawing,w=v.freeMode,x=h("../../constants/alignment").FROM_TL,E=h("../../lib/clear_gl_canvases"),k=h("../../plot_api/subroutines").redrawReglTraces,C=h("../plots"),L=h("./axis_ids").getFromId,P=h("./select").prepSelect,A=h("./select").clearSelect,I=h("./select").selectOnClick,D=h("./scale_zoom"),R=h("./constants"),S=R.MINDRAG,N=R.MINZOOM,B=!0;function H(he,de,be,pe){var Te=m.ensureSingle(he.draglayer,de,be,function(ye){ye.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",he.id)});return Te.call(g,pe),Te.node()}function Y(he,de,be,pe,Te,ye,ke){var ze=H(he,"rect",de,be);return i.select(ze).call(s.setRect,pe,Te,ye,ke),ze}function Q(he,de){for(var be=0;be<he.length;be++)if(!he[be].fixedrange)return de;return""}function ne(he,de,be,pe,Te){for(var ye=0;ye<he.length;ye++){var ke=he[ye];if(!ke.fixedrange)if(ke.rangebreaks){var ze="y"===ke._id.charAt(0),Ie=ze?1-be:be;pe[ke._name+".range[0]"]=ke.l2r(ke.p2l((ze?1-de:de)*ke._length)),pe[ke._name+".range[1]"]=ke.l2r(ke.p2l(Ie*ke._length))}else{var Ce=ke._rl[0],_e=ke._rl[1]-Ce;pe[ke._name+".range[0]"]=ke.l2r(Ce+_e*de),pe[ke._name+".range[1]"]=ke.l2r(Ce+_e*be)}}if(Te&&Te.length){var we=(de+(1-be))/2;ne(Te,we,1-we,pe,[])}}function ae(he,de){for(var be=0;be<he.length;be++){var pe=he[be];if(!pe.fixedrange)if(pe.rangebreaks){var Te=pe._length,ye=(pe.p2l(0+de)-pe.p2l(0)+(pe.p2l(Te+de)-pe.p2l(Te)))/2;pe.range=[pe.l2r(pe._rl[0]-ye),pe.l2r(pe._rl[1]-ye)]}else pe.range=[pe.l2r(pe._rl[0]-de/pe._m),pe.l2r(pe._rl[1]-de/pe._m)]}}function te(he){return 1-(he>=0?Math.min(he,.9):1/(1/Math.max(he,-.3)+3.222))}function K(he,de,be,pe,Te){return he.append("path").attr("class","zoombox").style({fill:de>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",c(be,pe)).attr("d",Te+"Z")}function q(he,de,be){return he.append("path").attr("class","zoombox-corners").style({fill:f.background,stroke:f.defaultLine,"stroke-width":1,opacity:0}).attr("transform",c(de,be)).attr("d","M0,0Z")}function re(he,de,be,pe,Te,ye){he.attr("d",pe+"M"+be.l+","+be.t+"v"+be.h+"h"+be.w+"v-"+be.h+"h-"+be.w+"Z"),V(he,de,Te,ye)}function V(he,de,be,pe){be||(he.transition().style("fill",pe>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),de.transition().style("opacity",1).duration(200))}function W(he){i.select(he).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Z(he){B&&he.data&&he._context.showTips&&(m.notifier(m._(he,"Double-click to zoom back out"),"long"),B=!1)}function oe(he){var de=Math.floor(Math.min(he.b-he.t,he.r-he.l,N)/2);return"M"+(he.l-3.5)+","+(he.t-.5+de)+"h3v"+-de+"h"+de+"v-3h-"+(de+3)+"ZM"+(he.r+3.5)+","+(he.t-.5+de)+"h-3v"+-de+"h"+-de+"v-3h"+(de+3)+"ZM"+(he.r+3.5)+","+(he.b+.5-de)+"h-3v"+de+"h"+-de+"v3h"+(de+3)+"ZM"+(he.l-3.5)+","+(he.b+.5-de)+"h3v"+de+"h"+de+"v3h-"+(de+3)+"Z"}function ie(he,de,be,pe,Te){for(var ye,ke,ze,je,Ie=!1,Ce={},_e={},we=(Te||{}).xaHash,Se=(Te||{}).yaHash,Oe=0;Oe<de.length;Oe++){var Be=de[Oe];for(ye in be)if(Be[ye]){for(ze in Be)Te&&(we[ze]||Se[ze])||("x"===ze.charAt(0)?be:pe)[ze]||(Ce[ze]=ye);for(ke in pe)Te&&(we[ke]||Se[ke])||!Be[ke]||(Ie=!0)}for(ke in pe)if(Be[ke])for(je in Be)Te&&(we[je]||Se[je])||("x"===je.charAt(0)?be:pe)[je]||(_e[je]=ke)}Ie&&(m.extendFlat(Ce,_e),_e={});var He={},Xe=[];for(ze in Ce){var nt=L(he,ze);Xe.push(nt),He[nt._id]=nt}var et={},qe=[];for(je in _e){var Ye=L(he,je);qe.push(Ye),et[Ye._id]=Ye}return{xaHash:He,yaHash:et,xaxes:Xe,yaxes:qe,xLinks:Ce,yLinks:_e,isSubplotConstrained:Ie}}function ue(he,de){if(r){var be=void 0!==he.onwheel?"wheel":"mousewheel";he._onwheel&&he.removeEventListener(be,he._onwheel),he._onwheel=de,he.addEventListener(be,de,{passive:!1})}else void 0!==he.onwheel?he.onwheel=de:void 0!==he.onmousewheel?he.onmousewheel=de:he.isAddedWheelEvent||(he.isAddedWheelEvent=!0,he.addEventListener("wheel",de,{passive:!1}))}function fe(he){var de=[];for(var be in he)de.push(he[be]);return de}G.exports={makeDragBox:function(he,de,be,pe,Te,ye,ke,ze){var je,Ie,Ce,_e,we,Se,Oe,Be,He,Xe,nt,et,qe,Ye,ot,at,ct,_t,xt,Ht,At,ht,st,Bt=he._fullLayout._zoomlayer,gn=ke+ze==="nsew",hn=1===(ke+ze).length;function We(){if(He=(je=de.xaxis)._length,Xe=(Ie=de.yaxis)._length,Oe=je._offset,Be=Ie._offset,(Ce={})[je._id]=je,(_e={})[Ie._id]=Ie,ke&&ze)for(var sn=de.overlays,In=0;In<sn.length;In++){var Rn=sn[In].xaxis;Ce[Rn._id]=Rn;var Ln=sn[In].yaxis;_e[Ln._id]=Ln}we=fe(Ce),Se=fe(_e),qe=Q(we,ze),Ye=Q(Se,ke),ot=!Ye&&!qe,et=ie(he,he._fullLayout._axisMatchGroups,Ce,_e);var qn=(nt=ie(he,he._fullLayout._axisConstraintGroups,Ce,_e,et)).isSubplotConstrained||et.isSubplotConstrained;at=ze||qn,ct=ke||qn;var nr=he._fullLayout;_t=nr._has("scattergl"),xt=nr._has("splom"),Ht=nr._has("svg")}We();var sn,it=(sn=Ye+qe)?"nsew"===sn?gn?"":"pan"===he._fullLayout.dragmode?"move":"crosshair":sn.toLowerCase()+"-resize":"pointer",qt=Y(de,ke+ze+"drag",it,be,pe,Te,ye);if(ot&&!gn)return qt.onmousedown=null,qt.style.pointerEvents="none",qt;var Ge,Pe,Ee,Ne,Ve,Ke,bt,gt,pt,St,jt={element:qt,gd:he,plotinfo:de};function Lt(){jt.plotinfo.selection=!1,A(he)}function Vt(sn,In){var er,Xr,ir,Bn,mr,Rn=jt.gd;if(Rn._fullLayout._activeShapeIndex>=0)Rn._fullLayout._deactivateShape(Rn);else{var Ln=Rn._fullLayout.clickmode;if(W(Rn),2!==sn||hn||function(){if(!he._transitioningWithDuration){var sn=he._context.doubleClick,In=[];qe&&(In=In.concat(we)),Ye&&(In=In.concat(Se)),et.xaxes&&(In=In.concat(et.xaxes)),et.yaxes&&(In=In.concat(et.yaxes));var Rn,Ln,qn,nr={};if("reset+autosize"===sn)for(sn="autosize",Ln=0;Ln<In.length;Ln++)if((Rn=In[Ln])._rangeInitial&&(Rn.range[0]!==Rn._rangeInitial[0]||Rn.range[1]!==Rn._rangeInitial[1])||!Rn._rangeInitial&&!Rn.autorange){sn="reset";break}if("autosize"===sn)for(Ln=0;Ln<In.length;Ln++)(Rn=In[Ln]).fixedrange||(nr[Rn._name+".autorange"]=!0);else if("reset"===sn)for((qe||nt.isSubplotConstrained)&&(In=In.concat(nt.xaxes)),Ye&&!nt.isSubplotConstrained&&(In=In.concat(nt.yaxes)),nt.isSubplotConstrained&&(qe?Ye||(In=In.concat(Se)):In=In.concat(we)),Ln=0;Ln<In.length;Ln++)(Rn=In[Ln]).fixedrange||(Rn._rangeInitial?(nr[Rn._name+".range[0]"]=(qn=Rn._rangeInitial)[0],nr[Rn._name+".range[1]"]=qn[1]):nr[Rn._name+".autorange"]=!0);he.emit("plotly_doubleclick",null),u.call("_guiRelayout",he,nr)}}(),gn)Ln.indexOf("select")>-1&&I(In,Rn,we,Se,de.id,jt),Ln.indexOf("event")>-1&&o.click(Rn,In,de.id);else if(1===sn&&hn){var qn=ke?Ie:je,nr="s"===ke||"w"===ze?0:1,rr=qn._name+".range["+nr+"]",gr=(Bn=(er=qn).range[Xr=nr],mr=Math.abs(Bn-er.range[1-Xr]),"date"===er.type?Bn:"log"===er.type?(ir=Math.ceil(Math.max(0,-Math.log(mr)/Math.LN10))+3,b("."+ir+"g")(Math.pow(10,Bn))):(ir=Math.floor(Math.log(Math.abs(Bn))/Math.LN10)-Math.floor(Math.log(mr)/Math.LN10)+4,b("."+String(ir)+"g")(Bn))),jr="left",kr="middle";if(qn.fixedrange)return;ke?(kr="n"===ke?"top":"bottom","right"===qn.side&&(jr="right")):"e"===ze&&(jr="right"),Rn._context.showAxisRangeEntryBoxes&&i.select(qt).call(l.makeEditable,{gd:Rn,immediate:!0,background:Rn._fullLayout.paper_bgcolor,text:String(gr),fill:qn.tickfont?qn.tickfont.color:"#444",horizontalAlign:jr,verticalAlign:kr}).on("edit",function(er){var Xr=qn.d2r(er);void 0!==Xr&&u.call("_guiRelayout",Rn,rr,Xr)})}}}function mt(sn,In){if(he._transitioningWithDuration)return!1;var kr,er,Rn=Math.max(0,Math.min(He,ht*sn+Ge)),Ln=Math.max(0,Math.min(Xe,st*In+Pe)),qn=Math.abs(Rn-Ge),nr=Math.abs(Ln-Pe);function rr(){bt="",Ee.r=Ee.l,Ee.t=Ee.b,pt.attr("d","M0,0Z")}if(Ee.l=Math.min(Ge,Rn),Ee.r=Math.max(Ge,Rn),Ee.t=Math.min(Pe,Ln),Ee.b=Math.max(Pe,Ln),nt.isSubplotConstrained)qn>N||nr>N?(bt="xy",qn/He>nr/Xe?(nr=qn*Xe/He,Pe>Ln?Ee.t=Pe-nr:Ee.b=Pe+nr):(qn=nr*He/Xe,Ge>Rn?Ee.l=Ge-qn:Ee.r=Ge+qn),pt.attr("d",oe(Ee))):rr();else if(et.isSubplotConstrained)if(qn>N||nr>N){bt="xy";var gr=Math.min(Ee.l/He,(Xe-Ee.b)/Xe),jr=Math.max(Ee.r/He,(Xe-Ee.t)/Xe);Ee.l=gr*He,Ee.r=jr*He,Ee.b=(1-gr)*Xe,Ee.t=(1-jr)*Xe,pt.attr("d",oe(Ee))}else rr();else!Ye||nr<Math.min(Math.max(.6*qn,S),N)?qn<S||!qe?rr():(Ee.t=0,Ee.b=Xe,bt="x",pt.attr("d","M"+((kr=Ee).l-.5)+","+((er=Pe)-N-.5)+"h-3v"+(2*N+1)+"h3ZM"+(kr.r+.5)+","+(er-N-.5)+"h3v"+(2*N+1)+"h-3Z")):!qe||qn<Math.min(.6*nr,N)?(Ee.l=0,Ee.r=He,bt="y",pt.attr("d",function(kr,er){return"M"+(er-N-.5)+","+(kr.t-.5)+"v-3h"+(2*N+1)+"v3ZM"+(er-N-.5)+","+(kr.b+.5)+"v3h"+(2*N+1)+"v-3Z"}(Ee,Ge))):(bt="xy",pt.attr("d",oe(Ee)));Ee.w=Ee.r-Ee.l,Ee.h=Ee.b-Ee.t,bt&&(St=!0),he._dragged=St,re(gt,pt,Ee,Ve,Ke,Ne),Wt(),he.emit("plotly_relayouting",At),Ke=!0}function Wt(){At={},"xy"!==bt&&"x"!==bt||(ne(we,Ee.l/He,Ee.r/He,At,nt.xaxes),Zt("x",At)),"xy"!==bt&&"y"!==bt||(ne(Se,(Xe-Ee.b)/Xe,(Xe-Ee.t)/Xe,At,nt.yaxes),Zt("y",At))}function Kt(){Wt(),W(he),vn(),Z(he)}jt.prepFn=function(sn,In,Rn){var Ln=jt.dragmode,qn=he._fullLayout.dragmode;qn!==Ln&&(jt.dragmode=qn),We(),ht=he._fullLayout._invScaleX,st=he._fullLayout._invScaleY,ot||(gn?sn.shiftKey?"pan"===qn?qn="zoom":_(qn)||(qn="pan"):sn.ctrlKey&&(qn="pan"):qn="pan"),jt.minDrag=w(qn)?1:void 0,_(qn)?(jt.xaxes=we,jt.yaxes=Se,P(sn,In,Rn,jt,qn)):(jt.clickFn=Vt,_(Ln)&&Lt(),ot||("zoom"===qn?(jt.moveFn=mt,jt.doneFn=Kt,jt.minDrag=1,function(nr,rr,gr){var jr=qt.getBoundingClientRect();Ge=rr-jr.left,Pe=gr-jr.top,he._fullLayout._calcInverseTransform(he);var kr=m.apply3DTransform(he._fullLayout._invTransform)(Ge,Pe);Ee={l:Ge=kr[0],r:Ge,w:0,t:Pe=kr[1],b:Pe,h:0},Ne=he._hmpixcount?he._hmlumcount/he._hmpixcount:p(he._fullLayout.plot_bgcolor).getLuminance(),Ke=!1,bt="xy",St=!1,gt=K(Bt,Ne,Oe,Be,Ve="M0,0H"+He+"V"+Xe+"H0V0"),pt=q(Bt,Oe,Be)}(0,In,Rn)):"pan"===qn&&(jt.moveFn=Ut,jt.doneFn=vn))),he._fullLayout._redrag=function(){var nr=he._dragdata;nr&&nr.element===qt&&(_(he._fullLayout.dragmode)||(We(),Qt([0,0,He,Xe]),jt.moveFn(nr.dx,nr.dy)))}},y.init(jt);var rn=[0,0,He,Xe],Yt=null,Ue=R.REDRAWDELAY,wt=de.mainplot?he._fullLayout._plots[de.mainplot]:de;function Ut(sn,In){if(sn*=ht,In*=st,!he._transitioningWithDuration){if(he._fullLayout._replotting=!0,"ew"===qe||"ns"===Ye){var Rn=qe?-sn:0,Ln=Ye?-In:0;if(et.isSubplotConstrained){if(qe&&Ye){var qn=(sn/He-In/Xe)/2;Rn=-(sn=qn*He),Ln=-(In=-qn*Xe)}Ye?Rn=-Ln*He/Xe:Ln=-Rn*Xe/He}return qe&&(ae(we,sn),Zt("x")),Ye&&(ae(Se,In),Zt("y")),Qt([Rn,Ln,He,Xe]),tn(),void he.emit("plotly_relayouting",At)}var nr,rr,gr="w"===qe==("n"===Ye)?1:-1;if(qe&&Ye&&(nt.isSubplotConstrained||et.isSubplotConstrained)){var jr=(sn/He+gr*In/Xe)/2;sn=jr*He,In=gr*jr*Xe}if("w"===qe?sn=ir(we,0,sn):"e"===qe?sn=ir(we,1,-sn):qe||(sn=0),"n"===Ye?In=ir(Se,1,In):"s"===Ye?In=ir(Se,0,-In):Ye||(In=0),nr="w"===qe?sn:0,rr="n"===Ye?In:0,nt.isSubplotConstrained&&!et.isSubplotConstrained||et.isSubplotConstrained&&qe&&Ye&&gr>0){var kr;if(et.isSubplotConstrained||!qe&&1===Ye.length){for(kr=0;kr<we.length;kr++)we[kr].range=we[kr]._r.slice(),D(we[kr],1-In/Xe);nr=(sn=In*He/Xe)/2}if(et.isSubplotConstrained||!Ye&&1===qe.length){for(kr=0;kr<Se.length;kr++)Se[kr].range=Se[kr]._r.slice(),D(Se[kr],1-sn/He);rr=(In=sn*Xe/He)/2}}et.isSubplotConstrained&&Ye||Zt("x"),et.isSubplotConstrained&&qe||Zt("y");var er=He-sn,Xr=Xe-In;!et.isSubplotConstrained||qe&&Ye||(qe?(rr=nr?0:sn*Xe/He,Xr=er*Xe/He):(nr=rr?0:In*He/Xe,er=Xr*He/Xe)),Qt([nr,rr,er,Xr]),tn(),he.emit("plotly_relayouting",At)}function ir(Bn,mr,zr){for(var br,Dr,di=1-mr,ni=0;ni<Bn.length;ni++){var pi=Bn[ni];if(!pi.fixedrange){br=pi,Dr=pi._rl[di]+(pi._rl[mr]-pi._rl[di])/te(zr/pi._length);var qi=pi.l2r(Dr);!1!==qi&&void 0!==qi&&(pi.range[mr]=qi)}}return br._length*(br._rl[mr]-Dr)/(br._rl[mr]-br._rl[di])}}function Zt(sn,In){for(var Rn=et.isSubplotConstrained?{x:Se,y:we}[sn]:et[sn+"axes"],Ln=et.isSubplotConstrained?{x:we,y:Se}[sn]:[],qn=0;qn<Rn.length;qn++){var nr=Rn[qn],rr=nr._id,gr=et.xLinks[rr]||et.yLinks[rr],jr=Ln[0]||Ce[gr]||_e[gr];jr&&(In?(In[nr._name+".range[0]"]=In[jr._name+".range[0]"],In[nr._name+".range[1]"]=In[jr._name+".range[1]"]):nr.range=jr.range.slice())}}function tn(){var sn,In=[];function Rn(nr){for(sn=0;sn<nr.length;sn++)nr[sn].fixedrange||In.push(nr[sn]._id)}for(at&&(Rn(we),Rn(nt.xaxes),Rn(et.xaxes)),ct&&(Rn(Se),Rn(nt.yaxes),Rn(et.yaxes)),At={},sn=0;sn<In.length;sn++){var qn=L(he,In[sn]);d.drawOne(he,qn,{skipTitle:!0}),At[qn._name+".range[0]"]=qn.range[0],At[qn._name+".range[1]"]=qn.range[1]}d.redrawComponents(he,In)}function vn(){Qt([0,0,He,Xe]),m.syncOrAsync([C.previousPromises,function(){he._fullLayout._replotting=!1,u.call("_guiRelayout",he,At)}],he)}function Qt(sn){var In,Rn,Ln,qn,nr=he._fullLayout,rr=nr._plots,gr=nr._subplots.cartesian;if(xt&&u.subplotsRegistry.splom.drag(he),_t)for(In=0;In<gr.length;In++)if(Ln=(Rn=rr[gr[In]]).xaxis,qn=Rn.yaxis,Rn._scene){var jr=m.simpleMap(Ln.range,Ln.r2l),kr=m.simpleMap(qn.range,qn.r2l);Rn._scene.update({range:[jr[0],kr[0],jr[1],kr[1]]})}if((xt||_t)&&(E(he),k(he)),Ht){var er=sn[2]/je._length,Xr=sn[3]/Ie._length;for(In=0;In<gr.length;In++){Ln=(Rn=rr[gr[In]]).xaxis,qn=Rn.yaxis;var ir,Bn,mr,zr,Dr=(ct||et.isSubplotConstrained)&&!qn.fixedrange&&_e[qn._id];if((at||et.isSubplotConstrained)&&!Ln.fixedrange&&Ce[Ln._id]?(ir=er,mr=ze||et.isSubplotConstrained?sn[0]:Pn(Ln,ir)):et.xaHash[Ln._id]?(ir=er,mr=sn[0]*Ln._length/je._length):et.yaHash[Ln._id]?(ir=Xr,mr="ns"===Ye?-sn[1]*Ln._length/Ie._length:Pn(Ln,ir,{n:"top",s:"bottom"}[Ye])):mr=Mn(Ln,ir=yn(Ln,er,Xr)),Dr?(Bn=Xr,zr=ke||et.isSubplotConstrained?sn[1]:Pn(qn,Bn)):et.yaHash[qn._id]?(Bn=Xr,zr=sn[1]*qn._length/Ie._length):et.xaHash[qn._id]?(Bn=er,zr="ew"===qe?-sn[0]*qn._length/je._length:Pn(qn,Bn,{e:"right",w:"left"}[qe])):zr=Mn(qn,Bn=yn(qn,er,Xr)),ir||Bn){ir||(ir=1),Bn||(Bn=1);var di=Ln._offset-mr/ir,ni=qn._offset-zr/Bn;Rn.clipRect.call(s.setTranslate,mr,zr).call(s.setScale,ir,Bn),Rn.plot.call(s.setTranslate,di,ni).call(s.setScale,1/ir,1/Bn),ir===Rn.xScaleFactor&&Bn===Rn.yScaleFactor||(s.setPointGroupScale(Rn.zoomScalePts,ir,Bn),s.setTextPointsScale(Rn.zoomScaleTxt,ir,Bn)),s.hideOutsideRangePoints(Rn.clipOnAxisFalseTraces,Rn),Rn.xScaleFactor=ir,Rn.yScaleFactor=Bn}}}}function yn(sn,In,Rn){return sn.fixedrange?0:at&&nt.xaHash[sn._id]?In:ct&&(nt.isSubplotConstrained?nt.xaHash:nt.yaHash)[sn._id]?Rn:0}function Mn(sn,In){return In?(sn.range=sn._r.slice(),D(sn,In),Pn(sn,In)):0}function Pn(sn,In,Rn){return sn._length*(1-In)*x[Rn||sn.constraintoward||"middle"]}return ke.length*ze.length!=1&&ue(qt,function(sn){if(he._context._scrollZoom.cartesian||he._fullLayout._enablescrollzoom){if(Lt(),he._transitioningWithDuration)return sn.preventDefault(),void sn.stopPropagation();We(),clearTimeout(Yt);var In=-sn.deltaY;if(isFinite(In)||(In=sn.wheelDelta/10),isFinite(In)){var Rn,Ln=Math.exp(-Math.min(Math.max(In,-20),20)/200),qn=wt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),nr=(sn.clientX-qn.left)/qn.width,rr=(qn.bottom-sn.clientY)/qn.height;if(at){for(ze||(nr=.5),Rn=0;Rn<we.length;Rn++)gr(we[Rn],nr,Ln);Zt("x"),rn[2]*=Ln,rn[0]+=rn[2]*nr*(1/Ln-1)}if(ct){for(ke||(rr=.5),Rn=0;Rn<Se.length;Rn++)gr(Se[Rn],rr,Ln);Zt("y"),rn[3]*=Ln,rn[1]+=rn[3]*(1-rr)*(1/Ln-1)}Qt(rn),tn(),he.emit("plotly_relayouting",At),Yt=setTimeout(function(){he._fullLayout&&(rn=[0,0,He,Xe],vn())},Ue),sn.preventDefault()}else m.log("Did not find wheel motion attributes: ",sn)}function gr(jr,kr,er){if(!jr.fixedrange){var Xr=m.simpleMap(jr.range,jr.r2l),ir=Xr[0]+(Xr[1]-Xr[0])*kr;jr.range=Xr.map(function(Bn){return jr.l2r(ir+(Bn-ir)*er)})}}}),qt},makeDragger:H,makeRectDragger:Y,makeZoombox:K,makeCorners:q,updateZoombox:re,xyCorners:oe,transitionZoombox:V,removeZoombox:W,showDoubleClickNotifier:Z,attachWheelEventHandler:ue}},{"../../components/color":666,"../../components/dragelement":685,"../../components/dragelement/helpers":684,"../../components/drawing":688,"../../components/fx":706,"../../constants/alignment":771,"../../lib":803,"../../lib/clear_gl_canvases":787,"../../lib/setcursor":824,"../../lib/svg_text_utils":829,"../../plot_api/subroutines":844,"../../registry":931,"../plots":917,"./axes":854,"./axis_ids":858,"./constants":861,"./scale_zoom":873,"./select":874,"@plotly/d3":58,"has-passive-events":444,tinycolor2:598}],864:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/fx"),b=h("../../components/dragelement"),p=h("../../lib/setcursor"),r=h("./dragbox").makeDragBox,u=h("./constants").DRAGGERSIZE;X.initInteractions=function(c){var l=c._fullLayout;if(c._context.staticPlot)i.select(c).selectAll(".drag").remove();else if(l._has("cartesian")||l._has("splom")){Object.keys(l._plots||{}).sort(function(s,o){if((l._plots[s].mainplot&&!0)===(l._plots[o].mainplot&&!0)){var d=s.split("y"),g=o.split("y");return d[0]===g[0]?Number(d[1]||1)-Number(g[1]||1):Number(d[0]||1)-Number(g[0]||1)}return l._plots[s].mainplot?1:-1}).forEach(function(s){var o=l._plots[s],d=o.xaxis,g=o.yaxis;if(!o.mainplot){var y=r(c,o,d._offset,g._offset,d._length,g._length,"ns","ew");y.onmousemove=function(w){c._fullLayout._rehover=function(){c._fullLayout._hoversubplot===s&&c._fullLayout._plots[s]&&m.hover(c,w,s)},m.hover(c,w,s),c._fullLayout._lasthover=y,c._fullLayout._hoversubplot=s},y.onmouseout=function(w){c._dragging||(c._fullLayout._hoversubplot=null,b.unhover(c,w))},c._context.showAxisDragHandles&&(r(c,o,d._offset-u,g._offset-u,u,u,"n","w"),r(c,o,d._offset+d._length,g._offset-u,u,u,"n","e"),r(c,o,d._offset-u,g._offset+g._length,u,u,"s","w"),r(c,o,d._offset+d._length,g._offset+g._length,u,u,"s","e"))}if(c._context.showAxisDragHandles){if(s===d._mainSubplot){var v=d._mainLinePosition;"top"===d.side&&(v-=u),r(c,o,d._offset+.1*d._length,v,.8*d._length,u,"","ew"),r(c,o,d._offset,v,.1*d._length,u,"","w"),r(c,o,d._offset+.9*d._length,v,.1*d._length,u,"","e")}if(s===g._mainSubplot){var _=g._mainLinePosition;"right"!==g.side&&(_-=u),r(c,o,_,g._offset+.1*g._length,u,.8*g._length,"ns",""),r(c,o,_,g._offset+.9*g._length,u,.1*g._length,"s",""),r(c,o,_,g._offset,u,.1*g._length,"n","")}}});var f=l._hoverlayer.node();f.onmousemove=function(s){s.target=c._fullLayout._lasthover,m.hover(c,s,l._hoversubplot)},f.onclick=function(s){s.target=c._fullLayout._lasthover,m.click(c,s)},f.onmousedown=function(s){c._fullLayout._lasthover.onmousedown(s)},X.updateFx(c)}},X.updateFx=function(c){var l=c._fullLayout;p(l._draggers,"pan"===l.dragmode?"move":"crosshair")}},{"../../components/dragelement":685,"../../components/fx":706,"../../lib/setcursor":824,"./constants":861,"./dragbox":863,"@plotly/d3":58}],865:[function(h,G,X){"use strict";G.exports={clearOutlineControllers:function(i){var m=i._fullLayout._zoomlayer;m&&m.selectAll(".outline-controllers").remove()},clearSelect:function(i){var m=i._fullLayout._zoomlayer;m&&m.selectAll(".select-outline").remove(),i._fullLayout._drawing=!1}}},{}],866:[function(h,G,X){"use strict";var i=h("../../lib").strTranslate;function m(b,p){switch(b.type){case"log":return b.p2d(p);case"date":return b.p2r(p,0,b.calendar);default:return b.p2r(p)}}G.exports={p2r:m,r2p:function(b,p){switch(b.type){case"log":return b.d2p(p);case"date":return b.r2p(p,0,b.calendar);default:return b.r2p(p)}},axValue:function(b){var p="y"===b._id.charAt(0)?1:0;return function(r){return m(b,r[p])}},getTransform:function(b){return i(b.xaxis._offset,b.yaxis._offset)}}},{"../../lib":803}],867:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../lib"),b=h("./axis_ids");G.exports=function(p){return function(r,u){var c=r[p];if(Array.isArray(c))for(var l=i.subplotsRegistry.cartesian,f=l.idRegex,s=u._subplots,o=s.xaxis,d=s.yaxis,g=s.cartesian,y=u._has("cartesian")||u._has("gl2d"),v=0;v<c.length;v++){var _=c[v];if(m.isPlainObject(_)){var w=b.cleanId(_.xref,"x",!1),x=b.cleanId(_.yref,"y",!1),E=f.x.test(w),k=f.y.test(x);if(E||k){y||m.pushUnique(u._basePlotModules,l);var C=!1;E&&-1===o.indexOf(w)&&(o.push(w),C=!0),k&&-1===d.indexOf(x)&&(d.push(x),C=!0),C&&E&&k&&g.push(w+x)}}}}}},{"../../lib":803,"../../registry":931,"./axis_ids":858}],868:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../registry"),b=h("../../lib"),p=h("../plots"),r=h("../../components/drawing"),u=h("../get_data").getModuleCalcData,c=h("./axis_ids"),l=h("./constants"),f=h("../../constants/xmlns_namespaces"),s=b.ensureSingle;function o(_,w,x){return b.ensureSingle(_,w,x,function(E){E.datum(x)})}function d(_,w,x,E,k){for(var C,L,P,A=l.traceLayerClasses,I=_._fullLayout,D=I._modules,R=[],S=[],N=0;N<D.length;N++){var B=(C=D[N]).name,H=m.modules[B].categories;if(H.svg){var Y=C.layerName||B+"layer",Q=C.plot;P=(L=u(x,Q))[0],x=L[1],P.length&&R.push({i:A.indexOf(Y),className:Y,plotMethod:Q,cdModule:P}),H.zoomScale&&S.push("."+Y)}}R.sort(function(te,K){return te.i-K.i});var ne=w.plot.selectAll("g.mlayer").data(R,function(te){return te.className});if(ne.enter().append("g").attr("class",function(te){return te.className}).classed("mlayer",!0).classed("rangeplot",w.isRangePlot),ne.exit().remove(),ne.order(),ne.each(function(te){var K=i.select(this),q=te.className;te.plotMethod(_,w,te.cdModule,K,E,k),-1===l.clipOnAxisFalseQuery.indexOf("."+q)&&r.setClipUrl(K,w.layerClipId,_)}),I._has("scattergl")&&(C=m.getModule("scattergl"),P=u(x,C)[0],C.plot(_,w,P)),!_._context.staticPlot&&(w._hasClipOnAxisFalse&&(w.clipOnAxisFalseTraces=w.plot.selectAll(l.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),S.length)){var ae=w.plot.selectAll(S.join(",")).selectAll(".trace");w.zoomScalePts=ae.selectAll("path.point"),w.zoomScaleTxt=ae.selectAll(".textpoint")}}function g(_,w){var x=w.plotgroup,E=w.id,k=l.layerValue2layerClass[w.xaxis.layer],C=l.layerValue2layerClass[w.yaxis.layer],L=_._fullLayout._hasOnlyLargeSploms;if(w.mainplot){var P=w.mainplotinfo,A=P.plotgroup,I=E+"-x",D=E+"-y";w.gridlayer=P.gridlayer,w.zerolinelayer=P.zerolinelayer,s(P.overlinesBelow,"path",I),s(P.overlinesBelow,"path",D),s(P.overaxesBelow,"g",I),s(P.overaxesBelow,"g",D),w.plot=s(P.overplot,"g",E),s(P.overlinesAbove,"path",I),s(P.overlinesAbove,"path",D),s(P.overaxesAbove,"g",I),s(P.overaxesAbove,"g",D),w.xlines=A.select(".overlines-"+k).select("."+I),w.ylines=A.select(".overlines-"+C).select("."+D),w.xaxislayer=A.select(".overaxes-"+k).select("."+I),w.yaxislayer=A.select(".overaxes-"+C).select("."+D)}else if(L)w.xlines=s(x,"path","xlines-above"),w.ylines=s(x,"path","ylines-above"),w.xaxislayer=s(x,"g","xaxislayer-above"),w.yaxislayer=s(x,"g","yaxislayer-above");else{var R=s(x,"g","layer-subplot");w.shapelayer=s(R,"g","shapelayer"),w.imagelayer=s(R,"g","imagelayer"),w.gridlayer=s(x,"g","gridlayer"),w.zerolinelayer=s(x,"g","zerolinelayer"),s(x,"path","xlines-below"),s(x,"path","ylines-below"),w.overlinesBelow=s(x,"g","overlines-below"),s(x,"g","xaxislayer-below"),s(x,"g","yaxislayer-below"),w.overaxesBelow=s(x,"g","overaxes-below"),w.plot=s(x,"g","plot"),w.overplot=s(x,"g","overplot"),w.xlines=s(x,"path","xlines-above"),w.ylines=s(x,"path","ylines-above"),w.overlinesAbove=s(x,"g","overlines-above"),s(x,"g","xaxislayer-above"),s(x,"g","yaxislayer-above"),w.overaxesAbove=s(x,"g","overaxes-above"),w.xlines=x.select(".xlines-"+k),w.ylines=x.select(".ylines-"+C),w.xaxislayer=x.select(".xaxislayer-"+k),w.yaxislayer=x.select(".yaxislayer-"+C)}L||(o(w.gridlayer,"g",w.xaxis._id),o(w.gridlayer,"g",w.yaxis._id),w.gridlayer.selectAll("g").map(function(S){return S[0]}).sort(c.idSort)),w.xlines.style("fill","none").classed("crisp",!0),w.ylines.style("fill","none").classed("crisp",!0)}function y(_,w){if(_){var x={};for(var E in _.each(function(P){var A=P[0];i.select(this).remove(),v(A,w),x[A]=!0}),w._plots)for(var k=w._plots[E].overlays||[],C=0;C<k.length;C++){var L=k[C];x[L.id]&&L.plot.selectAll(".trace").remove()}}}function v(_,w){w._draggers.selectAll("g."+_).remove(),w._defs.select("#clip"+w._uid+_+"plot").remove()}X.name="cartesian",X.attr=["xaxis","yaxis"],X.idRoot=["x","y"],X.idRegex=l.idRegex,X.attrRegex=l.attrRegex,X.attributes=h("./attributes"),X.layoutAttributes=h("./layout_attributes"),X.supplyLayoutDefaults=h("./layout_defaults"),X.transitionAxes=h("./transition_axes"),X.finalizeSubplots=function(_,w){var x,E,k,C=w._subplots,L=C.xaxis,P=C.yaxis,A=C.cartesian,I=A.concat(C.gl2d||[]),D={},R={};for(x=0;x<I.length;x++){var S=I[x].split("y");D[S[0]]=1,R["y"+S[1]]=1}for(x=0;x<L.length;x++)D[E=L[x]]||(k=(_[c.id2name(E)]||{}).anchor,l.idRegex.y.test(k)||(k="y"),A.push(E+k),I.push(E+k),R[k]||(R[k]=1,b.pushUnique(P,k)));for(x=0;x<P.length;x++)R[k=P[x]]||(E=(_[c.id2name(k)]||{}).anchor,l.idRegex.x.test(E)||(E="x"),A.push(E+k),I.push(E+k),D[E]||(D[E]=1,b.pushUnique(L,E)));if(!I.length){for(var N in E="",k="",_)l.attrRegex.test(N)&&("x"===N.charAt(0)?(!E||+N.substr(5)<+E.substr(5))&&(E=N):(!k||+N.substr(5)<+k.substr(5))&&(k=N));E=E?c.name2id(E):"x",k=k?c.name2id(k):"y",L.push(E),P.push(k),A.push(E+k)}},X.plot=function(_,w,x,E){var k,C=_._fullLayout,L=C._subplots.cartesian,P=_.calcdata;if(!Array.isArray(w))for(w=[],k=0;k<P.length;k++)w.push(k);for(k=0;k<L.length;k++){for(var A,I=L[k],D=C._plots[I],R=[],S=0;S<P.length;S++){var N=P[S],B=N[0].trace;B.xaxis+B.yaxis===I&&((-1!==w.indexOf(B.index)||B.carpet)&&(A&&A[0].trace.xaxis+A[0].trace.yaxis===I&&-1!==["tonextx","tonexty","tonext"].indexOf(B.fill)&&-1===R.indexOf(A)&&R.push(A),R.push(N)),A=N)}d(_,D,R,x,E)}},X.clean=function(_,w,x,E){var k,C,L,P=E._plots||{},A=w._plots||{},I=E._subplots||{};if(E._hasOnlyLargeSploms&&!w._hasOnlyLargeSploms)for(L in P)(k=P[L]).plotgroup&&k.plotgroup.remove();var D=E._has&&E._has("gl"),R=w._has&&w._has("gl");if(D&&!R)for(L in P)(k=P[L])._scene&&k._scene.destroy();if(I.xaxis&&I.yaxis){var S=c.listIds({_fullLayout:E});for(C=0;C<S.length;C++){var N=S[C];w[c.id2name(N)]||E._infolayer.selectAll(".g-"+N+"title").remove()}}var B=E._has&&E._has("cartesian"),H=w._has&&w._has("cartesian");if(B&&!H)y(E._cartesianlayer.selectAll(".subplot"),E),E._defs.selectAll(".axesclip").remove(),delete E._axisConstraintGroups,delete E._axisMatchGroups;else if(I.cartesian)for(C=0;C<I.cartesian.length;C++){var Y=I.cartesian[C];A[Y]||(E._cartesianlayer.selectAll("."+Y+",."+Y+"-x,."+Y+"-y").remove(),v(Y,E))}},X.drawFramework=function(_){var w=_._fullLayout,x=function(k){var C,L,P,A,I,D,R=k._fullLayout,S=R._subplots.cartesian,N=S.length,B=[],H=[];for(C=0;C<N;C++){var ne=(I=(A=R._plots[P=S[C]]).xaxis)._mainAxis._id+(D=A.yaxis)._mainAxis._id,ae=R._plots[ne];A.overlays=[],ne!==P&&ae?(A.mainplot=ne,A.mainplotinfo=ae,H.push(P)):(A.mainplot=void 0,A.mainplotinfo=void 0,B.push(P))}for(C=0;C<H.length;C++)(A=R._plots[P=H[C]]).mainplotinfo.overlays.push(A);var te=B.concat(H),K=new Array(N);for(C=0;C<N;C++){var q=[P=te[C],(I=(A=R._plots[P]).xaxis).layer,(D=A.yaxis).layer,I.overlaying||"",D.overlaying||""];for(L=0;L<A.overlays.length;L++)q.push(A.overlays[L].id);K[C]=q}return K}(_),E=w._cartesianlayer.selectAll(".subplot").data(x,String);E.enter().append("g").attr("class",function(k){return"subplot "+k[0]}),E.order(),E.exit().call(y,w),E.each(function(k){var C=k[0],L=w._plots[C];L.plotgroup=i.select(this),g(_,L),L.draglayer=s(w._draggers,"g",C)})},X.rangePlot=function(_,w,x){g(_,w),d(_,w,x),p.style(_)},X.toSVG=function(_){var w=_._fullLayout._glimages,x=i.select(_).selectAll(".svg-container");x.filter(function(E,k){return k===x.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var E=this.toDataURL("image/png");w.append("svg:image").attr({xmlns:f.svg,"xlink:href":E,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},X.updateFx=h("./graph_interact").updateFx},{"../../components/drawing":688,"../../constants/xmlns_namespaces":780,"../../lib":803,"../../registry":931,"../get_data":891,"../plots":917,"./attributes":852,"./axis_ids":858,"./constants":861,"./graph_interact":864,"./layout_attributes":869,"./layout_defaults":870,"./transition_axes":879,"@plotly/d3":58}],869:[function(h,G,X){"use strict";var i=h("../font_attributes"),m=h("../../components/color/attributes"),b=h("../../components/drawing/attributes").dash,p=h("../../lib/extend").extendFlat,r=h("../../plot_api/plot_template").templatedArray,u=h("../../plots/cartesian/axis_format_attributes").descriptionWithDates,c=h("../../constants/numerical").ONEDAY,l=h("./constants"),f=l.HOUR_PATTERN,s=l.WEEKDAY_PATTERN;G.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:m.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:i({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"calc"},rangebreaks:r("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[s,f,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:c},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:m.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:p({},b,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:i({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:u("tick label")},tickformatstops:r("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:u("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:m.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:m.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:m.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:m.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:i({editType:"ticks"})}}},{"../../components/color/attributes":665,"../../components/drawing/attributes":687,"../../constants/numerical":779,"../../lib/extend":793,"../../plot_api/plot_template":843,"../../plots/cartesian/axis_format_attributes":857,"../font_attributes":883,"./constants":861}],870:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/color"),b=h("../../components/fx/helpers").isUnifiedHover,p=h("../../components/fx/hovermode_defaults"),r=h("../../plot_api/plot_template"),u=h("../layout_attributes"),c=h("./layout_attributes"),l=h("./type_defaults"),f=h("./axis_defaults"),s=h("./constraints"),o=h("./position_defaults"),d=h("./axis_ids"),g=d.id2name,y=d.name2id,v=h("./constants").AX_ID_PATTERN,_=h("../../registry"),w=_.traceIs,x=_.getComponentMethod;function E(k,C,L){Array.isArray(k[C])?k[C].push(L):k[C]=[L]}G.exports=function(k,C,L){var P,A,I=C.autotypenumbers,D={},R={},S={},N={},B={},H={},Y={},Q={},ne={},ae={};for(P=0;P<L.length;P++){var te=L[P];if(w(te,"cartesian")||w(te,"gl2d")){var K,q;if(te.xaxis)K=g(te.xaxis),E(D,K,te);else if(te.xaxes)for(A=0;A<te.xaxes.length;A++)E(D,g(te.xaxes[A]),te);if(te.yaxis)q=g(te.yaxis),E(D,q,te);else if(te.yaxes)for(A=0;A<te.yaxes.length;A++)E(D,g(te.yaxes[A]),te);"funnel"===te.type?"h"===te.orientation?(K&&(R[K]=!0),q&&(Y[q]=!0)):q&&(S[q]=!0):"image"===te.type?(q&&(Q[q]=!0),K&&(Q[K]=!0)):(q&&(B[q]=!0,H[q]=!0),w(te,"carpet")&&("carpet"!==te.type||te._cheater)||K&&(N[K]=!0)),"carpet"===te.type&&te._cheater&&K&&(R[K]=!0),w(te,"2dMap")&&(ne[K]=!0,ne[q]=!0),w(te,"oriented")&&(ae["h"===te.orientation?q:K]=!0)}}var re=C._subplots,V=re.xaxis,W=re.yaxis,Z=i.simpleMap(V,g),oe=i.simpleMap(W,g),ie=Z.concat(oe),ue=m.background;V.length&&W.length&&(ue=i.coerce(k,C,u,"plot_bgcolor"));var fe,he,de,be,pe,Te=m.combine(ue,C.paper_bgcolor);function ye(){pe._traceIndices=(D[fe]||[]).map(function(Bt){return Bt._expandedIndex}),pe._annIndices=[],pe._shapeIndices=[],pe._imgIndices=[],pe._subplotsWith=[],pe._counterAxes=[],pe._name=pe._attr=fe,pe._id=he}function ke(st,Bt){return i.coerce(be,pe,c,st,Bt)}function ze(st,Bt){return i.coerce2(be,pe,c,st,Bt)}function je(st){return"x"===st?W:V}function Ie(st,Bt){for(var gn="x"===st?Z:oe,hn=[],We=0;We<gn.length;We++){var it=gn[We];it===Bt||(k[it]||{}).overlaying||hn.push(y(it))}return hn}var Ce={x:je("x"),y:je("y")},_e=Ce.x.concat(Ce.y),we={},Se=[];function Oe(){var st=be.matches;v.test(st)&&-1===_e.indexOf(st)&&(we[st]=be.type,Se=Object.keys(we))}var Be=p(k,C),He=b(Be);for(P=0;P<ie.length;P++){he=y(fe=ie[P]),de=fe.charAt(0),i.isPlainObject(k[fe])||(k[fe]={}),be=k[fe],pe=r.newContainer(C,fe,de+"axis"),ye();var et={letter:de,font:C.font,outerTicks:ne[fe],showGrid:!ae[fe],data:D[fe]||[],bgColor:Te,calendar:C.calendar,automargin:!0,visibleDflt:"x"===de&&!N[fe]&&R[fe]||"y"===de&&!B[fe]&&S[fe],reverseDflt:"y"===de&&(!H[fe]&&Y[fe]||Q[fe]),autotypenumbersDflt:I,splomStash:((C._splomAxes||{})[de]||{})[he]};ke("uirevision",C.uirevision),l(be,pe,ke,et),f(be,pe,ke,et,C);var qe=He&&de===Be.charAt(0),Ye=ze("spikecolor",He?pe.color:void 0),ot=ze("spikethickness",He?1.5:void 0),at=ze("spikedash",He?"dot":void 0),ct=ze("spikemode",He?"across":void 0),_t=ze("spikesnap");ke("showspikes",!!(qe||Ye||ot||at||ct||_t))||(delete pe.spikecolor,delete pe.spikethickness,delete pe.spikedash,delete pe.spikemode,delete pe.spikesnap),o(be,pe,ke,{letter:de,counterAxes:Ce[de],overlayableAxes:Ie(de,fe),grid:C.grid}),ke("title.standoff"),Oe(),pe._input=be}for(P=0;P<Se.length;){he=Se[P++],de=(fe=g(he)).charAt(0),i.isPlainObject(k[fe])||(k[fe]={}),be=k[fe],pe=r.newContainer(C,fe,de+"axis"),ye();var xt={letter:de,font:C.font,outerTicks:ne[fe],showGrid:!ae[fe],data:[],bgColor:Te,calendar:C.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:I,splomStash:((C._splomAxes||{})[de]||{})[he]};ke("uirevision",C.uirevision),pe.type=we[he]||"linear",f(be,pe,ke,xt,C),o(be,pe,ke,{letter:de,counterAxes:Ce[de],overlayableAxes:Ie(de,fe),grid:C.grid}),ke("fixedrange"),Oe(),pe._input=be}var Ht=x("rangeslider","handleDefaults"),At=x("rangeselector","handleDefaults");for(P=0;P<Z.length;P++)be=k[fe=Z[P]],pe=C[fe],Ht(k,C,fe),"date"===pe.type&&At(be,pe,C,oe,pe.calendar),ke("fixedrange");for(P=0;P<oe.length;P++){be=k[fe=oe[P]];var ht=C[g((pe=C[fe]).anchor)];ke("fixedrange",x("rangeslider","isVisible")(ht))}s.handleDefaults(k,C,{axIds:_e.concat(Se).sort(d.idSort),axHasImage:Q})}},{"../../components/color":666,"../../components/fx/helpers":702,"../../components/fx/hovermode_defaults":705,"../../lib":803,"../../plot_api/plot_template":843,"../../registry":931,"../layout_attributes":908,"./axis_defaults":856,"./axis_ids":858,"./constants":861,"./constraints":862,"./layout_attributes":869,"./position_defaults":872,"./type_defaults":880}],871:[function(h,G,X){"use strict";var i=h("tinycolor2").mix,m=h("../../components/color/attributes").lightFraction,b=h("../../lib");G.exports=function(p,r,u,c){var l=(c=c||{}).dfltColor;function f(_,w){return b.coerce2(p,r,c.attributes,_,w)}var s=f("linecolor",l),o=f("linewidth");u("showline",c.showLine||!!s||!!o)||(delete r.linecolor,delete r.linewidth);var d=f("gridcolor",i(l,c.bgColor,c.blend||m).toRgbString()),g=f("gridwidth");if(u("showgrid",c.showGrid||!!d||!!g)||(delete r.gridcolor,delete r.gridwidth),!c.noZeroLine){var y=f("zerolinecolor",l),v=f("zerolinewidth");u("zeroline",c.showGrid||!!y||!!v)||(delete r.zerolinecolor,delete r.zerolinewidth)}}},{"../../components/color/attributes":665,"../../lib":803,tinycolor2:598}],872:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib");G.exports=function(b,p,r,u){var c,l,f,s,o=u.counterAxes||[],d=u.overlayableAxes||[],g=u.letter,y=u.grid;y&&(c=y._anchors[p._id],(l=y._domains[g][y._axisMap[p._id]])&&(f=y[g+"side"].split(" ")[0],s=y.domain[g]["right"===f||"top"===f?1:0])),l=l||[0,1],c=c||(i(b.position)?"free":o[0]||"free"),f=f||("x"===g?"bottom":"left"),s=s||0,"free"===m.coerce(b,p,{anchor:{valType:"enumerated",values:["free"].concat(o),dflt:c}},"anchor")&&r("position",s),m.coerce(b,p,{side:{valType:"enumerated",values:"x"===g?["bottom","top"]:["left","right"],dflt:f}},"side");var v=!1;if(d.length&&(v=m.coerce(b,p,{overlaying:{valType:"enumerated",values:[!1].concat(d),dflt:!1}},"overlaying")),!v){var _=r("domain",l);_[0]>_[1]-1/4096&&(p.domain=l),m.noneOrAll(b.domain,p.domain,l)}return r("layer"),p}},{"../../lib":803,"fast-isnumeric":249}],873:[function(h,G,X){"use strict";var i=h("../../constants/alignment").FROM_BL;G.exports=function(m,b,p){void 0===p&&(p=i[m.constraintoward||"center"]);var r=[m.r2l(m.range[0]),m.r2l(m.range[1])],u=r[0]+(r[1]-r[0])*p;m.range=m._input.range=[m.l2r(u+(r[0]-u)*b),m.l2r(u+(r[1]-u)*b)],m.setScale()}},{"../../constants/alignment":771}],874:[function(h,G,X){"use strict";var i=h("polybooljs"),m=h("../../registry"),b=h("../../components/drawing").dashStyle,p=h("../../components/color"),r=h("../../components/fx"),u=h("../../components/fx/helpers").makeEventData,c=h("../../components/dragelement/helpers"),l=c.freeMode,f=c.rectMode,s=c.drawMode,o=c.openMode,d=c.selectMode,g=h("../../components/shapes/draw_newshape/display_outlines"),y=h("../../components/shapes/draw_newshape/helpers").handleEllipse,v=h("../../components/shapes/draw_newshape/newshapes"),_=h("../../lib"),w=h("../../lib/polygon"),x=h("../../lib/throttle"),E=h("./axis_ids").getFromId,k=h("../../lib/clear_gl_canvases"),C=h("../../plot_api/subroutines").redrawReglTraces,L=h("./constants"),P=L.MINSELECT,A=w.filter,I=w.tester,D=h("./handle_outline").clearSelect,R=h("./helpers"),S=R.p2r,N=R.axValue,B=R.getTransform;function H(Z,oe,ie,ue,fe,he,de){var be,pe,Te,ye,ke,ze,je,Ie,Ce,nt,_e=oe._hoverdata,we=oe._fullLayout.clickmode.indexOf("event")>-1,Se=[];if((nt=_e)&&Array.isArray(nt)&&!0!==nt[0].hoverOnBox){ae(Z,oe,he);var Oe=function(nt,et){var qe,Ye,ot=nt[0],at=-1,ct=[];for(Ye=0;Ye<et.length;Ye++)if(ot.fullData._expandedIndex===(qe=et[Ye]).cd[0].trace._expandedIndex){if(!0===ot.hoverOnBox)break;void 0!==ot.pointNumber?at=ot.pointNumber:void 0!==ot.binNumber&&(at=ot.binNumber,ct=ot.pointNumbers);break}return{pointNumber:at,pointNumbers:ct,searchInfo:qe}}(_e,be=K(oe,ie,ue,fe));if(Oe.pointNumbers.length>0?function(nt,et){var qe,Ye,ot,at=[];for(ot=0;ot<nt.length;ot++)(qe=nt[ot]).cd[0].trace.selectedpoints&&qe.cd[0].trace.selectedpoints.length>0&&at.push(qe);if(1===at.length&&at[0]===et.searchInfo&&(Ye=et.searchInfo.cd[0].trace).selectedpoints.length===et.pointNumbers.length){for(ot=0;ot<et.pointNumbers.length;ot++)if(Ye.selectedpoints.indexOf(et.pointNumbers[ot])<0)return!1;return!0}return!1}(be,Oe):function(nt){var qe,Ye,ot=0;for(Ye=0;Ye<nt.length;Ye++)if((qe=nt[Ye].cd[0].trace).selectedpoints&&(qe.selectedpoints.length>1||(ot+=qe.selectedpoints.length)>1))return!1;return 1===ot}(be)&&(ze=q(Oe))){for(de&&de.remove(),Ce=0;Ce<be.length;Ce++)(pe=be[Ce])._module.selectPoints(pe,!1);re(oe,be),te(he),we&&oe.emit("plotly_deselect",null)}else{for(je=Z.shiftKey&&(void 0!==ze?ze:q(Oe)),Te=function(nt,et,qe){return{pointNumber:nt,searchInfo:et,subtract:qe}}(Oe.pointNumber,Oe.searchInfo,je),ye=ne(he.selectionDefs.concat([Te])),Ce=0;Ce<be.length;Ce++)if(ke=V(be[Ce]._module.selectPoints(be[Ce],ye),be[Ce]),Se.length)for(var Be=0;Be<ke.length;Be++)Se.push(ke[Be]);else Se=ke;if(re(oe,be,Ie={points:Se}),Te&&he&&he.selectionDefs.push(Te),de){var He=he.mergedPolygons,Xe=o(he.dragmode);g(W(He,Xe),de,he)}we&&oe.emit("plotly_selected",Ie)}}}function Y(Z){return"pointNumber"in Z&&"searchInfo"in Z}function Q(Z){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(oe,ie,ue,fe){return fe.cd[0].trace._expandedIndex===Z.searchInfo.cd[0].trace._expandedIndex&&ue===Z.pointNumber},isRect:!1,degenerate:!1,subtract:Z.subtract}}function ne(Z){for(var oe=[],ie=Y(Z[0])?0:Z[0][0][0],ue=ie,fe=Y(Z[0])?0:Z[0][0][1],he=fe,de=0;de<Z.length;de++)if(Y(Z[de]))oe.push(Q(Z[de]));else{var be=w.tester(Z[de]);be.subtract=Z[de].subtract,oe.push(be),ie=Math.min(ie,be.xmin),ue=Math.max(ue,be.xmax),fe=Math.min(fe,be.ymin),he=Math.max(he,be.ymax)}return{xmin:ie,xmax:ue,ymin:fe,ymax:he,pts:[],contains:function(pe,Te,ye,ke){for(var ze=!1,je=0;je<oe.length;je++)oe[je].contains(pe,Te,ye,ke)&&(ze=!1===oe[je].subtract);return ze},isRect:!1,degenerate:!1}}function ae(Z,oe,ie){oe._fullLayout._drawing=!1;var ue=oe._fullLayout,fe=ie.plotinfo,he=ie.dragmode,de=ue._lastSelectedSubplot&&ue._lastSelectedSubplot===fe.id,be=(Z.shiftKey||Z.altKey)&&!(s(he)&&o(he));de&&be&&fe.selection&&fe.selection.selectionDefs&&!ie.selectionDefs?(ie.selectionDefs=fe.selection.selectionDefs,ie.mergedPolygons=fe.selection.mergedPolygons):be&&fe.selection||te(ie),de||(D(oe),ue._lastSelectedSubplot=fe.id)}function te(Z){var oe=Z.dragmode,ie=Z.plotinfo,ue=Z.gd;if(ue._fullLayout._activeShapeIndex>=0&&ue._fullLayout._deactivateShape(ue),s(oe)){var fe=ue._fullLayout._zoomlayer.selectAll(".select-outline-"+ie.id);if(fe&&ue._fullLayout._drawing){var he=v(fe,Z);he&&m.call("_guiRelayout",ue,{shapes:he}),ue._fullLayout._drawing=!1}}ie.selection={},ie.selection.selectionDefs=Z.selectionDefs=[],ie.selection.mergedPolygons=Z.mergedPolygons=[]}function K(Z,oe,ie,ue){var fe,he,de,be=[],pe=oe.map(function(je){return je._id}),Te=ie.map(function(je){return je._id});for(de=0;de<Z.calcdata.length;de++)if(!0===(he=(fe=Z.calcdata[de])[0].trace).visible&&he._module&&he._module.selectPoints)if(!ue||he.subplot!==ue&&he.geo!==ue)if("splom"===he.type&&he._xaxes[pe[0]]&&he._yaxes[Te[0]]){var ye=ze(he._module,fe,oe[0],ie[0]);ye.scene=Z._fullLayout._splomScenes[he.uid],be.push(ye)}else if("sankey"===he.type){var ke=ze(he._module,fe,oe[0],ie[0]);be.push(ke)}else{if(-1===pe.indexOf(he.xaxis)||-1===Te.indexOf(he.yaxis))continue;be.push(ze(he._module,fe,E(Z,he.xaxis),E(Z,he.yaxis)))}else be.push(ze(he._module,fe,oe[0],ie[0]));return be;function ze(je,Ie,Ce,_e){return{_module:je,cd:Ie,xaxis:Ce,yaxis:_e}}}function q(Z){var oe=Z.searchInfo.cd[0].trace,ue=Z.pointNumbers;return!!oe.selectedpoints&&oe.selectedpoints.indexOf(ue.length>0?ue[0]:Z.pointNumber)>-1}function re(Z,oe,ie){var ue,fe,he,de;for(ue=0;ue<oe.length;ue++){var be=oe[ue].cd[0].trace._fullInput,pe=Z._fullLayout._tracePreGUI[be.uid]||{};void 0===pe.selectedpoints&&(pe.selectedpoints=be._input.selectedpoints||null)}if(ie){var Te=ie.points||[];for(ue=0;ue<oe.length;ue++)(de=oe[ue].cd[0].trace)._input.selectedpoints=de._fullInput.selectedpoints=[],de._fullInput!==de&&(de.selectedpoints=[]);for(ue=0;ue<Te.length;ue++){var ye=Te[ue],ke=ye.data,ze=ye.fullData;ye.pointIndices?([].push.apply(ke.selectedpoints,ye.pointIndices),de._fullInput!==de&&[].push.apply(ze.selectedpoints,ye.pointIndices)):(ke.selectedpoints.push(ye.pointIndex),de._fullInput!==de&&ze.selectedpoints.push(ye.pointIndex))}}else for(ue=0;ue<oe.length;ue++)delete(de=oe[ue].cd[0].trace).selectedpoints,delete de._input.selectedpoints,de._fullInput!==de&&delete de._fullInput.selectedpoints;var je=!1;for(ue=0;ue<oe.length;ue++){de=(he=(fe=oe[ue]).cd)[0].trace,m.traceIs(de,"regl")&&(je=!0);var Ie=fe._module,Ce=Ie.styleOnSelect||Ie.style;Ce&&(Ce(Z,he,he[0].node3),he[0].nodeRangePlot3&&Ce(Z,he,he[0].nodeRangePlot3))}je&&(k(Z),C(Z))}function V(Z,oe){if(Array.isArray(Z))for(var ie=oe.cd,ue=oe.cd[0].trace,fe=0;fe<Z.length;fe++)Z[fe]=u(Z[fe],ue,ie);return Z}function W(Z,oe){for(var ie=[],ue=0;ue<Z.length;ue++){ie[ue]=[];for(var fe=0;fe<Z[ue].length;fe++){ie[ue][fe]=[],ie[ue][fe][0]=fe?"L":"M";for(var he=0;he<Z[ue][fe].length;he++)ie[ue][fe].push(Z[ue][fe][he])}oe||ie[ue].push(["Z",ie[ue][0][1],ie[ue][0][2]])}return ie}G.exports={prepSelect:function(Z,oe,ie,ue,fe){var he=l(fe),de=f(fe),be=o(fe),pe=s(fe),Te=d(fe),ye="drawcircle"===fe,ke="drawline"===fe||ye,ze=ue.gd,je=ze._fullLayout,Ie=je._zoomlayer,Ce=ue.element.getBoundingClientRect(),_e=ue.plotinfo,we=B(_e),Se=oe-Ce.left,Oe=ie-Ce.top;je._calcInverseTransform(ze);var He,Xe,nt,et,qe,Ye,ot,Be=_.apply3DTransform(je._invTransform)(Se,Oe),at=je._invScaleX,ct=je._invScaleY,_t=Se=Be[0],xt=Oe=Be[1],Ht="M"+Se+","+Oe,At=ue.xaxes[0]._length,ht=ue.yaxes[0]._length,st=ue.xaxes.concat(ue.yaxes),Bt=Z.altKey&&!(s(fe)&&be);ae(Z,ze,ue),he&&(He=A([[Se,Oe]],L.BENDPX));var gn=Ie.selectAll("path.select-outline-"+_e.id).data(pe?[0]:[1,2]),hn=je.newshape;gn.enter().append("path").attr("class",function(Ne){return"select-outline select-outline-"+Ne+" select-outline-"+_e.id}).style(pe?{opacity:hn.opacity/2,fill:be?void 0:hn.fillcolor,stroke:hn.line.color,"stroke-dasharray":b(hn.line.dash,hn.line.width),"stroke-width":hn.line.width+"px"}:{}).attr("fill-rule",hn.fillrule).classed("cursor-move",!!pe).attr("transform",we).attr("d",Ht+"Z");var We,it=Ie.append("path").attr("class","zoombox-corners").style({fill:p.background,stroke:p.defaultLine,"stroke-width":1}).attr("transform",we).attr("d","M0,0Z"),qt=je._uid+L.SELECTID,Ge=[],Pe=K(ze,ue.xaxes,ue.yaxes,ue.subplot);function Ee(Ne,Ve){return Ne-Ve}We=_e.fillRangeItems?_e.fillRangeItems:de?function(Ne,Ve){var Ke=Ne.range={};for(qe=0;qe<st.length;qe++){var bt=st[qe],gt=bt._id.charAt(0);Ke[bt._id]=[S(bt,Ve[gt+"min"]),S(bt,Ve[gt+"max"])].sort(Ee)}}:function(Ne,Ve,Ke){var bt=Ne.lassoPoints={};for(qe=0;qe<st.length;qe++){var gt=st[qe];bt[gt._id]=Ke.filtered.map(N(gt))}},ue.moveFn=function(Ne,Ve){_t=Math.max(0,Math.min(At,at*Ne+Se)),xt=Math.max(0,Math.min(ht,ct*Ve+Oe));var Lt,Vt,Ke=Math.abs(_t-Se),bt=Math.abs(xt-Oe);if(de){var gt,pt,St;if(Te){var jt=je.selectdirection;switch(gt="any"===jt?bt<Math.min(.6*Ke,P)?"h":Ke<Math.min(.6*bt,P)?"v":"d":jt){case"h":pt=ye?ht/2:0,St=ht;break;case"v":pt=ye?At/2:0,St=At}}if(pe)switch(je.newshape.drawdirection){case"vertical":gt="h",pt=ye?ht/2:0,St=ht;break;case"horizontal":gt="v",pt=ye?At/2:0,St=At;break;case"ortho":Ke<bt?(gt="h",pt=Oe,St=xt):(gt="v",pt=Se,St=_t);break;default:gt="d"}"h"===gt?((et=ke?y(ye,[_t,pt],[_t,St]):[[Se,pt],[Se,St],[_t,St],[_t,pt]]).xmin=ke?_t:Math.min(Se,_t),et.xmax=ke?_t:Math.max(Se,_t),et.ymin=Math.min(pt,St),et.ymax=Math.max(pt,St),it.attr("d","M"+et.xmin+","+(Oe-P)+"h-4v"+2*P+"h4ZM"+(et.xmax-1)+","+(Oe-P)+"h4v"+2*P+"h-4Z")):"v"===gt?((et=ke?y(ye,[pt,xt],[St,xt]):[[pt,Oe],[pt,xt],[St,xt],[St,Oe]]).xmin=Math.min(pt,St),et.xmax=Math.max(pt,St),et.ymin=ke?xt:Math.min(Oe,xt),et.ymax=ke?xt:Math.max(Oe,xt),it.attr("d","M"+(Se-P)+","+et.ymin+"v-4h"+2*P+"v4ZM"+(Se-P)+","+(et.ymax-1)+"v4h"+2*P+"v-4Z")):"d"===gt&&((et=ke?y(ye,[Se,Oe],[_t,xt]):[[Se,Oe],[Se,xt],[_t,xt],[_t,Oe]]).xmin=Math.min(Se,_t),et.xmax=Math.max(Se,_t),et.ymin=Math.min(Oe,xt),et.ymax=Math.max(Oe,xt),it.attr("d","M0,0Z"))}else he&&(He.addPt([_t,xt]),et=He.filtered);ue.selectionDefs&&ue.selectionDefs.length?(Lt=ue.mergedPolygons,Vt=et,nt=Bt?i.difference({regions:Lt,inverted:!1},{regions:[Vt],inverted:!1}).regions:i.union({regions:Lt,inverted:!1},{regions:[Vt],inverted:!1}).regions,et.subtract=Bt,Xe=ne(ue.selectionDefs.concat([et]))):(nt=[et],Xe=I(et)),g(W(nt,be),gn,ue),Te&&x.throttle(qt,L.SELECTDELAY,function(){var Lt;Ge=[];var Vt,mt=[];for(qe=0;qe<Pe.length;qe++)if(Vt=(Ye=Pe[qe])._module.selectPoints(Ye,Xe),mt.push(Vt),Lt=V(Vt,Ye),Ge.length)for(var Wt=0;Wt<Lt.length;Wt++)Ge.push(Lt[Wt]);else Ge=Lt;re(ze,Pe,ot={points:Ge}),We(ot,et,He),ue.gd.emit("plotly_selecting",ot)})},ue.clickFn=function(Ne,Ve){if(it.remove(),ze._fullLayout._activeShapeIndex>=0)ze._fullLayout._deactivateShape(ze);else if(!pe){var Ke=je.clickmode;x.done(qt).then(function(){if(x.clear(qt),2===Ne){for(gn.remove(),qe=0;qe<Pe.length;qe++)(Ye=Pe[qe])._module.selectPoints(Ye,!1);re(ze,Pe),te(ue),ze.emit("plotly_deselect",null)}else Ke.indexOf("select")>-1&&H(Ve,ze,ue.xaxes,ue.yaxes,ue.subplot,ue,gn),"event"===Ke&&ze.emit("plotly_selected",void 0);r.click(ze,Ve)}).catch(_.error)}},ue.doneFn=function(){it.remove(),x.done(qt).then(function(){x.clear(qt),ue.gd.emit("plotly_selected",ot),et&&ue.selectionDefs&&(et.subtract=Bt,ue.selectionDefs.push(et),ue.mergedPolygons.length=0,[].push.apply(ue.mergedPolygons,nt)),ue.doneFnCompleted&&ue.doneFnCompleted(Ge)}).catch(_.error),pe&&te(ue)}},clearSelect:D,clearSelectionsCache:te,selectOnClick:H}},{"../../components/color":666,"../../components/dragelement/helpers":684,"../../components/drawing":688,"../../components/fx":706,"../../components/fx/helpers":702,"../../components/shapes/draw_newshape/display_outlines":754,"../../components/shapes/draw_newshape/helpers":755,"../../components/shapes/draw_newshape/newshapes":756,"../../lib":803,"../../lib/clear_gl_canvases":787,"../../lib/polygon":815,"../../lib/throttle":830,"../../plot_api/subroutines":844,"../../registry":931,"./axis_ids":858,"./constants":861,"./handle_outline":865,"./helpers":866,polybooljs:504}],875:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("d3-time-format").utcFormat,b=h("../../lib"),p=b.numberFormat,r=h("fast-isnumeric"),u=b.cleanNumber,c=b.ms2DateTime,l=b.dateTime2ms,f=b.ensureNumber,s=b.isArrayOrTypedArray,o=h("../../constants/numerical"),d=o.FP_SAFE,g=o.BADNUM,y=o.LOG_CLIP,v=o.ONEWEEK,_=o.ONEDAY,w=o.ONEHOUR,x=o.ONEMIN,E=o.ONESEC,k=h("./axis_ids"),C=h("./constants"),L=C.HOUR_PATTERN,P=C.WEEKDAY_PATTERN;function A(D){return Math.pow(10,D)}function I(D){return null!=D}G.exports=function(D,R){R=R||{};var S=D._id||"x",N=S.charAt(0);function B(ie,ue){if(ie>0)return Math.log(ie)/Math.LN10;if(ie<=0&&ue&&D.range&&2===D.range.length){var fe=D.range[0],he=D.range[1];return.5*(fe+he-2*y*Math.abs(fe-he))}return g}function H(ie,ue,fe,he){if((he||{}).msUTC&&r(ie))return+ie;var de=l(ie,fe||D.calendar);if(de===g){if(!r(ie))return g;ie=+ie;var be=Math.floor(10*b.mod(ie+.05,1)),pe=Math.round(ie-be/10);de=l(new Date(pe))+be/10}return de}function Y(ie,ue,fe){return c(ie,ue,fe||D.calendar)}function Q(ie){return D._categories[Math.round(ie)]}function ne(ie){if(I(ie)){if(void 0===D._categoriesMap&&(D._categoriesMap={}),void 0!==D._categoriesMap[ie])return D._categoriesMap[ie];D._categories.push("number"==typeof ie?String(ie):ie);var ue=D._categories.length-1;return D._categoriesMap[ie]=ue,ue}return g}function ae(ie){if(D._categoriesMap)return D._categoriesMap[ie]}function te(ie){var ue=ae(ie);return void 0!==ue?ue:r(ie)?+ie:void 0}function K(ie){return r(ie)?+ie:ae(ie)}function q(ie,ue,fe){return i.round(fe+ue*ie,2)}function re(ie,ue,fe){return(ie-fe)/ue}var V=function(ie){return r(ie)?q(ie,D._m,D._b):g},W=function(ie){return re(ie,D._m,D._b)};if(D.rangebreaks){var Z="y"===N;V=function(ie){if(!r(ie))return g;var ue=D._rangebreaks.length;if(!ue)return q(ie,D._m,D._b);var fe=Z;D.range[0]>D.range[1]&&(fe=!fe);for(var he=fe?-1:1,de=he*ie,be=0,pe=0;pe<ue;pe++){var Te=he*D._rangebreaks[pe].min,ye=he*D._rangebreaks[pe].max;if(de<Te)break;if(!(de>ye)){be=de<(Te+ye)/2?pe:pe+1;break}be=pe+1}var ke=D._B[be]||0;return isFinite(ke)?q(ie,D._m2,ke):0},W=function(ie){var ue=D._rangebreaks.length;if(!ue)return re(ie,D._m,D._b);for(var fe=0,he=0;he<ue&&!(ie<D._rangebreaks[he].pmin);he++)ie>D._rangebreaks[he].pmax&&(fe=he+1);return re(ie,D._m2,D._B[fe])}}D.c2l="log"===D.type?B:f,D.l2c="log"===D.type?A:f,D.l2p=V,D.p2l=W,D.c2p="log"===D.type?function(ie,ue){return V(B(ie,ue))}:V,D.p2c="log"===D.type?function(ie){return A(W(ie))}:W,-1!==["linear","-"].indexOf(D.type)?(D.d2r=D.r2d=D.d2c=D.r2c=D.d2l=D.r2l=u,D.c2d=D.c2r=D.l2d=D.l2r=f,D.d2p=D.r2p=function(ie){return D.l2p(u(ie))},D.p2d=D.p2r=W,D.cleanPos=f):"log"===D.type?(D.d2r=D.d2l=function(ie,ue){return B(u(ie),ue)},D.r2d=D.r2c=function(ie){return A(u(ie))},D.d2c=D.r2l=u,D.c2d=D.l2r=f,D.c2r=B,D.l2d=A,D.d2p=function(ie,ue){return D.l2p(D.d2r(ie,ue))},D.p2d=function(ie){return A(W(ie))},D.r2p=function(ie){return D.l2p(u(ie))},D.p2r=W,D.cleanPos=f):"date"===D.type?(D.d2r=D.r2d=b.identity,D.d2c=D.r2c=D.d2l=D.r2l=H,D.c2d=D.c2r=D.l2d=D.l2r=Y,D.d2p=D.r2p=function(ie,ue,fe){return D.l2p(H(ie,0,fe))},D.p2d=D.p2r=function(ie,ue,fe){return Y(W(ie),ue,fe)},D.cleanPos=function(ie){return b.cleanDate(ie,g,D.calendar)}):"category"===D.type?(D.d2c=D.d2l=ne,D.r2d=D.c2d=D.l2d=Q,D.d2r=D.d2l_noadd=te,D.r2c=function(ie){var ue=K(ie);return void 0!==ue?ue:D.fraction2r(.5)},D.l2r=D.c2r=f,D.r2l=K,D.d2p=function(ie){return D.l2p(D.r2c(ie))},D.p2d=function(ie){return Q(W(ie))},D.r2p=D.d2p,D.p2r=W,D.cleanPos=function(ie){return"string"==typeof ie&&""!==ie?ie:f(ie)}):"multicategory"===D.type&&(D.r2d=D.c2d=D.l2d=Q,D.d2r=D.d2l_noadd=te,D.r2c=function(ie){var ue=te(ie);return void 0!==ue?ue:D.fraction2r(.5)},D.r2c_just_indices=ae,D.l2r=D.c2r=f,D.r2l=te,D.d2p=function(ie){return D.l2p(D.r2c(ie))},D.p2d=function(ie){return Q(W(ie))},D.r2p=D.d2p,D.p2r=W,D.cleanPos=function(ie){return Array.isArray(ie)||"string"==typeof ie&&""!==ie?ie:f(ie)},D.setupMultiCategory=function(ie){var ue,fe,he=D._traceIndices,de=D._matchGroup;if(de&&0===D._categories.length)for(var be in de)if(be!==S){var pe=R[k.id2name(be)];he=he.concat(pe._traceIndices)}var Te=[[0,{}],[0,{}]],ye=[];for(ue=0;ue<he.length;ue++){var ke=ie[he[ue]];if(N in ke){var ze=ke[N],je=ke._length||b.minRowLength(ze);if(s(ze[0])&&s(ze[1]))for(fe=0;fe<je;fe++){var Ie=ze[0][fe],Ce=ze[1][fe];I(Ie)&&I(Ce)&&(ye.push([Ie,Ce]),Ie in Te[0][1]||(Te[0][1][Ie]=Te[0][0]++),Ce in Te[1][1]||(Te[1][1][Ce]=Te[1][0]++))}}}for(ye.sort(function(_e,we){var Se=Te[0][1],Oe=Se[_e[0]]-Se[we[0]];if(Oe)return Oe;var Be=Te[1][1];return Be[_e[1]]-Be[we[1]]}),ue=0;ue<ye.length;ue++)ne(ye[ue])}),D.fraction2r=function(ie){var ue=D.r2l(D.range[0]),fe=D.r2l(D.range[1]);return D.l2r(ue+ie*(fe-ue))},D.r2fraction=function(ie){var ue=D.r2l(D.range[0]),fe=D.r2l(D.range[1]);return(D.r2l(ie)-ue)/(fe-ue)},D.cleanRange=function(ie,ue){ue||(ue={}),ie||(ie="range");var fe,he,de=b.nestedProperty(D,ie).get();if(he=(he="date"===D.type?b.dfltRange(D.calendar):"y"===N?C.DFLTRANGEY:ue.dfltRange||C.DFLTRANGEX).slice(),"tozero"!==D.rangemode&&"nonnegative"!==D.rangemode||(he[0]=0),de&&2===de.length)for("date"!==D.type||D.autorange||(de[0]=b.cleanDate(de[0],g,D.calendar),de[1]=b.cleanDate(de[1],g,D.calendar)),fe=0;fe<2;fe++)if("date"===D.type){if(!b.isDateTime(de[fe],D.calendar)){D[ie]=he;break}if(D.r2l(de[0])===D.r2l(de[1])){var be=b.constrain(D.r2l(de[0]),b.MIN_MS+1e3,b.MAX_MS-1e3);de[0]=D.l2r(be-1e3),de[1]=D.l2r(be+1e3);break}}else{if(!r(de[fe])){if(!r(de[1-fe])){D[ie]=he;break}de[fe]=de[1-fe]*(fe?10:.1)}if(de[fe]<-d?de[fe]=-d:de[fe]>d&&(de[fe]=d),de[0]===de[1]){var pe=Math.max(1,Math.abs(1e-6*de[0]));de[0]-=pe,de[1]+=pe}}else b.nestedProperty(D,ie).set(he)},D.setScale=function(ie){var ue=R._size;if(D.overlaying){var fe=k.getFromId({_fullLayout:R},D.overlaying);D.domain=fe.domain}var he=ie&&D._r?"_r":"range",de=D.calendar;D.cleanRange(he);var be,pe,Te=D.r2l(D[he][0],de),ye=D.r2l(D[he][1],de),ke="y"===N;if(ke?(D._offset=ue.t+(1-D.domain[1])*ue.h,D._length=ue.h*(D.domain[1]-D.domain[0]),D._m=D._length/(Te-ye),D._b=-D._m*ye):(D._offset=ue.l+D.domain[0]*ue.w,D._length=ue.w*(D.domain[1]-D.domain[0]),D._m=D._length/(ye-Te),D._b=-D._m*Te),D._rangebreaks=[],D._lBreaks=0,D._m2=0,D._B=[],D.rangebreaks&&(D._rangebreaks=D.locateBreaks(Math.min(Te,ye),Math.max(Te,ye)),D._rangebreaks.length)){for(be=0;be<D._rangebreaks.length;be++)pe=D._rangebreaks[be],D._lBreaks+=Math.abs(pe.max-pe.min);var ze=ke;Te>ye&&(ze=!ze),ze&&D._rangebreaks.reverse();var je=ze?-1:1;for(D._m2=je*D._length/(Math.abs(ye-Te)-D._lBreaks),D._B.push(-D._m2*(ke?ye:Te)),be=0;be<D._rangebreaks.length;be++)D._B.push(D._B[D._B.length-1]-je*D._m2*((pe=D._rangebreaks[be]).max-pe.min));for(be=0;be<D._rangebreaks.length;be++)(pe=D._rangebreaks[be]).pmin=V(pe.min),pe.pmax=V(pe.max)}if(!isFinite(D._m)||!isFinite(D._b)||D._length<0)throw R._replotting=!1,new Error("Something went wrong with axis scaling")},D.maskBreaks=function(ie){var ue,fe,he,de,be,pe=D.rangebreaks||[];pe._cachedPatterns||(pe._cachedPatterns=pe.map(function(Ie){return Ie.enabled&&Ie.bounds?b.simpleMap(Ie.bounds,Ie.pattern?u:D.d2c):null})),pe._cachedValues||(pe._cachedValues=pe.map(function(Ie){return Ie.enabled&&Ie.values?b.simpleMap(Ie.values,D.d2c).sort(b.sorterAsc):null}));for(var Te=0;Te<pe.length;Te++){var ye=pe[Te];if(ye.enabled)if(ye.bounds){switch(fe=(ue=pe._cachedPatterns[Te])[0],he=ue[1],ye.pattern){case P:de=(be=new Date(ie)).getUTCDay(),fe>he&&(he+=7,de<fe&&(de+=7));break;case L:de=(be=new Date(ie)).getUTCHours()+(be.getUTCMinutes()/60+be.getUTCSeconds()/3600+be.getUTCMilliseconds()/36e5),fe>he&&(he+=24,de<fe&&(de+=24));break;case"":de=ie}if(de>=fe&&de<he)return g}else for(var ze=pe._cachedValues[Te],je=0;je<ze.length;je++)if(he=(fe=ze[je])+ye.dvalue,ie>=fe&&ie<he)return g}return ie},D.locateBreaks=function(ie,ue){var fe,he,de,be,pe=[];if(!D.rangebreaks)return pe;var Te=D.rangebreaks.slice().sort(function(Be,He){return Be.pattern===P&&He.pattern===L?-1:He.pattern===P&&Be.pattern===L?1:0}),ye=function(Be,He){if((Be=b.constrain(Be,ie,ue))!==(He=b.constrain(He,ie,ue))){for(var Xe=!0,nt=0;nt<pe.length;nt++){var et=pe[nt];Be<et.max&&He>=et.min&&(Be<et.min&&(et.min=Be),He>et.max&&(et.max=He),Xe=!1)}Xe&&pe.push({min:Be,max:He})}};for(fe=0;fe<Te.length;fe++){var ke=Te[fe];if(ke.enabled)if(ke.bounds){var ze=ie,je=ue;ke.pattern&&(ze=Math.floor(ze)),de=(he=b.simpleMap(ke.bounds,ke.pattern?u:D.r2l))[0],be=he[1];var Ie,Ce,_e=new Date(ze);switch(ke.pattern){case P:Ce=v,Ie=(be-de+(be<de?7:0))*_,ze+=de*_-(_e.getUTCDay()*_+_e.getUTCHours()*w+_e.getUTCMinutes()*x+_e.getUTCSeconds()*E+_e.getUTCMilliseconds());break;case L:Ce=_,Ie=(be-de+(be<de?24:0))*w,ze+=de*w-(_e.getUTCHours()*w+_e.getUTCMinutes()*x+_e.getUTCSeconds()*E+_e.getUTCMilliseconds());break;default:ze=Math.min(he[0],he[1]),Ie=Ce=(je=Math.max(he[0],he[1]))-ze}for(var we=ze;we<je;we+=Ce)ye(we,we+Ie)}else for(var Se=b.simpleMap(ke.values,D.d2c),Oe=0;Oe<Se.length;Oe++)ye(de=Se[Oe],be=de+ke.dvalue)}return pe.sort(function(Be,He){return Be.min-He.min}),pe},D.makeCalcdata=function(ie,ue,fe){var he,de,be,pe,Te=D.type,ye="date"===Te&&ie[ue+"calendar"];if(ue in ie){if(he=ie[ue],pe=ie._length||b.minRowLength(he),b.isTypedArray(he)&&("linear"===Te||"log"===Te)){if(pe===he.length)return he;if(he.subarray)return he.subarray(0,pe)}if("multicategory"===Te)return function(je,Ie){for(var Ce=new Array(Ie),_e=0;_e<Ie;_e++)Ce[_e]=ae([(je[0]||[])[_e],(je[1]||[])[_e]]);return Ce}(he,pe);for(de=new Array(pe),be=0;be<pe;be++)de[be]=D.d2c(he[be],0,ye,fe)}else{var ke=ue+"0"in ie?D.d2c(ie[ue+"0"],0,ye):0,ze=ie["d"+ue]?Number(ie["d"+ue]):1;for(he=ie[{x:"y",y:"x"}[ue]],pe=ie._length||he.length,de=new Array(pe),be=0;be<pe;be++)de[be]=ke+be*ze}if(D.rangebreaks)for(be=0;be<pe;be++)de[be]=D.maskBreaks(de[be]);return de},D.isValidRange=function(ie){return Array.isArray(ie)&&2===ie.length&&r(D.r2l(ie[0]))&&r(D.r2l(ie[1]))},D.isPtWithinRange=function(ie,ue){var fe=D.c2l(ie[N],null,ue),he=D.r2l(D.range[0]),de=D.r2l(D.range[1]);return he<de?he<=fe&&fe<=de:de<=fe&&fe<=he},D._emptyCategories=function(){D._categories=[],D._categoriesMap={}},D.clearCalc=function(){var ie=D._matchGroup;if(ie){var ue=null,fe=null;for(var he in ie){var de=R[k.id2name(he)];if(de._categories){ue=de._categories,fe=de._categoriesMap;break}}ue&&fe?(D._categories=ue,D._categoriesMap=fe):D._emptyCategories()}else D._emptyCategories();if(D._initialCategories)for(var be=0;be<D._initialCategories.length;be++)ne(D._initialCategories[be])},D.sortByInitialCategories=function(){var ie=[];if(D._emptyCategories(),D._initialCategories)for(var ue=0;ue<D._initialCategories.length;ue++)ne(D._initialCategories[ue]);ie=ie.concat(D._traceIndices);var fe=D._matchGroup;for(var he in fe)if(S!==he){var de=R[k.id2name(he)];de._categories=D._categories,de._categoriesMap=D._categoriesMap,ie=ie.concat(de._traceIndices)}return ie};var oe=R._d3locale;"date"===D.type&&(D._dateFormat=oe?oe.timeFormat:m,D._extraFormat=R._extraFormat),D._separators=R.separators,D._numFormat=oe?oe.numberFormat:p,delete D._minDtick,delete D._forceTick0}},{"../../constants/numerical":779,"../../lib":803,"./axis_ids":858,"./constants":861,"@plotly/d3":58,"d3-time-format":175,"fast-isnumeric":249}],876:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/color").contrast,b=h("./layout_attributes"),p=h("../array_container_defaults");function r(c){var l=["showexponent","showtickprefix","showticksuffix"].filter(function(f){return void 0!==c[f]});if(l.every(function(f){return c[f]===c[l[0]]})||1===l.length)return c[l[0]]}function u(c,l){function f(s,o){return i.coerce(c,l,b.tickformatstops,s,o)}f("enabled")&&(f("dtickrange"),f("value"))}G.exports=function(c,l,f,s,o,d){var v,w,x;d&&1!==d.pass||(v=f,w=o,x=r(c),v("tickprefix")&&v("showtickprefix",x),v("ticksuffix",w.tickSuffixDflt)&&v("showticksuffix",x)),d&&2!==d.pass||function(g,y,v,_,w){var x=r(g);if(v("tickprefix")&&v("showtickprefix",x),v("ticksuffix",w.tickSuffixDflt)&&v("showticksuffix",x),v("showticklabels")){var E=w.font||{},k=y.color,C=-1!==(y.ticklabelposition||"").indexOf("inside")?m(w.bgColor):k&&k!==b.color.dflt?k:E.color;if(i.coerceFont(v,"tickfont",{family:E.family,size:E.size,color:C}),v("tickangle"),"category"!==_){var L=v("tickformat");p(g,y,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:u}),y.tickformatstops.length||delete y.tickformatstops,L||"date"===_||(v("showexponent",x),v("exponentformat"),v("minexponent"),v("separatethousands"))}}}(c,l,f,s,o)}},{"../../components/color":666,"../../lib":803,"../array_container_defaults":849,"./layout_attributes":869}],877:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./layout_attributes");G.exports=function(b,p,r,u){var c=i.coerce2(b,p,m,"ticklen"),l=i.coerce2(b,p,m,"tickwidth"),f=i.coerce2(b,p,m,"tickcolor",p.color);r("ticks",u.outerTicks||c||l||f?"outside":"")||(delete p.ticklen,delete p.tickwidth,delete p.tickcolor)}},{"../../lib":803,"./layout_attributes":869}],878:[function(h,G,X){"use strict";var i=h("./clean_ticks"),m=h("../../lib").isArrayOrTypedArray;G.exports=function(b,p,r,u){function c(g){var y=b[g];return void 0!==y?y:(p._template||{})[g]}var l=c("tick0"),f=c("dtick"),s=c("tickvals"),o=r("tickmode",m(s)?"array":f?"linear":"auto");if("auto"===o)r("nticks");else if("linear"===o){var d=p.dtick=i.dtick(f,u);p.tick0=i.tick0(l,u,p.calendar,d)}else"multicategory"!==u&&(void 0===r("tickvals")?p.tickmode="auto":r("ticktext"))}},{"../../lib":803,"./clean_ticks":860}],879:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../registry"),b=h("../../lib"),p=h("../../components/drawing"),r=h("./axes");G.exports=function(u,c,l,f){var s=u._fullLayout;if(0!==c.length){var o,d,g,y;f&&(o=f());var v=i.ease(l.easing);return u._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(y),y=null,function(){for(var x={},E=0;E<c.length;E++){var k=c[E],L=k.plotinfo.yaxis;k.xr0&&(x[k.plotinfo.xaxis._name+".range"]=k.xr0.slice()),k.yr0&&(x[L._name+".range"]=k.yr0.slice())}return m.call("relayout",u,x).then(function(){for(var P=0;P<c.length;P++)_(c[P].plotinfo)})}()}),d=Date.now(),y=window.requestAnimationFrame(function x(){g=Date.now();for(var E=Math.min(1,(g-d)/l.duration),k=v(E),C=0;C<c.length;C++)w(c[C],k);g-d>l.duration?(function(){for(var L={},P=0;P<c.length;P++){var A=c[P],D=A.plotinfo.yaxis;A.xr1&&(L[A.plotinfo.xaxis._name+".range"]=A.xr1.slice()),A.yr1&&(L[D._name+".range"]=A.yr1.slice())}o&&o(),m.call("relayout",u,L).then(function(){for(var R=0;R<c.length;R++)_(c[R].plotinfo)})}(),y=window.cancelAnimationFrame(x)):y=window.requestAnimationFrame(x)}),Promise.resolve()}function _(x){var E=x.xaxis,k=x.yaxis;s._defs.select("#"+x.clipId+"> rect").call(p.setTranslate,0,0).call(p.setScale,1,1),x.plot.call(p.setTranslate,E._offset,k._offset).call(p.setScale,1,1);var C=x.plot.selectAll(".scatterlayer .trace");C.selectAll(".point").call(p.setPointGroupScale,1,1),C.selectAll(".textpoint").call(p.setTextPointsScale,1,1),C.call(p.hideOutsideRangePoints,x)}function w(x,E){var k=x.plotinfo,C=k.xaxis,L=k.yaxis,P=C._length,A=L._length,I=!!x.xr1,D=!!x.yr1,R=[];if(I){var S=b.simpleMap(x.xr0,C.r2l),N=b.simpleMap(x.xr1,C.r2l),B=S[1]-S[0],H=N[1]-N[0];R[0]=(S[0]*(1-E)+E*N[0]-S[0])/(S[1]-S[0])*P,R[2]=P*(1-E+E*H/B),C.range[0]=C.l2r(S[0]*(1-E)+E*N[0]),C.range[1]=C.l2r(S[1]*(1-E)+E*N[1])}else R[0]=0,R[2]=P;if(D){var Y=b.simpleMap(x.yr0,L.r2l),Q=b.simpleMap(x.yr1,L.r2l),ne=Y[1]-Y[0],ae=Q[1]-Q[0];R[1]=(Y[1]*(1-E)+E*Q[1]-Y[1])/(Y[0]-Y[1])*A,R[3]=A*(1-E+E*ae/ne),L.range[0]=C.l2r(Y[0]*(1-E)+E*Q[0]),L.range[1]=L.l2r(Y[1]*(1-E)+E*Q[1])}else R[1]=0,R[3]=A;r.drawOne(u,C,{skipTitle:!0}),r.drawOne(u,L,{skipTitle:!0}),r.redrawComponents(u,[C._id,L._id]);var te=I?P/R[2]:1,K=D?A/R[3]:1,Z=C._offset-(I?R[0]/R[2]*P:0),oe=L._offset-(D?R[1]/R[3]*A:0);k.clipRect.call(p.setTranslate,I?R[0]:0,D?R[1]:0).call(p.setScale,1/te,1/K),k.plot.call(p.setTranslate,Z,oe).call(p.setScale,te,K),p.setPointGroupScale(k.zoomScalePts,1/te,1/K),p.setTextPointsScale(k.zoomScaleTxt,1/te,1/K)}r.redrawComponents(u)}},{"../../components/drawing":688,"../../lib":803,"../../registry":931,"./axes":854,"@plotly/d3":58}],880:[function(h,G,X){"use strict";var i=h("../../registry").traceIs,m=h("./axis_autotype");function b(r){return{v:"x",h:"y"}[r.orientation||"v"]}function p(r,u){var c=b(r),l=i(r,"box-violin"),f=i(r._fullInput||{},"candlestick");return l&&!f&&u===c&&void 0===r[c]&&void 0===r[c+"0"]}G.exports=function(r,u,c,l){c("autotypenumbers",l.autotypenumbersDflt),"-"===c("type",(l.splomStash||{}).type)&&(function(f,s){if("-"===f.type){var o,d=f._id,g=d.charAt(0);-1!==d.indexOf("scene")&&(d=g);var y=function(L,P,A){for(var I=0;I<L.length;I++){var D=L[I];if("splom"===D.type&&D._length>0&&(D["_"+A+"axes"]||{})[P]||(D[A+"axis"]||A)===P&&(p(D,A)||(D[A]||[]).length||D[A+"0"]))return D}}(s,d,g);if(y){if("histogram"===y.type&&g==={v:"y",h:"x"}[y.orientation||"v"])return void(f.type="linear");var v=g+"calendar",_=y[v],w={noMultiCategory:!i(y,"cartesian")||i(y,"noMultiCategory")};if("box"===y.type&&y._hasPreCompStats&&g==={h:"x",v:"y"}[y.orientation||"v"]&&(w.noMultiCategory=!0),w.autotypenumbers=f.autotypenumbers,p(y,g)){var x=b(y),E=[];for(o=0;o<s.length;o++){var k=s[o];i(k,"box-violin")&&(k[g+"axis"]||g)===d&&(E.push(void 0!==k[x]?k[x][0]:void 0!==k.name?k.name:"text"),k[v]!==_&&(_=void 0))}f.type=m(E,_,w)}else if("splom"===y.type){var C=y.dimensions[y._axesDim[d]];C.visible&&(f.type=m(C.values,_,w))}else f.type=m(y[g]||[y[g+"0"]],_,w)}}}(u,l.data),"-"===u.type?u.type="linear":r.type=u.type)}},{"../../registry":931,"./axis_autotype":855}],881:[function(h,G,X){"use strict";var i=h("../registry"),m=h("../lib");function b(c,l,f){var s,o,d,g=!1;if("data"===l.type)s=c._fullData[null!==l.traces?l.traces[0]:0];else{if("layout"!==l.type)return!1;s=c._fullLayout}return o=m.nestedProperty(s,l.prop).get(),(d=f[l.type]=f[l.type]||{}).hasOwnProperty(l.prop)&&d[l.prop]!==o&&(g=!0),d[l.prop]=o,{changed:g,value:o}}function p(c,l){var f=[],s=l[0],o={};if("string"==typeof s)o[s]=l[1];else{if(!m.isPlainObject(s))return f;o=s}return u(o,function(d,g,y){f.push({type:"layout",prop:d,value:y})},"",0),f}function r(c,l){var f,s,o,d,g=[];if(o=l[1],f=l[2],d={},"string"==typeof(s=l[0]))d[s]=o;else{if(!m.isPlainObject(s))return g;d=s,void 0===f&&(f=o)}return void 0===f&&(f=null),u(d,function(y,v,_){var w,x;if(Array.isArray(_)){x=_.slice();var E=Math.min(x.length,c.data.length);f&&(E=Math.min(E,f.length)),w=[];for(var k=0;k<E;k++)w[k]=f?f[k]:k}else x=_,w=f?f.slice():null;if(null===w)Array.isArray(x)&&(x=x[0]);else if(Array.isArray(w)){if(!Array.isArray(x)){var C=x;x=[];for(var L=0;L<w.length;L++)x[L]=C}x.length=Math.min(w.length,x.length)}g.push({type:"data",prop:y,traces:w,value:x})},"",0),g}function u(c,l,f,s){Object.keys(c).forEach(function(o){var d=c[o];if("_"!==o[0]){var g=f+(s>0?".":"")+o;m.isPlainObject(d)?u(d,l,g,s+1):l(g,o,d)}})}X.manageCommandObserver=function(c,l,f,s){var o={},d=!0;l&&l._commandObserver&&(o=l._commandObserver),o.cache||(o.cache={}),o.lookupTable={};var g=X.hasSimpleAPICommandBindings(c,f,o.lookupTable);if(l&&l._commandObserver){if(g)return o;if(l._commandObserver.remove)return l._commandObserver.remove(),l._commandObserver=null,o}if(g){b(c,g,o.cache),o.check=function(){if(d){var _=b(c,g,o.cache);return _.changed&&s&&void 0!==o.lookupTable[_.value]&&(o.disable(),Promise.resolve(s({value:_.value,type:g.type,prop:g.prop,traces:g.traces,index:o.lookupTable[_.value]})).then(o.enable,o.enable)),_.changed}};for(var y=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],v=0;v<y.length;v++)c._internalOn(y[v],o.check);o.remove=function(){for(var _=0;_<y.length;_++)c._removeInternalListener(y[_],o.check)}}else m.log("Unable to automatically bind plot updates to API command"),o.lookupTable={},o.remove=function(){};return o.disable=function(){d=!1},o.enable=function(){d=!0},l&&(l._commandObserver=o),o},X.hasSimpleAPICommandBindings=function(c,l,f){var s,o,d=l.length;for(s=0;s<d;s++){var g,y=l[s],v=y.method,_=y.args;if(Array.isArray(_)||(_=[]),!v)return!1;var w=X.computeAPICommandBindings(c,v,_);if(1!==w.length)return!1;if(o){if((g=w[0]).type!==o.type||g.prop!==o.prop)return!1;if(Array.isArray(o.traces)){if(!Array.isArray(g.traces))return!1;g.traces.sort();for(var x=0;x<o.traces.length;x++)if(o.traces[x]!==g.traces[x])return!1}else if(g.prop!==o.prop)return!1}else o=w[0],Array.isArray(o.traces)&&o.traces.sort();var E=(g=w[0]).value;if(Array.isArray(E)){if(1!==E.length)return!1;E=E[0]}f&&(f[E]=s)}return o},X.executeAPICommand=function(c,l,f){if("skip"===l)return Promise.resolve();var s=i.apiMethodRegistry[l],o=[c];Array.isArray(f)||(f=[]);for(var d=0;d<f.length;d++)o.push(f[d]);return s.apply(null,o).catch(function(g){return m.warn("API call to Plotly."+l+" rejected.",g),Promise.reject(g)})},X.computeAPICommandBindings=function(c,l,f){var s,d;switch(Array.isArray(f)||(f=[]),l){case"restyle":s=r(c,f);break;case"relayout":s=p(0,f);break;case"update":s=r(c,[f[0],f[2]]).concat(p(0,[f[1]]));break;case"animate":d=f,s=Array.isArray(d[0])&&1===d[0].length&&-1!==["string","number"].indexOf(typeof d[0][0])?[{type:"layout",prop:"_currentFrame",value:d[0][0].toString()}]:[];break;default:s=[]}return s}},{"../lib":803,"../registry":931}],882:[function(h,G,X){"use strict";var i=h("../lib/extend").extendFlat;X.attributes=function(m,b){b=b||{};var p={valType:"info_array",editType:(m=m||{}).editType,items:[{valType:"number",min:0,max:1,editType:m.editType},{valType:"number",min:0,max:1,editType:m.editType}],dflt:[0,1]},r={x:i({},p,{}),y:i({},p,{}),editType:m.editType};return m.noGridCell||(r.row={valType:"integer",min:0,dflt:0,editType:m.editType},r.column={valType:"integer",min:0,dflt:0,editType:m.editType}),r},X.defaults=function(m,b,p,r){var u=r&&r.x||[0,1],c=r&&r.y||[0,1],l=b.grid;if(l){var f=p("domain.column");void 0!==f&&(f<l.columns?u=l._domains.x[f]:delete m.domain.column);var s=p("domain.row");void 0!==s&&(s<l.rows?c=l._domains.y[s]:delete m.domain.row)}var o=p("domain.x",u),d=p("domain.y",c);o[0]<o[1]||(m.domain.x=u.slice()),d[0]<d[1]||(m.domain.y=c.slice())}},{"../lib/extend":793}],883:[function(h,G,X){"use strict";G.exports=function(i){var m=i.editType,b=i.colorEditType;void 0===b&&(b=m);var p={family:{valType:"string",noBlank:!0,strict:!0,editType:m},size:{valType:"number",min:1,editType:m},color:{valType:"color",editType:b},editType:m};return i.arrayOk&&(p.family.arrayOk=!0,p.size.arrayOk=!0,p.color.arrayOk=!0),p}},{}],884:[function(h,G,X){"use strict";G.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],885:[function(h,G,X){"use strict";X.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},X.axesNames=["lonaxis","lataxis"],X.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},X.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},X.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},X.clipPad=.001,X.precision=.1,X.landColor="#F0DC82",X.waterColor="#3399FF",X.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},X.sphereSVG={type:"Sphere"},X.fillLayers={ocean:1,land:1,lakes:1},X.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},X.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],X.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],X.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],886:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("d3-geo"),b=m.geoPath,p=m.geoDistance,r=h("d3-geo-projection"),u=h("../../registry"),c=h("../../lib"),l=c.strTranslate,f=h("../../components/color"),s=h("../../components/drawing"),o=h("../../components/fx"),d=h("../plots"),g=h("../cartesian/axes"),y=h("../cartesian/autorange").getAutoRange,v=h("../../components/dragelement"),_=h("../cartesian/select").prepSelect,w=h("../cartesian/select").clearSelect,x=h("../cartesian/select").selectOnClick,E=h("./zoom"),k=h("./constants"),C=h("../../lib/geo_location_utils"),L=h("../../lib/topojson_utils"),P=h("topojson-client").feature;function A(R){this.id=R.id,this.graphDiv=R.graphDiv,this.container=R.container,this.topojsonURL=R.topojsonURL,this.isStatic=R.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var I=A.prototype;function D(R,S){var N=k.clipPad,B=R[0]+N,H=R[1]-N,Y=S[0]+N,Q=S[1]-N;B>0&&H<0&&(H+=360);var ne=(H-B)/4;return{type:"Polygon",coordinates:[[[B,Y],[B,Q],[B+ne,Q],[B+2*ne,Q],[B+3*ne,Q],[H,Q],[H,Y],[H-ne,Y],[H-2*ne,Y],[H-3*ne,Y],[B,Y]]]}}G.exports=function(R){return new A(R)},I.plot=function(R,S,N){var B=this,H=S[this.id],Y=[],Q=!1;for(var ne in k.layerNameToAdjective)if("frame"!==ne&&H["show"+ne]){Q=!0;break}for(var ae=0;ae<R.length;ae++)if(R[0][0].trace.locationmode){Q=!0;break}if(Q){var te=L.getTopojsonName(H);null!==B.topojson&&te===B.topojsonName||(B.topojsonName=te,void 0===PlotlyGeoAssets.topojson[B.topojsonName]&&Y.push(B.fetchTopojson()))}Y=Y.concat(C.fetchTraceGeoData(R)),N.push(new Promise(function(K,q){Promise.all(Y).then(function(){B.topojson=PlotlyGeoAssets.topojson[B.topojsonName],B.update(R,S),K()}).catch(q)}))},I.fetchTopojson=function(){var R=this,S=L.getTopojsonPath(R.topojsonURL,R.topojsonName);return new Promise(function(N,B){i.json(S,function(H,Y){if(H)return B(404===H.status?new Error(["plotly.js could not find topojson file at",S,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",S].join(" ")));PlotlyGeoAssets.topojson[R.topojsonName]=Y,N()})})},I.update=function(R,S){var N=S[this.id];this.hasChoropleth=!1;for(var B=0;B<R.length;B++){var H=R[B],Y=H[0].trace;"choropleth"===Y.type&&(this.hasChoropleth=!0),!0===Y.visible&&Y._length>0&&Y._module.calcGeoJSON(H,S)}if(!this.updateProjection(R,S)){this.viewInitial&&this.scope===N.scope||this.saveViewInitial(N),this.scope=N.scope,this.updateBaseLayers(S,N),this.updateDims(S,N),this.updateFx(S,N),d.generalUpdatePerTraceModule(this.graphDiv,this,R,N);var Q=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=Q.selectAll(".point"),this.dataPoints.text=Q.selectAll("text"),this.dataPaths.line=Q.selectAll(".js-line");var ne=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=ne.selectAll("path"),this.render()}},I.updateProjection=function(R,S){var N=this.graphDiv,B=S[this.id],H=S._size,Y=B.domain,Q=B.projection,ne=B.lonaxis,ae=B.lataxis,te=ne._ax,K=ae._ax,q=this.projection=function(_e){var we=_e.projection,Se=we.type,Oe=k.projNames[Se];Oe="geo"+c.titleCase(Oe);for(var Be=(m[Oe]||r[Oe])(),He=_e._isSatellite?180*Math.acos(1/we.distance)/Math.PI:_e._isClipped?k.lonaxisSpan[Se]/2:null,Xe=["center","rotate","parallels","clipExtent"],nt=function(Ye){return Ye?Be:[]},et=0;et<Xe.length;et++){var qe=Xe[et];"function"!=typeof Be[qe]&&(Be[qe]=nt)}return Be.isLonLatOverEdges=function(Ye){if(null===Be(Ye))return!0;if(He){var ot=Be.rotate();return p(Ye,[-ot[0],-ot[1]])>He*Math.PI/180}return!1},Be.getPath=function(){return b().projection(Be)},Be.getBounds=function(Ye){return Be.getPath().bounds(Ye)},Be.precision(k.precision),_e._isSatellite&&Be.tilt(we.tilt).distance(we.distance),He&&Be.clipAngle(He-k.clipPad),Be}(B),re=[[H.l+H.w*Y.x[0],H.t+H.h*(1-Y.y[1])],[H.l+H.w*Y.x[1],H.t+H.h*(1-Y.y[0])]],V=B.center||{},W=Q.rotation||{},Z=ne.range||[],oe=ae.range||[];if(B.fitbounds){te._length=re[1][0]-re[0][0],K._length=re[1][1]-re[0][1],te.range=y(N,te),K.range=y(N,K);var ie=(te.range[0]+te.range[1])/2,ue=(K.range[0]+K.range[1])/2;if(B._isScoped)V={lon:ie,lat:ue};else if(B._isClipped){V={lon:ie,lat:ue},W={lon:ie,lat:ue,roll:W.roll};var fe=Q.type,he=k.lonaxisSpan[fe]/2||180,de=k.lataxisSpan[fe]/2||90;Z=[ie-he,ie+he],oe=[ue-de,ue+de]}else V={lon:ie,lat:ue},W={lon:ie,lat:W.lat,roll:W.roll}}q.center([V.lon-W.lon,V.lat-W.lat]).rotate([-W.lon,-W.lat,W.roll]).parallels(Q.parallels);var be=D(Z,oe);q.fitExtent(re,be);var pe=this.bounds=q.getBounds(be),Te=this.fitScale=q.scale(),ye=q.translate();if(B.fitbounds){var ke=q.getBounds(D(te.range,K.range)),ze=Math.min((pe[1][0]-pe[0][0])/(ke[1][0]-ke[0][0]),(pe[1][1]-pe[0][1])/(ke[1][1]-ke[0][1]));isFinite(ze)?q.scale(ze*Te):c.warn("Something went wrong during"+this.id+"fitbounds computations.")}else q.scale(Q.scale*Te);var je=this.midPt=[(pe[0][0]+pe[1][0])/2,(pe[0][1]+pe[1][1])/2];if(q.translate([ye[0]+(je[0]-ye[0]),ye[1]+(je[1]-ye[1])]).clipExtent(pe),B._isAlbersUsa){var Ie=q([V.lon,V.lat]),Ce=q.translate();q.translate([Ce[0]-(Ie[0]-Ce[0]),Ce[1]-(Ie[1]-Ce[1])])}},I.updateBaseLayers=function(R,S){var N=this,B=N.topojson,H=N.layers,Y=N.basePaths;function Q(q){return"lonaxis"===q||"lataxis"===q}function ne(q){return Boolean(k.lineLayers[q])}function ae(q){return Boolean(k.fillLayers[q])}var te=(this.hasChoropleth?k.layersForChoropleth:k.layers).filter(function(q){return ne(q)||ae(q)?S["show"+q]:!Q(q)||S[q].showgrid}),K=N.framework.selectAll(".layer").data(te,String);K.exit().each(function(q){delete H[q],delete Y[q],i.select(this).remove()}),K.enter().append("g").attr("class",function(q){return"layer "+q}).each(function(q){var re=H[q]=i.select(this);"bg"===q?N.bgRect=re.append("rect").style("pointer-events","all"):Q(q)?Y[q]=re.append("path").style("fill","none"):"backplot"===q?re.append("g").classed("choroplethlayer",!0):"frontplot"===q?re.append("g").classed("scatterlayer",!0):ne(q)?Y[q]=re.append("path").style("fill","none").style("stroke-miterlimit",2):ae(q)&&(Y[q]=re.append("path").style("stroke","none"))}),K.order(),K.each(function(q){var re=Y[q],V=k.layerNameToAdjective[q];"frame"===q?re.datum(k.sphereSVG):ne(q)||ae(q)?re.datum(P(B,B.objects[q])):Q(q)&&re.datum(function(W,Z,oe){var ie,ue,fe,he=Z[W],de=k.scopeDefaults[Z.scope];"lonaxis"===W?(ie=de.lonaxisRange,ue=de.lataxisRange,fe=function(Ce,_e){return[Ce,_e]}):"lataxis"===W&&(ie=de.lataxisRange,ue=de.lonaxisRange,fe=function(Ce,_e){return[_e,Ce]});var be={type:"linear",range:[ie[0],ie[1]-1e-6],tick0:he.tick0,dtick:he.dtick};g.setConvert(be,oe);var pe=g.calcTicks(be);Z.isScoped||"lonaxis"!==W||pe.pop();for(var Te=pe.length,ye=new Array(Te),ke=0;ke<Te;ke++)for(var ze=pe[ke].x,je=ye[ke]=[],Ie=ue[0];Ie<ue[1]+2.5;Ie+=2.5)je.push(fe(ze,Ie));return{type:"MultiLineString",coordinates:ye}}(q,S,R)).call(f.stroke,S[q].gridcolor).call(s.dashLine,"",S[q].gridwidth),ne(q)?re.call(f.stroke,S[V+"color"]).call(s.dashLine,"",S[V+"width"]):ae(q)&&re.call(f.fill,S[V+"color"])})},I.updateDims=function(R,S){var N=this.bounds,B=(S.framewidth||0)/2,H=N[0][0]-B,Y=N[0][1]-B,Q=N[1][0]-H+B,ne=N[1][1]-Y+B;s.setRect(this.clipRect,H,Y,Q,ne),this.bgRect.call(s.setRect,H,Y,Q,ne).call(f.fill,S.bgcolor),this.xaxis._offset=H,this.xaxis._length=Q,this.yaxis._offset=Y,this.yaxis._length=ne},I.updateFx=function(R,S){var N=this,B=N.graphDiv,H=N.bgRect,Y=R.dragmode,Q=R.clickmode;if(!N.isStatic){var ne;"select"===Y?ne=function(K,q){(K.range={})[N.id]=[te([q.xmin,q.ymin]),te([q.xmax,q.ymax])]}:"lasso"===Y&&(ne=function(K,q,re){(K.lassoPoints={})[N.id]=re.filtered.map(te)});var ae={element:N.bgRect.node(),gd:B,plotinfo:{id:N.id,xaxis:N.xaxis,yaxis:N.yaxis,fillRangeItems:ne},xaxes:[N.xaxis],yaxes:[N.yaxis],subplot:N.id,clickFn:function(K){2===K&&w(B)}};"pan"===Y?(H.node().onmousedown=null,H.call(E(N,S)),H.on("dblclick.zoom",function(){var K=N.viewInitial,q={};for(var re in K)q[N.id+"."+re]=K[re];u.call("_guiRelayout",B,q),B.emit("plotly_doubleclick",null)}),B._context._scrollZoom.geo||H.on("wheel.zoom",null)):"select"!==Y&&"lasso"!==Y||(H.on(".zoom",null),ae.prepFn=function(K,q,re){_(K,q,re,ae,Y)},v.init(ae)),H.on("mousemove",function(){var K=N.projection.invert(c.getPositionFromD3Event());if(!K)return v.unhover(B,i.event);N.xaxis.p2c=function(){return K[0]},N.yaxis.p2c=function(){return K[1]},o.hover(B,i.event,N.id)}),H.on("mouseout",function(){B._dragging||v.unhover(B,i.event)}),H.on("click",function(){"select"!==Y&&"lasso"!==Y&&(Q.indexOf("select")>-1&&x(i.event,B,[N.xaxis],[N.yaxis],N.id,ae),Q.indexOf("event")>-1&&o.click(B,i.event))})}function te(K){return N.projection.invert([K[0]+N.xaxis._offset,K[1]+N.yaxis._offset])}},I.makeFramework=function(){var R=this,S=R.graphDiv,N=S._fullLayout,B="clip"+N._uid+R.id;R.clipDef=N._clips.append("clipPath").attr("id",B),R.clipRect=R.clipDef.append("rect"),R.framework=i.select(R.container).append("g").attr("class","geo "+R.id).call(s.setClipUrl,B,S),R.project=function(H){var Y=R.projection(H);return Y?[Y[0]-R.xaxis._offset,Y[1]-R.yaxis._offset]:[null,null]},R.xaxis={_id:"x",c2p:function(H){return R.project(H)[0]}},R.yaxis={_id:"y",c2p:function(H){return R.project(H)[1]}},R.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},g.setConvert(R.mockAxis,N)},I.saveViewInitial=function(R){var N=R.center||{},B=R.projection,H=B.rotation||{};this.viewInitial={fitbounds:R.fitbounds,"projection.scale":B.scale},c.extendFlat(this.viewInitial,R._isScoped?{"center.lon":N.lon,"center.lat":N.lat}:R._isClipped?{"projection.rotation.lon":H.lon,"projection.rotation.lat":H.lat}:{"center.lon":N.lon,"center.lat":N.lat,"projection.rotation.lon":H.lon})},I.render=function(){var R,S=this.projection,N=S.getPath();function B(Y){var Q=S(Y.lonlat);return Q?l(Q[0],Q[1]):null}function H(Y){return S.isLonLatOverEdges(Y.lonlat)?"none":null}for(R in this.basePaths)this.basePaths[R].attr("d",N);for(R in this.dataPaths)this.dataPaths[R].attr("d",function(Y){return N(Y.geojson)});for(R in this.dataPoints)this.dataPoints[R].attr("display",H).attr("transform",B)}},{"../../components/color":666,"../../components/dragelement":685,"../../components/drawing":688,"../../components/fx":706,"../../lib":803,"../../lib/geo_location_utils":796,"../../lib/topojson_utils":832,"../../registry":931,"../cartesian/autorange":853,"../cartesian/axes":854,"../cartesian/select":874,"../plots":917,"./constants":885,"./zoom":890,"@plotly/d3":58,"d3-geo":169,"d3-geo-projection":168,"topojson-client":601}],887:[function(h,G,X){"use strict";var i=h("../../plots/get_data").getSubplotCalcData,m=h("../../lib").counterRegex,b=h("./geo"),p="geo",r=m(p),u={};u.geo={valType:"subplotid",dflt:p,editType:"calc"},G.exports={attr:p,name:p,idRoot:p,idRegex:r,attrRegex:r,attributes:u,layoutAttributes:h("./layout_attributes"),supplyLayoutDefaults:h("./layout_defaults"),plot:function(c){for(var l=c._fullLayout,f=c.calcdata,s=l._subplots.geo,o=0;o<s.length;o++){var d=s[o],g=i(f,p,d),y=l[d]._subplot;y||(y=b({id:d,graphDiv:c,container:l._geolayer.node(),topojsonURL:c._context.topojsonURL,staticPlot:c._context.staticPlot}),l[d]._subplot=y),y.plot(g,l,c._promises)}},updateFx:function(c){for(var l=c._fullLayout,f=l._subplots.geo,s=0;s<f.length;s++){var o=l[f[s]];o._subplot.updateFx(l,o)}},clean:function(c,l,f,s){for(var o=s._subplots.geo||[],d=0;d<o.length;d++){var g=o[d],y=s[g]._subplot;!l[g]&&y&&(y.framework.remove(),y.clipDef.remove())}}}},{"../../lib":803,"../../plots/get_data":891,"./geo":886,"./layout_attributes":888,"./layout_defaults":889}],888:[function(h,G,X){"use strict";var i=h("../../components/color/attributes"),m=h("../domain").attributes,b=h("./constants"),p=h("../../plot_api/edit_types").overrideAll,r=h("../../lib/sort_object_keys"),u={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:i.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(G.exports=p({domain:m({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:r(b.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:r(b.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:i.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:b.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:b.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:b.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:b.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:i.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:i.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:i.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:i.background},lonaxis:u,lataxis:u},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":665,"../../lib/sort_object_keys":826,"../../plot_api/edit_types":836,"../domain":882,"./constants":885}],889:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../subplot_defaults"),b=h("../get_data").getSubplotData,p=h("./constants"),r=h("./layout_attributes"),u=p.axesNames;function c(l,f,s,o){var d=b(o.fullData,"geo",o.id).map(function(W){return W._expandedIndex}),g=s("resolution"),y=s("scope"),v=p.scopeDefaults[y],_=s("projection.type",v.projType),w=f._isAlbersUsa="albers usa"===_;w&&(y=f.scope="usa");var x=f._isScoped="world"!==y,E=f._isSatellite="satellite"===_,k=f._isConic=-1!==_.indexOf("conic")||"albers"===_,C=f._isClipped=!!p.lonaxisSpan[_];if(!1===l.visible){var L=i.extendDeep({},f._template);L.showcoastlines=!1,L.showcountries=!1,L.showframe=!1,L.showlakes=!1,L.showland=!1,L.showocean=!1,L.showrivers=!1,L.showsubunits=!1,L.lonaxis&&(L.lonaxis.showgrid=!1),L.lataxis&&(L.lataxis.showgrid=!1),f._template=L}for(var P=s("visible"),A=0;A<u.length;A++){var I,D=u[A],R=[30,10][A];if(x)I=v[D+"Range"];else{var S=p[D+"Span"],N=(S[_]||S["*"])/2,B=s("projection.rotation."+D.substr(0,3),v.projRotate[A]);I=[B-N,B+N]}var H=s(D+".range",I);s(D+".tick0"),s(D+".dtick",R),s(D+".showgrid",!!P&&void 0)&&(s(D+".gridcolor"),s(D+".gridwidth")),f[D]._ax={type:"linear",_id:D.slice(0,3),_traceIndices:d,setScale:i.identity,c2l:i.identity,r2l:i.identity,autorange:!0,range:H.slice(),_m:1,_input:{}}}var Y=f.lonaxis.range,Q=f.lataxis.range,ne=Y[0],ae=Y[1];ne>0&&ae<0&&(ae+=360);var te,K,q,re=(ne+ae)/2;if(!w){var V=x?v.projRotate:[re,0,0];te=s("projection.rotation.lon",V[0]),s("projection.rotation.lat",V[1]),s("projection.rotation.roll",V[2]),s("showcoastlines",!x&&P)&&(s("coastlinecolor"),s("coastlinewidth")),s("showocean",!!P&&void 0)&&s("oceancolor")}w?(K=-96.6,q=38.7):(K=x?re:te,q=(Q[0]+Q[1])/2),s("center.lon",K),s("center.lat",q),E&&(s("projection.tilt"),s("projection.distance")),k&&s("projection.parallels",v.projParallels||[0,60]),s("projection.scale"),s("showland",!!P&&void 0)&&s("landcolor"),s("showlakes",!!P&&void 0)&&s("lakecolor"),s("showrivers",!!P&&void 0)&&(s("rivercolor"),s("riverwidth")),s("showcountries",x&&"usa"!==y&&P)&&(s("countrycolor"),s("countrywidth")),("usa"===y||"north america"===y&&50===g)&&(s("showsubunits",P),s("subunitcolor"),s("subunitwidth")),x||s("showframe",P)&&(s("framecolor"),s("framewidth")),s("bgcolor"),s("fitbounds")&&(delete f.projection.scale,x?(delete f.center.lon,delete f.center.lat):C?(delete f.center.lon,delete f.center.lat,delete f.projection.rotation.lon,delete f.projection.rotation.lat,delete f.lonaxis.range,delete f.lataxis.range):(delete f.center.lon,delete f.center.lat,delete f.projection.rotation.lon))}G.exports=function(l,f,s){m(l,f,s,{type:"geo",attributes:r,handleDefaults:c,fullData:s,partition:"y"})}},{"../../lib":803,"../get_data":891,"../subplot_defaults":925,"./constants":885,"./layout_attributes":888}],890:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=h("../../registry"),p=Math.PI/180,r=180/Math.PI,u={cursor:"pointer"},c={cursor:"auto"};function l(P,A){return i.behavior.zoom().translate(A.translate()).scale(A.scale())}function f(P,A,I){var D=P.id,R=P.graphDiv,S=R.layout,N=S[D],B=R._fullLayout,H=B[D],Y={},Q={};function ne(ae,te){Y[D+"."+ae]=m.nestedProperty(N,ae).get(),b.call("_storeDirectGUIEdit",S,B._preGUI,Y);var K=m.nestedProperty(H,ae);K.get()!==te&&(K.set(te),m.nestedProperty(N,ae).set(te),Q[D+"."+ae]=te)}I(ne),ne("projection.scale",A.scale()/P.fitScale),ne("fitbounds",!1),R.emit("plotly_relayout",Q)}function s(P,A){var I=l(0,A);function D(R){var S=A.invert(P.midPt);R("center.lon",S[0]),R("center.lat",S[1])}return I.on("zoomstart",function(){i.select(this).style(u)}).on("zoom",function(){A.scale(i.event.scale).translate(i.event.translate),P.render();var R=A.invert(P.midPt);P.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":A.scale()/P.fitScale,"geo.center.lon":R[0],"geo.center.lat":R[1]})}).on("zoomend",function(){i.select(this).style(c),f(P,A,D)}),I}function o(P,A){var I,D,R,S,N,B,H,Y,Q,ne=l(0,A);function ae(K){return A.invert(K)}function te(K){var q=A.rotate(),re=A.invert(P.midPt);K("projection.rotation.lon",-q[0]),K("center.lon",re[0]),K("center.lat",re[1])}return ne.on("zoomstart",function(){i.select(this).style(u),I=i.mouse(this),D=A.rotate(),R=A.translate(),S=D,N=ae(I)}).on("zoom",function(){if(B=i.mouse(this),function(re){var V=ae(re);if(!V)return!0;var W=A(V);return Math.abs(W[0]-re[0])>2||Math.abs(W[1]-re[1])>2}(I))return ne.scale(A.scale()),void ne.translate(A.translate());A.scale(i.event.scale),A.translate([R[0],i.event.translate[1]]),N?ae(B)&&(Y=ae(B),A.rotate(H=[S[0]+(Y[0]-N[0]),D[1],D[2]]),S=H):N=ae(I=B),Q=!0,P.render();var K=A.rotate(),q=A.invert(P.midPt);P.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":A.scale()/P.fitScale,"geo.center.lon":q[0],"geo.center.lat":q[1],"geo.projection.rotation.lon":-K[0]})}).on("zoomend",function(){i.select(this).style(c),Q&&f(P,A,te)}),ne}function d(P,A){var I,D={r:A.rotate(),k:A.scale()},R=l(0,A),S=function(ae){for(var te=0,K=arguments.length,q=[];++te<K;)q.push(arguments[te]);var re=i.dispatch.apply(null,q);return re.of=function(V,W){return function(Z){var oe;try{oe=Z.sourceEvent=i.event,Z.target=ae,i.event=Z,re[Z.type].apply(V,W)}finally{i.event=oe}}},re}(R,"zoomstart","zoom","zoomend"),N=0,B=R.on;function H(ae){N++||ae({type:"zoomstart"})}function Y(ae){ae({type:"zoom"})}function Q(ae){--N||ae({type:"zoomend"})}function ne(ae){var te=A.rotate();ae("projection.rotation.lon",-te[0]),ae("projection.rotation.lat",-te[1])}return R.on("zoomstart",function(){i.select(this).style(u);var ae=i.mouse(this),te=A.rotate(),K=te,q=A.translate(),re=y(te);I=g(A,ae),B.call(R,"zoom",function(){var V=i.mouse(this);if(A.scale(D.k=i.event.scale),I){if(g(A,V)){A.rotate(te).translate(q);var W=g(A,V),Z=_(I,W),oe=C(v(re,Z)),ie=D.r=w(oe,I,K);isFinite(ie[0])&&isFinite(ie[1])&&isFinite(ie[2])||(ie=K),A.rotate(ie),K=ie}}else I=g(A,ae=V);Y(S.of(this,arguments))}),H(S.of(this,arguments))}).on("zoomend",function(){i.select(this).style(c),B.call(R,"zoom",null),Q(S.of(this,arguments)),f(P,A,ne)}).on("zoom.redraw",function(){P.render();var ae=A.rotate();P.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":A.scale()/P.fitScale,"geo.projection.rotation.lon":-ae[0],"geo.projection.rotation.lat":-ae[1]})}),i.rebind(R,S,"on")}function g(P,A){var D,R,S,N,I=P.invert(A);return I&&isFinite(I[0])&&isFinite(I[1])&&(R=(D=I)[0]*p,S=D[1]*p,[(N=Math.cos(S))*Math.cos(R),N*Math.sin(R),Math.sin(S)])}function y(P){var A=.5*P[0]*p,I=.5*P[1]*p,D=.5*P[2]*p,R=Math.sin(A),S=Math.cos(A),N=Math.sin(I),B=Math.cos(I),H=Math.sin(D),Y=Math.cos(D);return[S*B*Y+R*N*H,R*B*Y-S*N*H,S*N*Y+R*B*H,S*B*H-R*N*Y]}function v(P,A){var I=P[0],D=P[1],R=P[2],S=P[3],N=A[0],B=A[1],H=A[2],Y=A[3];return[I*N-D*B-R*H-S*Y,I*B+D*N+R*Y-S*H,I*H-D*Y+R*N+S*B,I*Y+D*H-R*B+S*N]}function _(P,A){if(P&&A){var I=[(N=P)[1]*(B=A)[2]-N[2]*B[1],N[2]*B[0]-N[0]*B[2],N[0]*B[1]-N[1]*B[0]],D=Math.sqrt(L(I,I)),R=.5*Math.acos(Math.max(-1,Math.min(1,L(P,A)))),S=Math.sin(R)/D;return D&&[Math.cos(R),I[2]*S,-I[1]*S,I[0]*S]}var N,B}function w(P,A,I){var D=k(A,2,P[0]);D=k(D,1,P[1]),D=k(D,0,P[2]-I[2]);var R,S,N=A[0],B=A[1],H=A[2],Y=D[0],Q=D[1],ne=D[2],ae=Math.atan2(B,N)*r,te=Math.sqrt(N*N+B*B);Math.abs(Q)>te?(S=(Q>0?90:-90)-ae,R=0):(S=Math.asin(Q/te)*r-ae,R=Math.sqrt(te*te-Q*Q));var K=180-S-2*ae,q=(Math.atan2(ne,Y)-Math.atan2(H,R))*r,re=(Math.atan2(ne,Y)-Math.atan2(H,-R))*r;return x(I[0],I[1],S,q)<=x(I[0],I[1],K,re)?[S,q,I[2]]:[K,re,I[2]]}function x(P,A,I,D){var R=E(I-P),S=E(D-A);return Math.sqrt(R*R+S*S)}function E(P){return(P%360+540)%360-180}function k(P,A,I){var D=I*p,R=P.slice(),S=0===A?1:0,N=2===A?1:2,B=Math.cos(D),H=Math.sin(D);return R[S]=P[S]*B-P[N]*H,R[N]=P[N]*B+P[S]*H,R}function C(P){return[Math.atan2(2*(P[0]*P[1]+P[2]*P[3]),1-2*(P[1]*P[1]+P[2]*P[2]))*r,Math.asin(Math.max(-1,Math.min(1,2*(P[0]*P[2]-P[3]*P[1]))))*r,Math.atan2(2*(P[0]*P[3]+P[1]*P[2]),1-2*(P[2]*P[2]+P[3]*P[3]))*r]}function L(P,A){for(var I=0,D=0,R=P.length;D<R;++D)I+=P[D]*A[D];return I}G.exports=function(P,A){return(A._isScoped?s:A._isClipped?d:o)(P,P.projection)}},{"../../lib":803,"../../registry":931,"@plotly/d3":58}],891:[function(h,G,X){"use strict";var i=h("../registry"),m=h("./cartesian/constants").SUBPLOT_PATTERN;X.getSubplotCalcData=function(b,p,r){var u=i.subplotsRegistry[p];if(!u)return[];for(var c=u.attr,l=[],f=0;f<b.length;f++){var s=b[f];s[0].trace[c]===r&&l.push(s)}return l},X.getModuleCalcData=function(b,p){var r,u=[],c=[];if(!(r="string"==typeof p?i.getModule(p).plot:"function"==typeof p?p:p.plot))return[u,b];for(var l=0;l<b.length;l++){var f=b[l],s=f[0].trace;!0===s.visible&&0!==s._length&&(s._module.plot===r?u.push(f):c.push(f))}return[u,c]},X.getSubplotData=function(b,p,r){if(!i.subplotsRegistry[p])return[];var u,c,l,f=i.subplotsRegistry[p].attr,s=[];if("gl2d"===p){var o=r.match(m);c="x"+o[1],l="y"+o[2]}for(var d=0;d<b.length;d++)u=b[d],"gl2d"===p&&i.traceIs(u,"gl2d")?u[f[0]]===c&&u[f[1]]===l&&s.push(u):u[f]===r&&s.push(u);return s}},{"../registry":931,"./cartesian/constants":861}],892:[function(h,G,X){"use strict";var i=h("mouse-change"),m=h("mouse-wheel"),b=h("mouse-event-offset"),p=h("../cartesian/constants"),r=h("has-passive-events");function u(c,l){this.element=c,this.plot=l,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}G.exports=function(c){var l=c.mouseContainer,f=c.glplot,s=new u(l,f);function o(){c.xaxis.autorange=!1,c.yaxis.autorange=!1}function d(g,y,v){var _,w,x=c.calcDataBox(),E=f.viewBox,k=s.lastPos[0],C=s.lastPos[1],L=p.MINDRAG*f.pixelRatio,P=p.MINZOOM*f.pixelRatio;function A(B,H,Y){var Q=Math.min(H,Y),ne=Math.max(H,Y);Q!==ne?(x[B]=Q,x[B+2]=ne,s.dataBox=x,c.setRanges(x)):(c.selectBox.selectBox=[0,0,1,1],c.glplot.setDirty())}switch(y*=f.pixelRatio,v=E[3]-E[1]-(v*=f.pixelRatio),c.fullLayout.dragmode){case"zoom":if(g){var I=y/(E[2]-E[0])*(x[2]-x[0])+x[0],D=v/(E[3]-E[1])*(x[3]-x[1])+x[1];s.boxInited||(s.boxStart[0]=I,s.boxStart[1]=D,s.dragStart[0]=y,s.dragStart[1]=v),s.boxEnd[0]=I,s.boxEnd[1]=D,s.boxInited=!0,s.boxEnabled||s.boxStart[0]===s.boxEnd[0]&&s.boxStart[1]===s.boxEnd[1]||(s.boxEnabled=!0);var R=Math.abs(s.dragStart[0]-y)<P,S=Math.abs(s.dragStart[1]-v)<P;if(!function(){for(var B=c.graphDiv._fullLayout._axisConstraintGroups,H=c.xaxis._id,Y=c.yaxis._id,Q=0;Q<B.length;Q++)if(-1!==B[Q][H]){if(-1!==B[Q][Y])return!0;break}return!1}()||R&&S)R&&(s.boxEnd[0]=s.boxStart[0]),S&&(s.boxEnd[1]=s.boxStart[1]);else{_=s.boxEnd[0]-s.boxStart[0],w=s.boxEnd[1]-s.boxStart[1];var N=(x[3]-x[1])/(x[2]-x[0]);Math.abs(_*N)>Math.abs(w)?(s.boxEnd[1]=s.boxStart[1]+Math.abs(_)*N*(w>=0?1:-1),s.boxEnd[1]<x[1]?(s.boxEnd[1]=x[1],s.boxEnd[0]=s.boxStart[0]+(x[1]-s.boxStart[1])/Math.abs(N)):s.boxEnd[1]>x[3]&&(s.boxEnd[1]=x[3],s.boxEnd[0]=s.boxStart[0]+(x[3]-s.boxStart[1])/Math.abs(N))):(s.boxEnd[0]=s.boxStart[0]+Math.abs(w)/N*(_>=0?1:-1),s.boxEnd[0]<x[0]?(s.boxEnd[0]=x[0],s.boxEnd[1]=s.boxStart[1]+(x[0]-s.boxStart[0])*Math.abs(N)):s.boxEnd[0]>x[2]&&(s.boxEnd[0]=x[2],s.boxEnd[1]=s.boxStart[1]+(x[2]-s.boxStart[0])*Math.abs(N)))}}else s.boxEnabled?(w=s.boxStart[1]!==s.boxEnd[1],(_=s.boxStart[0]!==s.boxEnd[0])||w?(_&&(A(0,s.boxStart[0],s.boxEnd[0]),c.xaxis.autorange=!1),w&&(A(1,s.boxStart[1],s.boxEnd[1]),c.yaxis.autorange=!1),c.relayoutCallback()):c.glplot.setDirty(),s.boxEnabled=!1,s.boxInited=!1):s.boxInited&&(s.boxInited=!1);break;case"pan":s.boxEnabled=!1,s.boxInited=!1,g?(s.panning||(s.dragStart[0]=y,s.dragStart[1]=v),Math.abs(s.dragStart[0]-y)<L&&(y=s.dragStart[0]),Math.abs(s.dragStart[1]-v)<L&&(v=s.dragStart[1]),w=(C-v)*(x[3]-x[1])/(f.viewBox[3]-f.viewBox[1]),x[0]+=_=(k-y)*(x[2]-x[0])/(f.viewBox[2]-f.viewBox[0]),x[2]+=_,x[1]+=w,x[3]+=w,c.setRanges(x),s.panning=!0,s.lastInputTime=Date.now(),o(),c.cameraChanged(),c.handleAnnotations()):s.panning&&(s.panning=!1,c.relayoutCallback())}s.lastPos[0]=y,s.lastPos[1]=v}return s.mouseListener=i(l,d),l.addEventListener("touchstart",function(g){var y=b(g.changedTouches[0],l);d(0,y[0],y[1]),d(1,y[0],y[1]),g.preventDefault()},!!r&&{passive:!1}),l.addEventListener("touchmove",function(g){g.preventDefault();var y=b(g.changedTouches[0],l);d(1,y[0],y[1]),g.preventDefault()},!!r&&{passive:!1}),l.addEventListener("touchend",function(g){d(0,s.lastPos[0],s.lastPos[1]),g.preventDefault()},!!r&&{passive:!1}),s.wheelListener=m(l,function(g,y){if(!c.scrollZoom)return!1;var v=c.calcDataBox(),_=f.viewBox,w=s.lastPos[0],x=s.lastPos[1],E=Math.exp(5*y/(_[3]-_[1])),k=w/(_[2]-_[0])*(v[2]-v[0])+v[0],C=x/(_[3]-_[1])*(v[3]-v[1])+v[1];return v[0]=(v[0]-k)*E+k,v[2]=(v[2]-k)*E+k,v[1]=(v[1]-C)*E+C,v[3]=(v[3]-C)*E+C,c.setRanges(v),s.lastInputTime=Date.now(),o(),c.cameraChanged(),c.handleAnnotations(),c.relayoutCallback(),!0},!0),s}},{"../cartesian/constants":861,"has-passive-events":444,"mouse-change":470,"mouse-event-offset":471,"mouse-wheel":473}],893:[function(h,G,X){"use strict";var i=h("../cartesian/axes"),m=h("../../lib/str2rgbarray");function b(u){this.scene=u,this.gl=u.gl,this.pixelRatio=u.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var p=b.prototype,r=["xaxis","yaxis"];p.merge=function(u){var c,l,f,s,o,d,g,y,v,_,w;for(this.titleEnable=!1,this.backgroundColor=m(u.plot_bgcolor),_=0;_<2;++_){var x=(c=r[_]).charAt(0);for(f=(l=u[this.scene[c]._name]).title.text===this.scene.fullLayout._dfltTitle[x]?"":l.title.text,w=0;w<=2;w+=2)this.labelEnable[_+w]=!1,this.labels[_+w]=f,this.labelColor[_+w]=m(l.title.font.color),this.labelFont[_+w]=l.title.font.family,this.labelSize[_+w]=l.title.font.size,this.labelPad[_+w]=this.getLabelPad(c,l),this.tickEnable[_+w]=!1,this.tickColor[_+w]=m((l.tickfont||{}).color),this.tickAngle[_+w]="auto"===l.tickangle?0:Math.PI*-l.tickangle/180,this.tickPad[_+w]=this.getTickPad(l),this.tickMarkLength[_+w]=0,this.tickMarkWidth[_+w]=l.tickwidth||0,this.tickMarkColor[_+w]=m(l.tickcolor),this.borderLineEnable[_+w]=!1,this.borderLineColor[_+w]=m(l.linecolor),this.borderLineWidth[_+w]=l.linewidth||0;g=this.hasSharedAxis(l),o=this.hasAxisInDfltPos(c,l)&&!g,d=this.hasAxisInAltrPos(c,l)&&!g,s=l.mirror||!1,y=g?-1!==String(s).indexOf("all"):!!s,v=g?"allticks"===s:-1!==String(s).indexOf("ticks"),o?this.labelEnable[_]=!0:d&&(this.labelEnable[_+2]=!0),o?this.tickEnable[_]=l.showticklabels:d&&(this.tickEnable[_+2]=l.showticklabels),(o||y)&&(this.borderLineEnable[_]=l.showline),(d||y)&&(this.borderLineEnable[_+2]=l.showline),(o||v)&&(this.tickMarkLength[_]=this.getTickMarkLength(l)),(d||v)&&(this.tickMarkLength[_+2]=this.getTickMarkLength(l)),this.gridLineEnable[_]=l.showgrid,this.gridLineColor[_]=m(l.gridcolor),this.gridLineWidth[_]=l.gridwidth,this.zeroLineEnable[_]=l.zeroline,this.zeroLineColor[_]=m(l.zerolinecolor),this.zeroLineWidth[_]=l.zerolinewidth}},p.hasSharedAxis=function(u){var c=this.scene;return 0!==i.findSubplotsWithAxis(c.fullLayout._subplots.gl2d,u).indexOf(c.id)},p.hasAxisInDfltPos=function(u,c){var l=c.side;return"xaxis"===u?"bottom"===l:"yaxis"===u?"left"===l:void 0},p.hasAxisInAltrPos=function(u,c){var l=c.side;return"xaxis"===u?"top"===l:"yaxis"===u?"right"===l:void 0},p.getLabelPad=function(u,c){var l=c.title.font.size,f=c.showticklabels;return"xaxis"===u?"top"===c.side?l*(1.5+(f?1:0))-10:l*(1.5+(f?.5:0))-10:"yaxis"===u?"right"===c.side?10+l*(1.5+(f?1:.5)):10+l*(1.5+(f?.5:0)):void 0},p.getTickPad=function(u){return"outside"===u.ticks?10+u.ticklen:15},p.getTickMarkLength=function(u){if(!u.ticks)return 0;var c=u.ticklen;return"inside"===u.ticks?-c:c},G.exports=function(u){return new b(u)}},{"../../lib/str2rgbarray":828,"../cartesian/axes":854}],894:[function(h,G,X){"use strict";var i=h("../../plot_api/edit_types").overrideAll,m=h("./scene2d"),b=h("../layout_attributes"),p=h("../../constants/xmlns_namespaces"),r=h("../cartesian/constants"),u=h("../cartesian"),c=h("../../components/fx/layout_attributes"),l=h("../get_data").getSubplotData;X.name="gl2d",X.attr=["xaxis","yaxis"],X.idRoot=["x","y"],X.idRegex=r.idRegex,X.attrRegex=r.attrRegex,X.attributes=h("../cartesian/attributes"),X.supplyLayoutDefaults=function(f,s,o){s._has("cartesian")||u.supplyLayoutDefaults(f,s,o)},X.layoutAttrOverrides=i(u.layoutAttributes,"plot","from-root"),X.baseLayoutAttrOverrides=i({plot_bgcolor:b.plot_bgcolor,hoverlabel:c.hoverlabel},"plot","nested"),X.plot=function(f){for(var s=f._fullLayout,o=f._fullData,d=s._subplots.gl2d,g=0;g<d.length;g++){var y=d[g],v=s._plots[y],_=l(o,"gl2d",y),w=v._scene2d;void 0===w&&(w=new m({id:y,graphDiv:f,container:f.querySelector(".gl-container"),staticPlot:f._context.staticPlot,plotGlPixelRatio:f._context.plotGlPixelRatio},s),v._scene2d=w),w.plot(_,f.calcdata,s,f.layout)}},X.clean=function(f,s,o,d){for(var g=d._subplots.gl2d||[],y=0;y<g.length;y++){var v=g[y],_=d._plots[v];_._scene2d&&0===l(f,"gl2d",v).length&&(_._scene2d.destroy(),delete d._plots[v])}u.clean.apply(this,arguments)},X.drawFramework=function(f){f._context.staticPlot||u.drawFramework(f)},X.toSVG=function(f){for(var s=f._fullLayout,o=s._subplots.gl2d,d=0;d<o.length;d++){var g=s._plots[o[d]]._scene2d,y=g.toImage("png");s._glimages.append("svg:image").attr({xmlns:p.svg,"xlink:href":y,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),g.destroy()}},X.updateFx=function(f){for(var s=f._fullLayout,o=s._subplots.gl2d,d=0;d<o.length;d++)s._plots[o[d]]._scene2d.updateFx(s.dragmode)}},{"../../components/fx/layout_attributes":707,"../../constants/xmlns_namespaces":780,"../../plot_api/edit_types":836,"../cartesian":868,"../cartesian/attributes":852,"../cartesian/constants":861,"../get_data":891,"../layout_attributes":908,"./scene2d":895}],895:[function(h,G,X){"use strict";var i,m,b=h("../../registry"),p=h("../../plots/cartesian/axes"),r=h("../../components/fx"),u=h("gl-plot2d"),c=h("gl-spikes2d"),l=h("gl-select-box"),f=h("webgl-context"),s=h("./convert"),o=h("./camera"),d=h("../../lib/show_no_webgl_msg"),g=h("../cartesian/constraints"),y=g.enforce,v=g.clean,_=h("../cartesian/autorange").doAutoRange,w=h("../../components/dragelement/helpers"),x=w.drawMode,E=w.selectMode,k=["xaxis","yaxis"],C=h("../cartesian/constants").SUBPLOT_PATTERN;function L(A,I){this.container=A.container,this.graphDiv=A.graphDiv,this.pixelRatio=A.plotGlPixelRatio||window.devicePixelRatio,this.id=A.id,this.staticPlot=!!A.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(I),this.makeFramework(),this.stopped||(this.glplotOptions=s(this),this.glplotOptions.merge(I),this.glplot=u(this.glplotOptions),this.camera=o(this),this.traces={},this.spikes=c(this.glplot),this.selectBox=l(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}G.exports=L;var P=L.prototype;P.makeFramework=function(){if(this.staticPlot){if(!(m||(i=document.createElement("canvas"),m=f({canvas:i,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=i,this.gl=m}else{var A=this.container.querySelector(".gl-canvas-focus"),I=f({canvas:A,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!I)return d(this),void(this.stopped=!0);this.canvas=A,this.gl=I}var D=this.canvas;D.style.width="100%",D.style.height="100%",D.style.position="absolute",D.style.top="0px",D.style.left="0px",D.style["pointer-events"]="none",this.updateSize(D);var R=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none";var S=this.mouseContainer=document.createElement("div");S.style.position="absolute",S.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var N=this.container;N.appendChild(R),N.appendChild(S);var B=this;S.addEventListener("mouseout",function(){B.isMouseOver=!1,B.unhover()}),S.addEventListener("mouseover",function(){B.isMouseOver=!0})},P.toImage=function(A){A||(A="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(i),this.updateSize(this.canvas);var I=this.glplot.gl,D=I.drawingBufferWidth,R=I.drawingBufferHeight;I.clearColor(1,1,1,0),I.clear(I.COLOR_BUFFER_BIT|I.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),I.bindFramebuffer(I.FRAMEBUFFER,null);var S=new Uint8Array(D*R*4);I.readPixels(0,0,D,R,I.RGBA,I.UNSIGNED_BYTE,S);for(var N=0,B=R-1;N<B;++N,--B)for(var H=0;H<D;++H)for(var Y=0;Y<4;++Y){var Q=S[4*(D*N+H)+Y];S[4*(D*N+H)+Y]=S[4*(D*B+H)+Y],S[4*(D*B+H)+Y]=Q}var ne=document.createElement("canvas");ne.width=D,ne.height=R;var ae,te=ne.getContext("2d"),K=te.createImageData(D,R);switch(K.data.set(S),te.putImageData(K,0,0),A){case"jpeg":ae=ne.toDataURL("image/jpeg");break;case"webp":ae=ne.toDataURL("image/webp");break;default:ae=ne.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(i),ae},P.updateSize=function(A){A||(A=this.canvas);var I=this.pixelRatio,D=this.fullLayout,S=D.height,N=0|Math.ceil(I*D.width),B=0|Math.ceil(I*S);return A.width===N&&A.height===B||(A.width=N,A.height=B),A},P.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var A=[p.calcTicks(this.xaxis),p.calcTicks(this.yaxis)],I=0;I<2;++I)for(var D=0;D<A[I].length;++D)A[I][D].text=A[I][D].text+"";return A},P.updateRefs=function(A){this.fullLayout=A;var I=this.id.match(C),R="yaxis"+I[2];this.xaxis=this.fullLayout["xaxis"+I[1]],this.yaxis=this.fullLayout[R]},P.relayoutCallback=function(){var A=this.graphDiv,I=this.xaxis,D=this.yaxis,R=A.layout,S={},N=S[I._name+".range"]=I.range.slice(),B=S[D._name+".range"]=D.range.slice();S[I._name+".autorange"]=I.autorange,S[D._name+".autorange"]=D.autorange,b.call("_storeDirectGUIEdit",A.layout,A._fullLayout._preGUI,S);var H=R[I._name];H.range=N,H.autorange=I.autorange;var Y=R[D._name];Y.range=B,Y.autorange=D.autorange,S.lastInputTime=this.camera.lastInputTime,A.emit("plotly_relayout",S)},P.cameraChanged=function(){var A=this.camera;this.glplot.setDataBox(this.calcDataBox());var I=this.computeTickMarks();(function(D,R){for(var S=0;S<2;++S){var N=D[S],B=R[S];if(N.length!==B.length)return!0;for(var H=0;H<N.length;++H)if(N[H].x!==B[H].x)return!0}return!1})(I,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=I,this.glplotOptions.dataBox=A.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},P.handleAnnotations=function(){for(var A=this.graphDiv,I=this.fullLayout.annotations,D=0;D<I.length;D++){var R=I[D];R.xref===this.xaxis._id&&R.yref===this.yaxis._id&&b.getComponentMethod("annotations","drawOne")(A,D)}},P.destroy=function(){if(this.glplot){var A=this.traces;A&&Object.keys(A).map(function(I){A[I].dispose(),delete A[I]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},P.plot=function(A,I,D){var R=this.glplot;this.updateRefs(D),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(A,I),this.updateFx(D.dragmode);var S=D.width,N=D.height;this.updateSize(this.canvas);var B=this.glplotOptions;B.merge(D),B.screenBox=[0,0,S,N];var H={_fullLayout:{_axisConstraintGroups:D._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:D._size}};v(H,this.xaxis),v(H,this.yaxis);var Y,Q,ne=D._size,ae=this.xaxis.domain,te=this.yaxis.domain;for(B.viewBox=[ne.l+ae[0]*ne.w,ne.b+te[0]*ne.h,S-ne.r-(1-ae[1])*ne.w,N-ne.t-(1-te[1])*ne.h],this.mouseContainer.style.width=ne.w*(ae[1]-ae[0])+"px",this.mouseContainer.style.height=ne.h*(te[1]-te[0])+"px",this.mouseContainer.height=ne.h*(te[1]-te[0]),this.mouseContainer.style.left=ne.l+ae[0]*ne.w+"px",this.mouseContainer.style.top=ne.t+(1-te[1])*ne.h+"px",Q=0;Q<2;++Q)(Y=this[k[Q]])._length=B.viewBox[Q+2]-B.viewBox[Q],_(this.graphDiv,Y),Y.setScale();y(H),B.ticks=this.computeTickMarks(),B.dataBox=this.calcDataBox(),B.merge(D),R.update(B),this.glplot.draw()},P.calcDataBox=function(){var A=this.xaxis,I=this.yaxis,D=A.range,R=I.range,S=A.r2l,N=I.r2l;return[S(D[0]),N(R[0]),S(D[1]),N(R[1])]},P.setRanges=function(A){var I=this.xaxis,D=this.yaxis,R=I.l2r,S=D.l2r;I.range=[R(A[0]),R(A[2])],D.range=[S(A[1]),S(A[3])]},P.updateTraces=function(A,I){var D,R,S,N=Object.keys(this.traces);this.fullData=A;e:for(D=0;D<N.length;D++){var B=N[D],H=this.traces[B];for(R=0;R<A.length;R++)if((S=A[R]).uid===B&&S.type===H.type)continue e;H.dispose(),delete this.traces[B]}for(D=0;D<A.length;D++){var Y=I[D],Q=this.traces[(S=A[D]).uid];Q?Q.update(S,Y):(Q=S._module.plot(this,S,Y),this.traces[S.uid]=Q)}this.glplot.objects.sort(function(ne,ae){return ne._trace.index-ae._trace.index})},P.updateFx=function(A){E(A)||x(A)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===A?"move":"zoom"===A?"crosshair":null},P.emitPointAction=function(A,I){for(var D,R=A.trace.uid,S=A.pointIndex,N=0;N<this.fullData.length;N++)this.fullData[N].uid===R&&(D=this.fullData[N]);var B={x:A.traceCoord[0],y:A.traceCoord[1],curveNumber:D.index,pointNumber:S,data:D._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};r.appendArrayPointValue(B,D,S),this.graphDiv.emit(I,{points:[B]})},P.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var A=this.glplot,I=this.camera,D=I.mouseListener,R=1===this.lastButtonState&&0===D.buttons,S=this.fullLayout;this.lastButtonState=D.buttons,this.cameraChanged();var N,B=D.x*A.pixelRatio,H=this.canvas.height-A.pixelRatio*D.y;if(I.boxEnabled&&"zoom"===S.dragmode){this.selectBox.enabled=!0;for(var Y=this.selectBox.selectBox=[Math.min(I.boxStart[0],I.boxEnd[0]),Math.min(I.boxStart[1],I.boxEnd[1]),Math.max(I.boxStart[0],I.boxEnd[0]),Math.max(I.boxStart[1],I.boxEnd[1])],Q=0;Q<2;Q++)I.boxStart[Q]===I.boxEnd[Q]&&(Y[Q]=A.dataBox[Q],Y[Q+2]=A.dataBox[Q+2]);A.setDirty()}else if(!I.panning&&this.isMouseOver){this.selectBox.enabled=!1;var ne=S._size,K=(N=A.pick(B/A.pixelRatio+ne.l+this.xaxis.domain[0]*ne.w,H/A.pixelRatio-(ne.t+(1-this.yaxis.domain[1])*ne.h)))&&N.object._trace.handlePick(N);if(K&&R&&this.emitPointAction(K,"plotly_click"),N&&"skip"!==N.object._trace.hoverinfo&&S.hovermode&&K&&(!this.lastPickResult||this.lastPickResult.traceUid!==K.trace.uid||this.lastPickResult.dataCoord[0]!==K.dataCoord[0]||this.lastPickResult.dataCoord[1]!==K.dataCoord[1])){var q=K;this.lastPickResult={traceUid:K.trace?K.trace.uid:null,dataCoord:K.dataCoord.slice()},this.spikes.update({center:N.dataCoord}),q.screenCoord=[((A.viewBox[2]-A.viewBox[0])*(N.dataCoord[0]-A.dataBox[0])/(A.dataBox[2]-A.dataBox[0])+A.viewBox[0])/A.pixelRatio,(this.canvas.height-(A.viewBox[3]-A.viewBox[1])*(N.dataCoord[1]-A.dataBox[1])/(A.dataBox[3]-A.dataBox[1])-A.viewBox[1])/A.pixelRatio],this.emitPointAction(K,"plotly_hover");var re=this.fullData[q.trace.index]||{},V=q.pointIndex,W=r.castHoverinfo(re,S,V);if(W&&"all"!==W){var Z=W.split("+");-1===Z.indexOf("x")&&(q.traceCoord[0]=void 0),-1===Z.indexOf("y")&&(q.traceCoord[1]=void 0),-1===Z.indexOf("z")&&(q.traceCoord[2]=void 0),-1===Z.indexOf("text")&&(q.textLabel=void 0),-1===Z.indexOf("name")&&(q.name=void 0)}r.loneHover({x:q.screenCoord[0],y:q.screenCoord[1],xLabel:this.hoverFormatter("xaxis",q.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",q.traceCoord[1]),zLabel:q.traceCoord[2],text:q.textLabel,name:q.name,color:r.castHoverOption(re,V,"bgcolor")||q.color,borderColor:r.castHoverOption(re,V,"bordercolor"),fontFamily:r.castHoverOption(re,V,"font.family"),fontSize:r.castHoverOption(re,V,"font.size"),fontColor:r.castHoverOption(re,V,"font.color"),nameLength:r.castHoverOption(re,V,"namelength"),textAlign:r.castHoverOption(re,V,"align")},{container:this.svgContainer,gd:this.graphDiv})}}N||this.unhover(),A.draw()}},P.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),r.loneUnhover(this.svgContainer))},P.hoverFormatter=function(A,I){if(void 0!==I){var D=this[A];return p.tickText(D,D.c2l(I),"hover").text}}},{"../../components/dragelement/helpers":684,"../../components/fx":706,"../../lib/show_no_webgl_msg":825,"../../plots/cartesian/axes":854,"../../registry":931,"../cartesian/autorange":853,"../cartesian/constants":861,"../cartesian/constraints":862,"./camera":892,"./convert":893,"gl-plot2d":322,"gl-select-box":337,"gl-spikes2d":346,"webgl-context":629}],896:[function(h,G,X){"use strict";var i=h("../../plot_api/edit_types").overrideAll,m=h("../../components/fx/layout_attributes"),b=h("./scene"),p=h("../get_data").getSubplotData,r=h("../../lib"),u=h("../../constants/xmlns_namespaces");X.name="gl3d",X.attr="scene",X.idRoot="scene",X.idRegex=X.attrRegex=r.counterRegex("scene"),X.attributes=h("./layout/attributes"),X.layoutAttributes=h("./layout/layout_attributes"),X.baseLayoutAttrOverrides=i({hoverlabel:m.hoverlabel},"plot","nested"),X.supplyLayoutDefaults=h("./layout/defaults"),X.plot=function(c){for(var l=c._fullLayout,f=c._fullData,s=l._subplots.gl3d,o=0;o<s.length;o++){var d=s[o],g=p(f,"gl3d",d),y=l[d],v=y.camera,_=y._scene;_||(_=new b({id:d,graphDiv:c,container:c.querySelector(".gl-container"),staticPlot:c._context.staticPlot,plotGlPixelRatio:c._context.plotGlPixelRatio,camera:v},l),y._scene=_),_.viewInitial||(_.viewInitial={up:{x:v.up.x,y:v.up.y,z:v.up.z},eye:{x:v.eye.x,y:v.eye.y,z:v.eye.z},center:{x:v.center.x,y:v.center.y,z:v.center.z}}),_.plot(g,l,c.layout)}},X.clean=function(c,l,f,s){for(var o=s._subplots.gl3d||[],d=0;d<o.length;d++){var g=o[d];!l[g]&&s[g]._scene&&(s[g]._scene.destroy(),s._infolayer&&s._infolayer.selectAll(".annotation-"+g).remove())}},X.toSVG=function(c){for(var l=c._fullLayout,f=l._subplots.gl3d,s=l._size,o=0;o<f.length;o++){var d=l[f[o]],g=d.domain,y=d._scene,v=y.toImage("png");l._glimages.append("svg:image").attr({xmlns:u.svg,"xlink:href":v,x:s.l+s.w*g.x[0],y:s.t+s.h*(1-g.y[1]),width:s.w*(g.x[1]-g.x[0]),height:s.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"}),y.destroy()}},X.cleanId=function(c){if(c.match(/^scene[0-9]*$/)){var l=c.substr(5);return"1"===l&&(l=""),"scene"+l}},X.updateFx=function(c){for(var l=c._fullLayout,f=l._subplots.gl3d,s=0;s<f.length;s++)l[f[s]]._scene.updateFx(l.dragmode,l.hovermode)}},{"../../components/fx/layout_attributes":707,"../../constants/xmlns_namespaces":780,"../../lib":803,"../../plot_api/edit_types":836,"../get_data":891,"./layout/attributes":897,"./layout/defaults":901,"./layout/layout_attributes":902,"./scene":906}],897:[function(h,G,X){"use strict";G.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],898:[function(h,G,X){"use strict";var i=h("../../../components/color"),m=h("../../cartesian/layout_attributes"),b=h("../../../lib/extend").extendFlat,p=h("../../../plot_api/edit_types").overrideAll;G.exports=p({visible:m.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:i.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:m.color,categoryorder:m.categoryorder,categoryarray:m.categoryarray,title:{text:m.title.text,font:m.title.font},type:b({},m.type,{values:["-","linear","log","date","category"]}),autotypenumbers:m.autotypenumbers,autorange:m.autorange,rangemode:m.rangemode,range:b({},m.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,mirror:m.mirror,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,showticklabels:m.showticklabels,tickfont:m.tickfont,tickangle:m.tickangle,tickprefix:m.tickprefix,showtickprefix:m.showtickprefix,ticksuffix:m.ticksuffix,showticksuffix:m.showticksuffix,showexponent:m.showexponent,exponentformat:m.exponentformat,minexponent:m.minexponent,separatethousands:m.separatethousands,tickformat:m.tickformat,tickformatstops:m.tickformatstops,hoverformat:m.hoverformat,showline:m.showline,linecolor:m.linecolor,linewidth:m.linewidth,showgrid:m.showgrid,gridcolor:b({},m.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:m.gridwidth,zeroline:m.zeroline,zerolinecolor:m.zerolinecolor,zerolinewidth:m.zerolinewidth,_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":666,"../../../lib/extend":793,"../../../plot_api/edit_types":836,"../../cartesian/layout_attributes":869}],899:[function(h,G,X){"use strict";var i=h("tinycolor2").mix,m=h("../../../lib"),b=h("../../../plot_api/plot_template"),p=h("./axis_attributes"),r=h("../../cartesian/type_defaults"),u=h("../../cartesian/axis_defaults"),c=["xaxis","yaxis","zaxis"];G.exports=function(l,f,s){var o,d;function g(_,w){return m.coerce(o,d,p,_,w)}for(var y=0;y<c.length;y++){var v=c[y];o=l[v]||{},(d=b.newContainer(f,v))._id=v[0]+s.scene,d._name=v,r(o,d,g,s),u(o,d,g,{font:s.font,letter:v[0],data:s.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:s.bgColor,calendar:s.calendar},s.fullLayout),g("gridcolor",i(d.color,s.bgColor,13600/187).toRgbString()),g("title.text",v[0]),d.setScale=m.noop,g("showspikes")&&(g("spikesides"),g("spikethickness"),g("spikecolor",d.color)),g("showaxeslabels"),g("showbackground")&&g("backgroundcolor")}}},{"../../../lib":803,"../../../plot_api/plot_template":843,"../../cartesian/axis_defaults":856,"../../cartesian/type_defaults":880,"./axis_attributes":898,tinycolor2:598}],900:[function(h,G,X){"use strict";var i=h("../../../lib/str2rgbarray"),m=h("../../../lib"),b=["xaxis","yaxis","zaxis"];function p(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}p.prototype.merge=function(r,u){for(var c=0;c<3;++c){var l=u[b[c]];l.visible?(this.labels[c]=r._meta?m.templateString(l.title.text,r._meta):l.title.text,"font"in l.title&&(l.title.font.color&&(this.labelColor[c]=i(l.title.font.color)),l.title.font.family&&(this.labelFont[c]=l.title.font.family),l.title.font.size&&(this.labelSize[c]=l.title.font.size)),"showline"in l&&(this.lineEnable[c]=l.showline),"linecolor"in l&&(this.lineColor[c]=i(l.linecolor)),"linewidth"in l&&(this.lineWidth[c]=l.linewidth),"showgrid"in l&&(this.gridEnable[c]=l.showgrid),"gridcolor"in l&&(this.gridColor[c]=i(l.gridcolor)),"gridwidth"in l&&(this.gridWidth[c]=l.gridwidth),"log"===l.type?this.zeroEnable[c]=!1:"zeroline"in l&&(this.zeroEnable[c]=l.zeroline),"zerolinecolor"in l&&(this.zeroLineColor[c]=i(l.zerolinecolor)),"zerolinewidth"in l&&(this.zeroLineWidth[c]=l.zerolinewidth),this.lineTickEnable[c]=!(!("ticks"in l)||!l.ticks),"ticklen"in l&&(this.lineTickLength[c]=this._defaultLineTickLength[c]=l.ticklen),"tickcolor"in l&&(this.lineTickColor[c]=i(l.tickcolor)),"tickwidth"in l&&(this.lineTickWidth[c]=l.tickwidth),"tickangle"in l&&(this.tickAngle[c]="auto"===l.tickangle?-3600:Math.PI*-l.tickangle/180),"showticklabels"in l&&(this.tickEnable[c]=l.showticklabels),"tickfont"in l&&(l.tickfont.color&&(this.tickColor[c]=i(l.tickfont.color)),l.tickfont.family&&(this.tickFont[c]=l.tickfont.family),l.tickfont.size&&(this.tickSize[c]=l.tickfont.size)),"mirror"in l?-1!==["ticks","all","allticks"].indexOf(l.mirror)?(this.lineTickMirror[c]=!0,this.lineMirror[c]=!0):!0===l.mirror?(this.lineTickMirror[c]=!1,this.lineMirror[c]=!0):(this.lineTickMirror[c]=!1,this.lineMirror[c]=!1):this.lineMirror[c]=!1,"showbackground"in l&&!1!==l.showbackground?(this.backgroundEnable[c]=!0,this.backgroundColor[c]=i(l.backgroundcolor)):this.backgroundEnable[c]=!1):(this.tickEnable[c]=!1,this.labelEnable[c]=!1,this.lineEnable[c]=!1,this.lineTickEnable[c]=!1,this.gridEnable[c]=!1,this.zeroEnable[c]=!1,this.backgroundEnable[c]=!1)}},G.exports=function(r,u){var c=new p;return c.merge(r,u),c}},{"../../../lib":803,"../../../lib/str2rgbarray":828}],901:[function(h,G,X){"use strict";var i=h("../../../lib"),m=h("../../../components/color"),b=h("../../../registry"),p=h("../../subplot_defaults"),r=h("./axis_defaults"),u=h("./layout_attributes"),c=h("../../get_data").getSubplotData;function l(f,s,o,d){for(var g=o("bgcolor"),y=m.combine(g,d.paper_bgcolor),v=["up","center","eye"],_=0;_<v.length;_++)o("camera."+v[_]+".x"),o("camera."+v[_]+".y"),o("camera."+v[_]+".z");o("camera.projection.type");var w=!!o("aspectratio.x")&&!!o("aspectratio.y")&&!!o("aspectratio.z"),x=o("aspectmode",w?"manual":"auto");w||(f.aspectratio=s.aspectratio={x:1,y:1,z:1},"manual"===x&&(s.aspectmode="auto"),f.aspectmode=s.aspectmode);var E=c(d.fullData,"gl3d",d.id);r(f,s,{font:d.font,scene:d.id,data:E,bgColor:y,calendar:d.calendar,autotypenumbersDflt:d.autotypenumbersDflt,fullLayout:d.fullLayout}),b.getComponentMethod("annotations3d","handleDefaults")(f,s,d);var k=d.getDfltFromLayout("dragmode");if(!1!==k&&!k)if(k="orbit",f.camera&&f.camera.up){var C=f.camera.up.x,L=f.camera.up.y,P=f.camera.up.z;0!==P&&(C&&L&&P?P/Math.sqrt(C*C+L*L+P*P)>.999&&(k="turntable"):k="turntable")}else k="turntable";o("dragmode",k),o("hovermode",d.getDfltFromLayout("hovermode"))}G.exports=function(f,s,o){var d=s._basePlotModules.length>1;p(f,s,o,{type:"gl3d",attributes:u,handleDefaults:l,fullLayout:s,font:s.font,fullData:o,getDfltFromLayout:function(g){if(!d)return i.validate(f[g],u[g])?f[g]:void 0},autotypenumbersDflt:s.autotypenumbers,paper_bgcolor:s.paper_bgcolor,calendar:s.calendar})}},{"../../../components/color":666,"../../../lib":803,"../../../registry":931,"../../get_data":891,"../../subplot_defaults":925,"./axis_defaults":899,"./layout_attributes":902}],902:[function(h,G,X){"use strict";var i=h("./axis_attributes"),m=h("../../domain").attributes,b=h("../../../lib/extend").extendFlat,p=h("../../../lib").counterRegex;function r(u,c,l){return{x:{valType:"number",dflt:u,editType:"camera"},y:{valType:"number",dflt:c,editType:"camera"},z:{valType:"number",dflt:l,editType:"camera"},editType:"camera"}}G.exports={_arrayAttrRegexps:[p("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:b(r(0,0,1),{}),center:b(r(0,0,0),{}),eye:b(r(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:m({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:i,yaxis:i,zaxis:i,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":803,"../../../lib/extend":793,"../../domain":882,"./axis_attributes":898}],903:[function(h,G,X){"use strict";var i=h("../../../lib/str2rgbarray"),m=["xaxis","yaxis","zaxis"];function b(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}b.prototype.merge=function(p){for(var r=0;r<3;++r){var u=p[m[r]];u.visible?(this.enabled[r]=u.showspikes,this.colors[r]=i(u.spikecolor),this.drawSides[r]=u.spikesides,this.lineWidth[r]=u.spikethickness):(this.enabled[r]=!1,this.drawSides[r]=!1)}},G.exports=function(p){var r=new b;return r.merge(p),r}},{"../../../lib/str2rgbarray":828}],904:[function(h,G,X){"use strict";G.exports=function(r){for(var u=r.axesOptions,c=r.glplot.axesPixels,l=r.fullSceneLayout,f=[[],[],[]],s=0;s<3;++s){var o=l[b[s]];if(o._length=(c[s].hi-c[s].lo)*c[s].pixelsPerDataUnit/r.dataScale[s],Math.abs(o._length)===1/0||isNaN(o._length))f[s]=[];else{o._input_range=o.range.slice(),o.range[0]=c[s].lo/r.dataScale[s],o.range[1]=c[s].hi/r.dataScale[s],o._m=1/(r.dataScale[s]*c[s].pixelsPerDataUnit),o.range[0]===o.range[1]&&(o.range[0]-=1,o.range[1]+=1);var d=o.tickmode;if("auto"===o.tickmode){o.tickmode="linear";var g=o.nticks||m.constrain(o._length/40,4,9);i.autoTicks(o,Math.abs(o.range[1]-o.range[0])/g)}for(var y=i.calcTicks(o,{msUTC:!0}),v=0;v<y.length;++v)y[v].x=y[v].x*r.dataScale[s],"date"===o.type&&(y[v].text=y[v].text.replace(/\<br\>/g," "));f[s]=y,o.tickmode=d}}for(u.ticks=f,s=0;s<3;++s)for(p[s]=.5*(r.glplot.bounds[0][s]+r.glplot.bounds[1][s]),v=0;v<2;++v)u.bounds[v][s]=r.glplot.bounds[v][s];r.contourLevels=function(_){for(var w=new Array(3),x=0;x<3;++x){for(var E=_[x],k=new Array(E.length),C=0;C<E.length;++C)k[C]=E[C].x;w[x]=k}return w}(f)};var i=h("../../cartesian/axes"),m=h("../../../lib"),b=["xaxis","yaxis","zaxis"],p=[0,0,0]},{"../../../lib":803,"../../cartesian/axes":854}],905:[function(h,G,X){"use strict";function i(m,b){var p,r,u=[0,0,0,0];for(p=0;p<4;++p)for(r=0;r<4;++r)u[r]+=m[4*p+r]*b[p];return u}G.exports=function(m,b){return i(m.projection,i(m.view,i(m.model,[b[0],b[1],b[2],1])))}},{}],906:[function(h,G,X){"use strict";var i,m,b=h("gl-plot3d"),p=b.createCamera,r=b.createScene,u=h("webgl-context"),c=h("has-passive-events"),l=h("../../registry"),f=h("../../lib"),s=f.preserveDrawingBuffer(),o=h("../../plots/cartesian/axes"),d=h("../../components/fx"),g=h("../../lib/str2rgbarray"),y=h("../../lib/show_no_webgl_msg"),v=h("./project"),_=h("./layout/convert"),w=h("./layout/spikes"),x=h("./layout/tick_marks");function E(A,I){var D=document.createElement("div"),R=A.container;this.graphDiv=A.graphDiv;var S=document.createElementNS("http://www.w3.org/2000/svg","svg");S.style.position="absolute",S.style.top=S.style.left="0px",S.style.width=S.style.height="100%",S.style["z-index"]=20,S.style["pointer-events"]="none",D.appendChild(S),this.svgContainer=S,D.id=A.id,D.style.position="absolute",D.style.top=D.style.left="0px",D.style.width=D.style.height="100%",R.appendChild(D),this.fullLayout=I,this.id=A.id||"scene",this.fullSceneLayout=I[this.id],this.plotArgs=[[],{},{}],this.axesOptions=_(I,I[this.id]),this.spikeOptions=w(I[this.id]),this.container=D,this.staticMode=!!A.staticPlot,this.pixelRatio=this.pixelRatio||A.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=l.getComponentMethod("annotations3d","convert"),this.drawAnnotations=l.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var k=E.prototype;k.prepareOptions=function(){var A={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:s,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(m||(i=document.createElement("canvas"),m=u({canvas:i,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");A.gl=m,A.canvas=i}return A};var C=!0;k.tryCreatePlot=function(){var A=this.prepareOptions(),I=!0;try{this.glplot=r(A)}catch(D){if(this.staticMode||!C||s)I=!1;else{f.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{s=A.glOptions.preserveDrawingBuffer=!0,this.glplot=r(A)}catch(R){s=A.glOptions.preserveDrawingBuffer=!1,I=!1}}}return C=!1,I},k.initializeGLCamera=function(){var A=this.fullSceneLayout.camera;this.camera=p(this.container,{center:[A.center.x,A.center.y,A.center.z],eye:[A.eye.x,A.eye.y,A.eye.z],up:[A.up.x,A.up.y,A.up.z],_ortho:"orthographic"===A.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},k.initializeGLPlot=function(){var A=this;if(A.initializeGLCamera(),!A.tryCreatePlot())return y(A);A.traces={},A.make4thDimension();var I=A.graphDiv,D=I.layout,R=function(){var N={};return A.isCameraChanged(D)&&(N[A.id+".camera"]=A.getCamera()),A.isAspectChanged(D)&&(N[A.id+".aspectratio"]=A.glplot.getAspectratio(),"manual"!==D[A.id].aspectmode&&(A.fullSceneLayout.aspectmode=D[A.id].aspectmode=N[A.id+".aspectmode"]="manual")),N},S=function(N){if(!1!==N.fullSceneLayout.dragmode){var B=R();N.saveLayout(D),N.graphDiv.emit("plotly_relayout",B)}};return A.glplot.canvas&&(A.glplot.canvas.addEventListener("mouseup",function(){S(A)}),A.glplot.canvas.addEventListener("wheel",function(N){if(I._context._scrollZoom.gl3d){if(A.camera._ortho){var B=N.deltaX>N.deltaY?1.1:1/1.1,H=A.glplot.getAspectratio();A.glplot.setAspectratio({x:B*H.x,y:B*H.y,z:B*H.z})}S(A)}},!!c&&{passive:!1}),A.glplot.canvas.addEventListener("mousemove",function(){if(!1!==A.fullSceneLayout.dragmode&&0!==A.camera.mouseListener.buttons){var N=R();A.graphDiv.emit("plotly_relayouting",N)}}),A.staticMode||A.glplot.canvas.addEventListener("webglcontextlost",function(N){I&&I.emit&&I.emit("plotly_webglcontextlost",{event:N,layer:A.id})},!1)),A.glplot.oncontextloss=function(){A.recoverContext()},A.glplot.onrender=function(){A.render()},!0},k.render=function(){var A,I=this,D=I.graphDiv,R=I.svgContainer,S=I.container.getBoundingClientRect();D._fullLayout._calcInverseTransform(D);var H=S.width*D._fullLayout._invScaleX,Y=S.height*D._fullLayout._invScaleY;R.setAttributeNS(null,"viewBox","0 0 "+H+" "+Y),R.setAttributeNS(null,"width",H),R.setAttributeNS(null,"height",Y),x(I),I.glplot.axes.update(I.axesOptions);for(var Q,ne=Object.keys(I.traces),ae=null,te=I.glplot.selection,K=0;K<ne.length;++K)"skip"!==(A=I.traces[ne[K]]).data.hoverinfo&&A.handlePick(te)&&(ae=A),A.setContourLevels&&A.setContourLevels();function q(pe,Te,ye){var ke=I.fullSceneLayout[pe+"axis"];return"log"!==ke.type&&(Te=ke.d2l(Te)),o.hoverLabelText(ke,Te,ye)}if(null!==ae){var V,re=v(I.glplot.cameraParams,te.dataCoordinate),W=D._fullData[(A=ae.data).index],Z=te.index,oe={xLabel:q("x",te.traceCoordinate[0],A.xhoverformat),yLabel:q("y",te.traceCoordinate[1],A.yhoverformat),zLabel:q("z",te.traceCoordinate[2],A.zhoverformat)},ie=d.castHoverinfo(W,I.fullLayout,Z),ue=(ie||"").split("+"),fe=ie&&"all"===ie;W.hovertemplate||fe||(-1===ue.indexOf("x")&&(oe.xLabel=void 0),-1===ue.indexOf("y")&&(oe.yLabel=void 0),-1===ue.indexOf("z")&&(oe.zLabel=void 0),-1===ue.indexOf("text")&&(te.textLabel=void 0),-1===ue.indexOf("name")&&(ae.name=void 0));var he=[];"cone"===A.type||"streamtube"===A.type?(oe.uLabel=q("x",te.traceCoordinate[3],A.uhoverformat),(fe||-1!==ue.indexOf("u"))&&he.push("u: "+oe.uLabel),oe.vLabel=q("y",te.traceCoordinate[4],A.vhoverformat),(fe||-1!==ue.indexOf("v"))&&he.push("v: "+oe.vLabel),oe.wLabel=q("z",te.traceCoordinate[5],A.whoverformat),(fe||-1!==ue.indexOf("w"))&&he.push("w: "+oe.wLabel),oe.normLabel=te.traceCoordinate[6].toPrecision(3),(fe||-1!==ue.indexOf("norm"))&&he.push("norm: "+oe.normLabel),"streamtube"===A.type&&(oe.divergenceLabel=te.traceCoordinate[7].toPrecision(3),(fe||-1!==ue.indexOf("divergence"))&&he.push("divergence: "+oe.divergenceLabel)),te.textLabel&&he.push(te.textLabel),V=he.join("<br>")):"isosurface"===A.type||"volume"===A.type?(oe.valueLabel=o.hoverLabelText(I._mockAxis,I._mockAxis.d2l(te.traceCoordinate[3]),A.valuehoverformat),he.push("value: "+oe.valueLabel),te.textLabel&&he.push(te.textLabel),V=he.join("<br>")):V=te.textLabel;var de={x:te.traceCoordinate[0],y:te.traceCoordinate[1],z:te.traceCoordinate[2],data:W._input,fullData:W,curveNumber:W.index,pointNumber:Z};d.appendArrayPointValue(de,W,Z),A._module.eventData&&(de=W._module.eventData(de,te,W,{},Z));var be={points:[de]};I.fullSceneLayout.hovermode&&d.loneHover({trace:W,x:(.5+.5*re[0]/re[3])*H,y:(.5-.5*re[1]/re[3])*Y,xLabel:oe.xLabel,yLabel:oe.yLabel,zLabel:oe.zLabel,text:V,name:ae.name,color:d.castHoverOption(W,Z,"bgcolor")||ae.color,borderColor:d.castHoverOption(W,Z,"bordercolor"),fontFamily:d.castHoverOption(W,Z,"font.family"),fontSize:d.castHoverOption(W,Z,"font.size"),fontColor:d.castHoverOption(W,Z,"font.color"),nameLength:d.castHoverOption(W,Z,"namelength"),textAlign:d.castHoverOption(W,Z,"align"),hovertemplate:f.castOption(W,Z,"hovertemplate"),hovertemplateLabels:f.extendFlat({},de,oe),eventData:[de]},{container:R,gd:D}),D.emit(te.buttons&&te.distance<5?"plotly_click":"plotly_hover",be),Q=be}else d.loneUnhover(R),D.emit("plotly_unhover",Q);I.drawAnnotations(I)},k.recoverContext=function(){var A=this;A.glplot.dispose();var I=function(){A.glplot.gl.isContextLost()?requestAnimationFrame(I):A.initializeGLPlot()?A.plot.apply(A,A.plotArgs):f.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(I)};var L=["xaxis","yaxis","zaxis"];function P(A,I,D){for(var R=A.fullSceneLayout,S=0;S<3;S++){var N=L[S],B=N.charAt(0),H=R[N],Y=I[B],Q=I[B+"calendar"],ne=I["_"+B+"length"];if(f.isArrayOrTypedArray(Y))for(var ae,te=0;te<(ne||Y.length);te++)if(f.isArrayOrTypedArray(Y[te]))for(var K=0;K<Y[te].length;++K)ae=H.d2l(Y[te][K],0,Q),!isNaN(ae)&&isFinite(ae)&&(D[0][S]=Math.min(D[0][S],ae),D[1][S]=Math.max(D[1][S],ae));else ae=H.d2l(Y[te],0,Q),!isNaN(ae)&&isFinite(ae)&&(D[0][S]=Math.min(D[0][S],ae),D[1][S]=Math.max(D[1][S],ae));else D[0][S]=Math.min(D[0][S],0),D[1][S]=Math.max(D[1][S],ne-1)}}k.plot=function(A,I,D){if(this.plotArgs=[A,I,D],!this.glplot.contextLost){var R,S,N,B,H,Y,Q=I[this.id],ne=D[this.id];this.fullLayout=I,this.fullSceneLayout=Q,this.axesOptions.merge(I,Q),this.spikeOptions.merge(Q),this.setViewport(Q),this.updateFx(Q.dragmode,Q.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(g(Q.bgcolor)),this.setConvert(H),A?Array.isArray(A)||(A=[A]):A=[];var ae=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(N=0;N<A.length;++N)!0===(R=A[N]).visible&&0!==R._length&&P(this,R,ae);!function(Se,Oe){for(var Be=Se.fullSceneLayout,He=Be.annotations||[],Xe=0;Xe<3;Xe++)for(var nt=L[Xe],et=nt.charAt(0),qe=Be[nt],Ye=0;Ye<He.length;Ye++){var ot=He[Ye];if(ot.visible){var at=qe.r2l(ot[et]);!isNaN(at)&&isFinite(at)&&(Oe[0][Xe]=Math.min(Oe[0][Xe],at),Oe[1][Xe]=Math.max(Oe[1][Xe],at))}}}(this,ae);var te=[1,1,1];for(B=0;B<3;++B)te[B]=ae[1][B]===ae[0][B]?1:1/(ae[1][B]-ae[0][B]);for(this.dataScale=te,this.convertAnnotations(this),N=0;N<A.length;++N)!0===(R=A[N]).visible&&0!==R._length&&((S=this.traces[R.uid])?S.data.type===R.type?S.update(R):(S.dispose(),S=R._module.plot(this,R),this.traces[R.uid]=S):(S=R._module.plot(this,R),this.traces[R.uid]=S),S.name=R.name);var K=Object.keys(this.traces);e:for(N=0;N<K.length;++N){for(B=0;B<A.length;++B)if(A[B].uid===K[N]&&!0===A[B].visible&&0!==A[B]._length)continue e;(S=this.traces[K[N]]).dispose(),delete this.traces[K[N]]}this.glplot.objects.sort(function(Se,Oe){return Se._trace.data.index-Oe._trace.data.index});var q,re=[[0,0,0],[0,0,0]],V=[],W={};for(N=0;N<3;++N){if((Y=(H=Q[L[N]]).type)in W?(W[Y].acc*=te[N],W[Y].count+=1):W[Y]={acc:te[N],count:1},H.autorange){re[0][N]=1/0,re[1][N]=-1/0;var Z=this.glplot.objects,oe=this.fullSceneLayout.annotations||[],ie=H._name.charAt(0);for(B=0;B<Z.length;B++){var ue=Z[B],fe=ue.bounds,he=ue._trace.data._pad||0;re[0][N]="ErrorBars"===ue.constructor.name&&H._lowerLogErrorBound?Math.min(re[0][N],H._lowerLogErrorBound):Math.min(re[0][N],fe[0][N]/te[N]-he),re[1][N]=Math.max(re[1][N],fe[1][N]/te[N]+he)}for(B=0;B<oe.length;B++){var de=oe[B];if(de.visible){var be=H.r2l(de[ie]);re[0][N]=Math.min(re[0][N],be),re[1][N]=Math.max(re[1][N],be)}}if("rangemode"in H&&"tozero"===H.rangemode&&(re[0][N]=Math.min(re[0][N],0),re[1][N]=Math.max(re[1][N],0)),re[0][N]>re[1][N])re[0][N]=-1,re[1][N]=1;else{var pe=re[1][N]-re[0][N];re[0][N]-=pe/32,re[1][N]+=pe/32}if("reversed"===H.autorange){var Te=re[0][N];re[0][N]=re[1][N],re[1][N]=Te}}else{var ye=H.range;re[0][N]=H.r2l(ye[0]),re[1][N]=H.r2l(ye[1])}re[0][N]===re[1][N]&&(re[0][N]-=1,re[1][N]+=1),V[N]=re[1][N]-re[0][N],this.glplot.setBounds(N,{min:re[0][N]*te[N],max:re[1][N]*te[N]})}var ke=Q.aspectmode;if("cube"===ke)q=[1,1,1];else if("manual"===ke){var ze=Q.aspectratio;q=[ze.x,ze.y,ze.z]}else{if("auto"!==ke&&"data"!==ke)throw new Error("scene.js aspectRatio was not one of the enumerated types");var je=[1,1,1];for(N=0;N<3;++N){var Ie=W[Y=(H=Q[L[N]]).type];je[N]=Math.pow(Ie.acc,1/Ie.count)/te[N]}q="data"===ke||Math.max.apply(null,je)/Math.min.apply(null,je)<=4?je:[1,1,1]}Q.aspectratio.x=ne.aspectratio.x=q[0],Q.aspectratio.y=ne.aspectratio.y=q[1],Q.aspectratio.z=ne.aspectratio.z=q[2],this.glplot.setAspectratio(Q.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:Q.aspectratio.x,y:Q.aspectratio.y,z:Q.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=Q.aspectmode);var Ce=Q.domain||null,_e=I._size||null;if(Ce&&_e){var we=this.container.style;we.position="absolute",we.left=_e.l+Ce.x[0]*_e.w+"px",we.top=_e.t+(1-Ce.y[1])*_e.h+"px",we.width=_e.w*(Ce.x[1]-Ce.x[0])+"px",we.height=_e.h*(Ce.y[1]-Ce.y[0])+"px"}this.glplot.redraw()}},k.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},k.getCamera=function(){var A;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(A=this.camera).up[0],y:A.up[1],z:A.up[2]},center:{x:A.center[0],y:A.center[1],z:A.center[2]},eye:{x:A.eye[0],y:A.eye[1],z:A.eye[2]},projection:{type:!0===A._ortho?"orthographic":"perspective"}}},k.setViewport=function(A){var I,D=A.camera;this.camera.lookAt.apply(this,[[(I=D).eye.x,I.eye.y,I.eye.z],[I.center.x,I.center.y,I.center.z],[I.up.x,I.up.y,I.up.z]]),this.glplot.setAspectratio(A.aspectratio),"orthographic"===D.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},k.isCameraChanged=function(A){var I=this.getCamera(),D=f.nestedProperty(A,this.id+".camera").get();var H,Y,Q,ne,ae,te,S=!1;if(void 0===D)S=!0;else{for(var N=0;N<3;N++)for(var B=0;B<3;B++)if(H=I,ne=B,ae=void 0,te=void 0,te=["x","y","z"],!(Y=D)[(ae=["up","center","eye"])[Q=N]]||H[ae[Q]][te[ne]]!==Y[ae[Q]][te[ne]]){S=!0;break}(!D.projection||I.projection&&I.projection.type!==D.projection.type)&&(S=!0)}return S},k.isAspectChanged=function(A){var I=this.glplot.getAspectratio(),D=f.nestedProperty(A,this.id+".aspectratio").get();return void 0===D||D.x!==I.x||D.y!==I.y||D.z!==I.z},k.saveLayout=function(A){var I,D,R,S,N,B,H=this.fullLayout,Y=this.isCameraChanged(A),Q=this.isAspectChanged(A),ne=Y||Q;if(ne){var ae={};Y&&(I=this.getCamera(),R=(D=f.nestedProperty(A,this.id+".camera")).get(),ae[this.id+".camera"]=R),Q&&(S=this.glplot.getAspectratio(),B=(N=f.nestedProperty(A,this.id+".aspectratio")).get(),ae[this.id+".aspectratio"]=B),l.call("_storeDirectGUIEdit",A,H._preGUI,ae),Y&&(D.set(I),f.nestedProperty(H,this.id+".camera").set(I)),Q&&(N.set(S),f.nestedProperty(H,this.id+".aspectratio").set(S),this.glplot.redraw())}return ne},k.updateFx=function(A,I){var D=this.camera;if(D)if("orbit"===A)D.mode="orbit",D.keyBindingMode="rotate";else if("turntable"===A){D.up=[0,0,1],D.mode="turntable",D.keyBindingMode="rotate";var R=this.graphDiv,S=R._fullLayout,N=this.fullSceneLayout.camera,B=N.up.x,H=N.up.y,Y=N.up.z;if(Y/Math.sqrt(B*B+H*H+Y*Y)<.999){var Q=this.id+".camera.up",ne={x:0,y:0,z:1},ae={};ae[Q]=ne;var te=R.layout;l.call("_storeDirectGUIEdit",te,S._preGUI,ae),N.up=ne,f.nestedProperty(te,Q).set(ne)}}else D.keyBindingMode=A;this.fullSceneLayout.hovermode=I},k.toImage=function(A){A||(A="png"),this.staticMode&&this.container.appendChild(i),this.glplot.redraw();var I=this.glplot.gl,D=I.drawingBufferWidth,R=I.drawingBufferHeight;I.bindFramebuffer(I.FRAMEBUFFER,null);var S=new Uint8Array(D*R*4);I.readPixels(0,0,D,R,I.RGBA,I.UNSIGNED_BYTE,S),function(Q,ne,ae){for(var te=0,K=ae-1;te<K;++te,--K)for(var q=0;q<ne;++q)for(var re=0;re<4;++re){var V=4*(ne*te+q)+re,W=4*(ne*K+q)+re,Z=Q[V];Q[V]=Q[W],Q[W]=Z}}(S,D,R),function(Q,ne,ae){for(var te=0;te<ae;++te)for(var K=0;K<ne;++K){var q=4*(ne*te+K),re=Q[q+3];if(re>0)for(var V=255/re,W=0;W<3;++W)Q[q+W]=Math.min(V*Q[q+W],255)}}(S,D,R);var N=document.createElement("canvas");N.width=D,N.height=R;var B,H=N.getContext("2d"),Y=H.createImageData(D,R);switch(Y.data.set(S),H.putImageData(Y,0,0),A){case"jpeg":B=N.toDataURL("image/jpeg");break;case"webp":B=N.toDataURL("image/webp");break;default:B=N.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(i),B},k.setConvert=function(){for(var A=0;A<3;A++){var I=this.fullSceneLayout[L[A]];o.setConvert(I,this.fullLayout),I.setScale=f.noop}},k.make4thDimension=function(){var A=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},o.setConvert(this._mockAxis,A)},G.exports=E},{"../../components/fx":706,"../../lib":803,"../../lib/show_no_webgl_msg":825,"../../lib/str2rgbarray":828,"../../plots/cartesian/axes":854,"../../registry":931,"./layout/convert":900,"./layout/spikes":903,"./layout/tick_marks":904,"./project":905,"gl-plot3d":326,"has-passive-events":444,"webgl-context":629}],907:[function(h,G,X){"use strict";G.exports=function(i,m,b,p){p=p||i.length;for(var r=new Array(p),u=0;u<p;u++)r[u]=[i[u],m[u],b[u]];return r}},{}],908:[function(h,G,X){"use strict";var i=h("./font_attributes"),m=h("./animation_attributes"),b=h("../components/color/attributes"),p=h("../components/shapes/draw_newshape/attributes"),r=h("./pad_attributes"),u=h("../lib/extend").extendFlat,c=i({editType:"calc"});c.family.dflt='"Open Sans", verdana, arial, sans-serif',c.size.dflt=12,c.color.dflt=b.defaultLine,G.exports={font:c,title:{text:{valType:"string",editType:"layoutstyle"},font:i({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:u(r({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:b.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:b.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:b.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:p.newshape,activeshape:p.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:u({},m.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:i({editType:"layoutstyle"})}}},{"../components/color/attributes":665,"../components/shapes/draw_newshape/attributes":751,"../lib/extend":793,"./animation_attributes":848,"./font_attributes":883,"./pad_attributes":916}],909:[function(h,G,X){"use strict";var i=h("../../lib/sort_object_keys"),m='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',b=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',m].join(" "),p=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),r={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:m,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:b,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:b,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:p,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:p,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},u=i(r);G.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:r,styleValuesNonMapbox:u,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",u.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},{"../../lib/sort_object_keys":826}],910:[function(h,G,X){"use strict";var i=h("../../lib");G.exports=function(m,b){var p=m.split(" "),r=p[0],u=p[1],c=i.isArrayOrTypedArray(b)?i.mean(b):b,l=.5+c/100,f=1.5+c/100,s=["",""],o=[0,0];switch(r){case"top":s[0]="top",o[1]=-f;break;case"bottom":s[0]="bottom",o[1]=f}switch(u){case"left":s[1]="right",o[0]=-l;break;case"right":s[1]="left",o[0]=l}return{anchor:s[0]&&s[1]?s.join("-"):s[0]?s[0]:s[1]?s[1]:"center",offset:o}}},{"../../lib":803}],911:[function(h,G,X){"use strict";var i=h("mapbox-gl/dist/mapbox-gl-unminified"),m=h("../../lib"),b=m.strTranslate,p=m.strScale,r=h("../../plots/get_data").getSubplotCalcData,u=h("../../constants/xmlns_namespaces"),c=h("@plotly/d3"),l=h("../../components/drawing"),f=h("../../lib/svg_text_utils"),s=h("./mapbox"),o=X.constants=h("./constants");function d(g){return"string"==typeof g&&(-1!==o.styleValuesMapbox.indexOf(g)||0===g.indexOf("mapbox://"))}X.name="mapbox",X.attr="subplot",X.idRoot="mapbox",X.idRegex=X.attrRegex=m.counterRegex("mapbox"),X.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},X.layoutAttributes=h("./layout_attributes"),X.supplyLayoutDefaults=h("./layout_defaults"),X.plot=function(g){var y=g._fullLayout,v=g.calcdata,_=y._subplots.mapbox;if(i.version!==o.requiredVersion)throw new Error(o.wrongVersionErrorMsg);var w=function(P,A){var I=P._fullLayout;if(""===P._context.mapboxAccessToken)return"";for(var D=[],R=[],S=!1,N=!1,B=0;B<A.length;B++){var H=I[A[B]],Y=H.accesstoken;d(H.style)&&(Y?m.pushUnique(D,Y):(d(H._input.style)&&(m.error("Uses Mapbox map style, but did not set an access token."),S=!0),N=!0)),Y&&m.pushUnique(R,Y)}if(N){var Q=S?o.noAccessTokenErrorMsg:o.missingStyleErrorMsg;throw m.error(Q),new Error(Q)}return D.length?(D.length>1&&m.warn(o.multipleTokensErrorMsg),D[0]):(R.length&&m.log(["Listed mapbox access token(s)",R.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(g,_);i.accessToken=w;for(var x=0;x<_.length;x++){var E=_[x],k=r(v,"mapbox",E),C=y[E],L=C._subplot;L||(L=new s(g,E),y[E]._subplot=L),L.viewInitial||(L.viewInitial={center:m.extendFlat({},C.center),zoom:C.zoom,bearing:C.bearing,pitch:C.pitch}),L.plot(k,y,g._promises)}},X.clean=function(g,y,v,_){for(var w=_._subplots.mapbox||[],x=0;x<w.length;x++){var E=w[x];!y[E]&&_[E]._subplot&&_[E]._subplot.destroy()}},X.toSVG=function(g){for(var y=g._fullLayout,v=y._subplots.mapbox,_=y._size,w=0;w<v.length;w++){var x=y[v[w]],E=x.domain,k=x._subplot.toImage("png");y._glimages.append("svg:image").attr({xmlns:u.svg,"xlink:href":k,x:_.l+_.w*E.x[0],y:_.t+_.h*(1-E.y[1]),width:_.w*(E.x[1]-E.x[0]),height:_.h*(E.y[1]-E.y[0]),preserveAspectRatio:"none"});var C=c.select(x._subplot.div);if(null!==C.select(".mapboxgl-ctrl-logo").node().offsetParent){var L=y._glimages.append("g");L.attr("transform",b(_.l+_.w*E.x[0]+10,_.t+_.h*(1-E.y[0])-31)),L.append("path").attr("d",o.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),L.append("path").attr("d",o.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),L.append("path").attr("d",o.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),L.append("polygon").attr("points",o.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var P=C.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),A=y._glimages.append("g"),I=A.append("text");I.text(P).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":P});var D=l.bBox(I.node()),R=_.w*(E.x[1]-E.x[0]);if(D.width>R/2){var S=P.split("|").join("<br>");I.text(S).attr("data-unformatted",S).call(f.convertToTspans,g),D=l.bBox(I.node())}I.attr("transform",b(-3,8-D.height)),A.insert("rect",".static-attribution").attr({x:-D.width-6,y:-D.height-3,width:D.width+6,height:D.height+3,fill:"rgba(255, 255, 255, 0.75)"});var N=1;D.width+6>R&&(N=R/(D.width+6));var B=[_.l+_.w*E.x[1],_.t+_.h*(1-E.y[0])];A.attr("transform",b(B[0],B[1])+p(N))}},X.updateFx=function(g){for(var y=g._fullLayout,v=y._subplots.mapbox,_=0;_<v.length;_++)y[v[_]]._subplot.updateFx(y)}},{"../../components/drawing":688,"../../constants/xmlns_namespaces":780,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/get_data":891,"./constants":909,"./layout_attributes":913,"./layout_defaults":914,"./mapbox":915,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":461}],912:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../lib/svg_text_utils").sanitizeHTML,b=h("./convert_text_opts"),p=h("./constants");function r(f,s){this.subplot=f,this.uid=f.uid+"-"+s,this.index=s,this.idSource="source-"+this.uid,this.idLayer=p.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var u=r.prototype;function c(f){if(!f.visible)return!1;var s=f.source;if(Array.isArray(s)&&s.length>0){for(var o=0;o<s.length;o++)if("string"!=typeof s[o]||0===s[o].length)return!1;return!0}return i.isPlainObject(s)||"string"==typeof s&&s.length>0}function l(f){var s={},o={};switch(f.type){case"circle":i.extendFlat(o,{"circle-radius":f.circle.radius,"circle-color":f.color,"circle-opacity":f.opacity});break;case"line":i.extendFlat(o,{"line-width":f.line.width,"line-color":f.color,"line-opacity":f.opacity,"line-dasharray":f.line.dash});break;case"fill":i.extendFlat(o,{"fill-color":f.color,"fill-outline-color":f.fill.outlinecolor,"fill-opacity":f.opacity});break;case"symbol":var d=f.symbol,g=b(d.textposition,d.iconsize);i.extendFlat(s,{"icon-image":d.icon+"-15","icon-size":d.iconsize/10,"text-field":d.text,"text-size":d.textfont.size,"text-anchor":g.anchor,"text-offset":g.offset,"symbol-placement":d.placement}),i.extendFlat(o,{"icon-color":f.color,"text-color":d.textfont.color,"text-opacity":f.opacity});break;case"raster":i.extendFlat(o,{"raster-fade-duration":0,"raster-opacity":f.opacity})}return{layout:s,paint:o}}u.update=function(f){this.visible?this.needsNewImage(f)?this.updateImage(f):this.needsNewSource(f)?(this.removeLayer(),this.updateSource(f),this.updateLayer(f)):this.needsNewLayer(f)?this.updateLayer(f):this.updateStyle(f):(this.updateSource(f),this.updateLayer(f)),this.visible=c(f)},u.needsNewImage=function(f){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===f.sourcetype&&(this.source!==f.source||JSON.stringify(this.coordinates)!==JSON.stringify(f.coordinates))},u.needsNewSource=function(f){return this.sourceType!==f.sourcetype||JSON.stringify(this.source)!==JSON.stringify(f.source)||this.layerType!==f.type},u.needsNewLayer=function(f){return this.layerType!==f.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},u.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},u.updateImage=function(f){this.subplot.map.getSource(this.idSource).updateImage({url:f.source,coordinates:f.coordinates});var s=this.findFollowingMapboxLayerId(this.lookupBelow());null!==s&&this.subplot.map.moveLayer(this.idLayer,s)},u.updateSource=function(f){var d,g,y,v,_,s=this.subplot.map;if(s.getSource(this.idSource)&&s.removeSource(this.idSource),this.sourceType=f.sourcetype,this.source=f.source,c(f)){var o=(v=(d=f).source,_={type:y=d.sourcetype},"geojson"===y?g="data":"vector"===y?g="string"==typeof v?"url":"tiles":"raster"===y?(g="tiles",_.tileSize=256):"image"===y&&(g="url",_.coordinates=d.coordinates),_[g]=v,d.sourceattribution&&(_.attribution=m(d.sourceattribution)),_);s.addSource(this.idSource,o)}},u.findFollowingMapboxLayerId=function(f){if("traces"===f)for(var s=this.subplot.getMapLayers(),o=0;o<s.length;o++){var d=s[o].id;if("string"==typeof d&&0===d.indexOf(p.traceLayerPrefix)){f=d;break}}return f},u.updateLayer=function(f){var s=this.subplot,o=l(f),d=this.lookupBelow(),g=this.findFollowingMapboxLayerId(d);this.removeLayer(),c(f)&&s.addLayer({id:this.idLayer,source:this.idSource,"source-layer":f.sourcelayer||"",type:f.type,minzoom:f.minzoom,maxzoom:f.maxzoom,layout:o.layout,paint:o.paint},g),this.layerType=f.type,this.below=d},u.updateStyle=function(f){if(c(f)){var s=l(f);this.subplot.setOptions(this.idLayer,"setLayoutProperty",s.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",s.paint)}},u.removeLayer=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer)},u.dispose=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer),f.getSource(this.idSource)&&f.removeSource(this.idSource)},G.exports=function(f,s,o){var d=new r(f,s);return d.update(o),d}},{"../../lib":803,"../../lib/svg_text_utils":829,"./constants":909,"./convert_text_opts":910}],913:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/color").defaultLine,b=h("../domain").attributes,p=h("../font_attributes"),r=h("../../traces/scatter/attributes").textposition,u=h("../../plot_api/edit_types").overrideAll,c=h("../../plot_api/plot_template").templatedArray,l=h("./constants"),f=p({});f.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(G.exports=u({_arrayAttrRegexps:[i.counterRegex("mapbox",".layers",!0)],domain:b({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:l.styleValuesMapbox.concat(l.styleValuesNonMapbox),dflt:l.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:c("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:m},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:m}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:f,textposition:i.extendFlat({},r,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":666,"../../lib":803,"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../../traces/scatter/attributes":1218,"../domain":882,"../font_attributes":883,"./constants":909}],914:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../subplot_defaults"),b=h("../array_container_defaults"),p=h("./layout_attributes");function r(c,l,f,s){f("accesstoken",s.accessToken),f("style"),f("center.lon"),f("center.lat"),f("zoom"),f("bearing"),f("pitch"),b(c,l,{name:"layers",handleItemDefaults:u}),l._input=c}function u(c,l){function f(y,v){return i.coerce(c,l,p.layers,y,v)}if(f("visible")){var s,o=f("sourcetype"),d="raster"===o||"image"===o;f("source"),f("sourceattribution"),"vector"===o&&f("sourcelayer"),"image"===o&&f("coordinates"),d&&(s="raster");var g=f("type",s);d&&"raster"!==g&&(g=l.type="raster",i.log("Source types *raster* and *image* must drawn *raster* layer type.")),f("below"),f("color"),f("opacity"),f("minzoom"),f("maxzoom"),"circle"===g&&f("circle.radius"),"line"===g&&(f("line.width"),f("line.dash")),"fill"===g&&f("fill.outlinecolor"),"symbol"===g&&(f("symbol.icon"),f("symbol.iconsize"),f("symbol.text"),i.coerceFont(f,"symbol.textfont"),f("symbol.textposition"),f("symbol.placement"))}}G.exports=function(c,l,f){m(c,l,f,{type:"mapbox",attributes:p,handleDefaults:r,partition:"y",accessToken:l._mapboxAccessToken})}},{"../../lib":803,"../array_container_defaults":849,"../subplot_defaults":925,"./layout_attributes":913}],915:[function(h,G,X){"use strict";var i=h("mapbox-gl/dist/mapbox-gl-unminified"),m=h("../../lib"),b=h("../../lib/geo_location_utils"),p=h("../../registry"),r=h("../cartesian/axes"),u=h("../../components/dragelement"),c=h("../../components/fx"),l=h("../../components/dragelement/helpers"),f=l.rectMode,s=l.drawMode,o=l.selectMode,d=h("../cartesian/select").prepSelect,g=h("../cartesian/select").clearSelect,y=h("../cartesian/select").clearSelectionsCache,v=h("../cartesian/select").selectOnClick,_=h("./constants"),w=h("./layers");function x(A,I){this.id=I,this.gd=A;var D=A._fullLayout,R=A._context;this.container=D._glcontainer.node(),this.isStatic=R.staticPlot,this.uid=D._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(D),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var E=x.prototype;E.plot=function(A,I,D){var R,S=this;S.map&&I[S.id].accesstoken!==S.accessToken&&(S.map.remove(),S.map=null,S.styleObj=null,S.traceHash={},S.layerList=[]),R=new Promise(S.map?function(B,H){S.updateMap(A,I,B,H)}:function(B,H){S.createMap(A,I,B,H)}),D.push(R)},E.createMap=function(A,I,D,R){var S=this,N=I[S.id],B=S.styleObj=C(N.style);S.accessToken=N.accesstoken;var H=S.map=new i.Map({container:S.div,style:B.style,center:P(N.center),zoom:N.zoom,bearing:N.bearing,pitch:N.pitch,interactive:!S.isStatic,preserveDrawingBuffer:S.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new i.AttributionControl({compact:!0}));H._canvas.style.left="0px",H._canvas.style.top="0px",S.rejectOnError(R),S.isStatic||S.initFx(A,I);var Y=[];Y.push(new Promise(function(Q){H.once("load",Q)})),Y=Y.concat(b.fetchTraceGeoData(A)),Promise.all(Y).then(function(){S.fillBelowLookup(A,I),S.updateData(A),S.updateLayout(I),S.resolveOnRender(D)}).catch(R)},E.updateMap=function(A,I,D,R){var S=this,N=S.map,B=I[this.id];S.rejectOnError(R);var H=[],Y=C(B.style);JSON.stringify(S.styleObj)!==JSON.stringify(Y)&&(S.styleObj=Y,N.setStyle(Y.style),S.traceHash={},H.push(new Promise(function(Q){N.once("styledata",Q)}))),H=H.concat(b.fetchTraceGeoData(A)),Promise.all(H).then(function(){S.fillBelowLookup(A,I),S.updateData(A),S.updateLayout(I),S.resolveOnRender(D)}).catch(R)},E.fillBelowLookup=function(A,I){var D,R,S=I[this.id].layers,N=this.belowLookup={},B=!1;for(D=0;D<A.length;D++){var H=A[D][0].trace,Y=H._module;"string"==typeof H.below?R=H.below:Y.getBelow&&(R=Y.getBelow(H,this)),""===R&&(B=!0),N["trace-"+H.uid]=R||""}for(D=0;D<S.length;D++){var Q=S[D];N["layout-"+D]=R="string"==typeof Q.below?Q.below:B?"traces":""}var ne,ae,te={};for(ne in N)te[R=N[ne]]?te[R].push(ne):te[R]=[ne];for(R in te){var K=te[R];if(K.length>1)for(D=0;D<K.length;D++)0===(ne=K[D]).indexOf("trace-")?(ae=ne.split("trace-")[1],this.traceHash[ae]&&(this.traceHash[ae].below=null)):0===ne.indexOf("layout-")&&(ae=ne.split("layout-")[1],this.layerList[ae]&&(this.layerList[ae].below=null))}};var k={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function C(A){var I={};return m.isPlainObject(A)?(I.id=A.id,I.style=A):"string"==typeof A?(I.id=A,I.style=-1!==_.styleValuesMapbox.indexOf(A)?L(A):_.stylesNonMapbox[A]?_.stylesNonMapbox[A]:A):(I.id=_.styleValueDflt,I.style=L(_.styleValueDflt)),I.transition={duration:0,delay:0},I}function L(A){return _.styleUrlPrefix+A+"-"+_.styleUrlSuffix}function P(A){return[A.lon,A.lat]}E.updateData=function(A){var I,D,R,S,N=this.traceHash,B=A.slice().sort(function(ae,te){return k[ae[0].trace.type]-k[te[0].trace.type]});for(R=0;R<B.length;R++){var H=B[R],Y=!1;(I=N[(D=H[0].trace).uid])&&(I.type===D.type?(I.update(H),Y=!0):I.dispose()),!Y&&D._module&&(N[D.uid]=D._module.plot(this,H))}var Q=Object.keys(N);e:for(R=0;R<Q.length;R++){var ne=Q[R];for(S=0;S<A.length;S++)if(ne===(D=A[S][0].trace).uid)continue e;(I=N[ne]).dispose(),delete N[ne]}},E.updateLayout=function(A){var I=this.map,D=A[this.id];this.dragging||this.wheeling||(I.setCenter(P(D.center)),I.setZoom(D.zoom),I.setBearing(D.bearing),I.setPitch(D.pitch)),this.updateLayers(A),this.updateFramework(A),this.updateFx(A),this.map.resize(),this.gd._context._scrollZoom.mapbox?I.scrollZoom.enable():I.scrollZoom.disable()},E.resolveOnRender=function(A){var I=this.map;I.on("render",function D(){I.loaded()&&(I.off("render",D),setTimeout(A,10))})},E.rejectOnError=function(A){var I=this.map;function D(){A(new Error(_.mapOnErrorMsg))}I.once("error",D),I.once("style.error",D),I.once("source.error",D),I.once("tile.error",D),I.once("layer.error",D)},E.createFramework=function(A){var I=this,D=I.div=document.createElement("div");D.id=I.uid,D.style.position="absolute",I.container.appendChild(D),I.xaxis={_id:"x",c2p:function(R){return I.project(R).x}},I.yaxis={_id:"y",c2p:function(R){return I.project(R).y}},I.updateFramework(A),I.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(I.mockAxis,A)},E.initFx=function(A,I){var D=this,R=D.gd,S=D.map;function N(){c.loneUnhover(I._hoverlayer)}function B(){var H=D.getView();R.emit("plotly_relayouting",D.getViewEditsWithDerived(H))}S.on("moveend",function(H){if(D.map){var Y=R._fullLayout;if(H.originalEvent||D.wheeling){var Q=Y[D.id];p.call("_storeDirectGUIEdit",R.layout,Y._preGUI,D.getViewEdits(Q));var ne=D.getView();Q._input.center=Q.center=ne.center,Q._input.zoom=Q.zoom=ne.zoom,Q._input.bearing=Q.bearing=ne.bearing,Q._input.pitch=Q.pitch=ne.pitch,R.emit("plotly_relayout",D.getViewEditsWithDerived(ne))}H.originalEvent&&"mouseup"===H.originalEvent.type?D.dragging=!1:D.wheeling&&(D.wheeling=!1),Y._rehover&&Y._rehover()}}),S.on("wheel",function(){D.wheeling=!0}),S.on("mousemove",function(H){var Y=D.div.getBoundingClientRect(),Q=[H.originalEvent.offsetX,H.originalEvent.offsetY];H.target.getBoundingClientRect=function(){return Y},D.xaxis.p2c=function(){return S.unproject(Q).lng},D.yaxis.p2c=function(){return S.unproject(Q).lat},R._fullLayout._rehover=function(){R._fullLayout._hoversubplot===D.id&&R._fullLayout[D.id]&&c.hover(R,H,D.id)},c.hover(R,H,D.id),R._fullLayout._hoversubplot=D.id}),S.on("dragstart",function(){D.dragging=!0,N()}),S.on("zoomstart",N),S.on("mouseout",function(){R._fullLayout._hoversubplot=null}),S.on("drag",B),S.on("zoom",B),S.on("dblclick",function(){var H=R._fullLayout[D.id];p.call("_storeDirectGUIEdit",R.layout,R._fullLayout._preGUI,D.getViewEdits(H));var Y=D.viewInitial;S.setCenter(P(Y.center)),S.setZoom(Y.zoom),S.setBearing(Y.bearing),S.setPitch(Y.pitch);var Q=D.getView();H._input.center=H.center=Q.center,H._input.zoom=H.zoom=Q.zoom,H._input.bearing=H.bearing=Q.bearing,H._input.pitch=H.pitch=Q.pitch,R.emit("plotly_doubleclick",null),R.emit("plotly_relayout",D.getViewEditsWithDerived(Q))}),D.clearSelect=function(){y(D.dragOptions),g(D.dragOptions.gd)},D.onClickInPanFn=function(H){return function(Y){var Q=R._fullLayout.clickmode;Q.indexOf("select")>-1&&v(Y.originalEvent,R,[D.xaxis],[D.yaxis],D.id,H),Q.indexOf("event")>-1&&c.click(R,Y.originalEvent)}}},E.updateFx=function(A){var I=this,D=I.map,R=I.gd;if(!I.isStatic){var S,N=A.dragmode;S=f(N)?function(Y,Q){(Y.range={})[I.id]=[H([Q.xmin,Q.ymin]),H([Q.xmax,Q.ymax])]}:function(Y,Q,ne){(Y.lassoPoints={})[I.id]=ne.filtered.map(H)},I.dragOptions=m.extendDeep(I.dragOptions||{},{dragmode:A.dragmode,element:I.div,gd:R,plotinfo:{id:I.id,domain:A[I.id].domain,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:S},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id}),D.off("click",I.onClickInPanHandler),o(N)||s(N)?(D.dragPan.disable(),D.on("zoomstart",I.clearSelect),I.dragOptions.prepFn=function(Y,Q,ne){d(Y,Q,ne,I.dragOptions,N)},u.init(I.dragOptions)):(D.dragPan.enable(),D.off("zoomstart",I.clearSelect),I.div.onmousedown=null,I.onClickInPanHandler=I.onClickInPanFn(I.dragOptions),D.on("click",I.onClickInPanHandler))}function H(Y){var Q=I.map.unproject(Y);return[Q.lng,Q.lat]}},E.updateFramework=function(A){var I=A[this.id].domain,D=A._size,R=this.div.style;R.width=D.w*(I.x[1]-I.x[0])+"px",R.height=D.h*(I.y[1]-I.y[0])+"px",R.left=D.l+I.x[0]*D.w+"px",R.top=D.t+(1-I.y[1])*D.h+"px",this.xaxis._offset=D.l+I.x[0]*D.w,this.xaxis._length=D.w*(I.x[1]-I.x[0]),this.yaxis._offset=D.t+(1-I.y[1])*D.h,this.yaxis._length=D.h*(I.y[1]-I.y[0])},E.updateLayers=function(A){var I,D=A[this.id].layers,R=this.layerList;if(D.length!==R.length){for(I=0;I<R.length;I++)R[I].dispose();for(R=this.layerList=[],I=0;I<D.length;I++)R.push(w(this,I,D[I]))}else for(I=0;I<D.length;I++)R[I].update(D[I])},E.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},E.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},E.setOptions=function(A,I,D){for(var R in D)this.map[I](A,R,D[R])},E.getMapLayers=function(){return this.map.getStyle().layers},E.addLayer=function(A,I){var D=this.map;if("string"==typeof I){if(""===I)return void D.addLayer(A,I);for(var R=this.getMapLayers(),S=0;S<R.length;S++)if(I===R[S].id)return void D.addLayer(A,I);m.warn(["Trying to add layer with *below* value",I,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}D.addLayer(A)},E.project=function(A){return this.map.project(new i.LngLat(A[0],A[1]))},E.getView=function(){var A=this.map,I=A.getCenter(),D={lon:I.lng,lat:I.lat},R=A.getCanvas(),S=R.width,N=R.height;return{center:D,zoom:A.getZoom(),bearing:A.getBearing(),pitch:A.getPitch(),_derived:{coordinates:[A.unproject([0,0]).toArray(),A.unproject([S,0]).toArray(),A.unproject([S,N]).toArray(),A.unproject([0,N]).toArray()]}}},E.getViewEdits=function(A){for(var I=this.id,D=["center","zoom","bearing","pitch"],R={},S=0;S<D.length;S++){var N=D[S];R[I+"."+N]=A[N]}return R},E.getViewEditsWithDerived=function(A){var I=this.id,D=this.getViewEdits(A);return D[I+"._derived"]=A._derived,D},G.exports=x},{"../../components/dragelement":685,"../../components/dragelement/helpers":684,"../../components/fx":706,"../../lib":803,"../../lib/geo_location_utils":796,"../../registry":931,"../cartesian/axes":854,"../cartesian/select":874,"./constants":909,"./layers":912,"mapbox-gl/dist/mapbox-gl-unminified":461}],916:[function(h,G,X){"use strict";G.exports=function(i){var m=i.editType;return{t:{valType:"number",dflt:0,editType:m},r:{valType:"number",dflt:0,editType:m},b:{valType:"number",dflt:0,editType:m},l:{valType:"number",dflt:0,editType:m},editType:m}}},{}],917:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("d3-time-format").timeFormatLocale,b=h("d3-format").formatLocale,p=h("fast-isnumeric"),r=h("../registry"),u=h("../plot_api/plot_schema"),c=h("../plot_api/plot_template"),l=h("../lib"),f=h("../components/color"),s=h("../constants/numerical").BADNUM,o=h("./cartesian/axis_ids"),d=h("./cartesian/handle_outline").clearSelect,g=h("./animation_attributes"),y=h("./frame_attributes"),v=h("../plots/get_data").getModuleCalcData,_=l.relinkPrivateKeys,w=l._,x=G.exports={};l.extendFlat(x,r),x.attributes=h("./attributes"),x.attributes.type.values=x.allTypes,x.fontAttrs=h("./font_attributes"),x.layoutAttributes=h("./layout_attributes"),x.fontWeight="normal";var E=x.transformsRegistry,k=h("./command");x.executeAPICommand=k.executeAPICommand,x.computeAPICommandBindings=k.computeAPICommandBindings,x.manageCommandObserver=k.manageCommandObserver,x.hasSimpleAPICommandBindings=k.hasSimpleAPICommandBindings,x.redrawText=function(ne){return ne=l.getGraphDiv(ne),new Promise(function(ae){setTimeout(function(){ne._fullLayout&&(r.getComponentMethod("annotations","draw")(ne),r.getComponentMethod("legend","draw")(ne),r.getComponentMethod("colorbar","draw")(ne),ae(x.previousPromises(ne)))},300)})},x.resize=function(ne){var ae;ne=l.getGraphDiv(ne);var te=new Promise(function(K,q){ne&&!l.isHidden(ne)||q(new Error("Resize must be passed a displayed plot div element.")),ne._redrawTimer&&clearTimeout(ne._redrawTimer),ne._resolveResize&&(ae=ne._resolveResize),ne._resolveResize=K,ne._redrawTimer=setTimeout(function(){if(!ne.layout||ne.layout.width&&ne.layout.height||l.isHidden(ne))K(ne);else{delete ne.layout.width,delete ne.layout.height;var re=ne.changed;ne.autoplay=!0,r.call("relayout",ne,{autosize:!0}).then(function(){ne.changed=re,ne._resolveResize===K&&(delete ne._resolveResize,K(ne))})}},100)});return ae&&ae(te),te},x.previousPromises=function(ne){if((ne._promises||[]).length)return Promise.all(ne._promises).then(function(){ne._promises=[]})},x.addLinks=function(ne){if(ne._context.showLink||ne._context.showSources){var ae=ne._fullLayout,te=l.ensureSingle(ae._paper,"text","js-plot-link-container",function(Z){Z.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:f.defaultLine,"pointer-events":"all"}).each(function(){var oe=i.select(this);oe.append("tspan").classed("js-link-to-tool",!0),oe.append("tspan").classed("js-link-spacer",!0),oe.append("tspan").classed("js-sourcelinks",!0)})}),K=te.node(),q={y:ae._paper.attr("height")-9};document.body.contains(K)&&K.getComputedTextLength()>=ae.width-20?(q["text-anchor"]="start",q.x=5):(q["text-anchor"]="end",q.x=ae._paper.attr("width")-7),te.attr(q);var re=te.select(".js-link-to-tool"),V=te.select(".js-link-spacer"),W=te.select(".js-sourcelinks");ne._context.showSources&&ne._context.showSources(ne),ne._context.showLink&&function(Z,oe){oe.text("");var ie=oe.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(Z._context.linkText+" "+String.fromCharCode(187));if(Z._context.sendData)ie.on("click",function(){x.sendDataToCloud(Z)});else{var ue=window.location.pathname.split("/"),fe=window.location.search;ie.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+ue[2].split(".")[0]+"/"+ue[1]+fe})}}(ne,re),V.text(re.text()&&W.text()?" - ":"")}},x.sendDataToCloud=function(ne){var ae=(window.PLOTLYENV||{}).BASE_URL||ne._context.plotlyServerURL;if(ae){ne.emit("plotly_beforeexport");var te=i.select(ne).append("div").attr("id","hiddenform").style("display","none"),K=te.append("form").attr({action:ae+"/external",method:"post",target:"_blank"});return K.append("input").attr({type:"text",name:"data"}).node().value=x.graphJson(ne,!1,"keepdata"),K.node().submit(),te.remove(),ne.emit("plotly_afterexport"),!1}};var C=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],L=["year","month","dayMonth","dayMonthYear"];function P(ne,ae){var te=ne._context.locale;te||(te="en-US");var K=!1,q={};function re(ue){for(var fe=!0,he=0;he<ae.length;he++){var de=ae[he];q[de]||(ue[de]?q[de]=ue[de]:fe=!1)}fe&&(K=!0)}for(var V=0;V<2;V++){for(var W=ne._context.locales,Z=0;Z<2;Z++){var oe=(W[te]||{}).format;if(oe&&(re(oe),K))break;W=r.localeRegistry}var ie=te.split("-")[0];if(K||ie===te)break;te=ie}return K||re(r.localeRegistry.en.format),q}function A(ne,ae){var te={_fullLayout:ae},K="x"===ne._id.charAt(0),q=ne._mainAxis._anchorAxis,re="",V="",W="";if(q&&(W=q._mainAxis._id,re=K?ne._id+W:W+ne._id),!re||!ae._plots[re]){re="";for(var Z=ne._counterAxes,oe=0;oe<Z.length;oe++){var ie=Z[oe],ue=K?ne._id+ie:ie+ne._id;V||(V=ue);var fe=o.getFromId(te,ie);if(W&&fe.overlaying===W){re=ue;break}}}return re||V}function I(ne){var ae=ne.transforms;if(Array.isArray(ae)&&ae.length)for(var te=0;te<ae.length;te++){var K=ae[te],q=K._module||E[K.type];if(q&&q.makesData)return!0}return!1}function D(ne,ae,te,K){for(var q=ne.transforms,re=[ne],V=0;V<q.length;V++){var W=q[V],Z=E[W.type];Z&&Z.transform&&(re=Z.transform(re,{transform:W,fullTrace:ne,fullData:ae,layout:te,fullLayout:K,transformIndex:V}))}return re}function R(ne){return"string"==typeof ne&&"px"===ne.substr(ne.length-2)&&parseFloat(ne)}function S(ne){var ae=ne.margin;if(!ne._size){var te=ne._size={l:Math.round(ae.l),r:Math.round(ae.r),t:Math.round(ae.t),b:Math.round(ae.b),p:Math.round(ae.pad)};te.w=Math.round(ne.width)-te.l-te.r,te.h=Math.round(ne.height)-te.t-te.b}ne._pushmargin||(ne._pushmargin={}),ne._pushmarginIds||(ne._pushmarginIds={})}x.supplyDefaults=function(ne,ae){var Ye,ot,te=ae&&ae.skipUpdateCalc,K=ne._fullLayout||{};if(K._skipDefaults)delete K._skipDefaults;else{var q,re=ne._fullLayout={},V=ne.layout||{},W=ne._fullData||[],Z=ne._fullData=[],oe=ne.data||[],ie=ne.calcdata||[],ue=ne._context||{};ne._transitionData||x.createTransitionData(ne),re._dfltTitle={plot:w(ne,"Click to enter Plot title"),x:w(ne,"Click to enter X axis title"),y:w(ne,"Click to enter Y axis title"),colorbar:w(ne,"Click to enter Colorscale title"),annotation:w(ne,"new text")},re._traceWord=w(ne,"trace");var fe=P(ne,C);if(re._mapboxAccessToken=ue.mapboxAccessToken,K._initialAutoSizeIsDone){var he=K.width,de=K.height;x.supplyLayoutGlobalDefaults(V,re,fe),V.width||(re.width=he),V.height||(re.height=de),x.sanitizeMargins(re)}else{x.supplyLayoutGlobalDefaults(V,re,fe);var be=!V.width||!V.height,pe=re.autosize;be&&(pe||ue.autosizable)?x.plotAutoSize(ne,V,re):be&&x.sanitizeMargins(re),!pe&&be&&(V.width=re.width,V.height=re.height)}re._d3locale=((Ye=fe).decimal=(ot=re.separators).charAt(0),Ye.thousands=ot.charAt(1),{numberFormat:function(at){try{at=b(Ye).format(l.adjustFormat(at))}catch(ct){return l.warnBadFormat(at),l.noFormat}return at},timeFormat:m(Ye).utcFormat}),re._extraFormat=P(ne,L),re._initialAutoSizeIsDone=!0,re._dataLength=oe.length,re._modules=[],re._visibleModules=[],re._basePlotModules=[];var ye=re._subplots=function(){var Ye,ot,at=r.collectableSubplotTypes,ct={};if(!at){at=[];var _t=r.subplotsRegistry;for(var xt in _t){var Ht=_t[xt].attr;if(Ht&&(at.push(xt),Array.isArray(Ht)))for(ot=0;ot<Ht.length;ot++)l.pushUnique(at,Ht[ot])}}for(Ye=0;Ye<at.length;Ye++)ct[at[Ye]]=[];return ct}(),ke=re._splomAxes={x:{},y:{}},ze=re._splomSubplots={};re._splomGridDflt={},re._scatterStackOpts={},re._firstScatter={},re._alignmentOpts={},re._colorAxes={},re._requestRangeslider={},re._traceUids=function(Ye,ot){var at,ct,_t=ot.length,xt=[];for(at=0;at<Ye.length;at++){var Ht=Ye[at]._fullInput;Ht!==ct&&xt.push(Ht),ct=Ht}var At=xt.length,ht=new Array(_t),st={};function Bt(We,it){ht[it]=We,st[We]=1}function gn(We,it){if(We&&"string"==typeof We&&!st[We])return Bt(We,it),!0}for(at=0;at<_t;at++){var hn=ot[at].uid;"number"==typeof hn&&(hn=String(hn)),gn(hn,at)||at<At&&gn(xt[at].uid,at)||Bt(l.randstr(st),at)}return ht}(W,oe),re._globalTransforms=(ne._context||{}).globalTransforms,x.supplyDataDefaults(oe,Z,V,re);var je=Object.keys(ke.x),Ie=Object.keys(ke.y);if(je.length>1&&Ie.length>1){for(r.getComponentMethod("grid","sizeDefaults")(V,re),q=0;q<je.length;q++)l.pushUnique(ye.xaxis,je[q]);for(q=0;q<Ie.length;q++)l.pushUnique(ye.yaxis,Ie[q]);for(var Ce in ze)l.pushUnique(ye.cartesian,Ce)}if(re._has=x._hasPlotType.bind(re),W.length===Z.length)for(q=0;q<Z.length;q++)_(Z[q],W[q]);x.supplyLayoutModuleDefaults(V,re,Z,ne._transitionData);var _e=re._visibleModules,we=[];for(q=0;q<_e.length;q++){var Se=_e[q].crossTraceDefaults;Se&&l.pushUnique(we,Se)}for(q=0;q<we.length;q++)we[q](Z,re);re._hasOnlyLargeSploms=1===re._basePlotModules.length&&"splom"===re._basePlotModules[0].name&&je.length>15&&Ie.length>15&&0===re.shapes.length&&0===re.images.length,x.linkSubplots(Z,re,W,K),x.cleanPlot(Z,re,W,K);var Oe=!(!K._has||!K._has("gl2d")),Be=!(!re._has||!re._has("gl2d")),He=!(!K._has||!K._has("cartesian"))||Oe,Xe=!(!re._has||!re._has("cartesian"))||Be;He&&!Xe?K._bgLayer.remove():Xe&&!He&&(re._shouldCreateBgLayer=!0),K._zoomlayer&&!ne._dragging&&d({_fullLayout:K}),function(Ye,ot){var at,ct=[];ot.meta&&(at=ot._meta={meta:ot.meta,layout:{meta:ot.meta}});for(var _t=0;_t<Ye.length;_t++){var xt=Ye[_t];xt.meta?ct[xt.index]=xt._meta={meta:xt.meta}:ot.meta&&(xt._meta={meta:ot.meta}),ot.meta&&(xt._meta.layout={meta:ot.meta})}ct.length&&(at||(at=ot._meta={}),at.data=ct)}(Z,re),_(re,K),r.getComponentMethod("colorscale","crossTraceDefaults")(Z,re),re._preGUI||(re._preGUI={}),re._tracePreGUI||(re._tracePreGUI={});var nt,et=re._tracePreGUI,qe={};for(nt in et)qe[nt]="old";for(q=0;q<Z.length;q++)qe[nt=Z[q]._fullInput.uid]||(et[nt]={}),qe[nt]="new";for(nt in qe)"old"===qe[nt]&&delete et[nt];S(re),r.getComponentMethod("rangeslider","makeData")(re),te||ie.length!==Z.length||x.supplyDefaultsUpdateCalc(ie,Z)}},x.supplyDefaultsUpdateCalc=function(ne,ae){for(var te=0;te<ae.length;te++){var K=ae[te],q=(ne[te]||[])[0];if(q&&q.trace){var re=q.trace;if(re._hasCalcTransform){var V,W,Z,oe=re._arrayAttrs;for(V=0;V<oe.length;V++)Z=l.nestedProperty(re,W=oe[V]).get().slice(),l.nestedProperty(K,W).set(Z)}q.trace=K}}},x.createTransitionData=function(ne){ne._transitionData||(ne._transitionData={}),ne._transitionData._frames||(ne._transitionData._frames=[]),ne._transitionData._frameHash||(ne._transitionData._frameHash={}),ne._transitionData._counter||(ne._transitionData._counter=0),ne._transitionData._interruptCallbacks||(ne._transitionData._interruptCallbacks=[])},x._hasPlotType=function(ne){var ae,te=this._basePlotModules||[];for(ae=0;ae<te.length;ae++)if(te[ae].name===ne)return!0;var K=this._modules||[];for(ae=0;ae<K.length;ae++){var q=K[ae].name;if(q===ne)return!0;var re=r.modules[q];if(re&&re.categories[ne])return!0}return!1},x.cleanPlot=function(ne,ae,te,K){var q,re,V=K._basePlotModules||[];for(q=0;q<V.length;q++){var W=V[q];W.clean&&W.clean(ne,ae,te,K)}var Z=K._has&&K._has("gl"),oe=ae._has&&ae._has("gl");Z&&!oe&&void 0!==K._glcontainer&&(K._glcontainer.selectAll(".gl-canvas").remove(),K._glcontainer.selectAll(".no-webgl").remove(),K._glcanvas=null);var ie=!!K._infolayer;e:for(q=0;q<te.length;q++){var ue=te[q].uid;for(re=0;re<ne.length;re++)if(ue===ne[re].uid)continue e;ie&&K._infolayer.select(".cb"+ue).remove()}},x.linkSubplots=function(ne,ae,te,K){var q,re,V=K._plots||{},W=ae._plots={},Z=ae._subplots,oe={_fullData:ne,_fullLayout:ae},ie=Z.cartesian.concat(Z.gl2d||[]);for(q=0;q<ie.length;q++){var ue,fe=ie[q],he=V[fe],de=o.getFromId(oe,fe,"x"),be=o.getFromId(oe,fe,"y");for(he?ue=W[fe]=he:(ue=W[fe]={}).id=fe,de._counterAxes.push(be._id),be._counterAxes.push(de._id),de._subplotsWith.push(fe),be._subplotsWith.push(fe),ue.xaxis=de,ue.yaxis=be,ue._hasClipOnAxisFalse=!1,re=0;re<ne.length;re++){var pe=ne[re];if(pe.xaxis===ue.xaxis._id&&pe.yaxis===ue.yaxis._id&&!1===pe.cliponaxis){ue._hasClipOnAxisFalse=!0;break}}}var Te,ye=o.list(oe,null,!0);for(q=0;q<ye.length;q++){var ke=null;(Te=ye[q]).overlaying&&(ke=o.getFromId(oe,Te.overlaying))&&ke.overlaying&&(Te.overlaying=!1,ke=null),Te._mainAxis=ke||Te,ke&&(Te.domain=ke.domain.slice()),Te._anchorAxis="free"===Te.anchor?null:o.getFromId(oe,Te.anchor)}for(q=0;q<ye.length;q++)if((Te=ye[q])._counterAxes.sort(o.idSort),Te._subplotsWith.sort(l.subplotSort),Te._mainSubplot=A(Te,ae),Te._counterAxes.length&&(Te.spikemode&&-1!==Te.spikemode.indexOf("across")||Te.automargin&&Te.mirror&&"free"!==Te.anchor||r.getComponentMethod("rangeslider","isVisible")(Te))){var ze=1,je=0;for(re=0;re<Te._counterAxes.length;re++){var Ie=o.getFromId(oe,Te._counterAxes[re]);ze=Math.min(ze,Ie.domain[0]),je=Math.max(je,Ie.domain[1])}ze<je&&(Te._counterDomainMin=ze,Te._counterDomainMax=je)}},x.clearExpandedTraceDefaultColors=function(ne){var ae,te,K;for(te=[],(ae=ne._module._colorAttrs)||(ne._module._colorAttrs=ae=[],u.crawl(ne._module.attributes,function(q,re,V,W){te[W]=re,te.length=W+1,"color"===q.valType&&void 0===q.dflt&&ae.push(te.join("."))})),K=0;K<ae.length;K++)l.nestedProperty(ne,"_input."+ae[K]).get()||l.nestedProperty(ne,ae[K]).set(null)},x.supplyDataDefaults=function(ne,ae,te,K){var q,re,V,W=K._modules,Z=K._visibleModules,oe=K._basePlotModules,ie=0,ue=0;function fe(Ce){ae.push(Ce);var _e=Ce._module;_e&&(l.pushUnique(W,_e),!0===Ce.visible&&l.pushUnique(Z,_e),l.pushUnique(oe,Ce._module.basePlotModule),ie++,!1!==Ce._input.visible&&ue++)}K._transformModules=[];var he={},de=[],pe=c.traceTemplater((te.template||{}).data||{});for(q=0;q<ne.length;q++){if((re=pe.newTrace(V=ne[q])).uid=K._traceUids[q],x.supplyTraceDefaults(V,re,ue,K,q),re.index=q,re._input=V,re._expandedIndex=ie,re.transforms&&re.transforms.length)for(var Te=!1!==V.visible&&!1===re.visible,ye=D(re,ae,te,K),ke=0;ke<ye.length;ke++){var ze=ye[ke],je={_template:re._template,type:re.type,uid:re.uid+ke};Te&&!1===ze.visible&&delete ze.visible,x.supplyTraceDefaults(ze,je,ie,K,q),_(je,ze),je.index=q,je._input=V,je._fullInput=re,je._expandedIndex=ie,je._expandedInput=ze,fe(je)}else re._fullInput=re,re._expandedInput=re,fe(re);r.traceIs(re,"carpetAxis")&&(he[re.carpet]=re),r.traceIs(re,"carpetDependent")&&de.push(q)}for(q=0;q<de.length;q++)if((re=ae[de[q]]).visible){var Ie=he[re.carpet];re._carpet=Ie,Ie&&Ie.visible?(re.xaxis=Ie.xaxis,re.yaxis=Ie.yaxis):re.visible=!1}},x.supplyAnimationDefaults=function(ne){var ae;ne=ne||{};var te={};function K(q,re){return l.coerce(ne||{},te,g,q,re)}if(K("mode"),K("direction"),K("fromcurrent"),Array.isArray(ne.frame))for(te.frame=[],ae=0;ae<ne.frame.length;ae++)te.frame[ae]=x.supplyAnimationFrameDefaults(ne.frame[ae]||{});else te.frame=x.supplyAnimationFrameDefaults(ne.frame||{});if(Array.isArray(ne.transition))for(te.transition=[],ae=0;ae<ne.transition.length;ae++)te.transition[ae]=x.supplyAnimationTransitionDefaults(ne.transition[ae]||{});else te.transition=x.supplyAnimationTransitionDefaults(ne.transition||{});return te},x.supplyAnimationFrameDefaults=function(ne){var ae={};function te(K,q){return l.coerce(ne||{},ae,g.frame,K,q)}return te("duration"),te("redraw"),ae},x.supplyAnimationTransitionDefaults=function(ne){var ae={};function te(K,q){return l.coerce(ne||{},ae,g.transition,K,q)}return te("duration"),te("easing"),ae},x.supplyFrameDefaults=function(ne){var ae={};function te(K,q){return l.coerce(ne,ae,y,K,q)}return te("group"),te("name"),te("traces"),te("baseframe"),te("data"),te("layout"),ae},x.supplyTraceDefaults=function(ne,ae,te,K,q){var re,V=K.colorway||f.defaults,W=V[te%V.length];function Z(ye,ke){return l.coerce(ne,ae,x.attributes,ye,ke)}var oe=Z("visible");Z("type"),Z("name",K._traceWord+" "+q),Z("uirevision",K.uirevision);var ie=x.getModule(ae);if(ae._module=ie,ie){var ue=ie.basePlotModule,fe=ue.attr,he=ue.attributes;if(fe&&he){var de=K._subplots,be="";if(oe||"gl2d"!==ue.name){if(Array.isArray(fe))for(re=0;re<fe.length;re++){var pe=fe[re],Te=l.coerce(ne,ae,he,pe);de[pe]&&l.pushUnique(de[pe],Te),be+=Te}else be=l.coerce(ne,ae,he,fe);de[ue.name]&&l.pushUnique(de[ue.name],be)}}}return oe&&(Z("customdata"),Z("ids"),Z("meta"),r.traceIs(ae,"showLegend")?(l.coerce(ne,ae,ie.attributes.showlegend?ie.attributes:x.attributes,"showlegend"),Z("legendgroup"),Z("legendgrouptitle.text")&&l.coerceFont(Z,"legendgrouptitle.font",l.extendFlat({},K.font,{size:Math.round(1.1*K.font.size)})),Z("legendrank"),ae._dfltShowLegend=!0):ae._dfltShowLegend=!1,ie&&ie.supplyDefaults(ne,ae,W,K),r.traceIs(ae,"noOpacity")||Z("opacity"),r.traceIs(ae,"notLegendIsolatable")&&(ae.visible=!!ae.visible),r.traceIs(ae,"noHover")||(ae.hovertemplate||l.coerceHoverinfo(ne,ae,K),"parcats"!==ae.type&&r.getComponentMethod("fx","supplyDefaults")(ne,ae,W,K)),ie&&ie.selectPoints&&Z("selectedpoints"),x.supplyTransformDefaults(ne,ae,K)),ae},x.hasMakesDataTransform=I,x.supplyTransformDefaults=function(ne,ae,te){if(ae._length||I(ne)){var K=te._globalTransforms||[],q=te._transformModules||[];if(Array.isArray(ne.transforms)||0!==K.length)for(var V=K.concat(ne.transforms||[]),W=ae.transforms=[],Z=0;Z<V.length;Z++){var oe,ie=V[Z],ue=ie.type,fe=E[ue],he=!(ie._module&&ie._module===fe),de=fe&&"function"==typeof fe.transform;fe||l.warn("Unrecognized transform type "+ue+"."),fe&&fe.supplyDefaults&&(he||de)?((oe=fe.supplyDefaults(ie,ae,te,ne)).type=ue,oe._module=fe,l.pushUnique(q,fe)):oe=l.extendFlat({},ie),W.push(oe)}}},x.supplyLayoutGlobalDefaults=function(ne,ae,te){function K(W,Z){return l.coerce(ne,ae,x.layoutAttributes,W,Z)}var q=ne.template;l.isPlainObject(q)&&(ae.template=q,ae._template=q.layout,ae._dataTemplate=q.data),K("autotypenumbers");var re=l.coerceFont(K,"font");K("title.text",ae._dfltTitle.plot),l.coerceFont(K,"title.font",{family:re.family,size:Math.round(1.4*re.size),color:re.color}),K("title.xref"),K("title.yref"),K("title.x"),K("title.y"),K("title.xanchor"),K("title.yanchor"),K("title.pad.t"),K("title.pad.r"),K("title.pad.b"),K("title.pad.l"),K("uniformtext.mode")&&K("uniformtext.minsize"),K("autosize",!(ne.width&&ne.height)),K("width"),K("height"),K("margin.l"),K("margin.r"),K("margin.t"),K("margin.b"),K("margin.pad"),K("margin.autoexpand"),ne.width&&ne.height&&x.sanitizeMargins(ae),r.getComponentMethod("grid","sizeDefaults")(ne,ae),K("paper_bgcolor"),K("separators",te.decimal+te.thousands),K("hidesources"),K("colorway"),K("datarevision");var V=K("uirevision");K("editrevision",V),K("selectionrevision",V),r.getComponentMethod("modebar","supplyLayoutDefaults")(ne,ae),r.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(ne,ae,K),K("meta"),l.isPlainObject(ne.transition)&&(K("transition.duration"),K("transition.easing"),K("transition.ordering")),r.getComponentMethod("calendars","handleDefaults")(ne,ae,"calendar"),r.getComponentMethod("fx","supplyLayoutGlobalDefaults")(ne,ae,K)},x.plotAutoSize=function(ne,ae,te){var K,q,re=ne._context||{},V=re.frameMargins,W=l.isPlotDiv(ne);if(W&&ne.emit("plotly_autosize"),re.fillFrame)K=window.innerWidth,q=window.innerHeight,document.body.style.overflow="hidden";else{var Z=W?window.getComputedStyle(ne):{};if(K=R(Z.width)||R(Z.maxWidth)||te.width,q=R(Z.height)||R(Z.maxHeight)||te.height,p(V)&&V>0){var oe=1-2*V;K=Math.round(oe*K),q=Math.round(oe*q)}}var ie=x.layoutAttributes.width.min,ue=x.layoutAttributes.height.min;K<ie&&(K=ie),q<ue&&(q=ue);var fe=!ae.width&&Math.abs(te.width-K)>1,he=!ae.height&&Math.abs(te.height-q)>1;(he||fe)&&(fe&&(te.width=K),he&&(te.height=q)),ne._initialAutoSize||(ne._initialAutoSize={width:K,height:q}),x.sanitizeMargins(te)},x.supplyLayoutModuleDefaults=function(ne,ae,te,K){var q,re,V,W=r.componentsRegistry,Z=ae._basePlotModules,oe=r.subplotsRegistry.cartesian;for(q in W)(V=W[q]).includeBasePlot&&V.includeBasePlot(ne,ae);for(var ie in Z.length||Z.push(oe),ae._has("cartesian")&&(r.getComponentMethod("grid","contentDefaults")(ne,ae),oe.finalizeSubplots(ne,ae)),ae._subplots)ae._subplots[ie].sort(l.subplotSort);for(re=0;re<Z.length;re++)(V=Z[re]).supplyLayoutDefaults&&V.supplyLayoutDefaults(ne,ae,te);var ue=ae._modules;for(re=0;re<ue.length;re++)(V=ue[re]).supplyLayoutDefaults&&V.supplyLayoutDefaults(ne,ae,te);var fe=ae._transformModules;for(re=0;re<fe.length;re++)(V=fe[re]).supplyLayoutDefaults&&V.supplyLayoutDefaults(ne,ae,te,K);for(q in W)(V=W[q]).supplyLayoutDefaults&&V.supplyLayoutDefaults(ne,ae,te)},x.purge=function(ne){var ae=ne._fullLayout||{};void 0!==ae._glcontainer&&(ae._glcontainer.selectAll(".gl-canvas").remove(),ae._glcontainer.remove(),ae._glcanvas=null),ae._modeBar&&ae._modeBar.destroy(),ne._transitionData&&(ne._transitionData._interruptCallbacks&&(ne._transitionData._interruptCallbacks.length=0),ne._transitionData._animationRaf&&window.cancelAnimationFrame(ne._transitionData._animationRaf)),l.clearThrottle(),l.clearResponsive(ne),delete ne.data,delete ne.layout,delete ne._fullData,delete ne._fullLayout,delete ne.calcdata,delete ne.empty,delete ne.fid,delete ne.undoqueue,delete ne.undonum,delete ne.autoplay,delete ne.changed,delete ne._promises,delete ne._redrawTimer,delete ne._hmlumcount,delete ne._hmpixcount,delete ne._transitionData,delete ne._transitioning,delete ne._initialAutoSize,delete ne._transitioningWithDuration,delete ne._dragging,delete ne._dragged,delete ne._dragdata,delete ne._hoverdata,delete ne._snapshotInProgress,delete ne._editing,delete ne._mouseDownTime,delete ne._legendMouseDownTime,ne.removeAllListeners&&ne.removeAllListeners()},x.style=function(ne){var ae,te=ne._fullLayout._visibleModules,K=[];for(ae=0;ae<te.length;ae++){var q=te[ae];q.style&&l.pushUnique(K,q.style)}for(ae=0;ae<K.length;ae++)K[ae](ne)},x.sanitizeMargins=function(ne){if(ne&&ne.margin){var ae,te=ne.width,K=ne.height,q=ne.margin,V=K-(q.t+q.b);te-(q.l+q.r)<0&&(ae=(te-1)/(q.l+q.r),q.l=Math.floor(ae*q.l),q.r=Math.floor(ae*q.r)),V<0&&(ae=(K-1)/(q.t+q.b),q.t=Math.floor(ae*q.t),q.b=Math.floor(ae*q.b))}},x.clearAutoMarginIds=function(ne){ne._fullLayout._pushmarginIds={}},x.allowAutoMargin=function(ne,ae){ne._fullLayout._pushmarginIds[ae]=1},x.autoMargin=function(ne,ae,te){var K=ne._fullLayout,q=K.width,re=K.height,V=K.margin,W=l.constrain(q-V.l-V.r,2,64),Z=l.constrain(re-V.t-V.b,2,64),oe=Math.max(0,q-W),ie=Math.max(0,re-Z),ue=K._pushmargin,fe=K._pushmarginIds;if(!1!==V.autoexpand){if(te){var he=te.pad;if(void 0===he&&(he=Math.min(12,V.l,V.r,V.t,V.b)),oe){var de=(te.l+te.r)/oe;de>1&&(te.l/=de,te.r/=de)}if(ie){var be=(te.t+te.b)/ie;be>1&&(te.t/=be,te.b/=be)}ue[ae]={l:{val:void 0!==te.xl?te.xl:te.x,size:te.l+he},r:{val:void 0!==te.xr?te.xr:te.x,size:te.r+he},b:{val:void 0!==te.yb?te.yb:te.y,size:te.b+he},t:{val:void 0!==te.yt?te.yt:te.y,size:te.t+he}},fe[ae]=1}else delete ue[ae],delete fe[ae];if(!K._replotting)return x.doAutoMargin(ne)}},x.doAutoMargin=function(ne){var ae=ne._fullLayout,te=ae.width,K=ae.height;ae._size||(ae._size={}),S(ae);var q=ae._size,re=ae.margin,V=l.extendFlat({},q),W=re.l,Z=re.r,oe=re.t,ie=re.b,ue=ae._pushmargin,fe=ae._pushmarginIds;if(!1!==ae.margin.autoexpand){for(var he in ue)fe[he]||delete ue[he];for(var de in ue.base={l:{val:0,size:W},r:{val:1,size:Z},t:{val:1,size:oe},b:{val:0,size:ie}},ue){var be=ue[de].l||{},pe=ue[de].b||{},Te=be.val,ye=be.size,ke=pe.val,ze=pe.size;for(var je in ue){if(p(ye)&&ue[je].r){var Ie=ue[je].r.val,Ce=ue[je].r.size;if(Ie>Te){var _e=(ye*Ie+(Ce-te)*Te)/(Ie-Te),we=(Ce*(1-Te)+(ye-te)*(1-Ie))/(Ie-Te);_e+we>W+Z&&(W=_e,Z=we)}}if(p(ze)&&ue[je].t){var Se=ue[je].t.val,Oe=ue[je].t.size;if(Se>ke){var Be=(ze*Se+(Oe-K)*ke)/(Se-ke),He=(Oe*(1-ke)+(ze-K)*(1-Se))/(Se-ke);Be+He>ie+oe&&(ie=Be,oe=He)}}}}}var _t,Xe=l.constrain(te-re.l-re.r,2,64),nt=l.constrain(K-re.t-re.b,2,64),et=Math.max(0,te-Xe),qe=Math.max(0,K-nt);if(et){var Ye=(W+Z)/et;Ye>1&&(W/=Ye,Z/=Ye)}if(qe){var ot=(ie+oe)/qe;ot>1&&(ie/=ot,oe/=ot)}if(q.l=Math.round(W),q.r=Math.round(Z),q.t=Math.round(oe),q.b=Math.round(ie),q.p=Math.round(re.pad),q.w=Math.round(te)-q.l-q.r,q.h=Math.round(K)-q.t-q.b,!ae._replotting&&x.didMarginChange(V,q)){"_redrawFromAutoMarginCount"in ae?ae._redrawFromAutoMarginCount++:ae._redrawFromAutoMarginCount=1;var at=3*(1+Object.keys(fe).length);if(ae._redrawFromAutoMarginCount<at)return r.call("_doPlot",ne);ae._size=V,l.warn("Too many auto-margin redraws.")}_t=o.list(ne,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(xt){for(var Ht=0;Ht<_t.length;Ht++){var At=_t[Ht][xt];At&&At()}})};var N=["l","r","t","b","p","w","h"];function B(ne,ae,te){var K=!1,re=l.syncOrAsync([x.previousPromises,function(){if(ne._transitionData)return ne._transitioning=!1,function(V){var W=Promise.resolve();if(!V)return W;for(;V.length;)W=W.then(V.shift());return W}(ne._transitionData._interruptCallbacks)},te.prepareFn,x.rehover,function(){return ne.emit("plotly_transitioning",[]),new Promise(function(V){ne._transitioning=!0,ae.duration>0&&(ne._transitioningWithDuration=!0),ne._transitionData._interruptCallbacks.push(function(){K=!0}),te.redraw&&ne._transitionData._interruptCallbacks.push(function(){return r.call("redraw",ne)}),ne._transitionData._interruptCallbacks.push(function(){ne.emit("plotly_transitioninterrupted",[])});var W=0,Z=0;function oe(){return W++,function(){var ie;Z++,K||Z!==W||(ie=V,!ne._transitionData||(function(ue){if(ue)for(;ue.length;)ue.shift()}(ne._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(te.redraw)return r.call("redraw",ne)}).then(function(){ne._transitioning=!1,ne._transitioningWithDuration=!1,ne.emit("plotly_transitioned",[])}).then(ie)))}}te.runFn(oe),setTimeout(oe())})}],ne);return re&&re.then||(re=Promise.resolve()),re.then(function(){return ne})}x.didMarginChange=function(ne,ae){for(var te=0;te<N.length;te++){var K=N[te],q=ne[K],re=ae[K];if(!p(q)||Math.abs(re-q)>1)return!0}return!1},x.graphJson=function(ne,ae,te,K,q,re){(q&&ae&&!ne._fullData||q&&!ae&&!ne._fullLayout)&&x.supplyDefaults(ne);var W=q?ne._fullLayout:ne.layout,Z=(ne._transitionData||{})._frames;function oe(fe,he){if("function"==typeof fe)return he?"_function_":null;if(l.isPlainObject(fe)){var de,be={};return Object.keys(fe).sort().forEach(function(pe){if(-1===["_","["].indexOf(pe.charAt(0)))if("function"!=typeof fe[pe]){if("keepdata"===te){if("src"===pe.substr(pe.length-3))return}else if("keepstream"===te){if("string"==typeof(de=fe[pe+"src"])&&de.indexOf(":")>0&&!l.isPlainObject(fe.stream))return}else if("keepall"!==te&&"string"==typeof(de=fe[pe+"src"])&&de.indexOf(":")>0)return;be[pe]=oe(fe[pe],he)}else he&&(be[pe]="_function")}),be}return Array.isArray(fe)?fe.map(function(pe){return oe(pe,he)}):l.isTypedArray(fe)?l.simpleMap(fe,l.identity):l.isJSDate(fe)?l.ms2DateTimeLocal(+fe):fe}var ie={data:((q?ne._fullData:ne.data)||[]).map(function(fe){var he=oe(fe);return ae&&delete he.fit,he})};if(!ae&&(ie.layout=oe(W),q)){var ue=W._size;ie.layout.computed={margin:{b:ue.b,l:ue.l,r:ue.r,t:ue.t}}}return Z&&(ie.frames=oe(Z)),re&&(ie.config=oe(ne._context,!0)),"object"===K?ie:JSON.stringify(ie)},x.modifyFrames=function(ne,ae){var te,K,q,re=ne._transitionData._frames,V=ne._transitionData._frameHash;for(te=0;te<ae.length;te++)switch((K=ae[te]).type){case"replace":var W=(re[K.index]||{}).name,Z=(q=K.value).name;re[K.index]=V[Z]=q,Z!==W&&(delete V[W],V[Z]=q);break;case"insert":V[(q=K.value).name]=q,re.splice(K.index,0,q);break;case"delete":delete V[(q=re[K.index]).name],re.splice(K.index,1)}return Promise.resolve()},x.computeFrame=function(ne,ae){var te,K,q,re,V=ne._transitionData._frameHash;if(!ae)throw new Error("computeFrame must be given a string frame name");var W=V[ae.toString()];if(!W)return!1;for(var Z=[W],oe=[W.name];W.baseframe&&(W=V[W.baseframe.toString()])&&-1===oe.indexOf(W.name);)Z.push(W),oe.push(W.name);for(var ie={};W=Z.pop();)if(W.layout&&(ie.layout=x.extendLayout(ie.layout,W.layout)),W.data){if(ie.data||(ie.data=[]),!(K=W.traces))for(K=[],te=0;te<W.data.length;te++)K[te]=te;for(ie.traces||(ie.traces=[]),te=0;te<W.data.length;te++)null!=(q=K[te])&&(-1===(re=ie.traces.indexOf(q))&&(ie.traces[re=ie.data.length]=q),ie.data[re]=x.extendTrace(ie.data[re],W.data[te]))}return ie},x.recomputeFrameHash=function(ne){for(var ae=ne._transitionData._frameHash={},te=ne._transitionData._frames,K=0;K<te.length;K++){var q=te[K];q&&q.name&&(ae[q.name]=q)}},x.extendObjectWithContainers=function(ne,ae,te){var K,q,re,V,W,Z,oe,ie=l.extendDeepNoArrays({},ae||{}),ue=l.expandObjectPaths(ie),fe={};if(te&&te.length)for(re=0;re<te.length;re++)void 0===(q=(K=l.nestedProperty(ue,te[re])).get())?l.nestedProperty(fe,te[re]).set(null):(K.set(null),l.nestedProperty(fe,te[re]).set(q));if(ne=l.extendDeepNoArrays(ne||{},ue),te&&te.length)for(re=0;re<te.length;re++)if(Z=l.nestedProperty(fe,te[re]).get()){for(oe=(W=l.nestedProperty(ne,te[re])).get(),Array.isArray(oe)||W.set(oe=[]),V=0;V<Z.length;V++){var he=Z[V];oe[V]=null===he?null:x.extendObjectWithContainers(oe[V],he)}W.set(oe)}return ne},x.dataArrayContainers=["transforms","dimensions"],x.layoutArrayContainers=r.layoutArrayContainers,x.extendTrace=function(ne,ae){return x.extendObjectWithContainers(ne,ae,x.dataArrayContainers)},x.extendLayout=function(ne,ae){return x.extendObjectWithContainers(ne,ae,x.layoutArrayContainers)},x.transition=function(ne,ae,te,K,q,re){var V={redraw:q.redraw},W={},Z=[];return V.prepareFn=function(){for(var oe=Array.isArray(ae)?ae.length:0,ie=K.slice(0,oe),ue=0;ue<ie.length;ue++){var fe=ie[ue],he=ne._fullData[fe]._module;if(he){if(he.animatable){var de=he.basePlotModule.name;W[de]||(W[de]=[]),W[de].push(fe)}ne.data[ie[ue]]=x.extendTrace(ne.data[ie[ue]],ae[ue])}}var be=l.expandObjectPaths(l.extendDeepNoArrays({},te)),pe=/^[xy]axis[0-9]*$/;for(var Te in be)pe.test(Te)&&delete be[Te].range;x.extendLayout(ne.layout,be),delete ne.calcdata,x.supplyDefaults(ne),x.doCalcdata(ne);var ye=l.expandObjectPaths(te);if(ye){var ke=ne._fullLayout._plots;for(var ze in ke){var je=ke[ze],Ie=je.xaxis,Ce=je.yaxis,_e=Ie.range.slice(),we=Ce.range.slice(),Se=null,Oe=null,Be=null,He=null;Array.isArray(ye[Ie._name+".range"])?Se=ye[Ie._name+".range"].slice():Array.isArray((ye[Ie._name]||{}).range)&&(Se=ye[Ie._name].range.slice()),Array.isArray(ye[Ce._name+".range"])?Oe=ye[Ce._name+".range"].slice():Array.isArray((ye[Ce._name]||{}).range)&&(Oe=ye[Ce._name].range.slice()),_e&&Se&&(Ie.r2l(_e[0])!==Ie.r2l(Se[0])||Ie.r2l(_e[1])!==Ie.r2l(Se[1]))&&(Be={xr0:_e,xr1:Se}),we&&Oe&&(Ce.r2l(we[0])!==Ce.r2l(Oe[0])||Ce.r2l(we[1])!==Ce.r2l(Oe[1]))&&(He={yr0:we,yr1:Oe}),(Be||He)&&Z.push(l.extendFlat({plotinfo:je},Be,He))}}return Promise.resolve()},V.runFn=function(oe){var ie,ue,fe=ne._fullLayout._basePlotModules,he=Z.length;if(te)for(ue=0;ue<fe.length;ue++)fe[ue].transitionAxes&&fe[ue].transitionAxes(ne,Z,re,oe);for(var de in he?((ie=l.extendFlat({},re)).duration=0,delete W.cartesian):ie=re,W){var be=W[de];ne._fullData[be[0]]._module.basePlotModule.plot(ne,be,ie,oe)}},B(ne,re,V)},x.transitionFromReact=function(ne,ae,te,K){var q=ne._fullLayout,re=q.transition,V={},W=[];return V.prepareFn=function(){var Z=q._plots;for(var oe in V.redraw=!1,"some"===ae.anim&&(V.redraw=!0),"some"===te.anim&&(V.redraw=!0),Z){var ie=Z[oe],ue=ie.xaxis,fe=ie.yaxis,he=K[ue._name].range.slice(),de=K[fe._name].range.slice(),be=ue.range.slice(),pe=fe.range.slice();ue.setScale(),fe.setScale();var Te=null,ye=null;ue.r2l(he[0])===ue.r2l(be[0])&&ue.r2l(he[1])===ue.r2l(be[1])||(Te={xr0:he,xr1:be}),fe.r2l(de[0])===fe.r2l(pe[0])&&fe.r2l(de[1])===fe.r2l(pe[1])||(ye={yr0:de,yr1:pe}),(Te||ye)&&W.push(l.extendFlat({plotinfo:ie},Te,ye))}return Promise.resolve()},V.runFn=function(Z){for(var oe,ie,ue,fe=ne._fullData,he=ne._fullLayout._basePlotModules,de=[],be=0;be<fe.length;be++)de.push(be);function pe(){if(ne._fullLayout)for(var ye=0;ye<he.length;ye++)he[ye].transitionAxes&&he[ye].transitionAxes(ne,W,oe,Z)}function Te(){if(ne._fullLayout)for(var ye=0;ye<he.length;ye++)he[ye].plot(ne,ue,ie,Z)}W.length&&ae.anim?"traces first"===re.ordering?(oe=l.extendFlat({},re,{duration:0}),ue=de,ie=re,setTimeout(pe,re.duration),Te()):(oe=re,ue=null,ie=l.extendFlat({},re,{duration:0}),setTimeout(Te,oe.duration),pe()):W.length?(oe=re,pe()):ae.anim&&(ue=de,ie=re,Te())},B(ne,re,V)},x.doCalcdata=function(ne,ae){var te,K,q,re,V=o.list(ne),W=ne._fullData,Z=ne._fullLayout,oe=new Array(W.length),ie=(ne.calcdata||[]).slice();for(ne.calcdata=oe,Z._numBoxes=0,Z._numViolins=0,Z._violinScaleGroupStats={},ne._hmpixcount=0,ne._hmlumcount=0,Z._piecolormap={},Z._sunburstcolormap={},Z._treemapcolormap={},Z._iciclecolormap={},Z._funnelareacolormap={},q=0;q<W.length;q++)Array.isArray(ae)&&-1===ae.indexOf(q)&&(oe[q]=ie[q]);for(q=0;q<W.length;q++)(te=W[q])._arrayAttrs=u.findArrayAttributes(te),te._extremes={};var ue=Z._subplots.polar||[];for(q=0;q<ue.length;q++)V.push(Z[ue[q]].radialaxis,Z[ue[q]].angularaxis);for(var fe in Z._colorAxes){var he=Z[fe];!1!==he.cauto&&(delete he.cmin,delete he.cmax)}var de=!1;function be(ye){if(K=(te=W[ye])._module,!0===te.visible&&te.transforms){if(K&&K.calc){var ke=K.calc(ne,te);ke[0]&&ke[0].t&&ke[0].t._scene&&delete ke[0].t._scene.dirty}for(re=0;re<te.transforms.length;re++){var ze=te.transforms[re];(K=E[ze.type])&&K.calcTransform&&(te._hasCalcTransform=!0,de=!0,K.calcTransform(ne,te,ze))}}}function pe(ye,ke){if(!!(K=(te=W[ye])._module).isContainer===ke){var ze=[];if(!0===te.visible&&0!==te._length){delete te._indexToPoints;var je=te.transforms||[];for(re=je.length-1;re>=0;re--)if(je[re].enabled){te._indexToPoints=je[re]._indexToPoints;break}K&&K.calc&&(ze=K.calc(ne,te))}Array.isArray(ze)&&ze[0]||(ze=[{x:s,y:s}]),ze[0].t||(ze[0].t={}),ze[0].trace=te,oe[ye]=ze}}for(Y(V,W,Z),q=0;q<W.length;q++)pe(q,!0);for(q=0;q<W.length;q++)be(q);for(de&&Y(V,W,Z),q=0;q<W.length;q++)pe(q,!0);for(q=0;q<W.length;q++)pe(q,!1);Q(ne);var Te=function(ye,ke){var ze,je,Ie,Ce,_e,we=[];function Se(Ge,Pe,Ee){var Ne=Pe._id.charAt(0);if("histogram2dcontour"===Ge){var Ve=Pe._counterAxes[0],Ke=o.getFromId(ke,Ve),bt="x"===Ne||"x"===Ve&&"category"===Ke.type,gt="y"===Ne||"y"===Ve&&"category"===Ke.type;return function(pt,St){return 0===pt||0===St||bt&&pt===Ee[St].length-1||gt&&St===Ee.length-1?-1:("y"===Ne?St:pt)-1}}return function(pt,St){return"y"===Ne?St:pt}}var Oe={min:function(Ge){return l.aggNums(Math.min,null,Ge)},max:function(Ge){return l.aggNums(Math.max,null,Ge)},sum:function(Ge){return l.aggNums(function(Pe,Ee){return Pe+Ee},null,Ge)},total:function(Ge){return l.aggNums(function(Pe,Ee){return Pe+Ee},null,Ge)},mean:function(Ge){return l.mean(Ge)},median:function(Ge){return l.median(Ge)}};for(ze=0;ze<ye.length;ze++){var Be=ye[ze];if("category"===Be.type){var He=Be.categoryorder.match(H);if(He){var Xe=He[1],nt=He[2],et=Be._id.charAt(0),qe="x"===et,Ye=[];for(je=0;je<Be._categories.length;je++)Ye.push([Be._categories[je],[]]);for(je=0;je<Be._traceIndices.length;je++){var ot=Be._traceIndices[je],at=ke._fullData[ot];if(!0===at.visible){var ct=at.type;r.traceIs(at,"histogram")&&(delete at._xautoBinFinished,delete at._yautoBinFinished);var _t="splom"===ct,xt="scattergl"===ct,Ht=ke.calcdata[ot];for(Ie=0;Ie<Ht.length;Ie++){var At,ht,st=Ht[Ie];if(_t){var Bt=at._axesDim[Be._id];if(!qe){var gn=at._diag[Bt][0];gn&&(Be=ke._fullLayout[o.id2name(gn)])}var hn=st.trace.dimensions[Bt].values;for(Ce=0;Ce<hn.length;Ce++)for(At=Be._categoriesMap[hn[Ce]],_e=0;_e<st.trace.dimensions.length;_e++)_e!==Bt&&Ye[At][1].push(st.trace.dimensions[_e].values[Ce])}else if(xt){for(Ce=0;Ce<st.t.x.length;Ce++)qe?(At=st.t.x[Ce],ht=st.t.y[Ce]):(At=st.t.y[Ce],ht=st.t.x[Ce]),Ye[At][1].push(ht);st.t&&st.t._scene&&delete st.t._scene.dirty}else if(st.hasOwnProperty("z")){var it=Se(at.type,Be,ht=st.z);for(Ce=0;Ce<ht.length;Ce++)for(_e=0;_e<ht[Ce].length;_e++)(At=it(_e,Ce))+1&&Ye[At][1].push(ht[Ce][_e])}else for(void 0===(At=st.p)&&(At=st[et]),void 0===(ht=st.s)&&(ht=st.v),void 0===ht&&(ht=qe?st.y:st.x),Array.isArray(ht)||(ht=void 0===ht?[]:[ht]),Ce=0;Ce<ht.length;Ce++)Ye[At][1].push(ht[Ce])}}}Be._categoriesValue=Ye;var qt=[];for(je=0;je<Ye.length;je++)qt.push([Ye[je][0],Oe[Xe](Ye[je][1])]);qt.sort(function(Ge,Pe){return Ge[1]-Pe[1]}),Be._categoriesAggregatedValue=qt,Be._initialCategories=qt.map(function(Ge){return Ge[0]}),"descending"===nt&&Be._initialCategories.reverse(),we=we.concat(Be.sortByInitialCategories())}}}return we}(V,ne);if(Te.length){for(Z._numBoxes=0,Z._numViolins=0,q=0;q<Te.length;q++)pe(Te[q],!0);for(q=0;q<Te.length;q++)pe(Te[q],!1);Q(ne)}r.getComponentMethod("fx","calc")(ne),r.getComponentMethod("errorbars","calc")(ne)};var H=/(total|sum|min|max|mean|median) (ascending|descending)/;function Y(ne,ae,te){var K={};function q(Z){Z.clearCalc(),"multicategory"===Z.type&&Z.setupMultiCategory(ae),K[Z._id]=1}l.simpleMap(ne,q);for(var re=te._axisMatchGroups||[],V=0;V<re.length;V++)for(var W in re[V])K[W]||q(te[o.id2name(W)])}function Q(ne){var ae,te,K,q=ne._fullLayout,re=q._visibleModules,V={};for(te=0;te<re.length;te++){var W=re[te],Z=W.crossTraceCalc;if(Z){var oe=W.basePlotModule.name;V[oe]?l.pushUnique(V[oe],Z):V[oe]=[Z]}}for(K in V){var ie=V[K],ue=q._subplots[K];if(Array.isArray(ue))for(ae=0;ae<ue.length;ae++){var fe=ue[ae],he="cartesian"===K?q._plots[fe]:q[fe];for(te=0;te<ie.length;te++)ie[te](ne,he,fe)}else for(te=0;te<ie.length;te++)ie[te](ne)}}x.rehover=function(ne){ne._fullLayout._rehover&&ne._fullLayout._rehover()},x.redrag=function(ne){ne._fullLayout._redrag&&ne._fullLayout._redrag()},x.generalUpdatePerTraceModule=function(ne,ae,te,K){var q,re=ae.traceHash,V={};for(q=0;q<te.length;q++){var W=te[q],Z=W[0].trace;Z.visible&&(V[Z.type]=V[Z.type]||[],V[Z.type].push(W))}for(var oe in re)if(!V[oe]){var ie=re[oe][0];ie[0].trace.visible=!1,V[oe]=[ie]}for(var ue in V){var fe=V[ue];fe[0][0].trace._module.plot(ne,ae,l.filterVisible(fe),K)}ae.traceHash=V},x.plotBasePlot=function(ne,ae,te,K,q){var re=r.getModule(ne),V=v(ae.calcdata,re)[0];re.plot(ae,V,K,q)},x.cleanBasePlot=function(ne,ae,te,K,q){var re=q._has&&q._has(ne),V=te._has&&te._has(ne);re&&!V&&q["_"+ne+"layer"].selectAll("g.trace").remove()}},{"../components/color":666,"../constants/numerical":779,"../lib":803,"../plot_api/plot_schema":842,"../plot_api/plot_template":843,"../plots/get_data":891,"../registry":931,"./animation_attributes":848,"./attributes":850,"./cartesian/axis_ids":858,"./cartesian/handle_outline":865,"./command":881,"./font_attributes":883,"./frame_attributes":884,"./layout_attributes":908,"@plotly/d3":58,"d3-format":167,"d3-time-format":175,"fast-isnumeric":249}],918:[function(h,G,X){"use strict";G.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],919:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../lib/polygon").tester,b=i.findIndexOfMin,p=i.isAngleInsideSector,r=i.angleDelta,u=i.angleDist;function c(o,d,g,y){var v,_,w=y[0],x=y[1],E=f(Math.sin(d)-Math.sin(o)),k=f(Math.cos(d)-Math.cos(o)),C=Math.tan(g),L=f(1/C),P=E/k,A=x-P*w;return L?E&&k?_=C*(v=A/(C-P)):k?(v=x*L,_=x):(v=w,_=w*C):E&&k?(v=0,_=A):k?(v=0,_=x):v=_=NaN,[v,_]}function l(o,d,g,y){return i.isFullCircle([d,g])?function(v,_){var w,x=_.length,E=new Array(x+1);for(w=0;w<x;w++){var k=_[w];E[w]=[v*Math.cos(k),v*Math.sin(k)]}return E[w]=E[0].slice(),E}(o,y):function(v,_,w,x){var E,k,C=x.length,L=[];function P(Y){return[v*Math.cos(Y),v*Math.sin(Y)]}function A(Y,Q,ne){return c(Y,Q,ne,P(Y))}function I(Y){return i.mod(Y,C)}function D(Y){return p(Y,[_,w])}var R=b(x,function(Y){return D(Y)?u(Y,_):1/0}),S=A(x[R],x[I(R-1)],_);for(L.push(S),E=R,k=0;k<C;E++,k++){var N=x[I(E)];if(!D(N))break;L.push(P(N))}var B=b(x,function(Y){return D(Y)?u(Y,w):1/0}),H=A(x[B],x[I(B+1)],w);return L.push(H),L.push([0,0]),L.push(L[0].slice()),L}(o,d,g,y)}function f(o){return Math.abs(o)>1e-10?o:0}function s(o,d,g){d=d||0,g=g||0;for(var y=o.length,v=new Array(y),_=0;_<y;_++){var w=o[_];v[_]=[d+w[0],g-w[1]]}return v}G.exports={isPtInsidePolygon:function(o,d,g,y,v){if(!p(d,y))return!1;var _,w;g[0]<g[1]?(_=g[0],w=g[1]):(_=g[1],w=g[0]);var x=m(l(_,y[0],y[1],v)),E=m(l(w,y[0],y[1],v)),k=[o*Math.cos(d),o*Math.sin(d)];return E.contains(k)&&!x.contains(k)},findPolygonOffset:function(o,d,g,y){for(var v=1/0,_=1/0,w=l(o,d,g,y),x=0;x<w.length;x++){var E=w[x];v=Math.min(v,E[0]),_=Math.min(_,-E[1])}return[v,_]},findEnclosingVertexAngles:function(o,d){var g=b(d,function(v){var _=r(v,o);return _>0?_:1/0}),y=i.mod(g+1,d.length);return[d[g],d[y]]},findIntersectionXY:c,findXYatLength:function(o,d,g,y){var v=-d*g,_=d*d+1,w=2*(d*v-g),E=Math.sqrt(w*w-4*_*(v*v+g*g-o*o)),k=(-w+E)/(2*_),C=(-w-E)/(2*_);return[[k,d*k+v+y],[C,d*C+v+y]]},clampTiny:f,pathPolygon:function(o,d,g,y,v,_){return"M"+s(l(o,d,g,y),v,_).join("L")},pathPolygonAnnulus:function(o,d,g,y,v,_,w){var x,E;o<d?(x=o,E=d):(x=d,E=o);var k=s(l(x,g,y,v),_,w);return"M"+s(l(E,g,y,v),_,w).reverse().join("L")+"M"+k.join("L")}}},{"../../lib":803,"../../lib/polygon":815}],920:[function(h,G,X){"use strict";var i=h("../get_data").getSubplotCalcData,m=h("../../lib").counterRegex,b=h("./polar"),p=h("./constants"),r=p.attr,u=p.name,c=m(u),l={};l[r]={valType:"subplotid",dflt:u,editType:"calc"},G.exports={attr:r,name:u,idRoot:u,idRegex:c,attrRegex:c,attributes:l,layoutAttributes:h("./layout_attributes"),supplyLayoutDefaults:h("./layout_defaults"),plot:function(f){for(var s=f._fullLayout,o=f.calcdata,d=s._subplots[u],g=0;g<d.length;g++){var y=d[g],v=i(o,u,y),_=s[y]._subplot;_||(_=b(f,y),s[y]._subplot=_),_.plot(v,s,f._promises)}},clean:function(f,s,o,d){for(var g=d._subplots[u]||[],y=d._has&&d._has("gl"),v=s._has&&s._has("gl"),_=y&&!v,w=0;w<g.length;w++){var x=g[w],E=d[x]._subplot;if(!s[x]&&E)for(var k in E.framework.remove(),E.layers["radial-axis-title"].remove(),E.clipPaths)E.clipPaths[k].remove();_&&E._scene&&(E._scene.destroy(),E._scene=null)}},toSVG:h("../cartesian").toSVG}},{"../../lib":803,"../cartesian":868,"../get_data":891,"./constants":918,"./layout_attributes":921,"./layout_defaults":922,"./polar":923}],921:[function(h,G,X){"use strict";var i=h("../../components/color/attributes"),m=h("../cartesian/layout_attributes"),b=h("../domain").attributes,p=h("../../lib").extendFlat,r=h("../../plot_api/edit_types").overrideAll,u=r({color:m.color,showline:p({},m.showline,{dflt:!0}),linecolor:m.linecolor,linewidth:m.linewidth,showgrid:p({},m.showgrid,{dflt:!0}),gridcolor:m.gridcolor,gridwidth:m.gridwidth},"plot","from-root"),c=r({tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,showticklabels:m.showticklabels,showtickprefix:m.showtickprefix,tickprefix:m.tickprefix,showticksuffix:m.showticksuffix,ticksuffix:m.ticksuffix,showexponent:m.showexponent,exponentformat:m.exponentformat,minexponent:m.minexponent,separatethousands:m.separatethousands,tickfont:m.tickfont,tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,layer:m.layer},"plot","from-root"),l={visible:p({},m.visible,{dflt:!0}),type:p({},m.type,{values:["-","linear","log","date","category"]}),autotypenumbers:m.autotypenumbers,autorange:p({},m.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:p({},m.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:m.categoryorder,categoryarray:m.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:p({},m.title.text,{editType:"plot",dflt:""}),font:p({},m.title.font,{editType:"plot"}),editType:"plot"},hoverformat:m.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}};p(l,u,c);var f={visible:p({},m.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:m.autotypenumbers,categoryorder:m.categoryorder,categoryarray:m.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:m.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};p(f,u,c),G.exports={domain:b({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:i.background},radialaxis:l,angularaxis:f,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":665,"../../lib":803,"../../plot_api/edit_types":836,"../cartesian/layout_attributes":869,"../domain":882}],922:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/color"),b=h("../../plot_api/plot_template"),p=h("../subplot_defaults"),r=h("../get_data").getSubplotData,u=h("../cartesian/tick_value_defaults"),c=h("../cartesian/tick_mark_defaults"),l=h("../cartesian/tick_label_defaults"),f=h("../cartesian/category_order_defaults"),s=h("../cartesian/line_grid_defaults"),o=h("../cartesian/axis_autotype"),d=h("./layout_attributes"),g=h("./set_convert"),y=h("./constants"),v=y.axisNames;function _(x,E,k,C){var L=k("bgcolor");C.bgColor=m.combine(L,C.paper_bgcolor);var P=k("sector");k("hole");var A,I=r(C.fullData,y.name,C.id),D=C.layoutOut;function R(re,V){return k(A+"."+re,V)}for(var S=0;S<v.length;S++){i.isPlainObject(x[A=v[S]])||(x[A]={});var N=x[A],B=b.newContainer(E,A);B._id=B._name=A,B._attr=C.id+"."+A,B._traceIndices=I.map(function(re){return re._expandedIndex});var H=y.axisName2dataArray[A],Y=w(N,B,R,I,H,C);f(N,B,R,{axData:I,dataAttr:H});var Q,ne,ae=R("visible");switch(g(B,E,D),R("uirevision",E.uirevision),ae&&(ne=(Q=R("color"))===N.color?Q:C.font.color),B._m=1,A){case"radialaxis":var te=R("autorange",!B.isValidRange(N.range));N.autorange=te,!te||"linear"!==Y&&"-"!==Y||R("rangemode"),"reversed"===te&&(B._m=-1),R("range"),B.cleanRange("range",{dfltRange:[0,1]}),ae&&(R("side"),R("angle",P[0]),R("title.text"),i.coerceFont(R,"title.font",{family:C.font.family,size:i.bigFont(C.font.size),color:ne}));break;case"angularaxis":if("date"===Y){i.log("Polar plots do not support date angular axes yet.");for(var K=0;K<I.length;K++)I[K].visible=!1;Y=N.type=B.type="linear"}R("linear"===Y?"thetaunit":"period");var q=R("direction");R("rotation",{counterclockwise:0,clockwise:90}[q])}ae&&(u(N,B,R,B.type),l(N,B,R,B.type,{tickSuffixDflt:"degrees"===B.thetaunit?"\xb0":void 0}),c(N,B,R,{outerTicks:!0}),R("showticklabels")&&(i.coerceFont(R,"tickfont",{family:C.font.family,size:C.font.size,color:ne}),R("tickangle"),R("tickformat")),s(N,B,R,{dfltColor:Q,bgColor:C.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:d[A]}),R("layer")),"category"!==Y&&R("hoverformat"),B._input=N}"category"===E.angularaxis.type&&k("gridshape")}function w(x,E,k,C,L,P){var A=k("autotypenumbers",P.autotypenumbersDflt);if("-"===k("type")){for(var I,D=0;D<C.length;D++)if(C[D].visible){I=C[D];break}I&&I[L]&&(E.type=o(I[L],"gregorian",{noMultiCategory:!0,autotypenumbers:A})),"-"===E.type?E.type="linear":x.type=E.type}return E.type}G.exports=function(x,E,k){p(x,E,k,{type:y.name,attributes:d,handleDefaults:_,font:E.font,autotypenumbersDflt:E.autotypenumbers,paper_bgcolor:E.paper_bgcolor,fullData:k,layoutOut:E})}},{"../../components/color":666,"../../lib":803,"../../plot_api/plot_template":843,"../cartesian/axis_autotype":855,"../cartesian/category_order_defaults":859,"../cartesian/line_grid_defaults":871,"../cartesian/tick_label_defaults":876,"../cartesian/tick_mark_defaults":877,"../cartesian/tick_value_defaults":878,"../get_data":891,"../subplot_defaults":925,"./constants":918,"./layout_attributes":921,"./set_convert":924}],923:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("tinycolor2"),b=h("../../registry"),p=h("../../lib"),r=p.strRotate,u=p.strTranslate,c=h("../../components/color"),l=h("../../components/drawing"),f=h("../plots"),s=h("../../plots/cartesian/axes"),o=h("../cartesian/set_convert"),d=h("./set_convert"),g=h("../cartesian/autorange").doAutoRange,y=h("../cartesian/dragbox"),v=h("../../components/dragelement"),_=h("../../components/fx"),w=h("../../components/titles"),x=h("../cartesian/select").prepSelect,E=h("../cartesian/select").selectOnClick,k=h("../cartesian/select").clearSelect,C=h("../../lib/setcursor"),L=h("../../lib/clear_gl_canvases"),P=h("../../plot_api/subroutines").redrawReglTraces,A=h("../../constants/alignment").MID_SHIFT,I=h("./constants"),D=h("./helpers"),R=p._,S=p.mod,N=p.deg2rad,B=p.rad2deg;function H(te,K){this.id=K,this.gd=te,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var q=te._fullLayout;this.clipIds.forTraces="clip"+q._uid+K+"-for-traces",this.clipPaths.forTraces=q._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=q._polarlayer.append("g").attr("class",K),this.radialTickLayout=null,this.angularTickLayout=null}var Y=H.prototype;function Q(te){var K=te.ticks+String(te.ticklen)+String(te.showticklabels);return"side"in te&&(K+=te.side),K}function ne(te,K){return K[p.findIndexOfMin(K,function(q){return p.angleDist(te,q)})]}function ae(te,K,q){return K?(te.attr("display",null),te.attr(q)):te&&te.attr("display","none"),te}G.exports=function(te,K){return new H(te,K)},Y.plot=function(te,K){var q=K[this.id];this._hasClipOnAxisFalse=!1;for(var re=0;re<te.length;re++)if(!1===te[re][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(K,q),this.updateLayout(K,q),f.generalUpdatePerTraceModule(this.gd,this,te,q),this.updateFx(K,q)},Y.updateLayers=function(te,K){var q=this.layers,re=K.radialaxis,V=K.angularaxis,W=I.layerNames,Z=W.indexOf("frontplot"),oe=W.slice(0,Z),ie="below traces"===V.layer,ue="below traces"===re.layer;ie&&oe.push("angular-line"),ue&&oe.push("radial-line"),ie&&oe.push("angular-axis"),ue&&oe.push("radial-axis"),oe.push("frontplot"),ie||oe.push("angular-line"),ue||oe.push("radial-line"),ie||oe.push("angular-axis"),ue||oe.push("radial-axis");var fe=this.framework.selectAll(".polarsublayer").data(oe,String);fe.enter().append("g").attr("class",function(he){return"polarsublayer "+he}).each(function(he){var de=q[he]=i.select(this);switch(he){case"frontplot":de.append("g").classed("barlayer",!0),de.append("g").classed("scatterlayer",!0);break;case"backplot":de.append("g").classed("maplayer",!0);break;case"plotbg":q.bg=de.append("path");break;case"radial-grid":case"angular-grid":de.style("fill","none");break;case"radial-line":de.append("line").style("fill","none");break;case"angular-line":de.append("path").style("fill","none")}}),fe.order()},Y.updateLayout=function(te,K){var q=this.layers,re=te._size,V=K.radialaxis,W=K.angularaxis,Z=K.domain.x,oe=K.domain.y;this.xOffset=re.l+re.w*Z[0],this.yOffset=re.t+re.h*(1-oe[1]);var ie=this.xLength=re.w*(Z[1]-Z[0]),ue=this.yLength=re.h*(oe[1]-oe[0]),fe=K.sector;this.sectorInRad=fe.map(N);var he,de,be,pe,Te,et,at,ct,_t,xt,Ht,At,ht,st,Bt,ye=this.sectorBBox=(_t=(et=fe)[1]-(ct=et[0]),Ht=(xt=S(ct,360))+_t,At=Math.cos(N(xt)),ht=Math.sin(N(xt)),st=Math.cos(N(Ht)),Bt=Math.sin(N(Ht)),at=xt<=90&&Ht>=90||xt>90&&Ht>=450?1:ht<=0&&Bt<=0?0:Math.max(ht,Bt),[xt<=180&&Ht>=180||xt>180&&Ht>=540?-1:At>=0&&st>=0?0:Math.min(At,st),xt<=270&&Ht>=270||xt>270&&Ht>=630?-1:ht>=0&&Bt>=0?0:Math.min(ht,Bt),Ht>=360?1:At<=0&&st<=0?0:Math.max(At,st),at]),ke=ye[2]-ye[0],je=ue/ie,Ie=Math.abs((ye[3]-ye[1])/ke);je>Ie?(he=ie,Te=(ue-(de=ie*Ie))/re.h/2,be=[Z[0],Z[1]],pe=[oe[0]+Te,oe[1]-Te]):(de=ue,Te=(ie-(he=ue/Ie))/re.w/2,be=[Z[0]+Te,Z[1]-Te],pe=[oe[0],oe[1]]),this.xLength2=he,this.yLength2=de,this.xDomain2=be,this.yDomain2=pe;var Ce=this.xOffset2=re.l+re.w*be[0],_e=this.yOffset2=re.t+re.h*(1-pe[1]),we=this.radius=he/ke,Se=this.innerRadius=K.hole*we,Oe=this.cx=Ce-we*ye[0],Be=this.cy=_e+we*ye[3],He=this.cxx=Oe-Ce,Xe=this.cyy=Be-_e;this.radialAxis=this.mockAxis(te,K,V,{_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[V.side],_realSide:V.side,domain:[Se/re.w,we/re.w]}),this.angularAxis=this.mockAxis(te,K,W,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(te,K),this.updateAngularAxis(te,K),this.updateRadialAxis(te,K),this.updateRadialAxisTitle(te,K),this.xaxis=this.mockCartesianAxis(te,K,{_id:"x",domain:be}),this.yaxis=this.mockCartesianAxis(te,K,{_id:"y",domain:pe});var nt=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",nt).attr("transform",u(He,Xe)),q.frontplot.attr("transform",u(Ce,_e)).call(l.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),q.bg.attr("d",nt).attr("transform",u(Oe,Be)).call(c.fill,K.bgcolor)},Y.mockAxis=function(te,K,q,re){var V=p.extendFlat({},q,re);return d(V,K,te),V},Y.mockCartesianAxis=function(te,K,q){var re=this,V=q._id,W=p.extendFlat({type:"linear"},q);o(W,te);var Z={x:[0,2],y:[1,3]};return W.setRange=function(){var oe=re.sectorBBox,ie=Z[V],ue=re.radialAxis._rl,fe=(ue[1]-ue[0])/(1-K.hole);W.range=[oe[ie[0]]*fe,oe[ie[1]]*fe]},W.isPtWithinRange="x"===V?function(oe){return re.isPtInside(oe)}:function(){return!0},W.setRange(),W.setScale(),W},Y.doAutoRange=function(te,K){var q=this.gd,re=this.radialAxis,V=K.radialaxis;re.setScale(),g(q,re);var W=re.range;V.range=W.slice(),V._input.range=W.slice(),re._rl=[re.r2l(W[0],null,"gregorian"),re.r2l(W[1],null,"gregorian")]},Y.updateRadialAxis=function(te,K){var q=this,re=q.gd,V=q.layers,W=q.radius,Z=q.innerRadius,oe=q.cx,ie=q.cy,ue=K.radialaxis,fe=S(K.sector[0],360),he=q.radialAxis,de=Z<W;q.fillViewInitialKey("radialaxis.angle",ue.angle),q.fillViewInitialKey("radialaxis.range",he.range.slice()),he.setGeometry(),"auto"===he.tickangle&&fe>90&&fe<=270&&(he.tickangle=180);var be=function(Ce){return u(he.l2p(Ce.x)+Z,0)},pe=Q(ue);if(q.radialTickLayout!==pe&&(V["radial-axis"].selectAll(".xtick").remove(),q.radialTickLayout=pe),de){he.setScale();var Te=s.calcTicks(he),ye=s.clipEnds(he,Te),ke=s.getTickSigns(he)[2];s.drawTicks(re,he,{vals:Te,layer:V["radial-axis"],path:s.makeTickPath(he,0,ke),transFn:be,crisp:!1}),s.drawGrid(re,he,{vals:ye,layer:V["radial-grid"],path:function(Ce){return q.pathArc(he.r2p(Ce.x)+Z)},transFn:p.noop,crisp:!1}),s.drawLabels(re,he,{vals:Te,layer:V["radial-axis"],transFn:be,labelFns:s.makeLabelFns(he,0)})}var ze=q.radialAxisAngle=q.vangles?B(ne(N(ue.angle),q.vangles)):ue.angle,je=u(oe,ie),Ie=je+r(-ze);ae(V["radial-axis"],de&&(ue.showticklabels||ue.ticks),{transform:Ie}),ae(V["radial-grid"],de&&ue.showgrid,{transform:je}),ae(V["radial-line"].select("line"),de&&ue.showline,{x1:Z,y1:0,x2:W,y2:0,transform:Ie}).attr("stroke-width",ue.linewidth).call(c.stroke,ue.linecolor)},Y.updateRadialAxisTitle=function(te,K,q){var re=this.gd,V=this.radius,W=this.cx,Z=this.cy,oe=K.radialaxis,ie=this.id+"title",ue=void 0!==q?q:this.radialAxisAngle,fe=N(ue),he=Math.cos(fe),de=Math.sin(fe),be=0;if(oe.title){var pe=l.bBox(this.layers["radial-axis"].node()).height,Te=oe.title.font.size;be="counterclockwise"===oe.side?-pe-.4*Te:pe+.8*Te}this.layers["radial-axis-title"]=w.draw(re,ie,{propContainer:oe,propName:this.id+".radialaxis.title",placeholder:R(re,"Click to enter radial axis title"),attributes:{x:W+V/2*he+be*de,y:Z-V/2*de+be*he,"text-anchor":"middle"},transform:{rotate:-ue}})},Y.updateAngularAxis=function(te,K){var q=this,re=q.gd,V=q.layers,W=q.radius,Z=q.innerRadius,oe=q.cx,ie=q.cy,ue=K.angularaxis,fe=q.angularAxis;q.fillViewInitialKey("angularaxis.rotation",ue.rotation),fe.setGeometry(),fe.setScale();var he=function(Ie){return fe.t2g(Ie.x)};"linear"===fe.type&&"radians"===fe.thetaunit&&(fe.tick0=B(fe.tick0),fe.dtick=B(fe.dtick));var de=function(Ie){return u(oe+W*Math.cos(Ie),ie-W*Math.sin(Ie))},be=s.makeLabelFns(fe,0).labelStandoff,pe={xFn:function(Ie){var Ce=he(Ie);return Math.cos(Ce)*be},yFn:function(Ie){var Ce=he(Ie),_e=Math.sin(Ce)>0?.2:1;return-Math.sin(Ce)*(be+Ie.fontSize*_e)+Math.abs(Math.cos(Ce))*(Ie.fontSize*A)},anchorFn:function(Ie){var Ce=he(Ie),_e=Math.cos(Ce);return Math.abs(_e)<.1?"middle":_e>0?"start":"end"},heightFn:function(Ie,Ce,_e){var we=he(Ie);return-.5*(1+Math.sin(we))*_e}},Te=Q(ue);q.angularTickLayout!==Te&&(V["angular-axis"].selectAll("."+fe._id+"tick").remove(),q.angularTickLayout=Te);var ye,ke=s.calcTicks(fe);if("linear"===K.gridshape?(ye=ke.map(he),p.angleDelta(ye[0],ye[1])<0&&(ye=ye.slice().reverse())):ye=null,q.vangles=ye,"category"===fe.type&&(ke=ke.filter(function(Ie){return p.isAngleInsideSector(he(Ie),q.sectorInRad)})),fe.visible){var ze="inside"===fe.ticks?-1:1;s.drawTicks(re,fe,{vals:ke,layer:V["angular-axis"],path:"M"+ze*((fe.linewidth||1)/2)+",0h"+ze*fe.ticklen,transFn:function(Ie){var Ce=he(Ie);return de(Ce)+r(-B(Ce))},crisp:!1}),s.drawGrid(re,fe,{vals:ke,layer:V["angular-grid"],path:function(Ie){var Ce=he(Ie),_e=Math.cos(Ce),we=Math.sin(Ce);return"M"+[oe+Z*_e,ie-Z*we]+"L"+[oe+W*_e,ie-W*we]},transFn:p.noop,crisp:!1}),s.drawLabels(re,fe,{vals:ke,layer:V["angular-axis"],repositionOnUpdate:!0,transFn:function(Ie){return de(he(Ie))},labelFns:pe})}ae(V["angular-line"].select("path"),ue.showline,{d:q.pathSubplot(),transform:u(oe,ie)}).attr("stroke-width",ue.linewidth).call(c.stroke,ue.linecolor)},Y.updateFx=function(te,K){this.gd._context.staticPlot||(this.updateAngularDrag(te),this.updateRadialDrag(te,K,0),this.updateRadialDrag(te,K,1),this.updateMainDrag(te))},Y.updateMainDrag=function(te){var K,q,re=this,V=re.gd,Z=te._zoomlayer,oe=I.MINZOOM,ie=I.OFFEDGE,ue=re.radius,fe=re.innerRadius,he=re.cx,de=re.cy,be=re.cxx,pe=re.cyy,Te=re.sectorInRad,ye=re.vangles,ke=re.radialAxis,ze=D.clampTiny,je=D.findXYatLength,Ie=D.findEnclosingVertexAngles,Ce=I.cornerHalfWidth,_e=I.cornerLen/2,we=y.makeDragger(re.layers,"path","maindrag","crosshair");i.select(we).attr("d",re.pathSubplot()).attr("transform",u(he,de));var Se,Oe,Be,He,Xe,nt,et,qe,Ye,ot={element:we,gd:V,subplot:re.id,plotinfo:{id:re.id,xaxis:re.xaxis,yaxis:re.yaxis},xaxes:[re.xaxis],yaxes:[re.yaxis]};function at(Ge,Pe){return Math.sqrt(Ge*Ge+Pe*Pe)}function ct(Ge,Pe){return at(Ge-be,Pe-pe)}function _t(Ge,Pe){return Math.atan2(pe-Pe,Ge-be)}function xt(Ge,Pe){return[Ge*Math.cos(Pe),Ge*Math.sin(-Pe)]}function Ht(Ge,Pe){if(0===Ge)return re.pathSector(2*Ce);var Ee=_e/Ge,Ne=Pe-Ee,Ve=Pe+Ee,Ke=Math.max(0,Math.min(Ge,ue)),bt=Ke-Ce,gt=Ke+Ce;return"M"+xt(bt,Ne)+"A"+[bt,bt]+" 0,0,0 "+xt(bt,Ve)+"L"+xt(gt,Ve)+"A"+[gt,gt]+" 0,0,1 "+xt(gt,Ne)+"Z"}function At(Ge,Pe,Ee){if(0===Ge)return re.pathSector(2*Ce);var Ne,Ve,Ke=xt(Ge,Pe),bt=xt(Ge,Ee),gt=ze((Ke[0]+bt[0])/2),pt=ze((Ke[1]+bt[1])/2);if(gt&&pt){var St=pt/gt,jt=-1/St,Lt=je(Ce,St,gt,pt);Ne=je(_e,jt,Lt[0][0],Lt[0][1]),Ve=je(_e,jt,Lt[1][0],Lt[1][1])}else{var Vt,mt;pt?(Vt=_e,mt=Ce):(Vt=Ce,mt=_e),Ne=[[gt-Vt,pt-mt],[gt+Vt,pt-mt]],Ve=[[gt-Vt,pt+mt],[gt+Vt,pt+mt]]}return"M"+Ne.join("L")+"L"+Ve.reverse().join("L")+"Z"}function ht(Ge,Pe){return Pe=Math.max(Math.min(Pe,ue),fe),Ge<ie?Ge=0:ue-Ge<ie?Ge=ue:Pe<ie?Pe=0:ue-Pe<ie&&(Pe=ue),Math.abs(Pe-Ge)>oe?(Ge<Pe?(Be=Ge,He=Pe):(Be=Pe,He=Ge),!0):(Be=null,He=null,!1)}function st(Ge,Pe){Pe=Pe||"M0,0Z",qe.attr("d",Ge=Ge||Xe),Ye.attr("d",Pe),y.transitionZoombox(qe,Ye,nt,et),nt=!0;var Ee={};it(Ee),V.emit("plotly_relayouting",Ee)}function Bt(Ge,Pe){var Ee,Ne,Ve=Se+(Ge*=K),Ke=Oe+(Pe*=q),bt=ct(Se,Oe),gt=Math.min(ct(Ve,Ke),ue),pt=_t(Se,Oe);ht(bt,gt)&&(Ee=Xe+re.pathSector(He),Be&&(Ee+=re.pathSector(Be)),Ne=Ht(Be,pt)+Ht(He,pt)),st(Ee,Ne)}function gn(Ge,Pe,Ee,Ne){var Ve=D.findIntersectionXY(Ee,Ne,Ee,[Ge-be,pe-Pe]);return at(Ve[0],Ve[1])}function hn(Ge,Pe){var Ee,Ne,Ve=Se+Ge,Ke=Oe+Pe,bt=_t(Se,Oe),gt=_t(Ve,Ke),pt=Ie(bt,ye),St=Ie(gt,ye);ht(gn(Se,Oe,pt[0],pt[1]),Math.min(gn(Ve,Ke,St[0],St[1]),ue))&&(Ee=Xe+re.pathSector(He),Be&&(Ee+=re.pathSector(Be)),Ne=[At(Be,pt[0],pt[1]),At(He,pt[0],pt[1])].join(" ")),st(Ee,Ne)}function We(){if(y.removeZoombox(V),null!==Be&&null!==He){var Ge={};it(Ge),y.showDoubleClickNotifier(V),b.call("_guiRelayout",V,Ge)}}function it(Ge){var Pe=ke._rl,Ee=(Pe[1]-Pe[0])/(1-fe/ue)/ue;Ge[re.id+".radialaxis.range"]=[Pe[0]+(Be-fe)*Ee,Pe[0]+(He-fe)*Ee]}function qt(Ge,Pe){var Ee=V._fullLayout.clickmode;if(y.removeZoombox(V),2===Ge){var Ne={};for(var Ve in re.viewInitial)Ne[re.id+"."+Ve]=re.viewInitial[Ve];V.emit("plotly_doubleclick",null),b.call("_guiRelayout",V,Ne)}Ee.indexOf("select")>-1&&1===Ge&&E(Pe,V,[re.xaxis],[re.yaxis],re.id,ot),Ee.indexOf("event")>-1&&_.click(V,Pe,re.id)}ot.prepFn=function(Ge,Pe,Ee){var Ne=V._fullLayout.dragmode,Ve=we.getBoundingClientRect();V._fullLayout._calcInverseTransform(V),K=V._fullLayout._invScaleX,q=V._fullLayout._invScaleY;var bt=p.apply3DTransform(V._fullLayout._invTransform)(Pe-Ve.left,Ee-Ve.top);if(Se=bt[0],Oe=bt[1],ye){var gt=D.findPolygonOffset(ue,Te[0],Te[1],ye);Se+=be+gt[0],Oe+=pe+gt[1]}switch(Ne){case"zoom":ot.moveFn=ye?hn:Bt,ot.clickFn=qt,ot.doneFn=We,Be=null,He=null,Xe=re.pathSubplot(),nt=!1,et=m(V._fullLayout[re.id].bgcolor).getLuminance(),(qe=y.makeZoombox(Z,et,he,de,Xe)).attr("fill-rule","evenodd"),Ye=y.makeCorners(Z,he,de),k(V);break;case"select":case"lasso":x(Ge,Pe,Ee,ot,Ne)}},we.onmousemove=function(Ge){_.hover(V,Ge,re.id),V._fullLayout._lasthover=we,V._fullLayout._hoversubplot=re.id},we.onmouseout=function(Ge){V._dragging||v.unhover(V,Ge)},v.init(ot)},Y.updateRadialDrag=function(te,K,q){var re=this,V=re.gd,W=re.layers,Z=re.radius,oe=re.innerRadius,ie=re.cx,ue=re.cy,fe=re.radialAxis,he=I.radialDragBoxSize,de=he/2;if(fe.visible){var be,pe,Te,ye=N(re.radialAxisAngle),ke=fe._rl,ze=ke[0],je=ke[1],Ie=ke[q],Ce=.75*(ke[1]-ke[0])/(1-K.hole)/Z;q?(be=ie+(Z+de)*Math.cos(ye),pe=ue-(Z+de)*Math.sin(ye),Te="radialdrag"):(be=ie+(oe-de)*Math.cos(ye),pe=ue-(oe-de)*Math.sin(ye),Te="radialdrag-inner");var _e,we,Se,Oe=y.makeRectDragger(W,Te,"crosshair",-de,-de,he,he),Be={element:Oe,gd:V};ae(i.select(Oe),fe.visible&&oe<Z,{transform:u(be,pe)}),Be.prepFn=function(){_e=null,we=null,Se=null,Be.moveFn=He,Be.doneFn=Xe,k(V)},Be.clampFn=function(qe,Ye){return Math.sqrt(qe*qe+Ye*Ye)<I.MINDRAG&&(qe=0,Ye=0),[qe,Ye]},v.init(Be)}function He(qe,Ye){if(_e)_e(qe,Ye);else{var ot=[qe,-Ye],at=[Math.cos(ye),Math.sin(ye)],ct=Math.abs(p.dot(ot,at)/Math.sqrt(p.dot(ot,ot)));isNaN(ct)||(_e=ct<.5?nt:et)}var xt,_t={};xt=_t,null!==we?xt[re.id+".radialaxis.angle"]=we:null!==Se&&(xt[re.id+".radialaxis.range["+q+"]"]=Se),V.emit("plotly_relayouting",_t)}function Xe(){null!==we?b.call("_guiRelayout",V,re.id+".radialaxis.angle",we):null!==Se&&b.call("_guiRelayout",V,re.id+".radialaxis.range["+q+"]",Se)}function nt(qe,Ye){if(0!==q){we=Math.atan2(ue-(pe+Ye),be+qe-ie),re.vangles&&(we=ne(we,re.vangles)),we=B(we);var ct=u(ie,ue)+r(-we);W["radial-axis"].attr("transform",ct),W["radial-line"].select("line").attr("transform",ct);var _t=re.gd._fullLayout;re.updateRadialAxisTitle(_t,_t[re.id],we)}}function et(qe,Ye){var ot=p.dot([qe,-Ye],[Math.cos(ye),Math.sin(ye)]);if(Se=Ie-Ce*ot,Ce>0==(q?Se>ze:Se<je)){var at=V._fullLayout,ct=at[re.id];fe.range[q]=Se,fe._rl[q]=Se,re.updateRadialAxis(at,ct),re.xaxis.setRange(),re.xaxis.setScale(),re.yaxis.setRange(),re.yaxis.setScale();var _t=!1;for(var xt in re.traceHash){var Ht=re.traceHash[xt],At=p.filterVisible(Ht);Ht[0][0].trace._module.plot(V,re,At,ct),b.traceIs(xt,"gl")&&At.length&&(_t=!0)}_t&&(L(V),P(V))}else Se=null}},Y.updateAngularDrag=function(te){var K=this,q=K.gd,re=K.layers,V=K.radius,W=K.angularAxis,Z=K.cx,oe=K.cy,ie=K.cxx,ue=K.cyy,fe=I.angularDragBoxSize,he=y.makeDragger(re,"path","angulardrag","move"),de={element:he,gd:q};function be(Be,He){return Math.atan2(ue+fe-He,Be-ie-fe)}i.select(he).attr("d",K.pathAnnulus(V,V+fe)).attr("transform",u(Z,oe)).call(C,"move");var pe,Te,ye,ke,ze,je,Ie=re.frontplot.select(".scatterlayer").selectAll(".trace"),Ce=Ie.selectAll(".point"),_e=Ie.selectAll(".textpoint");function we(Be,He){var Xe=K.gd._fullLayout,nt=Xe[K.id],et=be(pe+Be*te._invScaleX,Te+He*te._invScaleY),qe=B(et-je);if(ke=ye+qe,re.frontplot.attr("transform",u(K.xOffset2,K.yOffset2)+r([-qe,ie,ue])),K.vangles){ze=K.radialAxisAngle+qe;var Ye=u(Z,oe)+r(-qe),ot=u(Z,oe)+r(-ze);re.bg.attr("transform",Ye),re["radial-grid"].attr("transform",Ye),re["radial-axis"].attr("transform",ot),re["radial-line"].select("line").attr("transform",ot),K.updateRadialAxisTitle(Xe,nt,ze)}else K.clipPaths.forTraces.select("path").attr("transform",u(ie,ue)+r(qe));Ce.each(function(){var At=i.select(this),ht=l.getTranslate(At);At.attr("transform",u(ht.x,ht.y)+r([qe]))}),_e.each(function(){var At=i.select(this),ht=At.select("text"),st=l.getTranslate(At);At.attr("transform",r([qe,ht.attr("x"),ht.attr("y")])+u(st.x,st.y))}),W.rotation=p.modHalf(ke,360),K.updateAngularAxis(Xe,nt),K._hasClipOnAxisFalse&&!p.isFullCircle(K.sectorInRad)&&Ie.call(l.hideOutsideRangePoints,K);var at=!1;for(var ct in K.traceHash)if(b.traceIs(ct,"gl")){var _t=K.traceHash[ct],xt=p.filterVisible(_t);_t[0][0].trace._module.plot(q,K,xt,nt),xt.length&&(at=!0)}at&&(L(q),P(q));var Ht={};Se(Ht),q.emit("plotly_relayouting",Ht)}function Se(Be){Be[K.id+".angularaxis.rotation"]=ke,K.vangles&&(Be[K.id+".radialaxis.angle"]=ze)}function Oe(){_e.select("text").attr("transform",null);var Be={};Se(Be),b.call("_guiRelayout",q,Be)}de.prepFn=function(Be,He,Xe){ye=te[K.id].angularaxis.rotation;var et=he.getBoundingClientRect();pe=He-et.left,Te=Xe-et.top,q._fullLayout._calcInverseTransform(q);var qe=p.apply3DTransform(te._invTransform)(pe,Te);je=be(pe=qe[0],Te=qe[1]),de.moveFn=we,de.doneFn=Oe,k(q)},K.vangles&&!p.isFullCircle(K.sectorInRad)&&(de.prepFn=p.noop,C(i.select(he),null)),v.init(de)},Y.isPtInside=function(te){var K=this.sectorInRad,q=this.vangles,re=this.angularAxis.c2g(te.theta),V=this.radialAxis,W=V.c2l(te.r);return(q?D.isPtInsidePolygon:p.isPtInsideSector)(W,re,V._rl,K,q)},Y.pathArc=function(te){var K=this.sectorInRad,q=this.vangles;return(q?D.pathPolygon:p.pathArc)(te,K[0],K[1],q)},Y.pathSector=function(te){var K=this.sectorInRad,q=this.vangles;return(q?D.pathPolygon:p.pathSector)(te,K[0],K[1],q)},Y.pathAnnulus=function(te,K){var q=this.sectorInRad,re=this.vangles;return(re?D.pathPolygonAnnulus:p.pathAnnulus)(te,K,q[0],q[1],re)},Y.pathSubplot=function(){var te=this.innerRadius,K=this.radius;return te?this.pathAnnulus(te,K):this.pathSector(K)},Y.fillViewInitialKey=function(te,K){te in this.viewInitial||(this.viewInitial[te]=K)}},{"../../components/color":666,"../../components/dragelement":685,"../../components/drawing":688,"../../components/fx":706,"../../components/titles":764,"../../constants/alignment":771,"../../lib":803,"../../lib/clear_gl_canvases":787,"../../lib/setcursor":824,"../../plot_api/subroutines":844,"../../plots/cartesian/axes":854,"../../registry":931,"../cartesian/autorange":853,"../cartesian/dragbox":863,"../cartesian/select":874,"../cartesian/set_convert":875,"../plots":917,"./constants":918,"./helpers":919,"./set_convert":924,"@plotly/d3":58,tinycolor2:598}],924:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../cartesian/set_convert"),b=i.deg2rad,p=i.rad2deg;G.exports=function(r,u,c){switch(m(r,c),r._id){case"x":case"radialaxis":s=u._subplot,(l=r).setGeometry=function(){var o=l._rl[0],d=l._rl[1],g=s.innerRadius,y=(s.radius-g)/(d-o),v=g/y,_=o>d?function(w){return w<=0}:function(w){return w>=0};l.c2g=function(w){var x=l.c2l(w)-o;return(_(x)?x:0)+v},l.g2c=function(w){return l.l2c(w+o-v)},l.g2p=function(w){return w*y},l.c2p=function(w){return l.g2p(l.c2g(w))}};break;case"angularaxis":!function(l,f){var s=l.type;if("linear"===s){var o=l.d2c,d=l.c2d;l.d2c=function(g,y){return v=o(g),"degrees"===y?b(v):v;var v},l.c2d=function(g,y){return d((v=g,"degrees"===y?p(v):v));var v}}l.makeCalcdata=function(g,y){var v,_,w=g[y],x=g._length,E=function(A){return l.d2c(A,g.thetaunit)};if(w){if(i.isTypedArray(w)&&"linear"===s){if(x===w.length)return w;if(w.subarray)return w.subarray(0,x)}for(v=new Array(x),_=0;_<x;_++)v[_]=E(w[_])}else{var k=y+"0",C="d"+y,L=k in g?E(g[k]):0,P=g[C]?E(g[C]):(l.period||2*Math.PI)/x;for(v=new Array(x),_=0;_<x;_++)v[_]=L+_*P}return v},l.setGeometry=function(){var g,y,v,_,w=f.sector,x=w.map(b),E={clockwise:-1,counterclockwise:1}[l.direction],k=b(l.rotation),C=function(I){return E*I+k},L=function(I){return(I-k)/E};switch(s){case"linear":y=g=i.identity,_=b,v=p,l.range=i.isFullCircle(x)?[w[0],w[0]+360]:x.map(L).map(p);break;case"category":var P=l._categories.length,A=l.period?Math.max(l.period,P):P;0===A&&(A=1),y=_=function(I){return 2*I*Math.PI/A},g=v=function(I){return I*A/Math.PI/2},l.range=[0,A]}l.c2g=function(I){return C(y(I))},l.g2c=function(I){return g(L(I))},l.t2g=function(I){return C(_(I))},l.g2t=function(I){return v(L(I))}}}(r,u)}var l,s}},{"../../lib":803,"../cartesian/set_convert":875}],925:[function(h,G,X){"use strict";var i=h("../lib"),m=h("../plot_api/plot_template"),b=h("./domain").defaults;G.exports=function(p,r,u,c){var l,f,o=c.attributes,d=c.handleDefaults,g=c.partition||"x",y=r._subplots[c.type],v=y.length,_=v&&y[0].replace(/\d+$/,"");function w(C,L){return i.coerce(l,f,o,C,L)}for(var x=0;x<v;x++){var E=y[x];l=p[E]?p[E]:p[E]={},f=m.newContainer(r,E,_),w("uirevision",r.uirevision);var k={};k[g]=[x/v,(x+1)/v],b(f,r,w,k),c.id=E,d(l,f,w,c)}}},{"../lib":803,"../plot_api/plot_template":843,"./domain":882}],926:[function(h,G,X){"use strict";function m(b){var p=b.description?" "+b.description:"",r=b.keys||[];if(r.length>0){for(var u=[],c=0;c<r.length;c++)u[c]="`"+r[c]+"`";p+="Finally, the template string has access to ",p=1===r.length?"variable "+u[0]:"variables "+u.slice(0,-1).join(", ")+" and "+u.slice(-1)+"."}return p}h("../constants/docs"),X.hovertemplateAttrs=function(b,p){b=b||{},m(p=p||{});var r={valType:"string",dflt:"",editType:b.editType||"none"};return!1!==b.arrayOk&&(r.arrayOk=!0),r},X.texttemplateAttrs=function(b,p){b=b||{},m(p=p||{});var r={valType:"string",dflt:"",editType:b.editType||"calc"};return!1!==b.arrayOk&&(r.arrayOk=!0),r}},{"../constants/docs":774}],927:[function(h,G,X){"use strict";var i=h("./ternary"),m=h("../../plots/get_data").getSubplotCalcData,b=h("../../lib").counterRegex;X.name="ternary";var p=X.attr="subplot";X.idRoot="ternary",X.idRegex=X.attrRegex=b("ternary"),(X.attributes={})[p]={valType:"subplotid",dflt:"ternary",editType:"calc"},X.layoutAttributes=h("./layout_attributes"),X.supplyLayoutDefaults=h("./layout_defaults"),X.plot=function(r){for(var u=r._fullLayout,c=r.calcdata,l=u._subplots.ternary,f=0;f<l.length;f++){var s=l[f],o=m(c,"ternary",s),d=u[s]._subplot;d||(d=new i({id:s,graphDiv:r,container:u._ternarylayer.node()},u),u[s]._subplot=d),d.plot(o,u,r._promises)}},X.clean=function(r,u,c,l){for(var f=l._subplots.ternary||[],s=0;s<f.length;s++){var o=f[s],d=l[o]._subplot;!u[o]&&d&&(d.plotContainer.remove(),d.clipDef.remove(),d.clipDefRelative.remove(),d.layers["a-title"].remove(),d.layers["b-title"].remove(),d.layers["c-title"].remove())}}},{"../../lib":803,"../../plots/get_data":891,"./layout_attributes":928,"./layout_defaults":929,"./ternary":930}],928:[function(h,G,X){"use strict";var i=h("../../components/color/attributes"),m=h("../domain").attributes,b=h("../cartesian/layout_attributes"),p=h("../../plot_api/edit_types").overrideAll,r=h("../../lib/extend").extendFlat,u={title:{text:b.title.text,font:b.title.font},color:b.color,tickmode:b.tickmode,nticks:r({},b.nticks,{dflt:6,min:1}),tick0:b.tick0,dtick:b.dtick,tickvals:b.tickvals,ticktext:b.ticktext,ticks:b.ticks,ticklen:b.ticklen,tickwidth:b.tickwidth,tickcolor:b.tickcolor,showticklabels:b.showticklabels,showtickprefix:b.showtickprefix,tickprefix:b.tickprefix,showticksuffix:b.showticksuffix,ticksuffix:b.ticksuffix,showexponent:b.showexponent,exponentformat:b.exponentformat,minexponent:b.minexponent,separatethousands:b.separatethousands,tickfont:b.tickfont,tickangle:b.tickangle,tickformat:b.tickformat,tickformatstops:b.tickformatstops,hoverformat:b.hoverformat,showline:r({},b.showline,{dflt:!0}),linecolor:b.linecolor,linewidth:b.linewidth,showgrid:r({},b.showgrid,{dflt:!0}),gridcolor:b.gridcolor,gridwidth:b.gridwidth,layer:b.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:b._deprecated.title,titlefont:b._deprecated.titlefont}},c=G.exports=p({domain:m({name:"ternary"}),bgcolor:{valType:"color",dflt:i.background},sum:{valType:"number",dflt:1,min:0},aaxis:u,baxis:u,caxis:u},"plot","from-root");c.uirevision={valType:"any",editType:"none"},c.aaxis.uirevision=c.baxis.uirevision=c.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":665,"../../lib/extend":793,"../../plot_api/edit_types":836,"../cartesian/layout_attributes":869,"../domain":882}],929:[function(h,G,X){"use strict";var i=h("../../components/color"),m=h("../../plot_api/plot_template"),b=h("../../lib"),p=h("../subplot_defaults"),r=h("../cartesian/tick_label_defaults"),u=h("../cartesian/tick_mark_defaults"),c=h("../cartesian/tick_value_defaults"),l=h("../cartesian/line_grid_defaults"),f=h("./layout_attributes"),s=["aaxis","baxis","caxis"];function o(g,y,v,_){var w,x,E,k=v("bgcolor"),C=v("sum");_.bgColor=i.combine(k,_.paper_bgcolor);for(var L=0;L<s.length;L++)x=g[w=s[L]]||{},(E=m.newContainer(y,w))._name=w,d(x,E,_,y);var P=y.aaxis,A=y.baxis,I=y.caxis;P.min+A.min+I.min>=C&&(P.min=0,A.min=0,I.min=0,g.aaxis&&delete g.aaxis.min,g.baxis&&delete g.baxis.min,g.caxis&&delete g.caxis.min)}function d(g,y,v,_){var w=f[y._name];function x(A,I){return b.coerce(g,y,w,A,I)}x("uirevision",_.uirevision),y.type="linear";var E=x("color"),k=E!==w.color.dflt?E:v.font.color,C=y._name.charAt(0).toUpperCase(),L="Component "+C,P=x("title.text",L);y._hovertitle=P===L?P:C,b.coerceFont(x,"title.font",{family:v.font.family,size:b.bigFont(v.font.size),color:k}),x("min"),c(g,y,x,"linear"),r(g,y,x,"linear",{}),u(g,y,x,{outerTicks:!0}),x("showticklabels")&&(b.coerceFont(x,"tickfont",{family:v.font.family,size:v.font.size,color:k}),x("tickangle"),x("tickformat")),l(g,y,x,{dfltColor:E,bgColor:v.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:w}),x("hoverformat"),x("layer")}G.exports=function(g,y,v){p(g,y,v,{type:"ternary",attributes:f,handleDefaults:o,font:y.font,paper_bgcolor:y.paper_bgcolor})}},{"../../components/color":666,"../../lib":803,"../../plot_api/plot_template":843,"../cartesian/line_grid_defaults":871,"../cartesian/tick_label_defaults":876,"../cartesian/tick_mark_defaults":877,"../cartesian/tick_value_defaults":878,"../subplot_defaults":925,"./layout_attributes":928}],930:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("tinycolor2"),b=h("../../registry"),p=h("../../lib"),r=p.strTranslate,u=p._,c=h("../../components/color"),l=h("../../components/drawing"),f=h("../cartesian/set_convert"),s=h("../../lib/extend").extendFlat,o=h("../plots"),d=h("../cartesian/axes"),g=h("../../components/dragelement"),y=h("../../components/fx"),v=h("../../components/dragelement/helpers"),_=v.freeMode,w=v.rectMode,x=h("../../components/titles"),E=h("../cartesian/select").prepSelect,k=h("../cartesian/select").selectOnClick,C=h("../cartesian/select").clearSelect,L=h("../cartesian/select").clearSelectionsCache,P=h("../cartesian/constants");function A(Q,ne){this.id=Q.id,this.graphDiv=Q.graphDiv,this.init(ne),this.makeFramework(ne),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}G.exports=A;var I=A.prototype;I.init=function(Q){this.container=Q._ternarylayer,this.defs=Q._defs,this.layoutId=Q._uid,this.traceHash={},this.layers={}},I.plot=function(Q,ne){var ae=ne[this.id],te=ne._size;this._hasClipOnAxisFalse=!1;for(var K=0;K<Q.length;K++)if(!1===Q[K][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(ae),this.adjustLayout(ae,te),o.generalUpdatePerTraceModule(this.graphDiv,this,Q,ae),this.layers.plotbg.select("path").call(c.fill,ae.bgcolor)},I.makeFramework=function(Q){var ne=this.graphDiv,ae=Q[this.id],te=this.clipId="clip"+this.layoutId+this.id,K=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=p.ensureSingleById(Q._clips,"clipPath",te,function(q){q.append("path").attr("d","M0,0Z")}),this.clipDefRelative=p.ensureSingleById(Q._clips,"clipPath",K,function(q){q.append("path").attr("d","M0,0Z")}),this.plotContainer=p.ensureSingle(this.container,"g",this.id),this.updateLayers(ae),l.setClipUrl(this.layers.backplot,te,ne),l.setClipUrl(this.layers.grids,te,ne)},I.updateLayers=function(Q){var ne=this.layers,ae=["draglayer","plotbg","backplot","grids"];"below traces"===Q.aaxis.layer&&ae.push("aaxis","aline"),"below traces"===Q.baxis.layer&&ae.push("baxis","bline"),"below traces"===Q.caxis.layer&&ae.push("caxis","cline"),ae.push("frontplot"),"above traces"===Q.aaxis.layer&&ae.push("aaxis","aline"),"above traces"===Q.baxis.layer&&ae.push("baxis","bline"),"above traces"===Q.caxis.layer&&ae.push("caxis","cline");var te=this.plotContainer.selectAll("g.toplevel").data(ae,String),K=["agrid","bgrid","cgrid"];te.enter().append("g").attr("class",function(q){return"toplevel "+q}).each(function(q){var re=i.select(this);ne[q]=re,"frontplot"===q?re.append("g").classed("scatterlayer",!0):"backplot"===q?re.append("g").classed("maplayer",!0):"plotbg"===q?re.append("path").attr("d","M0,0Z"):"aline"===q||"bline"===q||"cline"===q?re.append("path"):"grids"===q&&K.forEach(function(V){ne[V]=re.append("g").classed("grid "+V,!0)})}),te.order()};var D=Math.sqrt(4/3);I.adjustLayout=function(Q,ne){var ae,te,K,q,re,V,W=this,Z=Q.domain,oe=(Z.x[0]+Z.x[1])/2,ie=(Z.y[0]+Z.y[1])/2,ue=Z.x[1]-Z.x[0],fe=Z.y[1]-Z.y[0],he=ue*ne.w,de=fe*ne.h,be=Q.sum,pe=Q.aaxis.min,Te=Q.baxis.min,ye=Q.caxis.min;he>D*de?K=(q=de)*D:q=(K=he)/D,re=ue*K/he,V=fe*q/de,te=ne.t+ne.h*(1-ie)-q/2,W.x0=ae=ne.l+ne.w*oe-K/2,W.y0=te,W.w=K,W.h=q,W.sum=be,W.xaxis={type:"linear",range:[pe+2*ye-be,be-pe-2*Te],domain:[oe-re/2,oe+re/2],_id:"x"},f(W.xaxis,W.graphDiv._fullLayout),W.xaxis.setScale(),W.xaxis.isPtWithinRange=function(He){return He.a>=W.aaxis.range[0]&&He.a<=W.aaxis.range[1]&&He.b>=W.baxis.range[1]&&He.b<=W.baxis.range[0]&&He.c>=W.caxis.range[1]&&He.c<=W.caxis.range[0]},W.yaxis={type:"linear",range:[pe,be-Te-ye],domain:[ie-V/2,ie+V/2],_id:"y"},f(W.yaxis,W.graphDiv._fullLayout),W.yaxis.setScale(),W.yaxis.isPtWithinRange=function(){return!0};var ke=W.yaxis.domain[0],ze=W.aaxis=s({},Q.aaxis,{range:[pe,be-Te-ye],side:"left",tickangle:(+Q.aaxis.tickangle||0)-30,domain:[ke,ke+V*D],anchor:"free",position:0,_id:"y",_length:K});f(ze,W.graphDiv._fullLayout),ze.setScale();var je=W.baxis=s({},Q.baxis,{range:[be-pe-ye,Te],side:"bottom",domain:W.xaxis.domain,anchor:"free",position:0,_id:"x",_length:K});f(je,W.graphDiv._fullLayout),je.setScale();var Ie=W.caxis=s({},Q.caxis,{range:[be-pe-Te,ye],side:"right",tickangle:(+Q.caxis.tickangle||0)+30,domain:[ke,ke+V*D],anchor:"free",position:0,_id:"y",_length:K});f(Ie,W.graphDiv._fullLayout),Ie.setScale();var Ce="M"+ae+","+(te+q)+"h"+K+"l-"+K/2+",-"+q+"Z";W.clipDef.select("path").attr("d",Ce),W.layers.plotbg.select("path").attr("d",Ce);var _e="M0,"+q+"h"+K+"l-"+K/2+",-"+q+"Z";W.clipDefRelative.select("path").attr("d",_e);var we=r(ae,te);W.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",we),W.clipDefRelative.select("path").attr("transform",null);var Se=r(ae-je._offset,te+q);W.layers.baxis.attr("transform",Se),W.layers.bgrid.attr("transform",Se);var Oe=r(ae+K/2,te)+"rotate(30)"+r(0,-ze._offset);W.layers.aaxis.attr("transform",Oe),W.layers.agrid.attr("transform",Oe);var Be=r(ae+K/2,te)+"rotate(-30)"+r(0,-Ie._offset);W.layers.caxis.attr("transform",Be),W.layers.cgrid.attr("transform",Be),W.drawAxes(!0),W.layers.aline.select("path").attr("d",ze.showline?"M"+ae+","+(te+q)+"l"+K/2+",-"+q:"M0,0").call(c.stroke,ze.linecolor||"#000").style("stroke-width",(ze.linewidth||0)+"px"),W.layers.bline.select("path").attr("d",je.showline?"M"+ae+","+(te+q)+"h"+K:"M0,0").call(c.stroke,je.linecolor||"#000").style("stroke-width",(je.linewidth||0)+"px"),W.layers.cline.select("path").attr("d",Ie.showline?"M"+(ae+K/2)+","+te+"l"+K/2+","+q:"M0,0").call(c.stroke,Ie.linecolor||"#000").style("stroke-width",(Ie.linewidth||0)+"px"),W.graphDiv._context.staticPlot||W.initInteractions(),l.setClipUrl(W.layers.frontplot,W._hasClipOnAxisFalse?null:W.clipId,W.graphDiv)},I.drawAxes=function(Q){var ne=this.graphDiv,ae=this.id.substr(7)+"title",te=this.layers,K=this.aaxis,q=this.baxis,re=this.caxis;if(this.drawAx(K),this.drawAx(q),this.drawAx(re),Q){var V=Math.max(K.showticklabels?K.tickfont.size/2:0,(re.showticklabels?.75*re.tickfont.size:0)+("outside"===re.ticks?.87*re.ticklen:0)),W=(q.showticklabels?q.tickfont.size:0)+("outside"===q.ticks?q.ticklen:0)+3;te["a-title"]=x.draw(ne,"a"+ae,{propContainer:K,propName:this.id+".aaxis.title",placeholder:u(ne,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-K.title.font.size/3-V,"text-anchor":"middle"}}),te["b-title"]=x.draw(ne,"b"+ae,{propContainer:q,propName:this.id+".baxis.title",placeholder:u(ne,"Click to enter Component B title"),attributes:{x:this.x0-W,y:this.y0+this.h+.83*q.title.font.size+W,"text-anchor":"middle"}}),te["c-title"]=x.draw(ne,"c"+ae,{propContainer:re,propName:this.id+".caxis.title",placeholder:u(ne,"Click to enter Component C title"),attributes:{x:this.x0+this.w+W,y:this.y0+this.h+.83*re.title.font.size+W,"text-anchor":"middle"}})}},I.drawAx=function(Q){var ne,ae=this.graphDiv,te=Q._name,K=te.charAt(0),q=Q._id,re=this.layers[te],V=K+"tickLayout",W=(ne=Q).ticks+String(ne.ticklen)+String(ne.showticklabels);this[V]!==W&&(re.selectAll("."+q+"tick").remove(),this[V]=W),Q.setScale();var Z=d.calcTicks(Q),oe=d.clipEnds(Q,Z),ie=d.makeTransTickFn(Q),ue=d.getTickSigns(Q)[2],fe=p.deg2rad(30),he=ue*(Q.linewidth||1)/2,de=ue*Q.ticklen,be=this.w,pe=this.h,Te="b"===K?"M0,"+he+"l"+Math.sin(fe)*de+","+Math.cos(fe)*de:"M"+he+",0l"+Math.cos(fe)*de+","+-Math.sin(fe)*de,ye={a:"M0,0l"+pe+",-"+be/2,b:"M0,0l-"+be/2+",-"+pe,c:"M0,0l-"+pe+","+be/2}[K];d.drawTicks(ae,Q,{vals:"inside"===Q.ticks?oe:Z,layer:re,path:Te,transFn:ie,crisp:!1}),d.drawGrid(ae,Q,{vals:oe,layer:this.layers[K+"grid"],path:ye,transFn:ie,crisp:!1}),d.drawLabels(ae,Q,{vals:Z,layer:re,transFn:ie,labelFns:d.makeLabelFns(Q,0,30)})};var R=P.MINZOOM/2+.87,S="m-0.87,.5h"+R+"v3h-"+(R+5.2)+"l"+(R/2+2.6)+",-"+(.87*R+4.5)+"l2.6,1.5l-"+R/2+","+.87*R+"Z",N="m0.87,.5h-"+R+"v3h"+(R+5.2)+"l-"+(R/2+2.6)+",-"+(.87*R+4.5)+"l-2.6,1.5l"+R/2+","+.87*R+"Z",B="m0,1l"+R/2+","+.87*R+"l2.6,-1.5l-"+(R/2+2.6)+",-"+(.87*R+4.5)+"l-"+(R/2+2.6)+","+(.87*R+4.5)+"l2.6,1.5l"+R/2+",-"+.87*R+"Z",H=!0;function Y(Q){i.select(Q).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}I.clearSelect=function(){L(this.dragOptions),C(this.dragOptions.gd)},I.initInteractions=function(){var Q,ne,ae,te,K,q,re,V,W,Z,oe,ie,ue=this,fe=ue.layers.plotbg.select("path").node(),he=ue.graphDiv,de=he._fullLayout._zoomlayer;function be(_e){var we={};return we[ue.id+".aaxis.min"]=_e.a,we[ue.id+".baxis.min"]=_e.b,we[ue.id+".caxis.min"]=_e.c,we}function pe(_e,we){var Se=he._fullLayout.clickmode;Y(he),2===_e&&(he.emit("plotly_doubleclick",null),b.call("_guiRelayout",he,be({a:0,b:0,c:0}))),Se.indexOf("select")>-1&&1===_e&&k(we,he,[ue.xaxis],[ue.yaxis],ue.id,ue.dragOptions),Se.indexOf("event")>-1&&y.click(he,we,ue.id)}function Te(_e,we){return 1-we/ue.h}function ye(_e,we){return 1-(_e+(ue.h-we)/Math.sqrt(3))/ue.w}function ke(_e,we){return(_e-(ue.h-we)/Math.sqrt(3))/ue.w}function ze(_e,we){var Se=ae+_e*Q,Oe=te+we*ne,Be=Math.max(0,Math.min(1,Te(0,te),Te(0,Oe))),He=Math.max(0,Math.min(1,ye(ae,te),ye(Se,Oe))),Xe=Math.max(0,Math.min(1,ke(ae,te),ke(Se,Oe))),nt=(Be/2+Xe)*ue.w,et=(1-Be/2-He)*ue.w,qe=(nt+et)/2,Ye=et-nt,ot=(1-Be)*ue.h,at=ot-Ye/D;Ye<P.MINZOOM?(re=K,oe.attr("d",W),ie.attr("d","M0,0Z")):(re={a:K.a+Be*q,b:K.b+He*q,c:K.c+Xe*q},oe.attr("d",W+"M"+nt+","+ot+"H"+et+"L"+qe+","+at+"L"+nt+","+ot+"Z"),ie.attr("d","M"+ae+","+te+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+nt+","+ot+S+"M"+et+","+ot+N+"M"+qe+","+at+B)),Z||(oe.transition().style("fill",V>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ie.transition().style("opacity",1).duration(200),Z=!0),he.emit("plotly_relayouting",be(re))}function je(){Y(he),re!==K&&(b.call("_guiRelayout",he,be(re)),H&&he.data&&he._context.showTips&&(p.notifier(u(he,"Double-click to zoom back out"),"long"),H=!1))}function Ie(_e,we){var Se=_e/ue.xaxis._m,Oe=we/ue.yaxis._m,Be=[(re={a:K.a-Oe,b:K.b+(Se+Oe)/2,c:K.c-(Se-Oe)/2}).a,re.b,re.c].sort(p.sorterAsc),He=Be.indexOf(re.a),Xe=Be.indexOf(re.b),nt=Be.indexOf(re.c);Be[0]<0&&(Be[1]+Be[0]/2<0?(Be[2]+=Be[0]+Be[1],Be[0]=Be[1]=0):(Be[2]+=Be[0]/2,Be[1]+=Be[0]/2,Be[0]=0),we=(K.a-(re={a:Be[He],b:Be[Xe],c:Be[nt]}).a)*ue.yaxis._m,_e=(K.c-re.c-K.b+re.b)*ue.xaxis._m);var et=r(ue.x0+_e,ue.y0+we);ue.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",et);var qe=r(-_e,-we);ue.clipDefRelative.select("path").attr("transform",qe),ue.aaxis.range=[re.a,ue.sum-re.b-re.c],ue.baxis.range=[ue.sum-re.a-re.c,re.b],ue.caxis.range=[ue.sum-re.a-re.b,re.c],ue.drawAxes(!1),ue._hasClipOnAxisFalse&&ue.plotContainer.select(".scatterlayer").selectAll(".trace").call(l.hideOutsideRangePoints,ue),he.emit("plotly_relayouting",be(re))}function Ce(){b.call("_guiRelayout",he,be(re))}this.dragOptions={element:fe,gd:he,plotinfo:{id:ue.id,domain:he._fullLayout[ue.id].domain,xaxis:ue.xaxis,yaxis:ue.yaxis},subplot:ue.id,prepFn:function(_e,we,Se){ue.dragOptions.xaxes=[ue.xaxis],ue.dragOptions.yaxes=[ue.yaxis],Q=he._fullLayout._invScaleX,ne=he._fullLayout._invScaleY;var Oe=ue.dragOptions.dragmode=he._fullLayout.dragmode;ue.dragOptions.minDrag=_(Oe)?1:void 0,"zoom"===Oe?(ue.dragOptions.moveFn=ze,ue.dragOptions.clickFn=pe,ue.dragOptions.doneFn=je,function(Be,He,Xe){var nt=fe.getBoundingClientRect();ae=He-nt.left,te=Xe-nt.top,he._fullLayout._calcInverseTransform(he);var qe=p.apply3DTransform(he._fullLayout._invTransform)(ae,te);ae=qe[0],te=qe[1],re=K={a:ue.aaxis.range[0],b:ue.baxis.range[1],c:ue.caxis.range[1]},q=ue.aaxis.range[1]-K.a,V=m(ue.graphDiv._fullLayout[ue.id].bgcolor).getLuminance(),W="M0,"+ue.h+"L"+ue.w/2+", 0L"+ue.w+","+ue.h+"Z",Z=!1,oe=de.append("path").attr("class","zoombox").attr("transform",r(ue.x0,ue.y0)).style({fill:V>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",W),ie=de.append("path").attr("class","zoombox-corners").attr("transform",r(ue.x0,ue.y0)).style({fill:c.background,stroke:c.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ue.clearSelect(he)}(0,we,Se)):"pan"===Oe?(ue.dragOptions.moveFn=Ie,ue.dragOptions.clickFn=pe,ue.dragOptions.doneFn=Ce,re=K={a:ue.aaxis.range[0],b:ue.baxis.range[1],c:ue.caxis.range[1]},ue.clearSelect(he)):(w(Oe)||_(Oe))&&E(_e,we,Se,ue.dragOptions,Oe)}},fe.onmousemove=function(_e){y.hover(he,_e,ue.id),he._fullLayout._lasthover=fe,he._fullLayout._hoversubplot=ue.id},fe.onmouseout=function(_e){he._dragging||g.unhover(he,_e)},g.init(this.dragOptions)}},{"../../components/color":666,"../../components/dragelement":685,"../../components/dragelement/helpers":684,"../../components/drawing":688,"../../components/fx":706,"../../components/titles":764,"../../lib":803,"../../lib/extend":793,"../../registry":931,"../cartesian/axes":854,"../cartesian/constants":861,"../cartesian/select":874,"../cartesian/set_convert":875,"../plots":917,"@plotly/d3":58,tinycolor2:598}],931:[function(h,G,X){"use strict";var i=h("./lib/loggers"),m=h("./lib/noop"),b=h("./lib/push_unique"),p=h("./lib/is_plain_object"),r=h("./lib/dom").addStyleRule,u=h("./lib/extend"),c=h("./plots/attributes"),l=h("./plots/layout_attributes"),f=u.extendFlat,s=u.extendDeepAll;function o(k){var C=k.name,L=k.categories,P=k.meta;if(X.modules[C])i.log("Type "+C+" already registered");else{X.subplotsRegistry[k.basePlotModule.name]||function(H){var Y=H.name;if(X.subplotsRegistry[Y])i.log("Plot type "+Y+" already registered.");else for(var Q in v(H),X.subplotsRegistry[Y]=H,X.componentsRegistry)x(Q,H.name)}(k.basePlotModule);for(var A={},I=0;I<L.length;I++)A[L[I]]=!0,X.allCategories[L[I]]=!0;for(var D in X.modules[C]={_module:k,categories:A},P&&Object.keys(P).length&&(X.modules[C].meta=P),X.allTypes.push(C),X.componentsRegistry)_(D,C);k.layoutAttributes&&f(X.traceLayoutAttributes,k.layoutAttributes);var R=k.basePlotModule,S=R.name;if("mapbox"===S){var N=R.constants.styleRules;for(var B in N)r(".js-plotly-plot .plotly .mapboxgl-"+B,N[B])}"geo"!==S&&"mapbox"!==S||void 0===typeof window||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function d(k){if("string"!=typeof k.name)throw new Error("Component module *name* must be a string.");var C=k.name;for(var L in X.componentsRegistry[C]=k,k.layoutAttributes&&(k.layoutAttributes._isLinkedToArray&&b(X.layoutArrayContainers,C),v(k)),X.modules)_(C,L);for(var P in X.subplotsRegistry)x(C,P);for(var A in X.transformsRegistry)w(C,A);k.schema&&k.schema.layout&&s(l,k.schema.layout)}function g(k){if("string"!=typeof k.name)throw new Error("Transform module *name* must be a string.");var C="Transform module "+k.name,L="function"==typeof k.transform,P="function"==typeof k.calcTransform;if(!L&&!P)throw new Error(C+" is missing a *transform* or *calcTransform* method.");for(var A in L&&P&&i.log([C+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),p(k.attributes)||i.log(C+" registered without an *attributes* object."),"function"!=typeof k.supplyDefaults&&i.log(C+" registered without a *supplyDefaults* method."),X.transformsRegistry[k.name]=k,X.componentsRegistry)w(A,k.name)}function y(k){var C=k.name,L=C.split("-")[0],P=k.dictionary,A=k.format,I=P&&Object.keys(P).length,D=A&&Object.keys(A).length,R=X.localeRegistry,S=R[C];if(S||(R[C]=S={}),L!==C){var N=R[L];N||(R[L]=N={}),I&&N.dictionary===S.dictionary&&(N.dictionary=P),D&&N.format===S.format&&(N.format=A)}I&&(S.dictionary=P),D&&(S.format=A)}function v(k){if(k.layoutAttributes){var C=k.layoutAttributes._arrayAttrRegexps;if(C)for(var L=0;L<C.length;L++)b(X.layoutArrayRegexes,C[L])}}function _(k,C){var L=X.componentsRegistry[k].schema;if(L&&L.traces){var P=L.traces[C];P&&s(X.modules[C]._module.attributes,P)}}function w(k,C){var L=X.componentsRegistry[k].schema;if(L&&L.transforms){var P=L.transforms[C];P&&s(X.transformsRegistry[C].attributes,P)}}function x(k,C){var L=X.componentsRegistry[k].schema;if(L&&L.subplots){var P=X.subplotsRegistry[C],A=P.layoutAttributes,I="subplot"===P.attr?P.name:P.attr;Array.isArray(I)&&(I=I[0]);var D=L.subplots[I];A&&D&&s(A,D)}}function E(k){return"object"==typeof k&&(k=k.type),k}X.modules={},X.allCategories={},X.allTypes=[],X.subplotsRegistry={},X.transformsRegistry={},X.componentsRegistry={},X.layoutArrayContainers=[],X.layoutArrayRegexes=[],X.traceLayoutAttributes={},X.localeRegistry={},X.apiMethodRegistry={},X.collectableSubplotTypes=null,X.register=function(k){if(X.collectableSubplotTypes=null,!k)throw new Error("No argument passed to Plotly.register.");k&&!Array.isArray(k)&&(k=[k]);for(var C=0;C<k.length;C++){var L=k[C];if(!L)throw new Error("Invalid module was attempted to be registered!");switch(L.moduleType){case"trace":o(L);break;case"transform":g(L);break;case"component":d(L);break;case"locale":y(L);break;case"apiMethod":X.apiMethodRegistry[L.name]=L.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},X.getModule=function(k){var C=X.modules[E(k)];return!!C&&C._module},X.traceIs=function(k,C){if("various"===(k=E(k)))return!1;var L=X.modules[k];return L||(k&&i.log("Unrecognized trace type "+k+"."),L=X.modules[c.type.dflt]),!!L.categories[C]},X.getTransformIndices=function(k,C){for(var L=[],P=k.transforms||[],A=0;A<P.length;A++)P[A].type===C&&L.push(A);return L},X.hasTransform=function(k,C){for(var L=k.transforms||[],P=0;P<L.length;P++)if(L[P].type===C)return!0;return!1},X.getComponentMethod=function(k,C){var L=X.componentsRegistry[k];return L&&L[C]||m},X.call=function(){var k=arguments[0],C=[].slice.call(arguments,1);return X.apiMethodRegistry[k].apply(null,C)}},{"./lib/dom":791,"./lib/extend":793,"./lib/is_plain_object":804,"./lib/loggers":807,"./lib/noop":812,"./lib/push_unique":818,"./plots/attributes":850,"./plots/layout_attributes":908}],932:[function(h,G,X){"use strict";var i=h("../registry"),m=h("../lib"),b=m.extendFlat,p=m.extendDeep;function r(u){var c;switch(u){case"themes__thumb":c={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":c={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:c={}}return c}G.exports=function(u,c){var l,o=u.layout,d=p([],u.data),g=p({},o,r(c.tileClass)),y=u._context||{};if(c.width&&(g.width=c.width),c.height&&(g.height=c.height),"thumbnail"===c.tileClass||"themes__thumb"===c.tileClass){g.annotations=[];var v=Object.keys(g);for(l=0;l<v.length;l++)["xaxis","yaxis","zaxis"].indexOf(v[l].slice(0,5))>-1&&(g[v[l]].title={text:""});for(l=0;l<d.length;l++){var _=d[l];_.showscale=!1,_.marker&&(_.marker.showscale=!1),i.traceIs(_,"pie-like")&&(_.textposition="none")}}if(Array.isArray(c.annotations))for(l=0;l<c.annotations.length;l++)g.annotations.push(c.annotations[l]);var w=Object.keys(g).filter(function(L){return L.match(/^scene\d*$/)});if(w.length){var x={};for("thumbnail"===c.tileClass&&(x={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),l=0;l<w.length;l++){var E=g[w[l]];E.xaxis||(E.xaxis={}),E.yaxis||(E.yaxis={}),E.zaxis||(E.zaxis={}),b(E.xaxis,x),b(E.yaxis,x),b(E.zaxis,x),E._scene=null}}var k=document.createElement("div");c.tileClass&&(k.className=c.tileClass);var C={gd:k,td:k,layout:g,data:d,config:{staticPlot:void 0===c.staticPlot||c.staticPlot,plotGlPixelRatio:void 0===c.plotGlPixelRatio?2:c.plotGlPixelRatio,displaylogo:c.displaylogo||!1,showLink:c.showLink||!1,showTips:c.showTips||!1,mapboxAccessToken:y.mapboxAccessToken}};return"transparent"!==c.setBackground&&(C.config.setBackground=c.setBackground||"opaque"),C.gd.defaultLayout=r(c.tileClass),C}},{"../lib":803,"../registry":931}],933:[function(h,G,X){"use strict";var i=h("../lib"),m=h("../plot_api/to_image"),b=h("./filesaver"),p=h("./helpers");G.exports=function(r,u){var c;return i.isPlainObject(r)||(c=i.getGraphDiv(r)),(u=u||{}).format=u.format||"png",u.width=u.width||null,u.height=u.height||null,u.imageDataOnly=!0,new Promise(function(l,f){c&&c._snapshotInProgress&&f(new Error("Snapshotting already in progress.")),i.isIE()&&"svg"!==u.format&&f(new Error(p.MSG_IE_BAD_FORMAT)),c&&(c._snapshotInProgress=!0);var s=m(r,u),o=u.filename||r.fn||"newplot";o+="."+u.format.replace("-","."),s.then(function(d){return c&&(c._snapshotInProgress=!1),b(d,o,u.format)}).then(function(d){l(d)}).catch(function(d){c&&(c._snapshotInProgress=!1),f(d)})})}},{"../lib":803,"../plot_api/to_image":846,"./filesaver":934,"./helpers":935}],934:[function(h,G,X){"use strict";var i=h("../lib"),m=h("./helpers");G.exports=function(b,p,r){var u=document.createElement("a"),c="download"in u;return new Promise(function(l,f){var s,o;return i.isIE()?(s=m.createBlob(b,"svg"),window.navigator.msSaveBlob(s,p),s=null,l(p)):c?(s=m.createBlob(b,r),o=m.createObjectURL(s),u.href=o,u.download=p,document.body.appendChild(u),u.click(),document.body.removeChild(u),m.revokeObjectURL(o),s=null,l(p)):i.isSafari()?(m.octetStream(("svg"===r?",":";base64,")+encodeURIComponent(b)),l(p)):void f(new Error("download error"))})}},{"../lib":803,"./helpers":935}],935:[function(h,G,X){"use strict";var i=h("../registry");X.getDelay=function(b){return b._has&&(b._has("gl3d")||b._has("gl2d")||b._has("mapbox"))?500:0},X.getRedrawFunc=function(b){return function(){i.getComponentMethod("colorbar","draw")(b)}},X.encodeSVG=function(b){return"data:image/svg+xml,"+encodeURIComponent(b)},X.encodeJSON=function(b){return"data:application/json,"+encodeURIComponent(b)};var m=window.URL||window.webkitURL;X.createObjectURL=function(b){return m.createObjectURL(b)},X.revokeObjectURL=function(b){return m.revokeObjectURL(b)},X.createBlob=function(b,p){if("svg"===p)return new window.Blob([b],{type:"image/svg+xml;charset=utf-8"});if("full-json"===p)return new window.Blob([b],{type:"application/json;charset=utf-8"});var r=function(u){for(var c=u.length,l=new ArrayBuffer(c),f=new Uint8Array(l),s=0;s<c;s++)f[s]=u.charCodeAt(s);return l}(window.atob(b));return new window.Blob([r],{type:"image/"+p})},X.octetStream=function(b){document.location.href="data:application/octet-stream"+b},X.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,X.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":931}],936:[function(h,G,X){"use strict";var i=h("./helpers"),m={getDelay:i.getDelay,getRedrawFunc:i.getRedrawFunc,clone:h("./cloneplot"),toSVG:h("./tosvg"),svgToImg:h("./svgtoimg"),toImage:h("./toimage"),downloadImage:h("./download")};G.exports=m},{"./cloneplot":932,"./download":933,"./helpers":935,"./svgtoimg":937,"./toimage":938,"./tosvg":939}],937:[function(h,G,X){"use strict";var i=h("../lib"),m=h("events").EventEmitter,b=h("./helpers");G.exports=function(p){var r=p.emitter||new m,u=new Promise(function(c,l){var f=window.Image,s=p.svg,o=p.format||"png";if(i.isIE()&&"svg"!==o){var d=new Error(b.MSG_IE_BAD_FORMAT);return l(d),p.promise?u:r.emit("error",d)}var g,y,v=p.canvas,_=p.scale||1,E=_*(p.width||300),k=_*(p.height||150),C=v.getContext("2d"),L=new f;"svg"===o||i.isSafari()?y=b.encodeSVG(s):(g=b.createBlob(s,"svg"),y=b.createObjectURL(g)),v.width=E,v.height=k,L.onload=function(){var P;switch(g=null,b.revokeObjectURL(y),"svg"!==o&&C.drawImage(L,0,0,E,k),o){case"jpeg":P=v.toDataURL("image/jpeg");break;case"png":P=v.toDataURL("image/png");break;case"webp":P=v.toDataURL("image/webp");break;case"svg":P=y;break;default:var A="Image format is not jpeg, png, svg or webp.";if(l(new Error(A)),!p.promise)return r.emit("error",A)}c(P),p.promise||r.emit("success",P)},L.onerror=function(P){if(g=null,b.revokeObjectURL(y),l(P),!p.promise)return r.emit("error",P)},L.src=y});return p.promise?u:r}},{"../lib":803,"./helpers":935,events:116}],938:[function(h,G,X){"use strict";var i=h("events").EventEmitter,m=h("../registry"),b=h("../lib"),p=h("./helpers"),r=h("./cloneplot"),u=h("./tosvg"),c=h("./svgtoimg");G.exports=function(l,f){var s=new i,o=r(l,{format:"png"}),d=o.gd;d.style.position="absolute",d.style.left="-5000px",document.body.appendChild(d);var g=p.getRedrawFunc(d);return m.call("_doPlot",d,o.data,o.layout,o.config).then(g).then(function(){var y=p.getDelay(d._fullLayout);setTimeout(function(){var v=u(d),_=document.createElement("canvas");_.id=b.randstr(),(s=c({format:f.format,width:d._fullLayout.width,height:d._fullLayout.height,canvas:_,emitter:s,svg:v})).clean=function(){d&&document.body.removeChild(d)}},y)}).catch(function(y){s.emit("error",y)}),s}},{"../lib":803,"../registry":931,"./cloneplot":932,"./helpers":935,"./svgtoimg":937,"./tosvg":939,events:116}],939:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../lib"),b=h("../components/drawing"),p=h("../components/color"),r=h("../constants/xmlns_namespaces"),u=/"/g,c=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");G.exports=function(l,f,s){var o,d,g=l._fullLayout,y=g._paper,v=g._toppaper,_=g.width,w=g.height;y.insert("rect",":first-child").call(b.setRect,0,0,_,w).call(p.fill,g.paper_bgcolor);var x=g._basePlotModules||[];for(o=0;o<x.length;o++){var E=x[o];E.toSVG&&E.toSVG(l)}if(v){var k=v.node().childNodes,C=Array.prototype.slice.call(k);for(o=0;o<C.length;o++){var L=C[o];L.childNodes.length&&y.node().appendChild(L)}}g._draggers&&g._draggers.remove(),y.node().style.background="",y.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var I=i.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){I.style({visibility:null,display:null});var D=this.style.fontFamily;D&&-1!==D.indexOf('"')&&I.style("font-family",D.replace(u,"TOBESTRIPPED"))}else I.remove()});var P=[];if(g._gradientUrlQueryParts)for(d in g._gradientUrlQueryParts)P.push(d);if(g._patternUrlQueryParts)for(d in g._patternUrlQueryParts)P.push(d);P.length&&y.selectAll(P.join(",")).each(function(){var I=i.select(this),D=this.style.fill;D&&-1!==D.indexOf("url(")&&I.style("fill",D.replace(u,"TOBESTRIPPED"));var R=this.style.stroke;R&&-1!==R.indexOf("url(")&&I.style("stroke",R.replace(u,"TOBESTRIPPED"))}),"pdf"!==f&&"eps"!==f||y.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),y.node().setAttributeNS(r.xmlns,"xmlns",r.svg),y.node().setAttributeNS(r.xmlns,"xmlns:xlink",r.xlink),"svg"===f&&s&&(y.attr("width",s*_),y.attr("height",s*w),y.attr("viewBox","0 0 "+_+" "+w));var I,D,R,A=(new window.XMLSerializer).serializeToString(y.node());return I=A,D=i.select("body").append("div").style({display:"none"}).html(""),R=I.replace(/(&[^;]*;)/gi,function(S){return"&lt;"===S?"&#60;":"&rt;"===S?"&#62;":-1!==S.indexOf("<")||-1!==S.indexOf(">")?"":D.html(S).text()}),D.remove(),A=(A=(A=R).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(c,"'"),m.isIE()&&(A=(A=(A=A.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),A}},{"../components/color":666,"../components/drawing":688,"../constants/xmlns_namespaces":780,"../lib":803,"@plotly/d3":58}],940:[function(h,G,X){"use strict";var i=h("../../lib");G.exports=function(m,b){for(var p=0;p<m.length;p++)m[p].i=p;i.mergeArray(b.text,m,"tx"),i.mergeArray(b.hovertext,m,"htx");var r=b.marker;if(r){i.mergeArray(r.opacity,m,"mo",!0),i.mergeArray(r.color,m,"mc");var u=r.line;u&&(i.mergeArray(u.color,m,"mlc"),i.mergeArrayCastPositive(u.width,m,"mlw"))}}},{"../../lib":803}],941:[function(h,G,X){"use strict";var i=h("../scatter/attributes"),m=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=h("../../plots/template_attributes").hovertemplateAttrs,p=h("../../plots/template_attributes").texttemplateAttrs,r=h("../../components/colorscale/attributes"),u=h("../../plots/font_attributes"),c=h("./constants"),l=h("../../components/drawing/attributes").pattern,f=h("../../lib/extend").extendFlat,s=u({editType:"calc",arrayOk:!0,colorEditType:"style"}),o=f({},i.marker.line.width,{dflt:0}),d=f({width:o,editType:"calc"},r("marker.line")),g=f({line:d,editType:"calc"},r("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:l});G.exports={x:i.x,x0:i.x0,dx:i.dx,y:i.y,y0:i.y0,dy:i.dy,xperiod:i.xperiod,yperiod:i.yperiod,xperiod0:i.xperiod0,yperiod0:i.yperiod0,xperiodalignment:i.xperiodalignment,yperiodalignment:i.yperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),text:i.text,texttemplate:p({editType:"plot"},{keys:c.eventDataKeys}),hovertext:i.hovertext,hovertemplate:b({},{keys:c.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:f({},s,{}),insidetextfont:f({},s,{}),outsidetextfont:f({},s,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:f({},i.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:g,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:i.selected.marker.opacity,color:i.selected.marker.color,editType:"style"},textfont:i.selected.textfont,editType:"style"},unselected:{marker:{opacity:i.unselected.marker.opacity,color:i.unselected.marker.color,editType:"style"},textfont:i.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":673,"../../components/drawing/attributes":687,"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../../plots/font_attributes":883,"../../plots/template_attributes":926,"../scatter/attributes":1218,"./constants":943}],942:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes"),m=h("../../plots/cartesian/align_period"),b=h("../../components/colorscale/helpers").hasColorscale,p=h("../../components/colorscale/calc"),r=h("./arrays_to_calcdata"),u=h("../scatter/calc_selection");G.exports=function(c,l){var f,s,o,d,g,y,v=i.getFromId(c,l.xaxis||"x"),_=i.getFromId(c,l.yaxis||"y"),w={msUTC:!(!l.base&&0!==l.base)};"h"===l.orientation?(f=v.makeCalcdata(l,"x",w),o=_.makeCalcdata(l,"y"),d=m(l,_,"y",o),g=!!l.yperiodalignment,y="y"):(f=_.makeCalcdata(l,"y",w),o=v.makeCalcdata(l,"x"),d=m(l,v,"x",o),g=!!l.xperiodalignment,y="x"),s=d.vals;for(var x=Math.min(s.length,f.length),E=new Array(x),k=0;k<x;k++)E[k]={p:s[k],s:f[k]},g&&(E[k].orig_p=o[k],E[k][y+"End"]=d.ends[k],E[k][y+"Start"]=d.starts[k]),l.ids&&(E[k].id=String(l.ids[k]));return b(l,"marker")&&p(c,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"}),b(l,"marker.line")&&p(c,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"}),r(E,l),u(E,l),E}},{"../../components/colorscale/calc":674,"../../components/colorscale/helpers":677,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"../scatter/calc_selection":1220,"./arrays_to_calcdata":940}],943:[function(h,G,X){"use strict";G.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],944:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib").isArrayOrTypedArray,b=h("../../constants/numerical").BADNUM,p=h("../../registry"),r=h("../../plots/cartesian/axes"),u=h("../../plots/cartesian/constraints").getAxisGroup,c=h("./sieve.js");function l(x,E,k,C,L){if(C.length){var P,A,I,D;switch(function(R,S){var N,B;for(N=0;N<S.length;N++){var H,Y=S[N],Q=Y[0].trace,ne="funnel"===Q.type?Q._base:Q.base,ae="h"===Q.orientation?Q.xcalendar:Q.ycalendar,te="category"===R.type||"multicategory"===R.type?function(){return null}:R.d2c;if(m(ne)){for(B=0;B<Math.min(ne.length,Y.length);B++)H=te(ne[B],0,ae),i(H)?(Y[B].b=+H,Y[B].hasB=1):Y[B].b=0;for(;B<Y.length;B++)Y[B].b=0}else{H=te(ne,0,ae);var K=i(H);for(H=K?H:0,B=0;B<Y.length;B++)Y[B].b=H,K&&(Y[B].hasB=1)}}}(k,C),L.mode){case"overlay":f(E,k,C,L);break;case"group":for(P=[],A=[],I=0;I<C.length;I++)void 0===(D=C[I])[0].trace.offset?A.push(D):P.push(D);A.length&&(R=x,N=k,Y=new c(A,{posAxis:S=E,sepNegVal:!1,overlapNoMerge:!(H=L).norm}),function(Q,ne,ae,te){for(var K=Q._fullLayout,V=ae.minDiff,W=ae.traces,Z=W.length,oe=ae.positions.length!==ae.distinctPositions.length,ie=V*(1-te.gap),ue=u(K,ne._id)+W[0][0].trace.orientation,fe=K._alignmentOpts[ue]||{},he=0;he<Z;he++){var de,be,pe=W[he],Te=pe[0].trace,ke=Object.keys((fe[Te.alignmentgroup]||{}).offsetGroups||{}).length,ze=(de=ke?ie/ke:oe?ie/Z:ie)*(1-(te.groupgap||0));be=ke?((2*Te._offsetIndex+1-ke)*de-ze)/2:oe?((2*he+1-Z)*de-ze)/2:-ze/2;var je=pe[0].t;je.barwidth=ze,je.poffset=be,je.bargroupwidth=ie,je.bardelta=V}ae.binWidth=W[0][0].t.barwidth/100,o(ae),d(ne,ae),g(ne,ae,oe)}(R,S,Y,H),function(Q,ne){for(var ae=Q.traces,te=0;te<ae.length;te++){var K=ae[te];if(void 0===K[0].trace.base)for(var q=new c([K],{posAxis:ne,sepNegVal:!0,overlapNoMerge:!0}),re=0;re<K.length;re++){var V=K[re];if(V.p!==b){var W=q.put(V.p,V.b+V.s);W&&(V.b=W)}}}}(Y,S),H.norm?(v(Y),_(N,Y,H)):y(N,Y)),P.length&&f(E,k,P,L);break;case"stack":case"relative":for(P=[],A=[],I=0;I<C.length;I++)void 0===(D=C[I])[0].trace.base?A.push(D):P.push(D);A.length&&function(R,S,N,B,H){var Y=new c(B,{posAxis:S,sepNegVal:"relative"===H.mode,overlapNoMerge:!(H.norm||"stack"===H.mode||"relative"===H.mode)});s(S,Y,H),function(K,q,re){var V,W,Z,oe,ie,ue,fe=w(K),he=q.traces;for(oe=0;oe<he.length;oe++)if("funnel"===(W=(V=he[oe])[0].trace).type)for(ie=0;ie<V.length;ie++)(ue=V[ie]).s!==b&&q.put(ue.p,-.5*ue.s);for(oe=0;oe<he.length;oe++){Z="funnel"===(W=(V=he[oe])[0].trace).type;var de=[];for(ie=0;ie<V.length;ie++)if((ue=V[ie]).s!==b){var be,pe=q.put(ue.p,be=Z?ue.s:ue.s+ue.b),Te=pe+be;ue.b=pe,ue[fe]=Te,re.norm||(de.push(Te),ue.hasB&&de.push(pe))}re.norm||(W._extremes[K._id]=r.findExtremes(K,de,{tozero:!0,padded:!0}))}}(N,Y,H);for(var Q=0;Q<B.length;Q++)for(var ne=B[Q],ae=0;ae<ne.length;ae++){var te=ne[ae];te.s!==b&&te.b+te.s===Y.get(te.p,te.s)&&(te._outmost=!0)}H.norm&&_(N,Y,H)}(0,E,k,A,L),P.length&&f(E,k,P,L)}!function(R,S){var N,B,H,Y=w(S),Q={},ne=1/0,ae=-1/0;for(N=0;N<R.length;N++)for(H=R[N],B=0;B<H.length;B++){var te=H[B].p;i(te)&&(ne=Math.min(ne,te),ae=Math.max(ae,te))}var K=1e4/(ae-ne),q=Q.round=function(ue){return String(Math.round(K*(ue-ne)))};for(N=0;N<R.length;N++){(H=R[N])[0].t.extents=Q;var re=H[0].t.poffset,V=Array.isArray(re);for(B=0;B<H.length;B++){var W=H[B],Z=W[Y]-W.w/2;if(i(Z)){var oe=W[Y]+W.w/2,ie=q(W.p);Q[ie]=Q[ie]?[Math.min(Z,Q[ie][0]),Math.max(oe,Q[ie][1])]:[Z,oe]}W.p0=W.p+(V?re[B]:re),W.p1=W.p0+W.w,W.s0=W.b,W.s1=W.s0+W.s}}}(C,E)}var R,S,N,H,Y}function f(x,E,k,C){for(var L=0;L<k.length;L++){var A=new c([k[L]],{posAxis:x,sepNegVal:!1,overlapNoMerge:!C.norm});s(x,A,C),C.norm?(v(A),_(E,A,C)):y(E,A)}}function s(x,E,k){for(var C=E.minDiff,L=E.traces,P=C*(1-k.gap),A=P*(1-(k.groupgap||0)),I=-A/2,D=0;D<L.length;D++){var R=L[D][0].t;R.barwidth=A,R.poffset=I,R.bargroupwidth=P,R.bardelta=C}E.binWidth=L[0][0].t.barwidth/100,o(E),d(x,E),g(x,E)}function o(x){var E,k,C=x.traces;for(E=0;E<C.length;E++){var L,P=C[E],A=P[0],I=A.trace,D=A.t,R=I._offset||I.offset,S=D.poffset;if(m(R)){for(L=Array.prototype.slice.call(R,0,P.length),k=0;k<L.length;k++)i(L[k])||(L[k]=S);for(k=L.length;k<P.length;k++)L.push(S);D.poffset=L}else void 0!==R&&(D.poffset=R);var N=I._width||I.width,B=D.barwidth;if(m(N)){var H=Array.prototype.slice.call(N,0,P.length);for(k=0;k<H.length;k++)i(H[k])||(H[k]=B);for(k=H.length;k<P.length;k++)H.push(B);if(D.barwidth=H,void 0===R){for(L=[],k=0;k<P.length;k++)L.push(S+(B-H[k])/2);D.poffset=L}}else void 0!==N&&(D.barwidth=N,void 0===R&&(D.poffset=S+(B-N)/2))}}function d(x,E){for(var k=E.traces,C=w(x),L=0;L<k.length;L++)for(var P=k[L],A=P[0].t,I=A.poffset,D=Array.isArray(I),R=A.barwidth,S=Array.isArray(R),N=0;N<P.length;N++){var B=P[N],H=B.w=S?R[N]:R;B[C]=B.p+(D?I[N]:I)+H/2}}function g(x,E,k){var C=E.traces,L=E.minDiff/2;r.minDtick(x,E.minDiff,E.distinctPositions[0],k);for(var P=0;P<C.length;P++){var A,I,D,R,S=C[P],N=S[0],B=N.trace,H=[];for(R=0;R<S.length;R++)I=(A=S[R]).p-L,H.push(I,D=A.p+L);if(B.width||B.offset){var Y=N.t,Q=Y.poffset,ne=Y.barwidth,ae=Array.isArray(Q),te=Array.isArray(ne);for(R=0;R<S.length;R++)D=(I=(A=S[R]).p+(ae?Q[R]:Q))+(te?ne[R]:ne),H.push(I,D)}B._extremes[x._id]=r.findExtremes(x,H,{padded:!1})}}function y(x,E){for(var k=E.traces,C=w(x),L=0;L<k.length;L++){for(var P=k[L],A=P[0].trace,I=[],D=!1,R=0;R<P.length;R++){var S=P[R],N=S.b,B=N+S.s;S[C]=B,I.push(B),S.hasB&&I.push(N),S.hasB&&S.b||(D=!0)}A._extremes[x._id]=r.findExtremes(x,I,{tozero:D,padded:!0})}}function v(x){for(var E=x.traces,k=0;k<E.length;k++)for(var C=E[k],L=0;L<C.length;L++){var P=C[L];P.s!==b&&x.put(P.p,P.b+P.s)}}function _(x,E,k){var C=E.traces,L=w(x),P="fraction"===k.norm?1:100,A=P/1e9,I=x.l2c(x.c2l(0)),D="stack"===k.mode?P:I;function R(re){return i(x.c2l(re))&&(re<I-A||re>D+A||!i(I))}for(var S=0;S<C.length;S++){for(var N=C[S],B=N[0].trace,H=[],Y=!1,Q=!1,ne=0;ne<N.length;ne++){var ae=N[ne];if(ae.s!==b){var te=Math.abs(P/E.get(ae.p,ae.s));ae.b*=te,ae.s*=te;var K=ae.b,q=K+ae.s;ae[L]=q,H.push(q),Q=Q||R(q),ae.hasB&&(H.push(K),Q=Q||R(K)),ae.hasB&&ae.b||(Y=!0)}}B._extremes[x._id]=r.findExtremes(x,H,{tozero:Y,padded:Q})}}function w(x){return x._id.charAt(0)}G.exports={crossTraceCalc:function(x,E){for(var k=E.xaxis,C=E.yaxis,L=x._fullLayout,P=x._fullData,A=x.calcdata,I=[],D=[],R=0;R<P.length;R++){var S=P[R];if(!0===S.visible&&p.traceIs(S,"bar")&&S.xaxis===k._id&&S.yaxis===C._id&&("h"===S.orientation?I.push(A[R]):D.push(A[R]),S._computePh))for(var N=x.calcdata[R],B=0;B<N.length;B++)"function"==typeof N[B].ph0&&(N[B].ph0=N[B].ph0()),"function"==typeof N[B].ph1&&(N[B].ph1=N[B].ph1())}var H={xCat:"category"===k.type||"multicategory"===k.type,yCat:"category"===C.type||"multicategory"===C.type,mode:L.barmode,norm:L.barnorm,gap:L.bargap,groupgap:L.bargroupgap};l(x,k,C,D,H),l(x,C,k,I,H)},setGroupPositions:l}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/axes":854,"../../plots/cartesian/constraints":862,"../../registry":931,"./sieve.js":954,"fast-isnumeric":249}],945:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/color"),b=h("../../registry"),p=h("../scatter/xy_defaults"),r=h("../scatter/period_defaults"),u=h("./style_defaults"),c=h("../../plots/cartesian/constraints").getAxisGroup,l=h("./attributes"),f=i.coerceFont;function s(d,g,y,v){var _=g.orientation,x=c(y,g[{v:"x",h:"y"}[_]+"axis"])+_,E=y._alignmentOpts||{},k=v("alignmentgroup"),C=E[x];C||(C=E[x]={});var L=C[k];L?L.traces.push(g):L=C[k]={traces:[g],alignmentIndex:Object.keys(C).length,offsetGroups:{}};var P=v("offsetgroup"),A=L.offsetGroups,I=A[P];P&&(I||(I=A[P]={offsetIndex:Object.keys(A).length}),g._offsetIndex=I.offsetIndex)}function o(d,g,y,v,_,w){var x=!1!==(w=w||{}).moduleHasSelected,E=!1!==w.moduleHasUnselected,k=!1!==w.moduleHasConstrain,C=!1!==w.moduleHasCliponaxis,L=!1!==w.moduleHasTextangle,P=!1!==w.moduleHasInsideanchor,A=!!w.hasPathbar,I=Array.isArray(_)||"auto"===_,D=I||"inside"===_,R=I||"outside"===_;if(D||R){var S=f(v,"textfont",y.font),N=i.extendFlat({},S),B=!(d.textfont&&d.textfont.color);if(B&&delete N.color,f(v,"insidetextfont",N),A){var H=i.extendFlat({},S);B&&delete H.color,f(v,"pathbar.textfont",H)}R&&f(v,"outsidetextfont",S),x&&v("selected.textfont.color"),E&&v("unselected.textfont.color"),k&&v("constraintext"),C&&v("cliponaxis"),L&&v("textangle"),v("texttemplate")}D&&P&&v("insidetextanchor")}G.exports={supplyDefaults:function(d,g,y,v){function _(k,C){return i.coerce(d,g,l,k,C)}if(p(d,g,v,_)){r(d,g,v,_),_("xhoverformat"),_("yhoverformat"),_("orientation",g.x&&!g.y?"h":"v"),_("base"),_("offset"),_("width"),_("text"),_("hovertext"),_("hovertemplate");var w=_("textposition");o(d,0,v,_,w,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),u(d,g,_,y,v);var x=(g.marker.line||{}).color,E=b.getComponentMethod("errorbars","supplyDefaults");E(d,g,x||m.defaultLine,{axis:"y"}),E(d,g,x||m.defaultLine,{axis:"x",inherit:"y"}),i.coerceSelectionMarkerOpacity(g,_)}else g.visible=!1},crossTraceDefaults:function(d,g){var y;function v(w){return i.coerce(y._input,y,l,w)}if("group"===g.barmode)for(var _=0;_<d.length;_++)"bar"===(y=d[_]).type&&s(0,y,g,v)},handleGroupingDefaults:s,handleText:o}},{"../../components/color":666,"../../lib":803,"../../plots/cartesian/constraints":862,"../../registry":931,"../scatter/period_defaults":1238,"../scatter/xy_defaults":1245,"./attributes":941,"./style_defaults":956}],946:[function(h,G,X){"use strict";G.exports=function(i,m,b){return i.x="xVal"in m?m.xVal:m.x,i.y="yVal"in m?m.yVal:m.y,m.xa&&(i.xaxis=m.xa),m.ya&&(i.yaxis=m.ya),"h"===b.orientation?(i.label=i.y,i.value=i.x):(i.label=i.x,i.value=i.y),i}},{}],947:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("tinycolor2"),b=h("../../lib").isArrayOrTypedArray;X.coerceString=function(p,r,u){if("string"==typeof r){if(r||!p.noBlank)return r}else if(("number"==typeof r||!0===r)&&!p.strict)return String(r);return void 0!==u?u:p.dflt},X.coerceNumber=function(p,r,u){if(i(r)){r=+r;var c=p.min,l=p.max;if(!(void 0!==c&&r<c||void 0!==l&&r>l))return r}return void 0!==u?u:p.dflt},X.coerceColor=function(p,r,u){return m(r).isValid()?r:void 0!==u?u:p.dflt},X.coerceEnumerated=function(p,r,u){return p.coerceNumber&&(r=+r),-1!==p.values.indexOf(r)?r:void 0!==u?u:p.dflt},X.getValue=function(p,r){var u;return Array.isArray(p)?r<p.length&&(u=p[r]):u=p,u},X.getLineWidth=function(p,r){return 0<r.mlw?r.mlw:b(p.marker.line.width)?0:p.marker.line.width}},{"../../lib":803,"fast-isnumeric":249,tinycolor2:598}],948:[function(h,G,X){"use strict";var i=h("../../components/fx"),m=h("../../registry"),b=h("../../components/color"),p=h("../../lib").fillText,r=h("./helpers").getLineWidth,u=h("../../plots/cartesian/axes").hoverLabelText,c=h("../../constants/numerical").BADNUM;function l(s,o,d,g,y){var v,_,w,x,E,k,C,L=s.cd,P=L[0].trace,A=L[0].t,I="closest"===g,D="waterfall"===P.type,R=s.maxHoverDistance,S=s.maxSpikeDistance;"h"===P.orientation?(v=d,_=o,w="y",x="x",E=V,k=q):(v=o,_=d,w="x",x="y",k=V,E=q);var N=P[w+"period"],B=I||N;function H(de){return Q(de,-1)}function Y(de){return Q(de,1)}function Q(de,be){return de[w]+be*de.w/2}function ne(de){return de[w+"End"]-de[w+"Start"]}var ae=I?H:N?function(de){return de.p-ne(de)/2}:function(de){return Math.min(H(de),de.p-A.bardelta/2)},te=I?Y:N?function(de){return de.p+ne(de)/2}:function(de){return Math.max(Y(de),de.p+A.bardelta/2)};function K(de,be,pe){return y.finiteRange&&(pe=0),i.inbox(de-v,be-v,pe+Math.min(1,Math.abs(be-de)/C)-1)}function q(de){return K(ae(de),te(de),R)}function re(de){var be=de[x];if(D){var pe=Math.abs(de.rawS)||0;_>0?be+=pe:_<0&&(be-=pe)}return be}function V(de){var be=_,pe=de.b,Te=re(de);return i.inbox(pe-be,Te-be,R+(Te-be)/(Te-pe)-1)}var W=s[w+"a"],Z=s[x+"a"];C=Math.abs(W.r2c(W.range[1])-W.r2c(W.range[0]));var de,be,pe,Te,oe=i.getDistanceFunction(g,E,k,function(de){return(E(de)+k(de))/2});if(i.getClosest(L,oe,s),!1!==s.index&&L[s.index].p!==c){B||(ae=function(de){return Math.min(H(de),de.p-A.bargroupwidth/2)},te=function(de){return Math.max(Y(de),de.p+A.bargroupwidth/2)});var ie=L[s.index],ue=P.base?ie.b+ie.s:ie.s;s[x+"0"]=s[x+"1"]=Z.c2p(ie[x],!0),s[x+"LabelVal"]=ue;var fe=A.extents[A.extents.round(ie.p)];return s[w+"0"]=W.c2p(I?ae(ie):fe[0],!0),s[w+"1"]=W.c2p(I?te(ie):fe[1],!0),s[w+"LabelVal"]=void 0!==ie.orig_p?ie.orig_p:ie.p,s.labelLabel=u(W,s[w+"LabelVal"],P[w+"hoverformat"]),s.valueLabel=u(Z,s[x+"LabelVal"],P[x+"hoverformat"]),s.baseLabel=u(Z,ie.b,P[x+"hoverformat"]),s.spikeDistance=(be=_,pe=(de=ie).b,Te=re(de),(i.inbox(pe-be,Te-be,S+(Te-be)/(Te-pe)-1)+function(de){return K(H(de),Y(de),S)}(ie))/2),s[w+"Spike"]=W.c2p(ie.p,!0),p(ie,P,s),s.hovertemplate=P.hovertemplate,s}}function f(s,o){var d=o.mcc||s.marker.color,g=o.mlcc||s.marker.line.color,y=r(s,o);return b.opacity(d)?d:b.opacity(g)&&y?g:void 0}G.exports={hoverPoints:function(s,o,d,g,y){var v=l(s,o,d,g,y);if(v){var _=v.cd,w=_[0].trace,x=_[v.index];return v.color=f(w,x),m.getComponentMethod("errorbars","hoverInfo")(x,w,v),[v]}},hoverOnBars:l,getTraceColor:f}},{"../../components/color":666,"../../components/fx":706,"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/axes":854,"../../registry":931,"./helpers":947}],949:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),layoutAttributes:h("./layout_attributes"),supplyDefaults:h("./defaults").supplyDefaults,crossTraceDefaults:h("./defaults").crossTraceDefaults,supplyLayoutDefaults:h("./layout_defaults"),calc:h("./calc"),crossTraceCalc:h("./cross_trace_calc").crossTraceCalc,colorbar:h("../scatter/marker_colorbar"),arraysToCalcdata:h("./arrays_to_calcdata"),plot:h("./plot").plot,style:h("./style").style,styleOnSelect:h("./style").styleOnSelect,hoverPoints:h("./hover").hoverPoints,eventData:h("./event_data"),selectPoints:h("./select"),moduleType:"trace",name:"bar",basePlotModule:h("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":868,"../scatter/marker_colorbar":1236,"./arrays_to_calcdata":940,"./attributes":941,"./calc":942,"./cross_trace_calc":944,"./defaults":945,"./event_data":946,"./hover":948,"./layout_attributes":950,"./layout_defaults":951,"./plot":952,"./select":953,"./style":955}],950:[function(h,G,X){"use strict";G.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],951:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../plots/cartesian/axes"),b=h("../../lib"),p=h("./layout_attributes");G.exports=function(r,u,c){function l(w,x){return b.coerce(r,u,p,w,x)}for(var f=!1,s=!1,o=!1,d={},g=l("barmode"),y=0;y<c.length;y++){var v=c[y];if(i.traceIs(v,"bar")&&v.visible){if(f=!0,"group"===g){var _=v.xaxis+v.yaxis;d[_]&&(o=!0),d[_]=!0}v.visible&&"histogram"===v.type&&"category"!==m.getFromId({_fullLayout:u},v["v"===v.orientation?"xaxis":"yaxis"]).type&&(s=!0)}}f?("overlay"!==g&&l("barnorm"),l("bargap",s&&!o?0:.2),l("bargroupgap")):delete u.barmode}},{"../../lib":803,"../../plots/cartesian/axes":854,"../../registry":931,"./layout_attributes":950}],952:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("fast-isnumeric"),b=h("../../lib"),p=h("../../lib/svg_text_utils"),r=h("../../components/color"),u=h("../../components/drawing"),c=h("../../registry"),l=h("../../plots/cartesian/axes").tickText,f=h("./uniform_text"),s=f.recordMinTextSize,o=f.clearMinTextSize,d=h("./style"),g=h("./helpers"),y=h("./constants"),v=h("./attributes"),_=v.text,w=v.textposition,x=h("../../components/fx/helpers").appendArrayPointValue,E=y.TEXTPAD;function k(S){return S.id}function L(S,N){return S<N?1:-1}function P(S,N,B,H){var Y;return!N.uniformtext.mode&&A(B)?(H&&(Y=H()),S.transition().duration(B.duration).ease(B.easing).each("end",function(){Y&&Y()}).each("interrupt",function(){Y&&Y()})):S}function A(S){return S&&S.duration>0}function I(S){return"auto"===S?0:S}function D(S,N){var B=Math.PI/180*N,H=Math.abs(Math.sin(B)),Y=Math.abs(Math.cos(B));return{x:S.width*Y+S.height*H,y:S.width*H+S.height*Y}}function R(S,N,B,H,Y,Q){var ne=!!Q.isHorizontal,ae=!!Q.constrained,te=Q.angle||0,K=Q.anchor||"end",q="end"===K,re="start"===K,V=((Q.leftToRight||0)+1)/2,W=1-V,Z=Y.width,oe=Y.height,ie=Math.abs(N-S),ue=Math.abs(H-B),fe=ie>2*E&&ue>2*E?E:0;ie-=2*fe,ue-=2*fe;var he=I(te);"auto"!==te||Z<=ie&&oe<=ue||!(Z>ie||oe>ue)||(Z>ue||oe>ie)&&Z<oe==ie<ue||(he+=90);var de=D(Y,he),be=1;ae&&(be=Math.min(1,ie/de.x,ue/de.y));var pe=Y.left*W+Y.right*V,Te=(Y.top+Y.bottom)/2,ye=(S+E)*W+(N-E)*V,ke=(B+H)/2,ze=0,je=0;if(re||q){var Ie=(ne?de.x:de.y)/2,Ce=ne?L(S,N):L(B,H);ne?re?(ye=S+Ce*fe,ze=-Ce*Ie):(ye=N-Ce*fe,ze=Ce*Ie):re?(ke=B+Ce*fe,je=-Ce*Ie):(ke=H-Ce*fe,je=Ce*Ie)}return{textX:pe,textY:Te,targetX:ye,targetY:ke,anchorX:ze,anchorY:je,scale:be,rotate:he}}G.exports={plot:function(S,N,B,H,Y,Q){var ne=N.xaxis,ae=N.yaxis,te=S._fullLayout;Y||(Y={mode:te.barmode,norm:te.barmode,gap:te.bargap,groupgap:te.bargroupgap},o("bar",te));var K=b.makeTraceGroups(H,B,"trace bars").each(function(q){var re=i.select(this),V=q[0].trace,oe="bar"===V.type||"funnel"===V.type,ie=0;"waterfall"===V.type&&V.connector.visible&&"between"===V.connector.mode&&(ie=V.connector.line.width/2);var ue="h"===V.orientation,fe=A(Y),he=b.ensureSingle(re,"g","points"),de=function(S){if(S.ids)return k}(V),be=he.selectAll("g.point").data(b.identity,de);be.enter().append("g").classed("point",!0),be.exit().remove(),be.each(function(Te,ye){var ke,ze,qe,Ye,ot,at,ct,_t,xt,Ht,je=i.select(this),Ie=(Ye=ne,ot=ae,_t=[],Ht=(at=ue)?ot:Ye,(ct=[])[0]=(xt=at?Ye:ot).c2p((qe=Te).s0,!0),_t[0]=Ht.c2p(qe.p0,!0),ct[1]=xt.c2p(qe.s1,!0),_t[1]=Ht.c2p(qe.p1,!0),at?[ct,_t]:[_t,ct]),Ce=Ie[0][0],_e=Ie[0][1],we=Ie[1][0],Se=Ie[1][1],Oe=0==(ue?_e-Ce:Se-we);if(Oe&&oe&&g.getLineWidth(V,Te)&&(Oe=!1),Oe||(Oe=!(m(Ce)&&m(_e)&&m(we)&&m(Se))),Te.isBlank=Oe,Oe&&(ue?_e=Ce:Se=we),ie&&!Oe&&(ue?(Ce-=L(Ce,_e)*ie,_e+=L(Ce,_e)*ie):(we-=L(we,Se)*ie,Se+=L(we,Se)*ie)),"waterfall"===V.type){if(!Oe){var Be=V[Te.dir].marker;ke=Be.line.width,ze=Be.color}}else ke=g.getLineWidth(V,Te),ze=Te.mc||V.marker.color;function He(qe){var Ye=i.round(ke/2%1,2);return 0===Y.gap&&0===Y.groupgap?i.round(Math.round(qe)-Ye,2):qe}if(!S._context.staticPlot){var Xe=r.opacity(ze)<1||ke>.01?He:function(qe,Ye,ot){return ot&&qe===Ye?qe:Math.abs(qe-Ye)>=2?He(qe):qe>Ye?Math.ceil(qe):Math.floor(qe)};Ce=Xe(Ce,_e,ue),_e=Xe(_e,Ce,ue),we=Xe(we,Se,!ue),Se=Xe(Se,we,!ue)}var nt=P(b.ensureSingle(je,"path"),te,Y,Q);if(nt.style("vector-effect","non-scaling-stroke").attr("d",isNaN((_e-Ce)*(Se-we))||Oe&&S._context.staticPlot?"M0,0Z":"M"+Ce+","+we+"V"+Se+"H"+_e+"V"+we+"Z").call(u.setClipUrl,N.layerClipId,S),!te.uniformtext.mode&&fe){var et=u.makePointStyleFns(V);u.singlePointStyle(Te,nt,V,et,S)}(function(qe,Ye,ot,at,ct,_t,xt,Ht,At,ht,st){var Bt,gn=Ye.xaxis,hn=Ye.yaxis,We=qe._fullLayout;function it(vn,Qt,yn){return b.ensureSingle(vn,"text").text(Qt).attr({class:"bartext bartext-"+Bt,"text-anchor":"middle","data-notex":1}).call(u.font,yn).call(p.convertToTspans,qe)}var Qt,yn,Mn,Pn,sn,In,qt=at[0].trace,Ge="h"===qt.orientation,Pe=(yn=ct,Mn=gn,Pn=hn,sn=(In=(Qt=at)[0].trace).texttemplate?function(Rn,Ln,qn,nr,rr){var gr=Ln[0].trace,jr=b.castOption(gr,qn,"texttemplate");if(!jr)return"";var kr,er,Xr,ir,Bn="waterfall"===gr.type,mr="funnel"===gr.type;function zr(Ct){return l(ir,ir.c2l(Ct),!0).text}"h"===gr.orientation?(kr="y",er=rr,Xr="x",ir=nr):(kr="x",er=nr,Xr="y",ir=rr);var br=Ln[qn],Dr={};Dr.label=br.p,Dr.labelLabel=Dr[kr+"Label"]=l(er,er.c2l(br.p),!0).text;var ni=b.castOption(gr,br.i,"text");(0===ni||ni)&&(Dr.text=ni),Dr.value=br.s,Dr.valueLabel=Dr[Xr+"Label"]=zr(br.s);var pi={};x(pi,gr,br.i),Bn&&(Dr.delta=+br.rawS||br.s,Dr.deltaLabel=zr(Dr.delta),Dr.final=br.v,Dr.finalLabel=zr(Dr.final),Dr.initial=Dr.final-Dr.delta,Dr.initialLabel=zr(Dr.initial)),mr&&(Dr.value=br.s,Dr.valueLabel=zr(Dr.value),Dr.percentInitial=br.begR,Dr.percentInitialLabel=b.formatPercent(br.begR),Dr.percentPrevious=br.difR,Dr.percentPreviousLabel=b.formatPercent(br.difR),Dr.percentTotal=br.sumR,Dr.percenTotalLabel=b.formatPercent(br.sumR));var qi=b.castOption(gr,br.i,"customdata");return qi&&(Dr.customdata=qi),b.texttemplateString(jr,Dr,Rn._d3locale,pi,Dr,gr._meta||{})}(We,Qt,yn,Mn,Pn):In.textinfo?function(Rn,Ln,qn,nr){var rr=Rn[0].trace,gr="h"===rr.orientation,jr="waterfall"===rr.type,kr="funnel"===rr.type;function er(mn){return l(gr?qn:nr,+mn,!0).text}var Xr,Bn=Rn[Ln],mr=rr.textinfo.split("+"),zr=[],br=function(mn){return-1!==mr.indexOf(mn)};if(br("label")&&zr.push(l(gr?nr:qn,Rn[Ln].p,!0).text),br("text")&&(0===(Xr=b.castOption(rr,Bn.i,"text"))||Xr)&&zr.push(Xr),jr){var di=+Bn.rawS||Bn.s,ni=Bn.v,pi=ni-di;br("initial")&&zr.push(er(pi)),br("delta")&&zr.push(er(di)),br("final")&&zr.push(er(ni))}if(kr){br("value")&&zr.push(er(Bn.s));var qi=0;br("percent initial")&&qi++,br("percent previous")&&qi++,br("percent total")&&qi++;var Ct=qi>1;br("percent initial")&&(Xr=b.formatPercent(Bn.begR),Ct&&(Xr+=" of initial"),zr.push(Xr)),br("percent previous")&&(Xr=b.formatPercent(Bn.difR),Ct&&(Xr+=" of previous"),zr.push(Xr)),br("percent total")&&(Xr=b.formatPercent(Bn.sumR),Ct&&(Xr+=" of total"),zr.push(Xr))}return zr.join("<br>")}(Qt,yn,Mn,Pn):g.getValue(In.text,yn),g.coerceString(_,sn));Bt=function(vn,Qt){var yn=g.getValue(vn.textposition,Qt);return g.coerceEnumerated(w,yn)}(qt,ct);var Ne=at[ct],Ve=!("stack"===ht.mode||"relative"===ht.mode)||Ne._outmost;if(Pe&&"none"!==Bt&&(!Ne.isBlank&&_t!==xt&&Ht!==At||"auto"!==Bt&&"inside"!==Bt)){var Ke=We.font,bt=d.getBarColor(at[ct],qt),gt=d.getInsideTextFont(qt,ct,Ke,bt),pt=d.getOutsideTextFont(qt,ct,Ke),St=ot.datum();Ge?"log"===gn.type&&St.s0<=0&&(_t=gn.range[0]<gn.range[1]?0:gn._length):"log"===hn.type&&St.s0<=0&&(Ht=hn.range[0]<hn.range[1]?hn._length:0);var jt,Lt,Vt,mt,Wt,Kt=Math.abs(xt-_t)-2*E,rn=Math.abs(At-Ht)-2*E;if("outside"===Bt&&(Ve||Ne.hasB||(Bt="inside")),"auto"===Bt&&(Ve?(Bt="inside",jt=it(ot,Pe,Wt=b.ensureUniformFontSize(qe,gt)),mt=(Lt=u.bBox(jt.node())).height,(Vt=Lt.width)>0&&mt>0&&(Vt<=Kt&&mt<=rn||Vt<=rn&&mt<=Kt||(Ge?Kt>=Vt*(rn/mt):rn>=mt*(Kt/Vt)))?Bt="inside":(Bt="outside",jt.remove(),jt=null)):Bt="inside"),!jt){var Ut=(jt=it(ot,Pe,Wt=b.ensureUniformFontSize(qe,"outside"===Bt?pt:gt))).attr("transform");if(jt.attr("transform",""),Vt=(Lt=u.bBox(jt.node())).width,mt=Lt.height,jt.attr("transform",Ut),Vt<=0||mt<=0)return void jt.remove()}var Zt,un=qt.textangle;(Zt="outside"===Bt?function(vn,Qt,yn,Mn,Pn,sn){var In,Rn=!!sn.isHorizontal,Ln=!!sn.constrained,qn=sn.angle||0,nr=Pn.width,rr=Pn.height,gr=Math.abs(Qt-vn),jr=Math.abs(Mn-yn);In=Rn?jr>2*E?E:0:gr>2*E?E:0;var kr=1;Ln&&(kr=Rn?Math.min(1,jr/rr):Math.min(1,gr/nr));var er=I(qn),Xr=D(Pn,er),ir=(Rn?Xr.x:Xr.y)/2,Bn=(Pn.left+Pn.right)/2,mr=(Pn.top+Pn.bottom)/2,zr=(vn+Qt)/2,br=(yn+Mn)/2,Dr=0,di=0,ni=Rn?L(Qt,vn):L(yn,Mn);return Rn?(zr=Qt-ni*In,Dr=ni*ir):(br=Mn+ni*In,di=-ni*ir),{textX:Bn,textY:mr,targetX:zr,targetY:br,anchorX:Dr,anchorY:di,scale:kr,rotate:er}}(_t,xt,Ht,At,Lt,{isHorizontal:Ge,constrained:"both"===qt.constraintext||"outside"===qt.constraintext,angle:un}):R(_t,xt,Ht,At,Lt,{isHorizontal:Ge,constrained:"both"===qt.constraintext||"inside"===qt.constraintext,angle:un,anchor:qt.insidetextanchor})).fontSize=Wt.size,s(qt.type,Zt,We),Ne.transform=Zt,P(jt,We,ht,st).attr("transform",b.getTextTransform(Zt))}else ot.select("text").remove()})(S,N,je,q,ye,Ce,_e,we,Se,Y,Q),N.layerClipId&&u.hideOutsideRangePoint(Te,je.select("text"),ne,ae,V.xcalendar,V.ycalendar)}),u.setClipUrl(re,!1===V.cliponaxis?null:N.layerClipId,S)});c.getComponentMethod("errorbars","plot")(S,K,N,Y)},toMoveInsideBar:R}},{"../../components/color":666,"../../components/drawing":688,"../../components/fx/helpers":702,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"../../registry":931,"./attributes":941,"./constants":943,"./helpers":947,"./style":955,"./uniform_text":957,"@plotly/d3":58,"fast-isnumeric":249}],953:[function(h,G,X){"use strict";function i(m,b,p,r,u){var c=b.c2p(r?m.s0:m.p0,!0),l=b.c2p(r?m.s1:m.p1,!0),f=p.c2p(r?m.p0:m.s0,!0),s=p.c2p(r?m.p1:m.s1,!0);return u?[(c+l)/2,(f+s)/2]:r?[l,(f+s)/2]:[(c+l)/2,s]}G.exports=function(m,b){var p,r=m.cd,u=m.xaxis,c=m.yaxis,l=r[0].trace,f="funnel"===l.type,s="h"===l.orientation,o=[];if(!1===b)for(p=0;p<r.length;p++)r[p].selected=0;else for(p=0;p<r.length;p++){var d=r[p],g="ct"in d?d.ct:i(d,u,c,s,f);b.contains(g,!1,p,m)?(o.push({pointNumber:p,x:u.c2d(d.x),y:c.c2d(d.y)}),d.selected=1):d.selected=0}return o}},{}],954:[function(h,G,X){"use strict";G.exports=b;var i=h("../../lib").distinctVals,m=h("../../constants/numerical").BADNUM;function b(p,r){this.traces=p,this.sepNegVal=r.sepNegVal,this.overlapNoMerge=r.overlapNoMerge;for(var u=1/0,c=[],l=0;l<p.length;l++){for(var f=p[l],s=0;s<f.length;s++){var o=f[s];o.p!==m&&c.push(o.p)}f[0]&&f[0].width1&&(u=Math.min(f[0].width1,u))}this.positions=c;var d=i(c);this.distinctPositions=d.vals,this.minDiff=1===d.vals.length&&u!==1/0?u:Math.min(d.minDiff,u);var g=(r.posAxis||{}).type;"category"!==g&&"multicategory"!==g||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}b.prototype.put=function(p,r){var u=this.getLabel(p,r),c=this.bins[u]||0;return this.bins[u]=c+r,c},b.prototype.get=function(p,r){var u=this.getLabel(p,r);return this.bins[u]||0},b.prototype.getLabel=function(p,r){return(r<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?p:Math.round(p/this.binWidth))}},{"../../constants/numerical":779,"../../lib":803}],955:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/color"),b=h("../../components/drawing"),p=h("../../lib"),r=h("../../registry"),u=h("./uniform_text").resizeText,c=h("./attributes"),l=c.textfont,f=c.insidetextfont,s=c.outsidetextfont,o=h("./helpers");function d(k,C,L){b.pointStyle(k.selectAll("path"),C,L),g(k,C,L)}function g(k,C,L){k.selectAll("text").each(function(P){var A=i.select(this),I=p.ensureUniformFontSize(L,y(A,P,C,L));b.font(A,I)})}function y(k,C,L,P){var A=P._fullLayout.font,I=L.textfont;if(k.classed("bartext-inside")){var D=E(C,L);I=_(L,C.i,A,D)}else k.classed("bartext-outside")&&(I=w(L,C.i,A));return I}function v(k,C,L){return x(l,k.textfont,C,L)}function _(k,C,L,P){var A=v(k,C,L);return(void 0===k._input.textfont||void 0===k._input.textfont.color||Array.isArray(k.textfont.color)&&void 0===k.textfont.color[C])&&(A={color:m.contrast(P),family:A.family,size:A.size}),x(f,k.insidetextfont,C,A)}function w(k,C,L){var P=v(k,C,L);return x(s,k.outsidetextfont,C,P)}function x(k,C,L,P){var A=o.getValue((C=C||{}).family,L),I=o.getValue(C.size,L),D=o.getValue(C.color,L);return{family:o.coerceString(k.family,A,P.family),size:o.coerceNumber(k.size,I,P.size),color:o.coerceColor(k.color,D,P.color)}}function E(k,C){return"waterfall"===C.type?C[k.dir].marker.color:k.mcc||k.mc||C.marker.color}G.exports={style:function(k){var C=i.select(k).selectAll("g.barlayer").selectAll("g.trace");u(k,C,"bar");var L=C.size(),P=k._fullLayout;C.style("opacity",function(A){return A[0].trace.opacity}).each(function(A){("stack"===P.barmode&&L>1||0===P.bargap&&0===P.bargroupgap&&!A[0].trace.marker.line.width)&&i.select(this).attr("shape-rendering","crispEdges")}),C.selectAll("g.points").each(function(A){d(i.select(this),A[0].trace,k)}),r.getComponentMethod("errorbars","style")(C)},styleTextPoints:g,styleOnSelect:function(k,C,L){var A,I,D,R,S,N,P=C[0].trace;P.selectedpoints?(I=P,D=k,b.selectedPointStyle((A=L).selectAll("path"),I),R=A.selectAll("text"),S=I,N=D,R.each(function(B){var H,Y=i.select(this);if(B.selected){H=p.ensureUniformFontSize(N,y(Y,B,S,N));var Q=S.selected.textfont&&S.selected.textfont.color;Q&&(H.color=Q),b.font(Y,H)}else b.selectedTextStyle(Y,S)})):(d(L,P,k),r.getComponentMethod("errorbars","style")(L))},getInsideTextFont:_,getOutsideTextFont:w,getBarColor:E,resizeText:u}},{"../../components/color":666,"../../components/drawing":688,"../../lib":803,"../../registry":931,"./attributes":941,"./helpers":947,"./uniform_text":957,"@plotly/d3":58}],956:[function(h,G,X){"use strict";var i=h("../../components/color"),m=h("../../components/colorscale/helpers").hasColorscale,b=h("../../components/colorscale/defaults"),p=h("../../lib").coercePattern;G.exports=function(r,u,c,l,f){var s=c("marker.color",l),o=m(r,"marker");o&&b(r,u,f,c,{prefix:"marker.",cLetter:"c"}),c("marker.line.color",i.defaultLine),m(r,"marker.line")&&b(r,u,f,c,{prefix:"marker.line.",cLetter:"c"}),c("marker.line.width"),c("marker.opacity"),p(c,"marker.pattern",s,o),c("selected.marker.color"),c("unselected.marker.color")}},{"../../components/color":666,"../../components/colorscale/defaults":676,"../../components/colorscale/helpers":677,"../../lib":803}],957:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib");function b(p){return"_"+p+"Text_minsize"}G.exports={recordMinTextSize:function(p,r,u){if(u.uniformtext.mode){var c=b(p),l=u.uniformtext.minsize,f=r.scale*r.fontSize;r.hide=f<l,u[c]=u[c]||1/0,r.hide||(u[c]=Math.min(u[c],Math.max(f,l)))}},clearMinTextSize:function(p,r){r[b(p)]=void 0},resizeText:function(p,r,u){var c=p._fullLayout,l=c["_"+u+"Text_minsize"];if(l){var f,s="hide"===c.uniformtext.mode;switch(u){case"funnelarea":case"pie":case"sunburst":f="g.slice";break;case"treemap":case"icicle":f="g.slice, g.pathbar";break;default:f="g.points > g.point"}r.selectAll(f).each(function(o){var d=o.transform;d&&(d.scale=s&&d.hide?0:l/d.fontSize,i.select(this).select("text").attr("transform",m.getTextTransform(d)))})}}}},{"../../lib":803,"@plotly/d3":58}],958:[function(h,G,X){"use strict";var i=h("../../plots/template_attributes").hovertemplateAttrs,m=h("../../lib/extend").extendFlat,b=h("../scatterpolar/attributes"),p=h("../bar/attributes");G.exports={r:b.r,theta:b.theta,r0:b.r0,dr:b.dr,theta0:b.theta0,dtheta:b.dtheta,thetaunit:b.thetaunit,base:m({},p.base,{}),offset:m({},p.offset,{}),width:m({},p.width,{}),text:m({},p.text,{}),hovertext:m({},p.hovertext,{}),marker:p.marker,hoverinfo:b.hoverinfo,hovertemplate:i(),selected:p.selected,unselected:p.unselected}},{"../../lib/extend":793,"../../plots/template_attributes":926,"../bar/attributes":941,"../scatterpolar/attributes":1292}],959:[function(h,G,X){"use strict";var i=h("../../components/colorscale/helpers").hasColorscale,m=h("../../components/colorscale/calc"),b=h("../bar/arrays_to_calcdata"),p=h("../bar/cross_trace_calc").setGroupPositions,r=h("../scatter/calc_selection"),u=h("../../registry").traceIs,c=h("../../lib").extendFlat;G.exports={calc:function(l,f){for(var s=l._fullLayout,o=f.subplot,g=s[o].angularaxis,y=s[o].radialaxis.makeCalcdata(f,"r"),v=g.makeCalcdata(f,"theta"),_=f._length,w=new Array(_),x=y,E=v,k=0;k<_;k++)w[k]={p:E[k],s:x[k]};function C(L){var P=f[L];void 0!==P&&(f["_"+L]=Array.isArray(P)?g.makeCalcdata(f,L):g.d2c(P,f.thetaunit))}return"linear"===g.type&&(C("width"),C("offset")),i(f,"marker")&&m(l,f,{vals:f.marker.color,containerStr:"marker",cLetter:"c"}),i(f,"marker.line")&&m(l,f,{vals:f.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(w,f),r(w,f),w},crossTraceCalc:function(l,f,s){for(var o=l.calcdata,d=[],g=0;g<o.length;g++){var y=o[g],v=y[0].trace;!0===v.visible&&u(v,"bar")&&v.subplot===s&&d.push(y)}var _=c({},f.radialaxis,{_id:"x"});p(l,f.angularaxis,_,d,{mode:f.barmode,norm:f.barnorm,gap:f.bargap,groupgap:f.bargroupgap})}}},{"../../components/colorscale/calc":674,"../../components/colorscale/helpers":677,"../../lib":803,"../../registry":931,"../bar/arrays_to_calcdata":940,"../bar/cross_trace_calc":944,"../scatter/calc_selection":1220}],960:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../scatterpolar/defaults").handleRThetaDefaults,b=h("../bar/style_defaults"),p=h("./attributes");G.exports=function(r,u,c,l){function f(s,o){return i.coerce(r,u,p,s,o)}m(r,u,l,f)?(f("thetaunit"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate"),b(r,u,f,c,l),i.coerceSelectionMarkerOpacity(u,f)):u.visible=!1}},{"../../lib":803,"../bar/style_defaults":956,"../scatterpolar/defaults":1294,"./attributes":958}],961:[function(h,G,X){"use strict";var i=h("../../components/fx"),m=h("../../lib"),b=h("../bar/hover").getTraceColor,p=m.fillText,r=h("../scatterpolar/hover").makeHoverPointText,u=h("../../plots/polar/helpers").isPtInsidePolygon;G.exports=function(c,l,f){var s=c.cd,o=s[0].trace,d=c.subplot,g=d.radialAxis,v=d.vangles,_=v?u:m.isPtInsideSector,w=c.maxHoverDistance,x=d.angularAxis._period||2*Math.PI,E=Math.abs(g.g2p(Math.sqrt(l*l+f*f))),k=Math.atan2(f,l);if(g.range[0]>g.range[1]&&(k+=Math.PI),i.getClosest(s,function(P){return _(E,k,[P.rp0,P.rp1],[P.thetag0,P.thetag1],v)?w+Math.min(1,Math.abs(P.thetag1-P.thetag0)/x)-1+(P.rp1-E)/(P.rp1-P.rp0)-1:1/0},c),!1!==c.index){var C=s[c.index];c.x0=c.x1=C.ct[0],c.y0=c.y1=C.ct[1];var L=m.extendFlat({},C,{r:C.s,theta:C.p});return p(C,o,c),r(L,o,d,c),c.hovertemplate=o.hovertemplate,c.color=b(o,C),c.xLabelVal=c.yLabelVal=void 0,C.s<0&&(c.idealAlign="left"),[c]}}},{"../../components/fx":706,"../../lib":803,"../../plots/polar/helpers":919,"../bar/hover":948,"../scatterpolar/hover":1296}],962:[function(h,G,X){"use strict";G.exports={moduleType:"trace",name:"barpolar",basePlotModule:h("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:h("./attributes"),layoutAttributes:h("./layout_attributes"),supplyDefaults:h("./defaults"),supplyLayoutDefaults:h("./layout_defaults"),calc:h("./calc").calc,crossTraceCalc:h("./calc").crossTraceCalc,plot:h("./plot"),colorbar:h("../scatter/marker_colorbar"),formatLabels:h("../scatterpolar/format_labels"),style:h("../bar/style").style,styleOnSelect:h("../bar/style").styleOnSelect,hoverPoints:h("./hover"),selectPoints:h("../bar/select"),meta:{}}},{"../../plots/polar":920,"../bar/select":953,"../bar/style":955,"../scatter/marker_colorbar":1236,"../scatterpolar/format_labels":1295,"./attributes":958,"./calc":959,"./defaults":960,"./hover":961,"./layout_attributes":963,"./layout_defaults":964,"./plot":965}],963:[function(h,G,X){"use strict";G.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],964:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./layout_attributes");G.exports=function(b,p,r){var u,c={};function l(o,d){return i.coerce(b[u]||{},p[u],m,o,d)}for(var f=0;f<r.length;f++){var s=r[f];"barpolar"===s.type&&!0===s.visible&&(c[u=s.subplot]||(l("barmode"),l("bargap"),c[u]=1))}}},{"../../lib":803,"./layout_attributes":963}],965:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("fast-isnumeric"),b=h("../../lib"),p=h("../../components/drawing"),r=h("../../plots/polar/helpers");G.exports=function(u,c,l){var v,_,w,f=c.xaxis,s=c.yaxis,o=c.radialAxis,d=c.angularAxis,g=(_=(v=c).cxx,w=v.cyy,v.vangles?function(x,E,k,C){var L,P;b.angleDelta(k,C)>0?(L=k,P=C):(L=C,P=k);var A=[r.findEnclosingVertexAngles(L,v.vangles)[0],(L+P)/2,r.findEnclosingVertexAngles(P,v.vangles)[1]];return r.pathPolygonAnnulus(x,E,L,P,A,_,w)}:function(x,E,k,C){return b.pathAnnulus(x,E,k,C,_,w)}),y=c.layers.frontplot.select("g.barlayer");b.makeTraceGroups(y,l,"trace bars").each(function(){var v=i.select(this),_=b.ensureSingle(v,"g","points").selectAll("g.point").data(b.identity);_.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),_.exit().remove(),_.each(function(w){var x,E=i.select(this),k=w.rp0=o.c2p(w.s0),C=w.rp1=o.c2p(w.s1),L=w.thetag0=d.c2g(w.p0),P=w.thetag1=d.c2g(w.p1);if(m(k)&&m(C)&&m(L)&&m(P)&&k!==C&&L!==P){var A=o.c2g(w.s1),I=(L+P)/2;w.ct=[f.c2p(A*Math.cos(I)),s.c2p(A*Math.sin(I))],x=g(k,C,L,P)}else x="M0,0Z";b.ensureSingle(E,"path").attr("d",x)}),p.setClipUrl(v,c._hasClipOnAxisFalse?c.clipIds.forTraces:null,u)})}},{"../../components/drawing":688,"../../lib":803,"../../plots/polar/helpers":919,"@plotly/d3":58,"fast-isnumeric":249}],966:[function(h,G,X){"use strict";var i=h("../scatter/attributes"),m=h("../bar/attributes"),b=h("../../components/color/attributes"),p=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,r=h("../../plots/template_attributes").hovertemplateAttrs,u=h("../../lib/extend").extendFlat,c=i.marker,l=c.line;G.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:i.xperiod,yperiod:i.yperiod,xperiod0:i.xperiod0,yperiod0:i.yperiod0,xperiodalignment:i.xperiodalignment,yperiodalignment:i.yperiodalignment,xhoverformat:p("x"),yhoverformat:p("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:u({},c.symbol,{arrayOk:!1,editType:"plot"}),opacity:u({},c.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:u({},c.size,{arrayOk:!1,editType:"calc"}),color:u({},c.color,{arrayOk:!1,editType:"style"}),line:{color:u({},l.color,{arrayOk:!1,dflt:b.defaultLine,editType:"style"}),width:u({},l.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:i.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:{marker:i.selected.marker,editType:"style"},unselected:{marker:i.unselected.marker,editType:"style"},text:u({},i.text,{}),hovertext:u({},i.hovertext,{}),hovertemplate:r({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":665,"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../bar/attributes":941,"../scatter/attributes":1218}],967:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../plots/cartesian/axes"),b=h("../../plots/cartesian/align_period"),p=h("../../lib"),r=h("../../constants/numerical").BADNUM,u=p._;G.exports=function(_,w){var x,E,k,C,L,P,A,I=_._fullLayout,D=m.getFromId(_,w.xaxis||"x"),R=m.getFromId(_,w.yaxis||"y"),S=[],N="violin"===w.type?"_numViolins":"_numBoxes";"h"===w.orientation?(k=D,C="x",L=R,P="y",A=!!w.yperiodalignment):(k=R,C="y",L=D,P="x",A=!!w.xperiodalignment);var B,H,Y,Q,ne,ae,te=function(ot,at,ct,_t){var xt,Ht=at+"0"in ot;if(at in ot||Ht&&"d"+at in ot){var ht=ct.makeCalcdata(ot,at);return[b(ot,ct,at,ht).vals,ht]}xt=Ht?ot[at+"0"]:"name"in ot&&("category"===ct.type||i(ot.name)&&-1!==["linear","log"].indexOf(ct.type)||p.isDateTime(ot.name)&&"date"===ct.type)?ot.name:_t;for(var st="multicategory"===ct.type?ct.r2c_just_indices(xt):ct.d2c(xt,0,ot[at+"calendar"]),Bt=ot._length,gn=new Array(Bt),hn=0;hn<Bt;hn++)gn[hn]=st;return[gn]}(w,P,L,I[N]),K=te[0],q=te[1],re=p.distinctVals(K,L),V=re.vals,W=re.minDiff/2,Z="all"===(w.boxpoints||w.points)?p.identity:function(ot){return ot.v<B.lf||ot.v>B.uf};if(w._hasPreCompStats){var oe=w[C],ie=function(ot){return k.d2c((w[ot]||[])[x])},ue=1/0,fe=-1/0;for(x=0;x<w._length;x++){var he=K[x];if(i(he)){if((B={}).pos=B[P]=he,A&&q&&(B.orig_p=q[x]),B.q1=ie("q1"),B.med=ie("median"),B.q3=ie("q3"),H=[],oe&&p.isArrayOrTypedArray(oe[x]))for(E=0;E<oe[x].length;E++)(ae=k.d2c(oe[x][E]))!==r&&(l(ne={v:ae,i:[x,E]},w,[x,E]),H.push(ne));if(B.pts=H.sort(f),Q=(Y=B[C]=H.map(s)).length,B.med!==r&&B.q1!==r&&B.q3!==r&&B.med>=B.q1&&B.q3>=B.med){var de=ie("lowerfence");B.lf=de!==r&&de<=B.q1?de:o(B,Y,Q);var be=ie("upperfence");B.uf=be!==r&&be>=B.q3?be:d(B,Y,Q);var pe=ie("mean");B.mean=pe!==r?pe:Q?p.mean(Y,Q):(B.q1+B.q3)/2;var Te=ie("sd");B.sd=pe!==r&&Te>=0?Te:Q?p.stdev(Y,Q,B.mean):B.q3-B.q1,B.lo=g(B),B.uo=y(B);var ye=ie("notchspan");ye=ye!==r&&ye>0?ye:v(B,Q),B.ln=B.med-ye,B.un=B.med+ye;var ke=B.lf,ze=B.uf;w.boxpoints&&Y.length&&(ke=Math.min(ke,Y[0]),ze=Math.max(ze,Y[Q-1])),w.notched&&(ke=Math.min(ke,B.ln),ze=Math.max(ze,B.un)),B.min=ke,B.max=ze}else{var je;p.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+B.q1,"median = "+B.med,"q3 = "+B.q3].join("\n")),B.med=je=B.med!==r?B.med:B.q1!==r?B.q3!==r?(B.q1+B.q3)/2:B.q1:B.q3!==r?B.q3:0,B.q1=B.q3=je,B.lf=B.uf=je,B.mean=B.sd=je,B.ln=B.un=je,B.min=B.max=je}ue=Math.min(ue,B.min),fe=Math.max(fe,B.max),B.pts2=H.filter(Z),S.push(B)}}w._extremes[k._id]=m.findExtremes(k,[ue,fe],{padded:!0})}else{var Ie=k.makeCalcdata(w,C),Ce=function(ot,at){for(var ct=ot.length,_t=new Array(ct+1),xt=0;xt<ct;xt++)_t[xt]=ot[xt]-at;return _t[ct]=ot[ct-1]+at,_t}(V,W),_e=V.length,we=function(ot){for(var at=new Array(ot),ct=0;ct<ot;ct++)at[ct]=[];return at}(_e);for(x=0;x<w._length;x++)if(i(ae=Ie[x])){var Se=p.findBin(K[x],Ce);Se>=0&&Se<_e&&(l(ne={v:ae,i:x},w,x),we[Se].push(ne))}var Oe=1/0,Be=-1/0,He=w.quartilemethod,Xe="exclusive"===He,nt="inclusive"===He;for(x=0;x<_e;x++)if(we[x].length>0){var et,qe;(B={}).pos=B[P]=V[x],H=B.pts=we[x].sort(f),Q=(Y=B[C]=H.map(s)).length,B.min=Y[0],B.max=Y[Q-1],B.mean=p.mean(Y,Q),B.sd=p.stdev(Y,Q,B.mean),B.med=p.interp(Y,.5),Q%2&&(Xe||nt)?(Xe?(et=Y.slice(0,Q/2),qe=Y.slice(Q/2+1)):nt&&(et=Y.slice(0,Q/2+1),qe=Y.slice(Q/2)),B.q1=p.interp(et,.5),B.q3=p.interp(qe,.5)):(B.q1=p.interp(Y,.25),B.q3=p.interp(Y,.75)),B.lf=o(B,Y,Q),B.uf=d(B,Y,Q),B.lo=g(B),B.uo=y(B);var Ye=v(B,Q);B.ln=B.med-Ye,B.un=B.med+Ye,Oe=Math.min(Oe,B.ln),Be=Math.max(Be,B.un),B.pts2=H.filter(Z),S.push(B)}w._extremes[k._id]=m.findExtremes(k,w.notched?Ie.concat([Oe,Be]):Ie,{padded:!0})}return function(ot,at){if(p.isArrayOrTypedArray(at.selectedpoints))for(var ct=0;ct<ot.length;ct++){for(var _t=ot[ct].pts||[],xt={},Ht=0;Ht<_t.length;Ht++)xt[_t[Ht].i]=Ht;p.tagSelected(_t,at,xt)}}(S,w),S.length>0?(S[0].t={num:I[N],dPos:W,posLetter:P,valLetter:C,labels:{med:u(_,"median:"),min:u(_,"min:"),q1:u(_,"q1:"),q3:u(_,"q3:"),max:u(_,"max:"),mean:u(_,"sd"===w.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:u(_,"lower fence:"),uf:u(_,"upper fence:")}},I[N]++,S):[{t:{empty:!0}}]};var c={text:"tx",hovertext:"htx"};function l(_,w,x){for(var E in c)p.isArrayOrTypedArray(w[E])&&(Array.isArray(x)?p.isArrayOrTypedArray(w[E][x[0]])&&(_[c[E]]=w[E][x[0]][x[1]]):_[c[E]]=w[E][x])}function f(_,w){return _.v-w.v}function s(_){return _.v}function o(_,w,x){return 0===x?_.q1:Math.min(_.q1,w[Math.min(p.findBin(2.5*_.q1-1.5*_.q3,w,!0)+1,x-1)])}function d(_,w,x){return 0===x?_.q3:Math.max(_.q3,w[Math.max(p.findBin(2.5*_.q3-1.5*_.q1,w),0)])}function g(_){return 4*_.q1-3*_.q3}function y(_){return 4*_.q3-3*_.q1}function v(_,w){return 0===w?0:1.57*(_.q3-_.q1)/Math.sqrt(w)}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"fast-isnumeric":249}],968:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes"),m=h("../../lib"),b=h("../../plots/cartesian/constraints").getAxisGroup,p=["v","h"];function r(u,c,l,f){var s,o,d,g=c.calcdata,y=c._fullLayout,v=f._id,_=v.charAt(0),w=[],x=0;for(s=0;s<l.length;s++)for(d=g[l[s]],o=0;o<d.length;o++)w.push(f.c2l(d[o].pos,!0)),x+=(d[o].pts2||[]).length;if(w.length){var E=m.distinctVals(w);"category"!==f.type&&"multicategory"!==f.type||(E.minDiff=1);var k=E.minDiff/2;i.minDtick(f,E.minDiff,E.vals[0],!0);var C=y["violin"===u?"_numViolins":"_numBoxes"],L="group"===y[u+"mode"]&&C>1,P=1-y[u+"gap"],A=1-y[u+"groupgap"];for(s=0;s<l.length;s++){var I,D,R,S,N,B,H=(d=g[l[s]])[0].trace,Y=d[0].t,Q=H.width,ne=H.side;if(Q)I=D=S=Q/2,R=0;else if(I=k,L){var ae=b(y,f._id)+H.orientation,K=Object.keys(((y._alignmentOpts[ae]||{})[H.alignmentgroup]||{}).offsetGroups||{}).length,q=K||C;D=I*P*A/q,R=2*I*(((K?H._offsetIndex:Y.num)+.5)/q-.5)*P,S=I*P/q}else D=I*P*A,R=0,S=I;Y.dPos=I,Y.bPos=R,Y.bdPos=D,Y.wHover=S;var re,V,W,Z,oe,ie,ue=R+D,fe=Boolean(Q);if("positive"===ne?(N=I*(Q?1:.5),re=ue,B=re=R):"negative"===ne?(N=re=R,B=I*(Q?1:.5),V=ue):(N=B=I,re=V=ue),(H.boxpoints||H.points)&&x>0){var he=H.pointpos,de=H.jitter,be=H.marker.size/2,pe=0;he+de>=0&&((pe=ue*(he+de))>N?(fe=!0,oe=be,W=pe):pe>re&&(oe=be,W=N)),pe<=N&&(W=N);var Te=0;he-de<=0&&((Te=-ue*(he-de))>B?(fe=!0,ie=be,Z=Te):Te>V&&(ie=be,Z=B)),Te<=B&&(Z=B)}else W=N,Z=B;var ye=new Array(d.length);for(o=0;o<d.length;o++)ye[o]=d[o].pos;H._extremes[v]=i.findExtremes(f,ye,{padded:fe,vpadminus:Z,vpadplus:W,vpadLinearized:!0,ppadminus:{x:ie,y:oe}[_],ppadplus:{x:oe,y:ie}[_]})}}}G.exports={crossTraceCalc:function(u,c){for(var l=u.calcdata,f=c.xaxis,s=c.yaxis,o=0;o<p.length;o++){for(var d=p[o],g="h"===d?s:f,y=[],v=0;v<l.length;v++){var _=l[v],x=_[0].trace;!0!==x.visible||"box"!==x.type&&"candlestick"!==x.type||_[0].t.empty||(x.orientation||"v")!==d||x.xaxis!==f._id||x.yaxis!==s._id||y.push(v)}r("box",u,y,g)}},setPositionOffset:r}},{"../../lib":803,"../../plots/cartesian/axes":854,"../../plots/cartesian/constraints":862}],969:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../registry"),b=h("../../components/color"),p=h("../scatter/period_defaults"),r=h("../bar/defaults").handleGroupingDefaults,u=h("../../plots/cartesian/axis_autotype"),c=h("./attributes");function l(s,o,d,g){function y(ne){var ae=0;return ne&&ne.length&&(ae+=1,i.isArrayOrTypedArray(ne[0])&&ne[0].length&&(ae+=1)),ae}function v(ne){return i.validate(s[ne],c[ne])}var _,w=d("y"),x=d("x");if("box"===o.type){var E=d("q1"),k=d("median"),C=d("q3");o._hasPreCompStats=E&&E.length&&k&&k.length&&C&&C.length,_=Math.min(i.minRowLength(E),i.minRowLength(k),i.minRowLength(C))}var L,P,A=y(w),I=y(x),D=A&&i.minRowLength(w),R=I&&i.minRowLength(x),S=g.calendar,N={autotypenumbers:g.autotypenumbers};if(o._hasPreCompStats)switch(String(I)+String(A)){case"00":var B=v("x0")||v("dx");L=!v("y0")&&!v("dy")||B?"v":"h",P=_;break;case"10":L="v",P=Math.min(_,R);break;case"20":L="h",P=Math.min(_,x.length);break;case"01":L="h",P=Math.min(_,D);break;case"02":L="v",P=Math.min(_,w.length);break;case"12":L="v",P=Math.min(_,R,w.length);break;case"21":L="h",P=Math.min(_,x.length,D);break;case"11":P=0;break;case"22":var H,Y=!1;for(H=0;H<x.length;H++)if("category"===u(x[H],S,N)){Y=!0;break}if(Y)L="v",P=Math.min(_,R,w.length);else{for(H=0;H<w.length;H++)if("category"===u(w[H],S,N)){Y=!0;break}Y?(L="h",P=Math.min(_,x.length,D)):(L="v",P=Math.min(_,R,w.length))}}else A>0?(L="v",P=I>0?Math.min(R,D):Math.min(D)):I>0?(L="h",P=Math.min(R)):P=0;if(P){o._length=P;var Q=d("orientation",L);o._hasPreCompStats?"v"===Q&&0===I?(d("x0",0),d("dx",1)):"h"===Q&&0===A&&(d("y0",0),d("dy",1)):"v"===Q&&0===I?d("x0"):"h"===Q&&0===A&&d("y0"),m.getComponentMethod("calendars","handleTraceDefaults")(s,o,["x","y"],g)}else o.visible=!1}function f(s,o,d,g){var y=g.prefix,v=i.coerce2(s,o,c,"marker.outliercolor"),_=d("marker.line.outliercolor"),w="outliers";o._hasPreCompStats?w="all":(v||_)&&(w="suspectedoutliers");var x=d(y+"points",w);x?(d("jitter","all"===x?.3:0),d("pointpos","all"===x?-1.5:0),d("marker.symbol"),d("marker.opacity"),d("marker.size"),d("marker.color",o.line.color),d("marker.line.color"),d("marker.line.width"),"suspectedoutliers"===x&&(d("marker.line.outliercolor",o.marker.color),d("marker.line.outlierwidth")),d("selected.marker.color"),d("unselected.marker.color"),d("selected.marker.size"),d("unselected.marker.size"),d("text"),d("hovertext")):delete o.marker;var E=d("hoveron");"all"!==E&&-1===E.indexOf("points")||d("hovertemplate"),i.coerceSelectionMarkerOpacity(o,d)}G.exports={supplyDefaults:function(s,o,d,g){function y(C,L){return i.coerce(s,o,c,C,L)}if(l(s,o,y,g),!1!==o.visible){p(s,o,g,y),y("xhoverformat"),y("yhoverformat");var v=o._hasPreCompStats;v&&(y("lowerfence"),y("upperfence")),y("line.color",(s.marker||{}).color||d),y("line.width"),y("fillcolor",b.addOpacity(o.line.color,.5));var _=!1;if(v){var w=y("mean"),x=y("sd");w&&w.length&&(_=!0,x&&x.length&&(_="sd"))}y("boxmean",_),y("whiskerwidth"),y("width"),y("quartilemethod");var E=!1;if(v){var k=y("notchspan");k&&k.length&&(E=!0)}else i.validate(s.notchwidth,c.notchwidth)&&(E=!0);y("notched",E)&&y("notchwidth"),f(s,o,y,{prefix:"box"})}},crossTraceDefaults:function(s,o){var g;function y(w){return i.coerce(g._input,g,c,w)}for(var v=0;v<s.length;v++){var _=(g=s[v]).type;"box"!==_&&"violin"!==_||"group"===o[_+"mode"]&&r(g._input,g,o,y)}},handleSampleDefaults:l,handlePointsDefaults:f}},{"../../components/color":666,"../../lib":803,"../../plots/cartesian/axis_autotype":855,"../../registry":931,"../bar/defaults":945,"../scatter/period_defaults":1238,"./attributes":966}],970:[function(h,G,X){"use strict";G.exports=function(i,m){return m.hoverOnBox&&(i.hoverOnBox=m.hoverOnBox),"xVal"in m&&(i.x=m.xVal),"yVal"in m&&(i.y=m.yVal),m.xa&&(i.xaxis=m.xa),m.ya&&(i.yaxis=m.ya),i}},{}],971:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes"),m=h("../../lib"),b=h("../../components/fx"),p=h("../../components/color"),r=m.fillText;function u(l,f,s,o){var d,g,y,v,_,w,x,E,k,C,L,P,A,I,D=l.cd,R=l.xa,S=l.ya,N=D[0].trace,B=D[0].t,H="violin"===N.type,Y=[],Q=B.bdPos,ne=B.wHover,ae=function(pe){return y.c2l(pe.pos)+B.bPos-y.c2l(w)};H&&"both"!==N.side?("positive"===N.side&&(k=function(pe){var Te=ae(pe);return b.inbox(Te,Te+ne,C)},P=Q,A=0),"negative"===N.side&&(k=function(pe){var Te=ae(pe);return b.inbox(Te-ne,Te,C)},P=0,A=Q)):(k=function(pe){var Te=ae(pe);return b.inbox(Te-ne,Te+ne,C)},P=A=Q),I=H?function(pe){return b.inbox(pe.span[0]-_,pe.span[1]-_,C)}:function(pe){return b.inbox(pe.min-_,pe.max-_,C)},"h"===N.orientation?(_=f,w=s,x=I,E=k,d="y",y=S,g="x",v=R):(_=s,w=f,x=k,E=I,d="x",y=R,g="y",v=S);var te=Math.min(1,Q/Math.abs(y.r2c(y.range[1])-y.r2c(y.range[0])));function K(pe){return(x(pe)+E(pe))/2}C=l.maxHoverDistance-te,L=l.maxSpikeDistance-te;var q=b.getDistanceFunction(o,x,E,K);if(b.getClosest(D,q,l),!1===l.index)return[];var re=D[l.index],V=N.line.color,W=(N.marker||{}).color;l.color=p.opacity(V)&&N.line.width?V:p.opacity(W)&&N.boxpoints?W:N.fillcolor,l[d+"0"]=y.c2p(re.pos+B.bPos-A,!0),l[d+"1"]=y.c2p(re.pos+B.bPos+P,!0),l[d+"LabelVal"]=void 0!==re.orig_p?re.orig_p:re.pos;var Z=d+"Spike";l.spikeDistance=K(re)*L/C,l[Z]=y.c2p(re.pos,!0);var oe={},ie=["med","q1","q3","min","max"];(N.boxmean||(N.meanline||{}).visible)&&ie.push("mean"),(N.boxpoints||N.points)&&ie.push("lf","uf");for(var ue=0;ue<ie.length;ue++){var fe=ie[ue];if(fe in re&&!(re[fe]in oe)){oe[re[fe]]=!0;var he=re[fe],de=v.c2p(he,!0),be=m.extendFlat({},l);be.attr=fe,be[g+"0"]=be[g+"1"]=de,be[g+"LabelVal"]=he,be[g+"Label"]=(B.labels?B.labels[fe]+" ":"")+i.hoverLabelText(v,he,N[g+"hoverformat"]),be.hoverOnBox=!0,"mean"===fe&&"sd"in re&&"sd"===N.boxmean&&(be[g+"err"]=re.sd),l.name="",l.spikeDistance=void 0,l[Z]=void 0,be.hovertemplate=!1,Y.push(be)}}return Y}function c(l,f,s){for(var o,d,g,y=l.cd,v=l.xa,_=l.ya,w=y[0].trace,x=v.c2p(f),E=_.c2p(s),k=b.quadrature(function(H){var Y=Math.max(3,H.mrc||0);return Math.max(Math.abs(v.c2p(H.x)-x)-Y,1-3/Y)},function(H){var Y=Math.max(3,H.mrc||0);return Math.max(Math.abs(_.c2p(H.y)-E)-Y,1-3/Y)}),C=!1,L=0;L<y.length;L++){d=y[L];for(var P=0;P<(d.pts||[]).length;P++){var A=k(g=d.pts[P]);A<=l.distance&&(l.distance=A,C=[L,P])}}if(!C)return!1;g=(d=y[C[0]]).pts[C[1]];var I=v.c2p(g.x,!0),D=_.c2p(g.y,!0),R=g.mrc||1;o=m.extendFlat({},l,{index:g.i,color:(w.marker||{}).color,name:w.name,x0:I-R,x1:I+R,y0:D-R,y1:D+R,spikeDistance:l.distance,hovertemplate:w.hovertemplate});var S,N=d.orig_p,B=void 0!==N?N:d.pos;return"h"===w.orientation?(S=_,o.xLabelVal=g.x,o.yLabelVal=B):(S=v,o.xLabelVal=B,o.yLabelVal=g.y),o[S._id.charAt(0)+"Spike"]=S.c2p(d.pos,!0),r(g,w,o),o}G.exports={hoverPoints:function(l,f,s,o){var d,g=l.cd[0].trace.hoveron,y=[];return-1!==g.indexOf("boxes")&&(y=y.concat(u(l,f,s,o))),-1!==g.indexOf("points")&&(d=c(l,f,s)),"closest"===o?d?[d]:y:(d&&y.push(d),y)},hoverOnBoxes:u,hoverOnPoints:c}},{"../../components/color":666,"../../components/fx":706,"../../lib":803,"../../plots/cartesian/axes":854}],972:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),layoutAttributes:h("./layout_attributes"),supplyDefaults:h("./defaults").supplyDefaults,crossTraceDefaults:h("./defaults").crossTraceDefaults,supplyLayoutDefaults:h("./layout_defaults").supplyLayoutDefaults,calc:h("./calc"),crossTraceCalc:h("./cross_trace_calc").crossTraceCalc,plot:h("./plot").plot,style:h("./style").style,styleOnSelect:h("./style").styleOnSelect,hoverPoints:h("./hover").hoverPoints,eventData:h("./event_data"),selectPoints:h("./select"),moduleType:"trace",name:"box",basePlotModule:h("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":868,"./attributes":966,"./calc":967,"./cross_trace_calc":968,"./defaults":969,"./event_data":970,"./hover":971,"./layout_attributes":973,"./layout_defaults":974,"./plot":975,"./select":976,"./style":977}],973:[function(h,G,X){"use strict";G.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],974:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../lib"),b=h("./layout_attributes");function p(r,u,c,l,f){for(var s=f+"Layout",o=!1,d=0;d<c.length;d++)if(i.traceIs(c[d],s)){o=!0;break}o&&(l(f+"mode"),l(f+"gap"),l(f+"groupgap"))}G.exports={supplyLayoutDefaults:function(r,u,c){p(0,0,c,function(l,f){return m.coerce(r,u,b,l,f)},"box")},_supply:p}},{"../../lib":803,"../../registry":931,"./layout_attributes":973}],975:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=h("../../components/drawing");function p(c,l,f,s){var o,d,g="h"===f.orientation,y=l.val,v=l.pos,_=!!v.rangebreaks,w=s.bPos,x=s.wdPos||0,E=s.bPosPxOffset||0,k=f.whiskerwidth||0,C=f.notched||!1,L=C?1-2*f.notchwidth:1;Array.isArray(s.bdPos)?(o=s.bdPos[0],d=s.bdPos[1]):(o=s.bdPos,d=s.bdPos);var P=c.selectAll("path.box").data("violin"!==f.type||f.box.visible?m.identity:[]);P.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),P.exit().remove(),P.each(function(A){if(A.empty)return"M0,0Z";var I=v.c2l(A.pos+w,!0),D=v.l2p(I-o)+E,R=v.l2p(I+d)+E,S=_?(D+R)/2:v.l2p(I)+E,N=f.whiskerwidth,B=_?D*N+(1-N)*S:v.l2p(I-x)+E,H=_?R*N+(1-N)*S:v.l2p(I+x)+E,Y=v.l2p(I-o*L)+E,Q=v.l2p(I+d*L)+E,ne=y.c2p(A.q1,!0),ae=y.c2p(A.q3,!0),te=m.constrain(y.c2p(A.med,!0),Math.min(ne,ae)+1,Math.max(ne,ae)-1),K=void 0===A.lf||!1===f.boxpoints,q=y.c2p(K?A.min:A.lf,!0),re=y.c2p(K?A.max:A.uf,!0),V=y.c2p(A.ln,!0),W=y.c2p(A.un,!0);g?i.select(this).attr("d","M"+te+","+Y+"V"+Q+"M"+ne+","+D+"V"+R+(C?"H"+V+"L"+te+","+Q+"L"+W+","+R:"")+"H"+ae+"V"+D+(C?"H"+W+"L"+te+","+Y+"L"+V+","+D:"")+"ZM"+ne+","+S+"H"+q+"M"+ae+","+S+"H"+re+(0===k?"":"M"+q+","+B+"V"+H+"M"+re+","+B+"V"+H)):i.select(this).attr("d","M"+Y+","+te+"H"+Q+"M"+D+","+ne+"H"+R+(C?"V"+V+"L"+Q+","+te+"L"+R+","+W:"")+"V"+ae+"H"+D+(C?"V"+W+"L"+Y+","+te+"L"+D+","+V:"")+"ZM"+S+","+ne+"V"+q+"M"+S+","+ae+"V"+re+(0===k?"":"M"+B+","+q+"H"+H+"M"+B+","+re+"H"+H))})}function r(c,l,f,s){var o=l.x,d=l.y,g=s.bdPos,y=s.bPos,v=f.boxpoints||f.points;m.seedPseudoRandom();var _=c.selectAll("g.points").data(v?function(x){return x.forEach(function(E){E.t=s,E.trace=f}),x}:[]);_.enter().append("g").attr("class","points"),_.exit().remove();var w=_.selectAll("path").data(function(x){var E,k,C=x.pts2,L=Math.max((x.max-x.min)/10,x.q3-x.q1),P=1e-9*L,A=.01*L,I=[],D=0;if(f.jitter){if(0===L)for(D=1,I=new Array(C.length),E=0;E<C.length;E++)I[E]=1;else for(E=0;E<C.length;E++){var R=Math.max(0,E-5),S=C[R].v,N=Math.min(C.length-1,E+5),B=C[N].v;"all"!==v&&(C[E].v<x.lf?B=Math.min(B,x.lf):S=Math.max(S,x.uf));var H=Math.sqrt(A*(N-R)/(B-S+P))||0;H=m.constrain(Math.abs(H),0,1),I.push(H),D=Math.max(H,D)}k=2*f.jitter/(D||1)}for(E=0;E<C.length;E++){var Y=C[E],Q=Y.v,ne=f.jitter?k*I[E]*(m.pseudoRandom()-.5):0,ae=x.pos+y+g*(f.pointpos+ne);"h"===f.orientation?(Y.y=ae,Y.x=Q):(Y.x=ae,Y.y=Q),"suspectedoutliers"===v&&Q<x.uo&&Q>x.lo&&(Y.so=!0)}return C});w.enter().append("path").classed("point",!0),w.exit().remove(),w.call(b.translatePoints,o,d)}function u(c,l,f,s){var o,d,g=l.val,y=l.pos,v=!!y.rangebreaks,_=s.bPos,w=s.bPosPxOffset||0,x=f.boxmean||(f.meanline||{}).visible;Array.isArray(s.bdPos)?(o=s.bdPos[0],d=s.bdPos[1]):(o=s.bdPos,d=s.bdPos);var E=c.selectAll("path.mean").data("box"===f.type&&f.boxmean||"violin"===f.type&&f.box.visible&&f.meanline.visible?m.identity:[]);E.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),E.exit().remove(),E.each(function(k){var C=y.c2l(k.pos+_,!0),L=y.l2p(C-o)+w,P=y.l2p(C+d)+w,A=v?(L+P)/2:y.l2p(C)+w,I=g.c2p(k.mean,!0),D=g.c2p(k.mean-k.sd,!0),R=g.c2p(k.mean+k.sd,!0);"h"===f.orientation?i.select(this).attr("d","M"+I+","+L+"V"+P+("sd"===x?"m0,0L"+D+","+A+"L"+I+","+L+"L"+R+","+A+"Z":"")):i.select(this).attr("d","M"+L+","+I+"H"+P+("sd"===x?"m0,0L"+A+","+D+"L"+L+","+I+"L"+A+","+R+"Z":""))})}G.exports={plot:function(c,l,f,s){var o=l.xaxis,d=l.yaxis;m.makeTraceGroups(s,f,"trace boxes").each(function(g){var y,v,_=i.select(this),w=g[0],x=w.t,E=w.trace;x.wdPos=x.bdPos*E.whiskerwidth,!0!==E.visible||x.empty?_.remove():("h"===E.orientation?(y=d,v=o):(y=o,v=d),p(_,{pos:y,val:v},E,x),r(_,{x:o,y:d},E,x),u(_,{pos:y,val:v},E,x))})},plotBoxAndWhiskers:p,plotPoints:r,plotBoxMean:u}},{"../../components/drawing":688,"../../lib":803,"@plotly/d3":58}],976:[function(h,G,X){"use strict";G.exports=function(i,m){var b,p,r=i.cd,u=i.xaxis,c=i.yaxis,l=[];if(!1===m)for(b=0;b<r.length;b++)for(p=0;p<(r[b].pts||[]).length;p++)r[b].pts[p].selected=0;else for(b=0;b<r.length;b++)for(p=0;p<(r[b].pts||[]).length;p++){var f=r[b].pts[p],s=u.c2p(f.x),o=c.c2p(f.y);m.contains([s,o],null,f.i,i)?(l.push({pointNumber:f.i,x:u.c2d(f.x),y:c.c2d(f.y)}),f.selected=1):f.selected=0}return l}},{}],977:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/color"),b=h("../../components/drawing");G.exports={style:function(p,r,u){var c=u||i.select(p).selectAll("g.trace.boxes");c.style("opacity",function(l){return l[0].trace.opacity}),c.each(function(l){var f=i.select(this),s=l[0].trace,o=s.line.width;function d(v,_,w,x){v.style("stroke-width",_+"px").call(m.stroke,w).call(m.fill,x)}var g=f.selectAll("path.box");if("candlestick"===s.type)g.each(function(v){if(!v.empty){var _=i.select(this),w=s[v.dir];d(_,w.line.width,w.line.color,w.fillcolor),_.style("opacity",s.selectedpoints&&!v.selected?.3:1)}});else{d(g,o,s.line.color,s.fillcolor),f.selectAll("path.mean").style({"stroke-width":o,"stroke-dasharray":2*o+"px,"+o+"px"}).call(m.stroke,s.line.color);var y=f.selectAll("path.point");b.pointStyle(y,s,p)}})},styleOnSelect:function(p,r,u){var c=r[0].trace,l=u.selectAll("path.point");c.selectedpoints?b.selectedPointStyle(l,c):b.pointStyle(l,c,p)}}},{"../../components/color":666,"../../components/drawing":688,"@plotly/d3":58}],978:[function(h,G,X){"use strict";var i=h("../../lib").extendFlat,m=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=h("../ohlc/attributes"),p=h("../box/attributes");function r(u){return{line:{color:i({},p.line.color,{dflt:u}),width:p.line.width,editType:"style"},fillcolor:p.fillcolor,editType:"style"}}G.exports={xperiod:b.xperiod,xperiod0:b.xperiod0,xperiodalignment:b.xperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),x:b.x,open:b.open,high:b.high,low:b.low,close:b.close,line:{width:i({},p.line.width,{}),editType:"style"},increasing:r(b.increasing.line.color.dflt),decreasing:r(b.decreasing.line.color.dflt),text:b.text,hovertext:b.hovertext,whiskerwidth:i({},p.whiskerwidth,{dflt:0}),hoverlabel:b.hoverlabel}},{"../../lib":803,"../../plots/cartesian/axis_format_attributes":857,"../box/attributes":966,"../ohlc/attributes":1164}],979:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/cartesian/axes"),b=h("../../plots/cartesian/align_period"),p=h("../ohlc/calc").calcCommon;function r(u,c,l,f){return{min:l,q1:Math.min(u,f),med:f,q3:Math.max(u,f),max:c}}G.exports=function(u,c){var l=u._fullLayout,f=m.getFromId(u,c.xaxis),s=m.getFromId(u,c.yaxis),o=f.makeCalcdata(c,"x"),d=b(c,f,"x",o).vals,g=p(u,c,o,d,s,r);return g.length?(i.extendFlat(g[0].t,{num:l._numBoxes,dPos:i.distinctVals(d).minDiff/2,posLetter:"x",valLetter:"y"}),l._numBoxes++,g):[{t:{empty:!0}}]}},{"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"../ohlc/calc":1165}],980:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/color"),b=h("../ohlc/ohlc_defaults"),p=h("../scatter/period_defaults"),r=h("./attributes");function u(c,l,f,s){var o=f(s+".line.color");f(s+".line.width",l.line.width),f(s+".fillcolor",m.addOpacity(o,.5))}G.exports=function(c,l,f,s){function o(d,g){return i.coerce(c,l,r,d,g)}b(c,l,o,s)?(p(c,l,s,o,{x:!0}),o("xhoverformat"),o("yhoverformat"),o("line.width"),u(0,l,o,"increasing"),u(0,l,o,"decreasing"),o("text"),o("hovertext"),o("whiskerwidth"),s._requestRangeslider[l.xaxis]=!0):l.visible=!1}},{"../../components/color":666,"../../lib":803,"../ohlc/ohlc_defaults":1169,"../scatter/period_defaults":1238,"./attributes":978}],981:[function(h,G,X){"use strict";G.exports={moduleType:"trace",name:"candlestick",basePlotModule:h("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:h("./attributes"),layoutAttributes:h("../box/layout_attributes"),supplyLayoutDefaults:h("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:h("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:h("./defaults"),calc:h("./calc"),plot:h("../box/plot").plot,layerName:"boxlayer",style:h("../box/style").style,hoverPoints:h("../ohlc/hover").hoverPoints,selectPoints:h("../ohlc/select")}},{"../../plots/cartesian":868,"../box/cross_trace_calc":968,"../box/layout_attributes":973,"../box/layout_defaults":974,"../box/plot":975,"../box/style":977,"../ohlc/hover":1167,"../ohlc/select":1171,"./attributes":978,"./calc":979,"./defaults":980}],982:[function(h,G,X){"use strict";var i=h("./axis_defaults"),m=h("../../plot_api/plot_template");G.exports=function(b,p,r,u,c){var l,f,s,o;u("a")||(u("da"),u("a0")),u("b")||(u("db"),u("b0")),l=b,f=p,s=r,o=c,["aaxis","baxis"].forEach(function(d){var g=d.charAt(0),y=l[d]||{},v=m.newContainer(f,d);i(y,v,{tickfont:"x",id:g+"axis",letter:g,font:f.font,name:d,data:l[g],calendar:f.calendar,dfltColor:o,bgColor:s.paper_bgcolor,autotypenumbersDflt:s.autotypenumbers,fullLayout:s}),v._categories=v._categories||[],l[d]||"-"===y.type||(l[d]={type:y.type})})}},{"../../plot_api/plot_template":843,"./axis_defaults":987}],983:[function(h,G,X){"use strict";var i=h("../../lib").isArrayOrTypedArray;G.exports=function(m){return function b(p,r){if(!i(p)||r>=10)return null;for(var u=1/0,c=-1/0,l=p.length,f=0;f<l;f++){var s=p[f];if(i(s)){var o=b(s,r+1);o&&(u=Math.min(o[0],u),c=Math.max(o[1],c))}else u=Math.min(s,u),c=Math.max(s,c)}return[u,c]}(m,0)}},{"../../lib":803}],984:[function(h,G,X){"use strict";var i=h("../../plots/font_attributes"),m=h("./axis_attributes"),b=h("../../components/color/attributes"),p=i({editType:"calc"});p.family.dflt='"Open Sans", verdana, arial, sans-serif',p.size.dflt=12,p.color.dflt=b.defaultLine,G.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:m,baxis:m,font:p,color:{valType:"color",dflt:b.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":665,"../../plots/font_attributes":883,"./axis_attributes":986}],985:[function(h,G,X){"use strict";var i=h("../../lib").isArrayOrTypedArray;G.exports=function(m,b,p,r){var u,c,l,f,s,o,d,g,y,v,_,w,x,E=i(p)?"a":"b",k=("a"===E?m.aaxis:m.baxis).smoothing,C="a"===E?m.a2i:m.b2j,L="a"===E?p:r,P="a"===E?r:p,A="a"===E?b.a.length:b.b.length,I="a"===E?b.b.length:b.a.length,D=Math.floor("a"===E?m.b2j(P):m.a2i(P)),R="a"===E?function(re){return m.evalxy([],re,D)}:function(re){return m.evalxy([],D,re)};k&&(l=Math.max(0,Math.min(I-2,D)),f=D-l,c="a"===E?function(re,V){return m.dxydi([],re,l,V,f)}:function(re,V){return m.dxydj([],l,re,f,V)});var S=C(L[0]),N=C(L[1]),B=S<N?1:-1,H=1e-8*(N-S),Y=B>0?Math.floor:Math.ceil,Q=B>0?Math.ceil:Math.floor,ne=B>0?Math.min:Math.max,ae=B>0?Math.max:Math.min,te=Y(S+H),K=Q(N-H),q=[[d=R(S)]];for(u=te;u*B<K*B;u+=B)s=[],_=ae(S,u),x=(w=ne(N,u+B))-_,o=Math.max(0,Math.min(A-2,Math.floor(.5*(_+w)))),g=R(w),k&&(y=c(o,_-o),v=c(o,w-o),s.push([d[0]+y[0]/3*x,d[1]+y[1]/3*x]),s.push([g[0]-v[0]/3*x,g[1]-v[1]/3*x])),s.push(g),q.push(s),d=g;return q}},{"../../lib":803}],986:[function(h,G,X){"use strict";var i=h("../../plots/font_attributes"),m=h("../../components/color/attributes"),b=h("../../plots/cartesian/layout_attributes"),p=h("../../plots/cartesian/axis_format_attributes").descriptionWithDates,r=h("../../plot_api/edit_types").overrideAll;G.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:i({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:b.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:i({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:p("tick label")},tickformatstops:r(b.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:m.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:m.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:i({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":665,"../../plot_api/edit_types":836,"../../plots/cartesian/axis_format_attributes":857,"../../plots/cartesian/layout_attributes":869,"../../plots/font_attributes":883}],987:[function(h,G,X){"use strict";var i=h("./attributes"),m=h("../../components/color").addOpacity,b=h("../../registry"),p=h("../../lib"),r=h("../../plots/cartesian/tick_value_defaults"),u=h("../../plots/cartesian/tick_label_defaults"),c=h("../../plots/cartesian/category_order_defaults"),l=h("../../plots/cartesian/set_convert"),f=h("../../plots/cartesian/axis_autotype");G.exports=function(s,o,d){var g=d.letter,y=d.font||{},v=i[g+"axis"];function _(S,N){return p.coerce(s,o,v,S,N)}function w(S,N){return p.coerce2(s,o,v,S,N)}d.name&&(o._name=d.name,o._id=d.name),_("autotypenumbers",d.autotypenumbersDflt);var x=_("type");"-"===x&&(d.data&&function(S,N){if("-"===S.type){var B=S._id.charAt(0);S.type=f(N,S[B+"calendar"],{autotypenumbers:S.autotypenumbers})}}(o,d.data),"-"===o.type?o.type="linear":x=s.type=o.type),_("smoothing"),_("cheatertype"),_("showticklabels"),_("labelprefix",g+" = "),_("labelsuffix"),_("showtickprefix"),_("showticksuffix"),_("separatethousands"),_("tickformat"),_("exponentformat"),_("minexponent"),_("showexponent"),_("categoryorder"),_("tickmode"),_("tickvals"),_("ticktext"),_("tick0"),_("dtick"),"array"===o.tickmode&&(_("arraytick0"),_("arraydtick")),_("labelpadding"),o._hovertitle=g,"date"===x&&b.getComponentMethod("calendars","handleDefaults")(s,o,"calendar",d.calendar),l(o,d.fullLayout),o.c2p=p.identity;var E=_("color",d.dfltColor),k=E===s.color?E:y.color;_("title.text")&&(p.coerceFont(_,"title.font",{family:y.family,size:p.bigFont(y.size),color:k}),_("title.offset")),_("tickangle"),_("autorange",!o.isValidRange(s.range))&&_("rangemode"),_("range"),o.cleanRange(),_("fixedrange"),r(s,o,_,x),u(s,o,_,x,d),c(s,o,_,{data:d.data,dataAttr:g});var C=w("gridcolor",m(E,.3)),L=w("gridwidth"),P=_("showgrid");P||(delete o.gridcolor,delete o.gridwidth);var A=w("startlinecolor",E),I=w("startlinewidth",L);_("startline",o.showgrid||!!A||!!I)||(delete o.startlinecolor,delete o.startlinewidth);var D=w("endlinecolor",E),R=w("endlinewidth",L);return _("endline",o.showgrid||!!D||!!R)||(delete o.endlinecolor,delete o.endlinewidth),P?(_("minorgridcount"),_("minorgridwidth",L),_("minorgridcolor",m(C,.06)),o.minorgridcount||(delete o.minorgridwidth,delete o.minorgridcolor)):(delete o.gridcolor,delete o.gridWidth),"none"===o.showticklabels&&(delete o.tickfont,delete o.tickangle,delete o.showexponent,delete o.exponentformat,delete o.minexponent,delete o.tickformat,delete o.showticksuffix,delete o.showtickprefix),o.showticksuffix||delete o.ticksuffix,o.showtickprefix||delete o.tickprefix,_("tickmode"),o}},{"../../components/color":666,"../../lib":803,"../../plots/cartesian/axis_autotype":855,"../../plots/cartesian/category_order_defaults":859,"../../plots/cartesian/set_convert":875,"../../plots/cartesian/tick_label_defaults":876,"../../plots/cartesian/tick_value_defaults":878,"../../registry":931,"./attributes":984}],988:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes"),m=h("../../lib").isArray1D,b=h("./cheater_basis"),p=h("./array_minmax"),r=h("./calc_gridlines"),u=h("./calc_labels"),c=h("./calc_clippath"),l=h("../heatmap/clean_2d_array"),f=h("./smooth_fill_2d_array"),s=h("../heatmap/convert_column_xyz"),o=h("./set_convert");G.exports=function(d,g){var y=i.getFromId(d,g.xaxis),v=i.getFromId(d,g.yaxis),_=g.aaxis,w=g.baxis,x=g.x,E=g.y,k=[];x&&m(x)&&k.push("x"),E&&m(E)&&k.push("y"),k.length&&s(g,_,w,"a","b",k);var C=g._a=g._a||g.a,L=g._b=g._b||g.b;x=g._x||g.x,E=g._y||g.y;var P={};g._cheater&&(x=b("index"===_.cheatertype?C.length:C,"index"===w.cheatertype?L.length:L,g.cheaterslope)),g._x=x=l(x),g._y=E=l(E),f(x,C,L),f(E,C,L),o(g),g.setScale();var D=p(x),R=p(E),S=.5*(D[1]-D[0]),N=.5*(D[1]+D[0]),B=.5*(R[1]-R[0]),H=.5*(R[1]+R[0]);return R=[H-1.3*B,H+1.3*B],g._extremes[y._id]=i.findExtremes(y,D=[N-1.3*S,N+1.3*S],{padded:!0}),g._extremes[v._id]=i.findExtremes(v,R,{padded:!0}),r(g,"a","b"),r(g,"b","a"),u(g,_),u(g,w),P.clipsegments=c(g._xctrl,g._yctrl,_,w),P.x=x,P.y=E,P.a=C,P.b=L,[P]}},{"../../lib":803,"../../plots/cartesian/axes":854,"../heatmap/clean_2d_array":1087,"../heatmap/convert_column_xyz":1089,"./array_minmax":983,"./calc_clippath":989,"./calc_gridlines":990,"./calc_labels":991,"./cheater_basis":993,"./set_convert":1006,"./smooth_fill_2d_array":1007}],989:[function(h,G,X){"use strict";G.exports=function(i,m,b,p){var r,u,c,l=[],f=!!b.smoothing,s=!!p.smoothing,o=i[0].length-1,d=i.length-1;for(r=0,u=[],c=[];r<=o;r++)u[r]=i[0][r],c[r]=m[0][r];for(l.push({x:u,y:c,bicubic:f}),r=0,u=[],c=[];r<=d;r++)u[r]=i[r][o],c[r]=m[r][o];for(l.push({x:u,y:c,bicubic:s}),r=o,u=[],c=[];r>=0;r--)u[o-r]=i[d][r],c[o-r]=m[d][r];for(l.push({x:u,y:c,bicubic:f}),r=d,u=[],c=[];r>=0;r--)u[d-r]=i[r][0],c[d-r]=m[r][0];return l.push({x:u,y:c,bicubic:s}),l}},{}],990:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes"),m=h("../../lib/extend").extendFlat;G.exports=function(b,p,r){var u,c,l,f,s,o,d,g,y,v,_,w,x,E,k=b["_"+p],C=b[p+"axis"],L=C._gridlines=[],P=C._minorgridlines=[],A=C._boundarylines=[],I=b["_"+r],D=b[r+"axis"];"array"===C.tickmode&&(C.tickvals=k.slice());var R=b._xctrl,S=b._yctrl,N=R[0].length,B=R.length,H=b._a.length,Y=b._b.length;i.prepTicks(C),"array"===C.tickmode&&delete C.tickvals;var Q=C.smoothing?3:1;function ne(te){var K,q,re,V,W,Z,oe,ie,ue,fe,he,de,be=[],pe=[],Te={};if("b"===p)for(q=b.b2j(te),re=Math.floor(Math.max(0,Math.min(Y-2,q))),V=q-re,Te.length=Y,Te.crossLength=H,Te.xy=function(ye){return b.evalxy([],ye,q)},Te.dxy=function(ye,ke){return b.dxydi([],ye,re,ke,V)},K=0;K<H;K++)Z=Math.min(H-2,K),oe=K-Z,ie=b.evalxy([],K,q),D.smoothing&&K>0&&(ue=b.dxydi([],K-1,re,0,V),be.push(W[0]+ue[0]/3),pe.push(W[1]+ue[1]/3),fe=b.dxydi([],K-1,re,1,V),be.push(ie[0]-fe[0]/3),pe.push(ie[1]-fe[1]/3)),be.push(ie[0]),pe.push(ie[1]),W=ie;else for(K=b.a2i(te),Z=Math.floor(Math.max(0,Math.min(H-2,K))),oe=K-Z,Te.length=H,Te.crossLength=Y,Te.xy=function(ye){return b.evalxy([],K,ye)},Te.dxy=function(ye,ke){return b.dxydj([],Z,ye,oe,ke)},q=0;q<Y;q++)re=Math.min(Y-2,q),V=q-re,ie=b.evalxy([],K,q),D.smoothing&&q>0&&(he=b.dxydj([],Z,q-1,oe,0),be.push(W[0]+he[0]/3),pe.push(W[1]+he[1]/3),de=b.dxydj([],Z,q-1,oe,1),be.push(ie[0]-de[0]/3),pe.push(ie[1]-de[1]/3)),be.push(ie[0]),pe.push(ie[1]),W=ie;return Te.axisLetter=p,Te.axis=C,Te.crossAxis=D,Te.value=te,Te.constvar=r,Te.index=g,Te.x=be,Te.y=pe,Te.smoothing=D.smoothing,Te}function ae(te){var K,q,re,V,W,Z=[],oe=[],ie={};if(ie.length=k.length,ie.crossLength=I.length,"b"===p)for(re=Math.max(0,Math.min(Y-2,te)),W=Math.min(1,Math.max(0,te-re)),ie.xy=function(ue){return b.evalxy([],ue,te)},ie.dxy=function(ue,fe){return b.dxydi([],ue,re,fe,W)},K=0;K<N;K++)Z[K]=R[te*Q][K],oe[K]=S[te*Q][K];else for(q=Math.max(0,Math.min(H-2,te)),V=Math.min(1,Math.max(0,te-q)),ie.xy=function(ue){return b.evalxy([],te,ue)},ie.dxy=function(ue,fe){return b.dxydj([],q,ue,V,fe)},K=0;K<B;K++)Z[K]=R[K][te*Q],oe[K]=S[K][te*Q];return ie.axisLetter=p,ie.axis=C,ie.crossAxis=D,ie.value=k[te],ie.constvar=r,ie.index=te,ie.x=Z,ie.y=oe,ie.smoothing=D.smoothing,ie}if("array"===C.tickmode){for(f=5e-15,o=(s=[Math.floor((k.length-1-C.arraytick0)/C.arraydtick*(1+f)),Math.ceil(-C.arraytick0/C.arraydtick/(1+f))].sort(function(te,K){return te-K}))[0]-1,d=s[1]+1,g=o;g<d;g++)(c=C.arraytick0+C.arraydtick*g)<0||c>k.length-1||L.push(m(ae(c),{color:C.gridcolor,width:C.gridwidth}));for(g=o;g<d;g++)if(l=C.arraytick0+C.arraydtick*g,_=Math.min(l+C.arraydtick,k.length-1),!(l<0||l>k.length-1||_<0||_>k.length-1))for(w=k[l],x=k[_],u=0;u<C.minorgridcount;u++)(E=_-l)<=0||(v=w+(x-w)*(u+1)/(C.minorgridcount+1)*(C.arraydtick/E))<k[0]||v>k[k.length-1]||P.push(m(ne(v),{color:C.minorgridcolor,width:C.minorgridwidth}));C.startline&&A.push(m(ae(0),{color:C.startlinecolor,width:C.startlinewidth})),C.endline&&A.push(m(ae(k.length-1),{color:C.endlinecolor,width:C.endlinewidth}))}else{for(f=5e-15,o=(s=[Math.floor((k[k.length-1]-C.tick0)/C.dtick*(1+f)),Math.ceil((k[0]-C.tick0)/C.dtick/(1+f))].sort(function(te,K){return te-K}))[0],d=s[1],g=o;g<=d;g++)L.push(m(ne(y=C.tick0+C.dtick*g),{color:C.gridcolor,width:C.gridwidth}));for(g=o-1;g<d+1;g++)for(y=C.tick0+C.dtick*g,u=0;u<C.minorgridcount;u++)(v=y+C.dtick*(u+1)/(C.minorgridcount+1))<k[0]||v>k[k.length-1]||P.push(m(ne(v),{color:C.minorgridcolor,width:C.minorgridwidth}));C.startline&&A.push(m(ne(k[0]),{color:C.startlinecolor,width:C.startlinewidth})),C.endline&&A.push(m(ne(k[k.length-1]),{color:C.endlinecolor,width:C.endlinewidth}))}}},{"../../lib/extend":793,"../../plots/cartesian/axes":854}],991:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes"),m=h("../../lib/extend").extendFlat;G.exports=function(b,p){var r,u,c,l=p._labels=[],f=p._gridlines;for(r=0;r<f.length;r++)c=f[r],-1!==["start","both"].indexOf(p.showticklabels)&&(u=i.tickText(p,c.value),m(u,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:c.xy(0),dxy:c.dxy(0,0),axis:c.axis,length:c.crossAxis.length,font:c.axis.tickfont,isFirst:0===r,isLast:r===f.length-1}),l.push(u)),-1!==["end","both"].indexOf(p.showticklabels)&&(u=i.tickText(p,c.value),m(u,{endAnchor:!1,xy:c.xy(c.crossLength-1),dxy:c.dxy(c.crossLength-2,1),axis:c.axis,length:c.crossAxis.length,font:c.axis.tickfont,isFirst:0===r,isLast:r===f.length-1}),l.push(u))}},{"../../lib/extend":793,"../../plots/cartesian/axes":854}],992:[function(h,G,X){"use strict";G.exports=function(i,m,b,p){var r=i[0]-m[0],u=i[1]-m[1],c=b[0]-m[0],l=b[1]-m[1],f=Math.pow(r*r+u*u,.25),s=Math.pow(c*c+l*l,.25),o=(s*s*r-f*f*c)*p,d=(s*s*u-f*f*l)*p,g=s*(f+s)*3,y=f*(f+s)*3;return[[m[0]+(g&&o/g),m[1]+(g&&d/g)],[m[0]-(y&&o/y),m[1]-(y&&d/y)]]}},{}],993:[function(h,G,X){"use strict";var i=h("../../lib").isArrayOrTypedArray;G.exports=function(m,b,p){var r,u,c,l,f,s,o=[],d=i(m)?m.length:m,g=i(b)?b.length:b,y=i(m)?m:null,v=i(b)?b:null;y&&(c=(y.length-1)/(y[y.length-1]-y[0])/(d-1)),v&&(l=(v.length-1)/(v[v.length-1]-v[0])/(g-1));var _=1/0,w=-1/0;for(u=0;u<g;u++)for(o[u]=[],f=v?(v[u]-v[0])*l:u/(g-1),r=0;r<d;r++)s=(y?(y[r]-y[0])*c:r/(d-1))-f*p,_=Math.min(s,_),w=Math.max(s,w),o[u][r]=s;var x=1/(w-_),E=-_*x;for(u=0;u<g;u++)for(r=0;r<d;r++)o[u][r]=x*o[u][r]+E;return o}},{"../../lib":803}],994:[function(h,G,X){"use strict";var i=h("./catmull_rom"),m=h("../../lib").ensureArray;function b(p,r,u){return[(2*(-.5*u[0]+1.5*r[0])+p[0])/3,(2*(-.5*u[1]+1.5*r[1])+p[1])/3]}G.exports=function(p,r,u,c,l,f){var s,o,d,g,y,v,_,w,x,E,k=u[0].length,C=u.length,L=l?3*k-2:k,P=f?3*C-2:C;for(p=m(p,P),r=m(r,P),d=0;d<P;d++)p[d]=m(p[d],L),r[d]=m(r[d],L);for(o=0,g=0;o<C;o++,g+=f?3:1)for(y=p[g],v=r[g],_=u[o],w=c[o],s=0,d=0;s<k;s++,d+=l?3:1)y[d]=_[s],v[d]=w[s];if(l)for(o=0,g=0;o<C;o++,g+=f?3:1){for(s=1,d=3;s<k-1;s++,d+=3)x=i([u[o][s-1],c[o][s-1]],[u[o][s],c[o][s]],[u[o][s+1],c[o][s+1]],l),p[g][d-1]=x[0][0],r[g][d-1]=x[0][1],p[g][d+1]=x[1][0],r[g][d+1]=x[1][1];E=b([p[g][0],r[g][0]],[p[g][2],r[g][2]],[p[g][3],r[g][3]]),p[g][1]=E[0],r[g][1]=E[1],E=b([p[g][L-1],r[g][L-1]],[p[g][L-3],r[g][L-3]],[p[g][L-4],r[g][L-4]]),p[g][L-2]=E[0],r[g][L-2]=E[1]}if(f)for(d=0;d<L;d++){for(g=3;g<P-3;g+=3)x=i([p[g-3][d],r[g-3][d]],[p[g][d],r[g][d]],[p[g+3][d],r[g+3][d]],f),p[g-1][d]=x[0][0],r[g-1][d]=x[0][1],p[g+1][d]=x[1][0],r[g+1][d]=x[1][1];E=b([p[0][d],r[0][d]],[p[2][d],r[2][d]],[p[3][d],r[3][d]]),p[1][d]=E[0],r[1][d]=E[1],E=b([p[P-1][d],r[P-1][d]],[p[P-3][d],r[P-3][d]],[p[P-4][d],r[P-4][d]]),p[P-2][d]=E[0],r[P-2][d]=E[1]}if(l&&f)for(g=1;g<P;g+=(g+1)%3==0?2:1){for(d=3;d<L-3;d+=3)x=i([p[g][d-3],r[g][d-3]],[p[g][d],r[g][d]],[p[g][d+3],r[g][d+3]],l),p[g][d-1]=.5*(p[g][d-1]+x[0][0]),r[g][d-1]=.5*(r[g][d-1]+x[0][1]),p[g][d+1]=.5*(p[g][d+1]+x[1][0]),r[g][d+1]=.5*(r[g][d+1]+x[1][1]);E=b([p[g][0],r[g][0]],[p[g][2],r[g][2]],[p[g][3],r[g][3]]),p[g][1]=.5*(p[g][1]+E[0]),r[g][1]=.5*(r[g][1]+E[1]),E=b([p[g][L-1],r[g][L-1]],[p[g][L-3],r[g][L-3]],[p[g][L-4],r[g][L-4]]),p[g][L-2]=.5*(p[g][L-2]+E[0]),r[g][L-2]=.5*(r[g][L-2]+E[1])}return[p,r]}},{"../../lib":803,"./catmull_rom":992}],995:[function(h,G,X){"use strict";G.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],996:[function(h,G,X){"use strict";G.exports=function(i,m,b){return m&&b?function(p,r,u,c,l){var f,g,y;p||(p=[]),r*=3,u*=3;var v=c*c,_=1-c,w=_*_,x=_*c*2,E=-3*w,k=3*(w-x),C=3*(x-v),L=3*v,P=l*l,A=P*l,I=1-l,D=I*I,R=D*I;for(y=0;y<i.length;y++)f=E*(g=i[y])[u][r]+k*g[u][r+1]+C*g[u][r+2]+L*g[u][r+3],p[y]=R*f+3*(D*l*(E*g[u+1][r]+k*g[u+1][r+1]+C*g[u+1][r+2]+L*g[u+1][r+3])+I*P*(E*g[u+2][r]+k*g[u+2][r+1]+C*g[u+2][r+2]+L*g[u+2][r+3]))+A*(E*g[u+3][r]+k*g[u+3][r+1]+C*g[u+3][r+2]+L*g[u+3][r+3]);return p}:m?function(p,r,u,c,l){var f,o,d;p||(p=[]),r*=3;var g=c*c,y=1-c,v=y*y,_=y*c*2,w=-3*v,x=3*(v-_),E=3*(_-g),k=3*g,C=1-l;for(o=0;o<i.length;o++)f=w*(d=i[o])[u][r]+x*d[u][r+1]+E*d[u][r+2]+k*d[u][r+3],p[o]=C*f+l*(w*d[u+1][r]+x*d[u+1][r+1]+E*d[u+1][r+2]+k*d[u+1][r+3]);return p}:b?function(p,r,u,c,l){var f,g,y;p||(p=[]),u*=3;var v=l*l,_=v*l,w=1-l,x=w*w,E=x*w;for(g=0;g<i.length;g++)f=(y=i[g])[u][r+1]-y[u][r],p[g]=E*f+3*(x*l*(y[u+1][r+1]-y[u+1][r])+w*v*(y[u+2][r+1]-y[u+2][r]))+_*(y[u+3][r+1]-y[u+3][r]);return p}:function(p,r,u,c,l){var f,o,d;p||(p=[]);var g=1-l;for(o=0;o<i.length;o++)f=(d=i[o])[u][r+1]-d[u][r],p[o]=g*f+l*(d[u+1][r+1]-d[u+1][r]);return p}}},{}],997:[function(h,G,X){"use strict";G.exports=function(i,m,b){return m&&b?function(p,r,u,c,l){var f,g,y;p||(p=[]),r*=3,u*=3;var v=c*c,_=v*c,w=1-c,x=w*w,E=x*w,k=l*l,C=1-l,L=C*C,P=C*l*2,A=-3*L,I=3*(L-P),D=3*(P-k),R=3*k;for(y=0;y<i.length;y++)f=A*(g=i[y])[u][r]+I*g[u+1][r]+D*g[u+2][r]+R*g[u+3][r],p[y]=E*f+3*(x*c*(A*g[u][r+1]+I*g[u+1][r+1]+D*g[u+2][r+1]+R*g[u+3][r+1])+w*v*(A*g[u][r+2]+I*g[u+1][r+2]+D*g[u+2][r+2]+R*g[u+3][r+2]))+_*(A*g[u][r+3]+I*g[u+1][r+3]+D*g[u+2][r+3]+R*g[u+3][r+3]);return p}:m?function(p,r,u,c,l){var f,g,y;p||(p=[]),r*=3;var v=l*l,_=v*l,w=1-l,x=w*w,E=x*w;for(g=0;g<i.length;g++)f=(y=i[g])[u+1][r]-y[u][r],p[g]=E*f+3*(x*l*(y[u+1][r+1]-y[u][r+1])+w*v*(y[u+1][r+2]-y[u][r+2]))+_*(y[u+1][r+3]-y[u][r+3]);return p}:b?function(p,r,u,c,l){var f,o,d;p||(p=[]),u*=3;var g=1-c,y=l*l,v=1-l,_=v*v,w=v*l*2,x=-3*_,E=3*(_-w),k=3*(w-y),C=3*y;for(o=0;o<i.length;o++)f=x*(d=i[o])[u][r]+E*d[u+1][r]+k*d[u+2][r]+C*d[u+3][r],p[o]=g*f+c*(x*d[u][r+1]+E*d[u+1][r+1]+k*d[u+2][r+1]+C*d[u+3][r+1]);return p}:function(p,r,u,c,l){var f,o,d;p||(p=[]);var g=1-c;for(o=0;o<i.length;o++)f=(d=i[o])[u+1][r]-d[u][r],p[o]=g*f+c*(d[u+1][r+1]-d[u][r+1]);return p}}},{}],998:[function(h,G,X){"use strict";G.exports=function(i,m,b,p,r){var u=m-2,c=b-2;return p&&r?function(l,f,s){var o,v,_;l||(l=[]);var w=Math.max(0,Math.min(Math.floor(f),u)),x=Math.max(0,Math.min(Math.floor(s),c)),E=Math.max(0,Math.min(1,f-w)),k=Math.max(0,Math.min(1,s-x));w*=3,x*=3;var C=E*E,L=C*E,P=1-E,A=P*P,I=A*P,D=k*k,R=D*k,S=1-k,N=S*S,B=N*S;for(_=0;_<i.length;_++)o=I*(v=i[_])[x][w]+3*(A*E*v[x][w+1]+P*C*v[x][w+2])+L*v[x][w+3],l[_]=B*o+3*(N*k*(I*v[x+1][w]+3*(A*E*v[x+1][w+1]+P*C*v[x+1][w+2])+L*v[x+1][w+3])+S*D*(I*v[x+2][w]+3*(A*E*v[x+2][w+1]+P*C*v[x+2][w+2])+L*v[x+2][w+3]))+R*(I*v[x+3][w]+3*(A*E*v[x+3][w+1]+P*C*v[x+3][w+2])+L*v[x+3][w+3]);return l}:p?function(l,f,s){l||(l=[]);var o,v,_,w=Math.max(0,Math.min(Math.floor(f),u)),x=Math.max(0,Math.min(Math.floor(s),c)),E=Math.max(0,Math.min(1,f-w)),k=Math.max(0,Math.min(1,s-x));w*=3;var C=E*E,L=C*E,P=1-E,A=P*P,I=A*P,D=1-k;for(v=0;v<i.length;v++)o=D*(_=i[v])[x][w]+k*_[x+1][w],l[v]=I*o+3*(A*E*(D*_[x][w+1]+k*_[x+1][w+1])+P*C*(D*_[x][w+2]+k*_[x+1][w+1]))+L*(D*_[x][w+3]+k*_[x+1][w+1]);return l}:r?function(l,f,s){l||(l=[]);var o,v,_,w=Math.max(0,Math.min(Math.floor(f),u)),x=Math.max(0,Math.min(Math.floor(s),c)),E=Math.max(0,Math.min(1,f-w)),k=Math.max(0,Math.min(1,s-x));x*=3;var C=k*k,L=C*k,P=1-k,A=P*P,I=A*P,D=1-E;for(v=0;v<i.length;v++)o=D*(_=i[v])[x][w]+E*_[x][w+1],l[v]=I*o+3*(A*k*(D*_[x+1][w]+E*_[x+1][w+1])+P*C*(D*_[x+2][w]+E*_[x+2][w+1]))+L*(D*_[x+3][w]+E*_[x+3][w+1]);return l}:function(l,f,s){l||(l=[]);var o,g,y,v=Math.max(0,Math.min(Math.floor(f),u)),_=Math.max(0,Math.min(Math.floor(s),c)),w=Math.max(0,Math.min(1,f-v)),x=Math.max(0,Math.min(1,s-_)),E=1-x,k=1-w;for(g=0;g<i.length;g++)o=k*(y=i[g])[_][v]+w*y[_][v+1],l[g]=E*o+x*(k*y[_+1][v]+w*y[_+1][v+1]);return l}}},{}],999:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./xy_defaults"),b=h("./ab_defaults"),p=h("./attributes"),r=h("../../components/color/attributes");G.exports=function(u,c,l,f){function s(d,g){return i.coerce(u,c,p,d,g)}c._clipPathId="clip"+c.uid+"carpet";var o=s("color",r.defaultLine);i.coerceFont(s,"font"),s("carpet"),b(u,c,f,s,o),c.a&&c.b?(c.a.length<3&&(c.aaxis.smoothing=0),c.b.length<3&&(c.baxis.smoothing=0),m(u,c,s)||(c.visible=!1),c._cheater&&s("cheaterslope")):c.visible=!1}},{"../../components/color/attributes":665,"../../lib":803,"./ab_defaults":982,"./attributes":984,"./xy_defaults":1008}],1e3:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),plot:h("./plot"),calc:h("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:h("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":868,"./attributes":984,"./calc":988,"./defaults":999,"./plot":1005}],1001:[function(h,G,X){"use strict";G.exports=function(i,m){for(var b,p=i._fullData.length,r=0;r<p;r++){var u=i._fullData[r];if(u.index!==m.index&&"carpet"===u.type&&(b||(b=u),u.carpet===m.carpet))return u}return b}},{}],1002:[function(h,G,X){"use strict";G.exports=function(i,m,b){if(0===i.length)return"";var p,r=[],u=b?3:1;for(p=0;p<i.length;p+=u)r.push(i[p]+","+m[p]),b&&p<i.length-u&&(r.push("C"),r.push([i[p+1]+","+m[p+1],i[p+2]+","+m[p+2]+" "].join(" ")));return r.join(b?"":"L")}},{}],1003:[function(h,G,X){"use strict";var i=h("../../lib").isArrayOrTypedArray;G.exports=function(m,b,p){var r;for(i(m)?m.length>b.length&&(m=m.slice(0,b.length)):m=[],r=0;r<b.length;r++)m[r]=p(b[r]);return m}},{"../../lib":803}],1004:[function(h,G,X){"use strict";G.exports=function(i,m,b,p,r,u){var c=r[0]*i.dpdx(m),l=r[1]*i.dpdy(b),f=1,s=1;if(u){var o=Math.sqrt(r[0]*r[0]+r[1]*r[1]),d=Math.sqrt(u[0]*u[0]+u[1]*u[1]);s=Math.max(0,(r[0]*u[0]+r[1]*u[1])/o/d)}var y=180*Math.atan2(l,c)/Math.PI;return y<-90?(y+=180,f=-f):y>90&&(y-=180,f=-f),{angle:y,flip:f,p:i.c2p(p,m,b),offsetMultplier:s}}},{}],1005:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/drawing"),b=h("./map_1d_array"),p=h("./makepath"),r=h("./orient_text"),u=h("../../lib/svg_text_utils"),c=h("../../lib"),l=c.strRotate,f=c.strTranslate,s=h("../../constants/alignment");function o(_,w,x,E,k,C){var L="const-"+k+"-lines",P=x.selectAll("."+L).data(C);P.enter().append("path").classed(L,!0).style("vector-effect","non-scaling-stroke"),P.each(function(A){var I=A,R=I.y,S=b([],I.x,_.c2p),N=b([],R,w.c2p),B="M"+p(S,N,I.smoothing);i.select(this).attr("d",B).style("stroke-width",I.width).style("stroke",I.color).style("fill","none")}),P.exit().remove()}function d(_,w,x,E,k,C,L,P){var A=C.selectAll("text."+P).data(L);A.enter().append("text").classed(P,!0);var I=0,D={};return A.each(function(R,S){var N;if("auto"===R.axis.tickangle)N=r(E,w,x,R.xy,R.dxy);else{var B=(R.axis.tickangle+180)*Math.PI/180;N=r(E,w,x,R.xy,[Math.cos(B),Math.sin(B)])}S||(D={angle:N.angle,flip:N.flip});var H=(R.endAnchor?-1:1)*N.flip,Y=i.select(this).attr({"text-anchor":H>0?"start":"end","data-notex":1}).call(m.font,R.font).text(R.text).call(u.convertToTspans,_),Q=m.bBox(this);Y.attr("transform",f(N.p[0],N.p[1])+l(N.angle)+f(R.axis.labelpadding*H,.3*Q.height)),I=Math.max(I,Q.width+R.axis.labelpadding)}),A.exit().remove(),D.maxExtent=I,D}G.exports=function(_,w,x,E){var k=w.xaxis,C=w.yaxis,L=_._fullLayout._clips;c.makeTraceGroups(E,x,"trace").each(function(P){var A=i.select(this),I=P[0],D=I.trace,R=D.aaxis,S=D.baxis,N=c.ensureSingle(A,"g","minorlayer"),B=c.ensureSingle(A,"g","majorlayer"),H=c.ensureSingle(A,"g","boundarylayer"),Y=c.ensureSingle(A,"g","labellayer");A.style("opacity",D.opacity),o(k,C,B,0,"a",R._gridlines),o(k,C,B,0,"b",S._gridlines),o(k,C,N,0,"a",R._minorgridlines),o(k,C,N,0,"b",S._minorgridlines),o(k,C,H,0,"a-boundary",R._boundarylines),o(k,C,H,0,"b-boundary",S._boundarylines);var ae,te,K,re,V,W,Z,oe,ie,ue,fe,he,de,be,pe,Q=d(_,k,C,D,0,Y,R._labels,"a-label"),ne=d(_,k,C,D,0,Y,S._labels,"b-label");ae=_,te=Y,K=D,re=k,V=C,W=Q,Z=ne,he=c.aggNums(Math.min,null,K.a),de=c.aggNums(Math.max,null,K.a),be=c.aggNums(Math.min,null,K.b),pe=c.aggNums(Math.max,null,K.b),ue=K.ab2xy(oe=.5*(he+de),ie=be,!0),fe=K.dxyda_rough(oe,ie),void 0===W.angle&&c.extendFlat(W,r(K,re,V,ue,K.dxydb_rough(oe,ie))),v(ae,te,K,0,ue,fe,K.aaxis,re,V,W,"a-title"),ue=K.ab2xy(oe=he,ie=.5*(be+pe),!0),fe=K.dxydb_rough(oe,ie),void 0===Z.angle&&c.extendFlat(Z,r(K,re,V,ue,K.dxyda_rough(oe,ie))),v(ae,te,K,0,ue,fe,K.baxis,re,V,Z,"b-title"),function(ae,te,K,q,re){var V,W,Z,oe,ie=K.select("#"+ae._clipPathId);ie.size()||(ie=K.append("clipPath").classed("carpetclip",!0));var ue=c.ensureSingle(ie,"path","carpetboundary"),fe=te.clipsegments,he=[];for(oe=0;oe<fe.length;oe++)W=b([],(V=fe[oe]).x,q.c2p),Z=b([],V.y,re.c2p),he.push(p(W,Z,V.bicubic));var de="M"+he.join("L")+"Z";ie.attr("id",ae._clipPathId),ue.attr("d",de)}(D,I,L,k,C)})};var g=s.LINE_SPACING,y=(1-s.MID_SHIFT)/g+1;function v(_,w,x,E,k,C,L,P,A,I,D){var R=[];L.title.text&&R.push(L.title.text);var S=w.selectAll("text."+D).data(R),N=I.maxExtent;S.enter().append("text").classed(D,!0),S.each(function(){var B=r(x,P,A,k,C);-1===["start","both"].indexOf(L.showticklabels)&&(N=0);var H=L.title.font.size;N+=H+L.title.offset;var Y=(I.angle+(I.flip<0?180:0)-B.angle+450)%360,Q=Y>90&&Y<270,ne=i.select(this);ne.text(L.title.text).call(u.convertToTspans,_),Q&&(N=(-u.lineCount(ne)+y)*g*H-N),ne.attr("transform",f(B.p[0],B.p[1])+l(B.angle)+f(0,N)).attr("text-anchor","middle").call(m.font,L.title.font)}),S.exit().remove()}},{"../../components/drawing":688,"../../constants/alignment":771,"../../lib":803,"../../lib/svg_text_utils":829,"./makepath":1002,"./map_1d_array":1003,"./orient_text":1004,"@plotly/d3":58}],1006:[function(h,G,X){"use strict";var i=h("./constants"),m=h("../../lib/search").findBin,b=h("./compute_control_points"),p=h("./create_spline_evaluator"),r=h("./create_i_derivative_evaluator"),u=h("./create_j_derivative_evaluator");G.exports=function(c){var l=c._a,f=c._b,s=l.length,o=f.length,d=c.aaxis,g=c.baxis,y=l[0],v=l[s-1],_=f[0],w=f[o-1],x=l[l.length-1]-l[0],E=f[f.length-1]-f[0],k=x*i.RELATIVE_CULL_TOLERANCE,C=E*i.RELATIVE_CULL_TOLERANCE;y-=k,v+=k,_-=C,w+=C,c.isVisible=function(L,P){return L>y&&L<v&&P>_&&P<w},c.isOccluded=function(L,P){return L<y||L>v||P<_||P>w},c.setScale=function(){var A=b(c._xctrl,c._yctrl,c._x,c._y,d.smoothing,g.smoothing);c._xctrl=A[0],c._yctrl=A[1],c.evalxy=p([c._xctrl,c._yctrl],s,o,d.smoothing,g.smoothing),c.dxydi=r([c._xctrl,c._yctrl],d.smoothing,g.smoothing),c.dxydj=u([c._xctrl,c._yctrl],d.smoothing,g.smoothing)},c.i2a=function(L){var P=Math.max(0,Math.floor(L[0]),s-2),A=L[0]-P;return(1-A)*l[P]+A*l[P+1]},c.j2b=function(L){var P=Math.max(0,Math.floor(L[1]),s-2),A=L[1]-P;return(1-A)*f[P]+A*f[P+1]},c.ij2ab=function(L){return[c.i2a(L[0]),c.j2b(L[1])]},c.a2i=function(L){var P=Math.max(0,Math.min(m(L,l),s-2)),A=l[P];return Math.max(0,Math.min(s-1,P+(L-A)/(l[P+1]-A)))},c.b2j=function(L){var P=Math.max(0,Math.min(m(L,f),o-2)),A=f[P];return Math.max(0,Math.min(o-1,P+(L-A)/(f[P+1]-A)))},c.ab2ij=function(L){return[c.a2i(L[0]),c.b2j(L[1])]},c.i2c=function(L,P){return c.evalxy([],L,P)},c.ab2xy=function(L,P,A){if(!A&&(L<l[0]||L>l[s-1]|P<f[0]||P>f[o-1]))return[!1,!1];var I=c.a2i(L),D=c.b2j(P),R=c.evalxy([],I,D);if(A){var S,N,B,H,Y=0,Q=0,ne=[];L<l[0]?(S=0,N=0,Y=(L-l[0])/(l[1]-l[0])):L>l[s-1]?(S=s-2,N=1,Y=(L-l[s-1])/(l[s-1]-l[s-2])):N=I-(S=Math.max(0,Math.min(s-2,Math.floor(I)))),P<f[0]?(B=0,H=0,Q=(P-f[0])/(f[1]-f[0])):P>f[o-1]?(B=o-2,H=1,Q=(P-f[o-1])/(f[o-1]-f[o-2])):H=D-(B=Math.max(0,Math.min(o-2,Math.floor(D)))),Y&&(c.dxydi(ne,S,B,N,H),R[0]+=ne[0]*Y,R[1]+=ne[1]*Y),Q&&(c.dxydj(ne,S,B,N,H),R[0]+=ne[0]*Q,R[1]+=ne[1]*Q)}return R},c.c2p=function(L,P,A){return[P.c2p(L[0]),A.c2p(L[1])]},c.p2x=function(L,P,A){return[P.p2c(L[0]),A.p2c(L[1])]},c.dadi=function(L){var P=Math.max(0,Math.min(l.length-2,L));return l[P+1]-l[P]},c.dbdj=function(L){var P=Math.max(0,Math.min(f.length-2,L));return f[P+1]-f[P]},c.dxyda=function(L,P,A,I){var D=c.dxydi(null,L,P,A,I),R=c.dadi(L,A);return[D[0]/R,D[1]/R]},c.dxydb=function(L,P,A,I){var D=c.dxydj(null,L,P,A,I),R=c.dbdj(P,I);return[D[0]/R,D[1]/R]},c.dxyda_rough=function(L,P,A){var I=x*(A||.1),D=c.ab2xy(L+I,P,!0),R=c.ab2xy(L-I,P,!0);return[.5*(D[0]-R[0])/I,.5*(D[1]-R[1])/I]},c.dxydb_rough=function(L,P,A){var I=E*(A||.1),D=c.ab2xy(L,P+I,!0),R=c.ab2xy(L,P-I,!0);return[.5*(D[0]-R[0])/I,.5*(D[1]-R[1])/I]},c.dpdx=function(L){return L._m},c.dpdy=function(L){return L._m}}},{"../../lib/search":823,"./compute_control_points":994,"./constants":995,"./create_i_derivative_evaluator":996,"./create_j_derivative_evaluator":997,"./create_spline_evaluator":998}],1007:[function(h,G,X){"use strict";var i=h("../../lib");G.exports=function(m,b,p){var r,u,c,l=[],f=[],s=m[0].length,o=m.length;var g,y,v,_,w,x,E,k,C,L,te,K,q,re,V,A=0;for(r=0;r<s;r++)for(u=0;u<o;u++)void 0===m[u][r]&&(l.push(r),f.push(u),m[u][r]=(K=u,q=void 0,re=void 0,V=void 0,re=0,V=0,(te=r)>0&&void 0!==(q=m[K][te-1])&&(V++,re+=q),te<s-1&&void 0!==(q=m[K][te+1])&&(V++,re+=q),K>0&&void 0!==(q=m[K-1][te])&&(V++,re+=q),K<o-1&&void 0!==(q=m[K+1][te])&&(V++,re+=q),re/Math.max(1,V))),A=Math.max(A,Math.abs(m[u][r]));if(!l.length)return m;var I=0,D=0,R=l.length;do{for(I=0,c=0;c<R;c++){u=f[c];var N,B,H,Y,Q,ne=0,ae=0;0===(r=l[c])?(B=b[Y=Math.min(s-1,2)],ae+=(N=m[u][1])+(N-m[u][Y])*(b[0]-(H=b[1]))/(H-B),ne++):r===s-1&&(B=b[Y=Math.max(0,s-3)],ae+=(N=m[u][s-2])+(N-m[u][Y])*(b[s-1]-(H=b[s-2]))/(H-B),ne++),(0===r||r===s-1)&&u>0&&u<o-1&&(ae+=((y=p[u]-p[u-1])*m[u+1][r]+(g=p[u+1]-p[u])*m[u-1][r])/(y+g),ne++),0===u?(B=p[Q=Math.min(o-1,2)],ae+=(N=m[1][r])+(N-m[Q][r])*(p[0]-(H=p[1]))/(H-B),ne++):u===o-1&&(B=p[Q=Math.max(0,o-3)],ae+=(N=m[o-2][r])+(N-m[Q][r])*(p[o-1]-(H=p[o-2]))/(H-B),ne++),(0===u||u===o-1)&&r>0&&r<s-1&&(ae+=((y=b[r]-b[r-1])*m[u][r+1]+(g=b[r+1]-b[r])*m[u][r-1])/(y+g),ne++),ne?ae/=ne:(k=(w=p[u+1]-p[u])*(x=p[u]-p[u-1])*(w+x),ae=((E=(v=b[r+1]-b[r])*(_=b[r]-b[r-1])*(v+_))*(x*m[u+1][r]+w*m[u-1][r])+k*(_*m[u][r+1]+v*m[u][r-1]))/(k*(_+v)+E*(x+w))),I+=(L=(C=ae-m[u][r])/A)*L,m[u][r]+=C*(1+(ne?0:.85))}I=Math.sqrt(I)}while(D++<100&&I>1e-5);return i.log("Smoother converged to",I,"after",D,"iterations"),m}},{"../../lib":803}],1008:[function(h,G,X){"use strict";var i=h("../../lib").isArray1D;G.exports=function(m,b,p){var r=p("x"),u=r&&r.length,c=p("y"),l=c&&c.length;if(!u&&!l)return!1;if(b._cheater=!r,u&&!i(r)||l&&!i(c))b._length=null;else{var f=u?r.length:1/0;l&&(f=Math.min(f,c.length)),b.a&&b.a.length&&(f=Math.min(f,b.a.length)),b.b&&b.b.length&&(f=Math.min(f,b.b.length)),b._length=f}return!0}},{"../../lib":803}],1009:[function(h,G,X){"use strict";var i=h("../../plots/template_attributes").hovertemplateAttrs,m=h("../scattergeo/attributes"),b=h("../../components/colorscale/attributes"),p=h("../../plots/attributes"),r=h("../../components/color/attributes").defaultLine,u=h("../../lib/extend").extendFlat,c=m.marker.line;G.exports=u({locations:{valType:"data_array",editType:"calc"},locationmode:m.locationmode,z:{valType:"data_array",editType:"calc"},geojson:u({},m.geojson,{}),featureidkey:m.featureidkey,text:u({},m.text,{}),hovertext:u({},m.hovertext,{}),marker:{line:{color:u({},c.color,{dflt:r}),width:u({},c.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:m.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:m.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:u({},p.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:i(),showlegend:u({},p.showlegend,{dflt:!1})},b("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":665,"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scattergeo/attributes":1260}],1010:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../constants/numerical").BADNUM,b=h("../../components/colorscale/calc"),p=h("../scatter/arrays_to_calcdata"),r=h("../scatter/calc_selection");function u(c){return c&&"string"==typeof c}G.exports=function(c,l){var f,s=l._length,o=new Array(s);f=l.geojson?function(_){return u(_)||i(_)}:u;for(var d=0;d<s;d++){var g=o[d]={},y=l.locations[d],v=l.z[d];f(y)&&i(v)?(g.loc=y,g.z=v):(g.loc=null,g.z=m),g.index=d}return p(o,l),b(c,l,{vals:l.z,containerStr:"",cLetter:"z"}),r(o,l),o}},{"../../components/colorscale/calc":674,"../../constants/numerical":779,"../scatter/arrays_to_calcdata":1217,"../scatter/calc_selection":1220,"fast-isnumeric":249}],1011:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/colorscale/defaults"),b=h("./attributes");G.exports=function(p,r,u,c){function l(g,y){return i.coerce(p,r,b,g,y)}var f=l("locations"),s=l("z");if(f&&f.length&&i.isArrayOrTypedArray(s)&&s.length){r._length=Math.min(f.length,s.length);var o,d=l("geojson");("string"==typeof d&&""!==d||i.isPlainObject(d))&&(o="geojson-id"),"geojson-id"===l("locationmode",o)&&l("featureidkey"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),m(p,r,c,l,{prefix:"",cLetter:"z"}),i.coerceSelectionMarkerOpacity(r,l)}else r.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"./attributes":1009}],1012:[function(h,G,X){"use strict";G.exports=function(i,m,b,p,r){i.location=m.location,i.z=m.z;var u=p[r];return u.fIn&&u.fIn.properties&&(i.properties=u.fIn.properties),i.ct=u.ct,i}},{}],1013:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes"),m=h("./attributes"),b=h("../../lib").fillText;G.exports=function(p,r,u){var c,l,f,s,o=p.cd,d=o[0].trace,g=p.subplot,y=[r,u],v=[r+360,u];for(l=0;l<o.length;l++)if(s=!1,(c=o[l])._polygons){for(f=0;f<c._polygons.length;f++)c._polygons[f].contains(y)&&(s=!s),c._polygons[f].contains(v)&&(s=!s);if(s)break}if(s&&c)return p.x0=p.x1=p.xa.c2p(c.ct),p.y0=p.y1=p.ya.c2p(c.ct),p.index=c.index,p.location=c.loc,p.z=c.z,p.zLabel=i.tickText(g.mockAxis,g.mockAxis.c2l(c.z),"hover").text,p.hovertemplate=c.hovertemplate,function(_,w,x){if(!w.hovertemplate){var E=x.hi||w.hoverinfo,k=String(x.loc),C="all"===E?m.hoverinfo.flags:E.split("+"),L=-1!==C.indexOf("name"),P=-1!==C.indexOf("location"),A=-1!==C.indexOf("z"),I=-1!==C.indexOf("text"),D=[];!L&&P?_.nameOverride=k:(L&&(_.nameOverride=w.name),P&&D.push(k)),A&&D.push(_.zLabel),I&&b(x,w,D),_.extraText=D.join("<br>")}}(p,d,c),[p]}},{"../../lib":803,"../../plots/cartesian/axes":854,"./attributes":1009}],1014:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),colorbar:h("../heatmap/colorbar"),calc:h("./calc"),calcGeoJSON:h("./plot").calcGeoJSON,plot:h("./plot").plot,style:h("./style").style,styleOnSelect:h("./style").styleOnSelect,hoverPoints:h("./hover"),eventData:h("./event_data"),selectPoints:h("./select"),moduleType:"trace",name:"choropleth",basePlotModule:h("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":887,"../heatmap/colorbar":1088,"./attributes":1009,"./calc":1010,"./defaults":1011,"./event_data":1012,"./hover":1013,"./plot":1015,"./select":1016,"./style":1017}],1015:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=h("../../lib/geo_location_utils"),p=h("../../lib/topojson_utils").getTopojsonFeatures,r=h("../../plots/cartesian/autorange").findExtremes,u=h("./style").style;G.exports={calcGeoJSON:function(c,l){for(var f=c[0].trace,s=l[f.geo],o=s._subplot,d=f.locationmode,g=f._length,y="geojson-id"===d?b.extractTraceFeature(c):p(f,o.topojson),v=[],_=[],w=0;w<g;w++){var x=c[w],E="geojson-id"===d?x.fOut:b.locationToFeature(d,x.loc,y);if(E){x.geojson=E,x.ct=E.properties.ct,x._polygons=b.feature2polygons(E);var k=b.computeBbox(E);v.push(k[0],k[2]),_.push(k[1],k[3])}else x.geojson=null}if("geojson"===s.fitbounds&&"geojson-id"===d){var C=b.computeBbox(b.getTraceGeojson(f));v=[C[0],C[2]],_=[C[1],C[3]]}var L={padded:!0};f._extremes.lon=r(s.lonaxis._ax,v,L),f._extremes.lat=r(s.lataxis._ax,_,L)},plot:function(c,l,f){var s=l.layers.backplot.select(".choroplethlayer");m.makeTraceGroups(s,f,"trace choropleth").each(function(o){var d=i.select(this).selectAll("path.choroplethlocation").data(m.identity);d.enter().append("path").classed("choroplethlocation",!0),d.exit().remove(),u(c,o)})}}},{"../../lib":803,"../../lib/geo_location_utils":796,"../../lib/topojson_utils":832,"../../plots/cartesian/autorange":853,"./style":1017,"@plotly/d3":58}],1016:[function(h,G,X){"use strict";G.exports=function(i,m){var b,p,r,u,c,l=i.cd,f=i.xaxis,s=i.yaxis,o=[];if(!1===m)for(b=0;b<l.length;b++)l[b].selected=0;else for(b=0;b<l.length;b++)(r=(p=l[b]).ct)&&(u=f.c2p(r),c=s.c2p(r),m.contains([u,c],null,b,i)?(o.push({pointNumber:b,lon:r[0],lat:r[1]}),p.selected=1):p.selected=0);return o}},{}],1017:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/color"),b=h("../../components/drawing"),p=h("../../components/colorscale");function r(u,c){var l=c[0].trace,f=c[0].node3.selectAll(".choroplethlocation"),s=l.marker||{},o=s.line||{},d=p.makeColorScaleFuncFromTrace(l);f.each(function(g){i.select(this).attr("fill",d(g.z)).call(m.stroke,g.mlc||o.color).call(b.dashLine,"",g.mlw||o.width||0).style("opacity",s.opacity)}),b.selectedPointStyle(f,l,u)}G.exports={style:function(u,c){c&&r(u,c)},styleOnSelect:function(u,c){var f=c[0].trace;f.selectedpoints?b.selectedPointStyle(c[0].node3.selectAll(".choroplethlocation"),f,u):r(u,c)}}},{"../../components/color":666,"../../components/colorscale":678,"../../components/drawing":688,"@plotly/d3":58}],1018:[function(h,G,X){"use strict";var i=h("../choropleth/attributes"),m=h("../../components/colorscale/attributes"),b=h("../../plots/template_attributes").hovertemplateAttrs,p=h("../../plots/attributes"),r=h("../../lib/extend").extendFlat;G.exports=r({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:r({},i.featureidkey,{}),below:{valType:"string",editType:"plot"},text:i.text,hovertext:i.hovertext,marker:{line:{color:r({},i.marker.line.color,{editType:"plot"}),width:r({},i.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:r({},i.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:r({},i.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:r({},i.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:i.hoverinfo,hovertemplate:b({},{keys:["properties"]}),showlegend:r({},p.showlegend,{dflt:!1})},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,"../choropleth/attributes":1009}],1019:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib"),b=h("../../components/colorscale"),p=h("../../components/drawing"),r=h("../../lib/geojson_utils").makeBlank,u=h("../../lib/geo_location_utils");function c(l){var f,s=l[0].trace,o=s._opts;if(s.selectedpoints){for(var d=p.makeSelectedPointStyleFns(s),g=0;g<l.length;g++){var y=l[g];y.fOut&&(y.fOut.properties.mo2=d.selectedOpacityFn(y))}f={type:"identity",property:"mo2"}}else f=m.isArrayOrTypedArray(s.marker.opacity)?{type:"identity",property:"mo"}:s.marker.opacity;return m.extendFlat(o.fill.paint,{"fill-opacity":f}),m.extendFlat(o.line.paint,{"line-opacity":f}),o}G.exports={convert:function(l){var f=l[0].trace,s=!0===f.visible&&0!==f._length,o={layout:{visibility:"none"},paint:{}},d={layout:{visibility:"none"},paint:{}},g=f._opts={fill:o,line:d,geojson:r()};if(!s)return g;var y=u.extractTraceFeature(l);if(!y)return g;var v,_,w,x=b.makeColorScaleFuncFromTrace(f),E=f.marker,k=E.line||{};m.isArrayOrTypedArray(E.opacity)&&(v=function(D){var R=D.mo;return i(R)?+m.constrain(R,0,1):0}),m.isArrayOrTypedArray(k.color)&&(_=function(D){return D.mlc}),m.isArrayOrTypedArray(k.width)&&(w=function(D){return D.mlw});for(var C=0;C<l.length;C++){var L=l[C],P=L.fOut;if(P){var A=P.properties;A.fc=x(L.z),v&&(A.mo=v(L)),_&&(A.mlc=_(L)),w&&(A.mlw=w(L)),L.ct=A.ct,L._polygons=u.feature2polygons(P)}}var I=v?{type:"identity",property:"mo"}:E.opacity;return m.extendFlat(o.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":I}),m.extendFlat(d.paint,{"line-color":_?{type:"identity",property:"mlc"}:k.color,"line-width":w?{type:"identity",property:"mlw"}:k.width,"line-opacity":I}),o.layout.visibility="visible",d.layout.visibility="visible",g.geojson={type:"FeatureCollection",features:y},c(l),g},convertOnSelect:c}},{"../../components/colorscale":678,"../../components/drawing":688,"../../lib":803,"../../lib/geo_location_utils":796,"../../lib/geojson_utils":797,"fast-isnumeric":249}],1020:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/colorscale/defaults"),b=h("./attributes");G.exports=function(p,r,u,c){function l(d,g){return i.coerce(p,r,b,d,g)}var f=l("locations"),s=l("z"),o=l("geojson");i.isArrayOrTypedArray(f)&&f.length&&i.isArrayOrTypedArray(s)&&s.length&&("string"==typeof o&&""!==o||i.isPlainObject(o))?(l("featureidkey"),r._length=Math.min(f.length,s.length),l("below"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),m(p,r,c,l,{prefix:"",cLetter:"z"}),i.coerceSelectionMarkerOpacity(r,l)):r.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"./attributes":1018}],1021:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),colorbar:h("../heatmap/colorbar"),calc:h("../choropleth/calc"),plot:h("./plot"),hoverPoints:h("../choropleth/hover"),eventData:h("../choropleth/event_data"),selectPoints:h("../choropleth/select"),styleOnSelect:function(i,m){m&&m[0].trace._glTrace.updateOnSelect(m)},getBelow:function(i,m){for(var b=m.getMapLayers(),p=b.length-2;p>=0;p--){var r=b[p].id;if("string"==typeof r&&0===r.indexOf("water"))for(var u=p+1;u<b.length;u++)if("string"==typeof(r=b[u].id)&&-1===r.indexOf("plotly-"))return r}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:h("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":911,"../choropleth/calc":1010,"../choropleth/event_data":1012,"../choropleth/hover":1013,"../choropleth/select":1016,"../heatmap/colorbar":1088,"./attributes":1018,"./defaults":1020,"./plot":1022}],1022:[function(h,G,X){"use strict";var i=h("./convert").convert,m=h("./convert").convertOnSelect,b=h("../../plots/mapbox/constants").traceLayerPrefix;function p(u,c){this.type="choroplethmapbox",this.subplot=u,this.uid=c,this.sourceId="source-"+c,this.layerList=[["fill",b+c+"-fill"],["line",b+c+"-line"]],this.below=null}var r=p.prototype;r.update=function(u){this._update(i(u))},r.updateOnSelect=function(u){this._update(m(u))},r._update=function(u){var c=this.subplot,l=this.layerList,f=c.belowLookup["trace-"+this.uid];c.map.getSource(this.sourceId).setData(u.geojson),f!==this.below&&(this._removeLayers(),this._addLayers(u,f),this.below=f);for(var s=0;s<l.length;s++){var o=l[s],g=o[1],y=u[o[0]];c.setOptions(g,"setLayoutProperty",y.layout),"visible"===y.layout.visibility&&c.setOptions(g,"setPaintProperty",y.paint)}},r._addLayers=function(u,c){for(var l=this.subplot,f=this.layerList,s=this.sourceId,o=0;o<f.length;o++){var d=f[o],g=d[0],y=u[g];l.addLayer({type:g,id:d[1],source:s,layout:y.layout,paint:y.paint},c)}},r._removeLayers=function(){for(var u=this.subplot.map,c=this.layerList,l=c.length-1;l>=0;l--)u.removeLayer(c[l][1])},r.dispose=function(){var u=this.subplot.map;this._removeLayers(),u.removeSource(this.sourceId)},G.exports=function(u,c){var l=c[0].trace,f=new p(u,l.uid),s=f.sourceId,o=i(c),d=f.below=u.belowLookup["trace-"+l.uid];return u.map.addSource(s,{type:"geojson",data:o.geojson}),f._addLayers(o,d),c[0].trace._glTrace=f,f}},{"../../plots/mapbox/constants":909,"./convert":1019}],1023:[function(h,G,X){"use strict";var i=h("../../components/colorscale/attributes"),m=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=h("../../plots/template_attributes").hovertemplateAttrs,p=h("../mesh3d/attributes"),r=h("../../plots/attributes"),u=h("../../lib/extend").extendFlat,c={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:b({editType:"calc"},{keys:["norm"]}),uhoverformat:m("u",1),vhoverformat:m("v",1),whoverformat:m("w",1),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),showlegend:u({},r.showlegend,{dflt:!1})};u(c,i("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(l){c[l]=p[l]}),c.hoverinfo=u({},r.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),c.transforms=void 0,G.exports=c},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../mesh3d/attributes":1159}],1024:[function(h,G,X){"use strict";var i=h("../../components/colorscale/calc");G.exports=function(m,b){for(var p=b.u,r=b.v,u=b.w,c=Math.min(b.x.length,b.y.length,b.z.length,p.length,r.length,u.length),l=-1/0,f=1/0,s=0;s<c;s++){var o=p[s],d=r[s],g=u[s],y=Math.sqrt(o*o+d*d+g*g);l=Math.max(l,y),f=Math.min(f,y)}b._len=c,b._normMax=l,i(m,b,{vals:[f,l],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":674}],1025:[function(h,G,X){"use strict";var i=h("gl-cone3d"),m=h("gl-cone3d").createConeMesh,b=h("../../lib").simpleMap,p=h("../../lib/gl_format_color").parseColorScale,r=h("../../components/colorscale").extractOpts,u=h("../../plots/gl3d/zip3");function c(g,y){this.scene=g,this.uid=y,this.mesh=null,this.data=null}var l=c.prototype;l.handlePick=function(g){if(g.object===this.mesh){var y=g.index=g.data.index,x=this.data.u[y],E=this.data.v[y],k=this.data.w[y];g.traceCoordinate=[this.data.x[y],this.data.y[y],this.data.z[y],x,E,k,Math.sqrt(x*x+E*E+k*k)];var C=this.data.hovertext||this.data.text;return Array.isArray(C)&&void 0!==C[y]?g.textLabel=C[y]:C&&(g.textLabel=C),!0}};var f={xaxis:0,yaxis:1,zaxis:2},s={tip:1,tail:0,cm:.25,center:.5},o={tip:1,tail:1,cm:.75,center:.5};function d(g,y){var v=g.fullSceneLayout,_=g.dataScale,w={};function x(L,P){var A=v[P],I=_[f[P]];return b(L,function(D){return A.d2l(D)*I})}w.vectors=u(x(y.u,"xaxis"),x(y.v,"yaxis"),x(y.w,"zaxis"),y._len),w.positions=u(x(y.x,"xaxis"),x(y.y,"yaxis"),x(y.z,"zaxis"),y._len);var E=r(y);w.colormap=p(y),w.vertexIntensityBounds=[E.min/y._normMax,E.max/y._normMax],w.coneOffset=s[y.anchor],w.coneSize="scaled"===y.sizemode?y.sizeref||.5:y.sizeref&&y._normMax?y.sizeref/y._normMax:.5;var k=i(w),C=y.lightposition;return k.lightPosition=[C.x,C.y,C.z],k.ambient=y.lighting.ambient,k.diffuse=y.lighting.diffuse,k.specular=y.lighting.specular,k.roughness=y.lighting.roughness,k.fresnel=y.lighting.fresnel,k.opacity=y.opacity,y._pad=o[y.anchor]*k.vectorScale*k.coneScale*y._normMax,k}l.update=function(g){this.data=g;var y=d(this.scene,g);this.mesh.update(y)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},G.exports=function(g,y){var v=g.glplot.gl,_=d(g,y),w=m(v,_),x=new c(g,y.uid);return x.mesh=w,x.data=y,w._trace=x,g.glplot.add(w),x}},{"../../components/colorscale":678,"../../lib":803,"../../lib/gl_format_color":799,"../../plots/gl3d/zip3":907,"gl-cone3d":268}],1026:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/colorscale/defaults"),b=h("./attributes");G.exports=function(p,r,u,c){function l(v,_){return i.coerce(p,r,b,v,_)}var f=l("u"),s=l("v"),o=l("w"),d=l("x"),g=l("y"),y=l("z");f&&f.length&&s&&s.length&&o&&o.length&&d&&d.length&&g&&g.length&&y&&y.length?(l("sizeref"),l("sizemode"),l("anchor"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),m(p,r,c,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),l("uhoverformat"),l("vhoverformat"),l("whoverformat"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),r._length=null):r.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"./attributes":1023}],1027:[function(h,G,X){"use strict";G.exports={moduleType:"trace",name:"cone",basePlotModule:h("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:h("./attributes"),supplyDefaults:h("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:h("./calc"),plot:h("./convert"),eventData:function(i,m){return i.norm=m.traceCoordinate[6],i},meta:{}}},{"../../plots/gl3d":896,"./attributes":1023,"./calc":1024,"./convert":1025,"./defaults":1026}],1028:[function(h,G,X){"use strict";var i=h("../heatmap/attributes"),m=h("../scatter/attributes"),b=h("../../plots/cartesian/axis_format_attributes"),p=b.axisHoverFormat,r=b.descriptionOnlyNumbers,u=h("../../components/colorscale/attributes"),c=h("../../components/drawing/attributes").dash,l=h("../../plots/font_attributes"),f=h("../../lib/extend").extendFlat,s=h("../../constants/filter_ops"),o=s.COMPARISON_OPS2,d=s.INTERVAL_OPS,g=m.line;G.exports=f({z:i.z,x:i.x,x0:i.x0,dx:i.dx,y:i.y,y0:i.y0,dy:i.dy,xperiod:i.xperiod,yperiod:i.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:i.xperiodalignment,yperiodalignment:i.yperiodalignment,text:i.text,hovertext:i.hovertext,transpose:i.transpose,xtype:i.xtype,ytype:i.ytype,xhoverformat:p("x"),yhoverformat:p("y"),zhoverformat:p("z",1),hovertemplate:i.hovertemplate,hoverongaps:i.hoverongaps,connectgaps:f({},i.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:l({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:r("contour label")},operation:{valType:"enumerated",values:[].concat(o).concat(d),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:f({},g.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:c,smoothing:f({},g.smoothing,{}),editType:"plot"}},u("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":673,"../../components/drawing/attributes":687,"../../constants/filter_ops":775,"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../../plots/font_attributes":883,"../heatmap/attributes":1085,"../scatter/attributes":1218}],1029:[function(h,G,X){"use strict";var i=h("../../components/colorscale"),m=h("../heatmap/calc"),b=h("./set_contours"),p=h("./end_plus");G.exports=function(r,u){var c=m(r,u),l=c[0].z;b(u,l);var f,s=u.contours,o=i.extractOpts(u);if("heatmap"===s.coloring&&o.auto&&!1===u.autocontour){var d=s.start,g=p(s),y=s.size||1,v=Math.floor((g-d)/y)+1;isFinite(y)||(y=1,v=1);var _=d-y/2;f=[_,_+v*y]}else f=l;return i.calc(r,u,{vals:f,cLetter:"z"}),c}},{"../../components/colorscale":678,"../heatmap/calc":1086,"./end_plus":1039,"./set_contours":1047}],1030:[function(h,G,X){"use strict";G.exports=function(i,m){var b,p=i[0],r=p.z;switch(m.type){case"levels":var u=Math.min(r[0][0],r[0][1]);for(b=0;b<i.length;b++){var c=i[b];c.prefixBoundary=!c.edgepaths.length&&(u>c.level||c.starts.length&&u===c.level)}break;case"constraint":if(p.prefixBoundary=!1,p.edgepaths.length)return;var l=p.x.length,f=p.y.length,s=-1/0,o=1/0;for(b=0;b<f;b++)o=Math.min(o,r[b][0]),o=Math.min(o,r[b][l-1]),s=Math.max(s,r[b][0]),s=Math.max(s,r[b][l-1]);for(b=1;b<l-1;b++)o=Math.min(o,r[0][b]),o=Math.min(o,r[f-1][b]),s=Math.max(s,r[0][b]),s=Math.max(s,r[f-1][b]);var d,g,y=m.value;switch(m._operation){case">":y>s&&(p.prefixBoundary=!0);break;case"<":(y<o||p.starts.length&&y===o)&&(p.prefixBoundary=!0);break;case"[]":d=Math.min(y[0],y[1]),((g=Math.max(y[0],y[1]))<o||d>s||p.starts.length&&g===o)&&(p.prefixBoundary=!0);break;case"][":d=Math.min(y[0],y[1]),g=Math.max(y[0],y[1]),d<o&&g>s&&(p.prefixBoundary=!0)}}}},{}],1031:[function(h,G,X){"use strict";var i=h("../../components/colorscale"),m=h("./make_color_map"),b=h("./end_plus");G.exports={min:"zmin",max:"zmax",calc:function(p,r,u){var c=r.contours,l=r.line,f=c.size||1,s=c.coloring,o=m(r,{isColorbar:!0});if("heatmap"===s){var d=i.extractOpts(r);u._fillgradient=d.reversescale?i.flipScale(d.colorscale):d.colorscale,u._zrange=[d.min,d.max]}else"fill"===s&&(u._fillcolor=o);u._line={color:"lines"===s?o:l.color,width:!1!==c.showlines?l.width:0,dash:l.dash},u._levels={start:c.start,end:b(c),size:f}}}},{"../../components/colorscale":678,"./end_plus":1039,"./make_color_map":1044}],1032:[function(h,G,X){"use strict";G.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],1033:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("./label_defaults"),b=h("../../components/color"),p=b.addOpacity,r=b.opacity,u=h("../../constants/filter_ops"),c=u.CONSTRAINT_REDUCTION,l=u.COMPARISON_OPS2;G.exports=function(f,s,o,d,g,y){var v,_,w,k,C,L,x=s.contours,E=o("contours.operation");x._operation=c[E],k=o,-1===l.indexOf((C=x).operation)?(k("contours.value",[0,1]),Array.isArray(C.value)?C.value.length>2?C.value=C.value.slice(2):0===C.length?C.value=[0,1]:C.length<2?(L=parseFloat(C.value[0]),C.value=[L,L+1]):C.value=[parseFloat(C.value[0]),parseFloat(C.value[1])]:i(C.value)&&(L=parseFloat(C.value),C.value=[L,L+1])):(k("contours.value",0),i(C.value)||(C.value=Array.isArray(C.value)?parseFloat(C.value[0]):0)),"="===E?v=x.showlines=!0:(v=o("contours.showlines"),w=o("fillcolor",p((f.line||{}).color||g,.5))),v&&(_=o("line.color",w&&r(w)?p(s.fillcolor,1):g),o("line.width",2),o("line.dash")),o("line.smoothing"),m(o,d,_,y)}},{"../../components/color":666,"../../constants/filter_ops":775,"./label_defaults":1043,"fast-isnumeric":249}],1034:[function(h,G,X){"use strict";var i=h("../../constants/filter_ops"),m=h("fast-isnumeric");function b(u,c){var l,f=Array.isArray(c);function s(o){return m(o)?+o:null}return-1!==i.COMPARISON_OPS2.indexOf(u)?l=s(f?c[0]:c):-1!==i.INTERVAL_OPS.indexOf(u)?l=f?[s(c[0]),s(c[1])]:[s(c),s(c)]:-1!==i.SET_OPS.indexOf(u)&&(l=f?c.map(s):[s(c)]),l}function p(u){return function(c){c=b(u,c);var l=Math.min(c[0],c[1]),f=Math.max(c[0],c[1]);return{start:l,end:f,size:f-l}}}function r(u){return function(c){return{start:c=b(u,c),end:1/0,size:1/0}}}G.exports={"[]":p("[]"),"][":p("]["),">":r(">"),"<":r("<"),"=":r("=")}},{"../../constants/filter_ops":775,"fast-isnumeric":249}],1035:[function(h,G,X){"use strict";G.exports=function(i,m,b,p){var r=p("contours.start"),u=p("contours.end"),c=!1===r||!1===u,l=b("contours.size");!(c?m.autocontour=!0:b("autocontour",!1))&&l||b("ncontours")}},{}],1036:[function(h,G,X){"use strict";var i=h("../../lib");function m(b){return i.extendFlat({},b,{edgepaths:i.extendDeep([],b.edgepaths),paths:i.extendDeep([],b.paths),starts:i.extendDeep([],b.starts)})}G.exports=function(b,p){var r,u,c,l=function(o){return o.reverse()},f=function(o){return o};switch(p){case"=":case"<":return b;case">":for(1!==b.length&&i.warn("Contour data invalid for the specified inequality operation."),u=b[0],r=0;r<u.edgepaths.length;r++)u.edgepaths[r]=l(u.edgepaths[r]);for(r=0;r<u.paths.length;r++)u.paths[r]=l(u.paths[r]);for(r=0;r<u.starts.length;r++)u.starts[r]=l(u.starts[r]);return b;case"][":var s=l;l=f,f=s;case"[]":for(2!==b.length&&i.warn("Contour data invalid for the specified inequality range operation."),u=m(b[0]),c=m(b[1]),r=0;r<u.edgepaths.length;r++)u.edgepaths[r]=l(u.edgepaths[r]);for(r=0;r<u.paths.length;r++)u.paths[r]=l(u.paths[r]);for(r=0;r<u.starts.length;r++)u.starts[r]=l(u.starts[r]);for(;c.edgepaths.length;)u.edgepaths.push(f(c.edgepaths.shift()));for(;c.paths.length;)u.paths.push(f(c.paths.shift()));for(;c.starts.length;)u.starts.push(f(c.starts.shift()));return[u]}}},{"../../lib":803}],1037:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../heatmap/xyz_defaults"),b=h("../scatter/period_defaults"),p=h("./constraint_defaults"),r=h("./contours_defaults"),u=h("./style_defaults"),c=h("./attributes");G.exports=function(l,f,s,o){function d(y,v){return i.coerce(l,f,c,y,v)}if(m(l,f,d,o)){b(l,f,o,d),d("xhoverformat"),d("yhoverformat"),d("text"),d("hovertext"),d("hovertemplate"),d("hoverongaps");var g="constraint"===d("contours.type");d("connectgaps",i.isArray1D(f.z)),g?p(l,f,d,o,s):(r(l,f,d,function(y){return i.coerce2(l,f,c,y)}),u(l,f,d,o))}else f.visible=!1}},{"../../lib":803,"../heatmap/xyz_defaults":1099,"../scatter/period_defaults":1238,"./attributes":1028,"./constraint_defaults":1033,"./contours_defaults":1035,"./style_defaults":1049}],1038:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./constraint_mapping"),b=h("./end_plus");G.exports=function(p,r,u){for(var c="constraint"===p.type?m[p._operation](p.value):p,l=c.size,f=[],s=b(c),o=u.trace._carpetTrace,d=o?{xaxis:o.aaxis,yaxis:o.baxis,x:u.a,y:u.b}:{xaxis:r.xaxis,yaxis:r.yaxis,x:u.x,y:u.y},g=c.start;g<s;g+=l)if(f.push(i.extendFlat({level:g,crossings:{},starts:[],edgepaths:[],paths:[],z:u.z,smoothing:u.trace.line.smoothing},d)),f.length>1e3){i.warn("Too many contours, clipping at 1000",p);break}return f}},{"../../lib":803,"./constraint_mapping":1034,"./end_plus":1039}],1039:[function(h,G,X){"use strict";G.exports=function(i){return i.end+i.size/1e6}},{}],1040:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./constants");function b(u,c,l,f){return Math.abs(u[0]-c[0])<l&&Math.abs(u[1]-c[1])<f}function p(u,c,l,f,s){var o,ue,he,de,be,d=c.join(","),g=u.crossings[d],y=(he=c,de=0,be=0,(ue=g)>20&&l?208===ue||1114===ue?de=0===he[0]?1:-1:be=0===he[1]?1:-1:-1!==m.BOTTOMSTART.indexOf(ue)?be=1:-1!==m.LEFTSTART.indexOf(ue)?de=1:-1!==m.TOPSTART.indexOf(ue)?be=-1:de=-1,[de,be]),v=[r(u,c,[-y[0],-y[1]])],_=u.z.length,w=u.z[0].length,x=c.slice(),E=y.slice();for(o=0;o<1e4;o++){if(g>20?u.crossings[d]=m.SADDLEREMAINDER[g=m.CHOOSESADDLE[g][(y[0]||y[1])<0?0:1]]:delete u.crossings[d],!(y=m.NEWDELTA[g])){i.log("Found bad marching index:",g,c,u.level);break}if(v.push(r(u,c,y)),c[0]+=y[0],c[1]+=y[1],d=c.join(","),b(v[v.length-1],v[v.length-2],f,s)&&v.pop(),c[0]===x[0]&&c[1]===x[1]&&y[0]===E[0]&&y[1]===E[1]||l&&(y[0]&&(c[0]<0||c[0]>w-2)||y[1]&&(c[1]<0||c[1]>_-2)))break;g=u.crossings[d]}1e4===o&&i.log("Infinite loop in contour?");var C,L,P,A,I,D,R,S,N,B,H,Y,Q,ne,ae,te=b(v[0],v[v.length-1],f,s),K=0,q=.2*u.smoothing,re=[],V=0;for(o=1;o<v.length;o++)void 0,void 0,ne=(Y=v[o])[2]-(Q=v[o-1])[2],ae=Y[3]-Q[3],K+=R=Math.sqrt(ne*ne+ae*ae),re.push(R);var W=K/re.length*q;function Z(ue){return v[ue%v.length]}for(o=v.length-2;o>=V;o--)if((C=re[o])<W){for(P=0,L=o-1;L>=V&&C+re[L]<W;L--)C+=re[L];if(te&&o===v.length-2)for(P=0;P<L&&C+re[P]<W;P++)C+=re[P];I=o-L+P+1,D=Math.floor((o+L+P+2)/2),A=te||o!==v.length-2?te||-1!==L?I%2?Z(D):[(Z(D)[0]+Z(D+1)[0])/2,(Z(D)[1]+Z(D+1)[1])/2]:v[0]:v[v.length-1],v.splice(L+1,o-L+1,A),o=L+1,P&&(V=P),te&&(o===v.length-2?v[P]=v[v.length-1]:0===o&&(v[v.length-1]=v[0]))}for(v.splice(0,V),o=0;o<v.length;o++)v[o].length=2;if(!(v.length<2))if(te)v.pop(),u.paths.push(v);else{l||i.log("Unclosed interior contour?",u.level,x.join(","),v.join("L"));var oe=!1;for(S=0;S<u.edgepaths.length;S++)if(B=u.edgepaths[S],!oe&&b(B[0],v[v.length-1],f,s)){v.pop(),oe=!0;var ie=!1;for(N=0;N<u.edgepaths.length;N++)if(b((H=u.edgepaths[N])[H.length-1],v[0],f,s)){ie=!0,v.shift(),u.edgepaths.splice(S,1),N===S?u.paths.push(v.concat(H)):(N>S&&N--,u.edgepaths[N]=H.concat(v,B));break}ie||(u.edgepaths[S]=v.concat(B))}for(S=0;S<u.edgepaths.length&&!oe;S++)b((B=u.edgepaths[S])[B.length-1],v[0],f,s)&&(v.shift(),u.edgepaths[S]=B.concat(v),oe=!0);oe||u.edgepaths.push(v)}}function r(u,c,l){var f=c[0]+Math.max(l[0],0),s=c[1]+Math.max(l[1],0),o=u.z[s][f],d=u.xaxis,g=u.yaxis;if(l[1]){var y=(u.level-o)/(u.z[s][f+1]-o);return[d.c2p((1-y)*u.x[f]+y*u.x[f+1],!0),g.c2p(u.y[s],!0),f+y,s]}var v=(u.level-o)/(u.z[s+1][f]-o);return[d.c2p(u.x[f],!0),g.c2p((1-v)*u.y[s]+v*u.y[s+1],!0),f,s+v]}G.exports=function(u,c,l){var f,s,o,d;for(c=c||.01,l=l||.01,s=0;s<u.length;s++){for(o=u[s],d=0;d<o.starts.length;d++)p(o,o.starts[d],"edge",c,l);for(f=0;Object.keys(o.crossings).length&&f<1e4;)f++,p(o,Object.keys(o.crossings)[0].split(",").map(Number),void 0,c,l);1e4===f&&i.log("Infinite loop in contour?")}}},{"../../lib":803,"./constants":1032}],1041:[function(h,G,X){"use strict";var i=h("../../components/color"),m=h("../heatmap/hover");G.exports=function(b,p,r,u,c){c||(c={}),c.isContour=!0;var l=m(b,p,r,u,c);return l&&l.forEach(function(f){var s=f.trace;"constraint"===s.contours.type&&(s.fillcolor&&i.opacity(s.fillcolor)?f.color=i.addOpacity(s.fillcolor,1):s.contours.showlines&&i.opacity(s.line.color)&&(f.color=i.addOpacity(s.line.color,1)))}),l}},{"../../components/color":666,"../heatmap/hover":1092}],1042:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),calc:h("./calc"),plot:h("./plot").plot,style:h("./style"),colorbar:h("./colorbar"),hoverPoints:h("./hover"),moduleType:"trace",name:"contour",basePlotModule:h("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":868,"./attributes":1028,"./calc":1029,"./colorbar":1031,"./defaults":1037,"./hover":1041,"./plot":1046,"./style":1048}],1043:[function(h,G,X){"use strict";var i=h("../../lib");G.exports=function(m,b,p,r){if(r||(r={}),m("contours.showlabels")){var u=b.font;i.coerceFont(m,"contours.labelfont",{family:u.family,size:u.size,color:p}),m("contours.labelformat")}!1!==r.hasHover&&m("zhoverformat")}},{"../../lib":803}],1044:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/colorscale"),b=h("./end_plus");G.exports=function(p){var r=p.contours,u=r.start,c=b(r),l=r.size||1,f=Math.floor((c-u)/l)+1,s="lines"===r.coloring?0:1,o=m.extractOpts(p);isFinite(l)||(l=1,f=1);var d,g,y=o.reversescale?m.flipScale(o.colorscale):o.colorscale,v=y.length,_=new Array(v),w=new Array(v);if("heatmap"===r.coloring){var x=o.min,E=o.max;for(g=0;g<v;g++)_[g]=(d=y[g])[0]*(E-x)+x,w[g]=d[1];var k=i.extent([x,E,r.start,r.start+l*(f-1)]),C=k[x<E?0:1],L=k[x<E?1:0];C!==x&&(_.splice(0,0,C),w.splice(0,0,w[0])),L!==E&&(_.push(L),w.push(w[w.length-1]))}else for(g=0;g<v;g++)_[g]=((d=y[g])[0]*(f+s-1)-s/2)*l+u,w[g]=d[1];return m.makeColorScaleFunc({domain:_,range:w},{noNumericCheck:!0})}},{"../../components/colorscale":678,"./end_plus":1039,"@plotly/d3":58}],1045:[function(h,G,X){"use strict";var i=h("./constants");function m(b,p){var r=(p[0][0]>b?0:1)+(p[0][1]>b?0:2)+(p[1][1]>b?0:4)+(p[1][0]>b?0:8);return 5===r||10===r?b>(p[0][0]+p[0][1]+p[1][0]+p[1][1])/4?5===r?713:1114:5===r?104:208:15===r?0:r}G.exports=function(b){var p,r,u,c,l,f,s,o,d,g=b[0].z,y=g.length,v=g[0].length,_=2===y||2===v;for(r=0;r<y-1;r++)for(c=[],0===r&&(c=c.concat(i.BOTTOMSTART)),r===y-2&&(c=c.concat(i.TOPSTART)),p=0;p<v-1;p++)for(u=c.slice(),0===p&&(u=u.concat(i.LEFTSTART)),p===v-2&&(u=u.concat(i.RIGHTSTART)),l=p+","+r,f=[[g[r][p],g[r][p+1]],[g[r+1][p],g[r+1][p+1]]],d=0;d<b.length;d++)(s=m((o=b[d]).level,f))&&(o.crossings[l]=s,-1!==u.indexOf(s)&&(o.starts.push([p,r]),_&&-1!==u.indexOf(s,u.indexOf(s)+1)&&o.starts.push([p,r])))}},{"./constants":1032}],1046:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=h("../../components/drawing"),p=h("../../components/colorscale"),r=h("../../lib/svg_text_utils"),u=h("../../plots/cartesian/axes"),c=h("../../plots/cartesian/set_convert"),l=h("../heatmap/plot"),f=h("./make_crossings"),s=h("./find_all_paths"),o=h("./empty_pathinfo"),d=h("./convert_to_constraints"),g=h("./close_boundaries"),y=h("./constants"),v=y.LABELOPTIMIZER;function _(E,k){var C,L,P,A,I,D,S="",N=0,B=E.edgepaths.map(function(te,K){return K}),H=!0;function Y(te){return Math.abs(te[1]-k[2][1])<.01}function ne(te){return Math.abs(te[0]-k[2][0])<.01}for(;B.length;){for(D=b.smoothopen(E.edgepaths[N],E.smoothing),S+=H?D:D.replace(/^M/,"L"),B.splice(B.indexOf(N),1),C=E.edgepaths[N][E.edgepaths[N].length-1],A=-1,P=0;P<4;P++){if(!C){m.log("Missing end?",N,E);break}for(Math.abs(C[1]-k[0][1])<.01&&!ne(C)?L=k[1]:Math.abs(C[0]-k[0][0])<.01?L=k[0]:Y(C)?L=k[3]:ne(C)&&(L=k[2]),I=0;I<E.edgepaths.length;I++){var ae=E.edgepaths[I][0];Math.abs(C[0]-L[0])<.01?Math.abs(C[0]-ae[0])<.01&&(ae[1]-C[1])*(L[1]-ae[1])>=0&&(L=ae,A=I):Math.abs(C[1]-L[1])<.01?Math.abs(C[1]-ae[1])<.01&&(ae[0]-C[0])*(L[0]-ae[0])>=0&&(L=ae,A=I):m.log("endpt to newendpt is not vert. or horz.",C,L,ae)}if(C=L,A>=0)break;S+="L"+L}if(A===E.edgepaths.length){m.log("unclosed perimeter path");break}(H=-1===B.indexOf(N=A))&&(N=B[0],S+="Z")}for(N=0;N<E.paths.length;N++)S+=b.smoothclosed(E.paths[N],E.smoothing);return S}function w(E,k,C,L){var P=k.width/2,A=k.height/2,I=E.x,D=E.y,R=E.theta,S=Math.cos(R)*P,N=Math.sin(R)*P,B=(I>L.center?L.right-I:I-L.left)/(S+Math.abs(Math.sin(R)*A)),H=(D>L.middle?L.bottom-D:D-L.top)/(Math.abs(N)+Math.cos(R)*A);if(B<1||H<1)return 1/0;var Y=v.EDGECOST*(1/(B-1)+1/(H-1));Y+=v.ANGLECOST*R*R;for(var Q=I-S,ne=D-N,ae=I+S,te=D+N,K=0;K<C.length;K++){var q=C[K],re=Math.cos(q.theta)*q.width/2,V=Math.sin(q.theta)*q.width/2,W=2*m.segmentDistance(Q,ne,ae,te,q.x-re,q.y-V,q.x+re,q.y+V)/(k.height+q.height),Z=q.level===k.level,oe=Z?v.SAMELEVELDISTANCE:1;if(W<=oe)return 1/0;Y+=v.NEIGHBORCOST*(Z?v.SAMELEVELFACTOR:1)/(W-oe)}return Y}function x(E){var k,C,L=E.trace._emptypoints,P=[],A=E.z.length,I=E.z[0].length,D=[];for(k=0;k<I;k++)D.push(1);for(k=0;k<A;k++)P.push(D.slice());for(k=0;k<L.length;k++)P[(C=L[k])[0]][C[1]]=0;return E.zmask=P,P}X.plot=function(E,k,C,L){var P=k.xaxis,A=k.yaxis;m.makeTraceGroups(L,C,"contour").each(function(I){var D=i.select(this),R=I[0],N=R.x,B=R.y,H=R.trace.contours,Y=o(H,k,R),Q=m.ensureSingle(D,"g","heatmapcoloring"),ne=[];"heatmap"===H.coloring&&(ne=[I]),l(E,k,ne,Q),f(Y),s(Y);var Z,oe,ie,ae=P.c2p(N[0],!0),te=P.c2p(N[N.length-1],!0),K=A.c2p(B[0],!0),q=A.c2p(B[B.length-1],!0),re=[[ae,q],[te,q],[te,K],[ae,K]],V=Y;"constraint"===H.type&&(V=d(Y,H._operation)),Z=re,oe=H,(ie=m.ensureSingle(D,"g","contourbg").selectAll("path").data("fill"===oe.coloring?[0]:[])).enter().append("path"),ie.exit().remove(),ie.attr("d","M"+Z.join("L")+"Z").style("stroke","none"),function(W,Z,oe,ie){var ue="fill"===ie.coloring||"constraint"===ie.type&&"="!==ie._operation,fe="M"+oe.join("L")+"Z";ue&&g(Z,ie);var he=m.ensureSingle(W,"g","contourfill").selectAll("path").data(ue?Z:[]);he.enter().append("path"),he.exit().remove(),he.each(function(de){var be=(de.prefixBoundary?fe:"")+_(de,oe);be?i.select(this).attr("d",be).style("stroke","none"):i.select(this).remove()})}(D,V,re,H),function(W,Z,oe,ie,ue){var fe=m.ensureSingle(W,"g","contourlines"),he=!1!==ue.showlines,de=ue.showlabels,be=he&&de,pe=X.createLines(fe,he||de,Z),Te=X.createLineClip(fe,be,oe,ie.trace.uid),ye=W.selectAll("g.contourlabels").data(de?[0]:[]);if(ye.exit().remove(),ye.enter().append("g").classed("contourlabels",!0),de){var ke=[],ze=[];m.clearLocationCache();var je=X.labelFormatter(oe,ie),Ie=b.tester.append("text").attr("data-notex",1).call(b.font,ue.labelfont),Ce=Z[0].xaxis,_e=Z[0].yaxis,we=Ce._length,Se=_e._length,Oe=Ce.range,Be=_e.range,He=m.aggNums(Math.min,null,ie.x),Xe=m.aggNums(Math.max,null,ie.x),nt=m.aggNums(Math.min,null,ie.y),et=m.aggNums(Math.max,null,ie.y),qe=Math.max(Ce.c2p(He,!0),0),Ye=Math.min(Ce.c2p(Xe,!0),we),ot=Math.max(_e.c2p(et,!0),0),at=Math.min(_e.c2p(nt,!0),Se),ct={};Oe[0]<Oe[1]?(ct.left=qe,ct.right=Ye):(ct.left=Ye,ct.right=qe),Be[0]<Be[1]?(ct.top=ot,ct.bottom=at):(ct.top=at,ct.bottom=ot),ct.middle=(ct.top+ct.bottom)/2,ct.center=(ct.left+ct.right)/2,ke.push([[ct.left,ct.top],[ct.right,ct.top],[ct.right,ct.bottom],[ct.left,ct.bottom]]);var _t=Math.sqrt(we*we+Se*Se),xt=y.LABELDISTANCE*_t/Math.max(1,Z.length/y.LABELINCREASE);pe.each(function(Ht){var At=X.calcTextOpts(Ht.level,je,Ie,oe);i.select(this).selectAll("path").each(function(){var ht=m.getVisibleSegment(this,ct,At.height/2);if(ht&&!(ht.len<(At.width+At.height)*y.LABELMIN))for(var st=Math.min(Math.ceil(ht.len/xt),y.LABELMAX),Bt=0;Bt<st;Bt++){var gn=X.findBestTextLocation(this,ht,At,ze,ct);if(!gn)break;X.addLabelData(gn,At,ze,ke)}})}),Ie.remove(),X.drawLabels(ye,ze,oe,Te,be?ke:null)}de&&!he&&pe.remove()}(D,Y,E,R,H),function(W,Z,oe,ie,ue){var fe=ie.trace,de="clip"+fe.uid,be=oe._fullLayout._clips.selectAll("#"+de).data(fe.connectgaps?[]:[0]);if(be.enter().append("clipPath").classed("contourclip",!0).attr("id",de),be.exit().remove(),!1===fe.connectgaps){var pe={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:Z.xaxis,yaxis:Z.yaxis,x:ie.x,y:ie.y,z:x(ie),smoothing:0};f([pe]),s([pe]),g([pe],{type:"levels"}),m.ensureSingle(be,"path","").attr("d",(pe.prefixBoundary?"M"+ue.join("L")+"Z":"")+_(pe,ue))}else de=null;b.setClipUrl(W,de,oe)}(D,k,E,R,re)})},X.createLines=function(E,k,C){var L=C[0].smoothing,P=E.selectAll("g.contourlevel").data(k?C:[]);if(P.exit().remove(),P.enter().append("g").classed("contourlevel",!0),k){var A=P.selectAll("path.openline").data(function(D){return D.pedgepaths||D.edgepaths});A.exit().remove(),A.enter().append("path").classed("openline",!0),A.attr("d",function(D){return b.smoothopen(D,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var I=P.selectAll("path.closedline").data(function(D){return D.ppaths||D.paths});I.exit().remove(),I.enter().append("path").classed("closedline",!0),I.attr("d",function(D){return b.smoothclosed(D,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return P},X.createLineClip=function(E,k,C,L){var P=k?"clipline"+L:null,A=C._fullLayout._clips.selectAll("#"+P).data(k?[0]:[]);return A.exit().remove(),A.enter().append("clipPath").classed("contourlineclip",!0).attr("id",P),b.setClipUrl(E,P,C),A},X.labelFormatter=function(E,k){var C=E._fullLayout,L=k.trace,P=L.contours,A={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(P.labelformat)A.tickformat=P.labelformat,c(A,C);else{var I=p.extractOpts(L);if(I&&I.colorbar&&I.colorbar._axis)A=I.colorbar._axis;else{if("constraint"===P.type){var D=P.value;A.range=Array.isArray(D)?[D[0],D[D.length-1]]:[D,D]}else A.range=[P.start,P.end],A.nticks=(P.end-P.start)/P.size;A.range[0]===A.range[1]&&(A.range[1]+=A.range[0]||1),A.nticks||(A.nticks=1e3),c(A,C),u.prepTicks(A),A._tmin=null,A._tmax=null}}return function(R){return u.tickText(A,R).text}},X.calcTextOpts=function(E,k,C,L){var P=k(E);C.text(P).call(r.convertToTspans,L);var A=C.node(),I=b.bBox(A,!0);return{text:P,width:I.width,height:I.height,fontSize:+A.style["font-size"].replace("px",""),level:E,dy:(I.top+I.bottom)/2}},X.findBestTextLocation=function(E,k,C,L,P){var A,I,D,R,S,N=C.width;k.isClosed?(A=k.min+(I=k.len/v.INITIALSEARCHPOINTS)/2,D=k.max):(A=k.min+(I=(k.len-N)/(v.INITIALSEARCHPOINTS+1))+N/2,D=k.max-(I+N)/2);for(var B=1/0,H=0;H<v.ITERATIONS;H++){for(var Y=A;Y<D;Y+=I){var Q=m.getTextLocation(E,k.total,Y,N),ne=w(Q,C,L,P);ne<B&&(B=ne,S=Q,R=Y)}if(B>2*v.MAXCOST)break;H&&(I/=2),D=(A=R-I/2)+1.5*I}if(B<=v.MAXCOST)return S},X.addLabelData=function(E,k,C,L){var P=k.fontSize,A=k.width+P/3,I=Math.max(0,k.height-P/3),D=E.x,R=E.y,S=E.theta,N=Math.sin(S),B=Math.cos(S),H=function(Q,ne){return[D+Q*B-ne*N,R+Q*N+ne*B]},Y=[H(-A/2,-I/2),H(-A/2,I/2),H(A/2,I/2),H(A/2,-I/2)];C.push({text:k.text,x:D,y:R,dy:k.dy,theta:S,level:k.level,width:A,height:I}),L.push(Y)},X.drawLabels=function(E,k,C,L,P){var A=E.selectAll("text").data(k,function(R){return R.text+","+R.x+","+R.y+","+R.theta});if(A.exit().remove(),A.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(R){var S=R.x+Math.sin(R.theta)*R.dy,N=R.y-Math.cos(R.theta)*R.dy;i.select(this).text(R.text).attr({x:S,y:N,transform:"rotate("+180*R.theta/Math.PI+" "+S+" "+N+")"}).call(r.convertToTspans,C)}),P){for(var I="",D=0;D<P.length;D++)I+="M"+P[D].join("L")+"Z";m.ensureSingle(L,"path","").attr("d",I)}}},{"../../components/colorscale":678,"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"../../plots/cartesian/set_convert":875,"../heatmap/plot":1096,"./close_boundaries":1030,"./constants":1032,"./convert_to_constraints":1036,"./empty_pathinfo":1038,"./find_all_paths":1040,"./make_crossings":1045,"@plotly/d3":58}],1047:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes"),m=h("../../lib");function b(p,r,u){var c={type:"linear",range:[p,r]};return i.autoTicks(c,(r-p)/(u||15)),c}G.exports=function(p,r){var u=p.contours;if(p.autocontour){var c=p.zmin,l=p.zmax;(p.zauto||void 0===c)&&(c=m.aggNums(Math.min,null,r)),(p.zauto||void 0===l)&&(l=m.aggNums(Math.max,null,r));var f=b(c,l,p.ncontours);u.size=f.dtick,u.start=i.tickFirst(f),f.range.reverse(),u.end=i.tickFirst(f),u.start===c&&(u.start+=u.size),u.end===l&&(u.end-=u.size),u.start>u.end&&(u.start=u.end=(u.start+u.end)/2),p._input.contours||(p._input.contours={}),m.extendFlat(p._input.contours,{start:u.start,end:u.end,size:u.size}),p._input.autocontour=!0}else if("constraint"!==u.type){var s,o=u.start,d=u.end,g=p._input.contours;o>d&&(u.start=g.start=d,d=u.end=g.end=o,o=u.start),!(u.size>0)&&(s=o===d?1:b(o,d,p.ncontours).dtick,g.size=u.size=s)}}},{"../../lib":803,"../../plots/cartesian/axes":854}],1048:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/drawing"),b=h("../heatmap/style"),p=h("./make_color_map");G.exports=function(r){var u=i.select(r).selectAll("g.contour");u.style("opacity",function(c){return c[0].trace.opacity}),u.each(function(c){var l=i.select(this),f=c[0].trace,s=f.contours,o=f.line,d=s.size||1,g=s.start,y="constraint"===s.type,v=!y&&"lines"===s.coloring,_=!y&&"fill"===s.coloring,w=v||_?p(f):null;l.selectAll("g.contourlevel").each(function(k){i.select(this).selectAll("path").call(m.lineGroupStyle,o.width,v?w(k.level):o.color,o.dash)});var x=s.labelfont;if(l.selectAll("g.contourlabels text").each(function(k){m.font(i.select(this),{family:x.family,size:x.size,color:x.color||(v?w(k.level):o.color)})}),y)l.selectAll("g.contourfill path").style("fill",f.fillcolor);else if(_){var E;l.selectAll("g.contourfill path").style("fill",function(k){return void 0===E&&(E=k.level),w(k.level+.5*d)}),void 0===E&&(E=g),l.selectAll("g.contourbg path").style("fill",w(E-.5*d))}}),b(r)}},{"../../components/drawing":688,"../heatmap/style":1097,"./make_color_map":1044,"@plotly/d3":58}],1049:[function(h,G,X){"use strict";var i=h("../../components/colorscale/defaults"),m=h("./label_defaults");G.exports=function(b,p,r,u,c){var l,f=r("contours.coloring"),s="";"fill"===f&&(l=r("contours.showlines")),!1!==l&&("lines"!==f&&(s=r("line.color","#000")),r("line.width",.5),r("line.dash")),"none"!==f&&(!0!==b.showlegend&&(p.showlegend=!1),p._dfltShowLegend=!1,i(b,p,u,r,{prefix:"",cLetter:"z"})),r("line.smoothing"),m(r,u,s,c)}},{"../../components/colorscale/defaults":676,"./label_defaults":1043}],1050:[function(h,G,X){"use strict";var i=h("../heatmap/attributes"),m=h("../contour/attributes"),b=h("../../components/colorscale/attributes"),p=h("../../lib/extend").extendFlat,r=m.contours;G.exports=p({carpet:{valType:"string",editType:"calc"},z:i.z,a:i.x,a0:i.x0,da:i.dx,b:i.y,b0:i.y0,db:i.dy,text:i.text,hovertext:i.hovertext,transpose:i.transpose,atype:i.xtype,btype:i.ytype,fillcolor:m.fillcolor,autocontour:m.autocontour,ncontours:m.ncontours,contours:{type:r.type,start:r.start,end:r.end,size:r.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:r.showlines,showlabels:r.showlabels,labelfont:r.labelfont,labelformat:r.labelformat,operation:r.operation,value:r.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:m.line.color,width:m.line.width,dash:m.line.dash,smoothing:m.line.smoothing,editType:"plot"},transforms:void 0},b("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../contour/attributes":1028,"../heatmap/attributes":1085}],1051:[function(h,G,X){"use strict";var i=h("../../components/colorscale/calc"),m=h("../../lib"),b=h("../heatmap/convert_column_xyz"),p=h("../heatmap/clean_2d_array"),r=h("../heatmap/interp2d"),u=h("../heatmap/find_empties"),c=h("../heatmap/make_bound_array"),l=h("./defaults"),f=h("../carpet/lookup_carpetid"),s=h("../contour/set_contours");G.exports=function(o,d){var g=d._carpetTrace=f(o,d);if(g&&g.visible&&"legendonly"!==g.visible){if(!d.a||!d.b){var y=o.data[g.index],v=o.data[d.index];v.a||(v.a=y.a),v.b||(v.b=y.b),l(v,d,d._defaultColor,o._fullLayout)}var _=function(w,x){var E,k,C,L,P,A,I,D=x._carpetTrace,R=D.aaxis,S=D.baxis;R._minDtick=0,S._minDtick=0,m.isArray1D(x.z)&&b(x,R,S,"a","b",["z"]),E=x._a=x._a||x.a,L=x._b=x._b||x.b,E=E?R.makeCalcdata(x,"_a"):[],L=L?S.makeCalcdata(x,"_b"):[],k=x.a0||0,C=x.da||1,P=x.b0||0,A=x.db||1,I=x._z=p(x._z||x.z,x.transpose),x._emptypoints=u(I),r(I,x._emptypoints);var N=m.maxRowLength(I),ne={a:c(x,"scaled"===x.xtype?"":E,k,C,N,R),b:c(x,"scaled"===x.ytype?"":L,P,A,I.length,S),z:I};return"levels"===x.contours.type&&"none"!==x.contours.coloring&&i(w,x,{vals:I,containerStr:"",cLetter:"z"}),[ne]}(o,d);return s(d,d._z),_}}},{"../../components/colorscale/calc":674,"../../lib":803,"../carpet/lookup_carpetid":1001,"../contour/set_contours":1047,"../heatmap/clean_2d_array":1087,"../heatmap/convert_column_xyz":1089,"../heatmap/find_empties":1091,"../heatmap/interp2d":1094,"../heatmap/make_bound_array":1095,"./defaults":1052}],1052:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../heatmap/xyz_defaults"),b=h("./attributes"),p=h("../contour/constraint_defaults"),r=h("../contour/contours_defaults"),u=h("../contour/style_defaults");G.exports=function(c,l,f,s){function o(d,g){return i.coerce(c,l,b,d,g)}if(o("carpet"),c.a&&c.b){if(!m(c,l,o,s,"a","b"))return void(l.visible=!1);o("text"),"constraint"===o("contours.type")?p(c,l,o,s,f,{hasHover:!1}):(r(c,l,o,function(d){return i.coerce2(c,l,b,d)}),u(c,l,o,s,{hasHover:!1}))}else l._defaultColor=f,l._length=null}},{"../../lib":803,"../contour/constraint_defaults":1033,"../contour/contours_defaults":1035,"../contour/style_defaults":1049,"../heatmap/xyz_defaults":1099,"./attributes":1050}],1053:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),colorbar:h("../contour/colorbar"),calc:h("./calc"),plot:h("./plot"),style:h("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:h("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":868,"../contour/colorbar":1031,"../contour/style":1048,"./attributes":1050,"./calc":1051,"./defaults":1052,"./plot":1054}],1054:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../carpet/map_1d_array"),b=h("../carpet/makepath"),p=h("../../components/drawing"),r=h("../../lib"),u=h("../contour/make_crossings"),c=h("../contour/find_all_paths"),l=h("../contour/plot"),f=h("../contour/constants"),s=h("../contour/convert_to_constraints"),o=h("../contour/empty_pathinfo"),d=h("../contour/close_boundaries"),g=h("../carpet/lookup_carpetid"),y=h("../carpet/axis_aligned_line");function v(x,E,k){var C=x.getPointAtLength(E),L=x.getPointAtLength(k),P=L.x-C.x,A=L.y-C.y,I=Math.sqrt(P*P+A*A);return[P/I,A/I]}function _(x){var E=Math.sqrt(x[0]*x[0]+x[1]*x[1]);return[x[0]/E,x[1]/E]}function w(x,E){var k=Math.abs(x[0]*E[0]+x[1]*E[1]);return Math.sqrt(1-k*k)/k}G.exports=function(x,E,k,C){var L=E.xaxis,P=E.yaxis;r.makeTraceGroups(C,k,"contour").each(function(A){var I=i.select(this),D=A[0],R=D.trace,S=R._carpetTrace=g(x,R),N=x.calcdata[S.index][0];if(S.visible&&"legendonly"!==S.visible){var B=D.a,H=D.b,Y=R.contours,Q=o(Y,E,D),ne="constraint"===Y.type,ae=Y._operation,te=ne?"="===ae?"lines":"fill":Y.coloring,K=[[B[0],H[H.length-1]],[B[B.length-1],H[H.length-1]],[B[B.length-1],H[0]],[B[0],H[0]]];u(Q),c(Q,1e-8*(B[B.length-1]-B[0]),1e-8*(H[H.length-1]-H[0]));var V,W,Z,oe,ie=Q;"constraint"===Y.type&&(ie=s(Q,ae)),function(de,be){var pe,Te,ye,ke,ze,je,Ie,Ce,_e;for(pe=0;pe<de.length;pe++){for(ze=(ke=de[pe]).pedgepaths=[],je=ke.ppaths=[],Te=0;Te<ke.edgepaths.length;Te++){for(_e=ke.edgepaths[Te],Ie=[],ye=0;ye<_e.length;ye++)Ie[ye]=be(_e[ye]);ze.push(Ie)}for(Te=0;Te<ke.paths.length;Te++){for(_e=ke.paths[Te],Ce=[],ye=0;ye<_e.length;ye++)Ce[ye]=be(_e[ye]);je.push(Ce)}}}(Q,he);var ue=[];for(oe=N.clipsegments.length-1;oe>=0;oe--)W=m([],(V=N.clipsegments[oe]).x,L.c2p),Z=m([],V.y,P.c2p),W.reverse(),Z.reverse(),ue.push(b(W,Z,V.bicubic));var fe="M"+ue.join("L")+"Z";(function(de,be,pe,Te,ye,ke){var ze,je,Ie,Ce,_e=r.ensureSingle(de,"g","contourbg").selectAll("path").data("fill"!==ke||ye?[]:[0]);_e.enter().append("path"),_e.exit().remove();var we=[];for(Ce=0;Ce<be.length;Ce++)je=m([],(ze=be[Ce]).x,pe.c2p),Ie=m([],ze.y,Te.c2p),we.push(b(je,Ie,ze.bicubic));_e.attr("d","M"+we.join("L")+"Z").style("stroke","none")})(I,N.clipsegments,L,P,ne,te),function(de,be,pe,Te,ye,ke,ze,je,Ie,Ce,_e){var we="fill"===Ce;we&&d(ye,de.contours);var Se=r.ensureSingle(be,"g","contourfill").selectAll("path").data(we?ye:[]);Se.enter().append("path"),Se.exit().remove(),Se.each(function(Oe){var Be=(Oe.prefixBoundary?_e:"")+function(He,Xe,nt,et,qe,Ye,ot,at){var ct,_t,xt,Ht,At,ht,st,Bt="",gn=Xe.edgepaths.map(function(bt,gt){return gt}),hn=!0,We=1e-4*Math.abs(nt[0][0]-nt[2][0]),it=1e-4*Math.abs(nt[0][1]-nt[2][1]);function qt(bt){return Math.abs(bt[1]-nt[0][1])<it}function Ge(bt){return Math.abs(bt[1]-nt[2][1])<it}function Pe(bt){return Math.abs(bt[0]-nt[0][0])<We}function Ee(bt){return Math.abs(bt[0]-nt[2][0])<We}function Ne(bt,gt){var pt,St,jt,Lt,Vt="";for(qt(bt)&&!Ee(bt)||Ge(bt)&&!Pe(bt)?(Lt=qe.aaxis,jt=y(qe,Ye,[bt[0],gt[0]],.5*(bt[1]+gt[1]))):(Lt=qe.baxis,jt=y(qe,Ye,.5*(bt[0]+gt[0]),[bt[1],gt[1]])),pt=1;pt<jt.length;pt++)for(Vt+=Lt.smoothing?"C":"L",St=0;St<jt[pt].length;St++){var mt=jt[pt][St];Vt+=[ot.c2p(mt[0]),at.c2p(mt[1])]+" "}return Vt}for(ct=0,_t=null;gn.length;){for(_t&&(Bt+=Ne(_t,Xe.edgepaths[ct][0])),st=p.smoothopen(Xe.edgepaths[ct].map(et),Xe.smoothing),Bt+=hn?st:st.replace(/^M/,"L"),gn.splice(gn.indexOf(ct),1),_t=Xe.edgepaths[ct][Xe.edgepaths[ct].length-1],At=-1,Ht=0;Ht<4;Ht++){if(!_t){r.log("Missing end?",ct,Xe);break}for(qt(_t)&&!Ee(_t)?xt=nt[1]:Pe(_t)?xt=nt[0]:Ge(_t)?xt=nt[3]:Ee(_t)&&(xt=nt[2]),ht=0;ht<Xe.edgepaths.length;ht++){var Ke=Xe.edgepaths[ht][0];Math.abs(_t[0]-xt[0])<We?Math.abs(_t[0]-Ke[0])<We&&(Ke[1]-_t[1])*(xt[1]-Ke[1])>=0&&(xt=Ke,At=ht):Math.abs(_t[1]-xt[1])<it?Math.abs(_t[1]-Ke[1])<it&&(Ke[0]-_t[0])*(xt[0]-Ke[0])>=0&&(xt=Ke,At=ht):r.log("endpt to newendpt is not vert. or horz.",_t,xt,Ke)}if(At>=0)break;Bt+=Ne(_t,xt),_t=xt}if(At===Xe.edgepaths.length){r.log("unclosed perimeter path");break}(hn=-1===gn.indexOf(ct=At))&&(ct=gn[0],Bt+=Ne(_t,xt)+"Z",_t=null)}for(ct=0;ct<Xe.paths.length;ct++)Bt+=p.smoothclosed(Xe.paths[ct].map(et),Xe.smoothing);return Bt}(0,Oe,ke,ze,je,Ie,pe,Te);Be?i.select(this).attr("d",Be).style("stroke","none"):i.select(this).remove()})}(R,I,L,P,ie,K,he,S,N,te,fe),function(de,be,pe,Te,ye,ke,ze){var je=r.ensureSingle(de,"g","contourlines"),Ie=!1!==ye.showlines,Ce=ye.showlabels,_e=Ie&&Ce,we=l.createLines(je,Ie||Ce,be),Se=l.createLineClip(je,_e,pe,Te.trace.uid),Oe=de.selectAll("g.contourlabels").data(Ce?[0]:[]);if(Oe.exit().remove(),Oe.enter().append("g").classed("contourlabels",!0),Ce){var Xe=ke.xaxis._length,nt=ke.yaxis._length,et=[[[0,0],[Xe,0],[Xe,nt],[0,nt]]],qe=[];r.clearLocationCache();var Ye=l.labelFormatter(pe,Te),ot=p.tester.append("text").attr("data-notex",1).call(p.font,ye.labelfont),at={left:0,right:Xe,center:Xe/2,top:0,bottom:nt,middle:nt/2},ct=Math.sqrt(Xe*Xe+nt*nt),_t=f.LABELDISTANCE*ct/Math.max(1,be.length/f.LABELINCREASE);we.each(function(xt){var Ht=l.calcTextOpts(xt.level,Ye,ot,pe);i.select(this).selectAll("path").each(function(At){var ht=r.getVisibleSegment(this,at,Ht.height/2);if(ht&&(function(hn,We,it,qt,Ge,Pe){for(var Ee,Ne=0;Ne<it.pedgepaths.length;Ne++)We===it.pedgepaths[Ne]&&(Ee=it.edgepaths[Ne]);if(Ee){var Ve=Ge.a[0],Ke=Ge.a[Ge.a.length-1],bt=Ge.b[0],gt=Ge.b[Ge.b.length-1],St=v(hn,0,1),jt=v(hn,qt.total,qt.total-1),Lt=pt(Ee[0],St),Vt=qt.total-pt(Ee[Ee.length-1],jt);qt.min<Lt&&(qt.min=Lt),qt.max>Vt&&(qt.max=Vt),qt.len=qt.max-qt.min}function pt(mt,Wt){var Kt,rn=0;return(Math.abs(mt[0]-Ve)<.1||Math.abs(mt[0]-Ke)<.1)&&(Kt=_(Ge.dxydb_rough(mt[0],mt[1],.1)),rn=Math.max(rn,Pe*w(Wt,Kt)/2)),(Math.abs(mt[1]-bt)<.1||Math.abs(mt[1]-gt)<.1)&&(Kt=_(Ge.dxyda_rough(mt[0],mt[1],.1)),rn=Math.max(rn,Pe*w(Wt,Kt)/2)),rn}}(this,At,xt,ht,ze,Ht.height),!(ht.len<(Ht.width+Ht.height)*f.LABELMIN)))for(var st=Math.min(Math.ceil(ht.len/_t),f.LABELMAX),Bt=0;Bt<st;Bt++){var gn=l.findBestTextLocation(this,ht,Ht,qe,at);if(!gn)break;l.addLabelData(gn,Ht,qe,et)}})}),ot.remove(),l.drawLabels(Oe,qe,pe,Se,_e?et:null)}Ce&&!Ie&&we.remove()}(I,Q,x,D,Y,E,S),p.setClipUrl(I,S._clipPathId,x)}function he(de){var be=S.ab2xy(de[0],de[1],!0);return[L.c2p(be[0]),P.c2p(be[1])]}})}},{"../../components/drawing":688,"../../lib":803,"../carpet/axis_aligned_line":985,"../carpet/lookup_carpetid":1001,"../carpet/makepath":1002,"../carpet/map_1d_array":1003,"../contour/close_boundaries":1030,"../contour/constants":1032,"../contour/convert_to_constraints":1036,"../contour/empty_pathinfo":1038,"../contour/find_all_paths":1040,"../contour/make_crossings":1045,"../contour/plot":1046,"@plotly/d3":58}],1055:[function(h,G,X){"use strict";var i=h("../../components/colorscale/attributes"),m=h("../../plots/template_attributes").hovertemplateAttrs,b=h("../../plots/attributes"),p=h("../scattermapbox/attributes"),r=h("../../lib/extend").extendFlat;G.exports=r({lon:p.lon,lat:p.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:p.text,hovertext:p.hovertext,hoverinfo:r({},b.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:m(),showlegend:r({},b.showlegend,{dflt:!1})},i("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scattermapbox/attributes":1283}],1056:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib").isArrayOrTypedArray,b=h("../../constants/numerical").BADNUM,p=h("../../components/colorscale/calc"),r=h("../../lib")._;G.exports=function(u,c){for(var l=c._length,f=new Array(l),s=c.z,o=m(s)&&s.length,d=0;d<l;d++){var g=f[d]={},y=c.lon[d],v=c.lat[d];if(g.lonlat=i(y)&&i(v)?[+y,+v]:[b,b],o){var _=s[d];g.z=i(_)?_:b}}return p(u,c,{vals:o?s:[0,1],containerStr:"",cLetter:"z"}),l&&(f[0].t={labels:{lat:r(u,"lat:")+" ",lon:r(u,"lon:")+" "}}),f}},{"../../components/colorscale/calc":674,"../../constants/numerical":779,"../../lib":803,"fast-isnumeric":249}],1057:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib"),b=h("../../components/color"),p=h("../../components/colorscale"),r=h("../../constants/numerical").BADNUM,u=h("../../lib/geojson_utils").makeBlank;G.exports=function(c){var l=c[0].trace,f=!0===l.visible&&0!==l._length,s=l._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:u()};if(!f)return s;var o,d=[],g=l.z,y=l.radius,v=m.isArrayOrTypedArray(g)&&g.length,_=m.isArrayOrTypedArray(y);for(o=0;o<c.length;o++){var w=c[o],x=w.lonlat;if(x[0]!==r){var E={};if(v){var k=w.z;E.z=k!==r?k:0}_&&(E.r=i(y[o])&&y[o]>0?+y[o]:0),d.push({type:"Feature",geometry:{type:"Point",coordinates:x},properties:E})}}var C=p.extractOpts(l),L=C.reversescale?p.flipScale(C.colorscale):C.colorscale,P=L[0][1],A=["interpolate",["linear"],["heatmap-density"],0,b.opacity(P)<1?P:b.addOpacity(P,0)];for(o=1;o<L.length;o++)A.push(L[o][0],L[o][1]);return m.extendFlat(s.heatmap.paint,{"heatmap-weight":v?["interpolate",["linear"],["get","z"],C.min,0,C.max,1]:1/(C.max-C.min),"heatmap-color":A,"heatmap-radius":_?{type:"identity",property:"r"}:l.radius,"heatmap-opacity":l.opacity}),s.geojson={type:"FeatureCollection",features:d},s.heatmap.layout.visibility="visible",s}},{"../../components/color":666,"../../components/colorscale":678,"../../constants/numerical":779,"../../lib":803,"../../lib/geojson_utils":797,"fast-isnumeric":249}],1058:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/colorscale/defaults"),b=h("./attributes");G.exports=function(p,r,u,c){function l(d,g){return i.coerce(p,r,b,d,g)}var f=l("lon")||[],s=l("lat")||[],o=Math.min(f.length,s.length);o?(r._length=o,l("z"),l("radius"),l("below"),l("text"),l("hovertext"),l("hovertemplate"),m(p,r,c,l,{prefix:"",cLetter:"z"})):r.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"./attributes":1055}],1059:[function(h,G,X){"use strict";G.exports=function(i,m){return i.lon=m.lon,i.lat=m.lat,i.z=m.z,i}},{}],1060:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes"),m=h("../scattermapbox/hover").hoverPoints,b=h("../scattermapbox/hover").getExtraText;G.exports=function(p,r,u){var c=m(p,r,u);if(c){var l=c[0],f=l.cd,s=f[0].trace,o=f[l.index];if(delete l.color,"z"in o){var d=l.subplot.mockAxis;l.z=o.z,l.zLabel=i.tickText(d,d.c2l(o.z),"hover").text}return l.extraText=b(s,o,f[0].t.labels),[l]}}},{"../../plots/cartesian/axes":854,"../scattermapbox/hover":1288}],1061:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),colorbar:h("../heatmap/colorbar"),formatLabels:h("../scattermapbox/format_labels"),calc:h("./calc"),plot:h("./plot"),hoverPoints:h("./hover"),eventData:h("./event_data"),getBelow:function(i,m){for(var b=m.getMapLayers(),p=0;p<b.length;p++){var r=b[p],u=r.id;if("symbol"===r.type&&"string"==typeof u&&-1===u.indexOf("plotly-"))return u}},moduleType:"trace",name:"densitymapbox",basePlotModule:h("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":911,"../heatmap/colorbar":1088,"../scattermapbox/format_labels":1287,"./attributes":1055,"./calc":1056,"./defaults":1058,"./event_data":1059,"./hover":1060,"./plot":1062}],1062:[function(h,G,X){"use strict";var i=h("./convert"),m=h("../../plots/mapbox/constants").traceLayerPrefix;function b(r,u){this.type="densitymapbox",this.subplot=r,this.uid=u,this.sourceId="source-"+u,this.layerList=[["heatmap",m+u+"-heatmap"]],this.below=null}var p=b.prototype;p.update=function(r){var u=this.subplot,c=this.layerList,l=i(r),f=u.belowLookup["trace-"+this.uid];u.map.getSource(this.sourceId).setData(l.geojson),f!==this.below&&(this._removeLayers(),this._addLayers(l,f),this.below=f);for(var s=0;s<c.length;s++){var o=c[s],g=o[1],y=l[o[0]];u.setOptions(g,"setLayoutProperty",y.layout),"visible"===y.layout.visibility&&u.setOptions(g,"setPaintProperty",y.paint)}},p._addLayers=function(r,u){for(var c=this.subplot,l=this.layerList,f=this.sourceId,s=0;s<l.length;s++){var o=l[s],d=o[0],g=r[d];c.addLayer({type:d,id:o[1],source:f,layout:g.layout,paint:g.paint},u)}},p._removeLayers=function(){for(var r=this.subplot.map,u=this.layerList,c=u.length-1;c>=0;c--)r.removeLayer(u[c][1])},p.dispose=function(){var r=this.subplot.map;this._removeLayers(),r.removeSource(this.sourceId)},G.exports=function(r,u){var c=u[0].trace,l=new b(r,c.uid),f=l.sourceId,s=i(u),o=l.below=r.belowLookup["trace-"+c.uid];return r.map.addSource(f,{type:"geojson",data:s.geojson}),l._addLayers(s,o),l}},{"../../plots/mapbox/constants":909,"./convert":1057}],1063:[function(h,G,X){"use strict";var i=h("../../lib");G.exports=function(m,b){for(var p=0;p<m.length;p++)m[p].i=p;i.mergeArray(b.text,m,"tx"),i.mergeArray(b.hovertext,m,"htx");var r=b.marker;if(r){i.mergeArray(r.opacity,m,"mo"),i.mergeArray(r.color,m,"mc");var u=r.line;u&&(i.mergeArray(u.color,m,"mlc"),i.mergeArrayCastPositive(u.width,m,"mlw"))}}},{"../../lib":803}],1064:[function(h,G,X){"use strict";var i,m=h("../bar/attributes"),b=h("../scatter/attributes").line,p=h("../../plots/attributes"),r=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,u=h("../../plots/template_attributes").hovertemplateAttrs,c=h("../../plots/template_attributes").texttemplateAttrs,l=h("./constants"),f=h("../../lib/extend").extendFlat,s=h("../../components/color");G.exports={x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:r("x"),yhoverformat:r("y"),hovertext:m.hovertext,hovertemplate:u({},{keys:l.eventDataKeys}),hoverinfo:f({},p.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:c({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),text:m.text,textposition:m.textposition,insidetextanchor:f({},m.insidetextanchor,{dflt:"middle"}),textangle:f({},m.textangle,{dflt:0}),textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:m.outsidetextfont,constraintext:m.constraintext,cliponaxis:m.cliponaxis,orientation:f({},m.orientation,{}),offset:f({},m.offset,{arrayOk:!1}),width:f({},m.width,{arrayOk:!1}),marker:(i=f({},m.marker),delete i.pattern,i),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:f({},b.color,{dflt:s.defaultLine}),width:f({},b.width,{dflt:0,editType:"plot"}),dash:b.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup}},{"../../components/color":666,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../bar/attributes":941,"../scatter/attributes":1218,"./constants":1066}],1065:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes"),m=h("../../plots/cartesian/align_period"),b=h("./arrays_to_calcdata"),p=h("../scatter/calc_selection"),r=h("../../constants/numerical").BADNUM;function u(c){return c===r?0:c}G.exports=function(c,l){var f,s,o,d,g,y,v,_,w=i.getFromId(c,l.xaxis||"x"),x=i.getFromId(c,l.yaxis||"y");"h"===l.orientation?(f=w.makeCalcdata(l,"x"),o=x.makeCalcdata(l,"y"),d=m(l,x,"y",o),g=!!l.yperiodalignment,y="y"):(f=x.makeCalcdata(l,"y"),o=w.makeCalcdata(l,"x"),d=m(l,w,"x",o),g=!!l.xperiodalignment,y="x"),s=d.vals;var E,k=Math.min(s.length,f.length),C=new Array(k);for(l._base=[],v=0;v<k;v++){f[v]<0&&(f[v]=r);var L=!1;f[v]!==r&&v+1<k&&f[v+1]!==r&&(L=!0),_=C[v]={p:s[v],s:f[v],cNext:L},l._base[v]=-.5*_.s,g&&(C[v].orig_p=o[v],C[v][y+"End"]=d.ends[v],C[v][y+"Start"]=d.starts[v]),l.ids&&(_.id=String(l.ids[v])),0===v&&(C[0].vTotal=0),C[0].vTotal+=u(_.s),_.begR=u(_.s)/u(C[0].s)}for(v=0;v<k;v++)(_=C[v]).s!==r&&(_.sumR=_.s/C[0].vTotal,_.difR=void 0!==E?_.s/E:1,E=_.s);return b(C,l),p(C,l),C}},{"../../constants/numerical":779,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"../scatter/calc_selection":1220,"./arrays_to_calcdata":1063}],1066:[function(h,G,X){"use strict";G.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],1067:[function(h,G,X){"use strict";var i=h("../bar/cross_trace_calc").setGroupPositions;G.exports=function(m,b){var p,r,u=m._fullLayout,c=m._fullData,l=m.calcdata,f=b.xaxis,s=b.yaxis,o=[],d=[],g=[];for(r=0;r<c.length;r++){var y=c[r];!0===y.visible&&y.xaxis===f._id&&y.yaxis===s._id&&"funnel"===y.type&&(p=l[r],"h"===y.orientation?g.push(p):d.push(p),o.push(p))}var _={mode:u.funnelmode,norm:u.funnelnorm,gap:u.funnelgap,groupgap:u.funnelgroupgap};for(i(m,f,s,d,_),i(m,s,f,g,_),r=0;r<o.length;r++){p=o[r];for(var w=0;w<p.length;w++)w+1<p.length&&(p[w].nextP0=p[w+1].p0,p[w].nextS0=p[w+1].s0,p[w].nextP1=p[w+1].p1,p[w].nextS1=p[w+1].s1)}}},{"../bar/cross_trace_calc":944}],1068:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../bar/defaults").handleGroupingDefaults,b=h("../bar/defaults").handleText,p=h("../scatter/xy_defaults"),r=h("../scatter/period_defaults"),u=h("./attributes"),c=h("../../components/color");G.exports={supplyDefaults:function(l,f,s,o){function d(_,w){return i.coerce(l,f,u,_,w)}if(p(l,f,o,d)){r(l,f,o,d),d("xhoverformat"),d("yhoverformat"),d("orientation",f.y&&!f.x?"v":"h"),d("offset"),d("width");var g=d("text");d("hovertext"),d("hovertemplate");var y=d("textposition");b(l,f,o,d,y,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===f.textposition||f.texttemplate||d("textinfo",Array.isArray(g)?"text+value":"value");var v=d("marker.color",s);d("marker.line.color",c.defaultLine),d("marker.line.width"),d("connector.visible")&&(d("connector.fillcolor",(w=i.isArrayOrTypedArray(_=v)?"#000":_,c.addOpacity(w,.5*c.opacity(w)))),d("connector.line.width")&&(d("connector.line.color"),d("connector.line.dash")))}else f.visible=!1;var _,w},crossTraceDefaults:function(l,f){var s,o;function d(y){return i.coerce(o._input,o,u,y)}if("group"===f.funnelmode)for(var g=0;g<l.length;g++)s=(o=l[g])._input,m(s,o,f,d)}}},{"../../components/color":666,"../../lib":803,"../bar/defaults":945,"../scatter/period_defaults":1238,"../scatter/xy_defaults":1245,"./attributes":1064}],1069:[function(h,G,X){"use strict";G.exports=function(i,m){return i.x="xVal"in m?m.xVal:m.x,i.y="yVal"in m?m.yVal:m.y,"percentInitial"in m&&(i.percentInitial=m.percentInitial),"percentPrevious"in m&&(i.percentPrevious=m.percentPrevious),"percentTotal"in m&&(i.percentTotal=m.percentTotal),m.xa&&(i.xaxis=m.xa),m.ya&&(i.yaxis=m.ya),i}},{}],1070:[function(h,G,X){"use strict";var i=h("../../components/color").opacity,m=h("../bar/hover").hoverOnBars,b=h("../../lib").formatPercent;G.exports=function(p,r,u,c,l){var k,C,L,P,A,f=m(p,r,u,c,l);if(f){var s=f.cd,o=s[0].trace,g=s[f.index];f[("h"===o.orientation?"x":"y")+"LabelVal"]=g.s,f.percentInitial=g.begR,f.percentInitialLabel=b(g.begR,1),f.percentPrevious=g.difR,f.percentPreviousLabel=b(g.difR,1),f.percentTotal=g.sumR,f.percentTotalLabel=b(g.sumR,1);var y=g.hi||o.hoverinfo,v=[];if(y&&"none"!==y&&"skip"!==y){var _="all"===y,w=y.split("+"),x=function(E){return _||-1!==w.indexOf(E)};x("percent initial")&&v.push(f.percentInitialLabel+" of initial"),x("percent previous")&&v.push(f.percentPreviousLabel+" of previous"),x("percent total")&&v.push(f.percentTotalLabel+" of total")}return f.extraText=v.join("<br>"),f.color=(C=o.marker,P=(k=g).mlc||C.line.color,A=k.mlw||C.line.width,i(L=k.mc||C.color)?L:i(P)&&A?P:void 0),[f]}}},{"../../components/color":666,"../../lib":803,"../bar/hover":948}],1071:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),layoutAttributes:h("./layout_attributes"),supplyDefaults:h("./defaults").supplyDefaults,crossTraceDefaults:h("./defaults").crossTraceDefaults,supplyLayoutDefaults:h("./layout_defaults"),calc:h("./calc"),crossTraceCalc:h("./cross_trace_calc"),plot:h("./plot"),style:h("./style").style,hoverPoints:h("./hover"),eventData:h("./event_data"),selectPoints:h("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:h("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":868,"../bar/select":953,"./attributes":1064,"./calc":1065,"./cross_trace_calc":1067,"./defaults":1068,"./event_data":1069,"./hover":1070,"./layout_attributes":1072,"./layout_defaults":1073,"./plot":1074,"./style":1075}],1072:[function(h,G,X){"use strict";G.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1073:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./layout_attributes");G.exports=function(b,p,r){var u=!1;function c(s,o){return i.coerce(b,p,m,s,o)}for(var l=0;l<r.length;l++){var f=r[l];if(f.visible&&"funnel"===f.type){u=!0;break}}u&&(c("funnelmode"),c("funnelgap",.2),c("funnelgroupgap"))}},{"../../lib":803,"./layout_attributes":1072}],1074:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=h("../../components/drawing"),p=h("../../constants/numerical").BADNUM,r=h("../bar/plot"),u=h("../bar/uniform_text").clearMinTextSize;function c(l,f,s,o){var d=[],g=[],y=o?f:s,v=o?s:f;return d[0]=y.c2p(l.s0,!0),g[0]=v.c2p(l.p0,!0),d[1]=y.c2p(l.s1,!0),g[1]=v.c2p(l.p1,!0),d[2]=y.c2p(l.nextS0,!0),g[2]=v.c2p(l.nextP0,!0),d[3]=y.c2p(l.nextS1,!0),g[3]=v.c2p(l.nextP1,!0),o?[d,g]:[g,d]}G.exports=function(l,f,s,o){var g,y,w,x,d=l._fullLayout;u("funnel",d),g=l,w=(y=f).xaxis,x=y.yaxis,m.makeTraceGroups(o,s,"trace bars").each(function(E){var k=i.select(this),C=E[0].trace,L=m.ensureSingle(k,"g","regions");if(C.connector&&C.connector.visible){var P="h"===C.orientation,A=L.selectAll("g.region").data(m.identity);A.enter().append("g").classed("region",!0),A.exit().remove();var I=A.size();A.each(function(D,R){if(R===I-1||D.cNext){var S=c(D,w,x,P),N=S[0],B=S[1],H="";N[0]!==p&&B[0]!==p&&N[1]!==p&&B[1]!==p&&N[2]!==p&&B[2]!==p&&N[3]!==p&&B[3]!==p&&(H+=P?"M"+N[0]+","+B[1]+"L"+N[2]+","+B[2]+"H"+N[3]+"L"+N[1]+","+B[1]+"Z":"M"+N[1]+","+B[1]+"L"+N[2]+","+B[3]+"V"+B[2]+"L"+N[1]+","+B[0]+"Z"),""===H&&(H="M0,0Z"),m.ensureSingle(i.select(this),"path").attr("d",H).call(b.setClipUrl,y.layerClipId,g)}})}else L.remove()}),function(g,y,v,_){var w=y.xaxis,x=y.yaxis;m.makeTraceGroups(_,v,"trace bars").each(function(E){var k=i.select(this),C=E[0].trace,L=m.ensureSingle(k,"g","lines");if(C.connector&&C.connector.visible&&C.connector.line.width){var P="h"===C.orientation,A=L.selectAll("g.line").data(m.identity);A.enter().append("g").classed("line",!0),A.exit().remove();var I=A.size();A.each(function(D,R){if(R===I-1||D.cNext){var S=c(D,w,x,P),N=S[0],B=S[1],H="";void 0!==N[3]&&void 0!==B[3]&&(P?(H+="M"+N[0]+","+B[1]+"L"+N[2]+","+B[2],H+="M"+N[1]+","+B[1]+"L"+N[3]+","+B[2]):(H+="M"+N[1]+","+B[1]+"L"+N[2]+","+B[3],H+="M"+N[1]+","+B[0]+"L"+N[2]+","+B[2])),""===H&&(H="M0,0Z"),m.ensureSingle(i.select(this),"path").attr("d",H).call(b.setClipUrl,y.layerClipId,g)}})}else L.remove()})}(l,f,s,o),r.plot(l,f,s,o,{mode:d.funnelmode,norm:d.funnelmode,gap:d.funnelgap,groupgap:d.funnelgroupgap})}},{"../../components/drawing":688,"../../constants/numerical":779,"../../lib":803,"../bar/plot":952,"../bar/uniform_text":957,"@plotly/d3":58}],1075:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/drawing"),b=h("../../components/color"),p=h("../../constants/interactions").DESELECTDIM,r=h("../bar/style"),u=h("../bar/uniform_text").resizeText,c=r.styleTextPoints;G.exports={style:function(l,f,s){var o=s||i.select(l).selectAll("g.funnellayer").selectAll("g.trace");u(l,o,"funnel"),o.style("opacity",function(d){return d[0].trace.opacity}),o.each(function(d){var g=i.select(this),y=d[0].trace;g.selectAll(".point > path").each(function(v){if(!v.isBlank){var _=y.marker;i.select(this).call(b.fill,v.mc||_.color).call(b.stroke,v.mlc||_.line.color).call(m.dashLine,_.line.dash,v.mlw||_.line.width).style("opacity",y.selectedpoints&&!v.selected?p:1)}}),c(g,y,l),g.selectAll(".regions").each(function(){i.select(this).selectAll("path").style("stroke-width",0).call(b.fill,y.connector.fillcolor)}),g.selectAll(".lines").each(function(){var v=y.connector.line;m.lineGroupStyle(i.select(this).selectAll("path"),v.width,v.color,v.dash)})})}}},{"../../components/color":666,"../../components/drawing":688,"../../constants/interactions":778,"../bar/style":955,"../bar/uniform_text":957,"@plotly/d3":58}],1076:[function(h,G,X){"use strict";var i=h("../pie/attributes"),m=h("../../plots/attributes"),b=h("../../plots/domain").attributes,p=h("../../plots/template_attributes").hovertemplateAttrs,r=h("../../plots/template_attributes").texttemplateAttrs,u=h("../../lib/extend").extendFlat;G.exports={labels:i.labels,label0:i.label0,dlabel:i.dlabel,values:i.values,marker:{colors:i.marker.colors,line:{color:u({},i.marker.line.color,{dflt:null}),width:u({},i.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:i.text,hovertext:i.hovertext,scalegroup:u({},i.scalegroup,{}),textinfo:u({},i.textinfo,{flags:["label","text","value","percent"]}),texttemplate:r({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:u({},m.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:p({},{keys:["label","color","value","text","percent"]}),textposition:u({},i.textposition,{values:["inside","none"],dflt:"inside"}),textfont:i.textfont,insidetextfont:i.insidetextfont,title:{text:i.title.text,font:i.title.font,position:u({},i.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:b({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":793,"../../plots/attributes":850,"../../plots/domain":882,"../../plots/template_attributes":926,"../pie/attributes":1192}],1077:[function(h,G,X){"use strict";var i=h("../../plots/plots");X.name="funnelarea",X.plot=function(m,b,p,r){i.plotBasePlot(X.name,m,b,p,r)},X.clean=function(m,b,p,r){i.cleanBasePlot(X.name,m,b,p,r)}},{"../../plots/plots":917}],1078:[function(h,G,X){"use strict";var i=h("../pie/calc");G.exports={calc:function(m,b){return i.calc(m,b)},crossTraceCalc:function(m){i.crossTraceCalc(m,{type:"funnelarea"})}}},{"../pie/calc":1194}],1079:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./attributes"),b=h("../../plots/domain").defaults,p=h("../bar/defaults").handleText,r=h("../pie/defaults").handleLabelsAndValues;G.exports=function(u,c,l,f){function s(E,k){return i.coerce(u,c,m,E,k)}var o=s("labels"),d=s("values"),g=r(o,d),y=g.len;if(c._hasLabels=g.hasLabels,c._hasValues=g.hasValues,!c._hasLabels&&c._hasValues&&(s("label0"),s("dlabel")),y){c._length=y,s("marker.line.width")&&s("marker.line.color",f.paper_bgcolor),s("marker.colors"),s("scalegroup");var v,_=s("text"),w=s("texttemplate");if(w||(v=s("textinfo",Array.isArray(_)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),w||v&&"none"!==v){var x=s("textposition");p(u,c,f,s,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}b(c,f,s),s("title.text")&&(s("title.position"),i.coerceFont(s,"title.font",f.font)),s("aspectratio"),s("baseratio")}else c.visible=!1}},{"../../lib":803,"../../plots/domain":882,"../bar/defaults":945,"../pie/defaults":1195,"./attributes":1076}],1080:[function(h,G,X){"use strict";G.exports={moduleType:"trace",name:"funnelarea",basePlotModule:h("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:h("./attributes"),layoutAttributes:h("./layout_attributes"),supplyDefaults:h("./defaults"),supplyLayoutDefaults:h("./layout_defaults"),calc:h("./calc").calc,crossTraceCalc:h("./calc").crossTraceCalc,plot:h("./plot"),style:h("./style"),styleOne:h("../pie/style_one"),meta:{}}},{"../pie/style_one":1203,"./attributes":1076,"./base_plot":1077,"./calc":1078,"./defaults":1079,"./layout_attributes":1081,"./layout_defaults":1082,"./plot":1083,"./style":1084}],1081:[function(h,G,X){"use strict";var i=h("../pie/layout_attributes").hiddenlabels;G.exports={hiddenlabels:i,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":1199}],1082:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./layout_attributes");G.exports=function(b,p){function r(u,c){return i.coerce(b,p,m,u,c)}r("hiddenlabels"),r("funnelareacolorway",p.colorway),r("extendfunnelareacolors")}},{"../../lib":803,"./layout_attributes":1081}],1083:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/drawing"),b=h("../../lib"),p=b.strScale,r=b.strTranslate,u=h("../../lib/svg_text_utils"),c=h("../bar/plot").toMoveInsideBar,l=h("../bar/uniform_text"),f=l.recordMinTextSize,s=l.clearMinTextSize,o=h("../pie/helpers"),d=h("../pie/plot"),g=d.attachFxHandlers,y=d.determineInsideTextFont,v=d.layoutAreas,_=d.prerenderTitles,w=d.positionTitleOutside,x=d.formatSliceLabel;function E(k,C){return"l"+(C[0]-k[0])+","+(C[1]-k[1])}G.exports=function(k,C){var L=k._fullLayout;s("funnelarea",L),_(C,k),v(C,L._size),b.makeTraceGroups(L._funnelarealayer,C,"trace").each(function(P){var A=i.select(this),I=P[0],D=I.trace;(function(R){if(R.length){var S=R[0],N=S.trace,B=N.aspectratio,H=N.baseratio;H>.999&&(H=.999);var Y,q,re,Q=Math.pow(H,2),ne=S.vTotal,ae=ne,te=ne*Q/(1-Q)/ne,V=[];for(V.push(K()),q=R.length-1;q>-1;q--)(re=R[q]).hidden||(te+=re.v/ae,V.push(K()));var Z=1/0,oe=-1/0;for(q=0;q<V.length;q++)Y=V[q],Z=Math.min(Z,Y[1]),oe=Math.max(oe,Y[1]);for(q=0;q<V.length;q++)V[q][1]-=(oe+Z)/2;var ue=S.r,fe=(oe-Z)/2,he=ue/V[V.length-1][0],de=ue/fe*B;for(S.r=de*fe,q=0;q<V.length;q++)V[q][0]*=he,V[q][1]*=de;var ze,je,be=[-(Y=V[0])[0],Y[1]],pe=[Y[0],Y[1]],Te=0;for(q=R.length-1;q>-1;q--)if(!(re=R[q]).hidden){var ye=V[Te+=1][0],ke=V[Te][1];re.TL=[-ye,ke],re.TR=[ye,ke],re.BL=be,re.BR=pe,re.pxmid=[.5*((ze=re.TR)[0]+(je=re.BR)[0]),.5*(ze[1]+je[1])],be=re.TL,pe=re.TR}}function K(){var Ie,Ce={x:Ie=Math.sqrt(te),y:-Ie};return[Ce.x,Ce.y]}})(P),A.each(function(){var R=i.select(this).selectAll("g.slice").data(P);R.enter().append("g").classed("slice",!0),R.exit().remove(),R.each(function(N,B){if(N.hidden)i.select(this).selectAll("path,g").remove();else{N.pointNumber=N.i,N.curveNumber=D.index;var H=I.cx,Y=I.cy,Q=i.select(this),ne=Q.selectAll("path.surface").data([N]);ne.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),Q.call(g,k,P);var ae="M"+(H+N.TR[0])+","+(Y+N.TR[1])+E(N.TR,N.BR)+E(N.BR,N.BL)+E(N.BL,N.TL)+"Z";ne.attr("d",ae),x(k,N,I);var te=o.castOption(D.textposition,N.pts),K=Q.selectAll("g.slicetext").data(N.text&&"none"!==te?[0]:[]);K.enter().append("g").classed("slicetext",!0),K.exit().remove(),K.each(function(){var q=b.ensureSingle(i.select(this),"text","",function(fe){fe.attr("data-notex",1)}),re=b.ensureUniformFontSize(k,y(D,N,L.font));q.text(N.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(m.font,re).call(u.convertToTspans,k);var V,W,Z,oe=m.bBox(q.node()),ie=Math.min(N.BL[1],N.BR[1])+Y,ue=Math.max(N.TL[1],N.TR[1])+Y;W=Math.max(N.TL[0],N.BL[0])+H,Z=Math.min(N.TR[0],N.BR[0])+H,(V=c(W,Z,ie,ue,oe,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=re.size,f(D.type,V,L),P[B].transform=V,q.attr("transform",b.getTextTransform(V))})}});var S=i.select(this).selectAll("g.titletext").data(D.title.text?[0]:[]);S.enter().append("g").classed("titletext",!0),S.exit().remove(),S.each(function(){var N=b.ensureSingle(i.select(this),"text","",function(Y){Y.attr("data-notex",1)}),B=D.title.text;D._meta&&(B=b.templateString(B,D._meta)),N.text(B).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(m.font,D.title.font).call(u.convertToTspans,k);var H=w(I,L._size);N.attr("transform",r(H.x,H.y)+p(Math.min(1,H.scale))+r(H.tx,H.ty))})})})}},{"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../bar/plot":952,"../bar/uniform_text":957,"../pie/helpers":1197,"../pie/plot":1201,"@plotly/d3":58}],1084:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../pie/style_one"),b=h("../bar/uniform_text").resizeText;G.exports=function(p){var r=p._fullLayout._funnelarealayer.selectAll(".trace");b(p,r,"funnelarea"),r.each(function(u){var c=u[0].trace,l=i.select(this);l.style({opacity:c.opacity}),l.selectAll("path.surface").each(function(f){i.select(this).call(m,f,c)})})}},{"../bar/uniform_text":957,"../pie/style_one":1203,"@plotly/d3":58}],1085:[function(h,G,X){"use strict";var i=h("../scatter/attributes"),m=h("../../plots/attributes"),b=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,p=h("../../plots/template_attributes").hovertemplateAttrs,r=h("../../components/colorscale/attributes"),u=h("../../lib/extend").extendFlat;G.exports=u({z:{valType:"data_array",editType:"calc"},x:u({},i.x,{impliedEdits:{xtype:"array"}}),x0:u({},i.x0,{impliedEdits:{xtype:"scaled"}}),dx:u({},i.dx,{impliedEdits:{xtype:"scaled"}}),y:u({},i.y,{impliedEdits:{ytype:"array"}}),y0:u({},i.y0,{impliedEdits:{ytype:"scaled"}}),dy:u({},i.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:u({},i.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:u({},i.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:u({},i.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:u({},i.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:u({},i.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:u({},i.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:p(),showlegend:u({},m.showlegend,{dflt:!1})},{transforms:void 0},r("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1086:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../lib"),b=h("../../plots/cartesian/axes"),p=h("../../plots/cartesian/align_period"),r=h("../histogram2d/calc"),u=h("../../components/colorscale/calc"),c=h("./convert_column_xyz"),l=h("./clean_2d_array"),f=h("./interp2d"),s=h("./find_empties"),o=h("./make_bound_array"),d=h("../../constants/numerical").BADNUM;function g(y){for(var v=[],_=y.length,w=0;w<_;w++){var x=y[w];x!==d&&v.push(x)}return v}G.exports=function(y,v){var _,w,x,E,k,C,L,P,A,I,D,R=b.getFromId(y,v.xaxis||"x"),S=b.getFromId(y,v.yaxis||"y"),N=i.traceIs(v,"contour"),B=i.traceIs(v,"histogram"),H=i.traceIs(v,"gl2d"),Y=N?"best":v.zsmooth;if(R._minDtick=0,S._minDtick=0,B)E=(D=r(y,v)).orig_x,_=D.x,w=D.x0,x=D.dx,P=D.orig_y,k=D.y,C=D.y0,L=D.dy,A=D.z;else{var Q=v.z;m.isArray1D(Q)?(c(v,R,S,"x","y",["z"]),_=v._x,k=v._y,Q=v._z):(E=v.x?R.makeCalcdata(v,"x"):[],P=v.y?S.makeCalcdata(v,"y"):[],_=p(v,R,"x",E).vals,k=p(v,S,"y",P).vals,v._x=_,v._y=k),w=v.x0,x=v.dx,C=v.y0,L=v.dy,A=l(Q,v,R,S)}function ne(fe){Y=v._input.zsmooth=v.zsmooth=!1,m.warn('cannot use zsmooth: "fast": '+fe)}if((R.rangebreaks||S.rangebreaks)&&(A=function(fe,he,de){for(var be=[],pe=-1,Te=0;Te<de.length;Te++)if(he[Te]!==d){be[++pe]=[];for(var ye=0;ye<de[Te].length;ye++)fe[ye]!==d&&be[pe].push(de[Te][ye])}return be}(_,k,A),B||(_=g(_),k=g(k),v._x=_,v._y=k)),B||!N&&!v.connectgaps||(v._emptypoints=s(A),f(A,v._emptypoints)),"fast"===Y)if("log"===R.type||"log"===S.type)ne("log axis found");else if(!B){if(_.length){var ae=(_[_.length-1]-_[0])/(_.length-1),te=Math.abs(ae/100);for(I=0;I<_.length-1;I++)if(Math.abs(_[I+1]-_[I]-ae)>te){ne("x scale is not linear");break}}if(k.length&&"fast"===Y){var K=(k[k.length-1]-k[0])/(k.length-1),q=Math.abs(K/100);for(I=0;I<k.length-1;I++)if(Math.abs(k[I+1]-k[I]-K)>q){ne("y scale is not linear");break}}}var re=m.maxRowLength(A),V="scaled"===v.xtype?"":_,W=o(v,V,w,x,re,R),Z="scaled"===v.ytype?"":k,oe=o(v,Z,C,L,A.length,S);H||(v._extremes[R._id]=b.findExtremes(R,W),v._extremes[S._id]=b.findExtremes(S,oe));var ie={x:W,y:oe,z:A,text:v._text||v.text,hovertext:v._hovertext||v.hovertext};if(v.xperiodalignment&&E&&(ie.orig_x=E),v.yperiodalignment&&P&&(ie.orig_y=P),V&&V.length===W.length-1&&(ie.xCenter=V),Z&&Z.length===oe.length-1&&(ie.yCenter=Z),B&&(ie.xRanges=D.xRanges,ie.yRanges=D.yRanges,ie.pts=D.pts),N||u(y,v,{vals:A,cLetter:"z"}),N&&v.contours&&"heatmap"===v.contours.coloring){var ue={type:"contour"===v.type?"heatmap":"histogram2d",xcalendar:v.xcalendar,ycalendar:v.ycalendar};ie.xfill=o(ue,V,w,x,re,R),ie.yfill=o(ue,Z,C,L,A.length,S)}return[ie]}},{"../../components/colorscale/calc":674,"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"../../registry":931,"../histogram2d/calc":1118,"./clean_2d_array":1087,"./convert_column_xyz":1089,"./find_empties":1091,"./interp2d":1094,"./make_bound_array":1095}],1087:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib"),b=h("../../constants/numerical").BADNUM;G.exports=function(p,r,u,c){var l,f,s,o,d,g;function y(k){if(i(k))return+k}if(r&&r.transpose){for(l=0,d=0;d<p.length;d++)l=Math.max(l,p[d].length);if(0===l)return!1;s=function(k){return k.length},o=function(k,C,L){return(k[L]||[])[C]}}else l=p.length,s=function(k,C){return k[C].length},o=function(k,C,L){return(k[C]||[])[L]};function _(k){if(r&&"carpet"!==r.type&&"contourcarpet"!==r.type&&k&&"category"===k.type&&r["_"+k._id.charAt(0)].length){var C=k._id.charAt(0),L={},P=r["_"+C+"CategoryMap"]||r[C];for(d=0;d<P.length;d++)L[P[d]]=d;return function(A){var I=L[k._categories[A]];return I+1?I:b}}return m.identity}var w=_(u),x=_(c);c&&"category"===c.type&&(l=c._categories.length);var k,C,L,E=new Array(l);for(d=0;d<l;d++)for(f=u&&"category"===u.type?u._categories.length:s(p,d),E[d]=new Array(f),g=0;g<f;g++)E[d][g]=y((k=p,C=x(d),L=w(g),C===b||L===b?b:o(k,C,L)));return E}},{"../../constants/numerical":779,"../../lib":803,"fast-isnumeric":249}],1088:[function(h,G,X){"use strict";G.exports={min:"zmin",max:"zmax"}},{}],1089:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../constants/numerical").BADNUM,b=h("../../plots/cartesian/align_period");G.exports=function(p,r,u,c,l,f){var s=p._length,o=r.makeCalcdata(p,c),d=u.makeCalcdata(p,l);o=b(p,r,c,o).vals,d=b(p,u,l,d).vals;var g,y,v,_,w=p.text,x=void 0!==w&&i.isArray1D(w),E=p.hovertext,k=void 0!==E&&i.isArray1D(E),C=i.distinctVals(o),L=C.vals,P=i.distinctVals(d),A=P.vals,I=[],D=A.length,R=L.length;for(g=0;g<f.length;g++)I[g]=i.init2dArray(D,R);x&&(v=i.init2dArray(D,R)),k&&(_=i.init2dArray(D,R));var S=i.init2dArray(D,R);for(g=0;g<s;g++)if(o[g]!==m&&d[g]!==m){var N=i.findBin(o[g]+C.minDiff/2,L),B=i.findBin(d[g]+P.minDiff/2,A);for(y=0;y<f.length;y++)I[y][B][N]=p[f[y]][g],S[B][N]=g;x&&(v[B][N]=w[g]),k&&(_[B][N]=E[g])}for(p["_"+c]=L,p["_"+l]=A,y=0;y<f.length;y++)p["_"+f[y]]=I[y];x&&(p._text=v),k&&(p._hovertext=_),r&&"category"===r.type&&(p["_"+c+"CategoryMap"]=L.map(function(Y){return r._categories[Y]})),u&&"category"===u.type&&(p["_"+l+"CategoryMap"]=A.map(function(Y){return u._categories[Y]})),p._after2before=S}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851}],1090:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./xyz_defaults"),b=h("../scatter/period_defaults"),p=h("./style_defaults"),r=h("../../components/colorscale/defaults"),u=h("./attributes");G.exports=function(c,l,f,s){function o(d,g){return i.coerce(c,l,u,d,g)}m(c,l,o,s)?(b(c,l,s,o),o("xhoverformat"),o("yhoverformat"),o("text"),o("hovertext"),o("hovertemplate"),p(c,l,o,s),o("hoverongaps"),o("connectgaps",i.isArray1D(l.z)&&!1!==l.zsmooth),r(c,l,s,o,{prefix:"",cLetter:"z"})):l.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"../scatter/period_defaults":1238,"./attributes":1085,"./style_defaults":1098,"./xyz_defaults":1099}],1091:[function(h,G,X){"use strict";var i=h("../../lib").maxRowLength;G.exports=function(m){var b,p,r,u,c,l,f,s,o=[],d={},g=[],y=m[0],v=[],_=[0,0,0],w=i(m);for(p=0;p<m.length;p++)for(b=v,v=y,y=m[p+1]||[],r=0;r<w;r++)void 0===v[r]&&((l=(void 0!==v[r-1]?1:0)+(void 0!==v[r+1]?1:0)+(void 0!==b[r]?1:0)+(void 0!==y[r]?1:0))?(0===p&&l++,0===r&&l++,p===m.length-1&&l++,r===v.length-1&&l++,l<4&&(d[[p,r]]=[p,r,l]),o.push([p,r,l])):g.push([p,r]));for(;g.length;){for(f={},s=!1,c=g.length-1;c>=0;c--)(l=((d[[(p=(u=g[c])[0])-1,r=u[1]]]||_)[2]+(d[[p+1,r]]||_)[2]+(d[[p,r-1]]||_)[2]+(d[[p,r+1]]||_)[2])/20)&&(f[u]=[p,r,l],g.splice(c,1),s=!0);if(!s)throw"findEmpties iterated with no new neighbors";for(u in f)d[u]=f[u],o.push(f[u])}return o.sort(function(x,E){return E[2]-x[2]})}},{"../../lib":803}],1092:[function(h,G,X){"use strict";var i=h("../../components/fx"),m=h("../../lib"),b=h("../../plots/cartesian/axes"),p=h("../../components/colorscale").extractOpts;G.exports=function(r,u,c,l,f){f||(f={});var s,o,d,g,y=f.isContour,v=r.cd[0],_=v.trace,w=r.xa,x=r.ya,E=v.x,k=v.y,C=v.z,L=v.xCenter,P=v.yCenter,A=v.zmask,I=_.zhoverformat,D=E,R=k;if(!1!==r.index){try{d=Math.round(r.index[1]),g=Math.round(r.index[0])}catch(V){return void m.error("Error hovering on heatmap, pointNumber must be [row,col], found:",r.index)}if(d<0||d>=C[0].length||g<0||g>C.length)return}else{if(i.inbox(u-E[0],u-E[E.length-1],0)>0||i.inbox(c-k[0],c-k[k.length-1],0)>0)return;if(y){var S;for(D=[2*E[0]-E[1]],S=1;S<E.length;S++)D.push((E[S]+E[S-1])/2);for(D.push([2*E[E.length-1]-E[E.length-2]]),R=[2*k[0]-k[1]],S=1;S<k.length;S++)R.push((k[S]+k[S-1])/2);R.push([2*k[k.length-1]-k[k.length-2]])}d=Math.max(0,Math.min(D.length-2,m.findBin(u,D))),g=Math.max(0,Math.min(R.length-2,m.findBin(c,R)))}var N,B,H=w.c2p(E[d]),Y=w.c2p(E[d+1]),Q=x.c2p(k[g]),ne=x.c2p(k[g+1]);y?(Y=H,s=(N=v.orig_x||E)[d],ne=Q,o=(B=v.orig_y||k)[g]):(N=v.orig_x||L||E,B=v.orig_y||P||k,s=L?N[d]:(N[d]+N[d+1])/2,o=P?B[g]:(B[g]+B[g+1])/2,w&&"category"===w.type&&(s=E[d]),x&&"category"===x.type&&(o=k[g]),_.zsmooth&&(H=Y=w.c2p(s),Q=ne=x.c2p(o)));var ae=C[g][d];if(A&&!A[g][d]&&(ae=void 0),void 0!==ae||_.hoverongaps){var te;Array.isArray(v.hovertext)&&Array.isArray(v.hovertext[g])?te=v.hovertext[g][d]:Array.isArray(v.text)&&Array.isArray(v.text[g])&&(te=v.text[g][d]);var K=p(_),re=b.tickText({type:"linear",range:[K.min,K.max],hoverformat:I,_separators:w._separators,_numFormat:w._numFormat},ae,"hover").text;return[m.extendFlat(r,{index:_._after2before?_._after2before[g][d]:[g,d],distance:r.maxHoverDistance,spikeDistance:r.maxSpikeDistance,x0:H,x1:Y,y0:Q,y1:ne,xLabelVal:s,yLabelVal:o,zLabelVal:ae,zLabel:re,text:te})]}}},{"../../components/colorscale":678,"../../components/fx":706,"../../lib":803,"../../plots/cartesian/axes":854}],1093:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),calc:h("./calc"),plot:h("./plot"),colorbar:h("./colorbar"),style:h("./style"),hoverPoints:h("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:h("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":868,"./attributes":1085,"./calc":1086,"./colorbar":1088,"./defaults":1090,"./hover":1092,"./plot":1096,"./style":1097}],1094:[function(h,G,X){"use strict";var i=h("../../lib"),m=[[-1,0],[1,0],[0,-1],[0,1]];function b(r){return.5-.25*Math.min(1,.5*r)}function p(r,u,c){var l,f,s,o,d,g,y,v,_,w,x,E,k,C=0;for(o=0;o<u.length;o++){for(x=r[f=(l=u[o])[0]][s=l[1]],w=0,_=0,d=0;d<4;d++)(y=r[f+(g=m[d])[0]])&&void 0!==(v=y[s+g[1]])&&(0===w?E=k=v:(E=Math.min(E,v),k=Math.max(k,v)),_++,w+=v);if(0===_)throw"iterateInterp2d order is wrong: no defined neighbors";r[f][s]=w/_,void 0===x?_<4&&(C=1):(r[f][s]=(1+c)*r[f][s]-c*x,k>E&&(C=Math.max(C,Math.abs(r[f][s]-x)/(k-E))))}return C}G.exports=function(r,u){var c,l=1;for(p(r,u),c=0;c<u.length&&!(u[c][2]<4);c++);for(u=u.slice(c),c=0;c<100&&l>.01;c++)l=p(r,u,b(l));return l>.01&&i.log("interp2d didn't converge quickly",l),r}},{"../../lib":803}],1095:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../lib").isArrayOrTypedArray;G.exports=function(b,p,r,u,c,l){var f,s,o,d=[],g=i.traceIs(b,"contour"),y=i.traceIs(b,"histogram"),v=i.traceIs(b,"gl2d");if(m(p)&&p.length>1&&!y&&"category"!==l.type){var _=p.length;if(!(_<=c))return p.slice(0,g?c:c+1);if(g||v)d=p.slice(0,c);else if(1===c)d=[p[0]-.5,p[0]+.5];else{for(d=[1.5*p[0]-.5*p[1]],o=1;o<_;o++)d.push(.5*(p[o-1]+p[o]));d.push(1.5*p[_-1]-.5*p[_-2])}if(_<c){var w=d[d.length-1],x=w-d[d.length-2];for(o=_;o<c;o++)d.push(w+=x)}}else{var E=b[l._id.charAt(0)+"calendar"];for(f=y?l.r2c(r,0,E):m(p)&&1===p.length?p[0]:void 0===r?0:("log"===l.type?l.d2c:l.r2c)(r,0,E),s=u||1,o=g||v?0:-.5;o<c;o++)d.push(f+s*o)}return d}},{"../../lib":803,"../../registry":931}],1096:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("tinycolor2"),b=h("../../registry"),p=h("../../lib"),r=h("../../components/colorscale").makeColorScaleFuncFromTrace,u=h("../../constants/xmlns_namespaces");function c(s,o){var d=o.length-2,g=p.constrain(p.findBin(s,o),0,d),y=o[g],_=p.constrain(g+(s-y)/(o[g+1]-y)-.5,0,d),w=Math.round(_),x=Math.abs(_-w);return _&&_!==d&&x?{bin0:w,frac:x,bin1:Math.round(w+x/(_-w))}:{bin0:w,bin1:w,frac:0}}function l(s,o){var d=o.length-1,g=p.constrain(p.findBin(s,o),0,d),y=o[g],v=(s-y)/(o[g+1]-y)||0;return v<=0?{bin0:g,bin1:g,frac:0}:v<.5?{bin0:g,bin1:g+1,frac:v}:{bin0:g+1,bin1:g,frac:1-v}}function f(s,o,d){s[o]=d[0],s[o+1]=d[1],s[o+2]=d[2],s[o+3]=Math.round(255*d[3])}G.exports=function(s,o,d,g){var y=o.xaxis,v=o.yaxis;p.makeTraceGroups(g,d,"hm").each(function(_){var w,x,E,k,C,L,P=i.select(this),A=_[0],I=A.trace,D=A.z,R=A.x,S=A.y,N=A.xCenter,B=A.yCenter,H=b.traceIs(I,"contour"),Y=H?"best":I.zsmooth,Q=D.length,ne=p.maxRowLength(D),ae=!1,te=!1;for(L=0;void 0===w&&L<R.length-1;)w=y.c2p(R[L]),L++;for(L=R.length-1;void 0===x&&L>0;)x=y.c2p(R[L]),L--;for(x<w&&(E=x,x=w,w=E,ae=!0),L=0;void 0===k&&L<S.length-1;)k=v.c2p(S[L]),L++;for(L=S.length-1;void 0===C&&L>0;)C=v.c2p(S[L]),L--;if(C<k&&(E=k,k=C,C=E,te=!0),H&&(N=R,B=S,R=A.xfill,S=A.yfill),"fast"!==Y){var K="best"===Y?0:.5;w=Math.max(-K*y._length,w),x=Math.min((1+K)*y._length,x),k=Math.max(-K*v._length,k),C=Math.min((1+K)*v._length,C)}var q=Math.round(x-w),re=Math.round(C-k);if(q<=0||re<=0)P.selectAll("image").data([]).exit().remove();else{var V,W;"fast"===Y?(V=ne,W=Q):(V=q,W=re);var Z=document.createElement("canvas");Z.width=V,Z.height=W;var oe,ie,ue=Z.getContext("2d"),fe=r(I,{noNumericCheck:!0,returnArray:!0});"fast"===Y?(oe=ae?function(qt){return ne-1-qt}:p.identity,ie=te?function(qt){return Q-1-qt}:p.identity):(oe=function(qt){return p.constrain(Math.round(y.c2p(R[qt])-w),0,q)},ie=function(qt){return p.constrain(Math.round(v.c2p(S[qt])-k),0,re)});var he,de,be,pe,Te,ye=ie(0),ke=[ye,ye],ze=ae?0:1,je=te?0:1,Ie=0,Ce=0,_e=0,we=0;if(Y){var Se,Oe=0;try{Se=new Uint8Array(q*re*4)}catch(qt){Se=new Array(q*re*4)}if("best"===Y){var Be,He,Xe,nt=N||R,et=B||S,qe=new Array(nt.length),Ye=new Array(et.length),ot=new Array(q),at=N?l:c,ct=B?l:c;for(L=0;L<nt.length;L++)qe[L]=Math.round(y.c2p(nt[L])-w);for(L=0;L<et.length;L++)Ye[L]=Math.round(v.c2p(et[L])-k);for(L=0;L<q;L++)ot[L]=at(L,qe);for(de=0;de<re;de++)for(He=D[(Be=ct(de,Ye)).bin0],Xe=D[Be.bin1],L=0;L<q;L++,Oe+=4)f(Se,Oe,Te=it(He,Xe,ot[L],Be))}else for(de=0;de<Q;de++)for(pe=D[de],ke=ie(de),L=0;L<q;L++)Te=We(pe[L],1),f(Se,Oe=4*(ke*q+oe(L)),Te);var _t=ue.createImageData(q,re);try{_t.data.set(Se)}catch(qt){var xt=_t.data,Ht=xt.length;for(de=0;de<Ht;de++)xt[de]=Se[de]}ue.putImageData(_t,0,0)}else{var At=I.xgap,ht=I.ygap,st=Math.floor(At/2),Bt=Math.floor(ht/2);for(de=0;de<Q;de++)if(pe=D[de],ke.reverse(),ke[je]=ie(de+1),ke[0]!==ke[1]&&void 0!==ke[0]&&void 0!==ke[1])for(he=[be=oe(0),be],L=0;L<ne;L++)he.reverse(),he[ze]=oe(L+1),he[0]!==he[1]&&void 0!==he[0]&&void 0!==he[1]&&(Te=We(pe[L],(he[1]-he[0])*(ke[1]-ke[0])),ue.fillStyle="rgba("+Te.join(",")+")",ue.fillRect(he[0]+st,ke[0]+Bt,he[1]-he[0]-At,ke[1]-ke[0]-ht))}Ce=Math.round(Ce/Ie),_e=Math.round(_e/Ie),we=Math.round(we/Ie);var gn=m("rgb("+Ce+","+_e+","+we+")");s._hmpixcount=(s._hmpixcount||0)+Ie,s._hmlumcount=(s._hmlumcount||0)+Ie*gn.getLuminance();var hn=P.selectAll("image").data(_);hn.enter().append("svg:image").attr({xmlns:u.svg,preserveAspectRatio:"none"}),hn.attr({height:re,width:q,x:w,y:k,"xlink:href":Z.toDataURL("image/png")})}function We(qt,Ge){if(void 0!==qt){var Pe=fe(qt);return Pe[0]=Math.round(Pe[0]),Pe[1]=Math.round(Pe[1]),Pe[2]=Math.round(Pe[2]),Ie+=Ge,Ce+=Pe[0]*Ge,_e+=Pe[1]*Ge,we+=Pe[2]*Ge,Pe}return[0,0,0,0]}function it(qt,Ge,Pe,Ee){var Ne=qt[Pe.bin0];if(void 0===Ne)return We(void 0,1);var Ke=qt[Pe.bin1],bt=Ge[Pe.bin0],gt=Ge[Pe.bin1];return We(Ne+Pe.frac*(Ke-Ne||0)+Ee.frac*((bt-Ne||0)+Pe.frac*(void 0===Ke?void 0===gt?0:void 0===bt?2*(gt-Ne):2*(2*gt-bt-Ne)/3:void 0===gt?void 0===bt?0:2*(2*Ne-Ke-bt)/3:void 0===bt?2*(2*gt-Ke-Ne)/3:gt+Ne-Ke-bt)))}})}},{"../../components/colorscale":678,"../../constants/xmlns_namespaces":780,"../../lib":803,"../../registry":931,"@plotly/d3":58,tinycolor2:598}],1097:[function(h,G,X){"use strict";var i=h("@plotly/d3");G.exports=function(m){i.select(m).selectAll(".hm image").style("opacity",function(b){return b.trace.opacity})}},{"@plotly/d3":58}],1098:[function(h,G,X){"use strict";G.exports=function(i,m,b){!1===b("zsmooth")&&(b("xgap"),b("ygap")),b("zhoverformat")}},{}],1099:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib"),b=h("../../registry");function p(r,u){var c=u(r);return"scaled"===(c?u(r+"type","array"):"scaled")&&(u(r+"0"),u("d"+r)),c}G.exports=function(r,u,c,l,f,s){var o,d,g=c("z");if(f=f||"x",s=s||"y",void 0===g||!g.length)return 0;if(m.isArray1D(r.z)){o=c(f),d=c(s);var y=m.minRowLength(o),v=m.minRowLength(d);if(0===y||0===v)return 0;u._length=Math.min(y,v,g.length)}else{if(o=p(f,c),d=p(s,c),!function(_){for(var w,x=!0,E=!1,k=!1,C=0;C<_.length;C++){if(!m.isArrayOrTypedArray(w=_[C])){x=!1;break}w.length>0&&(E=!0);for(var L=0;L<w.length;L++)if(i(w[L])){k=!0;break}}return x&&E&&k}(g))return 0;c("transpose"),u._length=null}return"heatmapgl"===r.type||b.getComponentMethod("calendars","handleTraceDefaults")(r,u,[f,s],l),!0}},{"../../lib":803,"../../registry":931,"fast-isnumeric":249}],1100:[function(h,G,X){"use strict";for(var i=h("../heatmap/attributes"),m=h("../../components/colorscale/attributes"),b=h("../../lib/extend").extendFlat,p=h("../../plot_api/edit_types").overrideAll,r=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],u={},c=0;c<r.length;c++){var l=r[c];u[l]=i[l]}u.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},b(u,m("",{cLetter:"z",autoColorDflt:!1})),G.exports=p(u,"calc","nested")},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/edit_types":836,"../heatmap/attributes":1085}],1101:[function(h,G,X){"use strict";var i=h("gl-heatmap2d"),m=h("../../plots/cartesian/axes"),b=h("../../lib/str2rgbarray");function p(u,c){this.scene=u,this.uid=c,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=i(u.glplot,this.options),this.heatmap._trace=this}var r=p.prototype;r.handlePick=function(u){var c=this.options,l=c.shape,f=u.pointId,s=f%l[0],o=Math.floor(f/l[0]);return{trace:this,dataCoord:u.dataCoord,traceCoord:[c.x[s],c.y[o],c.z[f]],textLabel:this.textLabels[f],name:this.name,pointIndex:[o,s],hoverinfo:this.hoverinfo}},r.update=function(u,c){var l=c[0];this.index=u.index,this.name=u.name,this.hoverinfo=u.hoverinfo;var f=l.z;this.options.z=[].concat.apply([],f),this.options.shape=[f[0].length,f.length],this.options.x=l.x,this.options.y=l.y,this.options.zsmooth=u.zsmooth;var d=function(w){for(var x=w.colorscale,E=w.zmin,k=w.zmax,C=x.length,L=new Array(C),P=new Array(4*C),A=0;A<C;A++){var I=x[A],D=b(I[1]);L[A]=E+I[0]*(k-E);for(var R=0;R<4;R++)P[4*A+R]=D[R]}return{colorLevels:L,colorValues:P}}(u);this.options.colorLevels=d.colorLevels,this.options.colorValues=d.colorValues,this.textLabels=[].concat.apply([],u.text),this.heatmap.update(this.options);var g,y,v=this.scene.xaxis,_=this.scene.yaxis;!1===u.zsmooth&&(g={ppad:l.x[1]-l.x[0]},y={ppad:l.y[1]-l.y[0]}),u._extremes[v._id]=m.findExtremes(v,l.x,g),u._extremes[_._id]=m.findExtremes(_,l.y,y)},r.dispose=function(){this.heatmap.dispose()},G.exports=function(u,c,l){var f=new p(u,c.uid);return f.update(c,l),f}},{"../../lib/str2rgbarray":828,"../../plots/cartesian/axes":854,"gl-heatmap2d":278}],1102:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../heatmap/xyz_defaults"),b=h("../../components/colorscale/defaults"),p=h("./attributes");G.exports=function(r,u,c,l){function f(s,o){return i.coerce(r,u,p,s,o)}m(r,u,f,l)?(f("text"),f("zsmooth"),b(r,u,l,f,{prefix:"",cLetter:"z"})):u.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"../heatmap/xyz_defaults":1099,"./attributes":1100}],1103:[function(h,G,X){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),colorbar:h("../heatmap/colorbar"),calc:h("../heatmap/calc"),plot:h("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:h("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":894,"../heatmap/calc":1086,"../heatmap/colorbar":1088,"./attributes":1100,"./convert":1101,"./defaults":1102}],1104:[function(h,G,X){"use strict";var i=h("../bar/attributes"),m=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=h("../../plots/template_attributes").hovertemplateAttrs,p=h("./bin_attributes"),r=h("./constants"),u=h("../../lib/extend").extendFlat;G.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:m("x"),yhoverformat:m("y"),text:u({},i.text,{}),hovertext:u({},i.hovertext,{}),orientation:i.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:p("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:p("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:b({},{keys:r.eventDataKeys}),marker:i.marker,offsetgroup:i.offsetgroup,alignmentgroup:i.alignmentgroup,selected:i.selected,unselected:i.unselected,_deprecated:{bardir:i._deprecated.bardir}}},{"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../bar/attributes":941,"./bin_attributes":1106,"./constants":1110}],1105:[function(h,G,X){"use strict";G.exports=function(i,m){for(var b=i.length,p=0,r=0;r<b;r++)m[r]?(i[r]/=m[r],p+=i[r]):i[r]=null;return p}},{}],1106:[function(h,G,X){"use strict";G.exports=function(i,m){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],1107:[function(h,G,X){"use strict";var i=h("fast-isnumeric");G.exports={count:function(m,b,p){return p[m]++,1},sum:function(m,b,p,r){var u=r[b];return i(u)?(u=Number(u),p[m]+=u,u):0},avg:function(m,b,p,r,u){var c=r[b];return i(c)&&(c=Number(c),p[m]+=c,u[m]++),0},min:function(m,b,p,r){var u=r[b];if(i(u)){if(u=Number(u),!i(p[m]))return p[m]=u,u;if(p[m]>u){var c=u-p[m];return p[m]=u,c}}return 0},max:function(m,b,p,r){var u=r[b];if(i(u)){if(u=Number(u),!i(p[m]))return p[m]=u,u;if(p[m]<u){var c=u-p[m];return p[m]=u,c}}return 0}}},{"fast-isnumeric":249}],1108:[function(h,G,X){"use strict";var i=h("../../constants/numerical"),m=i.ONEAVGYEAR,b=i.ONEAVGMONTH,p=i.ONEDAY,r=i.ONEHOUR,u=i.ONEMIN,c=i.ONESEC,l=h("../../plots/cartesian/axes").tickIncrement;function f(g,y,v,_){if(g*y<=0)return 1/0;for(var w=Math.abs(y-g),x="date"===v.type,E=s(w,x),k=0;k<10;k++){var C=s(80*E,x);if(E===C||!o(C,g,y,x,v,_))break;E=C}return E}function s(g,y){return y&&g>c?g>p?g>1.1*m?m:g>1.1*b?b:p:g>r?r:g>u?u:c:Math.pow(10,Math.floor(Math.log(g)/Math.LN10))}function o(g,y,v,_,w,x){if(_&&g>p){var E=d(y,w,x),k=d(v,w,x),C=g===m?0:1;return E[C]!==k[C]}return Math.floor(v/g)-Math.floor(y/g)>.1}function d(g,y,v){var _=y.c2d(g,m,v).split("-");return""===_[0]&&(_.unshift(),_[0]="-"+_[0]),_}G.exports=function(g,y,v,_,w){var x,E,k=-1.1*y,C=-.1*y,L=g-C,P=v[0],A=v[1],I=Math.min(f(P+C,P+L,_,w),f(A+C,A+L,_,w)),D=Math.min(f(P+k,P+C,_,w),f(A+k,A+C,_,w));if(I>D&&D<Math.abs(A-P)/4e3?(x=I,E=!1):(x=Math.min(I,D),E=!0),"date"===_.type&&x>p){var R=x===m?1:6,S=x===m?"M12":"M1";return function(N,B){var H=_.c2d(N,m,w),Y=H.indexOf("-",R);Y>0&&(H=H.substr(0,Y));var Q=_.d2c(H,0,w);if(Q<N){var ne=l(Q,S,!1,w);(Q+ne)/2<N+g&&(Q=ne)}return B&&E?l(Q,S,!0,w):Q}}return function(N,B){var H=x*Math.round(N/x);return H+x/10<N&&H+.9*x<N+g&&(H+=x),B&&E&&(H-=x),H}}},{"../../constants/numerical":779,"../../plots/cartesian/axes":854}],1109:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib"),b=h("../../registry"),p=h("../../plots/cartesian/axes"),r=h("../bar/arrays_to_calcdata"),u=h("./bin_functions"),c=h("./norm_functions"),l=h("./average"),f=h("./bin_label_vals");function s(o,d,g,y,v){var _,w,x,E,k,C,L,P=y+"bins",A=o._fullLayout,D=A._histogramBinOpts[d["_"+y+"bingroup"]],R="overlay"===A.barmode,S=function(ye){return g.r2c(ye,0,E)},N=function(ye){return g.c2r(ye,0,E)},B="date"===g.type?function(ye){return ye||0===ye?m.cleanDate(ye,null,E):null}:function(ye){return i(ye)?Number(ye):null};function H(ye,ke,ze){ke[ye+"Found"]?(ke[ye]=B(ke[ye]),null===ke[ye]&&(ke[ye]=ze[ye])):(C[ye]=ke[ye]=ze[ye],m.nestedProperty(w[0],P+"."+ye).set(ze[ye]))}if(d["_"+y+"autoBinFinished"])delete d["_"+y+"autoBinFinished"];else{w=D.traces;var Y=[],Q=!0,ne=!1,ae=!1;for(_=0;_<w.length;_++)if((x=w[_]).visible){var te=D.dirs[_];k=x["_"+te+"pos0"]=g.makeCalcdata(x,te),Y=m.concat(Y,k),delete x["_"+y+"autoBinFinished"],!0===d.visible&&(Q?Q=!1:(delete x._autoBin,x["_"+y+"autoBinFinished"]=1),b.traceIs(x,"2dMap")&&(ne=!0),"histogram2dcontour"===x.type&&(ae=!0))}var K=p.autoBin(Y,g,D.nbins,ne,E=w[0][y+"calendar"],D.sizeFound&&D.size),q=w[0]._autoBin={};if(C=q[D.dirs[0]]={},ae&&(D.size||(K.start=N(p.tickIncrement(S(K.start),K.size,!0,E))),void 0===D.end&&(K.end=N(p.tickIncrement(S(K.end),K.size,!1,E)))),R&&!b.traceIs(d,"2dMap")&&0===K._dataSpan&&"category"!==g.type&&"multicategory"!==g.type){if(v)return[K,k,!0];K=function(ye,ke,ze,je,Ie){var Ce,_e,we,Se=ye._fullLayout,Oe=function(xt,Ht){for(var At=Ht.xaxis,ht=Ht.yaxis,st=Ht.orientation,Bt=[],gn=xt._fullData,hn=0;hn<gn.length;hn++){var We=gn[hn];"histogram"===We.type&&!0===We.visible&&We.orientation===st&&We.xaxis===At&&We.yaxis===ht&&Bt.push(We)}return Bt}(ye,ke),Be=!1,He=1/0,Xe=[ke];for(Ce=0;Ce<Oe.length;Ce++)if((_e=Oe[Ce])===ke)Be=!0;else if(Be){var nt=s(ye,_e,ze,je,!0),et=nt[0],qe=nt[2];_e["_"+je+"autoBinFinished"]=1,_e["_"+je+"pos0"]=nt[1],qe?Xe.push(_e):He=Math.min(He,et.size)}else we=Se._histogramBinOpts[_e["_"+je+"bingroup"]],He=Math.min(He,we.size||_e[Ie].size);var Ye=new Array(Xe.length);for(Ce=0;Ce<Xe.length;Ce++)for(var ot=Xe[Ce]["_"+je+"pos0"],at=0;at<ot.length;at++)if(void 0!==ot[at]){Ye[Ce]=ot[at];break}for(isFinite(He)||(He=m.distinctVals(Ye).minDiff),Ce=0;Ce<Xe.length;Ce++){var ct=(_e=Xe[Ce])[je+"calendar"],_t={start:ze.c2r(Ye[Ce]-He/2,0,ct),end:ze.c2r(Ye[Ce]+He/2,0,ct),size:He};_e._input[Ie]=_e[Ie]=_t,(we=Se._histogramBinOpts[_e["_"+je+"bingroup"]])&&m.extendFlat(we,_t)}return ke[Ie]}(o,d,g,y,P)}(L=x.cumulative||{}).enabled&&"include"!==L.currentbin&&("decreasing"===L.direction?K.start=N(p.tickIncrement(S(K.start),K.size,!0,E)):K.end=N(p.tickIncrement(S(K.end),K.size,!1,E))),D.size=K.size,D.sizeFound||(C.size=K.size,m.nestedProperty(w[0],P+".size").set(K.size)),H("start",D,K),H("end",D,K)}k=d["_"+y+"pos0"],delete d["_"+y+"pos0"];var re=d._input[P]||{},V=m.extendFlat({},D),W=D.start,Z=g.r2l(re.start),oe=void 0!==Z;if((D.startFound||oe)&&Z!==g.r2l(W)){var ie=oe?Z:m.aggNums(Math.min,null,k),ue={type:"category"===g.type||"multicategory"===g.type?"linear":g.type,r2l:g.r2l,dtick:D.size,tick0:W,calendar:E,range:[ie,p.tickIncrement(ie,D.size,!1,E)].map(g.l2r)},fe=p.tickFirst(ue);fe>g.r2l(ie)&&(fe=p.tickIncrement(fe,D.size,!0,E)),V.start=g.l2r(fe),oe||m.nestedProperty(d,P+".start").set(V.start)}var he=D.end,de=g.r2l(re.end),be=void 0!==de;if((D.endFound||be)&&de!==g.r2l(he)){var pe=be?de:m.aggNums(Math.max,null,k);V.end=g.l2r(pe),be||m.nestedProperty(d,P+".start").set(V.end)}var Te="autobin"+y;return!1===d._input[Te]&&(d._input[P]=m.extendFlat({},d[P]||{}),delete d._input[Te],delete d[Te]),[V,k]}G.exports={calc:function(o,d){var g,y,v,_,w=[],x=[],E=p.getFromId(o,"h"===d.orientation?d.yaxis:d.xaxis),k="h"===d.orientation?"y":"x",C={x:"y",y:"x"}[k],L=d[k+"calendar"],P=d.cumulative,A=s(o,d,E,k),I=A[0],D=A[1],R="string"==typeof I.size,S=[],N=R?S:I,B=[],H=[],Y=[],Q=0,ne=d.histnorm,ae=d.histfunc,te=-1!==ne.indexOf("density");P.enabled&&te&&(ne=ne.replace(/ ?density$/,""),te=!1);var K,q="max"===ae||"min"===ae?null:0,re=u.count,V=c[ne],W=!1,Z=function(Ce){return E.r2c(Ce,0,L)};for(m.isArrayOrTypedArray(d[C])&&"count"!==ae&&(K=d[C],W="avg"===ae,re=u[ae]),g=Z(I.start),v=Z(I.end)+(g-p.tickIncrement(g,I.size,!1,L))/1e6;g<v&&w.length<1e6&&(y=p.tickIncrement(g,I.size,!1,L),w.push((g+y)/2),x.push(q),Y.push([]),S.push(g),te&&B.push(1/(y-g)),W&&H.push(0),!(y<=g));)g=y;S.push(g),R||"date"!==E.type||(N={start:Z(N.start),end:Z(N.end),size:N.size}),o._fullLayout._roundFnOpts||(o._fullLayout._roundFnOpts={});var oe=d["_"+k+"bingroup"],ie={leftGap:1/0,rightGap:1/0};oe&&(o._fullLayout._roundFnOpts[oe]||(o._fullLayout._roundFnOpts[oe]=ie),ie=o._fullLayout._roundFnOpts[oe]);var ue,fe=x.length,he=!0,de=ie.leftGap,be=ie.rightGap,pe={};for(g=0;g<D.length;g++){var Te=D[g];(_=m.findBin(Te,N))>=0&&_<fe&&(Q+=re(_,g,x,K,H),he&&Y[_].length&&Te!==D[Y[_][0]]&&(he=!1),Y[_].push(g),pe[g]=_,de=Math.min(de,Te-S[_]),be=Math.min(be,S[_+1]-Te))}ie.leftGap=de,ie.rightGap=be,he||(ue=function(Ce,_e){return function(){var we=o._fullLayout._roundFnOpts[oe];return f(we.leftGap,we.rightGap,S,E,L)(Ce,_e)}}),W&&(Q=l(x,H)),V&&V(x,Q,B),P.enabled&&function(Ce,_e,we){var Se,Oe,Be;function He(nt){Be=Ce[nt],Ce[nt]/=2}function Xe(nt){Ce[nt]=Be+(Oe=Ce[nt])/2,Be+=Oe}if("half"===we)if("increasing"===_e)for(He(0),Se=1;Se<Ce.length;Se++)Xe(Se);else for(He(Ce.length-1),Se=Ce.length-2;Se>=0;Se--)Xe(Se);else if("increasing"===_e){for(Se=1;Se<Ce.length;Se++)Ce[Se]+=Ce[Se-1];"exclude"===we&&(Ce.unshift(0),Ce.pop())}else{for(Se=Ce.length-2;Se>=0;Se--)Ce[Se]+=Ce[Se+1];"exclude"===we&&(Ce.push(0),Ce.shift())}}(x,P.direction,P.currentbin);var ye=Math.min(w.length,x.length),ke=[],ze=0,je=ye-1;for(g=0;g<ye;g++)if(x[g]){ze=g;break}for(g=ye-1;g>=ze;g--)if(x[g]){je=g;break}for(g=ze;g<=je;g++)if(i(w[g])&&i(x[g])){var Ie={p:w[g],s:x[g],b:0};P.enabled||(Ie.pts=Y[g],he?Ie.ph0=Ie.ph1=Y[g].length?D[Y[g][0]]:w[g]:(d._computePh=!0,Ie.ph0=ue(S[g]),Ie.ph1=ue(S[g+1],!0))),ke.push(Ie)}return 1===ke.length&&(ke[0].width1=p.tickIncrement(ke[0].p,I.size,!1,L)-ke[0].p),r(ke,d),m.isArrayOrTypedArray(d.selectedpoints)&&m.tagSelected(ke,d,pe),ke},calcAllAutoBins:s}},{"../../lib":803,"../../plots/cartesian/axes":854,"../../registry":931,"../bar/arrays_to_calcdata":940,"./average":1105,"./bin_functions":1107,"./bin_label_vals":1108,"./norm_functions":1116,"fast-isnumeric":249}],1110:[function(h,G,X){"use strict";G.exports={eventDataKeys:["binNumber"]}},{}],1111:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/cartesian/axis_ids"),b=h("../../registry").traceIs,p=h("../bar/defaults").handleGroupingDefaults,r=i.nestedProperty,u=h("../../plots/cartesian/constraints").getAxisGroup,c=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],l=["x","y"];G.exports=function(f,s){var o,d,g,y,v,_,w,x=s._histogramBinOpts={},E=[],k={},C=[];function L(K,q){return i.coerce(o._input,o,o._module.attributes,K,q)}function P(K){return"v"===K.orientation?"x":"y"}function A(K,q,re){var V=K.uid+"__"+re;q||(q=V);var W=m.getFromTrace({_fullLayout:s},K,re).type,Z=K[re+"calendar"]||"",oe=x[q],ie=!0;oe&&(W===oe.axType&&Z===oe.calendar?(ie=!1,oe.traces.push(K),oe.dirs.push(re)):(q=V,W!==oe.axType&&i.warn(["Attempted to group the bins of trace",K.index,"set on a","type:"+W,"axis","with bins on","type:"+oe.axType,"axis."].join(" ")),Z!==oe.calendar&&i.warn(["Attempted to group the bins of trace",K.index,"set with a",Z,"calendar","with bins",oe.calendar?"on a "+oe.calendar+" calendar":"w/o a set calendar"].join(" ")))),ie&&(x[q]={traces:[K],dirs:[re],axType:W,calendar:K[re+"calendar"]||""}),K["_"+re+"bingroup"]=q}for(v=0;v<f.length;v++)b(o=f[v],"histogram")&&(E.push(o),delete o._xautoBinFinished,delete o._yautoBinFinished,b(o,"2dMap")||p(o._input,o,s,L));var I=s._alignmentOpts||{};for(v=0;v<E.length;v++){if(g="",!b(o=E[v],"2dMap")){if(y=P(o),"group"===s.barmode&&o.alignmentgroup){var R=u(s,o[y+"axis"])+o.orientation;(I[R]||{})[o.alignmentgroup]&&(g=R)}g||"overlay"===s.barmode||(g=u(s,o.xaxis)+u(s,o.yaxis)+P(o))}g?(k[g]||(k[g]=[]),k[g].push(o)):C.push(o)}for(g in k)if(1!==(d=k[g]).length){var S=!1;for(d.length&&(o=d[0],S=L("bingroup")),g=S||g,v=0;v<d.length;v++){var N=(o=d[v])._input.bingroup;N&&N!==g&&i.warn(["Trace",o.index,"must match","within bingroup",g+".","Ignoring its bingroup:",N,"setting."].join(" ")),o.bingroup=g,A(o,g,P(o))}}else C.push(d[0]);for(v=0;v<C.length;v++){o=C[v];var B=L("bingroup");if(b(o,"2dMap"))for(w=0;w<2;w++){var H=L((y=l[w])+"bingroup",B?B+"__"+y:null);A(o,H,y)}else A(o,B,P(o))}for(g in x){var Y=x[g];for(d=Y.traces,_=0;_<c.length;_++){var Q,ne,ae=c[_],te=ae.name;if("nbins"!==te||!Y.sizeFound){for(v=0;v<d.length;v++){if(void 0!==r((o=d[v])._input,Q=ae.aStr[y=Y.dirs[v]]).get()){Y[te]=L(Q),Y[te+"Found"]=!0;break}(ne=(o._autoBin||{})[y]||{})[te]&&r(o,Q).set(ne[te])}if("start"===te||"end"===te)for(;v<d.length;v++)(o=d[v])["_"+y+"bingroup"]&&L(Q,(ne=(o._autoBin||{})[y]||{})[te]);"nbins"!==te||Y.sizeFound||Y.nbinsFound||(o=d[0],Y[te]=L(Q))}}}}},{"../../lib":803,"../../plots/cartesian/axis_ids":858,"../../plots/cartesian/constraints":862,"../../registry":931,"../bar/defaults":945}],1112:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../lib"),b=h("../../components/color"),p=h("../bar/style_defaults"),r=h("./attributes");G.exports=function(u,c,l,f){function s(E,k){return m.coerce(u,c,r,E,k)}var o=s("x"),d=s("y");s("cumulative.enabled")&&(s("cumulative.direction"),s("cumulative.currentbin")),s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat");var g=s("orientation",d&&!o?"h":"v"),y="v"===g?"x":"y",v="v"===g?"y":"x",_=o&&d?Math.min(m.minRowLength(o)&&m.minRowLength(d)):m.minRowLength(c[y]||[]);if(_){c._length=_,i.getComponentMethod("calendars","handleTraceDefaults")(u,c,["x","y"],f),c[v]&&s("histfunc"),s("histnorm"),s("autobin"+y),p(u,c,s,l,f),m.coerceSelectionMarkerOpacity(c,s);var w=(c.marker.line||{}).color,x=i.getComponentMethod("errorbars","supplyDefaults");x(u,c,w||b.defaultLine,{axis:"y"}),x(u,c,w||b.defaultLine,{axis:"x",inherit:"y"})}else c.visible=!1}},{"../../components/color":666,"../../lib":803,"../../registry":931,"../bar/style_defaults":956,"./attributes":1104}],1113:[function(h,G,X){"use strict";G.exports=function(i,m,b,p,r){if(i.x="xVal"in m?m.xVal:m.x,i.y="yVal"in m?m.yVal:m.y,"zLabelVal"in m&&(i.z=m.zLabelVal),m.xa&&(i.xaxis=m.xa),m.ya&&(i.yaxis=m.ya),!(b.cumulative||{}).enabled){var u,c=Array.isArray(r)?p[0].pts[r[0]][r[1]]:p[r].pts;if(i.pointNumbers=c,i.binNumber=i.pointNumber,delete i.pointNumber,delete i.pointIndex,b._indexToPoints){u=[];for(var l=0;l<c.length;l++)u=u.concat(b._indexToPoints[c[l]])}else u=c;i.pointIndices=u}return i}},{}],1114:[function(h,G,X){"use strict";var i=h("../bar/hover").hoverPoints,m=h("../../plots/cartesian/axes").hoverLabelText;G.exports=function(b,p,r,u,c){var l=i(b,p,r,u,c);if(l){var f=(b=l[0]).cd[b.index],s=b.cd[0].trace;if(!s.cumulative.enabled){var o="h"===s.orientation?"y":"x";b[o+"Label"]=m(b[o+"a"],[f.ph0,f.ph1],s[o+"hoverformat"])}return l}}},{"../../plots/cartesian/axes":854,"../bar/hover":948}],1115:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),layoutAttributes:h("../bar/layout_attributes"),supplyDefaults:h("./defaults"),crossTraceDefaults:h("./cross_trace_defaults"),supplyLayoutDefaults:h("../bar/layout_defaults"),calc:h("./calc").calc,crossTraceCalc:h("../bar/cross_trace_calc").crossTraceCalc,plot:h("../bar/plot").plot,layerName:"barlayer",style:h("../bar/style").style,styleOnSelect:h("../bar/style").styleOnSelect,colorbar:h("../scatter/marker_colorbar"),hoverPoints:h("./hover"),selectPoints:h("../bar/select"),eventData:h("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:h("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":868,"../bar/cross_trace_calc":944,"../bar/layout_attributes":950,"../bar/layout_defaults":951,"../bar/plot":952,"../bar/select":953,"../bar/style":955,"../scatter/marker_colorbar":1236,"./attributes":1104,"./calc":1109,"./cross_trace_defaults":1111,"./defaults":1112,"./event_data":1113,"./hover":1114}],1116:[function(h,G,X){"use strict";G.exports={percent:function(i,m){for(var b=i.length,p=100/m,r=0;r<b;r++)i[r]*=p},probability:function(i,m){for(var b=i.length,p=0;p<b;p++)i[p]/=m},density:function(i,m,b,p){var r=i.length;p=p||1;for(var u=0;u<r;u++)i[u]*=b[u]*p},"probability density":function(i,m,b,p){var r=i.length;p&&(m/=p);for(var u=0;u<r;u++)i[u]*=b[u]/m}}},{}],1117:[function(h,G,X){"use strict";var i=h("../histogram/attributes"),m=h("../histogram/bin_attributes"),b=h("../heatmap/attributes"),p=h("../../plots/attributes"),r=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,u=h("../../plots/template_attributes").hovertemplateAttrs,c=h("../../components/colorscale/attributes"),l=h("../../lib/extend").extendFlat;G.exports=l({x:i.x,y:i.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:i.histnorm,histfunc:i.histfunc,nbinsx:i.nbinsx,xbins:m("x"),nbinsy:i.nbinsy,ybins:m("y"),autobinx:i.autobinx,autobiny:i.autobiny,bingroup:l({},i.bingroup,{}),xbingroup:l({},i.bingroup,{}),ybingroup:l({},i.bingroup,{}),xgap:b.xgap,ygap:b.ygap,zsmooth:b.zsmooth,xhoverformat:r("x"),yhoverformat:r("y"),zhoverformat:r("z",1),hovertemplate:u({},{keys:"z"}),showlegend:l({},p.showlegend,{dflt:!1})},c("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../heatmap/attributes":1085,"../histogram/attributes":1104,"../histogram/bin_attributes":1106}],1118:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/cartesian/axes"),b=h("../histogram/bin_functions"),p=h("../histogram/norm_functions"),r=h("../histogram/average"),u=h("../histogram/bin_label_vals"),c=h("../histogram/calc").calcAllAutoBins;function l(o,d,g,y){var v,_=new Array(o);if(y)for(v=0;v<o;v++)_[v]=1/(d[v+1]-d[v]);else{var w=1/g;for(v=0;v<o;v++)_[v]=w}return _}function f(o,d){return{start:o(d.start),end:o(d.end),size:d.size}}function s(o,d,g,y,v,_){var w,x=o.length-1,E=new Array(x),k=u(g,y,o,v,_);for(w=0;w<x;w++){var C=(d||[])[w];E[w]=void 0===C?[k(o[w]),k(o[w+1],!0)]:[C,C]}return E}G.exports=function(o,d){var g,y,v,_,w=m.getFromId(o,d.xaxis),x=m.getFromId(o,d.yaxis),E=d.xcalendar,k=d.ycalendar,C=function(ht){return w.r2c(ht,0,E)},L=function(ht){return x.r2c(ht,0,k)},P=c(o,d,w,"x"),A=P[0],I=P[1],D=c(o,d,x,"y"),R=D[0],S=D[1],N=d._length;I.length>N&&I.splice(N,I.length-N),S.length>N&&S.splice(N,S.length-N);var B=[],H=[],Y=[],Q="string"==typeof A.size,ne="string"==typeof R.size,ae=[],te=[],K=Q?ae:A,q=ne?te:R,re=0,V=[],W=[],Z=d.histnorm,oe=d.histfunc,ie=-1!==Z.indexOf("density"),ue="max"===oe||"min"===oe?null:0,fe=b.count,he=p[Z],de=!1,be=[],pe=[],Te="z"in d?d.z:"marker"in d&&Array.isArray(d.marker.color)?d.marker.color:"";Te&&"count"!==oe&&(de="avg"===oe,fe=b[oe]);var ye=A.size,ke=C(A.start),ze=C(A.end)+(ke-m.tickIncrement(ke,ye,!1,E))/1e6;for(g=ke;g<ze;g=m.tickIncrement(g,ye,!1,E))H.push(ue),ae.push(g),de&&Y.push(0);ae.push(g);var Ie=H.length,Ce=(g-ke)/Ie,_e=w.c2r(ke+Ce/2,0,E),we=R.size,Se=L(R.start),Oe=L(R.end)+(Se-m.tickIncrement(Se,we,!1,k))/1e6;for(g=Se;g<Oe;g=m.tickIncrement(g,we,!1,k)){B.push(H.slice()),te.push(g);var Be=new Array(Ie);for(y=0;y<Ie;y++)Be[y]=[];W.push(Be),de&&V.push(Y.slice())}te.push(g);var He=B.length,Xe=(g-Se)/He,nt=x.c2r(Se+Xe/2,0,k);ie&&(be=l(H.length,K,Ce,Q),pe=l(B.length,q,Xe,ne)),Q||"date"!==w.type||(K=f(C,K)),ne||"date"!==x.type||(q=f(L,q));var et=!0,qe=!0,Ye=new Array(Ie),ot=new Array(He),at=1/0,ct=1/0,_t=1/0,xt=1/0;for(g=0;g<N;g++){var Ht=I[g],At=S[g];v=i.findBin(Ht,K),_=i.findBin(At,q),v>=0&&v<Ie&&_>=0&&_<He&&(re+=fe(v,g,B[_],Te,V[_]),W[_][v].push(g),et&&(void 0===Ye[v]?Ye[v]=Ht:Ye[v]!==Ht&&(et=!1)),qe&&(void 0===ot[_]?ot[_]=At:ot[_]!==At&&(qe=!1)),at=Math.min(at,Ht-ae[v]),ct=Math.min(ct,ae[v+1]-Ht),_t=Math.min(_t,At-te[_]),xt=Math.min(xt,te[_+1]-At))}if(de)for(_=0;_<He;_++)re+=r(B[_],V[_]);if(he)for(_=0;_<He;_++)he(B[_],re,be,pe[_]);return{x:I,xRanges:s(ae,et&&Ye,at,ct,w,E),x0:_e,dx:Ce,y:S,yRanges:s(te,qe&&ot,_t,xt,x,k),y0:nt,dy:Xe,z:B,pts:W}}},{"../../lib":803,"../../plots/cartesian/axes":854,"../histogram/average":1105,"../histogram/bin_functions":1107,"../histogram/bin_label_vals":1108,"../histogram/calc":1109,"../histogram/norm_functions":1116}],1119:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./sample_defaults"),b=h("../heatmap/style_defaults"),p=h("../../components/colorscale/defaults"),r=h("./attributes");G.exports=function(u,c,l,f){function s(o,d){return i.coerce(u,c,r,o,d)}m(u,c,s,f),!1!==c.visible&&(b(u,c,s,f),p(u,c,f,s,{prefix:"",cLetter:"z"}),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"))}},{"../../components/colorscale/defaults":676,"../../lib":803,"../heatmap/style_defaults":1098,"./attributes":1117,"./sample_defaults":1122}],1120:[function(h,G,X){"use strict";var i=h("../heatmap/hover"),m=h("../../plots/cartesian/axes").hoverLabelText;G.exports=function(b,p,r,u,c){var l=i(b,p,r,u,c);if(l){var f=(b=l[0]).index,d=b.cd[0],g=d.trace,y=d.xRanges[f[1]],v=d.yRanges[f[0]];return b.xLabel=m(b.xa,[y[0],y[1]],g.xhoverformat),b.yLabel=m(b.ya,[v[0],v[1]],g.yhoverformat),l}}},{"../../plots/cartesian/axes":854,"../heatmap/hover":1092}],1121:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),crossTraceDefaults:h("../histogram/cross_trace_defaults"),calc:h("../heatmap/calc"),plot:h("../heatmap/plot"),layerName:"heatmaplayer",colorbar:h("../heatmap/colorbar"),style:h("../heatmap/style"),hoverPoints:h("./hover"),eventData:h("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:h("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":868,"../heatmap/calc":1086,"../heatmap/colorbar":1088,"../heatmap/plot":1096,"../heatmap/style":1097,"../histogram/cross_trace_defaults":1111,"../histogram/event_data":1113,"./attributes":1117,"./defaults":1119,"./hover":1120}],1122:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../lib");G.exports=function(b,p,r,u){var c=r("x"),l=r("y"),f=m.minRowLength(c),s=m.minRowLength(l);f&&s?(p._length=Math.min(f,s),i.getComponentMethod("calendars","handleTraceDefaults")(b,p,["x","y"],u),(r("z")||r("marker.color"))&&r("histfunc"),r("histnorm"),r("autobinx"),r("autobiny")):p.visible=!1}},{"../../lib":803,"../../registry":931}],1123:[function(h,G,X){"use strict";var i=h("../histogram2d/attributes"),m=h("../contour/attributes"),b=h("../../components/colorscale/attributes"),p=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,r=h("../../lib/extend").extendFlat;G.exports=r({x:i.x,y:i.y,z:i.z,marker:i.marker,histnorm:i.histnorm,histfunc:i.histfunc,nbinsx:i.nbinsx,xbins:i.xbins,nbinsy:i.nbinsy,ybins:i.ybins,autobinx:i.autobinx,autobiny:i.autobiny,bingroup:i.bingroup,xbingroup:i.xbingroup,ybingroup:i.ybingroup,autocontour:m.autocontour,ncontours:m.ncontours,contours:m.contours,line:{color:m.line.color,width:r({},m.line.width,{dflt:.5}),dash:m.line.dash,smoothing:m.line.smoothing,editType:"plot"},xhoverformat:p("x"),yhoverformat:p("y"),zhoverformat:p("z",1),hovertemplate:i.hovertemplate},b("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../contour/attributes":1028,"../histogram2d/attributes":1117}],1124:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../histogram2d/sample_defaults"),b=h("../contour/contours_defaults"),p=h("../contour/style_defaults"),r=h("./attributes");G.exports=function(u,c,l,f){function s(o,d){return i.coerce(u,c,r,o,d)}m(u,c,s,f),!1!==c.visible&&(b(u,c,s,function(o){return i.coerce2(u,c,r,o)}),p(u,c,s,f),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"))}},{"../../lib":803,"../contour/contours_defaults":1035,"../contour/style_defaults":1049,"../histogram2d/sample_defaults":1122,"./attributes":1123}],1125:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),crossTraceDefaults:h("../histogram/cross_trace_defaults"),calc:h("../contour/calc"),plot:h("../contour/plot").plot,layerName:"contourlayer",style:h("../contour/style"),colorbar:h("../contour/colorbar"),hoverPoints:h("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:h("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":868,"../contour/calc":1029,"../contour/colorbar":1031,"../contour/hover":1041,"../contour/plot":1046,"../contour/style":1048,"../histogram/cross_trace_defaults":1111,"./attributes":1123,"./defaults":1124}],1126:[function(h,G,X){"use strict";var i=h("../../plots/template_attributes").hovertemplateAttrs,m=h("../../plots/template_attributes").texttemplateAttrs,b=h("../../components/colorscale/attributes"),p=h("../../plots/domain").attributes,r=h("../pie/attributes"),u=h("../sunburst/attributes"),c=h("../treemap/attributes"),l=h("../treemap/constants"),f=h("../../lib/extend").extendFlat;G.exports={labels:u.labels,parents:u.parents,values:u.values,branchvalues:u.branchvalues,count:u.count,level:u.level,maxdepth:u.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:c.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:f({colors:u.marker.colors,line:u.marker.line,editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),leaf:u.leaf,pathbar:c.pathbar,text:r.text,textinfo:u.textinfo,texttemplate:m({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),hovertext:r.hovertext,hoverinfo:u.hoverinfo,hovertemplate:i({},{keys:l.eventDataKeys}),textfont:r.textfont,insidetextfont:r.insidetextfont,outsidetextfont:c.outsidetextfont,textposition:c.textposition,sort:r.sort,root:u.root,domain:p({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/domain":882,"../../plots/template_attributes":926,"../pie/attributes":1192,"../sunburst/attributes":1330,"../treemap/attributes":1356,"../treemap/constants":1359}],1127:[function(h,G,X){"use strict";var i=h("../../plots/plots");X.name="icicle",X.plot=function(m,b,p,r){i.plotBasePlot(X.name,m,b,p,r)},X.clean=function(m,b,p,r){i.cleanBasePlot(X.name,m,b,p,r)}},{"../../plots/plots":917}],1128:[function(h,G,X){"use strict";var i=h("../sunburst/calc");X.calc=function(m,b){return i.calc(m,b)},X.crossTraceCalc=function(m){return i._runCrossTraceCalc("icicle",m)}},{"../sunburst/calc":1332}],1129:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./attributes"),b=h("../../components/color"),p=h("../../plots/domain").defaults,r=h("../bar/defaults").handleText,u=h("../bar/constants").TEXTPAD,c=h("../../components/colorscale"),l=c.hasColorscale,f=c.handleDefaults;G.exports=function(s,o,d,g){function y(C,L){return i.coerce(s,o,m,C,L)}var v=y("labels"),_=y("parents");if(v&&v.length&&_&&_.length){var w=y("values");y(w&&w.length?"branchvalues":"count"),y("level"),y("maxdepth"),y("tiling.orientation"),y("tiling.flip"),y("tiling.pad");var x=y("text");y("texttemplate"),o.texttemplate||y("textinfo",Array.isArray(x)?"text+label":"label"),y("hovertext"),y("hovertemplate");var E=y("pathbar.visible");r(s,o,g,y,"auto",{hasPathbar:E,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),y("textposition"),y("marker.line.width")&&y("marker.line.color",g.paper_bgcolor),y("marker.colors");var k=o._hasColorscale=l(s,"marker","colors")||(s.marker||{}).coloraxis;k&&f(s,o,g,y,{prefix:"marker.",cLetter:"c"}),y("leaf.opacity",k?1:.7),o._hovered={marker:{line:{width:2,color:b.contrast(g.paper_bgcolor)}}},E&&(y("pathbar.thickness",o.pathbar.textfont.size+2*u),y("pathbar.side"),y("pathbar.edgeshape")),y("sort"),y("root.color"),p(o,g,y),o._length=null}else o.visible=!1}},{"../../components/color":666,"../../components/colorscale":678,"../../lib":803,"../../plots/domain":882,"../bar/constants":943,"../bar/defaults":945,"./attributes":1126}],1130:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=h("../../components/drawing"),p=h("../../lib/svg_text_utils"),r=h("./partition"),u=h("./style").styleOne,c=h("../treemap/constants"),l=h("../sunburst/helpers"),f=h("../sunburst/fx"),s=h("../sunburst/plot").formatSliceLabel;G.exports=function(o,d,g,y,v){var _=v.width,w=v.height,x=v.viewX,E=v.viewY,k=v.pathSlice,C=v.toMoveInsideSlice,L=v.strTransform,P=v.hasTransition,A=v.handleSlicesExit,I=v.makeUpdateSliceInterpolator,D=v.makeUpdateTextInterpolator,R=v.prevEntry,S=o._fullLayout,N=d[0].trace,B=-1!==N.textposition.indexOf("left"),H=-1!==N.textposition.indexOf("right"),Y=-1!==N.textposition.indexOf("bottom"),Q=r(g,[_,w],{flipX:N.tiling.flip.indexOf("x")>-1,flipY:N.tiling.flip.indexOf("y")>-1,orientation:N.tiling.orientation,pad:{inner:N.tiling.pad},maxDepth:N._maxDepth}).descendants(),ne=1/0,ae=-1/0;Q.forEach(function(V){var W=V.depth;W>=N._maxDepth?(V.x0=V.x1=(V.x0+V.x1)/2,V.y0=V.y1=(V.y0+V.y1)/2):(ne=Math.min(ne,W),ae=Math.max(ae,W))}),y=y.data(Q,l.getPtId),N._maxVisibleLayers=isFinite(ae)?ae-ne+1:0,y.enter().append("g").classed("slice",!0),A(y,!1,{},[_,w],k),y.order();var te=null;if(P&&R){var K=l.getPtId(R);y.each(function(V){null===te&&l.getPtId(V)===K&&(te={x0:V.x0,x1:V.x1,y0:V.y0,y1:V.y1})})}var q=function(){return te||{x0:0,x1:_,y0:0,y1:w}},re=y;return P&&(re=re.transition().each("end",function(){var V=i.select(this);l.setSliceCursor(V,o,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),re.each(function(V){V._hoverX=x(V.x1-N.tiling.pad),V._hoverY=E(Y?V.y1-N.tiling.pad/2:V.y0+N.tiling.pad/2);var W=i.select(this),Z=m.ensureSingle(W,"path","surface",function(fe){fe.style("pointer-events","all")});P?Z.transition().attrTween("d",function(fe){var he=I(fe,!1,q(),[_,w],{orientation:N.tiling.orientation,flipX:N.tiling.flip.indexOf("x")>-1,flipY:N.tiling.flip.indexOf("y")>-1});return function(de){return k(he(de))}}):Z.attr("d",k),W.call(f,g,o,d,{styleOne:u,eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,o,{isTransitioning:o._transitioning}),Z.call(u,V,N,{hovered:!1}),V._text=V.x0===V.x1||V.y0===V.y1?"":s(V,g,N,d,S)||"";var oe=m.ensureSingle(W,"g","slicetext"),ie=m.ensureSingle(oe,"text","",function(fe){fe.attr("data-notex",1)}),ue=m.ensureUniformFontSize(o,l.determineTextFont(N,V,S.font));ie.text(V._text||" ").classed("slicetext",!0).attr("text-anchor",H?"end":B?"start":"middle").call(b.font,ue).call(p.convertToTspans,o),V.textBB=b.bBox(ie.node()),V.transform=C(V,{fontSize:ue.size}),V.transform.fontSize=ue.size,P?ie.transition().attrTween("transform",function(fe){var he=D(fe,!1,q(),[_,w]);return function(de){return L(he(de))}}):ie.attr("transform",L(V))}),te}},{"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../sunburst/fx":1335,"../sunburst/helpers":1336,"../sunburst/plot":1340,"../treemap/constants":1359,"./partition":1134,"./style":1136,"@plotly/d3":58}],1131:[function(h,G,X){"use strict";G.exports={moduleType:"trace",name:"icicle",basePlotModule:h("./base_plot"),categories:[],animatable:!0,attributes:h("./attributes"),layoutAttributes:h("./layout_attributes"),supplyDefaults:h("./defaults"),supplyLayoutDefaults:h("./layout_defaults"),calc:h("./calc").calc,crossTraceCalc:h("./calc").crossTraceCalc,plot:h("./plot"),style:h("./style").style,colorbar:h("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1236,"./attributes":1126,"./base_plot":1127,"./calc":1128,"./defaults":1129,"./layout_attributes":1132,"./layout_defaults":1133,"./plot":1135,"./style":1136}],1132:[function(h,G,X){"use strict";G.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1133:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./layout_attributes");G.exports=function(b,p){function r(u,c){return i.coerce(b,p,m,u,c)}r("iciclecolorway",p.colorway),r("extendiciclecolors")}},{"../../lib":803,"./layout_attributes":1132}],1134:[function(h,G,X){"use strict";var i=h("d3-hierarchy"),m=h("../treemap/flip_tree");G.exports=function(b,p,r){var u=r.flipX,c=r.flipY,l="h"===r.orientation,f=r.maxDepth,s=p[0],o=p[1];f&&(s=(b.height+1)*p[0]/Math.min(b.height+1,f),o=(b.height+1)*p[1]/Math.min(b.height+1,f));var d=i.partition().padding(r.pad.inner).size(l?[p[1],s]:[p[0],o])(b);return(l||u||c)&&m(d,p,{swapXY:l,flipX:u,flipY:c}),d}},{"../treemap/flip_tree":1364,"d3-hierarchy":170}],1135:[function(h,G,X){"use strict";var i=h("../treemap/draw"),m=h("./draw_descendants");G.exports=function(b,p,r,u){return i(b,p,r,u,{type:"icicle",drawDescendants:m})}},{"../treemap/draw":1361,"./draw_descendants":1130}],1136:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/color"),b=h("../../lib"),p=h("../bar/uniform_text").resizeText;function r(u,c,l){var f=c.data.data,s=!c.children,o=f.i,d=b.castOption(l,o,"marker.line.color")||m.defaultLine,g=b.castOption(l,o,"marker.line.width")||0;u.style("stroke-width",g).call(m.fill,f.color).call(m.stroke,d).style("opacity",s?l.leaf.opacity:null)}G.exports={style:function(u){var c=u._fullLayout._iciclelayer.selectAll(".trace");p(u,c,"icicle"),c.each(function(l){var f=i.select(this),s=l[0].trace;f.style("opacity",s.opacity),f.selectAll("path.surface").each(function(o){i.select(this).call(r,o,s)})})},styleOne:r}},{"../../components/color":666,"../../lib":803,"../bar/uniform_text":957,"@plotly/d3":58}],1137:[function(h,G,X){"use strict";for(var i=h("../../plots/attributes"),m=h("../../plots/template_attributes").hovertemplateAttrs,b=h("../../lib/extend").extendFlat,p=h("./constants").colormodel,r=["rgb","rgba","rgba256","hsl","hsla"],u=[],c=[],l=0;l<r.length;l++){var f=p[r[l]];u.push("For the `"+r[l]+"` colormodel, it is ["+(f.zminDflt||f.min).join(", ")+"]."),c.push("For the `"+r[l]+"` colormodel, it is ["+(f.zmaxDflt||f.max).join(", ")+"].")}G.exports=b({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:r,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:b({},i.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:m({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,"./constants":1139}],1138:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./constants"),b=h("fast-isnumeric"),p=h("../../plots/cartesian/axes"),r=h("../../lib").maxRowLength,u=h("./helpers").getImageSize;function c(f,s,o,d){return function(g){return i.constrain((g-f)*s,o,d)}}function l(f,s){return function(o){return i.constrain(o,f,s)}}G.exports=function(f,s){var o,d;if(s._hasZ)o=s.z.length,d=r(s.z);else if(s._hasSource){var g=u(s.source);o=g.height,d=g.width}var y,v=p.getFromId(f,s.xaxis||"x"),_=p.getFromId(f,s.yaxis||"y"),w=v.d2c(s.x0)-s.dx/2,x=_.d2c(s.y0)-s.dy/2,E=[w,w+d*s.dx],k=[x,x+o*s.dy];if(v&&"log"===v.type)for(y=0;y<d;y++)E.push(w+y*s.dx);if(_&&"log"===_.type)for(y=0;y<o;y++)k.push(x+y*s.dy);return s._extremes[v._id]=p.findExtremes(v,E),s._extremes[_._id]=p.findExtremes(_,k),s._scaler=function(C){var L=m.colormodel[C.colormodel],P=(L.colormodel||C.colormodel).length;C._sArray=[];for(var A=0;A<P;A++)C._sArray.push(L.min[A]!==C.zmin[A]||L.max[A]!==C.zmax[A]?c(C.zmin[A],(L.max[A]-L.min[A])/(C.zmax[A]-C.zmin[A]),L.min[A],L.max[A]):l(L.min[A],L.max[A]));return function(I){for(var D=I.slice(0,P),R=0;R<P;R++){var S=D[R];if(!b(S))return!1;D[R]=C._sArray[R](S)}return D}}(s),[{x0:w,y0:x,z:s.z,w:d,h:o}]}},{"../../lib":803,"../../plots/cartesian/axes":854,"./constants":1139,"./helpers":1142,"fast-isnumeric":249}],1139:[function(h,G,X){"use strict";G.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(i){return i.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(i){return i.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(i){return i.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(i){var m=i.slice(0,3);return m[1]=m[1]+"%",m[2]=m[2]+"%",m},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(i){var m=i.slice(0,4);return m[1]=m[1]+"%",m[2]=m[2]+"%",m},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],1140:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./attributes"),b=h("./constants"),p=h("../../snapshot/helpers").IMAGE_URL_PREFIX;G.exports=function(r,u){function c(s,o){return i.coerce(r,u,m,s,o)}c("source"),u.source&&!u.source.match(p)&&delete u.source,u._hasSource=!!u.source;var l,f=c("z");u._hasZ=!(void 0===f||!f.length||!f[0]||!f[0].length),u._hasZ||u._hasSource?(c("x0"),c("y0"),c("dx"),c("dy"),u._hasZ?(c("colormodel","rgb"),c("zmin",(l=b.colormodel[u.colormodel]).zminDflt||l.min),c("zmax",l.zmaxDflt||l.max)):u._hasSource&&(u.colormodel="rgba256",u.zmin=(l=b.colormodel[u.colormodel]).zminDflt,u.zmax=l.zmaxDflt),c("zsmooth"),c("text"),c("hovertext"),c("hovertemplate"),u._length=null):u.visible=!1}},{"../../lib":803,"../../snapshot/helpers":935,"./attributes":1137,"./constants":1139}],1141:[function(h,G,X){"use strict";G.exports=function(i,m){return"xVal"in m&&(i.x=m.xVal),"yVal"in m&&(i.y=m.yVal),m.xa&&(i.xaxis=m.xa),m.ya&&(i.yaxis=m.ya),i.color=m.color,i.colormodel=m.trace.colormodel,i.z||(i.z=m.color),i}},{}],1142:[function(h,G,X){"use strict";var i=h("probe-image-size/sync"),m=h("../../snapshot/helpers").IMAGE_URL_PREFIX,b=h("buffer/").Buffer;X.getImageSize=function(p){var r=p.replace(m,""),u=new b(r,"base64");return i(u)}},{"../../snapshot/helpers":935,"buffer/":117,"probe-image-size/sync":527}],1143:[function(h,G,X){"use strict";var i=h("../../components/fx"),m=h("../../lib"),b=h("./constants");G.exports=function(p,r,u){var c=p.cd[0],l=c.trace,f=p.xa,s=p.ya;if(!(i.inbox(r-c.x0,r-(c.x0+c.w*l.dx),0)>0||i.inbox(u-c.y0,u-(c.y0+c.h*l.dy),0)>0)){var o,d=Math.floor((r-c.x0)/l.dx),g=Math.floor(Math.abs(u-c.y0)/l.dy);if(l._hasZ?o=c.z[g][d]:l._hasSource&&(o=l._canvas.el.getContext("2d").getImageData(d,g,1,1).data),o){var y,v=c.hi||l.hoverinfo;if(v){var _=v.split("+");-1!==_.indexOf("all")&&(_=["color"]),-1!==_.indexOf("color")&&(y=!0)}var w,x=b.colormodel[l.colormodel],E=x.colormodel||l.colormodel,k=E.length,C=l._scaler(o),L=x.suffix,P=[];(l.hovertemplate||y)&&(P.push("["+[C[0]+L[0],C[1]+L[1],C[2]+L[2]].join(", ")),4===k&&P.push(", "+C[3]+L[3]),P.push("]"),P=P.join(""),p.extraText=E.toUpperCase()+": "+P),Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[g])?w=l.hovertext[g][d]:Array.isArray(l.text)&&Array.isArray(l.text[g])&&(w=l.text[g][d]);var A=s.c2p(c.y0+(g+.5)*l.dy),I=c.x0+(d+.5)*l.dx,D=c.y0+(g+.5)*l.dy,R="["+o.slice(0,l.colormodel.length).join(", ")+"]";return[m.extendFlat(p,{index:[g,d],x0:f.c2p(c.x0+d*l.dx),x1:f.c2p(c.x0+(d+1)*l.dx),y0:A,y1:A,color:C,xVal:I,xLabelVal:I,yVal:D,yLabelVal:D,zLabelVal:R,text:w,hovertemplateLabels:{zLabel:R,colorLabel:P,"color[0]Label":C[0]+L[0],"color[1]Label":C[1]+L[1],"color[2]Label":C[2]+L[2],"color[3]Label":C[3]+L[3]}})]}}}},{"../../components/fx":706,"../../lib":803,"./constants":1139}],1144:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),calc:h("./calc"),plot:h("./plot"),style:h("./style"),hoverPoints:h("./hover"),eventData:h("./event_data"),moduleType:"trace",name:"image",basePlotModule:h("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":868,"./attributes":1137,"./calc":1138,"./defaults":1140,"./event_data":1141,"./hover":1143,"./plot":1145,"./style":1146}],1145:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=m.strTranslate,p=h("../../constants/xmlns_namespaces"),r=h("./constants"),u=m.isIOS()||m.isSafari()||m.isIE();G.exports=function(c,l,f,s){var o=l.xaxis,d=l.yaxis,g=!(u||c._context._exportedPlot);m.makeTraceGroups(s,f,"im").each(function(y){var v=i.select(this),_=y[0],w=_.trace,x=("fast"===w.zsmooth||!1===w.zsmooth&&g)&&!w._hasZ&&w._hasSource&&"linear"===o.type&&"linear"===d.type;w._realImage=x;var E,k,C,L,P,A,I=_.z,D=_.x0,R=_.y0,S=_.w,N=_.h,B=w.dx,H=w.dy;for(A=0;void 0===E&&A<S;)E=o.c2p(D+A*B),A++;for(A=S;void 0===k&&A>0;)k=o.c2p(D+A*B),A--;for(A=0;void 0===L&&A<N;)L=d.c2p(R+A*H),A++;for(A=N;void 0===P&&A>0;)P=d.c2p(R+A*H),A--;k<E&&(C=k,k=E,E=C),P<L&&(C=L,L=P,P=C),!x&&(E=Math.max(-.5*o._length,E),k=Math.min(1.5*o._length,k),L=Math.max(-.5*d._length,L),P=Math.min(1.5*d._length,P));var Y=Math.round(k-E),Q=Math.round(P-L);if(Y<=0||Q<=0)v.selectAll("image").data([]).exit().remove();else{var ne=v.selectAll("image").data([y]);ne.enter().append("svg:image").attr({xmlns:p.svg,preserveAspectRatio:"none"}),ne.exit().remove();var ae=!1===w.zsmooth?r.pixelatedStyle:"";if(x){var te=m.simpleMap(o.range,o.r2l),K=m.simpleMap(d.range,d.r2l),q=te[1]<te[0],re=K[1]>K[0];if(q||re){var V=E+Y/2,W=L+Q/2;ae+="transform:"+b(V+"px",W+"px")+"scale("+(q?-1:1)+","+(re?-1:1)+")"+b(-V+"px",-W+"px")+";"}}ne.attr("style",ae);var Z=new Promise(function(ie){if(w._hasZ)ie();else if(w._hasSource)if(w._canvas&&w._canvas.el.width===S&&w._canvas.el.height===N&&w._canvas.source===w.source)ie();else{var ue=document.createElement("canvas");ue.width=S,ue.height=N;var fe=ue.getContext("2d");w._image=w._image||new Image;var he=w._image;he.onload=function(){fe.drawImage(he,0,0),w._canvas={el:ue,source:w.source},ie()},he.setAttribute("src",w.source)}}).then(function(){var ie;if(w._hasZ)ie=oe(function(fe,he){return I[he][fe]}).toDataURL("image/png");else if(w._hasSource)if(x)ie=w.source;else{var ue=w._canvas.el.getContext("2d").getImageData(0,0,S,N).data;ie=oe(function(fe,he){var de=4*(he*S+fe);return[ue[de],ue[de+1],ue[de+2],ue[de+3]]}).toDataURL("image/png")}ne.attr({"xlink:href":ie,height:Q,width:Y,x:E,y:L})});c._promises.push(Z)}function oe(ie){var ue=document.createElement("canvas");ue.width=Y,ue.height=Q;var fe,he=ue.getContext("2d"),de=function(_e){return m.constrain(Math.round(o.c2p(D+_e*B)-E),0,Y)},be=function(_e){return m.constrain(Math.round(d.c2p(R+_e*H)-L),0,Q)},pe=r.colormodel[w.colormodel],Te=pe.colormodel||w.colormodel,ye=pe.fmt;for(A=0;A<_.w;A++){var ke=de(A),ze=de(A+1);if(ze!==ke&&!isNaN(ze)&&!isNaN(ke))for(var je=0;je<_.h;je++){var Ie=be(je),Ce=be(je+1);Ce===Ie||isNaN(Ce)||isNaN(Ie)||!ie(A,je)||(fe=w._scaler(ie(A,je)),he.fillStyle=fe?Te+"("+ye(fe).join(",")+")":"rgba(0,0,0,0)",he.fillRect(ke,Ie,ze-ke,Ce-Ie))}}return ue}})}},{"../../constants/xmlns_namespaces":780,"../../lib":803,"./constants":1139,"@plotly/d3":58}],1146:[function(h,G,X){"use strict";var i=h("@plotly/d3");G.exports=function(m){i.select(m).selectAll(".im image").style("opacity",function(b){return b[0].trace.opacity})}},{"@plotly/d3":58}],1147:[function(h,G,X){"use strict";var i=h("../../lib/extend").extendFlat,m=h("../../lib/extend").extendDeep,b=h("../../plot_api/edit_types").overrideAll,p=h("../../plots/font_attributes"),r=h("../../components/color/attributes"),u=h("../../plots/domain").attributes,c=h("../../plots/cartesian/layout_attributes"),l=h("../../plot_api/plot_template").templatedArray,f=h("../../constants/delta.js"),s=h("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,o=p({editType:"plot",colorEditType:"plot"}),d={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:r.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},g={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},y=l("step",m({},d,{range:g}));G.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:u({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:i({},o,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:s("value")},font:i({},o,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:s("value")},increasing:{symbol:{valType:"string",dflt:f.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:f.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:f.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:f.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:i({},o,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:m({},d,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:r.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:b({range:g,visible:i({},c.visible,{dflt:!0}),tickmode:c.tickmode,nticks:c.nticks,tick0:c.tick0,dtick:c.dtick,tickvals:c.tickvals,ticktext:c.ticktext,ticks:i({},c.ticks,{dflt:"outside"}),ticklen:c.ticklen,tickwidth:c.tickwidth,tickcolor:c.tickcolor,showticklabels:c.showticklabels,tickfont:p({}),tickangle:c.tickangle,tickformat:c.tickformat,tickformatstops:c.tickformatstops,tickprefix:c.tickprefix,showtickprefix:c.showtickprefix,ticksuffix:c.ticksuffix,showticksuffix:c.showticksuffix,separatethousands:c.separatethousands,exponentformat:c.exponentformat,minexponent:c.minexponent,showexponent:c.showexponent,editType:"plot"},"plot"),steps:y,threshold:{line:{color:i({},d.line.color,{}),width:i({},d.line.width,{dflt:1}),editType:"plot"},thickness:i({},d.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":665,"../../constants/delta.js":773,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../../plots/cartesian/axis_format_attributes":857,"../../plots/cartesian/layout_attributes":869,"../../plots/domain":882,"../../plots/font_attributes":883}],1148:[function(h,G,X){"use strict";var i=h("../../plots/plots");X.name="indicator",X.plot=function(m,b,p,r){i.plotBasePlot(X.name,m,b,p,r)},X.clean=function(m,b,p,r){i.cleanBasePlot(X.name,m,b,p,r)}},{"../../plots/plots":917}],1149:[function(h,G,X){"use strict";G.exports={calc:function(i,m){var b=[],p=m.value;"number"!=typeof m._lastValue&&(m._lastValue=m.value);var r=m._lastValue,u=r;return m._hasDelta&&"number"==typeof m.delta.reference&&(u=m.delta.reference),b[0]={y:p,lastY:r,delta:p-u,relativeDelta:(p-u)/u},b}}},{}],1150:[function(h,G,X){"use strict";G.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],1151:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./attributes"),b=h("../../plots/domain").defaults,p=h("../../plot_api/plot_template"),r=h("../../plots/array_container_defaults"),u=h("./constants.js"),c=h("../../plots/cartesian/tick_value_defaults"),l=h("../../plots/cartesian/tick_mark_defaults"),f=h("../../plots/cartesian/tick_label_defaults");function s(o,d){function g(y,v){return i.coerce(o,d,m.gauge.steps,y,v)}g("color"),g("line.color"),g("line.width"),g("range"),g("thickness")}G.exports={supplyDefaults:function(o,d,g,y){function v(R,S){return i.coerce(o,d,m,R,S)}b(d,y,v),v("mode"),d._hasNumber=-1!==d.mode.indexOf("number"),d._hasDelta=-1!==d.mode.indexOf("delta"),d._hasGauge=-1!==d.mode.indexOf("gauge");var _=v("value");d._range=[0,"number"==typeof _?1.5*_:1];var w,x,E,k,C,L,P=new Array(2);function A(R,S){return i.coerce(E,k,m.gauge,R,S)}function I(R,S){return i.coerce(C,L,m.gauge.axis,R,S)}if(d._hasNumber&&(v("number.valueformat"),v("number.font.color",y.font.color),v("number.font.family",y.font.family),v("number.font.size"),void 0===d.number.font.size&&(d.number.font.size=u.defaultNumberFontSize,P[0]=!0),v("number.prefix"),v("number.suffix"),w=d.number.font.size),d._hasDelta&&(v("delta.font.color",y.font.color),v("delta.font.family",y.font.family),v("delta.font.size"),void 0===d.delta.font.size&&(d.delta.font.size=(d._hasNumber?.5:1)*(w||u.defaultNumberFontSize),P[1]=!0),v("delta.reference",d.value),v("delta.relative"),v("delta.valueformat",d.delta.relative?"2%":""),v("delta.increasing.symbol"),v("delta.increasing.color"),v("delta.decreasing.symbol"),v("delta.decreasing.color"),v("delta.position"),x=d.delta.font.size),d._scaleNumbers=(!d._hasNumber||P[0])&&(!d._hasDelta||P[1])||!1,v("title.font.color",y.font.color),v("title.font.family",y.font.family),v("title.font.size",.25*(w||x||u.defaultNumberFontSize)),v("title.text"),d._hasGauge){(E=o.gauge)||(E={}),k=p.newContainer(d,"gauge"),A("shape"),(d._isBullet="bullet"===d.gauge.shape)||v("title.align","center"),(d._isAngular="angular"===d.gauge.shape)||v("align","center"),A("bgcolor",y.paper_bgcolor),A("borderwidth"),A("bordercolor"),A("bar.color"),A("bar.line.color"),A("bar.line.width"),A("bar.thickness",u.valueThickness*("bullet"===d.gauge.shape?.5:1)),r(E,k,{name:"steps",handleItemDefaults:s}),A("threshold.value"),A("threshold.thickness"),A("threshold.line.width"),A("threshold.line.color"),C={},E&&(C=E.axis||{}),L=p.newContainer(k,"axis"),I("visible"),d._range=I("range",d._range);var D={outerTicks:!0};c(C,L,I,"linear"),f(C,L,I,"linear",D),l(C,L,I,D)}else v("title.align","center"),v("align","center"),d._isAngular=d._isBullet=!1;d._length=null}}},{"../../lib":803,"../../plot_api/plot_template":843,"../../plots/array_container_defaults":849,"../../plots/cartesian/tick_label_defaults":876,"../../plots/cartesian/tick_mark_defaults":877,"../../plots/cartesian/tick_value_defaults":878,"../../plots/domain":882,"./attributes":1147,"./constants.js":1150}],1152:[function(h,G,X){"use strict";G.exports={moduleType:"trace",name:"indicator",basePlotModule:h("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:h("./attributes"),supplyDefaults:h("./defaults").supplyDefaults,calc:h("./calc").calc,plot:h("./plot"),meta:{}}},{"./attributes":1147,"./base_plot":1148,"./calc":1149,"./defaults":1151,"./plot":1153}],1153:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("d3-interpolate").interpolate,b=h("d3-interpolate").interpolateNumber,p=h("../../lib"),r=p.strScale,u=p.strTranslate,c=p.rad2deg,l=h("../../constants/alignment").MID_SHIFT,f=h("../../components/drawing"),s=h("./constants"),o=h("../../lib/svg_text_utils"),d=h("../../plots/cartesian/axes"),g=h("../../plots/cartesian/axis_defaults"),y=h("../../plots/cartesian/position_defaults"),v=h("../../plots/cartesian/layout_attributes"),_=h("../../components/color"),w={left:"start",center:"middle",right:"end"},x={left:0,center:.5,right:1},E=/[yzafpn\xb5mkMGTPEZY]/;function k(D){return D&&D.duration>0}function C(D){D.each(function(R){_.stroke(i.select(this),R.line.color)}).each(function(R){_.fill(i.select(this),R.color)}).style("stroke-width",function(R){return R.line.width})}function L(D,R,S){var N=D._fullLayout,B=p.extendFlat({type:"linear",ticks:"outside",range:S,showline:!0},R),H={type:"linear",_id:"x"+R._id},Y={letter:"x",font:N.font,noHover:!0,noTickson:!0};function Q(ne,ae){return p.coerce(B,H,v,ne,ae)}return g(B,H,Q,Y,N),y(B,H,Q,Y),H}function P(D,R,S){return[Math.min(R/D.width,S/D.height),D,R+"x"+S]}function A(D,R,S,N){var B=document.createElementNS("http://www.w3.org/2000/svg","text"),H=i.select(B);return H.text(D).attr("x",0).attr("y",0).attr("text-anchor",S).attr("data-unformatted",D).call(o.convertToTspans,N).call(f.font,R),f.bBox(H.node())}function I(D,R,S,N,B,H){var Y="_cache"+R;D[Y]&&D[Y].key===B||(D[Y]={key:B,value:S});var Q=p.aggNums(H,null,[D[Y].value,N],2);return D[Y].value=Q,Q}G.exports=function(D,R,S,N){var B,H=D._fullLayout;k(S)&&N&&(B=N()),p.makeTraceGroups(H._indicatorlayer,R,"trace").each(function(Y){var Q,ne,ae,te,K,q=Y[0].trace,re=i.select(this),V=q._hasGauge,W=q._isAngular,Z=q._isBullet,oe=q.domain,ie={w:H._size.w*(oe.x[1]-oe.x[0]),h:H._size.h*(oe.y[1]-oe.y[0]),l:H._size.l+H._size.w*oe.x[0],r:H._size.r+H._size.w*(1-oe.x[1]),t:H._size.t+H._size.h*(1-oe.y[1]),b:H._size.b+H._size.h*oe.y[0]},ue=ie.l+ie.w/2,fe=ie.t+ie.h/2,he=Math.min(ie.w/2,ie.h),de=s.innerRadius*he,be=q.align||"center";if(ne=fe,V){if(W&&(Q=ue,ne=fe+he/2,ae=function(Ce){return _e=Ce,[(we=.9*de)/Math.sqrt(_e.width/2*(_e.width/2)+_e.height*_e.height),_e,we];var _e,we}),Z){var pe=s.bulletPadding,Te=1-s.bulletNumberDomainSize+pe;Q=ie.l+(Te+(1-Te)*x[be])*ie.w,ae=function(Ce){return P(Ce,(s.bulletNumberDomainSize-pe)*ie.w,ie.h)}}}else Q=ie.l+x[be]*ie.w,ae=function(Ce){return P(Ce,ie.w,ie.h)};(function(Ce,_e,we,Se){var Oe,Be,He,Xe=we[0].trace,nt=Se.numbersX,et=Se.numbersY,qe=Xe.align||"center",Ye=w[qe],ot=Se.transitionOpts,at=Se.onComplete,ct=p.ensureSingle(_e,"g","numbers"),_t=[];Xe._hasNumber&&_t.push("number"),Xe._hasDelta&&(_t.push("delta"),"left"===Xe.delta.position&&_t.reverse());var xt=ct.selectAll("text").data(_t);function Ht(it,qt,Ge,Pe){if(!it.match("s")||Ge>=0==Pe>=0||qt(Ge).slice(-1).match(E)||qt(Pe).slice(-1).match(E))return qt;var Ee=it.slice().replace("s","f").replace(/\d+/,function(Ve){return parseInt(Ve)-1}),Ne=L(Ce,{tickformat:Ee});return function(Ve){return Math.abs(Ve)<1?d.tickText(Ne,Ve).text:qt(Ve)}}xt.enter().append("text"),xt.attr("text-anchor",function(){return Ye}).attr("class",function(it){return it}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),xt.exit().remove();var At,ht=Xe.mode+Xe.align;if(Xe._hasDelta&&(At=function(){var it=L(Ce,{tickformat:Xe.delta.valueformat},Xe._range);it.setScale(),d.prepTicks(it);var qt=function(Ke){return d.tickText(it,Ke).text},Ge=function(Ke){return Xe.delta.relative?Ke.relativeDelta:Ke.delta},Pe=function(Ke,bt){return 0===Ke||"number"!=typeof Ke||isNaN(Ke)?"-":(Ke>0?Xe.delta.increasing.symbol:Xe.delta.decreasing.symbol)+bt(Ke)},Ee=function(Ke){return Ke.delta>=0?Xe.delta.increasing.color:Xe.delta.decreasing.color};void 0===Xe._deltaLastValue&&(Xe._deltaLastValue=Ge(we[0]));var Ne=ct.select("text.delta");function Ve(){Ne.text(Pe(Ge(we[0]),qt)).call(_.fill,Ee(we[0])).call(o.convertToTspans,Ce)}return Ne.call(f.font,Xe.delta.font).call(_.fill,Ee({delta:Xe._deltaLastValue})),k(ot)?Ne.transition().duration(ot.duration).ease(ot.easing).tween("text",function(){var Ke=i.select(this),bt=Ge(we[0]),gt=Xe._deltaLastValue,pt=Ht(Xe.delta.valueformat,qt,gt,bt),St=b(gt,bt);return Xe._deltaLastValue=bt,function(jt){Ke.text(Pe(St(jt),pt)),Ke.call(_.fill,Ee({delta:St(jt)}))}}).each("end",function(){Ve(),at&&at()}).each("interrupt",function(){Ve(),at&&at()}):Ve(),Be=A(Pe(Ge(we[0]),qt),Xe.delta.font,Ye,Ce),Ne}(),ht+=Xe.delta.position+Xe.delta.font.size+Xe.delta.font.family+Xe.delta.valueformat,ht+=Xe.delta.increasing.symbol+Xe.delta.decreasing.symbol,He=Be),Xe._hasNumber&&(function(){var it=L(Ce,{tickformat:Xe.number.valueformat},Xe._range);it.setScale(),d.prepTicks(it);var qt=function(Ve){return d.tickText(it,Ve).text},Ge=Xe.number.suffix,Pe=Xe.number.prefix,Ee=ct.select("text.number");function Ne(){var Ve="number"==typeof we[0].y?Pe+qt(we[0].y)+Ge:"-";Ee.text(Ve).call(f.font,Xe.number.font).call(o.convertToTspans,Ce)}k(ot)?Ee.transition().duration(ot.duration).ease(ot.easing).each("end",function(){Ne(),at&&at()}).each("interrupt",function(){Ne(),at&&at()}).attrTween("text",function(){var Ve=i.select(this),Ke=b(we[0].lastY,we[0].y);Xe._lastValue=we[0].y;var bt=Ht(Xe.number.valueformat,qt,we[0].lastY,we[0].y);return function(gt){Ve.text(Pe+bt(Ke(gt))+Ge)}}):Ne(),Oe=A(Pe+qt(we[0].y)+Ge,Xe.number.font,Ye,Ce)}(),ht+=Xe.number.font.size+Xe.number.font.family+Xe.number.valueformat+Xe.number.suffix+Xe.number.prefix,He=Oe),Xe._hasDelta&&Xe._hasNumber){var st,Bt,gn=[(Oe.left+Oe.right)/2,(Oe.top+Oe.bottom)/2],hn=[(Be.left+Be.right)/2,(Be.top+Be.bottom)/2],We=.75*Xe.delta.font.size;"left"===Xe.delta.position&&(st=I(Xe,"deltaPos",0,-1*(Oe.width*x[Xe.align]+Be.width*(1-x[Xe.align])+We),ht,Math.min),Bt=gn[1]-hn[1],He={width:Oe.width+Be.width+We,height:Math.max(Oe.height,Be.height),left:Be.left+st,right:Oe.right,top:Math.min(Oe.top,Be.top+Bt),bottom:Math.max(Oe.bottom,Be.bottom+Bt)}),"right"===Xe.delta.position&&(st=I(Xe,"deltaPos",0,Oe.width*(1-x[Xe.align])+Be.width*x[Xe.align]+We,ht,Math.max),Bt=gn[1]-hn[1],He={width:Oe.width+Be.width+We,height:Math.max(Oe.height,Be.height),left:Oe.left,right:Be.right+st,top:Math.min(Oe.top,Be.top+Bt),bottom:Math.max(Oe.bottom,Be.bottom+Bt)}),"bottom"===Xe.delta.position&&(st=null,Bt=Be.height,He={width:Math.max(Oe.width,Be.width),height:Oe.height+Be.height,left:Math.min(Oe.left,Be.left),right:Math.max(Oe.right,Be.right),top:Oe.bottom-Oe.height,bottom:Oe.bottom+Be.height}),"top"===Xe.delta.position&&(st=null,Bt=Oe.top,He={width:Math.max(Oe.width,Be.width),height:Oe.height+Be.height,left:Math.min(Oe.left,Be.left),right:Math.max(Oe.right,Be.right),top:Oe.bottom-Oe.height-Be.height,bottom:Oe.bottom}),At.attr({dx:st,dy:Bt})}(Xe._hasNumber||Xe._hasDelta)&&ct.attr("transform",function(){var qt,it=Se.numbersScaler(He),Ge=I(Xe,"numbersScale",1,it[0],ht+=it[2],Math.min);Xe._scaleNumbers||(Ge=1),Xe._numbersTop=Ge*He.top+(qt=Xe._isAngular?et-Ge*He.bottom:et-Ge*(He.top+He.bottom)/2);var Pe=He[qe];"center"===qe&&(Pe=(He.left+He.right)/2);var Ee=nt-Ge*Pe;return Ee=I(Xe,"numbersTranslate",0,Ee,ht,Math.max),u(Ee,qt)+r(Ge)})})(D,re,Y,{numbersX:Q,numbersY:ne,numbersScaler:ae,transitionOpts:S,onComplete:B}),V&&(te={range:q.gauge.axis.range,color:q.gauge.bgcolor,line:{color:q.gauge.bordercolor,width:0},thickness:1},K={range:q.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:q.gauge.bordercolor,width:q.gauge.borderwidth},thickness:1});var ye=re.selectAll("g.angular").data(W?Y:[]);ye.exit().remove();var ke=re.selectAll("g.angularaxis").data(W?Y:[]);ke.exit().remove(),W&&function(Ce,_e,we,Se){var Oe,Be,He,Xe,nt=we[0].trace,et=Se.size,qe=Se.radius,Ye=Se.innerRadius,ot=Se.gaugeBg,at=Se.gaugeOutline,ct=[et.l+et.w/2,et.t+et.h/2+qe/2],_t=Se.gauge,xt=Se.layer,Ht=Se.transitionOpts,At=Se.onComplete,ht=Math.PI/2;function st(Vt){var mt=nt.gauge.axis.range[0],Wt=(Vt-mt)/(nt.gauge.axis.range[1]-mt)*Math.PI-ht;return Wt<-ht?-ht:Wt>ht?ht:Wt}function Bt(Vt){return i.svg.arc().innerRadius((Ye+qe)/2-Vt/2*(qe-Ye)).outerRadius((Ye+qe)/2+Vt/2*(qe-Ye)).startAngle(-ht)}function gn(Vt){Vt.attr("d",function(mt){return Bt(mt.thickness).startAngle(st(mt.range[0])).endAngle(st(mt.range[1]))()})}_t.enter().append("g").classed("angular",!0),_t.attr("transform",u(ct[0],ct[1])),xt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),xt.selectAll("g.xangularaxistick,path,text").remove(),(Oe=L(Ce,nt.gauge.axis)).type="linear",Oe.range=nt.gauge.axis.range,Oe._id="xangularaxis",Oe.ticklabeloverflow="allow",Oe.setScale();var hn=function(Vt){return(Oe.range[0]-Vt.x)/(Oe.range[1]-Oe.range[0])*Math.PI+Math.PI},We={},it=d.makeLabelFns(Oe,0).labelStandoff;We.xFn=function(Vt){var mt=hn(Vt);return Math.cos(mt)*it},We.yFn=function(Vt){var mt=hn(Vt),Wt=Math.sin(mt)>0?.2:1;return-Math.sin(mt)*(it+Vt.fontSize*Wt)+Math.abs(Math.cos(mt))*(Vt.fontSize*l)},We.anchorFn=function(Vt){var mt=hn(Vt),Wt=Math.cos(mt);return Math.abs(Wt)<.1?"middle":Wt>0?"start":"end"},We.heightFn=function(Vt,mt,Wt){var Kt=hn(Vt);return-.5*(1+Math.sin(Kt))*Wt};var qt=function(Vt){return u(ct[0]+qe*Math.cos(Vt),ct[1]-qe*Math.sin(Vt))};He=function(Vt){return qt(hn(Vt))},Be=d.calcTicks(Oe),Xe=d.getTickSigns(Oe)[2],Oe.visible&&(d.drawTicks(Ce,Oe,{vals:Be,layer:xt,path:"M"+(Xe="inside"===Oe.ticks?-1:1)*((Oe.linewidth||1)/2)+",0h"+Xe*Oe.ticklen,transFn:function(Vt){var mt=hn(Vt);return qt(mt)+"rotate("+-c(mt)+")"}}),d.drawLabels(Ce,Oe,{vals:Be,layer:xt,transFn:He,labelFns:We}));var Pe=[ot].concat(nt.gauge.steps),Ee=_t.selectAll("g.bg-arc").data(Pe);Ee.enter().append("g").classed("bg-arc",!0).append("path"),Ee.select("path").call(gn).call(C),Ee.exit().remove();var Ne=Bt(nt.gauge.bar.thickness),Ve=_t.selectAll("g.value-arc").data([nt.gauge.bar]);Ve.enter().append("g").classed("value-arc",!0).append("path");var bt,gt,pt,Ke=Ve.select("path");k(Ht)?(Ke.transition().duration(Ht.duration).ease(Ht.easing).each("end",function(){At&&At()}).each("interrupt",function(){At&&At()}).attrTween("d",(bt=Ne,gt=st(we[0].lastY),pt=st(we[0].y),function(){var Vt=m(gt,pt);return function(mt){return bt.endAngle(Vt(mt))()}})),nt._lastValue=we[0].y):Ke.attr("d","number"==typeof we[0].y?Ne.endAngle(st(we[0].y)):"M0,0Z"),Ke.call(C),Ve.exit().remove(),Pe=[];var St=nt.gauge.threshold.value;(St||0===St)&&Pe.push({range:[St,St],color:nt.gauge.threshold.color,line:{color:nt.gauge.threshold.line.color,width:nt.gauge.threshold.line.width},thickness:nt.gauge.threshold.thickness});var jt=_t.selectAll("g.threshold-arc").data(Pe);jt.enter().append("g").classed("threshold-arc",!0).append("path"),jt.select("path").call(gn).call(C),jt.exit().remove();var Lt=_t.selectAll("g.gauge-outline").data([at]);Lt.enter().append("g").classed("gauge-outline",!0).append("path"),Lt.select("path").call(gn).call(C),Lt.exit().remove()}(D,0,Y,{radius:he,innerRadius:de,gauge:ye,layer:ke,size:ie,gaugeBg:te,gaugeOutline:K,transitionOpts:S,onComplete:B});var ze=re.selectAll("g.bullet").data(Z?Y:[]);ze.exit().remove();var je=re.selectAll("g.bulletaxis").data(Z?Y:[]);je.exit().remove(),Z&&function(Ce,_e,we,Se){var Oe,Be,He,Xe,nt,et=we[0].trace,qe=Se.gauge,Ye=Se.layer,ot=Se.gaugeBg,at=Se.gaugeOutline,ct=Se.size,_t=et.domain,xt=Se.transitionOpts,Ht=Se.onComplete;qe.enter().append("g").classed("bullet",!0),qe.attr("transform",u(ct.l,ct.t)),Ye.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Ye.selectAll("g.xbulletaxistick,path,text").remove();var At=ct.h,ht=et.gauge.bar.thickness*At,st=_t.x[0],Bt=_t.x[0]+(_t.x[1]-_t.x[0])*(et._hasNumber||et._hasDelta?1-s.bulletNumberDomainSize:1);function gn(Ee){Ee.attr("width",function(Ne){return Math.max(0,Oe.c2p(Ne.range[1])-Oe.c2p(Ne.range[0]))}).attr("x",function(Ne){return Oe.c2p(Ne.range[0])}).attr("y",function(Ne){return.5*(1-Ne.thickness)*At}).attr("height",function(Ne){return Ne.thickness*At})}(Oe=L(Ce,et.gauge.axis))._id="xbulletaxis",Oe.domain=[st,Bt],Oe.setScale(),Be=d.calcTicks(Oe),He=d.makeTransTickFn(Oe),Xe=d.getTickSigns(Oe)[2],nt=ct.t+ct.h,Oe.visible&&(d.drawTicks(Ce,Oe,{vals:"inside"===Oe.ticks?d.clipEnds(Oe,Be):Be,layer:Ye,path:d.makeTickPath(Oe,nt,Xe),transFn:He}),d.drawLabels(Ce,Oe,{vals:Be,layer:Ye,transFn:He,labelFns:d.makeLabelFns(Oe,nt)}));var hn=[ot].concat(et.gauge.steps),We=qe.selectAll("g.bg-bullet").data(hn);We.enter().append("g").classed("bg-bullet",!0).append("rect"),We.select("rect").call(gn).call(C),We.exit().remove();var it=qe.selectAll("g.value-bullet").data([et.gauge.bar]);it.enter().append("g").classed("value-bullet",!0).append("rect"),it.select("rect").attr("height",ht).attr("y",(At-ht)/2).call(C),k(xt)?it.select("rect").transition().duration(xt.duration).ease(xt.easing).each("end",function(){Ht&&Ht()}).each("interrupt",function(){Ht&&Ht()}).attr("width",Math.max(0,Oe.c2p(Math.min(et.gauge.axis.range[1],we[0].y)))):it.select("rect").attr("width","number"==typeof we[0].y?Math.max(0,Oe.c2p(Math.min(et.gauge.axis.range[1],we[0].y))):0),it.exit().remove();var qt=we.filter(function(){return et.gauge.threshold.value||0===et.gauge.threshold.value}),Ge=qe.selectAll("g.threshold-bullet").data(qt);Ge.enter().append("g").classed("threshold-bullet",!0).append("line"),Ge.select("line").attr("x1",Oe.c2p(et.gauge.threshold.value)).attr("x2",Oe.c2p(et.gauge.threshold.value)).attr("y1",(1-et.gauge.threshold.thickness)/2*At).attr("y2",(1-(1-et.gauge.threshold.thickness)/2)*At).call(_.stroke,et.gauge.threshold.line.color).style("stroke-width",et.gauge.threshold.line.width),Ge.exit().remove();var Pe=qe.selectAll("g.gauge-outline").data([at]);Pe.enter().append("g").classed("gauge-outline",!0).append("rect"),Pe.select("rect").call(gn).call(C),Pe.exit().remove()}(D,0,Y,{gauge:ze,layer:je,size:ie,gaugeBg:te,gaugeOutline:K,transitionOpts:S,onComplete:B});var Ie=re.selectAll("text.title").data(Y);Ie.exit().remove(),Ie.enter().append("text").classed("title",!0),Ie.attr("text-anchor",function(){return Z?w.right:w[q.title.align]}).text(q.title.text).call(f.font,q.title.font).call(o.convertToTspans,D),Ie.attr("transform",function(){var Ce,_e=ie.l+ie.w*x[q.title.align],we=s.titlePadding,Se=f.bBox(Ie.node());return V?(W&&(Ce=q.gauge.axis.visible?f.bBox(ke.node()).top-we-Se.bottom:ie.t+ie.h/2-he/2-Se.bottom-we),Z&&(Ce=ne-(Se.top+Se.bottom)/2,_e=ie.l-s.bulletPadding*ie.w)):Ce=q._numbersTop-we-Se.bottom,u(_e,Ce)})})}},{"../../components/color":666,"../../components/drawing":688,"../../constants/alignment":771,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"../../plots/cartesian/axis_defaults":856,"../../plots/cartesian/layout_attributes":869,"../../plots/cartesian/position_defaults":872,"./constants":1150,"@plotly/d3":58,"d3-interpolate":171}],1154:[function(h,G,X){"use strict";var i=h("../../components/colorscale/attributes"),m=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=h("../../plots/template_attributes").hovertemplateAttrs,p=h("../mesh3d/attributes"),r=h("../../plots/attributes"),u=h("../../lib/extend").extendFlat,c=h("../../plot_api/edit_types").overrideAll,l=G.exports=c(u({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:b(),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),valuehoverformat:m("value",1),showlegend:u({},r.showlegend,{dflt:!1})},i("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:p.opacity,lightposition:p.lightposition,lighting:p.lighting,flatshading:p.flatshading,contour:p.contour,hoverinfo:u({},r.hoverinfo)}),"calc","nested");l.flatshading.dflt=!0,l.lighting.facenormalsepsilon.dflt=0,l.x.editType=l.y.editType=l.z.editType=l.value.editType="calc+clearAxisTypes",l.transforms=void 0},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../mesh3d/attributes":1159}],1155:[function(h,G,X){"use strict";var i=h("../../components/colorscale/calc"),m=h("../streamtube/calc").processGrid,b=h("../streamtube/calc").filter;G.exports=function(p,r){r._len=Math.min(r.x.length,r.y.length,r.z.length,r.value.length),r._x=b(r.x,r._len),r._y=b(r.y,r._len),r._z=b(r.z,r._len),r._value=b(r.value,r._len);var u=m(r);r._gridFill=u.fill,r._Xs=u.Xs,r._Ys=u.Ys,r._Zs=u.Zs,r._len=u.len;for(var c=1/0,l=-1/0,f=0;f<r._len;f++){var s=r._value[f];c=Math.min(c,s),l=Math.max(l,s)}r._minValues=c,r._maxValues=l,r._vMin=null==r.isomin?c:r.isomin,r._vMax=void 0===r.isomax||null===r.isomin?l:r.isomax,i(p,r,{vals:[r._vMin,r._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":674,"../streamtube/calc":1326}],1156:[function(h,G,X){"use strict";var i=h("gl-mesh3d"),m=h("../../lib/gl_format_color").parseColorScale,b=h("../../lib/str2rgbarray"),p=h("../../components/colorscale").extractOpts,r=h("../../plots/gl3d/zip3"),u=function(o,d){for(var g=d.length-1;g>0;g--){var y=Math.min(d[g],d[g-1]),v=Math.max(d[g],d[g-1]);if(v>y&&y<o&&o<=v)return{id:g,distRatio:(v-o)/(v-y)}}return{id:0,distRatio:0}};function c(o,d,g){this.scene=o,this.uid=g,this.mesh=d,this.name="",this.data=null,this.showContour=!1}var l=c.prototype;l.handlePick=function(o){if(o.object===this.mesh){var d=o.data.index,y=this.data._meshY[d],v=this.data._meshZ[d],_=this.data._Ys.length,w=this.data._Zs.length,x=u(this.data._meshX[d],this.data._Xs).id,E=u(y,this.data._Ys).id,k=u(v,this.data._Zs).id,C=o.index=k+w*E+w*_*x;o.traceCoordinate=[this.data._meshX[C],this.data._meshY[C],this.data._meshZ[C],this.data._value[C]];var L=this.data.hovertext||this.data.text;return Array.isArray(L)&&void 0!==L[C]?o.textLabel=L[C]:L&&(o.textLabel=L),!0}},l.update=function(o){var d=this.scene,g=d.fullSceneLayout;function y(w,x,E,k){return x.map(function(C){return w.d2l(C,0,k)*E})}this.data=s(o);var v={positions:r(y(g.xaxis,o._meshX,d.dataScale[0],o.xcalendar),y(g.yaxis,o._meshY,d.dataScale[1],o.ycalendar),y(g.zaxis,o._meshZ,d.dataScale[2],o.zcalendar)),cells:r(o._meshI,o._meshJ,o._meshK),lightPosition:[o.lightposition.x,o.lightposition.y,o.lightposition.z],ambient:o.lighting.ambient,diffuse:o.lighting.diffuse,specular:o.lighting.specular,roughness:o.lighting.roughness,fresnel:o.lighting.fresnel,vertexNormalsEpsilon:o.lighting.vertexnormalsepsilon,faceNormalsEpsilon:o.lighting.facenormalsepsilon,opacity:o.opacity,contourEnable:o.contour.show,contourColor:b(o.contour.color).slice(0,3),contourWidth:o.contour.width,useFacetNormals:o.flatshading},_=p(o);v.vertexIntensity=o._meshIntensity,v.vertexIntensityBounds=[_.min,_.max],v.colormap=m(o),this.mesh.update(v)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var f=["xyz","xzy","yxz","yzx","zxy","zyx"];function s(o){o._meshI=[],o._meshJ=[],o._meshK=[];var d,g,y,v,_,w,x,E=o.surface.show,k=o.spaceframe.show,C=o.surface.fill,L=o.spaceframe.fill,P=!1,A=!1,I=0,D=o._Xs,R=o._Ys,S=o._Zs,N=D.length,B=R.length,H=S.length,Y=f.indexOf(o._gridFill.replace(/-/g,"").replace(/\+/g,"")),Q=function(qe,Ye,ot){switch(Y){case 5:return ot+H*Ye+H*B*qe;case 4:return ot+H*qe+H*N*Ye;case 3:return Ye+B*ot+B*H*qe;case 2:return Ye+B*qe+B*N*ot;case 1:return qe+N*ot+N*H*Ye;default:return qe+N*Ye+N*B*ot}},ne=o._minValues,ae=o._maxValues,te=o._vMin,K=o._vMax;function q(qe,Ye,ot){for(var at=w.length,ct=g;ct<at;ct++)if(qe===y[ct]&&Ye===v[ct]&&ot===_[ct])return ct;return-1}function re(){g=d}function V(){y=[],v=[],_=[],w=[],d=0,re()}function W(qe,Ye,ot,at){return y.push(qe),v.push(Ye),_.push(ot),w.push(at),++d-1}function Z(qe,Ye,ot){for(var at=[],ct=0;ct<qe.length;ct++)at[ct]=qe[ct]*(1-ot)+ot*Ye[ct];return at}function oe(qe){x=qe}function ie(qe,Ye){return"all"===qe||null===qe||qe.indexOf(Ye)>-1}function ue(qe,Ye){return null===qe?Ye:qe}function fe(qe,Ye,ot){re();var ct,_t,Ge,Pe,Ee,Ne,Ve,Ke,bt,gt,pt,St,jt,Lt,Vt,xt=[Ye],Ht=[ot];if(x>=1)xt=[Ye],Ht=[ot];else if(x>0){var At=(Pe=ot,gt=Z(Ke=function(mt,Wt,Kt){for(var rn=[],Yt=0;Yt<mt.length;Yt++)rn[Yt]=(mt[Yt]+Wt[Yt]+Kt[Yt])/3;return rn}(Ee=(Ge=Ye)[0],Ne=Ge[1],Ve=Ge[2]),Ee,bt=Math.sqrt(1-x)),{xyzv:[[Ee,Ne,pt=Z(Ke,Ne,bt)],[pt,gt,Ee],[Ne,Ve,St=Z(Ke,Ve,bt)],[St,pt,Ne],[Ve,Ee,gt],[gt,St,Ve]],abc:[[jt=Pe[0],Lt=Pe[1],-1],[-1,-1,jt],[Lt,Vt=Pe[2],-1],[-1,-1,Lt],[Vt,jt,-1],[-1,-1,Vt]]});xt=At.xyzv,Ht=At.abc}for(var ht=0;ht<xt.length;ht++){Ye=xt[ht],ot=Ht[ht];for(var st=[],Bt=0;Bt<3;Bt++){var gn=Ye[Bt][0],hn=Ye[Bt][1],We=Ye[Bt][2],it=Ye[Bt][3],qt=ot[Bt]>-1?ot[Bt]:q(gn,hn,We);st[Bt]=qt>-1?qt:W(gn,hn,We,ue(qe,it))}ct=st[1],_t=st[2],o._meshI.push(st[0]),o._meshJ.push(ct),o._meshK.push(_t),++I}}function he(qe,Ye,ot,at){var ct=qe[3];ct<ot&&(ct=ot),ct>at&&(ct=at);for(var _t=(qe[3]-ct)/(qe[3]-Ye[3]+1e-9),xt=[],Ht=0;Ht<4;Ht++)xt[Ht]=(1-_t)*qe[Ht]+_t*Ye[Ht];return xt}function de(qe,Ye,ot){return qe>=Ye&&qe<=ot}function be(qe){var Ye=.001*(K-te);return qe>=te-Ye&&qe<=K+Ye}function pe(qe){for(var Ye=[],ot=0;ot<4;ot++){var at=qe[ot];Ye.push([o._x[at],o._y[at],o._z[at],o._value[at]])}return Ye}function Te(qe,Ye,ot,at,ct,_t){_t||(_t=1),ot=[-1,-1,-1];var xt=!1,Ht=[de(Ye[0][3],at,ct),de(Ye[1][3],at,ct),de(Ye[2][3],at,ct)];if(!Ht[0]&&!Ht[1]&&!Ht[2])return!1;var At=function(st,Bt,gn){return be(Bt[0][3])&&be(Bt[1][3])&&be(Bt[2][3])?(fe(st,Bt,gn),!0):_t<3&&Te(st,Bt,gn,te,K,++_t)};if(Ht[0]&&Ht[1]&&Ht[2])return At(qe,Ye,ot)||xt;var ht=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(st){if(Ht[st[0]]&&Ht[st[1]]&&!Ht[st[2]]){var Bt=Ye[st[0]],gn=Ye[st[1]],hn=Ye[st[2]],We=he(hn,Bt,at,ct),it=he(hn,gn,at,ct);xt=At(qe,[it,We,Bt],[-1,-1,ot[st[0]]])||xt,xt=At(qe,[Bt,gn,it],[ot[st[0]],ot[st[1]],-1])||xt,ht=!0}}),ht||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(st){if(Ht[st[0]]&&!Ht[st[1]]&&!Ht[st[2]]){var Bt=Ye[st[0]],hn=Ye[st[2]],We=he(Ye[st[1]],Bt,at,ct),it=he(hn,Bt,at,ct);xt=At(qe,[it,We,Bt],[-1,-1,ot[st[0]]])||xt,ht=!0}}),xt}function ye(qe,Ye,ot,at){var At,ht,st,Bt,ct=!1,_t=pe(Ye),xt=[de(_t[0][3],ot,at),de(_t[1][3],ot,at),de(_t[2][3],ot,at),de(_t[3][3],ot,at)];if(!(xt[0]||xt[1]||xt[2]||xt[3]))return ct;if(xt[0]&&xt[1]&&xt[2]&&xt[3])return A&&(At=qe,ht=_t,st=Ye,(Bt=function(gn,hn,We){fe(At,[ht[gn],ht[hn],ht[We]],[st[gn],st[hn],st[We]])})(0,1,2),Bt(3,0,1),Bt(2,3,0),ct=void Bt(1,2,3)||ct),ct;var Ht=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(At){if(xt[At[0]]&&xt[At[1]]&&xt[At[2]]&&!xt[At[3]]){var ht=_t[At[0]],st=_t[At[1]],Bt=_t[At[2]],gn=_t[At[3]];if(A)ct=fe(qe,[ht,st,Bt],[Ye[At[0]],Ye[At[1]],Ye[At[2]]])||ct;else{var hn=he(gn,ht,ot,at),We=he(gn,st,ot,at),it=he(gn,Bt,ot,at);ct=fe(null,[hn,We,it],[-1,-1,-1])||ct}Ht=!0}}),Ht||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(At){if(xt[At[0]]&&xt[At[1]]&&!xt[At[2]]&&!xt[At[3]]){var ht=_t[At[0]],st=_t[At[1]],Bt=_t[At[2]],gn=_t[At[3]],hn=he(Bt,ht,ot,at),We=he(Bt,st,ot,at),it=he(gn,st,ot,at),qt=he(gn,ht,ot,at);A?(ct=fe(qe,[ht,qt,hn],[Ye[At[0]],-1,-1])||ct,ct=fe(qe,[st,We,it],[Ye[At[1]],-1,-1])||ct):(null,Pe=[hn,We,it,qt],Ee=[-1,-1,-1,-1],(Ne=function(Ve,Ke,bt){fe(null,[Pe[Ve],Pe[Ke],Pe[bt]],[Ee[Ve],Ee[Ke],Ee[bt]])})(0,1,2),ct=void Ne(2,3,0)||ct),Ht=!0}var Pe,Ee,Ne}),Ht||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(At){if(xt[At[0]]&&!xt[At[1]]&&!xt[At[2]]&&!xt[At[3]]){var ht=_t[At[0]],Bt=_t[At[2]],gn=_t[At[3]],hn=he(_t[At[1]],ht,ot,at),We=he(Bt,ht,ot,at),it=he(gn,ht,ot,at);A?(ct=fe(qe,[ht,hn,We],[Ye[At[0]],-1,-1])||ct,ct=fe(qe,[ht,We,it],[Ye[At[0]],-1,-1])||ct,ct=fe(qe,[ht,it,hn],[Ye[At[0]],-1,-1])||ct):ct=fe(null,[hn,We,it],[-1,-1,-1])||ct,Ht=!0}})),ct}function ke(qe,Ye,ot,at,ct,_t,xt,Ht,At,ht,st){var Bt=!1;return P&&(ie(qe,"A")&&(Bt=ye(null,[Ye,ot,at,_t],ht,st)||Bt),ie(qe,"B")&&(Bt=ye(null,[ot,at,ct,At],ht,st)||Bt),ie(qe,"C")&&(Bt=ye(null,[ot,_t,xt,At],ht,st)||Bt),ie(qe,"D")&&(Bt=ye(null,[at,_t,Ht,At],ht,st)||Bt),ie(qe,"E")&&(Bt=ye(null,[ot,at,_t,At],ht,st)||Bt)),A&&(Bt=ye(qe,[ot,at,_t,At],ht,st)||Bt),Bt}function ze(qe,Ye,ot,at,ct,_t,xt,Ht){return[!0===Ht[0]||Te(qe,pe([Ye,ot,at]),[Ye,ot,at],_t,xt),!0===Ht[1]||Te(qe,pe([at,ct,Ye]),[at,ct,Ye],_t,xt)]}function je(qe,Ye,ot,at,ct,_t,xt,Ht,At){return Ht?ze(qe,Ye,ot,ct,at,_t,xt,At):ze(qe,ot,ct,at,Ye,_t,xt,At)}function Ie(qe,Ye,ot,at,ct,_t,xt){var Ht,At,ht,st,Bt=!1,gn=function(){Bt=Te(qe,[Ht,At,ht],[-1,-1,-1],ct,_t)||Bt,Bt=Te(qe,[ht,st,Ht],[-1,-1,-1],ct,_t)||Bt},hn=xt[0],We=xt[1],it=xt[2];return hn&&(Ht=Z(pe([Q(Ye,ot-0,at-0)])[0],pe([Q(Ye-1,ot-0,at-0)])[0],hn),At=Z(pe([Q(Ye,ot-0,at-1)])[0],pe([Q(Ye-1,ot-0,at-1)])[0],hn),ht=Z(pe([Q(Ye,ot-1,at-1)])[0],pe([Q(Ye-1,ot-1,at-1)])[0],hn),st=Z(pe([Q(Ye,ot-1,at-0)])[0],pe([Q(Ye-1,ot-1,at-0)])[0],hn),gn()),We&&(Ht=Z(pe([Q(Ye-0,ot,at-0)])[0],pe([Q(Ye-0,ot-1,at-0)])[0],We),At=Z(pe([Q(Ye-0,ot,at-1)])[0],pe([Q(Ye-0,ot-1,at-1)])[0],We),ht=Z(pe([Q(Ye-1,ot,at-1)])[0],pe([Q(Ye-1,ot-1,at-1)])[0],We),st=Z(pe([Q(Ye-1,ot,at-0)])[0],pe([Q(Ye-1,ot-1,at-0)])[0],We),gn()),it&&(Ht=Z(pe([Q(Ye-0,ot-0,at)])[0],pe([Q(Ye-0,ot-0,at-1)])[0],it),At=Z(pe([Q(Ye-0,ot-1,at)])[0],pe([Q(Ye-0,ot-1,at-1)])[0],it),ht=Z(pe([Q(Ye-1,ot-1,at)])[0],pe([Q(Ye-1,ot-1,at-1)])[0],it),st=Z(pe([Q(Ye-1,ot-0,at)])[0],pe([Q(Ye-1,ot-0,at-1)])[0],it),gn()),Bt}function Ce(qe,Ye,ot,at,ct,_t,xt,Ht,At,ht,st,Bt){var gn=qe;return Bt?(P&&"even"===qe&&(gn=null),ke(gn,Ye,ot,at,ct,_t,xt,Ht,At,ht,st)):(P&&"odd"===qe&&(gn=null),ke(gn,At,Ht,xt,_t,ct,at,ot,Ye,ht,st))}function _e(qe,Ye,ot,at,ct){for(var _t=[],xt=0,Ht=0;Ht<Ye.length;Ht++)for(var At=Ye[Ht],ht=1;ht<H;ht++)for(var st=1;st<B;st++)_t.push(je(qe,Q(At,st-1,ht-1),Q(At,st-1,ht),Q(At,st,ht-1),Q(At,st,ht),ot,at,(At+st+ht)%2,ct&&ct[xt]?ct[xt]:[])),xt++;return _t}function we(qe,Ye,ot,at,ct){for(var _t=[],xt=0,Ht=0;Ht<Ye.length;Ht++)for(var At=Ye[Ht],ht=1;ht<N;ht++)for(var st=1;st<H;st++)_t.push(je(qe,Q(ht-1,At,st-1),Q(ht,At,st-1),Q(ht-1,At,st),Q(ht,At,st),ot,at,(ht+At+st)%2,ct&&ct[xt]?ct[xt]:[])),xt++;return _t}function Se(qe,Ye,ot,at,ct){for(var _t=[],xt=0,Ht=0;Ht<Ye.length;Ht++)for(var At=Ye[Ht],ht=1;ht<B;ht++)for(var st=1;st<N;st++)_t.push(je(qe,Q(st-1,ht-1,At),Q(st-1,ht,At),Q(st,ht-1,At),Q(st,ht,At),ot,at,(st+ht+At)%2,ct&&ct[xt]?ct[xt]:[])),xt++;return _t}function Oe(qe,Ye,ot){for(var at=1;at<H;at++)for(var ct=1;ct<B;ct++)for(var _t=1;_t<N;_t++)Ce(qe,Q(_t-1,ct-1,at-1),Q(_t-1,ct-1,at),Q(_t-1,ct,at-1),Q(_t-1,ct,at),Q(_t,ct-1,at-1),Q(_t,ct-1,at),Q(_t,ct,at-1),Q(_t,ct,at),Ye,ot,(_t+ct+at)%2)}function Be(qe,Ye,ot){P=!0,Oe(qe,Ye,ot),P=!1}function He(qe,Ye,ot,at,ct,_t){for(var xt=[],At=0;At<Ye.length;At++)for(var ht=Ye[At],st=1;st<H;st++)for(var Bt=1;Bt<B;Bt++)xt.push(Ie(qe,ht,Bt,st,ot,at,ct[At]));return xt}function Xe(qe,Ye,ot,at,ct,_t){for(var xt=[],At=0;At<Ye.length;At++)for(var ht=Ye[At],st=1;st<N;st++)for(var Bt=1;Bt<H;Bt++)xt.push(Ie(qe,st,ht,Bt,ot,at,ct[At]));return xt}function nt(qe,Ye,ot,at,ct,_t){for(var xt=[],At=0;At<Ye.length;At++)for(var ht=Ye[At],st=1;st<B;st++)for(var Bt=1;Bt<N;Bt++)xt.push(Ie(qe,Bt,st,ht,ot,at,ct[At]));return xt}function et(qe,Ye){for(var ot=[],at=qe;at<Ye;at++)ot.push(at);return ot}return function(){if(V(),function(){for(var Ht=0;Ht<N;Ht++)for(var At=0;At<B;At++)for(var ht=0;ht<H;ht++){var st=Q(Ht,At,ht);W(o._x[st],o._y[st],o._z[st],o._value[st])}}(),k&&L&&(oe(L),A=!0,Oe(null,te,K),A=!1),E&&C){oe(C);for(var qe=o.surface.pattern,Ye=o.surface.count,ot=0;ot<Ye;ot++){var at=1===Ye?.5:ot/(Ye-1),ct=(1-at)*te+at*K,_t=Math.abs(ct-ne)>Math.abs(ct-ae)?[ne,ct]:[ct,ae];Be(qe,_t[0],_t[1])}}var xt=[[Math.min(te,ae),Math.max(te,ae)],[Math.min(ne,K),Math.max(ne,K)]];["x","y","z"].forEach(function(Ht){for(var At=[],ht=0;ht<xt.length;ht++){var st=0,Bt=xt[ht][0],gn=xt[ht][1],hn=o.slices[Ht];if(hn.show&&hn.fill){oe(hn.fill);var We=[],it=[],qt=[];if(hn.locations.length)for(var Ge=0;Ge<hn.locations.length;Ge++){var Pe=u(hn.locations[Ge],"x"===Ht?D:"y"===Ht?R:S);0===Pe.distRatio?We.push(Pe.id):Pe.id>0&&(it.push(Pe.id),qt.push("x"===Ht?[Pe.distRatio,0,0]:"y"===Ht?[0,Pe.distRatio,0]:[0,0,Pe.distRatio]))}else We=et(1,"x"===Ht?N-1:"y"===Ht?B-1:H-1);it.length>0&&(At[st]="x"===Ht?He(null,it,Bt,gn,qt):"y"===Ht?Xe(null,it,Bt,gn,qt):nt(null,it,Bt,gn,qt),st++),We.length>0&&(At[st]="x"===Ht?_e(null,We,Bt,gn,At[st]):"y"===Ht?we(null,We,Bt,gn,At[st]):Se(null,We,Bt,gn,At[st]),st++)}var Ee=o.caps[Ht];Ee.show&&Ee.fill&&(oe(Ee.fill),At[st]="x"===Ht?_e(null,[0,N-1],Bt,gn,At[st]):"y"===Ht?we(null,[0,B-1],Bt,gn,At[st]):Se(null,[0,H-1],Bt,gn,At[st]),st++)}}),0===I&&V(),o._meshX=y,o._meshY=v,o._meshZ=_,o._meshIntensity=w,o._Xs=D,o._Ys=R,o._Zs=S}(),o}G.exports={findNearestOnAxis:u,generateIsoMeshes:s,createIsosurfaceTrace:function(o,d){var y=i({gl:o.glplot.gl}),v=new c(o,y,d.uid);return y._trace=v,v.update(d),o.glplot.add(y),v}}},{"../../components/colorscale":678,"../../lib/gl_format_color":799,"../../lib/str2rgbarray":828,"../../plots/gl3d/zip3":907,"gl-mesh3d":315}],1157:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../registry"),b=h("./attributes"),p=h("../../components/colorscale/defaults");function r(u,c,l,f,s){var o=s("isomin"),d=s("isomax");null!=d&&null!=o&&o>d&&(c.isomin=null,c.isomax=null);var g=s("x"),y=s("y"),v=s("z"),_=s("value");g&&g.length&&y&&y.length&&v&&v.length&&_&&_.length?(m.getComponentMethod("calendars","handleTraceDefaults")(u,c,["x","y","z"],f),s("valuehoverformat"),["x","y","z"].forEach(function(w){s(w+"hoverformat");var x="caps."+w;s(x+".show")&&s(x+".fill");var E="slices."+w;s(E+".show")&&(s(E+".fill"),s(E+".locations"))}),s("spaceframe.show")&&s("spaceframe.fill"),s("surface.show")&&(s("surface.count"),s("surface.fill"),s("surface.pattern")),s("contour.show")&&(s("contour.color"),s("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(w){s(w)}),p(u,c,f,s,{prefix:"",cLetter:"c"}),c._length=null):c.visible=!1}G.exports={supplyDefaults:function(u,c,l,f){r(u,c,0,f,function(s,o){return i.coerce(u,c,b,s,o)})},supplyIsoDefaults:r}},{"../../components/colorscale/defaults":676,"../../lib":803,"../../registry":931,"./attributes":1154}],1158:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults").supplyDefaults,calc:h("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:h("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:h("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":896,"./attributes":1154,"./calc":1155,"./convert":1156,"./defaults":1157}],1159:[function(h,G,X){"use strict";var i=h("../../components/colorscale/attributes"),m=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=h("../../plots/template_attributes").hovertemplateAttrs,p=h("../surface/attributes"),r=h("../../plots/attributes"),u=h("../../lib/extend").extendFlat;G.exports=u({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:b({editType:"calc"}),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},i("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:p.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:u({},p.contours.x.show,{}),color:p.contours.x.color,width:p.contours.x.width,editType:"calc"},lightposition:{x:u({},p.lightposition.x,{dflt:1e5}),y:u({},p.lightposition.y,{dflt:1e5}),z:u({},p.lightposition.z,{dflt:0}),editType:"calc"},lighting:u({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},p.lighting),hoverinfo:u({},r.hoverinfo,{editType:"calc"}),showlegend:u({},r.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../surface/attributes":1342}],1160:[function(h,G,X){"use strict";var i=h("../../components/colorscale/calc");G.exports=function(m,b){b.intensity&&i(m,b,{vals:b.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":674}],1161:[function(h,G,X){"use strict";var i=h("gl-mesh3d"),m=h("delaunay-triangulate"),b=h("alpha-shape"),p=h("convex-hull"),r=h("../../lib/gl_format_color").parseColorScale,u=h("../../lib/str2rgbarray"),c=h("../../components/colorscale").extractOpts,l=h("../../plots/gl3d/zip3");function f(v,_,w){this.scene=v,this.uid=w,this.mesh=_,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var s=f.prototype;function o(v){for(var _=[],w=v.length,x=0;x<w;x++)_[x]=u(v[x]);return _}function d(v,_,w,x){for(var E=[],k=_.length,C=0;C<k;C++)E[C]=v.d2l(_[C],0,x)*w;return E}function g(v){for(var _=[],w=v.length,x=0;x<w;x++)_[x]=Math.round(v[x]);return _}function y(v,_){for(var w=v.length,x=0;x<w;x++)if(v[x]<=-.5||v[x]>=_-.5)return!1;return!0}s.handlePick=function(v){if(v.object===this.mesh){var _=v.index=v.data.index;v.traceCoordinate=v.data._cellCenter?v.data.dataCoordinate:[this.data.x[_],this.data.y[_],this.data.z[_]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&void 0!==w[_]?v.textLabel=w[_]:w&&(v.textLabel=w),!0}},s.update=function(v){var _=this.scene,w=_.fullSceneLayout;this.data=v;var x,E=v.x.length,k=l(d(w.xaxis,v.x,_.dataScale[0],v.xcalendar),d(w.yaxis,v.y,_.dataScale[1],v.ycalendar),d(w.zaxis,v.z,_.dataScale[2],v.zcalendar));if(v.i&&v.j&&v.k){if(v.i.length!==v.j.length||v.j.length!==v.k.length||!y(v.i,E)||!y(v.j,E)||!y(v.k,E))return;x=l(g(v.i),g(v.j),g(v.k))}else x=0===v.alphahull?p(k):v.alphahull>0?b(v.alphahull,k):function(A,I){for(var D=["x","y","z"].indexOf(A),R=[],S=I.length,N=0;N<S;N++)R[N]=[I[N][(D+1)%3],I[N][(D+2)%3]];return m(R)}(v.delaunayaxis,k);var C={positions:k,cells:x,lightPosition:[v.lightposition.x,v.lightposition.y,v.lightposition.z],ambient:v.lighting.ambient,diffuse:v.lighting.diffuse,specular:v.lighting.specular,roughness:v.lighting.roughness,fresnel:v.lighting.fresnel,vertexNormalsEpsilon:v.lighting.vertexnormalsepsilon,faceNormalsEpsilon:v.lighting.facenormalsepsilon,opacity:v.opacity,contourEnable:v.contour.show,contourColor:u(v.contour.color).slice(0,3),contourWidth:v.contour.width,useFacetNormals:v.flatshading};if(v.intensity){var L=c(v);this.color="#fff";var P=v.intensitymode;C[P+"Intensity"]=v.intensity,C[P+"IntensityBounds"]=[L.min,L.max],C.colormap=r(v)}else v.vertexcolor?(this.color=v.vertexcolor[0],C.vertexColors=o(v.vertexcolor)):v.facecolor?(this.color=v.facecolor[0],C.cellColors=o(v.facecolor)):(this.color=v.color,C.meshColor=u(v.color));this.mesh.update(C)},s.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},G.exports=function(v,_){var x=i({gl:v.glplot.gl}),E=new f(v,x,_.uid);return x._trace=E,E.update(_),v.glplot.add(x),E}},{"../../components/colorscale":678,"../../lib/gl_format_color":799,"../../lib/str2rgbarray":828,"../../plots/gl3d/zip3":907,"alpha-shape":75,"convex-hull":141,"delaunay-triangulate":180,"gl-mesh3d":315}],1162:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../lib"),b=h("../../components/colorscale/defaults"),p=h("./attributes");G.exports=function(r,u,c,l){function f(o,d){return m.coerce(r,u,p,o,d)}function s(o){var d=o.map(function(g){var y=f(g);return y&&m.isArrayOrTypedArray(y)?y:null});return d.every(function(g){return g&&g.length===d[0].length})&&d}s(["x","y","z"])?(s(["i","j","k"]),(!u.i||u.j&&u.k)&&(!u.j||u.k&&u.i)&&(!u.k||u.i&&u.j)?(i.getComponentMethod("calendars","handleTraceDefaults")(r,u,["x","y","z"],l),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(o){f(o)}),f("contour.show")&&(f("contour.color"),f("contour.width")),"intensity"in r?(f("intensity"),f("intensitymode"),b(r,u,l,f,{prefix:"",cLetter:"c"})):(u.showscale=!1,"facecolor"in r?f("facecolor"):"vertexcolor"in r?f("vertexcolor"):f("color",c)),f("text"),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat"),f("zhoverformat"),u._length=null):u.visible=!1):u.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"../../registry":931,"./attributes":1159}],1163:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),calc:h("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:h("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:h("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":896,"./attributes":1159,"./calc":1160,"./convert":1161,"./defaults":1162}],1164:[function(h,G,X){"use strict";var i=h("../../lib").extendFlat,m=h("../scatter/attributes"),b=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,p=h("../../components/drawing/attributes").dash,r=h("../../components/fx/attributes"),u=h("../../constants/delta.js"),c=u.INCREASING.COLOR,l=u.DECREASING.COLOR,f=m.line;function s(o){return{line:{color:i({},f.color,{dflt:o}),width:f.width,dash:p,editType:"style"},editType:"style"}}G.exports={xperiod:m.xperiod,xperiod0:m.xperiod0,xperiodalignment:m.xperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:i({},f.width,{}),dash:i({},p,{}),editType:"style"},increasing:s(c),decreasing:s(l),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:i({},r.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":687,"../../components/fx/attributes":697,"../../constants/delta.js":773,"../../lib":803,"../../plots/cartesian/axis_format_attributes":857,"../scatter/attributes":1218}],1165:[function(h,G,X){"use strict";var i=h("../../lib"),m=i._,b=h("../../plots/cartesian/axes"),p=h("../../plots/cartesian/align_period"),r=h("../../constants/numerical").BADNUM;function u(l,f,s,o){return{o:l,h:f,l:s,c:o}}function c(l,f,s,o,d,g){for(var y=d.makeCalcdata(f,"open"),v=d.makeCalcdata(f,"high"),_=d.makeCalcdata(f,"low"),w=d.makeCalcdata(f,"close"),x=Array.isArray(f.text),E=Array.isArray(f.hovertext),k=!0,C=null,L=!!f.xperiodalignment,P=[],A=0;A<o.length;A++){var I=o[A],D=y[A],R=v[A],S=_[A],N=w[A];if(I!==r&&D!==r&&R!==r&&S!==r&&N!==r){N===D?null!==C&&N!==C&&(k=N>C):k=N>D,C=N;var B=g(D,R,S,N);B.pos=I,B.yc=(D+N)/2,B.i=A,B.dir=k?"increasing":"decreasing",B.x=B.pos,B.y=[S,R],L&&(B.orig_p=s[A]),x&&(B.tx=f.text[A]),E&&(B.htx=f.hovertext[A]),P.push(B)}else P.push({pos:I,empty:!0})}return f._extremes[d._id]=b.findExtremes(d,i.concat(_,v),{padded:!0}),P.length&&(P[0].t={labels:{open:m(l,"open:")+" ",high:m(l,"high:")+" ",low:m(l,"low:")+" ",close:m(l,"close:")+" "}}),P}G.exports={calc:function(l,f){var s=b.getFromId(l,f.xaxis),o=b.getFromId(l,f.yaxis),d=function(w,x,E){var k=E._minDiff;if(!k){var C,L=w._fullData,P=[];for(k=1/0,C=0;C<L.length;C++){var A=L[C];if("ohlc"===A.type&&!0===A.visible&&A.xaxis===x._id){P.push(A);var I=x.makeCalcdata(A,"x");A._origX=I;var D=p(E,x,"x",I).vals;A._xcalc=D;var R=i.distinctVals(D).minDiff;R&&isFinite(R)&&(k=Math.min(k,R))}}for(k===1/0&&(k=1),C=0;C<P.length;C++)P[C]._minDiff=k}return k*E.tickwidth}(l,s,f),g=f._minDiff;f._minDiff=null;var y=f._origX;f._origX=null;var v=f._xcalc;f._xcalc=null;var _=c(l,f,y,v,o,u);return f._extremes[s._id]=b.findExtremes(s,v,{vpad:g/2}),_.length?(i.extendFlat(_[0].t,{wHover:g/2,tickLen:d}),_):[{t:{empty:!0}}]},calcCommon:c}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854}],1166:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./ohlc_defaults"),b=h("../scatter/period_defaults"),p=h("./attributes");function r(u,c,l,f){l(f+".line.color"),l(f+".line.width",c.line.width),l(f+".line.dash",c.line.dash)}G.exports=function(u,c,l,f){function s(o,d){return i.coerce(u,c,p,o,d)}m(u,c,s,f)?(b(u,c,f,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),s("line.dash"),r(0,c,s,"increasing"),r(0,c,s,"decreasing"),s("text"),s("hovertext"),s("tickwidth"),f._requestRangeslider[c.xaxis]=!0):c.visible=!1}},{"../../lib":803,"../scatter/period_defaults":1238,"./attributes":1164,"./ohlc_defaults":1169}],1167:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes"),m=h("../../lib"),b=h("../../components/fx"),p=h("../../components/color"),r=h("../../lib").fillText,u=h("../../constants/delta.js"),c={increasing:u.INCREASING.SYMBOL,decreasing:u.DECREASING.SYMBOL};function l(o,d,g,y){var v,_,w=o.cd,x=o.xa,E=w[0].trace,k=w[0].t,C=E.type,L="ohlc"===C?"l":"min",P="ohlc"===C?"h":"max",A=k.bPos||0,I=k.bdPos||k.tickLen,D=k.wHover,R=Math.min(1,I/Math.abs(x.r2c(x.range[1])-x.r2c(x.range[0])));function S(ae){var te=ae.pos+A-d;return b.inbox(te-D,te+D,v)}function N(ae){var te=ae[L],K=ae[P];return te===K||b.inbox(te-g,K-g,v)}function B(ae){return(S(ae)+N(ae))/2}v=o.maxHoverDistance-R,_=o.maxSpikeDistance-R;var H=b.getDistanceFunction(y,S,N,B);if(b.getClosest(w,H,o),!1===o.index)return null;var Y=w[o.index];if(Y.empty)return null;var Q=E[Y.dir],ne=Q.line.color;return o.color=p.opacity(ne)&&Q.line.width?ne:Q.fillcolor,o.x0=x.c2p(Y.pos+A-I,!0),o.x1=x.c2p(Y.pos+A+I,!0),o.xLabelVal=void 0!==Y.orig_p?Y.orig_p:Y.pos,o.spikeDistance=B(Y)*_/v,o.xSpike=x.c2p(Y.pos,!0),o}function f(o,d,g,y){var v=o.cd,_=o.ya,w=v[0].trace,x=v[0].t,E=[],k=l(o,d,g,y);if(!k)return[];var C=v[k.index].hi||w.hoverinfo,L=C.split("+");if("all"!==C&&-1===L.indexOf("y"))return[];for(var P=["high","open","close","low"],A={},I=0;I<P.length;I++){var D,R=P[I],S=w[R][k.index],N=_.c2p(S,!0);S in A?(D=A[S]).yLabel+="<br>"+x.labels[R]+i.hoverLabelText(_,S,w.yhoverformat):((D=m.extendFlat({},k)).y0=D.y1=N,D.yLabelVal=S,D.yLabel=x.labels[R]+i.hoverLabelText(_,S,w.yhoverformat),D.name="",E.push(D),A[S]=D)}return E}function s(o,d,g,y){var v=o.cd,_=o.ya,w=v[0].trace,x=v[0].t,E=l(o,d,g,y);if(!E)return[];var k=v[E.index],C=E.index=k.i,L=k.dir;function P(B){return x.labels[B]+i.hoverLabelText(_,w[B][C],w.yhoverformat)}var A=k.hi||w.hoverinfo,I=A.split("+"),D="all"===A,R=D||-1!==I.indexOf("y"),S=D||-1!==I.indexOf("text"),N=R?[P("open"),P("high"),P("low"),P("close")+"  "+c[L]]:[];return S&&r(k,w,N),E.extraText=N.join("<br>"),E.y0=E.y1=_.c2p(k.yc,!0),[E]}G.exports={hoverPoints:function(o,d,g,y){return o.cd[0].trace.hoverlabel.split?f(o,d,g,y):s(o,d,g,y)},hoverSplit:f,hoverOnPoints:s}},{"../../components/color":666,"../../components/fx":706,"../../constants/delta.js":773,"../../lib":803,"../../plots/cartesian/axes":854}],1168:[function(h,G,X){"use strict";G.exports={moduleType:"trace",name:"ohlc",basePlotModule:h("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:h("./attributes"),supplyDefaults:h("./defaults"),calc:h("./calc").calc,plot:h("./plot"),style:h("./style"),hoverPoints:h("./hover").hoverPoints,selectPoints:h("./select")}},{"../../plots/cartesian":868,"./attributes":1164,"./calc":1165,"./defaults":1166,"./hover":1167,"./plot":1170,"./select":1171,"./style":1172}],1169:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../lib");G.exports=function(b,p,r,u){var c=r("x"),l=r("open"),f=r("high"),s=r("low"),o=r("close");if(r("hoverlabel.split"),i.getComponentMethod("calendars","handleTraceDefaults")(b,p,["x"],u),l&&f&&s&&o){var d=Math.min(l.length,f.length,s.length,o.length);return c&&(d=Math.min(d,m.minRowLength(c))),p._length=d,d}}},{"../../lib":803,"../../registry":931}],1170:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib");G.exports=function(b,p,r,u){var c=p.yaxis,l=p.xaxis,f=!!l.rangebreaks;m.makeTraceGroups(u,r,"trace ohlc").each(function(s){var o=i.select(this),d=s[0],g=d.t;if(!0!==d.trace.visible||g.empty)o.remove();else{var y=g.tickLen,v=o.selectAll("path").data(m.identity);v.enter().append("path"),v.exit().remove(),v.attr("d",function(_){if(_.empty)return"M0,0Z";var w=l.c2p(_.pos-y,!0),x=l.c2p(_.pos+y,!0),E=f?(w+x)/2:l.c2p(_.pos,!0);return"M"+w+","+c.c2p(_.o,!0)+"H"+E+"M"+E+","+c.c2p(_.h,!0)+"V"+c.c2p(_.l,!0)+"M"+x+","+c.c2p(_.c,!0)+"H"+E})}})}},{"../../lib":803,"@plotly/d3":58}],1171:[function(h,G,X){"use strict";G.exports=function(i,m){var b,p=i.cd,r=i.xaxis,u=i.yaxis,c=[],l=p[0].t.bPos||0;if(!1===m)for(b=0;b<p.length;b++)p[b].selected=0;else for(b=0;b<p.length;b++){var f=p[b];m.contains([r.c2p(f.pos+l),u.c2p(f.yc)],null,f.i,i)?(c.push({pointNumber:f.i,x:r.c2d(f.pos),y:u.c2d(f.yc)}),f.selected=1):f.selected=0}return c}},{}],1172:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/drawing"),b=h("../../components/color");G.exports=function(p,r,u){var c=u||i.select(p).selectAll("g.ohlclayer").selectAll("g.trace");c.style("opacity",function(l){return l[0].trace.opacity}),c.each(function(l){var f=l[0].trace;i.select(this).selectAll("path").each(function(s){if(!s.empty){var o=f[s.dir].line;i.select(this).style("fill","none").call(b.stroke,o.color).call(m.dashLine,o.dash,o.width).style("opacity",f.selectedpoints&&!s.selected?.3:1)}})})}},{"../../components/color":666,"../../components/drawing":688,"@plotly/d3":58}],1173:[function(h,G,X){"use strict";var i=h("../../lib/extend").extendFlat,m=h("../../plots/attributes"),b=h("../../plots/font_attributes"),p=h("../../components/colorscale/attributes"),r=h("../../plots/template_attributes").hovertemplateAttrs,u=h("../../plots/domain").attributes,c=i({editType:"calc"},p("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:r({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});G.exports={domain:u({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:i({},m.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:r({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:b({editType:"calc"}),tickfont:b({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:c,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/domain":882,"../../plots/font_attributes":883,"../../plots/template_attributes":926}],1174:[function(h,G,X){"use strict";var i=h("../../plots/get_data").getModuleCalcData,m=h("./plot");X.name="parcats",X.plot=function(b,p,r,u){var c=i(b.calcdata,"parcats");c.length&&m(b,c[0],r,u)},X.clean=function(b,p,r,u){var c=u._has&&u._has("parcats"),l=p._has&&p._has("parcats");c&&!l&&u._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":891,"./plot":1179}],1175:[function(h,G,X){"use strict";var i=h("../../lib/gup").wrap,m=h("../../components/colorscale/helpers").hasColorscale,b=h("../../components/colorscale/calc"),p=h("../../lib/filter_unique.js"),r=h("../../components/drawing"),u=h("../../lib"),c=h("fast-isnumeric");function l(o,d,g){o.valueInds.push(d),o.count+=g}function f(o,d,g){return{categoryInds:o,color:d,rawColor:g,valueInds:[],count:0}}function s(o,d,g){o.valueInds.push(d),o.count+=g}G.exports=function(o,d){var g=u.filterVisible(d.dimensions);if(0===g.length)return[];var y,v,_,w=g.map(function(q){var re;if("trace"===q.categoryorder)re=null;else if("array"===q.categoryorder)re=q.categoryarray;else{re=p(q.values);for(var V=!0,W=0;W<re.length;W++)if(!c(re[W])){V=!1;break}re.sort(V?u.sorterAsc:void 0),"category descending"===q.categoryorder&&(re=re.reverse())}return function(Z,oe){oe=null==oe?[]:oe.map(function(Te){return Te});var ie={},ue={},fe=[];oe.forEach(function(Te,ye){ie[Te]=0,ue[Te]=ye});for(var he=0;he<Z.length;he++){var de,be=Z[he];void 0===ie[be]?(ie[be]=1,de=oe.push(be)-1,ue[be]=de):(ie[be]++,de=ue[be]),fe.push(de)}var pe=oe.map(function(Te){return ie[Te]});return{uniqueValues:oe,uniqueCounts:pe,inds:fe}}(q.values,re)});y=u.isArrayOrTypedArray(d.counts)?d.counts:[d.counts],function(q){var re;if(function(V){for(var W=new Array(V.length),Z=0;Z<V.length;Z++){if(V[Z]<0||V[Z]>=V.length||void 0!==W[V[Z]])return!1;W[V[Z]]=!0}return!0}(q.map(function(V){return V.displayindex})))for(re=0;re<q.length;re++)q[re]._displayindex=q[re].displayindex;else for(re=0;re<q.length;re++)q[re]._displayindex=re}(g),g.forEach(function(q,re){!function(V,W){V._categoryarray=W.uniqueValues,V._ticktext=null==V.ticktext?[]:V.ticktext.slice();for(var Z=V._ticktext.length;Z<W.uniqueValues.length;Z++)V._ticktext.push(W.uniqueValues[Z])}(q,w[re])});var x,E=d.line;E?(m(d,"line")&&b(o,d,{vals:d.line.color,containerStr:"line",cLetter:"c"}),x=r.tryColorscale(E)):x=u.identity;var k,C,L,P,A,I=g[0].values.length,D={},R=w.map(function(q){return q.inds});for(_=0,k=0;k<I;k++){var S=[];for(C=0;C<R.length;C++)S.push(R[C][k]);_+=v=y[k%y.length];var N=(L=k,P=void 0,A=void 0,u.isArrayOrTypedArray(E.color)?A=P=E.color[L%E.color.length]:P=E.color,{color:x(P),rawColor:A}),B=S+"-"+N.rawColor;void 0===D[B]&&(D[B]=f(S,N.color,N.rawColor)),s(D[B],k,v)}var H,q,re,V,W,Y=g.map(function(q,re){return{dimensionInd:re,containerInd:q._index,displayInd:q._displayindex,dimensionLabel:q.label,count:_,categories:[],dragX:null}});for(k=0;k<I;k++)for(v=y[k%y.length],C=0;C<Y.length;C++){var Q=Y[C].containerInd,ne=w[C].inds[k],ae=Y[C].categories;void 0===ae[ne]&&(ae[ne]={dimensionInd:C,categoryInd:H=ne,categoryValue:d.dimensions[Q]._categoryarray[ne],displayInd:H,categoryLabel:d.dimensions[Q]._ticktext[ne],valueInds:[],count:0,dragY:null}),l(ae[ne],k,v)}return i((re=D,V=_,W=(q=Y).map(function(Z){return Z.categories.length}).reduce(function(Z,oe){return Math.max(Z,oe)}),{dimensions:q,paths:re,trace:void 0,maxCats:W,count:V}))}},{"../../components/colorscale/calc":674,"../../components/colorscale/helpers":677,"../../components/drawing":688,"../../lib":803,"../../lib/filter_unique.js":794,"../../lib/gup":800,"fast-isnumeric":249}],1176:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/colorscale/helpers").hasColorscale,b=h("../../components/colorscale/defaults"),p=h("../../plots/domain").defaults,r=h("../../plots/array_container_defaults"),u=h("./attributes"),c=h("../parcoords/merge_length");function l(f,s){function o(x,E){return i.coerce(f,s,u.dimensions,x,E)}var d=o("values"),g=o("visible");if(d&&d.length||(g=s.visible=!1),g){o("label"),o("displayindex",s._index);var y,v=f.categoryarray,_=Array.isArray(v)&&v.length>0;_&&(y="array");var w=o("categoryorder",y);"array"===w?(o("categoryarray"),o("ticktext")):(delete f.categoryarray,delete f.ticktext),_||"array"!==w||(s.categoryorder="trace")}}G.exports=function(f,s,o,d){function g(x,E){return i.coerce(f,s,u,x,E)}var y=r(f,s,{name:"dimensions",handleItemDefaults:l}),v=function(x,E,k,C,L){L("line.shape"),L("line.hovertemplate");var P=L("line.color",C.colorway[0]);if(m(x,"line")&&i.isArrayOrTypedArray(P)){if(P.length)return L("line.colorscale"),b(x,E,C,L,{prefix:"line.",cLetter:"c"}),P.length;E.line.color=k}return 1/0}(f,s,o,d,g);p(s,d,g),Array.isArray(y)&&y.length||(s.visible=!1),c(s,y,"values",v),g("hoveron"),g("hovertemplate"),g("arrangement"),g("bundlecolors"),g("sortpaths"),g("counts");var _={family:d.font.family,size:Math.round(d.font.size),color:d.font.color};i.coerceFont(g,"labelfont",_);var w={family:d.font.family,size:Math.round(d.font.size/1.2),color:d.font.color};i.coerceFont(g,"tickfont",w)}},{"../../components/colorscale/defaults":676,"../../components/colorscale/helpers":677,"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/domain":882,"../parcoords/merge_length":1189,"./attributes":1173}],1177:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),calc:h("./calc"),plot:h("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:h("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1173,"./base_plot":1174,"./calc":1175,"./defaults":1176,"./plot":1179}],1178:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("d3-interpolate").interpolateNumber,b=h("../../plot_api/plot_api"),p=h("../../components/fx"),r=h("../../lib"),u=r.strTranslate,c=h("../../components/drawing"),l=h("tinycolor2"),f=h("../../lib/svg_text_utils");function s(V,W,Z,oe){var ie=V.map(ae.bind(0,W,Z)),ue=oe.selectAll("g.parcatslayer").data([null]);ue.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var fe=ue.selectAll("g.trace.parcats").data(ie,o),he=fe.enter().append("g").attr("class","trace parcats");fe.attr("transform",function(Ie){return u(Ie.x,Ie.y)}),he.append("g").attr("class","paths");var de=fe.select("g.paths").selectAll("path.path").data(function(Ie){return Ie.paths},o);de.attr("fill",function(Ie){return Ie.model.color});var be=de.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Ie){return Ie.model.color}).attr("fill-opacity",0);E(be),de.attr("d",function(Ie){return Ie.svgD}),be.empty()||de.sort(g),de.exit().remove(),de.on("mouseover",y).on("mouseout",v).on("click",x),he.append("g").attr("class","dimensions");var pe=fe.select("g.dimensions").selectAll("g.dimension").data(function(Ie){return Ie.dimensions},o);pe.enter().append("g").attr("class","dimension"),pe.attr("transform",function(Ie){return u(Ie.x,0)}),pe.exit().remove();var Te=pe.selectAll("g.category").data(function(Ie){return Ie.categories},o),ye=Te.enter().append("g").attr("class","category");Te.attr("transform",function(Ie){return u(0,Ie.y)}),ye.append("rect").attr("class","catrect").attr("pointer-events","none"),Te.select("rect.catrect").attr("fill","none").attr("width",function(Ie){return Ie.width}).attr("height",function(Ie){return Ie.height}),C(ye);var ke=Te.selectAll("rect.bandrect").data(function(Ie){return Ie.bands},o);ke.each(function(){r.raiseToTop(this)}),ke.attr("fill",function(Ie){return Ie.color});var ze=ke.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Ie){return Ie.color}).attr("fill-opacity",0);ke.attr("fill",function(Ie){return Ie.color}).attr("width",function(Ie){return Ie.width}).attr("height",function(Ie){return Ie.height}).attr("y",function(Ie){return Ie.y}).attr("cursor",function(Ie){return"fixed"===Ie.parcatsViewModel.arrangement?"default":"perpendicular"===Ie.parcatsViewModel.arrangement?"ns-resize":"move"}),L(ze),ke.exit().remove(),ye.append("text").attr("class","catlabel").attr("pointer-events","none");var je=W._fullLayout.paper_bgcolor;Te.select("text.catlabel").attr("text-anchor",function(Ie){return d(Ie)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",f.makeTextShadow(je)).style("fill","rgb(0, 0, 0)").attr("x",function(Ie){return d(Ie)?Ie.width+5:-5}).attr("y",function(Ie){return Ie.height/2}).text(function(Ie){return Ie.model.categoryLabel}).each(function(Ie){c.font(i.select(this),Ie.parcatsViewModel.categorylabelfont),f.convertToTspans(i.select(this),W)}),ye.append("text").attr("class","dimlabel"),Te.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Ie){return"fixed"===Ie.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(Ie){return Ie.width/2}).attr("y",-5).text(function(Ie,Ce){return 0===Ce?Ie.parcatsViewModel.model.dimensions[Ie.model.dimensionInd].dimensionLabel:null}).each(function(Ie){c.font(i.select(this),Ie.parcatsViewModel.labelfont)}),Te.selectAll("rect.bandrect").on("mouseover",R).on("mouseout",S),Te.exit().remove(),pe.call(i.behavior.drag().origin(function(Ie){return{x:Ie.x,y:0}}).on("dragstart",N).on("drag",B).on("dragend",H)),fe.each(function(Ie){Ie.traceSelection=i.select(this),Ie.pathSelection=i.select(this).selectAll("g.paths").selectAll("path.path"),Ie.dimensionSelection=i.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),fe.exit().remove()}function o(V){return V.key}function d(V){return V.model.dimensionInd===V.parcatsViewModel.dimensions[V.parcatsViewModel.dimensions.length-1].model.dimensionInd}function g(V,W){return V.model.rawColor>W.model.rawColor?1:V.model.rawColor<W.model.rawColor?-1:0}function y(V){if(!V.parcatsViewModel.dragDimension&&-1===V.parcatsViewModel.hoverinfoItems.indexOf("skip")){r.raiseToTop(this),k(i.select(this));var W=_(V),Z=w(V);if(V.parcatsViewModel.graphDiv.emit("plotly_hover",{points:W,event:i.event,constraints:Z}),-1===V.parcatsViewModel.hoverinfoItems.indexOf("none")){var oe,ie,ue,fe=i.mouse(this)[0],he=V.parcatsViewModel.graphDiv,de=V.parcatsViewModel.trace,be=he._fullLayout,pe=be._paperdiv.node().getBoundingClientRect(),Te=V.parcatsViewModel.graphDiv.getBoundingClientRect();for(ue=0;ue<V.leftXs.length-1;ue++)if(V.leftXs[ue]+V.dimWidths[ue]-2<=fe&&fe<=V.leftXs[ue+1]+2){var ye=V.parcatsViewModel.dimensions[ue];oe=(ye.x+ye.width+V.parcatsViewModel.dimensions[ue+1].x)/2,ie=(V.topYs[ue]+V.topYs[ue+1]+V.height)/2;break}var ze=V.parcatsViewModel.x+oe,je=V.parcatsViewModel.y+ie,Ie=l.mostReadable(V.model.color,["black","white"]),Ce=V.model.count,_e=Ce/V.parcatsViewModel.model.count,we={countLabel:Ce,probabilityLabel:_e.toFixed(3)},Se=[];-1!==V.parcatsViewModel.hoverinfoItems.indexOf("count")&&Se.push(["Count:",we.countLabel].join(" ")),-1!==V.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Se.push(["P:",we.probabilityLabel].join(" "));var Oe=Se.join("<br>"),Be=i.mouse(he)[0];p.loneHover({trace:de,x:ze-pe.left+Te.left,y:je-pe.top+Te.top,text:Oe,color:V.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Ie,idealAlign:Be<ze?"right":"left",hovertemplate:(de.line||{}).hovertemplate,hovertemplateLabels:we,eventData:[{data:de._input,fullData:de,count:Ce,probability:_e}]},{container:be._hoverlayer.node(),outerContainer:be._paper.node(),gd:he})}}}function v(V){if(!V.parcatsViewModel.dragDimension&&(E(i.select(this)),p.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),V.parcatsViewModel.pathSelection.sort(g),-1===V.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var W=_(V),Z=w(V);V.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:W,event:i.event,constraints:Z})}}function _(V){for(var W=[],Z=Y(V.parcatsViewModel),oe=0;oe<V.model.valueInds.length;oe++)W.push({curveNumber:Z,pointNumber:V.model.valueInds[oe]});return W}function w(V){for(var W={},Z=V.parcatsViewModel.model.dimensions,oe=0;oe<Z.length;oe++){var ie=Z[oe];W[ie.containerInd]=ie.categories[V.model.categoryInds[oe]].categoryValue}return void 0!==V.model.rawColor&&(W.color=V.model.rawColor),W}function x(V){if(-1===V.parcatsViewModel.hoverinfoItems.indexOf("skip")){var W=_(V),Z=w(V);V.parcatsViewModel.graphDiv.emit("plotly_click",{points:W,event:i.event,constraints:Z})}}function E(V){V.attr("fill",function(W){return W.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function k(V){V.attr("fill-opacity",.8).attr("stroke",function(W){return l.mostReadable(W.model.color,["black","white"])}).attr("stroke-width",.3)}function C(V){V.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function L(V){V.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function P(V){var Z=V.categoryViewModel.model.dimensionInd,oe=V.categoryViewModel.model.categoryInd;return V.parcatsViewModel.pathSelection.filter(function(ie){return ie.model.categoryInds[Z]===oe&&ie.model.color===V.color})}function A(V,W,Z){var oe=i.select(V).datum(),ie=oe.categoryViewModel.model,ue=oe.parcatsViewModel.graphDiv,fe=i.select(V.parentNode).selectAll("rect.bandrect"),he=[];fe.each(function(be){P(be).each(function(pe){Array.prototype.push.apply(he,_(pe))})});var de={};de[ie.dimensionInd]=ie.categoryValue,ue.emit(W,{points:he,event:Z,constraints:de})}function I(V,W,Z){var oe=i.select(V).datum(),ie=oe.categoryViewModel.model,ue=oe.parcatsViewModel.graphDiv,fe=P(oe),he=[];fe.each(function(be){Array.prototype.push.apply(he,_(be))});var de={};de[ie.dimensionInd]=ie.categoryValue,void 0!==oe.rawColor&&(de.color=oe.rawColor),ue.emit(W,{points:he,event:Z,constraints:de})}function D(V,W,Z){V._fullLayout._calcInverseTransform(V);var oe,ie,ue=V._fullLayout._invScaleX,fe=V._fullLayout._invScaleY,he=i.select(Z.parentNode).select("rect.catrect"),de=he.node().getBoundingClientRect(),be=he.datum(),pe=be.parcatsViewModel,ye=pe.trace,ke=de.top+de.height/2;pe.dimensions.length>1&&pe.model.dimensions[be.model.dimensionInd].displayInd===pe.dimensions.length-1?(oe=de.left,ie="left"):(oe=de.left+de.width,ie="right");var ze=be.model.count,je=be.model.categoryLabel,Ie=ze/be.parcatsViewModel.model.count,Ce={countLabel:ze,categoryLabel:je,probabilityLabel:Ie.toFixed(3)},_e=[];-1!==be.parcatsViewModel.hoverinfoItems.indexOf("count")&&_e.push(["Count:",Ce.countLabel].join(" ")),-1!==be.parcatsViewModel.hoverinfoItems.indexOf("probability")&&_e.push(["P("+Ce.categoryLabel+"):",Ce.probabilityLabel].join(" "));var we=_e.join("<br>");return{trace:ye,x:ue*(oe-W.left),y:fe*(ke-W.top),text:we,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:ie,hovertemplate:ye.hovertemplate,hovertemplateLabels:Ce,eventData:[{data:ye._input,fullData:ye,count:ze,category:je,probability:Ie}]}}function R(V){if(!V.parcatsViewModel.dragDimension&&-1===V.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(i.mouse(this)[1]<-1)return;var W,Z=V.parcatsViewModel.graphDiv,oe=Z._fullLayout,ie=oe._paperdiv.node().getBoundingClientRect(),ue=V.parcatsViewModel.hoveron;"color"===ue?(k(de=P(he=i.select(this).datum())),de.each(function(){r.raiseToTop(this)}),i.select(this.parentNode).selectAll("rect.bandrect").filter(function(be){return be.color===he.color}).each(function(){r.raiseToTop(this),i.select(this).attr("stroke","black").attr("stroke-width",1.5)}),I(this,"plotly_hover",i.event)):(function(fe){i.select(fe.parentNode).selectAll("rect.bandrect").each(function(he){var de=P(he);k(de),de.each(function(){r.raiseToTop(this)})}),i.select(fe.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(this),A(this,"plotly_hover",i.event)),-1===V.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===ue?W=D(Z,ie,this):"color"===ue?W=function(fe,he,de){fe._fullLayout._calcInverseTransform(fe);var be,pe,Te=fe._fullLayout._invScaleX,ye=fe._fullLayout._invScaleY,ke=de.getBoundingClientRect(),ze=i.select(de).datum(),je=ze.categoryViewModel,Ie=je.parcatsViewModel,_e=Ie.trace,we=ke.y+ke.height/2;Ie.dimensions.length>1&&Ie.model.dimensions[je.model.dimensionInd].displayInd===Ie.dimensions.length-1?(be=ke.left,pe="left"):(be=ke.left+ke.width,pe="right");var Se=je.model.categoryLabel,Oe=ze.parcatsViewModel.model.count,Be=0;ze.categoryViewModel.bands.forEach(function(_t){_t.color===ze.color&&(Be+=_t.count)});var He=je.model.count,Xe=0;Ie.pathSelection.each(function(_t){_t.model.color===ze.color&&(Xe+=_t.model.count)});var nt=Be/Oe,et=Be/Xe,qe=Be/He,Ye={countLabel:Oe,categoryLabel:Se,probabilityLabel:nt.toFixed(3)},ot=[];-1!==je.parcatsViewModel.hoverinfoItems.indexOf("count")&&ot.push(["Count:",Ye.countLabel].join(" ")),-1!==je.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(ot.push("P(color \u2229 "+Se+"): "+Ye.probabilityLabel),ot.push("P("+Se+" | color): "+et.toFixed(3)),ot.push("P(color | "+Se+"): "+qe.toFixed(3)));var at=ot.join("<br>"),ct=l.mostReadable(ze.color,["black","white"]);return{trace:_e,x:Te*(be-he.left),y:ye*(we-he.top),text:at,color:ze.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:ct,fontSize:10,idealAlign:pe,hovertemplate:_e.hovertemplate,hovertemplateLabels:Ye,eventData:[{data:_e._input,fullData:_e,category:Se,count:Oe,probability:nt,categorycount:He,colorcount:Xe,bandcolorcount:Be}]}}(Z,ie,this):"dimension"===ue&&(W=function(fe,he,de){var be=[];return i.select(de.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){be.push(D(fe,he,this))}),be}(Z,ie,this)),W&&p.loneHover(W,{container:oe._hoverlayer.node(),outerContainer:oe._paper.node(),gd:Z}))}var he,de}function S(V){var W=V.parcatsViewModel;!W.dragDimension&&(E(W.pathSelection),C(W.dimensionSelection.selectAll("g.category")),L(W.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),p.loneUnhover(W.graphDiv._fullLayout._hoverlayer.node()),W.pathSelection.sort(g),-1===W.hoverinfoItems.indexOf("skip"))&&("color"===V.parcatsViewModel.hoveron?I(this,"plotly_unhover",i.event):A(this,"plotly_unhover",i.event))}function N(V){"fixed"!==V.parcatsViewModel.arrangement&&(V.dragDimensionDisplayInd=V.model.displayInd,V.initialDragDimensionDisplayInds=V.parcatsViewModel.model.dimensions.map(function(W){return W.displayInd}),V.dragHasMoved=!1,V.dragCategoryDisplayInd=null,i.select(this).selectAll("g.category").select("rect.catrect").each(function(W){var Z=i.mouse(this)[0],oe=i.mouse(this)[1];-2<=Z&&Z<=W.width+2&&-2<=oe&&oe<=W.height+2&&(V.dragCategoryDisplayInd=W.model.displayInd,V.initialDragCategoryDisplayInds=V.model.categories.map(function(ie){return ie.displayInd}),W.model.dragY=W.y,r.raiseToTop(this.parentNode),i.select(this.parentNode).selectAll("rect.bandrect").each(function(ie){ie.y<oe&&oe<=ie.y+ie.height&&(V.potentialClickBand=this)}))}),V.parcatsViewModel.dragDimension=V,p.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function B(V){if("fixed"!==V.parcatsViewModel.arrangement&&(V.dragHasMoved=!0,null!==V.dragDimensionDisplayInd)){var W=V.dragDimensionDisplayInd,Z=W-1,oe=W+1,ie=V.parcatsViewModel.dimensions[W];if(null!==V.dragCategoryDisplayInd){var ue=ie.categories[V.dragCategoryDisplayInd];ue.model.dragY+=i.event.dy;var fe=ue.model.dragY,he=ue.model.displayInd,de=ie.categories,be=de[he-1],pe=de[he+1];void 0!==be&&fe<be.y+be.height/2&&(ue.model.displayInd=be.model.displayInd,be.model.displayInd=he),void 0!==pe&&fe+ue.height>pe.y+pe.height/2&&(ue.model.displayInd=pe.model.displayInd,pe.model.displayInd=he),V.dragCategoryDisplayInd=ue.model.displayInd}if(null===V.dragCategoryDisplayInd||"freeform"===V.parcatsViewModel.arrangement){ie.model.dragX=i.event.x;var Te=V.parcatsViewModel.dimensions[Z],ye=V.parcatsViewModel.dimensions[oe];void 0!==Te&&ie.model.dragX<Te.x+Te.width&&(ie.model.displayInd=Te.model.displayInd,Te.model.displayInd=W),void 0!==ye&&ie.model.dragX+ie.width>ye.x&&(ie.model.displayInd=ye.model.displayInd,ye.model.displayInd=V.dragDimensionDisplayInd),V.dragDimensionDisplayInd=ie.model.displayInd}q(V.parcatsViewModel),K(V.parcatsViewModel),ne(V.parcatsViewModel),Q(V.parcatsViewModel)}}function H(V){if("fixed"!==V.parcatsViewModel.arrangement&&null!==V.dragDimensionDisplayInd){i.select(this).selectAll("text").attr("font-weight","normal");var W={},Z=Y(V.parcatsViewModel),oe=V.parcatsViewModel.model.dimensions.map(function(pe){return pe.displayInd}),ie=V.initialDragDimensionDisplayInds.some(function(pe,Te){return pe!==oe[Te]});ie&&oe.forEach(function(pe,Te){W["dimensions["+V.parcatsViewModel.model.dimensions[Te].containerInd+"].displayindex"]=pe});var ue=!1;if(null!==V.dragCategoryDisplayInd){var fe=V.model.categories.map(function(pe){return pe.displayInd});if(ue=V.initialDragCategoryDisplayInds.some(function(pe,Te){return pe!==fe[Te]})){var he=V.model.categories.slice().sort(function(pe,Te){return pe.displayInd-Te.displayInd}),de=he.map(function(pe){return pe.categoryValue}),be=he.map(function(pe){return pe.categoryLabel});W["dimensions["+V.model.containerInd+"].categoryarray"]=[de],W["dimensions["+V.model.containerInd+"].ticktext"]=[be],W["dimensions["+V.model.containerInd+"].categoryorder"]="array"}}-1===V.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!V.dragHasMoved&&V.potentialClickBand&&("color"===V.parcatsViewModel.hoveron?I(V.potentialClickBand,"plotly_click",i.event.sourceEvent):A(V.potentialClickBand,"plotly_click",i.event.sourceEvent)),V.model.dragX=null,null!==V.dragCategoryDisplayInd&&(V.parcatsViewModel.dimensions[V.dragDimensionDisplayInd].categories[V.dragCategoryDisplayInd].model.dragY=null,V.dragCategoryDisplayInd=null),V.dragDimensionDisplayInd=null,V.parcatsViewModel.dragDimension=null,V.dragHasMoved=null,V.potentialClickBand=null,q(V.parcatsViewModel),K(V.parcatsViewModel),i.transition().duration(300).ease("cubic-in-out").each(function(){ne(V.parcatsViewModel,!0),Q(V.parcatsViewModel,!0)}).each("end",function(){(ie||ue)&&b.restyle(V.parcatsViewModel.graphDiv,W,[Z])})}}function Y(V){for(var W,Z=V.graphDiv._fullData,oe=0;oe<Z.length;oe++)if(V.key===Z[oe].uid){W=oe;break}return W}function Q(V,W){var Z;void 0===W&&(W=!1),V.pathSelection.data(function(oe){return oe.paths},o),(Z=V.pathSelection,W?Z.transition():Z).attr("d",function(oe){return oe.svgD})}function ne(V,W){function Z(fe){return W?fe.transition():fe}void 0===W&&(W=!1),V.dimensionSelection.data(function(fe){return fe.dimensions},o);var oe=V.dimensionSelection.selectAll("g.category").data(function(fe){return fe.categories},o);Z(V.dimensionSelection).attr("transform",function(fe){return u(fe.x,0)}),Z(oe).attr("transform",function(fe){return u(0,fe.y)}),oe.select(".dimlabel").text(function(fe,he){return 0===he?fe.parcatsViewModel.model.dimensions[fe.model.dimensionInd].dimensionLabel:null}),oe.select(".catlabel").attr("text-anchor",function(fe){return d(fe)?"start":"end"}).attr("x",function(fe){return d(fe)?fe.width+5:-5}).each(function(fe){var he,de;d(fe)?(he=fe.width+5,de="start"):(he=-5,de="end"),i.select(this).selectAll("tspan").attr("x",he).attr("text-anchor",de)});var ie=oe.selectAll("rect.bandrect").data(function(fe){return fe.bands},o),ue=ie.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(fe){return fe.color}).attr("fill-opacity",0);ie.attr("fill",function(fe){return fe.color}).attr("width",function(fe){return fe.width}).attr("height",function(fe){return fe.height}).attr("y",function(fe){return fe.y}),L(ue),ie.each(function(){r.raiseToTop(this)}),ie.exit().remove()}function ae(V,W,Z){var oe,ie=Z[0],ue=W.margin||{l:80,r:80,t:100,b:80},fe=ie.trace,he=fe.domain,de=W.width,be=W.height,pe=Math.floor(de*(he.x[1]-he.x[0])),Te=Math.floor(be*(he.y[1]-he.y[0])),ye=he.x[0]*de+ue.l,ke=W.height-he.y[1]*W.height+ue.t,ze=fe.line.shape;oe="all"===fe.hoverinfo?["count","probability"]:(fe.hoverinfo||"").split("+");var je={trace:fe,key:fe.uid,model:ie,x:ye,y:ke,width:pe,height:Te,hoveron:fe.hoveron,hoverinfoItems:oe,arrangement:fe.arrangement,bundlecolors:fe.bundlecolors,sortpaths:fe.sortpaths,labelfont:fe.labelfont,categorylabelfont:fe.tickfont,pathShape:ze,dragDimension:null,margin:ue,paths:[],dimensions:[],graphDiv:V,traceSelection:null,pathSelection:null,dimensionSelection:null};return ie.dimensions&&(q(je),K(je)),je}function te(V,W,Z,oe,ie){var ue,fe,he=[],de=[];for(fe=0;fe<Z.length-1;fe++)ue=m(Z[fe]+V[fe],V[fe+1]),he.push(ue(ie)),de.push(ue(1-ie));var be="M "+V[0]+","+W[0];for(be+="l"+Z[0]+",0 ",fe=1;fe<Z.length;fe++)be+="C"+he[fe-1]+","+W[fe-1]+" "+de[fe-1]+","+W[fe]+" "+V[fe]+","+W[fe],be+="l"+Z[fe]+",0 ";for(be+="l0,"+oe+" ",be+="l -"+Z[Z.length-1]+",0 ",fe=Z.length-2;fe>=0;fe--)be+="C"+de[fe]+","+(W[fe+1]+oe)+" "+he[fe]+","+(W[fe]+oe)+" "+(V[fe]+Z[fe])+","+(W[fe]+oe),be+="l-"+Z[fe]+",0 ";return be+"Z"}function K(V){var W=V.dimensions,Z=V.model,oe=W.map(function(ot){return ot.categories.map(function(at){return at.y})}),ie=V.model.dimensions.map(function(ot){return ot.categories.map(function(at){return at.displayInd})}),ue=V.model.dimensions.map(function(ot){return ot.displayInd}),fe=V.dimensions.map(function(ot){return ot.model.dimensionInd}),he=W.map(function(ot){return ot.x}),de=W.map(function(ot){return ot.width}),be=[];for(var pe in Z.paths)Z.paths.hasOwnProperty(pe)&&be.push(Z.paths[pe]);function Te(ot){var at=ot.categoryInds.map(function(ct,_t){return ie[_t][ct]});return fe.map(function(ct){return at[ct]})}be.sort(function(ot,at){var ct=Te(ot),_t=Te(at);return"backward"===V.sortpaths&&(ct.reverse(),_t.reverse()),ct.push(ot.valueInds[0]),_t.push(at.valueInds[0]),V.bundlecolors&&(ct.unshift(ot.rawColor),_t.unshift(at.rawColor)),ct<_t?-1:ct>_t?1:0});for(var ye=new Array(be.length),ke=W[0].model.count,ze=W[0].categories.map(function(ot){return ot.height}).reduce(function(ot,at){return ot+at}),je=0;je<be.length;je++){var Ie,Ce=be[je];Ie=ke>0?ze*(Ce.count/ke):0;for(var _e,we=new Array(oe.length),Se=0;Se<Ce.categoryInds.length;Se++){var Be=ie[Se][Ce.categoryInds[Se]],He=ue[Se];we[He]=oe[He][Be],oe[He][Be]+=Ie;var Xe=V.dimensions[He].categories[Be],nt=Xe.bands.length,et=Xe.bands[nt-1];if(void 0===et||Ce.rawColor!==et.rawColor){var qe=void 0===et?0:et.y+et.height;Xe.bands.push({key:qe,color:Ce.color,rawColor:Ce.rawColor,height:Ie,width:Xe.width,count:Ce.count,y:qe,categoryViewModel:Xe,parcatsViewModel:V})}else{var Ye=Xe.bands[nt-1];Ye.height+=Ie,Ye.count+=Ce.count}}_e=te(he,we,de,Ie,"hspline"===V.pathShape?.5:0),ye[je]={key:Ce.valueInds[0],model:Ce,height:Ie,leftXs:he,topYs:we,dimWidths:de,svgD:_e,parcatsViewModel:V}}V.paths=ye}function q(V){var W=V.model.dimensions.map(function(fe){return{displayInd:fe.displayInd,dimensionInd:fe.dimensionInd}});W.sort(function(fe,he){return fe.displayInd-he.displayInd});var Z=[];for(var oe in W)Z.push(re(V,V.model.dimensions[W[oe].dimensionInd]));V.dimensions=Z}function re(V,W){var Z,oe=V.model.dimensions.length;Z=40+(oe>1?(V.width-80-16)/(oe-1):0)*W.displayInd;var ue,fe,he,be,pe=[],Te=V.model.maxCats,ye=W.categories.length,ke=W.count,ze=V.height-8*(Te-1),je=8*(Te-ye)/2,Ie=W.categories.map(function(Ce){return{displayInd:Ce.displayInd,categoryInd:Ce.categoryInd}});for(Ie.sort(function(Ce,_e){return Ce.displayInd-_e.displayInd}),be=0;be<ye;be++)he={key:(fe=W.categories[Ie[be].categoryInd]).valueInds[0],model:fe,width:16,height:ue=ke>0?fe.count/ke*ze:0,y:null!==fe.dragY?fe.dragY:je,bands:[],parcatsViewModel:V},je=je+ue+8,pe.push(he);return{key:W.dimensionInd,x:null!==W.dragX?W.dragX:Z,y:0,width:16,model:W,categories:pe,parcatsViewModel:V,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}G.exports=function(V,W,Z,oe){s(Z,V,oe,W)}},{"../../components/drawing":688,"../../components/fx":706,"../../lib":803,"../../lib/svg_text_utils":829,"../../plot_api/plot_api":840,"@plotly/d3":58,"d3-interpolate":171,tinycolor2:598}],1179:[function(h,G,X){"use strict";var i=h("./parcats");G.exports=function(m,b,p,r){var u=m._fullLayout,l=u._size;i(m,u._paper,b,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},p,r)}},{"./parcats":1178}],1180:[function(h,G,X){"use strict";var i=h("../../components/colorscale/attributes"),m=h("../../plots/cartesian/layout_attributes"),b=h("../../plots/font_attributes"),p=h("../../plots/domain").attributes,r=h("../../lib/extend").extendFlat,u=h("../../plot_api/plot_template").templatedArray;G.exports={domain:p({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:b({editType:"plot"}),tickfont:b({editType:"plot"}),rangefont:b({editType:"plot"}),dimensions:u("dimension",{label:{valType:"string",editType:"plot"},tickvals:r({},m.tickvals,{editType:"plot"}),ticktext:r({},m.ticktext,{editType:"plot"}),tickformat:r({},m.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:r({editType:"calc"},i("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/plot_template":843,"../../plots/cartesian/layout_attributes":869,"../../plots/domain":882,"../../plots/font_attributes":883}],1181:[function(h,G,X){"use strict";var i=h("./constants"),m=h("@plotly/d3"),b=h("../../lib/gup").keyFun,p=h("../../lib/gup").repeat,r=h("../../lib").sorterAsc,u=h("../../lib").strTranslate,c=i.bar.snapRatio;function l(D,R){return D*(1-c)+R*c}var f=i.bar.snapClose;function s(D,R){return D*(1-f)+R*f}function o(D,R,S,N){if(function(re,V){for(var W=0;W<V.length;W++)if(re>=V[W][0]&&re<=V[W][1])return!0;return!1}(S,N))return S;var B=D?-1:1,H=0,Y=R.length-1;if(B<0){var Q=H;H=Y,Y=Q}for(var ne=R[H],ae=ne,te=H;B*te<B*Y;te+=B){var K=te+B,q=R[K];if(B*S<B*s(ne,q))return l(ne,ae);if(B*S<B*q||K===Y)return l(q,ne);ae=ne,ne=q}}function d(D){D.attr("x",-i.bar.captureWidth/2).attr("width",i.bar.captureWidth)}function g(D){D.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function y(D){if(!D.brush.filterSpecified)return"0,"+D.height;for(var R,S,N,B=v(D.brush.filter.getConsolidated(),D.height),H=[0],Y=B.length?B[0][0]:null,Q=0;Q<B.length;Q++)S=(R=B[Q])[1]-R[0],H.push(Y),H.push(S),(N=Q+1)<B.length&&(Y=B[N][0]-R[1]);return H.push(D.height),H}function v(D,R){return D.map(function(S){return S.map(function(N){return Math.max(0,N*R)}).sort(r)})}function _(){m.select(document.body).style("cursor",null)}function w(D){D.attr("stroke-dasharray",y)}function x(D,R){var S=m.select(D).selectAll(".highlight, .highlight-shadow");w(R?S.transition().duration(i.bar.snapDuration).each("end",R):S)}function E(D,R){var S,N=D.brush,B=NaN,H={};if(N.filterSpecified){var Y=D.height,Q=N.filter.getConsolidated(),ne=v(Q,Y),ae=NaN,te=NaN,K=NaN;for(S=0;S<=ne.length;S++){var q=ne[S];if(q&&q[0]<=R&&R<=q[1]){ae=S;break}if(te=S?S-1:NaN,q&&q[0]>R){K=S;break}}if(B=ae,isNaN(B)&&(B=isNaN(te)||isNaN(K)?isNaN(te)?K:te:R-ne[te][1]<ne[K][0]-R?te:K),!isNaN(B)){var re=ne[B],V=function(ie,ue){var fe=i.bar.handleHeight;if(!(ue>ie[1]+fe||ue<ie[0]-fe))return ue>=.9*ie[1]+.1*ie[0]?"n":ue<=.9*ie[0]+.1*ie[1]?"s":"ns"}(re,R);V&&(H.interval=Q[B],H.intervalPix=re,H.region=V)}}if(D.ordinal&&!H.region){var W=D.unitTickvals,Z=D.unitToPaddedPx.invert(R);for(S=0;S<W.length;S++){var oe=[.25*W[Math.max(S-1,0)]+.75*W[S],.25*W[Math.min(S+1,W.length-1)]+.75*W[S]];if(Z>=oe[0]&&Z<=oe[1]){H.clickableOrdinalRange=oe;break}}}return H}function k(D,R){m.event.sourceEvent.stopPropagation();var S=R.height-m.mouse(D)[1]-2*i.verticalPadding,N=R.brush.svgBrush;N.wasDragged=!0,N._dragging=!0,N.newExtent=N.grabbingBar?[S-N.grabPoint,S+N.barLength-N.grabPoint].map(R.unitToPaddedPx.invert):[N.startExtent,R.unitToPaddedPx.invert(S)].sort(r),R.brush.filterSpecified=!0,N.extent=N.stayingIntervals.concat([N.newExtent]),N.brushCallback(R),x(D.parentNode)}function C(D,R){var S=E(R,R.height-m.mouse(D)[1]-2*i.verticalPadding),N="crosshair";S.clickableOrdinalRange?N="pointer":S.region&&(N=S.region+"-resize"),m.select(document.body).style("cursor",N)}function L(D){D.on("mousemove",function(R){m.event.preventDefault(),R.parent.inBrushDrag||C(this,R)}).on("mouseleave",function(R){R.parent.inBrushDrag||_()}).call(m.behavior.drag().on("dragstart",function(R){!function(S,N){m.event.sourceEvent.stopPropagation();var B=N.height-m.mouse(S)[1]-2*i.verticalPadding,H=N.unitToPaddedPx.invert(B),Y=N.brush,Q=E(N,B),ne=Q.interval,ae=Y.svgBrush;if(ae.wasDragged=!1,ae.grabbingBar="ns"===Q.region,ae.grabbingBar){var te=ne.map(N.unitToPaddedPx);ae.grabPoint=B-te[0]-i.verticalPadding,ae.barLength=te[1]-te[0]}ae.clickableOrdinalRange=Q.clickableOrdinalRange,ae.stayingIntervals=N.multiselect&&Y.filterSpecified?Y.filter.getConsolidated():[],ne&&(ae.stayingIntervals=ae.stayingIntervals.filter(function(K){return K[0]!==ne[0]&&K[1]!==ne[1]})),ae.startExtent=Q.region?ne["s"===Q.region?1:0]:H,N.parent.inBrushDrag=!0,ae.brushStartCallback()}(this,R)}).on("drag",function(R){k(this,R)}).on("dragend",function(R){!function(S,N){var B=N.brush,H=B.filter,Y=B.svgBrush;Y._dragging||(C(S,N),k(S,N),N.brush.svgBrush.wasDragged=!1),Y._dragging=!1,m.event.sourceEvent.stopPropagation();var Q=Y.grabbingBar;if(Y.grabbingBar=!1,Y.grabLocation=void 0,N.parent.inBrushDrag=!1,_(),!Y.wasDragged)return Y.wasDragged=void 0,Y.clickableOrdinalRange?B.filterSpecified&&N.multiselect?Y.extent.push(Y.clickableOrdinalRange):(Y.extent=[Y.clickableOrdinalRange],B.filterSpecified=!0):Q?(Y.extent=Y.stayingIntervals,0===Y.extent.length&&A(B)):A(B),Y.brushCallback(N),x(S.parentNode),void Y.brushEndCallback(B.filterSpecified?H.getConsolidated():[]);var ne=function(){H.set(H.getConsolidated())};if(N.ordinal){var ae=N.unitTickvals;ae[ae.length-1]<ae[0]&&ae.reverse(),Y.newExtent=[o(0,ae,Y.newExtent[0],Y.stayingIntervals),o(1,ae,Y.newExtent[1],Y.stayingIntervals)];var te=Y.newExtent[1]>Y.newExtent[0];Y.extent=Y.stayingIntervals.concat(te?[Y.newExtent]:[]),Y.extent.length||A(B),Y.brushCallback(N),te?x(S.parentNode,ne):(ne(),x(S.parentNode))}else ne();Y.brushEndCallback(B.filterSpecified?H.getConsolidated():[])}(this,R)}))}function P(D,R){return D[0]-R[0]}function A(D){D.filterSpecified=!1,D.svgBrush.extent=[[-1/0,1/0]]}function I(D){for(var R,S=D.slice(),N=[],B=S.shift();B;){for(R=B.slice();(B=S.shift())&&B[0]<=R[1];)R[1]=Math.max(R[1],B[1]);N.push(R)}return 1===N.length&&N[0][0]>N[0][1]&&(N=[]),N}G.exports={makeBrush:function(D,R,S,N,B,H){var Y,ne,ae,te,Q=(te=[],{set:function(K){1===(te=K.map(function(q){return q.slice().sort(r)}).sort(P)).length&&te[0][0]===-1/0&&te[0][1]===1/0&&(te=[[0,-1]]),ne=I(te),ae=te.reduce(function(q,re){return[Math.min(q[0],re[0]),Math.max(q[1],re[1])]},[1/0,-1/0])},get:function(){return te.slice()},getConsolidated:function(){return ne},getBounds:function(){return ae}});return Q.set(S),{filter:Q,filterSpecified:R,svgBrush:{extent:[],brushStartCallback:N,brushCallback:(Y=B,function(ne){var K,ae=ne.brush,te=(K=ae,K.svgBrush.extent.map(function(q){return q.slice()})).slice();ae.filter.set(te),Y()}),brushEndCallback:H}}},ensureAxisBrush:function(D,R){var S=D.selectAll("."+i.cn.axisBrush).data(p,b);S.enter().append("g").classed(i.cn.axisBrush,!0),function(N,B){var H=N.selectAll(".background").data(p);H.enter().append("rect").classed("background",!0).call(d).call(g).style("pointer-events","auto").attr("transform",u(0,i.verticalPadding)),H.call(L).attr("height",function(ne){return ne.height-i.verticalPadding});var Y=N.selectAll(".highlight-shadow").data(p);Y.enter().append("line").classed("highlight-shadow",!0).attr("x",-i.bar.width/2).attr("stroke-width",i.bar.width+i.bar.strokeWidth).attr("stroke",B).attr("opacity",i.bar.strokeOpacity).attr("stroke-linecap","butt"),Y.attr("y1",function(ne){return ne.height}).call(w);var Q=N.selectAll(".highlight").data(p);Q.enter().append("line").classed("highlight",!0).attr("x",-i.bar.width/2).attr("stroke-width",i.bar.width-i.bar.strokeWidth).attr("stroke",i.bar.fillColor).attr("opacity",i.bar.fillOpacity).attr("stroke-linecap","butt"),Q.attr("y1",function(ne){return ne.height}).call(w)}(S,R)},cleanRanges:function(D,R){if(Array.isArray(D[0])?(D=D.map(function(N){return N.sort(r)}),D=R.multiselect?I(D.sort(P)):[D[0]]):D=[D.sort(r)],R.tickvals){var S=R.tickvals.slice().sort(r);if(!(D=D.map(function(N){var B=[o(0,S,N[0],[]),o(1,S,N[1],[])];if(B[1]>B[0])return B}).filter(function(N){return N})).length)return}return D.length>1?D:D[0]}}},{"../../lib":803,"../../lib/gup":800,"./constants":1184,"@plotly/d3":58}],1182:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../plots/get_data").getModuleCalcData,b=h("./plot"),p=h("../../constants/xmlns_namespaces");X.name="parcoords",X.plot=function(r){var u=m(r.calcdata,"parcoords")[0];u.length&&b(r,u)},X.clean=function(r,u,c,l){var f=l._has&&l._has("parcoords"),s=u._has&&u._has("parcoords");f&&!s&&(l._paperdiv.selectAll(".parcoords").remove(),l._glimages.selectAll("*").remove())},X.toSVG=function(r){var u=r._fullLayout._glimages,c=i.select(r).selectAll(".svg-container");c.filter(function(l,f){return f===c.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var l=this.toDataURL("image/png");u.append("svg:image").attr({xmlns:p.svg,"xlink:href":l,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){i.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":780,"../../plots/get_data":891,"./plot":1191,"@plotly/d3":58}],1183:[function(h,G,X){"use strict";var i=h("../../lib").isArrayOrTypedArray,m=h("../../components/colorscale"),b=h("../../lib/gup").wrap;G.exports=function(p,r){var u,c;return m.hasColorscale(r,"line")&&i(r.line.color)?(u=r.line.color,c=m.extractOpts(r.line).colorscale,m.calc(p,r,{vals:u,containerStr:"line",cLetter:"c"})):(u=function(l){for(var f=new Array(l),s=0;s<l;s++)f[s]=.5;return f}(r._length),c=[[0,r.line.color],[1,r.line.color]]),b({lineColor:u,cscale:c})}},{"../../components/colorscale":678,"../../lib":803,"../../lib/gup":800}],1184:[function(h,G,X){"use strict";G.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1185:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/colorscale/helpers").hasColorscale,b=h("../../components/colorscale/defaults"),p=h("../../plots/domain").defaults,r=h("../../plots/array_container_defaults"),u=h("../../plots/cartesian/axes"),c=h("./attributes"),l=h("./axisbrush"),f=h("./constants").maxDimensionCount,s=h("./merge_length");function o(d,g,y,v){function _(C,L){return i.coerce(d,g,c.dimensions,C,L)}var w=_("values"),x=_("visible");if(w&&w.length||(x=g.visible=!1),x){_("label"),_("tickvals"),_("ticktext"),_("tickformat");var E=_("range");g._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:E},u.setConvert(g._ax,v.layout),_("multiselect");var k=_("constraintrange");k&&(g.constraintrange=l.cleanRanges(k,g))}}G.exports=function(d,g,y,v){function _(C,L){return i.coerce(d,g,c,C,L)}var w=d.dimensions;Array.isArray(w)&&w.length>f&&(i.log("parcoords traces support up to "+f+" dimensions at the moment"),w.splice(f));var x=r(d,g,{name:"dimensions",layout:v,handleItemDefaults:o}),E=function(C,L,P,A,I){var D=I("line.color",P);if(m(C,"line")&&i.isArrayOrTypedArray(D)){if(D.length)return I("line.colorscale"),b(C,L,A,I,{prefix:"line.",cLetter:"c"}),D.length;L.line.color=P}return 1/0}(d,g,y,v,_);p(g,v,_),Array.isArray(x)&&x.length||(g.visible=!1),s(g,x,"values",E);var k={family:v.font.family,size:Math.round(v.font.size/1.2),color:v.font.color};i.coerceFont(_,"labelfont",k),i.coerceFont(_,"tickfont",k),i.coerceFont(_,"rangefont",k),_("labelangle"),_("labelside")}},{"../../components/colorscale/defaults":676,"../../components/colorscale/helpers":677,"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/cartesian/axes":854,"../../plots/domain":882,"./attributes":1180,"./axisbrush":1181,"./constants":1184,"./merge_length":1189}],1186:[function(h,G,X){"use strict";var i=h("../../lib").isTypedArray;X.convertTypedArray=function(m){return i(m)?Array.prototype.slice.call(m):m},X.isOrdinal=function(m){return!!m.tickvals},X.isVisible=function(m){return m.visible||!("visible"in m)}},{"../../lib":803}],1187:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),calc:h("./calc"),plot:h("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:h("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":1180,"./base_plot":1182,"./calc":1183,"./defaults":1185,"./plot":1191}],1188:[function(h,G,X){"use strict";var i=h("glslify"),m=i(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform sampler2D mask, palette;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(mask,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),b=i(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),p=h("./constants").maxDimensionCount,r=h("../../lib"),u=new Uint8Array(4),c=new Uint8Array(4),l={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function f(x,E,k,C,L){var P=x._gl;P.enable(P.SCISSOR_TEST),P.scissor(E,k,C,L),x.clear({color:[0,0,0,0],depth:1})}function s(x,E,k,C,L,P){var A=P.key;k.drawCompleted||(x.read({x:0,y:0,width:1,height:1,data:u}),k.drawCompleted=!0),function I(D){var R=Math.min(C,L-D*C);0===D&&(window.cancelAnimationFrame(k.currentRafs[A]),delete k.currentRafs[A],f(x,P.scissorX,P.scissorY,P.scissorWidth,P.viewBoxSize[1])),k.clearOnly||(P.count=2*R,P.offset=2*D*C,E(P),D*C+R<L&&(k.currentRafs[A]=window.requestAnimationFrame(function(){I(D+1)})),k.drawCompleted=!1)}(0)}function o(x,E){for(var k=new Array(256),C=0;C<256;C++)k[C]=x(C/255).concat(E);return k}function d(x,E){return(x>>>8*E)%256/255}function g(x,E,k){for(var C=new Array(8*E),L=0,P=0;P<E;P++)for(var A=0;A<2;A++)for(var I=0;I<4;I++){var D=4*x+I,R=k[64*P+D];63===D&&0===A&&(R*=-1),C[L++]=R}return C}function y(x){var E="0"+x;return E.substr(E.length-2)}function v(x){return x<p?"p"+y(x+1)+"_"+y(x+4):"colors"}function _(x,E,k,C,L,P,A,I,D,R,S,N,B,H){for(var Y=[[],[]],Q=0;Q<64;Q++)Y[0][Q]=Q===L?1:0,Y[1][Q]=Q===P?1:0;var ne=x.lines.canvasOverdrag*H,ae=x.domain,te=x.canvasWidth*H,K=x.canvasHeight*H,q=x.pad.l*H,re=x.pad.b*H,V=x.layoutHeight*H,W=x.layoutWidth*H,Z=x.deselectedLines.color;return r.extendFlat({key:S,resolution:[te,K],viewBoxPos:[(A*=H)+ne,I*=H],viewBoxSize:[D*=H,R*=H],i0:L,i1:P,dim0A:Y[0].slice(0,16),dim0B:Y[0].slice(16,32),dim0C:Y[0].slice(32,48),dim0D:Y[0].slice(48,64),dim1A:Y[1].slice(0,16),dim1B:Y[1].slice(16,32),dim1C:Y[1].slice(32,48),dim1D:Y[1].slice(48,64),drwLayer:N,contextColor:[Z[0]/255,Z[1]/255,Z[2]/255,Z[3]<1?Z[3]:Math.max(1/255,Math.pow(1/x.lines.color.length,1/3))],scissorX:(C===E?0:A+ne)+(q-ne)+W*ae.x[0],scissorWidth:(C===k?te-A+ne:D+.5)+(C===E?A+ne:0),scissorY:I+re+V*ae.y[0],scissorHeight:R,viewportX:q-ne+W*ae.x[0],viewportY:re+V*ae.y[0],viewportWidth:te,viewportHeight:K},B)}function w(x){var E=Math.max(0,Math.floor(2047*x[0]),0),k=Math.min(2047,Math.ceil(2047*x[1]),2047);return[Math.min(E,k),Math.max(E,k)]}G.exports=function(x,E){var k,L,P,A,I=E.context,D=E.pick,R=E.regl,S=R._gl,N=S.getParameter(S.ALIASED_LINE_WIDTH_RANGE),B=Math.max(N[0],Math.min(N[1],E.viewModel.plotGlPixelRatio)),H={currentRafs:{},drawCompleted:!0,clearOnly:!1},Y=function(K){for(var q={},re=0;re<=p;re+=4)q[v(re)]=K.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return q}(R),Q=R.texture(l),ne=[];te(E);var ae=R({profile:!1,blend:{enable:I,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!I,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:R.prop("scissorX"),y:R.prop("scissorY"),width:R.prop("scissorWidth"),height:R.prop("scissorHeight")}},viewport:{x:R.prop("viewportX"),y:R.prop("viewportY"),width:R.prop("viewportWidth"),height:R.prop("viewportHeight")},dither:!1,vert:m,frag:b,primitive:"lines",lineWidth:B,attributes:Y,uniforms:{resolution:R.prop("resolution"),viewBoxPos:R.prop("viewBoxPos"),viewBoxSize:R.prop("viewBoxSize"),dim0A:R.prop("dim0A"),dim1A:R.prop("dim1A"),dim0B:R.prop("dim0B"),dim1B:R.prop("dim1B"),dim0C:R.prop("dim0C"),dim1C:R.prop("dim1C"),dim0D:R.prop("dim0D"),dim1D:R.prop("dim1D"),loA:R.prop("loA"),hiA:R.prop("hiA"),loB:R.prop("loB"),hiB:R.prop("hiB"),loC:R.prop("loC"),hiC:R.prop("hiC"),loD:R.prop("loD"),hiD:R.prop("hiD"),palette:Q,contextColor:R.prop("contextColor"),mask:R.prop("maskTexture"),drwLayer:R.prop("drwLayer"),maskHeight:R.prop("maskHeight")},offset:R.prop("offset"),count:R.prop("count")});function te(K){k=K.model,L=K.viewModel.dimensions.slice(),P=L[0]?L[0].values.length:0;var q=k.lines,re=D?q.color.map(function(W,Z){return Z/q.color.length}):q.color,V=function(W,Z,oe){for(var ue=new Array(W*(p+4)),fe=0,he=0;he<W;he++){for(var de=0;de<p;de++)ue[fe++]=de<Z.length?Z[de].paddedUnitValues[he]:.5;ue[fe++]=d(he,2),ue[fe++]=d(he,1),ue[fe++]=d(he,0),ue[fe++]=Math.max(1e-6,Math.min(.999999,oe[he]))}return ue}(P,L,re);(function(W,Z,oe){for(var ie=0;ie<=p;ie+=4)W[v(ie)](g(ie/4,Z,oe))})(Y,P,V),I||D||(Q=R.texture(r.extendFlat({data:o(k.unitToColor,255)},l)))}return{render:function(K,q,re){var V,W,Z,oe=K.length,ie=1/0,ue=-1/0;for(V=0;V<oe;V++)K[V].dim0.canvasX<ie&&(ie=K[V].dim0.canvasX,W=V),K[V].dim1.canvasX>ue&&(ue=K[V].dim1.canvasX,Z=V);0===oe&&f(R,0,0,k.canvasWidth,k.canvasHeight);var fe=function(Ie){var Ce,_e,we,Se=[[],[]];for(we=0;we<64;we++){var Oe=!Ie&&we<L.length?L[we].brush.filter.getBounds():[-1/0,1/0];Se[0][we]=Oe[0],Se[1][we]=Oe[1]}var Be=new Array(16384);for(Ce=0;Ce<16384;Ce++)Be[Ce]=255;if(!Ie)for(Ce=0;Ce<L.length;Ce++){var He=Ce%8,Xe=(Ce-He)/8,nt=Math.pow(2,He),et=L[Ce].brush.filter.get();if(!(et.length<2)){var qe=w(et[0])[1];for(_e=1;_e<et.length;_e++){var Ye=w(et[_e]);for(we=qe+1;we<Ye[0];we++)Be[8*we+Xe]&=~nt;qe=Math.max(qe,Ye[1])}}}var ot={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Be};return A?A(ot):A=R.texture(ot),{maskTexture:A,maskHeight:2048,loA:Se[0].slice(0,16),loB:Se[0].slice(16,32),loC:Se[0].slice(32,48),loD:Se[0].slice(48,64),hiA:Se[1].slice(0,16),hiB:Se[1].slice(16,32),hiC:Se[1].slice(32,48),hiD:Se[1].slice(48,64)}}(I);for(V=0;V<oe;V++){var he=K[V],de=he.dim0.crossfilterDimensionIndex,be=he.dim1.crossfilterDimensionIndex,pe=he.canvasX,Te=he.canvasY,ye=pe+he.panelSizeX,ke=he.plotGlPixelRatio;if(q||!ne[de]||ne[de][0]!==pe||ne[de][1]!==ye){ne[de]=[pe,ye];var ze=_(k,W,Z,V,de,be,pe,Te,he.panelSizeX,he.panelSizeY,he.dim0.crossfilterDimensionIndex,I?0:D?2:1,fe,ke);H.clearOnly=re,s(R,ae,H,q?k.lines.blockLineCount:P,P,ze)}}},readPixel:function(K,q){return R.read({x:K,y:q,width:1,height:1,data:c}),c},readPixels:function(K,q,re,V){var W=new Uint8Array(4*re*V);return R.read({x:K,y:q,width:re,height:V,data:W}),W},destroy:function(){for(var K in x.style["pointer-events"]="none",Q.destroy(),A&&A.destroy(),Y)Y[K].destroy()},update:te}}},{"../../lib":803,"./constants":1184,glslify:442}],1189:[function(h,G,X){"use strict";G.exports=function(i,m,b,p){var r,u;for(p||(p=1/0),r=0;r<m.length;r++)(u=m[r]).visible&&(p=Math.min(p,u[b].length));for(p===1/0&&(p=0),i._length=p,r=0;r<m.length;r++)(u=m[r]).visible&&(u._length=p);return p}},{}],1190:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=m.numberFormat,p=h("color-rgba"),r=h("../../plots/cartesian/axes"),u=m.strRotate,c=m.strTranslate,l=h("../../lib/svg_text_utils"),f=h("../../components/drawing"),s=h("../../components/colorscale"),o=h("../../lib/gup"),d=o.keyFun,g=o.repeat,y=o.unwrap,v=h("./helpers"),_=h("./constants"),w=h("./axisbrush"),x=h("./lines");function E(ne,ae,te){return m.aggNums(ne,null,ae,te)}function k(ne,ae){return L(E(Math.min,ne,ae),E(Math.max,ne,ae))}function C(ne){var ae=ne.range;return ae?L(ae[0],ae[1]):k(ne.values,ne._length)}function L(ne,ae){return!isNaN(ne)&&isFinite(ne)||(ne=0),!isNaN(ae)&&isFinite(ae)||(ae=0),ne===ae&&(0===ne?(ne-=1,ae+=1):(ne*=.9,ae*=1.1)),[ne,ae]}function P(ne,ae,te,K,q){var re,V,W=C(te);return K?i.scale.ordinal().domain(K.map((re=b(te.tickformat),V=q,V?function(Z,oe){var ie=V[oe];return null==ie?re(Z):ie}:re))).range(K.map(function(Z){return ne-ae+(Z-W[0])/(W[1]-W[0])*(2*ae-ne)})):i.scale.linear().domain(W).range([ne-ae,ae])}function A(ne){if(ne.tickvals){var ae=C(ne);return i.scale.ordinal().domain(ne.tickvals).range(ne.tickvals.map(function(te){return(te-ae[0])/(ae[1]-ae[0])}))}}function I(ne){var ae=ne.map(function(q){return q[0]}),te=ne.map(function(q){var re=p(q[1]);return i.rgb("rgb("+re[0]+","+re[1]+","+re[2]+")")}),K="rgb".split("").map(function(q){return i.scale.linear().clamp(!0).domain(ae).range(te.map((re=q,function(V){return V[re]})));var re});return function(q){return K.map(function(re){return re(q)})}}function D(ne){return ne.dimensions.some(function(ae){return ae.brush.filterSpecified})}function R(ne,ae,te){var K=y(ae),q=K.trace,re=v.convertTypedArray(K.lineColor),V=q.line,W={color:p(_.deselectedLineColor)},Z=s.extractOpts(V),oe=Z.reversescale?s.flipScale(K.cscale):K.cscale,ie=q.domain,ue=q.dimensions,fe=ne.width,he=q.labelangle,de=q.labelside,be=q.labelfont,pe=q.tickfont,Te=q.rangefont,ye=m.extendDeepNoArrays({},V,{color:re.map(i.scale.linear().domain(C({values:re,range:[Z.min,Z.max],_length:q._length}))),blockLineCount:_.blockLineCount,canvasOverdrag:_.overdrag*_.canvasPixelRatio}),ke=Math.floor(fe*(ie.x[1]-ie.x[0])),ze=Math.floor(ne.height*(ie.y[1]-ie.y[0])),je=ne.margin||{l:80,r:80,t:100,b:80},Ie=ke,Ce=ze;return{key:te,colCount:ue.filter(v.isVisible).length,dimensions:ue,tickDistance:_.tickDistance,unitToColor:I(oe),lines:ye,deselectedLines:W,labelAngle:he,labelSide:de,labelFont:be,tickFont:pe,rangeFont:Te,layoutWidth:fe,layoutHeight:ne.height,domain:ie,translateX:ie.x[0]*fe,translateY:ne.height-ie.y[1]*ne.height,pad:je,canvasWidth:Ie*_.canvasPixelRatio+2*ye.canvasOverdrag,canvasHeight:Ce*_.canvasPixelRatio,width:Ie,height:Ce,canvasPixelRatio:_.canvasPixelRatio}}function S(ne,ae,te){var fe,he,K=te.width,q=te.height,re=te.dimensions,V=te.canvasPixelRatio,W=function(fe){return K*fe/Math.max(1,te.colCount-1)},Z=_.verticalPadding/q,oe=(fe=q,he=_.verticalPadding,i.scale.linear().range([he,fe-he])),ie={key:te.key,xScale:W,model:te,inBrushDrag:!1},ue={};return ie.dimensions=re.filter(v.isVisible).map(function(fe,he){var Be,He,de=(Be=fe,He=Z,i.scale.linear().domain(C(Be)).range([He,1-He])),be=ue[fe.label];ue[fe.label]=(be||0)+1;var pe=fe.label+(be?"__"+be:""),Te=fe.constraintrange,ye=Te&&Te.length;ye&&!Array.isArray(Te[0])&&(Te=[Te]);var ke=ye?Te.map(function(Be){return Be.map(de)}):[[-1/0,1/0]],ze=fe.values;ze.length>fe._length&&(ze=ze.slice(0,fe._length));var je,Ie=fe.tickvals;function Ce(Be,He){return{val:Be,text:je[He]}}function _e(Be,He){return Be.val-He.val}if(Array.isArray(Ie)&&Ie.length){je=fe.ticktext,Array.isArray(je)&&je.length?je.length>Ie.length?je=je.slice(0,Ie.length):Ie.length>je.length&&(Ie=Ie.slice(0,je.length)):je=Ie.map(b(fe.tickformat));for(var we=1;we<Ie.length;we++)if(Ie[we]<Ie[we-1]){for(var Se=Ie.map(Ce).sort(_e),Oe=0;Oe<Ie.length;Oe++)Ie[Oe]=Se[Oe].val,je[Oe]=Se[Oe].text;break}}else Ie=void 0;return ze=v.convertTypedArray(ze),{key:pe,label:fe.label,tickFormat:fe.tickformat,tickvals:Ie,ticktext:je,ordinal:v.isOrdinal(fe),multiselect:fe.multiselect,xIndex:he,crossfilterDimensionIndex:he,visibleIndex:fe._index,height:q,values:ze,paddedUnitValues:ze.map(de),unitTickvals:Ie&&Ie.map(de),xScale:W,x:W(he),canvasX:W(he)*V,unitToPaddedPx:oe,domainScale:P(q,_.verticalPadding,fe,Ie,je),ordinalScale:A(fe),parent:ie,model:te,brush:w.makeBrush(ne,ye,ke,function(){ne.linePickActive(!1)},function(){var Be=ie;Be.focusLayer&&Be.focusLayer.render(Be.panels,!0);var He=D(Be);!ne.contextShown()&&He?(Be.contextLayer&&Be.contextLayer.render(Be.panels,!0),ne.contextShown(!0)):ne.contextShown()&&!He&&(Be.contextLayer&&Be.contextLayer.render(Be.panels,!0,!0),ne.contextShown(!1))},function(Be){if(ie.focusLayer.render(ie.panels,!0),ie.pickLayer&&ie.pickLayer.render(ie.panels,!0),ne.linePickActive(!0),ae&&ae.filterChanged){var He=de.invert,Xe=Be.map(function(nt){return nt.map(He).sort(m.sorterAsc)}).sort(function(nt,et){return nt[0]-et[0]});ae.filterChanged(ie.key,fe._index,Xe)}})}}),ie}function N(ne){ne.classed(_.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function B(ne,ae){var K=ne*Math.PI/180;return{dir:"top"===ae?1:-1,dx:Math.sin(K),dy:Math.cos(K),degrees:ne}}function H(ne,ae,te){for(var K=ae.panels||(ae.panels=[]),q=ne.data(),re=0;re<q.length-1;re++){var V=K[re]||(K[re]={}),W=q[re],Z=q[re+1];V.dim0=W,V.dim1=Z,V.canvasX=W.canvasX,V.panelSizeX=Z.canvasX-W.canvasX,V.panelSizeY=ae.model.canvasHeight,V.y=0,V.canvasY=0,V.plotGlPixelRatio=te}}function Y(ne,ae){return r.tickText(ne._ax,ae,!1).text}function Q(ne,ae){if(ne.ordinal)return"";var te=ne.domainScale.domain();return Y(ne.model.dimensions[ne.visibleIndex],te[ae?te.length-1:0])}G.exports=function(ne,ae,te,K){var q=ne._fullLayout,re=q._toppaper,V=q._glcontainer,W=ne._context.plotGlPixelRatio,Z=ne._fullLayout.paper_bgcolor;!function(Oe){for(var Be=0;Be<Oe.length;Be++)for(var He=0;He<Oe[Be].length;He++)for(var Xe=Oe[Be][He].trace,nt=Xe.dimensions,et=0;et<nt.length;et++){var qe=nt[et].values,Ye=nt[et]._ax;Ye&&(Ye.range=Ye.range?L(Ye.range[0],Ye.range[1]):k(qe,Xe._length),Ye.dtick||(Ye.dtick=.01*(Math.abs(Ye.range[1]-Ye.range[0])||1)),Ye.tickformat=nt[et].tickformat,r.calcTicks(Ye),Ye.cleanRange())}}(ae);var oe,ie,ue=(oe=!0,ie=!1,{linePickActive:function(Oe){return arguments.length?oe=!!Oe:oe},contextShown:function(Oe){return arguments.length?ie=!!Oe:ie}}),fe=ae.filter(function(Oe){return y(Oe).trace.visible}).map(R.bind(0,te)).map(S.bind(0,ue,K));V.each(function(Oe,Be){return m.extendFlat(Oe,fe[Be])});var he=V.selectAll(".gl-canvas").each(function(Oe){Oe.viewModel=fe[0],Oe.viewModel.plotGlPixelRatio=W,Oe.viewModel.paperColor=Z,Oe.model=Oe.viewModel?Oe.viewModel.model:null}),de=null;he.filter(function(Oe){return Oe.pick}).style("pointer-events","auto").on("mousemove",function(Oe){if(ue.linePickActive()&&Oe.lineLayer&&K&&K.hover){var Be=i.event,He=this.width,Xe=this.height,nt=i.mouse(this),et=nt[0],qe=nt[1];if(et<0||qe<0||et>=He||qe>=Xe)return;var Ye=Oe.lineLayer.readPixel(et,Xe-1-qe),ot=0!==Ye[3],at=ot?Ye[2]+256*(Ye[1]+256*Ye[0]):null,ct={x:et,y:qe,clientX:Be.clientX,clientY:Be.clientY,dataIndex:Oe.model.key,curveNumber:at};at!==de&&(ot?K.hover(ct):K.unhover&&K.unhover(ct),de=at)}}),he.style("opacity",function(Oe){return Oe.pick?0:1}),re.style("background","rgba(255, 255, 255, 0)");var be=re.selectAll("."+_.cn.parcoords).data(fe,d);be.exit().remove(),be.enter().append("g").classed(_.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),be.attr("transform",function(Oe){return c(Oe.model.translateX,Oe.model.translateY)});var pe=be.selectAll("."+_.cn.parcoordsControlView).data(g,d);pe.enter().append("g").classed(_.cn.parcoordsControlView,!0),pe.attr("transform",function(Oe){return c(Oe.model.pad.l,Oe.model.pad.t)});var Te=pe.selectAll("."+_.cn.yAxis).data(function(Oe){return Oe.dimensions},d);Te.enter().append("g").classed(_.cn.yAxis,!0),pe.each(function(Oe){H(Te,Oe,W)}),he.each(function(Oe){Oe.viewModel&&(!Oe.lineLayer||K?Oe.lineLayer=x(this,Oe):Oe.lineLayer.update(Oe),(Oe.key||0===Oe.key)&&(Oe.viewModel[Oe.key]=Oe.lineLayer),Oe.lineLayer.render(Oe.viewModel.panels,!Oe.context||K))}),Te.attr("transform",function(Oe){return c(Oe.xScale(Oe.xIndex),0)}),Te.call(i.behavior.drag().origin(function(Oe){return Oe}).on("drag",function(Oe){var Be=Oe.parent;ue.linePickActive(!1),Oe.x=Math.max(-_.overdrag,Math.min(Oe.model.width+_.overdrag,i.event.x)),Oe.canvasX=Oe.x*Oe.model.canvasPixelRatio,Te.sort(function(He,Xe){return He.x-Xe.x}).each(function(He,Xe){He.xIndex=Xe,He.x=Oe===He?He.x:He.xScale(He.xIndex),He.canvasX=He.x*He.model.canvasPixelRatio}),H(Te,Be,W),Te.filter(function(He){return 0!==Math.abs(Oe.xIndex-He.xIndex)}).attr("transform",function(He){return c(He.xScale(He.xIndex),0)}),i.select(this).attr("transform",c(Oe.x,0)),Te.each(function(He,Xe,nt){nt===Oe.parent.key&&(Be.dimensions[Xe]=He)}),Be.contextLayer&&Be.contextLayer.render(Be.panels,!1,!D(Be)),Be.focusLayer.render&&Be.focusLayer.render(Be.panels)}).on("dragend",function(Oe){var Be=Oe.parent;Oe.x=Oe.xScale(Oe.xIndex),Oe.canvasX=Oe.x*Oe.model.canvasPixelRatio,H(Te,Be,W),i.select(this).attr("transform",function(He){return c(He.x,0)}),Be.contextLayer&&Be.contextLayer.render(Be.panels,!1,!D(Be)),Be.focusLayer&&Be.focusLayer.render(Be.panels),Be.pickLayer&&Be.pickLayer.render(Be.panels,!0),ue.linePickActive(!0),K&&K.axesMoved&&K.axesMoved(Be.key,Be.dimensions.map(function(He){return He.crossfilterDimensionIndex}))})),Te.exit().remove();var ye=Te.selectAll("."+_.cn.axisOverlays).data(g,d);ye.enter().append("g").classed(_.cn.axisOverlays,!0),ye.selectAll("."+_.cn.axis).remove();var ke=ye.selectAll("."+_.cn.axis).data(g,d);ke.enter().append("g").classed(_.cn.axis,!0),ke.each(function(Oe){var Be=Oe.model.height/Oe.model.tickDistance,He=Oe.domainScale,Xe=He.domain();i.select(this).call(i.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Be,Oe.tickFormat).tickValues(Oe.ordinal?Xe:null).tickFormat(function(nt){return v.isOrdinal(Oe)?nt:Y(Oe.model.dimensions[Oe.visibleIndex],nt)}).scale(He)),f.font(ke.selectAll("text"),Oe.model.tickFont)}),ke.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),ke.selectAll("text").style("text-shadow",l.makeTextShadow(Z)).style("cursor","default");var ze=ye.selectAll("."+_.cn.axisHeading).data(g,d);ze.enter().append("g").classed(_.cn.axisHeading,!0);var je=ze.selectAll("."+_.cn.axisTitle).data(g,d);je.enter().append("text").classed(_.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),je.text(function(Oe){return Oe.label}).each(function(Oe){var Be=i.select(this);f.font(Be,Oe.model.labelFont),l.convertToTspans(Be,ne)}).attr("transform",function(Oe){var Be=B(Oe.model.labelAngle,Oe.model.labelSide),He=_.axisTitleOffset;return(Be.dir>0?"":c(0,2*He+Oe.model.height))+u(Be.degrees)+c(-He*Be.dx,-He*Be.dy)}).attr("text-anchor",function(Oe){var Be=B(Oe.model.labelAngle,Oe.model.labelSide);return 2*Math.abs(Be.dx)>Math.abs(Be.dy)?Be.dir*Be.dx<0?"start":"end":"middle"});var Ie=ye.selectAll("."+_.cn.axisExtent).data(g,d);Ie.enter().append("g").classed(_.cn.axisExtent,!0);var Ce=Ie.selectAll("."+_.cn.axisExtentTop).data(g,d);Ce.enter().append("g").classed(_.cn.axisExtentTop,!0),Ce.attr("transform",c(0,-_.axisExtentOffset));var _e=Ce.selectAll("."+_.cn.axisExtentTopText).data(g,d);_e.enter().append("text").classed(_.cn.axisExtentTopText,!0).call(N),_e.text(function(Oe){return Q(Oe,!0)}).each(function(Oe){f.font(i.select(this),Oe.model.rangeFont)});var we=Ie.selectAll("."+_.cn.axisExtentBottom).data(g,d);we.enter().append("g").classed(_.cn.axisExtentBottom,!0),we.attr("transform",function(Oe){return c(0,Oe.model.height+_.axisExtentOffset)});var Se=we.selectAll("."+_.cn.axisExtentBottomText).data(g,d);Se.enter().append("text").classed(_.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(N),Se.text(function(Oe){return Q(Oe,!1)}).each(function(Oe){f.font(i.select(this),Oe.model.rangeFont)}),w.ensureAxisBrush(ye,Z)}},{"../../components/colorscale":678,"../../components/drawing":688,"../../lib":803,"../../lib/gup":800,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"./axisbrush":1181,"./constants":1184,"./helpers":1186,"./lines":1188,"@plotly/d3":58,"color-rgba":133}],1191:[function(h,G,X){"use strict";var i=h("./parcoords"),m=h("../../lib/prepare_regl"),b=h("./helpers").isVisible;function p(r,u,c){var l=u.indexOf(c),f=r.indexOf(l);return-1===f&&(f+=u.length),f}G.exports=function(r,u){var c=r._fullLayout;if(m(r)){var l={},f={},s={},o={},d=c._size;u.forEach(function(g,y){var v=g[0].trace;s[y]=v.index;var _=o[y]=v._fullInput.index;l[y]=r.data[_].dimensions,f[y]=r.data[_].dimensions.slice()}),i(r,u,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},{filterChanged:function(g,y,v){var _=f[g][y],w=v.map(function(P){return P.slice()}),x="dimensions["+y+"].constraintrange",E=c._tracePreGUI[r._fullData[s[g]]._fullInput.uid];void 0===E[x]&&(E[x]=_.constraintrange||null);var C=r._fullData[s[g]].dimensions[y];w.length?(1===w.length&&(w=w[0]),_.constraintrange=w,C.constraintrange=w.slice(),w=[w]):(delete _.constraintrange,delete C.constraintrange,w=null);var L={};L[x]=w,r.emit("plotly_restyle",[L,[o[g]]])},hover:function(g){r.emit("plotly_hover",g)},unhover:function(g){r.emit("plotly_unhover",g)},axesMoved:function(g,y){var _,w,v=(_=y,w=f[g].filter(b),function(x,E){return p(_,w,x)-p(_,w,E)});l[g].sort(v),f[g].filter(function(_){return!b(_)}).sort(function(_){return f[g].indexOf(_)}).forEach(function(_){l[g].splice(l[g].indexOf(_),1),l[g].splice(f[g].indexOf(_),0,_)}),r.emit("plotly_restyle",[{dimensions:[l[g]]},[o[g]]])}})}}},{"../../lib/prepare_regl":816,"./helpers":1186,"./parcoords":1190}],1192:[function(h,G,X){"use strict";var i=h("../../plots/attributes"),m=h("../../plots/domain").attributes,b=h("../../plots/font_attributes"),p=h("../../components/color/attributes"),r=h("../../plots/template_attributes").hovertemplateAttrs,u=h("../../plots/template_attributes").texttemplateAttrs,c=h("../../lib/extend").extendFlat,l=b({editType:"plot",arrayOk:!0,colorEditType:"plot"});G.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:p.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:c({},i.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:r({},{keys:["label","color","value","percent","text"]}),texttemplate:u({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:c({},l,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:c({},l,{}),outsidetextfont:c({},l,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:c({},l,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:m({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:c({},l,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":665,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/domain":882,"../../plots/font_attributes":883,"../../plots/template_attributes":926}],1193:[function(h,G,X){"use strict";var i=h("../../plots/plots");X.name="pie",X.plot=function(m,b,p,r){i.plotBasePlot(X.name,m,b,p,r)},X.clean=function(m,b,p,r){i.cleanBasePlot(X.name,m,b,p,r)}},{"../../plots/plots":917}],1194:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("tinycolor2"),b=h("../../components/color"),p={};function r(c){return function(l,f){return!!l&&!!(l=m(l)).isValid()&&(l=b.addOpacity(l,l.getAlpha()),c[f]||(c[f]=l),l)}}function u(c,l){var f,s=JSON.stringify(c),o=l[s];if(!o){for(o=c.slice(),f=0;f<c.length;f++)o.push(m(c[f]).lighten(20).toHexString());for(f=0;f<c.length;f++)o.push(m(c[f]).darken(20).toHexString());l[s]=o}return o}G.exports={calc:function(c,l){var f,s,o=[],d=c._fullLayout,g=d.hiddenlabels||[],y=l.labels,v=l.marker.colors||[],_=l.values,w=l._length,x=l._hasValues&&w;if(l.dlabel)for(y=new Array(w),f=0;f<w;f++)y[f]=String(l.label0+f*l.dlabel);var E={},k=r(d["_"+l.type+"colormap"]),C=0,L=!1;for(f=0;f<w;f++){var P,A,I;if(x){if(!i(P=_[f])||(P=+P)<0)continue}else P=1;void 0!==(A=y[f])&&""!==A||(A=f);var D=E[A=String(A)];void 0===D?(E[A]=o.length,(I=-1!==g.indexOf(A))||(C+=P),o.push({v:P,label:A,color:k(v[f],A),i:f,pts:[f],hidden:I})):(L=!0,(s=o[D]).v+=P,s.pts.push(f),s.hidden||(C+=P),!1===s.color&&v[f]&&(s.color=k(v[f],A)))}return("funnelarea"===l.type?L:l.sort)&&o.sort(function(R,S){return S.v-R.v}),o[0]&&(o[0].vTotal=C),o},crossTraceCalc:function(c,l){var f=(l||{}).type;f||(f="pie");var s=c._fullLayout,o=c.calcdata,d=s[f+"colorway"],g=s["_"+f+"colormap"];s["extend"+f+"colors"]&&(d=u(d,p));for(var y=0,v=0;v<o.length;v++){var _=o[v];if(_[0].trace.type===f)for(var w=0;w<_.length;w++){var x=_[w];!1===x.color&&(g[x.label]?x.color=g[x.label]:(g[x.label]=x.color=d[y%d.length],y++))}}},makePullColorFn:r,generateExtendedColors:u}},{"../../components/color":666,"fast-isnumeric":249,tinycolor2:598}],1195:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib"),b=h("./attributes"),p=h("../../plots/domain").defaults,r=h("../bar/defaults").handleText;function u(c,l){var f=Array.isArray(c),s=m.isArrayOrTypedArray(l),o=Math.min(f?c.length:1/0,s?l.length:1/0);if(isFinite(o)||(o=0),o&&s){for(var d,g=0;g<o;g++){var y=l[g];if(i(y)&&y>0){d=!0;break}}d||(o=0)}return{hasLabels:f,hasValues:s,len:o}}G.exports={handleLabelsAndValues:u,supplyDefaults:function(c,l,f,s){function o(k,C){return m.coerce(c,l,b,k,C)}var d=u(o("labels"),o("values")),g=d.len;if(l._hasLabels=d.hasLabels,l._hasValues=d.hasValues,!l._hasLabels&&l._hasValues&&(o("label0"),o("dlabel")),g){l._length=g,o("marker.line.width")&&o("marker.line.color"),o("marker.colors"),o("scalegroup");var y,v=o("text"),_=o("texttemplate");if(_||(y=o("textinfo",Array.isArray(v)?"text+percent":"percent")),o("hovertext"),o("hovertemplate"),_||y&&"none"!==y){var w=o("textposition");r(c,l,s,o,w,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(w)||"auto"===w||"outside"===w)&&o("automargin"),("inside"===w||"auto"===w||Array.isArray(w))&&o("insidetextorientation")}p(l,s,o);var x=o("hole");if(o("title.text")){var E=o("title.position",x?"middle center":"top center");x||"middle center"!==E||(l.title.position="top center"),m.coerceFont(o,"title.font",s.font)}o("sort"),o("direction"),o("rotation"),o("pull")}else l.visible=!1}}},{"../../lib":803,"../../plots/domain":882,"../bar/defaults":945,"./attributes":1192,"fast-isnumeric":249}],1196:[function(h,G,X){"use strict";var i=h("../../components/fx/helpers").appendArrayMultiPointValues;G.exports=function(m,b){var p={curveNumber:b.index,pointNumbers:m.pts,data:b._input,fullData:b,label:m.label,color:m.color,value:m.v,percent:m.percent,text:m.text,v:m.v};return 1===m.pts.length&&(p.pointNumber=p.i=m.pts[0]),i(p,b,m.pts),"funnelarea"===b.type&&(delete p.v,delete p.i),p}},{"../../components/fx/helpers":702}],1197:[function(h,G,X){"use strict";var i=h("../../lib");function m(b){return-1!==b.indexOf("e")?b.replace(/[.]?0+e/,"e"):-1!==b.indexOf(".")?b.replace(/[.]?0+$/,""):b}X.formatPiePercent=function(b,p){var r=m((100*b).toPrecision(3));return i.numSeparate(r,p)+"%"},X.formatPieValue=function(b,p){var r=m(b.toPrecision(10));return i.numSeparate(r,p)},X.getFirstFilled=function(b,p){if(Array.isArray(b))for(var r=0;r<p.length;r++){var u=b[p[r]];if(u||0===u||""===u)return u}},X.castOption=function(b,p){return Array.isArray(b)?X.getFirstFilled(b,p):b||void 0},X.getRotationAngle=function(b){return("auto"===b?0:b)*Math.PI/180}},{"../../lib":803}],1198:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults").supplyDefaults,supplyLayoutDefaults:h("./layout_defaults"),layoutAttributes:h("./layout_attributes"),calc:h("./calc").calc,crossTraceCalc:h("./calc").crossTraceCalc,plot:h("./plot").plot,style:h("./style"),styleOne:h("./style_one"),moduleType:"trace",name:"pie",basePlotModule:h("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":1192,"./base_plot":1193,"./calc":1194,"./defaults":1195,"./layout_attributes":1199,"./layout_defaults":1200,"./plot":1201,"./style":1202,"./style_one":1203}],1199:[function(h,G,X){"use strict";G.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1200:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./layout_attributes");G.exports=function(b,p){function r(u,c){return i.coerce(b,p,m,u,c)}r("hiddenlabels"),r("piecolorway",p.colorway),r("extendpiecolors")}},{"../../lib":803,"./layout_attributes":1199}],1201:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../plots/plots"),b=h("../../components/fx"),p=h("../../components/color"),r=h("../../components/drawing"),u=h("../../lib"),c=u.strScale,l=u.strTranslate,f=h("../../lib/svg_text_utils"),s=h("../bar/uniform_text"),o=s.recordMinTextSize,d=s.clearMinTextSize,g=h("../bar/constants").TEXTPAD,y=h("./helpers"),v=h("./event_data"),_=h("../../lib").isValidTextValue;function w(ae,te,K){var q=K[0],re=q.trace,V=q.cx,W=q.cy;"_hasHoverLabel"in re||(re._hasHoverLabel=!1),"_hasHoverEvent"in re||(re._hasHoverEvent=!1),ae.on("mouseover",function(Z){var oe=te._fullLayout,ie=te._fullData[re.index];if(!te._dragging&&!1!==oe.hovermode){var ue=ie.hoverinfo;if(Array.isArray(ue)&&(ue=b.castHoverinfo({hoverinfo:[y.castOption(ue,Z.pts)],_module:re._module},oe,0)),"all"===ue&&(ue="label+text+value+percent+name"),ie.hovertemplate||"none"!==ue&&"skip"!==ue&&ue){var fe=Z.rInscribed||0,he=V+Z.pxmid[0]*(1-fe),de=W+Z.pxmid[1]*(1-fe),be=oe.separators,pe=[];if(ue&&-1!==ue.indexOf("label")&&pe.push(Z.label),Z.text=y.castOption(ie.hovertext||ie.text,Z.pts),ue&&-1!==ue.indexOf("text")){var Te=Z.text;u.isValidTextValue(Te)&&pe.push(Te)}Z.value=Z.v,Z.valueLabel=y.formatPieValue(Z.v,be),ue&&-1!==ue.indexOf("value")&&pe.push(Z.valueLabel),Z.percent=Z.v/q.vTotal,Z.percentLabel=y.formatPiePercent(Z.percent,be),ue&&-1!==ue.indexOf("percent")&&pe.push(Z.percentLabel);var ye=ie.hoverlabel,ke=ye.font;b.loneHover({trace:re,x0:he-fe*q.r,x1:he+fe*q.r,y:de,text:pe.join("<br>"),name:ie.hovertemplate||-1!==ue.indexOf("name")?ie.name:void 0,idealAlign:Z.pxmid[0]<0?"left":"right",color:y.castOption(ye.bgcolor,Z.pts)||Z.color,borderColor:y.castOption(ye.bordercolor,Z.pts),fontFamily:y.castOption(ke.family,Z.pts),fontSize:y.castOption(ke.size,Z.pts),fontColor:y.castOption(ke.color,Z.pts),nameLength:y.castOption(ye.namelength,Z.pts),textAlign:y.castOption(ye.align,Z.pts),hovertemplate:y.castOption(ie.hovertemplate,Z.pts),hovertemplateLabels:Z,eventData:[v(Z,ie)]},{container:oe._hoverlayer.node(),outerContainer:oe._paper.node(),gd:te}),re._hasHoverLabel=!0}re._hasHoverEvent=!0,te.emit("plotly_hover",{points:[v(Z,ie)],event:i.event})}}),ae.on("mouseout",function(Z){var oe=te._fullLayout,ie=te._fullData[re.index],ue=i.select(this).datum();re._hasHoverEvent&&(Z.originalEvent=i.event,te.emit("plotly_unhover",{points:[v(ue,ie)],event:i.event}),re._hasHoverEvent=!1),re._hasHoverLabel&&(b.loneUnhover(oe._hoverlayer.node()),re._hasHoverLabel=!1)}),ae.on("click",function(Z){te._dragging||!1===te._fullLayout.hovermode||(te._hoverdata=[v(Z,te._fullData[re.index])],b.click(te,i.event))})}function x(ae,te,K){var q=y.castOption(ae.insidetextfont.color,te.pts);!q&&ae._input.textfont&&(q=y.castOption(ae._input.textfont.color,te.pts));var re=y.castOption(ae.insidetextfont.family,te.pts)||y.castOption(ae.textfont.family,te.pts)||K.family,V=y.castOption(ae.insidetextfont.size,te.pts)||y.castOption(ae.textfont.size,te.pts)||K.size;return{color:q||p.contrast(te.color),family:re,size:V}}function E(ae,te){for(var K,q,re=0;re<ae.length;re++)if((q=(K=ae[re][0]).trace).title.text){var V=q.title.text;q._meta&&(V=u.templateString(V,q._meta));var W=r.tester.append("text").attr("data-notex",1).text(V).call(r.font,q.title.font).call(f.convertToTspans,te),Z=r.bBox(W.node(),!0);K.titleBox={width:Z.width,height:Z.height},W.remove()}}function k(ae,te,K){var q=K.r||te.rpx1,re=te.rInscribed;if(te.startangle===te.stopangle)return{rCenter:1-re,scale:0,rotate:0,textPosAngle:0};var V,W=te.ring,Z=1===W&&Math.abs(te.startangle-te.stopangle)===2*Math.PI,oe=te.halfangle,ie=te.midangle,ue=K.trace.insidetextorientation,fe="horizontal"===ue,he="tangential"===ue,de="radial"===ue,be="auto"===ue,pe=[];if(!be){var Te,ye=function(_e,we){if(et=(He=te).stopangle,(nt=He.startangle)>(Xe=_e)&&Xe>et||nt<Xe&&Xe<et){var Se=Math.abs(_e-te.startangle),Oe=Math.abs(_e-te.stopangle),Be=Se<Oe?Se:Oe;(V="tan"===we?L(ae,q,W,Be,0):C(ae,q,W,Be,Math.PI/2)).textPosAngle=_e,pe.push(V)}var He,Xe,nt,et};if(fe||he){for(Te=4;Te>=-4;Te-=2)ye(Math.PI*Te,"tan");for(Te=4;Te>=-4;Te-=2)ye(Math.PI*(Te+1),"tan")}if(fe||de){for(Te=4;Te>=-4;Te-=2)ye(Math.PI*(Te+1.5),"rad");for(Te=4;Te>=-4;Te-=2)ye(Math.PI*(Te+.5),"rad")}}if(Z||be||fe){var ke=Math.sqrt(ae.width*ae.width+ae.height*ae.height);if((V={scale:re*q*2/ke,rCenter:1-re,rotate:0}).textPosAngle=(te.startangle+te.stopangle)/2,V.scale>=1)return V;pe.push(V)}(be||de)&&((V=C(ae,q,W,oe,ie)).textPosAngle=(te.startangle+te.stopangle)/2,pe.push(V)),(be||he)&&((V=L(ae,q,W,oe,ie)).textPosAngle=(te.startangle+te.stopangle)/2,pe.push(V));for(var ze=0,je=0,Ie=0;Ie<pe.length;Ie++){var Ce=pe[Ie].scale;if(je<Ce&&(je=Ce,ze=Ie),!be&&je>=1)break}return pe[ze]}function C(ae,te,K,q,re){te=Math.max(0,te-2*g);var V=ae.width/ae.height,W=I(V,q,te,K);return{scale:2*W/ae.height,rCenter:P(V,W/te),rotate:A(re)}}function L(ae,te,K,q,re){te=Math.max(0,te-2*g);var V=ae.height/ae.width,W=I(V,q,te,K);return{scale:2*W/ae.width,rCenter:P(V,W/te),rotate:A(re+Math.PI/2)}}function P(ae,te){return Math.cos(te)-ae*te}function A(ae){return(180/Math.PI*ae+720)%180-90}function I(ae,te,K,q){var re=ae+1/(2*Math.tan(te));return K*Math.min(1/(Math.sqrt(re*re+.5)+re),q/(Math.sqrt(ae*ae+q/2)+ae))}function D(ae,te){return ae.v!==te.vTotal||te.trace.hole?Math.min(1/(1+1/Math.sin(ae.halfangle)),ae.ring/2):1}function R(ae,te){var K=te.pxmid[0],q=te.pxmid[1],re=ae.width/2,V=ae.height/2;return K<0&&(re*=-1),q<0&&(V*=-1),{scale:1,rCenter:1,rotate:0,x:re+Math.abs(V)*(re>0?1:-1)/2,y:V/(1+K*K/(q*q)),outside:!0}}function S(ae,te){var K,q,re,V=ae.trace,W={x:ae.cx,y:ae.cy},Z={tx:0,ty:0};Z.ty+=V.title.font.size,re=B(V),-1!==V.title.position.indexOf("top")?(W.y-=(1+re)*ae.r,Z.ty-=ae.titleBox.height):-1!==V.title.position.indexOf("bottom")&&(W.y+=(1+re)*ae.r);var ie,ue=ae.r/(void 0===(ie=ae.trace.aspectratio)?1:ie),fe=te.w*(V.domain.x[1]-V.domain.x[0])/2;return-1!==V.title.position.indexOf("left")?(fe+=ue,W.x-=(1+re)*ue,Z.tx+=ae.titleBox.width/2):-1!==V.title.position.indexOf("center")?fe*=2:-1!==V.title.position.indexOf("right")&&(fe+=ue,W.x+=(1+re)*ue,Z.tx-=ae.titleBox.width/2),K=fe/ae.titleBox.width,q=N(ae,te)/ae.titleBox.height,{x:W.x,y:W.y,scale:Math.min(K,q),tx:Z.tx,ty:Z.ty}}function N(ae,te){var K=ae.trace;return Math.min(ae.titleBox.height,te.h*(K.domain.y[1]-K.domain.y[0])/2)}function B(ae){var te,K=ae.pull;if(!K)return 0;if(Array.isArray(K))for(K=0,te=0;te<ae.pull.length;te++)ae.pull[te]>K&&(K=ae.pull[te]);return K}function H(ae,te){for(var K=[],q=0;q<ae.length;q++){var re=ae[q][0],V=re.trace,W=V.domain,Z=te.w*(W.x[1]-W.x[0]),oe=te.h*(W.y[1]-W.y[0]);V.title.text&&"middle center"!==V.title.position&&(oe-=N(re,te));var ue=oe/2;"funnelarea"!==V.type||V.scalegroup||(ue/=V.aspectratio),re.r=Math.min(Z/2,ue)/(1+B(V)),re.cx=te.l+te.w*(V.domain.x[1]+V.domain.x[0])/2,re.cy=te.t+te.h*(1-V.domain.y[0])-oe/2,V.title.text&&-1!==V.title.position.indexOf("bottom")&&(re.cy-=N(re,te)),V.scalegroup&&-1===K.indexOf(V.scalegroup)&&K.push(V.scalegroup)}!function(fe,he){for(var de,be,pe,Te=0;Te<he.length;Te++){var ye=1/0,ke=he[Te];for(be=0;be<fe.length;be++)if((pe=(de=fe[be][0]).trace).scalegroup===ke){var ze;if("pie"===pe.type)ze=de.r*de.r;else if("funnelarea"===pe.type){var je,Ie;pe.aspectratio>1?Ie=(je=de.r)/pe.aspectratio:je=(Ie=de.r)*pe.aspectratio,ze=(je*=(1+pe.baseratio)/2)*Ie}ye=Math.min(ye,ze/de.vTotal)}for(be=0;be<fe.length;be++)if((pe=(de=fe[be][0]).trace).scalegroup===ke){var Ce=ye*de.vTotal;"funnelarea"===pe.type&&(Ce/=(1+pe.baseratio)/2,Ce/=pe.aspectratio),de.r=Math.sqrt(Ce)}}}(ae,K)}function Y(ae,te){return[ae*Math.sin(te),-ae*Math.cos(te)]}function Q(ae,te,K){var ze,q=ae._fullLayout,re=K.trace,V=re.texttemplate,W=re.textinfo;if(!V&&W&&"none"!==W){var Z,oe=W.split("+"),ie=function(ze){return-1!==oe.indexOf(ze)},ue=ie("label"),fe=ie("text"),he=ie("value"),de=ie("percent"),be=q.separators;if(Z=ue?[te.label]:[],fe){var pe=y.getFirstFilled(re.text,te.pts);_(pe)&&Z.push(pe)}he&&Z.push(y.formatPieValue(te.v,be)),de&&Z.push(y.formatPiePercent(te.v/K.vTotal,be)),te.text=Z.join("<br>")}if(V){var Te=u.castOption(re,te.i,"texttemplate");if(Te){var ye={label:(ze=te).label,value:ze.v,valueLabel:y.formatPieValue(ze.v,q.separators),percent:ze.v/K.vTotal,percentLabel:y.formatPiePercent(ze.v/K.vTotal,q.separators),color:ze.color,text:ze.text,customdata:u.castOption(re,ze.i,"customdata")},ke=y.getFirstFilled(re.text,te.pts);(_(ke)||""===ke)&&(ye.text=ke),te.text=u.texttemplateString(Te,ye,ae._fullLayout._d3locale,ye,re._meta||{})}else te.text=""}}function ne(ae,te){var K=ae.rotate*Math.PI/180,q=Math.cos(K),re=Math.sin(K),V=(te.left+te.right)/2,W=(te.top+te.bottom)/2;ae.textX=V*q-W*re,ae.textY=V*re+W*q,ae.noCenter=!0}G.exports={plot:function(ae,te){var K=ae._fullLayout,q=K._size;d("pie",K),E(te,ae),H(te,q);var re=u.makeTraceGroups(K._pielayer,te,"trace").each(function(V){var W=i.select(this),Z=V[0],oe=Z.trace;(function(ie){var ue,fe,he,de=ie[0],be=de.r,pe=de.trace,Te=y.getRotationAngle(pe.rotation),ye=2*Math.PI/de.vTotal,ke="px0",ze="px1";if("counterclockwise"===pe.direction){for(ue=0;ue<ie.length&&ie[ue].hidden;ue++);if(ue===ie.length)return;Te+=ye*ie[ue].v,ye*=-1,ke="px1",ze="px0"}for(he=Y(be,Te),ue=0;ue<ie.length;ue++)(fe=ie[ue]).hidden||(fe[ke]=he,fe.startangle=Te,fe.pxmid=Y(be,Te+=ye*fe.v/2),fe.midangle=Te,he=Y(be,Te+=ye*fe.v/2),fe.stopangle=Te,fe[ze]=he,fe.largeArc=fe.v>de.vTotal/2?1:0,fe.halfangle=Math.PI*Math.min(fe.v/de.vTotal,.5),fe.ring=1-pe.hole,fe.rInscribed=D(fe,de))})(V),W.attr("stroke-linejoin","round"),W.each(function(){var ie=i.select(this).selectAll("g.slice").data(V);ie.enter().append("g").classed("slice",!0),ie.exit().remove();var ue=[[[],[]],[[],[]]],fe=!1;ie.each(function(ze,je){if(ze.hidden)i.select(this).selectAll("path,g").remove();else{ze.pointNumber=ze.i,ze.curveNumber=oe.index,ue[ze.pxmid[1]<0?0:1][ze.pxmid[0]<0?0:1].push(ze);var Ie=Z.cx,Ce=Z.cy,_e=i.select(this),we=_e.selectAll("path.surface").data([ze]);if(we.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),_e.call(w,ae,V),oe.pull){var Se=+y.castOption(oe.pull,ze.pts)||0;Se>0&&(Ie+=Se*ze.pxmid[0],Ce+=Se*ze.pxmid[1])}ze.cxFinal=Ie,ze.cyFinal=Ce;var Oe=oe.hole;if(ze.v===Z.vTotal){var Be="M"+(Ie+ze.px0[0])+","+(Ce+ze.px0[1])+qe(ze.px0,ze.pxmid,!0,1)+qe(ze.pxmid,ze.px0,!0,1)+"Z";we.attr("d",Oe?"M"+(Ie+Oe*ze.px0[0])+","+(Ce+Oe*ze.px0[1])+qe(ze.px0,ze.pxmid,!1,Oe)+qe(ze.pxmid,ze.px0,!1,Oe)+"Z"+Be:Be)}else{var He=qe(ze.px0,ze.px1,!0,1);if(Oe){var Xe=1-Oe;we.attr("d","M"+(Ie+Oe*ze.px1[0])+","+(Ce+Oe*ze.px1[1])+qe(ze.px1,ze.px0,!1,Oe)+"l"+Xe*ze.px0[0]+","+Xe*ze.px0[1]+He+"Z")}else we.attr("d","M"+Ie+","+Ce+"l"+ze.px0[0]+","+ze.px0[1]+He+"Z")}Q(ae,ze,Z);var nt=y.castOption(oe.textposition,ze.pts),et=_e.selectAll("g.slicetext").data(ze.text&&"none"!==nt?[0]:[]);et.enter().append("g").classed("slicetext",!0),et.exit().remove(),et.each(function(){var ht,st,Bt,Ye=u.ensureSingle(i.select(this),"text","",function(ht){ht.attr("data-notex",1)}),ot=u.ensureUniformFontSize(ae,"outside"===nt?(Bt=K.font,{color:y.castOption((ht=oe).outsidetextfont.color,(st=ze).pts)||y.castOption(ht.textfont.color,st.pts)||Bt.color,family:y.castOption(ht.outsidetextfont.family,st.pts)||y.castOption(ht.textfont.family,st.pts)||Bt.family,size:y.castOption(ht.outsidetextfont.size,st.pts)||y.castOption(ht.textfont.size,st.pts)||Bt.size}):x(oe,ze,K.font));Ye.text(ze.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(r.font,ot).call(f.convertToTspans,ae);var at,ct=r.bBox(Ye.node());if("outside"===nt)at=R(ct,ze);else if(at=k(ct,ze,Z),"auto"===nt&&at.scale<1){var _t=u.ensureUniformFontSize(ae,oe.outsidetextfont);Ye.call(r.font,_t),at=R(ct=r.bBox(Ye.node()),ze)}var xt=at.textPosAngle,Ht=void 0===xt?ze.pxmid:Y(Z.r,xt);if(at.targetX=Ie+Ht[0]*at.rCenter+(at.x||0),at.targetY=Ce+Ht[1]*at.rCenter+(at.y||0),ne(at,ct),at.outside){var At=at.targetY;ze.yLabelMin=At-ct.height/2,ze.yLabelMid=At,ze.yLabelMax=At+ct.height/2,ze.labelExtraX=0,ze.labelExtraY=0,fe=!0}at.fontSize=ot.size,o(oe.type,at,K),V[je].transform=at,Ye.attr("transform",u.getTextTransform(at))})}function qe(Ye,ot,at,ct){return"a"+ct*Z.r+","+ct*Z.r+" 0 "+ze.largeArc+(at?" 1 ":" 0 ")+ct*(ot[0]-Ye[0])+","+ct*(ot[1]-Ye[1])}});var je,he=i.select(this).selectAll("g.titletext").data(oe.title.text?[0]:[]);if(he.enter().append("g").classed("titletext",!0),he.exit().remove(),he.each(function(){var ze,Ce,_e,je=u.ensureSingle(i.select(this),"text","",function(Ce){Ce.attr("data-notex",1)}),Ie=oe.title.text;oe._meta&&(Ie=u.templateString(Ie,oe._meta)),je.text(Ie).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(r.font,oe.title.font).call(f.convertToTspans,ae),ze="middle center"===oe.title.position?(Ce=Z,_e=Math.sqrt(Ce.titleBox.width*Ce.titleBox.width+Ce.titleBox.height*Ce.titleBox.height),{x:Ce.cx,y:Ce.cy,scale:Ce.trace.hole*Ce.r*2/_e,tx:0,ty:-Ce.titleBox.height/2+Ce.trace.title.font.size}):S(Z,q),je.attr("transform",l(ze.x,ze.y)+c(Math.min(1,ze.scale))+l(ze.tx,ze.ty))}),fe&&function(ze,je){var Ie,Ce,_e,we,Se,Oe,Be,He,Xe,nt,et,qe,Ye;function ot(xt,Ht){return xt.pxmid[1]-Ht.pxmid[1]}function at(xt,Ht){return Ht.pxmid[1]-xt.pxmid[1]}function ct(xt,Ht){Ht||(Ht={});var At,ht,st,Bt,gn=Ht.labelExtraY+(Ce?Ht.yLabelMax:Ht.yLabelMin),hn=Ce?xt.yLabelMin:xt.yLabelMax,We=Ce?xt.yLabelMax:xt.yLabelMin,it=xt.cyFinal+Se(xt.px0[1],xt.px1[1]),qt=gn-hn;if(qt*Be>0&&(xt.labelExtraY=qt),Array.isArray(je.pull))for(ht=0;ht<nt.length;ht++)(st=nt[ht])===xt||(y.castOption(je.pull,xt.pts)||0)>=(y.castOption(je.pull,st.pts)||0)||((xt.pxmid[1]-st.pxmid[1])*Be>0?(qt=st.cyFinal+Se(st.px0[1],st.px1[1])-hn-xt.labelExtraY)*Be>0&&(xt.labelExtraY+=qt):(We+xt.labelExtraY-it)*Be>0&&(At=3*Oe*Math.abs(ht-nt.indexOf(xt)),(Bt=st.cxFinal+we(st.px0[0],st.px1[0])+At-(xt.cxFinal+xt.pxmid[0])-xt.labelExtraX)*Oe>0&&(xt.labelExtraX+=Bt)))}for(Ce=0;Ce<2;Ce++)for(_e=Ce?ot:at,Se=Ce?Math.max:Math.min,Be=Ce?1:-1,Ie=0;Ie<2;Ie++){for(we=Ie?Math.max:Math.min,Oe=Ie?1:-1,(He=ze[Ce][Ie]).sort(_e),nt=(Xe=ze[1-Ce][Ie]).concat(He),qe=[],et=0;et<He.length;et++)void 0!==He[et].yLabelMid&&qe.push(He[et]);for(Ye=!1,et=0;Ce&&et<Xe.length;et++)if(void 0!==Xe[et].yLabelMid){Ye=Xe[et];break}for(et=0;et<qe.length;et++){var _t=et&&qe[et-1];Ye&&!et&&(_t=Ye),ct(qe[et],_t)}}}(ue,oe),je=oe,ie.each(function(Ie){var Ce=i.select(this);if(Ie.labelExtraX||Ie.labelExtraY){var _e=Ce.select("g.slicetext text");Ie.transform.targetX+=Ie.labelExtraX,Ie.transform.targetY+=Ie.labelExtraY,_e.attr("transform",u.getTextTransform(Ie.transform));var we=Ie.cxFinal+Ie.pxmid[0],Se="M"+we+","+(Ie.cyFinal+Ie.pxmid[1]),Oe=(Ie.yLabelMax-Ie.yLabelMin)*(Ie.pxmid[0]<0?-1:1)/4;if(Ie.labelExtraX){var Be=Ie.labelExtraX*Ie.pxmid[1]/Ie.pxmid[0],He=Ie.yLabelMid+Ie.labelExtraY-(Ie.cyFinal+Ie.pxmid[1]);Math.abs(Be)>Math.abs(He)?Se+="l"+He*Ie.pxmid[0]/Ie.pxmid[1]+","+He+"H"+(we+Ie.labelExtraX+Oe):Se+="l"+Ie.labelExtraX+","+Be+"v"+(He-Be)+"h"+Oe}else Se+="V"+(Ie.yLabelMid+Ie.labelExtraY)+"h"+Oe;u.ensureSingle(Ce,"path","textline").call(p.stroke,je.outsidetextfont.color).attr({"stroke-width":Math.min(2,je.outsidetextfont.size/8),d:Se,fill:"none"})}else Ce.select("path.textline").remove()}),fe&&oe.automargin){var de=r.bBox(W.node()),be=oe.domain,ye=(q.w*(be.x[1]-be.x[0])*.5-Z.r)/q.w,ke=(q.h*(be.y[1]-be.y[0])*.5-Z.r)/q.h;m.autoMargin(ae,"pie."+oe.uid+".automargin",{xl:be.x[0]-ye,xr:be.x[1]+ye,yb:be.y[0]-ke,yt:be.y[1]+ke,l:Math.max(Z.cx-Z.r-de.left,0),r:Math.max(de.right-(Z.cx+Z.r),0),b:Math.max(de.bottom-(Z.cy+Z.r),0),t:Math.max(Z.cy-Z.r-de.top,0),pad:5})}})});setTimeout(function(){re.selectAll("tspan").each(function(){var V=i.select(this);V.attr("dy")&&V.attr("dy",V.attr("dy"))})},0)},formatSliceLabel:Q,transformInsideText:k,determineInsideTextFont:x,positionTitleOutside:S,prerenderTitles:E,layoutAreas:H,attachFxHandlers:w,computeTransform:ne}},{"../../components/color":666,"../../components/drawing":688,"../../components/fx":706,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/plots":917,"../bar/constants":943,"../bar/uniform_text":957,"./event_data":1196,"./helpers":1197,"@plotly/d3":58}],1202:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("./style_one"),b=h("../bar/uniform_text").resizeText;G.exports=function(p){var r=p._fullLayout._pielayer.selectAll(".trace");b(p,r,"pie"),r.each(function(u){var c=u[0].trace,l=i.select(this);l.style({opacity:c.opacity}),l.selectAll("path.surface").each(function(f){i.select(this).call(m,f,c)})})}},{"../bar/uniform_text":957,"./style_one":1203,"@plotly/d3":58}],1203:[function(h,G,X){"use strict";var i=h("../../components/color"),m=h("./helpers").castOption;G.exports=function(b,p,r){var u=r.marker.line,c=m(u.color,p.pts)||i.defaultLine,l=m(u.width,p.pts)||0;b.style("stroke-width",l).call(i.fill,p.color).call(i.stroke,c)}},{"../../components/color":666,"./helpers":1197}],1204:[function(h,G,X){"use strict";var i=h("../scatter/attributes");G.exports={x:i.x,y:i.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:i.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1218}],1205:[function(h,G,X){"use strict";var i=h("gl-pointcloud2d"),m=h("../../lib/str2rgbarray"),b=h("../../plots/cartesian/autorange").findExtremes,p=h("../scatter/get_trace_color");function r(c,l){this.scene=c,this.uid=l,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=i(c.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var u=r.prototype;u.handlePick=function(c){var l=this.idToIndex[c.pointId];return{trace:this,dataCoord:c.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*l],this.pickXYData[2*l+1]]:[this.pickXData[l],this.pickYData[l]],textLabel:Array.isArray(this.textLabels)?this.textLabels[l]:this.textLabels,color:this.color,name:this.name,pointIndex:l,hoverinfo:this.hoverinfo}},u.update=function(c){this.index=c.index,this.textLabels=c.text,this.name=c.name,this.hoverinfo=c.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(c),this.color=p(c,{})},u.updateFast=function(c){var l,f,s,o,d,g,y=this.xData=this.pickXData=c.x,v=this.yData=this.pickYData=c.y,_=this.pickXYData=c.xy,x=c.indices,E=this.bounds;if(_){if(s=_,l=_.length>>>1,c.xbounds&&c.ybounds)E[0]=c.xbounds[0],E[2]=c.xbounds[1],E[1]=c.ybounds[0],E[3]=c.ybounds[1];else for(g=0;g<l;g++)d=s[2*g+1],(o=s[2*g])<E[0]&&(E[0]=o),o>E[2]&&(E[2]=o),d<E[1]&&(E[1]=d),d>E[3]&&(E[3]=d);if(x)f=x;else for(f=new Int32Array(l),g=0;g<l;g++)f[g]=g}else for(l=y.length,s=new Float32Array(2*l),f=new Int32Array(l),g=0;g<l;g++)o=y[g],d=v[g],f[g]=g,s[2*g]=o,s[2*g+1]=d,o<E[0]&&(E[0]=o),o>E[2]&&(E[2]=o),d<E[1]&&(E[1]=d),d>E[3]&&(E[3]=d);this.idToIndex=f,this.pointcloudOptions.idToIndex=f,this.pointcloudOptions.positions=s;var k=m(c.marker.color),C=m(c.marker.border.color),L=c.opacity*c.marker.opacity;k[3]*=L,this.pointcloudOptions.color=k;var P=c.marker.blend;null===P&&(P=y.length<100||v.length<100),this.pointcloudOptions.blend=P,C[3]*=L,this.pointcloudOptions.borderColor=C;var A=c.marker.sizemin,I=Math.max(c.marker.sizemax,c.marker.sizemin);this.pointcloudOptions.sizeMin=A,this.pointcloudOptions.sizeMax=I,this.pointcloudOptions.areaRatio=c.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var D=this.scene.xaxis,R=this.scene.yaxis,S=I/2||.5;c._extremes[D._id]=b(D,[E[0],E[2]],{ppad:S}),c._extremes[R._id]=b(R,[E[1],E[3]],{ppad:S})},u.dispose=function(){this.pointcloud.dispose()},G.exports=function(c,l){var f=new r(c,l.uid);return f.update(l),f}},{"../../lib/str2rgbarray":828,"../../plots/cartesian/autorange":853,"../scatter/get_trace_color":1228,"gl-pointcloud2d":328}],1206:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./attributes");G.exports=function(b,p,r){function u(c,l){return i.coerce(b,p,m,c,l)}u("x"),u("y"),u("xbounds"),u("ybounds"),b.xy&&b.xy instanceof Float32Array&&(p.xy=b.xy),b.indices&&b.indices instanceof Int32Array&&(p.indices=b.indices),u("text"),u("marker.color",r),u("marker.opacity"),u("marker.blend"),u("marker.sizemin"),u("marker.sizemax"),u("marker.border.color",r),u("marker.border.arearatio"),p._length=null}},{"../../lib":803,"./attributes":1204}],1207:[function(h,G,X){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),calc:h("../scatter3d/calc"),plot:h("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:h("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":894,"../scatter3d/calc":1247,"./attributes":1204,"./convert":1205,"./defaults":1206}],1208:[function(h,G,X){"use strict";var i=h("../../plots/font_attributes"),m=h("../../plots/attributes"),b=h("../../components/color/attributes"),p=h("../../components/fx/attributes"),r=h("../../plots/domain").attributes,u=h("../../plots/template_attributes").hovertemplateAttrs,c=h("../../components/colorscale/attributes"),l=h("../../plot_api/plot_template").templatedArray,f=h("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,s=h("../../lib/extend").extendFlat,o=h("../../plot_api/edit_types").overrideAll;(G.exports=o({hoverinfo:s({},m.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:p.hoverlabel,domain:r({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:f("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:i({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:p.hoverlabel,hovertemplate:u({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:p.hoverlabel,hovertemplate:u({},{keys:["value","label"]}),colorscales:l("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:s(c().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":665,"../../components/colorscale/attributes":673,"../../components/fx/attributes":697,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/domain":882,"../../plots/font_attributes":883,"../../plots/template_attributes":926}],1209:[function(h,G,X){"use strict";var i=h("../../plot_api/edit_types").overrideAll,m=h("../../plots/get_data").getModuleCalcData,b=h("./plot"),p=h("../../components/fx/layout_attributes"),r=h("../../lib/setcursor"),u=h("../../components/dragelement"),c=h("../../plots/cartesian/select").prepSelect,l=h("../../lib"),f=h("../../registry");function s(o,d){var g=o._fullData[d],y=o._fullLayout,v=y.dragmode,w=g._bgRect;if("pan"!==v&&"zoom"!==v){r(w,"pan"===y.dragmode?"move":"crosshair");var x={_id:"x",c2p:l.identity,_offset:g._sankey.translateX,_length:g._sankey.width},E={_id:"y",c2p:l.identity,_offset:g._sankey.translateY,_length:g._sankey.height},k={gd:o,element:w.node(),plotinfo:{id:d,xaxis:x,yaxis:E,fillRangeItems:l.noop},subplot:d,xaxes:[x],yaxes:[E],doneFnCompleted:function(C){var L,P=o._fullData[d],A=P.node.groups.slice(),I=[];function D(B){for(var H=P._sankey.graph.nodes,Y=0;Y<H.length;Y++)if(H[Y].pointNumber===B)return H[Y]}for(var R=0;R<C.length;R++){var S=D(C[R].pointNumber);if(S)if(S.group){for(var N=0;N<S.childrenNodes.length;N++)I.push(S.childrenNodes[N].pointNumber);A[S.pointNumber-P.node._count]=!1}else I.push(S.pointNumber)}L=A.filter(Boolean).concat([I]),f.call("_guiRestyle",o,{"node.groups":[L]},d)},prepFn:function(C,L,P){c(C,L,P,k,v)}};u.init(k)}}X.name="sankey",X.baseLayoutAttrOverrides=i({hoverlabel:p.hoverlabel},"plot","nested"),X.plot=function(o){var d=m(o.calcdata,"sankey")[0];b(o,d),X.updateFx(o)},X.clean=function(o,d,g,y){var v=y._has&&y._has("sankey"),_=d._has&&d._has("sankey");v&&!_&&(y._paperdiv.selectAll(".sankey").remove(),y._paperdiv.selectAll(".bgsankey").remove())},X.updateFx=function(o){for(var d=0;d<o._fullData.length;d++)s(o,d)}},{"../../components/dragelement":685,"../../components/fx/layout_attributes":707,"../../lib":803,"../../lib/setcursor":824,"../../plot_api/edit_types":836,"../../plots/cartesian/select":874,"../../plots/get_data":891,"../../registry":931,"./plot":1214}],1210:[function(h,G,X){"use strict";var i=h("strongly-connected-components"),m=h("../../lib"),b=h("../../lib/gup").wrap,p=m.isArrayOrTypedArray,r=m.isIndex,u=h("../../components/colorscale");G.exports=function(l,f){var s=function(l){var f,s=l.node,o=l.link,d=[],g=p(o.color),y=p(o.customdata),v={},_={},w=o.colorscales.length;for(f=0;f<w;f++){var x=o.colorscales[f],E=u.extractScale(x,{cLetter:"c"}),k=u.makeColorScaleFunc(E);_[x.label]=k}var C=0;for(f=0;f<o.value.length;f++)o.source[f]>C&&(C=o.source[f]),o.target[f]>C&&(C=o.target[f]);var L,P=C+1;l.node._count=P;var A=l.node.groups,I={};for(f=0;f<A.length;f++){var D=A[f];for(L=0;L<D.length;L++){var R=D[L],S=P+f;I.hasOwnProperty(R)?m.warn("Node "+R+" is already part of a group."):I[R]=S}}var N={source:[],target:[]};for(f=0;f<o.value.length;f++){var B=o.value[f],H=o.source[f],Y=o.target[f];if(B>0&&r(H,P)&&r(Y,P)&&(!I.hasOwnProperty(H)||!I.hasOwnProperty(Y)||I[H]!==I[Y])){I.hasOwnProperty(Y)&&(Y=I[Y]),I.hasOwnProperty(H)&&(H=I[H]),v[H=+H]=v[Y=+Y]=!0;var Q="";o.label&&o.label[f]&&(Q=o.label[f]);var ne=null;Q&&_.hasOwnProperty(Q)&&(ne=_[Q]),d.push({pointNumber:f,label:Q,color:g?o.color[f]:o.color,customdata:y?o.customdata[f]:o.customdata,concentrationscale:ne,source:H,target:Y,value:+B}),N.source.push(H),N.target.push(Y)}}var ae=P+A.length,te=p(s.color),K=p(s.customdata),q=[];for(f=0;f<ae;f++)v[f]&&q.push({group:f>P-1,childrenNodes:[],pointNumber:f,label:s.label[f],color:te?s.color[f]:s.color,customdata:K?s.customdata[f]:s.customdata});var V=!1;return function(W,Z,oe){for(var ie=m.init2dArray(W,0),ue=0;ue<Math.min(Z.length,oe.length);ue++)if(m.isIndex(Z[ue],W)&&m.isIndex(oe[ue],W)){if(Z[ue]===oe[ue])return!0;ie[Z[ue]].push(oe[ue])}return i(ie).components.some(function(fe){return fe.length>1})}(ae,N.source,N.target)&&(V=!0),{circular:V,links:d,nodes:q,groups:A,groupLookup:I}}(f);return b({circular:s.circular,_nodes:s.nodes,_links:s.links,_groups:s.groups,_groupLookup:s.groupLookup})}},{"../../components/colorscale":678,"../../lib":803,"../../lib/gup":800,"strongly-connected-components":590}],1211:[function(h,G,X){"use strict";G.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],1212:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./attributes"),b=h("../../components/color"),p=h("tinycolor2"),r=h("../../plots/domain").defaults,u=h("../../components/fx/hoverlabel_defaults"),c=h("../../plot_api/plot_template"),l=h("../../plots/array_container_defaults");function f(s,o){function d(g,y){return i.coerce(s,o,m.link.colorscales,g,y)}d("label"),d("cmin"),d("cmax"),d("colorscale")}G.exports=function(s,o,d,g){function y(I,D){return i.coerce(s,o,m,I,D)}var v=i.extendDeep(g.hoverlabel,s.hoverlabel),_=s.node,w=c.newContainer(o,"node");function x(I,D){return i.coerce(_,w,m.node,I,D)}x("label"),x("groups"),x("x"),x("y"),x("pad"),x("thickness"),x("line.color"),x("line.width"),x("hoverinfo",s.hoverinfo),u(_,w,x,v),x("hovertemplate");var E=g.colorway;x("color",w.label.map(function(I,D){return b.addOpacity(E[D%E.length],.8)})),x("customdata");var k=s.link||{},C=c.newContainer(o,"link");function L(I,D){return i.coerce(k,C,m.link,I,D)}L("label"),L("source"),L("target"),L("value"),L("line.color"),L("line.width"),L("hoverinfo",s.hoverinfo),u(k,C,L,v),L("hovertemplate");var P,A=p(g.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";L("color",i.repeat(A,C.value.length)),L("customdata"),l(k,C,{name:"colorscales",handleItemDefaults:f}),r(o,g,y),y("orientation"),y("valueformat"),y("valuesuffix"),w.x.length&&w.y.length&&(P="freeform"),y("arrangement",P),i.coerceFont(y,"textfont",i.extendFlat({},g.font)),o._length=null}},{"../../components/color":666,"../../components/fx/hoverlabel_defaults":704,"../../lib":803,"../../plot_api/plot_template":843,"../../plots/array_container_defaults":849,"../../plots/domain":882,"./attributes":1208,tinycolor2:598}],1213:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),calc:h("./calc"),plot:h("./plot"),moduleType:"trace",name:"sankey",basePlotModule:h("./base_plot"),selectPoints:h("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":1208,"./base_plot":1209,"./calc":1210,"./defaults":1212,"./plot":1214,"./select.js":1216}],1214:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=m.numberFormat,p=h("./render"),r=h("../../components/fx"),u=h("../../components/color"),c=h("./constants").cn,l=m._;function f(k){return""!==k}function s(k,C){return k.filter(function(L){return L.key===C.traceId})}function o(k,C){i.select(k).select("path").style("fill-opacity",C),i.select(k).select("rect").style("fill-opacity",C)}function d(k){i.select(k).select("text.name").style("fill","black")}function g(k){return function(C){return-1!==k.node.sourceLinks.indexOf(C.link)||-1!==k.node.targetLinks.indexOf(C.link)}}function y(k){return function(C){return-1!==C.node.sourceLinks.indexOf(k.link)||-1!==C.node.targetLinks.indexOf(k.link)}}function v(k,C,L){C&&L&&s(L,C).selectAll("."+c.sankeyLink).filter(g(C)).call(w.bind(0,C,L,!1))}function _(k,C,L){C&&L&&s(L,C).selectAll("."+c.sankeyLink).filter(g(C)).call(x.bind(0,C,L,!1))}function w(k,C,L,P){var A=P.datum().link.label;P.style("fill-opacity",function(I){if(!I.link.concentrationscale)return.4}),A&&s(C,k).selectAll("."+c.sankeyLink).filter(function(I){return I.link.label===A}).style("fill-opacity",function(I){if(!I.link.concentrationscale)return.4}),L&&s(C,k).selectAll("."+c.sankeyNode).filter(y(k)).call(v)}function x(k,C,L,P){var A=P.datum().link.label;P.style("fill-opacity",function(I){return I.tinyColorAlpha}),A&&s(C,k).selectAll("."+c.sankeyLink).filter(function(I){return I.link.label===A}).style("fill-opacity",function(I){return I.tinyColorAlpha}),L&&s(C,k).selectAll(c.sankeyNode).filter(y(k)).call(_)}function E(k,C){var P=m.nestedProperty(k.hoverlabel||{},C).get();return!Array.isArray(P)&&P}G.exports=function(k,C){for(var L=k._fullLayout,P=L._paper,A=L._size,I=0;I<k._fullData.length;I++)if(k._fullData[I].visible&&k._fullData[I].type===c.sankey&&!k._fullData[I]._viewInitial){var D=k._fullData[I].node;k._fullData[I]._viewInitial={node:{groups:D.groups.slice(),x:D.x.slice(),y:D.y.slice()}}}var R=l(k,"source:")+" ",S=l(k,"target:")+" ",N=l(k,"concentration:")+" ",B=l(k,"incoming flow count:")+" ",H=l(k,"outgoing flow count:")+" ";p(k,P,C,{width:A.w,height:A.h,margin:{t:A.t,r:A.r,b:A.b,l:A.l}},{linkEvents:{hover:function(Y,Q,ne){!1!==k._fullLayout.hovermode&&(i.select(Y).call(w.bind(0,Q,ne,!0)),"skip"!==Q.link.trace.link.hoverinfo&&(Q.link.fullData=Q.link.trace,k.emit("plotly_hover",{event:i.event,points:[Q.link]})))},follow:function(Y,Q){if(!1!==k._fullLayout.hovermode){var ne=Q.link.trace.link;if("none"!==ne.hoverinfo&&"skip"!==ne.hoverinfo){for(var ae=[],te=0,K=0;K<Q.flow.links.length;K++){var q=Q.flow.links[K];if("closest"!==k._fullLayout.hovermode||Q.link.pointNumber===q.pointNumber){Q.link.pointNumber===q.pointNumber&&(te=K),q.fullData=q.trace,ne=Q.link.trace.link;var re=W(q),V={valueLabel:b(Q.valueFormat)(q.value)+Q.valueSuffix};ae.push({x:re[0],y:re[1],name:V.valueLabel,text:[q.label||"",R+q.source.label,S+q.target.label,q.concentrationscale?N+b("%0.2f")(q.flow.labelConcentration):""].filter(f).join("<br>"),color:E(ne,"bgcolor")||u.addOpacity(q.color,1),borderColor:E(ne,"bordercolor"),fontFamily:E(ne,"font.family"),fontSize:E(ne,"font.size"),fontColor:E(ne,"font.color"),nameLength:E(ne,"namelength"),textAlign:E(ne,"align"),idealAlign:i.event.x<re[0]?"right":"left",hovertemplate:ne.hovertemplate,hovertemplateLabels:V,eventData:[q]})}}r.loneHover(ae,{container:L._hoverlayer.node(),outerContainer:L._paper.node(),gd:k,anchorIndex:te}).each(function(){Q.link.concentrationscale||o(this,.65),d(this)})}}function W(Z){var oe,ie;Z.circular?(oe=(Z.circularPathData.leftInnerExtent+Z.circularPathData.rightInnerExtent)/2,ie=Z.circularPathData.verticalFullExtent):(oe=(Z.source.x1+Z.target.x0)/2,ie=(Z.y0+Z.y1)/2);var ue=[oe,ie];return"v"===Z.trace.orientation&&ue.reverse(),ue[0]+=Q.parent.translateX,ue[1]+=Q.parent.translateY,ue}},unhover:function(Y,Q,ne){!1!==k._fullLayout.hovermode&&(i.select(Y).call(x.bind(0,Q,ne,!0)),"skip"!==Q.link.trace.link.hoverinfo&&(Q.link.fullData=Q.link.trace,k.emit("plotly_unhover",{event:i.event,points:[Q.link]})),r.loneUnhover(L._hoverlayer.node()))},select:function(Y,Q){var ne=Q.link;ne.originalEvent=i.event,k._hoverdata=[ne],r.click(k,{target:!0})}},nodeEvents:{hover:function(Y,Q,ne){!1!==k._fullLayout.hovermode&&(i.select(Y).call(v,Q,ne),"skip"!==Q.node.trace.node.hoverinfo&&(Q.node.fullData=Q.node.trace,k.emit("plotly_hover",{event:i.event,points:[Q.node]})))},follow:function(Y,Q){if(!1!==k._fullLayout.hovermode){var ne=Q.node.trace.node;if("none"!==ne.hoverinfo&&"skip"!==ne.hoverinfo){var ae=i.select(Y).select("."+c.nodeRect),te=k._fullLayout._paperdiv.node().getBoundingClientRect(),K=ae.node().getBoundingClientRect(),q=K.left-2-te.left,re=K.right+2-te.left,V=K.top+K.height/4-te.top,W={valueLabel:b(Q.valueFormat)(Q.node.value)+Q.valueSuffix};Q.node.fullData=Q.node.trace,k._fullLayout._calcInverseTransform(k);var Z=k._fullLayout._invScaleX,ie=r.loneHover({x0:Z*q,x1:Z*re,y:k._fullLayout._invScaleY*V,name:b(Q.valueFormat)(Q.node.value)+Q.valueSuffix,text:[Q.node.label,B+Q.node.targetLinks.length,H+Q.node.sourceLinks.length].filter(f).join("<br>"),color:E(ne,"bgcolor")||Q.tinyColorHue,borderColor:E(ne,"bordercolor"),fontFamily:E(ne,"font.family"),fontSize:E(ne,"font.size"),fontColor:E(ne,"font.color"),nameLength:E(ne,"namelength"),textAlign:E(ne,"align"),idealAlign:"left",hovertemplate:ne.hovertemplate,hovertemplateLabels:W,eventData:[Q.node]},{container:L._hoverlayer.node(),outerContainer:L._paper.node(),gd:k});o(ie,.85),d(ie)}}},unhover:function(Y,Q,ne){!1!==k._fullLayout.hovermode&&(i.select(Y).call(_,Q,ne),"skip"!==Q.node.trace.node.hoverinfo&&(Q.node.fullData=Q.node.trace,k.emit("plotly_unhover",{event:i.event,points:[Q.node]})),r.loneUnhover(L._hoverlayer.node()))},select:function(Y,Q,ne){var ae=Q.node;ae.originalEvent=i.event,k._hoverdata=[ae],i.select(Y).call(_,Q,ne),r.click(k,{target:!0})}}})}},{"../../components/color":666,"../../components/fx":706,"../../lib":803,"./constants":1211,"./render":1215,"@plotly/d3":58}],1215:[function(h,G,X){"use strict";var i=h("d3-force"),m=h("d3-interpolate").interpolateNumber,b=h("@plotly/d3"),p=h("@plotly/d3-sankey"),r=h("@plotly/d3-sankey-circular"),u=h("./constants"),c=h("tinycolor2"),l=h("../../components/color"),f=h("../../components/drawing"),s=h("../../lib"),o=s.strTranslate,d=s.strRotate,g=h("../../lib/gup"),y=g.keyFun,v=g.repeat,_=g.unwrap,w=h("../../lib/svg_text_utils"),x=h("../../registry"),E=h("../../constants/alignment"),k=E.CAP_SHIFT,C=E.LINE_SPACING;function L(K,q,re){var V,W=_(q),Z=W.trace,oe=Z.domain,ie="h"===Z.orientation,ue=Z.node.pad,fe=Z.node.thickness,he=K.width*(oe.x[1]-oe.x[0]),de=K.height*(oe.y[1]-oe.y[0]),be=W._nodes,pe=W._links,Te=W.circular;(V=Te?r.sankeyCircular().circularLinkGap(0):p.sankey()).iterations(u.sankeyIterations).size(ie?[he,de]:[de,he]).nodeWidth(fe).nodePadding(ue).nodeId(function(Be){return Be.pointNumber}).nodes(be).links(pe);var ye,ke,ze,je=V();for(var Ie in V.nodePadding()<ue&&s.warn("node.pad was reduced to ",V.nodePadding()," to fit within the figure."),W._groupLookup){var Ce,_e=parseInt(W._groupLookup[Ie]);for(ye=0;ye<je.nodes.length;ye++)if(je.nodes[ye].pointNumber===_e){Ce=je.nodes[ye];break}if(Ce){var we={pointNumber:parseInt(Ie),x0:Ce.x0,x1:Ce.x1,y0:Ce.y0,y1:Ce.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};je.nodes.unshift(we),Ce.childrenNodes.unshift(we)}}if(function(){for(ye=0;ye<je.nodes.length;ye++){var Be,He,Xe=je.nodes[ye],nt={};for(ke=0;ke<Xe.targetLinks.length;ke++)Be=(He=Xe.targetLinks[ke]).source.pointNumber+":"+He.target.pointNumber,nt.hasOwnProperty(Be)||(nt[Be]=[]),nt[Be].push(He);var et=Object.keys(nt);for(ke=0;ke<et.length;ke++){var qe=nt[Be=et[ke]],Ye=0,ot={};for(ze=0;ze<qe.length;ze++)ot[(He=qe[ze]).label]||(ot[He.label]=0),ot[He.label]+=He.value,Ye+=He.value;for(ze=0;ze<qe.length;ze++)(He=qe[ze]).flow={value:Ye,labelConcentration:ot[He.label]/Ye,concentration:He.value/Ye,links:qe},He.concentrationscale&&(He.color=c(He.concentrationscale(He.flow.labelConcentration)))}var at=0;for(ke=0;ke<Xe.sourceLinks.length;ke++)at+=Xe.sourceLinks[ke].value;for(ke=0;ke<Xe.sourceLinks.length;ke++)(He=Xe.sourceLinks[ke]).concentrationOut=He.value/at;var ct=0;for(ke=0;ke<Xe.targetLinks.length;ke++)ct+=Xe.targetLinks[ke].value;for(ke=0;ke<Xe.targetLinks.length;ke++)(He=Xe.targetLinks[ke]).concenrationIn=He.value/ct}}(),Z.node.x.length&&Z.node.y.length){for(ye=0;ye<Math.min(Z.node.x.length,Z.node.y.length,je.nodes.length);ye++)if(Z.node.x[ye]&&Z.node.y[ye]){var Se=[Z.node.x[ye]*he,Z.node.y[ye]*de];je.nodes[ye].x0=Se[0]-fe/2,je.nodes[ye].x1=Se[0]+fe/2;var Oe=je.nodes[ye].y1-je.nodes[ye].y0;je.nodes[ye].y0=Se[1]-Oe/2,je.nodes[ye].y1=Se[1]+Oe/2}"snap"===Z.arrangement&&function(Be){var He,Xe,nt=Be.map(function(at,ct){return{x0:at.x0,index:ct}}).sort(function(at,ct){return at.x0-ct.x0}),et=[],qe=-1,Ye=-1/0;for(ye=0;ye<nt.length;ye++){var ot=Be[nt[ye].index];ot.x0>Ye+fe&&(qe+=1,He=ot.x0),Ye=ot.x0,et[qe]||(et[qe]=[]),et[qe].push(ot),ot.x0+=Xe=He-ot.x0,ot.x1+=Xe}return et}(be=je.nodes).forEach(function(He){var Xe,nt,et,qe=0,Ye=He.length;for(He.sort(function(ot,at){return ot.y0-at.y0}),et=0;et<Ye;++et)(Xe=He[et]).y0>=qe||(nt=qe-Xe.y0)>1e-6&&(Xe.y0+=nt,Xe.y1+=nt),qe=Xe.y1+ue}),V.update(je)}return{circular:Te,key:re,trace:Z,guid:s.randstr(),horizontal:ie,width:he,height:de,nodePad:Z.node.pad,nodeLineColor:Z.node.line.color,nodeLineWidth:Z.node.line.width,linkLineColor:Z.link.line.color,linkLineWidth:Z.link.line.width,valueFormat:Z.valueformat,valueSuffix:Z.valuesuffix,textFont:Z.textfont,translateX:oe.x[0]*K.width+K.margin.l,translateY:K.height-oe.y[1]*K.height+K.margin.t,dragParallel:ie?de:he,dragPerpendicular:ie?he:de,arrangement:Z.arrangement,sankey:V,graph:je,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function P(K,q,re){var V=c(q.color),W=q.source.label+"|"+q.target.label+"__"+re;return q.trace=K.trace,q.curveNumber=K.trace.index,{circular:K.circular,key:W,traceId:K.key,pointNumber:q.pointNumber,link:q,tinyColorHue:l.tinyRGB(V),tinyColorAlpha:V.getAlpha(),linkPath:A,linkLineColor:K.linkLineColor,linkLineWidth:K.linkLineWidth,valueFormat:K.valueFormat,valueSuffix:K.valueSuffix,sankey:K.sankey,parent:K,interactionState:K.interactionState,flow:q.flow}}function A(){return function(K){if(K.link.circular)return re=(q=K.link).width/2,V=q.circularPathData,"top"===q.circularLinkType?"M "+V.targetX+" "+(V.targetY+re)+" L"+V.rightInnerExtent+" "+(V.targetY+re)+"A"+(V.rightLargeArcRadius+re)+" "+(V.rightSmallArcRadius+re)+" 0 0 1 "+(V.rightFullExtent-re)+" "+(V.targetY-V.rightSmallArcRadius)+"L"+(V.rightFullExtent-re)+" "+V.verticalRightInnerExtent+"A"+(V.rightLargeArcRadius+re)+" "+(V.rightLargeArcRadius+re)+" 0 0 1 "+V.rightInnerExtent+" "+(V.verticalFullExtent-re)+"L"+V.leftInnerExtent+" "+(V.verticalFullExtent-re)+"A"+(V.leftLargeArcRadius+re)+" "+(V.leftLargeArcRadius+re)+" 0 0 1 "+(V.leftFullExtent+re)+" "+V.verticalLeftInnerExtent+"L"+(V.leftFullExtent+re)+" "+(V.sourceY-V.leftSmallArcRadius)+"A"+(V.leftLargeArcRadius+re)+" "+(V.leftSmallArcRadius+re)+" 0 0 1 "+V.leftInnerExtent+" "+(V.sourceY+re)+"L"+V.sourceX+" "+(V.sourceY+re)+"L"+V.sourceX+" "+(V.sourceY-re)+"L"+V.leftInnerExtent+" "+(V.sourceY-re)+"A"+(V.leftLargeArcRadius-re)+" "+(V.leftSmallArcRadius-re)+" 0 0 0 "+(V.leftFullExtent-re)+" "+(V.sourceY-V.leftSmallArcRadius)+"L"+(V.leftFullExtent-re)+" "+V.verticalLeftInnerExtent+"A"+(V.leftLargeArcRadius-re)+" "+(V.leftLargeArcRadius-re)+" 0 0 0 "+V.leftInnerExtent+" "+(V.verticalFullExtent+re)+"L"+V.rightInnerExtent+" "+(V.verticalFullExtent+re)+"A"+(V.rightLargeArcRadius-re)+" "+(V.rightLargeArcRadius-re)+" 0 0 0 "+(V.rightFullExtent+re)+" "+V.verticalRightInnerExtent+"L"+(V.rightFullExtent+re)+" "+(V.targetY-V.rightSmallArcRadius)+"A"+(V.rightLargeArcRadius-re)+" "+(V.rightSmallArcRadius-re)+" 0 0 0 "+V.rightInnerExtent+" "+(V.targetY-re)+"L"+V.targetX+" "+(V.targetY-re)+"Z":"M "+V.targetX+" "+(V.targetY-re)+" L"+V.rightInnerExtent+" "+(V.targetY-re)+"A"+(V.rightLargeArcRadius+re)+" "+(V.rightSmallArcRadius+re)+" 0 0 0 "+(V.rightFullExtent-re)+" "+(V.targetY+V.rightSmallArcRadius)+"L"+(V.rightFullExtent-re)+" "+V.verticalRightInnerExtent+"A"+(V.rightLargeArcRadius+re)+" "+(V.rightLargeArcRadius+re)+" 0 0 0 "+V.rightInnerExtent+" "+(V.verticalFullExtent+re)+"L"+V.leftInnerExtent+" "+(V.verticalFullExtent+re)+"A"+(V.leftLargeArcRadius+re)+" "+(V.leftLargeArcRadius+re)+" 0 0 0 "+(V.leftFullExtent+re)+" "+V.verticalLeftInnerExtent+"L"+(V.leftFullExtent+re)+" "+(V.sourceY+V.leftSmallArcRadius)+"A"+(V.leftLargeArcRadius+re)+" "+(V.leftSmallArcRadius+re)+" 0 0 0 "+V.leftInnerExtent+" "+(V.sourceY-re)+"L"+V.sourceX+" "+(V.sourceY-re)+"L"+V.sourceX+" "+(V.sourceY+re)+"L"+V.leftInnerExtent+" "+(V.sourceY+re)+"A"+(V.leftLargeArcRadius-re)+" "+(V.leftSmallArcRadius-re)+" 0 0 1 "+(V.leftFullExtent-re)+" "+(V.sourceY+V.leftSmallArcRadius)+"L"+(V.leftFullExtent-re)+" "+V.verticalLeftInnerExtent+"A"+(V.leftLargeArcRadius-re)+" "+(V.leftLargeArcRadius-re)+" 0 0 1 "+V.leftInnerExtent+" "+(V.verticalFullExtent-re)+"L"+V.rightInnerExtent+" "+(V.verticalFullExtent-re)+"A"+(V.rightLargeArcRadius-re)+" "+(V.rightLargeArcRadius-re)+" 0 0 1 "+(V.rightFullExtent+re)+" "+V.verticalRightInnerExtent+"L"+(V.rightFullExtent+re)+" "+(V.targetY+V.rightSmallArcRadius)+"A"+(V.rightLargeArcRadius-re)+" "+(V.rightSmallArcRadius-re)+" 0 0 1 "+V.rightInnerExtent+" "+(V.targetY+re)+"L"+V.targetX+" "+(V.targetY+re)+"Z";var q,re,V,W=K.link.source.x1,Z=K.link.target.x0,oe=m(W,Z),ie=oe(.5),ue=oe(.5),fe=K.link.y0-K.link.width/2,he=K.link.y0+K.link.width/2,de=K.link.y1-K.link.width/2,be=K.link.y1+K.link.width/2;return"M"+W+","+fe+"C"+ie+","+fe+" "+ue+","+de+" "+Z+","+de+"L"+Z+","+be+"C"+ue+","+be+" "+ie+","+he+" "+W+","+he+"Z"}}function I(K,q){var re=c(q.color),V=u.nodePadAcross,W=K.nodePad/2;q.dx=q.x1-q.x0,q.dy=q.y1-q.y0;var Z=q.dx,oe=Math.max(.5,q.dy),ie="node_"+q.pointNumber;return q.group&&(ie=s.randstr()),q.trace=K.trace,q.curveNumber=K.trace.index,{index:q.pointNumber,key:ie,partOfGroup:q.partOfGroup||!1,group:q.group,traceId:K.key,trace:K.trace,node:q,nodePad:K.nodePad,nodeLineColor:K.nodeLineColor,nodeLineWidth:K.nodeLineWidth,textFont:K.textFont,size:K.horizontal?K.height:K.width,visibleWidth:Math.ceil(Z),visibleHeight:oe,zoneX:-V,zoneY:-W,zoneWidth:Z+2*V,zoneHeight:oe+2*W,labelY:K.horizontal?q.dy/2+1:q.dx/2+1,left:1===q.originalLayer,sizeAcross:K.width,forceLayouts:K.forceLayouts,horizontal:K.horizontal,darkBackground:re.getBrightness()<=128,tinyColorHue:l.tinyRGB(re),tinyColorAlpha:re.getAlpha(),valueFormat:K.valueFormat,valueSuffix:K.valueSuffix,sankey:K.sankey,graph:K.graph,arrangement:K.arrangement,uniqueNodeLabelPathId:[K.guid,K.key,ie].join("_"),interactionState:K.interactionState,figure:K}}function D(K){K.attr("transform",function(q){return o(q.node.x0.toFixed(3),q.node.y0.toFixed(3))})}function R(K){K.call(D)}function S(K,q){K.call(R),q.attr("d",A())}function N(K){K.attr("width",function(q){return q.node.x1-q.node.x0}).attr("height",function(q){return q.visibleHeight})}function B(K){return K.link.width>1||K.linkLineWidth>0}function H(K){return o(K.translateX,K.translateY)+(K.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function Y(K,q,re){K.on(".basic",null).on("mouseover.basic",function(V){V.interactionState.dragInProgress||V.partOfGroup||(re.hover(this,V,q),V.interactionState.hovered=[this,V])}).on("mousemove.basic",function(V){V.interactionState.dragInProgress||V.partOfGroup||(re.follow(this,V),V.interactionState.hovered=[this,V])}).on("mouseout.basic",function(V){V.interactionState.dragInProgress||V.partOfGroup||(re.unhover(this,V,q),V.interactionState.hovered=!1)}).on("click.basic",function(V){V.interactionState.hovered&&(re.unhover(this,V,q),V.interactionState.hovered=!1),V.interactionState.dragInProgress||V.partOfGroup||re.select(this,V,q)})}function Q(K,q,re,V){var W=b.behavior.drag().origin(function(Z){return{x:Z.node.x0+Z.visibleWidth/2,y:Z.node.y0+Z.visibleHeight/2}}).on("dragstart",function(Z){if("fixed"!==Z.arrangement&&(s.ensureSingle(V._fullLayout._infolayer,"g","dragcover",function(ie){V._fullLayout._dragCover=ie}),s.raiseToTop(this),Z.interactionState.dragInProgress=Z.node,ae(Z.node),Z.interactionState.hovered&&(re.nodeEvents.unhover.apply(0,Z.interactionState.hovered),Z.interactionState.hovered=!1),"snap"===Z.arrangement)){var oe=Z.traceId+"|"+Z.key;Z.forceLayouts[oe]?Z.forceLayouts[oe].alpha(1):function(ie,ue,fe,he){!function(be){for(var pe=0;pe<be.length;pe++)be[pe].y=(be[pe].y0+be[pe].y1)/2,be[pe].x=(be[pe].x0+be[pe].x1)/2}(fe.graph.nodes);var pe,Te,ye,de=fe.graph.nodes.filter(function(be){return be.originalX===fe.node.originalX}).filter(function(be){return!be.partOfGroup});fe.forceLayouts[ue]=i.forceSimulation(de).alphaDecay(0).force("collide",i.forceCollide().radius(function(be){return be.dy/2+fe.nodePad/2}).strength(1).iterations(u.forceIterations)).force("constrain",(pe=ue,Te=de,ye=fe,function(){for(var ke=0,ze=0;ze<Te.length;ze++){var je=Te[ze];je===ye.interactionState.dragInProgress?(je.x=je.lastDraggedX,je.y=je.lastDraggedY):(je.vx=(je.originalX-je.x)/u.forceTicksPerFrame,je.y=Math.min(ye.size-je.dy/2,Math.max(je.dy/2,je.y))),ke=Math.max(ke,Math.abs(je.vx),Math.abs(je.vy))}!ye.interactionState.dragInProgress&&ke<.1&&ye.forceLayouts[pe].alpha()>0&&ye.forceLayouts[pe].alpha(0)})).stop()}(0,oe,Z),ie=K,ue=q,fe=Z,he=oe,de=V,window.requestAnimationFrame(function be(){var pe;for(pe=0;pe<u.forceTicksPerFrame;pe++)fe.forceLayouts[he].tick();if(function(ye){for(var ke=0;ke<ye.length;ke++)ye[ke].y0=ye[ke].y-ye[ke].dy/2,ye[ke].y1=ye[ke].y0+ye[ke].dy,ye[ke].x0=ye[ke].x-ye[ke].dx/2,ye[ke].x1=ye[ke].x0+ye[ke].dx}(fe.graph.nodes),fe.sankey.update(fe.graph),S(ie.filter(te(fe)),ue),fe.forceLayouts[he].alpha()>0)window.requestAnimationFrame(be);else{var Te=fe.node.originalX;fe.node.x0=Te-fe.visibleWidth/2,fe.node.x1=Te+fe.visibleWidth/2,ne(fe,de)}})}var ie,ue,fe,he,de}).on("drag",function(Z){if("fixed"!==Z.arrangement){var oe=b.event.x,ie=b.event.y;"snap"===Z.arrangement?(Z.node.x0=oe-Z.visibleWidth/2,Z.node.x1=oe+Z.visibleWidth/2,Z.node.y0=ie-Z.visibleHeight/2,Z.node.y1=ie+Z.visibleHeight/2):("freeform"===Z.arrangement&&(Z.node.x0=oe-Z.visibleWidth/2,Z.node.x1=oe+Z.visibleWidth/2),ie=Math.max(0,Math.min(Z.size-Z.visibleHeight/2,ie)),Z.node.y0=ie-Z.visibleHeight/2,Z.node.y1=ie+Z.visibleHeight/2),ae(Z.node),"snap"!==Z.arrangement&&(Z.sankey.update(Z.graph),S(K.filter(te(Z)),q))}}).on("dragend",function(Z){if("fixed"!==Z.arrangement){Z.interactionState.dragInProgress=!1;for(var oe=0;oe<Z.node.childrenNodes.length;oe++)Z.node.childrenNodes[oe].x=Z.node.x,Z.node.childrenNodes[oe].y=Z.node.y;"snap"!==Z.arrangement&&ne(Z,V)}});K.on(".drag",null).call(W)}function ne(K,q){for(var re=[],V=[],W=0;W<K.graph.nodes.length;W++){var oe=(K.graph.nodes[W].y0+K.graph.nodes[W].y1)/2;re.push((K.graph.nodes[W].x0+K.graph.nodes[W].x1)/2/K.figure.width),V.push(oe/K.figure.height)}x.call("_guiRestyle",q,{"node.x":[re],"node.y":[V]},K.trace.index).then(function(){q._fullLayout._dragCover&&q._fullLayout._dragCover.remove()})}function ae(K){K.lastDraggedX=K.x0+K.dx/2,K.lastDraggedY=K.y0+K.dy/2}function te(K){return function(q){return q.node.originalX===K.node.originalX}}G.exports=function(K,q,re,V,W){var Z=!1;s.ensureSingle(K._fullLayout._infolayer,"g","first-render",function(){Z=!0});var oe=K._fullLayout._dragCover,ie=re.filter(function(ye){return _(ye).trace.visible}).map(L.bind(null,V)),ue=q.selectAll("."+u.cn.sankey).data(ie,y);ue.exit().remove(),ue.enter().append("g").classed(u.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",H),ue.each(function(ye,ke){K._fullData[ke]._sankey=ye;var ze="bgsankey-"+ye.trace.uid+"-"+ke;s.ensureSingle(K._fullLayout._draggers,"rect",ze),K._fullData[ke]._bgRect=b.select("."+ze),K._fullData[ke]._bgRect.style("pointer-events","all").attr("width",ye.width).attr("height",ye.height).attr("x",ye.translateX).attr("y",ye.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ue.transition().ease(u.ease).duration(u.duration).attr("transform",H);var fe=ue.selectAll("."+u.cn.sankeyLinks).data(v,y);fe.enter().append("g").classed(u.cn.sankeyLinks,!0).style("fill","none");var he=fe.selectAll("."+u.cn.sankeyLink).data(function(ye){return ye.graph.links.filter(function(ke){return ke.value}).map(P.bind(null,ye))},y);he.enter().append("path").classed(u.cn.sankeyLink,!0).call(Y,ue,W.linkEvents),he.style("stroke",function(ye){return B(ye)?l.tinyRGB(c(ye.linkLineColor)):ye.tinyColorHue}).style("stroke-opacity",function(ye){return B(ye)?l.opacity(ye.linkLineColor):ye.tinyColorAlpha}).style("fill",function(ye){return ye.tinyColorHue}).style("fill-opacity",function(ye){return ye.tinyColorAlpha}).style("stroke-width",function(ye){return B(ye)?ye.linkLineWidth:1}).attr("d",A()),he.style("opacity",function(){return K._context.staticPlot||Z||oe?1:0}).transition().ease(u.ease).duration(u.duration).style("opacity",1),he.exit().transition().ease(u.ease).duration(u.duration).style("opacity",0).remove();var de=ue.selectAll("."+u.cn.sankeyNodeSet).data(v,y);de.enter().append("g").classed(u.cn.sankeyNodeSet,!0),de.style("cursor",function(ye){switch(ye.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var be=de.selectAll("."+u.cn.sankeyNode).data(function(ye){var ke=ye.graph.nodes;return function(ze){var je,Ie=[];for(je=0;je<ze.length;je++)ze[je].originalX=(ze[je].x0+ze[je].x1)/2,ze[je].originalY=(ze[je].y0+ze[je].y1)/2,-1===Ie.indexOf(ze[je].originalX)&&Ie.push(ze[je].originalX);for(Ie.sort(function(Ce,_e){return Ce-_e}),je=0;je<ze.length;je++)ze[je].originalLayerIndex=Ie.indexOf(ze[je].originalX),ze[je].originalLayer=ze[je].originalLayerIndex/(Ie.length-1)}(ke),ke.map(I.bind(null,ye))},y);be.enter().append("g").classed(u.cn.sankeyNode,!0).call(D).style("opacity",function(ye){return!K._context.staticPlot&&!Z||ye.partOfGroup?0:1}),be.call(Y,ue,W.nodeEvents).call(Q,he,W,K),be.transition().ease(u.ease).duration(u.duration).call(D).style("opacity",function(ye){return ye.partOfGroup?0:1}),be.exit().transition().ease(u.ease).duration(u.duration).style("opacity",0).remove();var pe=be.selectAll("."+u.cn.nodeRect).data(v);pe.enter().append("rect").classed(u.cn.nodeRect,!0).call(N),pe.style("stroke-width",function(ye){return ye.nodeLineWidth}).style("stroke",function(ye){return l.tinyRGB(c(ye.nodeLineColor))}).style("stroke-opacity",function(ye){return l.opacity(ye.nodeLineColor)}).style("fill",function(ye){return ye.tinyColorHue}).style("fill-opacity",function(ye){return ye.tinyColorAlpha}),pe.transition().ease(u.ease).duration(u.duration).call(N);var Te=be.selectAll("."+u.cn.nodeLabel).data(v);Te.enter().append("text").classed(u.cn.nodeLabel,!0).style("cursor","default"),Te.attr("data-notex",1).text(function(ye){return ye.node.label}).each(function(ye){var ke=b.select(this);f.font(ke,ye.textFont),w.convertToTspans(ke,K)}).style("text-shadow",w.makeTextShadow(K._fullLayout.paper_bgcolor)).attr("text-anchor",function(ye){return ye.horizontal&&ye.left?"end":"start"}).attr("transform",function(ye){var ke=b.select(this),ze=w.lineCount(ke),Ie=ye.nodeLineWidth/2+3,Ce=((ye.horizontal?ye.visibleHeight:ye.visibleWidth)-ye.textFont.size*((ze-1)*C-k))/2;ye.horizontal&&(ye.left?Ie=-Ie:Ie+=ye.visibleWidth);var _e=ye.horizontal?"":"scale(-1,1)"+d(90);return o(ye.horizontal?Ie:Ce,ye.horizontal?Ce:Ie)+_e}),Te.transition().ease(u.ease).duration(u.duration)}},{"../../components/color":666,"../../components/drawing":688,"../../constants/alignment":771,"../../lib":803,"../../lib/gup":800,"../../lib/svg_text_utils":829,"../../registry":931,"./constants":1211,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":166,"d3-interpolate":171,tinycolor2:598}],1216:[function(h,G,X){"use strict";G.exports=function(i,m){for(var b=[],p=i.cd[0].trace,r=p._sankey.graph.nodes,u=0;u<r.length;u++){var c=r[u];if(!c.partOfGroup){var l=[(c.x0+c.x1)/2,(c.y0+c.y1)/2];"v"===p.orientation&&l.reverse(),m&&m.contains(l,!1,u,i)&&b.push({pointNumber:c.pointNumber})}}return b}},{}],1217:[function(h,G,X){"use strict";var i=h("../../lib");G.exports=function(m,b){for(var p=0;p<m.length;p++)m[p].i=p;i.mergeArray(b.text,m,"tx"),i.mergeArray(b.texttemplate,m,"txt"),i.mergeArray(b.hovertext,m,"htx"),i.mergeArray(b.customdata,m,"data"),i.mergeArray(b.textposition,m,"tp"),b.textfont&&(i.mergeArrayCastPositive(b.textfont.size,m,"ts"),i.mergeArray(b.textfont.color,m,"tc"),i.mergeArray(b.textfont.family,m,"tf"));var r=b.marker;if(r){i.mergeArrayCastPositive(r.size,m,"ms"),i.mergeArrayCastPositive(r.opacity,m,"mo"),i.mergeArray(r.symbol,m,"mx"),i.mergeArray(r.color,m,"mc");var u=r.line;r.line&&(i.mergeArray(u.color,m,"mlc"),i.mergeArrayCastPositive(u.width,m,"mlw"));var c=r.gradient;c&&"none"!==c.type&&(i.mergeArray(c.type,m,"mgt"),i.mergeArray(c.color,m,"mgc"))}}},{"../../lib":803}],1218:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=h("../../plots/template_attributes").texttemplateAttrs,b=h("../../plots/template_attributes").hovertemplateAttrs,p=h("../../components/colorscale/attributes"),r=h("../../plots/font_attributes"),u=h("../../components/drawing/attributes").dash,c=h("../../components/drawing"),l=h("./constants"),f=h("../../lib/extend").extendFlat;G.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:i("x"),yhoverformat:i("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:m({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:b({},{keys:l.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:f({},u,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:f({symbol:{valType:"enumerated",values:c.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:f({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},p("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},p("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:r({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":673,"../../components/drawing":688,"../../components/drawing/attributes":687,"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../../plots/font_attributes":883,"../../plots/template_attributes":926,"./constants":1222}],1219:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib"),b=h("../../plots/cartesian/axes"),p=h("../../plots/cartesian/align_period"),r=h("../../constants/numerical").BADNUM,u=h("./subtypes"),c=h("./colorscale_calc"),l=h("./arrays_to_calcdata"),f=h("./calc_selection");function s(v,_,w,x,E,k,C){var L=_._length,P=v._fullLayout,A=w._id,I=x._id,D=P._firstScatter[g(_)]===_.uid,R=(y(_,P,w,x)||{}).orientation,S=_.fill;w._minDtick=0,x._minDtick=0;var N={padded:!0},B={padded:!0};C&&(N.ppad=B.ppad=C);var H=L<2||E[0]!==E[L-1]||k[0]!==k[L-1];H&&("tozerox"===S||"tonextx"===S&&(D||"h"===R))?N.tozero=!0:(_.error_y||{}).visible||"tonexty"!==S&&"tozeroy"!==S&&(u.hasMarkers(_)||u.hasText(_))||(N.padded=!1,N.ppad=0),H&&("tozeroy"===S||"tonexty"===S&&(D||"v"===R))?B.tozero=!0:"tonextx"!==S&&"tozerox"!==S||(B.padded=!1),A&&(_._extremes[A]=b.findExtremes(w,E,N)),I&&(_._extremes[I]=b.findExtremes(x,k,B))}function o(v,_){if(u.hasMarkers(v)){var w,x=v.marker,E=1.6*(v.marker.sizeref||1);if(w="area"===v.marker.sizemode?function(A){return Math.max(Math.sqrt((A||0)/E),3)}:function(A){return Math.max((A||0)/E,3)},m.isArrayOrTypedArray(x.size)){var k={type:"linear"};b.setConvert(k);for(var C=k.makeCalcdata(v.marker,"size"),L=new Array(_),P=0;P<_;P++)L[P]=w(C[P]);return L}return w(x.size)}}function d(v,_){var w=g(_),x=v._firstScatter;x[w]||(x[w]=_.uid)}function g(v){var _=v.stackgroup;return v.xaxis+v.yaxis+v.type+(_?"-"+_:"")}function y(v,_,w,x){var E=v.stackgroup;if(E){var k=_._scatterStackOpts[w._id+x._id][E],C="v"===k.orientation?x:w;return"linear"===C.type||"log"===C.type?k:void 0}}G.exports={calc:function(v,_){var w,x,E,k,C,L,P=v._fullLayout,A=b.getFromId(v,_.xaxis||"x"),I=b.getFromId(v,_.yaxis||"y"),D=A.makeCalcdata(_,"x"),R=I.makeCalcdata(_,"y"),S=p(_,A,"x",D),N=p(_,I,"y",R),B=S.vals,H=N.vals,Y=_._length,Q=new Array(Y),ne=_.ids,ae=y(_,P,A,I),te=!1;d(P,_);var K,q="x",re="y";ae?(m.pushUnique(ae.traceIndices,_._expandedIndex),(w="v"===ae.orientation)?(re="s",K="x"):(q="s",K="y"),C="interpolate"===ae.stackgaps):s(v,_,A,I,B,H,o(_,Y));var V=!!_.xperiodalignment,W=!!_.yperiodalignment;for(x=0;x<Y;x++){var Z=Q[x]={},oe=i(B[x]),ie=i(H[x]);oe&&ie?(Z[q]=B[x],Z[re]=H[x],V&&(Z.orig_x=D[x],Z.xEnd=S.ends[x],Z.xStart=S.starts[x]),W&&(Z.orig_y=R[x],Z.yEnd=N.ends[x],Z.yStart=N.starts[x])):ae&&(w?oe:ie)?(Z[K]=w?B[x]:H[x],Z.gap=!0,C?(Z.s=r,te=!0):Z.s=0):Z[q]=Z[re]=r,ne&&(Z.id=String(ne[x]))}if(l(Q,_),c(v,_),f(Q,_),ae){for(x=0;x<Q.length;)Q[x][K]===r?Q.splice(x,1):x++;if(m.sort(Q,function(de,be){return de[K]-be[K]||de.i-be.i}),te){for(x=0;x<Q.length-1&&Q[x].gap;)x++;for((L=Q[x].s)||(L=Q[x].s=0),E=0;E<x;E++)Q[E].s=L;for(k=Q.length-1;k>x&&Q[k].gap;)k--;for(L=Q[k].s,E=Q.length-1;E>k;E--)Q[E].s=L;for(;x<k;)if(Q[++x].gap){for(E=x+1;Q[E].gap;)E++;for(var ue=Q[x-1][K],fe=Q[x-1].s,he=(Q[E].s-fe)/(Q[E][K]-ue);x<E;)Q[x].s=fe+(Q[x][K]-ue)*he,x++}}}return Q},calcMarkerSize:o,calcAxisExpansion:s,setFirstScatter:d,getStackOpts:y}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"./arrays_to_calcdata":1217,"./calc_selection":1220,"./colorscale_calc":1221,"./subtypes":1243,"fast-isnumeric":249}],1220:[function(h,G,X){"use strict";var i=h("../../lib");G.exports=function(m,b){i.isArrayOrTypedArray(b.selectedpoints)&&i.tagSelected(m,b)}},{"../../lib":803}],1221:[function(h,G,X){"use strict";var i=h("../../components/colorscale/helpers").hasColorscale,m=h("../../components/colorscale/calc"),b=h("./subtypes");G.exports=function(p,r){b.hasLines(r)&&i(r,"line")&&m(p,r,{vals:r.line.color,containerStr:"line",cLetter:"c"}),b.hasMarkers(r)&&(i(r,"marker")&&m(p,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),i(r,"marker.line")&&m(p,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":674,"../../components/colorscale/helpers":677,"./subtypes":1243}],1222:[function(h,G,X){"use strict";G.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],1223:[function(h,G,X){"use strict";var i=h("./calc");function m(b,p,r,u,c,l,f){c[u]=!0;var d,g,v,_,w,s={i:null,gap:!0,s:0};if(s[f]=r,b.splice(p,0,s),p&&r===b[p-1][f]){var o=b[p-1];s.s=o.s,s.i=o.i,s.gap=o.gap}else l&&(s.s=(v=f,_=(d=b)[(g=p)-1],(w=d[g+1])?_?_.s+(w.s-_.s)*(r-_[v])/(w[v]-_[v]):w.s:_.s));p||(b[0].t=b[1].t,b[0].trace=b[1].trace,delete b[1].t,delete b[1].trace)}G.exports=function(b,p){var r=p.xaxis,u=p.yaxis,l=b._fullLayout._scatterStackOpts[r._id+u._id];if(l){var f,s,o,d,g,y,v,_,w,x,E,k,C,L,P,A=b.calcdata;for(var I in l){var D=(x=l[I]).traceIndices;if(D.length){for(E="interpolate"===x.stackgaps,k=x.groupnorm,"v"===x.orientation?(C="x",L="y"):(C="y",L="x"),P=new Array(D.length),f=0;f<P.length;f++)P[f]=!1;y=A[D[0]];var R=new Array(y.length);for(f=0;f<y.length;f++)R[f]=y[f][C];for(f=1;f<D.length;f++){for(g=A[D[f]],s=o=0;s<g.length;s++){for(v=g[s][C];v>R[o]&&o<R.length;o++)m(g,s,R[o],f,P,E,C),s++;if(v!==R[o]){for(d=0;d<f;d++)m(A[D[d]],o,v,d,P,E,C);R.splice(o,0,v)}o++}for(;o<R.length;o++)m(g,s,R[o],f,P,E,C),s++}var S=R.length;for(s=0;s<y.length;s++){for(_=y[s][L]=y[s].s,f=1;f<D.length;f++)(g=A[D[f]])[0].trace._rawLength=g[0].trace._length,g[0].trace._length=S,g[s][L]=_+=g[s].s;if(k)for(w=("fraction"===k?_:_/100)||1,f=0;f<D.length;f++){var N=A[D[f]][s];N[L]/=w,N.sNorm=N.s/w}}for(f=0;f<D.length;f++){var B=(g=A[D[f]])[0].trace,H=i.calcMarkerSize(B,B._rawLength),Y=Array.isArray(H);if(H&&P[f]||Y){var Q=H;for(H=new Array(S),s=0;s<S;s++)H[s]=g[s].gap?0:Y?Q[g[s].i]:Q}var ne=new Array(S),ae=new Array(S);for(s=0;s<S;s++)ne[s]=g[s].x,ae[s]=g[s].y;i.calcAxisExpansion(b,B,r,u,ne,ae,H),g[0].t.orientation=x.orientation}}}}}},{"./calc":1219}],1224:[function(h,G,X){"use strict";G.exports=function(i){for(var m=0;m<i.length;m++){var b=i[m];if("scatter"===b.type){var p=b.fill;if("none"!==p&&"toself"!==p&&(b.opacity=void 0,"tonexty"===p||"tonextx"===p))for(var r=m-1;r>=0;r--){var u=i[r];if("scatter"===u.type&&u.xaxis===b.xaxis&&u.yaxis===b.yaxis){u.opacity=void 0;break}}}}}},{}],1225:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../registry"),b=h("./attributes"),p=h("./constants"),r=h("./subtypes"),u=h("./xy_defaults"),c=h("./period_defaults"),l=h("./stack_defaults"),f=h("./marker_defaults"),s=h("./line_defaults"),o=h("./line_shape_defaults"),d=h("./text_defaults"),g=h("./fillcolor_defaults");G.exports=function(y,v,_,w){function x(D,R){return i.coerce(y,v,b,D,R)}var E=u(y,v,w,x);if(E||(v.visible=!1),v.visible){c(y,v,w,x),x("xhoverformat"),x("yhoverformat");var k=l(y,v,w,x),C=!k&&E<p.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("mode",C),r.hasLines(v)&&(s(y,v,_,w,x),o(y,v,x),x("connectgaps"),x("line.simplify")),r.hasMarkers(v)&&f(y,v,_,w,x,{gradient:!0}),r.hasText(v)&&(x("texttemplate"),d(y,v,w,x));var L=[];(r.hasMarkers(v)||r.hasText(v))&&(x("cliponaxis"),x("marker.maxdisplayed"),L.push("points")),x("fill",k?k.fillDflt:"none"),"none"!==v.fill&&(g(y,v,_,x),r.hasLines(v)||o(y,v,x));var P=(v.line||{}).color,A=(v.marker||{}).color;"tonext"!==v.fill&&"toself"!==v.fill||L.push("fills"),x("hoveron",L.join("+")||"points"),"fills"!==v.hoveron&&x("hovertemplate");var I=m.getComponentMethod("errorbars","supplyDefaults");I(y,v,P||A||_,{axis:"y"}),I(y,v,P||A||_,{axis:"x",inherit:"y"}),i.coerceSelectionMarkerOpacity(v,x)}}},{"../../lib":803,"../../registry":931,"./attributes":1218,"./constants":1222,"./fillcolor_defaults":1226,"./line_defaults":1231,"./line_shape_defaults":1233,"./marker_defaults":1237,"./period_defaults":1238,"./stack_defaults":1241,"./subtypes":1243,"./text_defaults":1244,"./xy_defaults":1245}],1226:[function(h,G,X){"use strict";var i=h("../../components/color"),m=h("../../lib").isArrayOrTypedArray;G.exports=function(b,p,r,u){var c=!1;if(p.marker){var l=p.marker.color,f=(p.marker.line||{}).color;l&&!m(l)?c=l:f&&!m(f)&&(c=f)}u("fillcolor",i.addOpacity((p.line||{}).color||c||r,.5))}},{"../../components/color":666,"../../lib":803}],1227:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes");G.exports=function(m,b,p){var r={},u={_fullLayout:p},c=i.getFromTrace(u,b,"x"),l=i.getFromTrace(u,b,"y");return r.xLabel=i.tickText(c,c.c2l(m.x),!0).text,r.yLabel=i.tickText(l,l.c2l(m.y),!0).text,r}},{"../../plots/cartesian/axes":854}],1228:[function(h,G,X){"use strict";var i=h("../../components/color"),m=h("./subtypes");G.exports=function(b,p){var r,u;if("lines"===b.mode)return(r=b.line.color)&&i.opacity(r)?r:b.fillcolor;if("none"===b.mode)return b.fill?b.fillcolor:"";var c=p.mcc||(b.marker||{}).color,l=p.mlcc||((b.marker||{}).line||{}).color;return(u=c&&i.opacity(c)?c:l&&i.opacity(l)&&(p.mlw||((b.marker||{}).line||{}).width)?l:"")?i.opacity(u)<.3?i.addOpacity(u,.3):u:(r=(b.line||{}).color)&&i.opacity(r)&&m.hasLines(b)&&b.line.width?r:b.fillcolor}},{"../../components/color":666,"./subtypes":1243}],1229:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/fx"),b=h("../../registry"),p=h("./get_trace_color"),r=h("../../components/color"),u=i.fillText;G.exports=function(c,l,f,s){var o=c.cd,d=o[0].trace,g=c.xa,y=c.ya,v=g.c2p(l),_=y.c2p(f),w=[v,_],x=d.hoveron||"",E=-1!==d.mode.indexOf("markers")?3:.5,k=!!d.xperiodalignment,C=!!d.yperiodalignment;if(-1!==x.indexOf("points")){var L=function(pe){var Te=Math.max(E,pe.mrc||0),ye=g.c2p(pe.x)-v,ke=y.c2p(pe.y)-_;return Math.max(Math.sqrt(ye*ye+ke*ke)-Te,1-E/Te)},P=m.getDistanceFunction(s,function(pe){if(k){var Te=g.c2p(pe.xStart),ye=g.c2p(pe.xEnd);return v>=Math.min(Te,ye)&&v<=Math.max(Te,ye)?0:1/0}var ke=Math.max(3,pe.mrc||0),ze=1-1/ke,je=Math.abs(g.c2p(pe.x)-v);return je<ke?ze*je/ke:je-ke+ze},function(pe){if(C){var Te=y.c2p(pe.yStart),ye=y.c2p(pe.yEnd);return _>=Math.min(Te,ye)&&_<=Math.max(Te,ye)?0:1/0}var ke=Math.max(3,pe.mrc||0),ze=1-1/ke,je=Math.abs(y.c2p(pe.y)-_);return je<ke?ze*je/ke:je-ke+ze},L);if(m.getClosest(o,P,c),!1!==c.index){var A=o[c.index],I=g.c2p(A.x,!0),D=y.c2p(A.y,!0),R=A.mrc||1;c.index=A.i;var S=o[0].t.orientation,N=S&&(A.sNorm||A.s),B="h"===S?N:void 0!==A.orig_x?A.orig_x:A.x,H="v"===S?N:void 0!==A.orig_y?A.orig_y:A.y;return i.extendFlat(c,{color:p(d,A),x0:I-R,x1:I+R,xLabelVal:B,y0:D-R,y1:D+R,yLabelVal:H,spikeDistance:L(A),hovertemplate:d.hovertemplate}),u(A,d,c),b.getComponentMethod("errorbars","hoverInfo")(A,d,c),[c]}}if(-1!==x.indexOf("fills")&&d._polygons){var Y,Q,ne,ae,te,K,re,V,W=d._polygons,Z=[],oe=!1,ie=1/0,ue=-1/0,fe=1/0,he=-1/0;for(Y=0;Y<W.length;Y++)(ne=W[Y]).contains(w)&&(oe=!oe,Z.push(ne),fe=Math.min(fe,ne.ymin),he=Math.max(he,ne.ymax));if(oe){var de=((fe=Math.max(fe,0))+(he=Math.min(he,y._length)))/2;for(Y=0;Y<Z.length;Y++)for(ae=Z[Y].pts,Q=1;Q<ae.length;Q++)(re=ae[Q-1][1])>de!=(V=ae[Q][1])>=de&&(K=ae[Q-1][0],V-re&&(te=K+(ae[Q][0]-K)*(de-re)/(V-re),ie=Math.min(ie,te),ue=Math.max(ue,te)));ie=Math.max(ie,0),ue=Math.min(ue,g._length);var be=r.defaultLine;return r.opacity(d.fillcolor)?be=d.fillcolor:r.opacity((d.line||{}).color)&&(be=d.line.color),i.extendFlat(c,{distance:c.maxHoverDistance,x0:ie,x1:ue,y0:de,y1:de,color:be,hovertemplate:!1}),delete c.index,c.text=d.text&&!Array.isArray(d.text)?String(d.text):d.name,[c]}}}},{"../../components/color":666,"../../components/fx":706,"../../lib":803,"../../registry":931,"./get_trace_color":1228}],1230:[function(h,G,X){"use strict";var i=h("./subtypes");G.exports={hasLines:i.hasLines,hasMarkers:i.hasMarkers,hasText:i.hasText,isBubble:i.isBubble,attributes:h("./attributes"),supplyDefaults:h("./defaults"),crossTraceDefaults:h("./cross_trace_defaults"),calc:h("./calc").calc,crossTraceCalc:h("./cross_trace_calc"),arraysToCalcdata:h("./arrays_to_calcdata"),plot:h("./plot"),colorbar:h("./marker_colorbar"),formatLabels:h("./format_labels"),style:h("./style").style,styleOnSelect:h("./style").styleOnSelect,hoverPoints:h("./hover"),selectPoints:h("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:h("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":868,"./arrays_to_calcdata":1217,"./attributes":1218,"./calc":1219,"./cross_trace_calc":1223,"./cross_trace_defaults":1224,"./defaults":1225,"./format_labels":1227,"./hover":1229,"./marker_colorbar":1236,"./plot":1239,"./select":1240,"./style":1242,"./subtypes":1243}],1231:[function(h,G,X){"use strict";var i=h("../../lib").isArrayOrTypedArray,m=h("../../components/colorscale/helpers").hasColorscale,b=h("../../components/colorscale/defaults");G.exports=function(p,r,u,c,l,f){var s=(p.marker||{}).color;l("line.color",u),m(p,"line")?b(p,r,c,l,{prefix:"line.",cLetter:"c"}):l("line.color",!i(s)&&s||u),l("line.width"),(f||{}).noDash||l("line.dash")}},{"../../components/colorscale/defaults":676,"../../components/colorscale/helpers":677,"../../lib":803}],1232:[function(h,G,X){"use strict";var i=h("../../constants/numerical"),m=i.BADNUM,b=i.LOG_CLIP,p=b+.5,r=b-.5,u=h("../../lib"),c=u.segmentsIntersect,l=u.constrain,f=h("./constants");G.exports=function(s,o){var d,g,y,v,_,w,x,E,k,C,L,P,A,I,D,R,S,N,B=o.xaxis,H=o.yaxis,Y="log"===B.type,Q="log"===H.type,ne=B._length,ae=H._length,te=o.connectGaps,K=o.baseTolerance,q=o.shape,re="linear"===q,V=o.fill&&"none"!==o.fill,W=[],Z=f.minTolerance,oe=s.length,ie=new Array(oe),ue=0;function fe(at){var ct=s[at];if(!ct)return!1;var _t=o.linearized?B.l2p(ct.x):B.c2p(ct.x),xt=o.linearized?H.l2p(ct.y):H.c2p(ct.y);if(_t===m){if(Y&&(_t=B.c2p(ct.x,!0)),_t===m)return!1;Q&&xt===m&&(_t*=Math.abs(B._m*ae*(B._m>0?p:r)/(H._m*ne*(H._m>0?p:r)))),_t*=1e3}if(xt===m){if(Q&&(xt=H.c2p(ct.y,!0)),xt===m)return!1;xt*=1e3}return[_t,xt]}function he(at,ct,_t,xt){var Ht=_t-at,At=xt-ct,ht=.5-at,st=.5-ct,Bt=Ht*Ht+At*At,gn=Ht*ht+At*st;if(gn>0&&gn<Bt){var hn=ht*At-st*Ht;if(hn*hn<Bt)return!0}}function de(at,ct){var _t=at[0]/ne,xt=at[1]/ae,Ht=Math.max(0,-_t,_t-1,-xt,xt-1);return Ht&&void 0!==S&&he(_t,xt,S,N)&&(Ht=0),Ht&&ct&&he(_t,xt,ct[0]/ne,ct[1]/ae)&&(Ht=0),(1+f.toleranceGrowth*Ht)*K}function be(at,ct){var _t=at[0]-ct[0],xt=at[1]-ct[1];return Math.sqrt(_t*_t+xt*xt)}var pe,Te,ye,ke,ze,je,Ie,Ce=f.maxScreensAway,_e=-ne*Ce,we=ne*(1+Ce),Se=-ae*Ce,Oe=ae*(1+Ce),Be=[[_e,Se,we,Se],[we,Se,we,Oe],[we,Oe,_e,Oe],[_e,Oe,_e,Se]];function He(at){if(at[0]<_e||at[0]>we||at[1]<Se||at[1]>Oe)return[l(at[0],_e,we),l(at[1],Se,Oe)]}function Xe(at,ct){return at[0]===ct[0]&&(at[0]===_e||at[0]===we)||at[1]===ct[1]&&(at[1]===Se||at[1]===Oe)||void 0}function nt(at,ct,_t){return function(xt,Ht){var At=He(xt),ht=He(Ht),st=[];if(At&&ht&&Xe(At,ht))return st;At&&st.push(At),ht&&st.push(ht);var Bt=2*u.constrain((xt[at]+Ht[at])/2,ct,_t)-((At||xt)[at]+(ht||Ht)[at]);return Bt&&((At&&ht?Bt>0==At[at]>ht[at]?At:ht:At||ht)[at]+=Bt),st}}function et(at){var ct=at[0],_t=at[1],xt=ct===ie[ue-1][0],Ht=_t===ie[ue-1][1];if(!xt||!Ht)if(ue>1){var At=ct===ie[ue-2][0],ht=_t===ie[ue-2][1];xt&&(ct===_e||ct===we)&&At?ht?ue--:ie[ue-1]=at:Ht&&(_t===Se||_t===Oe)&&ht?At?ue--:ie[ue-1]=at:ie[ue++]=at}else ie[ue++]=at}function qe(at){ie[ue-1][0]!==at[0]&&ie[ue-1][1]!==at[1]&&et([ye,ke]),et(at),ze=null,ye=ke=0}function Ye(at){if(S=at[0]/ne,N=at[1]/ae,Te=at[1]<Se?Se:at[1]>Oe?Oe:0,(pe=at[0]<_e?_e:at[0]>we?we:0)||Te){if(ue)if(ze){var ct=Ie(ze,at);ct.length>1&&(qe(ct[0]),ie[ue++]=ct[1])}else je=Ie(ie[ue-1],at)[0],ie[ue++]=je;else ie[ue++]=[pe||at[0],Te||at[1]];var _t=ie[ue-1];pe&&Te&&(_t[0]!==pe||_t[1]!==Te)?(ze&&(ye!==pe&&ke!==Te?et(ye&&ke?(At=(Ht=at)[0]-(xt=ze)[0],ht=(Ht[1]-xt[1])/At,(xt[1]*Ht[0]-Ht[1]*xt[0])/At>0?[ht>0?_e:we,Oe]:[ht>0?we:_e,Se]):[ye||pe,ke||Te]):ye&&ke&&et([ye,ke])),et([pe,Te])):ye-pe&&ke-Te&&et([pe||ye,Te||ke]),ze=at,ye=pe,ke=Te}else ze&&qe(Ie(ze,at)[0]),ie[ue++]=at;var xt,Ht,At,ht}for("linear"===q||"spline"===q?Ie=function(at,ct){for(var _t=[],xt=0,Ht=0;Ht<4;Ht++){var At=Be[Ht],ht=c(at[0],at[1],ct[0],ct[1],At[0],At[1],At[2],At[3]);ht&&(!xt||Math.abs(ht.x-_t[0][0])>1||Math.abs(ht.y-_t[0][1])>1)&&(ht=[ht.x,ht.y],xt&&be(ht,at)<be(_t[0],at)?_t.unshift(ht):_t.push(ht),xt++)}return _t}:"hv"===q||"vh"===q?Ie=function(at,ct){var _t=[],xt=He(at),Ht=He(ct);return xt&&Ht&&Xe(xt,Ht)||(xt&&_t.push(xt),Ht&&_t.push(Ht)),_t}:"hvh"===q?Ie=nt(0,_e,we):"vhv"===q&&(Ie=nt(1,Se,Oe)),d=0;d<oe;d++)if(g=fe(d)){for(ue=0,ze=null,Ye(g),d++;d<oe;d++){if(!(v=fe(d))){if(te)continue;break}if(re&&o.simplify){var ot=fe(d+1);if(C=be(v,g),V&&(0===ue||ue===oe-1)||!(C<de(v,ot)*Z)){for(E=[(v[0]-g[0])/C,(v[1]-g[1])/C],_=g,L=C,P=I=D=0,x=!1,y=v,d++;d<s.length;d++){if(w=ot,ot=fe(d+1),!w){if(te)continue;break}if(R=(k=[w[0]-g[0],w[1]-g[1]])[0]*E[1]-k[1]*E[0],I=Math.min(I,R),(D=Math.max(D,R))-I>de(w,ot))break;y=w,(A=k[0]*E[0]+k[1]*E[1])>L?(L=A,v=w,x=!1):A<P&&(P=A,_=w,x=!0)}if(x?(Ye(v),y!==_&&Ye(_)):(_!==g&&Ye(_),y!==v&&Ye(v)),Ye(y),d>=s.length||!w)break;Ye(w),g=w}}else Ye(v)}ze&&et([ye||ze[0],ke||ze[1]]),W.push(ie.slice(0,ue))}return W}},{"../../constants/numerical":779,"../../lib":803,"./constants":1222}],1233:[function(h,G,X){"use strict";G.exports=function(i,m,b){"spline"===b("line.shape")&&b("line.smoothing")}},{}],1234:[function(h,G,X){"use strict";var i={tonextx:1,tonexty:1,tonext:1};G.exports=function(m,b,p){var r,u,c,l,f,s={},o=!1,d=-1,g=0,y=-1;for(u=0;u<p.length;u++)(c=(r=p[u][0].trace).stackgroup||"")?c in s?f=s[c]:(f=s[c]=g,g++):r.fill in i&&y>=0?f=y:(f=y=g,g++),f<d&&(o=!0),r._groupIndex=d=f;var v=p.slice();o&&v.sort(function(w,x){var E=w[0].trace,k=x[0].trace;return E._groupIndex-k._groupIndex||E.index-k.index});var _={};for(u=0;u<v.length;u++)c=(r=v[u][0].trace).stackgroup||"",!0===r.visible?(r._nexttrace=null,r.fill in i&&(r._prevtrace=(l=_[c])||null,l&&(l._nexttrace=r)),r._ownfill=r.fill&&("tozero"===r.fill.substr(0,6)||"toself"===r.fill||"to"===r.fill.substr(0,2)&&!r._prevtrace),_[c]=r):r._prevtrace=r._nexttrace=r._ownfill=null;return v}},{}],1235:[function(h,G,X){"use strict";var i=h("fast-isnumeric");G.exports=function(m,b){b||(b=2);var p=m.marker,r=p.sizeref||1,u=p.sizemin||0,c="area"===p.sizemode?function(l){return Math.sqrt(l/r)}:function(l){return l/r};return function(l){var f=c(l/b);return i(f)&&f>0?Math.max(f,u):0}}},{"fast-isnumeric":249}],1236:[function(h,G,X){"use strict";G.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1237:[function(h,G,X){"use strict";var i=h("../../components/color"),m=h("../../components/colorscale/helpers").hasColorscale,b=h("../../components/colorscale/defaults"),p=h("./subtypes");G.exports=function(r,u,c,l,f,s){var o=p.isBubble(r),d=(r.line||{}).color;s=s||{},d&&(c=d),f("marker.symbol"),f("marker.opacity",o?.7:1),f("marker.size"),f("marker.color",c),m(r,"marker")&&b(r,u,l,f,{prefix:"marker.",cLetter:"c"}),s.noSelect||(f("selected.marker.color"),f("unselected.marker.color"),f("selected.marker.size"),f("unselected.marker.size")),s.noLine||(f("marker.line.color",d&&!Array.isArray(d)&&u.marker.color!==d?d:o?i.background:i.defaultLine),m(r,"marker.line")&&b(r,u,l,f,{prefix:"marker.line.",cLetter:"c"}),f("marker.line.width",o?1:0)),o&&(f("marker.sizeref"),f("marker.sizemin"),f("marker.sizemode")),s.gradient&&"none"!==f("marker.gradient.type")&&f("marker.gradient.color")}},{"../../components/color":666,"../../components/colorscale/defaults":676,"../../components/colorscale/helpers":677,"./subtypes":1243}],1238:[function(h,G,X){"use strict";var i=h("../../lib").dateTick0,m=h("../../constants/numerical").ONEWEEK;function b(p,r){return i(r,p%m==0?1:0)}G.exports=function(p,r,u,c,l){if(l||(l={x:!0,y:!0}),l.x){var f=c("xperiod");f&&(c("xperiod0",b(f,r.xcalendar)),c("xperiodalignment"))}if(l.y){var s=c("yperiod");s&&(c("yperiod0",b(s,r.ycalendar)),c("yperiodalignment"))}}},{"../../constants/numerical":779,"../../lib":803}],1239:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../registry"),b=h("../../lib"),p=b.ensureSingle,r=b.identity,u=h("../../components/drawing"),c=h("./subtypes"),l=h("./line_points"),f=h("./link_traces"),s=h("../../lib/polygon").tester;function o(d,g,y,v,_,w,x){var E;!function(we,Se,Oe,Be,He){var Xe=Oe.xaxis,nt=Oe.yaxis,et=i.extent(b.simpleMap(Xe.range,Xe.r2c)),qe=i.extent(b.simpleMap(nt.range,nt.r2c)),Ye=Be[0].trace;if(c.hasMarkers(Ye)){var ot=Ye.marker.maxdisplayed;if(0!==ot){var at=Be.filter(function(Ht){return Ht.x>=et[0]&&Ht.x<=et[1]&&Ht.y>=qe[0]&&Ht.y<=qe[1]}),ct=Math.ceil(at.length/ot),_t=0;He.forEach(function(Ht,At){var ht=Ht[0].trace;c.hasMarkers(ht)&&ht.marker.maxdisplayed>0&&At<Se&&_t++});var xt=Math.round(_t*ct/3+Math.floor(_t/3)*ct/7.1);Be.forEach(function(Ht){delete Ht.vis}),at.forEach(function(Ht,At){0===Math.round((At+xt)%ct)&&(Ht.vis=!0)})}}}(0,g,y,v,_);var k=!!x&&x.duration>0;function C(we){return k?we.transition():we}var L=y.xaxis,P=y.yaxis,A=v[0].trace,I=A.line,D=i.select(w),R=p(D,"g","errorbars"),S=p(D,"g","lines"),N=p(D,"g","points"),B=p(D,"g","text");if(m.getComponentMethod("errorbars","plot")(d,R,y,x),!0===A.visible){var H,Y;C(D).style("opacity",A.opacity);var Q=A.fill.charAt(A.fill.length-1);"x"!==Q&&"y"!==Q&&(Q=""),v[0][y.isRangePlot?"nodeRangePlot3":"node3"]=D;var ne,ae,te="",K=[],q=A._prevtrace;q&&(te=q._prevRevpath||"",Y=q._nextFill,K=q._polygons);var re,V,W,Z,oe,ie,ue,fe="",he="",de=[],be=b.noop;if(H=A._ownFill,c.hasLines(A)||"none"!==A.fill){for(Y&&Y.datum(v),-1!==["hv","vh","hvh","vhv"].indexOf(I.shape)?(re=u.steps(I.shape),V=u.steps(I.shape.split("").reverse().join(""))):re=V="spline"===I.shape?function(we){var Se=we[we.length-1];return we.length>1&&we[0][0]===Se[0]&&we[0][1]===Se[1]?u.smoothclosed(we.slice(1),I.smoothing):u.smoothopen(we,I.smoothing)}:function(we){return"M"+we.join("L")},W=function(we){return V(we.reverse())},de=l(v,{xaxis:L,yaxis:P,connectGaps:A.connectgaps,baseTolerance:Math.max(I.width||1,3)/4,shape:I.shape,simplify:I.simplify,fill:A.fill}),ue=A._polygons=new Array(de.length),E=0;E<de.length;E++)A._polygons[E]=s(de[E]);de.length&&(Z=de[0][0],ie=(oe=de[de.length-1])[oe.length-1]),be=function(we){return function(Se){if(ne=re(Se),ae=W(Se),fe?Q?(fe+="L"+ne.substr(1),he=ae+"L"+he.substr(1)):(fe+="Z"+ne,he=ae+"Z"+he):(fe=ne,he=ae),c.hasLines(A)&&Se.length>1){var Oe=i.select(this);if(Oe.datum(v),we)C(Oe.style("opacity",0).attr("d",ne).call(u.lineGroupStyle)).style("opacity",1);else{var Be=C(Oe);Be.attr("d",ne),u.singleLineStyle(v,Be)}}}}}var pe=S.selectAll(".js-line").data(de);C(pe.exit()).style("opacity",0).remove(),pe.each(be(!1)),pe.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(u.lineGroupStyle).each(be(!0)),u.setClipUrl(pe,y.layerClipId,d),de.length?(H?(H.datum(v),Z&&ie&&(Q?("y"===Q?Z[1]=ie[1]=P.c2p(0,!0):"x"===Q&&(Z[0]=ie[0]=L.c2p(0,!0)),C(H).attr("d","M"+ie+"L"+Z+"L"+fe.substr(1)).call(u.singleFillStyle)):C(H).attr("d",fe+"Z").call(u.singleFillStyle))):Y&&("tonext"===A.fill.substr(0,6)&&fe&&te?("tonext"===A.fill?C(Y).attr("d",fe+"Z"+te+"Z").call(u.singleFillStyle):C(Y).attr("d",fe+"L"+te.substr(1)+"Z").call(u.singleFillStyle),A._polygons=A._polygons.concat(K)):(ye(Y),A._polygons=null)),A._prevRevpath=he,A._prevPolygons=ue):(H?ye(H):Y&&ye(Y),A._polygons=A._prevRevpath=A._prevPolygons=null),N.datum(v),B.datum(v),function(we,Se,Oe){var Be,He=Oe[0].trace,Xe=c.hasMarkers(He),nt=c.hasText(He),et=function(we){if(we.ids)return Ie}(He),qe=_e,Ye=_e;if(Xe||nt){var ot=r,at=He.stackgroup,ct=at&&"infer zero"===d._fullLayout._scatterStackOpts[L._id+P._id][at].stackgaps;He.marker.maxdisplayed||He._needsCull?ot=ct?ze:ke:at&&!ct&&(ot=je),Xe&&(qe=ot),nt&&(Ye=ot)}var _t,xt=(Be=we.selectAll("path.point").data(qe,et)).enter().append("path").classed("point",!0);k&&xt.call(u.pointStyle,He,d).call(u.translatePoints,L,P).style("opacity",0).transition().style("opacity",1),Be.order(),Xe&&(_t=u.makePointStyleFns(He)),Be.each(function(Ht){var At=i.select(this),ht=C(At);u.translatePoint(Ht,ht,L,P)?(u.singlePointStyle(Ht,ht,He,_t,d),y.layerClipId&&u.hideOutsideRangePoint(Ht,ht,L,P,He.xcalendar,He.ycalendar),He.customdata&&At.classed("plotly-customdata",null!=Ht.data)):ht.remove()}),k?Be.exit().transition().style("opacity",0).remove():Be.exit().remove(),(Be=Se.selectAll("g").data(Ye,et)).enter().append("g").classed("textpoint",!0).append("text"),Be.order(),Be.each(function(Ht){var At=i.select(this),ht=C(At.select("text"));u.translatePoint(Ht,ht,L,P)?y.layerClipId&&u.hideOutsideRangePoint(Ht,At,L,P,He.xcalendar,He.ycalendar):At.remove()}),Be.selectAll("text").call(u.textPointStyle,He,d).each(function(Ht){var At=L.c2p(Ht.x),ht=P.c2p(Ht.y);i.select(this).selectAll("tspan.line").each(function(){C(i.select(this)).attr({x:At,y:ht})})}),Be.exit().remove()}(N,B,v);var Te=!1===A.cliponaxis?null:y.layerClipId;u.setClipUrl(N,Te,d),u.setClipUrl(B,Te,d)}function ye(we){C(we).attr("d","M0,0Z")}function ke(we){return we.filter(function(Se){return!Se.gap&&Se.vis})}function ze(we){return we.filter(function(Se){return Se.vis})}function je(we){return we.filter(function(Se){return!Se.gap})}function Ie(we){return we.id}function _e(){return!1}}G.exports=function(d,g,y,v,_,w){var x,E,P,I,k=!_,C=!!_&&_.duration>0,L=f(d,g,y);(x=v.selectAll("g.trace").data(L,function(P){return P[0].trace.uid})).enter().append("g").attr("class",function(P){return"trace scatter trace"+P[0].trace.uid}).style("stroke-miterlimit",2),x.order(),P=d,I=g,x.each(function(D){var R=p(i.select(this),"g","fills");u.setClipUrl(R,I.layerClipId,P);var S=D[0].trace,N=[];S._ownfill&&N.push("_ownFill"),S._nexttrace&&N.push("_nextFill");var B=R.selectAll("g").data(N,r);B.enter().append("g"),B.exit().each(function(H){S[H]=null}).remove(),B.order().each(function(H){S[H]=p(i.select(this),"path","js-fill")})}),C?(w&&(E=w()),i.transition().duration(_.duration).ease(_.easing).each("end",function(){E&&E()}).each("interrupt",function(){E&&E()}).each(function(){v.selectAll("g.trace").each(function(P,A){o(d,A,g,P,L,this,_)})})):x.each(function(P,A){o(d,A,g,P,L,this,_)}),k&&x.exit().remove(),v.selectAll("path:not([d])").remove()}},{"../../components/drawing":688,"../../lib":803,"../../lib/polygon":815,"../../registry":931,"./line_points":1232,"./link_traces":1234,"./subtypes":1243,"@plotly/d3":58}],1240:[function(h,G,X){"use strict";var i=h("./subtypes");G.exports=function(m,b){var p,r,u,c,l=m.cd,f=m.xaxis,s=m.yaxis,o=[],d=l[0].trace;if(!i.hasMarkers(d)&&!i.hasText(d))return[];if(!1===b)for(p=0;p<l.length;p++)l[p].selected=0;else for(p=0;p<l.length;p++)u=f.c2p((r=l[p]).x),c=s.c2p(r.y),null!==r.i&&b.contains([u,c],!1,p,m)?(o.push({pointNumber:r.i,x:f.c2d(r.x),y:s.c2d(r.y)}),r.selected=1):r.selected=0;return o}},{"./subtypes":1243}],1241:[function(h,G,X){"use strict";var i=["orientation","groupnorm","stackgaps"];G.exports=function(m,b,p,r){var u=p._scatterStackOpts,c=r("stackgroup");if(c){var l=b.xaxis+b.yaxis,f=u[l];f||(f=u[l]={});var s=f[c],o=!1;s?s.traces.push(b):(s=f[c]={traceIndices:[],traces:[b]},o=!0);for(var d={orientation:b.x&&!b.y?"h":"v"},g=0;g<i.length;g++){var y=i[g],v=y+"Found";if(!s[v]){var _=void 0!==m[y],w="orientation"===y;if((_||o)&&(s[y]=r(y,d[y]),w&&(s.fillDflt="h"===s[y]?"tonextx":"tonexty"),_&&(s[v]=!0,!o&&(delete s.traces[0][y],w))))for(var x=0;x<s.traces.length-1;x++){var E=s.traces[x];E._input.fill!==E.fill&&(E.fill=s.fillDflt)}}}return s}}},{}],1242:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/drawing"),b=h("../../registry");function p(u,c,l){m.pointStyle(u.selectAll("path.point"),c,l)}function r(u,c,l){m.textPointStyle(u.selectAll("text"),c,l)}G.exports={style:function(u){var c=i.select(u).selectAll("g.trace.scatter");c.style("opacity",function(l){return l[0].trace.opacity}),c.selectAll("g.points").each(function(l){p(i.select(this),l.trace||l[0].trace,u)}),c.selectAll("g.text").each(function(l){r(i.select(this),l.trace||l[0].trace,u)}),c.selectAll("g.trace path.js-line").call(m.lineGroupStyle),c.selectAll("g.trace path.js-fill").call(m.fillGroupStyle),b.getComponentMethod("errorbars","style")(c)},stylePoints:p,styleText:r,styleOnSelect:function(u,c,l){var f=c[0].trace;f.selectedpoints?(m.selectedPointStyle(l.selectAll("path.point"),f),m.selectedTextStyle(l.selectAll("text"),f)):(p(l,f,u),r(l,f,u))}}},{"../../components/drawing":688,"../../registry":931,"@plotly/d3":58}],1243:[function(h,G,X){"use strict";var i=h("../../lib");G.exports={hasLines:function(m){return m.visible&&m.mode&&-1!==m.mode.indexOf("lines")},hasMarkers:function(m){return m.visible&&(m.mode&&-1!==m.mode.indexOf("markers")||"splom"===m.type)},hasText:function(m){return m.visible&&m.mode&&-1!==m.mode.indexOf("text")},isBubble:function(m){return i.isPlainObject(m.marker)&&i.isArrayOrTypedArray(m.marker.size)}}},{"../../lib":803}],1244:[function(h,G,X){"use strict";var i=h("../../lib");G.exports=function(m,b,p,r,u){u=u||{},r("textposition"),i.coerceFont(r,"textfont",p.font),u.noSelect||(r("selected.textfont.color"),r("unselected.textfont.color"))}},{"../../lib":803}],1245:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../registry");G.exports=function(b,p,r,u){var c,l=u("x"),f=u("y");if(m.getComponentMethod("calendars","handleTraceDefaults")(b,p,["x","y"],r),l){var s=i.minRowLength(l);f?c=Math.min(s,i.minRowLength(f)):(c=s,u("y0"),u("dy"))}else{if(!f)return 0;c=i.minRowLength(f),u("x0"),u("dx")}return p._length=c,c}},{"../../lib":803,"../../registry":931}],1246:[function(h,G,X){"use strict";var i=h("../scatter/attributes"),m=h("../../components/colorscale/attributes"),b=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,p=h("../../plots/template_attributes").hovertemplateAttrs,r=h("../../plots/template_attributes").texttemplateAttrs,u=h("../../plots/attributes"),c=h("../../constants/gl3d_dashes"),l=h("../../constants/gl3d_markers"),f=h("../../lib/extend").extendFlat,s=h("../../plot_api/edit_types").overrideAll,o=h("../../lib/sort_object_keys"),g=i.marker,y=g.line,v=f({width:i.line.width,dash:{valType:"enumerated",values:o(c),dflt:"solid"}},m("line")),_=G.exports=s({x:i.x,y:i.y,z:{valType:"data_array"},text:f({},i.text,{}),texttemplate:r({},{}),hovertext:f({},i.hovertext,{}),hovertemplate:p(),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),mode:f({},i.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:i.connectgaps,line:v,marker:f({symbol:{valType:"enumerated",values:o(l),dflt:"circle",arrayOk:!0},size:f({},g.size,{dflt:8}),sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode,opacity:f({},g.opacity,{arrayOk:!1}),colorbar:g.colorbar,line:f({width:f({},y.width,{arrayOk:!1})},m("marker.line"))},m("marker")),textposition:f({},i.textposition,{dflt:"top center"}),textfont:{color:i.textfont.color,size:i.textfont.size,family:f({},i.textfont.family,{arrayOk:!1})},hoverinfo:f({},u.hoverinfo)},"calc","nested");_.x.editType=_.y.editType=_.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":673,"../../constants/gl3d_dashes":776,"../../constants/gl3d_markers":777,"../../lib/extend":793,"../../lib/sort_object_keys":826,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1247:[function(h,G,X){"use strict";var i=h("../scatter/arrays_to_calcdata"),m=h("../scatter/colorscale_calc");G.exports=function(b,p){var r=[{x:!1,y:!1,trace:p,t:{}}];return i(r,p),m(b,p),r}},{"../scatter/arrays_to_calcdata":1217,"../scatter/colorscale_calc":1221}],1248:[function(h,G,X){"use strict";var i=h("../../registry");function m(b,p,r,u){if(!p||!p.visible)return null;for(var c=i.getComponentMethod("errorbars","makeComputeError")(p),l=new Array(b.length),f=0;f<b.length;f++){var s=c(+b[f],f);if("log"===u.type){var o=u.c2l(b[f]),d=b[f]-s[0],g=b[f]+s[1];if(l[f]=[(u.c2l(d,!0)-o)*r,(u.c2l(g,!0)-o)*r],d>0){var y=u.c2l(d);u._lowerLogErrorBound||(u._lowerLogErrorBound=y),u._lowerErrorBound=Math.min(u._lowerLogErrorBound,y)}}else l[f]=[-s[0]*r,s[1]*r]}return l}G.exports=function(b,p,r){var u=[m(b.x,b.error_x,p[0],r.xaxis),m(b.y,b.error_y,p[1],r.yaxis),m(b.z,b.error_z,p[2],r.zaxis)],c=function(g){for(var y=0;y<g.length;y++)if(g[y])return g[y].length;return 0}(u);if(0===c)return null;for(var l=new Array(c),f=0;f<c;f++){for(var s=[[0,0,0],[0,0,0]],o=0;o<3;o++)if(u[o])for(var d=0;d<2;d++)s[d][o]=u[o][f][d];l[f]=s}return l}},{"../../registry":931}],1249:[function(h,G,X){"use strict";var i=h("gl-line3d"),m=h("gl-scatter3d"),b=h("gl-error3d"),p=h("gl-mesh3d"),r=h("delaunay-triangulate"),u=h("../../lib"),c=h("../../lib/str2rgbarray"),l=h("../../lib/gl_format_color").formatColor,f=h("../scatter/make_bubble_size_func"),s=h("../../constants/gl3d_dashes"),o=h("../../constants/gl3d_markers"),d=h("../../plots/cartesian/axes"),g=h("../../components/fx/helpers").appendArrayPointValue,y=h("./calc_errors");function v(I,D){this.scene=I,this.uid=D,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var _=v.prototype;function w(I){return null==I?0:I.indexOf("left")>-1?-1:I.indexOf("right")>-1?1:0}function x(I){return null==I?0:I.indexOf("top")>-1?-1:I.indexOf("bottom")>-1?1:0}function E(I,D){return D(4*I)}function k(I){return o[I]}function C(I,D,R,S,N){var B=null;if(u.isArrayOrTypedArray(I)){B=[];for(var H=0;H<D;H++)B[H]=void 0===I[H]?S:R(I[H],N)}else B=R(I,u.identity);return B}function P(I){if(u.isArrayOrTypedArray(I)){var D=I[0];return u.isArrayOrTypedArray(D)&&(I=D),"rgb("+I.slice(0,3).map(function(R){return Math.round(255*R)})+")"}return null}function A(I){return u.isArrayOrTypedArray(I)?4===I.length&&"number"==typeof I[0]?P(I):I.map(P):null}_.handlePick=function(I){if(I.object&&(I.object===this.linePlot||I.object===this.delaunayMesh||I.object===this.textMarkers||I.object===this.scatterPlot)){var D=I.index=I.data.index;return I.object.highlight&&I.object.highlight(null),this.scatterPlot&&(I.object=this.scatterPlot,this.scatterPlot.highlight(I.data)),I.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[D]||0===this.textLabels[D])&&(I.textLabel=this.textLabels[D]):I.textLabel=this.textLabels),I.traceCoordinate=[this.data.x[D],this.data.y[D],this.data.z[D]],!0}},_.update=function(I){var D,R,S,N,B=this.scene.glplot.gl,H=s.solid;this.data=I;var Y=function(I,D){var R,S,N,B,H,Y,Q=[],ne=I.fullSceneLayout,ae=I.dataScale,te=ne.xaxis,K=ne.yaxis,q=ne.zaxis,re=D.marker,V=D.line,W=D.x||[],Z=D.y||[],oe=D.z||[],ie=W.length,ue=D.xcalendar,fe=D.ycalendar,he=D.zcalendar;for(H=0;H<ie;H++)R=te.d2l(W[H],0,ue)*ae[0],S=K.d2l(Z[H],0,fe)*ae[1],N=q.d2l(oe[H],0,he)*ae[2],Q[H]=[R,S,N];if(Array.isArray(D.text))Y=D.text;else if(void 0!==D.text)for(Y=new Array(ie),H=0;H<ie;H++)Y[H]=D.text;function de(Be,He){var Xe=ne[Be];return d.tickText(Xe,Xe.d2l(He),!0).text}var be=D.texttemplate;if(be){var pe=I.fullLayout._d3locale,Te=Array.isArray(be),ye=Te?Math.min(be.length,ie):ie,ke=Te?function(Be){return be[Be]}:function(){return be};for(Y=new Array(ye),H=0;H<ye;H++){var ze={x:W[H],y:Z[H],z:oe[H]},je={xLabel:de("xaxis",W[H]),yLabel:de("yaxis",Z[H]),zLabel:de("zaxis",oe[H])},Ie={};g(Ie,D,H);var Ce=D._meta||{};Y[H]=u.texttemplateString(ke(H),je,pe,Ie,ze,Ce)}}if(B={position:Q,mode:D.mode,text:Y},"line"in D&&(B.lineColor=l(V,1,ie),B.lineWidth=V.width,B.lineDashes=V.dash),"marker"in D){var _e=f(D);B.scatterColor=l(re,1,ie),B.scatterSize=C(re.size,ie,E,20,_e),B.scatterMarker=C(re.symbol,ie,k,"\u25cf"),B.scatterLineWidth=re.line.width,B.scatterLineColor=l(re.line,1,ie),B.scatterAngle=0}"textposition"in D&&(B.textOffset=function(Be){var He=[0,0];if(Array.isArray(Be))for(var Xe=0;Xe<Be.length;Xe++)He[Xe]=[0,0],Be[Xe]&&(He[Xe][0]=w(Be[Xe]),He[Xe][1]=x(Be[Xe]));else He[0]=w(Be),He[1]=x(Be);return He}(D.textposition),B.textColor=l(D.textfont,1,ie),B.textSize=C(D.textfont.size,ie,u.identity,12),B.textFont=D.textfont.family,B.textAngle=0);var we=["x","y","z"];for(B.project=[!1,!1,!1],B.projectScale=[1,1,1],B.projectOpacity=[1,1,1],H=0;H<3;++H){var Se=D.projection[we[H]];(B.project[H]=Se.show)&&(B.projectOpacity[H]=Se.opacity,B.projectScale[H]=Se.scale)}B.errorBounds=y(D,ae,ne);var Oe=function(Be){for(var He=[0,0,0],Xe=[[0,0,0],[0,0,0],[0,0,0]],nt=[1,1,1],et=0;et<3;et++){var qe=Be[et];qe&&!1!==qe.copy_zstyle&&!1!==Be[2].visible&&(qe=Be[2]),qe&&qe.visible&&(He[et]=qe.width/2,Xe[et]=c(qe.color),nt[et]=qe.thickness)}return{capSize:He,color:Xe,lineWidth:nt}}([D.error_x,D.error_y,D.error_z]);return B.errorColor=Oe.color,B.errorLineWidth=Oe.lineWidth,B.errorCapSize=Oe.capSize,B.delaunayAxis=D.surfaceaxis,B.delaunayColor=c(D.surfacecolor),B}(this.scene,I);"mode"in Y&&(this.mode=Y.mode),"lineDashes"in Y&&Y.lineDashes in s&&(H=s[Y.lineDashes]),this.color=A(Y.scatterColor)||A(Y.lineColor),this.dataPoints=Y.position,D={gl:this.scene.glplot.gl,position:Y.position,color:Y.lineColor,lineWidth:Y.lineWidth||1,dashes:H[0],dashScale:H[1],opacity:I.opacity,connectGaps:I.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(D):(this.linePlot=i(D),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var Q=I.opacity;if(I.marker&&I.marker.opacity&&(Q*=I.marker.opacity),R={gl:this.scene.glplot.gl,position:Y.position,color:Y.scatterColor,size:Y.scatterSize,glyph:Y.scatterMarker,opacity:Q,orthographic:!0,lineWidth:Y.scatterLineWidth,lineColor:Y.scatterLineColor,project:Y.project,projectScale:Y.projectScale,projectOpacity:Y.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(R):(this.scatterPlot=m(R),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),N={gl:this.scene.glplot.gl,position:Y.position,glyph:Y.text,color:Y.textColor,size:Y.textSize,angle:Y.textAngle,alignment:Y.textOffset,font:Y.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:I.opacity},this.textLabels=I.hovertext||I.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(N):(this.textMarkers=m(N),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),S={gl:this.scene.glplot.gl,position:Y.position,color:Y.errorColor,error:Y.errorBounds,lineWidth:Y.errorLineWidth,capSize:Y.errorCapSize,opacity:I.opacity},this.errorBars?Y.errorBounds?this.errorBars.update(S):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):Y.errorBounds&&(this.errorBars=b(S),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),Y.delaunayAxis>=0){var ne=function(ae,te,K){var q,re=(K+1)%3,V=(K+2)%3,W=[],Z=[];for(q=0;q<ae.length;++q){var oe=ae[q];!isNaN(oe[re])&&isFinite(oe[re])&&!isNaN(oe[V])&&isFinite(oe[V])&&(W.push([oe[re],oe[V]]),Z.push(q))}var ie=r(W);for(q=0;q<ie.length;++q)for(var ue=ie[q],fe=0;fe<ue.length;++fe)ue[fe]=Z[ue[fe]];return{positions:ae,cells:ie,meshColor:te}}(Y.position,Y.delaunayColor,Y.delaunayAxis);ne.opacity=I.opacity,this.delaunayMesh?this.delaunayMesh.update(ne):(ne.gl=B,this.delaunayMesh=p(ne),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},_.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},G.exports=function(I,D){var R=new v(I,D.uid);return R.update(D),R}},{"../../components/fx/helpers":702,"../../constants/gl3d_dashes":776,"../../constants/gl3d_markers":777,"../../lib":803,"../../lib/gl_format_color":799,"../../lib/str2rgbarray":828,"../../plots/cartesian/axes":854,"../scatter/make_bubble_size_func":1235,"./calc_errors":1248,"delaunay-triangulate":180,"gl-error3d":273,"gl-line3d":281,"gl-mesh3d":315,"gl-scatter3d":334}],1250:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../lib"),b=h("../scatter/subtypes"),p=h("../scatter/marker_defaults"),r=h("../scatter/line_defaults"),u=h("../scatter/text_defaults"),c=h("./attributes");G.exports=function(l,f,s,o){function d(E,k){return m.coerce(l,f,c,E,k)}if(E=l,k=f,L=o,P=0,A=(C=d)("x"),I=C("y"),D=C("z"),i.getComponentMethod("calendars","handleTraceDefaults")(E,k,["x","y","z"],L),A&&I&&D&&(P=Math.min(A.length,I.length,D.length),k._length=k._xlength=k._ylength=k._zlength=P),P){d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),d("zhoverformat"),d("mode"),b.hasLines(f)&&(d("connectgaps"),r(l,f,s,o,d)),b.hasMarkers(f)&&p(l,f,s,o,d,{noSelect:!0}),b.hasText(f)&&(d("texttemplate"),u(l,f,o,d,{noSelect:!0}));var g=(f.line||{}).color,y=(f.marker||{}).color;d("surfaceaxis")>=0&&d("surfacecolor",g||y);for(var v=["x","y","z"],_=0;_<3;++_){var w="projection."+v[_];d(w+".show")&&(d(w+".opacity"),d(w+".scale"))}var x=i.getComponentMethod("errorbars","supplyDefaults");x(l,f,g||y||s,{axis:"z"}),x(l,f,g||y||s,{axis:"y",inherit:"z"}),x(l,f,g||y||s,{axis:"x",inherit:"z"})}else f.visible=!1;var E,k,C,L,P,A,I,D}},{"../../lib":803,"../../registry":931,"../scatter/line_defaults":1231,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1246}],1251:[function(h,G,X){"use strict";G.exports={plot:h("./convert"),attributes:h("./attributes"),markerSymbols:h("../../constants/gl3d_markers"),supplyDefaults:h("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:h("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:h("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":777,"../../plots/gl3d":896,"./attributes":1246,"./calc":1247,"./convert":1249,"./defaults":1250}],1252:[function(h,G,X){"use strict";var i=h("../scatter/attributes"),m=h("../../plots/attributes"),b=h("../../plots/template_attributes").hovertemplateAttrs,p=h("../../plots/template_attributes").texttemplateAttrs,r=h("../../components/colorscale/attributes"),u=h("../../lib/extend").extendFlat,c=i.marker,l=i.line,f=c.line;G.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:u({},i.mode,{dflt:"markers"}),text:u({},i.text,{}),texttemplate:p({editType:"plot"},{keys:["a","b","text"]}),hovertext:u({},i.hovertext,{}),line:{color:l.color,width:l.width,dash:l.dash,shape:u({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:i.connectgaps,fill:u({},i.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:i.fillcolor,marker:u({symbol:c.symbol,opacity:c.opacity,maxdisplayed:c.maxdisplayed,size:c.size,sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,line:u({width:f.width,editType:"calc"},r("marker.line")),gradient:c.gradient,editType:"calc"},r("marker")),textfont:i.textfont,textposition:i.textposition,selected:i.selected,unselected:i.unselected,hoverinfo:u({},m.hoverinfo,{flags:["a","b","text","name"]}),hoveron:i.hoveron,hovertemplate:b()}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1253:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../scatter/colorscale_calc"),b=h("../scatter/arrays_to_calcdata"),p=h("../scatter/calc_selection"),r=h("../scatter/calc").calcMarkerSize,u=h("../carpet/lookup_carpetid");G.exports=function(c,l){var f=l._carpetTrace=u(c,l);if(f&&f.visible&&"legendonly"!==f.visible){var s;l.xaxis=f.xaxis,l.yaxis=f.yaxis;var o,d,g=l._length,y=new Array(g),v=!1;for(s=0;s<g;s++)if(d=l.b[s],i(o=l.a[s])&&i(d)){var _=f.ab2xy(+o,+d,!0),w=f.isVisible(+o,+d);w||(v=!0),y[s]={x:_[0],y:_[1],a:o,b:d,vis:w}}else y[s]={x:!1,y:!1};return l._needsCull=v,y[0].carpet=f,y[0].trace=l,r(l,g),m(c,l),b(y,l),p(y,l),y}}},{"../carpet/lookup_carpetid":1001,"../scatter/arrays_to_calcdata":1217,"../scatter/calc":1219,"../scatter/calc_selection":1220,"../scatter/colorscale_calc":1221,"fast-isnumeric":249}],1254:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../scatter/constants"),b=h("../scatter/subtypes"),p=h("../scatter/marker_defaults"),r=h("../scatter/line_defaults"),u=h("../scatter/line_shape_defaults"),c=h("../scatter/text_defaults"),l=h("../scatter/fillcolor_defaults"),f=h("./attributes");G.exports=function(s,o,d,g){function y(E,k){return i.coerce(s,o,f,E,k)}y("carpet"),o.xaxis="x",o.yaxis="y";var v=y("a"),_=y("b"),w=Math.min(v.length,_.length);if(w){o._length=w,y("text"),y("texttemplate"),y("hovertext"),y("mode",w<m.PTS_LINESONLY?"lines+markers":"lines"),b.hasLines(o)&&(r(s,o,d,g,y),u(s,o,y),y("connectgaps")),b.hasMarkers(o)&&p(s,o,d,g,y,{gradient:!0}),b.hasText(o)&&c(s,o,g,y);var x=[];(b.hasMarkers(o)||b.hasText(o))&&(y("marker.maxdisplayed"),x.push("points")),y("fill"),"none"!==o.fill&&(l(s,o,d,y),b.hasLines(o)||u(s,o,y)),"tonext"!==o.fill&&"toself"!==o.fill||x.push("fills"),"fills"!==y("hoveron",x.join("+")||"points")&&y("hovertemplate"),i.coerceSelectionMarkerOpacity(o,y)}else o.visible=!1}},{"../../lib":803,"../scatter/constants":1222,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/line_shape_defaults":1233,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1252}],1255:[function(h,G,X){"use strict";G.exports=function(i,m,b,p,r){var u=p[r];return i.a=u.a,i.b=u.b,i.y=u.y,i}},{}],1256:[function(h,G,X){"use strict";G.exports=function(i,m){var b={},p=m._carpet,r=p.ab2ij([i.a,i.b]),u=Math.floor(r[0]),c=r[0]-u,l=Math.floor(r[1]),s=p.evalxy([],u,l,c,r[1]-l);return b.yLabel=s[1].toFixed(3),b}},{}],1257:[function(h,G,X){"use strict";var i=h("../scatter/hover"),m=h("../../lib").fillText;G.exports=function(b,p,r,u){var c=i(b,p,r,u);if(c&&!1!==c[0].index){var l=c[0];if(void 0===l.index){var s=b.xa._length,o=s*(1-l.y0/b.ya._length)/2,d=s-o;return l.x0=Math.max(Math.min(l.x0,d),o),l.x1=Math.max(Math.min(l.x1,d),o),c}var g=l.cd[l.index];l.a=g.a,l.b=g.b,l.xLabelVal=void 0,l.yLabelVal=void 0;var y=l.trace,v=y._carpet,_=y._module.formatLabels(g,y);l.yLabel=_.yLabel,delete l.text;var w=[];if(!y.hovertemplate){var x=(g.hi||y.hoverinfo).split("+");-1!==x.indexOf("all")&&(x=["a","b","text"]),-1!==x.indexOf("a")&&E(v.aaxis,g.a),-1!==x.indexOf("b")&&E(v.baxis,g.b),w.push("y: "+l.yLabel),-1!==x.indexOf("text")&&m(g,y,w),l.extraText=w.join("<br>")}return c}function E(k,C){var L;L=k.labelprefix&&k.labelprefix.length>0?k.labelprefix.replace(/ = $/,""):k._hovertitle,w.push(L+": "+C.toFixed(3)+k.labelsuffix)}}},{"../../lib":803,"../scatter/hover":1229}],1258:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),colorbar:h("../scatter/marker_colorbar"),formatLabels:h("./format_labels"),calc:h("./calc"),plot:h("./plot"),style:h("../scatter/style").style,styleOnSelect:h("../scatter/style").styleOnSelect,hoverPoints:h("./hover"),selectPoints:h("../scatter/select"),eventData:h("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:h("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":868,"../scatter/marker_colorbar":1236,"../scatter/select":1240,"../scatter/style":1242,"./attributes":1252,"./calc":1253,"./defaults":1254,"./event_data":1255,"./format_labels":1256,"./hover":1257,"./plot":1259}],1259:[function(h,G,X){"use strict";var i=h("../scatter/plot"),m=h("../../plots/cartesian/axes"),b=h("../../components/drawing");G.exports=function(p,r,u,c){var l,s,o=u[0][0].carpet,d={xaxis:m.getFromId(p,o.xaxis||"x"),yaxis:m.getFromId(p,o.yaxis||"y"),plot:r.plot};for(i(p,d,u,c),l=0;l<u.length;l++)s=c.selectAll("g.trace"+u[l][0].trace.uid+" .js-line"),b.setClipUrl(s,u[l][0].carpet._clipPathId,p)}},{"../../components/drawing":688,"../../plots/cartesian/axes":854,"../scatter/plot":1239}],1260:[function(h,G,X){"use strict";var i=h("../../plots/template_attributes").hovertemplateAttrs,m=h("../../plots/template_attributes").texttemplateAttrs,b=h("../scatter/attributes"),p=h("../../plots/attributes"),r=h("../../components/colorscale/attributes"),u=h("../../components/drawing/attributes").dash,c=h("../../lib/extend").extendFlat,l=h("../../plot_api/edit_types").overrideAll,f=b.marker,s=b.line,o=f.line;G.exports=l({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:c({},b.mode,{dflt:"markers"}),text:c({},b.text,{}),texttemplate:m({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:c({},b.hovertext,{}),textfont:b.textfont,textposition:b.textposition,line:{color:s.color,width:s.width,dash:u},connectgaps:b.connectgaps,marker:c({symbol:f.symbol,opacity:f.opacity,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,colorbar:f.colorbar,line:c({width:o.width},r("marker.line")),gradient:f.gradient},r("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:b.fillcolor,selected:b.selected,unselected:b.unselected,hoverinfo:c({},p.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:i()},"calc","nested")},{"../../components/colorscale/attributes":673,"../../components/drawing/attributes":687,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1261:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../constants/numerical").BADNUM,b=h("../scatter/colorscale_calc"),p=h("../scatter/arrays_to_calcdata"),r=h("../scatter/calc_selection"),u=h("../../lib")._;function c(l){return l&&"string"==typeof l}G.exports=function(l,f){var s,o=Array.isArray(f.locations),d=o?f.locations.length:f._length,g=new Array(d);s=f.geojson?function(E){return c(E)||i(E)}:c;for(var y=0;y<d;y++){var v=g[y]={};if(o){var _=f.locations[y];v.loc=s(_)?_:null}else{var w=f.lon[y],x=f.lat[y];v.lonlat=i(w)&&i(x)?[+w,+x]:[m,m]}}return p(g,f),b(l,f),r(g,f),d&&(g[0].t={labels:{lat:u(l,"lat:")+" ",lon:u(l,"lon:")+" "}}),g}},{"../../constants/numerical":779,"../../lib":803,"../scatter/arrays_to_calcdata":1217,"../scatter/calc_selection":1220,"../scatter/colorscale_calc":1221,"fast-isnumeric":249}],1262:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../scatter/subtypes"),b=h("../scatter/marker_defaults"),p=h("../scatter/line_defaults"),r=h("../scatter/text_defaults"),u=h("../scatter/fillcolor_defaults"),c=h("./attributes");G.exports=function(l,f,s,o){function d(E,k){return i.coerce(l,f,c,E,k)}var g,y=d("locations");if(y&&y.length){var v,_=d("geojson");("string"==typeof _&&""!==_||i.isPlainObject(_))&&(v="geojson-id"),"geojson-id"===d("locationmode",v)&&d("featureidkey"),g=y.length}else{var w=d("lon")||[],x=d("lat")||[];g=Math.min(w.length,x.length)}g?(f._length=g,d("text"),d("hovertext"),d("hovertemplate"),d("mode"),m.hasLines(f)&&(p(l,f,s,o,d),d("connectgaps")),m.hasMarkers(f)&&b(l,f,s,o,d,{gradient:!0}),m.hasText(f)&&(d("texttemplate"),r(l,f,o,d)),d("fill"),"none"!==f.fill&&u(l,f,s,d),i.coerceSelectionMarkerOpacity(f,d)):f.visible=!1}},{"../../lib":803,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1260}],1263:[function(h,G,X){"use strict";G.exports=function(i,m,b,p,r){i.lon=m.lon,i.lat=m.lat,i.location=m.loc?m.loc:null;var u=p[r];return u.fIn&&u.fIn.properties&&(i.properties=u.fIn.properties),i}},{}],1264:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes");G.exports=function(m,b,p){var r={},u=p[b.geo]._subplot.mockAxis,c=m.lonlat;return r.lonLabel=i.tickText(u,u.c2l(c[0]),!0).text,r.latLabel=i.tickText(u,u.c2l(c[1]),!0).text,r}},{"../../plots/cartesian/axes":854}],1265:[function(h,G,X){"use strict";var i=h("../../components/fx"),m=h("../../constants/numerical").BADNUM,b=h("../scatter/get_trace_color"),p=h("../../lib").fillText,r=h("./attributes");G.exports=function(u,c,l){var f=u.cd,s=f[0].trace,o=u.xa,d=u.ya,g=u.subplot,y=g.projection.isLonLatOverEdges,v=g.project;if(i.getClosest(f,function(L){var P=L.lonlat;if(P[0]===m||y(P))return 1/0;var A=v(P),I=v([c,l]),D=Math.abs(A[0]-I[0]),R=Math.abs(A[1]-I[1]),S=Math.max(3,L.mrc||0);return Math.max(Math.sqrt(D*D+R*R)-S,1-3/S)},u),!1!==u.index){var _=f[u.index],w=_.lonlat,x=[o.c2p(w),d.c2p(w)],E=_.mrc||1;u.x0=x[0]-E,u.x1=x[0]+E,u.y0=x[1]-E,u.y1=x[1]+E,u.loc=_.loc,u.lon=w[0],u.lat=w[1];var k={};k[s.geo]={_subplot:g};var C=s._module.formatLabels(_,s,k);return u.lonLabel=C.lonLabel,u.latLabel=C.latLabel,u.color=b(s,_),u.extraText=function(L,P,A,I){if(!L.hovertemplate){var D=P.hi||L.hoverinfo,R="all"===D?r.hoverinfo.flags:D.split("+"),S=-1!==R.indexOf("location")&&Array.isArray(L.locations),N=-1!==R.indexOf("lon"),B=-1!==R.indexOf("lat"),H=-1!==R.indexOf("text"),Y=[];return S?Y.push(P.loc):N&&B?Y.push("("+Q(A.latLabel)+", "+Q(A.lonLabel)+")"):N?Y.push(I.lon+Q(A.lonLabel)):B&&Y.push(I.lat+Q(A.latLabel)),H&&p(P,L,Y),Y.join("<br>")}function Q(ne){return ne+"\xb0"}}(s,_,u,f[0].t.labels),u.hovertemplate=s.hovertemplate,[u]}}},{"../../components/fx":706,"../../constants/numerical":779,"../../lib":803,"../scatter/get_trace_color":1228,"./attributes":1260}],1266:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),colorbar:h("../scatter/marker_colorbar"),formatLabels:h("./format_labels"),calc:h("./calc"),calcGeoJSON:h("./plot").calcGeoJSON,plot:h("./plot").plot,style:h("./style"),styleOnSelect:h("../scatter/style").styleOnSelect,hoverPoints:h("./hover"),eventData:h("./event_data"),selectPoints:h("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:h("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":887,"../scatter/marker_colorbar":1236,"../scatter/style":1242,"./attributes":1260,"./calc":1261,"./defaults":1262,"./event_data":1263,"./format_labels":1264,"./hover":1265,"./plot":1267,"./select":1268,"./style":1269}],1267:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=h("../../lib/topojson_utils").getTopojsonFeatures,p=h("../../lib/geojson_utils"),r=h("../../lib/geo_location_utils"),u=h("../../plots/cartesian/autorange").findExtremes,c=h("../../constants/numerical").BADNUM,l=h("../scatter/calc").calcMarkerSize,f=h("../scatter/subtypes"),s=h("./style");G.exports={calcGeoJSON:function(o,d){var g,y,v=o[0].trace,_=d[v.geo],w=_._subplot,x=v._length;if(Array.isArray(v.locations)){var E=v.locationmode,k="geojson-id"===E?r.extractTraceFeature(o):b(v,w.topojson);for(g=0;g<x;g++){y=o[g];var C="geojson-id"===E?y.fOut:r.locationToFeature(E,y.loc,k);y.lonlat=C?C.properties.ct:[c,c]}}var L,P,A={padded:!0};if("geojson"===_.fitbounds&&"geojson-id"===v.locationmode){var I=r.computeBbox(r.getTraceGeojson(v));L=[I[0],I[2]],P=[I[1],I[3]]}else{for(L=new Array(x),P=new Array(x),g=0;g<x;g++)L[g]=(y=o[g]).lonlat[0],P[g]=y.lonlat[1];A.ppad=l(v,x)}v._extremes.lon=u(_.lonaxis._ax,L,A),v._extremes.lat=u(_.lataxis._ax,P,A)},plot:function(o,d,g){var y=d.layers.frontplot.select(".scatterlayer"),v=m.makeTraceGroups(y,g,"trace scattergeo");function _(w,x){w.lonlat[0]===c&&i.select(x).remove()}v.selectAll("*").remove(),v.each(function(w){var x=i.select(this),E=w[0].trace;if(f.hasLines(E)||"none"!==E.fill){var k=p.calcTraceToLineCoords(w),C="none"!==E.fill?p.makePolygon(k):p.makeLine(k);x.selectAll("path.js-line").data([{geojson:C,trace:E}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}f.hasMarkers(E)&&x.selectAll("path.point").data(m.identity).enter().append("path").classed("point",!0).each(function(L){_(L,this)}),f.hasText(E)&&x.selectAll("g").data(m.identity).enter().append("g").append("text").each(function(L){_(L,this)}),s(o,w)})}}},{"../../constants/numerical":779,"../../lib":803,"../../lib/geo_location_utils":796,"../../lib/geojson_utils":797,"../../lib/topojson_utils":832,"../../plots/cartesian/autorange":853,"../scatter/calc":1219,"../scatter/subtypes":1243,"./style":1269,"@plotly/d3":58}],1268:[function(h,G,X){"use strict";var i=h("../scatter/subtypes"),m=h("../../constants/numerical").BADNUM;G.exports=function(b,p){var r,u,c,l,f,s=b.cd,o=b.xaxis,d=b.yaxis,g=[],y=s[0].trace;if(!i.hasMarkers(y)&&!i.hasText(y))return[];if(!1===p)for(f=0;f<s.length;f++)s[f].selected=0;else for(f=0;f<s.length;f++)(u=(r=s[f]).lonlat)[0]!==m&&(c=o.c2p(u),l=d.c2p(u),p.contains([c,l],null,f,b)?(g.push({pointNumber:f,lon:u[0],lat:u[1]}),r.selected=1):r.selected=0);return g}},{"../../constants/numerical":779,"../scatter/subtypes":1243}],1269:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/drawing"),b=h("../../components/color"),p=h("../scatter/style"),r=p.stylePoints,u=p.styleText;G.exports=function(c,l){var f,s,o,d;l&&(f=c,o=(s=l)[0].trace,(d=s[0].node3).style("opacity",s[0].trace.opacity),r(d,o,f),u(d,o,f),d.selectAll("path.js-line").style("fill","none").each(function(g){var y=i.select(this),v=g.trace,_=v.line||{};y.call(b.stroke,_.color).call(m.dashLine,_.dash||"",_.width||0),"none"!==v.fill&&y.call(b.fill,v.fillcolor)}))}},{"../../components/color":666,"../../components/drawing":688,"../scatter/style":1242,"@plotly/d3":58}],1270:[function(h,G,X){"use strict";var i=h("../../plots/attributes"),m=h("../scatter/attributes"),b=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,p=h("../../components/colorscale/attributes"),r=h("../../lib/sort_object_keys"),u=h("../../lib/extend").extendFlat,c=h("../../plot_api/edit_types").overrideAll,l=h("./constants").DASHES,f=m.line,s=m.marker,o=s.line,d=G.exports=c({x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),text:m.text,hovertext:m.hovertext,textposition:m.textposition,textfont:m.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:f.color,width:f.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:r(l),dflt:"solid"}},marker:u({},p("marker"),{symbol:s.symbol,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,opacity:s.opacity,colorbar:s.colorbar,line:u({},p("marker.line"),{width:o.width})}),connectgaps:m.connectgaps,fill:u({},m.fill,{dflt:"none"}),fillcolor:m.fillcolor,selected:{marker:m.selected.marker,textfont:m.selected.textfont},unselected:{marker:m.unselected.marker,textfont:m.unselected.textfont},opacity:i.opacity},"calc","nested");d.x.editType=d.y.editType=d.x0.editType=d.y0.editType="calc+clearAxisTypes",d.hovertemplate=m.hovertemplate,d.texttemplate=m.texttemplate},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../lib/sort_object_keys":826,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../scatter/attributes":1218,"./constants":1272}],1271:[function(h,G,X){"use strict";var i=h("@plotly/point-cluster"),m=h("../../lib"),b=h("../../plots/cartesian/axis_ids"),p=h("../../plots/cartesian/autorange").findExtremes,r=h("../../plots/cartesian/align_period"),u=h("../scatter/calc"),c=u.calcMarkerSize,l=u.calcAxisExpansion,f=u.setFirstScatter,s=h("../scatter/colorscale_calc"),o=h("./convert"),d=h("./scene_update"),g=h("../../constants/numerical").BADNUM,y=h("./constants").TOO_MANY_POINTS;function v(_,w,x){var E=_._extremes[w._id],k=p(w,x._bnds,{padded:!0});E.min=E.min.concat(k.min),E.max=E.max.concat(k.max)}G.exports=function(_,w){var x,E=_._fullLayout,k=b.getFromId(_,w.xaxis),C=b.getFromId(_,w.yaxis),L=E._plots[w.xaxis+w.yaxis],P=w._length,A=P>=y,I=2*P,D={},R=k.makeCalcdata(w,"x"),S=C.makeCalcdata(w,"y"),N=r(w,k,"x",R),B=r(w,C,"y",S),H=N.vals,Y=B.vals;w._x=H,w._y=Y,w.xperiodalignment&&(w._origX=R,w._xStarts=N.starts,w._xEnds=N.ends),w.yperiodalignment&&(w._origY=S,w._yStarts=B.starts,w._yEnds=B.ends);var Q=new Array(I),ne=new Array(P);for(x=0;x<P;x++)Q[2*x]=H[x]===g?NaN:H[x],Q[2*x+1]=Y[x]===g?NaN:Y[x],ne[x]=x;if("log"===k.type)for(x=0;x<I;x+=2)Q[x]=k.c2l(Q[x]);if("log"===C.type)for(x=1;x<I;x+=2)Q[x]=C.c2l(Q[x]);A&&"log"!==k.type&&"log"!==C.type?D.tree=i(Q):D.ids=ne,s(_,w);var ae,te=function(q,re,V,W,Z,oe){var ie=o.style(q,V);if(ie.marker&&(ie.marker.positions=W),ie.line&&W.length>1&&m.extendFlat(ie.line,o.linePositions(q,V,W)),ie.errorX||ie.errorY){var ue=o.errorBarPositions(q,V,W,Z,oe);ie.errorX&&m.extendFlat(ie.errorX,ue.x),ie.errorY&&m.extendFlat(ie.errorY,ue.y)}return ie.text&&(m.extendFlat(ie.text,{positions:W},o.textPosition(q,V,ie.text,ie.marker)),m.extendFlat(ie.textSel,{positions:W},o.textPosition(q,V,ie.text,ie.markerSel)),m.extendFlat(ie.textUnsel,{positions:W},o.textPosition(q,V,ie.text,ie.markerUnsel))),ie}(_,0,w,Q,H,Y),K=d(_,L);return f(E,w),A?te.marker&&(ae=te.marker.sizeAvg||Math.max(te.marker.size,3)):ae=c(w,P),l(_,w,k,C,H,Y,ae),te.errorX&&v(w,k,te.errorX),te.errorY&&v(w,C,te.errorY),te.fill&&!K.fill2d&&(K.fill2d=!0),te.marker&&!K.scatter2d&&(K.scatter2d=!0),te.line&&!K.line2d&&(K.line2d=!0),!te.errorX&&!te.errorY||K.error2d||(K.error2d=!0),te.text&&!K.glText&&(K.glText=!0),te.marker&&(te.marker.snap=P),K.lineOptions.push(te.line),K.errorXOptions.push(te.errorX),K.errorYOptions.push(te.errorY),K.fillOptions.push(te.fill),K.markerOptions.push(te.marker),K.markerSelectedOptions.push(te.markerSel),K.markerUnselectedOptions.push(te.markerUnsel),K.textOptions.push(te.text),K.textSelectedOptions.push(te.textSel),K.textUnselectedOptions.push(te.textUnsel),K.selectBatch.push([]),K.unselectBatch.push([]),D._scene=K,D.index=K.count,D.x=H,D.y=Y,D.positions=Q,K.count++,[{x:!1,y:!1,t:D,trace:w}]}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/autorange":853,"../../plots/cartesian/axis_ids":858,"../scatter/calc":1219,"../scatter/colorscale_calc":1221,"./constants":1272,"./convert":1273,"./scene_update":1281,"@plotly/point-cluster":59}],1272:[function(h,G,X){"use strict";G.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],1273:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("svg-path-sdf"),b=h("color-normalize"),p=h("../../registry"),r=h("../../lib"),u=h("../../components/drawing"),c=h("../../plots/cartesian/axis_ids"),l=h("../../lib/gl_format_color").formatColor,f=h("../scatter/subtypes"),s=h("../scatter/make_bubble_size_func"),o=h("./helpers"),d=h("./constants"),g=h("../../constants/interactions").DESELECTDIM,y={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},v=h("../../components/fx/helpers").appendArrayPointValue;function _(R,S){var N,B=R._fullLayout,H=S._length,Y=S.textfont,Q=S.textposition,ne=Array.isArray(Q)?Q:[Q],ae=Y.color,te=Y.size,K=Y.family,q={},re=R._context.plotGlPixelRatio,V=S.texttemplate;if(V){q.text=[];var W=B._d3locale,Z=Array.isArray(V),oe=Z?Math.min(V.length,H):H,ie=Z?function(Te){return V[Te]}:function(){return V};for(N=0;N<oe;N++){var ue={i:N},fe=S._module.formatLabels(ue,S,B),he={};v(he,S,N);var de=S._meta||{};q.text.push(r.texttemplateString(ie(N),fe,W,he,ue,de))}}else q.text=Array.isArray(S.text)&&S.text.length<H?S.text.slice():S.text;if(Array.isArray(q.text))for(N=q.text.length;N<H;N++)q.text[N]="";for(q.opacity=S.opacity,q.font={},q.align=[],q.baseline=[],N=0;N<ne.length;N++){var be=ne[N].split(/\s+/);switch(be[1]){case"left":q.align.push("right");break;case"right":q.align.push("left");break;default:q.align.push(be[1])}switch(be[0]){case"top":q.baseline.push("bottom");break;case"bottom":q.baseline.push("top");break;default:q.baseline.push(be[0])}}if(Array.isArray(ae))for(q.color=new Array(H),N=0;N<H;N++)q.color[N]=ae[N];else q.color=ae;if(r.isArrayOrTypedArray(te)||Array.isArray(K))for(q.font=new Array(H),N=0;N<H;N++){var pe=q.font[N]={};pe.size=(r.isTypedArray(te)?te[N]:Array.isArray(te)?i(te[N])?te[N]:0:te)*re,pe.family=Array.isArray(K)?K[N]:K}else q.font={size:te*re,family:K};return q}function w(R){var S,N,B=R._length,H=R.marker,Y={},Q=r.isArrayOrTypedArray(H.symbol),ne=r.isArrayOrTypedArray(H.color),ae=r.isArrayOrTypedArray(H.line.color),te=r.isArrayOrTypedArray(H.opacity),K=r.isArrayOrTypedArray(H.size),q=r.isArrayOrTypedArray(H.line.width);if(Q||(N=o.isOpenSymbol(H.symbol)),Q||ne||ae||te){Y.colors=new Array(B),Y.borderColors=new Array(B);var re=l(H,H.opacity,B),V=l(H.line,H.opacity,B);if(!Array.isArray(V[0])){var W=V;for(V=Array(B),S=0;S<B;S++)V[S]=W}if(!Array.isArray(re[0])){var Z=re;for(re=Array(B),S=0;S<B;S++)re[S]=Z}for(Y.colors=re,Y.borderColors=V,S=0;S<B;S++)Q&&(N=o.isOpenSymbol(H.symbol[S])),N&&(V[S]=re[S].slice(),re[S]=re[S].slice(),re[S][3]=0);Y.opacity=R.opacity}else N?(Y.color=b(H.color,"uint8"),Y.color[3]=0,Y.borderColor=b(H.color,"uint8")):(Y.color=b(H.color,"uint8"),Y.borderColor=b(H.line.color,"uint8")),Y.opacity=R.opacity*H.opacity;if(Q)for(Y.markers=new Array(B),S=0;S<B;S++)Y.markers[S]=D(H.symbol[S]);else Y.marker=D(H.symbol);var ie,ue=s(R,1);if(K||q){var fe,he=Y.sizes=new Array(B),de=Y.borderSizes=new Array(B),be=0;if(K){for(S=0;S<B;S++)he[S]=ue(H.size[S]),be+=he[S];fe=be/B}else for(ie=ue(H.size),S=0;S<B;S++)he[S]=ie;if(q)for(S=0;S<B;S++)de[S]=H.line.width[S];else for(ie=H.line.width,S=0;S<B;S++)de[S]=ie;Y.sizeAvg=fe}else Y.size=ue(H&&H.size||10),Y.borderSizes=ue(H.line.width);return Y}function x(R,S){var B={};return S&&(S.marker&&S.marker.symbol?B=w(r.extendFlat({},R.marker,S.marker)):S.marker&&(S.marker.size&&(B.size=S.marker.size),S.marker.color&&(B.colors=S.marker.color),void 0!==S.marker.opacity&&(B.opacity=S.marker.opacity))),B}function E(R,S,N){var B={};if(!N)return B;if(N.textfont){var H={opacity:1,text:S.text,texttemplate:S.texttemplate,textposition:S.textposition,textfont:r.extendFlat({},S.textfont)};N.textfont&&r.extendFlat(H.textfont,N.textfont),B=_(R,H)}return B}function k(R,S,N){var B={capSize:2*S.width*N,lineWidth:S.thickness*N,color:S.color};return S.copy_ystyle&&(B=R.error_y),B}var C=d.SYMBOL_SDF_SIZE,L=d.SYMBOL_SIZE,P=d.SYMBOL_STROKE,A={},I=u.symbolFuncs[0](.05*L);function D(R){if("circle"===R)return null;var S,N,B=u.symbolNumber(R),H=u.symbolFuncs[B%100],Y=!!u.symbolNoDot[B%100],Q=!!u.symbolNoFill[B%100],ne=o.isDotSymbol(R);return A[R]?A[R]:(S=ne&&!Y?H(1.1*L)+I:H(L),N=m(S,{w:C,h:C,viewBox:[-L,-L,L,L],stroke:Q?P:-P}),A[R]=N,N||null)}G.exports={style:function(R,S){var N,B={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},H=R._context.plotGlPixelRatio;if(!0!==S.visible)return B;if(f.hasText(S)&&(B.text=_(R,S),B.textSel=E(R,S,S.selected),B.textUnsel=E(R,S,S.unselected)),f.hasMarkers(S)&&(B.marker=w(S),B.markerSel=x(S,S.selected),B.markerUnsel=x(S,S.unselected),!S.unselected&&r.isArrayOrTypedArray(S.marker.opacity))){var Y=S.marker.opacity;for(B.markerUnsel.opacity=new Array(Y.length),N=0;N<Y.length;N++)B.markerUnsel.opacity[N]=g*Y[N]}if(f.hasLines(S)){B.line={overlay:!0,thickness:S.line.width*H,color:S.line.color,opacity:S.opacity};var Q=(d.DASHES[S.line.dash]||[1]).slice();for(N=0;N<Q.length;++N)Q[N]*=S.line.width*H;B.line.dashes=Q}return S.error_x&&S.error_x.visible&&(B.errorX=k(S,S.error_x,H)),S.error_y&&S.error_y.visible&&(B.errorY=k(S,S.error_y,H)),S.fill&&"none"!==S.fill&&(B.fill={closed:!0,fill:S.fillcolor,thickness:0}),B},markerStyle:w,markerSelection:x,linePositions:function(R,S,N){var B,H,Y=N.length,Q=Y/2;if(f.hasLines(S)&&Q)if("hv"===S.line.shape){for(B=[],H=0;H<Q-1;H++)isNaN(N[2*H])||isNaN(N[2*H+1])?B.push(NaN,NaN,NaN,NaN):(B.push(N[2*H],N[2*H+1]),isNaN(N[2*H+2])||isNaN(N[2*H+3])?B.push(NaN,NaN):B.push(N[2*H+2],N[2*H+1]));B.push(N[Y-2],N[Y-1])}else if("hvh"===S.line.shape){for(B=[],H=0;H<Q-1;H++)if(isNaN(N[2*H])||isNaN(N[2*H+1])||isNaN(N[2*H+2])||isNaN(N[2*H+3]))isNaN(N[2*H])||isNaN(N[2*H+1])?B.push(NaN,NaN):B.push(N[2*H],N[2*H+1]),B.push(NaN,NaN);else{var ne=(N[2*H]+N[2*H+2])/2;B.push(N[2*H],N[2*H+1],ne,N[2*H+1],ne,N[2*H+3])}B.push(N[Y-2],N[Y-1])}else if("vhv"===S.line.shape){for(B=[],H=0;H<Q-1;H++)if(isNaN(N[2*H])||isNaN(N[2*H+1])||isNaN(N[2*H+2])||isNaN(N[2*H+3]))isNaN(N[2*H])||isNaN(N[2*H+1])?B.push(NaN,NaN):B.push(N[2*H],N[2*H+1]),B.push(NaN,NaN);else{var ae=(N[2*H+1]+N[2*H+3])/2;B.push(N[2*H],N[2*H+1],N[2*H],ae,N[2*H+2],ae)}B.push(N[Y-2],N[Y-1])}else if("vh"===S.line.shape){for(B=[],H=0;H<Q-1;H++)isNaN(N[2*H])||isNaN(N[2*H+1])?B.push(NaN,NaN,NaN,NaN):(B.push(N[2*H],N[2*H+1]),isNaN(N[2*H+2])||isNaN(N[2*H+3])?B.push(NaN,NaN):B.push(N[2*H],N[2*H+3]));B.push(N[Y-2],N[Y-1])}else B=N;var te=!1;for(H=0;H<B.length;H++)if(isNaN(B[H])){te=!0;break}var K=te||B.length>d.TOO_MANY_POINTS||f.hasMarkers(S)?"rect":"round";if(te&&S.connectgaps){var q=B[0],re=B[1];for(H=0;H<B.length;H+=2)isNaN(B[H])||isNaN(B[H+1])?(B[H]=q,B[H+1]=re):(q=B[H],re=B[H+1])}return{join:K,positions:B}},errorBarPositions:function(R,S,N,B,H){var Y=p.getComponentMethod("errorbars","makeComputeError"),Q=c.getFromId(R,S.xaxis),ne=c.getFromId(R,S.yaxis),ae=N.length/2,te={};function K(q,re){var V=re._id.charAt(0),W=S["error_"+V];if(W&&W.visible&&("linear"===re.type||"log"===re.type)){for(var Z=Y(W),oe={x:0,y:1}[V],ie={x:[0,1,2,3],y:[2,3,0,1]}[V],ue=new Float64Array(4*ae),fe=1/0,he=-1/0,de=0,be=0;de<ae;de++,be+=4){var pe=q[de];if(i(pe)){var Te=N[2*de+oe],ye=Z(pe,de),ke=ye[0],ze=ye[1];if(i(ke)&&i(ze)){var Ie=pe+ze;ue[be+ie[0]]=Te-re.c2l(pe-ke),ue[be+ie[1]]=re.c2l(Ie)-Te,ue[be+ie[2]]=0,ue[be+ie[3]]=0,fe=Math.min(fe,pe-ke),he=Math.max(he,pe+ze)}}}te[V]={positions:N,errors:ue,_bnds:[fe,he]}}}return K(B,Q),K(H,ne),te},textPosition:function(R,S,N,B){var H,Y=S._length,Q={};if(f.hasMarkers(S)){var ne=N.font,ae=N.align,te=N.baseline;for(Q.offset=new Array(Y),H=0;H<Y;H++){var K=B.sizes?B.sizes[H]:B.size,q=Array.isArray(ne)?ne[H].size:ne.size,re=Array.isArray(ae)?ae.length>1?ae[H]:ae[0]:ae,V=Array.isArray(te)?te.length>1?te[H]:te[0]:te,Z=y[V],oe=K?K/.8+1:0;Q.offset[H]=[y[re]*oe/q,(-Z*oe-.5*Z)/q]}}return Q}}},{"../../components/drawing":688,"../../components/fx/helpers":702,"../../constants/interactions":778,"../../lib":803,"../../lib/gl_format_color":799,"../../plots/cartesian/axis_ids":858,"../../registry":931,"../scatter/make_bubble_size_func":1235,"../scatter/subtypes":1243,"./constants":1272,"./helpers":1277,"color-normalize":131,"fast-isnumeric":249,"svg-path-sdf":595}],1274:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../registry"),b=h("./helpers"),p=h("./attributes"),r=h("../scatter/constants"),u=h("../scatter/subtypes"),c=h("../scatter/xy_defaults"),l=h("../scatter/period_defaults"),f=h("../scatter/marker_defaults"),s=h("../scatter/line_defaults"),o=h("../scatter/fillcolor_defaults"),d=h("../scatter/text_defaults");G.exports=function(g,y,v,_){function w(I,D){return i.coerce(g,y,p,I,D)}var x=!!g.marker&&b.isOpenSymbol(g.marker.symbol),E=u.isBubble(g),k=c(g,y,_,w);if(k){l(g,y,_,w),w("xhoverformat"),w("yhoverformat");var C=k<r.PTS_LINESONLY?"lines+markers":"lines";w("text"),w("hovertext"),w("hovertemplate"),w("mode",C),u.hasLines(y)&&(w("connectgaps"),s(g,y,v,_,w),w("line.shape")),u.hasMarkers(y)&&(f(g,y,v,_,w),w("marker.line.width",x||E?1:0)),u.hasText(y)&&(w("texttemplate"),d(g,y,_,w));var L=(y.line||{}).color,P=(y.marker||{}).color;w("fill"),"none"!==y.fill&&o(g,y,v,w);var A=m.getComponentMethod("errorbars","supplyDefaults");A(g,y,L||P||v,{axis:"y"}),A(g,y,L||P||v,{axis:"x",inherit:"y"}),i.coerceSelectionMarkerOpacity(y,w)}else y.visible=!1}},{"../../lib":803,"../../registry":931,"../scatter/constants":1222,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/marker_defaults":1237,"../scatter/period_defaults":1238,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"../scatter/xy_defaults":1245,"./attributes":1270,"./helpers":1277}],1275:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/color"),b=h("../../constants/interactions").DESELECTDIM;G.exports={styleTextSelection:function(p){var r,u,c=p[0],l=c.trace,f=c.t,s=f._scene,o=f.index,d=s.selectBatch[o],g=s.unselectBatch[o],y=s.textOptions[o],v=s.textSelectedOptions[o]||{},_=s.textUnselectedOptions[o]||{},w=i.extendFlat({},y);if(d.length||g.length){var x=v.color,E=_.color,k=y.color,C=Array.isArray(k);for(w.color=new Array(l._length),r=0;r<d.length;r++)w.color[u=d[r]]=x||(C?k[u]:k);for(r=0;r<g.length;r++){u=g[r];var L=C?k[u]:k;w.color[u]=E||(x?L:m.addOpacity(L,b))}}s.glText[o].update(w)}}},{"../../components/color":666,"../../constants/interactions":778,"../../lib":803}],1276:[function(h,G,X){"use strict";var i=h("../scatter/format_labels");G.exports=function(m,b,p){var r=m.i;return"x"in m||(m.x=b._x[r]),"y"in m||(m.y=b._y[r]),i(m,b,p)}},{"../scatter/format_labels":1227}],1277:[function(h,G,X){"use strict";var i=h("./constants");X.isOpenSymbol=function(m){return"string"==typeof m?i.OPEN_RE.test(m):m%200>100},X.isDotSymbol=function(m){return"string"==typeof m?i.DOT_RE.test(m):m>200}},{"./constants":1272}],1278:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../lib"),b=h("../scatter/get_trace_color");function p(r,u,c,l){var f=r.xa,s=r.ya,o=r.distance,d=r.dxy,g=r.index,y={pointNumber:g,x:u[g],y:c[g]};y.tx=Array.isArray(l.text)?l.text[g]:l.text,y.htx=Array.isArray(l.hovertext)?l.hovertext[g]:l.hovertext,y.data=Array.isArray(l.customdata)?l.customdata[g]:l.customdata,y.tp=Array.isArray(l.textposition)?l.textposition[g]:l.textposition;var v=l.textfont;v&&(y.ts=m.isArrayOrTypedArray(v.size)?v.size[g]:v.size,y.tc=Array.isArray(v.color)?v.color[g]:v.color,y.tf=Array.isArray(v.family)?v.family[g]:v.family);var _=l.marker;_&&(y.ms=m.isArrayOrTypedArray(_.size)?_.size[g]:_.size,y.mo=m.isArrayOrTypedArray(_.opacity)?_.opacity[g]:_.opacity,y.mx=m.isArrayOrTypedArray(_.symbol)?_.symbol[g]:_.symbol,y.mc=m.isArrayOrTypedArray(_.color)?_.color[g]:_.color);var w=_&&_.line;w&&(y.mlc=Array.isArray(w.color)?w.color[g]:w.color,y.mlw=m.isArrayOrTypedArray(w.width)?w.width[g]:w.width);var x=_&&_.gradient;x&&"none"!==x.type&&(y.mgt=Array.isArray(x.type)?x.type[g]:x.type,y.mgc=Array.isArray(x.color)?x.color[g]:x.color);var E=f.c2p(y.x,!0),k=s.c2p(y.y,!0),C=y.mrc||1,L=l.hoverlabel;L&&(y.hbg=Array.isArray(L.bgcolor)?L.bgcolor[g]:L.bgcolor,y.hbc=Array.isArray(L.bordercolor)?L.bordercolor[g]:L.bordercolor,y.hts=m.isArrayOrTypedArray(L.font.size)?L.font.size[g]:L.font.size,y.htc=Array.isArray(L.font.color)?L.font.color[g]:L.font.color,y.htf=Array.isArray(L.font.family)?L.font.family[g]:L.font.family,y.hnl=m.isArrayOrTypedArray(L.namelength)?L.namelength[g]:L.namelength);var P=l.hoverinfo;P&&(y.hi=Array.isArray(P)?P[g]:P);var A=l.hovertemplate;A&&(y.ht=Array.isArray(A)?A[g]:A);var I={};I[r.index]=y;var D=l._origX,R=l._origY,S=m.extendFlat({},r,{color:b(l,y),x0:E-C,x1:E+C,xLabelVal:D?D[g]:y.x,y0:k-C,y1:k+C,yLabelVal:R?R[g]:y.y,cd:I,distance:o,spikeDistance:d,hovertemplate:y.ht});return y.htx?S.text=y.htx:y.tx?S.text=y.tx:l.text&&(S.text=l.text),m.fillText(y,l,S),i.getComponentMethod("errorbars","hoverInfo")(y,l,S),S}G.exports={hoverPoints:function(r,u,c,l){var f,s,o,d,g,y,v,_,w,x,E=r.cd,k=E[0].t,C=E[0].trace,L=r.xa,P=r.ya,A=k.x,I=k.y,D=L.c2p(u),R=P.c2p(c),S=r.distance;if(k.tree){var N=L.p2c(D-S),B=L.p2c(D+S),H=P.p2c(R-S),Y=P.p2c(R+S);f="x"===l?k.tree.range(Math.min(N,B),Math.min(P._rl[0],P._rl[1]),Math.max(N,B),Math.max(P._rl[0],P._rl[1])):k.tree.range(Math.min(N,B),Math.min(H,Y),Math.max(N,B),Math.max(H,Y))}else f=k.ids;var Q=S;if("x"===l){var ne=!!C.xperiodalignment,ae=!!C.yperiodalignment;for(y=0;y<f.length;y++){if(d=A[s=f[y]],v=Math.abs(L.c2p(d)-D),ne){var te=L.c2p(C._xStarts[s]),K=L.c2p(C._xEnds[s]);v=D>=Math.min(te,K)&&D<=Math.max(te,K)?0:1/0}if(v<Q){if(Q=v,_=P.c2p(g=I[s])-R,ae){var q=P.c2p(C._yStarts[s]),re=P.c2p(C._yEnds[s]);_=R>=Math.min(q,re)&&R<=Math.max(q,re)?0:1/0}x=Math.sqrt(v*v+_*_),o=f[y]}}}else for(y=f.length-1;y>-1;y--)d=A[s=f[y]],g=I[s],v=L.c2p(d)-D,_=P.c2p(g)-R,(w=Math.sqrt(v*v+_*_))<Q&&(Q=x=w,o=s);return r.index=o,r.distance=Q,r.dxy=x,void 0===o?[r]:[p(r,A,I,C)]},calcHover:p}},{"../../lib":803,"../../registry":931,"../scatter/get_trace_color":1228}],1279:[function(h,G,X){"use strict";var i=h("./hover");G.exports={moduleType:"trace",name:"scattergl",basePlotModule:h("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:h("./attributes"),supplyDefaults:h("./defaults"),crossTraceDefaults:h("../scatter/cross_trace_defaults"),colorbar:h("../scatter/marker_colorbar"),formatLabels:h("./format_labels"),calc:h("./calc"),plot:h("./plot"),hoverPoints:i.hoverPoints,selectPoints:h("./select"),meta:{}}},{"../../plots/cartesian":868,"../scatter/cross_trace_defaults":1224,"../scatter/marker_colorbar":1236,"./attributes":1270,"./calc":1271,"./defaults":1274,"./format_labels":1276,"./hover":1278,"./plot":1280,"./select":1282}],1280:[function(h,G,X){"use strict";var i=h("regl-scatter2d"),m=h("regl-line2d"),b=h("regl-error2d"),p=h("gl-text"),r=h("../../lib"),u=h("../../components/dragelement/helpers").selectMode,c=h("../../lib/prepare_regl"),l=h("../scatter/subtypes"),f=h("../scatter/link_traces"),s=h("./edit_style").styleTextSelection;function o(d,g,y,v){var _=d._size,P=_.w*v,A=_.h*v;return[_.l*v+g.domain[0]*P,_.b*v+y.domain[0]*A,d.width*v-_.r*v-(1-g.domain[1])*P,d.height*v-_.t*v-(1-y.domain[1])*A]}G.exports=function(d,g,y){if(y.length){var v,_,w=d._fullLayout,x=g._scene,E=g.xaxis,k=g.yaxis;if(x)if(c(d,["ANGLE_instanced_arrays","OES_element_index_uint"])){var C=x.count,L=w._glcanvas.data()[0].regl;if(f(d,g,y),x.dirty){if(!0===x.error2d&&(x.error2d=b(L)),!0===x.line2d&&(x.line2d=m(L)),!0===x.scatter2d&&(x.scatter2d=i(L)),!0===x.fill2d&&(x.fill2d=m(L)),!0===x.glText)for(x.glText=new Array(C),v=0;v<C;v++)x.glText[v]=new p(L);if(x.glText){if(C>x.glText.length){var P=C-x.glText.length;for(v=0;v<P;v++)x.glText.push(new p(L))}else C<x.glText.length&&x.glText.splice(C,x.glText.length-C).forEach(function(ie){ie.destroy()});for(v=0;v<C;v++)x.glText[v].update(x.textOptions[v])}if(x.line2d&&(x.line2d.update(x.lineOptions),x.lineOptions=x.lineOptions.map(function(ie){if(ie&&ie.positions){for(var ue=ie.positions,fe=0;fe<ue.length&&(isNaN(ue[fe])||isNaN(ue[fe+1]));)fe+=2;for(var he=ue.length-2;he>fe&&(isNaN(ue[he])||isNaN(ue[he+1]));)he-=2;ie.positions=ue.slice(fe,he+2)}return ie}),x.line2d.update(x.lineOptions)),x.error2d){var I=(x.errorXOptions||[]).concat(x.errorYOptions||[]);x.error2d.update(I)}x.scatter2d&&x.scatter2d.update(x.markerOptions),x.fillOrder=r.repeat(null,C),x.fill2d&&(x.fillOptions=x.fillOptions.map(function(ie,ue){var fe=y[ue];if(ie&&fe&&fe[0]&&fe[0].trace){var he,de,be=fe[0],pe=be.trace,Te=be.t,ye=x.lineOptions[ue],ke=[];pe._ownfill&&ke.push(ue),pe._nexttrace&&ke.push(ue+1),ke.length&&(x.fillOrder[ue]=ke);var ze,je,Ie=[],Ce=ye&&ye.positions||Te.positions;if("tozeroy"===pe.fill){for(ze=0;ze<Ce.length&&isNaN(Ce[ze+1]);)ze+=2;for(je=Ce.length-2;je>ze&&isNaN(Ce[je+1]);)je-=2;0!==Ce[ze+1]&&(Ie=[Ce[ze],0]),Ie=Ie.concat(Ce.slice(ze,je+2)),0!==Ce[je+1]&&(Ie=Ie.concat([Ce[je],0]))}else if("tozerox"===pe.fill){for(ze=0;ze<Ce.length&&isNaN(Ce[ze]);)ze+=2;for(je=Ce.length-2;je>ze&&isNaN(Ce[je]);)je-=2;0!==Ce[ze]&&(Ie=[0,Ce[ze+1]]),Ie=Ie.concat(Ce.slice(ze,je+2)),0!==Ce[je]&&(Ie=Ie.concat([0,Ce[je+1]]))}else if("toself"===pe.fill||"tonext"===pe.fill){for(Ie=[],he=0,ie.splitNull=!0,de=0;de<Ce.length;de+=2)(isNaN(Ce[de])||isNaN(Ce[de+1]))&&((Ie=Ie.concat(Ce.slice(he,de))).push(Ce[he],Ce[he+1]),Ie.push(null,null),he=de+2);Ie=Ie.concat(Ce.slice(he)),he&&Ie.push(Ce[he],Ce[he+1])}else{var _e=pe._nexttrace;if(_e){var we=x.lineOptions[ue+1];if(we){var Se=we.positions;if("tonexty"===pe.fill){for(Ie=Ce.slice(),ue=Math.floor(Se.length/2);ue--;){var Oe=Se[2*ue],Be=Se[2*ue+1];isNaN(Oe)||isNaN(Be)||Ie.push(Oe,Be)}ie.fill=_e.fillcolor}}}}if(pe._prevtrace&&"tonext"===pe._prevtrace.fill){var He=x.lineOptions[ue-1].positions,Xe=Ie.length/2,nt=[he=Xe];for(de=0;de<He.length;de+=2)(isNaN(He[de])||isNaN(He[de+1]))&&(nt.push(de/2+Xe+1),he=de+2);Ie=Ie.concat(He),ie.hole=nt}return ie.fillmode=pe.fill,ie.opacity=pe.opacity,ie.positions=Ie,ie}}),x.fill2d.update(x.fillOptions))}var R=u(w.dragmode),S=w.clickmode.indexOf("select")>-1;for(v=0;v<C;v++){var N=y[v][0],B=N.trace,H=N.t,Y=H.index,Q=B._length,ne=H.x,ae=H.y;if(B.selectedpoints||R||S){if(R||(R=!0),B.selectedpoints){var te=x.selectBatch[Y]=r.selIndices2selPoints(B),K={};for(_=0;_<te.length;_++)K[te[_]]=1;var q=[];for(_=0;_<Q;_++)K[_]||q.push(_);x.unselectBatch[Y]=q}var re=H.xpx=new Array(Q),V=H.ypx=new Array(Q);for(_=0;_<Q;_++)re[_]=E.c2p(ne[_]),V[_]=k.c2p(ae[_])}else H.xpx=H.ypx=null}if(R){if(x.select2d||(x.select2d=i(w._glcanvas.data()[1].regl)),x.scatter2d){var W=new Array(C);for(v=0;v<C;v++)W[v]=x.selectBatch[v].length||x.unselectBatch[v].length?x.markerUnselectedOptions[v]:{};x.scatter2d.update(W)}x.select2d&&(x.select2d.update(x.markerOptions),x.select2d.update(x.markerSelectedOptions)),x.glText&&y.forEach(function(ie){l.hasText(((ie||[])[0]||{}).trace||{})&&s(ie)})}else x.scatter2d&&x.scatter2d.update(x.markerOptions);var Z={viewport:o(w,E,k,d._context.plotGlPixelRatio),range:[(E._rl||E.range)[0],(k._rl||k.range)[0],(E._rl||E.range)[1],(k._rl||k.range)[1]]},oe=r.repeat(Z,x.count);x.fill2d&&x.fill2d.update(oe),x.line2d&&x.line2d.update(oe),x.error2d&&x.error2d.update(oe.concat(oe)),x.scatter2d&&x.scatter2d.update(oe),x.select2d&&x.select2d.update(oe),x.glText&&x.glText.forEach(function(ie){ie.update(Z)})}else x.init()}}},{"../../components/dragelement/helpers":684,"../../lib":803,"../../lib/prepare_regl":816,"../scatter/link_traces":1234,"../scatter/subtypes":1243,"./edit_style":1275,"gl-text":355,"regl-error2d":536,"regl-line2d":537,"regl-scatter2d":538}],1281:[function(h,G,X){"use strict";var i=h("../../lib");G.exports=function(m,b){var p=b._scene,r={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},u={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return b._scene||((p=b._scene={}).init=function(){i.extendFlat(p,u,r)},p.init(),p.update=function(c){var l=i.repeat(c,p.count);if(p.fill2d&&p.fill2d.update(l),p.scatter2d&&p.scatter2d.update(l),p.line2d&&p.line2d.update(l),p.error2d&&p.error2d.update(l.concat(l)),p.select2d&&p.select2d.update(l),p.glText)for(var f=0;f<p.count;f++)p.glText[f].update(c)},p.draw=function(){for(var c=p.count,l=p.fill2d,f=p.error2d,s=p.line2d,o=p.scatter2d,d=p.glText,g=p.select2d,y=p.selectBatch,v=p.unselectBatch,_=0;_<c;_++){if(l&&p.fillOrder[_]&&l.draw(p.fillOrder[_]),s&&p.lineOptions[_]&&s.draw(_),f&&(p.errorXOptions[_]&&f.draw(_),p.errorYOptions[_]&&f.draw(_+c)),o&&p.markerOptions[_])if(v[_].length){var w=i.repeat([],p.count);w[_]=v[_],o.draw(w)}else y[_].length||o.draw(_);d[_]&&p.textOptions[_]&&d[_].render()}g&&g.draw(y),p.dirty=!1},p.destroy=function(){p.fill2d&&p.fill2d.destroy&&p.fill2d.destroy(),p.scatter2d&&p.scatter2d.destroy&&p.scatter2d.destroy(),p.error2d&&p.error2d.destroy&&p.error2d.destroy(),p.line2d&&p.line2d.destroy&&p.line2d.destroy(),p.select2d&&p.select2d.destroy&&p.select2d.destroy(),p.glText&&p.glText.forEach(function(c){c.destroy&&c.destroy()}),p.lineOptions=null,p.fillOptions=null,p.markerOptions=null,p.markerSelectedOptions=null,p.markerUnselectedOptions=null,p.errorXOptions=null,p.errorYOptions=null,p.textOptions=null,p.textSelectedOptions=null,p.textUnselectedOptions=null,p.selectBatch=null,p.unselectBatch=null,b._scene=null}),p.dirty||i.extendFlat(p,r),p}},{"../../lib":803}],1282:[function(h,G,X){"use strict";var i=h("../scatter/subtypes"),m=h("./edit_style").styleTextSelection;G.exports=function(b,p){var r=b.cd,u=b.xaxis,c=b.yaxis,l=[],f=r[0].trace,s=r[0].t,o=f._length,d=s.x,g=s.y,y=s._scene,v=s.index;if(!y)return l;var _=i.hasText(f),w=i.hasMarkers(f);if(!0!==f.visible||!w&&!_)return l;var E=[],k=[];if(!1!==p&&!p.degenerate)for(var C=0;C<o;C++)p.contains([s.xpx[C],s.ypx[C]],!1,C,b)?(E.push(C),l.push({pointNumber:C,x:u.c2d(d[C]),y:c.c2d(g[C])})):k.push(C);if(w){var L=y.scatter2d;if(E.length||k.length){if(!y.selectBatch[v].length&&!y.unselectBatch[v].length){var P=new Array(y.count);P[v]=y.markerUnselectedOptions[v],L.update.apply(L,P)}}else{var A=new Array(y.count);A[v]=y.markerOptions[v],L.update.apply(L,A)}}return y.selectBatch[v]=E,y.unselectBatch[v]=k,_&&m(r),l}},{"../scatter/subtypes":1243,"./edit_style":1275}],1283:[function(h,G,X){"use strict";var i=h("../../plots/template_attributes").hovertemplateAttrs,m=h("../../plots/template_attributes").texttemplateAttrs,b=h("../scattergeo/attributes"),p=h("../scatter/attributes"),r=h("../../plots/mapbox/layout_attributes"),u=h("../../plots/attributes"),c=h("../../components/colorscale/attributes"),l=h("../../lib/extend").extendFlat,f=h("../../plot_api/edit_types").overrideAll,s=b.line,o=b.marker;G.exports=f({lon:b.lon,lat:b.lat,mode:l({},p.mode,{dflt:"markers"}),text:l({},p.text,{}),texttemplate:m({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:l({},p.hovertext,{}),line:{color:s.color,width:s.width},connectgaps:p.connectgaps,marker:l({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:o.opacity,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode},c("marker")),fill:b.fill,fillcolor:p.fillcolor,textfont:r.layers.symbol.textfont,textposition:r.layers.symbol.textposition,below:{valType:"string"},selected:{marker:p.selected.marker},unselected:{marker:p.unselected.marker},hoverinfo:l({},u.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:i()},"calc","nested")},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../../plots/mapbox/layout_attributes":913,"../../plots/template_attributes":926,"../scatter/attributes":1218,"../scattergeo/attributes":1260}],1284:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../lib"),b=h("../../constants/numerical").BADNUM,p=h("../../lib/geojson_utils"),r=h("../../components/colorscale"),u=h("../../components/drawing"),c=h("../scatter/make_bubble_size_func"),l=h("../scatter/subtypes"),f=h("../../plots/mapbox/convert_text_opts"),s=h("../../components/fx/helpers").appendArrayPointValue,o=h("../../lib/svg_text_utils").NEWLINES,d=h("../../lib/svg_text_utils").BR_TAG_ALL;function g(){return{geojson:p.makeBlank(),layout:{visibility:"none"},paint:{}}}function y(w,x){return m.isArrayOrTypedArray(w)?x?function(E){return i(w[E])?+w[E]:0}:function(E){return w[E]}:w?function(){return w}:v}function v(){return""}function _(w){return w[0]===b}G.exports=function(w,x){var E,k=x[0].trace,C=!0===k.visible&&0!==k._length,L="none"!==k.fill,P=l.hasLines(k),A=l.hasMarkers(k),I=l.hasText(k),D=A&&"circle"===k.marker.symbol,R=A&&"circle"!==k.marker.symbol,S=g(),N=g(),B=g(),H=g(),Y={fill:S,line:N,circle:B,symbol:H};if(!C)return Y;if((L||P)&&(E=p.calcTraceToLineCoords(x)),L&&(S.geojson=p.makePolygon(E),S.layout.visibility="visible",m.extendFlat(S.paint,{"fill-color":k.fillcolor})),P&&(N.geojson=p.makeLine(E),N.layout.visibility="visible",m.extendFlat(N.paint,{"line-width":k.line.width,"line-color":k.line.color,"line-opacity":k.opacity})),D){var Q=function(te){var K,q,re,V,W=te[0].trace,Z=W.marker,oe=W.selectedpoints,ie=m.isArrayOrTypedArray(Z.color),ue=m.isArrayOrTypedArray(Z.size),fe=m.isArrayOrTypedArray(Z.opacity);function he(je){return W.opacity*je}ie&&(q=r.hasColorscale(W,"marker")?r.makeColorScaleFuncFromTrace(Z):m.identity),ue&&(re=c(W)),fe&&(V=function(je){return he(i(je)?+m.constrain(je,0,1):0)});var de,ze,be=[];for(K=0;K<te.length;K++){var pe=te[K],Te=pe.lonlat;if(!_(Te)){var ye={};q&&(ye.mcc=pe.mcc=q(pe.mc)),re&&(ye.mrc=pe.mrc=re(pe.ms)),V&&(ye.mo=V(pe.mo)),oe&&(ye.selected=pe.selected||0),be.push({type:"Feature",geometry:{type:"Point",coordinates:Te},properties:ye})}}if(oe)for(de=u.makeSelectedPointStyleFns(W),K=0;K<be.length;K++){var ke=be[K].properties;de.selectedOpacityFn&&(ke.mo=he(de.selectedOpacityFn(ke))),de.selectedColorFn&&(ke.mcc=de.selectedColorFn(ke)),de.selectedSizeFn&&(ke.mrc=de.selectedSizeFn(ke))}return{geojson:{type:"FeatureCollection",features:be},mcc:ie||de&&de.selectedColorFn?{type:"identity",property:"mcc"}:Z.color,mrc:ue||de&&de.selectedSizeFn?{type:"identity",property:"mrc"}:(ze=Z.size,ze/2),mo:fe||de&&de.selectedOpacityFn?{type:"identity",property:"mo"}:he(Z.opacity)}}(x);B.geojson=Q.geojson,B.layout.visibility="visible",m.extendFlat(B.paint,{"circle-color":Q.mcc,"circle-radius":Q.mrc,"circle-opacity":Q.mo})}if((R||I)&&(H.geojson=function(te,K){for(var q=K._fullLayout,re=te[0].trace,V=re.marker||{},W=V.symbol,Z=V.angle,oe="circle"!==W?y(W):v,ie="auto"!==Z?y(Z,!0):v,ue=l.hasText(re)?y(re.text):v,fe=[],he=0;he<te.length;he++){var de=te[he];if(!_(de.lonlat)){var be,pe=re.texttemplate;if(pe){var Te=Array.isArray(pe)?pe[he]||"":pe,ye=re._module.formatLabels(de,re,q),ke={};s(ke,re,de.i),be=m.texttemplateString(Te,ye,q._d3locale,ke,de,re._meta||{})}else be=ue(he);be&&(be=be.replace(o,"").replace(d,"\n")),fe.push({type:"Feature",geometry:{type:"Point",coordinates:de.lonlat},properties:{symbol:oe(he),angle:ie(he),text:be}})}}return{type:"FeatureCollection",features:fe}}(x,w),m.extendFlat(H.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),R&&(m.extendFlat(H.layout,{"icon-size":k.marker.size/10}),"angle"in k.marker&&"auto"!==k.marker.angle&&m.extendFlat(H.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),H.layout["icon-allow-overlap"]=k.marker.allowoverlap,m.extendFlat(H.paint,{"icon-opacity":k.opacity*k.marker.opacity,"icon-color":k.marker.color})),I)){var ae=f(k.textposition,(k.marker||{}).size);m.extendFlat(H.layout,{"text-size":k.textfont.size,"text-anchor":ae.anchor,"text-offset":ae.offset}),m.extendFlat(H.paint,{"text-color":k.textfont.color,"text-opacity":k.opacity})}return Y}},{"../../components/colorscale":678,"../../components/drawing":688,"../../components/fx/helpers":702,"../../constants/numerical":779,"../../lib":803,"../../lib/geojson_utils":797,"../../lib/svg_text_utils":829,"../../plots/mapbox/convert_text_opts":910,"../scatter/make_bubble_size_func":1235,"../scatter/subtypes":1243,"fast-isnumeric":249}],1285:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../scatter/subtypes"),b=h("../scatter/marker_defaults"),p=h("../scatter/line_defaults"),r=h("../scatter/text_defaults"),u=h("../scatter/fillcolor_defaults"),c=h("./attributes");G.exports=function(l,f,s,o){function d(y,v){return i.coerce(l,f,c,y,v)}if(v=f,w=(_=d)("lon")||[],x=_("lat")||[],E=Math.min(w.length,x.length),v._length=E,E){if(d("text"),d("texttemplate"),d("hovertext"),d("hovertemplate"),d("mode"),d("below"),m.hasLines(f)&&(p(l,f,s,o,d,{noDash:!0}),d("connectgaps")),m.hasMarkers(f)){b(l,f,s,o,d,{noLine:!0}),d("marker.allowoverlap"),d("marker.angle");var g=f.marker;"circle"!==g.symbol&&(i.isArrayOrTypedArray(g.size)&&(g.size=g.size[0]),i.isArrayOrTypedArray(g.color)&&(g.color=g.color[0]))}m.hasText(f)&&r(l,f,o,d,{noSelect:!0}),d("fill"),"none"!==f.fill&&u(l,f,s,d),i.coerceSelectionMarkerOpacity(f,d)}else f.visible=!1;var v,_,w,x,E}},{"../../lib":803,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1283}],1286:[function(h,G,X){"use strict";G.exports=function(i,m){return i.lon=m.lon,i.lat=m.lat,i}},{}],1287:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes");G.exports=function(m,b,p){var r={},u=p[b.subplot]._subplot.mockAxis,c=m.lonlat;return r.lonLabel=i.tickText(u,u.c2l(c[0]),!0).text,r.latLabel=i.tickText(u,u.c2l(c[1]),!0).text,r}},{"../../plots/cartesian/axes":854}],1288:[function(h,G,X){"use strict";var i=h("../../components/fx"),m=h("../../lib"),b=h("../scatter/get_trace_color"),p=m.fillText,r=h("../../constants/numerical").BADNUM;function u(c,l,f){if(!c.hovertemplate){var s=(l.hi||c.hoverinfo).split("+"),o=-1!==s.indexOf("all"),d=-1!==s.indexOf("lon"),g=-1!==s.indexOf("lat"),y=l.lonlat,v=[];return o||d&&g?v.push("("+_(y[1])+", "+_(y[0])+")"):d?v.push(f.lon+_(y[0])):g&&v.push(f.lat+_(y[1])),(o||-1!==s.indexOf("text"))&&p(l,c,v),v.join("<br>")}function _(w){return w+"\xb0"}}G.exports={hoverPoints:function(c,l,f){var s=c.cd,o=s[0].trace,d=c.xa,g=c.ya,y=c.subplot,v=360*(l>=0?Math.floor((l+180)/360):Math.ceil((l-180)/360)),_=l-v;if(i.getClosest(s,function(I){var D=I.lonlat;if(D[0]===r)return 1/0;var R=m.modHalf(D[0],360),S=D[1],N=y.project([R,S]),B=N.x-d.c2p([_,S]),H=N.y-g.c2p([R,f]),Y=Math.max(3,I.mrc||0);return Math.max(Math.sqrt(B*B+H*H)-Y,1-3/Y)},c),!1!==c.index){var w=s[c.index],x=w.lonlat,E=[m.modHalf(x[0],360)+v,x[1]],k=d.c2p(E),C=g.c2p(E),L=w.mrc||1;c.x0=k-L,c.x1=k+L,c.y0=C-L,c.y1=C+L;var P={};P[o.subplot]={_subplot:y};var A=o._module.formatLabels(w,o,P);return c.lonLabel=A.lonLabel,c.latLabel=A.latLabel,c.color=b(o,w),c.extraText=u(o,w,s[0].t.labels),c.hovertemplate=o.hovertemplate,[c]}},getExtraText:u}},{"../../components/fx":706,"../../constants/numerical":779,"../../lib":803,"../scatter/get_trace_color":1228}],1289:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),colorbar:h("../scatter/marker_colorbar"),formatLabels:h("./format_labels"),calc:h("../scattergeo/calc"),plot:h("./plot"),hoverPoints:h("./hover").hoverPoints,eventData:h("./event_data"),selectPoints:h("./select"),styleOnSelect:function(i,m){m&&m[0].trace._glTrace.update(m)},moduleType:"trace",name:"scattermapbox",basePlotModule:h("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":911,"../scatter/marker_colorbar":1236,"../scattergeo/calc":1261,"./attributes":1283,"./defaults":1285,"./event_data":1286,"./format_labels":1287,"./hover":1288,"./plot":1290,"./select":1291}],1290:[function(h,G,X){"use strict";var i=h("./convert"),m=h("../../plots/mapbox/constants").traceLayerPrefix,b=["fill","line","circle","symbol"];function p(u,c){this.type="scattermapbox",this.subplot=u,this.uid=c,this.sourceIds={fill:"source-"+c+"-fill",line:"source-"+c+"-line",circle:"source-"+c+"-circle",symbol:"source-"+c+"-symbol"},this.layerIds={fill:m+c+"-fill",line:m+c+"-line",circle:m+c+"-circle",symbol:m+c+"-symbol"},this.below=null}var r=p.prototype;r.addSource=function(u,c){this.subplot.map.addSource(this.sourceIds[u],{type:"geojson",data:c.geojson})},r.setSourceData=function(u,c){this.subplot.map.getSource(this.sourceIds[u]).setData(c.geojson)},r.addLayer=function(u,c,l){this.subplot.addLayer({type:u,id:this.layerIds[u],source:this.sourceIds[u],layout:c.layout,paint:c.paint},l)},r.update=function(u){var c,l,f,s=this.subplot,o=s.map,d=i(s.gd,u),g=s.belowLookup["trace-"+this.uid];if(g!==this.below){for(c=b.length-1;c>=0;c--)o.removeLayer(this.layerIds[l=b[c]]);for(c=0;c<b.length;c++)f=d[l=b[c]],this.addLayer(l,f,g);this.below=g}for(c=0;c<b.length;c++)f=d[l=b[c]],s.setOptions(this.layerIds[l],"setLayoutProperty",f.layout),"visible"===f.layout.visibility&&(this.setSourceData(l,f),s.setOptions(this.layerIds[l],"setPaintProperty",f.paint));u[0].trace._glTrace=this},r.dispose=function(){for(var u=this.subplot.map,c=b.length-1;c>=0;c--){var l=b[c];u.removeLayer(this.layerIds[l]),u.removeSource(this.sourceIds[l])}},G.exports=function(u,c){for(var l=c[0].trace,f=new p(u,l.uid),s=i(u.gd,c),o=f.below=u.belowLookup["trace-"+l.uid],d=0;d<b.length;d++){var g=b[d],y=s[g];f.addSource(g,y),f.addLayer(g,y,o)}return c[0].trace._glTrace=f,f}},{"../../plots/mapbox/constants":909,"./convert":1284}],1291:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../scatter/subtypes"),b=h("../../constants/numerical").BADNUM;G.exports=function(p,r){var u,c=p.cd,l=p.xaxis,f=p.yaxis,s=[];if(!m.hasMarkers(c[0].trace))return[];if(!1===r)for(u=0;u<c.length;u++)c[u].selected=0;else for(u=0;u<c.length;u++){var d=c[u],g=d.lonlat;if(g[0]!==b){var y=[i.modHalf(g[0],360),g[1]],v=[l.c2p(y),f.c2p(y)];r.contains(v,null,u,p)?(s.push({pointNumber:u,lon:g[0],lat:g[1]}),d.selected=1):d.selected=0}}return s}},{"../../constants/numerical":779,"../../lib":803,"../scatter/subtypes":1243}],1292:[function(h,G,X){"use strict";var i=h("../../plots/template_attributes").hovertemplateAttrs,m=h("../../plots/template_attributes").texttemplateAttrs,b=h("../../lib/extend").extendFlat,p=h("../scatter/attributes"),r=h("../../plots/attributes"),u=p.line;G.exports={mode:p.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:p.text,texttemplate:m({editType:"plot"},{keys:["r","theta","text"]}),hovertext:p.hovertext,line:{color:u.color,width:u.width,dash:u.dash,shape:b({},u.shape,{values:["linear","spline"]}),smoothing:u.smoothing,editType:"calc"},connectgaps:p.connectgaps,marker:p.marker,cliponaxis:b({},p.cliponaxis,{dflt:!1}),textposition:p.textposition,textfont:p.textfont,fill:b({},p.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:p.fillcolor,hoverinfo:b({},r.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:p.hoveron,hovertemplate:i(),selected:p.selected,unselected:p.unselected}},{"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1293:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../../constants/numerical").BADNUM,b=h("../../plots/cartesian/axes"),p=h("../scatter/colorscale_calc"),r=h("../scatter/arrays_to_calcdata"),u=h("../scatter/calc_selection"),c=h("../scatter/calc").calcMarkerSize;G.exports=function(l,f){for(var s=l._fullLayout,o=f.subplot,d=s[o].radialaxis,g=s[o].angularaxis,y=d.makeCalcdata(f,"r"),v=g.makeCalcdata(f,"theta"),_=f._length,w=new Array(_),x=0;x<_;x++){var E=y[x],k=v[x],C=w[x]={};i(E)&&i(k)?(C.r=E,C.theta=k):C.r=m}var L=c(f,_);return f._extremes.x=b.findExtremes(d,y,{ppad:L}),p(l,f),r(w,f),u(w,f),w}},{"../../constants/numerical":779,"../../plots/cartesian/axes":854,"../scatter/arrays_to_calcdata":1217,"../scatter/calc":1219,"../scatter/calc_selection":1220,"../scatter/colorscale_calc":1221,"fast-isnumeric":249}],1294:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../scatter/subtypes"),b=h("../scatter/marker_defaults"),p=h("../scatter/line_defaults"),r=h("../scatter/line_shape_defaults"),u=h("../scatter/text_defaults"),c=h("../scatter/fillcolor_defaults"),l=h("../scatter/constants").PTS_LINESONLY,f=h("./attributes");function s(o,d,g,y){var v,_=y("r"),w=y("theta");if(_)w?v=Math.min(_.length,w.length):(v=_.length,y("theta0"),y("dtheta"));else{if(!w)return 0;v=d.theta.length,y("r0"),y("dr")}return d._length=v,v}G.exports={handleRThetaDefaults:s,supplyDefaults:function(o,d,g,y){function v(x,E){return i.coerce(o,d,f,x,E)}var _=s(0,d,0,v);if(_){v("thetaunit"),v("mode",_<l?"lines+markers":"lines"),v("text"),v("hovertext"),"fills"!==d.hoveron&&v("hovertemplate"),m.hasLines(d)&&(p(o,d,g,y,v),r(o,d,v),v("connectgaps")),m.hasMarkers(d)&&b(o,d,g,y,v,{gradient:!0}),m.hasText(d)&&(v("texttemplate"),u(o,d,y,v));var w=[];(m.hasMarkers(d)||m.hasText(d))&&(v("cliponaxis"),v("marker.maxdisplayed"),w.push("points")),v("fill"),"none"!==d.fill&&(c(o,d,g,v),m.hasLines(d)||r(o,d,v)),"tonext"!==d.fill&&"toself"!==d.fill||w.push("fills"),v("hoveron",w.join("+")||"points"),i.coerceSelectionMarkerOpacity(d,v)}else d.visible=!1}}},{"../../lib":803,"../scatter/constants":1222,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/line_shape_defaults":1233,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1292}],1295:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/cartesian/axes");G.exports=function(b,p,r){var u,c,l={},f=r[p.subplot]._subplot;f?(u=f.radialAxis,c=f.angularAxis):(u=(f=r[p.subplot]).radialaxis,c=f.angularaxis);var s=u.c2l(b.r);l.rLabel=m.tickText(u,s,!0).text;var o="degrees"===c.thetaunit?i.rad2deg(b.theta):b.theta;return l.thetaLabel=m.tickText(c,o,!0).text,l}},{"../../lib":803,"../../plots/cartesian/axes":854}],1296:[function(h,G,X){"use strict";var i=h("../scatter/hover");function m(b,p,r,u){var c=r.radialAxis,l=r.angularAxis;c._hovertitle="r",l._hovertitle="\u03b8";var f={};f[p.subplot]={_subplot:r};var s=p._module.formatLabels(b,p,f);u.rLabel=s.rLabel,u.thetaLabel=s.thetaLabel;var d=[];function g(v,_){d.push(v._hovertitle+": "+_)}if(!p.hovertemplate){var y=(b.hi||p.hoverinfo).split("+");-1!==y.indexOf("all")&&(y=["r","theta","text"]),-1!==y.indexOf("r")&&g(c,u.rLabel),-1!==y.indexOf("theta")&&g(l,u.thetaLabel),-1!==y.indexOf("text")&&u.text&&(d.push(u.text),delete u.text),u.extraText=d.join("<br>")}}G.exports={hoverPoints:function(b,p,r,u){var c=i(b,p,r,u);if(c&&!1!==c[0].index){var l=c[0];if(void 0===l.index)return c;var f=b.subplot,s=l.cd[l.index],o=l.trace;if(f.isPtInside(s))return l.xLabelVal=void 0,l.yLabelVal=void 0,m(s,o,f,l),l.hovertemplate=o.hovertemplate,c}},makeHoverPointText:m}},{"../scatter/hover":1229}],1297:[function(h,G,X){"use strict";G.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:h("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:h("./attributes"),supplyDefaults:h("./defaults").supplyDefaults,colorbar:h("../scatter/marker_colorbar"),formatLabels:h("./format_labels"),calc:h("./calc"),plot:h("./plot"),style:h("../scatter/style").style,styleOnSelect:h("../scatter/style").styleOnSelect,hoverPoints:h("./hover").hoverPoints,selectPoints:h("../scatter/select"),meta:{}}},{"../../plots/polar":920,"../scatter/marker_colorbar":1236,"../scatter/select":1240,"../scatter/style":1242,"./attributes":1292,"./calc":1293,"./defaults":1294,"./format_labels":1295,"./hover":1296,"./plot":1298}],1298:[function(h,G,X){"use strict";var i=h("../scatter/plot"),m=h("../../constants/numerical").BADNUM;G.exports=function(b,p,r){for(var u=p.layers.frontplot.select("g.scatterlayer"),c={xaxis:p.xaxis,yaxis:p.yaxis,plot:p.framework,layerClipId:p._hasClipOnAxisFalse?p.clipIds.forTraces:null},l=p.radialAxis,f=p.angularAxis,s=0;s<r.length;s++)for(var o=r[s],d=0;d<o.length;d++){var g=o[d],y=g.r;if(y===m)g.x=g.y=m;else{var v=l.c2g(y),_=f.c2g(g.theta);g.x=v*Math.cos(_),g.y=v*Math.sin(_)}}i(b,c,r,u)}},{"../../constants/numerical":779,"../scatter/plot":1239}],1299:[function(h,G,X){"use strict";var i=h("../scatterpolar/attributes"),m=h("../scattergl/attributes"),b=h("../../plots/template_attributes").texttemplateAttrs;G.exports={mode:i.mode,r:i.r,theta:i.theta,r0:i.r0,dr:i.dr,theta0:i.theta0,dtheta:i.dtheta,thetaunit:i.thetaunit,text:i.text,texttemplate:b({editType:"plot"},{keys:["r","theta","text"]}),hovertext:i.hovertext,hovertemplate:i.hovertemplate,line:m.line,connectgaps:m.connectgaps,marker:m.marker,fill:m.fill,fillcolor:m.fillcolor,textposition:m.textposition,textfont:m.textfont,hoverinfo:i.hoverinfo,selected:i.selected,unselected:i.unselected}},{"../../plots/template_attributes":926,"../scattergl/attributes":1270,"../scatterpolar/attributes":1292}],1300:[function(h,G,X){"use strict";var i=h("../scatter/colorscale_calc"),m=h("../scatter/calc").calcMarkerSize,b=h("../scattergl/convert"),p=h("../../plots/cartesian/axes"),r=h("../scattergl/constants").TOO_MANY_POINTS;G.exports=function(u,c){var l=u._fullLayout,f=c.subplot,s=l[f].radialaxis,o=l[f].angularaxis,d=c._r=s.makeCalcdata(c,"r"),g=c._theta=o.makeCalcdata(c,"theta"),y=c._length,v={};y<d.length&&(d=d.slice(0,y)),y<g.length&&(g=g.slice(0,y)),v.r=d,v.theta=g,i(u,c);var _,w=v.opts=b.style(u,c);return y<r?_=m(c,y):w.marker&&(_=2*(w.marker.sizeAvg||Math.max(w.marker.size,3))),c._extremes.x=p.findExtremes(s,d,{ppad:_}),[{x:!1,y:!1,t:v,trace:c}]}},{"../../plots/cartesian/axes":854,"../scatter/calc":1219,"../scatter/colorscale_calc":1221,"../scattergl/constants":1272,"../scattergl/convert":1273}],1301:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../scatter/subtypes"),b=h("../scatterpolar/defaults").handleRThetaDefaults,p=h("../scatter/marker_defaults"),r=h("../scatter/line_defaults"),u=h("../scatter/text_defaults"),c=h("../scatter/fillcolor_defaults"),l=h("../scatter/constants").PTS_LINESONLY,f=h("./attributes");G.exports=function(s,o,d,g){function y(_,w){return i.coerce(s,o,f,_,w)}var v=b(s,o,g,y);v?(y("thetaunit"),y("mode",v<l?"lines+markers":"lines"),y("text"),y("hovertext"),"fills"!==o.hoveron&&y("hovertemplate"),m.hasLines(o)&&(r(s,o,d,g,y),y("connectgaps")),m.hasMarkers(o)&&p(s,o,d,g,y),m.hasText(o)&&(y("texttemplate"),u(s,o,g,y)),y("fill"),"none"!==o.fill&&c(s,o,d,y),i.coerceSelectionMarkerOpacity(o,y)):o.visible=!1}},{"../../lib":803,"../scatter/constants":1222,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"../scatterpolar/defaults":1294,"./attributes":1299}],1302:[function(h,G,X){"use strict";var i=h("../scatterpolar/format_labels");G.exports=function(m,b,p){var r=m.i;return"r"in m||(m.r=b._r[r]),"theta"in m||(m.theta=b._theta[r]),i(m,b,p)}},{"../scatterpolar/format_labels":1295}],1303:[function(h,G,X){"use strict";var i=h("../scattergl/hover"),m=h("../scatterpolar/hover").makeHoverPointText;G.exports={hoverPoints:function(b,p,r,u){var c=b.cd[0].t,l=c.r,f=c.theta,s=i.hoverPoints(b,p,r,u);if(s&&!1!==s[0].index){var o=s[0];if(void 0===o.index)return s;var d=b.subplot,g=o.cd[o.index],y=o.trace;if(g.r=l[o.index],g.theta=f[o.index],d.isPtInside(g))return o.xLabelVal=void 0,o.yLabelVal=void 0,m(g,y,d,o),s}}}},{"../scattergl/hover":1278,"../scatterpolar/hover":1296}],1304:[function(h,G,X){"use strict";G.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:h("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:h("./attributes"),supplyDefaults:h("./defaults"),colorbar:h("../scatter/marker_colorbar"),formatLabels:h("./format_labels"),calc:h("./calc"),plot:h("./plot"),hoverPoints:h("./hover").hoverPoints,selectPoints:h("../scattergl/select"),meta:{}}},{"../../plots/polar":920,"../scatter/marker_colorbar":1236,"../scattergl/select":1282,"./attributes":1299,"./calc":1300,"./defaults":1301,"./format_labels":1302,"./hover":1303,"./plot":1305}],1305:[function(h,G,X){"use strict";var i=h("@plotly/point-cluster"),m=h("fast-isnumeric"),b=h("../scattergl/plot"),p=h("../scattergl/scene_update"),r=h("../scattergl/convert"),u=h("../../lib"),c=h("../scattergl/constants").TOO_MANY_POINTS;G.exports=function(l,f,s){if(s.length){var o=f.radialAxis,d=f.angularAxis,g=p(l,f);return s.forEach(function(y){if(y&&y[0]&&y[0].trace){var v,_=y[0],w=_.trace,x=_.t,E=w._length,k=x.r,C=x.theta,L=x.opts,P=k.slice(),A=C.slice();for(v=0;v<k.length;v++)f.isPtInside({r:k[v],theta:C[v]})||(P[v]=NaN,A[v]=NaN);var I=new Array(2*E),D=Array(E),R=Array(E);for(v=0;v<E;v++){var S,N,B=P[v];if(m(B)){var H=o.c2g(B),Y=d.c2g(A[v],w.thetaunit);S=H*Math.cos(Y),N=H*Math.sin(Y)}else S=N=NaN;D[v]=I[2*v]=S,R[v]=I[2*v+1]=N}x.tree=i(I),L.marker&&E>=c&&(L.marker.cluster=x.tree),L.marker&&(L.markerSel.positions=L.markerUnsel.positions=L.marker.positions=I),L.line&&I.length>1&&u.extendFlat(L.line,r.linePositions(l,w,I)),L.text&&(u.extendFlat(L.text,{positions:I},r.textPosition(l,w,L.text,L.marker)),u.extendFlat(L.textSel,{positions:I},r.textPosition(l,w,L.text,L.markerSel)),u.extendFlat(L.textUnsel,{positions:I},r.textPosition(l,w,L.text,L.markerUnsel))),L.fill&&!g.fill2d&&(g.fill2d=!0),L.marker&&!g.scatter2d&&(g.scatter2d=!0),L.line&&!g.line2d&&(g.line2d=!0),L.text&&!g.glText&&(g.glText=!0),g.lineOptions.push(L.line),g.fillOptions.push(L.fill),g.markerOptions.push(L.marker),g.markerSelectedOptions.push(L.markerSel),g.markerUnselectedOptions.push(L.markerUnsel),g.textOptions.push(L.text),g.textSelectedOptions.push(L.textSel),g.textUnselectedOptions.push(L.textUnsel),g.selectBatch.push([]),g.unselectBatch.push([]),x.x=D,x.y=R,x.rawx=D,x.rawy=R,x.r=k,x.theta=C,x.positions=I,x._scene=g,x.index=g.count,g.count++}}),b(l,f,s)}}},{"../../lib":803,"../scattergl/constants":1272,"../scattergl/convert":1273,"../scattergl/plot":1280,"../scattergl/scene_update":1281,"@plotly/point-cluster":59,"fast-isnumeric":249}],1306:[function(h,G,X){"use strict";var i=h("../../plots/template_attributes").hovertemplateAttrs,m=h("../../plots/template_attributes").texttemplateAttrs,b=h("../scatter/attributes"),p=h("../../plots/attributes"),r=h("../../components/colorscale/attributes"),u=h("../../components/drawing/attributes").dash,c=h("../../lib/extend").extendFlat,l=b.marker,f=b.line,s=l.line;G.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:c({},b.mode,{dflt:"markers"}),text:c({},b.text,{}),texttemplate:m({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:c({},b.hovertext,{}),line:{color:f.color,width:f.width,dash:u,shape:c({},f.shape,{values:["linear","spline"]}),smoothing:f.smoothing,editType:"calc"},connectgaps:b.connectgaps,cliponaxis:b.cliponaxis,fill:c({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:b.fillcolor,marker:c({symbol:l.symbol,opacity:l.opacity,maxdisplayed:l.maxdisplayed,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,line:c({width:s.width,editType:"calc"},r("marker.line")),gradient:l.gradient,editType:"calc"},r("marker")),textfont:b.textfont,textposition:b.textposition,selected:b.selected,unselected:b.unselected,hoverinfo:c({},p.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:b.hoveron,hovertemplate:i()}},{"../../components/colorscale/attributes":673,"../../components/drawing/attributes":687,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1307:[function(h,G,X){"use strict";var i=h("fast-isnumeric"),m=h("../scatter/colorscale_calc"),b=h("../scatter/arrays_to_calcdata"),p=h("../scatter/calc_selection"),r=h("../scatter/calc").calcMarkerSize,u=["a","b","c"],c={a:["b","c"],b:["a","c"],c:["a","b"]};G.exports=function(l,f){var s,o,d,g,y,v,_=l._fullLayout[f.subplot].sum,w=f.sum||_,x={a:f.a,b:f.b,c:f.c};for(s=0;s<u.length;s++)if(!x[d=u[s]]){for(y=x[c[d][0]],v=x[c[d][1]],g=new Array(y.length),o=0;o<y.length;o++)g[o]=w-y[o]-v[o];x[d]=g}var E,k,C,L,I=f._length,D=new Array(I);for(s=0;s<I;s++)k=x.b[s],C=x.c[s],i(E=x.a[s])&&i(k)&&i(C)?(1!=(L=_/((E=+E)+(k=+k)+(C=+C)))&&(E*=L,k*=L,C*=L),D[s]={x:C-k,y:E,a:E,b:k,c:C}):D[s]={x:!1,y:!1};return r(f,I),m(l,f),b(D,f),p(D,f),D}},{"../scatter/arrays_to_calcdata":1217,"../scatter/calc":1219,"../scatter/calc_selection":1220,"../scatter/colorscale_calc":1221,"fast-isnumeric":249}],1308:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../scatter/constants"),b=h("../scatter/subtypes"),p=h("../scatter/marker_defaults"),r=h("../scatter/line_defaults"),u=h("../scatter/line_shape_defaults"),c=h("../scatter/text_defaults"),l=h("../scatter/fillcolor_defaults"),f=h("./attributes");G.exports=function(s,o,d,g){function y(k,C){return i.coerce(s,o,f,k,C)}var v,_=y("a"),w=y("b"),x=y("c");if(_?(v=_.length,w?(v=Math.min(v,w.length),x&&(v=Math.min(v,x.length))):v=x?Math.min(v,x.length):0):w&&x&&(v=Math.min(w.length,x.length)),v){o._length=v,y("sum"),y("text"),y("hovertext"),"fills"!==o.hoveron&&y("hovertemplate"),y("mode",v<m.PTS_LINESONLY?"lines+markers":"lines"),b.hasLines(o)&&(r(s,o,d,g,y),u(s,o,y),y("connectgaps")),b.hasMarkers(o)&&p(s,o,d,g,y,{gradient:!0}),b.hasText(o)&&(y("texttemplate"),c(s,o,g,y));var E=[];(b.hasMarkers(o)||b.hasText(o))&&(y("cliponaxis"),y("marker.maxdisplayed"),E.push("points")),y("fill"),"none"!==o.fill&&(l(s,o,d,y),b.hasLines(o)||u(s,o,y)),"tonext"!==o.fill&&"toself"!==o.fill||E.push("fills"),y("hoveron",E.join("+")||"points"),i.coerceSelectionMarkerOpacity(o,y)}else o.visible=!1}},{"../../lib":803,"../scatter/constants":1222,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/line_shape_defaults":1233,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1306}],1309:[function(h,G,X){"use strict";G.exports=function(i,m,b,p,r){if(m.xa&&(i.xaxis=m.xa),m.ya&&(i.yaxis=m.ya),p[r]){var u=p[r];i.a=u.a,i.b=u.b,i.c=u.c}else i.a=m.a,i.b=m.b,i.c=m.c;return i}},{}],1310:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes");G.exports=function(m,b,p){var r={},u=p[b.subplot]._subplot;return r.aLabel=i.tickText(u.aaxis,m.a,!0).text,r.bLabel=i.tickText(u.baxis,m.b,!0).text,r.cLabel=i.tickText(u.caxis,m.c,!0).text,r}},{"../../plots/cartesian/axes":854}],1311:[function(h,G,X){"use strict";var i=h("../scatter/hover");G.exports=function(m,b,p,r){var u=i(m,b,p,r);if(u&&!1!==u[0].index){var c=u[0];if(void 0===c.index){var f=m.xa._length,s=f*(1-c.y0/m.ya._length)/2,o=f-s;return c.x0=Math.max(Math.min(c.x0,o),s),c.x1=Math.max(Math.min(c.x1,o),s),u}var d=c.cd[c.index],g=c.trace,y=c.subplot;c.a=d.a,c.b=d.b,c.c=d.c,c.xLabelVal=void 0,c.yLabelVal=void 0;var v={};v[g.subplot]={_subplot:y};var _=g._module.formatLabels(d,g,v);c.aLabel=_.aLabel,c.bLabel=_.bLabel,c.cLabel=_.cLabel;var x=[];if(!g.hovertemplate){var E=(d.hi||g.hoverinfo).split("+");-1!==E.indexOf("all")&&(E=["a","b","c"]),-1!==E.indexOf("a")&&k(y.aaxis,c.aLabel),-1!==E.indexOf("b")&&k(y.baxis,c.bLabel),-1!==E.indexOf("c")&&k(y.caxis,c.cLabel)}return c.extraText=x.join("<br>"),c.hovertemplate=g.hovertemplate,u}function k(C,L){x.push(C._hovertitle+": "+L)}}},{"../scatter/hover":1229}],1312:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),colorbar:h("../scatter/marker_colorbar"),formatLabels:h("./format_labels"),calc:h("./calc"),plot:h("./plot"),style:h("../scatter/style").style,styleOnSelect:h("../scatter/style").styleOnSelect,hoverPoints:h("./hover"),selectPoints:h("../scatter/select"),eventData:h("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:h("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":927,"../scatter/marker_colorbar":1236,"../scatter/select":1240,"../scatter/style":1242,"./attributes":1306,"./calc":1307,"./defaults":1308,"./event_data":1309,"./format_labels":1310,"./hover":1311,"./plot":1313}],1313:[function(h,G,X){"use strict";var i=h("../scatter/plot");G.exports=function(m,b,p){var r=b.plotContainer;r.select(".scatterlayer").selectAll("*").remove();var u={xaxis:b.xaxis,yaxis:b.yaxis,plot:r,layerClipId:b._hasClipOnAxisFalse?b.clipIdRelative:null},c=b.layers.frontplot.select("g.scatterlayer");i(m,u,p,c)}},{"../scatter/plot":1239}],1314:[function(h,G,X){"use strict";var i=h("../scatter/attributes"),m=h("../../components/colorscale/attributes"),b=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,p=h("../../plots/template_attributes").hovertemplateAttrs,r=h("../scattergl/attributes"),u=h("../../plots/cartesian/constants").idRegex,c=h("../../plot_api/plot_template").templatedArray,l=h("../../lib/extend").extendFlat,f=i.marker,s=f.line,o=l(m("marker.line",{editTypeOverride:"calc"}),{width:l({},s.width,{editType:"calc"}),editType:"calc"}),d=l(m("marker"),{symbol:f.symbol,size:l({},f.size,{editType:"markerSize"}),sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:f.opacity,colorbar:f.colorbar,line:o,editType:"calc"});function g(y){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:u[y],editType:"plot"}}}d.color.editType=d.cmin.editType=d.cmax.editType="style",G.exports={dimensions:c("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:l({},r.text,{}),hovertext:l({},r.hovertext,{}),hovertemplate:p(),xhoverformat:b("x"),yhoverformat:b("y"),marker:d,xaxes:g("x"),yaxes:g("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:r.selected.marker,editType:"calc"},unselected:{marker:r.unselected.marker,editType:"calc"},opacity:r.opacity}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/plot_template":843,"../../plots/cartesian/axis_format_attributes":857,"../../plots/cartesian/constants":861,"../../plots/template_attributes":926,"../scatter/attributes":1218,"../scattergl/attributes":1270}],1315:[function(h,G,X){"use strict";var i=h("regl-line2d"),m=h("../../registry"),b=h("../../lib/prepare_regl"),p=h("../../plots/get_data").getModuleCalcData,r=h("../../plots/cartesian"),u=h("../../plots/cartesian/axis_ids").getFromId,c=h("../../plots/cartesian/axes").shouldShowZeroLine;function l(s,o,d){for(var y=o._visibleDims,v=d.viewOpts.ranges=new Array(d.matrixOptions.data.length),_=0;_<y.length;_++){var w=y[_],x=v[_]=new Array(4),E=u(s,o._diag[w][0]);E&&(x[0]=E.r2l(E.range[0]),x[2]=E.r2l(E.range[1]));var k=u(s,o._diag[w][1]);k&&(x[1]=k.r2l(k.range[0]),x[3]=k.r2l(k.range[1]))}d.selectBatch.length||d.unselectBatch.length?d.matrix.update({ranges:v},{ranges:v}):d.matrix.update({ranges:v})}function f(s){var o=s._fullLayout,d=o._glcanvas.data()[0].regl,g=o._splomGrid;g||(g=o._splomGrid=i(d)),g.update(function(y){var v,_=y._context.plotGlPixelRatio,w=y._fullLayout,x=w._size,E=[0,0,w.width*_,w.height*_],k={};function C(te,K,q,re,V,W){q*=_,re*=_,V*=_,W*=_;var Z=K[te+"color"],oe=K[te+"width"],ie=String(Z+oe);ie in k?k[ie].data.push(NaN,NaN,q,re,V,W):k[ie]={data:[q,re,V,W],join:"rect",thickness:oe*_,color:Z,viewport:E,range:E,overlay:!1}}for(v in w._splomSubplots){var L,P,A=w._plots[v],I=A.xaxis,D=A.yaxis,R=I._gridVals,S=D._gridVals,N=I._offset,B=I._length,H=D._length,Y=x.b+D.domain[0]*x.h,Q=-D._m,ne=-Q*D.r2l(D.range[0],D.calendar);if(I.showgrid)for(v=0;v<R.length;v++)L=N+I.l2p(R[v].x),C("grid",I,L,Y,L,Y+H);if(D.showgrid)for(v=0;v<S.length;v++)C("grid",D,N,P=Y+ne+Q*S[v].x,N+B,P);c(y,I,D)&&(L=N+I.l2p(0),C("zeroline",I,L,Y,L,Y+H)),c(y,D,I)&&C("zeroline",D,N,P=Y+ne+0,N+B,P)}var ae=[];for(v in k)ae.push(k[v]);return ae}(s))}G.exports={name:"splom",attr:r.attr,attrRegex:r.attrRegex,layoutAttributes:r.layoutAttributes,supplyLayoutDefaults:r.supplyLayoutDefaults,drawFramework:r.drawFramework,plot:function(s){var o=s._fullLayout,d=m.getModule("splom"),g=p(s.calcdata,d)[0];b(s,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(o._hasOnlyLargeSploms&&f(s),d.plot(s,{},g))},drag:function(s){var o=s.calcdata,d=s._fullLayout;d._hasOnlyLargeSploms&&f(s);for(var g=0;g<o.length;g++){var y=o[g][0].trace,v=d._splomScenes[y.uid];"splom"===y.type&&v&&v.matrix&&l(s,y,v)}},updateGrid:f,clean:function(s,o,d,g){var y,v={};if(g._splomScenes){for(y=0;y<s.length;y++){var _=s[y];"splom"===_.type&&(v[_.uid]=1)}for(y=0;y<d.length;y++){var w=d[y];if(!v[w.uid]){var x=g._splomScenes[w.uid];x&&x.destroy&&x.destroy(),g._splomScenes[w.uid]=null,delete g._splomScenes[w.uid]}}}0===Object.keys(g._splomScenes||{}).length&&delete g._splomScenes,g._splomGrid&&!o._hasOnlyLargeSploms&&g._hasOnlyLargeSploms&&(g._splomGrid.destroy(),g._splomGrid=null,delete g._splomGrid),r.clean(s,o,d,g)},updateFx:r.updateFx,toSVG:r.toSVG}},{"../../lib/prepare_regl":816,"../../plots/cartesian":868,"../../plots/cartesian/axes":854,"../../plots/cartesian/axis_ids":858,"../../plots/get_data":891,"../../registry":931,"regl-line2d":537}],1316:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/cartesian/axis_ids"),b=h("../scatter/calc").calcMarkerSize,p=h("../scatter/calc").calcAxisExpansion,r=h("../scatter/colorscale_calc"),u=h("../scattergl/convert").markerSelection,c=h("../scattergl/convert").markerStyle,l=h("./scene_update"),f=h("../../constants/numerical").BADNUM,s=h("../scattergl/constants").TOO_MANY_POINTS;G.exports=function(o,d){var g,y,v,_,w,x,E=d.dimensions,k=d._length,C={},L=C.cdata=[],P=C.data=[],A=d._visibleDims=[];function I(R,S){for(var N=R.makeCalcdata({v:S.values,vcalendar:d.calendar},"v"),B=0;B<N.length;B++)N[B]=N[B]===f?NaN:N[B];L.push(N),P.push("log"===R.type?i.simpleMap(N,R.c2l):N)}for(g=0;g<E.length;g++)if((v=E[g]).visible){if(_=m.getFromId(o,d._diag[g][0]),w=m.getFromId(o,d._diag[g][1]),_&&w&&_.type!==w.type){i.log("Skipping splom dimension "+g+" with conflicting axis types");continue}_?(I(_,v),w&&"category"===w.type&&(w._categories=_._categories.slice())):I(w,v),A.push(g)}for(r(o,d),i.extendFlat(C,c(d)),x=L.length*k>s?C.sizeAvg||Math.max(C.size,3):b(d,k),y=0;y<A.length;y++)v=E[g=A[y]],_=m.getFromId(o,d._diag[g][0])||{},w=m.getFromId(o,d._diag[g][1])||{},p(o,d,_,w,L[y],L[y],x);var D=l(o,d);return D.matrix||(D.matrix=!0),D.matrixOptions=C,D.selectedOptions=u(d,d.selected),D.unselectedOptions=u(d,d.unselected),[{x:!1,y:!1,t:{},trace:d}]}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/axis_ids":858,"../scatter/calc":1219,"../scatter/colorscale_calc":1221,"../scattergl/constants":1272,"../scattergl/convert":1273,"./scene_update":1323}],1317:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/array_container_defaults"),b=h("./attributes"),p=h("../scatter/subtypes"),r=h("../scatter/marker_defaults"),u=h("../parcoords/merge_length"),c=h("../scattergl/helpers").isOpenSymbol;function l(f,s){function o(g,y){return i.coerce(f,s,b.dimensions,g,y)}o("label");var d=o("values");d&&d.length?o("visible"):s.visible=!1,o("axis.type"),o("axis.matches")}G.exports=function(f,s,o,d){function g(k,C){return i.coerce(f,s,b,k,C)}var y=m(f,s,{name:"dimensions",handleItemDefaults:l}),v=g("diagonal.visible"),_=g("showupperhalf"),w=g("showlowerhalf");if(u(s,y,"values")&&(v||_||w)){g("text"),g("hovertext"),g("hovertemplate"),g("xhoverformat"),g("yhoverformat"),r(f,s,o,d,g);var x=c(s.marker.symbol),E=p.isBubble(s);g("marker.line.width",x||E?1:0),function(k,C,L,P){var A,I,D=C.dimensions,R=D.length,S=C.showupperhalf,N=C.showlowerhalf,B=C.diagonal.visible,H=new Array(R),Y=new Array(R);for(A=0;A<R;A++){var Q=A?A+1:"";H[A]="x"+Q,Y[A]="y"+Q}var ne=P("xaxes",H),ae=P("yaxes",Y),te=C._diag=new Array(R);C._xaxes={},C._yaxes={};var K=[],q=[];function re(de,be,pe,Te){if(de){var ye=de.charAt(0),ke=L._splomAxes[ye];if(C["_"+ye+"axes"][de]=1,Te.push(de),!(de in ke)){var ze=ke[de]={};pe&&(ze.label=pe.label||"",pe.visible&&pe.axis&&(pe.axis.type&&(ze.type=pe.axis.type),pe.axis.matches&&(ze.matches=be)))}}}var V=!B&&!N,W=!B&&!S;for(C._axesDim={},A=0;A<R;A++){var Z=D[A],oe=0===A,ie=A===R-1,ue=oe&&V||ie&&W?void 0:ne[A],fe=oe&&W||ie&&V?void 0:ae[A];re(ue,fe,Z,K),re(fe,ue,Z,q),te[A]=[ue,fe],C._axesDim[ue]=A,C._axesDim[fe]=A}for(A=0;A<K.length;A++)for(I=0;I<q.length;I++){var he=K[A]+q[I];A>I&&S||A<I&&N?L._splomSubplots[he]=1:A!==I||!B&&N&&S||(L._splomSubplots[he]=1)}(!N||!B&&S&&N)&&(L._splomGridDflt.xside="bottom",L._splomGridDflt.yside="left")}(0,s,d,g),i.coerceSelectionMarkerOpacity(s,g)}else s.visible=!1}},{"../../lib":803,"../../plots/array_container_defaults":849,"../parcoords/merge_length":1189,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scattergl/helpers":1277,"./attributes":1314}],1318:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../scatter/colorscale_calc"),b=h("../scattergl/convert").markerStyle;G.exports=function(p,r){var u=r.trace,c=p._fullLayout._splomScenes[u.uid];if(c){m(p,u),i.extendFlat(c.matrixOptions,b(u));var l=i.extendFlat({},c.matrixOptions,c.viewOpts);c.matrix.update(l,null)}}},{"../../lib":803,"../scatter/colorscale_calc":1221,"../scattergl/convert":1273}],1319:[function(h,G,X){"use strict";X.getDimIndex=function(i,m){for(var b=m._id,p={x:0,y:1}[b.charAt(0)],r=i._visibleDims,u=0;u<r.length;u++)if(i._diag[r[u]][p]===b)return u;return!1}},{}],1320:[function(h,G,X){"use strict";var i=h("./helpers"),m=h("../scattergl/hover").calcHover;G.exports={hoverPoints:function(b,p,r){var u=b.cd[0].trace,c=b.scene.matrixOptions.cdata,l=b.xa,f=b.ya,s=l.c2p(p),o=f.c2p(r),d=b.distance,g=i.getDimIndex(u,l),y=i.getDimIndex(u,f);if(!1===g||!1===y)return[b];for(var v,_,w=c[g],x=c[y],E=d,k=0;k<w.length;k++){var L=x[k],P=l.c2p(w[k])-s,A=f.c2p(L)-o,I=Math.sqrt(P*P+A*A);I<E&&(E=_=I,v=k)}return b.index=v,b.distance=E,b.dxy=_,void 0===v?[b]:[m(b,w,x,u)]}}},{"../scattergl/hover":1278,"./helpers":1319}],1321:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../components/grid");G.exports={moduleType:"trace",name:"splom",basePlotModule:h("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:h("./attributes"),supplyDefaults:h("./defaults"),colorbar:h("../scatter/marker_colorbar"),calc:h("./calc"),plot:h("./plot"),hoverPoints:h("./hover").hoverPoints,selectPoints:h("./select"),editStyle:h("./edit_style"),meta:{}},i.register(m)},{"../../components/grid":710,"../../registry":931,"../scatter/marker_colorbar":1236,"./attributes":1314,"./base_plot":1315,"./calc":1316,"./defaults":1317,"./edit_style":1318,"./hover":1320,"./plot":1322,"./select":1324}],1322:[function(h,G,X){"use strict";var i=h("regl-splom"),m=h("../../lib"),b=h("../../plots/cartesian/axis_ids"),p=h("../../components/dragelement/helpers").selectMode;function r(u,c){var l,f,s,o,d,g=u._fullLayout,y=g._size,v=c.trace,_=c.t,w=g._splomScenes[v.uid],x=w.matrixOptions,E=x.cdata,k=g._glcanvas.data()[0].regl,C=g.dragmode;if(0!==E.length){x.lower=v.showupperhalf,x.upper=v.showlowerhalf,x.diagonal=v.diagonal.visible;var L=v._visibleDims,P=E.length,A=w.viewOpts={};for(A.ranges=new Array(P),A.domains=new Array(P),d=0;d<L.length;d++){s=L[d];var I=A.ranges[d]=new Array(4),D=A.domains[d]=new Array(4);(l=b.getFromId(u,v._diag[s][0]))&&(I[0]=l._rl[0],I[2]=l._rl[1],D[0]=l.domain[0],D[2]=l.domain[1]),(f=b.getFromId(u,v._diag[s][1]))&&(I[1]=f._rl[0],I[3]=f._rl[1],D[1]=f.domain[0],D[3]=f.domain[1])}var R=u._context.plotGlPixelRatio,S=y.l*R,N=y.b*R;A.viewport=[S,N,y.w*R+S,y.h*R+N],!0===w.matrix&&(w.matrix=i(k));var Y=g.clickmode.indexOf("select")>-1,Q=!0;if(p(C)||v.selectedpoints||Y){var ne=v._length;if(v.selectedpoints){w.selectBatch=v.selectedpoints;var ae=v.selectedpoints,te={};for(s=0;s<ae.length;s++)te[ae[s]]=!0;var K=[];for(s=0;s<ne;s++)te[s]||K.push(s);w.unselectBatch=K}var q=_.xpx=new Array(P),re=_.ypx=new Array(P);for(d=0;d<L.length;d++){if(l=b.getFromId(u,v._diag[s=L[d]][0]))for(q[d]=new Array(ne),o=0;o<ne;o++)q[d][o]=l.c2p(E[d][o]);if(f=b.getFromId(u,v._diag[s][1]))for(re[d]=new Array(ne),o=0;o<ne;o++)re[d][o]=f.c2p(E[d][o])}if(w.selectBatch.length||w.unselectBatch.length){var V=m.extendFlat({},x,w.unselectedOptions,A),W=m.extendFlat({},x,w.selectedOptions,A);w.matrix.update(V,W),Q=!1}}else _.xpx=_.ypx=null;if(Q){var Z=m.extendFlat({},x,A);w.matrix.update(Z,null)}}}G.exports=function(u,c,l){if(l.length)for(var f=0;f<l.length;f++)r(u,l[f][0])}},{"../../components/dragelement/helpers":684,"../../lib":803,"../../plots/cartesian/axis_ids":858,"regl-splom":539}],1323:[function(h,G,X){"use strict";var i=h("../../lib");G.exports=function(m,b){var p=m._fullLayout,r=b.uid,u=p._splomScenes;u||(u=p._splomScenes={});var c={dirty:!0,selectBatch:[],unselectBatch:[]},l=u[b.uid];return l||((l=u[r]=i.extendFlat({},c,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){l.matrix&&l.matrix.draw&&(l.selectBatch.length||l.unselectBatch.length?l.matrix.draw(l.unselectBatch,l.selectBatch):l.matrix.draw()),l.dirty=!1},l.destroy=function(){l.matrix&&l.matrix.destroy&&l.matrix.destroy(),l.matrixOptions=null,l.selectBatch=null,l.unselectBatch=null,l=null}),l.dirty||i.extendFlat(l,c),l}},{"../../lib":803}],1324:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../scatter/subtypes"),b=h("./helpers");G.exports=function(p,r){var u=p.cd,c=u[0].trace,l=u[0].t,f=p.scene,s=f.matrixOptions.cdata,o=p.xaxis,d=p.yaxis,g=[];if(!f)return g;var y=!m.hasMarkers(c)&&!m.hasText(c);if(!0!==c.visible||y)return g;var v=b.getDimIndex(c,o),_=b.getDimIndex(c,d);if(!1===v||!1===_)return g;var w=l.xpx[v],x=l.ypx[_],E=s[v],k=s[_],C=[],L=[];if(!1!==r&&!r.degenerate)for(var P=0;P<E.length;P++)r.contains([w[P],x[P]],null,P,p)?(C.push(P),g.push({pointNumber:P,x:E[P],y:k[P]})):L.push(P);var A=f.matrixOptions;return C.length||L.length?f.selectBatch.length||f.unselectBatch.length||f.matrix.update(f.unselectedOptions,i.extendFlat({},A,f.selectedOptions,f.viewOpts)):f.matrix.update(A,null),f.selectBatch=C,f.unselectBatch=L,g}},{"../../lib":803,"../scatter/subtypes":1243,"./helpers":1319}],1325:[function(h,G,X){"use strict";var i=h("../../components/colorscale/attributes"),m=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=h("../../plots/template_attributes").hovertemplateAttrs,p=h("../mesh3d/attributes"),r=h("../../plots/attributes"),u=h("../../lib/extend").extendFlat,c={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:b({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:m("u",1),vhoverformat:m("v",1),whoverformat:m("w",1),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),showlegend:u({},r.showlegend,{dflt:!1})};u(c,i("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(l){c[l]=p[l]}),c.hoverinfo=u({},r.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),c.transforms=void 0,G.exports=c},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../mesh3d/attributes":1159}],1326:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/colorscale/calc");function b(u){var c,l,f,s,o,d,g,y,v,_,w,x,E=u._x,k=u._y,C=u._z,L=u._len,P=-1/0,A=1/0,I=-1/0,D=1/0,R=-1/0,S=1/0,N="";for(L&&(g=E[0],v=k[0],w=C[0]),L>1&&(y=E[L-1],_=k[L-1],x=C[L-1]),c=0;c<L;c++)P=Math.max(P,E[c]),A=Math.min(A,E[c]),I=Math.max(I,k[c]),D=Math.min(D,k[c]),R=Math.max(R,C[c]),S=Math.min(S,C[c]),s||E[c]===g||(s=!0,N+="x"),o||k[c]===v||(o=!0,N+="y"),d||C[c]===w||(d=!0,N+="z");s||(N+="x"),o||(N+="y"),d||(N+="z");var B=p(u._x),H=p(u._y),Y=p(u._z);N=(N=(N=N.replace("x",(g>y?"-":"+")+"x")).replace("y",(v>_?"-":"+")+"y")).replace("z",(w>x?"-":"+")+"z");var Q=function(){L=0,B=[],H=[],Y=[]};(!L||L<B.length*H.length*Y.length)&&Q();var ne=function(ye){return"x"===ye?E:"y"===ye?k:C},ae=function(ye){return"x"===ye?B:"y"===ye?H:Y},te=function(ye){return ye[L-1]<ye[0]?-1:1},K=ne(N[1]),q=ne(N[3]),re=ne(N[5]),V=ae(N[1]).length,W=ae(N[3]).length,Z=ae(N[5]).length,oe=!1,ie=function(ye,ke,ze){return V*(W*ye+ke)+ze},ue=te(ne(N[1])),fe=te(ne(N[3])),he=te(ne(N[5]));for(c=0;c<Z-1;c++){for(l=0;l<W-1;l++){for(f=0;f<V-1;f++){var de=ie(c,l,f),be=ie(c,l,f+1),pe=ie(c,l+1,f),Te=ie(c+1,l,f);if(K[de]*ue<K[be]*ue&&q[de]*fe<q[pe]*fe&&re[de]*he<re[Te]*he||(oe=!0),oe)break}if(oe)break}if(oe)break}return oe&&(i.warn("Encountered arbitrary coordinates! Unable to input data grid."),Q()),{xMin:A,yMin:D,zMin:S,xMax:P,yMax:I,zMax:R,Xs:B,Ys:H,Zs:Y,len:L,fill:N}}function p(u){return i.distinctVals(u).vals}function r(u,c){if(void 0===c&&(c=u.length),i.isTypedArray(u))return u.subarray(0,c);for(var l=[],f=0;f<c;f++)l[f]=+u[f];return l}G.exports={calc:function(u,c){c._len=Math.min(c.u.length,c.v.length,c.w.length,c.x.length,c.y.length,c.z.length),c._u=r(c.u,c._len),c._v=r(c.v,c._len),c._w=r(c.w,c._len),c._x=r(c.x,c._len),c._y=r(c.y,c._len),c._z=r(c.z,c._len);var l=b(c);c._gridFill=l.fill,c._Xs=l.Xs,c._Ys=l.Ys,c._Zs=l.Zs,c._len=l.len;var f,s,o,d=0;c.starts&&(f=r(c.starts.x||[]),s=r(c.starts.y||[]),o=r(c.starts.z||[]),d=Math.min(f.length,s.length,o.length)),c._startsX=f||[],c._startsY=s||[],c._startsZ=o||[];var g,y=0,v=1/0;for(g=0;g<c._len;g++){var _=c._u[g],w=c._v[g],x=c._w[g],E=Math.sqrt(_*_+w*w+x*x);y=Math.max(y,E),v=Math.min(v,E)}for(m(u,c,{vals:[v,y],containerStr:"",cLetter:"c"}),g=0;g<d;g++){var k=f[g];l.xMax=Math.max(l.xMax,k),l.xMin=Math.min(l.xMin,k);var C=s[g];l.yMax=Math.max(l.yMax,C),l.yMin=Math.min(l.yMin,C);var L=o[g];l.zMax=Math.max(l.zMax,L),l.zMin=Math.min(l.zMin,L)}c._slen=d,c._normMax=y,c._xbnds=[l.xMin,l.xMax],c._ybnds=[l.yMin,l.yMax],c._zbnds=[l.zMin,l.zMax]},filter:r,processGrid:b}},{"../../components/colorscale/calc":674,"../../lib":803}],1327:[function(h,G,X){"use strict";var i=h("gl-streamtube3d"),m=i.createTubeMesh,b=h("../../lib"),p=h("../../lib/gl_format_color").parseColorScale,r=h("../../components/colorscale").extractOpts,u=h("../../plots/gl3d/zip3"),c={xaxis:0,yaxis:1,zaxis:2};function l(g,y){this.scene=g,this.uid=y,this.mesh=null,this.data=null}var f=l.prototype;function s(g){var y=g.length;return y>2?g.slice(1,y-1):2===y?[(g[0]+g[1])/2]:g}function o(g){var y=g.length;return 1===y?[.5,.5]:[g[1]-g[0],g[y-1]-g[y-2]]}function d(g,y){var v=g.fullSceneLayout,_=g.dataScale,w=y._len,x={};function E(V,W){var Z=v[W],oe=_[c[W]];return b.simpleMap(V,function(ie){return Z.d2l(ie)*oe})}if(x.vectors=u(E(y._u,"xaxis"),E(y._v,"yaxis"),E(y._w,"zaxis"),w),!w)return{positions:[],cells:[]};var k=E(y._Xs,"xaxis"),C=E(y._Ys,"yaxis"),L=E(y._Zs,"zaxis");if(x.meshgrid=[k,C,L],x.gridFill=y._gridFill,y._slen)x.startingPositions=u(E(y._startsX,"xaxis"),E(y._startsY,"yaxis"),E(y._startsZ,"zaxis"));else{for(var P=C[0],A=s(k),I=s(L),D=new Array(A.length*I.length),R=0,S=0;S<A.length;S++)for(var N=0;N<I.length;N++)D[R++]=[A[S],P,I[N]];x.startingPositions=D}x.colormap=p(y),x.tubeSize=y.sizeref,x.maxLength=y.maxdisplayed;var B=E(y._xbnds,"xaxis"),H=E(y._ybnds,"yaxis"),Y=E(y._zbnds,"zaxis"),Q=o(k),ne=o(C),ae=o(L),K=i(x,[[B[0]-Q[0],H[0]-ne[0],Y[0]-ae[0]],[B[1]+Q[1],H[1]+ne[1],Y[1]+ae[1]]]),q=r(y);K.vertexIntensityBounds=[q.min/y._normMax,q.max/y._normMax];var re=y.lightposition;return K.lightPosition=[re.x,re.y,re.z],K.ambient=y.lighting.ambient,K.diffuse=y.lighting.diffuse,K.specular=y.lighting.specular,K.roughness=y.lighting.roughness,K.fresnel=y.lighting.fresnel,K.opacity=y.opacity,y._pad=K.tubeScale*y.sizeref*2,K}f.handlePick=function(g){var y=this.scene.fullSceneLayout,v=this.scene.dataScale;function _(E,k){var L=v[c[k]];return y[k].l2c(E)/L}if(g.object===this.mesh){var w=g.data.position,x=g.data.velocity;return g.traceCoordinate=[_(w[0],"xaxis"),_(w[1],"yaxis"),_(w[2],"zaxis"),_(x[0],"xaxis"),_(x[1],"yaxis"),_(x[2],"zaxis"),g.data.intensity*this.data._normMax,g.data.divergence],g.textLabel=this.data.hovertext||this.data.text,!0}},f.update=function(g){this.data=g;var y=d(this.scene,g);this.mesh.update(y)},f.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},G.exports=function(g,y){var v=g.glplot.gl,_=d(g,y),w=m(v,_),x=new l(g,y.uid);return x.mesh=w,x.data=y,w._trace=x,g.glplot.add(w),x}},{"../../components/colorscale":678,"../../lib":803,"../../lib/gl_format_color":799,"../../plots/gl3d/zip3":907,"gl-streamtube3d":352}],1328:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/colorscale/defaults"),b=h("./attributes");G.exports=function(p,r,u,c){function l(v,_){return i.coerce(p,r,b,v,_)}var f=l("u"),s=l("v"),o=l("w"),d=l("x"),g=l("y"),y=l("z");f&&f.length&&s&&s.length&&o&&o.length&&d&&d.length&&g&&g.length&&y&&y.length?(l("starts.x"),l("starts.y"),l("starts.z"),l("maxdisplayed"),l("sizeref"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),m(p,r,c,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),l("uhoverformat"),l("vhoverformat"),l("whoverformat"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),r._length=null):r.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"./attributes":1325}],1329:[function(h,G,X){"use strict";G.exports={moduleType:"trace",name:"streamtube",basePlotModule:h("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:h("./attributes"),supplyDefaults:h("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:h("./calc").calc,plot:h("./convert"),eventData:function(i,m){return i.tubex=i.x,i.tubey=i.y,i.tubez=i.z,i.tubeu=m.traceCoordinate[3],i.tubev=m.traceCoordinate[4],i.tubew=m.traceCoordinate[5],i.norm=m.traceCoordinate[6],i.divergence=m.traceCoordinate[7],delete i.x,delete i.y,delete i.z,i},meta:{}}},{"../../plots/gl3d":896,"./attributes":1325,"./calc":1326,"./convert":1327,"./defaults":1328}],1330:[function(h,G,X){"use strict";var i=h("../../plots/attributes"),m=h("../../plots/template_attributes").hovertemplateAttrs,b=h("../../plots/template_attributes").texttemplateAttrs,p=h("../../components/colorscale/attributes"),r=h("../../plots/domain").attributes,u=h("../pie/attributes"),c=h("./constants"),l=h("../../lib/extend").extendFlat;G.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:l({colors:{valType:"data_array",editType:"calc"},line:{color:l({},u.marker.line.color,{dflt:null}),width:l({},u.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},p("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:u.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:b({editType:"plot"},{keys:c.eventDataKeys.concat(["label","value"])}),hovertext:u.hovertext,hoverinfo:l({},i.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:m({},{keys:c.eventDataKeys}),textfont:u.textfont,insidetextorientation:u.insidetextorientation,insidetextfont:u.insidetextfont,outsidetextfont:l({},u.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:u.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:r({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/domain":882,"../../plots/template_attributes":926,"../pie/attributes":1192,"./constants":1333}],1331:[function(h,G,X){"use strict";var i=h("../../plots/plots");X.name="sunburst",X.plot=function(m,b,p,r){i.plotBasePlot(X.name,m,b,p,r)},X.clean=function(m,b,p,r){i.cleanBasePlot(X.name,m,b,p,r)}},{"../../plots/plots":917}],1332:[function(h,G,X){"use strict";var i=h("d3-hierarchy"),m=h("fast-isnumeric"),b=h("../../lib"),p=h("../../components/colorscale").makeColorScaleFuncFromTrace,r=h("../pie/calc").makePullColorFn,u=h("../pie/calc").generateExtendedColors,c=h("../../components/colorscale").calc,l=h("../../constants/numerical").ALMOST_EQUAL,f={},s={},o={};X.calc=function(d,g){var y,v,_,w,x,E,k=d._fullLayout,C=g.ids,L=b.isArrayOrTypedArray(C),P=g.labels,A=g.parents,I=g.values,D=b.isArrayOrTypedArray(I),R=[],S={},N={},B=function(fe){return fe||"number"==typeof fe},H=function(fe){return!D||m(I[fe])&&I[fe]>=0};L?(y=Math.min(C.length,A.length),v=function(fe){return B(C[fe])&&H(fe)},_=function(fe){return String(C[fe])}):(y=Math.min(P.length,A.length),v=function(fe){return B(P[fe])&&H(fe)},_=function(fe){return String(P[fe])}),D&&(y=Math.min(y,I.length));for(var Y=0;Y<y;Y++)if(v(Y)){var Q=_(Y),ne=B(A[Y])?String(A[Y]):"",ae={i:Y,id:Q,pid:ne,label:B(P[Y])?String(P[Y]):""};D&&(ae.v=+I[Y]),R.push(ae),x=Q,S[w=ne]?S[w].push(x):S[w]=[x],N[x]=1}if(S[""]){if(S[""].length>1){for(var te=b.randstr(),K=0;K<R.length;K++)""===R[K].pid&&(R[K].pid=te);R.unshift({hasMultipleRoots:!0,id:te,pid:"",label:""})}}else{var q,re=[];for(q in S)N[q]||re.push(q);if(1!==re.length)return b.warn(["Multiple implied roots, cannot build",g.type,"hierarchy of",g.name+".","These roots include:",re.join(", ")].join(" "));R.unshift({hasImpliedRoot:!0,id:q=re[0],pid:"",label:q})}try{E=i.stratify().id(function(fe){return fe.id}).parentId(function(fe){return fe.pid})(R)}catch(fe){return b.warn(["Failed to build",g.type,"hierarchy of",g.name+".","Error:",fe.message].join(" "))}var V=i.hierarchy(E),W=!1;if(D)switch(g.branchvalues){case"remainder":V.sum(function(fe){return fe.data.v});break;case"total":V.each(function(fe){var he=fe.data.data,de=he.v;if(fe.children){var be=fe.children.reduce(function(pe,Te){return pe+Te.data.data.v},0);if((he.hasImpliedRoot||he.hasMultipleRoots)&&(de=be),de<be*l)return W=!0,b.warn(["Total value for node",fe.data.data.id,"of",g.name,"is smaller than the sum of its children.","\nparent value =",de,"\nchildren sum =",be].join(" "))}fe.value=de})}else!function fe(he,de,be){var pe=0,Te=he.children;if(Te){for(var ye=Te.length,ke=0;ke<ye;ke++)pe+=fe(Te[ke],de,be);be.branches&&pe++}else be.leaves&&pe++;return he.value=he.data.data.value=pe,de._values||(de._values=[]),de._values[he.data.data.i]=pe,pe}(V,g,{branches:-1!==g.count.indexOf("branches"),leaves:-1!==g.count.indexOf("leaves")});if(!W){var Z,oe;g.sort&&V.sort(function(fe,he){return he.value-fe.value});var ie=g.marker.colors||[];return g._hasColorscale?(!!ie.length||(ie=D?g.values:g._values),c(d,g,{vals:ie,containerStr:"marker",cLetter:"c"}),oe=p(g.marker)):Z=r(k["_"+g.type+"colormap"]),V.each(function(fe){var he=fe.data.data;he.color=g._hasColorscale?oe(ie[he.i]):Z(ie[he.i],he.id)}),R[0].hierarchy=V,R}},X._runCrossTraceCalc=function(d,g){var y=g._fullLayout,v=g.calcdata,_=y[d+"colorway"],w=y["_"+d+"colormap"];y["extend"+d+"colors"]&&(_=u(_,"icicle"===d?o:"treemap"===d?s:f));var x,E=0;function k(P){var A=P.data.data,I=A.id;!1===A.color&&(w[I]?A.color=w[I]:P.parent?P.parent.parent?A.color=P.parent.data.data.color:(w[I]=A.color=_[E%_.length],E++):A.color=x)}for(var C=0;C<v.length;C++){var L=v[C][0];L.trace.type===d&&L.hierarchy&&(x=L.trace.root.color,L.hierarchy.each(k))}},X.crossTraceCalc=function(d){return X._runCrossTraceCalc("sunburst",d)}},{"../../components/colorscale":678,"../../constants/numerical":779,"../../lib":803,"../pie/calc":1194,"d3-hierarchy":170,"fast-isnumeric":249}],1333:[function(h,G,X){"use strict";G.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1334:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./attributes"),b=h("../../plots/domain").defaults,p=h("../bar/defaults").handleText,r=h("../../components/colorscale"),u=r.hasColorscale,c=r.handleDefaults;G.exports=function(l,f,s,o){function d(x,E){return i.coerce(l,f,m,x,E)}var g=d("labels"),y=d("parents");if(g&&g.length&&y&&y.length){var v=d("values");d(v&&v.length?"branchvalues":"count"),d("level"),d("maxdepth"),d("marker.line.width")&&d("marker.line.color",o.paper_bgcolor),d("marker.colors");var _=f._hasColorscale=u(l,"marker","colors")||(l.marker||{}).coloraxis;_&&c(l,f,o,d,{prefix:"marker.",cLetter:"c"}),d("leaf.opacity",_?1:.7);var w=d("text");d("texttemplate"),f.texttemplate||d("textinfo",Array.isArray(w)?"text+label":"label"),d("hovertext"),d("hovertemplate"),p(l,f,o,d,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("insidetextorientation"),d("sort"),d("rotation"),d("root.color"),b(f,o,d),f._length=null}else f.visible=!1}},{"../../components/colorscale":678,"../../lib":803,"../../plots/domain":882,"../bar/defaults":945,"./attributes":1330}],1335:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../registry"),b=h("../../components/fx/helpers").appendArrayPointValue,p=h("../../components/fx"),r=h("../../lib"),u=h("../../lib/events"),c=h("./helpers"),l=h("../pie/helpers").formatPieValue;function f(s,o,d){for(var g=s.data.data,y={curveNumber:o.index,pointNumber:g.i,data:o._input,fullData:o},v=0;v<d.length;v++){var _=d[v];_ in s&&(y[_]=s[_])}return"parentString"in s&&!c.isHierarchyRoot(s)&&(y.parent=s.parentString),b(y,o,g.i),y}G.exports=function(s,o,d,g,y){var v=g[0],_=v.trace,w=v.hierarchy,x="sunburst"===_.type,E="treemap"===_.type||"icicle"===_.type;"_hasHoverLabel"in _||(_._hasHoverLabel=!1),"_hasHoverEvent"in _||(_._hasHoverEvent=!1),s.on("mouseover",function(k){var C=d._fullLayout;if(!d._dragging&&!1!==C.hovermode){var L=d._fullData[_.index],P=k.data.data,A=P.i,I=c.isHierarchyRoot(k),D=c.getParent(w,k),R=c.getValue(k),S=function(oe){return r.castOption(L,A,oe)},N=S("hovertemplate"),B=p.castHoverinfo(L,C,A),H=C.separators;if(N||B&&"none"!==B&&"skip"!==B){var Y,Q;x&&(Y=v.cx+k.pxmid[0]*(1-k.rInscribed),Q=v.cy+k.pxmid[1]*(1-k.rInscribed)),E&&(Y=k._hoverX,Q=k._hoverY);var ne,ae={},te=[],K=[],q=function(oe){return-1!==te.indexOf(oe)};B&&(te="all"===B?L._module.attributes.hoverinfo.flags:B.split("+")),ae.label=P.label,q("label")&&ae.label&&K.push(ae.label),P.hasOwnProperty("v")&&(ae.value=P.v,ae.valueLabel=l(ae.value,H),q("value")&&K.push(ae.valueLabel)),ae.currentPath=k.currentPath=c.getPath(k.data),q("current path")&&!I&&K.push(ae.currentPath);var re=[],V=function(){-1===re.indexOf(ne)&&(K.push(ne),re.push(ne))};ae.percentParent=k.percentParent=R/c.getValue(D),ae.parent=k.parentString=c.getPtLabel(D),q("percent parent")&&(ne=c.formatPercent(ae.percentParent,H)+" of "+ae.parent,V()),ae.percentEntry=k.percentEntry=R/c.getValue(o),ae.entry=k.entry=c.getPtLabel(o),!q("percent entry")||I||k.onPathbar||(ne=c.formatPercent(ae.percentEntry,H)+" of "+ae.entry,V()),ae.percentRoot=k.percentRoot=R/c.getValue(w),ae.root=k.root=c.getPtLabel(w),q("percent root")&&!I&&(ne=c.formatPercent(ae.percentRoot,H)+" of "+ae.root,V()),ae.text=S("hovertext")||S("text"),q("text")&&r.isValidTextValue(ne=ae.text)&&K.push(ne);var W={trace:L,y:Q,text:K.join("<br>"),name:N||q("name")?L.name:void 0,color:S("hoverlabel.bgcolor")||P.color,borderColor:S("hoverlabel.bordercolor"),fontFamily:S("hoverlabel.font.family"),fontSize:S("hoverlabel.font.size"),fontColor:S("hoverlabel.font.color"),nameLength:S("hoverlabel.namelength"),textAlign:S("hoverlabel.align"),hovertemplate:N,hovertemplateLabels:ae,eventData:[f(k,L,y.eventDataKeys)]};x&&(W.x0=Y-k.rInscribed*k.rpx1,W.x1=Y+k.rInscribed*k.rpx1,W.idealAlign=k.pxmid[0]<0?"left":"right"),E&&(W.x=Y,W.idealAlign=Y<0?"left":"right"),p.loneHover(W,{container:C._hoverlayer.node(),outerContainer:C._paper.node(),gd:d}),_._hasHoverLabel=!0}if(E){var Z=s.select("path.surface");y.styleOne(Z,k,L,{hovered:!0})}_._hasHoverEvent=!0,d.emit("plotly_hover",{points:[f(k,L,y.eventDataKeys)],event:i.event})}}),s.on("mouseout",function(k){var C=d._fullLayout,L=d._fullData[_.index],P=i.select(this).datum();if(_._hasHoverEvent&&(k.originalEvent=i.event,d.emit("plotly_unhover",{points:[f(P,L,y.eventDataKeys)],event:i.event}),_._hasHoverEvent=!1),_._hasHoverLabel&&(p.loneUnhover(C._hoverlayer.node()),_._hasHoverLabel=!1),E){var A=s.select("path.surface");y.styleOne(A,P,L,{hovered:!1})}}),s.on("click",function(k){var C=d._fullLayout,L=d._fullData[_.index],P=x&&(c.isHierarchyRoot(k)||c.isLeaf(k)),A=c.getPtId(k),I=c.isEntry(k)?c.findEntryWithChild(w,A):c.findEntryWithLevel(w,A),D=c.getPtId(I),R={points:[f(k,L,y.eventDataKeys)],event:i.event};P||(R.nextLevel=D);var S=u.triggerHandler(d,"plotly_"+_.type+"click",R);if(!1!==S&&C.hovermode&&(d._hoverdata=[f(k,L,y.eventDataKeys)],p.click(d,i.event)),!P&&!1!==S&&!d._dragging&&!d._transitioning){m.call("_storeDirectGUIEdit",L,C._tracePreGUI[L.uid],{level:L.level});var N={data:[{level:D}],traces:[_.index]},B={frame:{redraw:!1,duration:y.transitionTime},transition:{duration:y.transitionTime,easing:y.transitionEasing},mode:"immediate",fromcurrent:!0};p.loneUnhover(C._hoverlayer.node()),m.call("animate",d,N,B)}})}},{"../../components/fx":706,"../../components/fx/helpers":702,"../../lib":803,"../../lib/events":792,"../../registry":931,"../pie/helpers":1197,"./helpers":1336,"@plotly/d3":58}],1336:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/color"),b=h("../../lib/setcursor"),p=h("../pie/helpers");function r(u){return u.data.data.pid}X.findEntryWithLevel=function(u,c){var l;return c&&u.eachAfter(function(f){if(X.getPtId(f)===c)return l=f.copy()}),l||u},X.findEntryWithChild=function(u,c){var l;return u.eachAfter(function(f){for(var s=f.children||[],o=0;o<s.length;o++)if(X.getPtId(s[o])===c)return l=f.copy()}),l||u},X.isEntry=function(u){return!u.parent},X.isLeaf=function(u){return!u.children},X.getPtId=function(u){return u.data.data.id},X.getPtLabel=function(u){return u.data.data.label},X.getValue=function(u){return u.value},X.isHierarchyRoot=function(u){return""===r(u)},X.setSliceCursor=function(u,c,l){var f=l.isTransitioning;if(!f){var s=u.datum();f=l.hideOnRoot&&X.isHierarchyRoot(s)||l.hideOnLeaves&&X.isLeaf(s)}b(u,f?null:"pointer")},X.getInsideTextFontKey=function(u,c,l,f,s){var d=l.data.data.i;return i.castOption(c,d,((s||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+u)||i.castOption(c,d,"textfont."+u)||f.size},X.getOutsideTextFontKey=function(u,c,l,f){var s=l.data.data.i;return i.castOption(c,s,"outsidetextfont."+u)||i.castOption(c,s,"textfont."+u)||f.size},X.isOutsideText=function(u,c){return!u._hasColorscale&&X.isHierarchyRoot(c)},X.determineTextFont=function(u,c,l,f){return X.isOutsideText(u,c)?{color:X.getOutsideTextFontKey("color",s=u,o=c,d=l),family:X.getOutsideTextFontKey("family",s,o,d),size:X.getOutsideTextFontKey("size",s,o,d)}:function(s,o,d,g){var v=o.data.data,_=v.i,w=i.castOption(s,_,((g||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!w&&s._input.textfont&&(w=i.castOption(s._input,_,"textfont.color")),{color:w||m.contrast(v.color),family:X.getInsideTextFontKey("family",s,o,d,g),size:X.getInsideTextFontKey("size",s,o,d,g)}}(u,c,l,f);var s,o,d},X.hasTransition=function(u){return!!(u&&u.duration>0)},X.getMaxDepth=function(u){return u.maxdepth>=0?u.maxdepth:1/0},X.isHeader=function(u,c){return!(X.isLeaf(u)||u.depth===c._maxDepth-1)},X.getParent=function(u,c){return X.findEntryWithLevel(u,r(c))},X.listPath=function(u,c){var l=u.parent;if(!l)return[];var f=c?[l.data[c]]:[l];return X.listPath(l,c).concat(f)},X.getPath=function(u){return X.listPath(u,"label").join("/")+"/"},X.formatValue=p.formatPieValue,X.formatPercent=function(u,c){var l=i.formatPercent(u,0);return"0%"===l&&(l=p.formatPiePercent(u,c)),l}},{"../../components/color":666,"../../lib":803,"../../lib/setcursor":824,"../pie/helpers":1197}],1337:[function(h,G,X){"use strict";G.exports={moduleType:"trace",name:"sunburst",basePlotModule:h("./base_plot"),categories:[],animatable:!0,attributes:h("./attributes"),layoutAttributes:h("./layout_attributes"),supplyDefaults:h("./defaults"),supplyLayoutDefaults:h("./layout_defaults"),calc:h("./calc").calc,crossTraceCalc:h("./calc").crossTraceCalc,plot:h("./plot").plot,style:h("./style").style,colorbar:h("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1236,"./attributes":1330,"./base_plot":1331,"./calc":1332,"./defaults":1334,"./layout_attributes":1338,"./layout_defaults":1339,"./plot":1340,"./style":1341}],1338:[function(h,G,X){"use strict";G.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1339:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./layout_attributes");G.exports=function(b,p){function r(u,c){return i.coerce(b,p,m,u,c)}r("sunburstcolorway",p.colorway),r("extendsunburstcolors")}},{"../../lib":803,"./layout_attributes":1338}],1340:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("d3-hierarchy"),b=h("d3-interpolate").interpolate,p=h("../../components/drawing"),r=h("../../lib"),u=h("../../lib/svg_text_utils"),c=h("../bar/uniform_text"),l=c.recordMinTextSize,f=c.clearMinTextSize,s=h("../pie/plot"),o=h("../pie/helpers").getRotationAngle,d=s.computeTransform,g=s.transformInsideText,y=h("./style").styleOne,v=h("../bar/style").resizeText,_=h("./fx"),w=h("./constants"),x=h("./helpers");function E(C,L,P,A){var I=C._fullLayout,D=!I.uniformtext.mode&&x.hasTransition(A),R=i.select(P).selectAll("g.slice"),S=L[0],N=S.trace,H=x.findEntryWithLevel(S.hierarchy,N.level),Y=x.getMaxDepth(N),Q=I._size,ne=N.domain,te=Q.h*(ne.y[1]-ne.y[0]),K=.5*Math.min(Q.w*(ne.x[1]-ne.x[0]),te),q=S.cx=Q.l+Q.w*(ne.x[1]+ne.x[0])/2,re=S.cy=Q.t+Q.h*(1-ne.y[0])-te/2;if(!H)return R.remove();var V=null,W={};D&&R.each(function(Ce){W[x.getPtId(Ce)]={rpx0:Ce.rpx0,rpx1:Ce.rpx1,x0:Ce.x0,x1:Ce.x1,transform:Ce.transform},!V&&x.isEntry(Ce)&&(V=Ce)});var Ce,Z=(Ce=H,m.partition().size([2*Math.PI,Ce.height+1])(Ce)).descendants(),oe=H.height+1,ie=0,ue=Y;S.hasMultipleRoots&&x.isHierarchyRoot(H)&&(Z=Z.slice(1),oe-=1,ie=1,ue+=1),Z=Z.filter(function(Ce){return Ce.y1<=ue});var fe=o(N.rotation);fe&&Z.forEach(function(Ce){Ce.x0+=fe,Ce.x1+=fe});var he=Math.min(oe,Y),de=function(Ce){return(Ce-ie)/he*K},be=function(Ce,_e){return[Ce*Math.cos(_e),-Ce*Math.sin(_e)]},pe=function(Ce){return r.pathAnnulus(Ce.rpx0,Ce.rpx1,Ce.x0,Ce.x1,q,re)},Te=function(Ce){return q+k(Ce)[0]*(Ce.transform.rCenter||0)+(Ce.transform.x||0)},ye=function(Ce){return re+k(Ce)[1]*(Ce.transform.rCenter||0)+(Ce.transform.y||0)};(R=R.data(Z,x.getPtId)).enter().append("g").classed("slice",!0),D?R.exit().transition().each(function(){var Ce=i.select(this);Ce.select("path.surface").transition().attrTween("d",function(_e){var we=function(Se){var Oe,Be=x.getPtId(Se),He=W[Be],Xe=W[x.getPtId(H)];if(Xe){var nt=(Se.x1>Xe.x1?2*Math.PI:0)+fe;Oe=Se.rpx1<Xe.rpx1?{x0:Se.x0,x1:Se.x1,rpx0:0,rpx1:0}:{x0:nt,x1:nt,rpx0:Se.rpx0,rpx1:Se.rpx1}}else{var et,qe=x.getPtId(Se.parent);R.each(function(_t){if(x.getPtId(_t)===qe)return et=_t});var Ye,ot=et.children;ot.forEach(function(_t,xt){if(x.getPtId(_t)===Be)return Ye=xt});var at=ot.length,ct=b(et.x0,et.x1);Oe={rpx0:K,rpx1:K,x0:ct(Ye/at),x1:ct((Ye+1)/at)}}return b(He,Oe)}(_e);return function(Se){return pe(we(Se))}}),Ce.select("g.slicetext").attr("opacity",0)}).remove():R.exit().remove(),R.order();var ke=null;if(D&&V){var ze=x.getPtId(V);R.each(function(Ce){null===ke&&x.getPtId(Ce)===ze&&(ke=Ce.x1)})}var je=R;function Ie(Ce){var _e=Ce.parent,we=W[x.getPtId(_e)],Se={};if(we){var Oe=_e.children,Be=Oe.indexOf(Ce),He=Oe.length,Xe=b(we.x0,we.x1);Se.x0=Xe(Be/He),Se.x1=Xe(Be/He)}else Se.x0=Se.x1=0;return Se}D&&(je=je.transition().each("end",function(){var Ce=i.select(this);x.setSliceCursor(Ce,C,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),je.each(function(Ce){var nt,_e=i.select(this),we=r.ensureSingle(_e,"path","surface",function(nt){nt.style("pointer-events","all")});Ce.rpx0=de(Ce.y0),Ce.rpx1=de(Ce.y1),Ce.xmid=(Ce.x0+Ce.x1)/2,Ce.pxmid=be(Ce.rpx1,Ce.xmid),Ce.midangle=-(Ce.xmid-Math.PI/2),Ce.startangle=-(Ce.x0-Math.PI/2),Ce.stopangle=-(Ce.x1-Math.PI/2),Ce.halfangle=.5*Math.min(r.angleDelta(Ce.x0,Ce.x1)||Math.PI,Math.PI),Ce.ring=1-Ce.rpx0/Ce.rpx1,Ce.rInscribed=0===(nt=Ce).rpx0&&r.isFullCircle([nt.x0,nt.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(nt.halfangle)),nt.ring/2)),D?we.transition().attrTween("d",function(nt){var et=function(qe){var Ye,ot=W[x.getPtId(qe)],at={x0:qe.x0,x1:qe.x1,rpx0:qe.rpx0,rpx1:qe.rpx1};if(ot)Ye=ot;else if(V)if(qe.parent)if(ke){var ct=(qe.x1>ke?2*Math.PI:0)+fe;Ye={x0:ct,x1:ct}}else r.extendFlat(Ye={rpx0:K,rpx1:K},Ie(qe));else Ye={rpx0:0,rpx1:0};else Ye={x0:fe,x1:fe};return b(Ye,at)}(nt);return function(qe){return pe(et(qe))}}):we.attr("d",pe),_e.call(_,H,C,L,{eventDataKeys:w.eventDataKeys,transitionTime:w.CLICK_TRANSITION_TIME,transitionEasing:w.CLICK_TRANSITION_EASING}).call(x.setSliceCursor,C,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:C._transitioning}),we.call(y,Ce,N);var Se=r.ensureSingle(_e,"g","slicetext"),Oe=r.ensureSingle(Se,"text","",function(nt){nt.attr("data-notex",1)}),Be=r.ensureUniformFontSize(C,x.determineTextFont(N,Ce,I.font));Oe.text(X.formatSliceLabel(Ce,H,N,L,I)).classed("slicetext",!0).attr("text-anchor","middle").call(p.font,Be).call(u.convertToTspans,C);var He=p.bBox(Oe.node());Ce.transform=g(He,Ce,S),Ce.transform.targetX=Te(Ce),Ce.transform.targetY=ye(Ce);var Xe=function(nt,et){var qe=nt.transform;return d(qe,et),qe.fontSize=Be.size,l(N.type,qe,I),r.getTextTransform(qe)};D?Oe.transition().attrTween("transform",function(nt){var et=function(qe){var Ye,ot=W[x.getPtId(qe)],at=qe.transform;if(ot)Ye=ot;else if(Ye={rpx1:qe.rpx1,transform:{textPosAngle:at.textPosAngle,scale:0,rotate:at.rotate,rCenter:at.rCenter,x:at.x,y:at.y}},V)if(qe.parent)if(ke){var ct=qe.x1>ke?2*Math.PI:0;Ye.x0=Ye.x1=ct}else r.extendFlat(Ye,Ie(qe));else Ye.x0=Ye.x1=fe;else Ye.x0=Ye.x1=fe;var _t=b(Ye.transform.textPosAngle,qe.transform.textPosAngle),xt=b(Ye.rpx1,qe.rpx1),Ht=b(Ye.x0,qe.x0),At=b(Ye.x1,qe.x1),ht=b(Ye.transform.scale,at.scale),st=b(Ye.transform.rotate,at.rotate),Bt=0===at.rCenter?3:0===Ye.transform.rCenter?1/3:1,gn=b(Ye.transform.rCenter,at.rCenter);return function(hn){var We=xt(hn),it=Ht(hn),qt=At(hn),Ge=gn(Math.pow(hn,Bt)),Pe={pxmid:be(We,(it+qt)/2),rpx1:We,transform:{textPosAngle:_t(hn),rCenter:Ge,x:at.x,y:at.y}};return l(N.type,at,I),{transform:{targetX:Te(Pe),targetY:ye(Pe),scale:ht(hn),rotate:st(hn),rCenter:Ge}}}}(nt);return function(qe){return Xe(et(qe),He)}}):Oe.attr("transform",Xe(Ce,He))})}function k(C){return P=C.transform.textPosAngle,[(L=C.rpx1)*Math.sin(P),-L*Math.cos(P)];var L,P}X.plot=function(C,L,P,A){var I,D,R=C._fullLayout,S=R._sunburstlayer,N=!P,B=!R.uniformtext.mode&&x.hasTransition(P);f("sunburst",R),(I=S.selectAll("g.trace.sunburst").data(L,function(H){return H[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),I.order(),B?(A&&(D=A()),i.transition().duration(P.duration).ease(P.easing).each("end",function(){D&&D()}).each("interrupt",function(){D&&D()}).each(function(){S.selectAll("g.trace").each(function(H){E(C,H,this,P)})})):(I.each(function(H){E(C,H,this,P)}),R.uniformtext.mode&&v(C,R._sunburstlayer.selectAll(".trace"),"sunburst")),N&&I.exit().remove()},X.formatSliceLabel=function(C,L,P,A,I){var D=P.texttemplate,R=P.textinfo;if(!(D||R&&"none"!==R))return"";var S=I.separators,B=C.data.data,H=A[0].hierarchy,Y=x.isHierarchyRoot(C),Q=x.getParent(H,C),ne=x.getValue(C);if(!D){var ae,te=R.split("+"),K=function(fe){return-1!==te.indexOf(fe)},q=[];if(K("label")&&B.label&&q.push(B.label),B.hasOwnProperty("v")&&K("value")&&q.push(x.formatValue(B.v,S)),!Y){K("current path")&&q.push(x.getPath(C.data));var re=0;K("percent parent")&&re++,K("percent entry")&&re++,K("percent root")&&re++;var V=re>1;if(re){var W,Z=function(fe){ae=x.formatPercent(W,S),V&&(ae+=" of "+fe),q.push(ae)};K("percent parent")&&!Y&&(W=ne/x.getValue(Q),Z("parent")),K("percent entry")&&(W=ne/x.getValue(L),Z("entry")),K("percent root")&&(W=ne/x.getValue(H),Z("root"))}}return K("text")&&(ae=r.castOption(P,B.i,"text"),r.isValidTextValue(ae)&&q.push(ae)),q.join("<br>")}var oe=r.castOption(P,B.i,"texttemplate");if(!oe)return"";var ie={};B.label&&(ie.label=B.label),B.hasOwnProperty("v")&&(ie.value=B.v,ie.valueLabel=x.formatValue(B.v,S)),ie.currentPath=x.getPath(C.data),Y||(ie.percentParent=ne/x.getValue(Q),ie.percentParentLabel=x.formatPercent(ie.percentParent,S),ie.parent=x.getPtLabel(Q)),ie.percentEntry=ne/x.getValue(L),ie.percentEntryLabel=x.formatPercent(ie.percentEntry,S),ie.entry=x.getPtLabel(L),ie.percentRoot=ne/x.getValue(H),ie.percentRootLabel=x.formatPercent(ie.percentRoot,S),ie.root=x.getPtLabel(H),B.hasOwnProperty("color")&&(ie.color=B.color);var ue=r.castOption(P,B.i,"text");return(r.isValidTextValue(ue)||""===ue)&&(ie.text=ue),ie.customdata=r.castOption(P,B.i,"customdata"),r.texttemplateString(oe,ie,I._d3locale,ie,P._meta||{})}},{"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../bar/style":955,"../bar/uniform_text":957,"../pie/helpers":1197,"../pie/plot":1201,"./constants":1333,"./fx":1335,"./helpers":1336,"./style":1341,"@plotly/d3":58,"d3-hierarchy":170,"d3-interpolate":171}],1341:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/color"),b=h("../../lib"),p=h("../bar/uniform_text").resizeText;function r(u,c,l){var f=c.data.data,s=!c.children,o=f.i,d=b.castOption(l,o,"marker.line.color")||m.defaultLine,g=b.castOption(l,o,"marker.line.width")||0;u.style("stroke-width",g).call(m.fill,f.color).call(m.stroke,d).style("opacity",s?l.leaf.opacity:null)}G.exports={style:function(u){var c=u._fullLayout._sunburstlayer.selectAll(".trace");p(u,c,"sunburst"),c.each(function(l){var f=i.select(this),s=l[0].trace;f.style("opacity",s.opacity),f.selectAll("path.surface").each(function(o){i.select(this).call(r,o,s)})})},styleOne:r}},{"../../components/color":666,"../../lib":803,"../bar/uniform_text":957,"@plotly/d3":58}],1342:[function(h,G,X){"use strict";var i=h("../../components/color"),m=h("../../components/colorscale/attributes"),b=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,p=h("../../plots/template_attributes").hovertemplateAttrs,r=h("../../plots/attributes"),u=h("../../lib/extend").extendFlat,c=h("../../plot_api/edit_types").overrideAll;function l(s){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:i.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:i.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var f=G.exports=c(u({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:p(),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},m("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:l(),y:l(),z:l()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:u({},m.zauto,{}),zmin:u({},m.zmin,{}),zmax:u({},m.zmax,{})},hoverinfo:u({},r.hoverinfo),showlegend:u({},r.showlegend,{dflt:!1})}),"calc","nested");f.x.editType=f.y.editType=f.z.editType="calc+clearAxisTypes",f.transforms=void 0},{"../../components/color":666,"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926}],1343:[function(h,G,X){"use strict";var i=h("../../components/colorscale/calc");G.exports=function(m,b){i(m,b,b.surfacecolor?{vals:b.surfacecolor,containerStr:"",cLetter:"c"}:{vals:b.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":674}],1344:[function(h,G,X){"use strict";var i=h("gl-surface3d"),m=h("ndarray"),b=h("ndarray-linear-interpolate").d2,p=h("../heatmap/interp2d"),r=h("../heatmap/find_empties"),u=h("../../lib").isArrayOrTypedArray,c=h("../../lib/gl_format_color").parseColorScale,l=h("../../lib/str2rgbarray"),f=h("../../components/colorscale").extractOpts;function s(P,A,I){this.scene=P,this.uid=I,this.surface=A,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var o=s.prototype;o.getXat=function(P,A,I,D){var R=u(this.data.x)?u(this.data.x[0])?this.data.x[A][P]:this.data.x[P]:P;return void 0===I?R:D.d2l(R,0,I)},o.getYat=function(P,A,I,D){var R=u(this.data.y)?u(this.data.y[0])?this.data.y[A][P]:this.data.y[A]:A;return void 0===I?R:D.d2l(R,0,I)},o.getZat=function(P,A,I,D){var R=this.data.z[A][P];return null===R&&this.data.connectgaps&&this.data._interpolatedZ&&(R=this.data._interpolatedZ[A][P]),void 0===I?R:D.d2l(R,0,I)},o.handlePick=function(P){if(P.object===this.surface){var I=(P.data.index[1]-1)/this.dataScaleY-1,D=Math.max(Math.min(Math.round((P.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),R=Math.max(Math.min(Math.round(I),this.data._ylength-1),0);P.index=[D,R],P.traceCoordinate=[this.getXat(D,R),this.getYat(D,R),this.getZat(D,R)],P.dataCoordinate=[this.getXat(D,R,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(D,R,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(D,R,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var S=0;S<3;S++)null!=P.dataCoordinate[S]&&(P.dataCoordinate[S]*=this.scene.dataScale[S]);var B=this.data.hovertext||this.data.text;return P.textLabel=Array.isArray(B)&&B[R]&&void 0!==B[R][D]?B[R][D]:B||"",P.data.dataCoordinate=P.dataCoordinate.slice(),this.surface.highlight(P.data),this.scene.glplot.spikes.position=P.dataCoordinate,!0}};var d=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function g(P,A){if(P<A)return 0;for(var I=0;0===Math.floor(P%A);)P/=A,I++;return I}function y(P){for(var A=[],I=0;I<d.length;I++)A.push(g(P,d[I]));return A}function v(P){for(var A=y(P),I=P,D=0;D<d.length;D++)if(A[D]>0){I=d[D];break}return I}function _(P,A){if(!(P<1||A<1)){for(var I=y(P),D=y(A),R=1,S=0;S<d.length;S++)R*=Math.pow(d[S],Math.max(I[S],D[S]));return R}}o.calcXnums=function(P){var A,I=[];for(A=1;A<P;A++){var D=this.getXat(A-1,0),R=this.getXat(A,0);I[A-1]=R!==D&&null!=D&&null!=R?Math.abs(R-D):0}var S=0;for(A=1;A<P;A++)S+=I[A-1];for(A=1;A<P;A++)I[A-1]=0===I[A-1]?1:Math.round(S/I[A-1]);return I},o.calcYnums=function(P){var A,I=[];for(A=1;A<P;A++){var D=this.getYat(0,A-1),R=this.getYat(0,A);I[A-1]=R!==D&&null!=D&&null!=R?Math.abs(R-D):0}var S=0;for(A=1;A<P;A++)S+=I[A-1];for(A=1;A<P;A++)I[A-1]=0===I[A-1]?1:Math.round(S/I[A-1]);return I};var w=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],x=w[9],E=w[13];function k(P,A,I){var D=I[8]+I[2]*A[0]+I[5]*A[1];return P[0]=(I[6]+I[0]*A[0]+I[3]*A[1])/D,P[1]=(I[7]+I[1]*A[0]+I[4]*A[1])/D,P}function C(P,A,I){return function(D,R,S,N){for(var B=[0,0],H=D.shape[0],Y=D.shape[1],Q=0;Q<H;Q++)for(var ne=0;ne<Y;ne++)S(B,[Q,ne],N),D.set(Q,ne,b(R,B[0],B[1]))}(P,A,k,I),P}function L(P,A){for(var I=!1,D=0;D<P.length;D++)if(A===P[D]){I=!0;break}!1===I&&P.push(A)}o.estimateScale=function(P,A){for(var I=1+function(R){if(0!==R.length){for(var S=1,N=0;N<R.length;N++)S=_(S,R[N]);return S}}(0===A?this.calcXnums(P):this.calcYnums(P));I<x;)I*=2;for(;I>E;)I--,I/=v(I),++I<x&&(I=E);var D=Math.round(I/P);return D>1?D:1},o.refineCoords=function(P){for(var A=this.dataScaleX,I=this.dataScaleY,D=P[0].shape[0],R=P[0].shape[1],S=0|Math.floor(P[0].shape[0]*A+1),N=0|Math.floor(P[0].shape[1]*I+1),B=1+D+1,H=1+R+1,Y=m(new Float32Array(B*H),[B,H]),Q=[1/A,0,0,0,1/I,0,0,0,1],ne=0;ne<P.length;++ne){this.surface.padField(Y,P[ne]);var ae=m(new Float32Array(S*N),[S,N]);C(ae,Y,Q),P[ne]=ae}},o.setContourLevels=function(){var P,A,D=[[],[],[]],R=[!1,!1,!1],S=!1;for(P=0;P<3;++P)if(this.showContour[P]&&(S=!0,this.contourSize[P]>0&&null!==this.contourStart[P]&&null!==this.contourEnd[P]&&this.contourEnd[P]>this.contourStart[P]))for(R[P]=!0,A=this.contourStart[P];A<this.contourEnd[P];A+=this.contourSize[P])L(D[P],A*this.scene.dataScale[P]);if(S){var N=[[],[],[]];for(P=0;P<3;++P)this.showContour[P]&&(N[P]=R[P]?D[P]:this.scene.contourLevels[P]);this.surface.update({levels:N})}},o.update=function(P){var A,I,D,R,S=this.scene,N=S.fullSceneLayout,B=this.surface,H=c(P),Y=S.dataScale,Q=P.z[0].length,ne=P._ylength,ae=S.contourLevels;this.data=P;var te=[];for(A=0;A<3;A++)for(te[A]=[],I=0;I<Q;I++)te[A][I]=[];for(I=0;I<Q;I++)for(D=0;D<ne;D++)te[0][I][D]=this.getXat(I,D,P.xcalendar,N.xaxis),te[1][I][D]=this.getYat(I,D,P.ycalendar,N.yaxis),te[2][I][D]=this.getZat(I,D,P.zcalendar,N.zaxis);if(P.connectgaps)for(P._emptypoints=r(te[2]),p(te[2],P._emptypoints),P._interpolatedZ=[],I=0;I<Q;I++)for(P._interpolatedZ[I]=[],D=0;D<ne;D++)P._interpolatedZ[I][D]=te[2][I][D];for(A=0;A<3;A++)for(I=0;I<Q;I++)for(D=0;D<ne;D++)null==(R=te[A][I][D])?te[A][I][D]=NaN:R=te[A][I][D]*=Y[A];for(A=0;A<3;A++)for(I=0;I<Q;I++)for(D=0;D<ne;D++)null!=(R=te[A][I][D])&&(this.minValues[A]>R&&(this.minValues[A]=R),this.maxValues[A]<R&&(this.maxValues[A]=R));for(A=0;A<3;A++)this.objectOffset[A]=.5*(this.minValues[A]+this.maxValues[A]);for(A=0;A<3;A++)for(I=0;I<Q;I++)for(D=0;D<ne;D++)null!=(R=te[A][I][D])&&(te[A][I][D]-=this.objectOffset[A]);var K=[m(new Float32Array(Q*ne),[Q,ne]),m(new Float32Array(Q*ne),[Q,ne]),m(new Float32Array(Q*ne),[Q,ne])];for(A=0;A<3;A++)for(I=0;I<Q;I++)for(D=0;D<ne;D++)K[A].set(I,D,te[A][I][D]);te=[];var q={colormap:H,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!P.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:P.opacityscale,opacity:P.opacity},re=f(P);if(q.intensityBounds=[re.min,re.max],P.surfacecolor){var V=m(new Float32Array(Q*ne),[Q,ne]);for(I=0;I<Q;I++)for(D=0;D<ne;D++)V.set(I,D,P.surfacecolor[D][I]);K.push(V)}else q.intensityBounds[0]*=Y[2],q.intensityBounds[1]*=Y[2];(E<K[0].shape[0]||E<K[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(K[0].shape[0],0),this.dataScaleY=this.estimateScale(K[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(K)),P.surfacecolor&&(q.intensity=K.pop());var ie,ue,fe,W=[!0,!0,!0],Z=["x","y","z"];for(A=0;A<3;++A){var oe=P.contours[Z[A]];W[A]=oe.highlight,q.showContour[A]=oe.show||oe.highlight,q.showContour[A]&&(q.contourProject[A]=[oe.project.x,oe.project.y,oe.project.z],oe.show?(this.showContour[A]=!0,q.levels[A]=ae[A],B.highlightColor[A]=q.contourColor[A]=l(oe.color),B.highlightTint[A]=q.contourTint[A]=oe.usecolormap?0:1,q.contourWidth[A]=oe.width,this.contourStart[A]=oe.start,this.contourEnd[A]=oe.end,this.contourSize[A]=oe.size):(this.showContour[A]=!1,this.contourStart[A]=null,this.contourEnd[A]=null,this.contourSize[A]=0),oe.highlight&&(q.dynamicColor[A]=l(oe.highlightcolor),q.dynamicWidth[A]=oe.highlightwidth))}(ue=(ie=H)[0].rgb)[0]===(fe=ie[ie.length-1].rgb)[0]&&ue[1]===fe[1]&&ue[2]===fe[2]&&ue[3]===fe[3]&&(q.vertexColor=!0),q.objectOffset=this.objectOffset,q.coords=K,B.update(q),B.visible=P.visible,B.enableDynamic=W,B.enableHighlight=W,B.snapToData=!0,"lighting"in P&&(B.ambientLight=P.lighting.ambient,B.diffuseLight=P.lighting.diffuse,B.specularLight=P.lighting.specular,B.roughness=P.lighting.roughness,B.fresnel=P.lighting.fresnel),"lightposition"in P&&(B.lightPosition=[P.lightposition.x,P.lightposition.y,P.lightposition.z])},o.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},G.exports=function(P,A){var D=i({gl:P.glplot.gl}),R=new s(P,D,A.uid);return D._trace=R,R.update(A),P.glplot.add(D),R}},{"../../components/colorscale":678,"../../lib":803,"../../lib/gl_format_color":799,"../../lib/str2rgbarray":828,"../heatmap/find_empties":1091,"../heatmap/interp2d":1094,"gl-surface3d":354,ndarray:483,"ndarray-linear-interpolate":477}],1345:[function(h,G,X){"use strict";var i=h("../../registry"),m=h("../../lib"),b=h("../../components/colorscale/defaults"),p=h("./attributes");function r(c,l,f,s){var o=s("opacityscale");"max"===o?l.opacityscale=[[0,.1],[1,1]]:"min"===o?l.opacityscale=[[0,1],[1,.1]]:"extremes"===o?l.opacityscale=function(d,g){for(var y=[],v=0;v<32;v++){var _=v/31,w=.1+.9*(1-Math.pow(Math.sin(1*_*Math.PI),2));y.push([_,Math.max(0,Math.min(1,w))])}return y}():function(d){var g=0;if(!Array.isArray(d)||d.length<2||!d[0]||!d[d.length-1]||0!=+d[0][0]||1!=+d[d.length-1][0])return!1;for(var y=0;y<d.length;y++){var v=d[y];if(2!==v.length||+v[0]<g)return!1;g=+v[0]}return!0}(o)||(l.opacityscale=void 0)}function u(c,l,f){l in c&&!(f in c)&&(c[f]=c[l])}G.exports={supplyDefaults:function(c,l,f,s){var o,d;function g(L,P){return m.coerce(c,l,p,L,P)}var y=g("x"),v=g("y"),_=g("z");if(!_||!_.length||y&&y.length<1||v&&v.length<1)l.visible=!1;else{l._xlength=Array.isArray(y)&&m.isArrayOrTypedArray(y[0])?_.length:_[0].length,l._ylength=_.length,i.getComponentMethod("calendars","handleTraceDefaults")(c,l,["x","y","z"],s),g("text"),g("hovertext"),g("hovertemplate"),g("xhoverformat"),g("yhoverformat"),g("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(L){g(L)});var w=g("surfacecolor"),x=["x","y","z"];for(o=0;o<3;++o){var E="contours."+x[o],k=g(E+".show"),C=g(E+".highlight");if(k||C)for(d=0;d<3;++d)g(E+".project."+x[d]);k&&(g(E+".color"),g(E+".width"),g(E+".usecolormap")),C&&(g(E+".highlightcolor"),g(E+".highlightwidth")),g(E+".start"),g(E+".end"),g(E+".size")}w||(u(c,"zmin","cmin"),u(c,"zmax","cmax"),u(c,"zauto","cauto")),b(c,l,s,g,{prefix:"",cLetter:"c"}),r(0,l,0,g),l._length=null}},opacityscaleDefaults:r}},{"../../components/colorscale/defaults":676,"../../lib":803,"../../registry":931,"./attributes":1342}],1346:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:h("./calc"),plot:h("./convert"),moduleType:"trace",name:"surface",basePlotModule:h("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":896,"./attributes":1342,"./calc":1343,"./convert":1344,"./defaults":1345}],1347:[function(h,G,X){"use strict";var i=h("../../components/annotations/attributes"),m=h("../../lib/extend").extendFlat,b=h("../../plot_api/edit_types").overrideAll,p=h("../../plots/font_attributes"),r=h("../../plots/domain").attributes,u=h("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;(G.exports=b({domain:r({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:u("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:m({},i.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:m({},p({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:u("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:m({},i.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:m({},p({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":649,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/cartesian/axis_format_attributes":857,"../../plots/domain":882,"../../plots/font_attributes":883}],1348:[function(h,G,X){"use strict";var i=h("../../plots/get_data").getModuleCalcData,m=h("./plot");X.name="table",X.plot=function(b){var p=i(b.calcdata,"table")[0];p.length&&m(b,p)},X.clean=function(b,p,r,u){var c=u._has&&u._has("table"),l=p._has&&p._has("table");c&&!l&&u._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":891,"./plot":1355}],1349:[function(h,G,X){"use strict";var i=h("../../lib/gup").wrap;G.exports=function(){return i({})}},{"../../lib/gup":800}],1350:[function(h,G,X){"use strict";G.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1351:[function(h,G,X){"use strict";var i=h("./constants"),m=h("../../lib/extend").extendFlat,b=h("fast-isnumeric");function p(o){if(Array.isArray(o)){for(var d=0,g=0;g<o.length;g++)d=Math.max(d,p(o[g]));return d}return o}function r(o,d){return o+d}function u(o){var d,g=o.slice(),y=1/0,v=0;for(d=0;d<g.length;d++)Array.isArray(g[d])||(g[d]=[g[d]]),y=Math.min(y,g[d].length),v=Math.max(v,g[d].length);if(y!==v)for(d=0;d<g.length;d++){var _=v-g[d].length;_&&(g[d]=g[d].concat(c(_)))}return g}function c(o){for(var d=new Array(o),g=0;g<o;g++)d[g]="";return d}function l(o){return o.calcdata.columns.reduce(function(d,g){return g.xIndex<o.xIndex?d+g.columnWidth:d},0)}function f(o,d){return Object.keys(o).map(function(g){return m({},o[g],{auxiliaryBlocks:d})})}function s(o,d){for(var g,y={},v=0,_=0,w={firstRowIndex:null,lastRowIndex:null,rows:[]},x=0,E=0,k=0;k<o.length;k++)w.rows.push({rowIndex:k,rowHeight:g=o[k]}),((_+=g)>=d||k===o.length-1)&&(y[v]=w,w.key=E++,w.firstRowIndex=x,w.lastRowIndex=k,w={firstRowIndex:null,lastRowIndex:null,rows:[]},v+=_,x=k+1,_=0);return y}G.exports=function(o,d){var g=u(d.cells.values),y=function(Y){return Y.slice(d.header.values.length,Y.length)},v=u(d.header.values);v.length&&!v[0].length&&(v[0]=[""],v=u(v));var _=v.concat(y(g).map(function(){return c((v[0]||[""]).length)})),w=d.domain,x=Math.floor(o._fullLayout._size.w*(w.x[1]-w.x[0])),E=Math.floor(o._fullLayout._size.h*(w.y[1]-w.y[0])),k=d.header.values.length?_[0].map(function(){return d.header.height}):[i.emptyHeaderHeight],C=g.length?g[0].map(function(){return d.cells.height}):[],L=k.reduce(r,0),P=s(C,E-L+i.uplift),A=f(s(k,L),[]),I=f(P,A),D={},R=d._fullInput.columnorder.concat(y(g.map(function(Y,Q){return Q}))),S=_.map(function(Y,Q){var ne=Array.isArray(d.columnwidth)?d.columnwidth[Math.min(Q,d.columnwidth.length-1)]:d.columnwidth;return b(ne)?Number(ne):1}),N=S.reduce(r,0);S=S.map(function(Y){return Y/N*x});var B=Math.max(p(d.header.line.width),p(d.cells.line.width)),H={key:d.uid+o._context.staticPlot,translateX:w.x[0]*o._fullLayout._size.w,translateY:o._fullLayout._size.h*(1-w.y[1]),size:o._fullLayout._size,width:x,maxLineWidth:B,height:E,columnOrder:R,groupHeight:E,rowBlocks:I,headerRowBlocks:A,scrollY:0,cells:m({},d.cells,{values:g}),headerCells:m({},d.header,{values:_}),gdColumns:_.map(function(Y){return Y[0]}),gdColumnsOriginalOrder:_.map(function(Y){return Y[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:_.map(function(Y,Q){return D[Y]=(D[Y]||0)+1,{key:Y+"__"+D[Y],label:Y,specIndex:Q,xIndex:R[Q],xScale:l,x:void 0,calcdata:void 0,columnWidth:S[Q]}})};return H.columns.forEach(function(Y){Y.calcdata=H,Y.x=l(Y)}),H}},{"../../lib/extend":793,"./constants":1350,"fast-isnumeric":249}],1352:[function(h,G,X){"use strict";var i=h("../../lib/extend").extendFlat;X.splitToPanels=function(m){var b=[0,0],p=i({},m,{key:"header",type:"header",page:0,prevPages:b,currentRepaint:[null,null],dragHandle:!0,values:m.calcdata.headerCells.values[m.specIndex],rowBlocks:m.calcdata.headerRowBlocks,calcdata:i({},m.calcdata,{cells:m.calcdata.headerCells})});return[i({},m,{key:"cells1",type:"cells",page:0,prevPages:b,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks}),i({},m,{key:"cells2",type:"cells",page:1,prevPages:b,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks}),p]},X.splitToCells=function(m){var p,r,u,b=[u=(r=(p=m).rowBlocks[p.page])?r.rows[0].rowIndex:0,r?u+r.rows.length:0];return(m.values||[]).slice(b[0],b[1]).map(function(p,r){return{keyWithinBlock:r+("string"==typeof p&&p.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:b[0]+r,column:m,calcdata:m.calcdata,page:m.page,rowBlocks:m.rowBlocks,value:p}})}},{"../../lib/extend":793}],1353:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./attributes"),b=h("../../plots/domain").defaults;G.exports=function(p,r,u,c){function l(f,s){return i.coerce(p,r,m,f,s)}b(r,c,l),l("columnwidth"),l("header.values"),l("header.format"),l("header.align"),l("header.prefix"),l("header.suffix"),l("header.height"),l("header.line.width"),l("header.line.color"),l("header.fill.color"),i.coerceFont(l,"header.font",i.extendFlat({},c.font)),function(f,s){for(var d=f.header.values.length,g=(f.columnorder||[]).slice(0,d),y=g.slice().sort(function(w,x){return w-x}),v=g.map(function(w){return y.indexOf(w)}),_=v.length;_<d;_++)v.push(_);s("columnorder",v)}(r,l),l("cells.values"),l("cells.format"),l("cells.align"),l("cells.prefix"),l("cells.suffix"),l("cells.height"),l("cells.line.width"),l("cells.line.color"),l("cells.fill.color"),i.coerceFont(l,"cells.font",i.extendFlat({},c.font)),r._length=null}},{"../../lib":803,"../../plots/domain":882,"./attributes":1347}],1354:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),calc:h("./calc"),plot:h("./plot"),moduleType:"trace",name:"table",basePlotModule:h("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1347,"./base_plot":1348,"./calc":1349,"./defaults":1353,"./plot":1355}],1355:[function(h,G,X){"use strict";var i=h("./constants"),m=h("@plotly/d3"),b=h("../../lib").numberFormat,p=h("../../lib/gup"),r=h("../../components/drawing"),u=h("../../lib/svg_text_utils"),c=h("../../lib").raiseToTop,l=h("../../lib").strTranslate,f=h("../../lib").cancelTransition,s=h("./data_preparation_helper"),o=h("./data_split_helpers"),d=h("../../components/color");function g(K){return Math.ceil(K.calcdata.maxLineWidth/2)}function y(K,q){return"clip"+K._fullLayout._uid+"_scrollAreaBottomClip_"+q.key}function v(K,q){return"clip"+K._fullLayout._uid+"_columnBoundaryClippath_"+q.calcdata.key+"_"+q.specIndex}function _(K){return[].concat.apply([],K.map(function(q){return q})).map(function(q){return q.__data__})}function w(K,q,re){var V=K.selectAll("."+i.cn.scrollbarKit).data(p.repeat,p.keyFun);V.enter().append("g").classed(i.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),V.each(function(ue){var de,fe=ue.scrollbarState;fe.totalHeight=Q(de=ue.rowBlocks,de.length-1)+(de.length?ne(de[de.length-1],1/0):1),fe.scrollableAreaHeight=ue.groupHeight-I(ue),fe.currentlyVisibleHeight=Math.min(fe.totalHeight,fe.scrollableAreaHeight),fe.ratio=fe.currentlyVisibleHeight/fe.totalHeight,fe.barLength=Math.max(fe.ratio*fe.currentlyVisibleHeight,i.goldenRatio*i.scrollbarWidth),fe.barWiggleRoom=fe.currentlyVisibleHeight-fe.barLength,fe.wiggleRoom=Math.max(0,fe.totalHeight-fe.scrollableAreaHeight),fe.topY=0===fe.barWiggleRoom?0:ue.scrollY/fe.wiggleRoom*fe.barWiggleRoom,fe.bottomY=fe.topY+fe.barLength,fe.dragMultiplier=fe.wiggleRoom/fe.barWiggleRoom}).attr("transform",function(ue){return l(ue.width+i.scrollbarWidth/2+i.scrollbarOffset,I(ue))});var W=V.selectAll("."+i.cn.scrollbar).data(p.repeat,p.keyFun);W.enter().append("g").classed(i.cn.scrollbar,!0);var Z=W.selectAll("."+i.cn.scrollbarSlider).data(p.repeat,p.keyFun);Z.enter().append("g").classed(i.cn.scrollbarSlider,!0),Z.attr("transform",function(ue){return l(0,ue.scrollbarState.topY||0)});var oe=Z.selectAll("."+i.cn.scrollbarGlyph).data(p.repeat,p.keyFun);oe.enter().append("line").classed(i.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",i.scrollbarWidth).attr("stroke-linecap","round").attr("y1",i.scrollbarWidth/2),oe.attr("y2",function(ue){return ue.scrollbarState.barLength-i.scrollbarWidth/2}).attr("stroke-opacity",function(ue){return ue.columnDragInProgress||!ue.scrollbarState.barWiggleRoom||re?0:.4}),oe.transition().delay(0).duration(0),oe.transition().delay(i.scrollbarHideDelay).duration(i.scrollbarHideDuration).attr("stroke-opacity",0);var ie=W.selectAll("."+i.cn.scrollbarCaptureZone).data(p.repeat,p.keyFun);ie.enter().append("line").classed(i.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",i.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ue){var fe=m.event.y,he=this.getBoundingClientRect(),de=ue.scrollbarState,be=fe-he.top,pe=m.scale.linear().domain([0,de.scrollableAreaHeight]).range([0,de.totalHeight]).clamp(!0);de.topY<=be&&be<=de.bottomY||R(q,K,null,pe(be-de.barLength/2))(ue)}).call(m.behavior.drag().origin(function(ue){return m.event.stopPropagation(),ue.scrollbarState.scrollbarScrollInProgress=!0,ue}).on("drag",R(q,K)).on("dragend",function(){})),ie.attr("y2",function(ue){return ue.scrollbarState.scrollableAreaHeight}),q._context.staticPlot&&(oe.remove(),ie.remove())}function x(K,q,re,V){var ie,W=function(oe){var ie=oe.selectAll("."+i.cn.columnCell).data(o.splitToCells,function(ue){return ue.keyWithinBlock});return ie.enter().append("g").classed(i.cn.columnCell,!0),ie.exit().remove(),ie}(((ie=re.selectAll("."+i.cn.columnCells).data(p.repeat,p.keyFun)).enter().append("g").classed(i.cn.columnCells,!0),ie.exit().remove(),ie));W.each(function(ie,ue){var fe=ie.calcdata.cells.font,he=ie.column.specIndex,de={size:C(fe.size,he,ue),color:C(fe.color,he,ue),family:C(fe.family,he,ue)};ie.rowNumber=ie.key,ie.align=C(ie.calcdata.cells.align,he,ue),ie.cellBorderWidth=C(ie.calcdata.cells.line.width,he,ue),ie.font=de}),function(oe){oe.attr("width",function(ie){return ie.column.columnWidth}).attr("stroke-width",function(ie){return ie.cellBorderWidth}).each(function(ie){var ue=m.select(this);d.stroke(ue,C(ie.calcdata.cells.line.color,ie.column.specIndex,ie.rowNumber)),d.fill(ue,C(ie.calcdata.cells.fill.color,ie.column.specIndex,ie.rowNumber))})}(function(oe){var ie=oe.selectAll("."+i.cn.cellRect).data(p.repeat,function(ue){return ue.keyWithinBlock});return ie.enter().append("rect").classed(i.cn.cellRect,!0),ie}(W));var Z=function(oe){var ie=oe.selectAll("."+i.cn.cellText).data(p.repeat,function(ue){return ue.keyWithinBlock});return ie.enter().append("text").classed(i.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){m.event.stopPropagation()}),ie}(function(oe){var ie=oe.selectAll("."+i.cn.cellTextHolder).data(p.repeat,function(ue){return ue.keyWithinBlock});return ie.enter().append("g").classed(i.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ie}(W));(function(oe){oe.each(function(ie){r.font(m.select(this),ie.font)})})(Z),E(Z,q,V,K),Y(W)}function E(K,q,re,V){K.text(function(W){var Z=W.column.specIndex,oe=W.rowNumber,ie=W.value,ue="string"==typeof ie,fe=ue&&ie.match(/<br>/i),he=!ue||fe;W.mayHaveMarkup=ue&&ie.match(/[<&>]/);var de,be="string"==typeof(de=ie)&&de.match(i.latexCheck);W.latex=be;var pe,Te,ye=be?"":C(W.calcdata.cells.prefix,Z,oe)||"",ke=be?"":C(W.calcdata.cells.suffix,Z,oe)||"",ze=be?null:C(W.calcdata.cells.format,Z,oe)||null,je=ye+(ze?b(ze)(W.value):W.value)+ke;if(W.wrappingNeeded=!W.wrapped&&!he&&!be&&(pe=k(je)),W.cellHeightMayIncrease=fe||be||W.mayHaveMarkup||(void 0===pe?k(je):pe),W.needsConvertToTspans=W.mayHaveMarkup||W.wrappingNeeded||W.latex,W.wrappingNeeded){var Ie=(" "===i.wrapSplitCharacter?je.replace(/<a href=/gi,"<a_href="):je).split(i.wrapSplitCharacter),Ce=" "===i.wrapSplitCharacter?Ie.map(function(_e){return _e.replace(/<a_href=/gi,"<a href=")}):Ie;W.fragments=Ce.map(function(_e){return{text:_e,width:null}}),W.fragments.push({fragment:i.wrapSpacer,width:null}),Te=Ce.join(i.lineBreaker)+i.lineBreaker+i.wrapSpacer}else delete W.fragments,Te=je;return Te}).attr("dy",function(W){return W.needsConvertToTspans?0:"0.75em"}).each(function(W){var Z=m.select(this);W.needsConvertToTspans?u.convertToTspans(Z,V,(W.wrappingNeeded?N:B)(re,this,q,V,W)):m.select(this.parentNode).attr("transform",function(ie){return l(H(ie),i.cellPad)}).attr("text-anchor",function(ie){return{left:"start",center:"middle",right:"end"}[ie.align]})})}function k(K){return-1!==K.indexOf(i.wrapSplitCharacter)}function C(K,q,re){if(Array.isArray(K)){var V=K[Math.min(q,K.length-1)];return Array.isArray(V)?V[Math.min(re,V.length-1)]:V}return K}function L(K,q,re){K.transition().ease(i.releaseTransitionEase).duration(i.releaseTransitionDuration).attr("transform",l(q.x,re))}function P(K){return"cells"===K.type}function A(K){return"header"===K.type}function I(K){return(K.rowBlocks.length?K.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(q,re){return q+ne(re,1/0)},0)}function D(K,q,re){var V=_(q)[0];if(void 0!==V){var W=V.rowBlocks,Z=V.calcdata,oe=Q(W,W.length),ie=V.calcdata.groupHeight-I(V),ue=Z.scrollY=Math.max(0,Math.min(oe-ie,Z.scrollY)),fe=function(he,de,be){for(var pe=[],Te=0,ye=0;ye<he.length;ye++){for(var ke=he[ye],ze=ke.rows,je=0,Ie=0;Ie<ze.length;Ie++)je+=ze[Ie].rowHeight;ke.allRowsHeight=je,de<Te+je&&de+be>Te&&pe.push(ye),Te+=je}return pe}(W,ue,ie);1===fe.length&&(fe[0]===W.length-1?fe.unshift(fe[0]-1):fe.push(fe[0]+1)),fe[0]%2&&fe.reverse(),q.each(function(he,de){he.page=fe[de],he.scrollY=ue}),q.attr("transform",function(he){var de=Q(he.rowBlocks,he.page)-he.scrollY;return l(0,de)}),K&&(S(K,re,q,fe,V.prevPages,V,0),S(K,re,q,fe,V.prevPages,V,1),w(re,K))}}function R(K,q,re,V){return function(W){var Z=W.calcdata?W.calcdata:W,oe=q.filter(function(he){return Z.key===he.key}),ue=Z.scrollY;Z.scrollY=void 0===V?Z.scrollY+(re||Z.scrollbarState.dragMultiplier)*m.event.dy:V;var fe=oe.selectAll("."+i.cn.yColumn).selectAll("."+i.cn.columnBlock).filter(P);return D(K,fe,oe),Z.scrollY===ue}}function S(K,q,re,V,W,Z,oe){V[oe]!==W[oe]&&(clearTimeout(Z.currentRepaint[oe]),Z.currentRepaint[oe]=setTimeout(function(){var ie=re.filter(function(ue,fe){return fe===oe&&V[fe]!==W[fe]});x(K,q,ie,re),W[oe]=V[oe]}))}function N(K,q,re,V){return function(){var W=m.select(q.parentNode);W.each(function(Z){var oe=Z.fragments;W.selectAll("tspan.line").each(function(Te,ye){oe[ye].width=this.getComputedTextLength()});var ie,ue,fe=oe[oe.length-1].width,he=oe.slice(0,-1),de=[],be=0,pe=Z.column.columnWidth-2*i.cellPad;for(Z.value="";he.length;)be+(ue=(ie=he.shift()).width+fe)>pe&&(Z.value+=de.join(i.wrapSpacer)+i.lineBreaker,de=[],be=0),de.push(ie.text),be+=ue;be&&(Z.value+=de.join(i.wrapSpacer)),Z.wrapped=!0}),W.selectAll("tspan.line").remove(),E(W.select("."+i.cn.cellText),re,K,V),m.select(q.parentNode.parentNode).call(Y)}}function B(K,q,re,V,W){return function(){if(!W.settledY){var Z=m.select(q.parentNode),oe=te(W),ie=W.key-oe.firstRowIndex,ue=oe.rows[ie].rowHeight,fe=W.cellHeightMayIncrease?q.parentNode.getBoundingClientRect().height+2*i.cellPad:ue,he=Math.max(fe,ue);he-oe.rows[ie].rowHeight&&(oe.rows[ie].rowHeight=he,K.selectAll("."+i.cn.columnCell).call(Y),D(null,K.filter(P),0),w(re,V,!0)),Z.attr("transform",function(){var de=this.parentNode.getBoundingClientRect(),be=m.select(this.parentNode).select("."+i.cn.cellRect).node().getBoundingClientRect(),pe=this.transform.baseVal.consolidate(),Te=be.top-de.top+(pe?pe.matrix.f:i.cellPad);return l(H(W,m.select(this.parentNode).select("."+i.cn.cellTextHolder).node().getBoundingClientRect().width),Te)}),W.settledY=!0}}}function H(K,q){switch(K.align){case"left":return i.cellPad;case"right":return K.column.columnWidth-(q||0)-i.cellPad;case"center":return(K.column.columnWidth-(q||0))/2;default:return i.cellPad}}function Y(K){K.attr("transform",function(q){var re=q.rowBlocks[0].auxiliaryBlocks.reduce(function(W,Z){return W+ne(Z,1/0)},0),V=ne(te(q),q.key);return l(0,V+re)}).selectAll("."+i.cn.cellRect).attr("height",function(q){return(re=te(q),V=q.key,re.rows[V-re.firstRowIndex]).rowHeight;var re,V})}function Q(K,q){for(var re=0,V=q-1;V>=0;V--)re+=ae(K[V]);return re}function ne(K,q){for(var re=0,V=0;V<K.rows.length&&K.rows[V].rowIndex<q;V++)re+=K.rows[V].rowHeight;return re}function ae(K){var q=K.allRowsHeight;if(void 0!==q)return q;for(var re=0,V=0;V<K.rows.length;V++)re+=K.rows[V].rowHeight;return K.allRowsHeight=re,re}function te(K){return K.rowBlocks[K.page]}G.exports=function(K,q){var re=!K._context.staticPlot,V=K._fullLayout._paper.selectAll("."+i.cn.table).data(q.map(function(ke){var ze=p.unwrap(ke).trace;return s(K,ze)}),p.keyFun);V.exit().remove(),V.enter().append("g").classed(i.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),V.attr("width",function(ke){return ke.width+ke.size.l+ke.size.r}).attr("height",function(ke){return ke.height+ke.size.t+ke.size.b}).attr("transform",function(ke){return l(ke.translateX,ke.translateY)});var W=V.selectAll("."+i.cn.tableControlView).data(p.repeat,p.keyFun),Z=W.enter().append("g").classed(i.cn.tableControlView,!0).style("box-sizing","content-box");if(re){var oe="onwheel"in document?"wheel":"mousewheel";Z.on("mousemove",function(ke){W.filter(function(ze){return ke===ze}).call(w,K)}).on(oe,function(ke){ke.scrollbarState.wheeling||(ke.scrollbarState.wheeling=!0,R(K,W,null,ke.scrollY+m.event.deltaY)(ke)||(m.event.stopPropagation(),m.event.preventDefault()),ke.scrollbarState.wheeling=!1)}).call(w,K,!0)}W.attr("transform",function(ke){return l(ke.size.l,ke.size.t)});var ie=W.selectAll("."+i.cn.scrollBackground).data(p.repeat,p.keyFun);ie.enter().append("rect").classed(i.cn.scrollBackground,!0).attr("fill","none"),ie.attr("width",function(ke){return ke.width}).attr("height",function(ke){return ke.height}),W.each(function(ke){r.setClipUrl(m.select(this),y(K,ke),K)});var ue=W.selectAll("."+i.cn.yColumn).data(function(ke){return ke.columns},p.keyFun);ue.enter().append("g").classed(i.cn.yColumn,!0),ue.exit().remove(),ue.attr("transform",function(ke){return l(ke.x,0)}),re&&ue.call(m.behavior.drag().origin(function(ke){return L(m.select(this),ke,-i.uplift),c(this),ke.calcdata.columnDragInProgress=!0,w(W.filter(function(ze){return ke.calcdata.key===ze.key}),K),ke}).on("drag",function(ke){var ze=m.select(this),je=function(Ie){return(ke===Ie?m.event.x:Ie.x)+Ie.columnWidth/2};ke.x=Math.max(-i.overdrag,Math.min(ke.calcdata.width+i.overdrag-ke.columnWidth,m.event.x)),_(ue).filter(function(Ie){return Ie.calcdata.key===ke.calcdata.key}).sort(function(Ie,Ce){return je(Ie)-je(Ce)}).forEach(function(Ie,Ce){Ie.xIndex=Ce,Ie.x=ke===Ie?Ie.x:Ie.xScale(Ie)}),ue.filter(function(Ie){return ke!==Ie}).transition().ease(i.transitionEase).duration(i.transitionDuration).attr("transform",function(Ie){return l(Ie.x,0)}),ze.call(f).attr("transform",l(ke.x,-i.uplift))}).on("dragend",function(ke){var Ie,Ce,_e,we,ze=m.select(this),je=ke.calcdata;ke.x=ke.xScale(ke),ke.calcdata.columnDragInProgress=!1,L(ze,ke,0),Ie=K,Ce=je,_e=je.columns.map(function(Ie){return Ie.xIndex}),we=Ce.gdColumnsOriginalOrder,Ce.gdColumns.sort(function(Se,Oe){return _e[we.indexOf(Se)]-_e[we.indexOf(Oe)]}),Ce.columnorder=_e,Ie.emit("plotly_restyle")})),ue.each(function(ke){r.setClipUrl(m.select(this),v(K,ke),K)});var fe=ue.selectAll("."+i.cn.columnBlock).data(o.splitToPanels,p.keyFun);fe.enter().append("g").classed(i.cn.columnBlock,!0).attr("id",function(ke){return ke.key}),fe.style("cursor",function(ke){return ke.dragHandle?"ew-resize":ke.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var he=fe.filter(A),de=fe.filter(P);re&&de.call(m.behavior.drag().origin(function(ke){return m.event.stopPropagation(),ke}).on("drag",R(K,W,-1)).on("dragend",function(){})),x(K,W,he,fe),x(K,W,de,fe);var be=W.selectAll("."+i.cn.scrollAreaClip).data(p.repeat,p.keyFun);be.enter().append("clipPath").classed(i.cn.scrollAreaClip,!0).attr("id",function(ke){return y(K,ke)});var pe=be.selectAll("."+i.cn.scrollAreaClipRect).data(p.repeat,p.keyFun);pe.enter().append("rect").classed(i.cn.scrollAreaClipRect,!0).attr("x",-i.overdrag).attr("y",-i.uplift).attr("fill","none"),pe.attr("width",function(ke){return ke.width+2*i.overdrag}).attr("height",function(ke){return ke.height+i.uplift}),ue.selectAll("."+i.cn.columnBoundary).data(p.repeat,p.keyFun).enter().append("g").classed(i.cn.columnBoundary,!0);var Te=ue.selectAll("."+i.cn.columnBoundaryClippath).data(p.repeat,p.keyFun);Te.enter().append("clipPath").classed(i.cn.columnBoundaryClippath,!0),Te.attr("id",function(ke){return v(K,ke)});var ye=Te.selectAll("."+i.cn.columnBoundaryRect).data(p.repeat,p.keyFun);ye.enter().append("rect").classed(i.cn.columnBoundaryRect,!0).attr("fill","none"),ye.attr("width",function(ke){return ke.columnWidth+2*g(ke)}).attr("height",function(ke){return ke.calcdata.height+2*g(ke)+i.uplift}).attr("x",function(ke){return-g(ke)}).attr("y",function(ke){return-g(ke)}),D(null,de,W)}},{"../../components/color":666,"../../components/drawing":688,"../../lib":803,"../../lib/gup":800,"../../lib/svg_text_utils":829,"./constants":1350,"./data_preparation_helper":1351,"./data_split_helpers":1352,"@plotly/d3":58}],1356:[function(h,G,X){"use strict";var i=h("../../plots/template_attributes").hovertemplateAttrs,m=h("../../plots/template_attributes").texttemplateAttrs,b=h("../../components/colorscale/attributes"),p=h("../../plots/domain").attributes,r=h("../pie/attributes"),u=h("../sunburst/attributes"),c=h("./constants"),l=h("../../lib/extend").extendFlat;G.exports={labels:u.labels,parents:u.parents,values:u.values,branchvalues:u.branchvalues,count:u.count,level:u.level,maxdepth:u.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:l({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:u.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:u.marker.line,editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:l({},r.textfont,{}),editType:"calc"},text:r.text,textinfo:u.textinfo,texttemplate:m({editType:"plot"},{keys:c.eventDataKeys.concat(["label","value"])}),hovertext:r.hovertext,hoverinfo:u.hoverinfo,hovertemplate:i({},{keys:c.eventDataKeys}),textfont:r.textfont,insidetextfont:r.insidetextfont,outsidetextfont:l({},r.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:r.sort,root:u.root,domain:p({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/domain":882,"../../plots/template_attributes":926,"../pie/attributes":1192,"../sunburst/attributes":1330,"./constants":1359}],1357:[function(h,G,X){"use strict";var i=h("../../plots/plots");X.name="treemap",X.plot=function(m,b,p,r){i.plotBasePlot(X.name,m,b,p,r)},X.clean=function(m,b,p,r){i.cleanBasePlot(X.name,m,b,p,r)}},{"../../plots/plots":917}],1358:[function(h,G,X){"use strict";var i=h("../sunburst/calc");X.calc=function(m,b){return i.calc(m,b)},X.crossTraceCalc=function(m){return i._runCrossTraceCalc("treemap",m)}},{"../sunburst/calc":1332}],1359:[function(h,G,X){"use strict";G.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1360:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./attributes"),b=h("../../components/color"),p=h("../../plots/domain").defaults,r=h("../bar/defaults").handleText,u=h("../bar/constants").TEXTPAD,c=h("../../components/colorscale"),l=c.hasColorscale,f=c.handleDefaults;G.exports=function(s,o,d,g){function y(P,A){return i.coerce(s,o,m,P,A)}var v=y("labels"),_=y("parents");if(v&&v.length&&_&&_.length){var w=y("values");y(w&&w.length?"branchvalues":"count"),y("level"),y("maxdepth"),"squarify"===y("tiling.packing")&&y("tiling.squarifyratio"),y("tiling.flip"),y("tiling.pad");var x=y("text");y("texttemplate"),o.texttemplate||y("textinfo",Array.isArray(x)?"text+label":"label"),y("hovertext"),y("hovertemplate");var E=y("pathbar.visible");r(s,o,g,y,"auto",{hasPathbar:E,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),y("textposition");var k=-1!==o.textposition.indexOf("bottom");y("marker.line.width")&&y("marker.line.color",g.paper_bgcolor);var C=y("marker.colors");(o._hasColorscale=l(s,"marker","colors")||(s.marker||{}).coloraxis)?f(s,o,g,y,{prefix:"marker.",cLetter:"c"}):y("marker.depthfade",!(C||[]).length);var L=2*o.textfont.size;y("marker.pad.t",k?L/4:L),y("marker.pad.l",L/4),y("marker.pad.r",L/4),y("marker.pad.b",k?L:L/4),o._hovered={marker:{line:{width:2,color:b.contrast(g.paper_bgcolor)}}},E&&(y("pathbar.thickness",o.pathbar.textfont.size+2*u),y("pathbar.side"),y("pathbar.edgeshape")),y("sort"),y("root.color"),p(o,g,y),o._length=null}else o.visible=!1}},{"../../components/color":666,"../../components/colorscale":678,"../../lib":803,"../../plots/domain":882,"../bar/constants":943,"../bar/defaults":945,"./attributes":1356}],1361:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../sunburst/helpers"),b=h("../bar/uniform_text").clearMinTextSize,p=h("../bar/style").resizeText,r=h("./plot_one");G.exports=function(u,c,l,f,s){var o,d,g=s.type,y=s.drawDescendants,v=u._fullLayout,_=v["_"+g+"layer"],w=!l;b(g,v),(o=_.selectAll("g.trace."+g).data(c,function(x){return x[0].trace.uid})).enter().append("g").classed("trace",!0).classed(g,!0),o.order(),!v.uniformtext.mode&&m.hasTransition(l)?(f&&(d=f()),i.transition().duration(l.duration).ease(l.easing).each("end",function(){d&&d()}).each("interrupt",function(){d&&d()}).each(function(){_.selectAll("g.trace").each(function(x){r(u,x,this,l,y)})})):(o.each(function(x){r(u,x,this,l,y)}),v.uniformtext.mode&&p(u,_.selectAll(".trace"),g)),w&&o.exit().remove()}},{"../bar/style":955,"../bar/uniform_text":957,"../sunburst/helpers":1336,"./plot_one":1370,"@plotly/d3":58}],1362:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=h("../../components/drawing"),p=h("../../lib/svg_text_utils"),r=h("./partition"),u=h("./style").styleOne,c=h("./constants"),l=h("../sunburst/helpers"),f=h("../sunburst/fx");G.exports=function(s,o,d,g,y){var v=y.barDifY,_=y.width,w=y.height,x=y.viewX,E=y.viewY,k=y.pathSlice,C=y.toMoveInsideSlice,L=y.strTransform,P=y.hasTransition,A=y.handleSlicesExit,I=y.makeUpdateSliceInterpolator,D=y.makeUpdateTextInterpolator,R={},S=s._fullLayout,N=o[0],B=N.trace,H=N.hierarchy,Y=_/B._entryDepth,Q=l.listPath(d.data,"id"),ne=r(H.copy(),[_,w],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(ne=ne.filter(function(te){var K=Q.indexOf(te.data.id);return-1!==K&&(te.x0=Y*K,te.x1=Y*(K+1),te.y0=v,te.y1=v+w,te.onPathbar=!0,!0)})).reverse(),(g=g.data(ne,l.getPtId)).enter().append("g").classed("pathbar",!0),A(g,!0,R,[_,w],k),g.order();var ae=g;P&&(ae=ae.transition().each("end",function(){var te=i.select(this);l.setSliceCursor(te,s,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),ae.each(function(te){te._hoverX=x(te.x1-Math.min(_,w)/2),te._hoverY=E(te.y1-w/2);var K=i.select(this),q=m.ensureSingle(K,"path","surface",function(Z){Z.style("pointer-events","all")});P?q.transition().attrTween("d",function(Z){var oe=I(Z,!0,R,[_,w]);return function(ie){return k(oe(ie))}}):q.attr("d",k),K.call(f,d,s,o,{styleOne:u,eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,s,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:s._transitioning}),q.call(u,te,B,{hovered:!1}),te._text=(l.getPtLabel(te)||"").split("<br>").join(" ")||"";var re=m.ensureSingle(K,"g","slicetext"),V=m.ensureSingle(re,"text","",function(Z){Z.attr("data-notex",1)}),W=m.ensureUniformFontSize(s,l.determineTextFont(B,te,S.font,{onPathbar:!0}));V.text(te._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(b.font,W).call(p.convertToTspans,s),te.textBB=b.bBox(V.node()),te.transform=C(te,{fontSize:W.size,onPathbar:!0}),te.transform.fontSize=W.size,P?V.transition().attrTween("transform",function(Z){var oe=D(Z,!0,R,[_,w]);return function(ie){return L(oe(ie))}}):V.attr("transform",L(te))})}},{"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../sunburst/fx":1335,"../sunburst/helpers":1336,"./constants":1359,"./partition":1368,"./style":1371,"@plotly/d3":58}],1363:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=h("../../components/drawing"),p=h("../../lib/svg_text_utils"),r=h("./partition"),u=h("./style").styleOne,c=h("./constants"),l=h("../sunburst/helpers"),f=h("../sunburst/fx"),s=h("../sunburst/plot").formatSliceLabel;G.exports=function(o,d,g,y,v){var _=v.width,w=v.height,x=v.viewX,E=v.viewY,k=v.pathSlice,C=v.toMoveInsideSlice,L=v.strTransform,P=v.hasTransition,A=v.handleSlicesExit,I=v.makeUpdateSliceInterpolator,D=v.makeUpdateTextInterpolator,R=v.prevEntry,S=o._fullLayout,N=d[0].trace,B=-1!==N.textposition.indexOf("left"),H=-1!==N.textposition.indexOf("right"),Y=-1!==N.textposition.indexOf("bottom"),Q=!Y&&!N.marker.pad.t||Y&&!N.marker.pad.b,ne=r(g,[_,w],{packing:N.tiling.packing,squarifyratio:N.tiling.squarifyratio,flipX:N.tiling.flip.indexOf("x")>-1,flipY:N.tiling.flip.indexOf("y")>-1,pad:{inner:N.tiling.pad,top:N.marker.pad.t,left:N.marker.pad.l,right:N.marker.pad.r,bottom:N.marker.pad.b}}).descendants(),ae=1/0,te=-1/0;ne.forEach(function(W){var Z=W.depth;Z>=N._maxDepth?(W.x0=W.x1=(W.x0+W.x1)/2,W.y0=W.y1=(W.y0+W.y1)/2):(ae=Math.min(ae,Z),te=Math.max(te,Z))}),y=y.data(ne,l.getPtId),N._maxVisibleLayers=isFinite(te)?te-ae+1:0,y.enter().append("g").classed("slice",!0),A(y,!1,{},[_,w],k),y.order();var K=null;if(P&&R){var q=l.getPtId(R);y.each(function(W){null===K&&l.getPtId(W)===q&&(K={x0:W.x0,x1:W.x1,y0:W.y0,y1:W.y1})})}var re=function(){return K||{x0:0,x1:_,y0:0,y1:w}},V=y;return P&&(V=V.transition().each("end",function(){var W=i.select(this);l.setSliceCursor(W,o,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(W){var Z=l.isHeader(W,N);W._hoverX=x(W.x1-N.marker.pad.r),W._hoverY=E(Y?W.y1-N.marker.pad.b/2:W.y0+N.marker.pad.t/2);var oe=i.select(this),ie=m.ensureSingle(oe,"path","surface",function(de){de.style("pointer-events","all")});P?ie.transition().attrTween("d",function(de){var be=I(de,!1,re(),[_,w]);return function(pe){return k(be(pe))}}):ie.attr("d",k),oe.call(f,g,o,d,{styleOne:u,eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,o,{isTransitioning:o._transitioning}),ie.call(u,W,N,{hovered:!1}),W._text=W.x0===W.x1||W.y0===W.y1?"":Z?Q?"":l.getPtLabel(W)||"":s(W,g,N,d,S)||"";var ue=m.ensureSingle(oe,"g","slicetext"),fe=m.ensureSingle(ue,"text","",function(de){de.attr("data-notex",1)}),he=m.ensureUniformFontSize(o,l.determineTextFont(N,W,S.font));fe.text(W._text||" ").classed("slicetext",!0).attr("text-anchor",H?"end":B||Z?"start":"middle").call(b.font,he).call(p.convertToTspans,o),W.textBB=b.bBox(fe.node()),W.transform=C(W,{fontSize:he.size,isHeader:Z}),W.transform.fontSize=he.size,P?fe.transition().attrTween("transform",function(de){var be=D(de,!1,re(),[_,w]);return function(pe){return L(be(pe))}}):fe.attr("transform",L(W))}),K}},{"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../sunburst/fx":1335,"../sunburst/helpers":1336,"../sunburst/plot":1340,"./constants":1359,"./partition":1368,"./style":1371,"@plotly/d3":58}],1364:[function(h,G,X){"use strict";G.exports=function i(m,b,p){var r;p.swapXY&&(r=m.x0,m.x0=m.y0,m.y0=r,r=m.x1,m.x1=m.y1,m.y1=r),p.flipX&&(r=m.x0,m.x0=b[0]-m.x1,m.x1=b[0]-r),p.flipY&&(r=m.y0,m.y0=b[1]-m.y1,m.y1=b[1]-r);var u=m.children;if(u)for(var c=0;c<u.length;c++)i(u[c],b,p)}},{}],1365:[function(h,G,X){"use strict";G.exports={moduleType:"trace",name:"treemap",basePlotModule:h("./base_plot"),categories:[],animatable:!0,attributes:h("./attributes"),layoutAttributes:h("./layout_attributes"),supplyDefaults:h("./defaults"),supplyLayoutDefaults:h("./layout_defaults"),calc:h("./calc").calc,crossTraceCalc:h("./calc").crossTraceCalc,plot:h("./plot"),style:h("./style").style,colorbar:h("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1236,"./attributes":1356,"./base_plot":1357,"./calc":1358,"./defaults":1360,"./layout_attributes":1366,"./layout_defaults":1367,"./plot":1369,"./style":1371}],1366:[function(h,G,X){"use strict";G.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1367:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./layout_attributes");G.exports=function(b,p){function r(u,c){return i.coerce(b,p,m,u,c)}r("treemapcolorway",p.colorway),r("extendtreemapcolors")}},{"../../lib":803,"./layout_attributes":1366}],1368:[function(h,G,X){"use strict";var i=h("d3-hierarchy"),m=h("./flip_tree");G.exports=function(b,p,r){var u,c=r.flipX,l=r.flipY,f="dice-slice"===r.packing,s=r.pad[l?"bottom":"top"],o=r.pad[c?"right":"left"],d=r.pad[c?"left":"right"],g=r.pad[l?"top":"bottom"];f&&(u=o,o=s,s=u,u=d,d=g,g=u);var y=i.treemap().tile(function(v,_){switch(v){case"squarify":return i.treemapSquarify.ratio(_);case"binary":return i.treemapBinary;case"dice":return i.treemapDice;case"slice":return i.treemapSlice;default:return i.treemapSliceDice}}(r.packing,r.squarifyratio)).paddingInner(r.pad.inner).paddingLeft(o).paddingRight(d).paddingTop(s).paddingBottom(g).size(f?[p[1],p[0]]:p)(b);return(f||c||l)&&m(y,p,{swapXY:f,flipX:c,flipY:l}),y}},{"./flip_tree":1364,"d3-hierarchy":170}],1369:[function(h,G,X){"use strict";var i=h("./draw"),m=h("./draw_descendants");G.exports=function(b,p,r,u){return i(b,p,r,u,{type:"treemap",drawDescendants:m})}},{"./draw":1361,"./draw_descendants":1363}],1370:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("d3-interpolate").interpolate,b=h("../sunburst/helpers"),p=h("../../lib"),r=h("../bar/constants").TEXTPAD,u=h("../bar/plot").toMoveInsideBar,c=h("../bar/uniform_text").recordMinTextSize,l=h("./constants"),f=h("./draw_ancestors");function s(o){return b.isHierarchyRoot(o)?"":b.getPtId(o)}G.exports=function(o,d,g,y,v){var _=o._fullLayout,w=d[0],x=w.trace,E="icicle"===x.type,k=w.hierarchy,C=b.findEntryWithLevel(k,x.level),L=i.select(g),P=L.selectAll("g.pathbar"),A=L.selectAll("g.slice");if(!C)return P.remove(),void A.remove();var I=b.isHierarchyRoot(C),D=!_.uniformtext.mode&&b.hasTransition(y),R=b.getMaxDepth(x),S=_._size,N=x.domain,B=S.w*(N.x[1]-N.x[0]),H=S.h*(N.y[1]-N.y[0]),Y=B,Q=x.pathbar.thickness,ne=x.marker.line.width+l.gapWithPathbar,ae=x.pathbar.visible?x.pathbar.side.indexOf("bottom")>-1?H+ne:-(Q+ne):0,te={x0:Y,x1:Y,y0:ae,y1:ae+Q},K=function(Be,He,Xe){var nt=x.tiling.pad,et=function(at){return at-nt<=He.x0},qe=function(at){return at+nt>=He.x1},Ye=function(at){return at-nt<=He.y0},ot=function(at){return at+nt>=He.y1};return Be.x0===He.x0&&Be.x1===He.x1&&Be.y0===He.y0&&Be.y1===He.y1?{x0:Be.x0,x1:Be.x1,y0:Be.y0,y1:Be.y1}:{x0:et(Be.x0-nt)?0:qe(Be.x0-nt)?Xe[0]:Be.x0,x1:et(Be.x1+nt)?0:qe(Be.x1+nt)?Xe[0]:Be.x1,y0:Ye(Be.y0-nt)?0:ot(Be.y0-nt)?Xe[1]:Be.y0,y1:Ye(Be.y1+nt)?0:ot(Be.y1+nt)?Xe[1]:Be.y1}},q=null,re={},V={},W=null,Z=function(Be,He){return He?re[s(Be)]:V[s(Be)]};w.hasMultipleRoots&&I&&R++,x._maxDepth=R,x._backgroundColor=_.paper_bgcolor,x._entryDepth=C.data.depth,x._atRootLevel=I;var ie=-B/2+S.l+S.w*(N.x[1]+N.x[0])/2,ue=-H/2+S.t+S.h*(1-(N.y[1]+N.y[0])/2),fe=function(Be){return ie+Be},he=function(Be){return ue+Be},de=he(0),be=fe(0),pe=function(Be){return be+Be},Te=function(Be){return de+Be};function ye(Be,He){return Be+","+He}var ke=pe(0),ze=function(Be){Be.x=Math.max(ke,Be.x)},je=x.pathbar.edgeshape,Ie=function(Be,He){var Xe=Be.x0,nt=Be.x1,et=Be.y0,qe=Be.y1,Ye=Be.textBB,ot=function(Bt){return-1!==x.textposition.indexOf(Bt)},at=ot("bottom"),ct=ot("top")||He.isHeader&&!at?"start":at?"end":"middle",_t=ot("right"),xt=ot("left")||He.onPathbar?-1:_t?1:0,Ht=x[E?"tiling":"marker"].pad;if(He.isHeader){if((Xe+=(E?Ht:Ht.l)-r)>=(nt-=(E?Ht:Ht.r)-r)){var At=(Xe+nt)/2;Xe=At,nt=At}var ht;at?et<(ht=qe-(E?Ht:Ht.b))&&ht<qe&&(et=ht):et<(ht=et+(E?Ht:Ht.t))&&ht<qe&&(qe=ht)}var st=u(Xe,nt,et,qe,Ye,{isHorizontal:!1,constrained:!0,angle:0,anchor:ct,leftToRight:xt});return st.fontSize=He.fontSize,st.targetX=fe(st.targetX),st.targetY=he(st.targetY),isNaN(st.targetX)||isNaN(st.targetY)?{}:(Xe!==nt&&et!==qe&&c(x.type,st,_),{scale:st.scale,rotate:st.rotate,textX:st.textX,textY:st.textY,anchorX:st.anchorX,anchorY:st.anchorY,targetX:st.targetX,targetY:st.targetY})},Ce=function(Be,He){for(var Xe,nt=0,et=Be;!Xe&&nt<R;)nt++,(et=et.parent)?Xe=Z(et,He):nt=R;return Xe||{}},_e=function(Be,He,Xe,nt,et){var qe,Ye=Z(Be,He);if(Ye)qe=Ye;else if(He)qe=te;else if(q)if(Be.parent){var ot=W||Xe;ot&&!He?qe=K(Be,ot,nt):p.extendFlat(qe={},Ce(Be,He))}else qe=p.extendFlat({},Be),E&&("h"===et.orientation?et.flipX?qe.x0=Be.x1:qe.x1=0:et.flipY?qe.y0=Be.y1:qe.y1=0);else qe={};return m(qe,{x0:Be.x0,x1:Be.x1,y0:Be.y0,y1:Be.y1})},we=function(Be,He,Xe,nt){var et=Z(Be,He),qe={},Ye=function(Be,He,Xe,nt){return He?re[s(k)]||te:Be.data.depth-C.data.depth<R?K(Be,V[x.level]||Xe,nt):{}}(Be,He,Xe,nt);p.extendFlat(qe,{transform:Ie({x0:Ye.x0,x1:Ye.x1,y0:Ye.y0,y1:Ye.y1,textBB:Be.textBB,_text:Be._text},{isHeader:b.isHeader(Be,x)})}),et?qe=et:Be.parent&&p.extendFlat(qe,Ce(Be,He));var ot=Be.transform;return Be.x0!==Be.x1&&Be.y0!==Be.y1&&c(x.type,ot,_),m(qe,{transform:{scale:ot.scale,rotate:ot.rotate,textX:ot.textX,textY:ot.textY,anchorX:ot.anchorX,anchorY:ot.anchorY,targetX:ot.targetX,targetY:ot.targetY}})},Se=function(Be,He,Xe,nt,et){var qe=nt[0],Ye=nt[1];D?Be.exit().transition().each(function(){var ot=i.select(this);ot.select("path.surface").transition().attrTween("d",function(at){var ct=function(_t,xt,Ht,At){var ht,st=Z(_t,xt);if(xt)ht=te;else{var Bt=Z(C,xt);ht=Bt?K(_t,Bt,At):{}}return m(st,ht)}(at,He,0,[qe,Ye]);return function(_t){return et(ct(_t))}}),ot.select("g.slicetext").attr("opacity",0)}).remove():Be.exit().remove()},Oe=function(Be){var He=Be.transform;return Be.x0!==Be.x1&&Be.y0!==Be.y1&&c(x.type,He,_),p.getTextTransform({textX:He.textX,textY:He.textY,anchorX:He.anchorX,anchorY:He.anchorY,targetX:He.targetX,targetY:He.targetY,scale:He.scale,rotate:He.rotate})};D&&(P.each(function(Be){re[s(Be)]={x0:Be.x0,x1:Be.x1,y0:Be.y0,y1:Be.y1},Be.transform&&(re[s(Be)].transform={textX:Be.transform.textX,textY:Be.transform.textY,anchorX:Be.transform.anchorX,anchorY:Be.transform.anchorY,targetX:Be.transform.targetX,targetY:Be.transform.targetY,scale:Be.transform.scale,rotate:Be.transform.rotate})}),A.each(function(Be){V[s(Be)]={x0:Be.x0,x1:Be.x1,y0:Be.y0,y1:Be.y1},Be.transform&&(V[s(Be)].transform={textX:Be.transform.textX,textY:Be.transform.textY,anchorX:Be.transform.anchorX,anchorY:Be.transform.anchorY,targetX:Be.transform.targetX,targetY:Be.transform.targetY,scale:Be.transform.scale,rotate:Be.transform.rotate}),!q&&b.isEntry(Be)&&(q=Be)})),W=v(o,d,C,A,{width:B,height:H,viewX:fe,viewY:he,pathSlice:function(Be){var He=fe(Be.x0),Xe=fe(Be.x1),nt=he(Be.y0),et=he(Be.y1);return Xe-He&&et-nt?"M"+ye(He,nt+0)+"L"+ye(Xe-0,nt)+"L"+ye(Xe,et-0)+"L"+ye(He+0,et)+"Z":""},toMoveInsideSlice:Ie,prevEntry:q,makeUpdateSliceInterpolator:_e,makeUpdateTextInterpolator:we,handleSlicesExit:Se,hasTransition:D,strTransform:Oe}),x.pathbar.visible?f(o,d,C,P,{barDifY:ae,width:Y,height:Q,viewX:pe,viewY:Te,pathSlice:function(Be){var He=pe(Math.max(Math.min(Be.x0,Be.x0),0)),Xe=pe(Math.min(Math.max(Be.x1,Be.x1),Y)),nt=Te(Be.y0),et=Te(Be.y1),qe=Q/2,Ye={},ot={};Ye.x=He,ot.x=Xe,Ye.y=ot.y=(nt+et)/2;var at={x:He,y:nt},ct={x:Xe,y:nt},_t={x:Xe,y:et},xt={x:He,y:et};return">"===je?(at.x-=qe,ct.x-=qe,_t.x-=qe,xt.x-=qe):"/"===je?(_t.x-=qe,xt.x-=qe,Ye.x-=qe/2,ot.x-=qe/2):"\\"===je?(at.x-=qe,ct.x-=qe,Ye.x-=qe/2,ot.x-=qe/2):"<"===je&&(Ye.x-=qe,ot.x-=qe),ze(at),ze(xt),ze(Ye),ze(ct),ze(_t),ze(ot),"M"+ye(at.x,at.y)+"L"+ye(ct.x,ct.y)+"L"+ye(ot.x,ot.y)+"L"+ye(_t.x,_t.y)+"L"+ye(xt.x,xt.y)+"L"+ye(Ye.x,Ye.y)+"Z"},toMoveInsideSlice:Ie,makeUpdateSliceInterpolator:_e,makeUpdateTextInterpolator:we,handleSlicesExit:Se,hasTransition:D,strTransform:Oe}):P.remove()}},{"../../lib":803,"../bar/constants":943,"../bar/plot":952,"../bar/uniform_text":957,"../sunburst/helpers":1336,"./constants":1359,"./draw_ancestors":1362,"@plotly/d3":58,"d3-interpolate":171}],1371:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/color"),b=h("../../lib"),p=h("../sunburst/helpers"),r=h("../bar/uniform_text").resizeText;function u(c,l,f,s){var o,d,g=(s||{}).hovered,y=l.data.data,v=y.i,_=y.color,w=p.isHierarchyRoot(l),x=1;if(g)o=f._hovered.marker.line.color,d=f._hovered.marker.line.width;else if(w&&_===f.root.color)x=100,o="rgba(0,0,0,0)",d=0;else if(o=b.castOption(f,v,"marker.line.color")||m.defaultLine,d=b.castOption(f,v,"marker.line.width")||0,!f._hasColorscale&&!l.onPathbar){var E=f.marker.depthfade;if(E){var k,C=m.combine(m.addOpacity(f._backgroundColor,.75),_);if(!0===E){var L=p.getMaxDepth(f);k=isFinite(L)?p.isLeaf(l)?0:f._maxVisibleLayers-(l.data.depth-f._entryDepth):l.data.height+1}else k=l.data.depth-f._entryDepth,f._atRootLevel||k++;if(k>0)for(var P=0;P<k;P++)_=m.combine(m.addOpacity(C,.5*P/k),_)}}c.style("stroke-width",d).call(m.fill,_).call(m.stroke,o).style("opacity",x)}G.exports={style:function(c){var l=c._fullLayout._treemaplayer.selectAll(".trace");r(c,l,"treemap"),l.each(function(f){var s=i.select(this),o=f[0].trace;s.style("opacity",o.opacity),s.selectAll("path.surface").each(function(d){i.select(this).call(u,d,o,{hovered:!1})})})},styleOne:u}},{"../../components/color":666,"../../lib":803,"../bar/uniform_text":957,"../sunburst/helpers":1336,"@plotly/d3":58}],1372:[function(h,G,X){"use strict";var i=h("../box/attributes"),m=h("../../lib/extend").extendFlat,b=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat;G.exports={y:i.y,x:i.x,x0:i.x0,y0:i.y0,xhoverformat:b("x"),yhoverformat:b("y"),name:m({},i.name,{}),orientation:m({},i.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:i.fillcolor,points:m({},i.boxpoints,{}),jitter:m({},i.jitter,{}),pointpos:m({},i.pointpos,{}),width:m({},i.width,{}),marker:i.marker,text:i.text,hovertext:i.hovertext,hovertemplate:i.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:i.offsetgroup,alignmentgroup:i.alignmentgroup,selected:i.selected,unselected:i.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../box/attributes":966}],1373:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/cartesian/axes"),b=h("../box/calc"),p=h("./helpers"),r=h("../../constants/numerical").BADNUM;function u(l,f,s){var o=f.max-f.min;if(!o)return l.bandwidth?l.bandwidth:0;if(l.bandwidth)return Math.max(l.bandwidth,o/1e4);var y,d=s.length,g=i.stdev(s,d-1,f.mean);return Math.max((y=d,1.059*Math.min(g,(f.q3-f.q1)/1.349)*Math.pow(y,-.2)),o/100)}function c(l,f,s,o){var d,g=l.spanmode,y=l.span||[],_=[f.min-2*o,f.max+2*o];function w(E){var k=y[E],C="multicategory"===s.type?s.r2c(k):s.d2c(k,0,l[f.valLetter+"calendar"]);return C===r?_[E]:C}var x={type:"linear",range:d="soft"===g?_:"hard"===g?[f.min,f.max]:[w(0),w(1)]};return m.setConvert(x),x.cleanRange(),d}G.exports=function(l,f){var s=b(l,f);if(s[0].t.empty)return s;for(var o=l._fullLayout,d=m.getFromId(l,f["h"===f.orientation?"xaxis":"yaxis"]),g=1/0,y=-1/0,v=0,_=0,w=0;w<s.length;w++){var x=s[w],E=x.pts.map(p.extractVal),k=x.bandwidth=u(f,x,E),C=x.span=c(f,x,d,k);if(x.min===x.max&&0===k)C=x.span=[x.min,x.max],x.density=[{v:1,t:C[0]}],x.bandwidth=k,v=Math.max(v,1);else{var L=C[1]-C[0],P=Math.ceil(L/(k/3)),A=L/P;if(!isFinite(A)||!isFinite(P))return i.error("Something went wrong with computing the violin span"),s[0].t.empty=!0,s;var I=p.makeKDE(x,f,E);x.density=new Array(P);for(var D=0,R=C[0];R<C[1]+A/2;D++,R+=A){var S=I(R);x.density[D]={v:S,t:R},v=Math.max(v,S)}}_=Math.max(_,E.length),g=Math.min(g,C[0]),y=Math.max(y,C[1])}var N=m.findExtremes(d,[g,y],{padded:!0});if(f._extremes[d._id]=N,f.width)s[0].t.maxKDE=v;else{var B=o._violinScaleGroupStats,H=f.scalegroup,Y=B[H];Y?(Y.maxKDE=Math.max(Y.maxKDE,v),Y.maxCount=Math.max(Y.maxCount,_)):B[H]={maxKDE:v,maxCount:_}}return s[0].t.labels.kde=i._(l,"kde:"),s}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/axes":854,"../box/calc":967,"./helpers":1376}],1374:[function(h,G,X){"use strict";var i=h("../box/cross_trace_calc").setPositionOffset,m=["v","h"];G.exports=function(b,p){for(var r=b.calcdata,u=p.xaxis,c=p.yaxis,l=0;l<m.length;l++){for(var f=m[l],s="h"===f?c:u,o=[],d=0;d<r.length;d++){var g=r[d],v=g[0].trace;!0!==v.visible||"violin"!==v.type||g[0].t.empty||v.orientation!==f||v.xaxis!==u._id||v.yaxis!==c._id||o.push(d)}i("violin",b,o,s)}}},{"../box/cross_trace_calc":968}],1375:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../components/color"),b=h("../box/defaults"),p=h("./attributes");G.exports=function(r,u,c,l){function f(L,P){return i.coerce(r,u,p,L,P)}function s(L,P){return i.coerce2(r,u,p,L,P)}if(b.handleSampleDefaults(r,u,f,l),!1!==u.visible){f("bandwidth"),f("side"),f("width")||(f("scalegroup",u.name),f("scalemode"));var o,d=f("span");Array.isArray(d)&&(o="manual"),f("spanmode",o);var g=f("line.color",(r.marker||{}).color||c),y=f("line.width"),v=f("fillcolor",m.addOpacity(u.line.color,.5));b.handlePointsDefaults(r,u,f,{prefix:""});var _=s("box.width"),w=s("box.fillcolor",v),x=s("box.line.color",g),E=s("box.line.width",y);f("box.visible",Boolean(_||w||x||E))||(u.box={visible:!1});var k=s("meanline.color",g),C=s("meanline.width",y);f("meanline.visible",Boolean(k||C))||(u.meanline={visible:!1})}}},{"../../components/color":666,"../../lib":803,"../box/defaults":969,"./attributes":1372}],1376:[function(h,G,X){"use strict";var i=h("../../lib"),m=function(b){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*b*b)};X.makeKDE=function(b,p,r){var u=r.length,c=m,l=b.bandwidth,f=1/(u*l);return function(s){for(var o=0,d=0;d<u;d++)o+=c((s-r[d])/l);return f*o}},X.getPositionOnKdePath=function(b,p,r){var u,c;"h"===p.orientation?(u="y",c="x"):(u="x",c="y");var l=i.findPointOnPath(b.path,r,c,{pathLength:b.pathLength}),f=b.posCenterPx,s=l[u];return[s,"both"===p.side?2*f-s:f]},X.getKdeValue=function(b,p,r){var u=b.pts.map(X.extractVal);return X.makeKDE(b,p,u)(r)/b.posDensityScale},X.extractVal=function(b){return b.v}},{"../../lib":803}],1377:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../../plots/cartesian/axes"),b=h("../box/hover"),p=h("./helpers");G.exports=function(r,u,c,l,f){f||(f={});var s,o,d=f.hoverLayer,g=r.cd,y=g[0].trace,v=y.hoveron,_=-1!==v.indexOf("violins"),w=-1!==v.indexOf("kde"),x=[];if(_||w){var E=b.hoverOnBoxes(r,u,c,l);if(w&&E.length>0){var k,C,L,P,A,I=r.xa,D=r.ya;"h"===y.orientation?(A=u,k="y",L=D,C="x",P=I):(A=c,k="x",L=I,C="y",P=D);var R=g[r.index];if(A>=R.span[0]&&A<=R.span[1]){var S=i.extendFlat({},r),N=P.c2p(A,!0),B=p.getKdeValue(R,y,A),H=p.getPositionOnKdePath(R,y,N),Y=L._offset,Q=L._length;S[k+"0"]=H[0],S[k+"1"]=H[1],S[C+"0"]=S[C+"1"]=N,S[C+"Label"]=C+": "+m.hoverLabelText(P,A,y[C+"hoverformat"])+", "+g[0].t.labels.kde+" "+B.toFixed(3),S.spikeDistance=E[0].spikeDistance;var ne=k+"Spike";S[ne]=E[0][ne],E[0].spikeDistance=void 0,E[0][ne]=void 0,S.hovertemplate=!1,x.push(S),(o={stroke:r.color})[k+"1"]=i.constrain(Y+H[0],Y,Y+Q),o[k+"2"]=i.constrain(Y+H[1],Y,Y+Q),o[C+"1"]=o[C+"2"]=P._offset+N}}_&&(x=x.concat(E))}-1!==v.indexOf("points")&&(s=b.hoverOnPoints(r,u,c));var ae=d.selectAll(".violinline-"+y.uid).data(o?[0]:[]);return ae.enter().append("line").classed("violinline-"+y.uid,!0).attr("stroke-width",1.5),ae.exit().remove(),ae.attr(o),"closest"===l?s?[s]:x:(s&&x.push(s),x)}},{"../../lib":803,"../../plots/cartesian/axes":854,"../box/hover":971,"./helpers":1376}],1378:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),layoutAttributes:h("./layout_attributes"),supplyDefaults:h("./defaults"),crossTraceDefaults:h("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:h("./layout_defaults"),calc:h("./calc"),crossTraceCalc:h("./cross_trace_calc"),plot:h("./plot"),style:h("./style"),styleOnSelect:h("../scatter/style").styleOnSelect,hoverPoints:h("./hover"),selectPoints:h("../box/select"),moduleType:"trace",name:"violin",basePlotModule:h("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":868,"../box/defaults":969,"../box/select":976,"../scatter/style":1242,"./attributes":1372,"./calc":1373,"./cross_trace_calc":1374,"./defaults":1375,"./hover":1377,"./layout_attributes":1379,"./layout_defaults":1380,"./plot":1381,"./style":1382}],1379:[function(h,G,X){"use strict";var i=h("../box/layout_attributes"),m=h("../../lib").extendFlat;G.exports={violinmode:m({},i.boxmode,{}),violingap:m({},i.boxgap,{}),violingroupgap:m({},i.boxgroupgap,{})}},{"../../lib":803,"../box/layout_attributes":973}],1380:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./layout_attributes"),b=h("../box/layout_defaults");G.exports=function(p,r,u){b._supply(p,r,u,function(c,l){return i.coerce(p,r,m,c,l)},"violin")}},{"../../lib":803,"../box/layout_defaults":974,"./layout_attributes":1379}],1381:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=h("../../components/drawing"),p=h("../box/plot"),r=h("../scatter/line_points"),u=h("./helpers");G.exports=function(c,l,f,s){var o=c._fullLayout,d=l.xaxis,g=l.yaxis;function y(v){var _=r(v,{xaxis:d,yaxis:g,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return b.smoothopen(_[0],1)}m.makeTraceGroups(s,f,"trace violins").each(function(v){var _=i.select(this),w=v[0],x=w.t,E=w.trace;if(!0!==E.visible||x.empty)_.remove();else{var k=x.bPos,C=x.bdPos,L=l[x.valLetter+"axis"],P=l[x.posLetter+"axis"],A="both"===E.side,I=A||"positive"===E.side,D=A||"negative"===E.side,R=_.selectAll("path.violin").data(m.identity);R.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),R.exit().remove(),R.each(function(ae){var te,K,q,re,V,W,Z,oe,ie=i.select(this),ue=ae.density,fe=ue.length,he=P.c2l(ae.pos+k,!0),de=P.l2p(he);if(E.width)te=x.maxKDE/C;else{var be=o._violinScaleGroupStats[E.scalegroup];te="count"===E.scalemode?be.maxKDE/C*(be.maxCount/ae.pts.length):be.maxKDE/C}if(I){for(Z=new Array(fe),V=0;V<fe;V++)(oe=Z[V]={})[x.posLetter]=he+ue[V].v/te,oe[x.valLetter]=L.c2l(ue[V].t,!0);K=y(Z)}if(D){for(Z=new Array(fe),W=0,V=fe-1;W<fe;W++,V--)(oe=Z[W]={})[x.posLetter]=he-ue[V].v/te,oe[x.valLetter]=L.c2l(ue[V].t,!0);q=y(Z)}if(A)re=K+"L"+q.substr(1)+"Z";else{var pe=[de,L.c2p(ue[0].t)],Te=[de,L.c2p(ue[fe-1].t)];"h"===E.orientation&&(pe.reverse(),Te.reverse()),re=I?"M"+pe+"L"+K.substr(1)+"L"+Te:"M"+Te+"L"+q.substr(1)+"L"+pe}ie.attr("d",re),ae.posCenterPx=de,ae.posDensityScale=te*C,ae.path=ie.node(),ae.pathLength=ae.path.getTotalLength()/(A?2:1)});var S,N,B,H=E.box,Y=H.width,Q=(H.line||{}).width;A?(S=C*Y,N=0):I?(S=[0,C*Y/2],N=Q*{x:1,y:-1}[x.posLetter]):(S=[C*Y/2,0],N=Q*{x:-1,y:1}[x.posLetter]),p.plotBoxAndWhiskers(_,{pos:P,val:L},E,{bPos:k,bdPos:S,bPosPxOffset:N}),p.plotBoxMean(_,{pos:P,val:L},E,{bPos:k,bdPos:S,bPosPxOffset:N}),!E.box.visible&&E.meanline.visible&&(B=m.identity);var ne=_.selectAll("path.meanline").data(B||[]);ne.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),ne.exit().remove(),ne.each(function(ae){var te=L.c2p(ae.mean,!0),K=u.getPositionOnKdePath(ae,E,te);i.select(this).attr("d","h"===E.orientation?"M"+te+","+K[0]+"V"+K[1]:"M"+K[0]+","+te+"H"+K[1])}),p.plotPoints(_,{x:d,y:g},E,x)}})}},{"../../components/drawing":688,"../../lib":803,"../box/plot":975,"../scatter/line_points":1232,"./helpers":1376,"@plotly/d3":58}],1382:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/color"),b=h("../scatter/style").stylePoints;G.exports=function(p){var r=i.select(p).selectAll("g.trace.violins");r.style("opacity",function(u){return u[0].trace.opacity}),r.each(function(u){var c=u[0].trace,l=i.select(this),f=c.box||{},s=f.line||{},o=c.meanline||{},d=o.width;l.selectAll("path.violin").style("stroke-width",c.line.width+"px").call(m.stroke,c.line.color).call(m.fill,c.fillcolor),l.selectAll("path.box").style("stroke-width",s.width+"px").call(m.stroke,s.color).call(m.fill,f.fillcolor);var g={"stroke-width":d+"px","stroke-dasharray":2*d+"px,"+d+"px"};l.selectAll("path.mean").style(g).call(m.stroke,o.color),l.selectAll("path.meanline").style(g).call(m.stroke,o.color),b(l,c,p)})}},{"../../components/color":666,"../scatter/style":1242,"@plotly/d3":58}],1383:[function(h,G,X){"use strict";var i=h("../../components/colorscale/attributes"),m=h("../isosurface/attributes"),b=h("../surface/attributes"),p=h("../../plots/attributes"),r=h("../../lib/extend").extendFlat,u=h("../../plot_api/edit_types").overrideAll,c=G.exports=u(r({x:m.x,y:m.y,z:m.z,value:m.value,isomin:m.isomin,isomax:m.isomax,surface:m.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:m.slices,caps:m.caps,text:m.text,hovertext:m.hovertext,xhoverformat:m.xhoverformat,yhoverformat:m.yhoverformat,zhoverformat:m.zhoverformat,valuehoverformat:m.valuehoverformat,hovertemplate:m.hovertemplate},i("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:m.colorbar,opacity:m.opacity,opacityscale:b.opacityscale,lightposition:m.lightposition,lighting:m.lighting,flatshading:m.flatshading,contour:m.contour,hoverinfo:r({},p.hoverinfo),showlegend:r({},p.showlegend,{dflt:!1})}),"calc","nested");c.x.editType=c.y.editType=c.z.editType=c.value.editType="calc+clearAxisTypes",c.transforms=void 0},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../isosurface/attributes":1154,"../surface/attributes":1342}],1384:[function(h,G,X){"use strict";var i=h("gl-mesh3d"),m=h("../../lib/gl_format_color").parseColorScale,b=h("../../lib/str2rgbarray"),p=h("../../components/colorscale").extractOpts,r=h("../../plots/gl3d/zip3"),u=h("../isosurface/convert").findNearestOnAxis,c=h("../isosurface/convert").generateIsoMeshes;function l(s,o,d){this.scene=s,this.uid=d,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var f=l.prototype;f.handlePick=function(s){if(s.object===this.mesh){var o=s.data.index,g=this.data._meshY[o],y=this.data._meshZ[o],v=this.data._Ys.length,_=this.data._Zs.length,w=u(this.data._meshX[o],this.data._Xs).id,x=u(g,this.data._Ys).id,E=u(y,this.data._Zs).id,k=s.index=E+_*x+_*v*w;s.traceCoordinate=[this.data._meshX[k],this.data._meshY[k],this.data._meshZ[k],this.data._value[k]];var C=this.data.hovertext||this.data.text;return Array.isArray(C)&&void 0!==C[k]?s.textLabel=C[k]:C&&(s.textLabel=C),!0}},f.update=function(s){var o=this.scene,d=o.fullSceneLayout;function g(_,w,x,E){return w.map(function(k){return _.d2l(k,0,E)*x})}this.data=c(s);var y={positions:r(g(d.xaxis,s._meshX,o.dataScale[0],s.xcalendar),g(d.yaxis,s._meshY,o.dataScale[1],s.ycalendar),g(d.zaxis,s._meshZ,o.dataScale[2],s.zcalendar)),cells:r(s._meshI,s._meshJ,s._meshK),lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,opacityscale:s.opacityscale,contourEnable:s.contour.show,contourColor:b(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},v=p(s);y.vertexIntensity=s._meshIntensity,y.vertexIntensityBounds=[v.min,v.max],y.colormap=m(s),this.mesh.update(y)},f.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},G.exports=function(s,o){var g=i({gl:s.glplot.gl}),y=new l(s,g,o.uid);return g._trace=y,y.update(o),s.glplot.add(g),y}},{"../../components/colorscale":678,"../../lib/gl_format_color":799,"../../lib/str2rgbarray":828,"../../plots/gl3d/zip3":907,"../isosurface/convert":1156,"gl-mesh3d":315}],1385:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./attributes"),b=h("../isosurface/defaults").supplyIsoDefaults,p=h("../surface/defaults").opacityscaleDefaults;G.exports=function(r,u,c,l){function f(s,o){return i.coerce(r,u,m,s,o)}b(r,u,c,l,f),p(r,u,l,f)}},{"../../lib":803,"../isosurface/defaults":1157,"../surface/defaults":1345,"./attributes":1383}],1386:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),supplyDefaults:h("./defaults"),calc:h("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:h("./convert"),moduleType:"trace",name:"volume",basePlotModule:h("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":896,"../isosurface/calc":1155,"./attributes":1383,"./convert":1384,"./defaults":1385}],1387:[function(h,G,X){"use strict";var i=h("../bar/attributes"),m=h("../scatter/attributes").line,b=h("../../plots/attributes"),p=h("../../plots/cartesian/axis_format_attributes").axisHoverFormat,r=h("../../plots/template_attributes").hovertemplateAttrs,u=h("../../plots/template_attributes").texttemplateAttrs,c=h("./constants"),l=h("../../lib/extend").extendFlat,f=h("../../components/color");function s(o){return{marker:{color:l({},i.marker.color,{arrayOk:!1,editType:"style"}),line:{color:l({},i.marker.line.color,{arrayOk:!1,editType:"style"}),width:l({},i.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}G.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:i.x,x0:i.x0,dx:i.dx,y:i.y,y0:i.y0,dy:i.dy,xperiod:i.xperiod,yperiod:i.yperiod,xperiod0:i.xperiod0,yperiod0:i.yperiod0,xperiodalignment:i.xperiodalignment,yperiodalignment:i.yperiodalignment,xhoverformat:p("x"),yhoverformat:p("y"),hovertext:i.hovertext,hovertemplate:r({},{keys:c.eventDataKeys}),hoverinfo:l({},b.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:u({editType:"plot"},{keys:c.eventDataKeys.concat(["label"])}),text:i.text,textposition:i.textposition,insidetextanchor:i.insidetextanchor,textangle:i.textangle,textfont:i.textfont,insidetextfont:i.insidetextfont,outsidetextfont:i.outsidetextfont,constraintext:i.constraintext,cliponaxis:i.cliponaxis,orientation:i.orientation,offset:i.offset,width:i.width,increasing:s(),decreasing:s(),totals:s(),connector:{line:{color:l({},m.color,{dflt:f.defaultLine}),width:l({},m.width,{editType:"plot"}),dash:m.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:i.offsetgroup,alignmentgroup:i.alignmentgroup}},{"../../components/color":666,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../bar/attributes":941,"../scatter/attributes":1218,"./constants":1389}],1388:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes"),m=h("../../plots/cartesian/align_period"),b=h("../../lib").mergeArray,p=h("../scatter/calc_selection"),r=h("../../constants/numerical").BADNUM;function u(l){return"a"===l||"absolute"===l}function c(l){return"t"===l||"total"===l}G.exports=function(l,f){var s,o,d,g,y,v,_=i.getFromId(l,f.xaxis||"x"),w=i.getFromId(l,f.yaxis||"y");"h"===f.orientation?(s=_.makeCalcdata(f,"x"),d=w.makeCalcdata(f,"y"),g=m(f,w,"y",d),y=!!f.yperiodalignment,v="y"):(s=w.makeCalcdata(f,"y"),d=_.makeCalcdata(f,"x"),g=m(f,_,"x",d),y=!!f.xperiodalignment,v="x"),o=g.vals;for(var x,E=Math.min(o.length,s.length),k=new Array(E),C=0,L=!1,P=0;P<E;P++){var A=s[P]||0,I=!1;(s[P]!==r||c(f.measure[P])||u(f.measure[P]))&&P+1<E&&(s[P+1]!==r||c(f.measure[P+1])||u(f.measure[P+1]))&&(I=!0);var D=k[P]={i:P,p:o[P],s:A,rawS:A,cNext:I};u(f.measure[P])?(C=D.s,D.isSum=!0,D.dir="totals",D.s=C):c(f.measure[P])?(D.isSum=!0,D.dir="totals",D.s=C):(D.isSum=!1,D.dir=D.rawS<0?"decreasing":"increasing",D.s=C+(x=D.s),C+=x),"totals"===D.dir&&(L=!0),y&&(k[P].orig_p=d[P],k[P][v+"End"]=g.ends[P],k[P][v+"Start"]=g.starts[P]),f.ids&&(D.id=String(f.ids[P])),D.v=(f.base||0)+C}return k.length&&(k[0].hasTotals=L),b(f.text,k,"tx"),b(f.hovertext,k,"htx"),p(k,f),k}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"../scatter/calc_selection":1220}],1389:[function(h,G,X){"use strict";G.exports={eventDataKeys:["initial","delta","final"]}},{}],1390:[function(h,G,X){"use strict";var i=h("../bar/cross_trace_calc").setGroupPositions;G.exports=function(m,b){var p,r,u=m._fullLayout,c=m._fullData,l=m.calcdata,f=b.xaxis,s=b.yaxis,o=[],d=[],g=[];for(r=0;r<c.length;r++){var y=c[r];!0===y.visible&&y.xaxis===f._id&&y.yaxis===s._id&&"waterfall"===y.type&&(p=l[r],"h"===y.orientation?g.push(p):d.push(p),o.push(p))}var v={mode:u.waterfallmode,norm:u.waterfallnorm,gap:u.waterfallgap,groupgap:u.waterfallgroupgap};for(i(m,f,s,d,v),i(m,s,f,g,v),r=0;r<o.length;r++){p=o[r];for(var _=0;_<p.length;_++){var w=p[_];!1===w.isSum&&(w.s0+=0===_?0:p[_-1].s),_+1<p.length&&(p[_].nextP0=p[_+1].p0,p[_].nextS0=p[_+1].s0)}}}},{"../bar/cross_trace_calc":944}],1391:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("../bar/defaults").handleGroupingDefaults,b=h("../bar/defaults").handleText,p=h("../scatter/xy_defaults"),r=h("../scatter/period_defaults"),u=h("./attributes"),c=h("../../components/color"),l=h("../../constants/delta.js"),f=l.INCREASING.COLOR,s=l.DECREASING.COLOR;function o(d,g,y){d(g+".marker.color",y),d(g+".marker.line.color",c.defaultLine),d(g+".marker.line.width")}G.exports={supplyDefaults:function(d,g,y,v){function _(x,E){return i.coerce(d,g,u,x,E)}if(p(d,g,v,_)){r(d,g,v,_),_("xhoverformat"),_("yhoverformat"),_("measure"),_("orientation",g.x&&!g.y?"h":"v"),_("base"),_("offset"),_("width"),_("text"),_("hovertext"),_("hovertemplate");var w=_("textposition");b(d,g,v,_,w,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==g.textposition&&(_("texttemplate"),g.texttemplate||_("textinfo")),o(_,"increasing",f),o(_,"decreasing",s),o(_,"totals","#4499FF"),_("connector.visible")&&(_("connector.mode"),_("connector.line.width")&&(_("connector.line.color"),_("connector.line.dash")))}else g.visible=!1},crossTraceDefaults:function(d,g){var y,v;function _(x){return i.coerce(v._input,v,u,x)}if("group"===g.waterfallmode)for(var w=0;w<d.length;w++)y=(v=d[w])._input,m(y,v,g,_)}}},{"../../components/color":666,"../../constants/delta.js":773,"../../lib":803,"../bar/defaults":945,"../scatter/period_defaults":1238,"../scatter/xy_defaults":1245,"./attributes":1387}],1392:[function(h,G,X){"use strict";G.exports=function(i,m){return i.x="xVal"in m?m.xVal:m.x,i.y="yVal"in m?m.yVal:m.y,"initial"in m&&(i.initial=m.initial),"delta"in m&&(i.delta=m.delta),"final"in m&&(i.final=m.final),m.xa&&(i.xaxis=m.xa),m.ya&&(i.yaxis=m.ya),i}},{}],1393:[function(h,G,X){"use strict";var i=h("../../plots/cartesian/axes").hoverLabelText,m=h("../../components/color").opacity,b=h("../bar/hover").hoverOnBars,p=h("../../constants/delta.js"),r=p.INCREASING.SYMBOL,u=p.DECREASING.SYMBOL;G.exports=function(c,l,f,s,o){var N,B,H,Y,d=b(c,l,f,s,o);if(d){var g=d.cd,y=g[0].trace,v="h"===y.orientation,_=v?"x":"y",w=v?c.xa:c.ya,x=g[d.index],E=x.isSum?x.b+x.s:x.rawS;if(!x.isSum){d.initial=x.b+x.s-E,d.delta=E,d.final=d.initial+d.delta;var k=D(Math.abs(d.delta));d.deltaLabel=E<0?"("+k+")":k,d.finalLabel=D(d.final),d.initialLabel=D(d.initial)}var C=x.hi||y.hoverinfo,L=[];if(C&&"none"!==C&&"skip"!==C){var P="all"===C,A=C.split("+"),I=function(R){return P||-1!==A.indexOf(R)};x.isSum||(!I("final")||I(v?"x":"y")||L.push(d.finalLabel),I("delta")&&L.push(E<0?d.deltaLabel+" "+u:d.deltaLabel+" "+r),I("initial")&&L.push("Initial: "+d.initialLabel))}return L.length&&(d.extraText=L.join("<br>")),d.color=(H=(N=y[x.dir].marker).line.color,Y=N.line.width,m(B=N.color)?B:m(H)&&Y?H:void 0),[d]}function D(R){return i(w,R,y[_+"hoverformat"])}}},{"../../components/color":666,"../../constants/delta.js":773,"../../plots/cartesian/axes":854,"../bar/hover":948}],1394:[function(h,G,X){"use strict";G.exports={attributes:h("./attributes"),layoutAttributes:h("./layout_attributes"),supplyDefaults:h("./defaults").supplyDefaults,crossTraceDefaults:h("./defaults").crossTraceDefaults,supplyLayoutDefaults:h("./layout_defaults"),calc:h("./calc"),crossTraceCalc:h("./cross_trace_calc"),plot:h("./plot"),style:h("./style").style,hoverPoints:h("./hover"),eventData:h("./event_data"),selectPoints:h("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:h("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":868,"../bar/select":953,"./attributes":1387,"./calc":1388,"./cross_trace_calc":1390,"./defaults":1391,"./event_data":1392,"./hover":1393,"./layout_attributes":1395,"./layout_defaults":1396,"./plot":1397,"./style":1398}],1395:[function(h,G,X){"use strict";G.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1396:[function(h,G,X){"use strict";var i=h("../../lib"),m=h("./layout_attributes");G.exports=function(b,p,r){var u=!1;function c(s,o){return i.coerce(b,p,m,s,o)}for(var l=0;l<r.length;l++){var f=r[l];if(f.visible&&"waterfall"===f.type){u=!0;break}}u&&(c("waterfallmode"),c("waterfallgap",.2),c("waterfallgroupgap"))}},{"../../lib":803,"./layout_attributes":1395}],1397:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../lib"),b=h("../../components/drawing"),p=h("../../constants/numerical").BADNUM,r=h("../bar/plot"),u=h("../bar/uniform_text").clearMinTextSize;G.exports=function(c,l,f,s){var d,g,_,w,o=c._fullLayout;u("waterfall",o),r.plot(c,l,f,s,{mode:o.waterfallmode,norm:o.waterfallmode,gap:o.waterfallgap,groupgap:o.waterfallgroupgap}),d=c,_=(g=l).xaxis,w=g.yaxis,m.makeTraceGroups(s,f,"trace bars").each(function(x){var E=i.select(this),k=x[0].trace,C=m.ensureSingle(E,"g","lines");if(k.connector&&k.connector.visible){var L="h"===k.orientation,P=k.connector.mode,A=C.selectAll("g.line").data(m.identity);A.enter().append("g").classed("line",!0),A.exit().remove();var I=A.size();A.each(function(D,R){if(R===I-1||D.cNext){var S=(Q=_,ne=w,K=[],re=(ae=L)?ne:Q,(te=[])[0]=(q=ae?Q:ne).c2p((Y=D).s0,!0),K[0]=re.c2p(Y.p0,!0),te[1]=q.c2p(Y.s1,!0),K[1]=re.c2p(Y.p1,!0),te[2]=q.c2p(Y.nextS0,!0),K[2]=re.c2p(Y.nextP0,!0),ae?[te,K]:[K,te]),N=S[0],B=S[1],H="";N[0]!==p&&B[0]!==p&&N[1]!==p&&B[1]!==p&&("spanning"===P&&!D.isSum&&R>0&&(H+=L?"M"+N[0]+","+B[1]+"V"+B[0]:"M"+N[1]+","+B[0]+"H"+N[0]),"between"!==P&&(D.isSum||R<I-1)&&(H+=L?"M"+N[1]+","+B[0]+"V"+B[1]:"M"+N[0]+","+B[1]+"H"+N[1]),N[2]!==p&&B[2]!==p&&(H+=L?"M"+N[1]+","+B[1]+"V"+B[2]:"M"+N[1]+","+B[1]+"H"+N[2])),""===H&&(H="M0,0Z"),m.ensureSingle(i.select(this),"path").attr("d",H).call(b.setClipUrl,g.layerClipId,d)}var Y,Q,ne,ae,te,K,q,re})}else C.remove()})}},{"../../components/drawing":688,"../../constants/numerical":779,"../../lib":803,"../bar/plot":952,"../bar/uniform_text":957,"@plotly/d3":58}],1398:[function(h,G,X){"use strict";var i=h("@plotly/d3"),m=h("../../components/drawing"),b=h("../../components/color"),p=h("../../constants/interactions").DESELECTDIM,r=h("../bar/style"),u=h("../bar/uniform_text").resizeText,c=r.styleTextPoints;G.exports={style:function(l,f,s){var o=s||i.select(l).selectAll("g.waterfalllayer").selectAll("g.trace");u(l,o,"waterfall"),o.style("opacity",function(d){return d[0].trace.opacity}),o.each(function(d){var g=i.select(this),y=d[0].trace;g.selectAll(".point > path").each(function(v){if(!v.isBlank){var _=y[v.dir].marker;i.select(this).call(b.fill,_.color).call(b.stroke,_.line.color).call(m.dashLine,_.line.dash,_.line.width).style("opacity",y.selectedpoints&&!v.selected?p:1)}}),c(g,y,l),g.selectAll(".lines").each(function(){var v=y.connector.line;m.lineGroupStyle(i.select(this).selectAll("path"),v.width,v.color,v.dash)})})}}},{"../../components/color":666,"../../components/drawing":688,"../../constants/interactions":778,"../bar/style":955,"../bar/uniform_text":957,"@plotly/d3":58}],1399:[function(h,G,X){"use strict";var i=h("../plots/cartesian/axes"),m=h("../lib"),b=h("../plot_api/plot_schema"),p=h("./helpers").pointsAccessorFunction,r=h("../constants/numerical").BADNUM;X.moduleType="transform",X.name="aggregate";var u=X.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},c=u.aggregations;function l(d,g,y,v){if(v.enabled){for(var _=v.target,w=m.nestedProperty(g,_),x=w.get(),E=function(L,P){var I=P.d2c,D=P.c2d;switch(L.func){case"count":return f;case"first":return s;case"last":return o;case"sum":return function(R,S){for(var N=0,B=0;B<S.length;B++){var H=I(R[S[B]]);H!==r&&(N+=H)}return D(N)};case"avg":return function(R,S){for(var N=0,B=0,H=0;H<S.length;H++){var Y=I(R[S[H]]);Y!==r&&(N+=Y,B++)}return B?D(N/B):r};case"min":return function(R,S){for(var N=1/0,B=0;B<S.length;B++){var H=I(R[S[B]]);H!==r&&(N=Math.min(N,H))}return N===1/0?r:D(N)};case"max":return function(R,S){for(var N=-1/0,B=0;B<S.length;B++){var H=I(R[S[B]]);H!==r&&(N=Math.max(N,H))}return N===-1/0?r:D(N)};case"range":return function(R,S){for(var N=1/0,B=-1/0,H=0;H<S.length;H++){var Y=I(R[S[H]]);Y!==r&&(N=Math.min(N,Y),B=Math.max(B,Y))}return B===-1/0||N===1/0?r:D(B-N)};case"change":return function(R,S){var N=I(R[S[0]]),B=I(R[S[S.length-1]]);return N===r||B===r?r:D(B-N)};case"median":return function(R,S){for(var N=[],B=0;B<S.length;B++){var H=I(R[S[B]]);H!==r&&N.push(H)}if(!N.length)return r;N.sort(m.sorterAsc);var Y=(N.length-1)/2;return D((N[Math.floor(Y)]+N[Math.ceil(Y)])/2)};case"mode":return function(R,S){for(var N={},B=0,H=r,Y=0;Y<S.length;Y++){var Q=I(R[S[Y]]);if(Q!==r){var ne=N[Q]=(N[Q]||0)+1;ne>B&&(B=ne,H=Q)}}return B?D(H):r};case"rms":return function(R,S){for(var N=0,B=0,H=0;H<S.length;H++){var Y=I(R[S[H]]);Y!==r&&(N+=Y*Y,B++)}return B?D(Math.sqrt(N/B)):r};case"stddev":return function(R,S){var N,B=0,H=0,Y=1,Q=r;for(N=0;N<S.length&&Q===r;N++)Q=I(R[S[N]]);if(Q===r)return r;for(;N<S.length;N++){var ne=I(R[S[N]]);if(ne!==r){var ae=ne-Q;B+=ae,H+=ae*ae,Y++}}var te="sample"===L.funcmode?Y-1:Y;return te?Math.sqrt((H-B*B/Y)/te):0}}}(v,i.getDataConversions(d,g,_,x)),k=new Array(y.length),C=0;C<y.length;C++)k[C]=E(x,y[C]);w.set(k),"count"===v.func&&m.pushUnique(g._arrayAttrs,_)}}function f(d,g){return g.length}function s(d,g){return d[g[0]]}function o(d,g){return d[g[g.length-1]]}X.supplyDefaults=function(d,g){var y,v={};function _(D,R){return m.coerce(d,v,u,D,R)}if(!_("enabled"))return v;var w=b.findArrayAttributes(g),x={};for(y=0;y<w.length;y++)x[w[y]]=1;var E=_("groups");if(!Array.isArray(E)){if(!x[E])return v.enabled=!1,v;x[E]=0}var k,C=d.aggregations||[],L=v.aggregations=new Array(C.length);function P(D,R){return m.coerce(C[y],k,c,D,R)}for(y=0;y<C.length;y++){k={_index:y};var A=P("target"),I=P("func");P("enabled")&&A&&(x[A]||"count"===I&&void 0===x[A])?("stddev"===I&&P("funcmode"),x[A]=0,L[y]=k):L[y]={enabled:!1,_index:y}}for(y=0;y<w.length;y++)x[w[y]]&&L.push({target:w[y],func:c.func.dflt,enabled:!0,_index:-1});return v},X.calcTransform=function(d,g,y){if(y.enabled){var v=y.groups,_=m.getTargetArray(g,{target:v});if(_){var w,x,E,C={},L={},P=[],A=p(g.transforms,y),I=_.length;for(g._length&&(I=Math.min(I,g._length)),w=0;w<I;w++)void 0===(E=C[x=_[w]])?(C[x]=P.length,P.push([w]),L[C[x]]=A(w)):(P[E].push(w),L[C[x]]=(L[C[x]]||[]).concat(A(w)));y._indexToPoints=L;var D=y.aggregations;for(w=0;w<D.length;w++)l(d,g,P,D[w]);"string"==typeof v&&l(d,g,P,{target:v,func:"first",enabled:!0}),g._length=P.length}}}},{"../constants/numerical":779,"../lib":803,"../plot_api/plot_schema":842,"../plots/cartesian/axes":854,"./helpers":1402}],1400:[function(h,G,X){"use strict";var i=h("../lib"),m=h("../registry"),b=h("../plots/cartesian/axes"),p=h("./helpers").pointsAccessorFunction,r=h("../constants/filter_ops"),u=r.COMPARISON_OPS,c=r.INTERVAL_OPS,l=r.SET_OPS;X.moduleType="transform",X.name="filter",X.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(u).concat(c).concat(l),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},X.supplyDefaults=function(f){var s={};function o(y,v){return i.coerce(f,s,X.attributes,y,v)}if(o("enabled")){var d=o("target");if(i.isArrayOrTypedArray(d)&&0===d.length)return s.enabled=!1,s;o("preservegaps"),o("operation"),o("value");var g=m.getComponentMethod("calendars","handleDefaults");g(f,s,"valuecalendar",null),g(f,s,"targetcalendar",null)}return s},X.calcTransform=function(f,s,o){if(o.enabled){var d=i.getTargetArray(s,o);if(d){var g=o.target,y=d.length;s._length&&(y=Math.min(y,s._length));var v=o.targetcalendar,_=s._arrayAttrs,w=o.preservegaps;if("string"==typeof g){var x=i.nestedProperty(s,g+"calendar").get();x&&(v=x)}var E,k,C=function(S,N,B){var H=S.operation,Y=S.value,Q=Array.isArray(Y);function ne(q){return-1!==q.indexOf(H)}var ae,te=function(q){return N(q,0,S.valuecalendar)},K=function(q){return N(q,0,B)};switch(ne(u)?ae=te(Q?Y[0]:Y):ne(c)?ae=Q?[te(Y[0]),te(Y[1])]:[te(Y),te(Y)]:ne(l)&&(ae=Q?Y.map(te):[te(Y)]),H){case"=":return function(q){return K(q)===ae};case"!=":return function(q){return K(q)!==ae};case"<":return function(q){return K(q)<ae};case"<=":return function(q){return K(q)<=ae};case">":return function(q){return K(q)>ae};case">=":return function(q){return K(q)>=ae};case"[]":return function(q){var re=K(q);return re>=ae[0]&&re<=ae[1]};case"()":return function(q){var re=K(q);return re>ae[0]&&re<ae[1]};case"[)":return function(q){var re=K(q);return re>=ae[0]&&re<ae[1]};case"(]":return function(q){var re=K(q);return re>ae[0]&&re<=ae[1]};case"][":return function(q){var re=K(q);return re<=ae[0]||re>=ae[1]};case")(":return function(q){var re=K(q);return re<ae[0]||re>ae[1]};case"](":return function(q){var re=K(q);return re<=ae[0]||re>ae[1]};case")[":return function(q){var re=K(q);return re<ae[0]||re>=ae[1]};case"{}":return function(q){return-1!==ae.indexOf(K(q))};case"}{":return function(q){return-1===ae.indexOf(K(q))}}}(o,b.getDataToCoordFunc(f,s,g,d),v),L={},P={},A=0;w?(E=function(S){L[S.astr]=i.extendDeep([],S.get()),S.set(new Array(y))},k=function(S,N){var B=L[S.astr][N];S.get()[N]=B}):(E=function(S){L[S.astr]=i.extendDeep([],S.get()),S.set([])},k=function(S,N){var B=L[S.astr][N];S.get().push(B)}),R(E);for(var I=p(s.transforms,o),D=0;D<y;D++)C(d[D])?(R(k,D),P[A++]=I(D)):w&&A++;o._indexToPoints=P,s._length=A}}function R(S,N){for(var B=0;B<_.length;B++)S(i.nestedProperty(s,_[B]),N)}}},{"../constants/filter_ops":775,"../lib":803,"../plots/cartesian/axes":854,"../registry":931,"./helpers":1402}],1401:[function(h,G,X){"use strict";var i=h("../lib"),m=h("../plot_api/plot_schema"),b=h("../plots/plots"),p=h("./helpers").pointsAccessorFunction;function r(u,c){var l,f,s,o,d,g,y,v,_,w,x=c.transform,E=c.transformIndex,k=u.transforms[E].groups,C=p(u.transforms,x);if(!i.isArrayOrTypedArray(k)||0===k.length)return[u];var L=i.filterUnique(k),P=new Array(L.length),A=k.length,I=m.findArrayAttributes(u),D=x.styles||[],R={};for(l=0;l<D.length;l++)R[D[l].target]=D[l].value;x.styles&&(w=i.keyedContainer(x,"styles","target","value.name"));var S={},N={};for(l=0;l<L.length;l++){S[g=L[l]]=l,N[g]=0,(y=P[l]=i.extendDeepNoArrays({},u))._group=g,y.transforms[E]._indexToPoints={};var B=null;for(w&&(B=w.get(g)),y.name=B||""===B?B:i.templateString(x.nameformat,{trace:u.name,group:g}),v=y.transforms,y.transforms=[],f=0;f<v.length;f++)y.transforms[f]=i.extendDeepNoArrays({},v[f]);for(f=0;f<I.length;f++)i.nestedProperty(y,I[f]).set([])}for(s=0;s<I.length;s++){for(o=I[s],f=0,_=[];f<L.length;f++)_[f]=i.nestedProperty(P[f],o).get();for(d=i.nestedProperty(u,o).get(),f=0;f<A;f++)_[S[k[f]]].push(d[f])}for(f=0;f<A;f++)(y=P[S[k[f]]]).transforms[E]._indexToPoints[N[k[f]]]=C(f),N[k[f]]++;for(l=0;l<L.length;l++)g=L[l],b.clearExpandedTraceDefaultColors(y=P[l]),y=i.extendDeepNoArrays(y,R[g]||{});return P}X.moduleType="transform",X.name="groupby",X.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},X.supplyDefaults=function(u,c,l){var f,s={};function o(_,w){return i.coerce(u,s,X.attributes,_,w)}if(!o("enabled"))return s;o("groups"),o("nameformat",l._dataLength>1?"%{group} (%{trace})":"%{group}");var d=u.styles,g=s.styles=[];if(d)for(f=0;f<d.length;f++){var y=g[f]={};i.coerce(d[f],g[f],X.attributes.styles,"target");var v=i.coerce(d[f],g[f],X.attributes.styles,"value");i.isPlainObject(v)?y.value=i.extendDeep({},v):v&&delete y.value}return s},X.transform=function(u,c){var l,f,s,o=[];for(f=0;f<u.length;f++)for(l=r(u[f],c),s=0;s<l.length;s++)o.push(l[s]);return o}},{"../lib":803,"../plot_api/plot_schema":842,"../plots/plots":917,"./helpers":1402}],1402:[function(h,G,X){"use strict";X.pointsAccessorFunction=function(i,m){for(var b,p,r=0;r<i.length&&(b=i[r])!==m;r++)b._indexToPoints&&!1!==b.enabled&&(p=b._indexToPoints);return p?function(u){return p[u]}:function(u){return[u]}}},{}],1403:[function(h,G,X){"use strict";var i=h("../lib"),m=h("../plots/cartesian/axes"),b=h("./helpers").pointsAccessorFunction,p=h("../constants/numerical").BADNUM;X.moduleType="transform",X.name="sort",X.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},X.supplyDefaults=function(r){var u={};function c(l,f){return i.coerce(r,u,X.attributes,l,f)}return c("enabled")&&(c("target"),c("order")),u},X.calcTransform=function(r,u,c){if(c.enabled){var l=i.getTargetArray(u,c);if(l){var f=c.target,s=l.length;u._length&&(s=Math.min(s,u._length));var o,d,g=u._arrayAttrs,y=function(k,C,L,P){var A,I=new Array(P),D=new Array(P);for(A=0;A<P;A++)I[A]={v:C[A],i:A};for(I.sort(function(R,S){switch(R.order){case"ascending":return function(N,B){var H=S(N.v),Y=S(B.v);return H===p?1:Y===p?-1:H-Y};case"descending":return function(N,B){var H=S(N.v),Y=S(B.v);return H===p?1:Y===p?-1:Y-H}}}(k,L)),A=0;A<P;A++)D[A]=I[A].i;return D}(c,l,m.getDataToCoordFunc(r,u,f,l),s),v=b(u.transforms,c),_={};for(o=0;o<g.length;o++){var w=i.nestedProperty(u,g[o]),x=w.get(),E=new Array(s);for(d=0;d<s;d++)E[d]=x[y[d]];w.set(E)}for(d=0;d<s;d++)_[d]=v(y[d]);c._indexToPoints=_,u._length=s}}}},{"../constants/numerical":779,"../lib":803,"../plots/cartesian/axes":854,"./helpers":1402}],1404:[function(h,G,X){"use strict";X.version="2.3.1"},{}]},{},[27])(27)},71:(es,h,G)=>{"use strict";var c,m=(c=G(36))&&c.__esModule?c:{default:c};h.ZP=function(c,l){return(new m.default).t(c,l)}},36:(es,h,G)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});var X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},i=function(){function r(u,c){for(var l,f=0;f<c.length;f++)(l=c[f]).enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(u,l.key,l)}return function(u,c,l){return c&&r(u.prototype,c),l&&r(u,l),u}}(),m=G(132),p=function(){function r(){var u=this;(function(r,u){if(!(r instanceof u))throw new TypeError("Cannot call a class as a function")})(this,r),this.t=function(c,l){if(u.input=c,u.schemaCheck=null,l)if("string"==typeof l)u.input=(0,m.getNestedObject)(u.input,l);else{var f=(0,m.convertSchemaAndGetMatch)(u.input,l);-1===f?(u.schemaCheck=!1,u.input=c):(u.schemaCheck=!0,u.input=f)}return u}}return i(r,[{key:"isValid",get:function(){return null!==this.schemaCheck&&!0===this.schemaCheck&&null!=this.input}},{key:"isDefined",get:function(){return void 0!==this.input}},{key:"isUndefined",get:function(){return void 0===this.input}},{key:"isNull",get:function(){return null===this.input&&"object"===X(this.input)}},{key:"isNullOrUndefined",get:function(){return!(!this.isNull&&!this.isUndefined)}},{key:"isBoolean",get:function(){return X(this.input)===X(!0)}},{key:"isTrue",get:function(){return!0===this.input}},{key:"isFalse",get:function(){return!1===this.input}},{key:"isTruthy",get:function(){return!!this.input}},{key:"isFalsy",get:function(){return!this.input}},{key:"isObject",get:function(){return"object"===X(this.input)&&this.input===Object(this.input)&&"[object Array]"!==Object.prototype.toString.call(this.input)&&"[object Date]"!==Object.prototype.toString.call(this.input)}},{key:"isEmptyObject",get:function(){return!(!this.isObject||0!==Object.keys(this.input).length)}},{key:"isString",get:function(){return"string"==typeof this.input}},{key:"isEmptyString",get:function(){return!(!this.isString||0!==this.input.length)}},{key:"isNumber",get:function(){return!!Number.isFinite(this.input)}},{key:"isArray",get:function(){return!!Array.isArray(this.input)}},{key:"isEmptyArray",get:function(){return!(!this.isArray||0!==this.input.length)}},{key:"isFunction",get:function(){return"function"==typeof this.input}},{key:"isDate",get:function(){return this.input instanceof Date||"[object Date]"===Object.prototype.toString.call(this.input)}},{key:"isSymbol",get:function(){return"symbol"===X(this.input)||"object"===X(this.input)&&"[object Symbol]"===Object.prototype.toString.call(this.input)}},{key:"safeObject",get:function(){return this.input}},{key:"safeObjectOrEmpty",get:function(){return this.input?this.input:{}}},{key:"safeString",get:function(){return this.isString?this.input:""}},{key:"safeNumber",get:function(){return this.isNumber?this.input:0}},{key:"safeBoolean",get:function(){return!!this.isBoolean&&this.input}},{key:"safeFunction",get:function(){return this.isFunction?this.input:function(){}}},{key:"safeArray",get:function(){return this.isArray?this.input:this.isNullOrUndefined?[]:[this.input]}}]),r}();p.Schema={Number:1,String:"typy",Boolean:!0,Null:null,Undefined:void 0,Array:[],Function:function(){},Date:new Date,Symbol:Symbol("")},h.default=p,es.exports=h.default},132:es=>{"use strict";var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},X=function(b){if("[object Array]"===Object.prototype.toString.call(b))b.forEach(function(p){return X(p)});else{if("[object Object]"!==Object.prototype.toString.call(b))return void 0===b?"undefined":h(b);Object.keys(b).forEach(function(p){return X(b[p])})}return b},i=function(b,p){var r=!1;if("[object Array]"===Object.prototype.toString.call(b)){if(!p.length)return!0;for(var u=0;u<b.length;u+=1){if(!i(b[u],p[u])){r=!1;break}r=!0}}else{if("[object Object]"!==Object.prototype.toString.call(b))return(void 0===p?"undefined":h(p))===(void 0===b?"undefined":h(b));for(var c in b){if(!i(b[c],p[c])){r=!1;break}r=!0}}return r};es.exports={getNestedObject:function(b,p){if(void 0===p||"string"==typeof p)return void 0!==b&&"string"==typeof p&&(b=p.split(/[.\[\]'"]/g).filter(function(c){return""!==c}).reduce(function(c,l){return c&&"undefined"!==c[l]?c[l]:void 0},b)),b},buildSchema:X,getSchemaMatch:i,convertSchemaAndGetMatch:function(b,p){var r=X(p);return i(b,r)?b:-1}}},807:es=>{es.exports=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]]},819:(es,h,G)=>{"use strict";var X=G(163),i=G(807),m={nul:0,control:0};function b(u,c){if("string"!=typeof u)return p(u,c);for(var l=0,f=0;f<u.length;f++){var s=p(u.charCodeAt(f),c);if(s<0)return-1;l+=s}return l}function p(u,c){return 0===u?c.nul:u<32||u>=127&&u<160?c.control:function(u){var f,c=0,l=i.length-1;if(u<i[0][0]||u>i[l][1])return!1;for(;l>=c;)if(f=Math.floor((c+l)/2),u>i[f][1])c=f+1;else{if(!(u<i[f][0]))return!0;l=f-1}return!1}(u)?0:1+(u>=4352&&(u<=4447||9001==u||9002==u||u>=11904&&u<=42191&&12351!=u||u>=44032&&u<=55203||u>=63744&&u<=64255||u>=65040&&u<=65049||u>=65072&&u<=65135||u>=65280&&u<=65376||u>=65504&&u<=65510||u>=131072&&u<=196605||u>=196608&&u<=262141))}es.exports=function(c){return b(c,m)},es.exports.config=function(u){return u=X(u||{},m),function(l){return b(l,u)}}},624:(es,h,G)=>{"use strict";function X(n){return"function"==typeof n}let i=!1;const m={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=n},get useDeprecatedSynchronousErrorHandling(){return i}};function b(n){setTimeout(()=>{throw n},0)}const p={closed:!0,next(n){},error(n){if(m.useDeprecatedSynchronousErrorHandling)throw n;b(n)},complete(){}},r=Array.isArray||(n=>n&&"number"==typeof n.length);function u(n){return null!==n&&"object"==typeof n}const l=(()=>{function n(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((e,a)=>`${a+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return n.prototype=Object.create(Error.prototype),n})();class f{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:a,_unsubscribe:T,_subscriptions:F}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof f)e.remove(this);else if(null!==e)for(let ee=0;ee<e.length;++ee)e[ee].remove(this);if(X(T)){a&&(this._unsubscribe=void 0);try{T.call(this)}catch(ee){t=ee instanceof l?s(ee.errors):[ee]}}if(r(F)){let ee=-1,ce=F.length;for(;++ee<ce;){const xe=F[ee];if(u(xe))try{xe.unsubscribe()}catch(Re){t=t||[],Re instanceof l?t=t.concat(s(Re.errors)):t.push(Re)}}}if(t)throw new l(t)}add(t){let e=t;if(!t)return f.EMPTY;switch(typeof t){case"function":e=new f(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof f)){const F=e;e=new f,e._subscriptions=[F]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:a}=e;if(null===a)e._parentOrParents=this;else if(a instanceof f){if(a===this)return e;e._parentOrParents=[a,this]}else{if(-1!==a.indexOf(this))return e;a.push(this)}const T=this._subscriptions;return null===T?this._subscriptions=[e]:T.push(e),e}remove(t){const e=this._subscriptions;if(e){const a=e.indexOf(t);-1!==a&&e.splice(a,1)}}}var n;function s(n){return n.reduce((t,e)=>t.concat(e instanceof l?e.errors:e),[])}f.EMPTY=((n=new f).closed=!0,n);const o="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class g extends f{constructor(t,e,a){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=p;break;case 1:if(!t){this.destination=p;break}if("object"==typeof t){t instanceof g?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new y(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new y(this,t,e,a)}}[o](){return this}static create(t,e,a){const T=new g(t,e,a);return T.syncErrorThrowable=!1,T}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class y extends g{constructor(t,e,a,T){super(),this._parentSubscriber=t;let F,ee=this;X(e)?F=e:e&&(F=e.next,a=e.error,T=e.complete,e!==p&&(ee=Object.create(e),X(ee.unsubscribe)&&this.add(ee.unsubscribe.bind(ee)),ee.unsubscribe=this.unsubscribe.bind(this))),this._context=ee,this._next=F,this._error=a,this._complete=T}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;m.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:a}=m;if(this._error)a&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)a?(e.syncErrorValue=t,e.syncErrorThrown=!0):b(t),this.unsubscribe();else{if(this.unsubscribe(),a)throw t;b(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);m.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(a){if(this.unsubscribe(),m.useDeprecatedSynchronousErrorHandling)throw a;b(a)}}__tryOrSetError(t,e,a){if(!m.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,a)}catch(T){return m.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=T,t.syncErrorThrown=!0,!0):(b(T),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const w="function"==typeof Symbol&&Symbol.observable||"@@observable";function x(n){return n}let C=(()=>{class n{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(e){const a=new n;return a.source=this,a.operator=e,a}subscribe(e,a,T){const{operator:F}=this,ee=function(n,t,e){if(n){if(n instanceof g)return n;if(n[o])return n[o]()}return n||t||e?new g(n,t,e):new g(p)}(e,a,T);if(ee.add(F?F.call(ee,this.source):this.source||m.useDeprecatedSynchronousErrorHandling&&!ee.syncErrorThrowable?this._subscribe(ee):this._trySubscribe(ee)),m.useDeprecatedSynchronousErrorHandling&&ee.syncErrorThrowable&&(ee.syncErrorThrowable=!1,ee.syncErrorThrown))throw ee.syncErrorValue;return ee}_trySubscribe(e){try{return this._subscribe(e)}catch(a){m.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=a),function(n){for(;n;){const{closed:t,destination:e,isStopped:a}=n;if(t||a)return!1;n=e&&e instanceof g?e:null}return!0}(e)?e.error(a):console.warn(a)}}forEach(e,a){return new(a=L(a))((T,F)=>{let ee;ee=this.subscribe(ce=>{try{e(ce)}catch(xe){F(xe),ee&&ee.unsubscribe()}},F,T)})}_subscribe(e){const{source:a}=this;return a&&a.subscribe(e)}[w](){return this}pipe(...e){return 0===e.length?this:function(n){return 0===n.length?x:1===n.length?n[0]:function(e){return n.reduce((a,T)=>T(a),e)}}(e)(this)}toPromise(e){return new(e=L(e))((a,T)=>{let F;this.subscribe(ee=>F=ee,ee=>T(ee),()=>a(F))})}}return n.create=t=>new n(t),n})();function L(n){if(n||(n=m.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const A=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class I extends f{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const a=e.indexOf(this.subscriber);-1!==a&&e.splice(a,1)}}class D extends g{constructor(t){super(t),this.destination=t}}let R=(()=>{class n extends C{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[o](){return new D(this)}lift(e){const a=new S(this,this);return a.operator=e,a}next(e){if(this.closed)throw new A;if(!this.isStopped){const{observers:a}=this,T=a.length,F=a.slice();for(let ee=0;ee<T;ee++)F[ee].next(e)}}error(e){if(this.closed)throw new A;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:a}=this,T=a.length,F=a.slice();for(let ee=0;ee<T;ee++)F[ee].error(e);this.observers.length=0}complete(){if(this.closed)throw new A;this.isStopped=!0;const{observers:e}=this,a=e.length,T=e.slice();for(let F=0;F<a;F++)T[F].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new A;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new A;return this.hasError?(e.error(this.thrownError),f.EMPTY):this.isStopped?(e.complete(),f.EMPTY):(this.observers.push(e),new I(this,e))}asObservable(){const e=new C;return e.source=this,e}}return n.create=(t,e)=>new S(t,e),n})();class S extends R{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):f.EMPTY}}function N(n){return n&&"function"==typeof n.schedule}function B(n,t){return function(a){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return a.lift(new H(n,t))}}class H{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new Y(t,this.project,this.thisArg))}}class Y extends g{constructor(t,e,a){super(t),this.project=e,this.count=0,this.thisArg=a||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(a){return void this.destination.error(a)}this.destination.next(e)}}const Q=n=>t=>{for(let e=0,a=n.length;e<a&&!t.closed;e++)t.next(n[e]);t.complete()},te="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",V=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function W(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const Z=n=>{if(n&&"function"==typeof n[w])return(n=>t=>{const e=n[w]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)})(n);if(V(n))return Q(n);if(W(n))return(n=>t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,b),t))(n);if(n&&"function"==typeof n[te])return(n=>t=>{const e=n[te]();for(;;){let a;try{a=e.next()}catch(T){return t.error(T),t}if(a.done){t.complete();break}if(t.next(a.value),t.closed)break}return"function"==typeof e.return&&t.add(()=>{e.return&&e.return()}),t})(n);{const e=`You provided ${u(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(e)}};function ue(n,t){return new C(e=>{const a=new f;let T=0;return a.add(t.schedule(function(){T!==n.length?(e.next(n[T++]),e.closed||a.add(this.schedule())):e.complete()})),a})}function pe(n,t){return t?function(n,t){if(null!=n){if(function(n){return n&&"function"==typeof n[w]}(n))return function(n,t){return new C(e=>{const a=new f;return a.add(t.schedule(()=>{const T=n[w]();a.add(T.subscribe({next(F){a.add(t.schedule(()=>e.next(F)))},error(F){a.add(t.schedule(()=>e.error(F)))},complete(){a.add(t.schedule(()=>e.complete()))}}))})),a})}(n,t);if(W(n))return function(n,t){return new C(e=>{const a=new f;return a.add(t.schedule(()=>n.then(T=>{a.add(t.schedule(()=>{e.next(T),a.add(t.schedule(()=>e.complete()))}))},T=>{a.add(t.schedule(()=>e.error(T)))}))),a})}(n,t);if(V(n))return ue(n,t);if(function(n){return n&&"function"==typeof n[te]}(n)||"string"==typeof n)return function(n,t){if(!n)throw new Error("Iterable cannot be null");return new C(e=>{const a=new f;let T;return a.add(()=>{T&&"function"==typeof T.return&&T.return()}),a.add(t.schedule(()=>{T=n[te](),a.add(t.schedule(function(){if(e.closed)return;let F,ee;try{const ce=T.next();F=ce.value,ee=ce.done}catch(ce){return void e.error(ce)}ee?e.complete():(e.next(F),this.schedule())}))})),a})}(n,t)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,t):n instanceof C?n:new C(Z(n))}class Te extends g{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ke extends g{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function je(n,t){if(t.closed)return;if(n instanceof C)return n.subscribe(t);let e;try{e=Z(n)(t)}catch(a){t.error(a)}return e}function Ie(n,t,e=Number.POSITIVE_INFINITY){return"function"==typeof t?a=>a.pipe(Ie((T,F)=>pe(n(T,F)).pipe(B((ee,ce)=>t(T,ee,F,ce))),e)):("number"==typeof t&&(e=t),a=>a.lift(new Ce(n,e)))}class Ce{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new _e(t,this.project,this.concurrent))}}class _e extends ke{constructor(t,e,a=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=a,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const a=this.index++;try{e=this.project(t,a)}catch(T){return void this.destination.error(T)}this.active++,this._innerSub(e)}_innerSub(t){const e=new Te(this),a=this.destination;a.add(e);const T=je(t,e);T!==e&&a.add(T)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Se(n=Number.POSITIVE_INFINITY){return Ie(x,n)}function Oe(n,t){return t?ue(n,t):new C(Q(n))}function He(){return function(t){return t.lift(new Xe(t))}}class Xe{constructor(t){this.connectable=t}call(t,e){const{connectable:a}=this;a._refCount++;const T=new nt(t,a),F=e.subscribe(T);return T.closed||(T.connection=a.connect()),F}}class nt extends g{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:a}=this,T=t._connection;this.connection=null,T&&(!a||T===a)&&T.unsubscribe()}}class et extends C{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new f,t.add(this.source.subscribe(new Ye(this.getSubject(),this))),t.closed&&(this._connection=null,t=f.EMPTY)),t}refCount(){return He()(this)}}const qe=(()=>{const n=et.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class Ye extends D{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function xt(){return new R}function At(n){for(let t in n)if(n[t]===At)return t;throw Error("Could not find renamed property on target object.")}function ht(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function st(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(st).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Bt(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const gn=At({__forward_ref__:At});function hn(n){return n.__forward_ref__=hn,n.toString=function(){return st(this())},n}function We(n){return it(n)?n():n}function it(n){return"function"==typeof n&&n.hasOwnProperty(gn)&&n.__forward_ref__===hn}class Ge extends Error{constructor(t,e){super(function(n,t){return`${n?`NG0${n}: `:""}${t}`}(t,e)),this.code=t}}function Ne(n){return"string"==typeof n?n:null==n?"":String(n)}function Ve(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ne(n)}function pt(n,t){const e=t?` in ${t}`:"";throw new Ge("201",`No provider for ${Ve(n)} found${e}`)}function tn(n,t){null==n&&function(n,t,e,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${e} ${a} ${t} <=Actual]`))}(t,n,null,"!=")}function Mn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function sn(n){return{providers:n.providers||[],imports:n.imports||[]}}function In(n){return Rn(n,rr)||Rn(n,jr)}function Rn(n,t){return n.hasOwnProperty(t)?n[t]:null}function nr(n){return n&&(n.hasOwnProperty(gr)||n.hasOwnProperty(kr))?n[gr]:null}const rr=At({\u0275prov:At}),gr=At({\u0275inj:At}),jr=At({ngInjectableDef:At}),kr=At({ngInjectorDef:At});var er=(()=>((er=er||{})[er.Default=0]="Default",er[er.Host=1]="Host",er[er.Self=2]="Self",er[er.SkipSelf=4]="SkipSelf",er[er.Optional=8]="Optional",er))();let Xr;function Bn(n){const t=Xr;return Xr=n,t}function mr(n,t,e){const a=In(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:e&er.Optional?null:void 0!==t?t:void pt(st(n),"Injector")}function br(n){return{toString:n}.toString()}var Dr=(()=>((Dr=Dr||{})[Dr.OnPush=0]="OnPush",Dr[Dr.Default=1]="Default",Dr))(),pi=(()=>((pi=pi||{})[pi.Emulated=0]="Emulated",pi[pi.None=2]="None",pi[pi.ShadowDom=3]="ShadowDom",pi))();const qi="undefined"!=typeof globalThis&&globalThis,Ct="undefined"!=typeof window&&window,mn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,pn="undefined"!=typeof global&&global,Sn=qi||pn||Ct||mn,Hn={},Dn=[],Jn=At({\u0275cmp:At}),Nn=At({\u0275dir:At}),Un=At({\u0275pipe:At}),sr=At({\u0275mod:At}),Wr=At({\u0275loc:At}),Vr=At({\u0275fac:At}),Zr=At({__NG_ELEMENT_ID__:At});let Or=0;function $r(n){return br(()=>{const e={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Dr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Dn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||pi.Emulated,id:"c",styles:n.styles||Dn,_:null,setInput:null,schemas:n.schemas||null,tView:null},T=n.directives,F=n.features,ee=n.pipes;return a.id+=Or++,a.inputs=Lr(n.inputs,e),a.outputs=Lr(n.outputs),F&&F.forEach(ce=>ce(a)),a.directiveDefs=T?()=>("function"==typeof T?T():T).map(Bi):null,a.pipeDefs=ee?()=>("function"==typeof ee?ee():ee).map(ci):null,a})}function Bi(n){return ga(n)||function(n){return n[Nn]||null}(n)}function ci(n){return function(n){return n[Un]||null}(n)}const Ai={};function wi(n){return br(()=>{const t={type:n.type,bootstrap:n.bootstrap||Dn,declarations:n.declarations||Dn,imports:n.imports||Dn,exports:n.exports||Dn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Ai[n.id]=n.type),t})}function Lr(n,t){if(null==n)return Hn;const e={};for(const a in n)if(n.hasOwnProperty(a)){let T=n[a],F=T;Array.isArray(T)&&(F=T[1],T=T[0]),e[T]=a,t&&(t[T]=F)}return e}const vr=$r;function ga(n){return n[Jn]||null}function Xa(n,t){const e=n[sr]||null;if(!e&&!0===t)throw new Error(`Type ${st(n)} does not have '\u0275mod' property.`);return e}function Ds(n){return Array.isArray(n)&&"object"==typeof n[1]}function Os(n){return Array.isArray(n)&&!0===n[1]}function Zs(n){return 0!=(8&n.flags)}function iu(n){return 2==(2&n.flags)}function Ls(n){return 1==(1&n.flags)}function Ts(n){return null!==n.template}function Zu(n){return 0!=(512&n[2])}function ei(n,t){return n.hasOwnProperty(Vr)?n[Vr]:null}class Qi{constructor(t,e,a){this.previousValue=t,this.currentValue=e,this.firstChange=a}isFirstChange(){return this.firstChange}}function Ci(){return La}function La(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ba),Ra}function Ra(){const n=jo(this),t=null==n?void 0:n.current;if(t){const e=n.previous;if(e===Hn)n.previous=t;else for(let a in t)e[a]=t[a];n.current=null,this.ngOnChanges(t)}}function Ba(n,t,e,a){const T=jo(n)||function(n,t){return n[Go]=t}(n,{previous:Hn,current:null}),F=T.current||(T.current={}),ee=T.previous,ce=this.declaredInputs[e],xe=ee[ce];F[ce]=new Qi(xe&&xe.currentValue,t,ee===Hn),n[a]=t}Ci.ngInherit=!0;const Go="__ngSimpleChanges__";function jo(n){return n[Go]||null}let Rs;function Gt(n){return!!n.listen}const on={createRenderer:(n,t)=>void 0!==Rs?Rs:"undefined"!=typeof document?document:void 0};function Vn(n){for(;Array.isArray(n);)n=n[0];return n}function Tr(n,t){return Vn(t[n])}function yr(n,t){return Vn(t[n.index])}function Br(n,t){return n.data[t]}function Pr(n,t){const e=t[n];return Ds(e)?e:e[0]}function ai(n){return 4==(4&n[2])}function gi(n){return 128==(128&n[2])}function ur(n,t){return null==t?null:n[t]}function Ni(n){n[18]=0}function Jr(n,t){n[5]+=t;let e=n,a=n[3];for(;null!==a&&(1===t&&1===e[5]||-1===t&&0===e[5]);)a[5]+=t,e=a,a=a[3]}const Mr={lFrame:au(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ea(){return Mr.bindingsEnabled}function Ar(){return Mr.lFrame.lView}function Di(){return Mr.lFrame.tView}function mi(){let n=$a();for(;null!==n&&64===n.type;)n=n.parent;return n}function $a(){return Mr.lFrame.currentTNode}function Fs(n,t){const e=Mr.lFrame;e.currentTNode=n,e.isParent=t}function bl(){return Mr.lFrame.isParent}function Js(){Mr.lFrame.isParent=!1}function qs(){return Mr.isInCheckNoChangesMode}function ja(n){Mr.isInCheckNoChangesMode=n}function As(){return Mr.lFrame.bindingIndex++}function Fa(n){const t=Mr.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function vu(n,t){const e=Mr.lFrame;e.bindingIndex=e.bindingRootIndex=n,ns(t)}function ns(n){Mr.lFrame.currentDirectiveIndex=n}function ds(){return Mr.lFrame.currentQueryIndex}function ql(n){Mr.lFrame.currentQueryIndex=n}function Gi(n){const t=n[1];return 2===t.type?t.declTNode:1===t.type?n[6]:null}function ia(n,t,e){if(e&er.SkipSelf){let T=t,F=n;for(;!(T=T.parent,null!==T||e&er.Host||(T=Gi(F),null===T||(F=F[15],10&T.type))););if(null===T)return!1;t=T,n=F}const a=Mr.lFrame=wc();return a.currentTNode=t,a.lView=n,!0}function Xu(n){const t=wc(),e=n[1];Mr.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function wc(){const n=Mr.lFrame,t=null===n?null:n.child;return null===t?au(n):t}function au(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function _l(){const n=Mr.lFrame;return Mr.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ll=_l;function Tc(){const n=_l();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ba(){return Mr.lFrame.selectedIndex}function xl(n){Mr.lFrame.selectedIndex=n}function _o(){const n=Mr.lFrame;return Br(n.tView,n.selectedIndex)}function Dc(n,t){for(let e=t.directiveStart,a=t.directiveEnd;e<a;e++){const F=n.data[e].type.prototype,{ngAfterContentInit:ee,ngAfterContentChecked:ce,ngAfterViewInit:xe,ngAfterViewChecked:Re,ngOnDestroy:$e}=F;ee&&(n.contentHooks||(n.contentHooks=[])).push(-e,ee),ce&&((n.contentHooks||(n.contentHooks=[])).push(e,ce),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(e,ce)),xe&&(n.viewHooks||(n.viewHooks=[])).push(-e,xe),Re&&((n.viewHooks||(n.viewHooks=[])).push(e,Re),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(e,Re)),null!=$e&&(n.destroyHooks||(n.destroyHooks=[])).push(e,$e)}}function Hc(n,t,e){cc(n,t,3,e)}function ou(n,t,e,a){(3&n[2])===e&&cc(n,t,e,a)}function Gc(n,t){let e=n[2];(3&e)===t&&(e&=2047,e+=1,n[2]=e)}function cc(n,t,e,a){const F=null!=a?a:-1,ee=t.length-1;let ce=0;for(let xe=void 0!==a?65535&n[18]:0;xe<ee;xe++)if("number"==typeof t[xe+1]){if(ce=t[xe],null!=a&&ce>=a)break}else t[xe]<0&&(n[18]+=65536),(ce<F||-1==F)&&(Qs(n,e,t,xe),n[18]=(4294901760&n[18])+xe+2),xe++}function Qs(n,t,e,a){const T=e[a]<0,F=e[a+1],ce=n[T?-e[a]:e[a]];if(T){if(n[2]>>11<n[18]>>16&&(3&n[2])===t){n[2]+=2048;try{F.call(ce)}finally{}}}else try{F.call(ce)}finally{}}class Ec{constructor(t,e,a){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=a}}function De(n,t,e){const a=Gt(n);let T=0;for(;T<e.length;){const F=e[T];if("number"==typeof F){if(0!==F)break;T++;const ee=e[T++],ce=e[T++],xe=e[T++];a?n.setAttribute(t,ce,xe,ee):t.setAttributeNS(ee,ce,xe)}else{const ee=F,ce=e[++T];Qe(ee)?a&&n.setProperty(t,ee,ce):a?n.setAttribute(t,ee,ce):t.setAttribute(ee,ce),T++}}return T}function Le(n){return 3===n||4===n||6===n}function Qe(n){return 64===n.charCodeAt(0)}function rt(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let a=0;a<t.length;a++){const T=t[a];"number"==typeof T?e=T:0===e||dt(n,e,T,null,-1===e||2===e?t[++a]:null)}}return n}function dt(n,t,e,a,T){let F=0,ee=n.length;if(-1===t)ee=-1;else for(;F<n.length;){const ce=n[F++];if("number"==typeof ce){if(ce===t){ee=-1;break}if(ce>t){ee=F-1;break}}}for(;F<n.length;){const ce=n[F];if("number"==typeof ce)break;if(ce===e){if(null===a)return void(null!==T&&(n[F+1]=T));if(a===n[F+1])return void(n[F+2]=T)}F++,null!==a&&F++,null!==T&&F++}-1!==ee&&(n.splice(ee,0,t),F=ee+1),n.splice(F++,0,e),null!==a&&n.splice(F++,0,a),null!==T&&n.splice(F++,0,T)}function Pt(n){return-1!==n}function Nt(n){return 32767&n}function Ft(n,t){let e=function(n){return n>>16}(n),a=t;for(;e>0;)a=a[15],e--;return a}let It=!0;function Xt(n){const t=It;return It=n,t}let Cn=0;function Gn(n,t){const e=dr(n,t);if(-1!==e)return e;const a=t[1];a.firstCreatePass&&(n.injectorIndex=t.length,pr(a.data,n),pr(t,null),pr(a.blueprint,null));const T=Er(n,t),F=n.injectorIndex;if(Pt(T)){const ee=Nt(T),ce=Ft(T,t),xe=ce[1].data;for(let Re=0;Re<8;Re++)t[F+Re]=ce[ee+Re]|xe[ee+Re]}return t[F+8]=T,F}function pr(n,t){n.push(0,0,0,0,0,0,0,0,t)}function dr(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function Er(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,a=null,T=t;for(;null!==T;){const F=T[1],ee=F.type;if(a=2===ee?F.declTNode:1===ee?T[6]:null,null===a)return-1;if(e++,T=T[15],-1!==a.injectorIndex)return a.injectorIndex|e<<16}return-1}function wr(n,t,e){!function(n,t,e){let a;"string"==typeof e?a=e.charCodeAt(0)||0:e.hasOwnProperty(Zr)&&(a=e[Zr]),null==a&&(a=e[Zr]=Cn++);const T=255&a;t.data[n+(T>>5)]|=1<<T}(n,t,e)}function Mi(n,t,e){if(e&er.Optional)return n;pt(t,"NodeInjector")}function Wi(n,t,e,a){if(e&er.Optional&&void 0===a&&(a=null),0==(e&(er.Self|er.Host))){const T=n[9],F=Bn(void 0);try{return T?T.get(t,a,e&er.Optional):mr(t,a,e&er.Optional)}finally{Bn(F)}}return Mi(a,t,e)}function lr(n,t,e,a=er.Default,T){if(null!==n){const F=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(Zr)?n[Zr]:void 0;return"number"==typeof t?t>=0?255&t:ki:t}(e);if("function"==typeof F){if(!ia(t,n,a))return a&er.Host?Mi(T,e,a):Wi(t,e,a,T);try{const ee=F(a);if(null!=ee||a&er.Optional)return ee;pt(e)}finally{Ll()}}else if("number"==typeof F){let ee=null,ce=dr(n,t),xe=-1,Re=a&er.Host?t[16][6]:null;for((-1===ce||a&er.SkipSelf)&&(xe=-1===ce?Er(n,t):t[ce+8],-1!==xe&&sa(a,!1)?(ee=t[1],ce=Nt(xe),t=Ft(xe,t)):ce=-1);-1!==ce;){const $e=t[1];if(Ii(F,ce,$e.data)){const ft=vi(ce,t,e,ee,a,Re);if(ft!==Ur)return ft}xe=t[ce+8],-1!==xe&&sa(a,t[1].data[ce+8]===Re)&&Ii(F,ce,t)?(ee=$e,ce=Nt(xe),t=Ft(xe,t)):ce=-1}}}return Wi(t,e,a,T)}const Ur={};function ki(){return new ta(mi(),Ar())}function vi(n,t,e,a,T,F){const ee=t[1],ce=ee.data[n+8],$e=Oi(ce,ee,e,null==a?iu(ce)&&It:a!=ee&&0!=(3&ce.type),T&er.Host&&F===ce);return null!==$e?$i(t,ee,$e,ce):Ur}function Oi(n,t,e,a,T){const F=n.providerIndexes,ee=t.data,ce=1048575&F,xe=n.directiveStart,$e=F>>20,yt=T?ce+$e:n.directiveEnd;for(let Ot=a?ce:ce+$e;Ot<yt;Ot++){const nn=ee[Ot];if(Ot<xe&&e===nn||Ot>=xe&&nn.type===e)return Ot}if(T){const Ot=ee[xe];if(Ot&&Ts(Ot)&&Ot.type===e)return xe}return null}function $i(n,t,e,a){let T=n[e];const F=t.data;if(function(n){return n instanceof Ec}(T)){const ee=T;ee.resolving&&function(n,t){throw new Ge("200",`Circular dependency in DI detected for ${n}`)}(Ve(F[e]));const ce=Xt(ee.canSeeViewProviders);ee.resolving=!0;const xe=ee.injectImpl?Bn(ee.injectImpl):null;ia(n,a,er.Default);try{T=n[e]=ee.factory(void 0,F,n,a),t.firstCreatePass&&e>=a.directiveStart&&function(n,t,e){const{ngOnChanges:a,ngOnInit:T,ngDoCheck:F}=t.type.prototype;if(a){const ee=La(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(n,ee),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,ee)}T&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-n,T),F&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n,F),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,F))}(e,F[e],t)}finally{null!==xe&&Bn(xe),Xt(ce),ee.resolving=!1,Ll()}}return T}function Ii(n,t,e){return!!(e[t+(n>>5)]&1<<n)}function sa(n,t){return!(n&er.Self||n&er.Host&&t)}class ta{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return lr(this._tNode,this._lView,t,void 0,e)}}function na(n){return br(()=>{const t=n.prototype.constructor,e=t[Vr]||aa(t),a=Object.prototype;let T=Object.getPrototypeOf(n.prototype).constructor;for(;T&&T!==a;){const F=T[Vr]||aa(T);if(F&&F!==e)return F;T=Object.getPrototypeOf(T)}return F=>new F})}function aa(n){return it(n)?()=>{const t=aa(We(n));return t&&t()}:ei(n)}const fo="__parameters__";function wo(n,t,e){return br(()=>{const a=function(n){return function(...e){if(n){const a=n(...e);for(const T in a)this[T]=a[T]}}}(t);function T(...F){if(this instanceof T)return a.apply(this,F),this;const ee=new T(...F);return ce.annotation=ee,ce;function ce(xe,Re,$e){const ft=xe.hasOwnProperty(fo)?xe[fo]:Object.defineProperty(xe,fo,{value:[]})[fo];for(;ft.length<=$e;)ft.push(null);return(ft[$e]=ft[$e]||[]).push(ee),xe}}return e&&(T.prototype=Object.create(e.prototype)),T.prototype.ngMetadataName=n,T.annotationCls=T,T})}class Ta{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Mn({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const uh=new Ta("AnalyzeForEntryComponents"),Uf=Function;function Bu(n,t){void 0===t&&(t=n);for(let e=0;e<n.length;e++){let a=n[e];Array.isArray(a)?(t===n&&(t=n.slice(0,e)),Bu(a,t)):t!==n&&t.push(a)}return t}function hc(n,t){n.forEach(e=>Array.isArray(e)?hc(e,t):t(e))}function Cc(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function fh(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Hf(n,t){const e=[];for(let a=0;a<n;a++)e.push(t);return e}function ms(n,t,e){let a=hh(n,t);return a>=0?n[1|a]=e:(a=~a,function(n,t,e,a){let T=n.length;if(T==t)n.push(e,a);else if(1===T)n.push(a,n[0]),n[0]=e;else{for(T--,n.push(n[T-1],n[T]);T>t;)n[T]=n[T-2],T--;n[t]=e,n[t+1]=a}}(n,a,t,e)),a}function yg(n,t){const e=hh(n,t);if(e>=0)return n[1|e]}function hh(n,t){return function(n,t,e){let a=0,T=n.length>>e;for(;T!==a;){const F=a+(T-a>>1),ee=n[F<<e];if(t===ee)return F<<e;ee>t?T=F:a=F+1}return~(T<<e)}(n,t,1)}const Ud={},bg="__NG_DI_FLAG__",Nh="ngTempTokenPath",yb=/\n/gm,Hd="__source",Wf=At({provide:String,useValue:At});let Gd;function ys(n){const t=Gd;return Gd=n,t}function jp(n,t=er.Default){if(void 0===Gd)throw new Error("inject() must be called from an injection context");return null===Gd?mr(n,void 0,t):Gd.get(n,t&er.Optional?null:void 0,t)}function Hr(n,t=er.Default){return(Xr||jp)(We(n),t)}function Sc(n){const t=[];for(let e=0;e<n.length;e++){const a=We(n[e]);if(Array.isArray(a)){if(0===a.length)throw new Error("Arguments array must have arguments.");let T,F=er.Default;for(let ee=0;ee<a.length;ee++){const ce=a[ee],xe=My(ce);"number"==typeof xe?-1===xe?T=ce.token:F|=xe:T=ce}t.push(Hr(T,F))}else t.push(Hr(a))}return t}function zh(n,t){return n[bg]=t,n.prototype[bg]=t,n}function My(n){return n[bg]}function Bh(n,t,e,a){const T=n[Nh];throw t[Hd]&&T.unshift(t[Hd]),n.message=function(n,t,e,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let T=st(t);if(Array.isArray(t))T=t.map(st).join(" -> ");else if("object"==typeof t){let F=[];for(let ee in t)if(t.hasOwnProperty(ee)){let ce=t[ee];F.push(ee+":"+("string"==typeof ce?JSON.stringify(ce):st(ce)))}T=`{${F.join(", ")}}`}return`${e}${a?"("+a+")":""}[${T}]: ${n.replace(yb,"\n  ")}`}("\n"+n.message,T,e,a),n.ngTokenPath=T,n[Nh]=null,n}const jh=zh(wo("Inject",n=>({token:n})),-1),Nl=zh(wo("Optional"),8),Zc=zh(wo("SkipSelf"),4);function Vu(n){return n instanceof class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?n.changingThisBreaksApplicationSecurity:n}const Ig="__ngContext__";function $l(n,t){n[Ig]=t}function Jp(n){const t=function(n){return n[Ig]||null}(n);return t?Array.isArray(t)?t:t.lView:null}function Xh(n){return n.ngOriginalError}function Xy(n,...t){n.error(...t)}class yh{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),a=this._findContext(t),T=function(n){return n&&n.ngErrorLogger||Xy}(t);T(this._console,"ERROR",t),e&&T(this._console,"ORIGINAL ERROR",e),a&&T(this._console,"ERROR CONTEXT",a)}_findContext(t){return t?function(n){return n.ngDebugContext}(t)||this._findContext(Xh(t)):null}_findOriginalError(t){let e=t&&Xh(t);for(;e&&Xh(e);)e=Xh(e);return e||null}}const Jy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Sn))();function Kc(n){return n instanceof Function?n():n}var cu=(()=>((cu=cu||{})[cu.Important=1]="Important",cu[cu.DashCase=2]="DashCase",cu))();function ep(n,t){return undefined(n,t)}function Ms(n){const t=n[3];return Os(t)?t[3]:t}function t0(n){return jg(n[13])}function n0(n){return jg(n[4])}function jg(n){for(;null!==n&&!Os(n);)n=n[4];return n}function Zf(n,t,e,a,T){if(null!=a){let F,ee=!1;Os(a)?F=a:Ds(a)&&(ee=!0,a=a[0]);const ce=Vn(a);0===n&&null!==e?null==T?J(t,e,ce):z(t,e,ce,T||null,!0):1===n&&null!==e?z(t,e,ce,T||null,!0):2===n?function(n,t,e){const a=Me(n,t);a&&function(n,t,e,a){Gt(n)?n.removeChild(t,e,a):t.removeChild(e)}(n,a,t,e)}(t,ce,ee):3===n&&t.destroyNode(ce),null!=F&&function(n,t,e,a,T){const F=e[7];F!==Vn(e)&&Zf(t,n,a,F,T);for(let ce=10;ce<e.length;ce++){const xe=e[ce];ar(xe[1],xe,n,t,a,F)}}(t,n,F,e,T)}}function zs(n,t,e){return Gt(n)?n.createElement(t,e):null===e?n.createElement(t):n.createElementNS(e,t)}function Qc(n,t){const e=n[9],a=e.indexOf(t),T=t[3];1024&t[2]&&(t[2]&=-1025,Jr(T,-1)),e.splice(a,1)}function a0(n,t){if(n.length<=10)return;const e=10+t,a=n[e];if(a){const T=a[17];null!==T&&T!==n&&Qc(T,a),t>0&&(n[e-1][4]=a[4]);const F=fh(n,10+t);!function(n,t){ar(n,t,t[11],2,null,null),t[0]=null,t[6]=null}(a[1],a);const ee=F[19];null!==ee&&ee.detachView(F[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Ug(n,t){if(!(256&t[2])){const e=t[11];Gt(e)&&e.destroyNode&&ar(n,t,e,3,null,null),function(n){let t=n[13];if(!t)return Hg(n[1],n);for(;t;){let e=null;if(Ds(t))e=t[13];else{const a=t[10];a&&(e=a)}if(!e){for(;t&&!t[4]&&t!==n;)Ds(t)&&Hg(t[1],t),t=t[3];null===t&&(t=n),Ds(t)&&Hg(t[1],t),e=t&&t[4]}t=e}}(t)}}function Hg(n,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let a=0;a<e.length;a+=2){const T=t[e[a]];if(!(T instanceof Ec)){const F=e[a+1];if(Array.isArray(F))for(let ee=0;ee<F.length;ee+=2){const ce=T[F[ee]],xe=F[ee+1];try{xe.call(ce)}finally{}}else try{F.call(T)}finally{}}}}(n,t),function(n,t){const e=n.cleanup,a=t[7];let T=-1;if(null!==e)for(let F=0;F<e.length-1;F+=2)if("string"==typeof e[F]){const ee=e[F+1],ce="function"==typeof ee?ee(t):Vn(t[ee]),xe=a[T=e[F+2]],Re=e[F+3];"boolean"==typeof Re?ce.removeEventListener(e[F],xe,Re):Re>=0?a[T=Re]():a[T=-Re].unsubscribe(),F+=2}else{const ee=a[T=e[F+1]];e[F].call(ee)}if(null!==a){for(let F=T+1;F<a.length;F++)a[F]();t[7]=null}}(n,t),1===t[1].type&&Gt(t[11])&&t[11].destroy();const e=t[17];if(null!==e&&Os(t[3])){e!==t[3]&&Qc(e,t);const a=t[19];null!==a&&a.detachView(n)}}}function Gg(n,t,e){return function(n,t,e){let a=t;for(;null!==a&&40&a.type;)a=(t=a).parent;if(null===a)return e[0];if(2&a.flags){const T=n.data[a.directiveStart].encapsulation;if(T===pi.None||T===pi.Emulated)return null}return yr(a,e)}(n,t.parent,e)}function z(n,t,e,a,T){Gt(n)?n.insertBefore(t,e,a,T):t.insertBefore(e,a,T)}function J(n,t,e){Gt(n)?n.appendChild(t,e):t.appendChild(e)}function se(n,t,e,a,T){null!==a?z(n,t,e,a,T):J(n,t,e)}function Me(n,t){return Gt(n)?n.parentNode(t):t.parentNode}function Ze(n,t,e){return Tt(n,t,e)}let Tt=function(n,t,e){return 40&n.type?yr(n,e):null};function ln(n,t,e,a){const T=Gg(n,a,t),F=t[11],ce=Ze(a.parent||t[6],a,t);if(null!=T)if(Array.isArray(e))for(let xe=0;xe<e.length;xe++)se(F,T,e[xe],ce,!1);else se(F,T,e,ce,!1)}function an(n,t){if(null!==t){const e=t.type;if(3&e)return yr(t,n);if(4&e)return On(-1,n[t.index]);if(8&e){const a=t.child;if(null!==a)return an(n,a);{const T=n[t.index];return Os(T)?On(-1,T):Vn(T)}}if(32&e)return ep(t,n)()||Vn(n[t.index]);{const a=xn(n,t);return null!==a?Array.isArray(a)?a[0]:an(Ms(n[16]),a):an(n,t.next)}}return null}function xn(n,t){return null!==t?n[16][6].projection[t.projection]:null}function On(n,t){const e=10+n+1;if(e<t.length){const a=t[e],T=a[1].firstChild;if(null!==T)return an(a,T)}return t[7]}function Yn(n,t,e,a,T,F,ee){for(;null!=e;){const ce=a[e.index],xe=e.type;if(ee&&0===t&&(ce&&$l(Vn(ce),a),e.flags|=4),64!=(64&e.flags))if(8&xe)Yn(n,t,e.child,a,T,F,!1),Zf(t,n,T,ce,F);else if(32&xe){const Re=ep(e,a);let $e;for(;$e=Re();)Zf(t,n,T,$e,F);Zf(t,n,T,ce,F)}else 16&xe?cr(n,t,a,e,T,F):Zf(t,n,T,ce,F);e=ee?e.projectionNext:e.next}}function ar(n,t,e,a,T,F){Yn(e,a,n.firstChild,t,T,F,!1)}function cr(n,t,e,a,T,F){const ee=e[16],xe=ee[6].projection[a.projection];if(Array.isArray(xe))for(let Re=0;Re<xe.length;Re++)Zf(t,n,T,xe[Re],F);else Yn(n,t,xe,ee[3],T,F,!0)}function si(n,t,e){Gt(n)?n.setAttribute(t,"style",e):t.style.cssText=e}function ii(n,t,e){Gt(n)?""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e):t.className=e}function _i(n,t,e){let a=n.length;for(;;){const T=n.indexOf(t,e);if(-1===T)return T;if(0===T||n.charCodeAt(T-1)<=32){const F=t.length;if(T+F===a||n.charCodeAt(T+F)<=32)return T}e=T+1}}const Vi="ng-template";function Si(n,t,e){let a=0;for(;a<n.length;){let T=n[a++];if(e&&"class"===T){if(T=n[a],-1!==_i(T.toLowerCase(),t,0))return!0}else if(1===T){for(;a<n.length&&"string"==typeof(T=n[a++]);)if(T.toLowerCase()===t)return!0;return!1}}return!1}function Zi(n){return 4===n.type&&n.value!==Vi}function Yi(n,t,e){return t===(4!==n.type||e?n.value:Vi)}function Hi(n,t,e){let a=4;const T=n.attrs||[],F=function(n){for(let t=0;t<n.length;t++)if(Le(n[t]))return t;return n.length}(T);let ee=!1;for(let ce=0;ce<t.length;ce++){const xe=t[ce];if("number"!=typeof xe){if(!ee)if(4&a){if(a=2|1&a,""!==xe&&!Yi(n,xe,e)||""===xe&&1===t.length){if(Aa(a))return!1;ee=!0}}else{const Re=8&a?xe:t[++ce];if(8&a&&null!==n.attrs){if(!Si(n.attrs,Re,e)){if(Aa(a))return!1;ee=!0}continue}const ft=Ga(8&a?"class":xe,T,Zi(n),e);if(-1===ft){if(Aa(a))return!1;ee=!0;continue}if(""!==Re){let yt;yt=ft>F?"":T[ft+1].toLowerCase();const Ot=8&a?yt:null;if(Ot&&-1!==_i(Ot,Re,0)||2&a&&Re!==yt){if(Aa(a))return!1;ee=!0}}}}else{if(!ee&&!Aa(a)&&!Aa(xe))return!1;if(ee&&Aa(xe))continue;ee=!1,a=xe|1&a}}return Aa(a)||ee}function Aa(n){return 0==(1&n)}function Ga(n,t,e,a){if(null===t)return-1;let T=0;if(a||!e){let F=!1;for(;T<t.length;){const ee=t[T];if(ee===n)return T;if(3===ee||6===ee)F=!0;else{if(1===ee||2===ee){let ce=t[++T];for(;"string"==typeof ce;)ce=t[++T];continue}if(4===ee)break;if(0===ee){T+=4;continue}}T+=F?1:2}return-1}return function(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const a=n[e];if("number"==typeof a)return-1;if(a===t)return e;e++}return-1}(t,n)}function to(n,t,e=!1){for(let a=0;a<t.length;a++)if(Hi(n,t[a],e))return!0;return!1}function zo(n,t){e:for(let e=0;e<t.length;e++){const a=t[e];if(n.length===a.length){for(let T=0;T<n.length;T++)if(n[T]!==a[T])continue e;return!0}}return!1}function Jo(n,t){return n?":not("+t.trim()+")":t}function Bo(n){let t=n[0],e=1,a=2,T="",F=!1;for(;e<n.length;){let ee=n[e];if("string"==typeof ee)if(2&a){const ce=n[++e];T+="["+ee+(ce.length>0?'="'+ce+'"':"")+"]"}else 8&a?T+="."+ee:4&a&&(T+=" "+ee);else""!==T&&!Aa(ee)&&(t+=Jo(F,T),T=""),a=ee,F=F||!Aa(a);e++}return""!==T&&(t+=Jo(F,T)),t}const oa={};function Kr(n){hl(Di(),Ar(),ba()+n,qs())}function hl(n,t,e,a){if(!a)if(3==(3&t[2])){const F=n.preOrderCheckHooks;null!==F&&Hc(t,F,e)}else{const F=n.preOrderHooks;null!==F&&ou(t,F,0,e)}xl(e)}function Al(n,t){return n<<17|t<<2}function vs(n){return n>>17&32767}function Es(n){return 2|n}function Ko(n){return(131068&n)>>2}function ka(n,t){return-131069&n|t<<2}function bs(n){return 1|n}function fd(n,t){const e=n.contentQueries;if(null!==e)for(let a=0;a<e.length;a+=2){const T=e[a],F=e[a+1];if(-1!==F){const ee=n.data[F];ql(T),ee.contentQueries(2,t[F],F)}}}function wh(n,t,e,a,T,F,ee,ce,xe,Re){const $e=t.blueprint.slice();return $e[0]=T,$e[2]=140|a,Ni($e),$e[3]=$e[15]=n,$e[8]=e,$e[10]=ee||n&&n[10],$e[11]=ce||n&&n[11],$e[12]=xe||n&&n[12]||null,$e[9]=Re||n&&n[9]||null,$e[6]=F,$e[16]=2==t.type?n[16]:$e,$e}function Kf(n,t,e,a,T){let F=n.data[t];if(null===F)F=function(n,t,e,a,T){const F=$a(),ee=bl(),xe=n.data[t]=function(n,t,e,a,T,F){return{type:e,index:a,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:T,attrs:F,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,ee?F:F&&F.parent,e,t,a,T);return null===n.firstChild&&(n.firstChild=xe),null!==F&&(ee?null==F.child&&null!==xe.parent&&(F.child=xe):null===F.next&&(F.next=xe)),xe}(n,t,e,a,T),Mr.lFrame.inI18n&&(F.flags|=64);else if(64&F.type){F.type=e,F.value=a,F.attrs=T;const ee=function(){const n=Mr.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();F.injectorIndex=null===ee?-1:ee.injectorIndex}return Fs(F,!0),F}function dd(n,t,e,a){if(0===e)return-1;const T=t.length;for(let F=0;F<e;F++)t.push(a),n.blueprint.push(a),n.data.push(null);return T}function Th(n,t,e){Xu(t);try{const a=n.viewQuery;null!==a&&lm(1,a,e);const T=n.template;null!==T&&ev(n,t,T,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&fd(n,t),n.staticViewQueries&&lm(2,n.viewQuery,e);const F=n.components;null!==F&&function(n,t){for(let e=0;e<t.length;e++)av(n,t[e])}(t,F)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{t[2]&=-5,Tc()}}function Ah(n,t,e,a){const T=t[2];if(256==(256&T))return;Xu(t);const F=qs();try{Ni(t),function(n){Mr.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&ev(n,t,e,2,a);const ee=3==(3&T);if(!F)if(ee){const Re=n.preOrderCheckHooks;null!==Re&&Hc(t,Re,null)}else{const Re=n.preOrderHooks;null!==Re&&ou(t,Re,0,null),Gc(t,0)}if(function(n){for(let t=t0(n);null!==t;t=n0(t)){if(!t[2])continue;const e=t[9];for(let a=0;a<e.length;a++){const T=e[a],F=T[3];0==(1024&T[2])&&Jr(F,1),T[2]|=1024}}}(t),function(n){for(let t=t0(n);null!==t;t=n0(t))for(let e=10;e<t.length;e++){const a=t[e],T=a[1];gi(a)&&Ah(T,a,T.template,a[8])}}(t),null!==n.contentQueries&&fd(n,t),!F)if(ee){const Re=n.contentCheckHooks;null!==Re&&Hc(t,Re)}else{const Re=n.contentHooks;null!==Re&&ou(t,Re,1),Gc(t,1)}!function(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let a=0;a<e.length;a++){const T=e[a];if(T<0)xl(~T);else{const F=T,ee=e[++a],ce=e[++a];vu(ee,F),ce(2,t[F])}}}finally{xl(-1)}}(n,t);const ce=n.components;null!==ce&&function(n,t){for(let e=0;e<t.length;e++)t_(n,t[e])}(t,ce);const xe=n.viewQuery;if(null!==xe&&lm(2,xe,a),!F)if(ee){const Re=n.viewCheckHooks;null!==Re&&Hc(t,Re)}else{const Re=n.viewHooks;null!==Re&&ou(t,Re,2),Gc(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),F||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Jr(t[3],-1))}finally{Tc()}}function Xg(n,t,e,a){const T=t[10],F=!qs(),ee=ai(t);try{F&&!ee&&T.begin&&T.begin(),ee&&Th(n,t,a),Ah(n,t,e,a)}finally{F&&!ee&&T.end&&T.end()}}function ev(n,t,e,a,T){const F=ba(),ee=2&a;try{xl(-1),ee&&t.length>20&&hl(n,t,20,qs()),e(a,T)}finally{xl(F)}}function ks(n,t,e){!Ea()||(function(n,t,e,a){const T=e.directiveStart,F=e.directiveEnd;n.firstCreatePass||Gn(e,t),$l(a,t);const ee=e.initialInputs;for(let ce=T;ce<F;ce++){const xe=n.data[ce],Re=Ts(xe);Re&&rv(t,e,xe);const $e=$i(t,n,ce,e);$l($e,t),null!==ee&&om(0,ce-T,$e,xe,0,ee),Re&&(Pr(e.index,t)[8]=$e)}}(n,t,e,yr(e,t)),128==(128&e.flags)&&function(n,t,e){const a=e.directiveStart,T=e.directiveEnd,ee=e.index,ce=Mr.lFrame.currentDirectiveIndex;try{xl(ee);for(let xe=a;xe<T;xe++){const Re=n.data[xe],$e=t[xe];ns(xe),(null!==Re.hostBindings||0!==Re.hostVars||null!==Re.hostAttrs)&&Qf(Re,$e)}}finally{xl(-1),ns(ce)}}(n,t,e))}function Qu(n,t,e=yr){const a=t.localNames;if(null!==a){let T=t.index+1;for(let F=0;F<a.length;F+=2){const ee=a[F+1],ce=-1===ee?e(t,n):n[ee];n[T++]=ce}}}function tv(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=Nc(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function Nc(n,t,e,a,T,F,ee,ce,xe,Re){const $e=20+a,ft=$e+T,yt=function(n,t){const e=[];for(let a=0;a<t;a++)e.push(a<n?null:oa);return e}($e,ft),Ot="function"==typeof Re?Re():Re;return yt[1]={type:n,blueprint:yt,template:e,queries:null,viewQuery:ce,declTNode:t,data:yt.slice().fill(null,$e),bindingStartIndex:$e,expandoStartIndex:ft,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof F?F():F,pipeRegistry:"function"==typeof ee?ee():ee,firstChild:null,schemas:xe,consts:Ot,incompleteFirstPass:!1}}function op(n,t,e,a){const T=uv(t);null===e?T.push(a):(T.push(e),n.firstCreatePass&&cv(n).push(a,T.length-1))}function lp(n,t,e){for(let a in n)if(n.hasOwnProperty(a)){const T=n[a];(e=null===e?{}:e).hasOwnProperty(a)?e[a].push(t,T):e[a]=[t,T]}return e}function gd(n,t,e,a){let T=!1;if(Ea()){const F=function(n,t,e){const a=n.directiveRegistry;let T=null;if(a)for(let F=0;F<a.length;F++){const ee=a[F];to(e,ee.selectors,!1)&&(T||(T=[]),wr(Gn(e,t),n,ee.type),Ts(ee)?(Mh(n,e),T.unshift(ee)):T.push(ee))}return T}(n,t,e),ee=null===a?null:{"":-1};if(null!==F){T=!0,im(e,n.data.length,F.length);for(let $e=0;$e<F.length;$e++){const ft=F[$e];ft.providersResolver&&ft.providersResolver(ft)}let ce=!1,xe=!1,Re=dd(n,t,F.length,null);for(let $e=0;$e<F.length;$e++){const ft=F[$e];e.mergedAttrs=rt(e.mergedAttrs,ft.hostAttrs),am(n,e,t,Re,ft),vd(Re,ft,ee),null!==ft.contentQueries&&(e.flags|=8),(null!==ft.hostBindings||null!==ft.hostAttrs||0!==ft.hostVars)&&(e.flags|=128);const yt=ft.type.prototype;!ce&&(yt.ngOnChanges||yt.ngOnInit||yt.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e.index),ce=!0),!xe&&(yt.ngOnChanges||yt.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e.index),xe=!0),Re++}!function(n,t){const a=t.directiveEnd,T=n.data,F=t.attrs,ee=[];let ce=null,xe=null;for(let Re=t.directiveStart;Re<a;Re++){const $e=T[Re],ft=$e.inputs,yt=null===F||Zi(t)?null:wf(ft,F);ee.push(yt),ce=lp(ft,Re,ce),xe=lp($e.outputs,Re,xe)}null!==ce&&(ce.hasOwnProperty("class")&&(t.flags|=16),ce.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=ee,t.inputs=ce,t.outputs=xe}(n,e)}ee&&function(n,t,e){if(t){const a=n.localNames=[];for(let T=0;T<t.length;T+=2){const F=e[t[T+1]];if(null==F)throw new Ge("301",`Export of name '${t[T+1]}' not found!`);a.push(t[T],F)}}}(e,a,ee)}return e.mergedAttrs=rt(e.mergedAttrs,e.attrs),T}function nm(n,t,e,a,T,F){const ee=F.hostBindings;if(ee){let ce=n.hostBindingOpCodes;null===ce&&(ce=n.hostBindingOpCodes=[]);const xe=~t.index;(function(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(ce)!=xe&&ce.push(xe),ce.push(a,T,ee)}}function Qf(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function Mh(n,t){t.flags|=2,(n.components||(n.components=[])).push(t.index)}function vd(n,t,e){if(e){if(t.exportAs)for(let a=0;a<t.exportAs.length;a++)e[t.exportAs[a]]=n;Ts(t)&&(e[""]=n)}}function im(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function am(n,t,e,a,T){n.data[a]=T;const F=T.factory||(T.factory=ei(T.type)),ee=new Ec(F,Ts(T),null);n.blueprint[a]=ee,e[a]=ee,nm(n,t,0,a,dd(n,e,T.hostVars,oa),T)}function rv(n,t,e){const a=yr(t,n),T=tv(e),F=n[10],ee=bd(n,wh(n,T,null,e.onPush?64:16,a,t,F,F.createRenderer(a,e),null,null));n[t.index]=ee}function Bc(n,t,e,a,T,F){const ee=yr(n,t);!function(n,t,e,a,T,F,ee){if(null==F)Gt(n)?n.removeAttribute(t,T,e):t.removeAttribute(T);else{const ce=null==ee?Ne(F):ee(F,a||"",T);Gt(n)?n.setAttribute(t,T,ce,e):e?t.setAttributeNS(e,T,ce):t.setAttribute(T,ce)}}(t[11],ee,F,n.value,e,a,T)}function om(n,t,e,a,T,F){const ee=F[t];if(null!==ee){const ce=a.setInput;for(let xe=0;xe<ee.length;){const Re=ee[xe++],$e=ee[xe++],ft=ee[xe++];null!==ce?a.setInput(e,ft,Re,$e):e[$e]=ft}}}function wf(n,t){let e=null,a=0;for(;a<t.length;){const T=t[a];if(0!==T)if(5!==T){if("number"==typeof T)break;n.hasOwnProperty(T)&&(null===e&&(e=[]),e.push(T,n[T],t[a+1])),a+=2}else a+=2;else a+=4}return e}function f0(n,t,e,a){return new Array(n,!0,!1,t,null,0,a,e,null,null)}function t_(n,t){const e=Pr(t,n);if(gi(e)){const a=e[1];80&e[2]?Ah(a,e,a.template,e[8]):e[5]>0&&fp(e)}}function fp(n){for(let a=t0(n);null!==a;a=n0(a))for(let T=10;T<a.length;T++){const F=a[T];if(1024&F[2]){const ee=F[1];Ah(ee,F,ee.template,F[8])}else F[5]>0&&fp(F)}const e=n[1].components;if(null!==e)for(let a=0;a<e.length;a++){const T=Pr(e[a],n);gi(T)&&T[5]>0&&fp(T)}}function av(n,t){const e=Pr(t,n),a=e[1];(function(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(a,e),Th(a,e,e[8])}function bd(n,t){return n[13]?n[14][4]=t:n[13]=t,n[14]=t,t}function h0(n){for(;n;){n[2]|=64;const t=Ms(n);if(Zu(n)&&!t)return n;n=t}return null}function _d(n,t,e){const a=t[10];a.begin&&a.begin();try{Ah(n,t,n.template,e)}catch(T){throw hv(t,T),T}finally{a.end&&a.end()}}function sv(n){!function(n){for(let t=0;t<n.components.length;t++){const e=n.components[t],a=Jp(e),T=a[1];Xg(T,a,T.template,e)}}(n[8])}function lm(n,t,e){ql(0),t(n,e)}const r_=(()=>Promise.resolve(null))();function uv(n){return n[7]||(n[7]=[])}function cv(n){return n.cleanup||(n.cleanup=[])}function hv(n,t){const e=n[9],a=e?e.get(yh,null):null;a&&a.handleError(t)}function jc(n,t,e,a,T){for(let F=0;F<e.length;){const ee=e[F++],ce=e[F++],xe=t[ee],Re=n.data[ee];null!==Re.setInput?Re.setInput(xe,T,a,ce):xe[ce]=T}}function pc(n,t,e){const a=Tr(t,n);!function(n,t,e){Gt(n)?n.setValue(t,e):t.textContent=e}(n[11],a,e)}function dp(n,t,e){let a=e?n.styles:null,T=e?n.classes:null,F=0;if(null!==t)for(let ee=0;ee<t.length;ee++){const ce=t[ee];"number"==typeof ce?F=ce:1==F?T=Bt(T,ce):2==F&&(a=Bt(a,ce+": "+t[++ee]+";"))}e?n.styles=a:n.stylesWithoutHost=a,e?n.classes=T:n.classesWithoutHost=T}const xd=new Ta("INJECTOR",-1);class jw{get(t,e=Ud){if(e===Ud){const a=new Error(`NullInjectorError: No provider for ${st(t)}!`);throw a.name="NullInjectorError",a}return e}}const um=new Ta("Set Injector scope."),cm={},KC={};let i_;function Vw(){return void 0===i_&&(i_=new jw),i_}function Uw(n,t=null,e=null,a){return new eS(n,e,t||Vw(),a)}class eS{constructor(t,e,a,T=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const F=[];e&&hc(e,ce=>this.processProvider(ce,t,e)),hc([t],ce=>this.processInjectorType(ce,[],F)),this.records.set(xd,p0(void 0,this));const ee=this.records.get(um);this.scope=null!=ee?ee.value:null,this.source=T||("object"==typeof t?null:st(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Ud,a=er.Default){this.assertNotDestroyed();const T=ys(this),F=Bn(void 0);try{if(!(a&er.SkipSelf)){let ce=this.records.get(t);if(void 0===ce){const xe=function(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ta}(t)&&In(t);ce=xe&&this.injectableDefInScope(xe)?p0(a_(t),cm):null,this.records.set(t,ce)}if(null!=ce)return this.hydrate(t,ce)}return(a&er.Self?Vw():this.parent).get(t,e=a&er.Optional&&e===Ud?null:e)}catch(ee){if("NullInjectorError"===ee.name){if((ee[Nh]=ee[Nh]||[]).unshift(st(t)),T)throw ee;return Bh(ee,t,"R3InjectorError",this.source)}throw ee}finally{Bn(F),ys(T)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((a,T)=>t.push(st(T))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,a){if(!(t=We(t)))return!1;let T=nr(t);const F=null==T&&t.ngModule||void 0,ee=void 0===F?t:F,ce=-1!==a.indexOf(ee);if(void 0!==F&&(T=nr(F)),null==T)return!1;if(null!=T.imports&&!ce){let $e;a.push(ee);try{hc(T.imports,ft=>{this.processInjectorType(ft,e,a)&&(void 0===$e&&($e=[]),$e.push(ft))})}finally{}if(void 0!==$e)for(let ft=0;ft<$e.length;ft++){const{ngModule:yt,providers:Ot}=$e[ft];hc(Ot,nn=>this.processProvider(nn,yt,Ot||Dn))}}this.injectorDefTypes.add(ee);const xe=ei(ee)||(()=>new ee);this.records.set(ee,p0(xe,cm));const Re=T.providers;if(null!=Re&&!ce){const $e=t;hc(Re,ft=>this.processProvider(ft,$e,Re))}return void 0!==F&&void 0!==t.providers}processProvider(t,e,a){let T=g0(t=We(t))?t:We(t&&t.provide);const F=function(n,t,e){return Gw(n)?p0(void 0,n.useValue):p0(Hw(n),cm)}(t);if(g0(t)||!0!==t.multi)this.records.get(T);else{let ee=this.records.get(T);ee||(ee=p0(void 0,cm,!0),ee.factory=()=>Sc(ee.multi),this.records.set(T,ee)),T=t,ee.multi.push(t)}this.records.set(T,F)}hydrate(t,e){return e.value===cm&&(e.value=KC,e.value=e.factory()),"object"==typeof e.value&&e.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=We(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function a_(n){const t=In(n),e=null!==t?t.factory:ei(n);if(null!==e)return e;if(n instanceof Ta)throw new Error(`Token ${st(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const t=n.length;if(t>0){const a=Hf(t,"?");throw new Error(`Can't resolve all parameters for ${st(n)}: (${a.join(", ")}).`)}const e=function(n){const t=n&&(n[rr]||n[jr]);if(t){const e=function(n){if(n.hasOwnProperty("name"))return n.name;const t=(""+n).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new Error("unreachable")}function Hw(n,t,e){let a;if(g0(n)){const T=We(n);return ei(T)||a_(T)}if(Gw(n))a=()=>We(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Sc(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))a=()=>Hr(We(n.useExisting));else{const T=We(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return ei(T)||a_(T);a=()=>new T(...Sc(n.deps))}return a}function p0(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function Gw(n){return null!==n&&"object"==typeof n&&Wf in n}function g0(n){return"function"==typeof n}const qw=function(n,t,e){return function(n,t=null,e=null,a){const T=Uw(n,t,e,a);return T._resolveInjectorDefTypes(),T}({name:e},t,n,e)};class no{static create(t,e){return Array.isArray(t)?qw(t,e,""):qw(t.providers,t.parent,t.name||"")}}function xS(n,t){Dc(Jp(n)[1],mi())}function $s(n){let t=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const a=[n];for(;t;){let T;if(Ts(n))T=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");T=t.\u0275dir}if(T){if(e){a.push(T);const ee=n;ee.inputs=f_(n.inputs),ee.declaredInputs=f_(n.declaredInputs),ee.outputs=f_(n.outputs);const ce=T.hostBindings;ce&&MS(n,ce);const xe=T.viewQuery,Re=T.contentQueries;if(xe&&TS(n,xe),Re&&AS(n,Re),ht(n.inputs,T.inputs),ht(n.declaredInputs,T.declaredInputs),ht(n.outputs,T.outputs),Ts(T)&&T.data.animation){const $e=n.data;$e.animation=($e.animation||[]).concat(T.data.animation)}}const F=T.features;if(F)for(let ee=0;ee<F.length;ee++){const ce=F[ee];ce&&ce.ngInherit&&ce(n),ce===$s&&(e=!1)}}t=Object.getPrototypeOf(t)}!function(n){let t=0,e=null;for(let a=n.length-1;a>=0;a--){const T=n[a];T.hostVars=t+=T.hostVars,T.hostAttrs=rt(T.hostAttrs,e=rt(e,T.hostAttrs))}}(a)}function f_(n){return n===Hn?{}:n===Dn?[]:n}function TS(n,t){const e=n.viewQuery;n.viewQuery=e?(a,T)=>{t(a,T),e(a,T)}:t}function AS(n,t){const e=n.contentQueries;n.contentQueries=e?(a,T,F)=>{t(a,T,F),e(a,T,F)}:t}function MS(n,t){const e=n.hostBindings;n.hostBindings=e?(a,T)=>{t(a,T),e(a,T)}:t}no.THROW_IF_NOT_FOUND=Ud,no.NULL=new jw,no.\u0275prov=Mn({token:no,providedIn:"any",factory:()=>Hr(xd)}),no.__NG_ELEMENT_ID__=-1;let pv=null;function m0(){if(!pv){const n=Sn.Symbol;if(n&&n.iterator)pv=n.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const a=t[e];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(pv=a)}}}return pv}function hm(n){return!!h_(n)&&(Array.isArray(n)||!(n instanceof Map)&&m0()in n)}function h_(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Gu(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function Lo(n,t,e,a){const T=Ar();return Gu(T,As(),t)&&(Di(),Bc(_o(),T,n,t,e,a)),Lo}function Wn(n,t=er.Default){const e=Ar();return null===e?Hr(n,t):lr(mi(),e,We(n),t)}function li(n,t,e){const a=Ar();return Gu(a,As(),t)&&function(n,t,e,a,T,F,ee,ce){const xe=yr(t,e);let $e,Re=t.inputs;!ce&&null!=Re&&($e=Re[a])?(jc(n,e,$e,a,T),iu(t)&&function(n,t){const e=Pr(t,n);16&e[2]||(e[2]|=64)}(e,t.index)):3&t.type&&(a=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),T=null!=ee?ee(T,t.value||"",a):T,Gt(F)?F.setProperty(xe,a,T):Qe(a)||(xe.setProperty?xe.setProperty(a,T):xe[a]=T))}(Di(),_o(),a,n,t,a[11],e,!1),li}function y_(n,t,e,a,T){const ee=T?"class":"style";jc(n,e,t.inputs[ee],ee,a)}function Gr(n,t,e,a){const T=Ar(),F=Di(),ee=20+n,ce=T[11],xe=T[ee]=zs(ce,t,Mr.lFrame.currentNamespace),Re=F.firstCreatePass?function(n,t,e,a,T,F,ee){const ce=t.consts,Re=Kf(t,n,2,T,ur(ce,F));return gd(t,e,Re,ur(ce,ee)),null!==Re.attrs&&dp(Re,Re.attrs,!1),null!==Re.mergedAttrs&&dp(Re,Re.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,Re),Re}(ee,F,T,0,t,e,a):F.data[ee];Fs(Re,!0);const $e=Re.mergedAttrs;null!==$e&&De(ce,xe,$e);const ft=Re.classes;null!==ft&&ii(ce,xe,ft);const yt=Re.styles;null!==yt&&si(ce,xe,yt),64!=(64&Re.flags)&&ln(F,T,xe,Re),0===Mr.lFrame.elementDepthCount&&$l(xe,T),Mr.lFrame.elementDepthCount++,Ls(Re)&&(ks(F,T,Re),function(n,t,e){if(Zs(t)){const T=t.directiveEnd;for(let F=t.directiveStart;F<T;F++){const ee=n.data[F];ee.contentQueries&&ee.contentQueries(1,e[F],F)}}}(F,Re,T)),null!==a&&Qu(T,Re)}function qr(){let n=mi();bl()?Js():(n=n.parent,Fs(n,!1));const t=n;Mr.lFrame.elementDepthCount--;const e=Di();e.firstCreatePass&&(Dc(e,n),Zs(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(t)&&y_(e,t,Ar(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(t)&&y_(e,t,Ar(),t.stylesWithoutHost,!1)}function El(n,t,e,a){Gr(n,t,e,a),qr()}function pm(n){return!!n&&"function"==typeof n.then}const yv=function(n){return!!n&&"function"==typeof n.subscribe};function ca(n,t,e,a){const T=Ar(),F=Di(),ee=mi();return function(n,t,e,a,T,F,ee,ce){const xe=Ls(a),$e=n.firstCreatePass&&cv(n),ft=t[8],yt=uv(t);let Ot=!0;if(3&a.type||ce){const kn=yr(a,t),Kn=ce?ce(kn):kn,jn=yt.length,Fr=ce?ri=>ce(Vn(ri[a.index])):a.index;if(Gt(e)){let ri=null;if(!ce&&xe&&(ri=function(n,t,e,a){const T=n.cleanup;if(null!=T)for(let F=0;F<T.length-1;F+=2){const ee=T[F];if(ee===e&&T[F+1]===a){const ce=t[7],xe=T[F+2];return ce.length>xe?ce[xe]:null}"string"==typeof ee&&(F+=2)}return null}(n,t,T,a.index)),null!==ri)(ri.__ngLastListenerFn__||ri).__ngNextListenerFn__=F,ri.__ngLastListenerFn__=F,Ot=!1;else{F=__(a,t,ft,F,!1);const hi=e.listen(Kn,T,F);yt.push(F,hi),$e&&$e.push(T,Fr,jn,jn+1)}}else F=__(a,t,ft,F,!0),Kn.addEventListener(T,F,ee),yt.push(F),$e&&$e.push(T,Fr,jn,ee)}else F=__(a,t,ft,F,!1);const nn=a.outputs;let _n;if(Ot&&null!==nn&&(_n=nn[T])){const kn=_n.length;if(kn)for(let Kn=0;Kn<kn;Kn+=2){const ma=t[_n[Kn]][_n[Kn+1]].subscribe(F),lo=yt.length;yt.push(F,ma),$e&&$e.push(T,a.index,lo,-(lo+1))}}}(F,T,T[11],ee,n,t,!!e,a),ca}function P3(n,t,e,a){try{return!1!==e(a)}catch(T){return hv(n,T),!1}}function __(n,t,e,a,T){return function F(ee){if(ee===Function)return a;const ce=2&n.flags?Pr(n.index,t):t;0==(32&t[2])&&h0(ce);let xe=P3(t,0,a,ee),Re=F.__ngNextListenerFn__;for(;Re;)xe=P3(t,0,Re,ee)&&xe,Re=Re.__ngNextListenerFn__;return T&&!1===xe&&(ee.preventDefault(),ee.returnValue=!1),xe}}function Pi(n=1){return function(n){return(Mr.lFrame.contextLView=function(n,t){for(;n>0;)t=t[15],n--;return t}(n,Mr.lFrame.contextLView))[8]}(n)}function o4(n,t){let e=null;const a=function(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(n);for(let T=0;T<t.length;T++){const F=t[T];if("*"!==F){if(null===a?to(n,F,!0):zo(a,F))return T}else e=T}return e}function wd(n){const t=Ar()[16][6];if(!t.projection){const a=t.projection=Hf(n?n.length:1,null),T=a.slice();let F=t.child;for(;null!==F;){const ee=n?o4(F,n):0;null!==ee&&(T[ee]?T[ee].projectionNext=F:a[ee]=F,T[ee]=F),F=F.next}}}function Td(n,t=0,e){const a=Ar(),T=Di(),F=Kf(T,20+n,16,null,e||null);null===F.projection&&(F.projection=t),Js(),64!=(64&F.flags)&&function(n,t,e){cr(t[11],0,t,e,Gg(n,e,t),Ze(e.parent||t[6],e,t))}(T,a,F)}function V3(n,t,e,a,T){const F=n[e+1],ee=null===t;let ce=a?vs(F):Ko(F),xe=!1;for(;0!==ce&&(!1===xe||ee);){const $e=n[ce+1];u4(n[ce],t)&&(xe=!0,n[ce+1]=a?bs($e):Es($e)),ce=a?vs($e):Ko($e)}xe&&(n[e+1]=a?Es(F):bs(F))}function u4(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&hh(n,t)>=0}const Xl={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function U3(n){return n.substring(Xl.key,Xl.keyEnd)}function H3(n,t){const e=Xl.textEnd;return e===t?-1:(t=Xl.keyEnd=function(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}(n,Xl.key=t,e),D0(n,t,e))}function D0(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function Za(n,t){return function(n,t,e,a){const T=Ar(),F=Di(),ee=Fa(2);F.firstUpdatePass&&Z3(F,n,ee,a),t!==oa&&Gu(T,ee,t)&&J3(F,F.data[ba()],T,T[11],n,T[ee+1]=function(n,t){return null==n||("string"==typeof t?n+=t:"object"==typeof n&&(n=st(Vu(n)))),n}(t,e),a,ee)}(n,t,null,!0),Za}function Mf(n){!function(n,t,e,a){const T=Di(),F=Fa(2);T.firstUpdatePass&&Z3(T,null,F,a);const ee=Ar();if(e!==oa&&Gu(ee,F,e)){const ce=T.data[ba()];if(Q3(ce,a)&&!Y3(T,F)){let xe=a?ce.classesWithoutHost:ce.stylesWithoutHost;null!==xe&&(e=Bt(xe,e||"")),y_(T,ce,ee,e,a)}else!function(n,t,e,a,T,F,ee,ce){T===oa&&(T=Dn);let xe=0,Re=0,$e=0<T.length?T[0]:null,ft=0<F.length?F[0]:null;for(;null!==$e||null!==ft;){const yt=xe<T.length?T[xe+1]:void 0,Ot=Re<F.length?F[Re+1]:void 0;let _n,nn=null;$e===ft?(xe+=2,Re+=2,yt!==Ot&&(nn=ft,_n=Ot)):null===ft||null!==$e&&$e<ft?(xe+=2,nn=$e):(Re+=2,nn=ft,_n=Ot),null!==nn&&J3(n,t,e,a,nn,_n,ee,ce),$e=xe<T.length?T[xe]:null,ft=Re<F.length?F[Re]:null}}(T,ce,ee,ee[11],ee[F+1],ee[F+1]=function(n,t,e){if(null==e||""===e)return Dn;const a=[],T=Vu(e);if(Array.isArray(T))for(let F=0;F<T.length;F++)n(a,T[F],!0);else if("object"==typeof T)for(const F in T)T.hasOwnProperty(F)&&n(a,F,T[F]);else"string"==typeof T&&t(a,T);return a}(n,t,e),a,F)}}(ms,nh,n,!0)}function nh(n,t){for(let e=function(n){return function(n){Xl.key=0,Xl.keyEnd=0,Xl.value=0,Xl.valueEnd=0,Xl.textEnd=n.length}(n),H3(n,D0(n,0,Xl.textEnd))}(t);e>=0;e=H3(t,e))ms(n,U3(t),!0)}function Y3(n,t){return t>=n.expandoStartIndex}function Z3(n,t,e,a){const T=n.data;if(null===T[e+1]){const F=T[ba()],ee=Y3(n,e);Q3(F,a)&&null===t&&!ee&&(t=!1),t=function(n,t,e,a){const T=function(n){const t=Mr.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}(n);let F=a?t.residualClasses:t.residualStyles;if(null===T)0===(a?t.classBindings:t.styleBindings)&&(e=gm(e=w_(null,n,t,e,a),t.attrs,a),F=null);else{const ee=t.directiveStylingLast;if(-1===ee||n[ee]!==T)if(e=w_(T,n,t,e,a),null===F){let xe=function(n,t,e){const a=e?t.classBindings:t.styleBindings;if(0!==Ko(a))return n[vs(a)]}(n,t,a);void 0!==xe&&Array.isArray(xe)&&(xe=w_(null,n,t,xe[1],a),xe=gm(xe,t.attrs,a),function(n,t,e,a){n[vs(e?t.classBindings:t.styleBindings)]=a}(n,t,a,xe))}else F=function(n,t,e){let a;const T=t.directiveEnd;for(let F=1+t.directiveStylingLast;F<T;F++)a=gm(a,n[F].hostAttrs,e);return gm(a,t.attrs,e)}(n,t,a)}return void 0!==F&&(a?t.residualClasses=F:t.residualStyles=F),e}(T,F,t,a),function(n,t,e,a,T,F){let ee=F?t.classBindings:t.styleBindings,ce=vs(ee),xe=Ko(ee);n[a]=e;let $e,Re=!1;if(Array.isArray(e)){const ft=e;$e=ft[1],(null===$e||hh(ft,$e)>0)&&(Re=!0)}else $e=e;if(T)if(0!==xe){const yt=vs(n[ce+1]);n[a+1]=Al(yt,ce),0!==yt&&(n[yt+1]=ka(n[yt+1],a)),n[ce+1]=function(n,t){return 131071&n|t<<17}(n[ce+1],a)}else n[a+1]=Al(ce,0),0!==ce&&(n[ce+1]=ka(n[ce+1],a)),ce=a;else n[a+1]=Al(xe,0),0===ce?ce=a:n[xe+1]=ka(n[xe+1],a),xe=a;Re&&(n[a+1]=Es(n[a+1])),V3(n,$e,a,!0),V3(n,$e,a,!1),function(n,t,e,a,T){const F=T?n.residualClasses:n.residualStyles;null!=F&&"string"==typeof t&&hh(F,t)>=0&&(e[a+1]=bs(e[a+1]))}(t,$e,n,a,F),ee=Al(ce,xe),F?t.classBindings=ee:t.styleBindings=ee}(T,F,t,e,ee,a)}}function w_(n,t,e,a,T){let F=null;const ee=e.directiveEnd;let ce=e.directiveStylingLast;for(-1===ce?ce=e.directiveStart:ce++;ce<ee&&(F=t[ce],a=gm(a,F.hostAttrs,T),F!==n);)ce++;return null!==n&&(e.directiveStylingLast=ce),a}function gm(n,t,e){const a=e?1:2;let T=-1;if(null!==t)for(let F=0;F<t.length;F++){const ee=t[F];"number"==typeof ee?T=ee:T===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ms(n,ee,!!e||t[++F]))}return void 0===n?null:n}function J3(n,t,e,a,T,F,ee,ce){if(!(3&t.type))return;const xe=n.data,Re=xe[ce+1];bv(function(n){return 1==(1&n)}(Re)?K3(xe,t,e,T,Ko(Re),ee):void 0)||(bv(F)||function(n){return 2==(2&n)}(Re)&&(F=K3(xe,null,e,T,ce,ee)),function(n,t,e,a,T){const F=Gt(n);if(t)T?F?n.addClass(e,a):e.classList.add(a):F?n.removeClass(e,a):e.classList.remove(a);else{let ee=-1===a.indexOf("-")?void 0:cu.DashCase;if(null==T)F?n.removeStyle(e,a,ee):e.style.removeProperty(a);else{const ce="string"==typeof T&&T.endsWith("!important");ce&&(T=T.slice(0,-10),ee|=cu.Important),F?n.setStyle(e,a,T,ee):e.style.setProperty(a,T,ce?"important":"")}}}(a,ee,Tr(ba(),e),T,F))}function K3(n,t,e,a,T,F){const ee=null===t;let ce;for(;T>0;){const xe=n[T],Re=Array.isArray(xe),$e=Re?xe[1]:xe,ft=null===$e;let yt=e[T+1];yt===oa&&(yt=ft?Dn:void 0);let Ot=ft?yg(yt,a):$e===a?yt:void 0;if(Re&&!bv(Ot)&&(Ot=yg(xe,a)),bv(Ot)&&(ce=Ot,ee))return ce;const nn=n[T+1];T=ee?vs(nn):Ko(nn)}if(null!==t){let xe=F?t.residualClasses:t.residualStyles;null!=xe&&(ce=yg(xe,a))}return ce}function bv(n){return void 0!==n}function Q3(n,t){return 0!=(n.flags&(t?16:32))}function Qo(n,t=""){const e=Ar(),a=Di(),T=n+20,F=a.firstCreatePass?Kf(a,T,1,t,null):a.data[T],ee=e[T]=function(n,t){return Gt(n)?n.createText(t):n.createTextNode(t)}(e[11],t);ln(a,e,ee,F),Fs(F,!1)}function gc(n){return Ad("",n,""),gc}function Ad(n,t,e){const a=Ar(),T=function(n,t,e,a){return Gu(n,As(),e)?t+Ne(e)+a:oa}(a,n,t,e);return T!==oa&&pc(a,ba(),T),Ad}const mp=void 0;var U4=["en",[["a","p"],["AM","PM"],mp],[["AM","PM"],mp,mp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],mp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],mp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",mp,"{1} 'at' {0}",mp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const t=Math.floor(Math.abs(n)),e=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===e?1:5}];let C0={};function _T(n){return n in C0||(C0[n]=Sn.ng&&Sn.ng.common&&Sn.ng.common.locales&&Sn.ng.common.locales[n]),C0[n]}var Xi=(()=>((Xi=Xi||{})[Xi.LocaleId=0]="LocaleId",Xi[Xi.DayPeriodsFormat=1]="DayPeriodsFormat",Xi[Xi.DayPeriodsStandalone=2]="DayPeriodsStandalone",Xi[Xi.DaysFormat=3]="DaysFormat",Xi[Xi.DaysStandalone=4]="DaysStandalone",Xi[Xi.MonthsFormat=5]="MonthsFormat",Xi[Xi.MonthsStandalone=6]="MonthsStandalone",Xi[Xi.Eras=7]="Eras",Xi[Xi.FirstDayOfWeek=8]="FirstDayOfWeek",Xi[Xi.WeekendRange=9]="WeekendRange",Xi[Xi.DateFormat=10]="DateFormat",Xi[Xi.TimeFormat=11]="TimeFormat",Xi[Xi.DateTimeFormat=12]="DateTimeFormat",Xi[Xi.NumberSymbols=13]="NumberSymbols",Xi[Xi.NumberFormats=14]="NumberFormats",Xi[Xi.CurrencyCode=15]="CurrencyCode",Xi[Xi.CurrencySymbol=16]="CurrencySymbol",Xi[Xi.CurrencyName=17]="CurrencyName",Xi[Xi.Currencies=18]="Currencies",Xi[Xi.Directionality=19]="Directionality",Xi[Xi.PluralCase=20]="PluralCase",Xi[Xi.ExtraData=21]="ExtraData",Xi))();const _v="en-US";let xT=_v;function T_(n){tn(n,"Expected localeId to be defined"),"string"==typeof n&&(xT=n.toLowerCase().replace(/_/g,"-"))}function k_(n,t,e,a,T){if(n=We(n),Array.isArray(n))for(let F=0;F<n.length;F++)k_(n[F],t,e,a,T);else{const F=Di(),ee=Ar();let ce=g0(n)?n:We(n.provide),xe=Hw(n);const Re=mi(),$e=1048575&Re.providerIndexes,ft=Re.directiveStart,yt=Re.providerIndexes>>20;if(g0(n)||!n.multi){const Ot=new Ec(xe,T,Wn),nn=E_(ce,t,T?$e:$e+yt,ft);-1===nn?(wr(Gn(Re,ee),F,ce),D_(F,n,t.length),t.push(ce),Re.directiveStart++,Re.directiveEnd++,T&&(Re.providerIndexes+=1048576),e.push(Ot),ee.push(Ot)):(e[nn]=Ot,ee[nn]=Ot)}else{const Ot=E_(ce,t,$e+yt,ft),nn=E_(ce,t,$e,$e+yt),_n=Ot>=0&&e[Ot],kn=nn>=0&&e[nn];if(T&&!kn||!T&&!_n){wr(Gn(Re,ee),F,ce);const Kn=function(n,t,e,a,T){const F=new Ec(n,e,Wn);return F.multi=[],F.index=t,F.componentProviders=0,GT(F,T,a&&!e),F}(T?N6:F6,e.length,T,a,xe);!T&&kn&&(e[nn].providerFactory=Kn),D_(F,n,t.length,0),t.push(ce),Re.directiveStart++,Re.directiveEnd++,T&&(Re.providerIndexes+=1048576),e.push(Kn),ee.push(Kn)}else D_(F,n,Ot>-1?Ot:nn,GT(e[T?nn:Ot],xe,!T&&a));!T&&a&&kn&&e[nn].componentProviders++}}}function D_(n,t,e,a){const T=g0(t);if(T||function(n){return!!n.useClass}(t)){const ee=(t.useClass||t).prototype.ngOnDestroy;if(ee){const ce=n.destroyHooks||(n.destroyHooks=[]);if(!T&&t.multi){const xe=ce.indexOf(e);-1===xe?ce.push(e,[a,ee]):ce[xe+1].push(a,ee)}else ce.push(e,ee)}}}function GT(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function E_(n,t,e,a){for(let T=e;T<a;T++)if(t[T]===n)return T;return-1}function F6(n,t,e,a){return C_(this.multi,[])}function N6(n,t,e,a){const T=this.multi;let F;if(this.providerFactory){const ee=this.providerFactory.componentProviders,ce=$i(e,e[1],this.providerFactory.index,a);F=ce.slice(0,ee),C_(T,F);for(let xe=ee;xe<ce.length;xe++)F.push(ce[xe])}else F=[],C_(T,F);return F}function C_(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function Ho(n,t=[]){return e=>{e.providersResolver=(a,T)=>function(n,t,e){const a=Di();if(a.firstCreatePass){const T=Ts(n);k_(e,a.data,a.blueprint,T,!0),k_(t,a.data,a.blueprint,T,!1)}}(a,T?T(n):n,t)}}class qT{}const $T="ngComponent";class j6{resolveComponentFactory(t){throw function(n){const t=Error(`No component factory found for ${st(n)}. Did you add it to @NgModule.entryComponents?`);return t[$T]=n,t}(t)}}class yc{}function Mv(...n){}function P0(n,t){return new ro(yr(n,t))}yc.NULL=new j6;const H6=function(){return P0(mi(),Ar())};let ro=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=H6,n})();function YT(n){return n instanceof ro?n.nativeElement:n}class O0{}let wu=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>q6(),n})();const q6=function(){const n=Ar(),e=Pr(mi().index,n);return function(n){return n[11]}(Ds(e)?e:n)};let I_=(()=>{class n{}return n.\u0275prov=Mn({token:n,providedIn:"root",factory:()=>null}),n})();class xm{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ZT=new xm("12.2.3");class XT{constructor(){}supports(t){return hm(t)}create(t){return new Z6(t)}}const Y6=(n,t)=>t;class Z6{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Y6}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,a=this._removalsHead,T=0,F=null;for(;e||a;){const ee=!a||e&&e.currentIndex<KT(a,T,F)?e:a,ce=KT(ee,T,F),xe=ee.currentIndex;if(ee===a)T--,a=a._nextRemoved;else if(e=e._next,null==ee.previousIndex)T++;else{F||(F=[]);const Re=ce-T,$e=xe-T;if(Re!=$e){for(let yt=0;yt<Re;yt++){const Ot=yt<F.length?F[yt]:F[yt]=0,nn=Ot+yt;$e<=nn&&nn<Re&&(F[yt]=Ot+1)}F[ee.previousIndex]=$e-Re}}ce!==xe&&t(ee,ce,xe)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!hm(t))throw new Error(`Error trying to diff '${st(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let T,F,ee,e=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(let ce=0;ce<this.length;ce++)F=t[ce],ee=this._trackByFn(ce,F),null!==e&&Object.is(e.trackById,ee)?(a&&(e=this._verifyReinsertion(e,F,ee,ce)),Object.is(e.item,F)||this._addIdentityChange(e,F)):(e=this._mismatch(e,F,ee,ce),a=!0),e=e._next}else T=0,function(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[m0()]();let a;for(;!(a=e.next()).done;)t(a.value)}}(t,ce=>{ee=this._trackByFn(T,ce),null!==e&&Object.is(e.trackById,ee)?(a&&(e=this._verifyReinsertion(e,ce,ee,T)),Object.is(e.item,ce)||this._addIdentityChange(e,ce)):(e=this._mismatch(e,ce,ee,T),a=!0),e=e._next,T++}),this.length=T;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,a,T){let F;return null===t?F=this._itTail:(F=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,F,T)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(a,T))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,F,T)):t=this._addAfter(new X6(e,a),F,T),t}_verifyReinsertion(t,e,a,T){let F=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==F?t=this._reinsertAfter(F,t._prev,T):t.currentIndex!=T&&(t.currentIndex=T,this._addToMoves(t,T)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const T=t._prevRemoved,F=t._nextRemoved;return null===T?this._removalsHead=F:T._nextRemoved=F,null===F?this._removalsTail=T:F._prevRemoved=T,this._insertAfter(t,e,a),this._addToMoves(t,a),t}_moveAfter(t,e,a){return this._unlink(t),this._insertAfter(t,e,a),this._addToMoves(t,a),t}_addAfter(t,e,a){return this._insertAfter(t,e,a),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,a){const T=null===e?this._itHead:e._next;return t._next=T,t._prev=e,null===T?this._itTail=t:T._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new JT),this._linkedRecords.put(t),t.currentIndex=a,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,a=t._next;return null===e?this._itHead=a:e._next=a,null===a?this._itTail=e:a._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new JT),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class X6{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class J6{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===e||e<=a.currentIndex)&&Object.is(a.trackById,t))return a;return null}remove(t){const e=t._prevDup,a=t._nextDup;return null===e?this._head=a:e._nextDup=a,null===a?this._tail=e:a._prevDup=e,null===this._head}}class JT{constructor(){this.map=new Map}put(t){const e=t.trackById;let a=this.map.get(e);a||(a=new J6,this.map.set(e,a)),a.add(t)}get(t,e){const T=this.map.get(t);return T?T.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function KT(n,t,e){const a=n.previousIndex;if(null===a)return a;let T=0;return e&&a<e.length&&(T=e[a]),a+t+T}class QT{constructor(){}supports(t){return t instanceof Map||h_(t)}create(){return new K6}}class K6{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||h_(t)))throw new Error(`Error trying to diff '${st(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(a,T)=>{if(e&&e.key===T)this._maybeAddToChanges(e,a),this._appendAfter=e,e=e._next;else{const F=this._getOrCreateRecordForKey(T,a);e=this._insertBeforeOrAppend(e,F)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let a=e;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const a=t._prev;return e._next=t,e._prev=a,t._prev=e,a&&(a._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const T=this._records.get(t);this._maybeAddToChanges(T,e);const F=T._prev,ee=T._next;return F&&(F._next=ee),ee&&(ee._prev=F),T._next=null,T._prev=null,T}const a=new Q6(t);return this._records.set(t,a),a.currentValue=e,this._addToAdditions(a),a}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(a=>e(t[a],a))}}class Q6{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function eA(){return new L0([new XT])}let L0=(()=>{class n{constructor(e){this.factories=e}static create(e,a){if(null!=a){const T=a.factories.slice();e=e.concat(T)}return new n(e)}static extend(e){return{provide:n,useFactory:a=>n.create(e,a||eA()),deps:[[n,new Zc,new Nl]]}}find(e){const a=this.factories.find(T=>T.supports(e));if(null!=a)return a;throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(n){return n.name||typeof n}(e)}'`)}}return n.\u0275prov=Mn({token:n,providedIn:"root",factory:eA}),n})();function tA(){return new yp([new QT])}let yp=(()=>{class n{constructor(e){this.factories=e}static create(e,a){if(a){const T=a.factories.slice();e=e.concat(T)}return new n(e)}static extend(e){return{provide:n,useFactory:a=>n.create(e,a||tA()),deps:[[n,new Zc,new Nl]]}}find(e){const a=this.factories.find(T=>T.supports(e));if(a)return a;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return n.\u0275prov=Mn({token:n,providedIn:"root",factory:tA}),n})();function kv(n,t,e,a,T=!1){for(;null!==e;){const F=t[e.index];if(null!==F&&a.push(Vn(F)),Os(F))for(let ce=10;ce<F.length;ce++){const xe=F[ce],Re=xe[1].firstChild;null!==Re&&kv(xe[1],xe,Re,a)}const ee=e.type;if(8&ee)kv(n,t,e.child,a);else if(32&ee){const ce=ep(e,t);let xe;for(;xe=ce();)a.push(xe)}else if(16&ee){const ce=xn(t,e);if(Array.isArray(ce))a.push(...ce);else{const xe=Ms(t[16]);kv(xe[1],xe,ce,a,!0)}}e=T?e.projectionNext:e.next}return a}class wm{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return kv(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Os(t)){const e=t[8],a=e?e.indexOf(this):-1;a>-1&&(a0(t,a),fh(e,a))}this._attachedToViewContainer=!1}Ug(this._lView[1],this._lView)}onDestroy(t){op(this._lView[1],this._lView,null,t)}markForCheck(){h0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){_d(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,t,e){ja(!0);try{_d(n,t,e)}finally{ja(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(n,t){ar(n,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class t8 extends wm{constructor(t){super(t),this._view=t}detectChanges(){sv(this._view)}checkNoChanges(){!function(n){ja(!0);try{sv(n)}finally{ja(!1)}}(this._view)}get context(){return null}}const r8=function(n){return function(n,t,e){if(iu(n)&&!e){const a=Pr(n.index,t);return new wm(a,a)}return 47&n.type?new wm(t[16],t):null}(mi(),Ar(),16==(16&n))};let Tu=(()=>{class n{}return n.__NG_ELEMENT_ID__=r8,n})();const o8=[new QT],l8=new L0([new XT]),u8=new yp(o8),f8=function(){return Dv(mi(),Ar())};let js=(()=>{class n{}return n.__NG_ELEMENT_ID__=f8,n})();const h8=js,d8=class extends h8{constructor(t,e,a){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=a}createEmbeddedView(t){const e=this._declarationTContainer.tViews,a=wh(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const F=this._declarationLView[19];return null!==F&&(a[19]=F.createEmbeddedView(e)),Th(e,a,t),new wm(a)}};function Dv(n,t){return 4&n.type?new d8(t,n,P0(n,t)):null}class rh{}class nA{}const m8=function(){return aA(mi(),Ar())};let tc=(()=>{class n{}return n.__NG_ELEMENT_ID__=m8,n})();const v8=tc,rA=class extends v8{constructor(t,e,a){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=a}get element(){return P0(this._hostTNode,this._hostLView)}get injector(){return new ta(this._hostTNode,this._hostLView)}get parentInjector(){const t=Er(this._hostTNode,this._hostLView);if(Pt(t)){const e=Ft(t,this._hostLView),a=Nt(t);return new ta(e[1].data[a+8],e)}return new ta(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=iA(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,a){const T=t.createEmbeddedView(e||{});return this.insert(T,a),T}createComponent(t,e,a,T,F){const ee=a||this.parentInjector;if(!F&&null==t.ngModule&&ee){const xe=ee.get(rh,null);xe&&(F=xe)}const ce=t.create(ee,T,void 0,F);return this.insert(ce.hostView,e),ce}insert(t,e){const a=t._lView,T=a[1];if(function(n){return Os(n[3])}(a)){const $e=this.indexOf(t);if(-1!==$e)this.detach($e);else{const ft=a[3],yt=new rA(ft,ft[6],ft[3]);yt.detach(yt.indexOf(t))}}const F=this._adjustIndex(e),ee=this._lContainer;!function(n,t,e,a){const T=10+a,F=e.length;a>0&&(e[T-1][4]=t),a<F-10?(t[4]=e[T],Cc(e,10+a,t)):(e.push(t),t[4]=null),t[3]=e;const ee=t[17];null!==ee&&e!==ee&&function(n,t){const e=n[9];t[16]!==t[3][3][16]&&(n[2]=!0),null===e?n[9]=[t]:e.push(t)}(ee,t);const ce=t[19];null!==ce&&ce.insertView(n),t[2]|=128}(T,a,ee,F);const ce=On(F,ee),xe=a[11],Re=Me(xe,ee[7]);return null!==Re&&function(n,t,e,a,T,F){a[0]=T,a[6]=t,ar(n,a,e,1,T,F)}(T,ee[6],xe,a,Re,ce),t.attachToViewContainerRef(),Cc(P_(ee),F,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=iA(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),a=a0(this._lContainer,e);a&&(fh(P_(this._lContainer),e),Ug(a[1],a))}detach(t){const e=this._adjustIndex(t,-1),a=a0(this._lContainer,e);return a&&null!=fh(P_(this._lContainer),e)?new wm(a):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function iA(n){return n[8]}function P_(n){return n[8]||(n[8]=[])}function aA(n,t){let e;const a=t[n.index];if(Os(a))e=a;else{let T;if(8&n.type)T=Vn(a);else{const F=t[11];T=F.createComment("");const ee=yr(n,t);z(F,Me(F,ee),T,function(n,t){return Gt(n)?n.nextSibling(t):t.nextSibling}(F,ee),!1)}t[n.index]=e=f0(a,t,T,n),bd(t,e)}return new rA(e,n,t)}const z0={};class MA extends yc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ga(t);return new DA(e,this.ngModule)}}function kA(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}const pI=new Ta("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Jy});class DA extends qT{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function(n){return n.map(Bo).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return kA(this.componentDef.inputs)}get outputs(){return kA(this.componentDef.outputs)}create(t,e,a,T){const F=(T=T||this.ngModule)?function(n,t){return{get:(e,a,T)=>{const F=n.get(e,z0,T);return F!==z0||a===z0?F:t.get(e,a,T)}}}(t,T.injector):t,ee=F.get(O0,on),ce=F.get(I_,null),xe=ee.createRenderer(null,this.componentDef),Re=this.componentDef.selectors[0][0]||"div",$e=a?function(n,t,e){if(Gt(n))return n.selectRootElement(t,e===pi.ShadowDom);let a="string"==typeof t?n.querySelector(t):t;return a.textContent="",a}(xe,a,this.componentDef.encapsulation):zs(ee.createRenderer(null,this.componentDef),Re,function(n){const t=n.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(Re)),ft=this.componentDef.onPush?576:528,yt=function(n,t){return{components:[],scheduler:n||Jy,clean:r_,playerHandler:t||null,flags:0}}(),Ot=Nc(0,null,null,1,0,null,null,null,null,null),nn=wh(null,Ot,yt,ft,null,null,ee,xe,ce,F);let _n,kn;Xu(nn);try{const Kn=function(n,t,e,a,T,F){const ee=e[1];e[20]=n;const xe=Kf(ee,20,2,"#host",null),Re=xe.mergedAttrs=t.hostAttrs;null!==Re&&(dp(xe,Re,!0),null!==n&&(De(T,n,Re),null!==xe.classes&&ii(T,n,xe.classes),null!==xe.styles&&si(T,n,xe.styles)));const $e=a.createRenderer(n,t),ft=wh(e,tv(t),null,t.onPush?64:16,e[20],xe,a,$e,F||null,null);return ee.firstCreatePass&&(wr(Gn(xe,e),ee,t.type),Mh(ee,xe),im(xe,e.length,1)),bd(e,ft),e[20]=ft}($e,this.componentDef,nn,ee,xe);if($e)if(a)De(xe,$e,["ng-version",ZT.full]);else{const{attrs:jn,classes:Fr}=function(n){const t=[],e=[];let a=1,T=2;for(;a<n.length;){let F=n[a];if("string"==typeof F)2===T?""!==F&&t.push(F,n[++a]):8===T&&e.push(F);else{if(!Aa(T))break;T=F}a++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);jn&&De(xe,$e,jn),Fr&&Fr.length>0&&ii(xe,$e,Fr.join(" "))}if(kn=Br(Ot,20),void 0!==e){const jn=kn.projection=[];for(let Fr=0;Fr<this.ngContentSelectors.length;Fr++){const ri=e[Fr];jn.push(null!=ri?Array.from(ri):null)}}_n=function(n,t,e,a,T){const F=e[1],ee=function(n,t,e){const a=mi();n.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),am(n,a,t,dd(n,t,1,null),e));const T=$i(t,n,a.directiveStart,a);$l(T,t);const F=yr(a,t);return F&&$l(F,t),T}(F,e,t);if(a.components.push(ee),n[8]=ee,T&&T.forEach(xe=>xe(ee,t)),t.contentQueries){const xe=mi();t.contentQueries(1,ee,xe.directiveStart)}const ce=mi();return!F.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(xl(ce.index),nm(e[1],ce,0,ce.directiveStart,ce.directiveEnd,t),Qf(t,ee)),ee}(Kn,this.componentDef,nn,yt,[xS]),Th(Ot,nn,null)}finally{Tc()}return new yI(this.componentType,_n,P0(kn,nn),nn,kn)}}class yI extends class{}{constructor(t,e,a,T,F){super(),this.location=a,this._rootLView=T,this._tNode=F,this.instance=e,this.hostView=this.changeDetectorRef=new t8(T),this.componentType=t}get injector(){return new ta(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const B0=new Map;class _I extends rh{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new MA(this);const a=Xa(t),T=function(n){return n[Wr]||null}(t);T&&T_(T),this._bootstrapComponents=Kc(a.bootstrap),this._r3Injector=Uw(t,e,[{provide:rh,useValue:this},{provide:yc,useValue:this.componentFactoryResolver}],st(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=no.THROW_IF_NOT_FOUND,a=er.Default){return t===no||t===rh||t===xd?this:this._r3Injector.get(t,e,a)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class q_ extends nA{constructor(t){super(),this.moduleType=t,null!==Xa(t)&&function(n){const t=new Set;!function e(a){const T=Xa(a,!0),F=T.id;null!==F&&(function(n,t,e){if(t&&t!==e)throw new Error(`Duplicate module registered for ${n} - ${st(t)} vs ${st(t.name)}`)}(F,B0.get(F),a),B0.set(F,a));const ee=Kc(T.imports);for(const ce of ee)t.has(ce)||(t.add(ce),e(ce))}(n)}(t)}create(t){return new _I(this.moduleType,t)}}function SA(n,t,e){const a=function(){const n=Mr.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}()+n,T=Ar();return T[a]===oa?function(n,t,e){return n[t]=e}(T,a,e?t.call(e):t()):function(n,t){return n[t]}(T,a)}function W_(n){return t=>{setTimeout(n,void 0,t)}}const bi=class extends R{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,a){var T,F,ee;let ce=t,xe=e||(()=>null),Re=a;if(t&&"object"==typeof t){const ft=t;ce=null===(T=ft.next)||void 0===T?void 0:T.bind(ft),xe=null===(F=ft.error)||void 0===F?void 0:F.bind(ft),Re=null===(ee=ft.complete)||void 0===ee?void 0:ee.bind(ft)}this.__isAsync&&(xe=W_(xe),ce&&(ce=W_(ce)),Re&&(Re=W_(Re)));const $e=super.subscribe({next:ce,error:xe,complete:Re});return t instanceof f&&t.add($e),$e}};function OI(){return this._results[m0()]()}class Lv{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=m0(),a=Lv.prototype;a[e]||(a[e]=OI)}get changes(){return this._changes||(this._changes=new bi)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const a=this;a.dirty=!1;const T=Bu(t);(this._changesDetected=!function(n,t,e){if(n.length!==t.length)return!1;for(let a=0;a<n.length;a++){let T=n[a],F=t[a];if(e&&(T=e(T),F=e(F)),F!==T)return!1}return!0}(a._results,T,e))&&(a._results=T,a.length=T.length,a.last=T[this.length-1],a.first=T[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class $_{constructor(t){this.queryList=t,this.matches=null}clone(){return new $_(this.queryList)}setDirty(){this.queryList.setDirty()}}class Y_{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const a=null!==t.contentQueries?t.contentQueries[0]:e.length,T=[];for(let F=0;F<a;F++){const ee=e.getByIndex(F);T.push(this.queries[ee.indexInDeclarationView].clone())}return new Y_(T)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==UA(t,e).matches&&this.queries[e].setDirty()}}class zA{constructor(t,e,a=null){this.predicate=t,this.flags=e,this.read=a}}class Z_{constructor(t=[]){this.queries=t}elementStart(t,e){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let a=0;a<this.length;a++){const T=null!==e?e.length:0,F=this.getByIndex(a).embeddedTView(t,T);F&&(F.indexInDeclarationView=a,null!==e?e.push(F):e=[F])}return null!==e?new Z_(e):null}template(t,e){for(let a=0;a<this.queries.length;a++)this.queries[a].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class X_{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new X_(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let a=t.parent;for(;null!==a&&8&a.type&&a.index!==e;)a=a.parent;return e===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const a=this.metadata.predicate;if(Array.isArray(a))for(let T=0;T<a.length;T++){const F=a[T];this.matchTNodeWithReadOption(t,e,FI(e,F)),this.matchTNodeWithReadOption(t,e,Oi(e,t,F,!1,!1))}else a===js?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Oi(e,t,a,!1,!1))}matchTNodeWithReadOption(t,e,a){if(null!==a){const T=this.metadata.read;if(null!==T)if(T===ro||T===tc||T===js&&4&e.type)this.addMatch(e.index,-2);else{const F=Oi(e,t,T,!1,!1);null!==F&&this.addMatch(e.index,F)}else this.addMatch(e.index,a)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function FI(n,t){const e=n.localNames;if(null!==e)for(let a=0;a<e.length;a+=2)if(e[a]===t)return e[a+1];return null}function zI(n,t,e,a){return-1===e?function(n,t){return 11&n.type?P0(n,t):4&n.type?Dv(n,t):null}(t,n):-2===e?function(n,t,e){return e===ro?P0(t,n):e===js?Dv(t,n):e===tc?aA(t,n):void 0}(n,t,a):$i(n,n[1],e,t)}function BA(n,t,e,a){const T=t[19].queries[a];if(null===T.matches){const F=n.data,ee=e.matches,ce=[];for(let xe=0;xe<ee.length;xe+=2){const Re=ee[xe];ce.push(Re<0?null:zI(t,F[Re],ee[xe+1],e.metadata.read))}T.matches=ce}return T.matches}function J_(n,t,e,a){const T=n.queries.getByIndex(e),F=T.matches;if(null!==F){const ee=BA(n,t,T,e);for(let ce=0;ce<F.length;ce+=2){const xe=F[ce];if(xe>0)a.push(ee[ce/2]);else{const Re=F[ce+1],$e=t[-xe];for(let ft=10;ft<$e.length;ft++){const yt=$e[ft];yt[17]===yt[3]&&J_(yt[1],yt,Re,a)}if(null!==$e[9]){const ft=$e[9];for(let yt=0;yt<ft.length;yt++){const Ot=ft[yt];J_(Ot[1],Ot,Re,a)}}}}}return a}function as(n){const t=Ar(),e=Di(),a=ds();ql(a+1);const T=UA(e,a);if(n.dirty&&ai(t)===(2==(2&T.metadata.flags))){if(null===T.matches)n.reset([]);else{const F=T.crossesNgTemplate?J_(e,t,a,[]):BA(e,t,T,a);n.reset(F,YT),n.notifyOnChanges()}return!0}return!1}function kd(n,t,e){const a=Di();a.firstCreatePass&&(function(n,t,e){null===n.queries&&(n.queries=new Z_),n.queries.track(new X_(t,e))}(a,new zA(n,t,e),-1),2==(2&t)&&(a.staticViewQueries=!0)),function(n,t,e){const a=new Lv(4==(4&e));op(n,t,a,a.destroy),null===t[19]&&(t[19]=new Y_),t[19].queries.push(new $_(a))}(a,Ar(),t)}function os(){return function(n,t){return n[19].queries[t].queryList}(Ar(),ds())}function UA(n,t){return n.queries.getByIndex(t)}const Rm=new Ta("Application Initializer");let V0=(()=>{class n{constructor(e){this.appInits=e,this.resolve=Mv,this.reject=Mv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,T)=>{this.resolve=a,this.reject=T})}runInitializers(){if(this.initialized)return;const e=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let T=0;T<this.appInits.length;T++){const F=this.appInits[T]();if(pm(F))e.push(F);else if(yv(F)){const ee=new Promise((ce,xe)=>{F.subscribe({complete:ce,error:xe})});e.push(ee)}}Promise.all(e).then(()=>{a()}).catch(T=>{this.reject(T)}),0===e.length&&a(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(Hr(Rm,8))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();const Fm=new Ta("AppId"),pP={provide:Fm,useFactory:function(){return`${rx()}${rx()}${rx()}`},deps:[]};function rx(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const oM=new Ta("Platform Initializer"),Nm=new Ta("Platform ID"),sM=new Ta("appBootstrapListener");let Nv=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();const sf=new Ta("LocaleId"),lM=new Ta("DefaultCurrencyCode");class mP{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const ix=function(n){return new q_(n)},yP=ix,vP=function(n){return Promise.resolve(ix(n))},uM=function(n){const t=ix(n),a=Kc(Xa(n).declarations).reduce((T,F)=>{const ee=ga(F);return ee&&T.push(new DA(ee)),T},[]);return new mP(t,a)},bP=uM,_P=function(n){return Promise.resolve(uM(n))};let _p=(()=>{class n{constructor(){this.compileModuleSync=yP,this.compileModuleAsync=vP,this.compileModuleAndAllComponentsSync=bP,this.compileModuleAndAllComponentsAsync=_P}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();const TP=(()=>Promise.resolve(0))();function ax(n){"undefined"==typeof Zone?TP.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Ao{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bi(!1),this.onMicrotaskEmpty=new bi(!1),this.onStable=new bi(!1),this.onError=new bi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const T=this;T._nesting=0,T._outer=T._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(T._inner=T._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(T._inner=T._inner.fork(Zone.longStackTraceZoneSpec)),T.shouldCoalesceEventChangeDetection=!a&&e,T.shouldCoalesceRunChangeDetection=a,T.lastRequestAnimationFrameId=-1,T.nativeRequestAnimationFrame=function(){let n=Sn.requestAnimationFrame,t=Sn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const a=t[Zone.__symbol__("OriginalDelegate")];a&&(t=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(n){const t=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Sn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,sx(n),n.isCheckStableRunning=!0,ox(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),sx(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,a,T,F,ee,ce)=>{try{return cM(n),e.invokeTask(T,F,ee,ce)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===F.type||n.shouldCoalesceRunChangeDetection)&&t(),fM(n)}},onInvoke:(e,a,T,F,ee,ce,xe)=>{try{return cM(n),e.invoke(T,F,ee,ce,xe)}finally{n.shouldCoalesceRunChangeDetection&&t(),fM(n)}},onHasTask:(e,a,T,F)=>{e.hasTask(T,F),a===T&&("microTask"==F.change?(n._hasPendingMicrotasks=F.microTask,sx(n),ox(n)):"macroTask"==F.change&&(n.hasPendingMacrotasks=F.macroTask))},onHandleError:(e,a,T,F)=>(e.handleError(T,F),n.runOutsideAngular(()=>n.onError.emit(F)),!1)})}(T)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ao.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ao.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,a){return this._inner.run(t,e,a)}runTask(t,e,a,T){const F=this._inner,ee=F.scheduleEventTask("NgZoneEvent: "+T,t,MP,Mv,Mv);try{return F.runTask(ee,e,a)}finally{F.cancelTask(ee)}}runGuarded(t,e,a){return this._inner.runGuarded(t,e,a)}runOutsideAngular(t){return this._outer.run(t)}}const MP={};function ox(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function sx(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function cM(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function fM(n){n._nesting--,ox(n)}class EP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bi,this.onMicrotaskEmpty=new bi,this.onStable=new bi,this.onError=new bi}run(t,e,a){return t.apply(e,a)}runGuarded(t,e,a){return t.apply(e,a)}runOutsideAngular(t){return t()}runTask(t,e,a,T){return t.apply(e,a)}}let lx=(()=>{class n{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ao.assertNotInAngularZone(),ax(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ax(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(e)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,a,T){let F=-1;a&&a>0&&(F=setTimeout(()=>{this._callbacks=this._callbacks.filter(ee=>ee.timeoutId!==F),e(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:e,timeoutId:F,updateCb:T})}whenStable(e,a,T){if(T&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,a,T),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,a,T){return[]}}return n.\u0275fac=function(e){return new(e||n)(Hr(Ao))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})(),hM=(()=>{class n{constructor(){this._applications=new Map,ux.addToWindow(this)}registerApplication(e,a){this._applications.set(e,a)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,a=!0){return ux.findTestabilityInTree(this,e,a)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();class CP{addToWindow(t){}findTestabilityInTree(t,e,a){return null}}let ux=new CP,dM=!0,pM=!1;let Sf;const mM=new Ta("AllowMultipleToken");class cx{constructor(t,e){this.name=t,this.token=e}}function yM(n,t,e=[]){const a=`Platform: ${t}`,T=new Ta(a);return(F=[])=>{let ee=vM();if(!ee||ee.injector.get(mM,!1))if(n)n(e.concat(F).concat({provide:T,useValue:!0}));else{const ce=e.concat(F).concat({provide:T,useValue:!0},{provide:um,useValue:"platform"});!function(n){if(Sf&&!Sf.destroyed&&!Sf.injector.get(mM,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Sf=n.get(bM);const t=n.get(oM,null);t&&t.forEach(e=>e())}(no.create({providers:ce,name:a}))}return function(n){const t=vM();if(!t)throw new Error("No platform exists!");if(!t.injector.get(n,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(T)}}function vM(){return Sf&&!Sf.destroyed?Sf:null}let bM=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,a){const ce=function(n,t){let e;return e="noop"===n?new EP:("zone.js"===n?void 0:n)||new Ao({enableLongStackTrace:(pM=!0,dM),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),e}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),xe=[{provide:Ao,useValue:ce}];return ce.run(()=>{const Re=no.create({providers:xe,parent:this.injector,name:e.moduleType.name}),$e=e.create(Re),ft=$e.injector.get(yh,null);if(!ft)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return ce.runOutsideAngular(()=>{const yt=ce.onError.subscribe({next:Ot=>{ft.handleError(Ot)}});$e.onDestroy(()=>{fx(this._modules,$e),yt.unsubscribe()})}),function(n,t,e){try{const a=e();return pm(a)?a.catch(T=>{throw t.runOutsideAngular(()=>n.handleError(T)),T}):a}catch(a){throw t.runOutsideAngular(()=>n.handleError(a)),a}}(ft,ce,()=>{const yt=$e.injector.get(V0);return yt.runInitializers(),yt.donePromise.then(()=>(T_($e.injector.get(sf,_v)||_v),this._moduleDoBootstrap($e),$e))})})}bootstrapModule(e,a=[]){const T=_M({},a);return function(n,t,e){const a=new q_(e);return Promise.resolve(a)}(0,0,e).then(F=>this.bootstrapModuleFactory(F,T))}_moduleDoBootstrap(e){const a=e.injector.get(If);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(T=>a.bootstrap(T));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${st(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(a)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(Hr(no))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();function _M(n,t){return Array.isArray(t)?t.reduce(_M,n):Object.assign(Object.assign({},n),t)}let If=(()=>{class n{constructor(e,a,T,F,ee){this._zone=e,this._injector=a,this._exceptionHandler=T,this._componentFactoryResolver=F,this._initStatus=ee,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const ce=new C(Re=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Re.next(this._stable),Re.complete()})}),xe=new C(Re=>{let $e;this._zone.runOutsideAngular(()=>{$e=this._zone.onStable.subscribe(()=>{Ao.assertNotInAngularZone(),ax(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Re.next(!0))})})});const ft=this._zone.onUnstable.subscribe(()=>{Ao.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Re.next(!1)}))});return()=>{$e.unsubscribe(),ft.unsubscribe()}});this.isStable=function(...n){let t=Number.POSITIVE_INFINITY,e=null,a=n[n.length-1];return N(a)?(e=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(t=n.pop())):"number"==typeof a&&(t=n.pop()),null===e&&1===n.length&&n[0]instanceof C?n[0]:Se(t)(Oe(n,e))}(ce,xe.pipe(n=>He()(function(n,t){return function(a){let T;T="function"==typeof n?n:function(){return n};const F=Object.create(a,qe);return F.source=a,F.subjectFactory=T,F}}(xt)(n))))}bootstrap(e,a){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let T;T=e instanceof qT?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(T.componentType);const F=function(n){return n.isBoundToModule}(T)?void 0:this._injector.get(rh),ce=T.create(no.NULL,[],a||T.selector,F),xe=ce.location.nativeElement,Re=ce.injector.get(lx,null),$e=Re&&ce.injector.get(hM);return Re&&$e&&$e.registerApplication(xe,Re),ce.onDestroy(()=>{this.detachView(ce.hostView),fx(this.components,ce),$e&&$e.unregisterApplication(xe)}),this._loadComponent(ce),ce}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const a=e;this._views.push(a),a.attachToAppRef(this)}detachView(e){const a=e;fx(this._views,a),a.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(sM,[]).concat(this._bootstrapListeners).forEach(T=>T(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(e){return new(e||n)(Hr(Ao),Hr(no),Hr(yh),Hr(yc),Hr(V0))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();function fx(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}class Bv{}class GP{}const qP={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let WP=(()=>{class n{constructor(e,a){this._compiler=e,this._config=a||qP}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[a,T]=e.split("#");return void 0===T&&(T="default"),G(255)(a).then(F=>F[T]).then(F=>AM(F,a,T)).then(F=>this._compiler.compileModuleAsync(F))}loadFactory(e){let[a,T]=e.split("#"),F="NgFactory";return void 0===T&&(T="default",F=""),G(255)(this._config.factoryPathPrefix+a+this._config.factoryPathSuffix).then(ee=>ee[T+F]).then(ee=>AM(ee,a,T))}}return n.\u0275fac=function(e){return new(e||n)(Hr(_p),Hr(GP,8))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();function AM(n,t,e){if(!n)throw new Error(`Cannot find '${e}' in '${t}'`);return n}const n7=yM(null,"core",[{provide:Nm,useValue:"unknown"},{provide:bM,deps:[no]},{provide:hM,deps:[]},{provide:Nv,deps:[]}]),s7=[{provide:If,useClass:If,deps:[Ao,no,yh,yc,V0]},{provide:pI,deps:[Ao],useFactory:function(n){let t=[];return n.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:V0,useClass:V0,deps:[[new Nl,Rm]]},{provide:_p,useClass:_p,deps:[]},pP,{provide:L0,useFactory:function(){return l8},deps:[]},{provide:yp,useFactory:function(){return u8},deps:[]},{provide:sf,useFactory:function(n){return T_(n=n||"undefined"!=typeof $localize&&$localize.locale||_v),n},deps:[[new jh(sf),new Nl,new Zc]]},{provide:lM,useValue:"USD"}];let u7=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(Hr(If))},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({providers:s7}),n})(),Zv=null;function ih(){return Zv}const ss=new Ta("DocumentToken");let Tp=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Mn({factory:l9,token:n,providedIn:"platform"}),n})();function l9(){return Hr(YM)}const u9=new Ta("Location Initialized");let YM=(()=>{class n extends Tp{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ih().getBaseHref(this._doc)}onPopState(e){const a=ih().getGlobalEventTarget(this._doc,"window");return a.addEventListener("popstate",e,!1),()=>a.removeEventListener("popstate",e)}onHashChange(e){const a=ih().getGlobalEventTarget(this._doc,"window");return a.addEventListener("hashchange",e,!1),()=>a.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,a,T){ZM()?this._history.pushState(e,a,T):this.location.hash=T}replaceState(e,a,T){ZM()?this._history.replaceState(e,a,T):this.location.hash=T}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(Hr(ss))},n.\u0275prov=Mn({factory:c9,token:n,providedIn:"platform"}),n})();function ZM(){return!!window.history.pushState}function c9(){return new YM(Hr(ss))}function kx(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function XM(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Eh(n){return n&&"?"!==n[0]?"?"+n:n}let G0=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Mn({factory:f9,token:n,providedIn:"root"}),n})();function f9(n){const t=Hr(ss).location;return new JM(Hr(Tp),t&&t.origin||"")}const Dx=new Ta("appBaseHref");let JM=(()=>{class n extends G0{constructor(e,a){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==a&&(a=this._platformLocation.getBaseHrefFromDOM()),null==a)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=a}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return kx(this._baseHref,e)}path(e=!1){const a=this._platformLocation.pathname+Eh(this._platformLocation.search),T=this._platformLocation.hash;return T&&e?`${a}${T}`:a}pushState(e,a,T,F){const ee=this.prepareExternalUrl(T+Eh(F));this._platformLocation.pushState(e,a,ee)}replaceState(e,a,T,F){const ee=this.prepareExternalUrl(T+Eh(F));this._platformLocation.replaceState(e,a,ee)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var a,T;null===(T=(a=this._platformLocation).historyGo)||void 0===T||T.call(a,e)}}return n.\u0275fac=function(e){return new(e||n)(Hr(Tp),Hr(Dx,8))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})(),h9=(()=>{class n extends G0{constructor(e,a){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=a&&(this._baseHref=a)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let a=this._platformLocation.hash;return null==a&&(a="#"),a.length>0?a.substring(1):a}prepareExternalUrl(e){const a=kx(this._baseHref,e);return a.length>0?"#"+a:a}pushState(e,a,T,F){let ee=this.prepareExternalUrl(T+Eh(F));0==ee.length&&(ee=this._platformLocation.pathname),this._platformLocation.pushState(e,a,ee)}replaceState(e,a,T,F){let ee=this.prepareExternalUrl(T+Eh(F));0==ee.length&&(ee=this._platformLocation.pathname),this._platformLocation.replaceState(e,a,ee)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var a,T;null===(T=(a=this._platformLocation).historyGo)||void 0===T||T.call(a,e)}}return n.\u0275fac=function(e){return new(e||n)(Hr(Tp),Hr(Dx,8))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})(),Xv=(()=>{class n{constructor(e,a){this._subject=new bi,this._urlChangeListeners=[],this._platformStrategy=e;const T=this._platformStrategy.getBaseHref();this._platformLocation=a,this._baseHref=XM(KM(T)),this._platformStrategy.onPopState(F=>{this._subject.emit({url:this.path(!0),pop:!0,state:F.state,type:F.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,a=""){return this.path()==this.normalize(e+Eh(a))}normalize(e){return n.stripTrailingSlash(function(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,KM(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,a="",T=null){this._platformStrategy.pushState(T,"",e,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Eh(a)),T)}replaceState(e,a="",T=null){this._platformStrategy.replaceState(T,"",e,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Eh(a)),T)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var a,T;null===(T=(a=this._platformStrategy).historyGo)||void 0===T||T.call(a,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(a=>{this._notifyUrlChangeListeners(a.url,a.state)}))}_notifyUrlChangeListeners(e="",a){this._urlChangeListeners.forEach(T=>T(e,a))}subscribe(e,a,T){return this._subject.subscribe({next:e,error:a,complete:T})}}return n.\u0275fac=function(e){return new(e||n)(Hr(G0),Hr(Tp))},n.normalizeQueryParams=Eh,n.joinWithSlash=kx,n.stripTrailingSlash=XM,n.\u0275prov=Mn({factory:d9,token:n,providedIn:"root"}),n})();function d9(){return new Xv(Hr(G0),Hr(Tp))}function KM(n){return n.replace(/\/index.html$/,"")}var Bl=(()=>((Bl=Bl||{})[Bl.Zero=0]="Zero",Bl[Bl.One=1]="One",Bl[Bl.Two=2]="Two",Bl[Bl.Few=3]="Few",Bl[Bl.Many=4]="Many",Bl[Bl.Other=5]="Other",Bl))();const v9=function(n){return function(n){const t=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let e=_T(t);if(e)return e;const a=t.split("-")[0];if(e=_T(a),e)return e;if("en"===a)return U4;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[Xi.PluralCase]};class o1{}let W9=(()=>{class n extends o1{constructor(e){super(),this.locale=e}getPluralCategory(e,a){switch(v9(a||this.locale)(e)){case Bl.Zero:return"zero";case Bl.One:return"one";case Bl.Two:return"two";case Bl.Few:return"few";case Bl.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(Hr(sf))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();function c5(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const a=e.indexOf("="),[T,F]=-1==a?[e,""]:[e.slice(0,a),e.slice(a+1)];if(T.trim()===t)return decodeURIComponent(F)}return null}let f5=(()=>{class n{constructor(e,a,T,F){this._iterableDiffers=e,this._keyValueDiffers=a,this._ngEl=T,this._renderer=F,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(hm(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(a=>this._toggleClass(a.key,a.currentValue)),e.forEachChangedItem(a=>this._toggleClass(a.key,a.currentValue)),e.forEachRemovedItem(a=>{a.previousValue&&this._toggleClass(a.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(a=>{if("string"!=typeof a.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${st(a.item)}`);this._toggleClass(a.item,!0)}),e.forEachRemovedItem(a=>this._toggleClass(a.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(a=>this._toggleClass(a,!0)):Object.keys(e).forEach(a=>this._toggleClass(a,!!e[a])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(a=>this._toggleClass(a,!1)):Object.keys(e).forEach(a=>this._toggleClass(a,!1)))}_toggleClass(e,a){(e=e.trim())&&e.split(/\s+/g).forEach(T=>{a?this._renderer.addClass(this._ngEl.nativeElement,T):this._renderer.removeClass(this._ngEl.nativeElement,T)})}}return n.\u0275fac=function(e){return new(e||n)(Wn(L0),Wn(yp),Wn(ro),Wn(wu))},n.\u0275dir=vr({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})(),ic=(()=>{class n{constructor(e,a){this._viewContainer=e,this._context=new X9,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=a}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){d5("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){d5("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,a){return!0}}return n.\u0275fac=function(e){return new(e||n)(Wn(tc),Wn(js))},n.\u0275dir=vr({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class X9{constructor(){this.$implicit=null,this.ngIf=null}}function d5(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${st(t)}'.`)}let g5=(()=>{class n{constructor(e,a,T){this._ngEl=e,this._differs=a,this._renderer=T,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,a){const[T,F]=e.split(".");null!=(a=null!=a&&F?`${a}${F}`:a)?this._renderer.setStyle(this._ngEl.nativeElement,T,a):this._renderer.removeStyle(this._ngEl.nativeElement,T)}_applyChanges(e){e.forEachRemovedItem(a=>this._setStyle(a.key,null)),e.forEachAddedItem(a=>this._setStyle(a.key,a.currentValue)),e.forEachChangedItem(a=>this._setStyle(a.key,a.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(Wn(ro),Wn(yp),Wn(wu))},n.\u0275dir=vr({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),Mu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({providers:[{provide:o1,useClass:W9}]}),n})();let b5=(()=>{class n{}return n.\u0275prov=Mn({token:n,providedIn:"root",factory:()=>new TO(Hr(ss),window)}),n})();class TO{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const a=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let T=a.currentNode;for(;T;){const F=T.shadowRoot;if(F){const ee=F.getElementById(t)||F.querySelector(`[name="${t}"]`);if(ee)return ee}T=a.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),a=e.left+this.window.pageXOffset,T=e.top+this.window.pageYOffset,F=this.offset();this.window.scrollTo(a-F[0],T-F[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=_5(this.window.history)||_5(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function _5(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class x5{}class Vx extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(n){Zv||(Zv=n)}(new Vx)}onAndCancel(t,e,a){return t.addEventListener(e,a,!1),()=>{t.removeEventListener(e,a,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Gm=Gm||document.querySelector("base"),Gm?Gm.getAttribute("href"):null);return null==e?null:function(n){s1=s1||document.createElement("a"),s1.setAttribute("href",n);const t=s1.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Gm=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return c5(document.cookie,t)}}let s1,Gm=null;const w5=new Ta("TRANSITION_ID"),CO=[{provide:Rm,useFactory:function(n,t,e){return()=>{e.get(V0).donePromise.then(()=>{const a=ih(),T=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let F=0;F<T.length;F++)a.remove(T[F])})}},deps:[w5,ss,no],multi:!0}];class Ux{static init(){!function(n){ux=n}(new Ux)}addToWindow(t){Sn.getAngularTestability=(a,T=!0)=>{const F=t.findTestabilityInTree(a,T);if(null==F)throw new Error("Could not find testability for element.");return F},Sn.getAllAngularTestabilities=()=>t.getAllTestabilities(),Sn.getAllAngularRootElements=()=>t.getAllRootElements(),Sn.frameworkStabilizers||(Sn.frameworkStabilizers=[]),Sn.frameworkStabilizers.push(a=>{const T=Sn.getAllAngularTestabilities();let F=T.length,ee=!1;const ce=function(xe){ee=ee||xe,F--,0==F&&a(ee)};T.forEach(function(xe){xe.whenStable(ce)})})}findTestabilityInTree(t,e,a){if(null==e)return null;const T=t.getTestability(e);return null!=T?T:a?ih().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let SO=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();const qm=new Ta("EventManagerPlugins");let u1=(()=>{class n{constructor(e,a){this._zone=a,this._eventNameToPlugin=new Map,e.forEach(T=>T.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,a,T){return this._findPluginFor(a).addEventListener(e,a,T)}addGlobalEventListener(e,a,T){return this._findPluginFor(a).addGlobalEventListener(e,a,T)}getZone(){return this._zone}_findPluginFor(e){const a=this._eventNameToPlugin.get(e);if(a)return a;const T=this._plugins;for(let F=0;F<T.length;F++){const ee=T[F];if(ee.supports(e))return this._eventNameToPlugin.set(e,ee),ee}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(Hr(qm),Hr(Ao))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();class Hx{constructor(t){this._doc=t}addGlobalEventListener(t,e,a){const T=ih().getGlobalEventTarget(this._doc,t);if(!T)throw new Error(`Unsupported event target ${T} for event ${e}`);return this.addEventListener(T,e,a)}}let A5=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const a=new Set;e.forEach(T=>{this._stylesSet.has(T)||(this._stylesSet.add(T),a.add(T))}),this.onStylesAdded(a)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})(),Wm=(()=>{class n extends A5{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,a,T){e.forEach(F=>{const ee=this._doc.createElement("style");ee.textContent=F,T.push(a.appendChild(ee))})}addHost(e){const a=[];this._addStylesToHost(this._stylesSet,e,a),this._hostNodes.set(e,a)}removeHost(e){const a=this._hostNodes.get(e);a&&a.forEach(M5),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((a,T)=>{this._addStylesToHost(e,T,a)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(M5))}}return n.\u0275fac=function(e){return new(e||n)(Hr(ss))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();function M5(n){ih().remove(n)}const Gx={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},qx=/%COMP%/g;function c1(n,t,e){for(let a=0;a<t.length;a++){let T=t[a];Array.isArray(T)?c1(n,T,e):(T=T.replace(qx,n),e.push(T))}return e}function E5(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Wx=(()=>{class n{constructor(e,a,T){this.eventManager=e,this.sharedStylesHost=a,this.appId=T,this.rendererByCompId=new Map,this.defaultRenderer=new $x(e)}createRenderer(e,a){if(!e||!a)return this.defaultRenderer;switch(a.encapsulation){case pi.Emulated:{let T=this.rendererByCompId.get(a.id);return T||(T=new qO(this.eventManager,this.sharedStylesHost,a,this.appId),this.rendererByCompId.set(a.id,T)),T.applyToHost(e),T}case 1:case pi.ShadowDom:return new WO(this.eventManager,this.sharedStylesHost,e,a);default:if(!this.rendererByCompId.has(a.id)){const T=c1(a.id,a.styles,[]);this.sharedStylesHost.addStyles(T),this.rendererByCompId.set(a.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(Hr(u1),Hr(Wm),Hr(Fm))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();class $x{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Gx[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,a){t&&t.insertBefore(e,a)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let a="string"==typeof t?document.querySelector(t):t;if(!a)throw new Error(`The selector "${t}" did not match any elements`);return e||(a.textContent=""),a}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,a,T){if(T){e=T+":"+e;const F=Gx[T];F?t.setAttributeNS(F,e,a):t.setAttribute(e,a)}else t.setAttribute(e,a)}removeAttribute(t,e,a){if(a){const T=Gx[a];T?t.removeAttributeNS(T,e):t.removeAttribute(`${a}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,a,T){T&(cu.DashCase|cu.Important)?t.style.setProperty(e,a,T&cu.Important?"important":""):t.style[e]=a}removeStyle(t,e,a){a&cu.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,a){t[e]=a}setValue(t,e){t.nodeValue=e}listen(t,e,a){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,E5(a)):this.eventManager.addEventListener(t,e,E5(a))}}class qO extends $x{constructor(t,e,a,T){super(t),this.component=a;const F=c1(T+"-"+a.id,a.styles,[]);e.addStyles(F),this.contentAttr=function(n){return"_ngcontent-%COMP%".replace(qx,n)}(T+"-"+a.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(qx,n)}(T+"-"+a.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const a=super.createElement(t,e);return super.setAttribute(a,this.contentAttr,""),a}}class WO extends $x{constructor(t,e,a,T){super(t),this.sharedStylesHost=e,this.hostEl=a,this.shadowRoot=a.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const F=c1(T.id,T.styles,[]);for(let ee=0;ee<F.length;ee++){const ce=document.createElement("style");ce.textContent=F[ee],this.shadowRoot.appendChild(ce)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,a){return super.insertBefore(this.nodeOrShadowRoot(t),e,a)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let $O=(()=>{class n extends Hx{constructor(e){super(e)}supports(e){return!0}addEventListener(e,a,T){return e.addEventListener(a,T,!1),()=>this.removeEventListener(e,a,T)}removeEventListener(e,a,T){return e.removeEventListener(a,T)}}return n.\u0275fac=function(e){return new(e||n)(Hr(ss))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();const I5=["alt","control","meta","shift"],eL={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},P5={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},tL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let nL=(()=>{class n extends Hx{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,a,T){const F=n.parseEventName(a),ee=n.eventCallback(F.fullKey,T,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ih().onAndCancel(e,F.domEventName,ee))}static parseEventName(e){const a=e.toLowerCase().split("."),T=a.shift();if(0===a.length||"keydown"!==T&&"keyup"!==T)return null;const F=n._normalizeKey(a.pop());let ee="";if(I5.forEach(xe=>{const Re=a.indexOf(xe);Re>-1&&(a.splice(Re,1),ee+=xe+".")}),ee+=F,0!=a.length||0===F.length)return null;const ce={};return ce.domEventName=T,ce.fullKey=ee,ce}static getEventFullKey(e){let a="",T=function(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&P5.hasOwnProperty(t)&&(t=P5[t]))}return eL[t]||t}(e);return T=T.toLowerCase()," "===T?T="space":"."===T&&(T="dot"),I5.forEach(F=>{F!=T&&tL[F](e)&&(a+=F+".")}),a+=T,a}static eventCallback(e,a,T){return F=>{n.getEventFullKey(F)===e&&T.runGuarded(()=>a(F))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return n.\u0275fac=function(e){return new(e||n)(Hr(ss))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();const cL=yM(n7,"browser",[{provide:Nm,useValue:"browser"},{provide:oM,useValue:function(){Vx.makeCurrent(),Ux.init()},multi:!0},{provide:ss,useFactory:function(){return function(n){Rs=n}(document),document},deps:[]}]),fL=[[],{provide:um,useValue:"root"},{provide:yh,useFactory:function(){return new yh},deps:[]},{provide:qm,useClass:$O,multi:!0,deps:[ss,Ao,Nm]},{provide:qm,useClass:nL,multi:!0,deps:[ss]},[],{provide:Wx,useClass:Wx,deps:[u1,Wm,Fm]},{provide:O0,useExisting:Wx},{provide:A5,useExisting:Wm},{provide:Wm,useClass:Wm,deps:[ss]},{provide:lx,useClass:lx,deps:[Ao]},{provide:u1,useClass:u1,deps:[qm,Ao]},{provide:x5,useClass:SO,deps:[]},[]];let hL=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:Fm,useValue:e.appId},{provide:w5,useExisting:Fm},CO]}}}return n.\u0275fac=function(e){return new(e||n)(Hr(n,12))},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({providers:fL,imports:[Mu,u7]}),n})();function Ia(...n){let t=n[n.length-1];return N(t)?(n.pop(),ue(n,t)):Oe(n)}"undefined"!=typeof window&&window;class Kl extends R{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new A;return this._value}next(t){super.next(this._value=t)}}class Kx extends g{notifyNext(t,e,a,T,F){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class _L extends g{constructor(t,e,a){super(),this.parent=t,this.outerValue=e,this.outerIndex=a,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Qx(n,t,e,a,T=new _L(n,e,a)){if(!T.closed)return t instanceof C?t.subscribe(T):Z(t)(T)}const L5={};class xL{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new wL(t,this.resultSelector))}}class wL extends Kx{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(L5),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let a=0;a<e;a++)this.add(Qx(this,t[a],void 0,a))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,a){const T=this.values,ee=this.toRespond?T[a]===L5?--this.toRespond:this.toRespond:0;T[a]=e,0===ee&&(this.resultSelector?this._tryResultSelector(T):this.destination.next(T.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(a){return void this.destination.error(a)}this.destination.next(e)}}const f1=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();function h1(...n){return Se(1)(Ia(...n))}const Ap=new C(n=>n.complete());function d1(n){return n?function(n){return new C(t=>n.schedule(()=>t.complete()))}(n):Ap}function R5(n){return new C(t=>{let e;try{e=n()}catch(T){return void t.error(T)}return(e?pe(e):d1()).subscribe(t)})}function Nf(n,t){return"function"==typeof t?e=>e.pipe(Nf((a,T)=>pe(n(a,T)).pipe(B((F,ee)=>t(a,F,T,ee))))):e=>e.lift(new ML(n))}class ML{constructor(t){this.project=t}call(t,e){return e.subscribe(new kL(t,this.project))}}class kL extends ke{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const a=this.index++;try{e=this.project(t,a)}catch(T){return void this.destination.error(T)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const a=new Te(this),T=this.destination;T.add(a),this.innerSubscription=je(t,a),this.innerSubscription!==a&&T.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const F5=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function ac(n){return t=>0===n?d1():t.lift(new DL(n))}class DL{constructor(t){if(this.total=t,this.total<0)throw new F5}call(t,e){return e.subscribe(new EL(t,this.total))}}class EL extends g{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,a=++this.count;a<=e&&(this.destination.next(t),a===e&&(this.destination.complete(),this.unsubscribe()))}}function N5(n,t){let e=!1;return arguments.length>=2&&(e=!0),function(T){return T.lift(new CL(n,t,e))}}class CL{constructor(t,e,a=!1){this.accumulator=t,this.seed=e,this.hasSeed=a}call(t,e){return e.subscribe(new SL(t,this.accumulator,this.seed,this.hasSeed))}}class SL extends g{constructor(t,e,a,T){super(t),this.accumulator=e,this._seed=a,this.hasSeed=T,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let a;try{a=this.accumulator(this.seed,t,e)}catch(T){this.destination.error(T)}this.seed=a,this.destination.next(a)}}function Vl(n,t){return function(a){return a.lift(new IL(n,t))}}class IL{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new PL(t,this.predicate,this.thisArg))}}class PL extends g{constructor(t,e,a){super(t),this.predicate=e,this.thisArg=a,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(a){return void this.destination.error(a)}e&&this.destination.next(t)}}function Mp(n){return function(e){const a=new OL(n),T=e.lift(a);return a.caught=T}}class OL{constructor(t){this.selector=t}call(t,e){return e.subscribe(new LL(t,this.selector,this.caught))}}class LL extends ke{constructor(t,e,a){super(t),this.selector=e,this.caught=a}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(F){return void super.error(F)}this._unsubscribeAndRecycle();const a=new Te(this);this.add(a);const T=je(e,a);T!==a&&this.add(T)}}}function q0(n,t){return Ie(n,t,1)}function t2(n){return function(e){return 0===n?d1():e.lift(new RL(n))}}class RL{constructor(t){if(this.total=t,this.total<0)throw new F5}call(t,e){return e.subscribe(new FL(t,this.total))}}class FL extends g{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,a=this.total,T=this.count++;e.length<a?e.push(t):e[T%a]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const a=this.count>=this.total?this.total:this.count,T=this.ring;for(let F=0;F<a;F++){const ee=e++%a;t.next(T[ee])}}t.complete()}}function z5(n=BL){return t=>t.lift(new NL(n))}class NL{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new zL(t,this.errorFactory))}}class zL extends g{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function BL(){return new f1}function B5(n=null){return t=>t.lift(new jL(n))}class jL{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new VL(t,this.defaultValue))}}class VL extends g{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function W0(n,t){const e=arguments.length>=2;return a=>a.pipe(n?Vl((T,F)=>n(T,F,a)):x,ac(1),e?B5(t):z5(()=>new f1))}function Sh(){}function ku(n,t,e){return function(T){return T.lift(new HL(n,t,e))}}class HL{constructor(t,e,a){this.nextOrObserver=t,this.error=e,this.complete=a}call(t,e){return e.subscribe(new GL(t,this.nextOrObserver,this.error,this.complete))}}class GL extends g{constructor(t,e,a,T){super(t),this._tapNext=Sh,this._tapError=Sh,this._tapComplete=Sh,this._tapError=a||Sh,this._tapComplete=T||Sh,X(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||Sh,this._tapError=e.error||Sh,this._tapComplete=e.complete||Sh)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class WL{constructor(t){this.callback=t}call(t,e){return e.subscribe(new $L(t,this.callback))}}class $L extends g{constructor(t,e){super(t),this.add(new f(e))}}class Ih{constructor(t,e){this.id=t,this.url=e}}class n2 extends Ih{constructor(t,e,a="imperative",T=null){super(t,e),this.navigationTrigger=a,this.restoredState=T}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $m extends Ih{constructor(t,e,a){super(t,e),this.urlAfterRedirects=a}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class j5 extends Ih{constructor(t,e,a){super(t,e),this.reason=a}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class YL extends Ih{constructor(t,e,a){super(t,e),this.error=a}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ZL extends Ih{constructor(t,e,a,T){super(t,e),this.urlAfterRedirects=a,this.state=T}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XL extends Ih{constructor(t,e,a,T){super(t,e),this.urlAfterRedirects=a,this.state=T}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JL extends Ih{constructor(t,e,a,T,F){super(t,e),this.urlAfterRedirects=a,this.state=T,this.shouldActivate=F}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class KL extends Ih{constructor(t,e,a,T){super(t,e),this.urlAfterRedirects=a,this.state=T}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QL extends Ih{constructor(t,e,a,T){super(t,e),this.urlAfterRedirects=a,this.state=T}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class V5{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class U5{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class eR{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tR{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nR{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rR{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class H5{constructor(t,e,a){this.routerEvent=t,this.position=e,this.anchor=a}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const vo="primary";class iR{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function $0(n){return new iR(n)}const G5="ngNavigationCancelingError";function r2(n){const t=Error("NavigationCancelingError: "+n);return t[G5]=!0,t}function oR(n,t,e){const a=e.path.split("/");if(a.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||a.length<n.length))return null;const T={};for(let F=0;F<a.length;F++){const ee=a[F],ce=n[F];if(ee.startsWith(":"))T[ee.substring(1)]=ce;else if(ee!==ce.path)return null}return{consumed:n.slice(0,a.length),posParams:T}}function ah(n,t){const e=n?Object.keys(n):void 0,a=t?Object.keys(t):void 0;if(!e||!a||e.length!=a.length)return!1;let T;for(let F=0;F<e.length;F++)if(T=e[F],!q5(n[T],t[T]))return!1;return!0}function q5(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),a=[...t].sort();return e.every((T,F)=>a[F]===T)}return n===t}function W5(n){return Array.prototype.concat.apply([],n)}function $5(n){return n.length>0?n[n.length-1]:null}function Du(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function oh(n){return yv(n)?n:pm(n)?pe(Promise.resolve(n)):Ia(n)}const uR={exact:function X5(n,t,e){if(!Dp(n.segments,t.segments)||!g1(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const a in t.children)if(!n.children[a]||!X5(n.children[a],t.children[a],e))return!1;return!0},subset:J5},Y5={exact:function(n,t){return ah(n,t)},subset:function(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>q5(n[e],t[e]))},ignored:()=>!0};function Z5(n,t,e){return uR[e.paths](n.root,t.root,e.matrixParams)&&Y5[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function J5(n,t,e){return K5(n,t,t.segments,e)}function K5(n,t,e,a){if(n.segments.length>e.length){const T=n.segments.slice(0,e.length);return!(!Dp(T,e)||t.hasChildren()||!g1(T,e,a))}if(n.segments.length===e.length){if(!Dp(n.segments,e)||!g1(n.segments,e,a))return!1;for(const T in t.children)if(!n.children[T]||!J5(n.children[T],t.children[T],a))return!1;return!0}{const T=e.slice(0,n.segments.length),F=e.slice(n.segments.length);return!!(Dp(n.segments,T)&&g1(n.segments,T,a)&&n.children[vo])&&K5(n.children[vo],t,F,a)}}function g1(n,t,e){return t.every((a,T)=>Y5[e](n[T].parameters,a.parameters))}class kp{constructor(t,e,a){this.root=t,this.queryParams=e,this.fragment=a}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$0(this.queryParams)),this._queryParamMap}toString(){return pR.serialize(this)}}class Po{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Du(e,(a,T)=>a.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return m1(this)}}class Ym{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=$0(this.parameters)),this._parameterMap}toString(){return nk(this)}}function Dp(n,t){return n.length===t.length&&n.every((e,a)=>e.path===t[a].path)}class i2{}class Q5{parse(t){const e=new TR(t);return new kp(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${`/${Zm(t.root,!0)}`}${function(n){const t=Object.keys(n).map(e=>{const a=n[e];return Array.isArray(a)?a.map(T=>`${y1(e)}=${y1(T)}`).join("&"):`${y1(e)}=${y1(a)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${function(n){return encodeURI(n)}(t.fragment)}`:""}`}}const pR=new Q5;function m1(n){return n.segments.map(t=>nk(t)).join("/")}function Zm(n,t){if(!n.hasChildren())return m1(n);if(t){const e=n.children[vo]?Zm(n.children[vo],!1):"",a=[];return Du(n.children,(T,F)=>{F!==vo&&a.push(`${F}:${Zm(T,!1)}`)}),a.length>0?`${e}(${a.join("//")})`:e}{const e=function(n,t){let e=[];return Du(n.children,(a,T)=>{T===vo&&(e=e.concat(t(a,T)))}),Du(n.children,(a,T)=>{T!==vo&&(e=e.concat(t(a,T)))}),e}(n,(a,T)=>T===vo?[Zm(n.children[vo],!1)]:[`${T}:${Zm(a,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[vo]?`${m1(n)}/${e[0]}`:`${m1(n)}/(${e.join("//")})`}}function ek(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function y1(n){return ek(n).replace(/%3B/gi,";")}function a2(n){return ek(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function v1(n){return decodeURIComponent(n)}function tk(n){return v1(n.replace(/\+/g,"%20"))}function nk(n){return`${a2(n.path)}${function(n){return Object.keys(n).map(t=>`;${a2(t)}=${a2(n[t])}`).join("")}(n.parameters)}`}const vR=/^[^\/()?;=#]+/;function b1(n){const t=n.match(vR);return t?t[0]:""}const bR=/^[^=?&#]+/,xR=/^[^?&#]+/;class TR{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Po([],{}):new Po([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let a={};return this.peekStartsWith("(")&&(a=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(a[vo]=new Po(t,e)),a}parseSegment(){const t=b1(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Ym(v1(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=b1(this.remaining);if(!e)return;this.capture(e);let a="";if(this.consumeOptional("=")){const T=b1(this.remaining);T&&(a=T,this.capture(a))}t[v1(e)]=v1(a)}parseQueryParam(t){const e=function(n){const t=n.match(bR);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let a="";if(this.consumeOptional("=")){const ee=function(n){const t=n.match(xR);return t?t[0]:""}(this.remaining);ee&&(a=ee,this.capture(a))}const T=tk(e),F=tk(a);if(t.hasOwnProperty(T)){let ee=t[T];Array.isArray(ee)||(ee=[ee],t[T]=ee),ee.push(F)}else t[T]=F}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const a=b1(this.remaining),T=this.remaining[a.length];if("/"!==T&&")"!==T&&";"!==T)throw new Error(`Cannot parse url '${this.url}'`);let F;a.indexOf(":")>-1?(F=a.substr(0,a.indexOf(":")),this.capture(F),this.capture(":")):t&&(F=vo);const ee=this.parseChildren();e[F]=1===Object.keys(ee).length?ee[vo]:new Po([],ee),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class rk{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=o2(t,this._root);return e?e.children.map(a=>a.value):[]}firstChild(t){const e=o2(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=s2(t,this._root);return e.length<2?[]:e[e.length-2].children.map(T=>T.value).filter(T=>T!==t)}pathFromRoot(t){return s2(t,this._root).map(e=>e.value)}}function o2(n,t){if(n===t.value)return t;for(const e of t.children){const a=o2(n,e);if(a)return a}return null}function s2(n,t){if(n===t.value)return[t];for(const e of t.children){const a=s2(n,e);if(a.length)return a.unshift(t),a}return[]}class Ph{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Xm(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class ik extends rk{constructor(t,e){super(t),this.snapshot=e,l2(this,t)}toString(){return this.snapshot.toString()}}function ak(n,t){const e=function(n,t){const ee=new _1([],{},{},"",{},vo,t,null,n.root,-1,{});return new sk("",new Ph(ee,[]))}(n,t),a=new Kl([new Ym("",{})]),T=new Kl({}),F=new Kl({}),ee=new Kl({}),ce=new Kl(""),xe=new Y0(a,T,ee,ce,F,vo,t,e.root);return xe.snapshot=e.root,new ik(new Ph(xe,[]),e)}class Y0{constructor(t,e,a,T,F,ee,ce,xe){this.url=t,this.params=e,this.queryParams=a,this.fragment=T,this.data=F,this.outlet=ee,this.component=ce,this._futureSnapshot=xe}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(B(t=>$0(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(B(t=>$0(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ok(n,t="emptyOnly"){const e=n.pathFromRoot;let a=0;if("always"!==t)for(a=e.length-1;a>=1;){const T=e[a],F=e[a-1];if(T.routeConfig&&""===T.routeConfig.path)a--;else{if(F.component)break;a--}}return function(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(a))}class _1{constructor(t,e,a,T,F,ee,ce,xe,Re,$e,ft){this.url=t,this.params=e,this.queryParams=a,this.fragment=T,this.data=F,this.outlet=ee,this.component=ce,this.routeConfig=xe,this._urlSegment=Re,this._lastPathIndex=$e,this._resolve=ft}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(a=>a.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class sk extends rk{constructor(t,e){super(e),this.url=t,l2(this,e)}toString(){return lk(this._root)}}function l2(n,t){t.value._routerState=n,t.children.forEach(e=>l2(n,e))}function lk(n){const t=n.children.length>0?` { ${n.children.map(lk).join(", ")} } `:"";return`${n.value}${t}`}function u2(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,ah(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),ah(t.params,e.params)||n.params.next(e.params),function(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!ah(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),ah(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function c2(n,t){return ah(n.params,t.params)&&function(n,t){return Dp(n,t)&&n.every((e,a)=>ah(e.parameters,t[a].parameters))}(n.url,t.url)&&!(!n.parent!=!t.parent)&&(!n.parent||c2(n.parent,t.parent))}function x1(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const a=e.value;a._futureSnapshot=t.value;const T=function(n,t,e){return t.children.map(a=>{for(const T of e.children)if(n.shouldReuseRoute(a.value,T.value.snapshot))return x1(n,a,T);return x1(n,a)})}(n,t,e);return new Ph(a,T)}{if(n.shouldAttach(t.value)){const F=n.retrieve(t.value);if(null!==F){const ee=F.route;return uk(t,ee),ee}}const a=function(n){return new Y0(new Kl(n.url),new Kl(n.params),new Kl(n.queryParams),new Kl(n.fragment),new Kl(n.data),n.outlet,n.component,n)}(t.value),T=t.children.map(F=>x1(n,F));return new Ph(a,T)}}function uk(n,t){if(n.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=n.value;for(let e=0;e<n.children.length;++e)uk(n.children[e],t.children[e])}function w1(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Jm(n){return"object"==typeof n&&null!=n&&n.outlets}function f2(n,t,e,a,T){let F={};return a&&Du(a,(ee,ce)=>{F[ce]=Array.isArray(ee)?ee.map(xe=>`${xe}`):`${ee}`}),new kp(e.root===n?t:ck(e.root,n,t),F,T)}function ck(n,t,e){const a={};return Du(n.children,(T,F)=>{a[F]=T===t?e:ck(T,t,e)}),new Po(n.segments,a)}class fk{constructor(t,e,a){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=a,t&&a.length>0&&w1(a[0]))throw new Error("Root segment cannot have matrix parameters");const T=a.find(Jm);if(T&&T!==$5(a))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class h2{constructor(t,e,a){this.segmentGroup=t,this.processChildren=e,this.index=a}}function hk(n,t,e){if(n||(n=new Po([],{})),0===n.segments.length&&n.hasChildren())return T1(n,t,e);const a=function(n,t,e){let a=0,T=t;const F={match:!1,pathIndex:0,commandIndex:0};for(;T<n.segments.length;){if(a>=e.length)return F;const ee=n.segments[T],ce=e[a];if(Jm(ce))break;const xe=`${ce}`,Re=a<e.length-1?e[a+1]:null;if(T>0&&void 0===xe)break;if(xe&&Re&&"object"==typeof Re&&void 0===Re.outlets){if(!pk(xe,Re,ee))return F;a+=2}else{if(!pk(xe,{},ee))return F;a++}T++}return{match:!0,pathIndex:T,commandIndex:a}}(n,t,e),T=e.slice(a.commandIndex);if(a.match&&a.pathIndex<n.segments.length){const F=new Po(n.segments.slice(0,a.pathIndex),{});return F.children[vo]=new Po(n.segments.slice(a.pathIndex),n.children),T1(F,0,T)}return a.match&&0===T.length?new Po(n.segments,{}):a.match&&!n.hasChildren()?d2(n,t,e):a.match?T1(n,0,T):d2(n,t,e)}function T1(n,t,e){if(0===e.length)return new Po(n.segments,{});{const a=function(n){return Jm(n[0])?n[0].outlets:{[vo]:n}}(e),T={};return Du(a,(F,ee)=>{"string"==typeof F&&(F=[F]),null!==F&&(T[ee]=hk(n.children[ee],t,F))}),Du(n.children,(F,ee)=>{void 0===a[ee]&&(T[ee]=F)}),new Po(n.segments,T)}}function d2(n,t,e){const a=n.segments.slice(0,t);let T=0;for(;T<e.length;){const F=e[T];if(Jm(F)){const xe=RR(F.outlets);return new Po(a,xe)}if(0===T&&w1(e[0])){a.push(new Ym(n.segments[t].path,dk(e[0]))),T++;continue}const ee=Jm(F)?F.outlets[vo]:`${F}`,ce=T<e.length-1?e[T+1]:null;ee&&ce&&w1(ce)?(a.push(new Ym(ee,dk(ce))),T+=2):(a.push(new Ym(ee,{})),T++)}return new Po(a,{})}function RR(n){const t={};return Du(n,(e,a)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[a]=d2(new Po([],{}),0,e))}),t}function dk(n){const t={};return Du(n,(e,a)=>t[a]=`${e}`),t}function pk(n,t,e){return n==e.path&&ah(t,e.parameters)}class NR{constructor(t,e,a,T){this.routeReuseStrategy=t,this.futureState=e,this.currState=a,this.forwardEvent=T}activate(t){const e=this.futureState._root,a=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,a,t),u2(this.futureState.root),this.activateChildRoutes(e,a,t)}deactivateChildRoutes(t,e,a){const T=Xm(e);t.children.forEach(F=>{const ee=F.value.outlet;this.deactivateRoutes(F,T[ee],a),delete T[ee]}),Du(T,(F,ee)=>{this.deactivateRouteAndItsChildren(F,a)})}deactivateRoutes(t,e,a){const T=t.value,F=e?e.value:null;if(T===F)if(T.component){const ee=a.getContext(T.outlet);ee&&this.deactivateChildRoutes(t,e,ee.children)}else this.deactivateChildRoutes(t,e,a);else F&&this.deactivateRouteAndItsChildren(e,a)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const a=e.getContext(t.value.outlet);if(a&&a.outlet){const T=a.outlet.detach(),F=a.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:T,route:t,contexts:F})}}deactivateRouteAndOutlet(t,e){const a=e.getContext(t.value.outlet),T=a&&t.value.component?a.children:e,F=Xm(t);for(const ee of Object.keys(F))this.deactivateRouteAndItsChildren(F[ee],T);a&&a.outlet&&(a.outlet.deactivate(),a.children.onOutletDeactivated(),a.attachRef=null,a.resolver=null,a.route=null)}activateChildRoutes(t,e,a){const T=Xm(e);t.children.forEach(F=>{this.activateRoutes(F,T[F.value.outlet],a),this.forwardEvent(new rR(F.value.snapshot))}),t.children.length&&this.forwardEvent(new tR(t.value.snapshot))}activateRoutes(t,e,a){const T=t.value,F=e?e.value:null;if(u2(T),T===F)if(T.component){const ee=a.getOrCreateContext(T.outlet);this.activateChildRoutes(t,e,ee.children)}else this.activateChildRoutes(t,e,a);else if(T.component){const ee=a.getOrCreateContext(T.outlet);if(this.routeReuseStrategy.shouldAttach(T.snapshot)){const ce=this.routeReuseStrategy.retrieve(T.snapshot);this.routeReuseStrategy.store(T.snapshot,null),ee.children.onOutletReAttached(ce.contexts),ee.attachRef=ce.componentRef,ee.route=ce.route.value,ee.outlet&&ee.outlet.attach(ce.componentRef,ce.route.value),gk(ce.route)}else{const ce=function(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(T.snapshot),xe=ce?ce.module.componentFactoryResolver:null;ee.attachRef=null,ee.route=T,ee.resolver=xe,ee.outlet&&ee.outlet.activateWith(T,xe),this.activateChildRoutes(t,null,ee.children)}}else this.activateChildRoutes(t,null,a)}}function gk(n){u2(n.value),n.children.forEach(gk)}class p2{constructor(t,e){this.routes=t,this.module=e}}function Cd(n){return"function"==typeof n}function Ep(n){return n instanceof kp}const Km=Symbol("INITIAL_VALUE");function Qm(){return Nf(n=>function(...n){let t,e;return N(n[n.length-1])&&(e=n.pop()),"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&r(n[0])&&(n=n[0]),Oe(n,e).lift(new xL(t))}(n.map(t=>t.pipe(ac(1),function(...n){const t=n[n.length-1];return N(t)?(n.pop(),e=>h1(n,e,t)):e=>h1(n,e)}(Km)))).pipe(N5((t,e)=>{let a=!1;return e.reduce((T,F,ee)=>T!==Km?T:(F===Km&&(a=!0),a||!1!==F&&ee!==e.length-1&&!Ep(F)?T:F),t)},Km),Vl(t=>t!==Km),B(t=>Ep(t)?t:!0===t),ac(1)))}let mk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=$r({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,a){1&e&&El(0,"router-outlet")},directives:function(){return[Ok]},encapsulation:2}),n})();function yk(n,t=""){for(let e=0;e<n.length;e++){const a=n[e];GR(a,qR(t,a))}}function GR(n,t){n.children&&yk(n.children,t)}function qR(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function g2(n){const t=n.children&&n.children.map(g2),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==vo&&(e.component=mk),e}function ff(n){return n.outlet||vo}function vk(n,t){const e=n.filter(a=>ff(a)===t);return e.push(...n.filter(a=>ff(a)!==t)),e}const bk={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function A1(n,t,e){var a;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},bk):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const F=(t.matcher||oR)(e,n,t);if(!F)return Object.assign({},bk);const ee={};Du(F.posParams,(xe,Re)=>{ee[Re]=xe.path});const ce=F.consumed.length>0?Object.assign(Object.assign({},ee),F.consumed[F.consumed.length-1].parameters):ee;return{matched:!0,consumedSegments:F.consumed,lastChild:F.consumed.length,parameters:ce,positionalParamSegments:null!==(a=F.posParams)&&void 0!==a?a:{}}}function M1(n,t,e,a,T="corrected"){if(e.length>0&&function(n,t,e){return e.some(a=>k1(n,t,a)&&ff(a)!==vo)}(n,e,a)){const ee=new Po(t,function(n,t,e,a){const T={};T[vo]=a,a._sourceSegment=n,a._segmentIndexShift=t.length;for(const F of e)if(""===F.path&&ff(F)!==vo){const ee=new Po([],{});ee._sourceSegment=n,ee._segmentIndexShift=t.length,T[ff(F)]=ee}return T}(n,t,a,new Po(e,n.children)));return ee._sourceSegment=n,ee._segmentIndexShift=t.length,{segmentGroup:ee,slicedSegments:[]}}if(0===e.length&&function(n,t,e){return e.some(a=>k1(n,t,a))}(n,e,a)){const ee=new Po(n.segments,function(n,t,e,a,T,F){const ee={};for(const ce of a)if(k1(n,e,ce)&&!T[ff(ce)]){const xe=new Po([],{});xe._sourceSegment=n,xe._segmentIndexShift="legacy"===F?n.segments.length:t.length,ee[ff(ce)]=xe}return Object.assign(Object.assign({},T),ee)}(n,t,e,a,n.children,T));return ee._sourceSegment=n,ee._segmentIndexShift=t.length,{segmentGroup:ee,slicedSegments:e}}const F=new Po(n.segments,n.children);return F._sourceSegment=n,F._segmentIndexShift=t.length,{segmentGroup:F,slicedSegments:e}}function k1(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function _k(n,t,e,a){return!!(ff(n)===a||a!==vo&&k1(t,e,n))&&("**"===n.path||A1(t,n,e).matched)}function xk(n,t,e){return 0===t.length&&!n.children[e]}class ey{constructor(t){this.segmentGroup=t||null}}class wk{constructor(t){this.urlTree=t}}function D1(n){return new C(t=>t.error(new ey(n)))}function Tk(n){return new C(t=>t.error(new wk(n)))}function XR(n){return new C(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class QR{constructor(t,e,a,T,F){this.configLoader=e,this.urlSerializer=a,this.urlTree=T,this.config=F,this.allowRedirects=!0,this.ngModule=t.get(rh)}apply(){const t=M1(this.urlTree.root,[],[],this.config).segmentGroup,e=new Po(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,vo).pipe(B(F=>this.createUrlTree(m2(F),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Mp(F=>{if(F instanceof wk)return this.allowRedirects=!1,this.match(F.urlTree);throw F instanceof ey?this.noMatchError(F):F}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,vo).pipe(B(T=>this.createUrlTree(m2(T),t.queryParams,t.fragment))).pipe(Mp(T=>{throw T instanceof ey?this.noMatchError(T):T}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,a){const T=t.segments.length>0?new Po([],{[vo]:t}):t;return new kp(T,e,a)}expandSegmentGroup(t,e,a,T){return 0===a.segments.length&&a.hasChildren()?this.expandChildren(t,e,a).pipe(B(F=>new Po([],F))):this.expandSegment(t,a,e,a.segments,T,!0)}expandChildren(t,e,a){const T=[];for(const F of Object.keys(a.children))"primary"===F?T.unshift(F):T.push(F);return pe(T).pipe(q0(F=>{const ee=a.children[F],ce=vk(e,F);return this.expandSegmentGroup(t,ce,ee,F).pipe(B(xe=>({segment:xe,outlet:F})))}),N5((F,ee)=>(F[ee.outlet]=ee.segment,F),{}),function(n,t){const e=arguments.length>=2;return a=>a.pipe(n?Vl((T,F)=>n(T,F,a)):x,t2(1),e?B5(t):z5(()=>new f1))}())}expandSegment(t,e,a,T,F,ee){return pe(a).pipe(q0(ce=>this.expandSegmentAgainstRoute(t,e,a,ce,T,F,ee).pipe(Mp(Re=>{if(Re instanceof ey)return Ia(null);throw Re}))),W0(ce=>!!ce),Mp((ce,xe)=>{if(ce instanceof f1||"EmptyError"===ce.name){if(xk(e,T,F))return Ia(new Po([],{}));throw new ey(e)}throw ce}))}expandSegmentAgainstRoute(t,e,a,T,F,ee,ce){return _k(T,e,F,ee)?void 0===T.redirectTo?this.matchSegmentAgainstRoute(t,e,T,F,ee):ce&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,a,T,F,ee):D1(e):D1(e)}expandSegmentAgainstRouteUsingRedirect(t,e,a,T,F,ee){return"**"===T.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,a,T,ee):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,a,T,F,ee)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,a,T){const F=this.applyRedirectCommands([],a.redirectTo,{});return a.redirectTo.startsWith("/")?Tk(F):this.lineralizeSegments(a,F).pipe(Ie(ee=>{const ce=new Po(ee,{});return this.expandSegment(t,ce,e,ee,T,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,a,T,F,ee){const{matched:ce,consumedSegments:xe,lastChild:Re,positionalParamSegments:$e}=A1(e,T,F);if(!ce)return D1(e);const ft=this.applyRedirectCommands(xe,T.redirectTo,$e);return T.redirectTo.startsWith("/")?Tk(ft):this.lineralizeSegments(T,ft).pipe(Ie(yt=>this.expandSegment(t,e,a,yt.concat(F.slice(Re)),ee,!1)))}matchSegmentAgainstRoute(t,e,a,T,F){if("**"===a.path)return a.loadChildren?(a._loadedConfig?Ia(a._loadedConfig):this.configLoader.load(t.injector,a)).pipe(B(yt=>(a._loadedConfig=yt,new Po(T,{})))):Ia(new Po(T,{}));const{matched:ee,consumedSegments:ce,lastChild:xe}=A1(e,a,T);if(!ee)return D1(e);const Re=T.slice(xe);return this.getChildConfig(t,a,T).pipe(Ie(ft=>{const yt=ft.module,Ot=ft.routes,{segmentGroup:nn,slicedSegments:_n}=M1(e,ce,Re,Ot),kn=new Po(nn.segments,nn.children);if(0===_n.length&&kn.hasChildren())return this.expandChildren(yt,Ot,kn).pipe(B(ri=>new Po(ce,ri)));if(0===Ot.length&&0===_n.length)return Ia(new Po(ce,{}));const Kn=ff(a)===F;return this.expandSegment(yt,kn,Ot,_n,Kn?vo:F,!0).pipe(B(Fr=>new Po(ce.concat(Fr.segments),Fr.children)))}))}getChildConfig(t,e,a){return e.children?Ia(new p2(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Ia(e._loadedConfig):this.runCanLoadGuards(t.injector,e,a).pipe(Ie(T=>T?this.configLoader.load(t.injector,e).pipe(B(F=>(e._loadedConfig=F,F))):function(n){return new C(t=>t.error(r2(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(e))):Ia(new p2([],t))}runCanLoadGuards(t,e,a){const T=e.canLoad;return T&&0!==T.length?Ia(T.map(ee=>{const ce=t.get(ee);let xe;if(function(n){return n&&Cd(n.canLoad)}(ce))xe=ce.canLoad(e,a);else{if(!Cd(ce))throw new Error("Invalid CanLoad guard");xe=ce(e,a)}return oh(xe)})).pipe(Qm(),ku(ee=>{if(!Ep(ee))return;const ce=r2(`Redirecting to "${this.urlSerializer.serialize(ee)}"`);throw ce.url=ee,ce}),B(ee=>!0===ee)):Ia(!0)}lineralizeSegments(t,e){let a=[],T=e.root;for(;;){if(a=a.concat(T.segments),0===T.numberOfChildren)return Ia(a);if(T.numberOfChildren>1||!T.children[vo])return XR(t.redirectTo);T=T.children[vo]}}applyRedirectCommands(t,e,a){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,a)}applyRedirectCreatreUrlTree(t,e,a,T){const F=this.createSegmentGroup(t,e.root,a,T);return new kp(F,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const a={};return Du(t,(T,F)=>{if("string"==typeof T&&T.startsWith(":")){const ce=T.substring(1);a[F]=e[ce]}else a[F]=T}),a}createSegmentGroup(t,e,a,T){const F=this.createSegments(t,e.segments,a,T);let ee={};return Du(e.children,(ce,xe)=>{ee[xe]=this.createSegmentGroup(t,ce,a,T)}),new Po(F,ee)}createSegments(t,e,a,T){return e.map(F=>F.path.startsWith(":")?this.findPosParam(t,F,T):this.findOrReturn(F,a))}findPosParam(t,e,a){const T=a[e.path.substring(1)];if(!T)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return T}findOrReturn(t,e){let a=0;for(const T of e){if(T.path===t.path)return e.splice(a),T;a++}return t}}function m2(n){const t={};for(const a of Object.keys(n.children)){const F=m2(n.children[a]);(F.segments.length>0||F.hasChildren())&&(t[a]=F)}return function(n){if(1===n.numberOfChildren&&n.children[vo]){const t=n.children[vo];return new Po(n.segments.concat(t.segments),t.children)}return n}(new Po(n.segments,t))}class Ak{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class E1{constructor(t,e){this.component=t,this.route=e}}function nF(n,t,e){const a=n._root;return ty(a,t?t._root:null,e,[a.value])}function C1(n,t,e){const a=function(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(a?a.module.injector:e).get(n)}function ty(n,t,e,a,T={canDeactivateChecks:[],canActivateChecks:[]}){const F=Xm(t);return n.children.forEach(ee=>{(function(n,t,e,a,T={canDeactivateChecks:[],canActivateChecks:[]}){const F=n.value,ee=t?t.value:null,ce=e?e.getContext(n.value.outlet):null;if(ee&&F.routeConfig===ee.routeConfig){const xe=function(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Dp(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Dp(n.url,t.url)||!ah(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!c2(n,t)||!ah(n.queryParams,t.queryParams);case"paramsChange":default:return!c2(n,t)}}(ee,F,F.routeConfig.runGuardsAndResolvers);xe?T.canActivateChecks.push(new Ak(a)):(F.data=ee.data,F._resolvedData=ee._resolvedData),ty(n,t,F.component?ce?ce.children:null:e,a,T),xe&&ce&&ce.outlet&&ce.outlet.isActivated&&T.canDeactivateChecks.push(new E1(ce.outlet.component,ee))}else ee&&ny(t,ce,T),T.canActivateChecks.push(new Ak(a)),ty(n,null,F.component?ce?ce.children:null:e,a,T)})(ee,F[ee.value.outlet],e,a.concat([ee.value]),T),delete F[ee.value.outlet]}),Du(F,(ee,ce)=>ny(ee,e.getContext(ce),T)),T}function ny(n,t,e){const a=Xm(n),T=n.value;Du(a,(F,ee)=>{ny(F,T.component?t?t.children.getContext(ee):null:t,e)}),e.canDeactivateChecks.push(new E1(T.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,T))}class gF{}function Mk(n){return new C(t=>t.error(n))}class yF{constructor(t,e,a,T,F,ee){this.rootComponentType=t,this.config=e,this.urlTree=a,this.url=T,this.paramsInheritanceStrategy=F,this.relativeLinkResolution=ee}recognize(){const t=M1(this.urlTree.root,[],[],this.config.filter(ee=>void 0===ee.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,vo);if(null===e)return null;const a=new _1([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},vo,this.rootComponentType,null,this.urlTree.root,-1,{}),T=new Ph(a,e),F=new sk(this.url,T);return this.inheritParamsAndData(F._root),F}inheritParamsAndData(t){const e=t.value,a=ok(e,this.paramsInheritanceStrategy);e.params=Object.freeze(a.params),e.data=Object.freeze(a.data),t.children.forEach(T=>this.inheritParamsAndData(T))}processSegmentGroup(t,e,a){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,a)}processChildren(t,e){const a=[];for(const F of Object.keys(e.children)){const ee=e.children[F],ce=vk(t,F),xe=this.processSegmentGroup(ce,ee,F);if(null===xe)return null;a.push(...xe)}const T=kk(a);return function(n){n.sort((t,e)=>t.value.outlet===vo?-1:e.value.outlet===vo?1:t.value.outlet.localeCompare(e.value.outlet))}(T),T}processSegment(t,e,a,T){for(const F of t){const ee=this.processSegmentAgainstRoute(F,e,a,T);if(null!==ee)return ee}return xk(e,a,T)?[]:null}processSegmentAgainstRoute(t,e,a,T){if(t.redirectTo||!_k(t,e,a,T))return null;let F,ee=[],ce=[];if("**"===t.path){const Ot=a.length>0?$5(a).parameters:{};F=new _1(a,Ot,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ck(t),ff(t),t.component,t,Dk(e),Ek(e)+a.length,Sk(t))}else{const Ot=A1(e,t,a);if(!Ot.matched)return null;ee=Ot.consumedSegments,ce=a.slice(Ot.lastChild),F=new _1(ee,Ot.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ck(t),ff(t),t.component,t,Dk(e),Ek(e)+ee.length,Sk(t))}const xe=function(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(t),{segmentGroup:Re,slicedSegments:$e}=M1(e,ee,ce,xe.filter(Ot=>void 0===Ot.redirectTo),this.relativeLinkResolution);if(0===$e.length&&Re.hasChildren()){const Ot=this.processChildren(xe,Re);return null===Ot?null:[new Ph(F,Ot)]}if(0===xe.length&&0===$e.length)return[new Ph(F,[])];const ft=ff(t)===T,yt=this.processSegment(xe,Re,$e,ft?vo:T);return null===yt?null:[new Ph(F,yt)]}}function _F(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function kk(n){const t=[],e=new Set;for(const a of n){if(!_F(a)){t.push(a);continue}const T=t.find(F=>a.value.routeConfig===F.value.routeConfig);void 0!==T?(T.children.push(...a.children),e.add(T)):t.push(a)}for(const a of e){const T=kk(a.children);t.push(new Ph(a.value,T))}return t.filter(a=>!e.has(a))}function Dk(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Ek(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function Ck(n){return n.data||{}}function Sk(n){return n.resolve||{}}function y2(n){return Nf(t=>{const e=n(t);return e?pe(e).pipe(B(()=>t)):Ia(t)})}class EF extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const v2=new Ta("ROUTES");class Ik{constructor(t,e,a,T){this.loader=t,this.compiler=e,this.onLoadStartListener=a,this.onLoadEndListener=T}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const T=this.loadModuleFactory(e.loadChildren).pipe(B(F=>{this.onLoadEndListener&&this.onLoadEndListener(e);const ee=F.create(t);return new p2(W5(ee.injector.get(v2,void 0,er.Self|er.Optional)).map(g2),ee)}),Mp(F=>{throw e._loader$=void 0,F}));return e._loader$=new et(T,()=>new R).pipe(He()),e._loader$}loadModuleFactory(t){return"string"==typeof t?pe(this.loader.load(t)):oh(t()).pipe(Ie(e=>e instanceof nA?Ia(e):pe(this.compiler.compileModuleAsync(e))))}}class CF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Z0,this.attachRef=null}}class Z0{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const a=this.getOrCreateContext(t);a.outlet=e,this.contexts.set(t,a)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new CF,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class IF{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function PF(n){throw n}function OF(n,t,e){return t.parse("/")}function Pk(n,t){return Ia(null)}const LF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},RF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bc=(()=>{class n{constructor(e,a,T,F,ee,ce,xe,Re){this.rootComponentType=e,this.urlSerializer=a,this.rootContexts=T,this.location=F,this.config=Re,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new R,this.errorHandler=PF,this.malformedUriErrorHandler=OF,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Pk,afterPreactivation:Pk},this.urlHandlingStrategy=new IF,this.routeReuseStrategy=new EF,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ee.get(rh),this.console=ee.get(Nv);const yt=ee.get(Ao);this.isNgZoneEnabled=yt instanceof Ao&&Ao.isInAngularZone(),this.resetConfig(Re),this.currentUrlTree=new kp(new Po([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ik(ce,xe,Ot=>this.triggerEvent(new V5(Ot)),Ot=>this.triggerEvent(new U5(Ot))),this.routerState=ak(this.currentUrlTree,this.rootComponentType),this.transitions=new Kl({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const a=this.events;return e.pipe(Vl(T=>0!==T.id),B(T=>Object.assign(Object.assign({},T),{extractedUrl:this.urlHandlingStrategy.extract(T.rawUrl)})),Nf(T=>{let F=!1,ee=!1;return Ia(T).pipe(ku(ce=>{this.currentNavigation={id:ce.id,initialUrl:ce.currentRawUrl,extractedUrl:ce.extractedUrl,trigger:ce.source,extras:ce.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Nf(ce=>{const xe=!this.navigated||ce.extractedUrl.toString()!==this.browserUrlTree.toString(),Re=("reload"===this.onSameUrlNavigation||xe)&&this.urlHandlingStrategy.shouldProcessUrl(ce.rawUrl);if(S1(ce.source)&&(this.browserUrlTree=ce.rawUrl),Re)return Ia(ce).pipe(Nf($e=>{const ft=this.transitions.getValue();return a.next(new n2($e.id,this.serializeUrl($e.extractedUrl),$e.source,$e.restoredState)),ft!==this.transitions.getValue()?Ap:Promise.resolve($e)}),function(n,t,e,a){return Nf(T=>function(n,t,e,a,T){return new QR(n,t,e,a,T).apply()}(n,t,e,T.extractedUrl,a).pipe(B(F=>Object.assign(Object.assign({},T),{urlAfterRedirects:F}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),ku($e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:$e.urlAfterRedirects})}),function(n,t,e,a,T){return Ie(F=>function(n,t,e,a,T="emptyOnly",F="legacy"){try{const ee=new yF(n,t,e,a,T,F).recognize();return null===ee?Mk(new gF):Ia(ee)}catch(ee){return Mk(ee)}}(n,t,F.urlAfterRedirects,e(F.urlAfterRedirects),a,T).pipe(B(ee=>Object.assign(Object.assign({},F),{targetSnapshot:ee}))))}(this.rootComponentType,this.config,$e=>this.serializeUrl($e),this.paramsInheritanceStrategy,this.relativeLinkResolution),ku($e=>{"eager"===this.urlUpdateStrategy&&($e.extras.skipLocationChange||this.setBrowserUrl($e.urlAfterRedirects,$e),this.browserUrlTree=$e.urlAfterRedirects);const ft=new ZL($e.id,this.serializeUrl($e.extractedUrl),this.serializeUrl($e.urlAfterRedirects),$e.targetSnapshot);a.next(ft)}));if(xe&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ft,extractedUrl:yt,source:Ot,restoredState:nn,extras:_n}=ce,kn=new n2(ft,this.serializeUrl(yt),Ot,nn);a.next(kn);const Kn=ak(yt,this.rootComponentType).snapshot;return Ia(Object.assign(Object.assign({},ce),{targetSnapshot:Kn,urlAfterRedirects:yt,extras:Object.assign(Object.assign({},_n),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ce.rawUrl,this.browserUrlTree=ce.urlAfterRedirects,ce.resolve(null),Ap}),y2(ce=>{const{targetSnapshot:xe,id:Re,extractedUrl:$e,rawUrl:ft,extras:{skipLocationChange:yt,replaceUrl:Ot}}=ce;return this.hooks.beforePreactivation(xe,{navigationId:Re,appliedUrlTree:$e,rawUrlTree:ft,skipLocationChange:!!yt,replaceUrl:!!Ot})}),ku(ce=>{const xe=new XL(ce.id,this.serializeUrl(ce.extractedUrl),this.serializeUrl(ce.urlAfterRedirects),ce.targetSnapshot);this.triggerEvent(xe)}),B(ce=>Object.assign(Object.assign({},ce),{guards:nF(ce.targetSnapshot,ce.currentSnapshot,this.rootContexts)})),function(n,t){return Ie(e=>{const{targetSnapshot:a,currentSnapshot:T,guards:{canActivateChecks:F,canDeactivateChecks:ee}}=e;return 0===ee.length&&0===F.length?Ia(Object.assign(Object.assign({},e),{guardsResult:!0})):function(n,t,e,a){return pe(n).pipe(Ie(T=>function(n,t,e,a,T){const F=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return F&&0!==F.length?Ia(F.map(ce=>{const xe=C1(ce,t,T);let Re;if(function(n){return n&&Cd(n.canDeactivate)}(xe))Re=oh(xe.canDeactivate(n,t,e,a));else{if(!Cd(xe))throw new Error("Invalid CanDeactivate guard");Re=oh(xe(n,t,e,a))}return Re.pipe(W0())})).pipe(Qm()):Ia(!0)}(T.component,T.route,e,t,a)),W0(T=>!0!==T,!0))}(ee,a,T,n).pipe(Ie(ce=>ce&&function(n){return"boolean"==typeof n}(ce)?function(n,t,e,a){return pe(t).pipe(q0(T=>h1(function(n,t){return null!==n&&t&&t(new eR(n)),Ia(!0)}(T.route.parent,a),function(n,t){return null!==n&&t&&t(new nR(n)),Ia(!0)}(T.route,a),function(n,t,e){const a=t[t.length-1],F=t.slice(0,t.length-1).reverse().map(ee=>function(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(ee)).filter(ee=>null!==ee).map(ee=>R5(()=>Ia(ee.guards.map(xe=>{const Re=C1(xe,ee.node,e);let $e;if(function(n){return n&&Cd(n.canActivateChild)}(Re))$e=oh(Re.canActivateChild(a,n));else{if(!Cd(Re))throw new Error("Invalid CanActivateChild guard");$e=oh(Re(a,n))}return $e.pipe(W0())})).pipe(Qm())));return Ia(F).pipe(Qm())}(n,T.path,e),function(n,t,e){const a=t.routeConfig?t.routeConfig.canActivate:null;return a&&0!==a.length?Ia(a.map(F=>R5(()=>{const ee=C1(F,t,e);let ce;if(function(n){return n&&Cd(n.canActivate)}(ee))ce=oh(ee.canActivate(t,n));else{if(!Cd(ee))throw new Error("Invalid CanActivate guard");ce=oh(ee(t,n))}return ce.pipe(W0())}))).pipe(Qm()):Ia(!0)}(n,T.route,e))),W0(T=>!0!==T,!0))}(a,F,n,t):Ia(ce)),B(ce=>Object.assign(Object.assign({},e),{guardsResult:ce})))})}(this.ngModule.injector,ce=>this.triggerEvent(ce)),ku(ce=>{if(Ep(ce.guardsResult)){const Re=r2(`Redirecting to "${this.serializeUrl(ce.guardsResult)}"`);throw Re.url=ce.guardsResult,Re}const xe=new JL(ce.id,this.serializeUrl(ce.extractedUrl),this.serializeUrl(ce.urlAfterRedirects),ce.targetSnapshot,!!ce.guardsResult);this.triggerEvent(xe)}),Vl(ce=>!!ce.guardsResult||(this.restoreHistory(ce),this.cancelNavigationTransition(ce,""),!1)),y2(ce=>{if(ce.guards.canActivateChecks.length)return Ia(ce).pipe(ku(xe=>{const Re=new KL(xe.id,this.serializeUrl(xe.extractedUrl),this.serializeUrl(xe.urlAfterRedirects),xe.targetSnapshot);this.triggerEvent(Re)}),Nf(xe=>{let Re=!1;return Ia(xe).pipe(function(n,t){return Ie(e=>{const{targetSnapshot:a,guards:{canActivateChecks:T}}=e;if(!T.length)return Ia(e);let F=0;return pe(T).pipe(q0(ee=>function(n,t,e,a){return function(n,t,e,a){const T=Object.keys(n);if(0===T.length)return Ia({});const F={};return pe(T).pipe(Ie(ee=>function(n,t,e,a){const T=C1(n,t,a);return oh(T.resolve?T.resolve(t,e):T(t,e))}(n[ee],t,e,a).pipe(ku(ce=>{F[ee]=ce}))),t2(1),Ie(()=>Object.keys(F).length===T.length?Ia(F):Ap))}(n._resolve,n,t,a).pipe(B(F=>(n._resolvedData=F,n.data=Object.assign(Object.assign({},n.data),ok(n,e).resolve),null)))}(ee.route,a,n,t)),ku(()=>F++),t2(1),Ie(ee=>F===T.length?Ia(e):Ap))})}(this.paramsInheritanceStrategy,this.ngModule.injector),ku({next:()=>Re=!0,complete:()=>{Re||(this.restoreHistory(xe),this.cancelNavigationTransition(xe,"At least one route resolver didn't emit any value."))}}))}),ku(xe=>{const Re=new QL(xe.id,this.serializeUrl(xe.extractedUrl),this.serializeUrl(xe.urlAfterRedirects),xe.targetSnapshot);this.triggerEvent(Re)}))}),y2(ce=>{const{targetSnapshot:xe,id:Re,extractedUrl:$e,rawUrl:ft,extras:{skipLocationChange:yt,replaceUrl:Ot}}=ce;return this.hooks.afterPreactivation(xe,{navigationId:Re,appliedUrlTree:$e,rawUrlTree:ft,skipLocationChange:!!yt,replaceUrl:!!Ot})}),B(ce=>{const xe=function(n,t,e){const a=x1(n,t._root,e?e._root:void 0);return new ik(a,t)}(this.routeReuseStrategy,ce.targetSnapshot,ce.currentRouterState);return Object.assign(Object.assign({},ce),{targetRouterState:xe})}),ku(ce=>{this.currentUrlTree=ce.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,ce.rawUrl),this.routerState=ce.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ce.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ce),this.browserUrlTree=ce.urlAfterRedirects)}),((n,t,e)=>B(a=>(new NR(t,a.targetRouterState,a.currentRouterState,e).activate(n),a)))(this.rootContexts,this.routeReuseStrategy,ce=>this.triggerEvent(ce)),ku({next(){F=!0},complete(){F=!0}}),function(n){return t=>t.lift(new WL(n))}(()=>{if(!F&&!ee){const ce=`Navigation ID ${T.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(T),this.cancelNavigationTransition(T,ce)):this.cancelNavigationTransition(T,ce)}this.currentNavigation=null}),Mp(ce=>{if(ee=!0,function(n){return n&&n[G5]}(ce)){const xe=Ep(ce.url);xe||(this.navigated=!0,this.restoreHistory(T,!0));const Re=new j5(T.id,this.serializeUrl(T.extractedUrl),ce.message);a.next(Re),xe?setTimeout(()=>{const $e=this.urlHandlingStrategy.merge(ce.url,this.rawUrlTree),ft={skipLocationChange:T.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||S1(T.source)};this.scheduleNavigation($e,"imperative",null,ft,{resolve:T.resolve,reject:T.reject,promise:T.promise})},0):T.resolve(!1)}else{this.restoreHistory(T,!0);const xe=new YL(T.id,this.serializeUrl(T.extractedUrl),ce);a.next(xe);try{T.resolve(this.errorHandler(ce))}catch(Re){T.reject(Re)}}return Ap}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const a=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,a)&&setTimeout(()=>{const{source:T,state:F,urlTree:ee}=a,ce={replaceUrl:!0};if(F){const xe=Object.assign({},F);delete xe.navigationId,delete xe.\u0275routerPageId,0!==Object.keys(xe).length&&(ce.state=xe)}this.scheduleNavigation(ee,T,F,ce)},0),this.lastLocationChangeInfo=a}))}extractLocationChangeInfoFromEvent(e){var a;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(a=e.state)||void 0===a?void 0:a.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,a){if(!e)return!0;const T=a.urlTree.toString()===e.urlTree.toString();return a.transitionId!==e.transitionId||!T||!("hashchange"===a.source&&"popstate"===e.source||"popstate"===a.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){yk(e),this.config=e.map(g2),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,a={}){const{relativeTo:T,queryParams:F,fragment:ee,queryParamsHandling:ce,preserveFragment:xe}=a,Re=T||this.routerState.root,$e=xe?this.currentUrlTree.fragment:ee;let ft=null;switch(ce){case"merge":ft=Object.assign(Object.assign({},this.currentUrlTree.queryParams),F);break;case"preserve":ft=this.currentUrlTree.queryParams;break;default:ft=F||null}return null!==ft&&(ft=this.removeEmptyProps(ft)),function(n,t,e,a,T){if(0===e.length)return f2(t.root,t.root,t,a,T);const F=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new fk(!0,0,n);let t=0,e=!1;const a=n.reduce((T,F,ee)=>{if("object"==typeof F&&null!=F){if(F.outlets){const ce={};return Du(F.outlets,(xe,Re)=>{ce[Re]="string"==typeof xe?xe.split("/"):xe}),[...T,{outlets:ce}]}if(F.segmentPath)return[...T,F.segmentPath]}return"string"!=typeof F?[...T,F]:0===ee?(F.split("/").forEach((ce,xe)=>{0==xe&&"."===ce||(0==xe&&""===ce?e=!0:".."===ce?t++:""!=ce&&T.push(ce))}),T):[...T,F]},[]);return new fk(e,t,a)}(e);if(F.toRoot())return f2(t.root,new Po([],{}),t,a,T);const ee=function(n,t,e){if(n.isAbsolute)return new h2(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const F=e.snapshot._urlSegment;return new h2(F,F===t.root,0)}const a=w1(n.commands[0])?0:1;return function(n,t,e){let a=n,T=t,F=e;for(;F>T;){if(F-=T,a=a.parent,!a)throw new Error("Invalid number of '../'");T=a.segments.length}return new h2(a,!1,T-F)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+a,n.numberOfDoubleDots)}(F,t,n),ce=ee.processChildren?T1(ee.segmentGroup,ee.index,F.commands):hk(ee.segmentGroup,ee.index,F.commands);return f2(ee.segmentGroup,ce,t,a,T)}(Re,this.currentUrlTree,e,ft,null!=$e?$e:null)}navigateByUrl(e,a={skipLocationChange:!1}){const T=Ep(e)?e:this.parseUrl(e),F=this.urlHandlingStrategy.merge(T,this.rawUrlTree);return this.scheduleNavigation(F,"imperative",null,a)}navigate(e,a={skipLocationChange:!1}){return function(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,a),a)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let a;try{a=this.urlSerializer.parse(e)}catch(T){a=this.malformedUriErrorHandler(T,this.urlSerializer,e)}return a}isActive(e,a){let T;if(T=!0===a?Object.assign({},LF):!1===a?Object.assign({},RF):a,Ep(e))return Z5(this.currentUrlTree,e,T);const F=this.parseUrl(e);return Z5(this.currentUrlTree,F,T)}removeEmptyProps(e){return Object.keys(e).reduce((a,T)=>{const F=e[T];return null!=F&&(a[T]=F),a},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new $m(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,a,T,F,ee){var ce,xe;if(this.disposed)return Promise.resolve(!1);const Re=this.getTransition(),$e=S1(a)&&Re&&!S1(Re.source),Ot=(this.lastSuccessfulId===Re.id||this.currentNavigation?Re.rawUrl:Re.urlAfterRedirects).toString()===e.toString();if($e&&Ot)return Promise.resolve(!0);let nn,_n,kn;ee?(nn=ee.resolve,_n=ee.reject,kn=ee.promise):kn=new Promise((Fr,ri)=>{nn=Fr,_n=ri});const Kn=++this.navigationId;let jn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(T=this.location.getState()),jn=T&&T.\u0275routerPageId?T.\u0275routerPageId:F.replaceUrl||F.skipLocationChange?null!==(ce=this.browserPageId)&&void 0!==ce?ce:0:(null!==(xe=this.browserPageId)&&void 0!==xe?xe:0)+1):jn=0,this.setTransition({id:Kn,targetPageId:jn,source:a,restoredState:T,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:F,resolve:nn,reject:_n,promise:kn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),kn.catch(Fr=>Promise.reject(Fr))}setBrowserUrl(e,a){const T=this.urlSerializer.serialize(e),F=Object.assign(Object.assign({},a.extras.state),this.generateNgRouterState(a.id,a.targetPageId));this.location.isCurrentPathEqualTo(T)||a.extras.replaceUrl?this.location.replaceState(T,"",F):this.location.go(T,"",F)}restoreHistory(e,a=!1){var T,F;if("computed"===this.canceledNavigationResolution){const ee=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(T=this.currentNavigation)||void 0===T?void 0:T.finalUrl)||0===ee?this.currentUrlTree===(null===(F=this.currentNavigation)||void 0===F?void 0:F.finalUrl)&&0===ee&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ee)}else"replace"===this.canceledNavigationResolution&&(a&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,a){const T=new j5(e.id,this.serializeUrl(e.extractedUrl),a);this.triggerEvent(T),e.resolve(!1)}generateNgRouterState(e,a){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:a}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)(Hr(Uf),Hr(i2),Hr(Z0),Hr(Xv),Hr(no),Hr(Bv),Hr(_p),Hr(void 0))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();function S1(n){return"imperative"!==n}let Ok=(()=>{class n{constructor(e,a,T,F,ee){this.parentContexts=e,this.location=a,this.resolver=T,this.changeDetector=ee,this.activated=null,this._activatedRoute=null,this.activateEvents=new bi,this.deactivateEvents=new bi,this.name=F||vo,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,a){this.activated=e,this._activatedRoute=a,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,a){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const ee=(a=a||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),ce=this.parentContexts.getOrCreateContext(this.name).children,xe=new BF(e,ce,this.location.injector);this.activated=this.location.createComponent(ee,this.location.length,xe),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(Wn(Z0),Wn(tc),Wn(yc),function(n){return function(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const a=e.length;let T=0;for(;T<a;){const F=e[T];if(Le(F))break;if(0===F)T+=2;else if("number"==typeof F)for(T++;T<a&&"string"==typeof e[T];)T++;else{if(F===t)return e[T+1];T+=2}}}return null}(mi(),n)}("name"),Wn(Tu))},n.\u0275dir=vr({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class BF{constructor(t,e,a){this.route=t,this.childContexts=e,this.parent=a}get(t,e){return t===Y0?this.route:t===Z0?this.childContexts:this.parent.get(t,e)}}class Lk{}class Rk{preload(t,e){return Ia(null)}}let Fk=(()=>{class n{constructor(e,a,T,F,ee){this.router=e,this.injector=F,this.preloadingStrategy=ee,this.loader=new Ik(a,T,Re=>e.triggerEvent(new V5(Re)),Re=>e.triggerEvent(new U5(Re)))}setUpPreloading(){this.subscription=this.router.events.pipe(Vl(e=>e instanceof $m),q0(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(rh);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,a){const T=[];for(const F of a)if(F.loadChildren&&!F.canLoad&&F._loadedConfig){const ee=F._loadedConfig;T.push(this.processRoutes(ee.module,ee.routes))}else F.loadChildren&&!F.canLoad?T.push(this.preloadConfig(e,F)):F.children&&T.push(this.processRoutes(e,F.children));return pe(T).pipe(Se(),B(F=>{}))}preloadConfig(e,a){return this.preloadingStrategy.preload(a,()=>(a._loadedConfig?Ia(a._loadedConfig):this.loader.load(e.injector,a)).pipe(Ie(F=>(a._loadedConfig=F,this.processRoutes(F.module,F.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(Hr(bc),Hr(Bv),Hr(_p),Hr(no),Hr(Lk))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})(),x2=(()=>{class n{constructor(e,a,T={}){this.router=e,this.viewportScroller=a,this.options=T,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},T.scrollPositionRestoration=T.scrollPositionRestoration||"disabled",T.anchorScrolling=T.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof n2?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof $m&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof H5&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,a){this.router.triggerEvent(new H5(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,a))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(Hr(bc),Hr(b5),Hr(void 0))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();const Cp=new Ta("ROUTER_CONFIGURATION"),Nk=new Ta("ROUTER_FORROOT_GUARD"),VF=[Xv,{provide:i2,useClass:Q5},{provide:bc,useFactory:function(n,t,e,a,T,F,ee,ce={},xe,Re){const $e=new bc(null,n,t,e,a,T,F,W5(ee));return xe&&($e.urlHandlingStrategy=xe),Re&&($e.routeReuseStrategy=Re),function(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy)}(ce,$e),ce.enableTracing&&$e.events.subscribe(ft=>{var yt,Ot;null===(yt=console.group)||void 0===yt||yt.call(console,`Router Event: ${ft.constructor.name}`),console.log(ft.toString()),console.log(ft),null===(Ot=console.groupEnd)||void 0===Ot||Ot.call(console)}),$e},deps:[i2,Z0,Xv,no,Bv,_p,v2,Cp,[class{},new Nl],[class{},new Nl]]},Z0,{provide:Y0,useFactory:function(n){return n.routerState.root},deps:[bc]},{provide:Bv,useClass:WP},Fk,Rk,class{preload(t,e){return e().pipe(Mp(()=>Ia(null)))}},{provide:Cp,useValue:{enableTracing:!1}}];function UF(){return new cx("Router",bc)}let zk=(()=>{class n{constructor(e,a){}static forRoot(e,a){return{ngModule:n,providers:[VF,Bk(e),{provide:Nk,useFactory:qF,deps:[[bc,new Nl,new Zc]]},{provide:Cp,useValue:a||{}},{provide:G0,useFactory:GF,deps:[Tp,[new jh(Dx),new Nl],Cp]},{provide:x2,useFactory:HF,deps:[bc,b5,Cp]},{provide:Lk,useExisting:a&&a.preloadingStrategy?a.preloadingStrategy:Rk},{provide:cx,multi:!0,useFactory:UF},[w2,{provide:Rm,multi:!0,useFactory:ZF,deps:[w2]},{provide:jk,useFactory:XF,deps:[w2]},{provide:sM,multi:!0,useExisting:jk}]]}}static forChild(e){return{ngModule:n,providers:[Bk(e)]}}}return n.\u0275fac=function(e){return new(e||n)(Hr(Nk,8),Hr(bc,8))},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({}),n})();function HF(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new x2(n,t,e)}function GF(n,t,e={}){return e.useHash?new h9(n,t):new JM(n,t)}function qF(n){return"guarded"}function Bk(n){return[{provide:uh,multi:!0,useValue:n},{provide:v2,multi:!0,useValue:n}]}let w2=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new R}appInitializer(){return this.injector.get(u9,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let a=null;const T=new Promise(ce=>a=ce),F=this.injector.get(bc),ee=this.injector.get(Cp);return"disabled"===ee.initialNavigation?(F.setUpLocationChangeListener(),a(!0)):"enabled"===ee.initialNavigation||"enabledBlocking"===ee.initialNavigation?(F.hooks.afterPreactivation=()=>this.initNavigation?Ia(null):(this.initNavigation=!0,a(!0),this.resultOfPreactivationDone),F.initialNavigation()):a(!0),T})}bootstrapListener(e){const a=this.injector.get(Cp),T=this.injector.get(Fk),F=this.injector.get(x2),ee=this.injector.get(bc),ce=this.injector.get(If);e===ce.components[0]&&(("enabledNonBlocking"===a.initialNavigation||void 0===a.initialNavigation)&&ee.initialNavigation(),T.setUpPreloading(),F.init(),ee.resetRootComponentType(ce.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(Hr(no))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();function ZF(n){return n.appInitializer.bind(n)}function XF(n){return n.bootstrapListener.bind(n)}const jk=new Ta("Router Initializer"),KF=[];let QF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[[zk.forRoot(KF)],zk]}),n})();var eN=G(577),Vk=G.n(eN),A2="millisecond",K0="second",Q0="minute",eg="hour",Sd="day",I1="week",zf="month",Wk="quarter",Id="year",tg="date",$k="Invalid Date",aN=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,oN=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;const sN={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")};var M2=function(t,e,a){var T=String(t);return!T||T.length>=e?t:""+Array(e+1-T.length).join(a)+t};const dN={s:M2,z:function(t){var e=-t.utcOffset(),a=Math.abs(e),T=Math.floor(a/60),F=a%60;return(e<=0?"+":"-")+M2(T,2,"0")+":"+M2(F,2,"0")},m:function n(t,e){if(t.date()<e.date())return-n(e,t);var a=12*(e.year()-t.year())+(e.month()-t.month()),T=t.clone().add(a,zf),F=e-T<0,ee=t.clone().add(a+(F?-1:1),zf);return+(-(a+(e-T)/(F?T-ee:ee-T))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:zf,y:Id,w:I1,d:Sd,D:tg,h:eg,m:Q0,s:K0,ms:A2,Q:Wk}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}};var ry="en",Sp={};Sp[ry]=sN;var k2=function(t){return t instanceof O1},P1=function(t,e,a){var T;if(!t)return ry;if("string"==typeof t)Sp[t]&&(T=t),e&&(Sp[t]=e,T=t);else{var F=t.name;Sp[F]=t,T=F}return!a&&T&&(ry=T),T||!a&&ry},du=function(t,e){if(k2(t))return t.clone();var a="object"==typeof e?e:{};return a.date=t,a.args=arguments,new O1(a)},Vs=dN;Vs.l=P1,Vs.i=k2,Vs.w=function(t,e){return du(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var O1=function(){function n(e){this.$L=P1(e.locale,null,!0),this.parse(e)}var t=n.prototype;return t.parse=function(a){this.$d=function(t){var e=t.date,a=t.utc;if(null===e)return new Date(NaN);if(Vs.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var T=e.match(aN);if(T){var F=T[2]-1||0,ee=(T[7]||"0").substring(0,3);return a?new Date(Date.UTC(T[1],F,T[3]||1,T[4]||0,T[5]||0,T[6]||0,ee)):new Date(T[1],F,T[3]||1,T[4]||0,T[5]||0,T[6]||0,ee)}}return new Date(e)}(a),this.$x=a.x||{},this.init()},t.init=function(){var a=this.$d;this.$y=a.getFullYear(),this.$M=a.getMonth(),this.$D=a.getDate(),this.$W=a.getDay(),this.$H=a.getHours(),this.$m=a.getMinutes(),this.$s=a.getSeconds(),this.$ms=a.getMilliseconds()},t.$utils=function(){return Vs},t.isValid=function(){return this.$d.toString()!==$k},t.isSame=function(a,T){var F=du(a);return this.startOf(T)<=F&&F<=this.endOf(T)},t.isAfter=function(a,T){return du(a)<this.startOf(T)},t.isBefore=function(a,T){return this.endOf(T)<du(a)},t.$g=function(a,T,F){return Vs.u(a)?this[T]:this.set(F,a)},t.unix=function(){return Math.floor(this.valueOf()/1e3)},t.valueOf=function(){return this.$d.getTime()},t.startOf=function(a,T){var F=this,ee=!!Vs.u(T)||T,ce=Vs.p(a),xe=function(Kn,jn){var Fr=Vs.w(F.$u?Date.UTC(F.$y,jn,Kn):new Date(F.$y,jn,Kn),F);return ee?Fr:Fr.endOf(Sd)},Re=function(Kn,jn){return Vs.w(F.toDate()[Kn].apply(F.toDate("s"),(ee?[0,0,0,0]:[23,59,59,999]).slice(jn)),F)},$e=this.$W,ft=this.$M,yt=this.$D,Ot="set"+(this.$u?"UTC":"");switch(ce){case Id:return ee?xe(1,0):xe(31,11);case zf:return ee?xe(1,ft):xe(0,ft+1);case I1:var nn=this.$locale().weekStart||0,_n=($e<nn?$e+7:$e)-nn;return xe(ee?yt-_n:yt+(6-_n),ft);case Sd:case tg:return Re(Ot+"Hours",0);case eg:return Re(Ot+"Minutes",1);case Q0:return Re(Ot+"Seconds",2);case K0:return Re(Ot+"Milliseconds",3);default:return this.clone()}},t.endOf=function(a){return this.startOf(a,!1)},t.$set=function(a,T){var F,ee=Vs.p(a),ce="set"+(this.$u?"UTC":""),xe=(F={},F[Sd]=ce+"Date",F[tg]=ce+"Date",F[zf]=ce+"Month",F[Id]=ce+"FullYear",F[eg]=ce+"Hours",F[Q0]=ce+"Minutes",F[K0]=ce+"Seconds",F[A2]=ce+"Milliseconds",F)[ee],Re=ee===Sd?this.$D+(T-this.$W):T;if(ee===zf||ee===Id){var $e=this.clone().set(tg,1);$e.$d[xe](Re),$e.init(),this.$d=$e.set(tg,Math.min(this.$D,$e.daysInMonth())).$d}else xe&&this.$d[xe](Re);return this.init(),this},t.set=function(a,T){return this.clone().$set(a,T)},t.get=function(a){return this[Vs.p(a)]()},t.add=function(a,T){var ee,F=this;a=Number(a);var ce=Vs.p(T),xe=function(yt){var Ot=du(F);return Vs.w(Ot.date(Ot.date()+Math.round(yt*a)),F)};if(ce===zf)return this.set(zf,this.$M+a);if(ce===Id)return this.set(Id,this.$y+a);if(ce===Sd)return xe(1);if(ce===I1)return xe(7);var Re=(ee={},ee[Q0]=6e4,ee[eg]=36e5,ee[K0]=1e3,ee)[ce]||1,$e=this.$d.getTime()+a*Re;return Vs.w($e,this)},t.subtract=function(a,T){return this.add(-1*a,T)},t.format=function(a){var T=this,F=this.$locale();if(!this.isValid())return F.invalidDate||$k;var ee=a||"YYYY-MM-DDTHH:mm:ssZ",ce=Vs.z(this),xe=this.$H,Re=this.$m,$e=this.$M,ft=F.weekdays,yt=F.months,nn=function(Fr,ri,hi,ma){return Fr&&(Fr[ri]||Fr(T,ee))||hi[ri].substr(0,ma)},_n=function(Fr){return Vs.s(xe%12||12,Fr,"0")},kn=F.meridiem||function(jn,Fr,ri){var hi=jn<12?"AM":"PM";return ri?hi.toLowerCase():hi},Kn={YY:String(this.$y).slice(-2),YYYY:this.$y,M:$e+1,MM:Vs.s($e+1,2,"0"),MMM:nn(F.monthsShort,$e,yt,3),MMMM:nn(yt,$e),D:this.$D,DD:Vs.s(this.$D,2,"0"),d:String(this.$W),dd:nn(F.weekdaysMin,this.$W,ft,2),ddd:nn(F.weekdaysShort,this.$W,ft,3),dddd:ft[this.$W],H:String(xe),HH:Vs.s(xe,2,"0"),h:_n(1),hh:_n(2),a:kn(xe,Re,!0),A:kn(xe,Re,!1),m:String(Re),mm:Vs.s(Re,2,"0"),s:String(this.$s),ss:Vs.s(this.$s,2,"0"),SSS:Vs.s(this.$ms,3,"0"),Z:ce};return ee.replace(oN,function(jn,Fr){return Fr||Kn[jn]||ce.replace(":","")})},t.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},t.diff=function(a,T,F){var ee,ce=Vs.p(T),xe=du(a),Re=6e4*(xe.utcOffset()-this.utcOffset()),$e=this-xe,ft=Vs.m(this,xe);return ft=(ee={},ee[Id]=ft/12,ee[zf]=ft,ee[Wk]=ft/3,ee[I1]=($e-Re)/6048e5,ee[Sd]=($e-Re)/864e5,ee[eg]=$e/36e5,ee[Q0]=$e/6e4,ee[K0]=$e/1e3,ee)[ce]||$e,F?ft:Vs.a(ft)},t.daysInMonth=function(){return this.endOf(zf).$D},t.$locale=function(){return Sp[this.$L]},t.locale=function(a,T){if(!a)return this.$L;var F=this.clone(),ee=P1(a,T,!0);return ee&&(F.$L=ee),F},t.clone=function(){return Vs.w(this.$d,this)},t.toDate=function(){return new Date(this.valueOf())},t.toJSON=function(){return this.isValid()?this.toISOString():null},t.toISOString=function(){return this.$d.toISOString()},t.toString=function(){return this.$d.toUTCString()},n}(),Yk=O1.prototype;du.prototype=Yk,[["$ms",A2],["$s",K0],["$m",Q0],["$H",eg],["$W",Sd],["$M",zf],["$y",Id],["$D",tg]].forEach(function(n){Yk[n[1]]=function(t){return this.$g(t,n[0],n[1])}}),du.extend=function(n,t){return n.$i||(n(t,O1,du),n.$i=!0),du},du.locale=P1,du.isDayjs=k2,du.unix=function(n){return du(1e3*n)},du.en=Sp[ry],du.Ls=Sp,du.p={};const sh=du;var ng=G(71),mN=G(701),yN=G.n(mN),vN=G(593),Zk=G.n(vN),_N={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},wN=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,L1=/\d\d/,lh=/\d\d?/,iy=/\d*[^\s\d-_:/()]+/,Pd={},Xk=function(t){return(t=+t)+(t>68?1900:2e3)},_c=function(t){return function(e){this[t]=+e}},Jk=[/[+-]\d\d:?(\d\d)?|Z/,function(n){(this.zone||(this.zone={})).offset=function(n){if(!n||"Z"===n)return 0;var t=n.match(/([+-]|\d\d)/g),e=60*t[1]+(+t[2]||0);return 0===e?0:"+"===t[0]?-e:e}(n)}],D2=function(t){var e=Pd[t];return e&&(e.indexOf?e:e.s.concat(e.f))},Kk=function(t,e){var a,F=Pd.meridiem;if(F){for(var ee=1;ee<=24;ee+=1)if(t.indexOf(F(ee,0,e))>-1){a=ee>12;break}}else a=t===(e?"pm":"PM");return a},CN={A:[iy,function(n){this.afternoon=Kk(n,!1)}],a:[iy,function(n){this.afternoon=Kk(n,!0)}],S:[/\d/,function(n){this.milliseconds=100*+n}],SS:[L1,function(n){this.milliseconds=10*+n}],SSS:[/\d{3}/,function(n){this.milliseconds=+n}],s:[lh,_c("seconds")],ss:[lh,_c("seconds")],m:[lh,_c("minutes")],mm:[lh,_c("minutes")],H:[lh,_c("hours")],h:[lh,_c("hours")],HH:[lh,_c("hours")],hh:[lh,_c("hours")],D:[lh,_c("day")],DD:[L1,_c("day")],Do:[iy,function(n){var e=Pd.ordinal,a=n.match(/\d+/);if(this.day=a[0],e)for(var T=1;T<=31;T+=1)e(T).replace(/\[|\]/g,"")===n&&(this.day=T)}],M:[lh,_c("month")],MM:[L1,_c("month")],MMM:[iy,function(n){var t=D2("months"),a=(D2("monthsShort")||t.map(function(T){return T.substr(0,3)})).indexOf(n)+1;if(a<1)throw new Error;this.month=a%12||a}],MMMM:[iy,function(n){var e=D2("months").indexOf(n)+1;if(e<1)throw new Error;this.month=e%12||e}],Y:[/[+-]?\d+/,_c("year")],YY:[L1,function(n){this.year=Xk(n)}],YYYY:[/\d{4}/,_c("year")],Z:Jk,ZZ:Jk};const Qk=function(n,t,e){e.p.customParseFormat=!0,n&&n.parseTwoDigitYear&&(Xk=n.parseTwoDigitYear);var a=t.prototype,T=a.parse;a.parse=function(F){var ee=F.date,ce=F.utc,xe=F.args;this.$u=ce;var Re=xe[1];if("string"==typeof Re){var $e=!0===xe[2],ft=!0===xe[3],yt=$e||ft,Ot=xe[2];ft&&(Ot=xe[2]),Pd=this.$locale(),!$e&&Ot&&(Pd=e.Ls[Ot]),this.$d=function(t,e,a){try{if(["x","X"].indexOf(e)>-1)return new Date(("X"===e?1e3:1)*t);var F=function(n){for(var t=(n=function(t,e){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(a,T,F){var ee=F&&F.toUpperCase();return T||e[F]||_N[F]||function(t){return t.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,a,T){return a||T.slice(1)})}(e[ee])})}(n,Pd&&Pd.formats)).match(wN),e=t.length,a=0;a<e;a+=1){var T=t[a],F=CN[T],ce=F&&F[1];t[a]=ce?{regex:F&&F[0],parser:ce}:T.replace(/^\[|\]$/g,"")}return function(xe){for(var Re={},$e=0,ft=0;$e<e;$e+=1){var yt=t[$e];if("string"==typeof yt)ft+=yt.length;else{var Ot=yt.regex,nn=yt.parser,_n=xe.substr(ft),Kn=Ot.exec(_n)[0];nn.call(Re,Kn),xe=xe.replace(Kn,"")}}return function(n){var t=n.afternoon;if(void 0!==t){var e=n.hours;t?e<12&&(n.hours+=12):12===e&&(n.hours=0),delete n.afternoon}}(Re),Re}}(e)(t),ee=F.year,ce=F.month,xe=F.day,Re=F.hours,$e=F.minutes,ft=F.seconds,yt=F.milliseconds,Ot=F.zone,nn=new Date,_n=xe||(ee||ce?1:nn.getDate()),kn=ee||nn.getFullYear(),Kn=0;ee&&!ce||(Kn=ce>0?ce-1:nn.getMonth());var jn=Re||0,Fr=$e||0,ri=ft||0,hi=yt||0;return Ot?new Date(Date.UTC(kn,Kn,_n,jn,Fr,ri,hi+60*Ot.offset*1e3)):a?new Date(Date.UTC(kn,Kn,_n,jn,Fr,ri,hi)):new Date(kn,Kn,_n,jn,Fr,ri,hi)}catch(ma){return new Date("")}}(ee,Re,ce),this.init(),Ot&&!0!==Ot&&(this.$L=this.locale(Ot).$L),yt&&ee!==this.format(Re)&&(this.$d=new Date("")),Pd={}}else if(Re instanceof Array)for(var nn=Re.length,_n=1;_n<=nn;_n+=1){xe[1]=Re[_n-1];var kn=e.apply(this,xe);if(kn.isValid()){this.$d=kn.$d,this.$L=kn.$L,this.init();break}_n===nn&&(this.$d=new Date(""))}else T.call(this,F)}};var ON=G(522),LN=G.n(ON),E2=function(n,t){return(E2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var T in a)a.hasOwnProperty(T)&&(e[T]=a[T])})(n,t)};function C2(n,t){function e(){this.constructor=n}E2(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}function ti(n){var t="function"==typeof Symbol&&n[Symbol.iterator],e=0;return t?t.call(n):{next:function(){return n&&e>=n.length&&(n=void 0),{value:n&&n[e++],done:!n}}}}function eD(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var T,ee,a=e.call(n),F=[];try{for(;(void 0===t||t-- >0)&&!(T=a.next()).done;)F.push(T.value)}catch(ce){ee={error:ce}}finally{try{T&&!T.done&&(e=a.return)&&e.call(a)}finally{if(ee)throw ee.error}}return F}function tD(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(eD(arguments[t]));return n}var RN=function(){function n(){}return n.prototype.next=function(){return{done:!0,value:null}},n}(),nD=function(){function n(){}return n.prototype[Symbol.iterator]=function(){return new RN},n}(),FN=function(){function n(){this.index=0}return n.prototype.next=function(){return{done:!1,value:this.index++}},n}(),S2=function(){function n(){}return n.prototype[Symbol.iterator]=function(){return new FN},n}(),NN=function(){function n(t){this.iterators=t}return n.prototype.next=function(){if(0===this.iterators.length)return{done:!0,value:[]};var ee,ce,t=[];try{for(var e=ti(this.iterators),a=e.next();!a.done;a=e.next()){var F=a.value.next();if(F.done)return{done:!0,value:[]};t.push(F.value)}}catch(xe){ee={error:xe}}finally{try{a&&!a.done&&(ce=e.return)&&ce.call(e)}finally{if(ee)throw ee.error}}return{done:!1,value:t}},n}(),ay=function(){function n(t){this.iterables=t}return n.prototype[Symbol.iterator]=function(){var F,ee,t=[];try{for(var e=ti(this.iterables),a=e.next();!a.done;a=e.next())t.push(a.value[Symbol.iterator]())}catch(ce){F={error:ce}}finally{try{a&&!a.done&&(ee=e.return)&&ee.call(e)}finally{if(F)throw F.error}}return new NN(t)},n}(),zN=function(){function n(t,e){this.index=0,this.iterator=t,this.selector=e}return n.prototype.next=function(){var t=this.iterator.next();return t.done?{done:!0}:{done:!1,value:this.selector(t.value,this.index++)}},n}(),Eu=function(){function n(t,e){this.iterable=t,this.selector=e}return n.prototype[Symbol.iterator]=function(){var t=this.iterable[Symbol.iterator]();return new zN(t,this.selector)},n}(),BN=function(){function n(t,e){this.index=0,this.iterator=t,this.selector=e,this.outputIterator=null}return n.prototype.next=function(){for(;;){if(null===this.outputIterator){var t=this.iterator.next();if(t.done)return{done:!0};var e=this.selector(t.value,this.index++);this.outputIterator=e[Symbol.iterator]()}var a=this.outputIterator.next();if(!a.done)return a;this.outputIterator=null}},n}(),rD=function(){function n(t,e){this.iterable=t,this.selector=e}return n.prototype[Symbol.iterator]=function(){var t=this.iterable[Symbol.iterator]();return new BN(t,this.selector)},n}(),jN=function(){function n(t,e){this.childIterator=t,this.numElements=e}return n.prototype.next=function(){return this.numElements<=0?{done:!0}:(--this.numElements,this.childIterator.next())},n}(),rg=function(){function n(t,e){this.childIterable=t,this.numElements=e}return n.prototype[Symbol.iterator]=function(){var t=this.childIterable[Symbol.iterator]();return new jN(t,this.numElements)},n}(),VN=function(){function n(t,e){this.done=!1,this.childIterator=t,this.predicate=e}return n.prototype.next=function(){if(!this.done){var t=this.childIterator.next();if(t.done)this.done=!0;else{if(this.predicate(t.value))return t;this.done=!0}}return{done:!0}},n}(),hf=function(){function n(t,e){this.childIterable=t,this.predicate=e}return n.prototype[Symbol.iterator]=function(){var t=this.childIterable[Symbol.iterator]();return new VN(t,this.predicate)},n}(),UN=function(){function n(t,e){this.childIterator=t,this.predicate=e}return n.prototype.next=function(){for(;;){var t=this.childIterator.next();if(t.done||this.predicate(t.value))return t}},n}(),R1=function(){function n(t,e){this.childIterable=t,this.predicate=e}return n.prototype[Symbol.iterator]=function(){var t=this.childIterable[Symbol.iterator]();return new UN(t,this.predicate)},n}(),HN=function(){function n(t){this.curIterator=null,this.iterables=t,this.iterator=t[Symbol.iterator](),this.moveToNextIterable()}return n.prototype.moveToNextIterable=function(){var t=this.iterator.next();this.curIterator=t.done?null:t.value[Symbol.iterator]()},n.prototype.next=function(){for(;;){if(null==this.curIterator)return{done:!0};var t=this.curIterator.next();if(!t.done)return t;this.moveToNextIterable()}},n}(),F1=function(){function n(t){this.iterables=t}return n.prototype[Symbol.iterator]=function(){return new HN(this.iterables)},n}(),GN=function(){function n(t,e,a){this.iterable=t,this.period=e,this.whichIndex=a}return n.prototype.next=function(){this.iterator||(this.iterator=this.iterable[Symbol.iterator]());for(var t=[],e=0;e<this.period;++e){var a=this.iterator.next();if(a.done)break;t.push(a.value)}if(0===t.length)return{done:!0};var T=new ml({pairs:t});return{value:[this.whichIndex===Pp.Start?T.getIndex().first():T.getIndex().last(),T],done:!1}},n}(),qN=function(){function n(t,e,a){this.iterable=t,this.period=e,this.whichIndex=a}return n.prototype[Symbol.iterator]=function(){return new GN(this.iterable,this.period,this.whichIndex)},n}(),N1=function(){function n(t){this.index=0,this.arr=t}return n.prototype.next=function(){return this.index<this.arr.length?{done:!1,value:this.arr[this.index++]}:{done:!0}},n}(),ig=function(){function n(t){this.iterable=t}return n.prototype[Symbol.iterator]=function(){var F,ee,t=[];try{for(var e=ti(this.iterable),a=e.next();!a.done;a=e.next())t.push(a.value)}catch(ce){F={error:ce}}finally{try{a&&!a.done&&(ee=e.return)&&ee.call(e)}finally{if(F)throw F.error}}return t.reverse(),new N1(t)},n}(),WN=function(){function n(t,e){this.iterators=t.map(function(a){return a[Symbol.iterator]()}),this.zipper=e}return n.prototype.next=function(){var t=this.iterators.map(function(Re){return Re.next()});try{for(var e=ti(t),a=e.next();!a.done;a=e.next())if(a.value.done)return{done:!0}}catch(Re){ce={error:Re}}finally{try{a&&!a.done&&(xe=e.return)&&xe.call(e)}finally{if(ce)throw ce.error}}var ce,xe,F=t.map(function(Re){return Re.value}),ee=new ml(F);return{done:!1,value:this.zipper(ee)}},n}(),iD=function(){function n(t,e){this.iterables=t,this.zipper=e}return n.prototype[Symbol.iterator]=function(){return new WN(this.iterables,this.zipper)},n}(),$N=function(){function n(t,e){this.valuesAlreadySeen=new Set,this.iterator=t[Symbol.iterator](),this.selector=e}return n.prototype.next=function(){for(;;){var t=this.iterator.next();if(t.done)return{done:!0};var e;if(e=this.selector?this.selector(t.value):t.value,!this.valuesAlreadySeen.has(e))return this.valuesAlreadySeen.add(e),{done:!1,value:t.value}}},n}(),z1=function(){function n(t,e){this.iterable=t,this.selector=e}return n.prototype[Symbol.iterator]=function(){return new $N(this.iterable,this.selector)},n}(),YN=function(){function n(t,e,a){this.iterable=t,this.period=e,this.whichIndex=a}return n.prototype.next=function(){if(this.curWindow){if(this.curWindow.shift(),(e=this.iterator.next()).done)return{done:!0};this.curWindow.push(e.value)}else{this.curWindow=[],this.iterator=this.iterable[Symbol.iterator]();for(var t=0;t<this.period;++t){var e;if((e=this.iterator.next()).done)return{done:!0};this.curWindow.push(e.value)}}var a=new ml({pairs:this.curWindow});return{value:[this.whichIndex===Pp.Start?a.getIndex().first():a.getIndex().last(),a],done:!1}},n}(),ZN=function(){function n(t,e,a){this.iterable=t,this.period=e,this.whichIndex=a}return n.prototype[Symbol.iterator]=function(){return new YN(this.iterable,this.period,this.whichIndex)},n}(),XN=function(){function n(t,e){this.iterator=t[Symbol.iterator](),this.nextValue=this.iterator.next(),this.comparer=e}return n.prototype.next=function(){if(this.nextValue.done)return{done:!0};for(var t=[this.nextValue.value],e=this.nextValue.value;this.nextValue=this.iterator.next(),!this.nextValue.done;){if(!this.comparer(e[1],this.nextValue.value[1])){e=this.nextValue.value;break}t.push(this.nextValue.value),e=this.nextValue.value}return{value:new ml({pairs:t}),done:!1}},n}(),JN=function(){function n(t,e){this.iterable=t,this.comparer=e}return n.prototype[Symbol.iterator]=function(){return new XN(this.iterable,this.comparer)},n}(),df=(()=>(function(n){n[n.Ascending=0]="Ascending",n[n.Descending=1]="Descending"}(df||(df={})),df))(),KN=function(){function n(t,e){this.values=t,this.sortSpec=e,this.keys=[]}return n.prototype.genKeys=function(){var F,ee;if(!(this.keys.length>0))try{for(var e=ti(this.values),a=e.next();!a.done;a=e.next())this.keys.push(this.sortSpec.selector(a.value,0))}catch(ce){F={error:ce}}finally{try{a&&!a.done&&(ee=e.return)&&ee.call(e)}finally{if(F)throw F.error}}},n.prototype.compare=function(t,e){this.genKeys();var a=this.keys[t],T=this.keys[e],F=-1;return a===T?F=0:a>T&&(F=1),this.sortSpec.direction===df.Descending?-F:F},n}(),B1=function(){function n(t,e){this.iterable=t,this.sortSpec=e}return n.prototype[Symbol.iterator]=function(){var t=[],e=[],a=0;try{for(var T=ti(this.iterable),F=T.next();!F.done;F=T.next()){var ee=F.value;t.push(a),e.push(ee),++a}}catch(hi){_n={error:hi}}finally{try{F&&!F.done&&(kn=T.return)&&kn.call(T)}finally{if(_n)throw _n.error}}var ce=[];try{for(var xe=ti(this.sortSpec),Re=xe.next();!Re.done;Re=xe.next())ce.push(new KN(e,Re.value))}catch(hi){Kn={error:hi}}finally{try{Re&&!Re.done&&(jn=xe.return)&&jn.call(xe)}finally{if(Kn)throw Kn.error}}ce[0].genKeys(),t.sort(function(hi,ma){try{for(var lo=ti(ce),bo=lo.next();!bo.done;bo=lo.next()){var vl=bo.value.compare(hi,ma);if(0!==vl)return vl}}catch(al){il={error:al}}finally{try{bo&&!bo.done&&(Oa=lo.return)&&Oa.call(lo)}finally{if(il)throw il.error}}return 0;var il,Oa});var _n,kn,Kn,jn,Fr,ri,ft=[];try{for(var yt=ti(t),Ot=yt.next();!Ot.done;Ot=yt.next())ft.push(e[Ot.value])}catch(hi){Fr={error:hi}}finally{try{Ot&&!Ot.done&&(ri=yt.return)&&ri.call(yt)}finally{if(Fr)throw Fr.error}}return new N1(ft)},n}(),QN=function(){function n(t,e){this.iterator=t,this.extractIndex=e}return n.prototype.next=function(){var t=this.iterator.next();return t.done?t:{done:!1,value:t.value[this.extractIndex]}},n}(),j1=function(){function n(t,e){this.arrayIterable=t,this.extractIndex=e}return n.prototype[Symbol.iterator]=function(){var t=this.arrayIterable[Symbol.iterator]();return new QN(t,this.extractIndex)},n}(),ez=function(){function n(t,e){this.iterator=t,this.numValues=e}return n.prototype.next=function(){for(;--this.numValues>=0;){var t=this.iterator.next();if(t.done)return t}return this.iterator.next()},n}(),ag=function(){function n(t,e){this.iterable=t,this.numValues=e}return n.prototype[Symbol.iterator]=function(){var t=this.iterable[Symbol.iterator]();return new ez(t,this.numValues)},n}(),tz=function(){function n(t,e){this.doneSkipping=!1,this.childIterator=t,this.predicate=e}return n.prototype.next=function(){for(;;){var t=this.childIterator.next();if(t.done)return t;if(this.doneSkipping||!this.predicate(t.value))return this.doneSkipping=!0,t}},n}(),pf=function(){function n(t,e){this.childIterable=t,this.predicate=e}return n.prototype[Symbol.iterator]=function(){var t=this.childIterable[Symbol.iterator]();return new tz(t,this.predicate)},n}(),nz=function(){function n(t,e,a){this.columnNames=t,this.iterable=e,this.period=a}return n.prototype.next=function(){this.iterator||(this.iterator=this.iterable[Symbol.iterator]());for(var t=[],e=0;e<this.period;++e){var a=this.iterator.next();if(a.done)break;t.push(a.value)}return 0===t.length?{done:!0}:{value:new Cu({columnNames:this.columnNames,pairs:t}),done:!1}},n}(),rz=function(){function n(t,e,a){this.columnNames=t,this.iterable=e,this.period=a}return n.prototype[Symbol.iterator]=function(){return new nz(this.columnNames,this.iterable,this.period)},n}(),iz=function(){function n(t,e){this.index=0,this.columnNames=Array.from(t),this.rowsIterator=e[Symbol.iterator]()}return n.prototype.next=function(){var t=this.rowsIterator.next();if(t.done)return{done:!0};for(var e=t.value,a={},T=0;T<this.columnNames.length;++T)a[this.columnNames[T]]=e[T];return{done:!1,value:a}},n}(),aD=function(){function n(t,e){this.columnNames=t,this.rows=e}return n.prototype[Symbol.iterator]=function(){return new iz(this.columnNames,this.rows)},n}(),az=function(){function n(t,e,a){this.columnNames=t,this.iterable=e,this.period=a}return n.prototype.next=function(){if(this.curWindow){if(this.curWindow.shift(),(e=this.iterator.next()).done)return{done:!0};this.curWindow.push(e.value)}else{this.curWindow=[],this.iterator=this.iterable[Symbol.iterator]();for(var t=0;t<this.period;++t){var e;if((e=this.iterator.next()).done)return{done:!0};this.curWindow.push(e.value)}}return{value:new Cu({columnNames:this.columnNames,pairs:this.curWindow}),done:!1}},n}(),oz=function(){function n(t,e,a){this.columnNames=t,this.iterable=e,this.period=a}return n.prototype[Symbol.iterator]=function(){return new az(this.columnNames,this.iterable,this.period)},n}(),sz=function(){function n(t,e,a){this.columnNames=t,this.iterator=e[Symbol.iterator](),this.nextValue=this.iterator.next(),this.comparer=a}return n.prototype.next=function(){if(this.nextValue.done)return{done:!0};for(var t=[this.nextValue.value],e=this.nextValue.value;this.nextValue=this.iterator.next(),!this.nextValue.done;){if(!this.comparer(e[1],this.nextValue.value[1])){e=this.nextValue.value;break}t.push(this.nextValue.value),e=this.nextValue.value}return{value:new Cu({columnNames:this.columnNames,pairs:t}),done:!1}},n}(),lz=function(){function n(t,e,a){this.columnNames=t,this.iterable=e,this.comparer=a}return n.prototype[Symbol.iterator]=function(){return new sz(this.columnNames,this.iterable,this.comparer)},n}(),uz=function(){function n(t,e){this.repetition=0,this.iterator=t[Symbol.iterator](),this.count=e,this.result=this.iterator.next()}return n.prototype.next=function(){return 0==this.count?{done:!0}:(this.repetition==this.count&&(this.result=this.iterator.next(),this.repetition=0),this.repetition+=1,this.result.done?{done:!0}:{done:!1,value:this.result.value})},n}(),cz=function(){function n(t,e){this.iterable=t,this.count=e}return n.prototype[Symbol.iterator]=function(){return new uz(this.iterable,this.count)},n}(),fz=function(){function n(t,e){this.count=0,this.repetition=0,this.firstIteration=!0,this.iterable=t,this.iterator=t[Symbol.iterator](),this.count=e}return n.prototype.next=function(){var t=this.iterator.next();return this.firstIteration&&t.done?{done:!0}:(this.firstIteration=!1,t.done&&(this.repetition+=1,this.iterator=this.iterable[Symbol.iterator](),t=this.iterator.next()),this.repetition<this.count?{done:!1,value:t.value}:{done:!0})},n}(),hz=function(){function n(t,e){this.iterable=t,this.count=e}return n.prototype[Symbol.iterator]=function(){return new fz(this.iterable,this.count)},n}(),dz=function(){function n(t){this.iteratorIndex=0,this.iterators=t.map(function(e){return e[Symbol.iterator]()})}return n.prototype.next=function(){if(this.iterators.length>0){for(var t=this.iterators[this.iteratorIndex].next();t.done;){if(this.iteratorIndex+=1,!(this.iteratorIndex<this.iterators.length))return{done:!0};t=this.iterators[this.iteratorIndex].next()}return{done:!1,value:t.value}}return{done:!0}},n}(),pz=function(){function n(t){this.iterables=t}return n.prototype[Symbol.iterator]=function(){return new dz(this.iterables)},n}(),gz=function(){function n(t,e){this.columnNamesIterator=null,this.values=t,this.considerAllRows=e}return n.prototype.next=function(){if(null===this.columnNamesIterator)if(this.considerAllRows){var t={};try{for(var e=ti(this.values),a=e.next();!a.done;a=e.next()){var T=a.value;try{for(var F=ti(Object.keys(T)),ee=F.next();!ee.done;ee=F.next())t[ee.value]=!0}catch(nn){yt={error:nn}}finally{try{ee&&!ee.done&&(Ot=F.return)&&Ot.call(F)}finally{if(yt)throw yt.error}}}}catch(nn){$e={error:nn}}finally{try{a&&!a.done&&(ft=e.return)&&ft.call(e)}finally{if($e)throw $e.error}}this.columnNamesIterator=new N1(Object.keys(t))}else{var Re=this.values[Symbol.iterator]().next();if(Re.done)return{done:!0,value:""};this.columnNamesIterator=new N1(Object.keys(Re.value))}return this.columnNamesIterator.next();var $e,ft,yt,Ot},n}(),oD=function(){function n(t,e){this.values=t,this.considerAllRows=e}return n.prototype[Symbol.iterator]=function(){return new gz(this.values,this.considerAllRows)},n}();function I2(n,t){var xe,Re,e={},a=[];try{for(var T=ti(n),F=T.next();!F.done;F=T.next()){var ee=F.value,ce=t&&t(ee)||ee;e[ce]||(e[ce]=!0,a.push(ee))}}catch($e){xe={error:$e}}finally{try{F&&!F.done&&(Re=T.return)&&Re.call(T)}finally{if(xe)throw xe.error}}return a}function Ip(n,t,e){var xe,Re,a={};try{for(var T=ti(n),F=T.next();!F.done;F=T.next()){var ee=F.value;a[t(ee)]=e(ee)}}catch($e){xe={error:$e}}finally{try{F&&!F.done&&(Re=T.return)&&Re.call(T)}finally{if(xe)throw xe.error}}return a}function sD(n){return void 0===n?"undefined":Cs(n)?"number":Mo(n)?"string":n instanceof Date?"date":function(n){return(0,ng.ZP)(n).isBoolean}(n)?"boolean":"unsupported"}function Yu(n){return(0,ng.ZP)(n).isObject&&!P2(n)}function xi(n){return(0,ng.ZP)(n).isFunction}function Mo(n){return(0,ng.ZP)(n).isString}function P2(n){return"[object Date]"===Object.prototype.toString.call(n)}function Cs(n){return(0,ng.ZP)(n).isNumber}function ls(n){return(0,ng.ZP)(n).isArray}function O2(n){return void 0===n}var Cu=function(){function n(t){this.configFn=null,this.content=null,this.indexedContent=null,t?xi(t)?this.configFn=t:this.content=ls(t)||xi(t[Symbol.iterator])?n.initFromArray(t):n.initFromConfig(t):this.content=n.initEmpty()}return n.initFromArray=function(t){var e=t[Symbol.iterator]().next(),a=e.done?[]:Object.keys(e.value);return{index:n.defaultCountIterable,values:t,pairs:new ay([n.defaultCountIterable,t]),isBaked:!0,columnNames:a}},n.initEmpty=function(){return{index:n.defaultEmptyIterable,values:n.defaultEmptyIterable,pairs:n.defaultEmptyIterable,isBaked:!0,columnNames:[]}},n.initColumnNames=function(t,e){var a=[],T={},F=Array.from(t).map(function(jn){return jn.toString()});try{for(var ee=ti(F),ce=ee.next();!ce.done;ce=ee.next()){var xe=ce.value;void 0===T[Re=void 0!==e&&e?xe:xe.toLowerCase()]?T[Re]=1:T[Re]+=1}}catch(jn){nn={error:jn}}finally{try{ce&&!ce.done&&(_n=ee.return)&&_n.call(ee)}finally{if(nn)throw nn.error}}var nn,_n,kn,Kn,$e={};try{for(var ft=ti(F),yt=ft.next();!yt.done;yt=ft.next()){var Re;if(xe=yt.value,T[Re=void 0!==e&&e?xe:xe.toLowerCase()]>1){var Ot=1;void 0!==$e[Re]&&(Ot=$e[Re]),a.push(xe+"."+Ot),$e[Re]=Ot+1}else a.push(xe)}}catch(jn){kn={error:jn}}finally{try{yt&&!yt.done&&(Kn=ft.return)&&Kn.call(ft)}finally{if(kn)throw kn.error}}return a},n.checkIterable=function(t,e){if(!ls(t)&&!xi(t[Symbol.iterator]))throw new Error("Expected '"+e+"' field of DataFrame config object to be an array of values or an iterable of values.")},n.initFromConfig=function(t){var e,a,T,ee,Ot,nn,F=!1;if(t.pairs&&(n.checkIterable(t.pairs,"pairs"),T=t.pairs),t.columns){var ce=t.columns;if(ls(ce)||xi(ce[Symbol.iterator])){var xe=ce;ee=Array.from(xe).map(function(_n){return _n.name}),ce=Ip(xe,function(_n){return _n.name},function(_n){return _n.series})}else{if(!Yu(ce))throw new Error("Expected 'columns' member of 'config' parameter to DataFrame constructor to be an object with fields that define columns.");ee=Object.keys(ce)}var Re=[];try{for(var $e=ti(ee),ft=$e.next();!ft.done;ft=$e.next()){var yt=ft.value;n.checkIterable(ce[yt],yt),Re.push(ce[yt])}}catch(_n){Ot={error:_n}}finally{try{ft&&!ft.done&&(nn=$e.return)&&nn.call($e)}finally{if(Ot)throw Ot.error}}a=new aD(ee,new ay(Re))}else t.columnNames&&(ee=this.initColumnNames(t.columnNames,t.caseSensitive)),t.rows?(t.columnNames||(ee=new Eu(new S2,function(_n){return"Column."+_n.toString()})),n.checkIterable(t.rows,"rows"),a=new aD(ee,t.rows)):t.values?(n.checkIterable(t.values,"values"),a=t.values,t.columnNames||(ee=new oD(a,t.considerAllRows||!1))):T?(a=new j1(T,1),t.columnNames||(ee=new oD(a,t.considerAllRows||!1))):(a=n.defaultEmptyIterable,t.columnNames||(ee=n.defaultEmptyIterable));return t.index?(n.checkIterable(t.index,"index"),e=t.index):e=T?new j1(T,0):n.defaultCountIterable,T||(T=new ay([e,a])),void 0!==t.baked&&(F=t.baked),{index:e,values:a,pairs:T,isBaked:F,columnNames:ee}},n.prototype.lazyInit=function(){null===this.content&&null!==this.configFn&&(this.content=n.initFromConfig(this.configFn()))},n.prototype.getContent=function(){return this.lazyInit(),this.content},n.prototype.getRowByIndex=function(t){if(!this.indexedContent){this.indexedContent=new Map;try{for(var e=ti(this.getContent().pairs),a=e.next();!a.done;a=e.next()){var T=a.value;this.indexedContent.set(T[0],T[1])}}catch(ce){F={error:ce}}finally{try{a&&!a.done&&(ee=e.return)&&ee.call(e)}finally{if(F)throw F.error}}}return this.indexedContent.get(t);var F,ee},n.prototype[Symbol.iterator]=function(){return this.getContent().values[Symbol.iterator]()},n.prototype.getColumnNames=function(){return Array.from(this.getContent().columnNames)},n.prototype.getColumns=function(){var t=this;return new ml(function(){return{values:t.getColumnNames().map(function(a){var T=t.getSeries(a).skipWhile(function(ee){return null==ee});return{name:a,type:sD(T.any()?T.first():void 0),series:T}})}})},n.prototype.cast=function(){return this},n.prototype.getIndex=function(){var t=this;return new cD(function(){return{values:t.getContent().index}})},n.prototype.setIndex=function(t){if(!Mo(t))throw new Error("Expected 'columnName' parameter to 'DataFrame.setIndex' to be a string that specifies the name of the column to set as the index for the dataframe.");return this.withIndex(this.getSeries(t))},n.prototype.withIndex=function(t){var e=this;return xi(t)?new n(function(){var a=e.getContent();return{columnNames:a.columnNames,values:a.values,index:e.deflate(t)}}):(n.checkIterable(t,"newIndex"),new n(function(){var a=e.getContent();return{columnNames:a.columnNames,values:a.values,index:t}}))},n.prototype.resetIndex=function(){var t=this;return new n(function(){var e=t.getContent();return{columnNames:e.columnNames,values:e.values}})},n.prototype.getSeries=function(t){var e=this;if(!Mo(t))throw new Error("Expected 'columnName' parameter to 'DataFrame.getSeries' function to be a string that specifies the name of the column to retreive.");return new ml(function(){return{values:new Eu(e.getContent().values,function(a){return a[t]}),index:e.getContent().index}})},n.prototype.hasSeries=function(t){var ee,ce,e=t.toLowerCase();try{for(var a=ti(this.getColumnNames()),T=a.next();!T.done;T=a.next())if(T.value.toLowerCase()===e)return!0}catch(xe){ee={error:xe}}finally{try{T&&!T.done&&(ce=a.return)&&ce.call(a)}finally{if(ee)throw ee.error}}return!1},n.prototype.expectSeries=function(t){if(!this.hasSeries(t))throw new Error("Expected dataframe to contain series with column name: '"+t+"'.");return this.getSeries(t)},n.prototype.withSeries=function(t,e){var a=this;if(Yu(t)){if(!O2(e))throw new Error("Expected 'series' parameter to 'DataFrame.withSeries' to not be set when 'columnNameOrSpec is an object.")}else{if(!Mo(t))throw new Error("Expected 'columnNameOrSpec' parameter to 'DataFrame.withSeries' function to be a string that specifies the column to set or replace.");if(!xi(e)&&!Yu(e))throw new Error("Expected 'series' parameter to 'DataFrame.withSeries' to be a Series object or a function that takes a dataframe and produces a Series.")}if(Yu(t)){var T=t,F=Object.keys(T),ee=this;try{for(var ce=ti(F),xe=ce.next();!xe.done;xe=ce.next()){var Re=xe.value;ee=ee.withSeries(Re,T[Re])}}catch(nn){yt={error:nn}}finally{try{xe&&!xe.done&&(Ot=ce.return)&&Ot.call(ce)}finally{if(yt)throw yt.error}}return ee.cast()}var yt,Ot,$e=t;return this.none()?(xi(e)?e(this):e).inflate(function(nn){var _n={};return _n[$e]=nn,_n}).cast():new n(function(){var _n=function(n,t,e){var ce,xe,a=new Map;try{for(var T=ti(n),F=T.next();!F.done;F=T.next()){var ee=F.value;a.set(ee[0],e(ee))}}catch(Re){ce={error:Re}}finally{try{F&&!F.done&&(xe=T.return)&&xe.call(T)}finally{if(ce)throw ce.error}}return a}((xi(e)?e(a):e).toPairs(),0,function(Kn){return Kn[1]});return{columnNames:I2(a.getColumnNames().concat([$e])),index:a.getContent().index,pairs:new Eu(a.getContent().pairs,function(Kn){var jn=Kn[0],ri=Object.assign({},Kn[1]);return ri[$e]=_n.get(jn),[jn,ri]})}})},n.merge=function(t){var e=new Map;try{for(var a=ti(t),T=a.next();!T.done;T=a.next()){var F=T.value;try{for(var ee=ti(F.toPairs()),ce=ee.next();!ce.done;ce=ee.next()){var xe=ce.value,Re=xe[0];if(e.has(Re))e.set(Re,Object.assign(e.get(Re),xe[1]));else{var $e=Object.assign({},xe[1]);e.set(Re,$e)}}}catch(jn){kn={error:jn}}finally{try{ce&&!ce.done&&(Kn=ee.return)&&Kn.call(ee)}finally{if(kn)throw kn.error}}}}catch(jn){nn={error:jn}}finally{try{T&&!T.done&&(_n=a.return)&&_n.call(a)}finally{if(nn)throw nn.error}}var nn,_n,kn,Kn,yt=I2(Array.from(t).map(function(jn){return jn.getColumnNames()}).reduce(function(jn,Fr){return jn.concat(Fr)},[])),Ot=Array.from(e.keys()).map(function(jn){return[jn,e.get(jn)]});return Ot.sort(function(jn,Fr){return jn[0]===Fr[0]?0:jn[0]>Fr[0]?1:-1}),new n({columnNames:yt,pairs:Ot})},n.prototype.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.merge([this].concat(t))},n.prototype.ensureSeries=function(t,e){if(Yu(t)){if(!O2(e))throw new Error("Expected 'series' parameter to 'DataFrame.ensureSeries' to not be set when 'columnNameOrSpec is an object.")}else{if(!Mo(t))throw new Error("Expected 'columnNameOrSpec' parameter to 'DataFrame.ensureSeries' function to be a string that specifies the column to set or replace.");if(!xi(e)&&!Yu(e))throw new Error("Expected 'series' parameter to 'DataFrame.ensureSeries' to be a Series object or a function that takes a dataframe and produces a Series.")}if(Yu(t)){var a=t,T=Object.keys(t),F=this;try{for(var ee=ti(T),ce=ee.next();!ce.done;ce=ee.next()){var xe=ce.value;F=F.ensureSeries(xe,a[xe])}}catch(yt){$e={error:yt}}finally{try{ce&&!ce.done&&(ft=ee.return)&&ft.call(ee)}finally{if($e)throw $e.error}}return F}var $e,ft,Re=t;return this.hasSeries(Re)?this:this.withSeries(Re,e)},n.prototype.subset=function(t){var e=this;if(!ls(t))throw new Error("Expected 'columnNames' parameter to 'DataFrame.subset' to be an array of column names to keep.");return new n(function(){var a=e.getContent();return{columnNames:t,index:a.index,values:new Eu(a.values,function(T){var Re,$e,F={};try{for(var ee=ti(t),ce=ee.next();!ce.done;ce=ee.next()){var xe=ce.value;F[xe]=T[xe]}}catch(ft){Re={error:ft}}finally{try{ce&&!ce.done&&($e=ee.return)&&$e.call(ee)}finally{if(Re)throw Re.error}}return F}),pairs:new Eu(a.pairs,function(T){var $e,ft,F={},ee=T[1];try{for(var ce=ti(t),xe=ce.next();!xe.done;xe=ce.next()){var Re=xe.value;F[Re]=ee[Re]}}catch(yt){$e={error:yt}}finally{try{xe&&!xe.done&&(ft=ce.return)&&ft.call(ce)}finally{if($e)throw $e.error}}return[T[0],F]})}})},n.prototype.dropSeries=function(t){var e=this;if(!ls(t)){if(!Mo(t))throw new Error("'DataFrame.dropSeries' expected either a string or an array or strings.");t=[t]}return new n(function(){var xe,Re,a=e.getContent(),T=[];try{for(var F=ti(a.columnNames),ee=F.next();!ee.done;ee=F.next()){var ce=ee.value;-1===t.indexOf(ce)&&T.push(ce)}}catch($e){xe={error:$e}}finally{try{ee&&!ee.done&&(Re=F.return)&&Re.call(F)}finally{if(xe)throw xe.error}}return{columnNames:T,index:a.index,values:new Eu(a.values,function($e){var _n,kn,ft=Object.assign({},$e);try{for(var yt=ti(t),Ot=yt.next();!Ot.done;Ot=yt.next())delete ft[Ot.value]}catch(Kn){_n={error:Kn}}finally{try{Ot&&!Ot.done&&(kn=yt.return)&&kn.call(yt)}finally{if(_n)throw _n.error}}return ft}),pairs:new Eu(a.pairs,function($e){var _n,kn,ft=Object.assign({},$e[1]);try{for(var yt=ti(t),Ot=yt.next();!Ot.done;Ot=yt.next())delete ft[Ot.value]}catch(Kn){_n={error:Kn}}finally{try{Ot&&!Ot.done&&(kn=yt.return)&&kn.call(yt)}finally{if(_n)throw _n.error}}return[$e[0],ft]})}})},n.prototype.reorderSeries=function(t){var ee,ce,e=this;if(!ls(t))throw new Error("Expected parameter 'columnNames' to 'DataFrame.reorderSeries' to be an array with column names.");try{for(var a=ti(t),T=a.next();!T.done;T=a.next())if(!Mo(T.value))throw new Error("Expected parameter 'columnNames' to 'DataFrame.reorderSeries' to be an array with column names.")}catch(xe){ee={error:xe}}finally{try{T&&!T.done&&(ce=a.return)&&ce.call(a)}finally{if(ee)throw ee.error}}return new n(function(){var xe=e.getContent();return{columnNames:t,index:xe.index,values:new Eu(xe.values,function(Re){var nn,_n,$e={};try{for(var ft=ti(t),yt=ft.next();!yt.done;yt=ft.next()){var Ot=yt.value;$e[Ot]=Re[Ot]}}catch(kn){nn={error:kn}}finally{try{yt&&!yt.done&&(_n=ft.return)&&_n.call(ft)}finally{if(nn)throw nn.error}}return $e}),pairs:new Eu(xe.pairs,function(Re){var _n,kn,$e=Re[1],ft={};try{for(var yt=ti(t),Ot=yt.next();!Ot.done;Ot=yt.next()){var nn=Ot.value;ft[nn]=$e[nn]}}catch(Kn){_n={error:Kn}}finally{try{Ot&&!Ot.done&&(kn=yt.return)&&kn.call(yt)}finally{if(_n)throw _n.error}}return[Re[0],ft]})}})},n.prototype.bringToFront=function(t){var ee,ce,e=this;if(ls(t))try{for(var a=ti(t),T=a.next();!T.done;T=a.next())if(!Mo(T.value))throw new Error("Expect 'columnOrColumns' parameter to 'DataFrame.bringToFront' function to specify a column or columns via a string or an array of strings.")}catch(xe){ee={error:xe}}finally{try{T&&!T.done&&(ce=a.return)&&ce.call(a)}finally{if(ee)throw ee.error}}else{if(!Mo(t))throw new Error("Expect 'columnOrColumns' parameter to 'DataFrame.bringToFront' function to specify a column or columns via a string or an array of strings.");t=[t]}return new n(function(){var xe=e.getContent(),Re=Array.from(xe.columnNames),$e=[];try{for(var ft=ti(t),yt=ft.next();!yt.done;yt=ft.next()){var Ot=yt.value;-1!==Re.indexOf(Ot)&&$e.push(Ot)}}catch(ma){jn={error:ma}}finally{try{yt&&!yt.done&&(Fr=ft.return)&&Fr.call(ft)}finally{if(jn)throw jn.error}}var jn,Fr,ri,hi,nn=[];try{for(var _n=ti(Re),kn=_n.next();!kn.done;kn=_n.next()){var Kn=kn.value;-1===t.indexOf(Kn)&&nn.push(Kn)}}catch(ma){ri={error:ma}}finally{try{kn&&!kn.done&&(hi=_n.return)&&hi.call(_n)}finally{if(ri)throw ri.error}}return{columnNames:$e.concat(nn),index:xe.index,values:xe.values,pairs:xe.pairs}})},n.prototype.bringToBack=function(t){var ee,ce,e=this;if(ls(t))try{for(var a=ti(t),T=a.next();!T.done;T=a.next())if(!Mo(T.value))throw new Error("Expect 'columnOrColumns' parameter to 'DataFrame.bringToBack' function to specify a column or columns via a string or an array of strings.")}catch(xe){ee={error:xe}}finally{try{T&&!T.done&&(ce=a.return)&&ce.call(a)}finally{if(ee)throw ee.error}}else{if(!Mo(t))throw new Error("Expect 'columnOrColumns' parameter to 'DataFrame.bringToBack' function to specify a column or columns via a string or an array of strings.");t=[t]}return new n(function(){var xe=e.getContent(),Re=Array.from(xe.columnNames),$e=[];try{for(var ft=ti(t),yt=ft.next();!yt.done;yt=ft.next()){var Ot=yt.value;-1!==Re.indexOf(Ot)&&$e.push(Ot)}}catch(ma){jn={error:ma}}finally{try{yt&&!yt.done&&(Fr=ft.return)&&Fr.call(ft)}finally{if(jn)throw jn.error}}var jn,Fr,ri,hi,nn=[];try{for(var _n=ti(Re),kn=_n.next();!kn.done;kn=_n.next()){var Kn=kn.value;-1===t.indexOf(Kn)&&nn.push(Kn)}}catch(ma){ri={error:ma}}finally{try{kn&&!kn.done&&(hi=_n.return)&&hi.call(_n)}finally{if(ri)throw ri.error}}return{columnNames:nn.concat($e),index:xe.index,values:xe.values,pairs:xe.pairs}})},n.prototype.renameSeries=function(t){var e=this;if(!Yu(t))throw new Error("Expected parameter 'newColumnNames' to 'DataFrame.renameSeries' to be an array with column names.");var ce,xe,a=Object.keys(t);try{for(var T=ti(a),F=T.next();!F.done;F=T.next()){var ee=F.value;if(!Mo(ee))throw new Error("Expected existing column name '"+ee+"' of 'newColumnNames' parameter to 'DataFrame.renameSeries' to be a string.");if(!Mo(t[ee]))throw new Error("Expected new column name '"+t[ee]+"' for existing column '"+ee+"' of 'newColumnNames' parameter to 'DataFrame.renameSeries' to be a string.")}}catch(Re){ce={error:Re}}finally{try{F&&!F.done&&(xe=T.return)&&xe.call(T)}finally{if(ce)throw ce.error}}return new n(function(){var kn,Kn,Re=e.getContent(),$e=[];try{for(var ft=ti(Re.columnNames),yt=ft.next();!yt.done;yt=ft.next()){var Ot=yt.value,nn=a.indexOf(Ot);$e.push(-1===nn?Ot:t[Ot])}}catch(jn){kn={error:jn}}finally{try{yt&&!yt.done&&(Kn=ft.return)&&Kn.call(ft)}finally{if(kn)throw kn.error}}function _n(jn){var lo,bo,Fr=Object.assign({},jn);try{for(var ri=ti(a),hi=ri.next();!hi.done;hi=ri.next()){var ma=hi.value;Fr[t[ma]]=Fr[ma],delete Fr[ma]}}catch(rl){lo={error:rl}}finally{try{hi&&!hi.done&&(bo=ri.return)&&bo.call(ri)}finally{if(lo)throw lo.error}}return Fr}return{columnNames:$e,index:Re.index,values:new Eu(Re.values,_n),pairs:new Eu(Re.pairs,function(jn){return[jn[0],_n(jn[1])]})}})},n.prototype.toArray=function(){var F,ee,t=[];try{for(var e=ti(this.getContent().values),a=e.next();!a.done;a=e.next()){var T=a.value;null!=T&&t.push(T)}}catch(ce){F={error:ce}}finally{try{a&&!a.done&&(ee=e.return)&&ee.call(e)}finally{if(F)throw F.error}}return t},n.prototype.toPairs=function(){var F,ee,t=[];try{for(var e=ti(this.getContent().pairs),a=e.next();!a.done;a=e.next()){var T=a.value;null!=T[1]&&null!==T[1]&&t.push(T)}}catch(ce){F={error:ce}}finally{try{a&&!a.done&&(ee=e.return)&&ee.call(e)}finally{if(F)throw F.error}}return t},n.prototype.toObject=function(t,e){if(!xi(t))throw new Error("Expected 'keySelector' parameter to DataFrame.toObject to be a function.");if(!xi(e))throw new Error("Expected 'valueSelector' parameter to DataFrame.toObject to be a function.");return Ip(this,t,e)},n.prototype.toRows=function(){var xe,Re,t=this.getColumnNames(),e=[];try{for(var a=ti(this.getContent().values),T=a.next();!T.done;T=a.next()){for(var F=T.value,ee=[],ce=0;ce<t.length;++ce)ee.push(F[t[ce]]);e.push(ee)}}catch($e){xe={error:$e}}finally{try{T&&!T.done&&(Re=a.return)&&Re.call(a)}finally{if(xe)throw xe.error}}return e},n.prototype.select=function(t){var e=this;if(!xi(t))throw new Error("Expected 'selector' parameter to 'DataFrame.select' function to be a function.");return new n(function(){var a=e.getContent();return{values:new Eu(a.values,t),index:a.index}})},n.prototype.selectMany=function(t){var e=this;if(!xi(t))throw new Error("Expected 'selector' parameter to 'DataFrame.selectMany' to be a function.");return new n(function(){return{pairs:new rD(e.getContent().pairs,function(a,T){var Re,$e,F=[];try{for(var ee=ti(t(a[1],T)),ce=ee.next();!ce.done;ce=ee.next())F.push([a[0],ce.value])}catch(ft){Re={error:ft}}finally{try{ce&&!ce.done&&($e=ee.return)&&$e.call(ee)}finally{if(Re)throw Re.error}}return F})}})},n.prototype.transformSeries=function(t){if(!Yu(t))throw new Error("Expected 'columnSelectors' parameter of 'DataFrame.transformSeries' function to be an object. Field names should specify columns to transform. Field values should be selector functions that specify the transformation for each column.");var ee,ce,e=this;try{for(var a=ti(Object.keys(t)),T=a.next();!T.done;T=a.next()){var F=T.value;e.hasSeries(F)&&(e=e.withSeries(F,e.getSeries(F).select(t[F])))}}catch(xe){ee={error:xe}}finally{try{T&&!T.done&&(ce=a.return)&&ce.call(a)}finally{if(ee)throw ee.error}}return e},n.prototype.generateSeries=function(t){if(Yu(t)){var Re=t,T=Object.keys(Re),F=this;try{for(var $e=ti(T),ft=$e.next();!ft.done;ft=$e.next())F=F.withSeries(xe=ft.value,F.select(Re[xe]).deflate())}catch(jn){nn={error:jn}}finally{try{ft&&!ft.done&&(_n=$e.return)&&_n.call($e)}finally{if(nn)throw nn.error}}return F}if(!xi(t))throw new Error("Expected 'generator' parameter to 'DataFrame.generateSeries' function to be a function or an object.");var yt,Ot,nn,_n,a=this.select(t).bake();T=a.getColumnNames(),F=this;try{for(var ee=ti(T),ce=ee.next();!ce.done;ce=ee.next()){var xe;F=F.withSeries(xe=ce.value,a.getSeries(xe))}}catch(kn){yt={error:kn}}finally{try{ce&&!ce.done&&(Ot=ee.return)&&Ot.call(ee)}finally{if(yt)throw yt.error}}return F},n.prototype.deflate=function(t){var e=this;if(t&&!xi(t))throw new Error("Expected 'selector' parameter to 'DataFrame.deflate' function to be a selector function.");return new ml(function(){var a=e.getContent();return t?{index:a.index,values:new Eu(a.values,t),pairs:new Eu(a.pairs,function(T,F){return[T[0],t(T[1],F)]})}:{index:a.index,values:a.values,pairs:a.pairs}})},n.prototype.inflateSeries=function(t,e){if(!Mo(t))throw new Error("Expected 'columnName' parameter to 'DataFrame.inflateSeries' to be a string that is the name of the column to inflate.");if(e&&!xi(e))throw new Error("Expected optional 'selector' parameter to 'DataFrame.inflateSeries' to be a selector function, if it is specified.");return this.zip(this.getSeries(t).inflate(e),function(a,T){return Object.assign({},a,T)})},n.prototype.window=function(t){var e=this;if(!Cs(t))throw new Error("Expected 'period' parameter to 'DataFrame.window' to be a number.");return new ml(function(){var a=e.getContent();return{values:new rz(a.columnNames,a.pairs,t)}})},n.prototype.rollingWindow=function(t){var e=this;if(!Cs(t))throw new Error("Expected 'period' parameter to 'DataFrame.rollingWindow' to be a number.");return new ml(function(){var a=e.getContent();return{values:new oz(a.columnNames,a.pairs,t)}})},n.prototype.variableWindow=function(t){var e=this;if(!xi(t))throw new Error("Expected 'comparer' parameter to 'DataFrame.variableWindow' to be a function.");return new ml(function(){var a=e.getContent();return{values:new lz(a.columnNames,a.pairs,t)}})},n.prototype.sequentialDistinct=function(t){if(t){if(!xi(t))throw new Error("Expected 'selector' parameter to 'DataFrame.sequentialDistinct' to be a selector function that determines the value to compare for duplicates.")}else t=function(e){return e};return this.variableWindow(function(e,a){return t(e)===t(a)}).select(function(e){return[e.getIndex().first(),e.first()]}).withIndex(function(e){return e[0]}).inflate(function(e){return e[1]})},n.prototype.aggregate=function(t,e){var a=this;if(xi(t)&&!e)return this.skip(1).aggregate(this.first(),t);if(e){if(!xi(e))throw new Error("Expected 'selector' parameter to aggregate to be a function.");var T=t;try{for(var F=ti(this),ee=F.next();!ee.done;ee=F.next())T=e(T,ee.value)}catch(Ot){ft={error:Ot}}finally{try{ee&&!ee.done&&(yt=F.return)&&yt.call(F)}finally{if(ft)throw ft.error}}return T}if(!Yu(t))throw new Error("Expected 'seed' parameter to aggregate to be an object.");var ft,yt,xe=t;return Ip(Object.keys(xe).map(function(Ot){var nn=xe[Ot];if(!xi(nn))throw new Error("Expected column/selector pairs in 'seed' parameter to aggregate.");return[Ot,a.getSeries(Ot).aggregate(nn)]}),function(Ot){return Ot[0]},function(Ot){return Ot[1]})},n.prototype.skip=function(t){var e=this;if(!Cs(t))throw new Error("Expected 'numValues' parameter to 'DataFrame.skip' to be a number.");return new n(function(){var a=e.getContent();return{columnNames:a.columnNames,values:new ag(a.values,t),index:new ag(a.index,t),pairs:new ag(a.pairs,t)}})},n.prototype.skipWhile=function(t){var e=this;if(!xi(t))throw new Error("Expected 'predicate' parameter to 'DataFrame.skipWhile' function to be a predicate function that returns true/false.");return new n(function(){var a=e.getContent();return{columnNames:a.columnNames,values:new pf(a.values,t),pairs:new pf(a.pairs,function(T){return t(T[1])})}})},n.prototype.skipUntil=function(t){if(!xi(t))throw new Error("Expected 'predicate' parameter to 'DataFrame.skipUntil' function to be a predicate function that returns true/false.");return this.skipWhile(function(e){return!t(e)})},n.prototype.take=function(t){var e=this;if(!Cs(t))throw new Error("Expected 'numRows' parameter to 'DataFrame.take' function to be a number.");return new n(function(){var a=e.getContent();return{columnNames:a.columnNames,index:new rg(a.index,t),values:new rg(a.values,t),pairs:new rg(a.pairs,t)}})},n.prototype.takeWhile=function(t){var e=this;if(!xi(t))throw new Error("Expected 'predicate' parameter to 'DataFrame.takeWhile' function to be a predicate function that returns true/false.");return new n(function(){var a=e.getContent();return{columnNames:a.columnNames,values:new hf(a.values,t),pairs:new hf(a.pairs,function(T){return t(T[1])})}})},n.prototype.takeUntil=function(t){if(!xi(t))throw new Error("Expected 'predicate' parameter to 'DataFrame.takeUntil' function to be a predicate function that returns true/false.");return this.takeWhile(function(e){return!t(e)})},n.prototype.count=function(){var F,ee,t=0;try{for(var e=ti(this.getContent().values),a=e.next();!a.done;a=e.next())++t}catch(ce){F={error:ce}}finally{try{a&&!a.done&&(ee=e.return)&&ee.call(e)}finally{if(F)throw F.error}}return t},n.prototype.first=function(){try{for(var t=ti(this),e=t.next();!e.done;e=t.next())return e.value}catch(ee){T={error:ee}}finally{try{e&&!e.done&&(F=t.return)&&F.call(t)}finally{if(T)throw T.error}}throw new Error("DataFrame.first: No values in DataFrame.");var T,F},n.prototype.last=function(){var F,ee,t=null;try{for(var e=ti(this),a=e.next();!a.done;a=e.next())t=a.value}catch(ce){F={error:ce}}finally{try{a&&!a.done&&(ee=e.return)&&ee.call(e)}finally{if(F)throw F.error}}if(null===t)throw new Error("DataFrame.last: No values in DataFrame.");return t},n.prototype.at=function(t){if(!this.none())return this.getRowByIndex(t)},n.prototype.head=function(t){if(!Cs(t))throw new Error("Expected 'numValues' parameter to 'DataFrame.head' function to be a number.");if(0===t)return new n;var e=t<0?this.count()-Math.abs(t):t;return this.take(e)},n.prototype.tail=function(t){if(!Cs(t))throw new Error("Expected 'numValues' parameter to 'DataFrame.tail' function to be a number.");if(0===t)return new n;var e=t>0?this.count()-t:Math.abs(t);return this.skip(e)},n.prototype.where=function(t){var e=this;if(!xi(t))throw new Error("Expected 'predicate' parameter to 'DataFrame.where' function to be a function.");return new n(function(){var a=e.getContent();return{columnNames:a.columnNames,values:new R1(a.values,t),pairs:new R1(a.pairs,function(T){return t(T[1])})}})},n.prototype.forEach=function(t){if(!xi(t))throw new Error("Expected 'callback' parameter to 'DataFrame.forEach' to be a function.");var ee,ce,e=0;try{for(var a=ti(this),T=a.next();!T.done;T=a.next())t(T.value,e++)}catch(xe){ee={error:xe}}finally{try{T&&!T.done&&(ce=a.return)&&ce.call(a)}finally{if(ee)throw ee.error}}return this},n.prototype.all=function(t){if(!xi(t))throw new Error("Expected 'predicate' parameter to 'DataFrame.all' to be a function.");var ee,ce,e=0;try{for(var a=ti(this),T=a.next();!T.done;T=a.next()){if(!t(T.value))return!1;++e}}catch(xe){ee={error:xe}}finally{try{T&&!T.done&&(ce=a.return)&&ce.call(a)}finally{if(ee)throw ee.error}}return e>0},n.prototype.any=function(t){if(t&&!xi(t))throw new Error("Expected optional 'predicate' parameter to 'DataFrame.any' to be a function.");var ee,ce;if(!t)return!this[Symbol.iterator]().next().done;try{for(var e=ti(this),a=e.next();!a.done;a=e.next())if(t(a.value))return!0}catch(xe){ee={error:xe}}finally{try{a&&!a.done&&(ce=e.return)&&ce.call(e)}finally{if(ee)throw ee.error}}return!1},n.prototype.none=function(t){if(t&&!xi(t))throw new Error("Expected 'predicate' parameter to 'DataFrame.none' to be a function.");var ee,ce;if(!t)return this[Symbol.iterator]().next().done||!1;try{for(var e=ti(this),a=e.next();!a.done;a=e.next())if(t(a.value))return!1}catch(xe){ee={error:xe}}finally{try{a&&!a.done&&(ce=e.return)&&ce.call(e)}finally{if(ee)throw ee.error}}return!0},n.prototype.startAt=function(t){var e=this;return new n(function(){var a=e.getContent(),T=e.getIndex().getLessThan();return{columnNames:a.columnNames,index:new pf(a.index,function(F){return T(F,t)}),pairs:new pf(a.pairs,function(F){return T(F[0],t)})}})},n.prototype.endAt=function(t){var e=this;return new n(function(){var a=e.getContent(),T=e.getIndex().getLessThanOrEqualTo();return{columnNames:a.columnNames,index:new hf(a.index,function(F){return T(F,t)}),pairs:new hf(a.pairs,function(F){return T(F[0],t)})}})},n.prototype.before=function(t){var e=this;return new n(function(){var a=e.getContent(),T=e.getIndex().getLessThan();return{columnNames:a.columnNames,index:new hf(a.index,function(F){return T(F,t)}),pairs:new hf(a.pairs,function(F){return T(F[0],t)})}})},n.prototype.after=function(t){var e=this;return new n(function(){var a=e.getContent(),T=e.getIndex().getLessThanOrEqualTo();return{columnNames:a.columnNames,index:new pf(a.index,function(F){return T(F,t)}),pairs:new pf(a.pairs,function(F){return T(F[0],t)})}})},n.prototype.between=function(t,e){return this.startAt(t).endAt(e)},n.prototype.toString=function(){var ft,yt,t=this.getColumnNames(),e=["__index__"].concat(t),a=new(Vk());try{for(var T=ti(this.toPairs()),F=T.next();!F.done;F=T.next()){var ee=F.value,xe=ee[1];a.cell(e[0],ee[0]);for(var Re=0;Re<t.length;++Re)a.cell(e[Re+1],xe[t[Re]]);a.newRow()}}catch(Ot){ft={error:Ot}}finally{try{F&&!F.done&&(yt=T.return)&&yt.call(T)}finally{if(ft)throw ft.error}}return a.toString()},n.prototype.parseInts=function(t){if(ls(t)){var e=this;try{for(var a=ti(t),T=a.next();!T.done;T=a.next())e=e.parseInts(T.value)}catch(xe){ee={error:xe}}finally{try{T&&!T.done&&(ce=a.return)&&ce.call(a)}finally{if(ee)throw ee.error}}return e}return this.withSeries(t,this.getSeries(t).parseInts());var ee,ce},n.prototype.parseFloats=function(t){if(ls(t)){var e=this;try{for(var a=ti(t),T=a.next();!T.done;T=a.next())e=e.parseFloats(T.value)}catch(xe){ee={error:xe}}finally{try{T&&!T.done&&(ce=a.return)&&ce.call(a)}finally{if(ee)throw ee.error}}return e}return this.withSeries(t,this.getSeries(t).parseFloats());var ee,ce},n.prototype.parseDates=function(t,e){if(e&&!Mo(e))throw new Error("Expected optional 'formatString' parameter to 'DataFrame.parseDates' to be a string (if specified).");if(ls(t)){var a=this;try{for(var T=ti(t),F=T.next();!F.done;F=T.next())a=a.parseDates(F.value,e)}catch(Re){ce={error:Re}}finally{try{F&&!F.done&&(xe=T.return)&&xe.call(T)}finally{if(ce)throw ce.error}}return a}return this.withSeries(t,this.getSeries(t).parseDates(e));var ce,xe},n.prototype.toStrings=function(t,e){if(Yu(t)){try{for(var a=ti(Object.keys(t)),T=a.next();!T.done;T=a.next())if(!Mo(t[F=T.value]))throw new Error("Expected values of 'columnNames' parameter to be strings when a format spec is passed in.")}catch(Fr){Ot={error:Fr}}finally{try{T&&!T.done&&(nn=a.return)&&nn.call(a)}finally{if(Ot)throw Ot.error}}if(!O2(e))throw new Error("Optional 'formatString' parameter to 'DataFrame.toStrings' should not be set when passing in a format spec.")}else{if(!ls(t)&&!Mo(t))throw new Error("Expected 'columnNames' parameter to 'DataFrame.toStrings' to be a string, array of strings or format spec that specifes which columns should be converted to strings.");if(e&&!Mo(e))throw new Error("Expected optional 'formatString' parameter to 'DataFrame.toStrings' to be a string (if specified).")}if(Yu(t)){var ee=this;try{for(var ce=ti(Object.keys(t)),xe=ce.next();!xe.done;xe=ce.next())ee=ee.toStrings(F=xe.value,e)}catch(Fr){_n={error:Fr}}finally{try{xe&&!xe.done&&(kn=ce.return)&&kn.call(ce)}finally{if(_n)throw _n.error}}return ee}if(ls(t)){ee=this;try{for(var Re=ti(t),$e=Re.next();!$e.done;$e=Re.next()){var F;ee=ee.toStrings(F=$e.value,t[F])}}catch(ri){Kn={error:ri}}finally{try{$e&&!$e.done&&(jn=Re.return)&&jn.call(Re)}finally{if(Kn)throw Kn.error}}return ee}var Ot,nn,_n,kn,Kn,jn;return this.withSeries(t,this.getSeries(t).toStrings(e))},n.prototype.truncateStrings=function(t){if(!Cs(t))throw new Error("Expected 'maxLength' parameter to 'truncateStrings' to be an integer.");return this.select(function(e){var xe,Re,a={};try{for(var T=ti(Object.keys(e)),F=T.next();!F.done;F=T.next()){var ee=F.value,ce=e[ee];a[ee]=Mo(ce)?ce.substring(0,t):ce}}catch($e){xe={error:$e}}finally{try{F&&!F.done&&(Re=T.return)&&Re.call(T)}finally{if(xe)throw xe.error}}return a})},n.prototype.round=function(t){if(void 0!==t){if(!Cs(t))throw new Error("Expected 'numDecimalPlaces' parameter to 'DataFrame.round' to be a number.")}else t=2;return this.select(function(e){var xe,Re,a={};try{for(var T=ti(Object.keys(e)),F=T.next();!F.done;F=T.next()){var ee=F.value,ce=e[ee];a[ee]=Cs(ce)?parseFloat(ce.toFixed(t)):ce}}catch($e){xe={error:$e}}finally{try{F&&!F.done&&(Re=T.return)&&Re.call(T)}finally{if(xe)throw xe.error}}return a})},n.prototype.bake=function(){return this.getContent().isBaked?this:new n({columnNames:this.getColumnNames(),values:this.toArray(),pairs:this.toPairs(),baked:!0})},n.prototype.reverse=function(){var t=this;return new n(function(){var e=t.getContent();return{columnNames:e.columnNames,values:new ig(e.values),index:new ig(e.index),pairs:new ig(e.pairs)}})},n.prototype.distinct=function(t){var e=this;return new n(function(){var a=e.getContent();return{columnNames:a.columnNames,values:new z1(a.values,t),pairs:new z1(a.pairs,function(T){return t&&t(T[1])||T[1]})}})},n.prototype.groupBy=function(t){var e=this;if(!xi(t))throw new Error("Expected 'selector' parameter to 'DataFrame.groupBy' to be a selector function that determines the value to group the series by.");return new ml(function(){var yt,Ot,a=[],T={},F=0;try{for(var ee=ti(e.getContent().pairs),ce=ee.next();!ce.done;ce=ee.next()){var xe=ce.value,Re=t(xe[1],F);++F;var $e=T[Re];if($e)$e.push(xe);else{var ft=[];ft.push(xe),a.push(ft),T[Re]=ft}}}catch(nn){yt={error:nn}}finally{try{ce&&!ce.done&&(Ot=ee.return)&&Ot.call(ee)}finally{if(yt)throw yt.error}}return{values:a.map(function(nn){return new n({pairs:nn})})}})},n.prototype.groupSequentialBy=function(t){if(t){if(!xi(t))throw new Error("Expected 'selector' parameter to 'DataFrame.groupSequentialBy' to be a selector function that determines the value to group the series by.")}else t=function(e){return e};return this.variableWindow(function(e,a){return t(e)===t(a)})},n.concat=function(t){if(!ls(t))throw new Error("Expected 'dataframes' parameter to 'DataFrame.concat' to be an array of dataframes.");return new n(function(){var ft,yt,Ot,nn,a=t.map(function(_n){return _n.getContent()}),T=[];try{for(var F=ti(a),ee=F.next();!ee.done;ee=F.next()){var ce=ee.value;try{for(var xe=ti(ce.columnNames),Re=xe.next();!Re.done;Re=xe.next())T.push(Re.value)}catch(_n){Ot={error:_n}}finally{try{Re&&!Re.done&&(nn=xe.return)&&nn.call(xe)}finally{if(Ot)throw Ot.error}}}}catch(_n){ft={error:_n}}finally{try{ee&&!ee.done&&(yt=F.return)&&yt.call(F)}finally{if(ft)throw ft.error}}return{columnNames:T=I2(T),values:new F1(a.map(function(_n){return _n.values})),pairs:new F1(a.map(function(_n){return _n.pairs}))}})},n.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var $e,ft,yt,Ot,a=[this];try{for(var T=ti(t),F=T.next();!F.done;F=T.next()){var ee=F.value;if(ls(ee))try{for(var ce=ti(ee),xe=ce.next();!xe.done;xe=ce.next()){var Re=xe.value;a.push(Re)}}catch(nn){yt={error:nn}}finally{try{xe&&!xe.done&&(Ot=ce.return)&&Ot.call(ce)}finally{if(yt)throw yt.error}}else a.push(ee)}}catch(nn){$e={error:nn}}finally{try{F&&!F.done&&(ft=T.return)&&ft.call(T)}finally{if($e)throw $e.error}}return n.concat(a)},n.zip=function(t,e){var a=Array.from(t);if(0===a.length)return new n;var T=a[0];return T.none()?new n:new n(function(){var ee=a;return{index:T.getContent().index,values:new iD(ee.map(function(ce){return ce.getContent().values}),e)}})},n.prototype.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var a=t[t.length-1],T=[this].concat(t.slice(0,t.length-1));return n.zip(T,function(F){return a.apply(void 0,tD(F))})},n.prototype.orderBy=function(t){var e=this.getContent();return new lD({columnNames:e.columnNames,values:e.values,pairs:e.pairs,selector:t,direction:df.Ascending,parent:null})},n.prototype.orderByDescending=function(t){var e=this.getContent();return new lD({columnNames:e.columnNames,values:e.values,pairs:e.pairs,selector:t,direction:df.Descending,parent:null})},n.prototype.union=function(t,e){if(e&&!xi(e))throw new Error("Expected optional 'selector' parameter to 'DataFrame.union' to be a selector function.");return this.concat(t).distinct(e)},n.prototype.intersection=function(t,e,a){if(e){if(!xi(e))throw new Error("Expected optional 'outerSelector' parameter to 'DataFrame.intersection' to be a function.")}else e=function(F){return F};if(a){if(!xi(a))throw new Error("Expected optional 'innerSelector' parameter to 'DataFrame.intersection' to be a function.")}else a=function(F){return F};return this.where(function(F){var ee=e(F);return t.where(function(ce){return ee===a(ce)}).any()})},n.prototype.except=function(t,e,a){if(e){if(!xi(e))throw new Error("Expected optional 'outerSelector' parameter to 'DataFrame.except' to be a function.")}else e=function(F){return F};if(a){if(!xi(a))throw new Error("Expected optional 'innerSelector' parameter to 'DataFrame.except' to be a function.")}else a=function(F){return F};return this.where(function(F){var ee=e(F);return t.where(function(ce){return ee===a(ce)}).none()})},n.prototype.join=function(t,e,a,T){if(!xi(e))throw new Error("Expected 'outerKeySelector' parameter of 'DataFrame.join' to be a selector function.");if(!xi(a))throw new Error("Expected 'innerKeySelector' parameter of 'DataFrame.join' to be a selector function.");if(!xi(T))throw new Error("Expected 'resultSelector' parameter of 'DataFrame.join' to be a selector function.");var F=this;return new n(function(){var Kn,jn,Fr,ri,ee=t.groupBy(a).toObject(function(hi){return a(hi.first())},function(hi){return hi}),xe=(F.getContent(),[]);try{for(var Re=ti(F),$e=Re.next();!$e.done;$e=Re.next()){var ft=$e.value,Ot=ee[e(ft)];if(Ot)try{for(var nn=ti(Ot),_n=nn.next();!_n.done;_n=nn.next())xe.push(T(ft,_n.value))}catch(hi){Fr={error:hi}}finally{try{_n&&!_n.done&&(ri=nn.return)&&ri.call(nn)}finally{if(Fr)throw Fr.error}}}}catch(hi){Kn={error:hi}}finally{try{$e&&!$e.done&&(jn=Re.return)&&jn.call(Re)}finally{if(Kn)throw Kn.error}}return{values:xe}})},n.prototype.joinOuter=function(t,e,a,T){if(!xi(e))throw new Error("Expected 'outerKeySelector' parameter of 'DataFrame.joinOuter' to be a selector function.");if(!xi(a))throw new Error("Expected 'innerKeySelector' parameter of 'DataFrame.joinOuter' to be a selector function.");if(!xi(T))throw new Error("Expected 'resultSelector' parameter of 'DataFrame.joinOuter' to be a selector function.");var F=this,ee=F.except(t,e,a).select(function(Re){return T(Re,null)}).resetIndex(),ce=t.except(F,a,e).select(function(Re){return T(null,Re)}).resetIndex(),xe=F.join(t,e,a,T);return ee.concat(xe).concat(ce).resetIndex()},n.prototype.joinOuterLeft=function(t,e,a,T){if(!xi(e))throw new Error("Expected 'outerKeySelector' parameter of 'DataFrame.joinOuterLeft' to be a selector function.");if(!xi(a))throw new Error("Expected 'innerKeySelector' parameter of 'DataFrame.joinOuterLeft' to be a selector function.");if(!xi(T))throw new Error("Expected 'resultSelector' parameter of 'DataFrame.joinOuterLeft' to be a selector function.");var ee=this.except(t,e,a).select(function(xe){return T(xe,null)}).resetIndex(),ce=this.join(t,e,a,T);return ee.concat(ce).resetIndex()},n.prototype.joinOuterRight=function(t,e,a,T){if(!xi(e))throw new Error("Expected 'outerKeySelector' parameter of 'DataFrame.joinOuterRight' to be a selector function.");if(!xi(a))throw new Error("Expected 'innerKeySelector' parameter of 'DataFrame.joinOuterRight' to be a selector function.");if(!xi(T))throw new Error("Expected 'resultSelector' parameter of 'DataFrame.joinOuterRight' to be a selector function.");var ee=t.except(this,a,e).select(function(xe){return T(null,xe)}).resetIndex();return this.join(t,e,a,T).concat(ee).resetIndex()},n.prototype.summarize=function(t){if(t&&!Yu(t))throw new Error("Expected 'spec' parameter to 'DataFrame.summarize' to be an object that specifies how to summarize the dataframe.");if(!t){t={};try{for(var e=ti(this.getColumnNames()),a=e.next();!a.done;a=e.next()){var T=a.value,F={};F[T+"_sum"]=ml.sum,F[T+"_average"]=ml.average,F[T+"_count"]=ml.count,t[T]=F}}catch(Oa){ri={error:Oa}}finally{try{a&&!a.done&&(hi=e.return)&&hi.call(e)}finally{if(ri)throw ri.error}}}try{for(var ee=ti(Object.keys(t)),ce=ee.next();!ce.done;ce=ee.next()){var Re=t[xe=ce.value];xi(Re)&&(t[xe]={},t[xe][xe]=Re)}}catch(Oa){ma={error:Oa}}finally{try{ce&&!ce.done&&(lo=ee.return)&&lo.call(ee)}finally{if(ma)throw ma.error}}var ri,hi,ma,lo,bo,rl,vl,il,$e=Object.keys(t),ft=Ip($e,function(Oa){return Oa},function(Oa){return Object.keys(t[Oa])}),yt={};try{for(var Ot=ti($e),nn=Ot.next();!nn.done;nn=Ot.next()){var xe,_n=ft[xe=nn.value];try{for(var kn=ti(_n),Kn=kn.next();!Kn.done;Kn=kn.next()){var jn=Kn.value;yt[jn]=(0,t[xe][jn])(this.getSeries(xe))}}catch(al){vl={error:al}}finally{try{Kn&&!Kn.done&&(il=kn.return)&&il.call(kn)}finally{if(vl)throw vl.error}}}}catch(Oa){bo={error:Oa}}finally{try{nn&&!nn.done&&(rl=Ot.return)&&rl.call(Ot)}finally{if(bo)throw bo.error}}return yt},n.prototype.pivot=function(t,e,a){var T,xe,bo,rl,vl,il;if(Mo(t))T=[t];else{if(!ls(t))throw new Error("Expected 'columnOrColumns' parameter to 'DataFrame.pivot' to be a string or an array of strings that identifies the column(s) whose values make the new DataFrame's columns.");if(0===(T=Array.from(t)).length)throw new Error("Expected 'columnOrColumns' parameter to 'DataFrame.pivot' to contain at least one string.");try{for(var F=ti(T),ee=F.next();!ee.done;ee=F.next())if(!Mo(ee.value))throw new Error("Expected 'columnOrColumns' parameter to 'DataFrame.pivot' to be an array of strings, each string identifies a column in the DataFrame on which to pivot.")}catch(Oa){bo={error:Oa}}finally{try{ee&&!ee.done&&(rl=F.return)&&rl.call(F)}finally{if(bo)throw bo.error}}}if(Yu(e)){xe=e;try{for(var ft=ti(Object.keys(xe)),yt=ft.next();!yt.done;yt=ft.next()){var Ot=yt.value,nn=xe[Ot];xi(nn)&&(xe[Ot]={},xe[Ot][Ot]=nn)}}catch(Oa){vl={error:Oa}}finally{try{yt&&!yt.done&&(il=ft.return)&&il.call(ft)}finally{if(vl)throw vl.error}}}else{if(!Mo(e))throw new Error("Expected 'value' parameter to 'DataFrame.pivot' to be a string that identifies the column whose values to aggregate or a column spec that defines which column contains the value ot aggregate and the ways to aggregate that value.");if(!xi(a))throw new Error("Expected 'aggregator' parameter to 'DataFrame.pivot' to be a function to aggregate pivoted values.");var Re=e,$e={};$e[Re]=a,(xe={})[Re]=$e}for(var _n=T[0],kn=this.groupBy(function(Oa){return Oa[_n]}).select(function(Oa){var al={};return al[_n]=Oa.first()[_n],al.src=Oa,al}),Kn=function(Oa){var al=T[Oa];kn=kn.selectMany(function(Hl){return Hl.src.groupBy(function(sc){return sc[al]}).select(function(sc){var Vc=Object.assign({},Hl);return Vc[al]=sc.first()[al],Vc.src=sc,Vc})})},jn=1;jn<T.length;++jn)Kn(jn);var Fr=Object.keys(xe),ri=Ip(Fr,function(Oa){return Oa},function(Oa){return Object.keys(xe[Oa])}),ma=kn.inflate(function(Oa){var Vc,Vd,al=function(Pl){var po,us,Ew=ri[Pl];try{for(var pg=ti(Ew),Nr=pg.next();!Nr.done;Nr=pg.next()){var ui=Nr.value;Oa[ui]=(0,xe[Pl][ui])(Oa.src.deflate(function(cs){return cs[Pl]}))}}catch(cs){po={error:cs}}finally{try{Nr&&!Nr.done&&(us=pg.return)&&us.call(pg)}finally{if(po)throw po.error}}};try{for(var Hl=ti(Fr),tu=Hl.next();!tu.done;tu=Hl.next())al(tu.value)}catch(Pl){Vc={error:Pl}}finally{try{tu&&!tu.done&&(Vd=Hl.return)&&Vd.call(Hl)}finally{if(Vc)throw Vc.error}}return delete Oa.src,Oa}).orderBy(function(Oa){return Oa[_n]}),lo=function(Oa){var al=T[Oa];ma=ma.thenBy(function(Hl){return Hl[al]})};for(jn=1;jn<T.length;++jn)lo(jn);return ma},n.prototype.melt=function(t,e){var a,T;if(Mo(t))a=[t];else{if(!ls(t))throw new Error("Expected 'idColumnOrColumns' parameter to 'DataFrame.melt' to be a string or an array of strings that identifies the column(s) whose values make the new DataFrame's identity columns.");a=Array.from(t);try{for(var F=ti(a),ee=F.next();!ee.done;ee=F.next())if(!Mo(ee.value))throw new Error("Expected 'idColumnOrColumns' parameter to 'DataFrame.melt' to be a string or an array of strings that identifies the column(s) whose values make the new DataFrame's identity columns.")}catch(Pl){il={error:Pl}}finally{try{ee&&!ee.done&&(Oa=F.return)&&Oa.call(F)}finally{if(il)throw il.error}}}if(Mo(e))T=[e];else{if(!ls(e))throw new Error("Expected 'valueColumnOrColumns' parameter to 'DataFrame.melt' to be a string or an array of strings that identifies the column(s) whose molten values make the new DataFrame's 'variable' and 'value' columns.");T=Array.from(e);try{for(var xe=ti(T),Re=xe.next();!Re.done;Re=xe.next())if(!Mo(Re.value))throw new Error("Expected 'valueColumnOrColumns' parameter to 'DataFrame.melt' to be a string or an array of strings that identifies the column(s) whose molten values make the new DataFrame's 'variable' and 'value' columns.")}catch(Pl){al={error:Pl}}finally{try{Re&&!Re.done&&(Hl=xe.return)&&Hl.call(xe)}finally{if(al)throw al.error}}}var $e=T.length,ft=this.count(),yt=new n,Ot=this.subset(a.concat(T));try{for(var nn=ti(a),_n=nn.next();!_n.done;_n=nn.next()){Ot=Ot.dropSeries(kn=_n.value);var Kn=this.getSeries(kn),jn=new hz(Kn,$e),Fr=new ml(jn);yt=yt.withSeries(kn,Fr)}}catch(Pl){tu={error:Pl}}finally{try{_n&&!_n.done&&(sc=nn.return)&&sc.call(nn)}finally{if(tu)throw tu.error}}var ri=[];try{for(var hi=ti(Ot.getColumns()),ma=hi.next();!ma.done;ma=hi.next()){var kn;ri.push(this.getSeries((kn=ma.value).name))}}catch(Pl){Vc={error:Pl}}finally{try{ma&&!ma.done&&(Vd=hi.return)&&Vd.call(hi)}finally{if(Vc)throw Vc.error}}var lo=new pz(ri),bo=new ml(lo);yt=yt.withSeries("value",bo);var il,Oa,al,Hl,tu,sc,Vc,Vd,rl=new cz(T,ft),vl=new ml(rl);return yt.withSeries("variable",vl)},n.prototype.insertPair=function(t){if(!ls(t))throw new Error("Expected 'pair' parameter to 'DataFrame.insertPair' to be an array.");if(2!==t.length)throw new Error("Expected 'pair' parameter to 'DataFrame.insertPair' to be an array with two elements. The first element is the index, the second is the value.");return new n({pairs:[t]}).concat(this)},n.prototype.appendPair=function(t){if(!ls(t))throw new Error("Expected 'pair' parameter to 'DataFrame.appendPair' to be an array.");if(2!==t.length)throw new Error("Expected 'pair' parameter to 'DataFrame.appendPair' to be an array with two elements. The first element is the index, the second is the value.");return this.concat(new n({pairs:[t]}))},n.prototype.fillGaps=function(t,e){if(!xi(t))throw new Error("Expected 'comparer' parameter to 'DataFrame.fillGaps' to be a comparer function that compares two values and returns a boolean.");if(!xi(e))throw new Error("Expected 'generator' parameter to 'DataFrame.fillGaps' to be a generator function that takes two values and returns an array of generated pairs to span the gap.");return this.rollingWindow(2).selectMany(function(a){var T=a.toPairs(),F=T[0],ee=T[1];if(!t(F,ee))return[F];var ce=e(F,ee);if(!ls(ce))throw new Error("Expected return from 'generator' parameter to 'DataFrame.fillGaps' to be an array of pairs, instead got a "+typeof ce);return[F].concat(ce)}).withIndex(function(a){return a[0]}).inflate(function(a){return a[1]}).concat(this.tail(1))},n.prototype.defaultIfEmpty=function(t){if(this.none()){if(t instanceof n)return t;if(ls(t))return new n(t);throw new Error("Expected 'defaultSequence' parameter to 'DataFrame.defaultIfEmpty' to be an array or a series.")}return this},n.prototype.detectTypes=function(){var t=this;return new n(function(){return{columnNames:["Type","Frequency","Column"],values:t.getColumns().selectMany(function(a){return a.series.detectTypes().select(function(T){var F=Object.assign({},T);return F.Column=a.name,F})})}})},n.prototype.detectValues=function(){var t=this;return new n(function(){return{columnNames:["Value","Frequency","Column"],values:t.getColumns().selectMany(function(a){return a.series.detectValues().select(function(T){var F=Object.assign({},T);return F.Column=a.name,F})})}})},n.prototype.toJSON=function(){return JSON.stringify(this.toArray(),null,4)},n.prototype.toJSON5=function(){return yN().stringify(this.toArray(),null,4)},n.prototype.toCSV=function(t){var a=(void 0===t||void 0===t.header||t.header?[this.getColumnNames()]:[]).concat(this.toRows());return Zk().unparse(a,t)},n.prototype.toHTML=function(){var t=this.getColumnNames();return'<table border="1" class="dataframe">\n    <thead>\n        <tr style="text-align: right;">\n            <th></th>\n'+t.map(function(T){return"            <th>"+T+"</th>"}).join("\n")+"\n       </tr>\n    </thead>\n    <tbody>\n"+this.toPairs().map(function(T){var ee=T[1];return"        <tr>\n            <th>"+T[0]+"</th>\n"+t.map(function(ce){return"            <td>"+ee[ce]+"</td>"}).join("\n")+"\n        </tr>"}).join("\n")+"\n    </tbody>\n</table>"},n.prototype.serialize=function(){var t=this.toArray(),e=this.getIndex(),a=e.head(t.length).toArray(),T=this.getColumns(),F=Ip(T,function(jn){return jn.name},function(jn){return jn.type}),ee=e.getType();"date"===ee&&(a=a.map(function(jn){return sh(jn).toISOString()}));var nn,_n,kn,Kn,ce=!1;try{for(var xe=ti(T),Re=xe.next();!Re.done;Re=xe.next()){var $e=Re.value;if("date"===$e.type){ce||(t=t.map(function(jn){return Object.assign({},jn)}),ce=!0);try{for(var ft=ti(t),yt=ft.next();!yt.done;yt=ft.next()){var Ot=yt.value;Ot[$e.name]=sh(Ot[$e.name]).toISOString()}}catch(jn){kn={error:jn}}finally{try{yt&&!yt.done&&(Kn=ft.return)&&Kn.call(ft)}finally{if(kn)throw kn.error}}}}}catch(jn){nn={error:jn}}finally{try{Re&&!Re.done&&(_n=xe.return)&&_n.call(xe)}finally{if(nn)throw nn.error}}return{columnOrder:this.getColumnNames(),columns:F,index:{type:ee,values:a},values:t}},n.deserialize=function(t){var ft,yt,Ot,nn,e=t.index&&t.index.values||[],a=t.values&&t.values||[],T=!1;if(t.columns)try{for(var F=ti(Object.keys(t.columns)),ee=F.next();!ee.done;ee=F.next()){var ce=ee.value;if("date"===t.columns[ce]){T||(a=a.map(function(_n){return Object.assign({},_n)}),T=!0);try{for(var xe=ti(a),Re=xe.next();!Re.done;Re=xe.next()){var $e=Re.value;$e[ce]=sh($e[ce]).toDate()}}catch(_n){Ot={error:_n}}finally{try{Re&&!Re.done&&(nn=xe.return)&&nn.call(xe)}finally{if(Ot)throw Ot.error}}}}}catch(_n){ft={error:_n}}finally{try{ee&&!ee.done&&(yt=F.return)&&yt.call(F)}finally{if(ft)throw ft.error}}return t.index&&"date"===t.index.type&&(e=e.map(function(_n){return sh(_n).toDate()})),new n({columnNames:t.columnOrder||[],index:e,values:a})},n.prototype.getTypeCode=function(){return"dataframe"},n.defaultCountIterable=new S2,n.defaultEmptyIterable=new nD,n}(),lD=function(n){function t(e){for(var a=this,T=[],F=[],ee=0,ce=e.parent,xe=[];null!==ce;)xe.push(ce),ce=ce.config.parent;xe.reverse();try{for(var Re=ti(xe),$e=Re.next();!$e.done;$e=Re.next()){var yt=$e.value.config;T.push(t.makeSortSpec(ee,yt.selector,yt.direction)),F.push(t.makeSortSpec(ee,t.makePairsSelector(yt.selector),yt.direction)),++ee}}catch(_n){Ot={error:_n}}finally{try{$e&&!$e.done&&(nn=Re.return)&&nn.call(Re)}finally{if(Ot)throw Ot.error}}return T.push(t.makeSortSpec(ee,e.selector,e.direction)),F.push(t.makeSortSpec(ee,t.makePairsSelector(e.selector),e.direction)),(a=n.call(this,{columnNames:e.columnNames,values:new B1(e.values,T),pairs:new B1(e.pairs,F)})||this).config=e,a;var Ot,nn}return C2(t,n),t.makeSortSpec=function(e,a,T){return{sortLevel:e,selector:a,direction:T}},t.makePairsSelector=function(e){return function(a,T){return e(a[1],T)}},t.prototype.thenBy=function(e){return new t({columnNames:this.config.columnNames,values:this.config.values,pairs:this.config.pairs,selector:e,direction:df.Ascending,parent:this})},t.prototype.thenByDescending=function(e){return new t({columnNames:this.config.columnNames,values:this.config.values,pairs:this.config.pairs,selector:e,direction:df.Descending,parent:this})},t}(Cu);sh.extend(Qk);var Pp=(()=>(function(n){n.Start="start",n.End="end"}(Pp||(Pp={})),Pp))(),ml=function(){function n(t){this.configFn=null,this.content=null,this.indexedContent=null,t?xi(t)?this.configFn=t:this.content=ls(t)||xi(t[Symbol.iterator])?n.initFromArray(t):n.initFromConfig(t):this.content=n.initEmpty()}return n.initFromArray=function(t){return{index:n.defaultCountIterable,values:t,pairs:new ay([n.defaultCountIterable,t]),isBaked:!0}},n.initEmpty=function(){return{index:n.defaultEmptyIterable,values:n.defaultEmptyIterable,pairs:n.defaultEmptyIterable,isBaked:!0}},n.checkIterable=function(t,e){if(!ls(t)&&!xi(t[Symbol.iterator]))throw new Error("Expected '"+e+"' field of Series config object to be an array of values or an iterable of values.")},n.initFromConfig=function(t){var e,a,T,F=!1;return t.pairs&&(n.checkIterable(t.pairs,"pairs"),T=t.pairs),t.index?(n.checkIterable(t.index,"index"),e=t.index):e=T?new j1(T,0):n.defaultCountIterable,t.values?(n.checkIterable(t.values,"values"),a=t.values):a=T?new j1(T,1):n.defaultEmptyIterable,T||(T=new ay([e,a])),void 0!==t.baked&&(F=t.baked),{index:e,values:a,pairs:T,isBaked:F}},n.prototype.lazyInit=function(){null===this.content&&null!==this.configFn&&(this.content=n.initFromConfig(this.configFn()))},n.prototype.getContent=function(){return this.lazyInit(),this.content},n.prototype.getRowByIndex=function(t){if(!this.indexedContent){this.indexedContent=new Map;try{for(var e=ti(this.getContent().pairs),a=e.next();!a.done;a=e.next()){var T=a.value;this.indexedContent.set(T[0],T[1])}}catch(ce){F={error:ce}}finally{try{a&&!a.done&&(ee=e.return)&&ee.call(e)}finally{if(F)throw F.error}}}return this.indexedContent.get(t);var F,ee},n.prototype[Symbol.iterator]=function(){return this.getContent().values[Symbol.iterator]()},n.prototype.cast=function(){return this},n.prototype.getIndex=function(){var t=this;return new cD(function(){return{values:t.getContent().index}})},n.prototype.withIndex=function(t){var e=this;return xi(t)?new n(function(){return{values:e.getContent().values,index:e.select(t)}}):(n.checkIterable(t,"newIndex"),new n(function(){return{values:e.getContent().values,index:t}}))},n.prototype.resetIndex=function(){var t=this;return new n(function(){return{values:t.getContent().values}})},n.merge=function(t){var e=new Map,a=Array.from(t).length,T=0;try{for(var F=ti(t),ee=F.next();!ee.done;ee=F.next()){var ce=ee.value;try{for(var xe=ti(ce.toPairs()),Re=xe.next();!Re.done;Re=xe.next()){var $e=Re.value,ft=$e[0];e.has(ft)||e.set(ft,new Array(a)),e.get(ft)[T]=$e[1]}}catch(Kn){_n={error:Kn}}finally{try{Re&&!Re.done&&(kn=xe.return)&&kn.call(xe)}finally{if(_n)throw _n.error}}++T}}catch(Kn){Ot={error:Kn}}finally{try{ee&&!ee.done&&(nn=F.return)&&nn.call(F)}finally{if(Ot)throw Ot.error}}var Ot,nn,_n,kn,yt=Array.from(e.keys()).map(function(Kn){return[Kn,e.get(Kn)]});return yt.sort(function(Kn,jn){return Kn[0]===jn[0]?0:Kn[0]>jn[0]?1:-1}),new n({pairs:yt})},n.prototype.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.merge([this].concat(t))},n.prototype.toArray=function(){var F,ee,t=[];try{for(var e=ti(this.getContent().values),a=e.next();!a.done;a=e.next()){var T=a.value;null!=T&&t.push(T)}}catch(ce){F={error:ce}}finally{try{a&&!a.done&&(ee=e.return)&&ee.call(e)}finally{if(F)throw F.error}}return t},n.prototype.toPairs=function(){var F,ee,t=[];try{for(var e=ti(this.getContent().pairs),a=e.next();!a.done;a=e.next()){var T=a.value;null!=T[1]&&t.push(T)}}catch(ce){F={error:ce}}finally{try{a&&!a.done&&(ee=e.return)&&ee.call(e)}finally{if(F)throw F.error}}return t},n.prototype.toObject=function(t,e){if(!xi(t))throw new Error("Expected 'keySelector' parameter to Series.toObject to be a function.");if(!xi(e))throw new Error("Expected 'valueSelector' parameter to Series.toObject to be a function.");return Ip(this,t,e)},n.prototype.select=function(t){var e=this;if(!xi(t))throw new Error("Expected 'selector' parameter to 'Series.select' function to be a function.");return new n(function(){return{values:new Eu(e.getContent().values,t),index:e.getContent().index}})},n.prototype.selectMany=function(t){var e=this;if(!xi(t))throw new Error("Expected 'selector' parameter to 'Series.selectMany' to be a function.");return new n(function(){return{pairs:new rD(e.getContent().pairs,function(a,T){var Re,$e,F=[];try{for(var ee=ti(t(a[1],T)),ce=ee.next();!ce.done;ce=ee.next())F.push([a[0],ce.value])}catch(ft){Re={error:ft}}finally{try{ce&&!ce.done&&($e=ee.return)&&$e.call(ee)}finally{if(Re)throw Re.error}}return F})}})},n.prototype.window=function(t,e){var a=this;if(!Cs(t))throw new Error("Expected 'period' parameter to 'Series.window' to be a number.");return new n(function(){return{pairs:new qN(a.getContent().pairs,t,e||Pp.End)}})},n.prototype.rollingWindow=function(t,e){var a=this;if(!Cs(t))throw new Error("Expected 'period' parameter to 'Series.rollingWindow' to be a number.");return new n(function(){return{pairs:new ZN(a.getContent().pairs,t,e||Pp.End)}})},n.prototype.variableWindow=function(t){var e=this;if(!xi(t))throw new Error("Expected 'comparer' parameter to 'Series.variableWindow' to be a function.");return new n(function(){return{values:new JN(e.getContent().pairs,t)}})},n.prototype.sequentialDistinct=function(t){if(t){if(!xi(t))throw new Error("Expected 'selector' parameter to 'Series.sequentialDistinct' to be a selector function that determines the value to compare for duplicates.")}else t=function(e){return e};return this.variableWindow(function(e,a){return t(e)===t(a)}).select(function(e){return[e.getIndex().first(),e.first()]}).withIndex(function(e){return e[0]}).select(function(e){return e[1]})},n.prototype.aggregate=function(t,e){if(xi(t)&&!e)return this.skip(1).aggregate(this.first(),t);if(!xi(e))throw new Error("Expected 'selector' parameter to aggregate to be a function.");var ce,xe,a=t;try{for(var T=ti(this),F=T.next();!F.done;F=T.next())a=e(a,F.value)}catch(Re){ce={error:Re}}finally{try{F&&!F.done&&(xe=T.return)&&xe.call(T)}finally{if(ce)throw ce.error}}return a},n.prototype.amountRange=function(t,e){return this.rollingWindow(t,e).select(function(a){return a.max()-a.min()})},n.prototype.proportionRange=function(t,e){return this.rollingWindow(t,e).select(function(a){return(a.max()-a.min())/a.last()})},n.prototype.percentRange=function(t,e){return this.proportionRange(t,e).select(function(a){return 100*a})},n.prototype.amountChange=function(t,e){return this.rollingWindow(void 0===t?2:t,e).select(function(a){return a.last()-a.first()})},n.prototype.proportionChange=function(t,e){return this.rollingWindow(void 0===t?2:t,e).select(function(a){return(a.last()-a.first())/a.first()})},n.prototype.percentChange=function(t,e){return this.proportionChange(t,e).select(function(a){return 100*a})},n.prototype.proportionRank=function(t){if(void 0===t&&(t=2),!Cs(t))throw new Error("Expected 'period' parameter to 'Series.proportionRank' to be a number that specifies the time period for the ranking.");return this.rollingWindow(t+1).select(function(e){var a=e.last();return e.head(-1).where(function(ee){return ee<a}).count()/t})},n.prototype.percentRank=function(t){if(void 0===t&&(t=2),!Cs(t))throw new Error("Expected 'period' parameter to 'Series.percentRank' to be a number that specifies the time period for the ranking.");return this.proportionRank(t).select(function(e){return 100*e})},n.prototype.cumsum=function(){var t=this;return new n(function(){var e=0;return{pairs:t.toPairs().map(function(F){var ee=eD(F,2);return[ee[0],e+=ee[1]]})}})},n.prototype.skip=function(t){var e=this;return new n(function(){return{values:new ag(e.getContent().values,t),index:new ag(e.getContent().index,t),pairs:new ag(e.getContent().pairs,t)}})},n.prototype.skipWhile=function(t){var e=this;if(!xi(t))throw new Error("Expected 'predicate' parameter to 'Series.skipWhile' function to be a predicate function that returns true/false.");return new n(function(){return{values:new pf(e.getContent().values,t),pairs:new pf(e.getContent().pairs,function(a){return t(a[1])})}})},n.prototype.skipUntil=function(t){if(!xi(t))throw new Error("Expected 'predicate' parameter to 'Series.skipUntil' function to be a predicate function that returns true/false.");return this.skipWhile(function(e){return!t(e)})},n.prototype.take=function(t){var e=this;if(!Cs(t))throw new Error("Expected 'numRows' parameter to 'Series.take' function to be a number.");return new n(function(){return{index:new rg(e.getContent().index,t),values:new rg(e.getContent().values,t),pairs:new rg(e.getContent().pairs,t)}})},n.prototype.takeWhile=function(t){var e=this;if(!xi(t))throw new Error("Expected 'predicate' parameter to 'Series.takeWhile' function to be a predicate function that returns true/false.");return new n(function(){return{values:new hf(e.getContent().values,t),pairs:new hf(e.getContent().pairs,function(a){return t(a[1])})}})},n.prototype.takeUntil=function(t){if(!xi(t))throw new Error("Expected 'predicate' parameter to 'Series.takeUntil' function to be a predicate function that returns true/false.");return this.takeWhile(function(e){return!t(e)})},n.count=function(t){return t.count()},n.prototype.count=function(){var F,ee,t=0;try{for(var e=ti(this.getContent().values),a=e.next();!a.done;a=e.next())++t}catch(ce){F={error:ce}}finally{try{a&&!a.done&&(ee=e.return)&&ee.call(e)}finally{if(F)throw F.error}}return t},n.prototype.first=function(){try{for(var t=ti(this),e=t.next();!e.done;e=t.next())return e.value}catch(ee){T={error:ee}}finally{try{e&&!e.done&&(F=t.return)&&F.call(t)}finally{if(T)throw T.error}}throw new Error("Series.first: No values in Series.");var T,F},n.prototype.last=function(){var F,ee,t=null;try{for(var e=ti(this),a=e.next();!a.done;a=e.next())t=a.value}catch(ce){F={error:ce}}finally{try{a&&!a.done&&(ee=e.return)&&ee.call(e)}finally{if(F)throw F.error}}if(null===t)throw new Error("Series.last: No values in Series.");return t},n.prototype.at=function(t){if(!this.none())return this.getRowByIndex(t)},n.prototype.head=function(t){if(!Cs(t))throw new Error("Expected 'numValues' parameter to 'Series.head' function to be a number.");if(0===t)return new n;var e=t<0?this.count()-Math.abs(t):t;return this.take(e)},n.prototype.tail=function(t){if(!Cs(t))throw new Error("Expected 'numValues' parameter to 'Series.tail' function to be a number.");if(0===t)return new n;var e=t>0?this.count()-t:Math.abs(t);return this.skip(e)},n.prototype.where=function(t){var e=this;if(!xi(t))throw new Error("Expected 'predicate' parameter to 'Series.where' function to be a function.");return new n(function(){return{values:new R1(e.getContent().values,t),pairs:new R1(e.getContent().pairs,function(a){return t(a[1])})}})},n.prototype.forEach=function(t){if(!xi(t))throw new Error("Expected 'callback' parameter to 'Series.forEach' to be a function.");var ee,ce,e=0;try{for(var a=ti(this),T=a.next();!T.done;T=a.next())t(T.value,e++)}catch(xe){ee={error:xe}}finally{try{T&&!T.done&&(ce=a.return)&&ce.call(a)}finally{if(ee)throw ee.error}}return this},n.prototype.all=function(t){if(!xi(t))throw new Error("Expected 'predicate' parameter to 'Series.all' to be a function.");var ee,ce,e=0;try{for(var a=ti(this),T=a.next();!T.done;T=a.next()){if(!t(T.value))return!1;++e}}catch(xe){ee={error:xe}}finally{try{T&&!T.done&&(ce=a.return)&&ce.call(a)}finally{if(ee)throw ee.error}}return e>0},n.prototype.any=function(t){if(t&&!xi(t))throw new Error("Expected 'predicate' parameter to 'Series.any' to be a function.");var ee,ce;if(!t)return!this[Symbol.iterator]().next().done;try{for(var e=ti(this),a=e.next();!a.done;a=e.next())if(t(a.value))return!0}catch(xe){ee={error:xe}}finally{try{a&&!a.done&&(ce=e.return)&&ce.call(e)}finally{if(ee)throw ee.error}}return!1},n.prototype.none=function(t){if(t&&!xi(t))throw new Error("Expected 'predicate' parameter to 'Series.none' to be a function.");var ee,ce;if(!t)return this[Symbol.iterator]().next().done;try{for(var e=ti(this),a=e.next();!a.done;a=e.next())if(t(a.value))return!1}catch(xe){ee={error:xe}}finally{try{a&&!a.done&&(ce=e.return)&&ce.call(e)}finally{if(ee)throw ee.error}}return!0},n.prototype.startAt=function(t){var e=this;return new n(function(){var a=e.getIndex().getLessThan();return{index:new pf(e.getContent().index,function(T){return a(T,t)}),pairs:new pf(e.getContent().pairs,function(T){return a(T[0],t)})}})},n.prototype.endAt=function(t){var e=this;return new n(function(){var a=e.getIndex().getLessThanOrEqualTo();return{index:new hf(e.getContent().index,function(T){return a(T,t)}),pairs:new hf(e.getContent().pairs,function(T){return a(T[0],t)})}})},n.prototype.before=function(t){var e=this;return new n(function(){var a=e.getIndex().getLessThan();return{index:new hf(e.getContent().index,function(T){return a(T,t)}),pairs:new hf(e.getContent().pairs,function(T){return a(T[0],t)})}})},n.prototype.after=function(t){var e=this;return new n(function(){var a=e.getIndex().getLessThanOrEqualTo();return{index:new pf(e.getContent().index,function(T){return a(T,t)}),pairs:new pf(e.getContent().pairs,function(T){return a(T[0],t)})}})},n.prototype.between=function(t,e){return this.startAt(t).endAt(e)},n.prototype.toString=function(){for(var t=["__index__","__value__"],e=this.toPairs(),a=new(Vk()),T=0;T<e.length;++T){for(var F=e[T],ee=0;ee<F.length;++ee)a.cell(t[ee],F[ee]);a.newRow()}return a.toString()},n.parseInt=function(t,e){if(null!=t){if(!Mo(t))throw new Error("Called Series.parseInts, expected all values in the series to be strings, instead found a '"+typeof t+"' at index "+e);return 0===t.length?void 0:parseInt(t)}},n.prototype.parseInts=function(){return this.select(n.parseInt)},n.parseFloat=function(t,e){if(null!=t){if(!Mo(t))throw new Error("Called Series.parseFloats, expected all values in the series to be strings, instead found a '"+typeof t+"' at index "+e);return 0===t.length?void 0:parseFloat(t)}},n.prototype.parseFloats=function(){return this.select(n.parseFloat)},n.parseDate=function(t,e,a){if(null!=t){if(!Mo(t))throw new Error("Called Series.parseDates, expected all values in the series to be strings, instead found a '"+typeof t+"' at index "+e);return 0===t.length?void 0:sh(t,a).toDate()}},n.prototype.parseDates=function(t){if(t&&!Mo(t))throw new Error("Expected optional 'formatString' parameter to Series.parseDates to be a string (if specified).");return this.select(function(e,a){return n.parseDate(e,a,t)})},n.toString=function(t,e){if(void 0!==t)return null===t?null:e&&P2(t)?sh(t).format(e):e&&Cs(t)?LN()(t).format(e):t.toString()},n.prototype.toStrings=function(t){if(t&&!Mo(t))throw new Error("Expected optional 'formatString' parameter to Series.toStrings to be a string (if specified).");return this.select(function(e){return n.toString(e,t)})},n.prototype.bake=function(){return this.getContent().isBaked?this:new n({values:this.toArray(),pairs:this.toPairs(),baked:!0})},n.prototype.inflate=function(t){var e=this;if(t){if(!xi(t))throw new Error("Expected 'selector' parameter to Series.inflate to be a selector function.");return new Cu(function(){var a=e.getContent();return{values:new Eu(a.values,t),index:a.index,pairs:new Eu(a.pairs,function(T,F){return[T[0],t(T[1],F)]})}})}return new Cu(function(){var a=e.getContent();return{values:a.values,index:a.index,pairs:a.pairs}})},n.sum=function(t){return t.sum()},n.prototype.sum=function(){var F,ee,t=0;try{for(var e=ti(this),a=e.next();!a.done;a=e.next()){var T=a.value;null!=T&&(t+=T)}}catch(ce){F={error:ce}}finally{try{a&&!a.done&&(ee=e.return)&&ee.call(e)}finally{if(F)throw F.error}}return t},n.average=function(t){return t.average()},n.prototype.average=function(){var ee,ce,t=0,e=0;try{for(var a=ti(this),T=a.next();!T.done;T=a.next()){var F=T.value;null!=F&&(e+=1,t+=F)}}catch(xe){ee={error:xe}}finally{try{T&&!T.done&&(ce=a.return)&&ce.call(a)}finally{if(ee)throw ee.error}}return 0===e?0:t/e},n.median=function(t){return t.median()},n.prototype.median=function(){var t=this.where(function(ee){return null!=ee}),e=t.count();if(0===e)return 0;var a=t.orderBy(function(ee){return ee}).toArray();return e%2==0?(a[e/2-1]+a[e/2])/2:a[Math.floor(e/2)]},n.std=function(t){return t.std()},n.prototype.std=function(){var $e,ft,t=this.average(),e=0,a=0;try{for(var T=ti(this),F=T.next();!F.done;F=T.next()){var ee=F.value;if(null!=ee){e+=1;var xe=ee-t;a+=xe*xe}}}catch(yt){$e={error:yt}}finally{try{F&&!F.done&&(ft=T.return)&&ft.call(T)}finally{if($e)throw $e.error}}return 0===e?0:Math.sqrt(a/e)},n.min=function(t){return t.min()},n.prototype.min=function(){var t,ee,ce;try{for(var e=ti(this),a=e.next();!a.done;a=e.next()){var T=a.value;null!=T&&(t=void 0===t?T:Math.min(t,T))}}catch(xe){ee={error:xe}}finally{try{a&&!a.done&&(ce=e.return)&&ce.call(e)}finally{if(ee)throw ee.error}}return void 0===t?0:t},n.max=function(t){return t.max()},n.prototype.max=function(){var t,ee,ce;try{for(var e=ti(this),a=e.next();!a.done;a=e.next()){var T=a.value;null!=T&&(t=void 0===t?T:Math.max(t,T))}}catch(xe){ee={error:xe}}finally{try{a&&!a.done&&(ce=e.return)&&ce.call(e)}finally{if(ee)throw ee.error}}return void 0===t?0:t},n.prototype.invert=function(){return this.select(function(t){return null==t?t:-t})},n.prototype.counter=function(t){return this.groupSequentialBy(t).selectMany(function(e,a){return t(e.first())?function(n,t){if(!Cs(1))throw new Error("Expect 'start' parameter to 'dataForge.range' function to be a number.");if(!Cs(t))throw new Error("Expect 'count' parameter to 'dataForge.range' function to be a number.");for(var e=[],a=0;a<t;++a)e.push(1+a);return new ml(e)}(0,e.count()).withIndex(e.getIndex()).toPairs():function(n,t){for(var e=[],a=0;a<t;++a)e.push(0);return new ml(e)}(0,e.count()).withIndex(e.getIndex()).toPairs()}).withIndex(function(e){return e[0]}).select(function(e){return e[1]})},n.prototype.reverse=function(){var t=this;return new n(function(){return{values:new ig(t.getContent().values),index:new ig(t.getContent().index),pairs:new ig(t.getContent().pairs)}})},n.prototype.distinct=function(t){var e=this;return new n(function(){return{values:new z1(e.getContent().values,t),pairs:new z1(e.getContent().pairs,function(a){return t&&t(a[1])||a[1]})}})},n.prototype.groupBy=function(t){var e=this;if(!xi(t))throw new Error("Expected 'selector' parameter to 'Series.groupBy' to be a selector function that determines the value to group the series by.");return new n(function(){var yt,Ot,a=[],T={},F=0;try{for(var ee=ti(e.getContent().pairs),ce=ee.next();!ce.done;ce=ee.next()){var xe=ce.value,Re=t(xe[1],F);++F;var $e=T[Re];if($e)$e.push(xe);else{var ft=[];ft.push(xe),a.push(ft),T[Re]=ft}}}catch(nn){yt={error:nn}}finally{try{ce&&!ce.done&&(Ot=ee.return)&&Ot.call(ee)}finally{if(yt)throw yt.error}}return{values:a.map(function(nn){return new n({pairs:nn})})}})},n.prototype.groupSequentialBy=function(t){if(t){if(!xi(t))throw new Error("Expected 'selector' parameter to 'Series.groupSequentialBy' to be a selector function that determines the value to group the series by.")}else t=function(e){return e};return this.variableWindow(function(e,a){return t(e)===t(a)})},n.concat=function(t){if(!ls(t))throw new Error("Expected 'series' parameter to 'Series.concat' to be an array of series.");return new n(function(){var a=t.map(function(T){return T.getContent()});return{values:new F1(a.map(function(T){return T.values})),pairs:new F1(a.map(function(T){return T.pairs}))}})},n.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var $e,ft,yt,Ot,a=[this];try{for(var T=ti(t),F=T.next();!F.done;F=T.next()){var ee=F.value;if(ls(ee))try{for(var ce=ti(ee),xe=ce.next();!xe.done;xe=ce.next()){var Re=xe.value;a.push(Re)}}catch(nn){yt={error:nn}}finally{try{xe&&!xe.done&&(Ot=ce.return)&&Ot.call(ce)}finally{if(yt)throw yt.error}}else a.push(ee)}}catch(nn){$e={error:nn}}finally{try{F&&!F.done&&(ft=T.return)&&ft.call(T)}finally{if($e)throw $e.error}}return n.concat(a)},n.zip=function(t,e){var a=Array.from(t);if(0===a.length)return new n;var T=a[0];return T.none()?new n:new n(function(){var ee=a;return{index:T.getContent().index,values:new iD(ee.map(function(ce){return ce.getContent().values}),e)}})},n.prototype.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var a=t[t.length-1],T=[this].concat(t.slice(0,t.length-1));return n.zip(T,function(F){return a.apply(void 0,tD(F))})},n.prototype.orderBy=function(t){var e=this.getContent();return new uD({values:e.values,pairs:e.pairs,selector:t,direction:df.Ascending,parent:null})},n.prototype.orderByDescending=function(t){var e=this.getContent();return new uD({values:e.values,pairs:e.pairs,selector:t,direction:df.Descending,parent:null})},n.prototype.union=function(t,e){if(e&&!xi(e))throw new Error("Expected optional 'selector' parameter to 'Series.union' to be a selector function.");return this.concat(t).distinct(e)},n.prototype.intersection=function(t,e,a){if(e){if(!xi(e))throw new Error("Expected optional 'outerSelector' parameter to 'Series.intersection' to be a function.")}else e=function(F){return F};if(a){if(!xi(a))throw new Error("Expected optional 'innerSelector' parameter to 'Series.intersection' to be a function.")}else a=function(F){return F};return this.where(function(F){var ee=e(F);return t.where(function(ce){return ee===a(ce)}).any()})},n.prototype.except=function(t,e,a){if(e){if(!xi(e))throw new Error("Expected optional 'outerSelector' parameter to 'Series.except' to be a function.")}else e=function(F){return F};if(a){if(!xi(a))throw new Error("Expected optional 'innerSelector' parameter to 'Series.except' to be a function.")}else a=function(F){return F};return this.where(function(F){var ee=e(F);return t.where(function(ce){return ee===a(ce)}).none()})},n.prototype.join=function(t,e,a,T){if(!xi(e))throw new Error("Expected 'outerKeySelector' parameter of 'Series.join' to be a selector function.");if(!xi(a))throw new Error("Expected 'innerKeySelector' parameter of 'Series.join' to be a selector function.");if(!xi(T))throw new Error("Expected 'resultSelector' parameter of 'Series.join' to be a selector function.");var F=this;return new n(function(){var Kn,jn,Fr,ri,ee=t.groupBy(a).toObject(function(hi){return a(hi.first())},function(hi){return hi}),xe=(F.getContent(),[]);try{for(var Re=ti(F),$e=Re.next();!$e.done;$e=Re.next()){var ft=$e.value,Ot=ee[e(ft)];if(Ot)try{for(var nn=ti(Ot),_n=nn.next();!_n.done;_n=nn.next())xe.push(T(ft,_n.value))}catch(hi){Fr={error:hi}}finally{try{_n&&!_n.done&&(ri=nn.return)&&ri.call(nn)}finally{if(Fr)throw Fr.error}}}}catch(hi){Kn={error:hi}}finally{try{$e&&!$e.done&&(jn=Re.return)&&jn.call(Re)}finally{if(Kn)throw Kn.error}}return{values:xe}})},n.prototype.joinOuter=function(t,e,a,T){if(!xi(e))throw new Error("Expected 'outerKeySelector' parameter of 'Series.joinOuter' to be a selector function.");if(!xi(a))throw new Error("Expected 'innerKeySelector' parameter of 'Series.joinOuter' to be a selector function.");if(!xi(T))throw new Error("Expected 'resultSelector' parameter of 'Series.joinOuter' to be a selector function.");var F=this,ee=F.except(t,e,a).select(function(Re){return T(Re,null)}).resetIndex(),ce=t.except(F,a,e).select(function(Re){return T(null,Re)}).resetIndex(),xe=F.join(t,e,a,T);return ee.concat(xe).concat(ce).resetIndex()},n.prototype.joinOuterLeft=function(t,e,a,T){if(!xi(e))throw new Error("Expected 'outerKeySelector' parameter of 'Series.joinOuterLeft' to be a selector function.");if(!xi(a))throw new Error("Expected 'innerKeySelector' parameter of 'Series.joinOuterLeft' to be a selector function.");if(!xi(T))throw new Error("Expected 'resultSelector' parameter of 'Series.joinOuterLeft' to be a selector function.");var ee=this.except(t,e,a).select(function(xe){return T(xe,null)}).resetIndex(),ce=this.join(t,e,a,T);return ee.concat(ce).resetIndex()},n.prototype.joinOuterRight=function(t,e,a,T){if(!xi(e))throw new Error("Expected 'outerKeySelector' parameter of 'Series.joinOuterRight' to be a selector function.");if(!xi(a))throw new Error("Expected 'innerKeySelector' parameter of 'Series.joinOuterRight' to be a selector function.");if(!xi(T))throw new Error("Expected 'resultSelector' parameter of 'Series.joinOuterRight' to be a selector function.");var ee=t.except(this,a,e).select(function(xe){return T(null,xe)}).resetIndex();return this.join(t,e,a,T).concat(ee).resetIndex()},n.prototype.truncateStrings=function(t){if(!Cs(t))throw new Error("Expected 'maxLength' parameter to 'Series.truncateStrings' to be a number.");return this.select(function(e){return Mo(e)&&e.length>t?e.substring(0,t):e})},n.prototype.round=function(t){if(void 0!==t){if(!Cs(t))throw new Error("Expected 'numDecimalPlaces' parameter to 'Series.round' to be a number.")}else t=2;return this.select(function(e){return Cs(e)?parseFloat(e.toFixed(t)):e})},n.prototype.insertPair=function(t){if(!ls(t))throw new Error("Expected 'pair' parameter to 'Series.insertPair' to be an array.");if(2!==t.length)throw new Error("Expected 'pair' parameter to 'Series.insertPair' to be an array with two elements. The first element is the index, the second is the value.");return new n({pairs:[t]}).concat(this)},n.prototype.appendPair=function(t){if(!ls(t))throw new Error("Expected 'pair' parameter to 'Series.appendPair' to be an array.");if(2!==t.length)throw new Error("Expected 'pair' parameter to 'Series.appendPair' to be an array with two elements. The first element is the index, the second is the value.");return this.concat(new n({pairs:[t]}))},n.prototype.fillGaps=function(t,e){if(!xi(t))throw new Error("Expected 'comparer' parameter to 'Series.fillGaps' to be a comparer function that compares two values and returns a boolean.");if(!xi(e))throw new Error("Expected 'generator' parameter to 'Series.fillGaps' to be a generator function that takes two values and returns an array of generated pairs to span the gap.");return this.rollingWindow(2).selectMany(function(a){var T=a.toPairs(),F=T[0],ee=T[1];if(!t(F,ee))return[F];var ce=e(F,ee);if(!ls(ce))throw new Error("Expected return from 'generator' parameter to 'Series.fillGaps' to be an array of pairs, instead got a "+typeof ce);return[F].concat(ce)}).withIndex(function(a){return a[0]}).select(function(a){return a[1]}).concat(this.tail(1))},n.prototype.defaultIfEmpty=function(t){if(this.none()){if(t instanceof n)return t;if(ls(t))return new n(t);throw new Error("Expected 'defaultSequence' parameter to 'Series.defaultIfEmpty' to be an array or a series.")}return this},n.prototype.detectTypes=function(){var t=this;return new Cu(function(){var e=t.count(),a=t.select(function(T){var F=typeof T;return"object"===F&&P2(T)&&(F="date"),F}).aggregate({},function(T,F){var ee=T[F];return ee||(T[F]=ee={count:0}),++ee.count,T});return{columnNames:["Type","Frequency"],rows:Object.keys(a).map(function(T){return[T,a[T].count/e*100]})}})},n.prototype.detectValues=function(){var t=this;return new Cu(function(){var e=t.count(),a=t.aggregate(new Map,function(T,F){var ee=T.get(F);return ee||T.set(F,ee={count:0,value:F}),++ee.count,T});return{columnNames:["Value","Frequency"],rows:Array.from(a.keys()).map(function(T){var F=a.get(T);return[F.value,F.count/e*100]})}})},n.prototype.bucket=function(t){if(!Cs(t))throw new Error("Expected 'numBuckets' parameter to 'Series.bucket' to be a number.");if(this.none())return new Cu;var e=this,a=e.min(),ee=(e.max()-a)/(t-1);return e.select(function(ce){var xe=Math.floor((ce-a)/ee),Re=xe*ee+a;return{Value:ce,Bucket:xe,Min:Re,Mid:Re+.5*ee,Max:Re+ee}}).inflate()},n.prototype.getTypeCode=function(){return"series"},n.defaultCountIterable=new S2,n.defaultEmptyIterable=new nD,n}(),uD=function(n){function t(e){for(var a=this,T=[],F=[],ee=0,ce=e.parent,xe=[];null!==ce;)xe.push(ce),ce=ce.config.parent;xe.reverse();try{for(var Re=ti(xe),$e=Re.next();!$e.done;$e=Re.next()){var yt=$e.value.config;T.push(t.makeSortSpec(ee,yt.selector,yt.direction)),F.push(t.makeSortSpec(ee,t.makePairsSelector(yt.selector),yt.direction)),++ee}}catch(_n){Ot={error:_n}}finally{try{$e&&!$e.done&&(nn=Re.return)&&nn.call(Re)}finally{if(Ot)throw Ot.error}}return T.push(t.makeSortSpec(ee,e.selector,e.direction)),F.push(t.makeSortSpec(ee,t.makePairsSelector(e.selector),e.direction)),(a=n.call(this,{values:new B1(e.values,T),pairs:new B1(e.pairs,F)})||this).config=e,a;var Ot,nn}return C2(t,n),t.makeSortSpec=function(e,a,T){return{sortLevel:e,selector:a,direction:T}},t.makePairsSelector=function(e){return function(a,T){return e(a[1],T)}},t.prototype.thenBy=function(e){return new t({values:this.config.values,pairs:this.config.pairs,selector:e,direction:df.Ascending,parent:this})},t.prototype.thenByDescending=function(e){return new t({values:this.config.values,pairs:this.config.pairs,selector:e,direction:df.Descending,parent:this})},t}(ml),cD=function(n){function t(e){return n.call(this,e)||this}return C2(t,n),t.prototype.getType=function(){return this._type||(this._type=this.any()?sD(this.first()):"empty"),this._type},t.prototype.getLessThan=function(){switch(this.getType()){case"date":return function(e,a){return sh(e).isBefore(a)};case"string":case"number":return function(e,a){return e<a};case"empty":return function(){return!0};default:throw new Error("No less than operation available for type: "+this.getType())}},t.prototype.getLessThanOrEqualTo=function(){var e=this;return function(a,T){return!e.getGreaterThan()(a,T)}},t.prototype.getGreaterThan=function(){switch(this.getType()){case"date":return function(e,a){return sh(e).isAfter(a)};case"string":case"number":return function(e,a){return e>a};case"empty":return function(){return!0};default:throw new Error("No greater than operation available for type: "+this.getType())}},t}(ml);function L2(n,t){return n(t={exports:{}},t.exports),t.exports}var vz=function(t){return t instanceof Buffer},bz=L2(function(n){n.exports="function"==typeof Object.create?function(e,a){e.super_=a,e.prototype=Object.create(a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,a){e.super_=a;var T=function(){};T.prototype=a.prototype,e.prototype=new T,e.prototype.constructor=e}}),_z=L2(function(n){try{if("function"!=typeof nl.inherits)throw"";n.exports=nl.inherits}catch(e){n.exports=bz}}),nl=L2(function(n,t){var e=Object.getOwnPropertyDescriptors||function(ui){for(var Li=Object.keys(ui),po={},us=0;us<Li.length;us++)po[Li[us]]=Object.getOwnPropertyDescriptor(ui,Li[us]);return po},a=/%[sdj%]/g;t.format=function(Nr){if(!hi(Nr)){for(var ui=[],Li=0;Li<arguments.length;Li++)ui.push(ee(arguments[Li]));return ui.join(" ")}Li=1;for(var po=arguments,us=po.length,cs=String(Nr).replace(a,function(fs){if("%%"===fs)return"%";if(Li>=us)return fs;switch(fs){case"%s":return String(po[Li++]);case"%d":return Number(po[Li++]);case"%j":try{return JSON.stringify(po[Li++])}catch(ol){return"[Circular]"}default:return fs}}),Ro=po[Li];Li<us;Ro=po[++Li])jn(Ro)||!rl(Ro)?cs+=" "+Ro:cs+=" "+ee(Ro);return cs},t.deprecate=function(Nr,ui){if("undefined"!=typeof process&&!0===process.noDeprecation)return Nr;if("undefined"==typeof process)return function(){return t.deprecate(Nr,ui).apply(this,arguments)};var Li=!1;return function(){if(!Li){if(process.throwDeprecation)throw new Error(ui);process.traceDeprecation?console.trace(ui):console.error(ui),Li=!0}return Nr.apply(this,arguments)}};var F,T={};function ee(Nr,ui){var Li={seen:[],stylize:xe};return arguments.length>=3&&(Li.depth=arguments[2]),arguments.length>=4&&(Li.colors=arguments[3]),Kn(ui)?Li.showHidden=ui:ui&&t._extend(Li,ui),lo(Li.showHidden)&&(Li.showHidden=!1),lo(Li.depth)&&(Li.depth=2),lo(Li.colors)&&(Li.colors=!1),lo(Li.customInspect)&&(Li.customInspect=!0),Li.colors&&(Li.stylize=ce),$e(Li,Nr,Li.depth)}function ce(Nr,ui){var Li=ee.styles[ui];return Li?"\x1b["+ee.colors[Li][0]+"m"+Nr+"\x1b["+ee.colors[Li][1]+"m":Nr}function xe(Nr,ui){return Nr}function $e(Nr,ui,Li){if(Nr.customInspect&&ui&&Oa(ui.inspect)&&ui.inspect!==t.inspect&&(!ui.constructor||ui.constructor.prototype!==ui)){var po=ui.inspect(Li,Nr);return hi(po)||(po=$e(Nr,po,Li)),po}var us=function(Nr,ui){if(lo(ui))return Nr.stylize("undefined","undefined");if(hi(ui)){var Li="'"+JSON.stringify(ui).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Nr.stylize(Li,"string")}return ri(ui)?Nr.stylize(""+ui,"number"):Kn(ui)?Nr.stylize(""+ui,"boolean"):jn(ui)?Nr.stylize("null","null"):void 0}(Nr,ui);if(us)return us;var cs=Object.keys(ui),Ro=function(Nr){var ui={};return Nr.forEach(function(Li,po){ui[Li]=!0}),ui}(cs);if(Nr.showHidden&&(cs=Object.getOwnPropertyNames(ui)),il(ui)&&(cs.indexOf("message")>=0||cs.indexOf("description")>=0))return yt(ui);if(0===cs.length){if(Oa(ui))return Nr.stylize("[Function"+(ui.name?": "+ui.name:"")+"]","special");if(bo(ui))return Nr.stylize(RegExp.prototype.toString.call(ui),"regexp");if(vl(ui))return Nr.stylize(Date.prototype.toString.call(ui),"date");if(il(ui))return yt(ui)}var Cw,ol="",mf=!1,hb=["{","}"];return kn(ui)&&(mf=!0,hb=["[","]"]),Oa(ui)&&(ol=" [Function"+(ui.name?": "+ui.name:"")+"]"),bo(ui)&&(ol=" "+RegExp.prototype.toString.call(ui)),vl(ui)&&(ol=" "+Date.prototype.toUTCString.call(ui)),il(ui)&&(ol=" "+yt(ui)),0!==cs.length||mf&&0!=ui.length?Li<0?bo(ui)?Nr.stylize(RegExp.prototype.toString.call(ui),"regexp"):Nr.stylize("[Object]","special"):(Nr.seen.push(ui),Cw=mf?function(Nr,ui,Li,po,us){for(var cs=[],Ro=0,fs=ui.length;Ro<fs;++Ro)Vd(ui,String(Ro))?cs.push(nn(Nr,ui,Li,po,String(Ro),!0)):cs.push("");return us.forEach(function(ol){ol.match(/^\d+$/)||cs.push(nn(Nr,ui,Li,po,ol,!0))}),cs}(Nr,ui,Li,Ro,cs):cs.map(function(rG){return nn(Nr,ui,Li,Ro,rG,mf)}),Nr.seen.pop(),function(Nr,ui,Li){return Nr.reduce(function(us,cs){return cs.indexOf("\n"),us+cs.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Li[0]+(""===ui?"":ui+"\n ")+" "+Nr.join(",\n  ")+" "+Li[1]:Li[0]+ui+" "+Nr.join(", ")+" "+Li[1]}(Cw,ol,hb)):hb[0]+ol+hb[1]}function yt(Nr){return"["+Error.prototype.toString.call(Nr)+"]"}function nn(Nr,ui,Li,po,us,cs){var Ro,fs,ol;if((ol=Object.getOwnPropertyDescriptor(ui,us)||{value:ui[us]}).get?fs=Nr.stylize(ol.set?"[Getter/Setter]":"[Getter]","special"):ol.set&&(fs=Nr.stylize("[Setter]","special")),Vd(po,us)||(Ro="["+us+"]"),fs||(Nr.seen.indexOf(ol.value)<0?(fs=jn(Li)?$e(Nr,ol.value,null):$e(Nr,ol.value,Li-1)).indexOf("\n")>-1&&(fs=cs?fs.split("\n").map(function(mf){return"  "+mf}).join("\n").substr(2):"\n"+fs.split("\n").map(function(mf){return"   "+mf}).join("\n")):fs=Nr.stylize("[Circular]","special")),lo(Ro)){if(cs&&us.match(/^\d+$/))return fs;(Ro=JSON.stringify(""+us)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Ro=Ro.substr(1,Ro.length-2),Ro=Nr.stylize(Ro,"name")):(Ro=Ro.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Ro=Nr.stylize(Ro,"string"))}return Ro+": "+fs}function kn(Nr){return Array.isArray(Nr)}function Kn(Nr){return"boolean"==typeof Nr}function jn(Nr){return null===Nr}function ri(Nr){return"number"==typeof Nr}function hi(Nr){return"string"==typeof Nr}function lo(Nr){return void 0===Nr}function bo(Nr){return rl(Nr)&&"[object RegExp]"===Hl(Nr)}function rl(Nr){return"object"==typeof Nr&&null!==Nr}function vl(Nr){return rl(Nr)&&"[object Date]"===Hl(Nr)}function il(Nr){return rl(Nr)&&("[object Error]"===Hl(Nr)||Nr instanceof Error)}function Oa(Nr){return"function"==typeof Nr}function Hl(Nr){return Object.prototype.toString.call(Nr)}function tu(Nr){return Nr<10?"0"+Nr.toString(10):Nr.toString(10)}t.debuglog=function(Nr){if(lo(F)&&(F=process.env.NODE_DEBUG||""),Nr=Nr.toUpperCase(),!T[Nr])if(new RegExp("\\b"+Nr+"\\b","i").test(F)){var ui=process.pid;T[Nr]=function(){var Li=t.format.apply(t,arguments);console.error("%s %d: %s",Nr,ui,Li)}}else T[Nr]=function(){};return T[Nr]},t.inspect=ee,ee.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},ee.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=kn,t.isBoolean=Kn,t.isNull=jn,t.isNullOrUndefined=function(Nr){return null==Nr},t.isNumber=ri,t.isString=hi,t.isSymbol=function(Nr){return"symbol"==typeof Nr},t.isUndefined=lo,t.isRegExp=bo,t.isObject=rl,t.isDate=vl,t.isError=il,t.isFunction=Oa,t.isPrimitive=function(Nr){return null===Nr||"boolean"==typeof Nr||"number"==typeof Nr||"string"==typeof Nr||"symbol"==typeof Nr||void 0===Nr},t.isBuffer=vz;var sc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Vc(){var Nr=new Date,ui=[tu(Nr.getHours()),tu(Nr.getMinutes()),tu(Nr.getSeconds())].join(":");return[Nr.getDate(),sc[Nr.getMonth()],ui].join(" ")}function Vd(Nr,ui){return Object.prototype.hasOwnProperty.call(Nr,ui)}t.log=function(){console.log("%s - %s",Vc(),t.format.apply(t,arguments))},t.inherits=_z,t._extend=function(Nr,ui){if(!ui||!rl(ui))return Nr;for(var Li=Object.keys(ui),po=Li.length;po--;)Nr[Li[po]]=ui[Li[po]];return Nr};var Pl="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function Ew(Nr,ui){if(!Nr){var Li=new Error("Promise was rejected with a falsy value");Li.reason=Nr,Nr=Li}return ui(Nr)}t.promisify=function(ui){if("function"!=typeof ui)throw new TypeError('The "original" argument must be of type Function');if(Pl&&ui[Pl]){var Li;if("function"!=typeof(Li=ui[Pl]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Li,Pl,{value:Li,enumerable:!1,writable:!1,configurable:!0}),Li}function Li(){for(var po,us,cs=new Promise(function(ol,mf){po=ol,us=mf}),Ro=[],fs=0;fs<arguments.length;fs++)Ro.push(arguments[fs]);Ro.push(function(ol,mf){ol?us(ol):po(mf)});try{ui.apply(this,Ro)}catch(ol){us(ol)}return cs}return Object.setPrototypeOf(Li,Object.getPrototypeOf(ui)),Pl&&Object.defineProperty(Li,Pl,{value:Li,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Li,e(ui))},t.promisify.custom=Pl,t.callbackify=function(Nr){if("function"!=typeof Nr)throw new TypeError('The "original" argument must be of type Function');function ui(){for(var Li=[],po=0;po<arguments.length;po++)Li.push(arguments[po]);var us=Li.pop();if("function"!=typeof us)throw new TypeError("The last argument must be of type Function");var cs=this,Ro=function(){return us.apply(cs,arguments)};Nr.apply(this,Li).then(function(fs){process.nextTick(Ro,null,fs)},function(fs){process.nextTick(Ew,fs,Ro)})}return Object.setPrototypeOf(ui,Object.getPrototypeOf(Nr)),Object.defineProperties(ui,e(Nr)),ui}}),xz=nl.isFunction;function fD(n,t){if(!Mo(n))throw new Error("Expected 'csvTextString' parameter to 'dataForge.fromCSV' to be a string containing data encoded in the CSV format.");if(t){if(!Yu(t))throw new Error("Expected 'config' parameter to 'dataForge.fromCSV' to be an object with CSV parsing configuration options.");if(t.columnNames){if(!xz(t.columnNames[Symbol.iterator])&&!ls(t.columnNames))throw new Error("Expect 'columnNames' field of 'config' parameter to DataForge.fromCSV to be an array or iterable of strings that specifies column names.");try{for(var e=ti(t.columnNames),a=e.next();!a.done;a=e.next())if(!Mo(a.value))throw new Error("Expect 'columnNames' field of 'config' parameter to DataForge.fromCSV to be an array of strings that specify column names.")}catch($e){xe={error:$e}}finally{try{a&&!a.done&&(Re=e.return)&&Re.call(e)}finally{if(xe)throw xe.error}}}void 0===t.skipEmptyLines&&((t=Object.assign({},t)).skipEmptyLines=!0)}else t={skipEmptyLines:!0};var ce,xe,Re,ee=Zk().parse(n,t).data;return 0===ee.length?new Cu:(ee=ee.map(function($e){return $e.map(function(ft){return Mo(ft)?ft.trim():ft})}),ce=t&&t.columnNames?t.columnNames:ee.shift(),new Cu({rows:ee,columnNames:ce}))}sh.extend(Qk);class hD{}class dD{}class Oh{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const a=e.indexOf(":");if(a>0){const T=e.slice(0,a),F=T.toLowerCase(),ee=e.slice(a+1).trim();this.maybeSetNormalizedName(T,F),this.headers.has(F)?this.headers.get(F).push(ee):this.headers.set(F,[ee])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let a=t[e];const T=e.toLowerCase();"string"==typeof a&&(a=[a]),a.length>0&&(this.headers.set(T,a),this.maybeSetNormalizedName(e,T))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Oh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Oh;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Oh?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let a=t.value;if("string"==typeof a&&(a=[a]),0===a.length)return;this.maybeSetNormalizedName(t.name,e);const T=("a"===t.op?this.headers.get(e):void 0)||[];T.push(...a),this.headers.set(e,T);break;case"d":const F=t.value;if(F){let ee=this.headers.get(e);if(!ee)return;ee=ee.filter(ce=>-1===F.indexOf(ce)),0===ee.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,ee)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Az{encodeKey(t){return pD(t)}encodeValue(t){return pD(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const kz=/%(\d[a-f0-9])/gi,Dz={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function pD(n){return encodeURIComponent(n).replace(kz,(t,e)=>{var a;return null!==(a=Dz[e])&&void 0!==a?a:t})}function gD(n){return`${n}`}class Od{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Az,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(T=>{const F=T.indexOf("="),[ee,ce]=-1==F?[t.decodeKey(T),""]:[t.decodeKey(T.slice(0,F)),t.decodeValue(T.slice(F+1))],xe=e.get(ee)||[];xe.push(ce),e.set(ee,xe)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const a=t.fromObject[e];this.map.set(e,Array.isArray(a)?a:[a])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(a=>{const T=t[a];Array.isArray(T)?T.forEach(F=>{e.push({param:a,value:F,op:"a"})}):e.push({param:a,value:T,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(a=>e+"="+this.encoder.encodeValue(a)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Od({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(gD(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let a=this.map.get(t.param)||[];const T=a.indexOf(gD(t.value));-1!==T&&a.splice(T,1),a.length>0?this.map.set(t.param,a):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Ez{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function mD(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function yD(n){return"undefined"!=typeof Blob&&n instanceof Blob}function vD(n){return"undefined"!=typeof FormData&&n instanceof FormData}class oy{constructor(t,e,a,T){let F;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||T?(this.body=void 0!==a?a:null,F=T):F=a,F&&(this.reportProgress=!!F.reportProgress,this.withCredentials=!!F.withCredentials,F.responseType&&(this.responseType=F.responseType),F.headers&&(this.headers=F.headers),F.context&&(this.context=F.context),F.params&&(this.params=F.params)),this.headers||(this.headers=new Oh),this.context||(this.context=new Ez),this.params){const ee=this.params.toString();if(0===ee.length)this.urlWithParams=e;else{const ce=e.indexOf("?");this.urlWithParams=e+(-1===ce?"?":ce<e.length-1?"&":"")+ee}}else this.params=new Od,this.urlWithParams=e}serializeBody(){return null===this.body?null:mD(this.body)||yD(this.body)||vD(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Od?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||vD(this.body)?null:yD(this.body)?this.body.type||null:mD(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Od?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const a=t.method||this.method,T=t.url||this.url,F=t.responseType||this.responseType,ee=void 0!==t.body?t.body:this.body,ce=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,xe=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let Re=t.headers||this.headers,$e=t.params||this.params;const ft=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(Re=Object.keys(t.setHeaders).reduce((yt,Ot)=>yt.set(Ot,t.setHeaders[Ot]),Re)),t.setParams&&($e=Object.keys(t.setParams).reduce((yt,Ot)=>yt.set(Ot,t.setParams[Ot]),$e)),new oy(a,T,ee,{params:$e,headers:Re,context:ft,reportProgress:xe,responseType:F,withCredentials:ce})}}var Ul=(()=>((Ul=Ul||{})[Ul.Sent=0]="Sent",Ul[Ul.UploadProgress=1]="UploadProgress",Ul[Ul.ResponseHeader=2]="ResponseHeader",Ul[Ul.DownloadProgress=3]="DownloadProgress",Ul[Ul.Response=4]="Response",Ul[Ul.User=5]="User",Ul))();class R2{constructor(t,e=200,a="OK"){this.headers=t.headers||new Oh,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||a,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class F2 extends R2{constructor(t={}){super(t),this.type=Ul.ResponseHeader}clone(t={}){return new F2({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class V1 extends R2{constructor(t={}){super(t),this.type=Ul.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new V1({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class bD extends R2{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function N2(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let _D=(()=>{class n{constructor(e){this.handler=e}request(e,a,T={}){let F;if(e instanceof oy)F=e;else{let xe,Re;xe=T.headers instanceof Oh?T.headers:new Oh(T.headers),T.params&&(Re=T.params instanceof Od?T.params:new Od({fromObject:T.params})),F=new oy(e,a,void 0!==T.body?T.body:null,{headers:xe,context:T.context,params:Re,reportProgress:T.reportProgress,responseType:T.responseType||"json",withCredentials:T.withCredentials})}const ee=Ia(F).pipe(q0(xe=>this.handler.handle(xe)));if(e instanceof oy||"events"===T.observe)return ee;const ce=ee.pipe(Vl(xe=>xe instanceof V1));switch(T.observe||"body"){case"body":switch(F.responseType){case"arraybuffer":return ce.pipe(B(xe=>{if(null!==xe.body&&!(xe.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return xe.body}));case"blob":return ce.pipe(B(xe=>{if(null!==xe.body&&!(xe.body instanceof Blob))throw new Error("Response is not a Blob.");return xe.body}));case"text":return ce.pipe(B(xe=>{if(null!==xe.body&&"string"!=typeof xe.body)throw new Error("Response is not a string.");return xe.body}));case"json":default:return ce.pipe(B(xe=>xe.body))}case"response":return ce;default:throw new Error(`Unreachable: unhandled observe type ${T.observe}}`)}}delete(e,a={}){return this.request("DELETE",e,a)}get(e,a={}){return this.request("GET",e,a)}head(e,a={}){return this.request("HEAD",e,a)}jsonp(e,a){return this.request("JSONP",e,{params:(new Od).append(a,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,a={}){return this.request("OPTIONS",e,a)}patch(e,a,T={}){return this.request("PATCH",e,N2(T,a))}post(e,a,T={}){return this.request("POST",e,N2(T,a))}put(e,a,T={}){return this.request("PUT",e,N2(T,a))}}return n.\u0275fac=function(e){return new(e||n)(Hr(hD))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();class xD{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const wD=new Ta("HTTP_INTERCEPTORS");let Iz=(()=>{class n{intercept(e,a){return a.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();const Pz=/^\)\]\}',?\n/;let TD=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new C(a=>{const T=this.xhrFactory.build();if(T.open(e.method,e.urlWithParams),e.withCredentials&&(T.withCredentials=!0),e.headers.forEach((Ot,nn)=>T.setRequestHeader(Ot,nn.join(","))),e.headers.has("Accept")||T.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const Ot=e.detectContentTypeHeader();null!==Ot&&T.setRequestHeader("Content-Type",Ot)}if(e.responseType){const Ot=e.responseType.toLowerCase();T.responseType="json"!==Ot?Ot:"text"}const F=e.serializeBody();let ee=null;const ce=()=>{if(null!==ee)return ee;const Ot=1223===T.status?204:T.status,nn=T.statusText||"OK",_n=new Oh(T.getAllResponseHeaders()),kn=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(T)||e.url;return ee=new F2({headers:_n,status:Ot,statusText:nn,url:kn}),ee},xe=()=>{let{headers:Ot,status:nn,statusText:_n,url:kn}=ce(),Kn=null;204!==nn&&(Kn=void 0===T.response?T.responseText:T.response),0===nn&&(nn=Kn?200:0);let jn=nn>=200&&nn<300;if("json"===e.responseType&&"string"==typeof Kn){const Fr=Kn;Kn=Kn.replace(Pz,"");try{Kn=""!==Kn?JSON.parse(Kn):null}catch(ri){Kn=Fr,jn&&(jn=!1,Kn={error:ri,text:Kn})}}jn?(a.next(new V1({body:Kn,headers:Ot,status:nn,statusText:_n,url:kn||void 0})),a.complete()):a.error(new bD({error:Kn,headers:Ot,status:nn,statusText:_n,url:kn||void 0}))},Re=Ot=>{const{url:nn}=ce(),_n=new bD({error:Ot,status:T.status||0,statusText:T.statusText||"Unknown Error",url:nn||void 0});a.error(_n)};let $e=!1;const ft=Ot=>{$e||(a.next(ce()),$e=!0);let nn={type:Ul.DownloadProgress,loaded:Ot.loaded};Ot.lengthComputable&&(nn.total=Ot.total),"text"===e.responseType&&!!T.responseText&&(nn.partialText=T.responseText),a.next(nn)},yt=Ot=>{let nn={type:Ul.UploadProgress,loaded:Ot.loaded};Ot.lengthComputable&&(nn.total=Ot.total),a.next(nn)};return T.addEventListener("load",xe),T.addEventListener("error",Re),T.addEventListener("timeout",Re),T.addEventListener("abort",Re),e.reportProgress&&(T.addEventListener("progress",ft),null!==F&&T.upload&&T.upload.addEventListener("progress",yt)),T.send(F),a.next({type:Ul.Sent}),()=>{T.removeEventListener("error",Re),T.removeEventListener("abort",Re),T.removeEventListener("load",xe),T.removeEventListener("timeout",Re),e.reportProgress&&(T.removeEventListener("progress",ft),null!==F&&T.upload&&T.upload.removeEventListener("progress",yt)),T.readyState!==T.DONE&&T.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(Hr(x5))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})();const z2=new Ta("XSRF_COOKIE_NAME"),B2=new Ta("XSRF_HEADER_NAME");class AD{}let Lz=(()=>{class n{constructor(e,a,T){this.doc=e,this.platform=a,this.cookieName=T,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=c5(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(Hr(ss),Hr(Nm),Hr(z2))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})(),j2=(()=>{class n{constructor(e,a){this.tokenService=e,this.headerName=a}intercept(e,a){const T=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||T.startsWith("http://")||T.startsWith("https://"))return a.handle(e);const F=this.tokenService.getToken();return null!==F&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,F)})),a.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(Hr(AD),Hr(B2))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})(),Rz=(()=>{class n{constructor(e,a){this.backend=e,this.injector=a,this.chain=null}handle(e){if(null===this.chain){const a=this.injector.get(wD,[]);this.chain=a.reduceRight((T,F)=>new xD(T,F),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(Hr(dD),Hr(no))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac}),n})(),Fz=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:j2,useClass:Iz}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:z2,useValue:e.cookieName}:[],e.headerName?{provide:B2,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({providers:[j2,{provide:wD,useExisting:j2,multi:!0},{provide:AD,useClass:Lz},{provide:z2,useValue:"XSRF-TOKEN"},{provide:B2,useValue:"X-XSRF-TOKEN"}]}),n})(),Nz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({providers:[_D,{provide:hD,useClass:Rz},TD,{provide:dD,useExisting:TD}],imports:[[Fz.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),zz=(()=>{class n{constructor(e){this.http=e}getExampleInput(){return this.http.get("assets/all.correlationmatrix.proteinGroups.csv",{observe:"response",responseType:"text"})}}return n.\u0275fac=function(e){return new(e||n)(Hr(_D))},n.\u0275prov=Mn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bz=(()=>{class n{constructor(e){this.http=e,this.fileName="",this.dataframe=new bi}handleFile(e){if(e.target){const a=e.target;if(a.files){this.file=a.files[0],this.fileName=a.files[0].name;const T=new FileReader;T.onload=F=>{this.df=fD(T.result),this.dataframe.emit(this.df)},T.readAsText(this.file)}}}loadTest(){this.http.getExampleInput().subscribe(e=>{this.df=fD(e.body),this.dataframe.emit(this.df)})}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(Wn(zz))},n.\u0275cmp=$r({type:n,selectors:[["app-file-uploader"]],outputs:{dataframe:"dataframe"},decls:15,vars:1,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-10"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],["id","label-input-file",1,"input-group-text"],[1,"custom-file"],["type","file","aria-label","input-file","aria-describedby","label-input-file",1,"custom-file-input",3,"change"],["for","label-input-file",1,"custom-file-label"],[1,"col-2"],[1,"btn","btn-primary",3,"click"]],template:function(e,a){1&e&&(Gr(0,"div",0),Gr(1,"div",1),Gr(2,"div",2),Gr(3,"div",3),Gr(4,"div",4),Gr(5,"div",5),Gr(6,"span",6),Qo(7,"Input File:"),qr(),qr(),Gr(8,"div",7),Gr(9,"input",8),ca("change",function(F){return a.handleFile(F)}),qr(),Gr(10,"label",9),Qo(11),qr(),qr(),qr(),qr(),qr(),Gr(12,"div",10),Gr(13,"button",11),ca("click",function(){return a.loadTest()}),Qo(14,"Load test data"),qr(),qr(),qr(),qr()),2&e&&(Kr(11),gc(a.fileName||"Select File"))},styles:[""]}),n})();function MD(n,t,e,a,T,F,ee){try{var ce=n[F](ee),xe=ce.value}catch(Re){return void e(Re)}ce.done?t(xe):Promise.resolve(xe).then(a,T)}function DD(n,t,e,a){return new(e||(e=Promise))(function(F,ee){function ce($e){try{Re(a.next($e))}catch(ft){ee(ft)}}function xe($e){try{Re(a.throw($e))}catch(ft){ee(ft)}}function Re($e){$e.done?F($e.value):function(F){return F instanceof e?F:new e(function(ee){ee(F)})}($e.value).then(ce,xe)}Re((a=a.apply(n,t||[])).next())})}const Hz=["plot"],Gz=["*"];class ko{static setModuleName(t){ko.moduleName=t}static getModuleName(){return ko.moduleName}static setPlotly(t){if("object"==typeof t&&"function"!=typeof t.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");ko.plotly=t}static insert(t){return-1===ko.instances.indexOf(t)&&ko.instances.push(t),t}static remove(t){const e=ko.instances.indexOf(t);e>=0&&(ko.instances.splice(e,1),ko.plotly.purge(t))}getInstanceByDivId(t){for(const e of ko.instances)if(e&&e.id===t)return e}getPlotly(){return DD(this,void 0,void 0,function*(){return yield this.waitFor(()=>"waiting"!==this._getPlotly()),this._getPlotly()})}_getPlotly(){if(void 0===ko.plotly)throw new Error("ViaCDN"===ko.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return ko.plotly}waitFor(t){return new Promise(e=>{const a=()=>{t()?e():setTimeout(a,10)};a()})}newPlot(t,e,a,T,F){return DD(this,void 0,void 0,function*(){if(yield this.waitFor(()=>"waiting"!==this._getPlotly()),F){const ee={data:e,layout:a,config:T,frames:F};return this._getPlotly().newPlot(t,ee).then(()=>ko.insert(t))}return this._getPlotly().newPlot(t,e,a,T).then(()=>ko.insert(t))})}plot(t,e,a,T,F){if(F){const ee={data:e,layout:a,config:T,frames:F};return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(t,ee):this._getPlotly().newPlot(t,ee)}return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(t,e,a,T):this._getPlotly().newPlot(t,e,a,T)}update(t,e,a,T,F){if(F){const ee={data:e,layout:a,config:T,frames:F};return this._getPlotly().react(t,ee)}return this._getPlotly().react(t,e,a,T)}resize(t){return this._getPlotly().Plots.resize(t)}}ko.\u0275fac=function(t){return new(t||ko)},ko.instances=[],ko.plotly=void 0,ko.moduleName=void 0,ko.\u0275prov=Mn({factory:function(){return new ko},token:ko,providedIn:"root"});let qz=(()=>{class n{constructor(e,a,T){this.plotly=e,this.iterableDiffers=a,this.keyValueDiffers=T,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new bi,this.update=new bi,this.purge=new bi,this.error=new bi,this.afterExport=new bi,this.afterPlot=new bi,this.animated=new bi,this.animatingFrame=new bi,this.animationInterrupted=new bi,this.autoSize=new bi,this.beforeExport=new bi,this.buttonClicked=new bi,this.click=new bi,this.plotlyClick=new bi,this.clickAnnotation=new bi,this.deselect=new bi,this.doubleClick=new bi,this.framework=new bi,this.hover=new bi,this.legendClick=new bi,this.legendDoubleClick=new bi,this.react=new bi,this.relayout=new bi,this.restyle=new bi,this.redraw=new bi,this.selected=new bi,this.selecting=new bi,this.sliderChange=new bi,this.sliderEnd=new bi,this.sliderStart=new bi,this.transitioning=new bi,this.transitionInterrupted=new bi,this.unhover=new bi,this.relayouting=new bi,this.treemapclick=new bi,this.sunburstclick=new bi,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover","relayouting","treemapclick","sunburstclick"]}ngOnInit(){this.createPlot().then(()=>{const e=this.createFigure();this.initialized.emit(e)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);const e=this.createFigure();this.purge.emit(e),ko.remove(this.plotlyInstance)}ngOnChanges(e){let a=!1;const T=e.revision;T&&!T.isFirstChange()&&(a=!0);const F=e.debug;F&&!F.isFirstChange()&&(a=!0),a&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let e=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(e=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(e=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),e&&this.plotlyInstance&&this.updatePlot()}getWindow(){return window}getClassName(){let e=[this.defaultClassName];return Array.isArray(this.className)?e=e.concat(this.className):this.className&&e.push(this.className),e.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then(e=>{this.plotlyInstance=e,this.getWindow().gd=this.debug?e:void 0,this.eventNames.forEach(a=>{const T=`plotly_${a.toLowerCase()}`;e.on(T,F=>this[a].emit(F))}),e.on("plotly_click",a=>{this.click.emit(a),this.plotlyClick.emit(a)}),this.updateWindowResizeHandler()},e=>{console.error("Error while plotting:",e),this.error.emit(e)})}createFigure(){const e=this.plotlyInstance;return{data:e.data,layout:e.layout,frames:e._transitionData?e._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const a=new Error("Plotly component wasn't initialized");throw this.error.emit(a),a}const e=Object.assign({},this.layout);return this.plotly.update(this.plotlyInstance,this.data,e,this.config,this.frames).then(()=>{const a=this.createFigure();this.update.emit(a)},a=>{console.error("Error while updating plot:",a),this.error.emit(a)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(e,a){const T=Object.assign({},a,{uid:""});return JSON.stringify(T)}}return n.\u0275fac=function(e){return new(e||n)(Wn(ko),Wn(L0),Wn(yp))},n.\u0275cmp=$r({type:n,selectors:[["plotly-plot"]],viewQuery:function(e,a){if(1&e&&kd(Hz,7),2&e){let T;as(T=os())&&(a.plotEl=T.first)}},inputs:{revision:"revision",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision",data:"data",layout:"layout",config:"config",frames:"frames",style:"style",divId:"divId",className:"className"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",relayouting:"relayouting",treemapclick:"treemapclick",sunburstclick:"sunburstclick"},features:[Ho([ko]),Ci],ngContentSelectors:Gz,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(e,a){1&e&&(wd(),Gr(0,"div",0,1),Td(2),qr()),2&e&&(li("ngClass",a.getClassName())("ngStyle",a.style),Lo("id",a.divId))},directives:[f5,g5],encapsulation:2}),n})(),og=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({providers:[ko],imports:[[Mu]]}),n})(),SD=(()=>{class n{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");ko.setPlotly(n.plotlyjs)}isValid(){return void 0!==n.plotlyjs&&("function"==typeof n.plotlyjs.plot||"function"==typeof n.plotlyjs.newPlot)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({providers:[ko],imports:[[Mu,og],og]}),n.plotlyjs={},n})();function H1(n,t){return new C(e=>{const a=n.length;if(0===a)return void e.complete();const T=new Array(a);let F=0,ee=0;for(let ce=0;ce<a;ce++){const xe=pe(n[ce]);let Re=!1;e.add(xe.subscribe({next:$e=>{Re||(Re=!0,ee++),T[ce]=$e},error:$e=>e.error($e),complete:()=>{F++,(F===a||!Re)&&(ee===a&&e.next(t?t.reduce(($e,ft,yt)=>($e[ft]=T[yt],$e),{}):T),e.complete())}}))}})}let ID=(()=>{class n{constructor(e,a){this._renderer=e,this._elementRef=a,this.onChange=T=>{},this.onTouched=()=>{}}setProperty(e,a){this._renderer.setProperty(this._elementRef.nativeElement,e,a)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(Wn(wu),Wn(ro))},n.\u0275dir=vr({type:n}),n})(),Op=(()=>{class n extends ID{}return n.\u0275fac=function(){let t;return function(a){return(t||(t=na(n)))(a||n)}}(),n.\u0275dir=vr({type:n,features:[$s]}),n})();const Su=new Ta("NgValueAccessor"),Yz={provide:Su,useExisting:hn(()=>G1),multi:!0},Xz=new Ta("CompositionEventMode");let G1=(()=>{class n extends ID{constructor(e,a,T){super(e,a),this._compositionMode=T,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=ih()?ih().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(Wn(wu),Wn(ro),Wn(Xz,8))},n.\u0275dir=vr({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,a){1&e&&ca("input",function(F){return a._handleInput(F.target.value)})("blur",function(){return a.onTouched()})("compositionstart",function(){return a._compositionStart()})("compositionend",function(F){return a._compositionEnd(F.target.value)})},features:[Ho([Yz]),$s]}),n})();const Iu=new Ta("NgValidators"),Rd=new Ta("NgAsyncValidators");function UD(n){return null!=n}function HD(n){const t=pm(n)?pe(n):n;return yv(t),t}function GD(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function qD(n,t){return t.map(e=>e(n))}function WD(n){return n.map(t=>function(n){return!n.validate}(t)?t:e=>t.validate(e))}function U2(n){return null!=n?function(n){if(!n)return null;const t=n.filter(UD);return 0==t.length?null:function(e){return GD(qD(e,t))}}(WD(n)):null}function H2(n){return null!=n?function(n){if(!n)return null;const t=n.filter(UD);return 0==t.length?null:function(e){return function(...n){if(1===n.length){const t=n[0];if(r(t))return H1(t,null);if(u(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return H1(e.map(a=>t[a]),e)}}if("function"==typeof n[n.length-1]){const t=n.pop();return H1(n=1===n.length&&r(n[0])?n[0]:n,null).pipe(B(e=>t(...e)))}return H1(n,null)}(qD(e,t).map(HD)).pipe(B(GD))}}(WD(n)):null}function ZD(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function G2(n){return n?Array.isArray(n)?n:[n]:[]}function q1(n,t){return Array.isArray(n)?n.includes(t):n===t}function KD(n,t){const e=G2(t);return G2(n).forEach(T=>{q1(e,T)||e.push(T)}),e}function QD(n,t){return G2(t).filter(e=>!q1(n,e))}let eE=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=U2(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=H2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,a){return!!this.control&&this.control.hasError(e,a)}getError(e,a){return this.control?this.control.getError(e,a):null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=vr({type:n}),n})(),oc=(()=>{class n extends eE{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let t;return function(a){return(t||(t=na(n)))(a||n)}}(),n.\u0275dir=vr({type:n,features:[$s]}),n})();class Nd extends eE{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let nE=(()=>{class n extends class{constructor(t){this._cd=t}is(t){var e,a,T;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(T=null===(a=this._cd)||void 0===a?void 0:a.control)||void 0===T?void 0:T[t])}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(Wn(Nd,2))},n.\u0275dir=vr({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,a){2&e&&Za("ng-untouched",a.is("untouched"))("ng-touched",a.is("touched"))("ng-pristine",a.is("pristine"))("ng-dirty",a.is("dirty"))("ng-valid",a.is("valid"))("ng-invalid",a.is("invalid"))("ng-pending",a.is("pending"))},features:[$s]}),n})();function sy(n,t){(function(n,t){const e=function(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(ZD(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const a=function(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(ZD(a,t.asyncValidator)):"function"==typeof a&&n.setAsyncValidators([a]);const T=()=>n.updateValueAndValidity();Y1(t._rawValidators,T),Y1(t._rawAsyncValidators,T)})(n,t),t.valueAccessor.writeValue(n.value),function(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&rE(n,t)})}(n,t),function(n,t){const e=(a,T)=>{t.valueAccessor.writeValue(a),T&&t.viewToModelUpdate(a)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&rE(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function(n,t){if(t.valueAccessor.setDisabledState){const e=a=>{t.valueAccessor.setDisabledState(a)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function Y1(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function rE(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function X1(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const ly="VALID",J1="INVALID",sg="PENDING",uy="DISABLED";function Y2(n){return(X2(n)?n.validators:n)||null}function oE(n){return Array.isArray(n)?U2(n):n||null}function Z2(n,t){return(X2(t)?t.asyncValidators:n)||null}function sE(n){return Array.isArray(n)?H2(n):n||null}function X2(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class J2{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=oE(this._rawValidators),this._composedAsyncValidatorFn=sE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ly}get invalid(){return this.status===J1}get pending(){return this.status==sg}get disabled(){return this.status===uy}get enabled(){return this.status!==uy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=oE(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=sE(t)}addValidators(t){this.setValidators(KD(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(KD(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(QD(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(QD(t,this._rawAsyncValidators))}hasValidator(t){return q1(this._rawValidators,t)}hasAsyncValidator(t){return q1(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=sg,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=uy,this.errors=null,this._forEachChild(a=>{a.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(a=>a(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ly,this._forEachChild(a=>{a.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(a=>a(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ly||this.status===sg)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?uy:ly}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=sg,this._hasOwnPendingAsyncValidator=!0;const e=HD(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(a=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(a,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let a=n;return t.forEach(T=>{a=a instanceof K2?a.controls.hasOwnProperty(T)?a.controls[T]:null:a instanceof uB&&a.at(T)||null}),a}(this,t)}getError(t,e){const a=e?this.get(e):this;return a&&a.errors?a.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new bi,this.statusChanges=new bi}_calculateStatus(){return this._allControlsDisabled()?uy:this.errors?J1:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sg)?sg:this._anyControlsHaveStatus(J1)?J1:ly}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){X2(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class K1 extends J2{constructor(t=null,e,a){super(Y2(e),Z2(a,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(a=>a(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){X1(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){X1(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class K2 extends J2{constructor(t,e,a){super(Y2(e),Z2(a,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,a={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,a={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(a=>{this._throwIfControlMissing(a),this.controls[a].setValue(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(a=>{this.controls[a]&&this.controls[a].patchValue(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((a,T)=>{a.reset(t[T],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,a)=>(t[a]=e instanceof K1?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,a)=>!!a._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const a=this.controls[e];a&&t(a,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const a=this.controls[e];if(this.contains(e)&&t(a))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,a)=>((e.enabled||this.disabled)&&(t[a]=e.value),t))}_reduceChildren(t,e){let a=t;return this._forEachChild((T,F)=>{a=e(a,T,F)}),a}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,a)=>{if(void 0===t[a])throw new Error(`Must supply a value for form control with name: '${a}'.`)})}}class uB extends J2{constructor(t,e,a){super(Y2(e),Z2(a,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,a={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:a.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,a={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((a,T)=>{this._throwIfControlMissing(T),this.at(T).setValue(a,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((a,T)=>{this.at(T)&&this.at(T).patchValue(a,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((a,T)=>{a.reset(t[T],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof K1?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,a)=>!!a._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,a)=>{t(e,a)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,a)=>{if(void 0===t[a])throw new Error(`Must supply a value for form control at index: ${a}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const hB={provide:Nd,useExisting:hn(()=>ew)},cE=(()=>Promise.resolve(null))();let ew=(()=>{class n extends Nd{constructor(e,a,T,F){super(),this.control=new K1,this._registered=!1,this.update=new bi,this._parent=e,this._setValidators(a),this._setAsyncValidators(T),this.valueAccessor=function(n,t){if(!t)return null;let e,a,T;return Array.isArray(t),t.forEach(F=>{F.constructor===G1?e=F:function(n){return Object.getPrototypeOf(n.constructor)===Op}(F)?a=F:T=F}),T||a||e||null}(0,F)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,t){return[...t.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){sy(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){cE.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const a=e.isDisabled.currentValue,T=""===a||a&&"false"!==a;cE.then(()=>{T&&!this.control.disabled?this.control.disable():!T&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(e){return new(e||n)(Wn(oc,9),Wn(Iu,10),Wn(Rd,10),Wn(Su,10))},n.\u0275dir=vr({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ho([hB]),$s,Ci]}),n})();const pB={provide:Su,useExisting:hn(()=>tw),multi:!0};let tw=(()=>{class n extends Op{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=a=>{e(""==a?null:parseFloat(a))}}}return n.\u0275fac=function(){let t;return function(a){return(t||(t=na(n)))(a||n)}}(),n.\u0275dir=vr({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,a){1&e&&ca("input",function(F){return a.onChange(F.target.value)})("blur",function(){return a.onTouched()})},features:[Ho([pB]),$s]}),n})(),fE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({}),n})();const nw=new Ta("NgModelWithFormControlWarning");let SE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[[fE]]}),n})(),IE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[SE]}),n})(),RB=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:nw,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[SE]}),n})();const FB=function(){return{responsive:!0}};let NB=(()=>{class n{constructor(e){this.plotly=e,this.graphData=[],this.value={min:0,max:0},this.minValue=0,this.minColor="#602F72",this.minMidColor="#B14D75",this.midColor="#EEA96E",this.maxValue=0,this.midMaxColor="#EDC0B4",this.maxColor="#F9EFEF",this.graphLayout={title:"Correlation Matrix",width:1e3,height:1e3,xaxis:{tickangle:90}},this._data=new Cu}set data(e){this._data=e,this.graphHeatmap()}get data(){return this._data}downloadPlotlyExtra(e){var a=this;return function(n){return function(){var t=this,e=arguments;return new Promise(function(a,T){var F=n.apply(t,e);function ee(xe){MD(F,a,T,ee,ce,"next",xe)}function ce(xe){MD(F,a,T,ee,ce,"throw",xe)}ee(void 0)})}}(function*(){const T=a.plotly.getInstanceByDivId("heatmap");yield(yield a.plotly.getPlotly()).downloadImage(T,{format:e,width:1e3,height:1e3,filename:"image."+e})})()}ngOnInit(){}graphHeatmap(){this.graphData=[{z:[],x:[],y:[],type:"heatmap",hoverongaps:!1,colorscale:[]}];const e=this.data.getColumnNames();for(const ce of e.slice(1))this.graphData[0].x.push(ce);let a=0,T=0,F=!1,ee=!1;for(const ce of this.data){this.graphData[0].y.push(ce[e[0]]);const xe=[];for(const ft of Object.values(ce).slice(1))"string"==typeof ft?xe.push(parseFloat(ft)):"number"==typeof ft&&xe.push(ft);const Re=Math.min(...xe),$e=Math.max(...xe);ee?$e>T&&(T=$e):(T=$e,ee=!0),F?Re<a&&(a=Re):(a=Re,F=!0),this.graphData[0].z.push(xe)}this.graphLayout.yaxis_nticks=this.graphData[0].y.length,this.graphLayout.xaxis_nticks=this.graphData[0].x.length,this.colorScale(a,T),this.value.min=a,this.value.max=T}colorScale(e,a){const T=(e+a)/2;console.log(T);const F=(T+e)/2;console.log(F);const ee=(T+a)/2;console.log(ee),this.graphData[0].colorscale=[[e,this.minColor],[F,this.minMidColor],[T,this.midColor],[ee,this.midMaxColor],[a,this.maxColor]],this.graphData[0].zmin=e,this.graphData[0].zmax=a,this.graphData=[...this.graphData]}rescale(e){e.stopPropagation(),this.colorScale(this.value.min,this.value.max),console.log(this.graphData)}}return n.\u0275fac=function(e){return new(e||n)(Wn(ko))},n.\u0275cmp=$r({type:n,selectors:[["app-heatmap"]],inputs:{data:"data"},decls:25,vars:8,consts:[[1,"form-row"],[1,"form-group","col-auto"],["for","colorMin",1,"sr-only"],[1,"input-group","mr-2"],[1,"input-group-prepend"],[1,"input-group-text"],["type","number","id","colorMin",1,"form-control",3,"ngModel","ngModelChange"],["for","colorMax",1,"sr-only"],["type","number","id","colorMax",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","col-2"],[1,"btn","btn-primary",3,"click"],["divId","heatmap",3,"data","layout","updateOnLayoutChange","updateOnDataChange","config"],[1,"container","mt-2","mb-2"],[1,"btn","btn-sm","btn-primary","mx-auto",3,"click"]],template:function(e,a){1&e&&(Gr(0,"div"),Gr(1,"div",0),Gr(2,"div",1),Gr(3,"label",2),Qo(4,"Color Scale Minimum"),qr(),Gr(5,"div",3),Gr(6,"div",4),Gr(7,"div",5),Qo(8,"Min"),qr(),qr(),Gr(9,"input",6),ca("ngModelChange",function(F){return a.value.min=F}),qr(),qr(),qr(),Gr(10,"div",1),Gr(11,"label",7),Qo(12,"Color Scale Maximum"),qr(),Gr(13,"div",3),Gr(14,"div",4),Gr(15,"div",5),Qo(16,"Max"),qr(),qr(),Gr(17,"input",8),ca("ngModelChange",function(F){return a.value.max=F}),qr(),qr(),qr(),Gr(18,"div",9),Gr(19,"button",10),ca("click",function(F){return a.rescale(F)}),Qo(20,"Rescale"),qr(),qr(),qr(),qr(),El(21,"plotly-plot",11),Gr(22,"div",12),Gr(23,"button",13),ca("click",function(){return a.downloadPlotlyExtra("svg")}),Qo(24,"Download SVG"),qr(),qr()),2&e&&(Kr(9),li("ngModel",a.value.min),Kr(8),li("ngModel",a.value.max),Kr(4),li("data",a.graphData)("layout",a.graphLayout)("updateOnLayoutChange",!0)("updateOnDataChange",!0)("config",SA(7,FB)))},directives:[tw,G1,nE,ew,qz],styles:[""]}),n})();function zB(n,t){if(1&n&&(Gr(0,"div",0),El(1,"app-heatmap",3),qr()),2&n){const e=Pi();Kr(1),li("data",e.dataframe)}}let BB=(()=>{class n{constructor(){this.dataframe=new Cu,this.title="plotlyHeatmap"}handleFileData(e){this.dataframe=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=$r({type:n,selectors:[["app-root"]],decls:3,vars:1,consts:[[1,"container"],[3,"dataframe"],["class","container",4,"ngIf"],[3,"data"]],template:function(e,a){1&e&&(Gr(0,"div",0),Gr(1,"app-file-uploader",1),ca("dataframe",function(F){return a.handleFileData(F)}),qr(),qr(),function(n,t,e,a,T,F,ee,ce){const xe=Ar(),Re=Di(),$e=n+20,ft=Re.firstCreatePass?function(n,t,e,a,T,F,ee,ce,xe){const Re=t.consts,$e=Kf(t,n,4,ee||null,ur(Re,ce));gd(t,e,$e,ur(Re,xe)),Dc(t,$e);const ft=$e.tViews=Nc(2,$e,a,T,F,t.directiveRegistry,t.pipeRegistry,null,t.schemas,Re);return null!==t.queries&&(t.queries.template(t,$e),ft.queries=t.queries.embeddedTView($e)),$e}($e,Re,xe,t,e,a,T,F,ee):Re.data[$e];Fs(ft,!1);const yt=xe[11].createComment("");ln(Re,xe,yt,ft),$l(yt,xe),bd(xe,xe[$e]=f0(yt,xe,yt,ft)),Ls(ft)&&ks(Re,xe,ft),null!=ee&&Qu(xe,ft,ce)}(2,zB,2,1,"div",2)),2&e&&(Kr(2),li("ngIf",a.dataframe.count()>0))},directives:[Bz,ic,NB],styles:[""]}),n})();var jB=G(918);function Pu(n,t,e,a){return X(e)&&(a=e,e=void 0),a?Pu(n,t,e).pipe(B(T=>r(T)?a(...T):a(T))):new C(T=>{PE(n,t,function(ee){T.next(arguments.length>1?Array.prototype.slice.call(arguments):ee)},T,e)})}function PE(n,t,e,a,T){let F;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const ee=n;n.addEventListener(t,e,T),F=()=>ee.removeEventListener(t,e,T)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const ee=n;n.on(t,e),F=()=>ee.off(t,e)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const ee=n;n.addListener(t,e),F=()=>ee.removeListener(t,e)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let ee=0,ce=n.length;ee<ce;ee++)PE(n[ee],t,e,a,T)}a.add(F)}class GB extends f{constructor(t,e){super()}schedule(t,e=0){return this}}let OE=(()=>{class n{constructor(e,a=n.now){this.SchedulerAction=e,this.now=a}schedule(e,a=0,T){return new this.SchedulerAction(this,e).schedule(T,a)}}return n.now=()=>Date.now(),n})();class zd extends OE{constructor(t,e=OE.now){super(t,()=>zd.delegate&&zd.delegate!==this?zd.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,a){return zd.delegate&&zd.delegate!==this?zd.delegate.schedule(t,e,a):super.schedule(t,e,a)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let a;this.active=!0;do{if(a=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,a){for(;t=e.shift();)t.unsubscribe();throw a}}}const LE=new zd(class extends GB{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const a=this.id,T=this.scheduler;return null!=a&&(this.id=this.recycleAsyncId(T,a,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(T,this.id,e),this}requestAsyncId(t,e,a=0){return setInterval(t.flush.bind(t,this),a)}recycleAsyncId(t,e,a=0){if(null!==a&&this.delay===a&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const a=this._execute(t,e);if(a)return a;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let T,a=!1;try{this.work(t)}catch(F){a=!0,T=!!F&&F||new Error(F)}if(a)return this.unsubscribe(),T}_unsubscribe(){const t=this.id,e=this.scheduler,a=e.actions,T=a.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==T&&a.splice(T,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}});function RE(n){return!r(n)&&n-parseFloat(n)+1>=0}function WB(n){const{index:t,period:e,subscriber:a}=n;if(a.next(t),!a.closed){if(-1===e)return a.complete();n.index=t+1,this.schedule(n,e)}}class $B{call(t,e){return e.subscribe(new YB(t))}}class YB extends Kx{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let a=0;a<e&&!this.hasFirst;a++){const F=Qx(this,t[a],void 0,a);this.subscriptions&&this.subscriptions.push(F),this.add(F)}this.observables=null}}notifyNext(t,e,a){if(!this.hasFirst){this.hasFirst=!0;for(let T=0;T<this.subscriptions.length;T++)if(T!==a){let F=this.subscriptions[T];F.unsubscribe(),this.remove(F)}this.subscriptions=null}this.destination.next(e)}}function Q1(...n){const t=n[n.length-1];return"function"==typeof t&&n.pop(),Oe(n,void 0).lift(new ZB(t))}new C(Sh);class ZB{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new XB(t,this.resultSelector))}}class XB extends g{constructor(t,e,a=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;r(t)?e.push(new KB(t)):e.push("function"==typeof t[te]?new JB(t[te]()):new QB(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let a=0;a<e;a++){let T=t[a];T.stillUnsubscribed?this.destination.add(T.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,a=this.destination;for(let ee=0;ee<e;ee++){let ce=t[ee];if("function"==typeof ce.hasValue&&!ce.hasValue())return}let T=!1;const F=[];for(let ee=0;ee<e;ee++){let ce=t[ee],xe=ce.next();if(ce.hasCompleted()&&(T=!0),xe.done)return void a.complete();F.push(xe.value)}this.resultSelector?this._tryresultSelector(F):a.next(F),T&&a.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(a){return void this.destination.error(a)}this.destination.next(e)}}class JB{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class KB{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[te](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class QB extends ke{constructor(t,e,a){super(t),this.parent=e,this.observable=a,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[te](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return je(this.observable,new Te(this))}}function Sl(n){return t=>t.lift(new tj(n))}class tj{constructor(t){this.notifier=t}call(t,e){const a=new nj(t),T=je(this.notifier,new Te(a));return T&&!a.seenValue?(a.add(T),e.subscribe(a)):a}}class nj extends ke{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function cw(...n){return t=>{let e;return"function"==typeof n[n.length-1]&&(e=n.pop()),t.lift(new aj(n,e))}}class aj{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new oj(t,this.observables,this.project))}}class oj extends Kx{constructor(t,e,a){super(t),this.observables=e,this.project=a,this.toRespond=[];const T=e.length;this.values=new Array(T);for(let F=0;F<T;F++)this.toRespond.push(F);for(let F=0;F<T;F++)this.add(Qx(this,e[F],void 0,F))}notifyNext(t,e,a){this.values[a]=e;const T=this.toRespond;if(T.length>0){const F=T.indexOf(a);-1!==F&&T.splice(F,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(a){return void this.destination.error(a)}this.destination.next(e)}}class Bf{constructor(t,e,a){this.kind=t,this.value=e,this.error=a,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,a){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return a&&a()}}accept(t,e,a){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,a)}toObservable(){switch(this.kind){case"N":return Ia(this.value);case"E":return function(n,t){return new C(e=>e.error(n))}(this.error);case"C":return d1()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new Bf("N",t):Bf.undefinedValueNotification}static createError(t){return new Bf("E",void 0,t)}static createComplete(){return Bf.completeNotification}}Bf.completeNotification=new Bf("C"),Bf.undefinedValueNotification=new Bf("N",void 0);const lg=["*"],nV=["dialog"];function Bd(n){return null!=n}function cg(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(n){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(n))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});const UE={animation:!0,transitionTimerDelayMs:5};let pu=(()=>{class n{constructor(){this.animation=UE.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Mn({factory:function(){return new n},token:n,providedIn:"root"}),n})();const pU=()=>{},{transitionTimerDelayMs:gU}=UE,hy=new Map,Ql=(n,t,e,a)=>{let T=a.context||{};const F=hy.get(t);if(F)switch(a.runningTransition){case"continue":return Ap;case"stop":n.run(()=>F.transition$.complete()),T=Object.assign(F.context,T),hy.delete(t)}const ee=e(t,a.animation,T)||pU;if(!a.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>ee()),Ia(void 0).pipe(function(n){return t=>new C(e=>t.subscribe(ee=>n.run(()=>e.next(ee)),ee=>n.run(()=>e.error(ee)),()=>n.run(()=>e.complete())))}(n));const ce=new R,xe=new R,Re=ce.pipe(function(...n){return t=>h1(t,Ia(...n))}(!0));hy.set(t,{transition$:ce,complete:()=>{xe.next(),xe.complete()},context:T});const $e=function(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const ft=Pu(t,"transitionend").pipe(Sl(Re),Vl(({target:Ot})=>Ot===t));(function(...n){if(1===n.length){if(!r(n[0]))return n[0];n=n[0]}return Oe(n,void 0).lift(new $B)})(function(n=0,t,e){let a=-1;return RE(t)?a=Number(t)<1?1:Number(t):N(t)&&(e=t),N(e)||(e=LE),new C(T=>{const F=RE(n)?n:+n-e.now();return e.schedule(WB,F,{index:0,period:a,subscriber:T})})}($e+gU).pipe(Sl(Re)),ft,xe).pipe(Sl(Re)).subscribe(()=>{hy.delete(t),n.run(()=>{ee(),ce.next(),ce.complete()})})}),ce.asObservable()};let $E=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[[Mu]]}),n})(),YE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[[Mu]]}),n})(),XE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({}),n})(),QE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[[Mu]]}),n})(),eC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({}),n})();var ho=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(ho||(ho={})),ho))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const aC=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function oC(n){const t=Array.from(n.querySelectorAll(aC)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let a,T={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))a=t.getBoundingClientRect(),a={top:a.top,bottom:a.bottom,left:a.left,right:a.right,height:a.height,width:a.width};else{const F=this.offsetParent(t);a=this.offset(t,!1),F!==document.documentElement&&(T=this.offset(F,!1)),T.top+=F.clientTop,T.left+=F.clientLeft}return a.top-=T.top,a.bottom-=T.top,a.left-=T.left,a.right-=T.left,e&&(a.top=Math.round(a.top),a.bottom=Math.round(a.bottom),a.left=Math.round(a.left),a.right=Math.round(a.right)),a}offset(t,e=!0){const a=t.getBoundingClientRect(),T_top=window.pageYOffset-document.documentElement.clientTop,T_left=window.pageXOffset-document.documentElement.clientLeft;let F={height:a.height||t.offsetHeight,width:a.width||t.offsetWidth,top:a.top+T_top,bottom:a.bottom+T_top,left:a.left+T_left,right:a.right+T_left};return e&&(F.height=Math.round(F.height),F.width=Math.round(F.width),F.top=Math.round(F.top),F.bottom=Math.round(F.bottom),F.left=Math.round(F.left),F.right=Math.round(F.right)),F}positionElements(t,e,a,T){const[F="top",ee="center"]=a.split("-"),ce=T?this.offset(t,!1):this.position(t,!1),xe=this.getAllStyles(e),Re=parseFloat(xe.marginTop),$e=parseFloat(xe.marginBottom),ft=parseFloat(xe.marginLeft),yt=parseFloat(xe.marginRight);let Ot=0,nn=0;switch(F){case"top":Ot=ce.top-(e.offsetHeight+Re+$e);break;case"bottom":Ot=ce.top+ce.height;break;case"left":nn=ce.left-(e.offsetWidth+ft+yt);break;case"right":nn=ce.left+ce.width}switch(ee){case"top":Ot=ce.top;break;case"bottom":Ot=ce.top+ce.height-e.offsetHeight;break;case"left":nn=ce.left;break;case"right":nn=ce.left+ce.width-e.offsetWidth;break;case"center":"top"===F||"bottom"===F?nn=ce.left+ce.width/2-e.offsetWidth/2:Ot=ce.top+ce.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(nn)}px, ${Math.round(Ot)}px)`;const _n=e.getBoundingClientRect(),kn=document.documentElement,Kn=window.innerHeight||kn.clientHeight,jn=window.innerWidth||kn.clientWidth;return _n.left>=0&&_n.top>=0&&_n.right<=jn&&_n.bottom<=Kn}},new Date(1882,10,12),new Date(2174,10,25);let mC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[[Mu,IE]]}),n})(),_C=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({}),n})(),xC=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(Hr(pu))},n.\u0275prov=Mn({factory:function(){return new n(Hr(pu))},token:n,providedIn:"root"}),n})();class zp{constructor(t,e,a){this.nodes=t,this.viewRef=e,this.componentRef=a}}const hH=()=>{};let wC=(()=>{class n{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):hH}_adjustBody(e){const a=this._document.body,T=a.style.paddingRight,F=parseFloat(window.getComputedStyle(a)["padding-right"]);return a.style["padding-right"]=`${F+e}px`,()=>a.style["padding-right"]=T}_isPresent(e){const a=this._document.body.getBoundingClientRect();return window.innerWidth-(a.left+a.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const a=this._document.body;a.appendChild(e);const T=e.getBoundingClientRect().width-e.clientWidth;return a.removeChild(e),T}}return n.\u0275fac=function(e){return new(e||n)(Hr(ss))},n.\u0275prov=Mn({factory:function(){return new n(Hr(ss))},token:n,providedIn:"root"}),n})(),dH=(()=>{class n{constructor(e,a){this._el=e,this._zone=a}ngOnInit(){this._zone.onStable.asObservable().pipe(ac(1)).subscribe(()=>{Ql(this._zone,this._el.nativeElement,(e,a)=>{a&&cg(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Ql(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(Wn(ro),Wn(Ao))},n.\u0275cmp=$r({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(e,a){2&e&&(Mf("modal-backdrop"+(a.backdropClass?" "+a.backdropClass:"")),Za("show",!a.animation)("fade",a.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,a){},encapsulation:2}),n})();class TC{close(t){}dismiss(t){}}class pH{constructor(t,e,a,T){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=a,this._beforeDismiss=T,this._closed=new R,this._dismissed=new R,this._hidden=new R,t.instance.dismissEvent.subscribe(F=>{this.dismiss(F)}),this.result=new Promise((F,ee)=>{this._resolve=F,this._reject=ee}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Sl(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Sl(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(a=>{!1!==a&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Ia(void 0);t.subscribe(()=>{const{nativeElement:a}=this._windowCmptRef.location;a.parentNode.removeChild(a),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:a}=this._backdropCmptRef.location;a.parentNode.removeChild(a),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Q1(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var vy=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(vy||(vy={})),vy))();let gH=(()=>{class n{constructor(e,a,T){this._document=e,this._elRef=a,this._zone=T,this._closed$=new R,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new bi,this.shown=new R,this.hidden=new R}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(ac(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,a={animation:this.animation,runningTransition:"stop"},ee=Q1(Ql(this._zone,e,()=>e.classList.remove("show"),a),Ql(this._zone,this._dialogEl.nativeElement,()=>{},a));return ee.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),ee}_show(){const e={animation:this.animation,runningTransition:"continue"};Q1(Ql(this._zone,this._elRef.nativeElement,(F,ee)=>{ee&&cg(F),F.classList.add("show")},e),Ql(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Pu(e,"keydown").pipe(Sl(this._closed$),Vl(T=>T.which===ho.Escape)).subscribe(T=>{this.keyboard?requestAnimationFrame(()=>{T.defaultPrevented||this._zone.run(()=>this.dismiss(vy.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let a=!1;Pu(this._dialogEl.nativeElement,"mousedown").pipe(Sl(this._closed$),ku(()=>a=!1),Nf(()=>Pu(e,"mouseup").pipe(Sl(this._closed$),ac(1))),Vl(({target:T})=>e===T)).subscribe(()=>{a=!0}),Pu(e,"click").pipe(Sl(this._closed$)).subscribe(({target:T})=>{e===T&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!a&&this._zone.run(()=>this.dismiss(vy.BACKDROP_CLICK))),a=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const a=e.querySelector("[ngbAutofocus]"),T=oC(e)[0];(a||T||e).focus()}}_restoreFocus(){const e=this._document.body,a=this._elWithFocus;let T;T=a&&a.focus&&e.contains(a)?a:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>T.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Ql(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(Wn(ss),Wn(ro),Wn(Ao))},n.\u0275cmp=$r({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,a){if(1&e&&kd(nV,7),2&e){let T;as(T=os())&&(a._dialogEl=T.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,a){2&e&&(Lo("aria-modal",!0)("aria-labelledby",a.ariaLabelledBy)("aria-describedby",a.ariaDescribedBy),Mf("modal d-block"+(a.windowClass?" "+a.windowClass:"")),Za("fade",a.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:lg,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,a){1&e&&(wd(),Gr(0,"div",0,1),Gr(2,"div",2),Td(3),qr(),qr()),2&e&&Mf("modal-dialog"+(a.size?" modal-"+a.size:"")+(a.centered?" modal-dialog-centered":"")+(a.scrollable?" modal-dialog-scrollable":"")+(a.modalDialogClass?" "+a.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),n})(),AC=(()=>{class n{constructor(e,a,T,F,ee,ce){this._applicationRef=e,this._injector=a,this._document=T,this._scrollBar=F,this._rendererFactory=ee,this._ngZone=ce,this._activeWindowCmptHasChanged=new R,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new bi,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const xe=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,a=!1)=>{n.runOutsideAngular(()=>{const T=Pu(t,"focusin").pipe(Sl(e),B(F=>F.target));Pu(t,"keydown").pipe(Sl(e),Vl(F=>F.which===ho.Tab),cw(T)).subscribe(([F,ee])=>{const[ce,xe]=oC(t);(ee===ce||ee===t)&&F.shiftKey&&(xe.focus(),F.preventDefault()),ee===xe&&!F.shiftKey&&(ce.focus(),F.preventDefault())}),a&&Pu(t,"click").pipe(Sl(e),cw(T),B(F=>F[1])).subscribe(F=>F.focus())})})(this._ngZone,xe.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(xe.location.nativeElement)}})}open(e,a,T,F){const ee=F.container instanceof HTMLElement?F.container:Bd(F.container)?this._document.querySelector(F.container):this._document.body,ce=this._rendererFactory.createRenderer(null,null),xe=this._scrollBar.compensate(),Re=()=>{this._modalRefs.length||(ce.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!ee)throw new Error(`The specified modal container "${F.container||"body"}" was not found in the DOM.`);const $e=new TC,ft=this._getContentRef(e,F.injector||a,T,$e,F);let yt=!1!==F.backdrop?this._attachBackdrop(e,ee):void 0,Ot=this._attachWindowComponent(e,ee,ft),nn=new pH(Ot,ft,yt,F.beforeDismiss);return this._registerModalRef(nn),this._registerWindowCmpt(Ot),nn.result.then(xe,xe),nn.result.then(Re,Re),$e.close=_n=>{nn.close(_n)},$e.dismiss=_n=>{nn.dismiss(_n)},this._applyWindowOptions(Ot.instance,F),1===this._modalRefs.length&&ce.addClass(this._document.body,"modal-open"),yt&&yt.instance&&(this._applyBackdropOptions(yt.instance,F),yt.changeDetectorRef.detectChanges()),Ot.changeDetectorRef.detectChanges(),nn}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(a=>a.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,a){let F=e.resolveComponentFactory(dH).create(this._injector);return this._applicationRef.attachView(F.hostView),a.appendChild(F.location.nativeElement),F}_attachWindowComponent(e,a,T){let ee=e.resolveComponentFactory(gH).create(this._injector,T.nodes);return this._applicationRef.attachView(ee.hostView),a.appendChild(ee.location.nativeElement),ee}_applyWindowOptions(e,a){this._windowAttributes.forEach(T=>{Bd(a[T])&&(e[T]=a[T])})}_applyBackdropOptions(e,a){this._backdropAttributes.forEach(T=>{Bd(a[T])&&(e[T]=a[T])})}_getContentRef(e,a,T,F,ee){return T?T instanceof js?this._createFromTemplateRef(T,F):function(n){return"string"==typeof n}(T)?this._createFromString(T):this._createFromComponent(e,a,T,F,ee):new zp([])}_createFromTemplateRef(e,a){const F=e.createEmbeddedView({$implicit:a,close(ee){a.close(ee)},dismiss(ee){a.dismiss(ee)}});return this._applicationRef.attachView(F),new zp([F.rootNodes],F)}_createFromString(e){const a=this._document.createTextNode(`${e}`);return new zp([[a]])}_createFromComponent(e,a,T,F,ee){const ce=e.resolveComponentFactory(T),xe=no.create({providers:[{provide:TC,useValue:F}],parent:a}),Re=ce.create(xe),$e=Re.location.nativeElement;return ee.scrollable&&$e.classList.add("component-host-scrollable"),this._applicationRef.attachView(Re.hostView),new zp([[$e]],Re.hostView,Re)}_setAriaHidden(e){const a=e.parentElement;a&&e!==this._document.body&&(Array.from(a.children).forEach(T=>{T!==e&&"SCRIPT"!==T.nodeName&&(this._ariaHiddenValues.set(T,T.getAttribute("aria-hidden")),T.setAttribute("aria-hidden","true"))}),this._setAriaHidden(a))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,a)=>{e?a.setAttribute("aria-hidden",e):a.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const a=()=>{const T=this._modalRefs.indexOf(e);T>-1&&(this._modalRefs.splice(T,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(a,a)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const a=this._windowCmpts.indexOf(e);a>-1&&(this._windowCmpts.splice(a,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(Hr(If),Hr(no),Hr(ss),Hr(wC),Hr(O0),Hr(Ao))},n.\u0275prov=Mn({factory:function(){return new n(Hr(If),Hr(xd),Hr(ss),Hr(wC),Hr(O0),Hr(Ao))},token:n,providedIn:"root"}),n})(),mH=(()=>{class n{constructor(e,a,T,F){this._moduleCFR=e,this._injector=a,this._modalStack=T,this._config=F}open(e,a={}){const T=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),a);return this._modalStack.open(this._moduleCFR,this._injector,e,T)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(Hr(yc),Hr(no),Hr(AC),Hr(xC))},n.\u0275prov=Mn({factory:function(){return new n(Hr(yc),Hr(xd),Hr(AC),Hr(xC))},token:n,providedIn:"root"}),n})(),MC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({providers:[mH]}),n})(),CC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[[Mu]]}),n})(),NC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[[Mu]]}),n})(),jC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[[Mu]]}),n})(),VC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[[Mu]]}),n})(),UC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[[Mu]]}),n})(),WC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[[Mu]]}),n})(),$C=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[[Mu]]}),n})(),YC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({}),n})();new Ta("live announcer delay",{providedIn:"root",factory:function(){return 100}});let JC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[[Mu]]}),n})();const QH=[$E,YE,XE,QE,eC,mC,_C,MC,CC,NC,jC,VC,UC,WC,$C,YC,JC];let eG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n}),n.\u0275inj=sn({imports:[QH,$E,YE,XE,QE,eC,mC,_C,MC,CC,NC,jC,VC,UC,WC,$C,YC,JC]}),n})();SD.plotlyjs=jB;let tG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=wi({type:n,bootstrap:[BB]}),n.\u0275inj=sn({providers:[],imports:[[hL,QF,SD,eG,Nz,RB,IE]]}),n})();(function(){if(pM)throw new Error("Cannot enable prod mode after platform setup.");dM=!1})(),cL().bootstrapModule(tG).catch(n=>console.error(n))}},es=>{es(es.s=624)}]);